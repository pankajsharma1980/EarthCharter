(self.webpackChunkearth_charter=self.webpackChunkearth_charter||[]).push([[179],{255:bh=>{function b(oe){return Promise.resolve().then(()=>{var se=new Error("Cannot find module '"+oe+"'");throw se.code="MODULE_NOT_FOUND",se})}b.keys=()=>[],b.resolve=b,b.id=255,bh.exports=b},918:bh=>{bh.exports=function b(oe,se,y){function x(e,o){if(!se[e]){if(!oe[e]){if(M)return M(e,!0);var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}var i=se[e]={exports:{}};oe[e][0].call(i.exports,function(v){return x(oe[e][1][v]||v)},i,i.exports,b,oe,se,y)}return se[e].exports}for(var M=void 0,_=0;_<y.length;_++)x(y[_]);return x}({1:[function(b,oe,se){"use strict";var y=b("../src/lib"),x={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var M in x){var _=M.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");y.addStyleRule(_,x[M])}},{"../src/lib":503}],2:[function(b,oe,se){"use strict";oe.exports=b("../src/transforms/aggregate")},{"../src/transforms/aggregate":1118}],3:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/bar")},{"../src/traces/bar":656}],4:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/barpolar")},{"../src/traces/barpolar":669}],5:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/box")},{"../src/traces/box":679}],6:[function(b,oe,se){"use strict";oe.exports=b("../src/components/calendars")},{"../src/components/calendars":364}],7:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/candlestick")},{"../src/traces/candlestick":688}],8:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/carpet")},{"../src/traces/carpet":707}],9:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/choropleth")},{"../src/traces/choropleth":721}],10:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":728}],11:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/cone")},{"../src/traces/cone":734}],12:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/contour")},{"../src/traces/contour":749}],13:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":760}],14:[function(b,oe,se){"use strict";oe.exports=b("../src/core")},{"../src/core":481}],15:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":768}],16:[function(b,oe,se){"use strict";oe.exports=b("../src/transforms/filter")},{"../src/transforms/filter":1119}],17:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/funnel")},{"../src/traces/funnel":778}],18:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/funnelarea")},{"../src/traces/funnelarea":787}],19:[function(b,oe,se){"use strict";oe.exports=b("../src/transforms/groupby")},{"../src/transforms/groupby":1120}],20:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/heatmap")},{"../src/traces/heatmap":800}],21:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":811}],22:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/histogram")},{"../src/traces/histogram":823}],23:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/histogram2d")},{"../src/traces/histogram2d":829}],24:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":833}],25:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/icicle")},{"../src/traces/icicle":839}],26:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/image")},{"../src/traces/image":852}],27:[function(b,oe,se){"use strict";var y=b("./core");y.register([b("./bar"),b("./box"),b("./heatmap"),b("./histogram"),b("./histogram2d"),b("./histogram2dcontour"),b("./contour"),b("./scatterternary"),b("./violin"),b("./funnel"),b("./waterfall"),b("./image"),b("./pie"),b("./sunburst"),b("./treemap"),b("./icicle"),b("./funnelarea"),b("./scatter3d"),b("./surface"),b("./isosurface"),b("./volume"),b("./mesh3d"),b("./cone"),b("./streamtube"),b("./scattergeo"),b("./choropleth"),b("./scattergl"),b("./splom"),b("./pointcloud"),b("./heatmapgl"),b("./parcoords"),b("./parcats"),b("./scattermapbox"),b("./choroplethmapbox"),b("./densitymapbox"),b("./sankey"),b("./indicator"),b("./table"),b("./carpet"),b("./scattercarpet"),b("./contourcarpet"),b("./ohlc"),b("./candlestick"),b("./scatterpolar"),b("./scatterpolargl"),b("./barpolar"),b("./scattersmith"),b("./aggregate"),b("./filter"),b("./groupby"),b("./sort"),b("./calendars")]),oe.exports=y},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/indicator")},{"../src/traces/indicator":860}],29:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/isosurface")},{"../src/traces/isosurface":866}],30:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/mesh3d")},{"../src/traces/mesh3d":871}],31:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/ohlc")},{"../src/traces/ohlc":876}],32:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/parcats")},{"../src/traces/parcats":885}],33:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/parcoords")},{"../src/traces/parcoords":896}],34:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/pie")},{"../src/traces/pie":907}],35:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/pointcloud")},{"../src/traces/pointcloud":916}],36:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/sankey")},{"../src/traces/sankey":922}],37:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/scatter3d")},{"../src/traces/scatter3d":960}],38:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":967}],39:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/scattergeo")},{"../src/traces/scattergeo":975}],40:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/scattergl")},{"../src/traces/scattergl":989}],41:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":999}],42:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1007}],43:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1015}],44:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/scattersmith")},{"../src/traces/scattersmith":1022}],45:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/scatterternary")},{"../src/traces/scatterternary":1030}],46:[function(b,oe,se){"use strict";oe.exports=b("../src/transforms/sort")},{"../src/transforms/sort":1122}],47:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/splom")},{"../src/traces/splom":1040}],48:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/streamtube")},{"../src/traces/streamtube":1048}],49:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/sunburst")},{"../src/traces/sunburst":1056}],50:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/surface")},{"../src/traces/surface":1065}],51:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/table")},{"../src/traces/table":1073}],52:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/treemap")},{"../src/traces/treemap":1084}],53:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/violin")},{"../src/traces/violin":1097}],54:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/volume")},{"../src/traces/volume":1105}],55:[function(b,oe,se){"use strict";oe.exports=b("../src/traces/waterfall")},{"../src/traces/waterfall":1113}],56:[function(b,oe,se){var y,x;y=this,x=function(y,x,M,_,e){"use strict";function o(le){return le.target.depth}function a(le,ue){return le.sourceLinks.length?le.depth:ue-1}function l(le){return function(){return le}}e=e&&e.hasOwnProperty("default")?e.default:e;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(le){return typeof le}:function(le){return le&&"function"==typeof Symbol&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le};function v(le,ue){return s(le.source,ue.source)||le.index-ue.index}function h(le,ue){return s(le.target,ue.target)||le.index-ue.index}function s(le,ue){return le.partOfCycle===ue.partOfCycle?le.y0-ue.y0:"top"===le.circularLinkType||"bottom"===ue.circularLinkType?-1:1}function d(le){return le.value}function p(le){return(le.y0+le.y1)/2}function f(le){return p(le.source)}function g(le){return p(le.target)}function m(le){return le.index}function u(le){return le.nodes}function w(le){return le.links}function c(le,ue){var pe=le.get(ue);if(!pe)throw new Error("missing: "+ue);return pe}function A(le,ue){return ue(le)}function k(le,ue,pe){var de=0;if(null===pe){for(var _e=[],me=0;me<le.links.length;me++){var we=le.links[me],De=we.source.index,Le=we.target.index;_e[De]||(_e[De]=[]),_e[Le]||(_e[Le]=[]),-1===_e[De].indexOf(Le)&&_e[De].push(Le)}var Ie=e(_e);Ie.sort(function(Me,Oe){return Me.length-Oe.length});var je={};for(me=0;me<Ie.length;me++){var ye=Ie[me].slice(-2);je[ye[0]]||(je[ye[0]]={}),je[ye[0]][ye[1]]=!0}le.links.forEach(function(Me){var Oe=Me.target.index,Pe=Me.source.index;Oe===Pe||je[Pe]&&je[Pe][Oe]?(Me.circular=!0,Me.circularLinkID=de,de+=1):Me.circular=!1})}else le.links.forEach(function(Me){Me.source[pe]<Me.target[pe]?Me.circular=!1:(Me.circular=!0,Me.circularLinkID=de,de+=1)})}function C(le,ue){var pe=0,de=0;le.links.forEach(function(_e){_e.circular&&(_e.circularLinkType=_e.source.circularLinkType||_e.target.circularLinkType?_e.source.circularLinkType?_e.source.circularLinkType:_e.target.circularLinkType:pe<de?"top":"bottom","top"==_e.circularLinkType?pe+=1:de+=1,le.nodes.forEach(function(me){A(me,ue)!=A(_e.source,ue)&&A(me,ue)!=A(_e.target,ue)||(me.circularLinkType=_e.circularLinkType)}))}),le.links.forEach(function(_e){_e.circular&&(_e.source.circularLinkType==_e.target.circularLinkType&&(_e.circularLinkType=_e.source.circularLinkType),te(_e,ue)&&(_e.circularLinkType=_e.source.circularLinkType))})}function E(le){var ue=Math.abs(le.y1-le.y0),pe=Math.abs(le.target.x0-le.source.x1);return Math.atan(pe/ue)}function L(le,ue){var pe=0;le.sourceLinks.forEach(function(_e){pe=_e.circular&&!te(_e,ue)?pe+1:pe});var de=0;return le.targetLinks.forEach(function(_e){de=_e.circular&&!te(_e,ue)?de+1:de}),pe+de}function D(le){var pe=0;le.source.sourceLinks.forEach(function(me){pe=me.circular?pe+1:pe});var _e=0;return le.target.targetLinks.forEach(function(me){_e=me.circular?_e+1:_e}),!(pe>1||_e>1)}function N(le,ue,pe){return le.sort(I),le.forEach(function(de,_e){var me,we,De=0;if(te(de,pe)&&D(de))de.circularPathData.verticalBuffer=De+de.width/2;else{for(var Le=0;Le<_e;Le++)if(!((me=le[_e]).source.column<(we=le[Le]).target.column||me.target.column>we.source.column)){var Ie=le[Le].circularPathData.verticalBuffer+le[Le].width/2+ue;De=Ie>De?Ie:De}de.circularPathData.verticalBuffer=De+de.width/2}}),le}function F(le,ue,pe,de){var _e=x.min(le.links,function(me){return me.source.y0});le.links.forEach(function(me){me.circular&&(me.circularPathData={})}),N(le.links.filter(function(me){return"top"==me.circularLinkType}),ue,de),N(le.links.filter(function(me){return"bottom"==me.circularLinkType}),ue,de),le.links.forEach(function(me){if(me.circular){if(me.circularPathData.arcRadius=me.width+10,me.circularPathData.leftNodeBuffer=5,me.circularPathData.rightNodeBuffer=5,me.circularPathData.sourceWidth=me.source.x1-me.source.x0,me.circularPathData.sourceX=me.source.x0+me.circularPathData.sourceWidth,me.circularPathData.targetX=me.target.x0,me.circularPathData.sourceY=me.y0,me.circularPathData.targetY=me.y1,te(me,de)&&D(me))me.circularPathData.leftSmallArcRadius=10+me.width/2,me.circularPathData.leftLargeArcRadius=10+me.width/2,me.circularPathData.rightSmallArcRadius=10+me.width/2,me.circularPathData.rightLargeArcRadius=10+me.width/2,"bottom"==me.circularLinkType?(me.circularPathData.verticalFullExtent=me.source.y1+25+me.circularPathData.verticalBuffer,me.circularPathData.verticalLeftInnerExtent=me.circularPathData.verticalFullExtent-me.circularPathData.leftLargeArcRadius,me.circularPathData.verticalRightInnerExtent=me.circularPathData.verticalFullExtent-me.circularPathData.rightLargeArcRadius):(me.circularPathData.verticalFullExtent=me.source.y0-25-me.circularPathData.verticalBuffer,me.circularPathData.verticalLeftInnerExtent=me.circularPathData.verticalFullExtent+me.circularPathData.leftLargeArcRadius,me.circularPathData.verticalRightInnerExtent=me.circularPathData.verticalFullExtent+me.circularPathData.rightLargeArcRadius);else{var we=me.source.column,De=me.circularLinkType,Le=le.links.filter(function(ye){return ye.source.column==we&&ye.circularLinkType==De});Le.sort("bottom"==me.circularLinkType?j:P);var Ie=0;Le.forEach(function(ye,Me){ye.circularLinkID==me.circularLinkID&&(me.circularPathData.leftSmallArcRadius=10+me.width/2+Ie,me.circularPathData.leftLargeArcRadius=10+me.width/2+Me*ue+Ie),Ie+=ye.width}),we=me.target.column,(Le=le.links.filter(function(ye){return ye.target.column==we&&ye.circularLinkType==De})).sort("bottom"==me.circularLinkType?Z:V),Ie=0,Le.forEach(function(ye,Me){ye.circularLinkID==me.circularLinkID&&(me.circularPathData.rightSmallArcRadius=10+me.width/2+Ie,me.circularPathData.rightLargeArcRadius=10+me.width/2+Me*ue+Ie),Ie+=ye.width}),"bottom"==me.circularLinkType?(me.circularPathData.verticalFullExtent=Math.max(pe,me.source.y1,me.target.y1)+25+me.circularPathData.verticalBuffer,me.circularPathData.verticalLeftInnerExtent=me.circularPathData.verticalFullExtent-me.circularPathData.leftLargeArcRadius,me.circularPathData.verticalRightInnerExtent=me.circularPathData.verticalFullExtent-me.circularPathData.rightLargeArcRadius):(me.circularPathData.verticalFullExtent=_e-25-me.circularPathData.verticalBuffer,me.circularPathData.verticalLeftInnerExtent=me.circularPathData.verticalFullExtent+me.circularPathData.leftLargeArcRadius,me.circularPathData.verticalRightInnerExtent=me.circularPathData.verticalFullExtent+me.circularPathData.rightLargeArcRadius)}me.circularPathData.leftInnerExtent=me.circularPathData.sourceX+me.circularPathData.leftNodeBuffer,me.circularPathData.rightInnerExtent=me.circularPathData.targetX-me.circularPathData.rightNodeBuffer,me.circularPathData.leftFullExtent=me.circularPathData.sourceX+me.circularPathData.leftLargeArcRadius+me.circularPathData.leftNodeBuffer,me.circularPathData.rightFullExtent=me.circularPathData.targetX-me.circularPathData.rightLargeArcRadius-me.circularPathData.rightNodeBuffer}if(me.circular)me.path="top"==(ye=me).circularLinkType?"M"+ye.circularPathData.sourceX+" "+ye.circularPathData.sourceY+" L"+ye.circularPathData.leftInnerExtent+" "+ye.circularPathData.sourceY+" A"+ye.circularPathData.leftLargeArcRadius+" "+ye.circularPathData.leftSmallArcRadius+" 0 0 0 "+ye.circularPathData.leftFullExtent+" "+(ye.circularPathData.sourceY-ye.circularPathData.leftSmallArcRadius)+" L"+ye.circularPathData.leftFullExtent+" "+ye.circularPathData.verticalLeftInnerExtent+" A"+ye.circularPathData.leftLargeArcRadius+" "+ye.circularPathData.leftLargeArcRadius+" 0 0 0 "+ye.circularPathData.leftInnerExtent+" "+ye.circularPathData.verticalFullExtent+" L"+ye.circularPathData.rightInnerExtent+" "+ye.circularPathData.verticalFullExtent+" A"+ye.circularPathData.rightLargeArcRadius+" "+ye.circularPathData.rightLargeArcRadius+" 0 0 0 "+ye.circularPathData.rightFullExtent+" "+ye.circularPathData.verticalRightInnerExtent+" L"+ye.circularPathData.rightFullExtent+" "+(ye.circularPathData.targetY-ye.circularPathData.rightSmallArcRadius)+" A"+ye.circularPathData.rightLargeArcRadius+" "+ye.circularPathData.rightSmallArcRadius+" 0 0 0 "+ye.circularPathData.rightInnerExtent+" "+ye.circularPathData.targetY+" L"+ye.circularPathData.targetX+" "+ye.circularPathData.targetY:"M"+ye.circularPathData.sourceX+" "+ye.circularPathData.sourceY+" L"+ye.circularPathData.leftInnerExtent+" "+ye.circularPathData.sourceY+" A"+ye.circularPathData.leftLargeArcRadius+" "+ye.circularPathData.leftSmallArcRadius+" 0 0 1 "+ye.circularPathData.leftFullExtent+" "+(ye.circularPathData.sourceY+ye.circularPathData.leftSmallArcRadius)+" L"+ye.circularPathData.leftFullExtent+" "+ye.circularPathData.verticalLeftInnerExtent+" A"+ye.circularPathData.leftLargeArcRadius+" "+ye.circularPathData.leftLargeArcRadius+" 0 0 1 "+ye.circularPathData.leftInnerExtent+" "+ye.circularPathData.verticalFullExtent+" L"+ye.circularPathData.rightInnerExtent+" "+ye.circularPathData.verticalFullExtent+" A"+ye.circularPathData.rightLargeArcRadius+" "+ye.circularPathData.rightLargeArcRadius+" 0 0 1 "+ye.circularPathData.rightFullExtent+" "+ye.circularPathData.verticalRightInnerExtent+" L"+ye.circularPathData.rightFullExtent+" "+(ye.circularPathData.targetY+ye.circularPathData.rightSmallArcRadius)+" A"+ye.circularPathData.rightLargeArcRadius+" "+ye.circularPathData.rightSmallArcRadius+" 0 0 1 "+ye.circularPathData.rightInnerExtent+" "+ye.circularPathData.targetY+" L"+ye.circularPathData.targetX+" "+ye.circularPathData.targetY;else{var je=_.linkHorizontal().source(function(ye){return[ye.source.x0+(ye.source.x1-ye.source.x0),ye.y0]}).target(function(ye){return[ye.target.x0,ye.y1]});me.path=je(me)}var ye})}function I(le,ue){return Y(le)==Y(ue)?"bottom"==le.circularLinkType?j(le,ue):P(le,ue):Y(ue)-Y(le)}function P(le,ue){return le.y0-ue.y0}function j(le,ue){return ue.y0-le.y0}function V(le,ue){return le.y1-ue.y1}function Z(le,ue){return ue.y1-le.y1}function Y(le){return le.target.column-le.source.column}function ee(le){return le.target.x0-le.source.x1}function re(le,ue){var pe=E(le),de=ee(ue)/Math.tan(pe);return"up"==G(le)?le.y1+de:le.y1-de}function X(le,ue){var pe=E(le),de=ee(ue)/Math.tan(pe);return"up"==G(le)?le.y1-de:le.y1+de}function K(le,ue,pe,de){le.links.forEach(function(_e){if(!_e.circular&&_e.target.column-_e.source.column>1){var me=_e.source.column+1,we=_e.target.column-1,De=1,Le=we-me+1;for(De=1;me<=we;me++,De++)le.nodes.forEach(function(Ie){if(Ie.column==me){var je,ye=De/(Le+1),Me=Math.pow(1-ye,3),Oe=3*ye*Math.pow(1-ye,2),Pe=3*Math.pow(ye,2)*(1-ye),Re=Math.pow(ye,3),Ue=Me*_e.y0+Oe*_e.y0+Pe*_e.y1+Re*_e.y1,qe=Ue-_e.width/2,Xe=Ue+_e.width/2;qe>Ie.y0&&qe<Ie.y1?(je=Ie.y1-qe+10,Ie=q(Ie,je="bottom"==Ie.circularLinkType?je:-je,ue,pe),le.nodes.forEach(function(lt){A(lt,de)!=A(Ie,de)&&lt.column==Ie.column&&ie(Ie,lt)&&q(lt,je,ue,pe)})):(Xe>Ie.y0&&Xe<Ie.y1||qe<Ie.y0&&Xe>Ie.y1)&&(Ie=q(Ie,je=Xe-Ie.y0+10,ue,pe),le.nodes.forEach(function(lt){A(lt,de)!=A(Ie,de)&&lt.column==Ie.column&&lt.y0<Ie.y1&&lt.y1>Ie.y1&&q(lt,je,ue,pe)}))}})}})}function ie(le,ue){return le.y0>ue.y0&&le.y0<ue.y1||le.y1>ue.y0&&le.y1<ue.y1||le.y0<ue.y0&&le.y1>ue.y1}function q(le,ue,pe,de){return le.y0+ue>=pe&&le.y1+ue<=de&&(le.y0=le.y0+ue,le.y1=le.y1+ue,le.targetLinks.forEach(function(_e){_e.y1=_e.y1+ue}),le.sourceLinks.forEach(function(_e){_e.y0=_e.y0+ue})),le}function U(le,ue,pe,de){le.nodes.forEach(function(_e){de&&_e.y+(_e.y1-_e.y0)>ue&&(_e.y=_e.y-(_e.y+(_e.y1-_e.y0)-ue));var me=le.links.filter(function(Le){return A(Le.source,pe)==A(_e,pe)}),we=me.length;we>1&&me.sort(function(Le,Ie){if(!Le.circular&&!Ie.circular){if(Le.target.column==Ie.target.column||!ae(Le,Ie))return Le.y1-Ie.y1;if(Le.target.column>Ie.target.column){var je=X(Ie,Le);return Le.y1-je}if(Ie.target.column>Le.target.column)return X(Le,Ie)-Ie.y1}return Le.circular&&!Ie.circular?"top"==Le.circularLinkType?-1:1:Ie.circular&&!Le.circular?"top"==Ie.circularLinkType?1:-1:Le.circular&&Ie.circular?Le.circularLinkType===Ie.circularLinkType&&"top"==Le.circularLinkType?Le.target.column===Ie.target.column?Le.target.y1-Ie.target.y1:Ie.target.column-Le.target.column:Le.circularLinkType===Ie.circularLinkType&&"bottom"==Le.circularLinkType?Le.target.column===Ie.target.column?Ie.target.y1-Le.target.y1:Le.target.column-Ie.target.column:"top"==Le.circularLinkType?-1:1:void 0});var De=_e.y0;me.forEach(function(Le){Le.y0=De+Le.width/2,De+=Le.width}),me.forEach(function(Le,Ie){if("bottom"==Le.circularLinkType){for(var je=Ie+1,ye=0;je<we;je++)ye+=me[je].width;Le.y0=_e.y1-ye-Le.width/2}})})}function W(le,ue,pe){le.nodes.forEach(function(de){var _e=le.links.filter(function(De){return A(De.target,pe)==A(de,pe)}),me=_e.length;me>1&&_e.sort(function(De,Le){if(!De.circular&&!Le.circular){if(De.source.column==Le.source.column||!ae(De,Le))return De.y0-Le.y0;if(Le.source.column<De.source.column){var Ie=re(Le,De);return De.y0-Ie}if(De.source.column<Le.source.column)return re(De,Le)-Le.y0}return De.circular&&!Le.circular?"top"==De.circularLinkType?-1:1:Le.circular&&!De.circular?"top"==Le.circularLinkType?1:-1:De.circular&&Le.circular?De.circularLinkType===Le.circularLinkType&&"top"==De.circularLinkType?De.source.column===Le.source.column?De.source.y1-Le.source.y1:De.source.column-Le.source.column:De.circularLinkType===Le.circularLinkType&&"bottom"==De.circularLinkType?De.source.column===Le.source.column?De.source.y1-Le.source.y1:Le.source.column-De.source.column:"top"==De.circularLinkType?-1:1:void 0});var we=de.y0;_e.forEach(function(De){De.y1=we+De.width/2,we+=De.width}),_e.forEach(function(De,Le){if("bottom"==De.circularLinkType){for(var Ie=Le+1,je=0;Ie<me;Ie++)je+=_e[Ie].width;De.y1=de.y1-je-De.width/2}})})}function ae(le,ue){return G(le)==G(ue)}function G(le){return le.y0-le.y1>0?"up":"down"}function te(le,ue){return A(le.source,ue)==A(le.target,ue)}function ne(le,ue,pe){var de=le.nodes,_e=le.links,me=!1,we=!1;if(_e.forEach(function(Ie){"top"==Ie.circularLinkType?me=!0:"bottom"==Ie.circularLinkType&&(we=!0)}),0==me||0==we){var De=x.min(de,function(Ie){return Ie.y0}),Le=(pe-ue)/(x.max(de,function(Ie){return Ie.y1})-De);de.forEach(function(Ie){var je=(Ie.y1-Ie.y0)*Le;Ie.y0=(Ie.y0-De)*Le,Ie.y1=Ie.y0+je}),_e.forEach(function(Ie){Ie.y0=(Ie.y0-De)*Le,Ie.y1=(Ie.y1-De)*Le,Ie.width=Ie.width*Le})}}y.sankeyCircular=function(){var le,ue,pe=0,de=0,_e=1,me=1,we=24,De=m,Le=a,Ie=u,je=w,ye=32,Me=2,Oe=null;function Pe(){var He={nodes:Ie.apply(null,arguments),links:je.apply(null,arguments)};Re(He),k(He,0,Oe),Ue(He),qe(He),C(He,De),Xe(He,ye,De),lt(He);for(var $e=4,et=0;et<$e;et++)U(He,me,De),W(He,0,De),K(He,de,me,De),U(He,me,De),W(He,0,De);return ne(He,de,me),F(He,Me,me,De),He}function Re(He){He.nodes.forEach(function(et,nt){et.index=nt,et.sourceLinks=[],et.targetLinks=[]});var $e=M.map(He.nodes,De);return He.links.forEach(function(et,nt){et.index=nt;var ct=et.source,bt=et.target;"object"!==(void 0===ct?"undefined":i(ct))&&(ct=et.source=c($e,ct)),"object"!==(void 0===bt?"undefined":i(bt))&&(bt=et.target=c($e,bt)),ct.sourceLinks.push(et),bt.targetLinks.push(et)}),He}function Ue(He){He.nodes.forEach(function($e){$e.partOfCycle=!1,$e.value=Math.max(x.sum($e.sourceLinks,d),x.sum($e.targetLinks,d)),$e.sourceLinks.forEach(function(et){et.circular&&($e.partOfCycle=!0,$e.circularLinkType=et.circularLinkType)}),$e.targetLinks.forEach(function(et){et.circular&&($e.partOfCycle=!0,$e.circularLinkType=et.circularLinkType)})})}function qe(He){var $e,et,nt;for($e=He.nodes,et=[],nt=0;$e.length;++nt,$e=et,et=[])$e.forEach(function(ct){ct.depth=nt,ct.sourceLinks.forEach(function(bt){et.indexOf(bt.target)<0&&!bt.circular&&et.push(bt.target)})});for($e=He.nodes,et=[],nt=0;$e.length;++nt,$e=et,et=[])$e.forEach(function(ct){ct.height=nt,ct.targetLinks.forEach(function(bt){et.indexOf(bt.source)<0&&!bt.circular&&et.push(bt.source)})});He.nodes.forEach(function(ct){ct.column=Math.floor(Le.call(null,ct,nt))})}function Xe(He,$e,et){var nt=M.nest().key(function(Et){return Et.column}).sortKeys(x.ascending).entries(He.nodes).map(function(Et){return Et.values});(function(Et){if(ue){var ht=1/0;nt.forEach(function(Qt){var tn=me*ue/(Qt.length+1);ht=tn<ht?tn:ht}),le=ht}var at=x.min(nt,function(Qt){return(me-de-(Qt.length-1)*le)/x.sum(Qt,d)});at*=.3,He.links.forEach(function(Qt){Qt.width=Qt.value*at});var Qt,tn,dn,Mn,sn,ke,Ft=(tn=0,dn=0,Mn=0,sn=0,ke=x.max((Qt=He).nodes,function(Se){return Se.column}),Qt.links.forEach(function(Se){Se.circular&&("top"==Se.circularLinkType?tn+=Se.width:dn+=Se.width,0==Se.target.column&&(sn+=Se.width),Se.source.column==ke&&(Mn+=Se.width))}),{top:tn=tn>0?tn+25+10:tn,bottom:dn=dn>0?dn+25+10:dn,left:sn=sn>0?sn+25+10:sn,right:Mn=Mn>0?Mn+25+10:Mn}),en=function(Qt,tn){var dn=x.max(Qt.nodes,function(Ce){return Ce.column}),Mn=_e-pe,sn=me-de,ke=Mn/(Mn+tn.right+tn.left),Se=sn/(sn+tn.top+tn.bottom);return pe=pe*ke+tn.left,_e=0==tn.right?_e:_e*ke,de=de*Se+tn.top,me*=Se,Qt.nodes.forEach(function(Ce){Ce.x0=pe+Ce.column*((_e-pe-we)/dn),Ce.x1=Ce.x0+we}),Se}(He,Ft);at*=en,He.links.forEach(function(Qt){Qt.width=Qt.value*at}),nt.forEach(function(Qt){var tn=Qt.length;Qt.forEach(function(dn,Mn){dn.depth==nt.length-1&&1==tn||0==dn.depth&&1==tn?(dn.y0=me/2-dn.value*at,dn.y1=dn.y0+dn.value*at):dn.partOfCycle?0==L(dn,Et)?(dn.y0=me/2+Mn,dn.y1=dn.y0+dn.value*at):"top"==dn.circularLinkType?(dn.y0=de+Mn,dn.y1=dn.y0+dn.value*at):(dn.y0=me-dn.value*at-Mn,dn.y1=dn.y0+dn.value*at):0==Ft.top||0==Ft.bottom?(dn.y0=(me-de)/tn*Mn,dn.y1=dn.y0+dn.value*at):(dn.y0=(me-de)/2-tn/2+Mn,dn.y1=dn.y0+dn.value*at)})})})(et),Bt();for(var ct=1,bt=$e;bt>0;--bt)kt(ct*=.99,et),Bt();function kt(Et,ht){var at=nt.length;nt.forEach(function(Ft){var en=Ft.length,Qt=Ft[0].depth;Ft.forEach(function(tn){var dn;if((tn.sourceLinks.length||tn.targetLinks.length)&&!(tn.partOfCycle&&L(tn,ht)>0))if(0==Qt&&1==en)tn.y0=me/2-(dn=tn.y1-tn.y0)/2,tn.y1=me/2+dn/2;else if(Qt==at-1&&1==en)tn.y0=me/2-(dn=tn.y1-tn.y0)/2,tn.y1=me/2+dn/2;else{var Mn=x.mean(tn.sourceLinks,g),sn=x.mean(tn.targetLinks,f),ke=((Mn&&sn?(Mn+sn)/2:Mn||sn)-p(tn))*Et;tn.y0+=ke,tn.y1+=ke}})})}function Bt(){nt.forEach(function(Et){var ht,at,Ft,en=de,Qt=Et.length;for(Et.sort(s),Ft=0;Ft<Qt;++Ft)(at=en-(ht=Et[Ft]).y0)>0&&(ht.y0+=at,ht.y1+=at),en=ht.y1+le;if((at=en-le-me)>0)for(en=ht.y0-=at,ht.y1-=at,Ft=Qt-2;Ft>=0;--Ft)(at=(ht=Et[Ft]).y1+le-en)>0&&(ht.y0-=at,ht.y1-=at),en=ht.y0})}}function lt(He){He.nodes.forEach(function($e){$e.sourceLinks.sort(h),$e.targetLinks.sort(v)}),He.nodes.forEach(function($e){var et=$e.y0,nt=et,ct=$e.y1,bt=ct;$e.sourceLinks.forEach(function(kt){kt.circular?(kt.y0=ct-kt.width/2,ct-=kt.width):(kt.y0=et+kt.width/2,et+=kt.width)}),$e.targetLinks.forEach(function(kt){kt.circular?(kt.y1=bt-kt.width/2,bt-=kt.width):(kt.y1=nt+kt.width/2,nt+=kt.width)})})}return Pe.nodeId=function(He){return arguments.length?(De="function"==typeof He?He:l(He),Pe):De},Pe.nodeAlign=function(He){return arguments.length?(Le="function"==typeof He?He:l(He),Pe):Le},Pe.nodeWidth=function(He){return arguments.length?(we=+He,Pe):we},Pe.nodePadding=function(He){return arguments.length?(le=+He,Pe):le},Pe.nodes=function(He){return arguments.length?(Ie="function"==typeof He?He:l(He),Pe):Ie},Pe.links=function(He){return arguments.length?(je="function"==typeof He?He:l(He),Pe):je},Pe.size=function(He){return arguments.length?(pe=de=0,_e=+He[0],me=+He[1],Pe):[_e-pe,me-de]},Pe.extent=function(He){return arguments.length?(pe=+He[0][0],_e=+He[1][0],de=+He[0][1],me=+He[1][1],Pe):[[pe,de],[_e,me]]},Pe.iterations=function(He){return arguments.length?(ye=+He,Pe):ye},Pe.circularLinkGap=function(He){return arguments.length?(Me=+He,Pe):Me},Pe.nodePaddingRatio=function(He){return arguments.length?(ue=+He,Pe):ue},Pe.sortNodes=function(He){return arguments.length?(Oe=He,Pe):Oe},Pe.update=function(He){return C(He,De),lt(He),He.links.forEach(function($e){$e.circular&&($e.circularLinkType=$e.y0+$e.y1<me?"top":"bottom",$e.source.circularLinkType=$e.circularLinkType,$e.target.circularLinkType=$e.circularLinkType)}),U(He,me,De,!1),W(He,0,De),F(He,Me,me,De),He},Pe},y.sankeyCenter=function(le){return le.targetLinks.length?le.depth:le.sourceLinks.length?x.min(le.sourceLinks,o)-1:0},y.sankeyLeft=function(le){return le.depth},y.sankeyRight=function(le,ue){return ue-1-le.height},y.sankeyJustify=a,Object.defineProperty(y,"__esModule",{value:!0})},"object"==typeof se&&void 0!==oe?x(se,b("d3-array"),b("d3-collection"),b("d3-shape"),b("elementary-circuits-directed-graph")):x(y.d3=y.d3||{},y.d3,y.d3,y.d3,null)},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(b,oe,se){var y,x;y=this,x=function(y,x,M,_){"use strict";function e(A){return A.target.depth}function o(A,k){return A.sourceLinks.length?A.depth:k-1}function a(A){return function(){return A}}function l(A,k){return v(A.source,k.source)||A.index-k.index}function i(A,k){return v(A.target,k.target)||A.index-k.index}function v(A,k){return A.y0-k.y0}function h(A){return A.value}function s(A){return(A.y0+A.y1)/2}function d(A){return s(A.source)*A.value}function p(A){return s(A.target)*A.value}function f(A){return A.index}function g(A){return A.nodes}function m(A){return A.links}function u(A,k){var C=A.get(k);if(!C)throw new Error("missing: "+k);return C}function w(A){return[A.source.x1,A.y0]}function c(A){return[A.target.x0,A.y1]}y.sankey=function(){var A=0,k=0,C=1,E=1,L=24,D=8,N=f,F=o,I=g,P=m,j=32;function V(){var K={nodes:I.apply(null,arguments),links:P.apply(null,arguments)};return Z(K),Y(K),ee(K),re(K),X(K),K}function Z(K){K.nodes.forEach(function(q,U){q.index=U,q.sourceLinks=[],q.targetLinks=[]});var ie=M.map(K.nodes,N);K.links.forEach(function(q,U){q.index=U;var W=q.source,ae=q.target;"object"!=typeof W&&(W=q.source=u(ie,W)),"object"!=typeof ae&&(ae=q.target=u(ie,ae)),W.sourceLinks.push(q),ae.targetLinks.push(q)})}function Y(K){K.nodes.forEach(function(ie){ie.value=Math.max(x.sum(ie.sourceLinks,h),x.sum(ie.targetLinks,h))})}function ee(K){var ie,q,U;for(ie=K.nodes,q=[],U=0;ie.length;++U,ie=q,q=[])ie.forEach(function(ae){ae.depth=U,ae.sourceLinks.forEach(function(G){q.indexOf(G.target)<0&&q.push(G.target)})});for(ie=K.nodes,q=[],U=0;ie.length;++U,ie=q,q=[])ie.forEach(function(ae){ae.height=U,ae.targetLinks.forEach(function(G){q.indexOf(G.source)<0&&q.push(G.source)})});var W=(C-A-L)/(U-1);K.nodes.forEach(function(ae){ae.x1=(ae.x0=A+Math.max(0,Math.min(U-1,Math.floor(F.call(null,ae,U))))*W)+L})}function re(K){var ie=M.nest().key(function(te){return te.x0}).sortKeys(x.ascending).entries(K.nodes).map(function(te){return te.values});(function(){var te=x.max(ie,function(ue){return ue.length}),ne=2/3*(E-k)/(te-1);D>ne&&(D=ne);var le=x.min(ie,function(ue){return(E-k-(ue.length-1)*D)/x.sum(ue,h)});ie.forEach(function(ue){ue.forEach(function(pe,de){pe.y1=(pe.y0=de)+pe.value*le})}),K.links.forEach(function(ue){ue.width=ue.value*le})})(),G();for(var q=1,U=j;U>0;--U)ae(q*=.99),G(),W(q),G();function W(te){ie.forEach(function(ne){ne.forEach(function(le){if(le.targetLinks.length){var ue=(x.sum(le.targetLinks,d)/x.sum(le.targetLinks,h)-s(le))*te;le.y0+=ue,le.y1+=ue}})})}function ae(te){ie.slice().reverse().forEach(function(ne){ne.forEach(function(le){if(le.sourceLinks.length){var ue=(x.sum(le.sourceLinks,p)/x.sum(le.sourceLinks,h)-s(le))*te;le.y0+=ue,le.y1+=ue}})})}function G(){ie.forEach(function(te){var ne,le,ue,pe=k,de=te.length;for(te.sort(v),ue=0;ue<de;++ue)(le=pe-(ne=te[ue]).y0)>0&&(ne.y0+=le,ne.y1+=le),pe=ne.y1+D;if((le=pe-D-E)>0)for(pe=ne.y0-=le,ne.y1-=le,ue=de-2;ue>=0;--ue)(le=(ne=te[ue]).y1+D-pe)>0&&(ne.y0-=le,ne.y1-=le),pe=ne.y0})}}function X(K){K.nodes.forEach(function(ie){ie.sourceLinks.sort(i),ie.targetLinks.sort(l)}),K.nodes.forEach(function(ie){var q=ie.y0,U=q;ie.sourceLinks.forEach(function(W){W.y0=q+W.width/2,q+=W.width}),ie.targetLinks.forEach(function(W){W.y1=U+W.width/2,U+=W.width})})}return V.update=function(K){return X(K),K},V.nodeId=function(K){return arguments.length?(N="function"==typeof K?K:a(K),V):N},V.nodeAlign=function(K){return arguments.length?(F="function"==typeof K?K:a(K),V):F},V.nodeWidth=function(K){return arguments.length?(L=+K,V):L},V.nodePadding=function(K){return arguments.length?(D=+K,V):D},V.nodes=function(K){return arguments.length?(I="function"==typeof K?K:a(K),V):I},V.links=function(K){return arguments.length?(P="function"==typeof K?K:a(K),V):P},V.size=function(K){return arguments.length?(A=k=0,C=+K[0],E=+K[1],V):[C-A,E-k]},V.extent=function(K){return arguments.length?(A=+K[0][0],C=+K[1][0],k=+K[0][1],E=+K[1][1],V):[[A,k],[C,E]]},V.iterations=function(K){return arguments.length?(j=+K,V):j},V},y.sankeyCenter=function(A){return A.targetLinks.length?A.depth:A.sourceLinks.length?x.min(A.sourceLinks,e)-1:0},y.sankeyLeft=function(A){return A.depth},y.sankeyRight=function(A,k){return k-1-A.height},y.sankeyJustify=o,y.sankeyLinkHorizontal=function(){return _.linkHorizontal().source(w).target(c)},Object.defineProperty(y,"__esModule",{value:!0})},"object"==typeof se&&void 0!==oe?x(se,b("d3-array"),b("d3-collection"),b("d3-shape")):x(y.d3=y.d3||{},y.d3,y.d3,y.d3)},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(b,oe,se){(function(){var y={version:"3.8.0"},x=[].slice,M=function(ge){return x.call(ge)},_=self.document;function e(ge){return ge&&(ge.ownerDocument||ge.document||ge).documentElement}function o(ge){return ge&&(ge.ownerDocument&&ge.ownerDocument.defaultView||ge.document&&ge||ge.defaultView)}if(_)try{M(_.documentElement.childNodes)}catch(ge){M=function(O){for(var B=O.length,H=new Array(B);B--;)H[B]=O[B];return H}}if(Date.now||(Date.now=function(){return+new Date}),_)try{_.createElement("DIV").style.setProperty("opacity",0,"")}catch(ge){var a=this.Element.prototype,l=a.setAttribute,i=a.setAttributeNS,v=this.CSSStyleDeclaration.prototype,h=v.setProperty;a.setAttribute=function(O,B){l.call(this,O,B+"")},a.setAttributeNS=function(O,B,H){i.call(this,O,B,H+"")},v.setProperty=function(O,B,H){h.call(this,O,B+"",H)}}function s(ge,O){return ge<O?-1:ge>O?1:ge>=O?0:NaN}function d(ge){return null===ge?NaN:+ge}function p(ge){return!isNaN(ge)}function f(ge){return{left:function(O,B,H,$){for(arguments.length<3&&(H=0),arguments.length<4&&($=O.length);H<$;){var fe=H+$>>>1;ge(O[fe],B)<0?H=fe+1:$=fe}return H},right:function(O,B,H,$){for(arguments.length<3&&(H=0),arguments.length<4&&($=O.length);H<$;){var fe=H+$>>>1;ge(O[fe],B)>0?$=fe:H=fe+1}return H}}}y.ascending=s,y.descending=function(ge,O){return O<ge?-1:O>ge?1:O>=ge?0:NaN},y.min=function(ge,O){var B,H,$=-1,fe=ge.length;if(1===arguments.length){for(;++$<fe;)if(null!=(H=ge[$])&&H>=H){B=H;break}for(;++$<fe;)null!=(H=ge[$])&&B>H&&(B=H)}else{for(;++$<fe;)if(null!=(H=O.call(ge,ge[$],$))&&H>=H){B=H;break}for(;++$<fe;)null!=(H=O.call(ge,ge[$],$))&&B>H&&(B=H)}return B},y.max=function(ge,O){var B,H,$=-1,fe=ge.length;if(1===arguments.length){for(;++$<fe;)if(null!=(H=ge[$])&&H>=H){B=H;break}for(;++$<fe;)null!=(H=ge[$])&&H>B&&(B=H)}else{for(;++$<fe;)if(null!=(H=O.call(ge,ge[$],$))&&H>=H){B=H;break}for(;++$<fe;)null!=(H=O.call(ge,ge[$],$))&&H>B&&(B=H)}return B},y.extent=function(ge,O){var B,H,$,fe=-1,ve=ge.length;if(1===arguments.length){for(;++fe<ve;)if(null!=(H=ge[fe])&&H>=H){B=$=H;break}for(;++fe<ve;)null!=(H=ge[fe])&&(B>H&&(B=H),$<H&&($=H))}else{for(;++fe<ve;)if(null!=(H=O.call(ge,ge[fe],fe))&&H>=H){B=$=H;break}for(;++fe<ve;)null!=(H=O.call(ge,ge[fe],fe))&&(B>H&&(B=H),$<H&&($=H))}return[B,$]},y.sum=function(ge,O){var B,H=0,$=ge.length,fe=-1;if(1===arguments.length)for(;++fe<$;)p(B=+ge[fe])&&(H+=B);else for(;++fe<$;)p(B=+O.call(ge,ge[fe],fe))&&(H+=B);return H},y.mean=function(ge,O){var B,H=0,$=ge.length,fe=-1,ve=$;if(1===arguments.length)for(;++fe<$;)p(B=d(ge[fe]))?H+=B:--ve;else for(;++fe<$;)p(B=d(O.call(ge,ge[fe],fe)))?H+=B:--ve;if(ve)return H/ve},y.quantile=function(ge,O){var B=(ge.length-1)*O+1,H=Math.floor(B),$=+ge[H-1],fe=B-H;return fe?$+fe*(ge[H]-$):$},y.median=function(ge,O){var B,H=[],$=ge.length,fe=-1;if(1===arguments.length)for(;++fe<$;)p(B=d(ge[fe]))&&H.push(B);else for(;++fe<$;)p(B=d(O.call(ge,ge[fe],fe)))&&H.push(B);if(H.length)return y.quantile(H.sort(s),.5)},y.variance=function(ge,O){var B,H,$=ge.length,fe=0,ve=0,Te=-1,Ee=0;if(1===arguments.length)for(;++Te<$;)p(B=d(ge[Te]))&&(ve+=(H=B-fe)*(B-(fe+=H/++Ee)));else for(;++Te<$;)p(B=d(O.call(ge,ge[Te],Te)))&&(ve+=(H=B-fe)*(B-(fe+=H/++Ee)));if(Ee>1)return ve/(Ee-1)},y.deviation=function(){var ge=y.variance.apply(this,arguments);return ge&&Math.sqrt(ge)};var g=f(s);function m(ge){return ge.length}y.bisectLeft=g.left,y.bisect=y.bisectRight=g.right,y.bisector=function(ge){return f(1===ge.length?function(O,B){return s(ge(O),B)}:ge)},y.shuffle=function(ge,O,B){(fe=arguments.length)<3&&(B=ge.length,fe<2&&(O=0));for(var H,$,fe=B-O;fe;)$=Math.random()*fe--|0,H=ge[fe+O],ge[fe+O]=ge[$+O],ge[$+O]=H;return ge},y.permute=function(ge,O){for(var B=O.length,H=new Array(B);B--;)H[B]=ge[O[B]];return H},y.pairs=function(ge){for(var O=0,B=ge.length-1,H=ge[0],$=new Array(B<0?0:B);O<B;)$[O]=[H,H=ge[++O]];return $},y.transpose=function(ge){if(!($=ge.length))return[];for(var O=-1,B=y.min(ge,m),H=new Array(B);++O<B;)for(var $,fe=-1,ve=H[O]=new Array($);++fe<$;)ve[fe]=ge[fe][O];return H},y.zip=function(){return y.transpose(arguments)},y.keys=function(ge){var O=[];for(var B in ge)O.push(B);return O},y.values=function(ge){var O=[];for(var B in ge)O.push(ge[B]);return O},y.entries=function(ge){var O=[];for(var B in ge)O.push({key:B,value:ge[B]});return O},y.merge=function(ge){for(var O,B,H,$=ge.length,fe=-1,ve=0;++fe<$;)ve+=ge[fe].length;for(B=new Array(ve);--$>=0;)for(O=(H=ge[$]).length;--O>=0;)B[--ve]=H[O];return B};var u=Math.abs;function w(ge){for(var O=1;ge*O%1;)O*=10;return O}function c(ge,O){for(var B in O)Object.defineProperty(ge.prototype,B,{value:O[B],enumerable:!1})}function A(){this._=Object.create(null)}function k(ge){return"__proto__"==(ge+="")||"\0"===ge[0]?"\0"+ge:ge}function C(ge){return"\0"===(ge+="")[0]?ge.slice(1):ge}function E(ge){return k(ge)in this._}function L(ge){return(ge=k(ge))in this._&&delete this._[ge]}function D(){var ge=[];for(var O in this._)ge.push(C(O));return ge}function N(){var ge=0;for(var O in this._)++ge;return ge}function F(){for(var ge in this._)return!1;return!0}function I(){this._=Object.create(null)}function P(ge){return ge}function j(ge,O,B){return function(){var H=B.apply(O,arguments);return H===O?ge:H}}function V(ge,O){if(O in ge)return O;O=O.charAt(0).toUpperCase()+O.slice(1);for(var B=0,H=Z.length;B<H;++B){var $=Z[B]+O;if($ in ge)return $}}y.range=function(ge,O,B){if(arguments.length<3&&(B=1,arguments.length<2&&(O=ge,ge=0)),(O-ge)/B==1/0)throw new Error("infinite range");var H,$=[],fe=w(u(B)),ve=-1;if(ge*=fe,O*=fe,(B*=fe)<0)for(;(H=ge+B*++ve)>O;)$.push(H/fe);else for(;(H=ge+B*++ve)<O;)$.push(H/fe);return $},y.map=function(ge,O){var B=new A;if(ge instanceof A)ge.forEach(function(Te,Ee){B.set(Te,Ee)});else if(Array.isArray(ge)){var H,$=-1,fe=ge.length;if(1===arguments.length)for(;++$<fe;)B.set($,ge[$]);else for(;++$<fe;)B.set(O.call(ge,H=ge[$],$),H)}else for(var ve in ge)B.set(ve,ge[ve]);return B},c(A,{has:E,get:function(ge){return this._[k(ge)]},set:function(ge,O){return this._[k(ge)]=O},remove:L,keys:D,values:function(){var ge=[];for(var O in this._)ge.push(this._[O]);return ge},entries:function(){var ge=[];for(var O in this._)ge.push({key:C(O),value:this._[O]});return ge},size:N,empty:F,forEach:function(ge){for(var O in this._)ge.call(this,C(O),this._[O])}}),y.nest=function(){var ge,O,B={},H=[],$=[];function fe(ve,Te,Ee){if(Ee>=H.length)return O?O.call(B,Te):ge?Te.sort(ge):Te;for(var Fe,Ze,rt,ft,It=-1,Rt=Te.length,Lt=H[Ee++],Ot=new A;++It<Rt;)(ft=Ot.get(Fe=Lt(Ze=Te[It])))?ft.push(Ze):Ot.set(Fe,[Ze]);return ve?(Ze=ve(),rt=function(St,Gt){Ze.set(St,fe(ve,Gt,Ee))}):(Ze={},rt=function(St,Gt){Ze[St]=fe(ve,Gt,Ee)}),Ot.forEach(rt),Ze}return B.map=function(ve,Te){return fe(Te,ve,0)},B.entries=function(ve){return function Te(Ee,Fe){if(Fe>=H.length)return Ee;var Ze=[],rt=$[Fe++];return Ee.forEach(function(ft,It){Ze.push({key:ft,values:Te(It,Fe)})}),rt?Ze.sort(function(ft,It){return rt(ft.key,It.key)}):Ze}(fe(y.map,ve,0),0)},B.key=function(ve){return H.push(ve),B},B.sortKeys=function(ve){return $[H.length-1]=ve,B},B.sortValues=function(ve){return ge=ve,B},B.rollup=function(ve){return O=ve,B},B},y.set=function(ge){var O=new I;if(ge)for(var B=0,H=ge.length;B<H;++B)O.add(ge[B]);return O},c(I,{has:E,add:function(ge){return this._[k(ge+="")]=!0,ge},remove:L,values:D,size:N,empty:F,forEach:function(ge){for(var O in this._)ge.call(this,C(O))}}),y.behavior={},y.rebind=function(ge,O){for(var B,H=1,$=arguments.length;++H<$;)ge[B=arguments[H]]=j(ge,O,O[B]);return ge};var Z=["webkit","ms","moz","Moz","o","O"];function Y(){}function ee(){}function re(ge){var O=[],B=new A;function H(){for(var $,fe=O,ve=-1,Te=fe.length;++ve<Te;)($=fe[ve].on)&&$.apply(this,arguments);return ge}return H.on=function($,fe){var ve,Te=B.get($);return arguments.length<2?Te&&Te.on:(Te&&(Te.on=null,O=O.slice(0,ve=O.indexOf(Te)).concat(O.slice(ve+1)),B.remove($)),fe&&O.push(B.set($,{on:fe})),ge)},H}function X(){y.event.preventDefault()}function K(){for(var ge,O=y.event;ge=O.sourceEvent;)O=ge;return O}function ie(ge){for(var O=new ee,B=0,H=arguments.length;++B<H;)O[arguments[B]]=re(O);return O.of=function($,fe){return function(ve){try{var Te=ve.sourceEvent=y.event;ve.target=ge,y.event=ve,O[ve.type].apply($,fe)}finally{y.event=Te}}},O}y.dispatch=function(){for(var ge=new ee,O=-1,B=arguments.length;++O<B;)ge[arguments[O]]=re(ge);return ge},ee.prototype.on=function(ge,O){var B=ge.indexOf("."),H="";if(B>=0&&(H=ge.slice(B+1),ge=ge.slice(0,B)),ge)return arguments.length<2?this[ge].on(H):this[ge].on(H,O);if(2===arguments.length){if(null==O)for(ge in this)this.hasOwnProperty(ge)&&this[ge].on(H,null);return this}},y.event=null,y.requote=function(ge){return ge.replace(q,"\\$&")};var q=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,U={}.__proto__?function(ge,O){ge.__proto__=O}:function(ge,O){for(var B in O)ge[B]=O[B]};function W(ge){return U(ge,ne),ge}var ae=function(ge,O){return O.querySelector(ge)},G=function(ge,O){return O.querySelectorAll(ge)},te=function(ge,O){var B=ge.matches||ge[V(ge,"matchesSelector")];return(te=function(H,$){return B.call(H,$)})(ge,O)};"function"==typeof Sizzle&&(ae=function(ge,O){return Sizzle(ge,O)[0]||null},G=Sizzle,te=Sizzle.matchesSelector),y.selection=function(){return y.select(_.documentElement)};var ne=y.selection.prototype=[];function le(ge){return"function"==typeof ge?ge:function(){return ae(ge,this)}}function ue(ge){return"function"==typeof ge?ge:function(){return G(ge,this)}}ne.select=function(ge){var O,B,H,$,fe=[];ge=le(ge);for(var ve=-1,Te=this.length;++ve<Te;){fe.push(O=[]),O.parentNode=(H=this[ve]).parentNode;for(var Ee=-1,Fe=H.length;++Ee<Fe;)($=H[Ee])?(O.push(B=ge.call($,$.__data__,Ee,ve)),B&&"__data__"in $&&(B.__data__=$.__data__)):O.push(null)}return W(fe)},ne.selectAll=function(ge){var O,B,H=[];ge=ue(ge);for(var $=-1,fe=this.length;++$<fe;)for(var ve=this[$],Te=-1,Ee=ve.length;++Te<Ee;)(B=ve[Te])&&(H.push(O=M(ge.call(B,B.__data__,Te,$))),O.parentNode=B);return W(H)};var pe="http://www.w3.org/1999/xhtml",de={svg:"http://www.w3.org/2000/svg",xhtml:pe,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function _e(ge,O){return ge=y.ns.qualify(ge),null==O?ge.local?function(){this.removeAttributeNS(ge.space,ge.local)}:function(){this.removeAttribute(ge)}:"function"==typeof O?ge.local?function(){var B=O.apply(this,arguments);null==B?this.removeAttributeNS(ge.space,ge.local):this.setAttributeNS(ge.space,ge.local,B)}:function(){var B=O.apply(this,arguments);null==B?this.removeAttribute(ge):this.setAttribute(ge,B)}:ge.local?function(){this.setAttributeNS(ge.space,ge.local,O)}:function(){this.setAttribute(ge,O)}}function me(ge){return ge.trim().replace(/\s+/g," ")}function we(ge){return new RegExp("(?:^|\\s+)"+y.requote(ge)+"(?:\\s+|$)","g")}function De(ge){return(ge+"").trim().split(/^|\s+/)}function Le(ge,O){var B=(ge=De(ge).map(Ie)).length;return"function"==typeof O?function(){for(var H=-1,$=O.apply(this,arguments);++H<B;)ge[H](this,$)}:function(){for(var H=-1;++H<B;)ge[H](this,O)}}function Ie(ge){var O=we(ge);return function(B,H){if($=B.classList)return H?$.add(ge):$.remove(ge);var $=B.getAttribute("class")||"";H?(O.lastIndex=0,O.test($)||B.setAttribute("class",me($+" "+ge))):B.setAttribute("class",me($.replace(O," ")))}}function je(ge,O,B){return null==O?function(){this.style.removeProperty(ge)}:"function"==typeof O?function(){var H=O.apply(this,arguments);null==H?this.style.removeProperty(ge):this.style.setProperty(ge,H,B)}:function(){this.style.setProperty(ge,O,B)}}function ye(ge,O){return null==O?function(){delete this[ge]}:"function"==typeof O?function(){var B=O.apply(this,arguments);null==B?delete this[ge]:this[ge]=B}:function(){this[ge]=O}}function Me(ge){return"function"==typeof ge?ge:(ge=y.ns.qualify(ge)).local?function(){return this.ownerDocument.createElementNS(ge.space,ge.local)}:function(){var O=this.ownerDocument,B=this.namespaceURI;return B===pe&&O.documentElement.namespaceURI===pe?O.createElement(ge):O.createElementNS(B,ge)}}function Oe(){var ge=this.parentNode;ge&&ge.removeChild(this)}function Pe(ge){return{__data__:ge}}function Re(ge){return function(){return te(this,ge)}}function Ue(ge){return arguments.length||(ge=s),function(O,B){return O&&B?ge(O.__data__,B.__data__):!O-!B}}function qe(ge,O){for(var B=0,H=ge.length;B<H;B++)for(var $,fe=ge[B],ve=0,Te=fe.length;ve<Te;ve++)($=fe[ve])&&O($,ve,B);return ge}function Xe(ge){return U(ge,lt),ge}y.ns={prefix:de,qualify:function(ge){var O=ge.indexOf(":"),B=ge;return O>=0&&"xmlns"!==(B=ge.slice(0,O))&&(ge=ge.slice(O+1)),de.hasOwnProperty(B)?{space:de[B],local:ge}:ge}},ne.attr=function(ge,O){if(arguments.length<2){if("string"==typeof ge){var B=this.node();return(ge=y.ns.qualify(ge)).local?B.getAttributeNS(ge.space,ge.local):B.getAttribute(ge)}for(O in ge)this.each(_e(O,ge[O]));return this}return this.each(_e(ge,O))},ne.classed=function(ge,O){if(arguments.length<2){if("string"==typeof ge){var B=this.node(),H=(ge=De(ge)).length,$=-1;if(O=B.classList){for(;++$<H;)if(!O.contains(ge[$]))return!1}else for(O=B.getAttribute("class");++$<H;)if(!we(ge[$]).test(O))return!1;return!0}for(O in ge)this.each(Le(O,ge[O]));return this}return this.each(Le(ge,O))},ne.style=function(ge,O,B){var H=arguments.length;if(H<3){if("string"!=typeof ge){for(B in H<2&&(O=""),ge)this.each(je(B,ge[B],O));return this}if(H<2){var $=this.node();return o($).getComputedStyle($,null).getPropertyValue(ge)}B=""}return this.each(je(ge,O,B))},ne.property=function(ge,O){if(arguments.length<2){if("string"==typeof ge)return this.node()[ge];for(O in ge)this.each(ye(O,ge[O]));return this}return this.each(ye(ge,O))},ne.text=function(ge){return arguments.length?this.each("function"==typeof ge?function(){var O=ge.apply(this,arguments);this.textContent=null==O?"":O}:null==ge?function(){this.textContent=""}:function(){this.textContent=ge}):this.node().textContent},ne.html=function(ge){return arguments.length?this.each("function"==typeof ge?function(){var O=ge.apply(this,arguments);this.innerHTML=null==O?"":O}:null==ge?function(){this.innerHTML=""}:function(){this.innerHTML=ge}):this.node().innerHTML},ne.append=function(ge){return ge=Me(ge),this.select(function(){return this.appendChild(ge.apply(this,arguments))})},ne.insert=function(ge,O){return ge=Me(ge),O=le(O),this.select(function(){return this.insertBefore(ge.apply(this,arguments),O.apply(this,arguments)||null)})},ne.remove=function(){return this.each(Oe)},ne.data=function(ge,O){var B,H,$=-1,fe=this.length;if(!arguments.length){for(ge=new Array(fe=(B=this[0]).length);++$<fe;)(H=B[$])&&(ge[$]=H.__data__);return ge}function ve(Ze,rt){var ft,It,Rt,Lt=Ze.length,Ot=rt.length,St=Math.min(Lt,Ot),Gt=new Array(Ot),qt=new Array(Ot),Zt=new Array(Lt);if(O){var yn,Sn=new A,qn=new Array(Lt);for(ft=-1;++ft<Lt;)(It=Ze[ft])&&(Sn.has(yn=O.call(It,It.__data__,ft))?Zt[ft]=It:Sn.set(yn,It),qn[ft]=yn);for(ft=-1;++ft<Ot;)(It=Sn.get(yn=O.call(rt,Rt=rt[ft],ft)))?!0!==It&&(Gt[ft]=It,It.__data__=Rt):qt[ft]=Pe(Rt),Sn.set(yn,!0);for(ft=-1;++ft<Lt;)ft in qn&&!0!==Sn.get(qn[ft])&&(Zt[ft]=Ze[ft])}else{for(ft=-1;++ft<St;)Rt=rt[ft],(It=Ze[ft])?(It.__data__=Rt,Gt[ft]=It):qt[ft]=Pe(Rt);for(;ft<Ot;++ft)qt[ft]=Pe(rt[ft]);for(;ft<Lt;++ft)Zt[ft]=Ze[ft]}qt.update=Gt,qt.parentNode=Gt.parentNode=Zt.parentNode=Ze.parentNode,Te.push(qt),Ee.push(Gt),Fe.push(Zt)}var Te=Xe([]),Ee=W([]),Fe=W([]);if("function"==typeof ge)for(;++$<fe;)ve(B=this[$],ge.call(B,B.parentNode.__data__,$));else for(;++$<fe;)ve(B=this[$],ge);return Ee.enter=function(){return Te},Ee.exit=function(){return Fe},Ee},ne.datum=function(ge){return arguments.length?this.property("__data__",ge):this.property("__data__")},ne.filter=function(ge){var O,B,H,$=[];"function"!=typeof ge&&(ge=Re(ge));for(var fe=0,ve=this.length;fe<ve;fe++){$.push(O=[]),O.parentNode=(B=this[fe]).parentNode;for(var Te=0,Ee=B.length;Te<Ee;Te++)(H=B[Te])&&ge.call(H,H.__data__,Te,fe)&&O.push(H)}return W($)},ne.order=function(){for(var ge=-1,O=this.length;++ge<O;)for(var B,H=this[ge],$=H.length-1,fe=H[$];--$>=0;)(B=H[$])&&(fe&&fe!==B.nextSibling&&fe.parentNode.insertBefore(B,fe),fe=B);return this},ne.sort=function(ge){ge=Ue.apply(this,arguments);for(var O=-1,B=this.length;++O<B;)this[O].sort(ge);return this.order()},ne.each=function(ge){return qe(this,function(O,B,H){ge.call(O,O.__data__,B,H)})},ne.call=function(ge){var O=M(arguments);return ge.apply(O[0]=this,O),this},ne.empty=function(){return!this.node()},ne.node=function(){for(var ge=0,O=this.length;ge<O;ge++)for(var B=this[ge],H=0,$=B.length;H<$;H++){var fe=B[H];if(fe)return fe}return null},ne.size=function(){var ge=0;return qe(this,function(){++ge}),ge};var lt=[];function He(ge){var O,B;return function(H,$,fe){var ve,Te=ge[fe].update,Ee=Te.length;for(fe!=B&&(B=fe,O=0),$>=O&&(O=$+1);!(ve=Te[O])&&++O<Ee;);return ve}}function $e(ge,O,B){var H="__on"+ge,$=ge.indexOf("."),fe=nt;$>0&&(ge=ge.slice(0,$));var ve=et.get(ge);function Te(){var Ee=this[H];Ee&&(this.removeEventListener(ge,Ee,Ee.$),delete this[H])}return ve&&(ge=ve,fe=ct),$?O?function(){var Ee=fe(O,M(arguments));Te.call(this),this.addEventListener(ge,this[H]=Ee,Ee.$=B),Ee._=O}:Te:O?Y:function(){var Ee,Fe=new RegExp("^__on([^.]+)"+y.requote(ge)+"$");for(var Ze in this)if(Ee=Ze.match(Fe)){var rt=this[Ze];this.removeEventListener(Ee[1],rt,rt.$),delete this[Ze]}}}y.selection.enter=Xe,y.selection.enter.prototype=lt,lt.append=ne.append,lt.empty=ne.empty,lt.node=ne.node,lt.call=ne.call,lt.size=ne.size,lt.select=function(ge){for(var O,B,H,$,fe,ve=[],Te=-1,Ee=this.length;++Te<Ee;){H=($=this[Te]).update,ve.push(O=[]),O.parentNode=$.parentNode;for(var Fe=-1,Ze=$.length;++Fe<Ze;)(fe=$[Fe])?(O.push(H[Fe]=B=ge.call($.parentNode,fe.__data__,Fe,Te)),B.__data__=fe.__data__):O.push(null)}return W(ve)},lt.insert=function(ge,O){return arguments.length<2&&(O=He(this)),ne.insert.call(this,ge,O)},y.select=function(ge){var O;return"string"==typeof ge?(O=[ae(ge,_)]).parentNode=_.documentElement:(O=[ge]).parentNode=e(ge),W([O])},y.selectAll=function(ge){var O;return"string"==typeof ge?(O=M(G(ge,_))).parentNode=_.documentElement:(O=M(ge)).parentNode=null,W([O])},ne.on=function(ge,O,B){var H=arguments.length;if(H<3){if("string"!=typeof ge){for(B in H<2&&(O=!1),ge)this.each($e(B,ge[B],O));return this}if(H<2)return(H=this.node()["__on"+ge])&&H._;B=!1}return this.each($e(ge,O,B))};var et=y.map({mouseenter:"mouseover",mouseleave:"mouseout"});function nt(ge,O){return function(B){var H=y.event;y.event=B,O[0]=this.__data__;try{ge.apply(this,O)}finally{y.event=H}}}function ct(ge,O){var B=nt(ge,O);return function(H){var $=H.relatedTarget;$&&($===this||8&$.compareDocumentPosition(this))||B.call(this,H)}}_&&et.forEach(function(ge){"on"+ge in _&&et.remove(ge)});var bt,kt=0;function Bt(ge){var O=".dragsuppress-"+ ++kt,B="click"+O,H=y.select(o(ge)).on("touchmove"+O,X).on("dragstart"+O,X).on("selectstart"+O,X);if(null==bt&&(bt=!("onselectstart"in ge)&&V(ge.style,"userSelect")),bt){var $=e(ge).style,fe=$[bt];$[bt]="none"}return function(ve){if(H.on(O,null),bt&&($[bt]=fe),ve){var Te=function(){H.on(B,null)};H.on(B,function(){X(),Te()},!0),setTimeout(Te,0)}}}y.mouse=function(ge){return ht(ge,K())};var Et=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function ht(ge,O){O.changedTouches&&(O=O.changedTouches[0]);var B=ge.ownerSVGElement||ge;if(B.createSVGPoint){var H=B.createSVGPoint();if(Et<0){var $=o(ge);if($.scrollX||$.scrollY){var fe=(B=y.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Et=!(fe.f||fe.e),B.remove()}}return Et?(H.x=O.pageX,H.y=O.pageY):(H.x=O.clientX,H.y=O.clientY),[(H=H.matrixTransform(ge.getScreenCTM().inverse())).x,H.y]}var ve=ge.getBoundingClientRect();return[O.clientX-ve.left-ge.clientLeft,O.clientY-ve.top-ge.clientTop]}function at(){return y.event.changedTouches[0].identifier}y.touch=function(ge,O,B){if(arguments.length<3&&(B=O,O=K().changedTouches),O)for(var H,$=0,fe=O.length;$<fe;++$)if((H=O[$]).identifier===B)return ht(ge,H)},y.behavior.drag=function(){var ge=ie($,"drag","dragstart","dragend"),O=null,B=fe(Y,y.mouse,o,"mousemove","mouseup"),H=fe(at,y.touch,P,"touchmove","touchend");function $(){this.on("mousedown.drag",B).on("touchstart.drag",H)}function fe(ve,Te,Ee,Fe,Ze){return function(){var rt,ft=this,It=y.event.target.correspondingElement||y.event.target,Rt=ft.parentNode,Lt=ge.of(ft,arguments),Ot=0,St=ve(),Gt=".drag"+(null==St?"":"-"+St),qt=y.select(Ee(It)).on(Fe+Gt,Sn).on(Ze+Gt,qn),Zt=Bt(It),yn=Te(Rt,St);function Sn(){var Un,mr,gr=Te(Rt,St);gr&&(Ot|=(Un=gr[0]-yn[0])|(mr=gr[1]-yn[1]),yn=gr,Lt({type:"drag",x:gr[0]+rt[0],y:gr[1]+rt[1],dx:Un,dy:mr}))}function qn(){Te(Rt,St)&&(qt.on(Fe+Gt,null).on(Ze+Gt,null),Zt(Ot),Lt({type:"dragend"}))}rt=O?[(rt=O.apply(ft,arguments)).x-yn[0],rt.y-yn[1]]:[0,0],Lt({type:"dragstart"})}}return $.origin=function(ve){return arguments.length?(O=ve,$):O},y.rebind($,ge,"on")},y.touches=function(ge,O){return arguments.length<2&&(O=K().touches),O?M(O).map(function(B){var H=ht(ge,B);return H.identifier=B.identifier,H}):[]};var Ft=1e-6,en=Math.PI,Qt=2*en,tn=Qt-Ft,dn=en/2,Mn=en/180,sn=180/en;function ke(ge){return ge>1?dn:ge<-1?-dn:Math.asin(ge)}function Se(ge){return((ge=Math.exp(ge))+1/ge)/2}var Ce=Math.SQRT2;y.interpolateZoom=function(ge,O){var B,H,$=ge[0],fe=ge[1],ve=ge[2],Fe=O[2],Ze=O[0]-$,rt=O[1]-fe,ft=Ze*Ze+rt*rt;if(ft<1e-12)H=Math.log(Fe/ve)/Ce,B=function(Gt){return[$+Gt*Ze,fe+Gt*rt,ve*Math.exp(Ce*Gt*H)]};else{var It=Math.sqrt(ft),Rt=(Fe*Fe-ve*ve+4*ft)/(2*ve*2*It),Lt=(Fe*Fe-ve*ve-4*ft)/(2*Fe*2*It),Ot=Math.log(Math.sqrt(Rt*Rt+1)-Rt),St=Math.log(Math.sqrt(Lt*Lt+1)-Lt);H=(St-Ot)/Ce,B=function(Gt){var qt,qn,Zt=Gt*H,yn=Se(Ot),Sn=ve/(2*It)*(yn*(qt=Ce*Zt+Ot,((qt=Math.exp(2*qt))-1)/(qt+1))-(qn=Ot,((qn=Math.exp(qn))-1/qn)/2));return[$+Sn*Ze,fe+Sn*rt,ve*yn/Se(Ce*Zt+Ot)]}}return B.duration=1e3*H,B},y.behavior.zoom=function(){var ge,O,B,H,$,fe,ve,Te,Ee,Fe={x:0,y:0,k:1},Ze=[960,500],rt=Qe,ft=250,It=0,Rt="mousedown.zoom",Lt="mousemove.zoom",Ot="mouseup.zoom",St="touchstart.zoom",Gt=ie(qt,"zoomstart","zoom","zoomend");function qt(ur){ur.on(Rt,Cr).on(Ge+".zoom",wi).on("dblclick.zoom",Bi).on(St,di)}function Zt(ur){return[(ur[0]-Fe.x)/Fe.k,(ur[1]-Fe.y)/Fe.k]}function yn(ur){Fe.k=Math.max(rt[0],Math.min(rt[1],ur))}function Sn(ur,$r){var Ti;Fe.x+=ur[0]-($r=[(Ti=$r)[0]*Fe.k+Fe.x,Ti[1]*Fe.k+Fe.y])[0],Fe.y+=ur[1]-$r[1]}function qn(ur,$r,Ti,bi){ur.__chart__={x:Fe.x,y:Fe.y,k:Fe.k},yn(Math.pow(2,bi)),Sn(O=$r,Ti),ur=y.select(ur),ft>0&&(ur=ur.transition().duration(ft)),ur.call(qt.event)}function Un(){ve&&ve.domain(fe.range().map(function(ur){return(ur-Fe.x)/Fe.k}).map(fe.invert)),Ee&&Ee.domain(Te.range().map(function(ur){return(ur-Fe.y)/Fe.k}).map(Te.invert))}function mr(ur){It++||ur({type:"zoomstart"})}function gr(ur){Un(),ur({type:"zoom",scale:Fe.k,translate:[Fe.x,Fe.y]})}function Pr(ur){--It||(ur({type:"zoomend"}),O=null)}function Cr(){var ur=this,$r=Gt.of(ur,arguments),Ti=0,bi=y.select(o(ur)).on(Lt,ca).on(Ot,Ei),Si=Zt(y.mouse(ur)),ji=Bt(ur);function ca(){Ti=1,Sn(y.mouse(ur),Si),gr($r)}function Ei(){bi.on(Lt,null).on(Ot,null),ji(Ti),Pr($r)}du.call(ur),mr($r)}function di(){var ur,$r=this,Ti=Gt.of($r,arguments),bi={},Si=0,ji=".zoom-"+y.event.changedTouches[0].identifier,ca="touchmove"+ji,Ei="touchend"+ji,ta=[],Zi=y.select($r),ra=Bt($r);function Qi(){var xo=y.touches($r);return ur=Fe.k,xo.forEach(function(_o){_o.identifier in bi&&(bi[_o.identifier]=Zt(_o))}),xo}function fa(){var xo=y.event.target;y.select(xo).on(ca,Ma).on(Ei,no),ta.push(xo);for(var _o=y.event.changedTouches,lo=0,uo=_o.length;lo<uo;++lo)bi[_o[lo].identifier]=null;var Do=Qi(),Fs=Date.now();if(1===Do.length){if(Fs-$<500){var cs=Do[0];qn($r,cs,bi[cs.identifier],Math.floor(Math.log(Fe.k)/Math.LN2)+1),X()}$=Fs}else if(Do.length>1){var il=Do[1],iu=(cs=Do[0])[0]-il[0],ma=cs[1]-il[1];Si=iu*iu+ma*ma}}function Ma(){var xo,_o,lo,uo,Do=y.touches($r);du.call($r);for(var Fs=0,cs=Do.length;Fs<cs;++Fs,uo=null)if(uo=bi[(lo=Do[Fs]).identifier]){if(_o)break;xo=lo,_o=uo}if(uo){var il=(il=lo[0]-xo[0])*il+(il=lo[1]-xo[1])*il,iu=Si&&Math.sqrt(il/Si);xo=[(xo[0]+lo[0])/2,(xo[1]+lo[1])/2],_o=[(_o[0]+uo[0])/2,(_o[1]+uo[1])/2],yn(iu*ur)}$=null,Sn(xo,_o),gr(Ti)}function no(){if(y.event.touches.length){for(var xo=y.event.changedTouches,_o=0,lo=xo.length;_o<lo;++_o)delete bi[xo[_o].identifier];for(var uo in bi)return void Qi()}y.selectAll(ta).on(ji,null),Zi.on(Rt,Cr).on(St,di),ra(),Pr(Ti)}fa(),mr(Ti),Zi.on(Rt,null).on(St,fa)}function wi(){var ur=Gt.of(this,arguments);H?clearTimeout(H):(du.call(this),ge=Zt(O=B||y.mouse(this)),mr(ur)),H=setTimeout(function(){H=null,Pr(ur)},50),X(),yn(Math.pow(2,.002*Ve())*Fe.k),Sn(O,ge),gr(ur)}function Bi(){var ur=y.mouse(this),$r=Math.log(Fe.k)/Math.LN2;qn(this,ur,Zt(ur),y.event.shiftKey?Math.ceil($r)-1:Math.floor($r)+1)}return Ge||(Ge="onwheel"in _?(Ve=function(){return-y.event.deltaY*(y.event.deltaMode?120:1)},"wheel"):"onmousewheel"in _?(Ve=function(){return y.event.wheelDelta},"mousewheel"):(Ve=function(){return-y.event.detail},"MozMousePixelScroll")),qt.event=function(ur){ur.each(function(){var $r=Gt.of(this,arguments),Ti=Fe;Rs?y.select(this).transition().each("start.zoom",function(){Fe=this.__chart__||{x:0,y:0,k:1},mr($r)}).tween("zoom:zoom",function(){var bi=Ze[0],ji=O?O[0]:bi/2,ca=O?O[1]:Ze[1]/2,Ei=y.interpolateZoom([(ji-Fe.x)/Fe.k,(ca-Fe.y)/Fe.k,bi/Fe.k],[(ji-Ti.x)/Ti.k,(ca-Ti.y)/Ti.k,bi/Ti.k]);return function(ta){var Zi=Ei(ta),ra=bi/Zi[2];this.__chart__=Fe={x:ji-Zi[0]*ra,y:ca-Zi[1]*ra,k:ra},gr($r)}}).each("interrupt.zoom",function(){Pr($r)}).each("end.zoom",function(){Pr($r)}):(this.__chart__=Fe,mr($r),gr($r),Pr($r))})},qt.translate=function(ur){return arguments.length?(Fe={x:+ur[0],y:+ur[1],k:Fe.k},Un(),qt):[Fe.x,Fe.y]},qt.scale=function(ur){return arguments.length?(Fe={x:Fe.x,y:Fe.y,k:null},yn(+ur),Un(),qt):Fe.k},qt.scaleExtent=function(ur){return arguments.length?(rt=null==ur?Qe:[+ur[0],+ur[1]],qt):rt},qt.center=function(ur){return arguments.length?(B=ur&&[+ur[0],+ur[1]],qt):B},qt.size=function(ur){return arguments.length?(Ze=ur&&[+ur[0],+ur[1]],qt):Ze},qt.duration=function(ur){return arguments.length?(ft=+ur,qt):ft},qt.x=function(ur){return arguments.length?(ve=ur,fe=ur.copy(),Fe={x:0,y:0,k:1},qt):ve},qt.y=function(ur){return arguments.length?(Ee=ur,Te=ur.copy(),Fe={x:0,y:0,k:1},qt):Ee},y.rebind(qt,Gt,"on")};var Ve,Ge,Qe=[0,1/0];function ot(){}function it(ge,O,B){return this instanceof it?(this.h=+ge,this.s=+O,void(this.l=+B)):arguments.length<2?ge instanceof it?new it(ge.h,ge.s,ge.l):Dn(""+ge,kn,it):new it(ge,O,B)}y.color=ot,ot.prototype.toString=function(){return this.rgb()+""},y.hsl=it;var mt=it.prototype=new ot;function xt(ge,O,B){var H,$;function fe(ve){return Math.round(255*((Te=ve)>360?Te-=360:Te<0&&(Te+=360),Te<60?H+($-H)*Te/60:Te<180?$:Te<240?H+($-H)*(240-Te)/60:H));var Te}return ge=isNaN(ge)?0:(ge%=360)<0?ge+360:ge,O=isNaN(O)||O<0?0:O>1?1:O,H=2*(B=B<0?0:B>1?1:B)-($=B<=.5?B*(1+O):B+O-B*O),new Nt(fe(ge+120),fe(ge),fe(ge-120))}function Vt(ge,O,B){return this instanceof Vt?(this.h=+ge,this.c=+O,void(this.l=+B)):arguments.length<2?ge instanceof Vt?new Vt(ge.h,ge.c,ge.l):Be(ge instanceof At?ge.l:(ge=rn((ge=y.rgb(ge)).r,ge.g,ge.b)).l,ge.a,ge.b):new Vt(ge,O,B)}mt.brighter=function(ge){return ge=Math.pow(.7,arguments.length?ge:1),new it(this.h,this.s,this.l/ge)},mt.darker=function(ge){return ge=Math.pow(.7,arguments.length?ge:1),new it(this.h,this.s,ge*this.l)},mt.rgb=function(){return xt(this.h,this.s,this.l)},y.hcl=Vt;var $t=Vt.prototype=new ot;function pt(ge,O,B){return isNaN(ge)&&(ge=0),isNaN(O)&&(O=0),new At(B,Math.cos(ge*=Mn)*O,Math.sin(ge)*O)}function At(ge,O,B){return this instanceof At?(this.l=+ge,this.a=+O,void(this.b=+B)):arguments.length<2?ge instanceof At?new At(ge.l,ge.a,ge.b):ge instanceof Vt?pt(ge.h,ge.c,ge.l):rn((ge=Nt(ge)).r,ge.g,ge.b):new At(ge,O,B)}$t.brighter=function(ge){return new Vt(this.h,this.c,Math.min(100,this.l+Xt*(arguments.length?ge:1)))},$t.darker=function(ge){return new Vt(this.h,this.c,Math.max(0,this.l-Xt*(arguments.length?ge:1)))},$t.rgb=function(){return pt(this.h,this.c,this.l).rgb()},y.lab=At;var Xt=18,Ct=At.prototype=new ot;function Pt(ge,O,B){var H=(ge+16)/116,$=H+O/500,fe=H-B/200;return new Nt(Dt(3.2404542*($=.95047*tt($))-1.5371385*(H=1*tt(H))-.4985314*(fe=1.08883*tt(fe))),Dt(-.969266*$+1.8760108*H+.041556*fe),Dt(.0556434*$-.2040259*H+1.0572252*fe))}function Be(ge,O,B){return ge>0?new Vt(Math.atan2(B,O)*sn,Math.sqrt(O*O+B*B),ge):new Vt(NaN,NaN,ge)}function tt(ge){return ge>.206893034?ge*ge*ge:(ge-4/29)/7.787037}function dt(ge){return ge>.008856?Math.pow(ge,1/3):7.787037*ge+4/29}function Dt(ge){return Math.round(255*(ge<=.00304?12.92*ge:1.055*Math.pow(ge,1/2.4)-.055))}function Nt(ge,O,B){return this instanceof Nt?(this.r=~~ge,this.g=~~O,void(this.b=~~B)):arguments.length<2?ge instanceof Nt?new Nt(ge.r,ge.g,ge.b):Dn(""+ge,Nt,xt):new Nt(ge,O,B)}function Yt(ge){return new Nt(ge>>16,ge>>8&255,255&ge)}function fn(ge){return Yt(ge)+""}Ct.brighter=function(ge){return new At(Math.min(100,this.l+Xt*(arguments.length?ge:1)),this.a,this.b)},Ct.darker=function(ge){return new At(Math.max(0,this.l-Xt*(arguments.length?ge:1)),this.a,this.b)},Ct.rgb=function(){return Pt(this.l,this.a,this.b)},y.rgb=Nt;var nn=Nt.prototype=new ot;function In(ge){return ge<16?"0"+Math.max(0,ge).toString(16):Math.min(255,ge).toString(16)}function Dn(ge,O,B){var H,$,fe,ve=0,Te=0,Ee=0;if(H=/([a-z]+)\((.*)\)/.exec(ge=ge.toLowerCase()))switch($=H[2].split(","),H[1]){case"hsl":return B(parseFloat($[0]),parseFloat($[1])/100,parseFloat($[2])/100);case"rgb":return O(gn($[0]),gn($[1]),gn($[2]))}return(fe=Pn.get(ge))?O(fe.r,fe.g,fe.b):(null==ge||"#"!==ge.charAt(0)||isNaN(fe=parseInt(ge.slice(1),16))||(4===ge.length?(ve=(3840&fe)>>4,ve|=ve>>4,Te=240&fe,Te|=Te>>4,Ee=15&fe,Ee|=Ee<<4):7===ge.length&&(ve=(16711680&fe)>>16,Te=(65280&fe)>>8,Ee=255&fe)),O(ve,Te,Ee))}function kn(ge,O,B){var H,$,fe=Math.min(ge/=255,O/=255,B/=255),ve=Math.max(ge,O,B),Te=ve-fe,Ee=(ve+fe)/2;return Te?($=Ee<.5?Te/(ve+fe):Te/(2-ve-fe),H=ge==ve?(O-B)/Te+(O<B?6:0):O==ve?(B-ge)/Te+2:(ge-O)/Te+4,H*=60):(H=NaN,$=Ee>0&&Ee<1?0:H),new it(H,$,Ee)}function rn(ge,O,B){var H=dt((.4124564*(ge=pn(ge))+.3575761*(O=pn(O))+.1804375*(B=pn(B)))/.95047),$=dt((.2126729*ge+.7151522*O+.072175*B)/1);return At(116*$-16,500*(H-$),200*($-dt((.0193339*ge+.119192*O+.9503041*B)/1.08883)))}function pn(ge){return(ge/=255)<=.04045?ge/12.92:Math.pow((ge+.055)/1.055,2.4)}function gn(ge){var O=parseFloat(ge);return"%"===ge.charAt(ge.length-1)?Math.round(2.55*O):O}nn.brighter=function(ge){ge=Math.pow(.7,arguments.length?ge:1);var O=this.r,B=this.g,H=this.b,$=30;return O||B||H?(O&&O<$&&(O=$),B&&B<$&&(B=$),H&&H<$&&(H=$),new Nt(Math.min(255,O/ge),Math.min(255,B/ge),Math.min(255,H/ge))):new Nt($,$,$)},nn.darker=function(ge){return new Nt((ge=Math.pow(.7,arguments.length?ge:1))*this.r,ge*this.g,ge*this.b)},nn.hsl=function(){return kn(this.r,this.g,this.b)},nn.toString=function(){return"#"+In(this.r)+In(this.g)+In(this.b)};var Pn=y.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function jn(ge){return"function"==typeof ge?ge:function(){return ge}}function Kn(ge){return function(O,B,H){return 2===arguments.length&&"function"==typeof B&&(H=B,B=null),rr(O,B,ge,H)}}function rr(ge,O,B,H){var Ze,$={},fe=y.dispatch("beforesend","progress","load","error"),ve={},Te=new XMLHttpRequest,Ee=null;function Fe(){var Ze,ft,It,rt=Te.status;if(!rt&&((It=(ft=Te).responseType)&&"text"!==It?ft.response:ft.responseText)||rt>=200&&rt<300||304===rt){try{Ze=B.call($,Te)}catch(ft){return void fe.error.call($,ft)}fe.load.call($,Ze)}else fe.error.call($,Te)}return self.XDomainRequest&&!("withCredentials"in Te)&&/^(http(s)?:)?\/\//.test(ge)&&(Te=new XDomainRequest),"onload"in Te?Te.onload=Te.onerror=Fe:Te.onreadystatechange=function(){Te.readyState>3&&Fe()},Te.onprogress=function(Ze){var rt=y.event;y.event=Ze;try{fe.progress.call($,Te)}finally{y.event=rt}},$.header=function(Ze,rt){return Ze=(Ze+"").toLowerCase(),arguments.length<2?ve[Ze]:(null==rt?delete ve[Ze]:ve[Ze]=rt+"",$)},$.mimeType=function(Ze){return arguments.length?(O=null==Ze?null:Ze+"",$):O},$.responseType=function(Ze){return arguments.length?(Ee=Ze,$):Ee},$.response=function(Ze){return B=Ze,$},["get","post"].forEach(function(Ze){$[Ze]=function(){return $.send.apply($,[Ze].concat(M(arguments)))}}),$.send=function(Ze,rt,ft){if(2===arguments.length&&"function"==typeof rt&&(ft=rt,rt=null),Te.open(Ze,ge,!0),null==O||"accept"in ve||(ve.accept=O+",*/*"),Te.setRequestHeader)for(var It in ve)Te.setRequestHeader(It,ve[It]);return null!=O&&Te.overrideMimeType&&Te.overrideMimeType(O),null!=Ee&&(Te.responseType=Ee),null!=ft&&$.on("error",ft).on("load",function(Rt){ft(null,Rt)}),fe.beforesend.call($,Te),Te.send(null==rt?null:rt),$},$.abort=function(){return Te.abort(),$},y.rebind($,fe,"on"),null==H?$:$.get(1===(Ze=H).length?function(rt,ft){Ze(null==rt?ft:null)}:Ze)}Pn.forEach(function(ge,O){Pn.set(ge,Yt(O))}),y.functor=jn,y.xhr=Kn(P),y.dsv=function(ge,O){var B=new RegExp('["'+ge+"\n]"),H=ge.charCodeAt(0);function $(Fe,Ze,rt){arguments.length<3&&(rt=Ze,Ze=null);var ft=rr(Fe,O,null==Ze?fe:ve(Ze),rt);return ft.row=function(It){return arguments.length?ft.response(null==(Ze=It)?fe:ve(It)):Ze},ft}function fe(Fe){return $.parse(Fe.responseText)}function ve(Fe){return function(Ze){return $.parse(Ze.responseText,Fe)}}function Te(Fe){return Fe.map(Ee).join(ge)}function Ee(Fe){return B.test(Fe)?'"'+Fe.replace(/\"/g,'""')+'"':Fe}return $.parse=function(Fe,Ze){var rt;return $.parseRows(Fe,function(ft,It){if(rt)return rt(ft,It-1);var Rt=function(Lt){for(var Ot={},St=ft.length,Gt=0;Gt<St;++Gt)Ot[ft[Gt]]=Lt[Gt];return Ot};rt=Ze?function(Lt,Ot){return Ze(Rt(Lt),Ot)}:Rt})},$.parseRows=function(Fe,Ze){var rt,ft,It={},Rt={},Lt=[],Ot=Fe.length,St=0,Gt=0;function qt(){if(St>=Ot)return Rt;if(ft)return ft=!1,It;var yn=St;if(34===Fe.charCodeAt(yn)){for(var Sn=yn;Sn++<Ot;)if(34===Fe.charCodeAt(Sn)){if(34!==Fe.charCodeAt(Sn+1))break;++Sn}return St=Sn+2,13===(qn=Fe.charCodeAt(Sn+1))?(ft=!0,10===Fe.charCodeAt(Sn+2)&&++St):10===qn&&(ft=!0),Fe.slice(yn+1,Sn).replace(/""/g,'"')}for(;St<Ot;){var qn,Un=1;if(10===(qn=Fe.charCodeAt(St++)))ft=!0;else if(13===qn)ft=!0,10===Fe.charCodeAt(St)&&(++St,++Un);else if(qn!==H)continue;return Fe.slice(yn,St-Un)}return Fe.slice(yn)}for(;(rt=qt())!==Rt;){for(var Zt=[];rt!==It&&rt!==Rt;)Zt.push(rt),rt=qt();Ze&&null==(Zt=Ze(Zt,Gt++))||Lt.push(Zt)}return Lt},$.format=function(Fe){if(Array.isArray(Fe[0]))return $.formatRows(Fe);var Ze=new I,rt=[];return Fe.forEach(function(ft){for(var It in ft)Ze.has(It)||rt.push(Ze.add(It))}),[rt.map(Ee).join(ge)].concat(Fe.map(function(ft){return rt.map(function(It){return Ee(ft[It])}).join(ge)})).join("\n")},$.formatRows=function(Fe){return Fe.map(Te).join("\n")},$},y.csv=y.dsv(",","text/csv"),y.tsv=y.dsv("\t","text/tab-separated-values");var lr,kr,Xr,sr,oi=this[V(this,"requestAnimationFrame")]||function(ge){setTimeout(ge,17)};function Gr(ge,O,B){var H=arguments.length;H<2&&(O=0),H<3&&(B=Date.now());var fe={c:ge,t:B+O,n:null};return kr?kr.n=fe:lr=fe,kr=fe,Xr||(sr=clearTimeout(sr),Xr=1,oi(Lr)),fe}function Lr(){var ge=Jr(),O=Mi()-ge;O>24?(isFinite(O)&&(clearTimeout(sr),sr=setTimeout(Lr,O)),Xr=0):(Xr=1,oi(Lr))}function Jr(){for(var ge=Date.now(),O=lr;O;)ge>=O.t&&O.c(ge-O.t)&&(O.c=null),O=O.n;return ge}function Mi(){for(var ge,O=lr,B=1/0;O;)O.c?(O.t<B&&(B=O.t),O=(ge=O).n):O=ge?ge.n=O.n:lr=O.n;return kr=ge,B}function Jn(ge){return ge[0]}function br(ge){return ge[1]}function Fr(ge){for(var O,B,H,$=ge.length,fe=[0,1],ve=2,Te=2;Te<$;Te++){for(;ve>1&&((B=ge[fe[ve-1]])[0]-(O=ge[fe[ve-2]])[0])*((H=ge[Te])[1]-O[1])-(B[1]-O[1])*(H[0]-O[0])<=0;)--ve;fe[ve++]=Te}return fe.slice(0,ve)}function cr(ge,O){return ge[0]-O[0]||ge[1]-O[1]}y.timer=function(){Gr.apply(this,arguments)},y.timer.flush=function(){Jr(),Mi()},y.round=function(ge,O){return O?Math.round(ge*(O=Math.pow(10,O)))/O:Math.round(ge)},y.geom={},y.geom.hull=function(ge){var O=Jn,B=br;if(arguments.length)return H(ge);function H($){if($.length<3)return[];var fe,ve=jn(O),Te=jn(B),Ee=$.length,Fe=[],Ze=[];for(fe=0;fe<Ee;fe++)Fe.push([+ve.call(this,$[fe],fe),+Te.call(this,$[fe],fe),fe]);for(Fe.sort(cr),fe=0;fe<Ee;fe++)Ze.push([Fe[fe][0],-Fe[fe][1]]);var rt=Fr(Fe),ft=Fr(Ze),It=ft[0]===rt[0],Rt=ft[ft.length-1]===rt[rt.length-1],Lt=[];for(fe=rt.length-1;fe>=0;--fe)Lt.push($[Fe[rt[fe]][2]]);for(fe=+It;fe<ft.length-Rt;++fe)Lt.push($[Fe[ft[fe]][2]]);return Lt}return H.x=function($){return arguments.length?(O=$,H):O},H.y=function($){return arguments.length?(B=$,H):B},H},y.geom.polygon=function(ge){return U(ge,Qr),ge};var Qr=y.geom.polygon.prototype=[];function ui(ge,O,B){return(B[0]-O[0])*(ge[1]-O[1])<(B[1]-O[1])*(ge[0]-O[0])}function Nr(ge,O,B,H){var $=ge[0],fe=B[0],ve=O[0]-$,Te=H[0]-fe,Ee=ge[1],Fe=B[1],Ze=O[1]-Ee,rt=H[1]-Fe,ft=(Te*(Ee-Fe)-rt*($-fe))/(rt*ve-Te*Ze);return[$+ft*ve,Ee+ft*Ze]}function Hr(ge){var O=ge[0],B=ge[ge.length-1];return!(O[0]-B[0]||O[1]-B[1])}Qr.area=function(){for(var ge,O=-1,B=this.length,H=this[B-1],$=0;++O<B;)$+=(ge=H)[1]*(H=this[O])[0]-ge[0]*H[1];return.5*$},Qr.centroid=function(ge){var O,B,H=-1,$=this.length,fe=0,ve=0,Te=this[$-1];for(arguments.length||(ge=-1/(6*this.area()));++H<$;)fe+=((O=Te)[0]+(Te=this[H])[0])*(B=O[0]*Te[1]-Te[0]*O[1]),ve+=(O[1]+Te[1])*B;return[fe*ge,ve*ge]},Qr.clip=function(ge){for(var O,B,H,$,fe,ve,Te=Hr(ge),Ee=-1,Fe=this.length-Hr(this),Ze=this[Fe-1];++Ee<Fe;){for(O=ge.slice(),ge.length=0,$=this[Ee],fe=O[(H=O.length-Te)-1],B=-1;++B<H;)ui(ve=O[B],Ze,$)?(ui(fe,Ze,$)||ge.push(Nr(fe,ve,Ze,$)),ge.push(ve)):ui(fe,Ze,$)&&ge.push(Nr(fe,ve,Ze,$)),fe=ve;Te&&ge.push(ge[0]),Ze=$}return ge};var wr,un,er,Ut,vn,Tn=[],Qn=[];function Zn(){Wr(this),this.edge=this.site=this.circle=null}function $n(ge){var O=Tn.pop()||new Zn;return O.site=ge,O}function Hn(ge){jr(ge),er.remove(ge),Tn.push(ge),Wr(ge)}function Rn(ge){var O=ge.circle,B=O.x,H=O.cy,$={x:B,y:H},fe=ge.P,ve=ge.N,Te=[ge];Hn(ge);for(var Ee=fe;Ee.circle&&u(B-Ee.circle.x)<Ft&&u(H-Ee.circle.cy)<Ft;)fe=Ee.P,Te.unshift(Ee),Hn(Ee),Ee=fe;Te.unshift(Ee),jr(Ee);for(var Fe=ve;Fe.circle&&u(B-Fe.circle.x)<Ft&&u(H-Fe.circle.cy)<Ft;)ve=Fe.N,Te.push(Fe),Hn(Fe),Fe=ve;Te.push(Fe),jr(Fe);var Ze,rt=Te.length;for(Ze=1;Ze<rt;++Ze)pi((Fe=Te[Ze]).edge,(Ee=Te[Ze-1]).site,Fe.site,$);(Fe=Te[rt-1]).edge=ei((Ee=Te[0]).site,Fe.site,null,$),Tr(Ee),Tr(Fe)}function Fn(ge){for(var O,B,H,$,fe=ge.x,ve=ge.y,Te=er._;Te;)if((H=zn(Te,ve)-fe)>Ft)Te=Te.L;else{if(!(($=fe-Yn(Te,ve))>Ft)){H>-Ft?(O=Te.P,B=Te):$>-Ft?(O=Te,B=Te.N):O=B=Te;break}if(!Te.R){O=Te;break}Te=Te.R}var Ee=$n(ge);if(er.insert(O,Ee),O||B){if(O===B)return jr(O),B=$n(O.site),er.insert(Ee,B),Ee.edge=B.edge=ei(O.site,Ee.site),Tr(O),void Tr(B);if(B){jr(O),jr(B);var Fe=O.site,Ze=Fe.x,rt=Fe.y,ft=ge.x-Ze,It=ge.y-rt,Rt=B.site,Lt=Rt.x-Ze,Ot=Rt.y-rt,St=2*(ft*Ot-It*Lt),Gt=ft*ft+It*It,qt=Lt*Lt+Ot*Ot,Zt={x:(Ot*Gt-It*qt)/St+Ze,y:(ft*qt-Lt*Gt)/St+rt};pi(B.edge,Fe,Rt,Zt),Ee.edge=ei(Fe,ge,null,Zt),B.edge=ei(ge,Rt,null,Zt),Tr(O),Tr(B)}else Ee.edge=ei(O.site,Ee.site)}}function zn(ge,O){var B=ge.site,H=B.x,$=B.y,fe=$-O;if(!fe)return H;var ve=ge.P;if(!ve)return-1/0;var Te=(B=ve.site).x,Ee=B.y,Fe=Ee-O;if(!Fe)return Te;var Ze=Te-H,rt=1/fe-1/Fe,ft=Ze/Fe;return rt?(-ft+Math.sqrt(ft*ft-2*rt*(Ze*Ze/(-2*Fe)-Ee+Fe/2+$-fe/2)))/rt+H:(H+Te)/2}function Yn(ge,O){var B=ge.N;if(B)return zn(B,O);var H=ge.site;return H.y===O?H.x:1/0}function nr(ge){this.site=ge,this.edges=[]}function hr(ge,O){return O.angle-ge.angle}function _r(){Wr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Tr(ge){var O=ge.P,B=ge.N;if(O&&B){var H=O.site,$=ge.site,fe=B.site;if(H!==fe){var ve=$.x,Te=$.y,Ee=H.x-ve,Fe=H.y-Te,Ze=fe.x-ve,rt=2*(Ee*(Ot=fe.y-Te)-Fe*Ze);if(!(rt>=-1e-12)){var ft=Ee*Ee+Fe*Fe,It=Ze*Ze+Ot*Ot,Rt=(Ot*ft-Fe*It)/rt,Lt=(Ee*It-Ze*ft)/rt,Ot=Lt+Te,St=Qn.pop()||new _r;St.arc=ge,St.site=$,St.x=Rt+ve,St.y=Ot+Math.sqrt(Rt*Rt+Lt*Lt),St.cy=Ot,ge.circle=St;for(var Gt=null,qt=vn._;qt;)if(St.y<qt.y||St.y===qt.y&&St.x<=qt.x){if(!qt.L){Gt=qt.P;break}qt=qt.L}else{if(!qt.R){Gt=qt;break}qt=qt.R}vn.insert(Gt,St),Gt||(Ut=St)}}}}function jr(ge){var O=ge.circle;O&&(O.P||(Ut=O.N),vn.remove(O),Qn.push(O),Wr(O),ge.circle=null)}function Er(ge,O){var B=ge.b;if(B)return!0;var H,$,fe=ge.a,ve=O[0][0],Te=O[1][0],Ee=O[0][1],Fe=O[1][1],Ze=ge.l,rt=ge.r,ft=Ze.x,It=Ze.y,Rt=rt.x,Lt=rt.y,Ot=(ft+Rt)/2;if(Lt===It){if(Ot<ve||Ot>=Te)return;if(ft>Rt){if(fe){if(fe.y>=Fe)return}else fe={x:Ot,y:Ee};B={x:Ot,y:Fe}}else{if(fe){if(fe.y<Ee)return}else fe={x:Ot,y:Fe};B={x:Ot,y:Ee}}}else if($=(It+Lt)/2-(H=(ft-Rt)/(Lt-It))*Ot,H<-1||H>1)if(ft>Rt){if(fe){if(fe.y>=Fe)return}else fe={x:(Ee-$)/H,y:Ee};B={x:(Fe-$)/H,y:Fe}}else{if(fe){if(fe.y<Ee)return}else fe={x:(Fe-$)/H,y:Fe};B={x:(Ee-$)/H,y:Ee}}else if(It<Lt){if(fe){if(fe.x>=Te)return}else fe={x:ve,y:H*ve+$};B={x:Te,y:H*Te+$}}else{if(fe){if(fe.x<ve)return}else fe={x:Te,y:H*Te+$};B={x:ve,y:H*ve+$}}return ge.a=fe,ge.b=B,!0}function Yr(ge,O){this.l=ge,this.r=O,this.a=this.b=null}function ei(ge,O,B,H){var $=new Yr(ge,O);return wr.push($),B&&pi($,ge,O,B),H&&pi($,O,ge,H),un[ge.i].edges.push(new Ui($,ge,O)),un[O.i].edges.push(new Ui($,O,ge)),$}function xr(ge,O,B){var H=new Yr(ge,null);return H.a=O,H.b=B,wr.push(H),H}function pi(ge,O,B,H){ge.a||ge.b?ge.l===B?ge.b=H:ge.a=H:(ge.a=H,ge.l=O,ge.r=B)}function Ui(ge,O,B){var H=ge.a,$=ge.b;this.edge=ge,this.site=O,this.angle=B?Math.atan2(B.y-O.y,B.x-O.x):ge.l===O?Math.atan2($.x-H.x,H.y-$.y):Math.atan2(H.x-$.x,$.y-H.y)}function $i(){this._=null}function Wr(ge){ge.U=ge.C=ge.L=ge.R=ge.P=ge.N=null}function xi(ge,O){var B=O,H=O.R,$=B.U;$?$.L===B?$.L=H:$.R=H:ge._=H,H.U=$,B.U=H,B.R=H.L,B.R&&(B.R.U=B),H.L=B}function ki(ge,O){var B=O,H=O.L,$=B.U;$?$.L===B?$.L=H:$.R=H:ge._=H,H.U=$,B.U=H,B.L=H.R,B.L&&(B.L.U=B),H.R=B}function oa(ge){for(;ge.L;)ge=ge.L;return ge}function hi(ge,O){var B,H,$,fe=ge.sort(Xi).pop();for(wr=[],un=new Array(ge.length),er=new $i,vn=new $i;;)if($=Ut,fe&&(!$||fe.y<$.y||fe.y===$.y&&fe.x<$.x))fe.x===B&&fe.y===H||(un[fe.i]=new nr(fe),Fn(fe),B=fe.x,H=fe.y),fe=ge.pop();else{if(!$)break;Rn($.arc)}O&&(function(Te){for(var Ee,Fe,Ze,rt,ft,It=wr,Rt=(Fe=Te[0][0],Ze=Te[0][1],rt=Te[1][0],ft=Te[1][1],function(Ot){var St,Gt=Ot.a,qt=Ot.b,Zt=Gt.x,yn=Gt.y,Sn=0,qn=1,Un=qt.x-Zt,mr=qt.y-yn;if(St=Fe-Zt,Un||!(St>0)){if(St/=Un,Un<0){if(St<Sn)return;St<qn&&(qn=St)}else if(Un>0){if(St>qn)return;St>Sn&&(Sn=St)}if(St=rt-Zt,Un||!(St<0)){if(St/=Un,Un<0){if(St>qn)return;St>Sn&&(Sn=St)}else if(Un>0){if(St<Sn)return;St<qn&&(qn=St)}if(St=Ze-yn,mr||!(St>0)){if(St/=mr,mr<0){if(St<Sn)return;St<qn&&(qn=St)}else if(mr>0){if(St>qn)return;St>Sn&&(Sn=St)}if(St=ft-yn,mr||!(St<0)){if(St/=mr,mr<0){if(St>qn)return;St>Sn&&(Sn=St)}else if(mr>0){if(St<Sn)return;St<qn&&(qn=St)}return Sn>0&&(Ot.a={x:Zt+Sn*Un,y:yn+Sn*mr}),qn<1&&(Ot.b={x:Zt+qn*Un,y:yn+qn*mr}),Ot}}}}}),Lt=It.length;Lt--;)(!Er(Ee=It[Lt],Te)||!Rt(Ee)||u(Ee.a.x-Ee.b.x)<Ft&&u(Ee.a.y-Ee.b.y)<Ft)&&(Ee.a=Ee.b=null,It.splice(Lt,1))}(O),function(Te){for(var Ee,Fe,Ze,rt,ft,It,Rt,Lt,Ot,St,Gt=Te[0][0],qt=Te[1][0],Zt=Te[0][1],yn=Te[1][1],Sn=un,qn=Sn.length;qn--;)if((ft=Sn[qn])&&ft.prepare())for(Lt=(Rt=ft.edges).length,It=0;It<Lt;)Ze=(St=Rt[It].end()).x,rt=St.y,Ee=(Ot=Rt[++It%Lt].start()).x,Fe=Ot.y,(u(Ze-Ee)>Ft||u(rt-Fe)>Ft)&&(Rt.splice(It,0,new Ui(xr(ft.site,St,u(Ze-Gt)<Ft&&yn-rt>Ft?{x:Gt,y:u(Ee-Gt)<Ft?Fe:yn}:u(rt-yn)<Ft&&qt-Ze>Ft?{x:u(Fe-yn)<Ft?Ee:qt,y:yn}:u(Ze-qt)<Ft&&rt-Zt>Ft?{x:qt,y:u(Ee-qt)<Ft?Fe:Zt}:u(rt-Zt)<Ft&&Ze-Gt>Ft?{x:u(Fe-Zt)<Ft?Ee:Gt,y:Zt}:null),ft.site,null)),++Lt)}(O));var ve={cells:un,edges:wr};return er=vn=wr=un=null,ve}function Xi(ge,O){return O.y-ge.y||O.x-ge.x}nr.prototype.prepare=function(){for(var ge,O=this.edges,B=O.length;B--;)(ge=O[B].edge).b&&ge.a||O.splice(B,1);return O.sort(hr),O.length},Ui.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},$i.prototype={insert:function(ge,O){var B,H,$;if(ge){if(O.P=ge,O.N=ge.N,ge.N&&(ge.N.P=O),ge.N=O,ge.R){for(ge=ge.R;ge.L;)ge=ge.L;ge.L=O}else ge.R=O;B=ge}else this._?(ge=oa(this._),O.P=null,O.N=ge,ge.P=ge.L=O,B=ge):(O.P=O.N=null,this._=O,B=null);for(O.L=O.R=null,O.U=B,O.C=!0,ge=O;B&&B.C;)B===(H=B.U).L?($=H.R)&&$.C?(B.C=$.C=!1,H.C=!0,ge=H):(ge===B.R&&(xi(this,B),B=(ge=B).U),B.C=!1,H.C=!0,ki(this,H)):($=H.L)&&$.C?(B.C=$.C=!1,H.C=!0,ge=H):(ge===B.L&&(ki(this,B),B=(ge=B).U),B.C=!1,H.C=!0,xi(this,H)),B=ge.U;this._.C=!1},remove:function(ge){ge.N&&(ge.N.P=ge.P),ge.P&&(ge.P.N=ge.N),ge.N=ge.P=null;var O,B,H,$=ge.U,fe=ge.L,ve=ge.R;if(B=fe?ve?oa(ve):fe:ve,$?$.L===ge?$.L=B:$.R=B:this._=B,fe&&ve?(H=B.C,B.C=ge.C,B.L=fe,fe.U=B,B!==ve?($=B.U,B.U=ge.U,$.L=ge=B.R,B.R=ve,ve.U=B):(B.U=$,$=B,ge=B.R)):(H=ge.C,ge=B),ge&&(ge.U=$),!H)if(ge&&ge.C)ge.C=!1;else{do{if(ge===this._)break;if(ge===$.L){if((O=$.R).C&&(O.C=!1,$.C=!0,xi(this,$),O=$.R),O.L&&O.L.C||O.R&&O.R.C){O.R&&O.R.C||(O.L.C=!1,O.C=!0,ki(this,O),O=$.R),O.C=$.C,$.C=O.R.C=!1,xi(this,$),ge=this._;break}}else if((O=$.L).C&&(O.C=!1,$.C=!0,ki(this,$),O=$.L),O.L&&O.L.C||O.R&&O.R.C){O.L&&O.L.C||(O.R.C=!1,O.C=!0,xi(this,O),O=$.L),O.C=$.C,$.C=O.L.C=!1,ki(this,$),ge=this._;break}O.C=!0,ge=$,$=$.U}while(!ge.C);ge&&(ge.C=!1)}}},y.geom.voronoi=function(ge){var O=Jn,B=br,H=O,$=B,fe=Ea;if(ge)return ve(ge);function ve(Ee){var Fe=new Array(Ee.length),Ze=fe[0][0],rt=fe[0][1],ft=fe[1][0],It=fe[1][1];return hi(Te(Ee),fe).cells.forEach(function(Rt,Lt){var Ot=Rt.edges,St=Rt.site;(Fe[Lt]=Ot.length?Ot.map(function(Gt){var qt=Gt.start();return[qt.x,qt.y]}):St.x>=Ze&&St.x<=ft&&St.y>=rt&&St.y<=It?[[Ze,It],[ft,It],[ft,rt],[Ze,rt]]:[]).point=Ee[Lt]}),Fe}function Te(Ee){return Ee.map(function(Fe,Ze){return{x:Math.round(H(Fe,Ze)/Ft)*Ft,y:Math.round($(Fe,Ze)/Ft)*Ft,i:Ze}})}return ve.links=function(Ee){return hi(Te(Ee)).edges.filter(function(Fe){return Fe.l&&Fe.r}).map(function(Fe){return{source:Ee[Fe.l.i],target:Ee[Fe.r.i]}})},ve.triangles=function(Ee){var Fe=[];return hi(Te(Ee)).cells.forEach(function(Ze,rt){for(var ft,It,Rt,Lt,Ot=Ze.site,St=Ze.edges.sort(hr),Gt=-1,qt=St.length,Zt=St[qt-1].edge,yn=Zt.l===Ot?Zt.r:Zt.l;++Gt<qt;)ft=yn,yn=(Zt=St[Gt].edge).l===Ot?Zt.r:Zt.l,rt<ft.i&&rt<yn.i&&((It=Ot).x-(Lt=yn).x)*((Rt=ft).y-It.y)-(It.x-Rt.x)*(Lt.y-It.y)<0&&Fe.push([Ee[rt],Ee[ft.i],Ee[yn.i]])}),Fe},ve.x=function(Ee){return arguments.length?(H=jn(O=Ee),ve):O},ve.y=function(Ee){return arguments.length?($=jn(B=Ee),ve):B},ve.clipExtent=function(Ee){return arguments.length?(fe=null==Ee?Ea:Ee,ve):fe===Ea?null:fe},ve.size=function(Ee){return arguments.length?ve.clipExtent(Ee&&[[0,0],Ee]):fe===Ea?null:fe&&fe[1]},ve};var Ea=[[-1e6,-1e6],[1e6,1e6]];function ha(ge){return ge.x}function Aa(ge){return ge.y}function qa(ge,O,B,H,$,fe){if(!ge(O,B,H,$,fe)){var ve=.5*(B+$),Te=.5*(H+fe),Ee=O.nodes;Ee[0]&&qa(ge,Ee[0],B,H,ve,Te),Ee[1]&&qa(ge,Ee[1],ve,H,$,Te),Ee[2]&&qa(ge,Ee[2],B,Te,ve,fe),Ee[3]&&qa(ge,Ee[3],ve,Te,$,fe)}}function da(ge,O,B,H,$,fe,ve){var Te,Ee=1/0;return function Fe(Ze,rt,ft,It,Rt){if(!(rt>fe||ft>ve||It<H||Rt<$)){if(Lt=Ze.point){var Lt,Ot=O-Ze.x,St=B-Ze.y,Gt=Ot*Ot+St*St;if(Gt<Ee){var qt=Math.sqrt(Ee=Gt);H=O-qt,$=B-qt,fe=O+qt,ve=B+qt,Te=Lt}}for(var Zt=Ze.nodes,yn=.5*(rt+It),Sn=.5*(ft+Rt),qn=(B>=Sn)<<1|O>=yn,Un=qn+4;qn<Un;++qn)if(Ze=Zt[3&qn])switch(3&qn){case 0:Fe(Ze,rt,ft,yn,Sn);break;case 1:Fe(Ze,yn,ft,It,Sn);break;case 2:Fe(Ze,rt,Sn,yn,Rt);break;case 3:Fe(Ze,yn,Sn,It,Rt)}}}(ge,H,$,fe,ve),Te}function za(ge,O){ge=y.rgb(ge),O=y.rgb(O);var B=ge.r,H=ge.g,$=ge.b,fe=O.r-B,ve=O.g-H,Te=O.b-$;return function(Ee){return"#"+In(Math.round(B+fe*Ee))+In(Math.round(H+ve*Ee))+In(Math.round($+Te*Ee))}}function rs(ge,O){var B,H={},$={};for(B in ge)B in O?H[B]=Bo(ge[B],O[B]):$[B]=ge[B];for(B in O)B in ge||($[B]=O[B]);return function(fe){for(B in H)$[B]=H[B](fe);return $}}function po(ge,O){return ge=+ge,O=+O,function(B){return ge*(1-B)+O*B}}function Ji(ge,O){var B,H,$,fe=ds.lastIndex=is.lastIndex=0,ve=-1,Te=[],Ee=[];for(ge+="",O+="";(B=ds.exec(ge))&&(H=is.exec(O));)($=H.index)>fe&&($=O.slice(fe,$),Te[ve]?Te[ve]+=$:Te[++ve]=$),(B=B[0])===(H=H[0])?Te[ve]?Te[ve]+=H:Te[++ve]=H:(Te[++ve]=null,Ee.push({i:ve,x:po(B,H)})),fe=is.lastIndex;return fe<O.length&&($=O.slice(fe),Te[ve]?Te[ve]+=$:Te[++ve]=$),Te.length<2?Ee[0]?(O=Ee[0].x,function(Fe){return O(Fe)+""}):function(){return O}:(O=Ee.length,function(Fe){for(var Ze,rt=0;rt<O;++rt)Te[(Ze=Ee[rt]).i]=Ze.x(Fe);return Te.join("")})}y.geom.delaunay=function(ge){return y.geom.voronoi().triangles(ge)},y.geom.quadtree=function(ge,O,B,H,$){var fe,ve=Jn,Te=br;if(fe=arguments.length)return ve=ha,Te=Aa,3===fe&&($=B,H=O,B=O=0),Ee(ge);function Ee(Fe){var Ze,rt,ft,It,Rt,Lt,Ot,St,Gt,qt=jn(ve),Zt=jn(Te);if(null!=O)Lt=O,Ot=B,St=H,Gt=$;else if(St=Gt=-(Lt=Ot=1/0),rt=[],ft=[],Rt=Fe.length,fe)for(It=0;It<Rt;++It)(Ze=Fe[It]).x<Lt&&(Lt=Ze.x),Ze.y<Ot&&(Ot=Ze.y),Ze.x>St&&(St=Ze.x),Ze.y>Gt&&(Gt=Ze.y),rt.push(Ze.x),ft.push(Ze.y);else for(It=0;It<Rt;++It){var yn=+qt(Ze=Fe[It],It),Sn=+Zt(Ze,It);yn<Lt&&(Lt=yn),Sn<Ot&&(Ot=Sn),yn>St&&(St=yn),Sn>Gt&&(Gt=Sn),rt.push(yn),ft.push(Sn)}var qn=St-Lt,Un=Gt-Ot;function mr(Cr,di,wi,Bi,ur,$r,Ti,bi){if(!isNaN(wi)&&!isNaN(Bi))if(Cr.leaf){var Si=Cr.x,ji=Cr.y;if(null!=Si)if(u(Si-wi)+u(ji-Bi)<.01)gr(Cr,di,wi,Bi,ur,$r,Ti,bi);else{var ca=Cr.point;Cr.x=Cr.y=Cr.point=null,gr(Cr,ca,Si,ji,ur,$r,Ti,bi),gr(Cr,di,wi,Bi,ur,$r,Ti,bi)}else Cr.x=wi,Cr.y=Bi,Cr.point=di}else gr(Cr,di,wi,Bi,ur,$r,Ti,bi)}function gr(Cr,di,wi,Bi,ur,$r,Ti,bi){var Si=.5*(ur+Ti),ji=.5*($r+bi),ca=wi>=Si,Ei=Bi>=ji,ta=Ei<<1|ca;Cr.leaf=!1,ca?ur=Si:Ti=Si,Ei?$r=ji:bi=ji,mr(Cr=Cr.nodes[ta]||(Cr.nodes[ta]={leaf:!0,nodes:[],point:null,x:null,y:null}),di,wi,Bi,ur,$r,Ti,bi)}qn>Un?Gt=Ot+qn:St=Lt+Un;var Pr={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(Cr){mr(Pr,Cr,+qt(Cr,++It),+Zt(Cr,It),Lt,Ot,St,Gt)},visit:function(Cr){qa(Cr,Pr,Lt,Ot,St,Gt)},find:function(Cr){return da(Pr,Cr[0],Cr[1],Lt,Ot,St,Gt)}};if(It=-1,null==O){for(;++It<Rt;)mr(Pr,Fe[It],rt[It],ft[It],Lt,Ot,St,Gt);--It}else Fe.forEach(Pr.add);return rt=ft=Fe=Ze=null,Pr}return Ee.x=function(Fe){return arguments.length?(ve=Fe,Ee):ve},Ee.y=function(Fe){return arguments.length?(Te=Fe,Ee):Te},Ee.extent=function(Fe){return arguments.length?(null==Fe?O=B=H=$=null:(O=+Fe[0][0],B=+Fe[0][1],H=+Fe[1][0],$=+Fe[1][1]),Ee):null==O?null:[[O,B],[H,$]]},Ee.size=function(Fe){return arguments.length?(null==Fe?O=B=H=$=null:(O=B=0,H=+Fe[0],$=+Fe[1]),Ee):null==O?null:[H-O,$-B]},Ee},y.interpolateRgb=za,y.interpolateObject=rs,y.interpolateNumber=po,y.interpolateString=Ji;var ds=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,is=new RegExp(ds.source,"g");function Bo(ge,O){for(var B,H=y.interpolators.length;--H>=0&&!(B=y.interpolators[H](ge,O)););return B}function ro(ge,O){var B,H=[],$=[],fe=ge.length,ve=O.length,Te=Math.min(ge.length,O.length);for(B=0;B<Te;++B)H.push(Bo(ge[B],O[B]));for(;B<fe;++B)$[B]=ge[B];for(;B<ve;++B)$[B]=O[B];return function(Ee){for(B=0;B<Te;++B)$[B]=H[B](Ee);return $}}y.interpolate=Bo,y.interpolators=[function(ge,O){var B=typeof O;return("string"===B?Pn.has(O.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(O)?za:Ji:O instanceof ot?za:Array.isArray(O)?ro:"object"===B&&isNaN(O)?rs:po)(ge,O)}],y.interpolateArray=ro;var eo=function(){return P},fl=y.map({linear:eo,poly:function(ge){return function(O){return Math.pow(O,ge)}},quad:function(){return cu},cubic:function(){return Il},sin:function(){return kl},exp:function(){return Es},circle:function(){return as},elastic:function(ge,O){var B;return arguments.length<2&&(O=.45),arguments.length?B=O/Qt*Math.asin(1/ge):(ge=1,B=O/4),function(H){return 1+ge*Math.pow(2,-10*H)*Math.sin((H-B)*Qt/O)}},back:function(ge){return ge||(ge=1.70158),function(O){return O*O*((ge+1)*O-ge)}},bounce:function(){return bo}}),hl=y.map({in:P,out:Xa,"in-out":Ml,"out-in":function(ge){return Ml(Xa(ge))}});function va(ge){return function(O){return O<=0?0:O>=1?1:ge(O)}}function Xa(ge){return function(O){return 1-ge(1-O)}}function Ml(ge){return function(O){return.5*(O<.5?ge(2*O):2-ge(2-2*O))}}function cu(ge){return ge*ge}function Il(ge){return ge*ge*ge}function Pl(ge){if(ge<=0)return 0;if(ge>=1)return 1;var O=ge*ge,B=O*ge;return 4*(ge<.5?B:3*(ge-O)+B-.75)}function kl(ge){return 1-Math.cos(ge*dn)}function Es(ge){return Math.pow(2,10*(ge-1))}function as(ge){return 1-Math.sqrt(1-ge*ge)}function bo(ge){return ge<1/2.75?7.5625*ge*ge:ge<2/2.75?7.5625*(ge-=1.5/2.75)*ge+.75:ge<2.5/2.75?7.5625*(ge-=2.25/2.75)*ge+.9375:7.5625*(ge-=2.625/2.75)*ge+.984375}function nl(ge,O){return O-=ge,function(B){return Math.round(ge+O*B)}}function ts(ge){var O,B,H,$=[ge.a,ge.b],fe=[ge.c,ge.d],ve=_s($),Te=os($,fe),Ee=_s(((O=fe)[0]+=(H=-Te)*(B=$)[0],O[1]+=H*B[1],O))||0;$[0]*fe[1]<fe[0]*$[1]&&($[0]*=-1,$[1]*=-1,ve*=-1,Te*=-1),this.rotate=(ve?Math.atan2($[1],$[0]):Math.atan2(-fe[0],fe[1]))*sn,this.translate=[ge.e,ge.f],this.scale=[ve,Ee],this.skew=Ee?Math.atan2(Te,Ee)*sn:0}function os(ge,O){return ge[0]*O[0]+ge[1]*O[1]}function _s(ge){var O=Math.sqrt(os(ge,ge));return O&&(ge[0]/=O,ge[1]/=O),O}y.ease=function(ge){var O=ge.indexOf("-"),B=O>=0?ge.slice(0,O):ge,H=O>=0?ge.slice(O+1):"in";return B=fl.get(B)||eo,va((H=hl.get(H)||P)(B.apply(null,x.call(arguments,1))))},y.interpolateHcl=function(ge,O){ge=y.hcl(ge),O=y.hcl(O);var B=ge.h,H=ge.c,$=ge.l,fe=O.h-B,ve=O.c-H,Te=O.l-$;return isNaN(ve)&&(ve=0,H=isNaN(H)?O.c:H),isNaN(fe)?(fe=0,B=isNaN(B)?O.h:B):fe>180?fe-=360:fe<-180&&(fe+=360),function(Ee){return pt(B+fe*Ee,H+ve*Ee,$+Te*Ee)+""}},y.interpolateHsl=function(ge,O){ge=y.hsl(ge),O=y.hsl(O);var B=ge.h,H=ge.s,$=ge.l,fe=O.h-B,ve=O.s-H,Te=O.l-$;return isNaN(ve)&&(ve=0,H=isNaN(H)?O.s:H),isNaN(fe)?(fe=0,B=isNaN(B)?O.h:B):fe>180?fe-=360:fe<-180&&(fe+=360),function(Ee){return xt(B+fe*Ee,H+ve*Ee,$+Te*Ee)+""}},y.interpolateLab=function(ge,O){ge=y.lab(ge),O=y.lab(O);var B=ge.l,H=ge.a,$=ge.b,fe=O.l-B,ve=O.a-H,Te=O.b-$;return function(Ee){return Pt(B+fe*Ee,H+ve*Ee,$+Te*Ee)+""}},y.interpolateRound=nl,y.transform=function(ge){var O=_.createElementNS(y.ns.prefix.svg,"g");return(y.transform=function(B){if(null!=B){O.setAttribute("transform",B);var H=O.transform.baseVal.consolidate()}return new ts(H?H.matrix:dl)})(ge)},ts.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var dl={a:1,b:0,c:0,d:1,e:0,f:0};function ss(ge){return ge.length?ge.pop()+",":""}function Jo(ge,O){var $,fe,ve,B=[],H=[];return ge=y.transform(ge),O=y.transform(O),function($,fe,ve,Te){if($[0]!==fe[0]||$[1]!==fe[1]){var Ee=ve.push("translate(",null,",",null,")");Te.push({i:Ee-4,x:po($[0],fe[0])},{i:Ee-2,x:po($[1],fe[1])})}else(fe[0]||fe[1])&&ve.push("translate("+fe+")")}(ge.translate,O.translate,B,H),ve=B,($=ge.rotate)!==(fe=O.rotate)?($-fe>180?fe+=360:fe-$>180&&($+=360),H.push({i:ve.push(ss(ve)+"rotate(",null,")")-2,x:po($,fe)})):fe&&ve.push(ss(ve)+"rotate("+fe+")"),function($,fe,ve,Te){$!==fe?Te.push({i:ve.push(ss(ve)+"skewX(",null,")")-2,x:po($,fe)}):fe&&ve.push(ss(ve)+"skewX("+fe+")")}(ge.skew,O.skew,B,H),function($,fe,ve,Te){if($[0]!==fe[0]||$[1]!==fe[1]){var Ee=ve.push(ss(ve)+"scale(",null,",",null,")");Te.push({i:Ee-4,x:po($[0],fe[0])},{i:Ee-2,x:po($[1],fe[1])})}else 1===fe[0]&&1===fe[1]||ve.push(ss(ve)+"scale("+fe+")")}(ge.scale,O.scale,B,H),ge=O=null,function($){for(var fe,ve=-1,Te=H.length;++ve<Te;)B[(fe=H[ve]).i]=fe.x($);return B.join("")}}function Wl(ge,O){return O=(O-=ge=+ge)||1/O,function(B){return(B-ge)/O}}function Ys(ge,O){return O=(O-=ge=+ge)||1/O,function(B){return Math.max(0,Math.min(1,(B-ge)/O))}}function Va(ge){for(var O=ge.source,B=ge.target,H=function(ve,Te){if(ve===Te)return ve;for(var Ee=Ye(ve),Fe=Ye(Te),Ze=Ee.pop(),rt=Fe.pop(),ft=null;Ze===rt;)ft=Ze,Ze=Ee.pop(),rt=Fe.pop();return ft}(O,B),$=[O];O!==H;)$.push(O=O.parent);for(var fe=$.length;B!==H;)$.splice(fe,0,B),B=B.parent;return $}function Ye(ge){for(var O=[],B=ge.parent;null!=B;)O.push(ge),ge=B,B=B.parent;return O.push(ge),O}function Ke(ge){ge.fixed|=2}function ut(ge){ge.fixed&=-7}function gt(ge){ge.fixed|=4,ge.px=ge.x,ge.py=ge.y}function Mt(ge){ge.fixed&=-5}y.interpolateTransform=Jo,y.layout={},y.layout.bundle=function(){return function(ge){for(var O=[],B=-1,H=ge.length;++B<H;)O.push(Va(ge[B]));return O}},y.layout.chord=function(){var ge,O,B,H,$,fe,ve,Te={},Ee=0;function Fe(){var rt,ft,It,Rt,Lt,Ot={},St=[],Gt=y.range(H),qt=[];for(ge=[],O=[],rt=0,Rt=-1;++Rt<H;){for(ft=0,Lt=-1;++Lt<H;)ft+=B[Rt][Lt];St.push(ft),qt.push(y.range(H)),rt+=ft}for($&&Gt.sort(function(Pr,Cr){return $(St[Pr],St[Cr])}),fe&&qt.forEach(function(Pr,Cr){Pr.sort(function(di,wi){return fe(B[Cr][di],B[Cr][wi])})}),rt=(Qt-Ee*H)/rt,ft=0,Rt=-1;++Rt<H;){for(It=ft,Lt=-1;++Lt<H;){var Zt=Gt[Rt],yn=qt[Zt][Lt],Sn=B[Zt][yn],qn=ft,Un=ft+=Sn*rt;Ot[Zt+"-"+yn]={index:Zt,subindex:yn,startAngle:qn,endAngle:Un,value:Sn}}O[Zt]={index:Zt,startAngle:It,endAngle:ft,value:St[Zt]},ft+=Ee}for(Rt=-1;++Rt<H;)for(Lt=Rt-1;++Lt<H;){var mr=Ot[Rt+"-"+Lt],gr=Ot[Lt+"-"+Rt];(mr.value||gr.value)&&ge.push(mr.value<gr.value?{source:gr,target:mr}:{source:mr,target:gr})}ve&&Ze()}function Ze(){ge.sort(function(rt,ft){return ve((rt.source.value+rt.target.value)/2,(ft.source.value+ft.target.value)/2)})}return Te.matrix=function(rt){return arguments.length?(H=(B=rt)&&B.length,ge=O=null,Te):B},Te.padding=function(rt){return arguments.length?(Ee=rt,ge=O=null,Te):Ee},Te.sortGroups=function(rt){return arguments.length?($=rt,ge=O=null,Te):$},Te.sortSubgroups=function(rt){return arguments.length?(fe=rt,ge=null,Te):fe},Te.sortChords=function(rt){return arguments.length?(ve=rt,ge&&Ze(),Te):ve},Te.chords=function(){return ge||Fe(),ge},Te.groups=function(){return O||Fe(),O},Te},y.layout.force=function(){var ge,O,B,H,$,fe,ve={},Te=y.dispatch("start","tick","end"),Ee=[1,1],Fe=.9,Ze=wt,rt=zt,ft=-30,It=cn,Rt=.1,Lt=.64,Ot=[],St=[];function Gt(Zt){return function(yn,Sn,qn,Un){if(yn.point!==Zt){var mr=yn.cx-Zt.x,gr=yn.cy-Zt.y,Pr=Un-Sn,Cr=mr*mr+gr*gr;if(Pr*Pr/Lt<Cr){if(Cr<It){var di=yn.charge/Cr;Zt.px-=mr*di,Zt.py-=gr*di}return!0}yn.point&&Cr&&Cr<It&&(Zt.px-=mr*(di=yn.pointCharge/Cr),Zt.py-=gr*di)}return!yn.charge}}function qt(Zt){Zt.px=y.event.x,Zt.py=y.event.y,ve.resume()}return ve.tick=function(){if((B*=.99)<.005)return ge=null,Te.end({type:"end",alpha:B=0}),!0;var Zt,yn,Sn,qn,Un,mr,gr,Pr,Cr,di=Ot.length,wi=St.length;for(yn=0;yn<wi;++yn)qn=(Sn=St[yn]).source,(mr=(Pr=(Un=Sn.target).x-qn.x)*Pr+(Cr=Un.y-qn.y)*Cr)&&(Pr*=mr=B*$[yn]*((mr=Math.sqrt(mr))-H[yn])/mr,Cr*=mr,Un.x-=Pr*(gr=qn.weight+Un.weight?qn.weight/(qn.weight+Un.weight):.5),Un.y-=Cr*gr,qn.x+=Pr*(gr=1-gr),qn.y+=Cr*gr);if((gr=B*Rt)&&(Pr=Ee[0]/2,Cr=Ee[1]/2,yn=-1,gr))for(;++yn<di;)(Sn=Ot[yn]).x+=(Pr-Sn.x)*gr,Sn.y+=(Cr-Sn.y)*gr;if(ft)for(function Bi(ur,$r,Ti){var bi=0,Si=0;if(ur.charge=0,!ur.leaf)for(var ji,ca=ur.nodes,Ei=ca.length,ta=-1;++ta<Ei;)null!=(ji=ca[ta])&&(Bi(ji,$r,Ti),ur.charge+=ji.charge,bi+=ji.charge*ji.cx,Si+=ji.charge*ji.cy);if(ur.point){ur.leaf||(ur.point.x+=Math.random()-.5,ur.point.y+=Math.random()-.5);var Zi=$r*Ti[ur.point.index];ur.charge+=ur.pointCharge=Zi,bi+=Zi*ur.point.x,Si+=Zi*ur.point.y}ur.cx=bi/ur.charge,ur.cy=Si/ur.charge}(Zt=y.geom.quadtree(Ot),B,fe),yn=-1;++yn<di;)(Sn=Ot[yn]).fixed||Zt.visit(Gt(Sn));for(yn=-1;++yn<di;)(Sn=Ot[yn]).fixed?(Sn.x=Sn.px,Sn.y=Sn.py):(Sn.x-=(Sn.px-(Sn.px=Sn.x))*Fe,Sn.y-=(Sn.py-(Sn.py=Sn.y))*Fe);Te.tick({type:"tick",alpha:B})},ve.nodes=function(Zt){return arguments.length?(Ot=Zt,ve):Ot},ve.links=function(Zt){return arguments.length?(St=Zt,ve):St},ve.size=function(Zt){return arguments.length?(Ee=Zt,ve):Ee},ve.linkDistance=function(Zt){return arguments.length?(Ze="function"==typeof Zt?Zt:+Zt,ve):Ze},ve.distance=ve.linkDistance,ve.linkStrength=function(Zt){return arguments.length?(rt="function"==typeof Zt?Zt:+Zt,ve):rt},ve.friction=function(Zt){return arguments.length?(Fe=+Zt,ve):Fe},ve.charge=function(Zt){return arguments.length?(ft="function"==typeof Zt?Zt:+Zt,ve):ft},ve.chargeDistance=function(Zt){return arguments.length?(It=Zt*Zt,ve):Math.sqrt(It)},ve.gravity=function(Zt){return arguments.length?(Rt=+Zt,ve):Rt},ve.theta=function(Zt){return arguments.length?(Lt=Zt*Zt,ve):Math.sqrt(Lt)},ve.alpha=function(Zt){return arguments.length?(Zt=+Zt,B?Zt>0?B=Zt:(ge.c=null,ge.t=NaN,ge=null,Te.end({type:"end",alpha:B=0})):Zt>0&&(Te.start({type:"start",alpha:B=Zt}),ge=Gr(ve.tick)),ve):B},ve.start=function(){var Zt,yn,Sn,qn=Ot.length,Un=St.length,mr=Ee[0],gr=Ee[1];for(Zt=0;Zt<qn;++Zt)(Sn=Ot[Zt]).index=Zt,Sn.weight=0;for(Zt=0;Zt<Un;++Zt)"number"==typeof(Sn=St[Zt]).source&&(Sn.source=Ot[Sn.source]),"number"==typeof Sn.target&&(Sn.target=Ot[Sn.target]),++Sn.source.weight,++Sn.target.weight;for(Zt=0;Zt<qn;++Zt)Sn=Ot[Zt],isNaN(Sn.x)&&(Sn.x=Pr("x",mr)),isNaN(Sn.y)&&(Sn.y=Pr("y",gr)),isNaN(Sn.px)&&(Sn.px=Sn.x),isNaN(Sn.py)&&(Sn.py=Sn.y);if(H=[],"function"==typeof Ze)for(Zt=0;Zt<Un;++Zt)H[Zt]=+Ze.call(this,St[Zt],Zt);else for(Zt=0;Zt<Un;++Zt)H[Zt]=Ze;if($=[],"function"==typeof rt)for(Zt=0;Zt<Un;++Zt)$[Zt]=+rt.call(this,St[Zt],Zt);else for(Zt=0;Zt<Un;++Zt)$[Zt]=rt;if(fe=[],"function"==typeof ft)for(Zt=0;Zt<qn;++Zt)fe[Zt]=+ft.call(this,Ot[Zt],Zt);else for(Zt=0;Zt<qn;++Zt)fe[Zt]=ft;function Pr(Cr,di){if(!yn){for(yn=new Array(qn),$r=0;$r<qn;++$r)yn[$r]=[];for($r=0;$r<Un;++$r){var wi=St[$r];yn[wi.source.index].push(wi.target),yn[wi.target.index].push(wi.source)}}for(var Bi,ur=yn[Zt],$r=-1,Ti=ur.length;++$r<Ti;)if(!isNaN(Bi=ur[$r][Cr]))return Bi;return Math.random()*di}return ve.resume()},ve.resume=function(){return ve.alpha(.1)},ve.stop=function(){return ve.alpha(0)},ve.drag=function(){if(O||(O=y.behavior.drag().origin(P).on("dragstart.force",Ke).on("drag.force",qt).on("dragend.force",ut)),!arguments.length)return O;this.on("mouseover.force",gt).on("mouseout.force",Mt).call(O)},y.rebind(ve,Te,"on")};var wt=20,zt=1,cn=1/0;function hn(ge,O){return y.rebind(ge,O,"sort","children","value"),ge.nodes=ge,ge.links=Xn,ge}function ln(ge,O){for(var B=[ge];null!=(ge=B.pop());)if(O(ge),($=ge.children)&&(H=$.length))for(var H,$;--H>=0;)B.push($[H])}function bn(ge,O){for(var B=[ge],H=[];null!=(ge=B.pop());)if(H.push(ge),(fe=ge.children)&&($=fe.length))for(var $,fe,ve=-1;++ve<$;)B.push(fe[ve]);for(;null!=(ge=H.pop());)O(ge)}function En(ge){return ge.children}function On(ge){return ge.value}function Nn(ge,O){return O.value-ge.value}function Xn(ge){return y.merge(ge.map(function(O){return(O.children||[]).map(function(B){return{source:O,target:B}})}))}y.layout.hierarchy=function(){var ge=Nn,O=En,B=On;function H($){var fe,ve=[$],Te=[];for($.depth=0;null!=(fe=ve.pop());)if(Te.push(fe),(Fe=O.call(H,fe,fe.depth))&&(Ee=Fe.length)){for(var Ee,Fe,Ze;--Ee>=0;)ve.push(Ze=Fe[Ee]),Ze.parent=fe,Ze.depth=fe.depth+1;B&&(fe.value=0),fe.children=Fe}else B&&(fe.value=+B.call(H,fe,fe.depth)||0),delete fe.children;return bn($,function(rt){var ft,It;ge&&(ft=rt.children)&&ft.sort(ge),B&&(It=rt.parent)&&(It.value+=rt.value)}),Te}return H.sort=function($){return arguments.length?(ge=$,H):ge},H.children=function($){return arguments.length?(O=$,H):O},H.value=function($){return arguments.length?(B=$,H):B},H.revalue=function($){return B&&(ln($,function(fe){fe.children&&(fe.value=0)}),bn($,function(fe){var ve;fe.children||(fe.value=+B.call(H,fe,fe.depth)||0),(ve=fe.parent)&&(ve.value+=fe.value)})),$},H},y.layout.partition=function(){var ge=y.layout.hierarchy(),O=[1,1];function B(H,$){var fe=ge.call(this,H,$);return function ve(Te,Ee,Fe,Ze){var rt=Te.children;if(Te.x=Ee,Te.y=Te.depth*Ze,Te.dx=Fe,Te.dy=Ze,rt&&(ft=rt.length)){var ft,It,Rt,Lt=-1;for(Fe=Te.value?Fe/Te.value:0;++Lt<ft;)ve(It=rt[Lt],Ee,Rt=It.value*Fe,Ze),Ee+=Rt}}(fe[0],0,O[0],O[1]/function ve(Te){var Ee=Te.children,Fe=0;if(Ee&&(Ze=Ee.length))for(var Ze,rt=-1;++rt<Ze;)Fe=Math.max(Fe,ve(Ee[rt]));return 1+Fe}(fe[0])),fe}return B.size=function(H){return arguments.length?(O=H,B):O},hn(B,ge)},y.layout.pie=function(){var ge=Number,O=Mr,B=0,H=Qt,$=0;function fe(ve){var Te,Ee=ve.length,Fe=ve.map(function(Gt,qt){return+ge.call(fe,Gt,qt)}),Ze=+("function"==typeof B?B.apply(this,arguments):B),rt=("function"==typeof H?H.apply(this,arguments):H)-Ze,ft=Math.min(Math.abs(rt)/Ee,+("function"==typeof $?$.apply(this,arguments):$)),It=ft*(rt<0?-1:1),Rt=y.sum(Fe),Lt=Rt?(rt-Ee*It)/Rt:0,Ot=y.range(Ee),St=[];return null!=O&&Ot.sort(O===Mr?function(Gt,qt){return Fe[qt]-Fe[Gt]}:function(Gt,qt){return O(ve[Gt],ve[qt])}),Ot.forEach(function(Gt){St[Gt]={data:ve[Gt],value:Te=Fe[Gt],startAngle:Ze,endAngle:Ze+=Te*Lt+It,padAngle:ft}}),St}return fe.value=function(ve){return arguments.length?(ge=ve,fe):ge},fe.sort=function(ve){return arguments.length?(O=ve,fe):O},fe.startAngle=function(ve){return arguments.length?(B=ve,fe):B},fe.endAngle=function(ve){return arguments.length?(H=ve,fe):H},fe.padAngle=function(ve){return arguments.length?($=ve,fe):$},fe};var Mr={};function Or(ge){return ge.x}function ii(ge){return ge.y}function ci(ge,O,B){ge.y0=O,ge.y=B}y.layout.stack=function(){var ge=P,O=Yi,B=Ni,H=ci,$=Or,fe=ii;function ve(Te,Ee){if(!(ft=Te.length))return Te;var Fe=Te.map(function(Gt,qt){return ge.call(ve,Gt,qt)}),Ze=Fe.map(function(Gt){return Gt.map(function(qt,Zt){return[$.call(ve,qt,Zt),fe.call(ve,qt,Zt)]})}),rt=O.call(ve,Ze,Ee);Fe=y.permute(Fe,rt),Ze=y.permute(Ze,rt);var ft,It,Rt,Lt,Ot=B.call(ve,Ze,Ee),St=Fe[0].length;for(Rt=0;Rt<St;++Rt)for(H.call(ve,Fe[0][Rt],Lt=Ot[Rt],Ze[0][Rt][1]),It=1;It<ft;++It)H.call(ve,Fe[It][Rt],Lt+=Ze[It-1][Rt][1],Ze[It][Rt][1]);return Te}return ve.values=function(Te){return arguments.length?(ge=Te,ve):ge},ve.order=function(Te){return arguments.length?(O="function"==typeof Te?Te:vi.get(Te)||Yi,ve):O},ve.offset=function(Te){return arguments.length?(B="function"==typeof Te?Te:ai.get(Te)||Ni,ve):B},ve.x=function(Te){return arguments.length?($=Te,ve):$},ve.y=function(Te){return arguments.length?(fe=Te,ve):fe},ve.out=function(Te){return arguments.length?(H=Te,ve):H},ve};var vi=y.map({"inside-out":function(ge){var O,B,H=ge.length,$=ge.map(Sa),fe=ge.map(Da),ve=y.range(H).sort(function(rt,ft){return $[rt]-$[ft]}),Te=0,Ee=0,Fe=[],Ze=[];for(O=0;O<H;++O)B=ve[O],Te<Ee?(Te+=fe[B],Fe.push(B)):(Ee+=fe[B],Ze.push(B));return Ze.reverse().concat(Fe)},reverse:function(ge){return y.range(ge.length).reverse()},default:Yi}),ai=y.map({silhouette:function(ge){var O,B,H,$=ge.length,fe=ge[0].length,ve=[],Te=0,Ee=[];for(B=0;B<fe;++B){for(O=0,H=0;O<$;O++)H+=ge[O][B][1];H>Te&&(Te=H),ve.push(H)}for(B=0;B<fe;++B)Ee[B]=(Te-ve[B])/2;return Ee},wiggle:function(ge){var O,B,H,$,fe,ve,Te,Ee,Fe,Ze=ge.length,rt=ge[0],ft=rt.length,It=[];for(It[0]=Ee=Fe=0,B=1;B<ft;++B){for(O=0,$=0;O<Ze;++O)$+=ge[O][B][1];for(O=0,fe=0,Te=rt[B][0]-rt[B-1][0];O<Ze;++O){for(H=0,ve=(ge[O][B][1]-ge[O][B-1][1])/(2*Te);H<O;++H)ve+=(ge[H][B][1]-ge[H][B-1][1])/Te;fe+=ve*ge[O][B][1]}It[B]=Ee-=$?fe/$*Te:0,Ee<Fe&&(Fe=Ee)}for(B=0;B<ft;++B)It[B]-=Fe;return It},expand:function(ge){var O,B,H,$=ge.length,fe=ge[0].length,ve=1/$,Te=[];for(B=0;B<fe;++B){for(O=0,H=0;O<$;O++)H+=ge[O][B][1];if(H)for(O=0;O<$;O++)ge[O][B][1]/=H;else for(O=0;O<$;O++)ge[O][B][1]=ve}for(B=0;B<fe;++B)Te[B]=0;return Te},zero:Ni});function Yi(ge){return y.range(ge.length)}function Ni(ge){for(var O=-1,B=ge[0].length,H=[];++O<B;)H[O]=0;return H}function Sa(ge){for(var O,B=1,H=0,$=ge[0][1],fe=ge.length;B<fe;++B)(O=ge[B][1])>$&&(H=B,$=O);return H}function Da(ge){return ge.reduce(Oa,0)}function Oa(ge,O){return ge+O[1]}function Co(ge,O){return Mo(ge,Math.ceil(Math.log(O.length)/Math.LN2+1))}function Mo(ge,O){for(var B=-1,H=+ge[0],$=(ge[1]-H)/O,fe=[];++B<=O;)fe[B]=$*B+H;return fe}function io(ge){return[y.min(ge),y.max(ge)]}function Ja(ge,O){return ge.value-O.value}function Eo(ge,O){var B=ge._pack_next;ge._pack_next=O,O._pack_prev=ge,O._pack_next=B,B._pack_prev=O}function to(ge,O){ge._pack_next=O,O._pack_prev=ge}function ps(ge,O){var B=O.x-ge.x,H=O.y-ge.y,$=ge.r+O.r;return.999*$*$>B*B+H*H}function gs(ge){if((O=ge.children)&&(Ee=O.length)){var O,B,H,$,fe,ve,Te,Ee,Fe=1/0,Ze=-1/0,rt=1/0,ft=-1/0;if(O.forEach(ls),(B=O[0]).x=-B.r,B.y=0,qt(B),Ee>1&&((H=O[1]).x=H.r,H.y=0,qt(H),Ee>2))for(ba(B,H,$=O[2]),qt($),Eo(B,$),B._pack_prev=$,Eo($,H),H=B._pack_next,fe=3;fe<Ee;fe++){ba(B,H,$=O[fe]);var It=0,Rt=1,Lt=1;for(ve=H._pack_next;ve!==H;ve=ve._pack_next,Rt++)if(ps(ve,$)){It=1;break}if(1==It)for(Te=B._pack_prev;Te!==ve._pack_prev&&!ps(Te,$);Te=Te._pack_prev,Lt++);It?(Rt<Lt||Rt==Lt&&H.r<B.r?to(B,H=ve):to(B=Te,H),fe--):(Eo(B,$),H=$,qt($))}var Ot=(Fe+Ze)/2,St=(rt+ft)/2,Gt=0;for(fe=0;fe<Ee;fe++)($=O[fe]).x-=Ot,$.y-=St,Gt=Math.max(Gt,$.r+Math.sqrt($.x*$.x+$.y*$.y));ge.r=Gt,O.forEach(ws)}function qt(Zt){Fe=Math.min(Zt.x-Zt.r,Fe),Ze=Math.max(Zt.x+Zt.r,Ze),rt=Math.min(Zt.y-Zt.r,rt),ft=Math.max(Zt.y+Zt.r,ft)}}function ls(ge){ge._pack_next=ge._pack_prev=ge}function ws(ge){delete ge._pack_next,delete ge._pack_prev}function ba(ge,O,B){var H=ge.r+B.r,$=O.x-ge.x,fe=O.y-ge.y;if(H&&($||fe)){var ve=O.r+B.r,Te=$*$+fe*fe,Ee=.5+((H*=H)-(ve*=ve))/(2*Te),Fe=Math.sqrt(Math.max(0,2*ve*(H+Te)-(H-=Te)*H-ve*ve))/(2*Te);B.x=ge.x+Ee*$+Fe*fe,B.y=ge.y+Ee*fe-Fe*$}else B.x=ge.x+H,B.y=ge.y}function _t(ge,O){return ge.parent==O.parent?1:2}function jt(ge){var O=ge.children;return O.length?O[0]:ge.t}function _n(ge){var O,B=ge.children;return(O=B.length)?B[O-1]:ge.t}function Kt(ge,O,B){var H=B/(O.i-ge.i);O.c-=H,O.s+=B,ge.c+=H,O.z+=B,O.m+=B}function wn(ge,O,B){return ge.a.parent===O.parent?ge.a:B}function Vn(ge){return{x:ge.x,y:ge.y,dx:ge.dx,dy:ge.dy}}function tr(ge,O){var B=ge.x+O[3],H=ge.y+O[0],$=ge.dx-O[1]-O[3],fe=ge.dy-O[0]-O[2];return $<0&&(B+=$/2,$=0),fe<0&&(H+=fe/2,fe=0),{x:B,y:H,dx:$,dy:fe}}function pr(ge){var O=ge[0],B=ge[ge.length-1];return O<B?[O,B]:[B,O]}function Sr(ge){return ge.rangeExtent?ge.rangeExtent():pr(ge.range())}function yr(ge,O,B,H){var $=B(ge[0],ge[1]),fe=H(O[0],O[1]);return function(ve){return fe($(ve))}}function zr(ge,O){var B,H=0,$=ge.length-1,fe=ge[H],ve=ge[$];return ve<fe&&(B=H,H=$,$=B,B=fe,fe=ve,ve=B),ge[H]=O.floor(fe),ge[$]=O.ceil(ve),ge}function Zr(ge){return ge?{floor:function(O){return Math.floor(O/ge)*ge},ceil:function(O){return Math.ceil(O/ge)*ge}}:Ar}y.layout.histogram=function(){var ge=!0,O=Number,B=io,H=Co;function $(fe,ve){for(var Te,Ee,Fe=[],Ze=fe.map(O,this),rt=B.call(this,Ze,ve),ft=H.call(this,rt,Ze,ve),It=(ve=-1,Ze.length),Rt=ft.length-1,Lt=ge?1:1/It;++ve<Rt;)(Te=Fe[ve]=[]).dx=ft[ve+1]-(Te.x=ft[ve]),Te.y=0;if(Rt>0)for(ve=-1;++ve<It;)(Ee=Ze[ve])>=rt[0]&&Ee<=rt[1]&&((Te=Fe[y.bisect(ft,Ee,1,Rt)-1]).y+=Lt,Te.push(fe[ve]));return Fe}return $.value=function(fe){return arguments.length?(O=fe,$):O},$.range=function(fe){return arguments.length?(B=jn(fe),$):B},$.bins=function(fe){return arguments.length?(H="number"==typeof fe?function(ve){return Mo(ve,fe)}:jn(fe),$):H},$.frequency=function(fe){return arguments.length?(ge=!!fe,$):ge},$},y.layout.pack=function(){var ge,O=y.layout.hierarchy().sort(Ja),B=0,H=[1,1];function $(fe,ve){var Te=O.call(this,fe,ve),Ee=Te[0],Fe=H[0],Ze=H[1],rt=null==ge?Math.sqrt:"function"==typeof ge?ge:function(){return ge};if(Ee.x=Ee.y=0,bn(Ee,function(It){It.r=+rt(It.value)}),bn(Ee,gs),B){var ft=B*(ge?1:Math.max(2*Ee.r/Fe,2*Ee.r/Ze))/2;bn(Ee,function(It){It.r+=ft}),bn(Ee,gs),bn(Ee,function(It){It.r-=ft})}return function It(Rt,Lt,Ot,St){var Gt=Rt.children;if(Rt.x=Lt+=St*Rt.x,Rt.y=Ot+=St*Rt.y,Rt.r*=St,Gt)for(var qt=-1,Zt=Gt.length;++qt<Zt;)It(Gt[qt],Lt,Ot,St)}(Ee,Fe/2,Ze/2,ge?1:1/Math.max(2*Ee.r/Fe,2*Ee.r/Ze)),Te}return $.size=function(fe){return arguments.length?(H=fe,$):H},$.radius=function(fe){return arguments.length?(ge=null==fe||"function"==typeof fe?fe:+fe,$):ge},$.padding=function(fe){return arguments.length?(B=+fe,$):B},hn($,O)},y.layout.tree=function(){var ge=y.layout.hierarchy().sort(null).value(null),O=_t,B=[1,1],H=null;function $(Ee,Fe){var Ze=ge.call(this,Ee,Fe),rt=Ze[0],ft=function(qt){for(var Zt,yn={A:null,children:[qt]},Sn=[yn];null!=(Zt=Sn.pop());)for(var qn,Un=Zt.children,mr=0,gr=Un.length;mr<gr;++mr)Sn.push((Un[mr]=qn={_:Un[mr],parent:Zt,children:(qn=Un[mr].children)&&qn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:mr}).a=qn);return yn.children[0]}(rt);if(bn(ft,fe),ft.parent.m=-ft.z,ln(ft,ve),H)ln(rt,Te);else{var It=rt,Rt=rt,Lt=rt;ln(rt,function(qt){qt.x<It.x&&(It=qt),qt.x>Rt.x&&(Rt=qt),qt.depth>Lt.depth&&(Lt=qt)});var Ot=O(It,Rt)/2-It.x,St=B[0]/(Rt.x+O(Rt,It)/2+Ot),Gt=B[1]/(Lt.depth||1);ln(rt,function(qt){qt.x=(qt.x+Ot)*St,qt.y=qt.depth*Gt})}return Ze}function fe(Ee){var Fe=Ee.children,Ze=Ee.parent.children,rt=Ee.i?Ze[Ee.i-1]:null;if(Fe.length){!function(It){for(var Rt,Lt=0,Ot=0,St=It.children,Gt=St.length;--Gt>=0;)(Rt=St[Gt]).z+=Lt,Rt.m+=Lt,Lt+=Rt.s+(Ot+=Rt.c)}(Ee);var ft=(Fe[0].z+Fe[Fe.length-1].z)/2;rt?(Ee.z=rt.z+O(Ee._,rt._),Ee.m=Ee.z-ft):Ee.z=ft}else rt&&(Ee.z=rt.z+O(Ee._,rt._));Ee.parent.A=function(It,Rt,Lt){if(Rt){for(var Ot,St=It,Gt=It,qt=Rt,Zt=St.parent.children[0],yn=St.m,Sn=Gt.m,qn=qt.m,Un=Zt.m;qt=_n(qt),St=jt(St),qt&&St;)Zt=jt(Zt),(Gt=_n(Gt)).a=It,(Ot=qt.z+qn-St.z-yn+O(qt._,St._))>0&&(Kt(wn(qt,It,Lt),It,Ot),yn+=Ot,Sn+=Ot),qn+=qt.m,yn+=St.m,Un+=Zt.m,Sn+=Gt.m;qt&&!_n(Gt)&&(Gt.t=qt,Gt.m+=qn-Sn),St&&!jt(Zt)&&(Zt.t=St,Zt.m+=yn-Un,Lt=It)}return Lt}(Ee,rt,Ee.parent.A||Ze[0])}function ve(Ee){Ee._.x=Ee.z+Ee.parent.m,Ee.m+=Ee.parent.m}function Te(Ee){Ee.x*=B[0],Ee.y=Ee.depth*B[1]}return $.separation=function(Ee){return arguments.length?(O=Ee,$):O},$.size=function(Ee){return arguments.length?(H=null==(B=Ee)?Te:null,$):H?null:B},$.nodeSize=function(Ee){return arguments.length?(H=null==(B=Ee)?null:Te,$):H?B:null},hn($,ge)},y.layout.cluster=function(){var ge=y.layout.hierarchy().sort(null).value(null),O=_t,B=[1,1],H=!1;function $(fe,ve){var Te,Ee=ge.call(this,fe,ve),Fe=Ee[0],Ze=0;bn(Fe,function(Lt){var St,Ot=Lt.children;Ot&&Ot.length?(Lt.x=(St=Ot).reduce(function(Gt,qt){return Gt+qt.x},0)/St.length,Lt.y=function(St){return 1+y.max(St,function(Gt){return Gt.y})}(Ot)):(Lt.x=Te?Ze+=O(Lt,Te):0,Lt.y=0,Te=Lt)});var rt=function Lt(Ot){var St=Ot.children;return St&&St.length?Lt(St[0]):Ot}(Fe),ft=function Lt(Ot){var St,Gt=Ot.children;return Gt&&(St=Gt.length)?Lt(Gt[St-1]):Ot}(Fe),It=rt.x-O(rt,ft)/2,Rt=ft.x+O(ft,rt)/2;return bn(Fe,H?function(Lt){Lt.x=(Lt.x-Fe.x)*B[0],Lt.y=(Fe.y-Lt.y)*B[1]}:function(Lt){Lt.x=(Lt.x-It)/(Rt-It)*B[0],Lt.y=(1-(Fe.y?Lt.y/Fe.y:1))*B[1]}),Ee}return $.separation=function(fe){return arguments.length?(O=fe,$):O},$.size=function(fe){return arguments.length?(H=null==(B=fe),$):H?null:B},$.nodeSize=function(fe){return arguments.length?(H=null!=(B=fe),$):H?B:null},hn($,ge)},y.layout.treemap=function(){var ge,O=y.layout.hierarchy(),B=Math.round,H=[1,1],$=null,fe=Vn,ve=!1,Te="squarify",Ee=.5*(1+Math.sqrt(5));function Fe(Lt,Ot){for(var St,Gt,qt=-1,Zt=Lt.length;++qt<Zt;)Gt=(St=Lt[qt]).value*(Ot<0?0:Ot),St.area=isNaN(Gt)||Gt<=0?0:Gt}function Ze(Lt){var Ot=Lt.children;if(Ot&&Ot.length){var St,Gt,qt,Zt=fe(Lt),yn=[],Sn=Ot.slice(),qn=1/0,Un="slice"===Te?Zt.dx:"dice"===Te?Zt.dy:"slice-dice"===Te?1&Lt.depth?Zt.dy:Zt.dx:Math.min(Zt.dx,Zt.dy);for(Fe(Sn,Zt.dx*Zt.dy/Lt.value),yn.area=0;(qt=Sn.length)>0;)yn.push(St=Sn[qt-1]),yn.area+=St.area,"squarify"!==Te||(Gt=ft(yn,Un))<=qn?(Sn.pop(),qn=Gt):(yn.area-=yn.pop().area,It(yn,Un,Zt,!1),Un=Math.min(Zt.dx,Zt.dy),yn.length=yn.area=0,qn=1/0);yn.length&&(It(yn,Un,Zt,!0),yn.length=yn.area=0),Ot.forEach(Ze)}}function rt(Lt){var Ot=Lt.children;if(Ot&&Ot.length){var St,Gt=fe(Lt),qt=Ot.slice(),Zt=[];for(Fe(qt,Gt.dx*Gt.dy/Lt.value),Zt.area=0;St=qt.pop();)Zt.push(St),Zt.area+=St.area,null!=St.z&&(It(Zt,St.z?Gt.dx:Gt.dy,Gt,!qt.length),Zt.length=Zt.area=0);Ot.forEach(rt)}}function ft(Lt,Ot){for(var St,Gt=Lt.area,qt=0,Zt=1/0,yn=-1,Sn=Lt.length;++yn<Sn;)(St=Lt[yn].area)&&(St<Zt&&(Zt=St),St>qt&&(qt=St));return Ot*=Ot,(Gt*=Gt)?Math.max(Ot*qt*Ee/Gt,Gt/(Ot*Zt*Ee)):1/0}function It(Lt,Ot,St,Gt){var qt,Zt=-1,yn=Lt.length,Sn=St.x,qn=St.y,Un=Ot?B(Lt.area/Ot):0;if(Ot==St.dx){for((Gt||Un>St.dy)&&(Un=St.dy);++Zt<yn;)(qt=Lt[Zt]).x=Sn,qt.y=qn,qt.dy=Un,Sn+=qt.dx=Math.min(St.x+St.dx-Sn,Un?B(qt.area/Un):0);qt.z=!0,qt.dx+=St.x+St.dx-Sn,St.y+=Un,St.dy-=Un}else{for((Gt||Un>St.dx)&&(Un=St.dx);++Zt<yn;)(qt=Lt[Zt]).x=Sn,qt.y=qn,qt.dx=Un,qn+=qt.dy=Math.min(St.y+St.dy-qn,Un?B(qt.area/Un):0);qt.z=!1,qt.dy+=St.y+St.dy-qn,St.x+=Un,St.dx-=Un}}function Rt(Lt){var Ot=ge||O(Lt),St=Ot[0];return St.x=St.y=0,St.value?(St.dx=H[0],St.dy=H[1]):St.dx=St.dy=0,ge&&O.revalue(St),Fe([St],St.dx*St.dy/St.value),(ge?rt:Ze)(St),ve&&(ge=Ot),Ot}return Rt.size=function(Lt){return arguments.length?(H=Lt,Rt):H},Rt.padding=function(Lt){if(!arguments.length)return $;function Ot(qt){var Zt=Lt.call(Rt,qt,qt.depth);return null==Zt?Vn(qt):tr(qt,"number"==typeof Zt?[Zt,Zt,Zt,Zt]:Zt)}function St(qt){return tr(qt,Lt)}var Gt;return fe=null==($=Lt)?Vn:"function"==(Gt=typeof Lt)?Ot:("number"===Gt&&(Lt=[Lt,Lt,Lt,Lt]),St),Rt},Rt.round=function(Lt){return arguments.length?(B=Lt?Math.round:Number,Rt):B!=Number},Rt.sticky=function(Lt){return arguments.length?(ve=Lt,ge=null,Rt):ve},Rt.ratio=function(Lt){return arguments.length?(Ee=Lt,Rt):Ee},Rt.mode=function(Lt){return arguments.length?(Te=Lt+"",Rt):Te},hn(Rt,O)},y.random={normal:function(ge,O){var B=arguments.length;return B<2&&(O=1),B<1&&(ge=0),function(){var H,$,fe;do{fe=(H=2*Math.random()-1)*H+($=2*Math.random()-1)*$}while(!fe||fe>1);return ge+O*H*Math.sqrt(-2*Math.log(fe)/fe)}},logNormal:function(){var ge=y.random.normal.apply(y,arguments);return function(){return Math.exp(ge())}},bates:function(ge){var O=y.random.irwinHall(ge);return function(){return O()/ge}},irwinHall:function(ge){return function(){for(var O=0,B=0;B<ge;B++)O+=Math.random();return O}}},y.scale={};var Ar={floor:P,ceil:P};function Br(ge,O,B,H){var $=[],fe=[],ve=0,Te=Math.min(ge.length,O.length)-1;for(ge[Te]<ge[0]&&(ge=ge.slice().reverse(),O=O.slice().reverse());++ve<=Te;)$.push(B(ge[ve-1],ge[ve])),fe.push(H(O[ve-1],O[ve]));return function(Ee){var Fe=y.bisect(ge,Ee,1,Te)-1;return fe[Fe]($[Fe](Ee))}}function li(ge,O){return y.rebind(ge,O,"range","rangeRound","interpolate","clamp")}function gi(ge,O){return zr(ge,Zr(Li(ge,O)[2])),zr(ge,Zr(Li(ge,O)[2])),ge}function Li(ge,O){null==O&&(O=10);var B=pr(ge),H=B[1]-B[0],$=Math.pow(10,Math.floor(Math.log(H/O)/Math.LN10)),fe=O/H*$;return fe<=.15?$*=10:fe<=.35?$*=5:fe<=.75&&($*=2),B[0]=Math.ceil(B[0]/$)*$,B[1]=Math.floor(B[1]/$)*$+.5*$,B[2]=$,B}function fr(ge,O){return y.range.apply(y,Li(ge,O))}y.scale.linear=function(){return function ge(O,B,H,$){var fe,ve;function Te(){var Fe=Math.min(O.length,B.length)>2?Br:yr,Ze=$?Ys:Wl;return fe=Fe(O,B,Ze,H),ve=Fe(B,O,Ze,Bo),Ee}function Ee(Fe){return fe(Fe)}return Ee.invert=function(Fe){return ve(Fe)},Ee.domain=function(Fe){return arguments.length?(O=Fe.map(Number),Te()):O},Ee.range=function(Fe){return arguments.length?(B=Fe,Te()):B},Ee.rangeRound=function(Fe){return Ee.range(Fe).interpolate(nl)},Ee.clamp=function(Fe){return arguments.length?($=Fe,Te()):$},Ee.interpolate=function(Fe){return arguments.length?(H=Fe,Te()):H},Ee.ticks=function(Fe){return fr(O,Fe)},Ee.tickFormat=function(Fe,Ze){return d3_scale_linearTickFormat(O,Fe,Ze)},Ee.nice=function(Fe){return gi(O,Fe),Te()},Ee.copy=function(){return ge(O,B,H,$)},Te()}([0,1],[0,1],Bo,!1)},y.scale.log=function(){return function ge(O,B,H,$){function fe(Ee){return(H?Math.log(Ee<0?0:Ee):-Math.log(Ee>0?0:-Ee))/Math.log(B)}function ve(Ee){return H?Math.pow(B,Ee):-Math.pow(B,-Ee)}function Te(Ee){return O(fe(Ee))}return Te.invert=function(Ee){return ve(O.invert(Ee))},Te.domain=function(Ee){return arguments.length?(H=Ee[0]>=0,O.domain(($=Ee.map(Number)).map(fe)),Te):$},Te.base=function(Ee){return arguments.length?(B=+Ee,O.domain($.map(fe)),Te):B},Te.nice=function(){var Ee=zr($.map(fe),H?Math:Di);return O.domain(Ee),$=Ee.map(ve),Te},Te.ticks=function(){var Ee=pr($),Fe=[],Ze=Ee[0],rt=Ee[1],ft=Math.floor(fe(Ze)),It=Math.ceil(fe(rt)),Rt=B%1?2:B;if(isFinite(It-ft)){if(H){for(;ft<It;ft++)for(var Lt=1;Lt<Rt;Lt++)Fe.push(ve(ft)*Lt);Fe.push(ve(ft))}else for(Fe.push(ve(ft));ft++<It;)for(Lt=Rt-1;Lt>0;Lt--)Fe.push(ve(ft)*Lt);for(ft=0;Fe[ft]<Ze;ft++);for(It=Fe.length;Fe[It-1]>rt;It--);Fe=Fe.slice(ft,It)}return Fe},Te.copy=function(){return ge(O.copy(),B,H,$)},li(Te,O)}(y.scale.linear().domain([0,1]),10,!0,[1,10])};var Di={floor:function(ge){return-Math.ceil(-ge)},ceil:function(ge){return-Math.floor(-ge)}};function ri(ge){return function(O){return O<0?-Math.pow(-O,ge):Math.pow(O,ge)}}y.scale.pow=function(){return function ge(O,B,H){var $=ri(B),fe=ri(1/B);function ve(Te){return O($(Te))}return ve.invert=function(Te){return fe(O.invert(Te))},ve.domain=function(Te){return arguments.length?(O.domain((H=Te.map(Number)).map($)),ve):H},ve.ticks=function(Te){return fr(H,Te)},ve.tickFormat=function(Te,Ee){return d3_scale_linearTickFormat(H,Te,Ee)},ve.nice=function(Te){return ve.domain(gi(H,Te))},ve.exponent=function(Te){return arguments.length?($=ri(B=Te),fe=ri(1/B),O.domain(H.map($)),ve):B},ve.copy=function(){return ge(O.copy(),B,H)},li(ve,O)}(y.scale.linear(),1,[0,1])},y.scale.sqrt=function(){return y.scale.pow().exponent(.5)},y.scale.ordinal=function(){return function ge(O,B){var H,$,fe;function ve(Ee){return $[((H.get(Ee)||("range"===B.t?H.set(Ee,O.push(Ee)):NaN))-1)%$.length]}function Te(Ee,Fe){return y.range(O.length).map(function(Ze){return Ee+Fe*Ze})}return ve.domain=function(Ee){if(!arguments.length)return O;O=[],H=new A;for(var Fe,Ze=-1,rt=Ee.length;++Ze<rt;)H.has(Fe=Ee[Ze])||H.set(Fe,O.push(Fe));return ve[B.t].apply(ve,B.a)},ve.range=function(Ee){return arguments.length?($=Ee,fe=0,B={t:"range",a:arguments},ve):$},ve.rangePoints=function(Ee,Fe){arguments.length<2&&(Fe=0);var Ze=Ee[0],rt=Ee[1],ft=O.length<2?(Ze=(Ze+rt)/2,0):(rt-Ze)/(O.length-1+Fe);return $=Te(Ze+ft*Fe/2,ft),fe=0,B={t:"rangePoints",a:arguments},ve},ve.rangeRoundPoints=function(Ee,Fe){arguments.length<2&&(Fe=0);var Ze=Ee[0],rt=Ee[1],ft=O.length<2?(Ze=rt=Math.round((Ze+rt)/2),0):(rt-Ze)/(O.length-1+Fe)|0;return $=Te(Ze+Math.round(ft*Fe/2+(rt-Ze-(O.length-1+Fe)*ft)/2),ft),fe=0,B={t:"rangeRoundPoints",a:arguments},ve},ve.rangeBands=function(Ee,Fe,Ze){arguments.length<2&&(Fe=0),arguments.length<3&&(Ze=Fe);var rt=Ee[1]<Ee[0],ft=Ee[rt-0],Rt=(Ee[1-rt]-ft)/(O.length-Fe+2*Ze);return $=Te(ft+Rt*Ze,Rt),rt&&$.reverse(),fe=Rt*(1-Fe),B={t:"rangeBands",a:arguments},ve},ve.rangeRoundBands=function(Ee,Fe,Ze){arguments.length<2&&(Fe=0),arguments.length<3&&(Ze=Fe);var rt=Ee[1]<Ee[0],ft=Ee[rt-0],It=Ee[1-rt],Rt=Math.floor((It-ft)/(O.length-Fe+2*Ze));return $=Te(ft+Math.round((It-ft-(O.length-Fe)*Rt)/2),Rt),rt&&$.reverse(),fe=Math.round(Rt*(1-Fe)),B={t:"rangeRoundBands",a:arguments},ve},ve.rangeBand=function(){return fe},ve.rangeExtent=function(){return pr(B.a[0])},ve.copy=function(){return ge(O,B)},ve.domain(O)}([],{t:"range",a:[[]]})},y.scale.category10=function(){return y.scale.ordinal().range(Ir)},y.scale.category20=function(){return y.scale.ordinal().range(Ii)},y.scale.category20b=function(){return y.scale.ordinal().range(aa)},y.scale.category20c=function(){return y.scale.ordinal().range(ya)};var Ir=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(fn),Ii=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(fn),aa=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(fn),ya=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(fn);function Kr(){return 0}y.scale.quantile=function(){return function ge(O,B){var H;function $(){var ve=0,Te=B.length;for(H=[];++ve<Te;)H[ve-1]=y.quantile(O,ve/Te);return fe}function fe(ve){if(!isNaN(ve=+ve))return B[y.bisect(H,ve)]}return fe.domain=function(ve){return arguments.length?(O=ve.map(d).filter(p).sort(s),$()):O},fe.range=function(ve){return arguments.length?(B=ve,$()):B},fe.quantiles=function(){return H},fe.invertExtent=function(ve){return(ve=B.indexOf(ve))<0?[NaN,NaN]:[ve>0?H[ve-1]:O[0],ve<H.length?H[ve]:O[O.length-1]]},fe.copy=function(){return ge(O,B)},$()}([],[])},y.scale.quantize=function(){return function ge(O,B,H){var $,fe;function ve(Ee){return H[Math.max(0,Math.min(fe,Math.floor($*(Ee-O))))]}function Te(){return $=H.length/(B-O),fe=H.length-1,ve}return ve.domain=function(Ee){return arguments.length?(O=+Ee[0],B=+Ee[Ee.length-1],Te()):[O,B]},ve.range=function(Ee){return arguments.length?(H=Ee,Te()):H},ve.invertExtent=function(Ee){return[Ee=(Ee=H.indexOf(Ee))<0?NaN:Ee/$+O,Ee+1/$]},ve.copy=function(){return ge(O,B,H)},Te()}(0,1,[0,1])},y.scale.threshold=function(){return function ge(O,B){function H($){if($<=$)return B[y.bisect(O,$)]}return H.domain=function($){return arguments.length?(O=$,H):O},H.range=function($){return arguments.length?(B=$,H):B},H.invertExtent=function($){return $=B.indexOf($),[O[$-1],O[$]]},H.copy=function(){return ge(O,B)},H}([.5],[0,1])},y.scale.identity=function(){return function ge(O){function B(H){return+H}return B.invert=B,B.domain=B.range=function(H){return arguments.length?(O=H.map(B),B):O},B.ticks=function(H){return fr(O,H)},B.tickFormat=function(H,$){return d3_scale_linearTickFormat(O,H,$)},B.copy=function(){return ge(O)},B}([0,1])},y.svg={},y.svg.arc=function(){var ge=pa,O=Wi,B=Kr,H=Ta,$=Dr,fe=Ai,ve=Ba;function Te(){var Fe=Math.max(0,+ge.apply(this,arguments)),Ze=Math.max(0,+O.apply(this,arguments)),rt=$.apply(this,arguments)-dn,ft=fe.apply(this,arguments)-dn,It=Math.abs(ft-rt),Rt=rt>ft?0:1;if(Ze<Fe&&(Lt=Ze,Ze=Fe,Fe=Lt),It>=tn)return Ee(Ze,Rt)+(Fe?Ee(Fe,1-Rt):"")+"Z";var Lt,Ot,St,Gt,qt,Zt,yn,Sn,qn,Un,mr,gr,Pr=0,Cr=0,di=[];if((Gt=(+ve.apply(this,arguments)||0)/2)&&(St=H===Ta?Math.sqrt(Fe*Fe+Ze*Ze):+H.apply(this,arguments),Rt||(Cr*=-1),Ze&&(Cr=ke(St/Ze*Math.sin(Gt))),Fe&&(Pr=ke(St/Fe*Math.sin(Gt)))),Ze){qt=Ze*Math.cos(rt+Cr),Zt=Ze*Math.sin(rt+Cr),yn=Ze*Math.cos(ft-Cr),Sn=Ze*Math.sin(ft-Cr);var wi=Math.abs(ft-rt-2*Cr)<=en?0:1;if(Cr&&mi(qt,Zt,yn,Sn)===Rt^wi){var Bi=(rt+ft)/2;qt=Ze*Math.cos(Bi),Zt=Ze*Math.sin(Bi),yn=Sn=null}}else qt=Zt=0;if(Fe){qn=Fe*Math.cos(ft-Pr),Un=Fe*Math.sin(ft-Pr),mr=Fe*Math.cos(rt+Pr),gr=Fe*Math.sin(rt+Pr);var ur=Math.abs(rt-ft+2*Pr)<=en?0:1;if(Pr&&mi(qn,Un,mr,gr)===1-Rt^ur){var $r=(rt+ft)/2;qn=Fe*Math.cos($r),Un=Fe*Math.sin($r),mr=gr=null}}else qn=Un=0;if(It>Ft&&(Lt=Math.min(Math.abs(Ze-Fe)/2,+B.apply(this,arguments)))>.001){Ot=Fe<Ze^Rt?0:1;var Ti=Lt,bi=Lt;if(It<en){var Si=null==mr?[qn,Un]:null==yn?[qt,Zt]:Nr([qt,Zt],[mr,gr],[yn,Sn],[qn,Un]),ji=qt-Si[0],ca=Zt-Si[1],Ei=yn-Si[0],ta=Sn-Si[1],Zi=1/Math.sin(Math.acos((ji*Ei+ca*ta)/(Math.sqrt(ji*ji+ca*ca)*Math.sqrt(Ei*Ei+ta*ta)))/2),ra=Math.sqrt(Si[0]*Si[0]+Si[1]*Si[1]);bi=Math.min(Lt,(Fe-ra)/(Zi-1)),Ti=Math.min(Lt,(Ze-ra)/(Zi+1))}if(null!=yn){var Qi=Ua(null==mr?[qn,Un]:[mr,gr],[qt,Zt],Ze,Ti,Rt),fa=Ua([yn,Sn],[qn,Un],Ze,Ti,Rt);Lt===Ti?di.push("M",Qi[0],"A",Ti,",",Ti," 0 0,",Ot," ",Qi[1],"A",Ze,",",Ze," 0 ",1-Rt^mi(Qi[1][0],Qi[1][1],fa[1][0],fa[1][1]),",",Rt," ",fa[1],"A",Ti,",",Ti," 0 0,",Ot," ",fa[0]):di.push("M",Qi[0],"A",Ti,",",Ti," 0 1,",Ot," ",fa[0])}else di.push("M",qt,",",Zt);if(null!=mr){var Ma=Ua([qt,Zt],[mr,gr],Fe,-bi,Rt),no=Ua([qn,Un],null==yn?[qt,Zt]:[yn,Sn],Fe,-bi,Rt);Lt===bi?di.push("L",no[0],"A",bi,",",bi," 0 0,",Ot," ",no[1],"A",Fe,",",Fe," 0 ",Rt^mi(no[1][0],no[1][1],Ma[1][0],Ma[1][1]),",",1-Rt," ",Ma[1],"A",bi,",",bi," 0 0,",Ot," ",Ma[0]):di.push("L",no[0],"A",bi,",",bi," 0 0,",Ot," ",Ma[0])}else di.push("L",qn,",",Un)}else di.push("M",qt,",",Zt),null!=yn&&di.push("A",Ze,",",Ze," 0 ",wi,",",Rt," ",yn,",",Sn),di.push("L",qn,",",Un),null!=mr&&di.push("A",Fe,",",Fe," 0 ",ur,",",1-Rt," ",mr,",",gr);return di.push("Z"),di.join("")}function Ee(Fe,Ze){return"M0,"+Fe+"A"+Fe+","+Fe+" 0 1,"+Ze+" 0,"+-Fe+"A"+Fe+","+Fe+" 0 1,"+Ze+" 0,"+Fe}return Te.innerRadius=function(Fe){return arguments.length?(ge=jn(Fe),Te):ge},Te.outerRadius=function(Fe){return arguments.length?(O=jn(Fe),Te):O},Te.cornerRadius=function(Fe){return arguments.length?(B=jn(Fe),Te):B},Te.padRadius=function(Fe){return arguments.length?(H=Fe==Ta?Ta:jn(Fe),Te):H},Te.startAngle=function(Fe){return arguments.length?($=jn(Fe),Te):$},Te.endAngle=function(Fe){return arguments.length?(fe=jn(Fe),Te):fe},Te.padAngle=function(Fe){return arguments.length?(ve=jn(Fe),Te):ve},Te.centroid=function(){var Fe=(+ge.apply(this,arguments)+ +O.apply(this,arguments))/2,Ze=(+$.apply(this,arguments)+ +fe.apply(this,arguments))/2-dn;return[Math.cos(Ze)*Fe,Math.sin(Ze)*Fe]},Te};var Ta="auto";function pa(ge){return ge.innerRadius}function Wi(ge){return ge.outerRadius}function Dr(ge){return ge.startAngle}function Ai(ge){return ge.endAngle}function Ba(ge){return ge&&ge.padAngle}function mi(ge,O,B,H){return(ge-B)*O-(O-H)*ge>0?0:1}function Ua(ge,O,B,H,$){var fe=ge[0]-O[0],ve=ge[1]-O[1],Te=($?H:-H)/Math.sqrt(fe*fe+ve*ve),Ee=Te*ve,Fe=-Te*fe,Ze=ge[0]+Ee,rt=ge[1]+Fe,ft=O[0]+Ee,It=O[1]+Fe,Rt=(Ze+ft)/2,Lt=(rt+It)/2,Ot=ft-Ze,St=It-rt,Gt=Ot*Ot+St*St,qt=B-H,Zt=Ze*It-ft*rt,yn=(St<0?-1:1)*Math.sqrt(Math.max(0,qt*qt*Gt-Zt*Zt)),Sn=(Zt*St-Ot*yn)/Gt,qn=(-Zt*Ot-St*yn)/Gt,Un=(Zt*St+Ot*yn)/Gt,mr=(-Zt*Ot+St*yn)/Gt,gr=Sn-Rt,Pr=qn-Lt,Cr=Un-Rt,di=mr-Lt;return gr*gr+Pr*Pr>Cr*Cr+di*di&&(Sn=Un,qn=mr),[[Sn-Ee,qn-Fe],[Sn*B/qt,qn*B/qt]]}function So(){return!0}function us(ge){var O=Jn,B=br,H=So,$=Ts,fe=$.key,ve=.7;function Te(Ee){var Fe,Ze=[],rt=[],ft=-1,It=Ee.length,Rt=jn(O),Lt=jn(B);function Ot(){Ze.push("M",$(ge(rt),ve))}for(;++ft<It;)H.call(this,Fe=Ee[ft],ft)?rt.push([+Rt.call(this,Fe,ft),+Lt.call(this,Fe,ft)]):rt.length&&(Ot(),rt=[]);return rt.length&&Ot(),Ze.length?Ze.join(""):null}return Te.x=function(Ee){return arguments.length?(O=Ee,Te):O},Te.y=function(Ee){return arguments.length?(B=Ee,Te):B},Te.defined=function(Ee){return arguments.length?(H=Ee,Te):H},Te.interpolate=function(Ee){return arguments.length?(fe="function"==typeof Ee?$=Ee:($=Ls.get(Ee)||Ts).key,Te):fe},Te.tension=function(Ee){return arguments.length?(ve=Ee,Te):ve},Te}y.svg.line=function(){return us(P)};var Ls=y.map({linear:Ts,"linear-closed":na,step:function(ge){for(var O=0,B=ge.length,H=ge[0],$=[H[0],",",H[1]];++O<B;)$.push("H",(H[0]+(H=ge[O])[0])/2,"V",H[1]);return B>1&&$.push("H",H[0]),$.join("")},"step-before":ko,"step-after":ms,basis:go,"basis-open":function(ge){if(ge.length<4)return Ts(ge);for(var O,B=[],H=-1,$=ge.length,fe=[0],ve=[0];++H<3;)fe.push((O=ge[H])[0]),ve.push(O[1]);for(B.push(Ka(Ms,fe)+","+Ka(Ms,ve)),--H;++H<$;)O=ge[H],fe.shift(),fe.push(O[0]),ve.shift(),ve.push(O[1]),Al(B,fe,ve);return B.join("")},"basis-closed":function(ge){for(var O,B,H=-1,$=ge.length,fe=$+4,ve=[],Te=[];++H<4;)ve.push((B=ge[H%$])[0]),Te.push(B[1]);for(O=[Ka(Ms,ve),",",Ka(Ms,Te)],--H;++H<fe;)B=ge[H%$],ve.shift(),ve.push(B[0]),Te.shift(),Te.push(B[1]),Al(O,ve,Te);return O.join("")},bundle:function(ge,O){var B=ge.length-1;if(B)for(var H,$,fe=ge[0][0],ve=ge[0][1],Te=ge[B][0]-fe,Ee=ge[B][1]-ve,Fe=-1;++Fe<=B;)(H=ge[Fe])[0]=O*H[0]+(1-O)*(fe+($=Fe/B)*Te),H[1]=O*H[1]+(1-O)*(ve+$*Ee);return go(ge)},cardinal:function(ge,O){return ge.length<3?Ts(ge):ge[0]+Ra(ge,Fa(ge,O))},"cardinal-open":function(ge,O){return ge.length<4?Ts(ge):ge[1]+Ra(ge.slice(1,-1),Fa(ge,O))},"cardinal-closed":function(ge,O){return ge.length<3?na(ge):ge[0]+Ra((ge.push(ge[0]),ge),Fa([ge[ge.length-2]].concat(ge,[ge[1]]),O))},monotone:function(ge){return ge.length<3?Ts(ge):ge[0]+Ra(ge,function(O){for(var B,H,$,fe,ve=[],Te=function(Ze){for(var rt=0,ft=Ze.length-1,It=[],Rt=Ze[0],Lt=Ze[1],Ot=It[0]=Cl(Rt,Lt);++rt<ft;)It[rt]=(Ot+(Ot=Cl(Rt=Lt,Lt=Ze[rt+1])))/2;return It[rt]=Ot,It}(O),Ee=-1,Fe=O.length-1;++Ee<Fe;)B=Cl(O[Ee],O[Ee+1]),u(B)<Ft?Te[Ee]=Te[Ee+1]=0:(fe=(H=Te[Ee]/B)*H+($=Te[Ee+1]/B)*$)>9&&(fe=3*B/Math.sqrt(fe),Te[Ee]=fe*H,Te[Ee+1]=fe*$);for(Ee=-1;++Ee<=Fe;)fe=(O[Math.min(Fe,Ee+1)][0]-O[Math.max(0,Ee-1)][0])/(6*(1+Te[Ee]*Te[Ee])),ve.push([fe||0,Te[Ee]*fe||0]);return ve}(ge))}});function Ts(ge){return ge.length>1?ge.join("L"):ge+"Z"}function na(ge){return ge.join("L")+"Z"}function ko(ge){for(var O=0,B=ge.length,H=ge[0],$=[H[0],",",H[1]];++O<B;)$.push("V",(H=ge[O])[1],"H",H[0]);return $.join("")}function ms(ge){for(var O=0,B=ge.length,H=ge[0],$=[H[0],",",H[1]];++O<B;)$.push("H",(H=ge[O])[0],"V",H[1]);return $.join("")}function Ra(ge,O){if(O.length<1||ge.length!=O.length&&ge.length!=O.length+2)return Ts(ge);var B=ge.length!=O.length,H="",$=ge[0],fe=ge[1],ve=O[0],Te=ve,Ee=1;if(B&&(H+="Q"+(fe[0]-2*ve[0]/3)+","+(fe[1]-2*ve[1]/3)+","+fe[0]+","+fe[1],$=ge[1],Ee=2),O.length>1){fe=ge[Ee],Ee++,H+="C"+($[0]+ve[0])+","+($[1]+ve[1])+","+(fe[0]-(Te=O[1])[0])+","+(fe[1]-Te[1])+","+fe[0]+","+fe[1];for(var Fe=2;Fe<O.length;Fe++,Ee++)H+="S"+((fe=ge[Ee])[0]-(Te=O[Fe])[0])+","+(fe[1]-Te[1])+","+fe[0]+","+fe[1]}if(B){var Ze=ge[Ee];H+="Q"+(fe[0]+2*Te[0]/3)+","+(fe[1]+2*Te[1]/3)+","+Ze[0]+","+Ze[1]}return H}function Fa(ge,O){for(var B,H=[],$=(1-O)/2,fe=ge[0],ve=ge[1],Te=1,Ee=ge.length;++Te<Ee;)B=fe,fe=ve,H.push([$*((ve=ge[Te])[0]-B[0]),$*(ve[1]-B[1])]);return H}function go(ge){if(ge.length<3)return Ts(ge);var O=1,B=ge.length,H=ge[0],$=H[0],fe=H[1],ve=[$,$,$,(H=ge[1])[0]],Te=[fe,fe,fe,H[1]],Ee=[$,",",fe,"L",Ka(Ms,ve),",",Ka(Ms,Te)];for(ge.push(ge[B-1]);++O<=B;)H=ge[O],ve.shift(),ve.push(H[0]),Te.shift(),Te.push(H[1]),Al(Ee,ve,Te);return ge.pop(),Ee.push("L",H),Ee.join("")}function Ka(ge,O){return ge[0]*O[0]+ge[1]*O[1]+ge[2]*O[2]+ge[3]*O[3]}Ls.forEach(function(ge,O){O.key=ge,O.closed=/-closed$/.test(ge)});var Ko=[0,2/3,1/3,0],Ia=[0,1/3,2/3,0],Ms=[0,1/6,2/3,1/6];function Al(ge,O,B){ge.push("C",Ka(Ko,O),",",Ka(Ko,B),",",Ka(Ia,O),",",Ka(Ia,B),",",Ka(Ms,O),",",Ka(Ms,B))}function Cl(ge,O){return(O[1]-ge[1])/(O[0]-ge[0])}function Iu(ge){for(var O,B,H,$=-1,fe=ge.length;++$<fe;)B=(O=ge[$])[0],H=O[1]-dn,O[0]=B*Math.cos(H),O[1]=B*Math.sin(H);return ge}function Fo(ge){var O=Jn,B=Jn,H=0,$=br,fe=So,ve=Ts,Te=ve.key,Ee=ve,Fe="L",Ze=.7;function rt(ft){var It,Rt,Lt,Ot=[],St=[],Gt=[],qt=-1,Zt=ft.length,yn=jn(O),Sn=jn(H),qn=O===B?function(){return Rt}:jn(B),Un=H===$?function(){return Lt}:jn($);function mr(){Ot.push("M",ve(ge(Gt),Ze),Fe,Ee(ge(St.reverse()),Ze),"Z")}for(;++qt<Zt;)fe.call(this,It=ft[qt],qt)?(St.push([Rt=+yn.call(this,It,qt),Lt=+Sn.call(this,It,qt)]),Gt.push([+qn.call(this,It,qt),+Un.call(this,It,qt)])):St.length&&(mr(),St=[],Gt=[]);return St.length&&mr(),Ot.length?Ot.join(""):null}return rt.x=function(ft){return arguments.length?(O=B=ft,rt):B},rt.x0=function(ft){return arguments.length?(O=ft,rt):O},rt.x1=function(ft){return arguments.length?(B=ft,rt):B},rt.y=function(ft){return arguments.length?(H=$=ft,rt):$},rt.y0=function(ft){return arguments.length?(H=ft,rt):H},rt.y1=function(ft){return arguments.length?($=ft,rt):$},rt.defined=function(ft){return arguments.length?(fe=ft,rt):fe},rt.interpolate=function(ft){return arguments.length?(Te="function"==typeof ft?ve=ft:(ve=Ls.get(ft)||Ts).key,Ee=ve.reverse||ve,Fe=ve.closed?"M":"L",rt):Te},rt.tension=function(ft){return arguments.length?(Ze=ft,rt):Ze},rt}function tu(ge){return ge.source}function jo(ge){return ge.target}function rl(ge){return ge.radius}function zi(ge){return[ge.x,ge.y]}function Ki(ge){return function(){var O=ge.apply(this,arguments),B=O[0],H=O[1]-dn;return[B*Math.cos(H),B*Math.sin(H)]}}function Yl(){return 64}function fu(){return"circle"}function pl(ge){var O=Math.sqrt(ge/en);return"M0,"+O+"A"+O+","+O+" 0 1,1 0,"+-O+"A"+O+","+O+" 0 1,1 0,"+O+"Z"}y.svg.line.radial=function(){var ge=us(Iu);return ge.radius=ge.x,delete ge.x,ge.angle=ge.y,delete ge.y,ge},ko.reverse=ms,ms.reverse=ko,y.svg.area=function(){return Fo(P)},y.svg.area.radial=function(){var ge=Fo(Iu);return ge.radius=ge.x,delete ge.x,ge.innerRadius=ge.x0,delete ge.x0,ge.outerRadius=ge.x1,delete ge.x1,ge.angle=ge.y,delete ge.y,ge.startAngle=ge.y0,delete ge.y0,ge.endAngle=ge.y1,delete ge.y1,ge},y.svg.chord=function(){var ge=tu,O=jo,B=rl,H=Dr,$=Ai;function fe(Fe,Ze){var rt,ft,It=ve(this,ge,Fe,Ze),Rt=ve(this,O,Fe,Ze);return"M"+It.p0+Te(It.r,It.p1,It.a1-It.a0)+((rt=It).a0==(ft=Rt).a0&&rt.a1==ft.a1?Ee(0,0,0,It.p0):Ee(0,0,0,Rt.p0)+Te(Rt.r,Rt.p1,Rt.a1-Rt.a0)+Ee(0,0,0,It.p0))+"Z"}function ve(Fe,Ze,rt,ft){var It=Ze.call(Fe,rt,ft),Rt=B.call(Fe,It,ft),Lt=H.call(Fe,It,ft)-dn,Ot=$.call(Fe,It,ft)-dn;return{r:Rt,a0:Lt,a1:Ot,p0:[Rt*Math.cos(Lt),Rt*Math.sin(Lt)],p1:[Rt*Math.cos(Ot),Rt*Math.sin(Ot)]}}function Te(Fe,Ze,rt){return"A"+Fe+","+Fe+" 0 "+ +(rt>en)+",1 "+Ze}function Ee(Fe,Ze,rt,ft){return"Q 0,0 "+ft}return fe.radius=function(Fe){return arguments.length?(B=jn(Fe),fe):B},fe.source=function(Fe){return arguments.length?(ge=jn(Fe),fe):ge},fe.target=function(Fe){return arguments.length?(O=jn(Fe),fe):O},fe.startAngle=function(Fe){return arguments.length?(H=jn(Fe),fe):H},fe.endAngle=function(Fe){return arguments.length?($=jn(Fe),fe):$},fe},y.svg.diagonal=function(){var ge=tu,O=jo,B=zi;function H($,fe){var ve=ge.call(this,$,fe),Te=O.call(this,$,fe),Ee=(ve.y+Te.y)/2,Fe=[ve,{x:ve.x,y:Ee},{x:Te.x,y:Ee},Te];return"M"+(Fe=Fe.map(B))[0]+"C"+Fe[1]+" "+Fe[2]+" "+Fe[3]}return H.source=function($){return arguments.length?(ge=jn($),H):ge},H.target=function($){return arguments.length?(O=jn($),H):O},H.projection=function($){return arguments.length?(B=$,H):B},H},y.svg.diagonal.radial=function(){var ge=y.svg.diagonal(),O=zi,B=ge.projection;return ge.projection=function(H){return arguments.length?B(Ki(O=H)):O},ge},y.svg.symbol=function(){var ge=fu,O=Yl;function B(H,$){return(Os.get(ge.call(this,H,$))||pl)(O.call(this,H,$))}return B.type=function(H){return arguments.length?(ge=jn(H),B):ge},B.size=function(H){return arguments.length?(O=jn(H),B):O},B};var Os=y.map({circle:pl,cross:function(ge){var O=Math.sqrt(ge/5)/2;return"M"+-3*O+","+-O+"H"+-O+"V"+-3*O+"H"+O+"V"+-O+"H"+3*O+"V"+O+"H"+O+"V"+3*O+"H"+-O+"V"+O+"H"+-3*O+"Z"},diamond:function(ge){var O=Math.sqrt(ge/(2*hu)),B=O*hu;return"M0,"+-O+"L"+B+",0 0,"+O+" "+-B+",0Z"},square:function(ge){var O=Math.sqrt(ge)/2;return"M"+-O+","+-O+"L"+O+","+-O+" "+O+","+O+" "+-O+","+O+"Z"},"triangle-down":function(ge){var O=Math.sqrt(ge/Zs),B=O*Zs/2;return"M0,"+B+"L"+O+","+-B+" "+-O+","+-B+"Z"},"triangle-up":function(ge){var O=Math.sqrt(ge/Zs),B=O*Zs/2;return"M0,"+-B+"L"+O+","+B+" "+-O+","+B+"Z"}});y.svg.symbolTypes=Os.keys();var Zs=Math.sqrt(3),hu=Math.tan(30*Mn);ne.transition=function(ge){for(var O,B,H=Rs||++Zl,$=gu(ge),fe=[],ve=so||{time:Date.now(),ease:Pl,delay:0,duration:250},Te=-1,Ee=this.length;++Te<Ee;){fe.push(O=[]);for(var Fe=this[Te],Ze=-1,rt=Fe.length;++Ze<rt;)(B=Fe[Ze])&&Ll(B,Ze,$,H,ve),O.push(B)}return ga(fe,$,H)},ne.interrupt=function(ge){return this.each(null==ge?du:Ga(gu(ge)))};var du=Ga(gu());function Ga(ge){return function(){var O,B,H;(O=this[ge])&&(H=O[B=O.active])&&(H.timer.c=null,H.timer.t=NaN,--O.count?delete O[B]:delete this[ge],O.active+=.5,H.event&&H.event.interrupt.call(this,this.__data__,H.index))}}function ga(ge,O,B){return U(ge,Vo),ge.namespace=O,ge.id=B,ge}var Rs,so,Vo=[],Zl=0;function pu(ge,O,B,H){var $=ge.id,fe=ge.namespace;return qe(ge,"function"==typeof B?function(ve,Te,Ee){ve[fe][$].tween.set(O,H(B.call(ve,ve.__data__,Te,Ee)))}:(B=H(B),function(ve){ve[fe][$].tween.set(O,B)}))}function nu(ge){return null==ge&&(ge=""),function(){this.textContent=ge}}function gu(ge){return null==ge?"__transition__":"__transition_"+ge+"__"}function Ll(ge,O,B,H,$){var fe,ve,Te,Ee,Fe,Ze=ge[B]||(ge[B]={active:0,count:0}),rt=Ze[H];function ft(Rt){var Lt=Ze.active,Ot=Ze[Lt];for(var St in Ot&&(Ot.timer.c=null,Ot.timer.t=NaN,--Ze.count,delete Ze[Lt],Ot.event&&Ot.event.interrupt.call(ge,ge.__data__,Ot.index)),Ze)if(+St<H){var Gt=Ze[St];Gt.timer.c=null,Gt.timer.t=NaN,--Ze.count,delete Ze[St]}ve.c=It,Gr(function(){return ve.c&&It(Rt||1)&&(ve.c=null,ve.t=NaN),1},0,fe),Ze.active=H,rt.event&&rt.event.start.call(ge,ge.__data__,O),Fe=[],rt.tween.forEach(function(qt,Zt){(Zt=Zt.call(ge,ge.__data__,O))&&Fe.push(Zt)}),Ee=rt.ease,Te=rt.duration}function It(Rt){for(var Lt=Rt/Te,Ot=Ee(Lt),St=Fe.length;St>0;)Fe[--St].call(ge,Ot);if(Lt>=1)return rt.event&&rt.event.end.call(ge,ge.__data__,O),--Ze.count?delete Ze[H]:delete ge[B],1}rt||(ve=Gr(function(Rt){var Lt=rt.delay;if(ve.t=Lt+fe,Lt<=Rt)return ft(Rt-Lt);ve.c=ft},0,fe=$.time),rt=Ze[H]={tween:new A,time:fe,timer:ve,delay:$.delay,duration:$.duration,ease:$.ease,index:O},$=null,++Ze.count)}Vo.call=ne.call,Vo.empty=ne.empty,Vo.node=ne.node,Vo.size=ne.size,y.transition=function(ge,O){return ge&&ge.transition?Rs?ge.transition(O):ge:y.selection().transition(ge)},y.transition.prototype=Vo,Vo.select=function(ge){var O,B,H,$=this.id,fe=this.namespace,ve=[];ge=le(ge);for(var Te=-1,Ee=this.length;++Te<Ee;){ve.push(O=[]);for(var Fe=this[Te],Ze=-1,rt=Fe.length;++Ze<rt;)(H=Fe[Ze])&&(B=ge.call(H,H.__data__,Ze,Te))?("__data__"in H&&(B.__data__=H.__data__),Ll(B,Ze,fe,$,H[fe][$]),O.push(B)):O.push(null)}return ga(ve,fe,$)},Vo.selectAll=function(ge){var O,B,H,$,fe,ve=this.id,Te=this.namespace,Ee=[];ge=ue(ge);for(var Fe=-1,Ze=this.length;++Fe<Ze;)for(var rt=this[Fe],ft=-1,It=rt.length;++ft<It;)if(H=rt[ft]){fe=H[Te][ve],B=ge.call(H,H.__data__,ft,Fe),Ee.push(O=[]);for(var Rt=-1,Lt=B.length;++Rt<Lt;)($=B[Rt])&&Ll($,Rt,Te,ve,fe),O.push($)}return ga(Ee,Te,ve)},Vo.filter=function(ge){var O,B,H=[];"function"!=typeof ge&&(ge=Re(ge));for(var $=0,fe=this.length;$<fe;$++){H.push(O=[]);for(var ve,Te=0,Ee=(ve=this[$]).length;Te<Ee;Te++)(B=ve[Te])&&ge.call(B,B.__data__,Te,$)&&O.push(B)}return ga(H,this.namespace,this.id)},Vo.tween=function(ge,O){var B=this.id,H=this.namespace;return arguments.length<2?this.node()[H][B].tween.get(ge):qe(this,null==O?function($){$[H][B].tween.remove(ge)}:function($){$[H][B].tween.set(ge,O)})},Vo.attr=function(ge,O){if(arguments.length<2){for(O in ge)this.attr(O,ge[O]);return this}var B="transform"==ge?Jo:Bo,H=y.ns.qualify(ge);function $(){this.removeAttribute(H)}function fe(){this.removeAttributeNS(H.space,H.local)}function ve(Ee){return null==Ee?$:(Ee+="",function(){var Fe,Ze=this.getAttribute(H);return Ze!==Ee&&(Fe=B(Ze,Ee),function(rt){this.setAttribute(H,Fe(rt))})})}function Te(Ee){return null==Ee?fe:(Ee+="",function(){var Fe,Ze=this.getAttributeNS(H.space,H.local);return Ze!==Ee&&(Fe=B(Ze,Ee),function(rt){this.setAttributeNS(H.space,H.local,Fe(rt))})})}return pu(this,"attr."+ge,O,H.local?Te:ve)},Vo.attrTween=function(ge,O){var B=y.ns.qualify(ge);return this.tween("attr."+ge,B.local?function(H,$){var fe=O.call(this,H,$,this.getAttributeNS(B.space,B.local));return fe&&function(ve){this.setAttributeNS(B.space,B.local,fe(ve))}}:function(H,$){var fe=O.call(this,H,$,this.getAttribute(B));return fe&&function(ve){this.setAttribute(B,fe(ve))}})},Vo.style=function(ge,O,B){var H=arguments.length;if(H<3){if("string"!=typeof ge){for(B in H<2&&(O=""),ge)this.style(B,ge[B],O);return this}B=""}function $(){this.style.removeProperty(ge)}function fe(ve){return null==ve?$:(ve+="",function(){var Te,Ee=o(this).getComputedStyle(this,null).getPropertyValue(ge);return Ee!==ve&&(Te=Bo(Ee,ve),function(Fe){this.style.setProperty(ge,Te(Fe),B)})})}return pu(this,"style."+ge,O,fe)},Vo.styleTween=function(ge,O,B){function H($,fe){var ve=O.call(this,$,fe,o(this).getComputedStyle(this,null).getPropertyValue(ge));return ve&&function(Te){this.style.setProperty(ge,ve(Te),B)}}return arguments.length<3&&(B=""),this.tween("style."+ge,H)},Vo.text=function(ge){return pu(this,"text",ge,nu)},Vo.remove=function(){var ge=this.namespace;return this.each("end.transition",function(){var O;this[ge].count<2&&(O=this.parentNode)&&O.removeChild(this)})},Vo.ease=function(ge){var O=this.id,B=this.namespace;return arguments.length<1?this.node()[B][O].ease:("function"!=typeof ge&&(ge=y.ease.apply(y,arguments)),qe(this,function(H){H[B][O].ease=ge}))},Vo.delay=function(ge){var O=this.id,B=this.namespace;return arguments.length<1?this.node()[B][O].delay:qe(this,"function"==typeof ge?function(H,$,fe){H[B][O].delay=+ge.call(H,H.__data__,$,fe)}:(ge=+ge,function(H){H[B][O].delay=ge}))},Vo.duration=function(ge){var O=this.id,B=this.namespace;return arguments.length<1?this.node()[B][O].duration:qe(this,"function"==typeof ge?function(H,$,fe){H[B][O].duration=Math.max(1,ge.call(H,H.__data__,$,fe))}:(ge=Math.max(1,ge),function(H){H[B][O].duration=ge}))},Vo.each=function(ge,O){var B=this.id,H=this.namespace;if(arguments.length<2){var $=so,fe=Rs;try{Rs=B,qe(this,function(ve,Te,Ee){so=ve[H][B],ge.call(ve,ve.__data__,Te,Ee)})}finally{so=$,Rs=fe}}else qe(this,function(ve){var Te=ve[H][B];(Te.event||(Te.event=y.dispatch("start","end","interrupt"))).on(ge,O)});return this},Vo.transition=function(){for(var ge,O,B,H=this.id,$=++Zl,fe=this.namespace,ve=[],Te=0,Ee=this.length;Te<Ee;Te++){ve.push(ge=[]);for(var Fe,Ze=0,rt=(Fe=this[Te]).length;Ze<rt;Ze++)(O=Fe[Ze])&&Ll(O,Ze,fe,$,{time:(B=O[fe][H]).time,ease:B.ease,delay:B.delay+B.duration,duration:B.duration}),ge.push(O)}return ga(ve,fe,$)},y.svg.axis=function(){var ge,O=y.scale.linear(),B=mu,H=6,$=6,fe=3,ve=[10],Te=null;function Ee(Fe){Fe.each(function(){var Ze,rt=y.select(this),ft=this.__chart__||O,It=this.__chart__=O.copy(),Rt=null==Te?It.ticks?It.ticks.apply(It,ve):It.domain():Te,Lt=null==ge?It.tickFormat?It.tickFormat.apply(It,ve):P:ge,Ot=rt.selectAll(".tick").data(Rt,It),St=Ot.enter().insert("g",".domain").attr("class","tick").style("opacity",Ft),Gt=y.transition(Ot.exit()).style("opacity",Ft).remove(),qt=y.transition(Ot.order()).style("opacity",1),Zt=Math.max(H,0)+fe,yn=Sr(It),Sn=rt.selectAll(".domain").data([0]),qn=(Sn.enter().append("path").attr("class","domain"),y.transition(Sn));St.append("line"),St.append("text");var Un,mr,gr,Pr,Cr=St.select("line"),di=qt.select("line"),wi=Ot.select("text").text(Lt),Bi=St.select("text"),ur=qt.select("text"),$r="top"===B||"left"===B?-1:1;if("bottom"===B||"top"===B?(Ze=ml,Un="x",gr="y",mr="x2",Pr="y2",wi.attr("dy",$r<0?"0em":".71em").style("text-anchor","middle"),qn.attr("d","M"+yn[0]+","+$r*$+"V0H"+yn[1]+"V"+$r*$)):(Ze=Lu,Un="y",gr="x",mr="y2",Pr="x2",wi.attr("dy",".32em").style("text-anchor",$r<0?"end":"start"),qn.attr("d","M"+$r*$+","+yn[0]+"H0V"+yn[1]+"H"+$r*$)),Cr.attr(Pr,$r*H),Bi.attr(gr,$r*Zt),di.attr(mr,0).attr(Pr,$r*H),ur.attr(Un,0).attr(gr,$r*Zt),It.rangeBand){var Ti=It,bi=Ti.rangeBand()/2;ft=It=function(Si){return Ti(Si)+bi}}else ft.rangeBand?ft=It:Gt.call(Ze,It,ft);St.call(Ze,ft,It),qt.call(Ze,It,It)})}return Ee.scale=function(Fe){return arguments.length?(O=Fe,Ee):O},Ee.orient=function(Fe){return arguments.length?(B=Fe in Pu?Fe+"":mu,Ee):B},Ee.ticks=function(){return arguments.length?(ve=M(arguments),Ee):ve},Ee.tickValues=function(Fe){return arguments.length?(Te=Fe,Ee):Te},Ee.tickFormat=function(Fe){return arguments.length?(ge=Fe,Ee):ge},Ee.tickSize=function(Fe){var Ze=arguments.length;return Ze?(H=+Fe,$=+arguments[Ze-1],Ee):H},Ee.innerTickSize=function(Fe){return arguments.length?(H=+Fe,Ee):H},Ee.outerTickSize=function(Fe){return arguments.length?($=+Fe,Ee):$},Ee.tickPadding=function(Fe){return arguments.length?(fe=+Fe,Ee):fe},Ee.tickSubdivide=function(){return arguments.length&&Ee},Ee};var mu="bottom",Pu={top:1,right:1,bottom:1,left:1};function ml(ge,O,B){ge.attr("transform",function(H){var $=O(H);return"translate("+(isFinite($)?$:B(H))+",0)"})}function Lu(ge,O,B){ge.attr("transform",function(H){var $=O(H);return"translate(0,"+(isFinite($)?$:B(H))+")"})}y.svg.brush=function(){var ge,O,B=ie(Ze,"brushstart","brush","brushend"),H=null,$=null,fe=[0,0],ve=[0,0],Te=!0,Ee=!0,Fe=ks[0];function Ze(Lt){Lt.each(function(){var Ot=y.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Rt).on("touchstart.brush",Rt),St=Ot.selectAll(".background").data([0]);St.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Ot.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Gt=Ot.selectAll(".resize").data(Fe,P);Gt.exit().remove(),Gt.enter().append("g").attr("class",function(Sn){return"resize "+Sn}).style("cursor",function(Sn){return ru[Sn]}).append("rect").attr("x",function(Sn){return/[ew]$/.test(Sn)?-3:null}).attr("y",function(Sn){return/^[ns]/.test(Sn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Gt.style("display",Ze.empty()?"none":null);var qt,Zt=y.transition(Ot),yn=y.transition(St);H&&(qt=Sr(H),yn.attr("x",qt[0]).attr("width",qt[1]-qt[0]),ft(Zt)),$&&(qt=Sr($),yn.attr("y",qt[0]).attr("height",qt[1]-qt[0]),It(Zt)),rt(Zt)})}function rt(Lt){Lt.selectAll(".resize").attr("transform",function(Ot){return"translate("+fe[+/e$/.test(Ot)]+","+ve[+/^s/.test(Ot)]+")"})}function ft(Lt){Lt.select(".extent").attr("x",fe[0]),Lt.selectAll(".extent,.n>rect,.s>rect").attr("width",fe[1]-fe[0])}function It(Lt){Lt.select(".extent").attr("y",ve[0]),Lt.selectAll(".extent,.e>rect,.w>rect").attr("height",ve[1]-ve[0])}function Rt(){var Lt,Ot,St=this,Gt=y.select(y.event.target),qt=B.of(St,arguments),Zt=y.select(St),yn=Gt.datum(),Sn=!/^(n|s)$/.test(yn)&&H,qn=!/^(e|w)$/.test(yn)&&$,Un=Gt.classed("extent"),mr=Bt(St),gr=y.mouse(St),Pr=y.select(o(St)).on("keydown.brush",wi).on("keyup.brush",Bi);if(y.event.changedTouches?Pr.on("touchmove.brush",ur).on("touchend.brush",Ti):Pr.on("mousemove.brush",ur).on("mouseup.brush",Ti),Zt.interrupt().selectAll("*").interrupt(),Un)gr[0]=fe[0]-gr[0],gr[1]=ve[0]-gr[1];else if(yn){var Cr=+/w$/.test(yn),di=+/^n/.test(yn);Ot=[fe[1-Cr]-gr[0],ve[1-di]-gr[1]],gr[0]=fe[Cr],gr[1]=ve[di]}else y.event.altKey&&(Lt=gr.slice());function wi(){32==y.event.keyCode&&(Un||(Lt=null,gr[0]-=fe[1],gr[1]-=ve[1],Un=2),X())}function Bi(){32==y.event.keyCode&&2==Un&&(gr[0]+=fe[1],gr[1]+=ve[1],Un=0,X())}function ur(){var bi=y.mouse(St),Si=!1;Ot&&(bi[0]+=Ot[0],bi[1]+=Ot[1]),Un||(y.event.altKey?(Lt||(Lt=[(fe[0]+fe[1])/2,(ve[0]+ve[1])/2]),gr[0]=fe[+(bi[0]<Lt[0])],gr[1]=ve[+(bi[1]<Lt[1])]):Lt=null),Sn&&$r(bi,H,0)&&(ft(Zt),Si=!0),qn&&$r(bi,$,1)&&(It(Zt),Si=!0),Si&&(rt(Zt),qt({type:"brush",mode:Un?"move":"resize"}))}function $r(bi,Si,ji){var ca,Ei,ta=Sr(Si),Zi=ta[0],ra=ta[1],Qi=gr[ji],fa=ji?ve:fe,Ma=fa[1]-fa[0];if(Un&&(Zi-=Qi,ra-=Ma+Qi),ca=(ji?Ee:Te)?Math.max(Zi,Math.min(ra,bi[ji])):bi[ji],Un?Ei=(ca+=Qi)+Ma:(Lt&&(Qi=Math.max(Zi,Math.min(ra,2*Lt[ji]-ca))),Qi<ca?(Ei=ca,ca=Qi):Ei=Qi),fa[0]!=ca||fa[1]!=Ei)return ji?O=null:ge=null,fa[0]=ca,fa[1]=Ei,!0}function Ti(){ur(),Zt.style("pointer-events","all").selectAll(".resize").style("display",Ze.empty()?"none":null),y.select("body").style("cursor",null),Pr.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),mr(),qt({type:"brushend"})}Zt.style("pointer-events","none").selectAll(".resize").style("display",null),y.select("body").style("cursor",Gt.style("cursor")),qt({type:"brushstart"}),ur()}return Ze.event=function(Lt){Lt.each(function(){var Ot=B.of(this,arguments),St={x:fe,y:ve,i:ge,j:O},Gt=this.__chart__||St;this.__chart__=St,Rs?y.select(this).transition().each("start.brush",function(){ge=Gt.i,O=Gt.j,fe=Gt.x,ve=Gt.y,Ot({type:"brushstart"})}).tween("brush:brush",function(){var qt=ro(fe,St.x),Zt=ro(ve,St.y);return ge=O=null,function(yn){fe=St.x=qt(yn),ve=St.y=Zt(yn),Ot({type:"brush",mode:"resize"})}}).each("end.brush",function(){ge=St.i,O=St.j,Ot({type:"brush",mode:"resize"}),Ot({type:"brushend"})}):(Ot({type:"brushstart"}),Ot({type:"brush",mode:"resize"}),Ot({type:"brushend"}))})},Ze.x=function(Lt){return arguments.length?(Fe=ks[!(H=Lt)<<1|!$],Ze):H},Ze.y=function(Lt){return arguments.length?(Fe=ks[!H<<1|!($=Lt)],Ze):$},Ze.clamp=function(Lt){return arguments.length?(H&&$?(Te=!!Lt[0],Ee=!!Lt[1]):H?Te=!!Lt:$&&(Ee=!!Lt),Ze):H&&$?[Te,Ee]:H?Te:$?Ee:null},Ze.extent=function(Lt){var Ot,St,Gt,qt,Zt;return arguments.length?(H&&(Ot=Lt[0],St=Lt[1],$&&(Ot=Ot[0],St=St[0]),ge=[Ot,St],H.invert&&(Ot=H(Ot),St=H(St)),St<Ot&&(Zt=Ot,Ot=St,St=Zt),Ot==fe[0]&&St==fe[1]||(fe=[Ot,St])),$&&(Gt=Lt[0],qt=Lt[1],H&&(Gt=Gt[1],qt=qt[1]),O=[Gt,qt],$.invert&&(Gt=$(Gt),qt=$(qt)),qt<Gt&&(Zt=Gt,Gt=qt,qt=Zt),Gt==ve[0]&&qt==ve[1]||(ve=[Gt,qt])),Ze):(H&&(ge?(Ot=ge[0],St=ge[1]):(Ot=fe[0],St=fe[1],H.invert&&(Ot=H.invert(Ot),St=H.invert(St)),St<Ot&&(Zt=Ot,Ot=St,St=Zt))),$&&(O?(Gt=O[0],qt=O[1]):(Gt=ve[0],qt=ve[1],$.invert&&(Gt=$.invert(Gt),qt=$.invert(qt)),qt<Gt&&(Zt=Gt,Gt=qt,qt=Zt))),H&&$?[[Ot,Gt],[St,qt]]:H?[Ot,St]:$&&[Gt,qt])},Ze.clear=function(){return Ze.empty()||(fe=[0,0],ve=[0,0],ge=O=null),Ze},Ze.empty=function(){return!!H&&fe[0]==fe[1]||!!$&&ve[0]==ve[1]},y.rebind(Ze,B,"on")};var ru={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},ks=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function Ol(ge){return JSON.parse(ge.responseText)}function vu(ge){var O=_.createRange();return O.selectNode(_.body),O.createContextualFragment(ge.responseText)}y.text=Kn(function(ge){return ge.responseText}),y.json=function(ge,O){return rr(ge,"application/json",Ol,O)},y.html=function(ge,O){return rr(ge,"text/html",vu,O)},y.xml=Kn(function(ge){return ge.responseXML}),"object"==typeof oe&&oe.exports?oe.exports=y:this.d3=y}).apply(self)},{}],59:[function(b,oe,se){"use strict";oe.exports=b("./quad")},{"./quad":60}],60:[function(b,oe,se){"use strict";var y=b("binary-search-bounds"),x=b("clamp"),M=b("parse-rect"),_=b("array-bounds"),e=b("pick-by-alias"),o=b("defined"),a=b("flatten-vertex-data"),l=b("is-obj"),i=b("dtype"),v=b("math-log2");function h(s,d){for(var p=d[0],f=d[1],g=1/(d[2]-p),m=1/(d[3]-f),u=new Array(s.length),w=0,c=s.length/2;w<c;w++)u[2*w]=x((s[2*w]-p)*g,0,1),u[2*w+1]=x((s[2*w+1]-f)*m,0,1);return u}oe.exports=function(s,d){d||(d={}),s=a(s,"float64"),d=e(d,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var p=o(d.maxDepth,255),f=o(d.bounds,_(s,2));f[0]===f[2]&&f[2]++,f[1]===f[3]&&f[3]++;var g,m=h(s,f),u=s.length>>>1;d.dtype||(d.dtype="array"),"string"==typeof d.dtype?g=new(i(d.dtype))(u):d.dtype&&(g=d.dtype,Array.isArray(g)&&(g.length=u));for(var w=0;w<u;++w)g[w]=w;var c=[],A=[],k=[],C=[];!function V(Z,Y,ee,re,X,K){if(!re.length)return null;var ie=c[X]||(c[X]=[]),q=k[X]||(k[X]=[]),U=A[X]||(A[X]=[]),W=ie.length;if(++X>p||K>1073741824){for(var ae=0;ae<re.length;ae++)ie.push(re[ae]),q.push(K),U.push(null,null,null,null);return W}if(ie.push(re[0]),q.push(K),re.length<=1)return U.push(null,null,null,null),W;for(var G=.5*ee,te=Z+G,ne=Y+G,le=[],ue=[],pe=[],de=[],_e=1,me=re.length;_e<me;_e++){var we=re[_e],Le=m[2*we+1];m[2*we]<te?Le<ne?le.push(we):ue.push(we):Le<ne?pe.push(we):de.push(we)}return U.push(V(Z,Y,G,le,X,K<<=2),V(Z,ne,G,ue,X,K+1),V(te,Y,G,pe,X,K+2),V(te,ne,G,de,X,K+3)),W}(0,0,1,g,0,1);for(var E=0,L=0;L<c.length;L++){var D=c[L];if(g.set)g.set(D,E);else for(var N=0,F=D.length;N<F;N++)g[N+E]=D[N];var I=E+c[L].length;C[L]=[E,I],E=I}return g.range=function(){for(var V,Z=[],Y=arguments.length;Y--;)Z[Y]=arguments[Y];if(l(Z[Z.length-1])){var ee=Z.pop();Z.length||null==ee.x&&null==ee.l&&null==ee.left||(Z=[ee],V={}),V=e(ee,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else V={};Z.length||(Z=f);var ue,re=M.apply(void 0,Z),X=[Math.min(re.x,re.x+re.width),Math.min(re.y,re.y+re.height),Math.max(re.x,re.x+re.width),Math.max(re.y,re.y+re.height)],K=X[0],ie=X[1],q=X[2],U=X[3],W=h([K,ie,q,U],f),ae=W[0],G=W[1],te=W[2],ne=W[3],le=o(V.level,c.length);if(null!=V.d&&("number"==typeof V.d?ue=[V.d,V.d]:V.d.length&&(ue=V.d),le=Math.min(Math.max(Math.ceil(-v(Math.abs(ue[0])/(f[2]-f[0]))),Math.ceil(-v(Math.abs(ue[1])/(f[3]-f[1])))),le)),le=Math.min(le,c.length),V.lod)return P(ae,G,te,ne,le);var pe=[];function de(me,we,De,Le,Ie,je){if(null!==Ie&&null!==je&&!(ae>me+De||G>we+De||te<me||ne<we||Le>=le||Ie===je)){var ye=c[Le];void 0===je&&(je=ye.length);for(var Me=Ie;Me<je;Me++){var Oe=ye[Me],Pe=s[2*Oe],Re=s[2*Oe+1];Pe>=K&&Pe<=q&&Re>=ie&&Re<=U&&pe.push(Oe)}var Ue=A[Le],qe=Ue[4*Ie+0],Xe=Ue[4*Ie+1],lt=Ue[4*Ie+2],He=Ue[4*Ie+3],$e=_e(Ue,Ie+1),et=.5*De,nt=Le+1;de(me,we,et,nt,qe,Xe||lt||He||$e),de(me,we+et,et,nt,Xe,lt||He||$e),de(me+et,we,et,nt,lt,He||$e),de(me+et,we+et,et,nt,He,$e)}}function _e(me,we){for(var De=null,Le=0;null===De;)if(De=me[4*we+Le],++Le>me.length)return null;return De}return de(0,0,1,0,0,1),pe},g;function P(V,Z,Y,ee,re){for(var X=[],K=0;K<re;K++){var ie=k[K],q=C[K][0],U=j(V,Z,K),W=j(Y,ee,K),ae=y.ge(ie,U),G=y.gt(ie,W,ae,ie.length-1);X[K]=[ae+q,G+q]}return X}function j(V,Z,Y){for(var ee=1,re=.5,X=.5,K=.5,ie=0;ie<Y;ie++)ee<<=2,ee+=V<re?Z<X?0:1:Z<X?2:3,K*=.5,re+=V<re?-K:K,X+=Z<X?-K:K;return ee}}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(b,oe,se){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var y=b("@turf/meta");function x(e){var o=0;if(e&&e.length>0){o+=Math.abs(M(e[0]));for(var a=1;a<e.length;a++)o-=Math.abs(M(e[a]))}return o}function M(e){var o,a,l,i,v,h,s=0,d=e.length;if(d>2){for(h=0;h<d;h++)h===d-2?(l=d-2,i=d-1,v=0):h===d-1?(l=d-1,i=0,v=1):(l=h,i=h+1,v=h+2),o=e[l],a=e[i],s+=(_(e[v][0])-_(o[0]))*Math.sin(_(a[1]));s=6378137*s*6378137/2}return s}function _(e){return e*Math.PI/180}se.default=function(e){return y.geomReduce(e,function(o,a){return o+function(l){var i,v=0;switch(l.type){case"Polygon":return x(l.coordinates);case"MultiPolygon":for(i=0;i<l.coordinates.length;i++)v+=x(l.coordinates[i]);return v;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(a)},0)}},{"@turf/meta":63}],62:[function(b,oe,se){"use strict";function y(d,p,f){void 0===f&&(f={});var g={type:"Feature"};return(0===f.id||f.id)&&(g.id=f.id),f.bbox&&(g.bbox=f.bbox),g.properties=p||{},g.geometry=d,g}function x(d,p,f){if(void 0===f&&(f={}),!d)throw new Error("coordinates is required");if(!Array.isArray(d))throw new Error("coordinates must be an Array");if(d.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!s(d[0])||!s(d[1]))throw new Error("coordinates must contain numbers");return y({type:"Point",coordinates:d},p,f)}function M(d,p,f){void 0===f&&(f={});for(var g=0,m=d;g<m.length;g++){var u=m[g];if(u.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var w=0;w<u[u.length-1].length;w++)if(u[u.length-1][w]!==u[0][w])throw new Error("First and last Position are not equivalent.")}return y({type:"Polygon",coordinates:d},p,f)}function _(d,p,f){if(void 0===f&&(f={}),d.length<2)throw new Error("coordinates must be an array of two or more positions");return y({type:"LineString",coordinates:d},p,f)}function e(d,p){void 0===p&&(p={});var f={type:"FeatureCollection"};return p.id&&(f.id=p.id),p.bbox&&(f.bbox=p.bbox),f.features=d,f}function o(d,p,f){return void 0===f&&(f={}),y({type:"MultiLineString",coordinates:d},p,f)}function a(d,p,f){return void 0===f&&(f={}),y({type:"MultiPoint",coordinates:d},p,f)}function l(d,p,f){return void 0===f&&(f={}),y({type:"MultiPolygon",coordinates:d},p,f)}function i(d,p){void 0===p&&(p="kilometers");var f=se.factors[p];if(!f)throw new Error(p+" units is invalid");return d*f}function v(d,p){void 0===p&&(p="kilometers");var f=se.factors[p];if(!f)throw new Error(p+" units is invalid");return d/f}function h(d){return d%(2*Math.PI)*180/Math.PI}function s(d){return!isNaN(d)&&null!==d&&!Array.isArray(d)}Object.defineProperty(se,"__esModule",{value:!0}),se.earthRadius=6371008.8,se.factors={centimeters:100*se.earthRadius,centimetres:100*se.earthRadius,degrees:se.earthRadius/111325,feet:3.28084*se.earthRadius,inches:39.37*se.earthRadius,kilometers:se.earthRadius/1e3,kilometres:se.earthRadius/1e3,meters:se.earthRadius,metres:se.earthRadius,miles:se.earthRadius/1609.344,millimeters:1e3*se.earthRadius,millimetres:1e3*se.earthRadius,nauticalmiles:se.earthRadius/1852,radians:1,yards:1.0936*se.earthRadius},se.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/se.earthRadius,yards:1.0936133},se.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},se.feature=y,se.geometry=function(d,p,f){switch(void 0===f&&(f={}),d){case"Point":return x(p).geometry;case"LineString":return _(p).geometry;case"Polygon":return M(p).geometry;case"MultiPoint":return a(p).geometry;case"MultiLineString":return o(p).geometry;case"MultiPolygon":return l(p).geometry;default:throw new Error(d+" is invalid")}},se.point=x,se.points=function(d,p,f){return void 0===f&&(f={}),e(d.map(function(g){return x(g,p)}),f)},se.polygon=M,se.polygons=function(d,p,f){return void 0===f&&(f={}),e(d.map(function(g){return M(g,p)}),f)},se.lineString=_,se.lineStrings=function(d,p,f){return void 0===f&&(f={}),e(d.map(function(g){return _(g,p)}),f)},se.featureCollection=e,se.multiLineString=o,se.multiPoint=a,se.multiPolygon=l,se.geometryCollection=function(d,p,f){return void 0===f&&(f={}),y({type:"GeometryCollection",geometries:d},p,f)},se.round=function(d,p){if(void 0===p&&(p=0),p&&!(p>=0))throw new Error("precision must be a positive number");var f=Math.pow(10,p||0);return Math.round(d*f)/f},se.radiansToLength=i,se.lengthToRadians=v,se.lengthToDegrees=function(d,p){return h(v(d,p))},se.bearingToAzimuth=function(d){var p=d%360;return p<0&&(p+=360),p},se.radiansToDegrees=h,se.degreesToRadians=function(d){return d%360*Math.PI/180},se.convertLength=function(d,p,f){if(void 0===p&&(p="kilometers"),void 0===f&&(f="kilometers"),!(d>=0))throw new Error("length must be a positive number");return i(v(d,p),f)},se.convertArea=function(d,p,f){if(void 0===p&&(p="meters"),void 0===f&&(f="kilometers"),!(d>=0))throw new Error("area must be a positive number");var g=se.areaFactors[p];if(!g)throw new Error("invalid original units");var m=se.areaFactors[f];if(!m)throw new Error("invalid final units");return d/g*m},se.isNumber=s,se.isObject=function(d){return!!d&&d.constructor===Object},se.validateBBox=function(d){if(!d)throw new Error("bbox is required");if(!Array.isArray(d))throw new Error("bbox must be an Array");if(4!==d.length&&6!==d.length)throw new Error("bbox must be an Array of 4 or 6 numbers");d.forEach(function(p){if(!s(p))throw new Error("bbox must only contain numbers")})},se.validateId=function(d){if(!d)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof d))throw new Error("id must be a number or a string")}},{}],63:[function(b,oe,se){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var y=b("@turf/helpers");function x(i,v,h){if(null!==i)for(var s,d,p,f,g,m,u,w,c=0,A=0,k=i.type,C="FeatureCollection"===k,E="Feature"===k,L=C?i.features.length:1,D=0;D<L;D++){g=(w=!!(u=C?i.features[D].geometry:E?i.geometry:i)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var N=0;N<g;N++){var F=0,I=0;if(null!==(f=w?u.geometries[N]:u)){m=f.coordinates;var P=f.type;switch(c=!h||"Polygon"!==P&&"MultiPolygon"!==P?0:1,P){case null:break;case"Point":if(!1===v(m,A,D,F,I))return!1;A++,F++;break;case"LineString":case"MultiPoint":for(s=0;s<m.length;s++){if(!1===v(m[s],A,D,F,I))return!1;A++,"MultiPoint"===P&&F++}"LineString"===P&&F++;break;case"Polygon":case"MultiLineString":for(s=0;s<m.length;s++){for(d=0;d<m[s].length-c;d++){if(!1===v(m[s][d],A,D,F,I))return!1;A++}"MultiLineString"===P&&F++,"Polygon"===P&&I++}"Polygon"===P&&F++;break;case"MultiPolygon":for(s=0;s<m.length;s++){for(I=0,d=0;d<m[s].length;d++){for(p=0;p<m[s][d].length-c;p++){if(!1===v(m[s][d][p],A,D,F,I))return!1;A++}I++}F++}break;case"GeometryCollection":for(s=0;s<f.geometries.length;s++)if(!1===x(f.geometries[s],v,h))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function M(i,v){var h;switch(i.type){case"FeatureCollection":for(h=0;h<i.features.length&&!1!==v(i.features[h].properties,h);h++);break;case"Feature":v(i.properties,0)}}function _(i,v){if("Feature"===i.type)v(i,0);else if("FeatureCollection"===i.type)for(var h=0;h<i.features.length&&!1!==v(i.features[h],h);h++);}function e(i,v){var h,s,d,p,f,g,m,u,w,c,A=0,k="FeatureCollection"===i.type,C="Feature"===i.type,E=k?i.features.length:1;for(h=0;h<E;h++){for(u=k?i.features[h].properties:C?i.properties:{},w=k?i.features[h].bbox:C?i.bbox:void 0,c=k?i.features[h].id:C?i.id:void 0,f=(m=!!(g=k?i.features[h].geometry:C?i.geometry:i)&&"GeometryCollection"===g.type)?g.geometries.length:1,d=0;d<f;d++)if(null!==(p=m?g.geometries[d]:g))switch(p.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===v(p,A,u,w,c))return!1;break;case"GeometryCollection":for(s=0;s<p.geometries.length;s++)if(!1===v(p.geometries[s],A,u,w,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===v(null,A,u,w,c))return!1;A++}}function o(i,v){e(i,function(h,s,d,p,f){var g,m=null===h?null:h.type;switch(m){case null:case"Point":case"LineString":case"Polygon":return!1!==v(y.feature(h,d,{bbox:p,id:f}),s,0)&&void 0}switch(m){case"MultiPoint":g="Point";break;case"MultiLineString":g="LineString";break;case"MultiPolygon":g="Polygon"}for(var u=0;u<h.coordinates.length;u++)if(!1===v(y.feature({type:g,coordinates:h.coordinates[u]},d),s,u))return!1})}function a(i,v){o(i,function(h,s,d){var p=0;if(h.geometry){var f=h.geometry.type;if("Point"!==f&&"MultiPoint"!==f){var g,m=0,u=0,w=0;return!1!==x(h,function(c,A,k,C,E){if(void 0===g||s>m||C>u||E>w)return g=c,m=s,u=C,w=E,void(p=0);var L=y.lineString([g,c],h.properties);if(!1===v(L,s,d,E,p))return!1;p++,g=c})&&void 0}}})}function l(i,v){if(!i)throw new Error("geojson is required");o(i,function(h,s,d){if(null!==h.geometry){var f=h.geometry.coordinates;switch(h.geometry.type){case"LineString":if(!1===v(h,s,d,0,0))return!1;break;case"Polygon":for(var g=0;g<f.length;g++)if(!1===v(y.lineString(f[g],h.properties),s,d,g))return!1}}})}se.coordEach=x,se.coordReduce=function(i,v,h,s){var d=h;return x(i,function(p,f,g,m,u){d=0===f&&void 0===h?p:v(d,p,f,g,m,u)},s),d},se.propEach=M,se.propReduce=function(i,v,h){var s=h;return M(i,function(d,p){s=0===p&&void 0===h?d:v(s,d,p)}),s},se.featureEach=_,se.featureReduce=function(i,v,h){var s=h;return _(i,function(d,p){s=0===p&&void 0===h?d:v(s,d,p)}),s},se.coordAll=function(i){var v=[];return x(i,function(h){v.push(h)}),v},se.geomEach=e,se.geomReduce=function(i,v,h){var s=h;return e(i,function(d,p,f,g,m){s=0===p&&void 0===h?d:v(s,d,p,f,g,m)}),s},se.flattenEach=o,se.flattenReduce=function(i,v,h){var s=h;return o(i,function(d,p,f){s=0===p&&0===f&&void 0===h?d:v(s,d,p,f)}),s},se.segmentEach=a,se.segmentReduce=function(i,v,h){var s=h,d=!1;return a(i,function(p,f,g,m,u){s=!1===d&&void 0===h?p:v(s,p,f,g,m,u),d=!0}),s},se.lineEach=l,se.lineReduce=function(i,v,h){var s=h;return l(i,function(d,p,f,g){s=0===p&&void 0===h?d:v(s,d,p,f,g)}),s},se.findSegment=function(i,v){if(!y.isObject(v=v||{}))throw new Error("options is invalid");var h,s=v.featureIndex||0,d=v.multiFeatureIndex||0,p=v.geometryIndex||0,f=v.segmentIndex||0,g=v.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),g=g||i.features[s].properties,h=i.features[s].geometry;break;case"Feature":g=g||i.properties,h=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":h=i;break;default:throw new Error("geojson is invalid")}if(null===h)return null;var m=h.coordinates;switch(h.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=m.length+f-1),y.lineString([m[f],m[f+1]],g,v);case"Polygon":return p<0&&(p=m.length+p),f<0&&(f=m[p].length+f-1),y.lineString([m[p][f],m[p][f+1]],g,v);case"MultiLineString":return d<0&&(d=m.length+d),f<0&&(f=m[d].length+f-1),y.lineString([m[d][f],m[d][f+1]],g,v);case"MultiPolygon":return d<0&&(d=m.length+d),p<0&&(p=m[d].length+p),f<0&&(f=m[d][p].length-f-1),y.lineString([m[d][p][f],m[d][p][f+1]],g,v)}throw new Error("geojson is invalid")},se.findPoint=function(i,v){if(!y.isObject(v=v||{}))throw new Error("options is invalid");var h,s=v.featureIndex||0,d=v.multiFeatureIndex||0,p=v.geometryIndex||0,f=v.coordIndex||0,g=v.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),g=g||i.features[s].properties,h=i.features[s].geometry;break;case"Feature":g=g||i.properties,h=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":h=i;break;default:throw new Error("geojson is invalid")}if(null===h)return null;var m=h.coordinates;switch(h.type){case"Point":return y.point(m,g,v);case"MultiPoint":return d<0&&(d=m.length+d),y.point(m[d],g,v);case"LineString":return f<0&&(f=m.length+f),y.point(m[f],g,v);case"Polygon":return p<0&&(p=m.length+p),f<0&&(f=m[p].length+f),y.point(m[p][f],g,v);case"MultiLineString":return d<0&&(d=m.length+d),f<0&&(f=m[d].length+f),y.point(m[d][f],g,v);case"MultiPolygon":return d<0&&(d=m.length+d),p<0&&(p=m[d].length+p),f<0&&(f=m[d][p].length-f),y.point(m[d][p][f],g,v)}throw new Error("geojson is invalid")}},{"@turf/helpers":62}],64:[function(b,oe,se){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var y=b("@turf/meta");function x(M){var _=[1/0,1/0,-1/0,-1/0];return y.coordEach(M,function(e){_[0]>e[0]&&(_[0]=e[0]),_[1]>e[1]&&(_[1]=e[1]),_[2]<e[0]&&(_[2]=e[0]),_[3]<e[1]&&(_[3]=e[1])}),_}x.default=x,se.default=x},{"@turf/meta":66}],65:[function(b,oe,se){arguments[4][62][0].apply(se,arguments)},{dup:62}],66:[function(b,oe,se){arguments[4][63][0].apply(se,arguments)},{"@turf/helpers":65,dup:63}],67:[function(b,oe,se){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var y=b("@turf/meta"),x=b("@turf/helpers");se.default=function(M,_){void 0===_&&(_={});var e=0,o=0,a=0;return y.coordEach(M,function(l){e+=l[0],o+=l[1],a++}),x.point([e/a,o/a],_.properties)}},{"@turf/helpers":68,"@turf/meta":69}],68:[function(b,oe,se){"use strict";function y(d,p,f){void 0===f&&(f={});var g={type:"Feature"};return(0===f.id||f.id)&&(g.id=f.id),f.bbox&&(g.bbox=f.bbox),g.properties=p||{},g.geometry=d,g}function x(d,p,f){return void 0===f&&(f={}),y({type:"Point",coordinates:d},p,f)}function M(d,p,f){void 0===f&&(f={});for(var g=0,m=d;g<m.length;g++){var u=m[g];if(u.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var w=0;w<u[u.length-1].length;w++)if(u[u.length-1][w]!==u[0][w])throw new Error("First and last Position are not equivalent.")}return y({type:"Polygon",coordinates:d},p,f)}function _(d,p,f){if(void 0===f&&(f={}),d.length<2)throw new Error("coordinates must be an array of two or more positions");return y({type:"LineString",coordinates:d},p,f)}function e(d,p){void 0===p&&(p={});var f={type:"FeatureCollection"};return p.id&&(f.id=p.id),p.bbox&&(f.bbox=p.bbox),f.features=d,f}function o(d,p,f){return void 0===f&&(f={}),y({type:"MultiLineString",coordinates:d},p,f)}function a(d,p,f){return void 0===f&&(f={}),y({type:"MultiPoint",coordinates:d},p,f)}function l(d,p,f){return void 0===f&&(f={}),y({type:"MultiPolygon",coordinates:d},p,f)}function i(d,p){void 0===p&&(p="kilometers");var f=se.factors[p];if(!f)throw new Error(p+" units is invalid");return d*f}function v(d,p){void 0===p&&(p="kilometers");var f=se.factors[p];if(!f)throw new Error(p+" units is invalid");return d/f}function h(d){return d%(2*Math.PI)*180/Math.PI}function s(d){return!isNaN(d)&&null!==d&&!Array.isArray(d)&&!/^\s*$/.test(d)}Object.defineProperty(se,"__esModule",{value:!0}),se.earthRadius=6371008.8,se.factors={centimeters:100*se.earthRadius,centimetres:100*se.earthRadius,degrees:se.earthRadius/111325,feet:3.28084*se.earthRadius,inches:39.37*se.earthRadius,kilometers:se.earthRadius/1e3,kilometres:se.earthRadius/1e3,meters:se.earthRadius,metres:se.earthRadius,miles:se.earthRadius/1609.344,millimeters:1e3*se.earthRadius,millimetres:1e3*se.earthRadius,nauticalmiles:se.earthRadius/1852,radians:1,yards:se.earthRadius/1.0936},se.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/se.earthRadius,yards:1/1.0936},se.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},se.feature=y,se.geometry=function(d,p,f){switch(void 0===f&&(f={}),d){case"Point":return x(p).geometry;case"LineString":return _(p).geometry;case"Polygon":return M(p).geometry;case"MultiPoint":return a(p).geometry;case"MultiLineString":return o(p).geometry;case"MultiPolygon":return l(p).geometry;default:throw new Error(d+" is invalid")}},se.point=x,se.points=function(d,p,f){return void 0===f&&(f={}),e(d.map(function(g){return x(g,p)}),f)},se.polygon=M,se.polygons=function(d,p,f){return void 0===f&&(f={}),e(d.map(function(g){return M(g,p)}),f)},se.lineString=_,se.lineStrings=function(d,p,f){return void 0===f&&(f={}),e(d.map(function(g){return _(g,p)}),f)},se.featureCollection=e,se.multiLineString=o,se.multiPoint=a,se.multiPolygon=l,se.geometryCollection=function(d,p,f){return void 0===f&&(f={}),y({type:"GeometryCollection",geometries:d},p,f)},se.round=function(d,p){if(void 0===p&&(p=0),p&&!(p>=0))throw new Error("precision must be a positive number");var f=Math.pow(10,p||0);return Math.round(d*f)/f},se.radiansToLength=i,se.lengthToRadians=v,se.lengthToDegrees=function(d,p){return h(v(d,p))},se.bearingToAzimuth=function(d){var p=d%360;return p<0&&(p+=360),p},se.radiansToDegrees=h,se.degreesToRadians=function(d){return d%360*Math.PI/180},se.convertLength=function(d,p,f){if(void 0===p&&(p="kilometers"),void 0===f&&(f="kilometers"),!(d>=0))throw new Error("length must be a positive number");return i(v(d,p),f)},se.convertArea=function(d,p,f){if(void 0===p&&(p="meters"),void 0===f&&(f="kilometers"),!(d>=0))throw new Error("area must be a positive number");var g=se.areaFactors[p];if(!g)throw new Error("invalid original units");var m=se.areaFactors[f];if(!m)throw new Error("invalid final units");return d/g*m},se.isNumber=s,se.isObject=function(d){return!!d&&d.constructor===Object},se.validateBBox=function(d){if(!d)throw new Error("bbox is required");if(!Array.isArray(d))throw new Error("bbox must be an Array");if(4!==d.length&&6!==d.length)throw new Error("bbox must be an Array of 4 or 6 numbers");d.forEach(function(p){if(!s(p))throw new Error("bbox must only contain numbers")})},se.validateId=function(d){if(!d)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof d))throw new Error("id must be a number or a string")},se.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},se.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},se.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},se.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},se.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},se.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},se.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},{}],69:[function(b,oe,se){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var y=b("@turf/helpers");function x(i,v,h){if(null!==i)for(var s,d,p,f,g,m,u,w,c=0,A=0,k=i.type,C="FeatureCollection"===k,E="Feature"===k,L=C?i.features.length:1,D=0;D<L;D++){g=(w=!!(u=C?i.features[D].geometry:E?i.geometry:i)&&"GeometryCollection"===u.type)?u.geometries.length:1;for(var N=0;N<g;N++){var F=0,I=0;if(null!==(f=w?u.geometries[N]:u)){m=f.coordinates;var P=f.type;switch(c=!h||"Polygon"!==P&&"MultiPolygon"!==P?0:1,P){case null:break;case"Point":if(!1===v(m,A,D,F,I))return!1;A++,F++;break;case"LineString":case"MultiPoint":for(s=0;s<m.length;s++){if(!1===v(m[s],A,D,F,I))return!1;A++,"MultiPoint"===P&&F++}"LineString"===P&&F++;break;case"Polygon":case"MultiLineString":for(s=0;s<m.length;s++){for(d=0;d<m[s].length-c;d++){if(!1===v(m[s][d],A,D,F,I))return!1;A++}"MultiLineString"===P&&F++,"Polygon"===P&&I++}"Polygon"===P&&F++;break;case"MultiPolygon":for(s=0;s<m.length;s++){for(I=0,d=0;d<m[s].length;d++){for(p=0;p<m[s][d].length-c;p++){if(!1===v(m[s][d][p],A,D,F,I))return!1;A++}I++}F++}break;case"GeometryCollection":for(s=0;s<f.geometries.length;s++)if(!1===x(f.geometries[s],v,h))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function M(i,v){var h;switch(i.type){case"FeatureCollection":for(h=0;h<i.features.length&&!1!==v(i.features[h].properties,h);h++);break;case"Feature":v(i.properties,0)}}function _(i,v){if("Feature"===i.type)v(i,0);else if("FeatureCollection"===i.type)for(var h=0;h<i.features.length&&!1!==v(i.features[h],h);h++);}function e(i,v){var h,s,d,p,f,g,m,u,w,c,A=0,k="FeatureCollection"===i.type,C="Feature"===i.type,E=k?i.features.length:1;for(h=0;h<E;h++){for(u=k?i.features[h].properties:C?i.properties:{},w=k?i.features[h].bbox:C?i.bbox:void 0,c=k?i.features[h].id:C?i.id:void 0,f=(m=!!(g=k?i.features[h].geometry:C?i.geometry:i)&&"GeometryCollection"===g.type)?g.geometries.length:1,d=0;d<f;d++)if(null!==(p=m?g.geometries[d]:g))switch(p.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===v(p,A,u,w,c))return!1;break;case"GeometryCollection":for(s=0;s<p.geometries.length;s++)if(!1===v(p.geometries[s],A,u,w,c))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===v(null,A,u,w,c))return!1;A++}}function o(i,v){e(i,function(h,s,d,p,f){var g,m=null===h?null:h.type;switch(m){case null:case"Point":case"LineString":case"Polygon":return!1!==v(y.feature(h,d,{bbox:p,id:f}),s,0)&&void 0}switch(m){case"MultiPoint":g="Point";break;case"MultiLineString":g="LineString";break;case"MultiPolygon":g="Polygon"}for(var u=0;u<h.coordinates.length;u++)if(!1===v(y.feature({type:g,coordinates:h.coordinates[u]},d),s,u))return!1})}function a(i,v){o(i,function(h,s,d){var p=0;if(h.geometry){var f=h.geometry.type;if("Point"!==f&&"MultiPoint"!==f){var g,m=0,u=0,w=0;return!1!==x(h,function(c,A,k,C,E){if(void 0===g||s>m||C>u||E>w)return g=c,m=s,u=C,w=E,void(p=0);var L=y.lineString([g,c],h.properties);if(!1===v(L,s,d,E,p))return!1;p++,g=c})&&void 0}}})}function l(i,v){if(!i)throw new Error("geojson is required");o(i,function(h,s,d){if(null!==h.geometry){var f=h.geometry.coordinates;switch(h.geometry.type){case"LineString":if(!1===v(h,s,d,0,0))return!1;break;case"Polygon":for(var g=0;g<f.length;g++)if(!1===v(y.lineString(f[g],h.properties),s,d,g))return!1}}})}se.coordEach=x,se.coordReduce=function(i,v,h,s){var d=h;return x(i,function(p,f,g,m,u){d=0===f&&void 0===h?p:v(d,p,f,g,m,u)},s),d},se.propEach=M,se.propReduce=function(i,v,h){var s=h;return M(i,function(d,p){s=0===p&&void 0===h?d:v(s,d,p)}),s},se.featureEach=_,se.featureReduce=function(i,v,h){var s=h;return _(i,function(d,p){s=0===p&&void 0===h?d:v(s,d,p)}),s},se.coordAll=function(i){var v=[];return x(i,function(h){v.push(h)}),v},se.geomEach=e,se.geomReduce=function(i,v,h){var s=h;return e(i,function(d,p,f,g,m){s=0===p&&void 0===h?d:v(s,d,p,f,g,m)}),s},se.flattenEach=o,se.flattenReduce=function(i,v,h){var s=h;return o(i,function(d,p,f){s=0===p&&0===f&&void 0===h?d:v(s,d,p,f)}),s},se.segmentEach=a,se.segmentReduce=function(i,v,h){var s=h,d=!1;return a(i,function(p,f,g,m,u){s=!1===d&&void 0===h?p:v(s,p,f,g,m,u),d=!0}),s},se.lineEach=l,se.lineReduce=function(i,v,h){var s=h;return l(i,function(d,p,f,g){s=0===p&&void 0===h?d:v(s,d,p,f,g)}),s},se.findSegment=function(i,v){if(!y.isObject(v=v||{}))throw new Error("options is invalid");var h,s=v.featureIndex||0,d=v.multiFeatureIndex||0,p=v.geometryIndex||0,f=v.segmentIndex||0,g=v.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),g=g||i.features[s].properties,h=i.features[s].geometry;break;case"Feature":g=g||i.properties,h=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":h=i;break;default:throw new Error("geojson is invalid")}if(null===h)return null;var m=h.coordinates;switch(h.type){case"Point":case"MultiPoint":return null;case"LineString":return f<0&&(f=m.length+f-1),y.lineString([m[f],m[f+1]],g,v);case"Polygon":return p<0&&(p=m.length+p),f<0&&(f=m[p].length+f-1),y.lineString([m[p][f],m[p][f+1]],g,v);case"MultiLineString":return d<0&&(d=m.length+d),f<0&&(f=m[d].length+f-1),y.lineString([m[d][f],m[d][f+1]],g,v);case"MultiPolygon":return d<0&&(d=m.length+d),p<0&&(p=m[d].length+p),f<0&&(f=m[d][p].length-f-1),y.lineString([m[d][p][f],m[d][p][f+1]],g,v)}throw new Error("geojson is invalid")},se.findPoint=function(i,v){if(!y.isObject(v=v||{}))throw new Error("options is invalid");var h,s=v.featureIndex||0,d=v.multiFeatureIndex||0,p=v.geometryIndex||0,f=v.coordIndex||0,g=v.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),g=g||i.features[s].properties,h=i.features[s].geometry;break;case"Feature":g=g||i.properties,h=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":h=i;break;default:throw new Error("geojson is invalid")}if(null===h)return null;var m=h.coordinates;switch(h.type){case"Point":return y.point(m,g,v);case"MultiPoint":return d<0&&(d=m.length+d),y.point(m[d],g,v);case"LineString":return f<0&&(f=m.length+f),y.point(m[f],g,v);case"Polygon":return p<0&&(p=m.length+p),f<0&&(f=m[p].length+f),y.point(m[p][f],g,v);case"MultiLineString":return d<0&&(d=m.length+d),f<0&&(f=m[d].length+f),y.point(m[d][f],g,v);case"MultiPolygon":return d<0&&(d=m.length+d),p<0&&(p=m[d].length+p),f<0&&(f=m[d][p].length-f),y.point(m[d][p][f],g,v)}throw new Error("geojson is invalid")}},{"@turf/helpers":68}],70:[function(b,oe,se){oe.exports=function(y){var x=0,M=0,_=0,e=0;return y.map(function(o){var a=(o=o.slice())[0],l=a.toUpperCase();if(a!=l)switch(o[0]=l,a){case"a":o[6]+=_,o[7]+=e;break;case"v":o[1]+=e;break;case"h":o[1]+=_;break;default:for(var i=1;i<o.length;)o[i++]+=_,o[i++]+=e}switch(l){case"Z":_=x,e=M;break;case"H":_=o[1];break;case"V":e=o[1];break;case"M":_=x=o[1],e=M=o[2];break;default:_=o[o.length-2],e=o[o.length-1]}return o})}},{}],71:[function(b,oe,se){"use strict";oe.exports=function(y,x){if(!y||null==y.length)throw Error("Argument should be an array");x=null==x?1:Math.floor(x);for(var M=Array(2*x),_=0;_<x;_++){for(var e=-1/0,o=1/0,a=_,l=y.length;a<l;a+=x)y[a]>e&&(e=y[a]),y[a]<o&&(o=y[a]);M[_]=o,M[x+_]=e}return M}},{}],72:[function(b,oe,se){"use strict";oe.exports=function(y,x,M){if("function"==typeof Array.prototype.findIndex)return y.findIndex(x,M);if("function"!=typeof x)throw new TypeError("predicate must be a function");var _=Object(y),e=_.length;if(0===e)return-1;for(var o=0;o<e;o++)if(x.call(M,_[o],o,_))return o;return-1}},{}],73:[function(b,oe,se){"use strict";var y=b("array-bounds");oe.exports=function(x,M,_){if(!x||null==x.length)throw Error("Argument should be an array");null==M&&(M=1),null==_&&(_=y(x,M));for(var e=0;e<M;e++){var o=_[M+e],a=_[e],l=e,i=x.length;if(o===1/0&&a===-1/0)for(l=e;l<i;l+=M)x[l]=x[l]===o?1:x[l]===a?0:.5;else if(o===1/0)for(l=e;l<i;l+=M)x[l]=x[l]===o?1:0;else if(a===-1/0)for(l=e;l<i;l+=M)x[l]=x[l]===a?0:1;else{var v=o-a;for(l=e;l<i;l+=M)isNaN(x[l])||(x[l]=0===v?.5:(x[l]-a)/v)}}return x}},{"array-bounds":71}],74:[function(b,oe,se){oe.exports=function(y,x){var M="number"==typeof y,_="number"==typeof x;M&&!_?(x=y,y=0):M||_||(y=0,x=0);var e=(x|=0)-(y|=0);if(e<0)throw new Error("array length must be positive");for(var o=new Array(e),a=0,l=y;a<e;a++,l++)o[a]=l;return o}},{}],75:[function(b,oe,se){(function(y){(function(){"use strict";var x=b("object-assign");function M(C,E){if(C===E)return 0;for(var L=C.length,D=E.length,N=0,F=Math.min(L,D);N<F;++N)if(C[N]!==E[N]){L=C[N],D=E[N];break}return L<D?-1:D<L?1:0}function _(C){return y.Buffer&&"function"==typeof y.Buffer.isBuffer?y.Buffer.isBuffer(C):!(null==C||!C._isBuffer)}var e=b("util/"),o=Object.prototype.hasOwnProperty,a=Array.prototype.slice,l="foo"===function(){}.name;function i(C){return Object.prototype.toString.call(C)}function v(C){return!_(C)&&"function"==typeof y.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(C):!!C&&(C instanceof DataView||!!(C.buffer&&C.buffer instanceof ArrayBuffer)))}var h=oe.exports=m,s=/\s*function\s+([^\(\s]*)\s*/;function d(C){if(e.isFunction(C)){if(l)return C.name;var E=C.toString().match(s);return E&&E[1]}}function p(C,E){return"string"==typeof C?C.length<E?C:C.slice(0,E):C}function f(C){if(l||!e.isFunction(C))return e.inspect(C);var E=d(C);return"[Function"+(E?": "+E:"")+"]"}function g(C,E,L,D,N){throw new h.AssertionError({message:L,actual:C,expected:E,operator:D,stackStartFunction:N})}function m(C,E){C||g(C,!0,E,"==",h.ok)}function u(C,E,L,D){if(C===E)return!0;if(_(C)&&_(E))return 0===M(C,E);if(e.isDate(C)&&e.isDate(E))return C.getTime()===E.getTime();if(e.isRegExp(C)&&e.isRegExp(E))return C.source===E.source&&C.global===E.global&&C.multiline===E.multiline&&C.lastIndex===E.lastIndex&&C.ignoreCase===E.ignoreCase;if(null!==C&&"object"==typeof C||null!==E&&"object"==typeof E){if(v(C)&&v(E)&&i(C)===i(E)&&!(C instanceof Float32Array||C instanceof Float64Array))return 0===M(new Uint8Array(C.buffer),new Uint8Array(E.buffer));if(_(C)!==_(E))return!1;var N=(D=D||{actual:[],expected:[]}).actual.indexOf(C);return-1!==N&&N===D.expected.indexOf(E)||(D.actual.push(C),D.expected.push(E),function(F,I,P,j){if(null==F||null==I)return!1;if(e.isPrimitive(F)||e.isPrimitive(I))return F===I;if(P&&Object.getPrototypeOf(F)!==Object.getPrototypeOf(I))return!1;var V=w(F),Z=w(I);if(V&&!Z||!V&&Z)return!1;if(V)return u(F=a.call(F),I=a.call(I),P);var Y,ee,re=k(F),X=k(I);if(re.length!==X.length)return!1;for(re.sort(),X.sort(),ee=re.length-1;ee>=0;ee--)if(re[ee]!==X[ee])return!1;for(ee=re.length-1;ee>=0;ee--)if(!u(F[Y=re[ee]],I[Y],P,j))return!1;return!0}(C,E,L,D))}return L?C===E:C==E}function w(C){return"[object Arguments]"==Object.prototype.toString.call(C)}function c(C,E){if(!C||!E)return!1;if("[object RegExp]"==Object.prototype.toString.call(E))return E.test(C);try{if(C instanceof E)return!0}catch(L){}return!Error.isPrototypeOf(E)&&!0===E.call({},C)}function A(C,E,L,D){var N;if("function"!=typeof E)throw new TypeError('"block" argument must be a function');"string"==typeof L&&(D=L,L=null),N=function(P){var j;try{P()}catch(V){j=V}return j}(E),D=(L&&L.name?" ("+L.name+").":".")+(D?" "+D:"."),C&&!N&&g(N,L,"Missing expected exception"+D);var F="string"==typeof D,I=!C&&N&&!L;if((!C&&e.isError(N)&&F&&c(N,L)||I)&&g(N,L,"Got unwanted exception"+D),C&&N&&L&&!c(N,L)||!C&&N)throw N}h.AssertionError=function(C){this.name="AssertionError",this.actual=C.actual,this.expected=C.expected,this.operator=C.operator,C.message?(this.message=C.message,this.generatedMessage=!1):(this.message=p(f(this.actual),128)+" "+this.operator+" "+p(f(this.expected),128),this.generatedMessage=!0);var E=C.stackStartFunction||g;if(Error.captureStackTrace)Error.captureStackTrace(this,E);else{var L=new Error;if(L.stack){var D=L.stack,N=d(E),F=D.indexOf("\n"+N);if(F>=0){var I=D.indexOf("\n",F+1);D=D.substring(I+1)}this.stack=D}}},e.inherits(h.AssertionError,Error),h.fail=g,h.ok=m,h.equal=function(C,E,L){C!=E&&g(C,E,L,"==",h.equal)},h.notEqual=function(C,E,L){C==E&&g(C,E,L,"!=",h.notEqual)},h.deepEqual=function(C,E,L){u(C,E,!1)||g(C,E,L,"deepEqual",h.deepEqual)},h.deepStrictEqual=function(C,E,L){u(C,E,!0)||g(C,E,L,"deepStrictEqual",h.deepStrictEqual)},h.notDeepEqual=function(C,E,L){u(C,E,!1)&&g(C,E,L,"notDeepEqual",h.notDeepEqual)},h.notDeepStrictEqual=function C(E,L,D){u(E,L,!0)&&g(E,L,D,"notDeepStrictEqual",C)},h.strictEqual=function(C,E,L){C!==E&&g(C,E,L,"===",h.strictEqual)},h.notStrictEqual=function(C,E,L){C===E&&g(C,E,L,"!==",h.notStrictEqual)},h.throws=function(C,E,L){A(!0,C,E,L)},h.doesNotThrow=function(C,E,L){A(!1,C,E,L)},h.ifError=function(C){if(C)throw C},h.strict=x(function C(E,L){E||g(E,!0,L,"==",C)},h,{equal:h.strictEqual,deepEqual:h.deepStrictEqual,notEqual:h.notStrictEqual,notDeepEqual:h.notDeepStrictEqual}),h.strict.strict=h.strict;var k=Object.keys||function(C){var E=[];for(var L in C)o.call(C,L)&&E.push(L);return E}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":247,"util/":78}],76:[function(b,oe,se){oe.exports="function"==typeof Object.create?function(y,x){y.super_=x,y.prototype=Object.create(x.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}})}:function(y,x){y.super_=x;var M=function(){};M.prototype=x.prototype,y.prototype=new M,y.prototype.constructor=y}},{}],77:[function(b,oe,se){oe.exports=function(y){return y&&"object"==typeof y&&"function"==typeof y.copy&&"function"==typeof y.fill&&"function"==typeof y.readUInt8}},{}],78:[function(b,oe,se){(function(y,x){(function(){var M=/%[sdj%]/g;se.format=function(F){if(!g(F)){for(var I=[],P=0;P<arguments.length;P++)I.push(o(arguments[P]));return I.join(" ")}P=1;for(var j=arguments,V=j.length,Z=String(F).replace(M,function(ee){if("%%"===ee)return"%";if(P>=V)return ee;switch(ee){case"%s":return String(j[P++]);case"%d":return Number(j[P++]);case"%j":try{return JSON.stringify(j[P++])}catch(re){return"[Circular]"}default:return ee}}),Y=j[P];P<V;Y=j[++P])p(Y)||!w(Y)?Z+=" "+Y:Z+=" "+o(Y);return Z},se.deprecate=function(F,I){if(m(x.process))return function(){return se.deprecate(F,I).apply(this,arguments)};if(!0===y.noDeprecation)return F;var P=!1;return function(){if(!P){if(y.throwDeprecation)throw new Error(I);y.traceDeprecation?console.trace(I):console.error(I),P=!0}return F.apply(this,arguments)}};var _,e={};function o(F,I){var P={seen:[],stylize:l};return arguments.length>=3&&(P.depth=arguments[2]),arguments.length>=4&&(P.colors=arguments[3]),d(I)?P.showHidden=I:I&&se._extend(P,I),m(P.showHidden)&&(P.showHidden=!1),m(P.depth)&&(P.depth=2),m(P.colors)&&(P.colors=!1),m(P.customInspect)&&(P.customInspect=!0),P.colors&&(P.stylize=a),i(P,F,P.depth)}function a(F,I){var P=o.styles[I];return P?"\x1b["+o.colors[P][0]+"m"+F+"\x1b["+o.colors[P][1]+"m":F}function l(F,I){return F}function i(F,I,P){if(F.customInspect&&I&&k(I.inspect)&&I.inspect!==se.inspect&&(!I.constructor||I.constructor.prototype!==I)){var j=I.inspect(P,F);return g(j)||(j=i(F,j,P)),j}var V=function(q,U){if(m(U))return q.stylize("undefined","undefined");if(g(U)){var W="'"+JSON.stringify(U).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return q.stylize(W,"string")}return f(U)?q.stylize(""+U,"number"):d(U)?q.stylize(""+U,"boolean"):p(U)?q.stylize("null","null"):void 0}(F,I);if(V)return V;var U,Z=Object.keys(I),Y=(U={},Z.forEach(function(W,ae){U[W]=!0}),U);if(F.showHidden&&(Z=Object.getOwnPropertyNames(I)),A(I)&&(Z.indexOf("message")>=0||Z.indexOf("description")>=0))return v(I);if(0===Z.length){if(k(I))return F.stylize("[Function"+(I.name?": "+I.name:"")+"]","special");if(u(I))return F.stylize(RegExp.prototype.toString.call(I),"regexp");if(c(I))return F.stylize(Date.prototype.toString.call(I),"date");if(A(I))return v(I)}var re,X="",K=!1,ie=["{","}"];return s(I)&&(K=!0,ie=["[","]"]),k(I)&&(X=" [Function"+(I.name?": "+I.name:"")+"]"),u(I)&&(X=" "+RegExp.prototype.toString.call(I)),c(I)&&(X=" "+Date.prototype.toUTCString.call(I)),A(I)&&(X=" "+v(I)),0!==Z.length||K&&0!=I.length?P<0?u(I)?F.stylize(RegExp.prototype.toString.call(I),"regexp"):F.stylize("[Object]","special"):(F.seen.push(I),re=K?function(q,U,W,ae,G){for(var te=[],ne=0,le=U.length;ne<le;++ne)N(U,String(ne))?te.push(h(q,U,W,ae,String(ne),!0)):te.push("");return G.forEach(function(ue){ue.match(/^\d+$/)||te.push(h(q,U,W,ae,ue,!0))}),te}(F,I,P,Y,Z):Z.map(function(q){return h(F,I,P,Y,q,K)}),F.seen.pop(),function(q,U,W){return q.reduce(function(ae,G){return G.indexOf("\n"),ae+G.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?W[0]+(""===U?"":U+"\n ")+" "+q.join(",\n  ")+" "+W[1]:W[0]+U+" "+q.join(", ")+" "+W[1]}(re,X,ie)):ie[0]+X+ie[1]}function v(F){return"["+Error.prototype.toString.call(F)+"]"}function h(F,I,P,j,V,Z){var Y,ee,re;if((re=Object.getOwnPropertyDescriptor(I,V)||{value:I[V]}).get?ee=F.stylize(re.set?"[Getter/Setter]":"[Getter]","special"):re.set&&(ee=F.stylize("[Setter]","special")),N(j,V)||(Y="["+V+"]"),ee||(F.seen.indexOf(re.value)<0?(ee=p(P)?i(F,re.value,null):i(F,re.value,P-1)).indexOf("\n")>-1&&(ee=Z?ee.split("\n").map(function(X){return"  "+X}).join("\n").substr(2):"\n"+ee.split("\n").map(function(X){return"   "+X}).join("\n")):ee=F.stylize("[Circular]","special")),m(Y)){if(Z&&V.match(/^\d+$/))return ee;(Y=JSON.stringify(""+V)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Y=Y.substr(1,Y.length-2),Y=F.stylize(Y,"name")):(Y=Y.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Y=F.stylize(Y,"string"))}return Y+": "+ee}function s(F){return Array.isArray(F)}function d(F){return"boolean"==typeof F}function p(F){return null===F}function f(F){return"number"==typeof F}function g(F){return"string"==typeof F}function m(F){return void 0===F}function u(F){return w(F)&&"[object RegExp]"===C(F)}function w(F){return"object"==typeof F&&null!==F}function c(F){return w(F)&&"[object Date]"===C(F)}function A(F){return w(F)&&("[object Error]"===C(F)||F instanceof Error)}function k(F){return"function"==typeof F}function C(F){return Object.prototype.toString.call(F)}function E(F){return F<10?"0"+F.toString(10):F.toString(10)}se.debuglog=function(F){if(m(_)&&(_=y.env.NODE_DEBUG||""),F=F.toUpperCase(),!e[F])if(new RegExp("\\b"+F+"\\b","i").test(_)){var I=y.pid;e[F]=function(){var P=se.format.apply(se,arguments);console.error("%s %d: %s",F,I,P)}}else e[F]=function(){};return e[F]},se.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},se.isArray=s,se.isBoolean=d,se.isNull=p,se.isNullOrUndefined=function(F){return null==F},se.isNumber=f,se.isString=g,se.isSymbol=function(F){return"symbol"==typeof F},se.isUndefined=m,se.isRegExp=u,se.isObject=w,se.isDate=c,se.isError=A,se.isFunction=k,se.isPrimitive=function(F){return null===F||"boolean"==typeof F||"number"==typeof F||"string"==typeof F||"symbol"==typeof F||void 0===F},se.isBuffer=b("./support/isBuffer");var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function D(){var F=new Date,I=[E(F.getHours()),E(F.getMinutes()),E(F.getSeconds())].join(":");return[F.getDate(),L[F.getMonth()],I].join(" ")}function N(F,I){return Object.prototype.hasOwnProperty.call(F,I)}se.log=function(){console.log("%s - %s",D(),se.format.apply(se,arguments))},se.inherits=b("inherits"),se._extend=function(F,I){if(!I||!w(I))return F;for(var P=Object.keys(I),j=P.length;j--;)F[P[j]]=I[P[j]];return F}}).call(this)}).call(this,b("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":77,_process:277,inherits:76}],79:[function(b,oe,se){"use strict";se.byteLength=function(i){var v=a(i),s=v[1];return 3*(v[0]+s)/4-s},se.toByteArray=function(i){var v,h,c,s=a(i),d=s[0],p=s[1],f=new M(3*(d+(c=p))/4-c),g=0,m=p>0?d-4:d;for(h=0;h<m;h+=4)v=x[i.charCodeAt(h)]<<18|x[i.charCodeAt(h+1)]<<12|x[i.charCodeAt(h+2)]<<6|x[i.charCodeAt(h+3)],f[g++]=v>>16&255,f[g++]=v>>8&255,f[g++]=255&v;return 2===p&&(v=x[i.charCodeAt(h)]<<2|x[i.charCodeAt(h+1)]>>4,f[g++]=255&v),1===p&&(v=x[i.charCodeAt(h)]<<10|x[i.charCodeAt(h+1)]<<4|x[i.charCodeAt(h+2)]>>2,f[g++]=v>>8&255,f[g++]=255&v),f},se.fromByteArray=function(i){for(var v,h=i.length,s=h%3,d=[],p=0,f=h-s;p<f;p+=16383)d.push(l(i,p,p+16383>f?f:p+16383));return 1===s?d.push(y[(v=i[h-1])>>2]+y[v<<4&63]+"=="):2===s&&d.push(y[(v=(i[h-2]<<8)+i[h-1])>>10]+y[v>>4&63]+y[v<<2&63]+"="),d.join("")};for(var y=[],x=[],M="undefined"!=typeof Uint8Array?Uint8Array:Array,_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,o=_.length;e<o;++e)y[e]=_[e],x[_.charCodeAt(e)]=e;function a(i){var v=i.length;if(v%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var h=i.indexOf("=");return-1===h&&(h=v),[h,h===v?0:4-h%4]}function l(i,v,h){for(var d,p=[],f=v;f<h;f+=3)p.push(y[(d=(i[f]<<16&16711680)+(i[f+1]<<8&65280)+(255&i[f+2]))>>18&63]+y[d>>12&63]+y[d>>6&63]+y[63&d]);return p.join("")}x["-".charCodeAt(0)]=62,x["_".charCodeAt(0)]=63},{}],80:[function(b,oe,se){"use strict";function y(a,l,i,v,h){for(var s=h+1;v<=h;){var d=v+h>>>1,p=a[d];(void 0!==i?i(p,l):p-l)>=0?(s=d,h=d-1):v=d+1}return s}function x(a,l,i,v,h){for(var s=h+1;v<=h;){var d=v+h>>>1,p=a[d];(void 0!==i?i(p,l):p-l)>0?(s=d,h=d-1):v=d+1}return s}function M(a,l,i,v,h){for(var s=v-1;v<=h;){var d=v+h>>>1,p=a[d];(void 0!==i?i(p,l):p-l)<0?(s=d,v=d+1):h=d-1}return s}function _(a,l,i,v,h){for(var s=v-1;v<=h;){var d=v+h>>>1,p=a[d];(void 0!==i?i(p,l):p-l)<=0?(s=d,v=d+1):h=d-1}return s}function e(a,l,i,v,h){for(;v<=h;){var s=v+h>>>1,d=a[s],p=void 0!==i?i(d,l):d-l;if(0===p)return s;p<=0?v=s+1:h=s-1}return-1}function o(a,l,i,v,h,s){return"function"==typeof i?s(a,l,i,void 0===v?0:0|v,void 0===h?a.length-1:0|h):s(a,l,void 0,void 0===i?0:0|i,void 0===v?a.length-1:0|v)}oe.exports={ge:function(a,l,i,v,h){return o(a,l,i,v,h,y)},gt:function(a,l,i,v,h){return o(a,l,i,v,h,x)},lt:function(a,l,i,v,h){return o(a,l,i,v,h,M)},le:function(a,l,i,v,h){return o(a,l,i,v,h,_)},eq:function(a,l,i,v,h){return o(a,l,i,v,h,e)}}},{}],81:[function(b,oe,se){"use strict";function y(M){var _=32;return(M&=-M)&&_--,65535&M&&(_-=16),16711935&M&&(_-=8),252645135&M&&(_-=4),858993459&M&&(_-=2),1431655765&M&&(_-=1),_}se.INT_BITS=32,se.INT_MAX=2147483647,se.INT_MIN=-1<<31,se.sign=function(M){return(M>0)-(M<0)},se.abs=function(M){var _=M>>31;return(M^_)-_},se.min=function(M,_){return _^(M^_)&-(M<_)},se.max=function(M,_){return M^(M^_)&-(M<_)},se.isPow2=function(M){return!(M&M-1||!M)},se.log2=function(M){var _,e;return _=(M>65535)<<4,_|=e=((M>>>=_)>255)<<3,_|=e=((M>>>=e)>15)<<2,(_|=e=((M>>>=e)>3)<<1)|(M>>>=e)>>1},se.log10=function(M){return M>=1e9?9:M>=1e8?8:M>=1e7?7:M>=1e6?6:M>=1e5?5:M>=1e4?4:M>=1e3?3:M>=100?2:M>=10?1:0},se.popCount=function(M){return 16843009*((M=(858993459&(M-=M>>>1&1431655765))+(M>>>2&858993459))+(M>>>4)&252645135)>>>24},se.countTrailingZeros=y,se.nextPow2=function(M){return M+=0===M,--M,M|=M>>>1,M|=M>>>2,M|=M>>>4,1+((M|=M>>>8)|M>>>16)},se.prevPow2=function(M){return M|=M>>>1,M|=M>>>2,M|=M>>>4,M|=M>>>8,(M|=M>>>16)-(M>>>1)},se.parity=function(M){return M^=M>>>16,M^=M>>>8,M^=M>>>4,27030>>>(M&=15)&1};var x=new Array(256);(function(M){for(var _=0;_<256;++_){var e=_,o=_,a=7;for(e>>>=1;e;e>>>=1)o<<=1,o|=1&e,--a;M[_]=o<<a&255}})(x),se.reverse=function(M){return x[255&M]<<24|x[M>>>8&255]<<16|x[M>>>16&255]<<8|x[M>>>24&255]},se.interleave2=function(M,_){return(M=1431655765&((M=858993459&((M=252645135&((M=16711935&((M&=65535)|M<<8))|M<<4))|M<<2))|M<<1))|(_=1431655765&((_=858993459&((_=252645135&((_=16711935&((_&=65535)|_<<8))|_<<4))|_<<2))|_<<1))<<1},se.deinterleave2=function(M,_){return(M=65535&((M=16711935&((M=252645135&((M=858993459&((M=M>>>_&1431655765)|M>>>1))|M>>>2))|M>>>4))|M>>>16))<<16>>16},se.interleave3=function(M,_,e){return M=1227133513&((M=3272356035&((M=251719695&((M=4278190335&((M&=1023)|M<<16))|M<<8))|M<<4))|M<<2),(M|=(_=1227133513&((_=3272356035&((_=251719695&((_=4278190335&((_&=1023)|_<<16))|_<<8))|_<<4))|_<<2))<<1)|(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<2},se.deinterleave3=function(M,_){return(M=1023&((M=4278190335&((M=251719695&((M=3272356035&((M=M>>>_&1227133513)|M>>>2))|M>>>4))|M>>>8))|M>>>16))<<22>>22},se.nextCombination=function(M){var _=M|M-1;return _+1|(~_&-~_)-1>>>y(M)+1}},{}],82:[function(b,oe,se){"use strict";var y=b("clamp");oe.exports=function(e,o){o||(o={});var a,l,i,v,h,s,p,g,m,u=null==o.cutoff?.25:o.cutoff,w=null==o.radius?8:o.radius,c=o.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!o.width||!o.height)throw Error("For raw data width and height should be provided by options");a=o.width,l=o.height,v=e,s=o.stride?o.stride:Math.floor(e.length/a/l)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(v=(p=e).getContext("2d").getImageData(0,0,a=p.width,l=p.height).data,s=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(v=e.getImageData(0,0,a=(p=e.canvas).width,l=p.height).data,s=4):window.ImageData&&e instanceof window.ImageData&&(a=e.width,l=e.height,v=e.data,s=4);if(i=Math.max(a,l),window.Uint8ClampedArray&&v instanceof window.Uint8ClampedArray||window.Uint8Array&&v instanceof window.Uint8Array)for(h=v,v=Array(a*l),g=0,m=h.length;g<m;g++)v[g]=h[g*s+c]/255;else if(1!==s)throw Error("Raw data can have only 1 value per pixel");var A=Array(a*l),k=Array(a*l),C=Array(i),E=Array(i),L=Array(i+1),D=Array(i);for(g=0,m=a*l;g<m;g++){var N=v[g];A[g]=1===N?0:0===N?x:Math.pow(Math.max(0,.5-N),2),k[g]=1===N?x:0===N?0:Math.pow(Math.max(0,N-.5),2)}M(A,a,l,C,E,D,L),M(k,a,l,C,E,D,L);var F=window.Float32Array?new Float32Array(a*l):new Array(a*l);for(g=0,m=a*l;g<m;g++)F[g]=y(1-((A[g]-k[g])/w+u),0,1);return F};var x=1e20;function M(e,o,a,l,i,v,h){for(var s=0;s<o;s++){for(var d=0;d<a;d++)l[d]=e[d*o+s];for(_(l,i,v,h,a),d=0;d<a;d++)e[d*o+s]=i[d]}for(d=0;d<a;d++){for(s=0;s<o;s++)l[s]=e[d*o+s];for(_(l,i,v,h,o),s=0;s<o;s++)e[d*o+s]=Math.sqrt(i[s])}}function _(e,o,a,l,i){a[0]=0,l[0]=-x,l[1]=+x;for(var v=1,h=0;v<i;v++){for(var s=(e[v]+v*v-(e[a[h]]+a[h]*a[h]))/(2*v-2*a[h]);s<=l[h];)h--,s=(e[v]+v*v-(e[a[h]]+a[h]*a[h]))/(2*v-2*a[h]);a[++h]=v,l[h]=s,l[h+1]=+x}for(v=0,h=0;v<i;v++){for(;l[h+1]<v;)h++;o[v]=(v-a[h])*(v-a[h])+e[a[h]]}}},{clamp:86}],83:[function(b,oe,se){},{}],84:[function(b,oe,se){"use strict";var y,x="object"==typeof Reflect?Reflect:null,M=x&&"function"==typeof x.apply?x.apply:function(f,g,m){return Function.prototype.apply.call(f,g,m)};y=x&&"function"==typeof x.ownKeys?x.ownKeys:Object.getOwnPropertySymbols?function(f){return Object.getOwnPropertyNames(f).concat(Object.getOwnPropertySymbols(f))}:function(f){return Object.getOwnPropertyNames(f)};var _=Number.isNaN||function(f){return f!=f};function e(){e.init.call(this)}oe.exports=e,oe.exports.once=function(f,g){return new Promise(function(m,u){function w(){void 0!==c&&f.removeListener("error",c),m([].slice.call(arguments))}var c;"error"!==g&&(c=function(A){f.removeListener(g,w),u(A)},f.once("error",c)),f.once(g,w)})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var o=10;function a(f){if("function"!=typeof f)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof f)}function l(f){return void 0===f._maxListeners?e.defaultMaxListeners:f._maxListeners}function i(f,g,m,u){var w,c,A;if(a(m),void 0===(c=f._events)?(c=f._events=Object.create(null),f._eventsCount=0):(void 0!==c.newListener&&(f.emit("newListener",g,m.listener?m.listener:m),c=f._events),A=c[g]),void 0===A)A=c[g]=m,++f._eventsCount;else if("function"==typeof A?A=c[g]=u?[m,A]:[A,m]:u?A.unshift(m):A.push(m),(w=l(f))>0&&A.length>w&&!A.warned){A.warned=!0;var C=new Error("Possible EventEmitter memory leak detected. "+A.length+" "+String(g)+" listeners added. Use emitter.setMaxListeners() to increase limit");C.name="MaxListenersExceededWarning",C.emitter=f,C.type=g,C.count=A.length,console&&console.warn&&console.warn(C)}return f}function v(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function h(f,g,m){var u={fired:!1,wrapFn:void 0,target:f,type:g,listener:m},w=v.bind(u);return w.listener=m,u.wrapFn=w,w}function s(f,g,m){var u=f._events;if(void 0===u)return[];var w=u[g];return void 0===w?[]:"function"==typeof w?m?[w.listener||w]:[w]:m?function(c){for(var A=new Array(c.length),k=0;k<A.length;++k)A[k]=c[k].listener||c[k];return A}(w):p(w,w.length)}function d(f){var g=this._events;if(void 0!==g){var m=g[f];if("function"==typeof m)return 1;if(void 0!==m)return m.length}return 0}function p(f,g){for(var m=new Array(g),u=0;u<g;++u)m[u]=f[u];return m}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(f){if("number"!=typeof f||f<0||_(f))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+f+".");o=f}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(f){if("number"!=typeof f||f<0||_(f))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+f+".");return this._maxListeners=f,this},e.prototype.getMaxListeners=function(){return l(this)},e.prototype.emit=function(f){for(var g=[],m=1;m<arguments.length;m++)g.push(arguments[m]);var u="error"===f,w=this._events;if(void 0!==w)u=u&&void 0===w.error;else if(!u)return!1;if(u){var c;if(g.length>0&&(c=g[0]),c instanceof Error)throw c;var A=new Error("Unhandled error."+(c?" ("+c.message+")":""));throw A.context=c,A}var k=w[f];if(void 0===k)return!1;if("function"==typeof k)M(k,this,g);else{var C=k.length,E=p(k,C);for(m=0;m<C;++m)M(E[m],this,g)}return!0},e.prototype.on=e.prototype.addListener=function(f,g){return i(this,f,g,!1)},e.prototype.prependListener=function(f,g){return i(this,f,g,!0)},e.prototype.once=function(f,g){return a(g),this.on(f,h(this,f,g)),this},e.prototype.prependOnceListener=function(f,g){return a(g),this.prependListener(f,h(this,f,g)),this},e.prototype.off=e.prototype.removeListener=function(f,g){var m,u,w,c,A;if(a(g),void 0===(u=this._events))return this;if(void 0===(m=u[f]))return this;if(m===g||m.listener===g)0==--this._eventsCount?this._events=Object.create(null):(delete u[f],u.removeListener&&this.emit("removeListener",f,m.listener||g));else if("function"!=typeof m){for(w=-1,c=m.length-1;c>=0;c--)if(m[c]===g||m[c].listener===g){A=m[c].listener,w=c;break}if(w<0)return this;0===w?m.shift():function(k,C){for(;C+1<k.length;C++)k[C]=k[C+1];k.pop()}(m,w),1===m.length&&(u[f]=m[0]),void 0!==u.removeListener&&this.emit("removeListener",f,A||g)}return this},e.prototype.removeAllListeners=function(f){var g,m,u;if(void 0===(m=this._events))return this;if(void 0===m.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==m[f]&&(0==--this._eventsCount?this._events=Object.create(null):delete m[f]),this;if(0===arguments.length){var w,c=Object.keys(m);for(u=0;u<c.length;++u)"removeListener"!==(w=c[u])&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(g=m[f]))this.removeListener(f,g);else if(void 0!==g)for(u=g.length-1;u>=0;u--)this.removeListener(f,g[u]);return this},e.prototype.listeners=function(f){return s(this,f,!0)},e.prototype.rawListeners=function(f){return s(this,f,!1)},e.listenerCount=function(f,g){return"function"==typeof f.listenerCount?f.listenerCount(g):d.call(f,g)},e.prototype.listenerCount=d,e.prototype.eventNames=function(){return this._eventsCount>0?y(this._events):[]}},{}],85:[function(b,oe,se){(function(y){(function(){"use strict";var x=b("base64-js"),M=b("ieee754");function _(q){if(q>2147483647)throw new RangeError('The value "'+q+'" is invalid for option "size"');var U=new Uint8Array(q);return U.__proto__=e.prototype,U}function e(q,U,W){if("number"==typeof q){if("string"==typeof U)throw new TypeError('The "string" argument must be of type string. Received type number');return l(q)}return o(q,U,W)}function o(q,U,W){if("string"==typeof q)return function(te,ne){if("string"==typeof ne&&""!==ne||(ne="utf8"),!e.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);var le=0|h(te,ne),ue=_(le),pe=ue.write(te,ne);return pe!==le&&(ue=ue.slice(0,pe)),ue}(q,U);if(ArrayBuffer.isView(q))return i(q);if(null==q)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q);if(K(q,ArrayBuffer)||q&&K(q.buffer,ArrayBuffer))return function(te,ne,le){if(ne<0||te.byteLength<ne)throw new RangeError('"offset" is outside of buffer bounds');if(te.byteLength<ne+(le||0))throw new RangeError('"length" is outside of buffer bounds');var ue;return(ue=void 0===ne&&void 0===le?new Uint8Array(te):void 0===le?new Uint8Array(te,ne):new Uint8Array(te,ne,le)).__proto__=e.prototype,ue}(q,U,W);if("number"==typeof q)throw new TypeError('The "value" argument must not be of type number. Received type number');var ae=q.valueOf&&q.valueOf();if(null!=ae&&ae!==q)return e.from(ae,U,W);var G=function(te){if(e.isBuffer(te)){var ne=0|v(te.length),le=_(ne);return 0===le.length||te.copy(le,0,0,ne),le}return void 0!==te.length?"number"!=typeof te.length||ie(te.length)?_(0):i(te):"Buffer"===te.type&&Array.isArray(te.data)?i(te.data):void 0}(q);if(G)return G;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof q[Symbol.toPrimitive])return e.from(q[Symbol.toPrimitive]("string"),U,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q)}function a(q){if("number"!=typeof q)throw new TypeError('"size" argument must be of type number');if(q<0)throw new RangeError('The value "'+q+'" is invalid for option "size"')}function l(q){return a(q),_(q<0?0:0|v(q))}function i(q){for(var U=q.length<0?0:0|v(q.length),W=_(U),ae=0;ae<U;ae+=1)W[ae]=255&q[ae];return W}function v(q){if(q>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|q}function h(q,U){if(e.isBuffer(q))return q.length;if(ArrayBuffer.isView(q)||K(q,ArrayBuffer))return q.byteLength;if("string"!=typeof q)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof q);var W=q.length,ae=arguments.length>2&&!0===arguments[2];if(!ae&&0===W)return 0;for(var G=!1;;)switch(U){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return ee(q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*W;case"hex":return W>>>1;case"base64":return re(q).length;default:if(G)return ae?-1:ee(q).length;U=(""+U).toLowerCase(),G=!0}}function s(q,U,W){var ae=!1;if((void 0===U||U<0)&&(U=0),U>this.length||((void 0===W||W>this.length)&&(W=this.length),W<=0)||(W>>>=0)<=(U>>>=0))return"";for(q||(q="utf8");;)switch(q){case"hex":return D(this,U,W);case"utf8":case"utf-8":return C(this,U,W);case"ascii":return E(this,U,W);case"latin1":case"binary":return L(this,U,W);case"base64":return k(this,U,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return N(this,U,W);default:if(ae)throw new TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),ae=!0}}function d(q,U,W){var ae=q[U];q[U]=q[W],q[W]=ae}function p(q,U,W,ae,G){if(0===q.length)return-1;if("string"==typeof W?(ae=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),ie(W=+W)&&(W=G?0:q.length-1),W<0&&(W=q.length+W),W>=q.length){if(G)return-1;W=q.length-1}else if(W<0){if(!G)return-1;W=0}if("string"==typeof U&&(U=e.from(U,ae)),e.isBuffer(U))return 0===U.length?-1:f(q,U,W,ae,G);if("number"==typeof U)return U&=255,"function"==typeof Uint8Array.prototype.indexOf?G?Uint8Array.prototype.indexOf.call(q,U,W):Uint8Array.prototype.lastIndexOf.call(q,U,W):f(q,[U],W,ae,G);throw new TypeError("val must be string, number or Buffer")}function f(q,U,W,ae,G){var te,ne=1,le=q.length,ue=U.length;if(void 0!==ae&&("ucs2"===(ae=String(ae).toLowerCase())||"ucs-2"===ae||"utf16le"===ae||"utf-16le"===ae)){if(q.length<2||U.length<2)return-1;ne=2,le/=2,ue/=2,W/=2}function pe(we,De){return 1===ne?we[De]:we.readUInt16BE(De*ne)}if(G){var de=-1;for(te=W;te<le;te++)if(pe(q,te)===pe(U,-1===de?0:te-de)){if(-1===de&&(de=te),te-de+1===ue)return de*ne}else-1!==de&&(te-=te-de),de=-1}else for(W+ue>le&&(W=le-ue),te=W;te>=0;te--){for(var _e=!0,me=0;me<ue;me++)if(pe(q,te+me)!==pe(U,me)){_e=!1;break}if(_e)return te}return-1}function g(q,U,W,ae){W=Number(W)||0;var G=q.length-W;ae?(ae=Number(ae))>G&&(ae=G):ae=G;var te=U.length;ae>te/2&&(ae=te/2);for(var ne=0;ne<ae;++ne){var le=parseInt(U.substr(2*ne,2),16);if(ie(le))return ne;q[W+ne]=le}return ne}function m(q,U,W,ae){return X(ee(U,q.length-W),q,W,ae)}function u(q,U,W,ae){return X(function(G){for(var te=[],ne=0;ne<G.length;++ne)te.push(255&G.charCodeAt(ne));return te}(U),q,W,ae)}function w(q,U,W,ae){return u(q,U,W,ae)}function c(q,U,W,ae){return X(re(U),q,W,ae)}function A(q,U,W,ae){return X(function(G,te){for(var ne,le,pe=[],de=0;de<G.length&&!((te-=2)<0);++de)le=(ne=G.charCodeAt(de))>>8,pe.push(ne%256),pe.push(le);return pe}(U,q.length-W),q,W,ae)}function k(q,U,W){return x.fromByteArray(0===U&&W===q.length?q:q.slice(U,W))}function C(q,U,W){W=Math.min(q.length,W);for(var ae=[],G=U;G<W;){var te,ne,le,ue,pe=q[G],de=null,_e=pe>239?4:pe>223?3:pe>191?2:1;if(G+_e<=W)switch(_e){case 1:pe<128&&(de=pe);break;case 2:128==(192&(te=q[G+1]))&&(ue=(31&pe)<<6|63&te)>127&&(de=ue);break;case 3:ne=q[G+2],128==(192&(te=q[G+1]))&&128==(192&ne)&&(ue=(15&pe)<<12|(63&te)<<6|63&ne)>2047&&(ue<55296||ue>57343)&&(de=ue);break;case 4:ne=q[G+2],le=q[G+3],128==(192&(te=q[G+1]))&&128==(192&ne)&&128==(192&le)&&(ue=(15&pe)<<18|(63&te)<<12|(63&ne)<<6|63&le)>65535&&ue<1114112&&(de=ue)}null===de?(de=65533,_e=1):de>65535&&(ae.push((de-=65536)>>>10&1023|55296),de=56320|1023&de),ae.push(de),G+=_e}return function(me){var we=me.length;if(we<=4096)return String.fromCharCode.apply(String,me);for(var De="",Le=0;Le<we;)De+=String.fromCharCode.apply(String,me.slice(Le,Le+=4096));return De}(ae)}function E(q,U,W){var ae="";W=Math.min(q.length,W);for(var G=U;G<W;++G)ae+=String.fromCharCode(127&q[G]);return ae}function L(q,U,W){var ae="";W=Math.min(q.length,W);for(var G=U;G<W;++G)ae+=String.fromCharCode(q[G]);return ae}function D(q,U,W){var ae=q.length;(!U||U<0)&&(U=0),(!W||W<0||W>ae)&&(W=ae);for(var G="",te=U;te<W;++te)G+=Y(q[te]);return G}function N(q,U,W){for(var ae=q.slice(U,W),G="",te=0;te<ae.length;te+=2)G+=String.fromCharCode(ae[te]+256*ae[te+1]);return G}function F(q,U,W){if(q%1!=0||q<0)throw new RangeError("offset is not uint");if(q+U>W)throw new RangeError("Trying to access beyond buffer length")}function I(q,U,W,ae,G,te){if(!e.isBuffer(q))throw new TypeError('"buffer" argument must be a Buffer instance');if(U>G||U<te)throw new RangeError('"value" argument is out of bounds');if(W+ae>q.length)throw new RangeError("Index out of range")}function P(q,U,W,ae,G,te){if(W+ae>q.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function j(q,U,W,ae,G){return U=+U,W>>>=0,G||P(q,0,W,4),M.write(q,U,W,ae,23,4),W+4}function V(q,U,W,ae,G){return U=+U,W>>>=0,G||P(q,0,W,8),M.write(q,U,W,ae,52,8),W+8}se.Buffer=e,se.SlowBuffer=function(q){return+q!=q&&(q=0),e.alloc(+q)},se.INSPECT_MAX_BYTES=50,se.kMaxLength=2147483647,(e.TYPED_ARRAY_SUPPORT=function(){try{var q=new Uint8Array(1);return q.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===q.foo()}catch(U){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(q,U,W){return o(q,U,W)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(q,U,W){return G=U,te=W,a(ae=q),ae<=0?_(ae):void 0!==G?"string"==typeof te?_(ae).fill(G,te):_(ae).fill(G):_(ae);var ae,G,te},e.allocUnsafe=function(q){return l(q)},e.allocUnsafeSlow=function(q){return l(q)},e.isBuffer=function(q){return null!=q&&!0===q._isBuffer&&q!==e.prototype},e.compare=function(q,U){if(K(q,Uint8Array)&&(q=e.from(q,q.offset,q.byteLength)),K(U,Uint8Array)&&(U=e.from(U,U.offset,U.byteLength)),!e.isBuffer(q)||!e.isBuffer(U))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(q===U)return 0;for(var W=q.length,ae=U.length,G=0,te=Math.min(W,ae);G<te;++G)if(q[G]!==U[G]){W=q[G],ae=U[G];break}return W<ae?-1:ae<W?1:0},e.isEncoding=function(q){switch(String(q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(q,U){if(!Array.isArray(q))throw new TypeError('"list" argument must be an Array of Buffers');if(0===q.length)return e.alloc(0);var W;if(void 0===U)for(U=0,W=0;W<q.length;++W)U+=q[W].length;var ae=e.allocUnsafe(U),G=0;for(W=0;W<q.length;++W){var te=q[W];if(K(te,Uint8Array)&&(te=e.from(te)),!e.isBuffer(te))throw new TypeError('"list" argument must be an Array of Buffers');te.copy(ae,G),G+=te.length}return ae},e.byteLength=h,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var q=this.length;if(q%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var U=0;U<q;U+=2)d(this,U,U+1);return this},e.prototype.swap32=function(){var q=this.length;if(q%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var U=0;U<q;U+=4)d(this,U,U+3),d(this,U+1,U+2);return this},e.prototype.swap64=function(){var q=this.length;if(q%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var U=0;U<q;U+=8)d(this,U,U+7),d(this,U+1,U+6),d(this,U+2,U+5),d(this,U+3,U+4);return this},e.prototype.toLocaleString=e.prototype.toString=function(){var q=this.length;return 0===q?"":0===arguments.length?C(this,0,q):s.apply(this,arguments)},e.prototype.equals=function(q){if(!e.isBuffer(q))throw new TypeError("Argument must be a Buffer");return this===q||0===e.compare(this,q)},e.prototype.inspect=function(){var q="",U=se.INSPECT_MAX_BYTES;return q=this.toString("hex",0,U).replace(/(.{2})/g,"$1 ").trim(),this.length>U&&(q+=" ... "),"<Buffer "+q+">"},e.prototype.compare=function(q,U,W,ae,G){if(K(q,Uint8Array)&&(q=e.from(q,q.offset,q.byteLength)),!e.isBuffer(q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof q);if(void 0===U&&(U=0),void 0===W&&(W=q?q.length:0),void 0===ae&&(ae=0),void 0===G&&(G=this.length),U<0||W>q.length||ae<0||G>this.length)throw new RangeError("out of range index");if(ae>=G&&U>=W)return 0;if(ae>=G)return-1;if(U>=W)return 1;if(this===q)return 0;for(var te=(G>>>=0)-(ae>>>=0),ne=(W>>>=0)-(U>>>=0),le=Math.min(te,ne),ue=this.slice(ae,G),pe=q.slice(U,W),de=0;de<le;++de)if(ue[de]!==pe[de]){te=ue[de],ne=pe[de];break}return te<ne?-1:ne<te?1:0},e.prototype.includes=function(q,U,W){return-1!==this.indexOf(q,U,W)},e.prototype.indexOf=function(q,U,W){return p(this,q,U,W,!0)},e.prototype.lastIndexOf=function(q,U,W){return p(this,q,U,W,!1)},e.prototype.write=function(q,U,W,ae){if(void 0===U)ae="utf8",W=this.length,U=0;else if(void 0===W&&"string"==typeof U)ae=U,W=this.length,U=0;else{if(!isFinite(U))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");U>>>=0,isFinite(W)?(W>>>=0,void 0===ae&&(ae="utf8")):(ae=W,W=void 0)}var G=this.length-U;if((void 0===W||W>G)&&(W=G),q.length>0&&(W<0||U<0)||U>this.length)throw new RangeError("Attempt to write outside buffer bounds");ae||(ae="utf8");for(var te=!1;;)switch(ae){case"hex":return g(this,q,U,W);case"utf8":case"utf-8":return m(this,q,U,W);case"ascii":return u(this,q,U,W);case"latin1":case"binary":return w(this,q,U,W);case"base64":return c(this,q,U,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,q,U,W);default:if(te)throw new TypeError("Unknown encoding: "+ae);ae=(""+ae).toLowerCase(),te=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e.prototype.slice=function(q,U){var W=this.length;(q=~~q)<0?(q+=W)<0&&(q=0):q>W&&(q=W),(U=void 0===U?W:~~U)<0?(U+=W)<0&&(U=0):U>W&&(U=W),U<q&&(U=q);var ae=this.subarray(q,U);return ae.__proto__=e.prototype,ae},e.prototype.readUIntLE=function(q,U,W){q>>>=0,U>>>=0,W||F(q,U,this.length);for(var ae=this[q],G=1,te=0;++te<U&&(G*=256);)ae+=this[q+te]*G;return ae},e.prototype.readUIntBE=function(q,U,W){q>>>=0,U>>>=0,W||F(q,U,this.length);for(var ae=this[q+--U],G=1;U>0&&(G*=256);)ae+=this[q+--U]*G;return ae},e.prototype.readUInt8=function(q,U){return q>>>=0,U||F(q,1,this.length),this[q]},e.prototype.readUInt16LE=function(q,U){return q>>>=0,U||F(q,2,this.length),this[q]|this[q+1]<<8},e.prototype.readUInt16BE=function(q,U){return q>>>=0,U||F(q,2,this.length),this[q]<<8|this[q+1]},e.prototype.readUInt32LE=function(q,U){return q>>>=0,U||F(q,4,this.length),(this[q]|this[q+1]<<8|this[q+2]<<16)+16777216*this[q+3]},e.prototype.readUInt32BE=function(q,U){return q>>>=0,U||F(q,4,this.length),16777216*this[q]+(this[q+1]<<16|this[q+2]<<8|this[q+3])},e.prototype.readIntLE=function(q,U,W){q>>>=0,U>>>=0,W||F(q,U,this.length);for(var ae=this[q],G=1,te=0;++te<U&&(G*=256);)ae+=this[q+te]*G;return ae>=(G*=128)&&(ae-=Math.pow(2,8*U)),ae},e.prototype.readIntBE=function(q,U,W){q>>>=0,U>>>=0,W||F(q,U,this.length);for(var ae=U,G=1,te=this[q+--ae];ae>0&&(G*=256);)te+=this[q+--ae]*G;return te>=(G*=128)&&(te-=Math.pow(2,8*U)),te},e.prototype.readInt8=function(q,U){return q>>>=0,U||F(q,1,this.length),128&this[q]?-1*(255-this[q]+1):this[q]},e.prototype.readInt16LE=function(q,U){q>>>=0,U||F(q,2,this.length);var W=this[q]|this[q+1]<<8;return 32768&W?4294901760|W:W},e.prototype.readInt16BE=function(q,U){q>>>=0,U||F(q,2,this.length);var W=this[q+1]|this[q]<<8;return 32768&W?4294901760|W:W},e.prototype.readInt32LE=function(q,U){return q>>>=0,U||F(q,4,this.length),this[q]|this[q+1]<<8|this[q+2]<<16|this[q+3]<<24},e.prototype.readInt32BE=function(q,U){return q>>>=0,U||F(q,4,this.length),this[q]<<24|this[q+1]<<16|this[q+2]<<8|this[q+3]},e.prototype.readFloatLE=function(q,U){return q>>>=0,U||F(q,4,this.length),M.read(this,q,!0,23,4)},e.prototype.readFloatBE=function(q,U){return q>>>=0,U||F(q,4,this.length),M.read(this,q,!1,23,4)},e.prototype.readDoubleLE=function(q,U){return q>>>=0,U||F(q,8,this.length),M.read(this,q,!0,52,8)},e.prototype.readDoubleBE=function(q,U){return q>>>=0,U||F(q,8,this.length),M.read(this,q,!1,52,8)},e.prototype.writeUIntLE=function(q,U,W,ae){q=+q,U>>>=0,W>>>=0,ae||I(this,q,U,W,Math.pow(2,8*W)-1,0);var G=1,te=0;for(this[U]=255&q;++te<W&&(G*=256);)this[U+te]=q/G&255;return U+W},e.prototype.writeUIntBE=function(q,U,W,ae){q=+q,U>>>=0,W>>>=0,ae||I(this,q,U,W,Math.pow(2,8*W)-1,0);var G=W-1,te=1;for(this[U+G]=255&q;--G>=0&&(te*=256);)this[U+G]=q/te&255;return U+W},e.prototype.writeUInt8=function(q,U,W){return q=+q,U>>>=0,W||I(this,q,U,1,255,0),this[U]=255&q,U+1},e.prototype.writeUInt16LE=function(q,U,W){return q=+q,U>>>=0,W||I(this,q,U,2,65535,0),this[U]=255&q,this[U+1]=q>>>8,U+2},e.prototype.writeUInt16BE=function(q,U,W){return q=+q,U>>>=0,W||I(this,q,U,2,65535,0),this[U]=q>>>8,this[U+1]=255&q,U+2},e.prototype.writeUInt32LE=function(q,U,W){return q=+q,U>>>=0,W||I(this,q,U,4,4294967295,0),this[U+3]=q>>>24,this[U+2]=q>>>16,this[U+1]=q>>>8,this[U]=255&q,U+4},e.prototype.writeUInt32BE=function(q,U,W){return q=+q,U>>>=0,W||I(this,q,U,4,4294967295,0),this[U]=q>>>24,this[U+1]=q>>>16,this[U+2]=q>>>8,this[U+3]=255&q,U+4},e.prototype.writeIntLE=function(q,U,W,ae){if(q=+q,U>>>=0,!ae){var G=Math.pow(2,8*W-1);I(this,q,U,W,G-1,-G)}var te=0,ne=1,le=0;for(this[U]=255&q;++te<W&&(ne*=256);)q<0&&0===le&&0!==this[U+te-1]&&(le=1),this[U+te]=(q/ne>>0)-le&255;return U+W},e.prototype.writeIntBE=function(q,U,W,ae){if(q=+q,U>>>=0,!ae){var G=Math.pow(2,8*W-1);I(this,q,U,W,G-1,-G)}var te=W-1,ne=1,le=0;for(this[U+te]=255&q;--te>=0&&(ne*=256);)q<0&&0===le&&0!==this[U+te+1]&&(le=1),this[U+te]=(q/ne>>0)-le&255;return U+W},e.prototype.writeInt8=function(q,U,W){return q=+q,U>>>=0,W||I(this,q,U,1,127,-128),q<0&&(q=255+q+1),this[U]=255&q,U+1},e.prototype.writeInt16LE=function(q,U,W){return q=+q,U>>>=0,W||I(this,q,U,2,32767,-32768),this[U]=255&q,this[U+1]=q>>>8,U+2},e.prototype.writeInt16BE=function(q,U,W){return q=+q,U>>>=0,W||I(this,q,U,2,32767,-32768),this[U]=q>>>8,this[U+1]=255&q,U+2},e.prototype.writeInt32LE=function(q,U,W){return q=+q,U>>>=0,W||I(this,q,U,4,2147483647,-2147483648),this[U]=255&q,this[U+1]=q>>>8,this[U+2]=q>>>16,this[U+3]=q>>>24,U+4},e.prototype.writeInt32BE=function(q,U,W){return q=+q,U>>>=0,W||I(this,q,U,4,2147483647,-2147483648),q<0&&(q=4294967295+q+1),this[U]=q>>>24,this[U+1]=q>>>16,this[U+2]=q>>>8,this[U+3]=255&q,U+4},e.prototype.writeFloatLE=function(q,U,W){return j(this,q,U,!0,W)},e.prototype.writeFloatBE=function(q,U,W){return j(this,q,U,!1,W)},e.prototype.writeDoubleLE=function(q,U,W){return V(this,q,U,!0,W)},e.prototype.writeDoubleBE=function(q,U,W){return V(this,q,U,!1,W)},e.prototype.copy=function(q,U,W,ae){if(!e.isBuffer(q))throw new TypeError("argument should be a Buffer");if(W||(W=0),ae||0===ae||(ae=this.length),U>=q.length&&(U=q.length),U||(U=0),ae>0&&ae<W&&(ae=W),ae===W||0===q.length||0===this.length)return 0;if(U<0)throw new RangeError("targetStart out of bounds");if(W<0||W>=this.length)throw new RangeError("Index out of range");if(ae<0)throw new RangeError("sourceEnd out of bounds");ae>this.length&&(ae=this.length),q.length-U<ae-W&&(ae=q.length-U+W);var G=ae-W;if(this===q&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(U,W,ae);else if(this===q&&W<U&&U<ae)for(var te=G-1;te>=0;--te)q[te+U]=this[te+W];else Uint8Array.prototype.set.call(q,this.subarray(W,ae),U);return G},e.prototype.fill=function(q,U,W,ae){if("string"==typeof q){if("string"==typeof U?(ae=U,U=0,W=this.length):"string"==typeof W&&(ae=W,W=this.length),void 0!==ae&&"string"!=typeof ae)throw new TypeError("encoding must be a string");if("string"==typeof ae&&!e.isEncoding(ae))throw new TypeError("Unknown encoding: "+ae);if(1===q.length){var G=q.charCodeAt(0);("utf8"===ae&&G<128||"latin1"===ae)&&(q=G)}}else"number"==typeof q&&(q&=255);if(U<0||this.length<U||this.length<W)throw new RangeError("Out of range index");if(W<=U)return this;var te;if(U>>>=0,W=void 0===W?this.length:W>>>0,q||(q=0),"number"==typeof q)for(te=U;te<W;++te)this[te]=q;else{var ne=e.isBuffer(q)?q:e.from(q,ae),le=ne.length;if(0===le)throw new TypeError('The value "'+q+'" is invalid for argument "value"');for(te=0;te<W-U;++te)this[te+U]=ne[te%le]}return this};var Z=/[^+/0-9A-Za-z-_]/g;function Y(q){return q<16?"0"+q.toString(16):q.toString(16)}function ee(q,U){var W;U=U||1/0;for(var ae=q.length,G=null,te=[],ne=0;ne<ae;++ne){if((W=q.charCodeAt(ne))>55295&&W<57344){if(!G){if(W>56319){(U-=3)>-1&&te.push(239,191,189);continue}if(ne+1===ae){(U-=3)>-1&&te.push(239,191,189);continue}G=W;continue}if(W<56320){(U-=3)>-1&&te.push(239,191,189),G=W;continue}W=65536+(G-55296<<10|W-56320)}else G&&(U-=3)>-1&&te.push(239,191,189);if(G=null,W<128){if((U-=1)<0)break;te.push(W)}else if(W<2048){if((U-=2)<0)break;te.push(W>>6|192,63&W|128)}else if(W<65536){if((U-=3)<0)break;te.push(W>>12|224,W>>6&63|128,63&W|128)}else{if(!(W<1114112))throw new Error("Invalid code point");if((U-=4)<0)break;te.push(W>>18|240,W>>12&63|128,W>>6&63|128,63&W|128)}}return te}function re(q){return x.toByteArray(function(U){if((U=(U=U.split("=")[0]).trim().replace(Z,"")).length<2)return"";for(;U.length%4!=0;)U+="=";return U}(q))}function X(q,U,W,ae){for(var G=0;G<ae&&!(G+W>=U.length||G>=q.length);++G)U[G+W]=q[G];return G}function K(q,U){return q instanceof U||null!=q&&null!=q.constructor&&null!=q.constructor.name&&q.constructor.name===U.name}function ie(q){return q!=q}}).call(this)}).call(this,b("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(b,oe,se){oe.exports=function(y,x,M){return x<M?y<x?x:y>M?M:y:y<M?M:y>x?x:y}},{}],87:[function(b,oe,se){"use strict";var y=b("clamp");function x(M,_){null==_&&(_=!0);var e=M[0],o=M[1],a=M[2],l=M[3];return null==l&&(l=_?1:255),_&&(e*=255,o*=255,a*=255,l*=255),16777216*(e=255&y(e,0,255))+((o=255&y(o,0,255))<<16)+((a=255&y(a,0,255))<<8)+(255&y(l,0,255))}oe.exports=x,oe.exports.to=x,oe.exports.from=function(M,_){var e=(M=+M)>>>24,o=(16711680&M)>>>16,a=(65280&M)>>>8,l=255&M;return!1===_?[e,o,a,l]:[e/255,o/255,a/255,l/255]}},{clamp:86}],88:[function(b,oe,se){"use strict";oe.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(b,oe,se){"use strict";var y=b("color-rgba"),x=b("clamp"),M=b("dtype");oe.exports=function(_,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var l,o=new(M(e))(4),a="uint8"!==e&&"uint8_clamped"!==e;return _.length&&"string"!=typeof _||((_=y(_))[0]/=255,_[1]/=255,_[2]/=255),(l=_)instanceof Uint8Array||l instanceof Uint8ClampedArray||Array.isArray(l)&&(l[0]>1||0===l[0])&&(l[1]>1||0===l[1])&&(l[2]>1||0===l[2])&&(!l[3]||l[3]>1)?(o[0]=_[0],o[1]=_[1],o[2]=_[2],o[3]=null!=_[3]?_[3]:255,a&&(o[0]/=255,o[1]/=255,o[2]/=255,o[3]/=255),o):(a?(o[0]=_[0],o[1]=_[1],o[2]=_[2],o[3]=null!=_[3]?_[3]:1):(o[0]=x(Math.floor(255*_[0]),0,255),o[1]=x(Math.floor(255*_[1]),0,255),o[2]=x(Math.floor(255*_[2]),0,255),o[3]=null==_[3]?255:x(Math.floor(255*_[3]),0,255)),o)}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(b,oe,se){(function(y){(function(){"use strict";var x=b("color-name"),M=b("is-plain-obj"),_=b("defined");oe.exports=function(o){var a,l,i=[],v=1;if("string"==typeof o)if(x[o])i=x[o].slice(),l="rgb";else if("transparent"===o)v=0,l="rgb",i=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(o)){var h=(p=o.slice(1)).length;v=1,h<=4?(i=[parseInt(p[0]+p[0],16),parseInt(p[1]+p[1],16),parseInt(p[2]+p[2],16)],4===h&&(v=parseInt(p[3]+p[3],16)/255)):(i=[parseInt(p[0]+p[1],16),parseInt(p[2]+p[3],16),parseInt(p[4]+p[5],16)],8===h&&(v=parseInt(p[6]+p[7],16)/255)),i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0),l="rgb"}else if(a=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(o)){var s=a[1],d="rgb"===s,p=s.replace(/a$/,"");l=p,h="cmyk"===p?4:"gray"===p?1:3,i=a[2].trim().split(/\s*,\s*/).map(function(g,m){if(/%$/.test(g))return m===h?parseFloat(g)/100:"rgb"===p?255*parseFloat(g)/100:parseFloat(g);if("h"===p[m]){if(/deg$/.test(g))return parseFloat(g);if(void 0!==e[g])return e[g]}return parseFloat(g)}),s===p&&i.push(1),v=d||void 0===i[h]?1:i[h],i=i.slice(0,h)}else o.length>10&&/[0-9](?:\s|\/)/.test(o)&&(i=o.match(/([0-9]+)/g).map(function(g){return parseFloat(g)}),l=o.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(o))if(M(o)){var f=_(o.r,o.red,o.R,null);null!==f?(l="rgb",i=[f,_(o.g,o.green,o.G),_(o.b,o.blue,o.B)]):(l="hsl",i=[_(o.h,o.hue,o.H),_(o.s,o.saturation,o.S),_(o.l,o.lightness,o.L,o.b,o.brightness)]),v=_(o.a,o.alpha,o.opacity,1),null!=o.opacity&&(v/=100)}else(Array.isArray(o)||y.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(o))&&(i=[o[0],o[1],o[2]],l="rgb",v=4===o.length?o[3]:1);else l="rgb",i=[o>>>16,(65280&o)>>>8,255&o];return{space:l,values:i,alpha:v}};var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(b,oe,se){"use strict";var y=b("color-parse"),x=b("color-space/hsl"),M=b("clamp");oe.exports=function(_){var e,o=y(_);return o.space?((e=Array(3))[0]=M(o.values[0],0,255),e[1]=M(o.values[1],0,255),e[2]=M(o.values[2],0,255),"h"===o.space[0]&&(e=x.rgb(e)),e.push(M(o.alpha,0,1)),e):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(b,oe,se){"use strict";var y=b("./rgb");oe.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(x){var M,_,e,o,a,l=x[0]/360,i=x[1]/100,v=x[2]/100;if(0===i)return[a=255*v,a,a];M=2*v-(_=v<.5?v*(1+i):v+i-v*i),o=[0,0,0];for(var h=0;h<3;h++)(e=l+1/3*-(h-1))<0?e++:e>1&&e--,o[h]=255*(a=6*e<1?M+6*(_-M)*e:2*e<1?_:3*e<2?M+(_-M)*(2/3-e)*6:M);return o}},y.hsl=function(x){var M,_,e=x[0]/255,o=x[1]/255,a=x[2]/255,l=Math.min(e,o,a),i=Math.max(e,o,a),v=i-l;return i===l?M=0:e===i?M=(o-a)/v:o===i?M=2+(a-e)/v:a===i&&(M=4+(e-o)/v),(M=Math.min(60*M,360))<0&&(M+=360),_=(l+i)/2,[M,100*(i===l?0:_<=.5?v/(i+l):v/(2-i-l)),100*_]}},{"./rgb":93}],93:[function(b,oe,se){"use strict";oe.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(b,oe,se){oe.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(b,oe,se){oe.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(b,oe,se){oe.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(b,oe,se){oe.exports=["normal","italic","oblique"]},{}],98:[function(b,oe,se){oe.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(b,oe,se){"use strict";oe.exports={parse:b("./parse"),stringify:b("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(b,oe,se){"use strict";var y=b("css-font-size-keywords");oe.exports={isSize:function(x){return/^[\d\.]/.test(x)||-1!==x.indexOf("/")||-1!==y.indexOf(x)}}},{"css-font-size-keywords":95}],101:[function(b,oe,se){"use strict";var y=b("unquote"),x=b("css-global-keywords"),M=b("css-system-font-keywords"),_=b("css-font-weight-keywords"),e=b("css-font-style-keywords"),o=b("css-font-stretch-keywords"),a=b("string-split-by"),l=b("./lib/util").isSize;oe.exports=v;var i=v.cache={};function v(s){if("string"!=typeof s)throw new Error("Font argument must be a string.");if(i[s])return i[s];if(""===s)throw new Error("Cannot parse an empty string.");if(-1!==M.indexOf(s))return i[s]={system:s};for(var d,p={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},f=a(s,/\s+/);d=f.shift();){if(-1!==x.indexOf(d))return["style","variant","weight","stretch"].forEach(function(m){p[m]=d}),i[s]=p;if(-1===e.indexOf(d))if("normal"!==d&&"small-caps"!==d)if(-1===o.indexOf(d)){if(-1===_.indexOf(d)){if(l(d)){var g=a(d,"/");if(p.size=g[0],null!=g[1]?p.lineHeight=h(g[1]):"/"===f[0]&&(f.shift(),p.lineHeight=h(f.shift())),!f.length)throw new Error("Missing required font-family.");return p.family=a(f.join(" "),/\s*,\s*/).map(y),i[s]=p}throw new Error("Unknown or unsupported font token: "+d)}p.weight=d}else p.stretch=d;else p.variant=d;else p.style=d}throw new Error("Missing required font-size.")}function h(s){var d=parseFloat(s);return d.toString()===s?d:s}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":305,unquote:328}],102:[function(b,oe,se){"use strict";var y=b("pick-by-alias"),x=b("./lib/util").isSize,M=d(b("css-global-keywords")),_=d(b("css-system-font-keywords")),e=d(b("css-font-weight-keywords")),o=d(b("css-font-style-keywords")),a=d(b("css-font-stretch-keywords")),l={normal:1,"small-caps":1},i={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},h="serif";function s(p,f){if(p&&!f[p]&&!M[p])throw Error("Unknown keyword `"+p+"`");return p}function d(p){for(var f={},g=0;g<p.length;g++)f[p[g]]=1;return f}oe.exports=function(p){if((p=y(p,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return p.system&&s(p.system,_),p.system;if(s(p.style,o),s(p.variant,l),s(p.weight,e),s(p.stretch,a),null==p.size&&(p.size="1rem"),"number"==typeof p.size&&(p.size+="px"),!x)throw Error("Bad size value `"+p.size+"`");p.family||(p.family=h),Array.isArray(p.family)&&(p.family.length||(p.family=[h]),p.family=p.family.map(function(g){return i[g]?g:'"'+g+'"'}).join(", "));var f=[];return f.push(p.style),p.variant!==p.style&&f.push(p.variant),p.weight!==p.variant&&p.weight!==p.style&&f.push(p.weight),p.stretch!==p.weight&&p.stretch!==p.variant&&p.stretch!==p.style&&f.push(p.stretch),f.push(p.size+(null==p.lineHeight||"normal"===p.lineHeight||p.lineHeight+""=="1"?"":"/"+p.lineHeight)),f.push(p.family),f.filter(Boolean).join(" ")}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(b,oe,se){oe.exports=["inherit","initial","unset"]},{}],104:[function(b,oe,se){oe.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(b,oe,se){"use strict";var y,x=b("type/value/is"),M=b("type/value/ensure"),_=b("type/plain-function/ensure"),e=b("es5-ext/object/copy"),o=b("es5-ext/object/normalize-options"),a=b("es5-ext/object/map"),l=Function.prototype.bind,i=Object.defineProperty,v=Object.prototype.hasOwnProperty;y=function(h,s,d){var p,f=M(s)&&_(s.value);return delete(p=e(s)).writable,delete p.value,p.get=function(){return!d.overwriteDefinition&&v.call(this,h)?f:(s.value=l.call(f,d.resolveContext?d.resolveContext(this):this),i(this,h,s),this[h])},p},oe.exports=function(h){var s=o(arguments[1]);return x(s.resolveContext)&&_(s.resolveContext),a(h,function(d,p){return y(p,d,s)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":321,"type/value/ensure":325,"type/value/is":326}],106:[function(b,oe,se){"use strict";var y=b("type/value/is"),x=b("type/plain-function/is"),M=b("es5-ext/object/assign"),_=b("es5-ext/object/normalize-options"),e=b("es5-ext/string/#/contains");(oe.exports=function(o,a){var l,i,v,h,s;return arguments.length<2||"string"!=typeof o?(h=a,a=o,o=null):h=arguments[2],y(o)?(l=e.call(o,"c"),i=e.call(o,"e"),v=e.call(o,"w")):(l=v=!0,i=!1),s={value:a,configurable:l,enumerable:i,writable:v},h?M(_(h),s):s}).gs=function(o,a,l){var i,v,h,s;return"string"!=typeof o?(h=l,l=a,a=o,o=null):h=arguments[3],y(a)?x(a)?y(l)?x(l)||(h=l,l=void 0):l=void 0:(h=a,a=l=void 0):a=void 0,y(o)?(i=e.call(o,"c"),v=e.call(o,"e")):(i=!0,v=!1),s={get:a,set:l,configurable:i,enumerable:v},h?M(_(h),s):s}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":322,"type/value/is":326}],107:[function(b,oe,se){(function(y){"use strict";function x(F,I){return F<I?-1:F>I?1:F>=I?0:NaN}function M(F){var I;return 1===F.length&&(I=F,F=function(P,j){return x(I(P),j)}),{left:function(P,j,V,Z){for(null==V&&(V=0),null==Z&&(Z=P.length);V<Z;){var Y=V+Z>>>1;F(P[Y],j)<0?V=Y+1:Z=Y}return V},right:function(P,j,V,Z){for(null==V&&(V=0),null==Z&&(Z=P.length);V<Z;){var Y=V+Z>>>1;F(P[Y],j)>0?Z=Y:V=Y+1}return V}}}var _=M(x),e=_.right,o=_.left;function a(F,I){return[F,I]}function l(F){return null===F?NaN:+F}function i(F,I){var P,j,V=F.length,Z=0,Y=-1,ee=0,re=0;if(null==I)for(;++Y<V;)isNaN(P=l(F[Y]))||(re+=(j=P-ee)*(P-(ee+=j/++Z)));else for(;++Y<V;)isNaN(P=l(I(F[Y],Y,F)))||(re+=(j=P-ee)*(P-(ee+=j/++Z)));if(Z>1)return re/(Z-1)}function v(F,I){var P=i(F,I);return P&&Math.sqrt(P)}function h(F,I){var P,j,V,Z=F.length,Y=-1;if(null==I){for(;++Y<Z;)if(null!=(P=F[Y])&&P>=P)for(j=V=P;++Y<Z;)null!=(P=F[Y])&&(j>P&&(j=P),V<P&&(V=P))}else for(;++Y<Z;)if(null!=(P=I(F[Y],Y,F))&&P>=P)for(j=V=P;++Y<Z;)null!=(P=I(F[Y],Y,F))&&(j>P&&(j=P),V<P&&(V=P));return[j,V]}var s=Array.prototype,d=s.slice,p=s.map;function f(F){return function(){return F}}function g(F){return F}function m(F,I,P){F=+F,I=+I,P=(V=arguments.length)<2?(I=F,F=0,1):V<3?1:+P;for(var j=-1,V=0|Math.max(0,Math.ceil((I-F)/P)),Z=new Array(V);++j<V;)Z[j]=F+j*P;return Z}var u=Math.sqrt(50),w=Math.sqrt(10),c=Math.sqrt(2);function A(F,I,P){var j=(I-F)/Math.max(0,P),V=Math.floor(Math.log(j)/Math.LN10),Z=j/Math.pow(10,V);return V>=0?(Z>=u?10:Z>=w?5:Z>=c?2:1)*Math.pow(10,V):-Math.pow(10,-V)/(Z>=u?10:Z>=w?5:Z>=c?2:1)}function k(F,I,P){var j=Math.abs(I-F)/Math.max(0,P),V=Math.pow(10,Math.floor(Math.log(j)/Math.LN10)),Z=j/V;return Z>=u?V*=10:Z>=w?V*=5:Z>=c&&(V*=2),I<F?-V:V}function C(F){return Math.ceil(Math.log(F.length)/Math.LN2)+1}function E(F,I,P){if(null==P&&(P=l),j=F.length){if((I=+I)<=0||j<2)return+P(F[0],0,F);if(I>=1)return+P(F[j-1],j-1,F);var j,V=(j-1)*I,Z=Math.floor(V),Y=+P(F[Z],Z,F);return Y+(+P(F[Z+1],Z+1,F)-Y)*(V-Z)}}function L(F,I){var P,j,V=F.length,Z=-1;if(null==I){for(;++Z<V;)if(null!=(P=F[Z])&&P>=P)for(j=P;++Z<V;)null!=(P=F[Z])&&j>P&&(j=P)}else for(;++Z<V;)if(null!=(P=I(F[Z],Z,F))&&P>=P)for(j=P;++Z<V;)null!=(P=I(F[Z],Z,F))&&j>P&&(j=P);return j}function D(F){if(!(V=F.length))return[];for(var I=-1,P=L(F,N),j=new Array(P);++I<P;)for(var V,Z=-1,Y=j[I]=new Array(V);++Z<V;)Y[Z]=F[Z][I];return j}function N(F){return F.length}y.bisect=e,y.bisectRight=e,y.bisectLeft=o,y.ascending=x,y.bisector=M,y.cross=function(F,I,P){var j,V,Z,Y,ee=F.length,re=I.length,X=new Array(ee*re);for(null==P&&(P=a),j=Z=0;j<ee;++j)for(Y=F[j],V=0;V<re;++V,++Z)X[Z]=P(Y,I[V]);return X},y.descending=function(F,I){return I<F?-1:I>F?1:I>=F?0:NaN},y.deviation=v,y.extent=h,y.histogram=function(){var F=g,I=h,P=C;function j(V){var Z,Y,ee=V.length,re=new Array(ee);for(Z=0;Z<ee;++Z)re[Z]=F(V[Z],Z,V);var X=I(re),K=X[0],ie=X[1],q=P(re,K,ie);Array.isArray(q)||(q=k(K,ie,q),q=m(Math.ceil(K/q)*q,ie,q));for(var U=q.length;q[0]<=K;)q.shift(),--U;for(;q[U-1]>ie;)q.pop(),--U;var W,ae=new Array(U+1);for(Z=0;Z<=U;++Z)(W=ae[Z]=[]).x0=Z>0?q[Z-1]:K,W.x1=Z<U?q[Z]:ie;for(Z=0;Z<ee;++Z)K<=(Y=re[Z])&&Y<=ie&&ae[e(q,Y,0,U)].push(V[Z]);return ae}return j.value=function(V){return arguments.length?(F="function"==typeof V?V:f(V),j):F},j.domain=function(V){return arguments.length?(I="function"==typeof V?V:f([V[0],V[1]]),j):I},j.thresholds=function(V){return arguments.length?(P="function"==typeof V?V:Array.isArray(V)?f(d.call(V)):f(V),j):P},j},y.thresholdFreedmanDiaconis=function(F,I,P){return F=p.call(F,l).sort(x),Math.ceil((P-I)/(2*(E(F,.75)-E(F,.25))*Math.pow(F.length,-1/3)))},y.thresholdScott=function(F,I,P){return Math.ceil((P-I)/(3.5*v(F)*Math.pow(F.length,-1/3)))},y.thresholdSturges=C,y.max=function(F,I){var P,j,V=F.length,Z=-1;if(null==I){for(;++Z<V;)if(null!=(P=F[Z])&&P>=P)for(j=P;++Z<V;)null!=(P=F[Z])&&P>j&&(j=P)}else for(;++Z<V;)if(null!=(P=I(F[Z],Z,F))&&P>=P)for(j=P;++Z<V;)null!=(P=I(F[Z],Z,F))&&P>j&&(j=P);return j},y.mean=function(F,I){var P,j=F.length,V=j,Z=-1,Y=0;if(null==I)for(;++Z<j;)isNaN(P=l(F[Z]))?--V:Y+=P;else for(;++Z<j;)isNaN(P=l(I(F[Z],Z,F)))?--V:Y+=P;if(V)return Y/V},y.median=function(F,I){var P,j=F.length,V=-1,Z=[];if(null==I)for(;++V<j;)isNaN(P=l(F[V]))||Z.push(P);else for(;++V<j;)isNaN(P=l(I(F[V],V,F)))||Z.push(P);return E(Z.sort(x),.5)},y.merge=function(F){for(var I,P,j,V=F.length,Z=-1,Y=0;++Z<V;)Y+=F[Z].length;for(P=new Array(Y);--V>=0;)for(I=(j=F[V]).length;--I>=0;)P[--Y]=j[I];return P},y.min=L,y.pairs=function(F,I){null==I&&(I=a);for(var P=0,j=F.length-1,V=F[0],Z=new Array(j<0?0:j);P<j;)Z[P]=I(V,V=F[++P]);return Z},y.permute=function(F,I){for(var P=I.length,j=new Array(P);P--;)j[P]=F[I[P]];return j},y.quantile=E,y.range=m,y.scan=function(F,I){if(P=F.length){var P,j,V=0,Z=0,Y=F[Z];for(null==I&&(I=x);++V<P;)(I(j=F[V],Y)<0||0!==I(Y,Y))&&(Y=j,Z=V);return 0===I(Y,Y)?Z:void 0}},y.shuffle=function(F,I,P){for(var j,V,Z=(null==P?F.length:P)-(I=null==I?0:+I);Z;)V=Math.random()*Z--|0,j=F[Z+I],F[Z+I]=F[V+I],F[V+I]=j;return F},y.sum=function(F,I){var P,j=F.length,V=-1,Z=0;if(null==I)for(;++V<j;)(P=+F[V])&&(Z+=P);else for(;++V<j;)(P=+I(F[V],V,F))&&(Z+=P);return Z},y.ticks=function(F,I,P){var j,V,Z,Y,ee=-1;if(P=+P,(F=+F)==(I=+I)&&P>0)return[F];if((j=I<F)&&(V=F,F=I,I=V),0===(Y=A(F,I,P))||!isFinite(Y))return[];if(Y>0)for(F=Math.ceil(F/Y),I=Math.floor(I/Y),Z=new Array(V=Math.ceil(I-F+1));++ee<V;)Z[ee]=(F+ee)*Y;else for(F=Math.floor(F*Y),I=Math.ceil(I*Y),Z=new Array(V=Math.ceil(F-I+1));++ee<V;)Z[ee]=(F-ee)/Y;return j&&Z.reverse(),Z},y.tickIncrement=A,y.tickStep=k,y.transpose=D,y.variance=i,y.zip=function(){return D(arguments)},Object.defineProperty(y,"__esModule",{value:!0})})("object"==typeof se&&void 0!==oe?se:this.d3=this.d3||{})},{}],108:[function(b,oe,se){(function(y){"use strict";function x(){}function M(h,s){var d=new x;if(h instanceof x)h.each(function(u,w){d.set(w,u)});else if(Array.isArray(h)){var p,f=-1,g=h.length;if(null==s)for(;++f<g;)d.set(f,h[f]);else for(;++f<g;)d.set(s(p=h[f],f,h),p)}else if(h)for(var m in h)d.set(m,h[m]);return d}function _(){return{}}function e(h,s,d){h[s]=d}function o(){return M()}function a(h,s,d){h.set(s,d)}function l(){}x.prototype=M.prototype={constructor:x,has:function(h){return"$"+h in this},get:function(h){return this["$"+h]},set:function(h,s){return this["$"+h]=s,this},remove:function(h){var s="$"+h;return s in this&&delete this[s]},clear:function(){for(var h in this)"$"===h[0]&&delete this[h]},keys:function(){var h=[];for(var s in this)"$"===s[0]&&h.push(s.slice(1));return h},values:function(){var h=[];for(var s in this)"$"===s[0]&&h.push(this[s]);return h},entries:function(){var h=[];for(var s in this)"$"===s[0]&&h.push({key:s.slice(1),value:this[s]});return h},size:function(){var h=0;for(var s in this)"$"===s[0]&&++h;return h},empty:function(){for(var h in this)if("$"===h[0])return!1;return!0},each:function(h){for(var s in this)"$"===s[0]&&h(this[s],s.slice(1),this)}};var i=M.prototype;function v(h,s){var d=new l;if(h instanceof l)h.each(function(g){d.add(g)});else if(h){var p=-1,f=h.length;if(null==s)for(;++p<f;)d.add(h[p]);else for(;++p<f;)d.add(s(h[p],p,h))}return d}l.prototype=v.prototype={constructor:l,has:i.has,add:function(h){return this["$"+(h+="")]=h,this},remove:i.remove,clear:i.clear,values:i.keys,size:i.size,empty:i.empty,each:i.each},y.nest=function(){var h,s,d,p=[],f=[];function g(m,u,w,c){if(u>=p.length)return null!=h&&m.sort(h),null!=s?s(m):m;for(var A,k,C,E=-1,L=m.length,D=p[u++],N=M(),F=w();++E<L;)(C=N.get(A=D(k=m[E])+""))?C.push(k):N.set(A,[k]);return N.each(function(I,P){c(F,P,g(I,u,w,c))}),F}return d={object:function(m){return g(m,0,_,e)},map:function(m){return g(m,0,o,a)},entries:function(m){return function u(w,c){if(++c>p.length)return w;var A,k=f[c-1];return null!=s&&c>=p.length?A=w.entries():(A=[],w.each(function(C,E){A.push({key:E,values:u(C,c)})})),null!=k?A.sort(function(C,E){return k(C.key,E.key)}):A}(g(m,0,o,a),0)},key:function(m){return p.push(m),d},sortKeys:function(m){return f[p.length-1]=m,d},sortValues:function(m){return h=m,d},rollup:function(m){return s=m,d}}},y.set=v,y.map=M,y.keys=function(h){var s=[];for(var d in h)s.push(d);return s},y.values=function(h){var s=[];for(var d in h)s.push(h[d]);return s},y.entries=function(h){var s=[];for(var d in h)s.push({key:d,value:h[d]});return s},Object.defineProperty(y,"__esModule",{value:!0})})("object"==typeof se&&void 0!==oe?se:this.d3=this.d3||{})},{}],109:[function(b,oe,se){var y;y=this,function(y){"use strict";function x(ye,Me,Oe){ye.prototype=Me.prototype=Oe,Oe.constructor=ye}function M(ye,Me){var Oe=Object.create(ye.prototype);for(var Pe in Me)Oe[Pe]=Me[Pe];return Oe}function _(){}var e="\\s*([+-]?\\d+)\\s*",o="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",a="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3,8})$/,i=new RegExp("^rgb\\("+[e,e,e]+"\\)$"),v=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),h=new RegExp("^rgba\\("+[e,e,e,o]+"\\)$"),s=new RegExp("^rgba\\("+[a,a,a,o]+"\\)$"),d=new RegExp("^hsl\\("+[o,a,a]+"\\)$"),p=new RegExp("^hsla\\("+[o,a,a,o]+"\\)$"),f={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function g(){return this.rgb().formatHex()}function m(){return this.rgb().formatRgb()}function u(ye){var Me,Oe;return ye=(ye+"").trim().toLowerCase(),(Me=l.exec(ye))?(Oe=Me[1].length,Me=parseInt(Me[1],16),6===Oe?w(Me):3===Oe?new C(Me>>8&15|Me>>4&240,Me>>4&15|240&Me,(15&Me)<<4|15&Me,1):8===Oe?c(Me>>24&255,Me>>16&255,Me>>8&255,(255&Me)/255):4===Oe?c(Me>>12&15|Me>>8&240,Me>>8&15|Me>>4&240,Me>>4&15|240&Me,((15&Me)<<4|15&Me)/255):null):(Me=i.exec(ye))?new C(Me[1],Me[2],Me[3],1):(Me=v.exec(ye))?new C(255*Me[1]/100,255*Me[2]/100,255*Me[3]/100,1):(Me=h.exec(ye))?c(Me[1],Me[2],Me[3],Me[4]):(Me=s.exec(ye))?c(255*Me[1]/100,255*Me[2]/100,255*Me[3]/100,Me[4]):(Me=d.exec(ye))?N(Me[1],Me[2]/100,Me[3]/100,1):(Me=p.exec(ye))?N(Me[1],Me[2]/100,Me[3]/100,Me[4]):f.hasOwnProperty(ye)?w(f[ye]):"transparent"===ye?new C(NaN,NaN,NaN,0):null}function w(ye){return new C(ye>>16&255,ye>>8&255,255&ye,1)}function c(ye,Me,Oe,Pe){return Pe<=0&&(ye=Me=Oe=NaN),new C(ye,Me,Oe,Pe)}function A(ye){return ye instanceof _||(ye=u(ye)),ye?new C((ye=ye.rgb()).r,ye.g,ye.b,ye.opacity):new C}function k(ye,Me,Oe,Pe){return 1===arguments.length?A(ye):new C(ye,Me,Oe,null==Pe?1:Pe)}function C(ye,Me,Oe,Pe){this.r=+ye,this.g=+Me,this.b=+Oe,this.opacity=+Pe}function E(){return"#"+D(this.r)+D(this.g)+D(this.b)}function L(){var ye=this.opacity;return(1===(ye=isNaN(ye)?1:Math.max(0,Math.min(1,ye)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===ye?")":", "+ye+")")}function D(ye){return((ye=Math.max(0,Math.min(255,Math.round(ye)||0)))<16?"0":"")+ye.toString(16)}function N(ye,Me,Oe,Pe){return Pe<=0?ye=Me=Oe=NaN:Oe<=0||Oe>=1?ye=Me=NaN:Me<=0&&(ye=NaN),new P(ye,Me,Oe,Pe)}function F(ye){if(ye instanceof P)return new P(ye.h,ye.s,ye.l,ye.opacity);if(ye instanceof _||(ye=u(ye)),!ye)return new P;if(ye instanceof P)return ye;var Me=(ye=ye.rgb()).r/255,Oe=ye.g/255,Pe=ye.b/255,Re=Math.min(Me,Oe,Pe),Ue=Math.max(Me,Oe,Pe),qe=NaN,Xe=Ue-Re,lt=(Ue+Re)/2;return Xe?(qe=Me===Ue?(Oe-Pe)/Xe+6*(Oe<Pe):Oe===Ue?(Pe-Me)/Xe+2:(Me-Oe)/Xe+4,Xe/=lt<.5?Ue+Re:2-Ue-Re,qe*=60):Xe=lt>0&&lt<1?0:qe,new P(qe,Xe,lt,ye.opacity)}function I(ye,Me,Oe,Pe){return 1===arguments.length?F(ye):new P(ye,Me,Oe,null==Pe?1:Pe)}function P(ye,Me,Oe,Pe){this.h=+ye,this.s=+Me,this.l=+Oe,this.opacity=+Pe}function j(ye,Me,Oe){return 255*(ye<60?Me+(Oe-Me)*ye/60:ye<180?Oe:ye<240?Me+(Oe-Me)*(240-ye)/60:Me)}x(_,u,{copy:function(ye){return Object.assign(new this.constructor,this,ye)},displayable:function(){return this.rgb().displayable()},hex:g,formatHex:g,formatHsl:function(){return F(this).formatHsl()},formatRgb:m,toString:m}),x(C,k,M(_,{brighter:function(ye){return ye=null==ye?1/.7:Math.pow(1/.7,ye),new C(this.r*ye,this.g*ye,this.b*ye,this.opacity)},darker:function(ye){return ye=null==ye?.7:Math.pow(.7,ye),new C(this.r*ye,this.g*ye,this.b*ye,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:E,formatHex:E,formatRgb:L,toString:L})),x(P,I,M(_,{brighter:function(ye){return ye=null==ye?1/.7:Math.pow(1/.7,ye),new P(this.h,this.s,this.l*ye,this.opacity)},darker:function(ye){return ye=null==ye?.7:Math.pow(.7,ye),new P(this.h,this.s,this.l*ye,this.opacity)},rgb:function(){var ye=this.h%360+360*(this.h<0),Me=isNaN(ye)||isNaN(this.s)?0:this.s,Oe=this.l,Pe=Oe+(Oe<.5?Oe:1-Oe)*Me,Re=2*Oe-Pe;return new C(j(ye>=240?ye-240:ye+120,Re,Pe),j(ye,Re,Pe),j(ye<120?ye+240:ye-120,Re,Pe),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var ye=this.opacity;return(1===(ye=isNaN(ye)?1:Math.max(0,Math.min(1,ye)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===ye?")":", "+ye+")")}}));var V=Math.PI/180,Z=180/Math.PI,Y=6/29,ee=3*Y*Y;function re(ye){if(ye instanceof K)return new K(ye.l,ye.a,ye.b,ye.opacity);if(ye instanceof te)return ne(ye);ye instanceof C||(ye=A(ye));var Me,Oe,Pe=W(ye.r),Re=W(ye.g),Ue=W(ye.b),qe=ie((.2225045*Pe+.7168786*Re+.0606169*Ue)/1);return Pe===Re&&Re===Ue?Me=Oe=qe:(Me=ie((.4360747*Pe+.3850649*Re+.1430804*Ue)/.96422),Oe=ie((.0139322*Pe+.0971045*Re+.7141733*Ue)/.82521)),new K(116*qe-16,500*(Me-qe),200*(qe-Oe),ye.opacity)}function X(ye,Me,Oe,Pe){return 1===arguments.length?re(ye):new K(ye,Me,Oe,null==Pe?1:Pe)}function K(ye,Me,Oe,Pe){this.l=+ye,this.a=+Me,this.b=+Oe,this.opacity=+Pe}function ie(ye){return ye>.008856451679035631?Math.pow(ye,1/3):ye/ee+4/29}function q(ye){return ye>Y?ye*ye*ye:ee*(ye-4/29)}function U(ye){return 255*(ye<=.0031308?12.92*ye:1.055*Math.pow(ye,1/2.4)-.055)}function W(ye){return(ye/=255)<=.04045?ye/12.92:Math.pow((ye+.055)/1.055,2.4)}function ae(ye){if(ye instanceof te)return new te(ye.h,ye.c,ye.l,ye.opacity);if(ye instanceof K||(ye=re(ye)),0===ye.a&&0===ye.b)return new te(NaN,0<ye.l&&ye.l<100?0:NaN,ye.l,ye.opacity);var Me=Math.atan2(ye.b,ye.a)*Z;return new te(Me<0?Me+360:Me,Math.sqrt(ye.a*ye.a+ye.b*ye.b),ye.l,ye.opacity)}function G(ye,Me,Oe,Pe){return 1===arguments.length?ae(ye):new te(ye,Me,Oe,null==Pe?1:Pe)}function te(ye,Me,Oe,Pe){this.h=+ye,this.c=+Me,this.l=+Oe,this.opacity=+Pe}function ne(ye){if(isNaN(ye.h))return new K(ye.l,0,0,ye.opacity);var Me=ye.h*V;return new K(ye.l,Math.cos(Me)*ye.c,Math.sin(Me)*ye.c,ye.opacity)}x(K,X,M(_,{brighter:function(ye){return new K(this.l+18*(null==ye?1:ye),this.a,this.b,this.opacity)},darker:function(ye){return new K(this.l-18*(null==ye?1:ye),this.a,this.b,this.opacity)},rgb:function(){var ye=(this.l+16)/116,Me=isNaN(this.a)?ye:ye+this.a/500,Oe=isNaN(this.b)?ye:ye-this.b/200;return new C(U(3.1338561*(Me=.96422*q(Me))-1.6168667*(ye=1*q(ye))-.4906146*(Oe=.82521*q(Oe))),U(-.9787684*Me+1.9161415*ye+.033454*Oe),U(.0719453*Me-.2289914*ye+1.4052427*Oe),this.opacity)}})),x(te,G,M(_,{brighter:function(ye){return new te(this.h,this.c,this.l+18*(null==ye?1:ye),this.opacity)},darker:function(ye){return new te(this.h,this.c,this.l-18*(null==ye?1:ye),this.opacity)},rgb:function(){return ne(this).rgb()}}));var ue=1.78277,pe=-.29227,de=-.90649,_e=1.97294,me=_e*de,we=_e*ue,De=ue*pe- -.14861*de;function Le(ye){if(ye instanceof je)return new je(ye.h,ye.s,ye.l,ye.opacity);ye instanceof C||(ye=A(ye));var Oe=ye.g/255,Pe=ye.b/255,Re=(De*Pe+me*(ye.r/255)-we*Oe)/(De+me-we),Ue=Pe-Re,qe=(_e*(Oe-Re)-pe*Ue)/de,Xe=Math.sqrt(qe*qe+Ue*Ue)/(_e*Re*(1-Re)),lt=Xe?Math.atan2(qe,Ue)*Z-120:NaN;return new je(lt<0?lt+360:lt,Xe,Re,ye.opacity)}function Ie(ye,Me,Oe,Pe){return 1===arguments.length?Le(ye):new je(ye,Me,Oe,null==Pe?1:Pe)}function je(ye,Me,Oe,Pe){this.h=+ye,this.s=+Me,this.l=+Oe,this.opacity=+Pe}x(je,Ie,M(_,{brighter:function(ye){return ye=null==ye?1/.7:Math.pow(1/.7,ye),new je(this.h,this.s,this.l*ye,this.opacity)},darker:function(ye){return ye=null==ye?.7:Math.pow(.7,ye),new je(this.h,this.s,this.l*ye,this.opacity)},rgb:function(){var ye=isNaN(this.h)?0:(this.h+120)*V,Me=+this.l,Oe=isNaN(this.s)?0:this.s*Me*(1-Me),Pe=Math.cos(ye),Re=Math.sin(ye);return new C(255*(Me+Oe*(-.14861*Pe+ue*Re)),255*(Me+Oe*(pe*Pe+de*Re)),255*(Me+Oe*(_e*Pe)),this.opacity)}})),y.color=u,y.cubehelix=Ie,y.gray=function(ye,Me){return new K(ye,0,0,null==Me?1:Me)},y.hcl=G,y.hsl=I,y.lab=X,y.lch=function(ye,Me,Oe,Pe){return 1===arguments.length?ae(ye):new te(Oe,Me,ye,null==Pe?1:Pe)},y.rgb=k,Object.defineProperty(y,"__esModule",{value:!0})}("object"==typeof se&&void 0!==oe?se:(y=y||self).d3=y.d3||{})},{}],110:[function(b,oe,se){var y;y=this,function(y){"use strict";var x={value:function(){}};function M(){for(var l,i=0,v=arguments.length,h={};i<v;++i){if(!(l=arguments[i]+"")||l in h||/[\s.]/.test(l))throw new Error("illegal type: "+l);h[l]=[]}return new _(h)}function _(l){this._=l}function e(l,i){return l.trim().split(/^|\s+/).map(function(v){var h="",s=v.indexOf(".");if(s>=0&&(h=v.slice(s+1),v=v.slice(0,s)),v&&!i.hasOwnProperty(v))throw new Error("unknown type: "+v);return{type:v,name:h}})}function o(l,i){for(var v,h=0,s=l.length;h<s;++h)if((v=l[h]).name===i)return v.value}function a(l,i,v){for(var h=0,s=l.length;h<s;++h)if(l[h].name===i){l[h]=x,l=l.slice(0,h).concat(l.slice(h+1));break}return null!=v&&l.push({name:i,value:v}),l}_.prototype=M.prototype={constructor:_,on:function(l,i){var v,h=this._,s=e(l+"",h),d=-1,p=s.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++d<p;)if(v=(l=s[d]).type)h[v]=a(h[v],l.name,i);else if(null==i)for(v in h)h[v]=a(h[v],l.name,null);return this}for(;++d<p;)if((v=(l=s[d]).type)&&(v=o(h[v],l.name)))return v},copy:function(){var l={},i=this._;for(var v in i)l[v]=i[v].slice();return new _(l)},call:function(l,i){if((v=arguments.length-2)>0)for(var v,h,s=new Array(v),d=0;d<v;++d)s[d]=arguments[d+2];if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(d=0,v=(h=this._[l]).length;d<v;++d)h[d].value.apply(i,s)},apply:function(l,i,v){if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(var h=this._[l],s=0,d=h.length;s<d;++s)h[s].value.apply(i,v)}},y.dispatch=M,Object.defineProperty(y,"__esModule",{value:!0})}("object"==typeof se&&void 0!==oe?se:(y=y||self).d3=y.d3||{})},{}],111:[function(b,oe,se){var y,x;y=this,x=function(y,x,M,_,e){"use strict";function o(f){return function(){return f}}function a(){return 1e-6*(Math.random()-.5)}function l(f){return f.x+f.vx}function i(f){return f.y+f.vy}function v(f){return f.index}function h(f,g){var m=f.get(g);if(!m)throw new Error("missing: "+g);return m}function s(f){return f.x}function d(f){return f.y}var p=Math.PI*(3-Math.sqrt(5));y.forceCenter=function(f,g){var m;function u(){var w,c,A=m.length,k=0,C=0;for(w=0;w<A;++w)k+=(c=m[w]).x,C+=c.y;for(k=k/A-f,C=C/A-g,w=0;w<A;++w)(c=m[w]).x-=k,c.y-=C}return null==f&&(f=0),null==g&&(g=0),u.initialize=function(w){m=w},u.x=function(w){return arguments.length?(f=+w,u):f},u.y=function(w){return arguments.length?(g=+w,u):g},u},y.forceCollide=function(f){var g,m,u=1,w=1;function c(){for(var C,E,L,D,N,F,I,P=g.length,j=0;j<w;++j)for(E=x.quadtree(g,l,i).visitAfter(A),C=0;C<P;++C)I=(F=m[(L=g[C]).index])*F,D=L.x+L.vx,N=L.y+L.vy,E.visit(V);function V(Z,Y,ee,re,X){var K=Z.data,ie=Z.r,q=F+ie;if(!K)return Y>D+q||re<D-q||ee>N+q||X<N-q;if(K.index>L.index){var U=D-K.x-K.vx,W=N-K.y-K.vy,ae=U*U+W*W;ae<q*q&&(0===U&&(ae+=(U=a())*U),0===W&&(ae+=(W=a())*W),ae=(q-(ae=Math.sqrt(ae)))/ae*u,L.vx+=(U*=ae)*(q=(ie*=ie)/(I+ie)),L.vy+=(W*=ae)*q,K.vx-=U*(q=1-q),K.vy-=W*q)}}}function A(C){if(C.data)return C.r=m[C.data.index];for(var E=C.r=0;E<4;++E)C[E]&&C[E].r>C.r&&(C.r=C[E].r)}function k(){if(g){var C,E,L=g.length;for(m=new Array(L),C=0;C<L;++C)m[(E=g[C]).index]=+f(E,C,g)}}return"function"!=typeof f&&(f=o(null==f?1:+f)),c.initialize=function(C){g=C,k()},c.iterations=function(C){return arguments.length?(w=+C,c):w},c.strength=function(C){return arguments.length?(u=+C,c):u},c.radius=function(C){return arguments.length?(f="function"==typeof C?C:o(+C),k(),c):f},c},y.forceLink=function(f){var g,m,u,w,c,A=v,k=function(I){return 1/Math.min(w[I.source.index],w[I.target.index])},C=o(30),E=1;function L(I){for(var P=0,j=f.length;P<E;++P)for(var V,Z,Y,ee,re,X,K,ie=0;ie<j;++ie)Z=(V=f[ie]).source,ee=(Y=V.target).x+Y.vx-Z.x-Z.vx||a(),re=Y.y+Y.vy-Z.y-Z.vy||a(),ee*=X=((X=Math.sqrt(ee*ee+re*re))-m[ie])/X*I*g[ie],re*=X,Y.vx-=ee*(K=c[ie]),Y.vy-=re*K,Z.vx+=ee*(K=1-K),Z.vy+=re*K}function D(){if(u){var I,P,j=u.length,V=f.length,Z=M.map(u,A);for(I=0,w=new Array(j);I<V;++I)(P=f[I]).index=I,"object"!=typeof P.source&&(P.source=h(Z,P.source)),"object"!=typeof P.target&&(P.target=h(Z,P.target)),w[P.source.index]=(w[P.source.index]||0)+1,w[P.target.index]=(w[P.target.index]||0)+1;for(I=0,c=new Array(V);I<V;++I)c[I]=w[(P=f[I]).source.index]/(w[P.source.index]+w[P.target.index]);g=new Array(V),N(),m=new Array(V),F()}}function N(){if(u)for(var I=0,P=f.length;I<P;++I)g[I]=+k(f[I],I,f)}function F(){if(u)for(var I=0,P=f.length;I<P;++I)m[I]=+C(f[I],I,f)}return null==f&&(f=[]),L.initialize=function(I){u=I,D()},L.links=function(I){return arguments.length?(f=I,D(),L):f},L.id=function(I){return arguments.length?(A=I,L):A},L.iterations=function(I){return arguments.length?(E=+I,L):E},L.strength=function(I){return arguments.length?(k="function"==typeof I?I:o(+I),N(),L):k},L.distance=function(I){return arguments.length?(C="function"==typeof I?I:o(+I),F(),L):C},L},y.forceManyBody=function(){var f,g,m,u,w=o(-30),c=1,A=1/0,k=.81;function C(N){var F,I=f.length,P=x.quadtree(f,s,d).visitAfter(L);for(m=N,F=0;F<I;++F)g=f[F],P.visit(D)}function E(){if(f){var N,F,I=f.length;for(u=new Array(I),N=0;N<I;++N)u[(F=f[N]).index]=+w(F,N,f)}}function L(N){var F,I,P,j,V,Z=0,Y=0;if(N.length){for(P=j=V=0;V<4;++V)(F=N[V])&&(I=Math.abs(F.value))&&(Z+=F.value,Y+=I,P+=I*F.x,j+=I*F.y);N.x=P/Y,N.y=j/Y}else{(F=N).x=F.data.x,F.y=F.data.y;do{Z+=u[F.data.index]}while(F=F.next)}N.value=Z}function D(N,F,I,P){if(!N.value)return!0;var j=N.x-g.x,V=N.y-g.y,Z=P-F,Y=j*j+V*V;if(Z*Z/k<Y)return Y<A&&(0===j&&(Y+=(j=a())*j),0===V&&(Y+=(V=a())*V),Y<c&&(Y=Math.sqrt(c*Y)),g.vx+=j*N.value*m/Y,g.vy+=V*N.value*m/Y),!0;if(!(N.length||Y>=A)){(N.data!==g||N.next)&&(0===j&&(Y+=(j=a())*j),0===V&&(Y+=(V=a())*V),Y<c&&(Y=Math.sqrt(c*Y)));do{N.data!==g&&(g.vx+=j*(Z=u[N.data.index]*m/Y),g.vy+=V*Z)}while(N=N.next)}}return C.initialize=function(N){f=N,E()},C.strength=function(N){return arguments.length?(w="function"==typeof N?N:o(+N),E(),C):w},C.distanceMin=function(N){return arguments.length?(c=N*N,C):Math.sqrt(c)},C.distanceMax=function(N){return arguments.length?(A=N*N,C):Math.sqrt(A)},C.theta=function(N){return arguments.length?(k=N*N,C):Math.sqrt(k)},C},y.forceRadial=function(f,g,m){var u,w,c,A=o(.1);function k(E){for(var L=0,D=u.length;L<D;++L){var N=u[L],F=N.x-g||1e-6,I=N.y-m||1e-6,P=Math.sqrt(F*F+I*I),j=(c[L]-P)*w[L]*E/P;N.vx+=F*j,N.vy+=I*j}}function C(){if(u){var E,L=u.length;for(w=new Array(L),c=new Array(L),E=0;E<L;++E)c[E]=+f(u[E],E,u),w[E]=isNaN(c[E])?0:+A(u[E],E,u)}}return"function"!=typeof f&&(f=o(+f)),null==g&&(g=0),null==m&&(m=0),k.initialize=function(E){u=E,C()},k.strength=function(E){return arguments.length?(A="function"==typeof E?E:o(+E),C(),k):A},k.radius=function(E){return arguments.length?(f="function"==typeof E?E:o(+E),C(),k):f},k.x=function(E){return arguments.length?(g=+E,k):g},k.y=function(E){return arguments.length?(m=+E,k):m},k},y.forceSimulation=function(f){var g,m=1,u=.001,w=1-Math.pow(u,1/300),c=0,A=.6,k=M.map(),C=e.timer(L),E=_.dispatch("tick","end");function L(){D(),E.call("tick",g),m<u&&(C.stop(),E.call("end",g))}function D(I){var P,j,V=f.length;void 0===I&&(I=1);for(var Z=0;Z<I;++Z)for(m+=(c-m)*w,k.each(function(Y){Y(m)}),P=0;P<V;++P)null==(j=f[P]).fx?j.x+=j.vx*=A:(j.x=j.fx,j.vx=0),null==j.fy?j.y+=j.vy*=A:(j.y=j.fy,j.vy=0);return g}function N(){for(var I,P=0,j=f.length;P<j;++P){if((I=f[P]).index=P,null!=I.fx&&(I.x=I.fx),null!=I.fy&&(I.y=I.fy),isNaN(I.x)||isNaN(I.y)){var V=10*Math.sqrt(P),Z=P*p;I.x=V*Math.cos(Z),I.y=V*Math.sin(Z)}(isNaN(I.vx)||isNaN(I.vy))&&(I.vx=I.vy=0)}}function F(I){return I.initialize&&I.initialize(f),I}return null==f&&(f=[]),N(),g={tick:D,restart:function(){return C.restart(L),g},stop:function(){return C.stop(),g},nodes:function(I){return arguments.length?(f=I,N(),k.each(F),g):f},alpha:function(I){return arguments.length?(m=+I,g):m},alphaMin:function(I){return arguments.length?(u=+I,g):u},alphaDecay:function(I){return arguments.length?(w=+I,g):+w},alphaTarget:function(I){return arguments.length?(c=+I,g):c},velocityDecay:function(I){return arguments.length?(A=1-I,g):1-A},force:function(I,P){return arguments.length>1?(null==P?k.remove(I):k.set(I,F(P)),g):k.get(I)},find:function(I,P,j){var V,Z,Y,ee,re,X=0,K=f.length;for(null==j?j=1/0:j*=j,X=0;X<K;++X)(Y=(V=I-(ee=f[X]).x)*V+(Z=P-ee.y)*Z)<j&&(re=ee,j=Y);return re},on:function(I,P){return arguments.length>1?(E.on(I,P),g):E.on(I)}}},y.forceX=function(f){var g,m,u,w=o(.1);function c(k){for(var C,E=0,L=g.length;E<L;++E)(C=g[E]).vx+=(u[E]-C.x)*m[E]*k}function A(){if(g){var k,C=g.length;for(m=new Array(C),u=new Array(C),k=0;k<C;++k)m[k]=isNaN(u[k]=+f(g[k],k,g))?0:+w(g[k],k,g)}}return"function"!=typeof f&&(f=o(null==f?0:+f)),c.initialize=function(k){g=k,A()},c.strength=function(k){return arguments.length?(w="function"==typeof k?k:o(+k),A(),c):w},c.x=function(k){return arguments.length?(f="function"==typeof k?k:o(+k),A(),c):f},c},y.forceY=function(f){var g,m,u,w=o(.1);function c(k){for(var C,E=0,L=g.length;E<L;++E)(C=g[E]).vy+=(u[E]-C.y)*m[E]*k}function A(){if(g){var k,C=g.length;for(m=new Array(C),u=new Array(C),k=0;k<C;++k)m[k]=isNaN(u[k]=+f(g[k],k,g))?0:+w(g[k],k,g)}}return"function"!=typeof f&&(f=o(null==f?0:+f)),c.initialize=function(k){g=k,A()},c.strength=function(k){return arguments.length?(w="function"==typeof k?k:o(+k),A(),c):w},c.y=function(k){return arguments.length?(f="function"==typeof k?k:o(+k),A(),c):f},c},Object.defineProperty(y,"__esModule",{value:!0})},"object"==typeof se&&void 0!==oe?x(se,b("d3-quadtree"),b("d3-collection"),b("d3-dispatch"),b("d3-timer")):x(y.d3=y.d3||{},y.d3,y.d3,y.d3,y.d3)},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(b,oe,se){var y;y=this,function(y){"use strict";function x(g,m){if((u=(g=m?g.toExponential(m-1):g.toExponential()).indexOf("e"))<0)return null;var u,w=g.slice(0,u);return[w.length>1?w[0]+w.slice(2):w,+g.slice(u+1)]}function M(g){return(g=x(Math.abs(g)))?g[1]:NaN}var _,e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function o(g){if(!(m=e.exec(g)))throw new Error("invalid format: "+g);var m;return new a({fill:m[1],align:m[2],sign:m[3],symbol:m[4],zero:m[5],width:m[6],comma:m[7],precision:m[8]&&m[8].slice(1),trim:m[9],type:m[10]})}function a(g){this.fill=void 0===g.fill?" ":g.fill+"",this.align=void 0===g.align?">":g.align+"",this.sign=void 0===g.sign?"-":g.sign+"",this.symbol=void 0===g.symbol?"":g.symbol+"",this.zero=!!g.zero,this.width=void 0===g.width?void 0:+g.width,this.comma=!!g.comma,this.precision=void 0===g.precision?void 0:+g.precision,this.trim=!!g.trim,this.type=void 0===g.type?"":g.type+""}function l(g,m){var u=x(g,m);if(!u)return g+"";var w=u[0],c=u[1];return c<0?"0."+new Array(-c).join("0")+w:w.length>c+1?w.slice(0,c+1)+"."+w.slice(c+1):w+new Array(c-w.length+2).join("0")}o.prototype=a.prototype,a.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var i={"%":function(g,m){return(100*g).toFixed(m)},b:function(g){return Math.round(g).toString(2)},c:function(g){return g+""},d:function(g){return Math.abs(g=Math.round(g))>=1e21?g.toLocaleString("en").replace(/,/g,""):g.toString(10)},e:function(g,m){return g.toExponential(m)},f:function(g,m){return g.toFixed(m)},g:function(g,m){return g.toPrecision(m)},o:function(g){return Math.round(g).toString(8)},p:function(g,m){return l(100*g,m)},r:l,s:function(g,m){var u=x(g,m);if(!u)return g+"";var w=u[0],c=u[1],A=c-(_=3*Math.max(-8,Math.min(8,Math.floor(c/3))))+1,k=w.length;return A===k?w:A>k?w+new Array(A-k+1).join("0"):A>0?w.slice(0,A)+"."+w.slice(A):"0."+new Array(1-A).join("0")+x(g,Math.max(0,m+A-1))[0]},X:function(g){return Math.round(g).toString(16).toUpperCase()},x:function(g){return Math.round(g).toString(16)}};function v(g){return g}var h,s=Array.prototype.map,d=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function p(g){var m,u,F,w=void 0===g.grouping||void 0===g.thousands?v:(m=s.call(g.grouping,Number),u=g.thousands+"",function(F,I){for(var P=F.length,j=[],V=0,Z=m[0],Y=0;P>0&&Z>0&&(Y+Z+1>I&&(Z=Math.max(1,I-Y)),j.push(F.substring(P-=Z,P+Z)),!((Y+=Z+1)>I));)Z=m[V=(V+1)%m.length];return j.reverse().join(u)}),c=void 0===g.currency?"":g.currency[0]+"",A=void 0===g.currency?"":g.currency[1]+"",k=void 0===g.decimal?".":g.decimal+"",C=void 0===g.numerals?v:(F=s.call(g.numerals,String),function(I){return I.replace(/[0-9]/g,function(P){return F[+P]})}),E=void 0===g.percent?"%":g.percent+"",L=void 0===g.minus?"-":g.minus+"",D=void 0===g.nan?"NaN":g.nan+"";function N(F){var I=(F=o(F)).fill,P=F.align,j=F.sign,V=F.symbol,Z=F.zero,Y=F.width,ee=F.comma,re=F.precision,X=F.trim,K=F.type;"n"===K?(ee=!0,K="g"):i[K]||(void 0===re&&(re=12),X=!0,K="g"),(Z||"0"===I&&"="===P)&&(Z=!0,I="0",P="=");var ie="$"===V?c:"#"===V&&/[boxX]/.test(K)?"0"+K.toLowerCase():"",q="$"===V?A:/[%p]/.test(K)?E:"",U=i[K],W=/[defgprs%]/.test(K);function ae(G){var te,ne,le,ue=ie,pe=q;if("c"===K)pe=U(G)+pe,G="";else{var de=(G=+G)<0||1/G<0;if(G=isNaN(G)?D:U(Math.abs(G),re),X&&(G=function(we){e:for(var De,Le=we.length,Ie=1,je=-1;Ie<Le;++Ie)switch(we[Ie]){case".":je=De=Ie;break;case"0":0===je&&(je=Ie),De=Ie;break;default:if(!+we[Ie])break e;je>0&&(je=0)}return je>0?we.slice(0,je)+we.slice(De+1):we}(G)),de&&0==+G&&"+"!==j&&(de=!1),ue=(de?"("===j?j:L:"-"===j||"("===j?"":j)+ue,pe=("s"===K?d[8+_/3]:"")+pe+(de&&"("===j?")":""),W)for(te=-1,ne=G.length;++te<ne;)if(48>(le=G.charCodeAt(te))||le>57){pe=(46===le?k+G.slice(te+1):G.slice(te))+pe,G=G.slice(0,te);break}}ee&&!Z&&(G=w(G,1/0));var _e=ue.length+G.length+pe.length,me=_e<Y?new Array(Y-_e+1).join(I):"";switch(ee&&Z&&(G=w(me+G,me.length?Y-pe.length:1/0),me=""),P){case"<":G=ue+G+pe+me;break;case"=":G=ue+me+G+pe;break;case"^":G=me.slice(0,_e=me.length>>1)+ue+G+pe+me.slice(_e);break;default:G=me+ue+G+pe}return C(G)}return re=void 0===re?6:/[gprs]/.test(K)?Math.max(1,Math.min(21,re)):Math.max(0,Math.min(20,re)),ae.toString=function(){return F+""},ae}return{format:N,formatPrefix:function(F,I){var P=N(((F=o(F)).type="f",F)),j=3*Math.max(-8,Math.min(8,Math.floor(M(I)/3))),V=Math.pow(10,-j),Z=d[8+j/3];return function(Y){return P(V*Y)+Z}}}}function f(g){return h=p(g),y.format=h.format,y.formatPrefix=h.formatPrefix,h}f({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),y.FormatSpecifier=a,y.formatDefaultLocale=f,y.formatLocale=p,y.formatSpecifier=o,y.precisionFixed=function(g){return Math.max(0,-M(Math.abs(g)))},y.precisionPrefix=function(g,m){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(M(m)/3)))-M(Math.abs(g)))},y.precisionRound=function(g,m){return g=Math.abs(g),m=Math.abs(m)-g,Math.max(0,M(m)-M(g))+1},Object.defineProperty(y,"__esModule",{value:!0})}("object"==typeof se&&void 0!==oe?se:(y="undefined"!=typeof globalThis?globalThis:y||self).d3=y.d3||{})},{}],113:[function(b,oe,se){var y,x;y=this,x=function(y,x,M){"use strict";var _=Math.abs,e=Math.atan,o=Math.atan2,a=Math.cos,l=Math.exp,i=Math.floor,v=Math.log,h=Math.max,s=Math.min,d=Math.pow,p=Math.round,f=Math.sign||function(Ye){return Ye>0?1:Ye<0?-1:0},g=Math.sin,m=Math.tan,u=1e-6,w=Math.PI,c=w/2,A=w/4,k=Math.SQRT1_2,C=P(2),E=P(w),L=2*w,D=180/w,N=w/180;function F(Ye){return Ye>1?c:Ye<-1?-c:Math.asin(Ye)}function I(Ye){return Ye>1?0:Ye<-1?w:Math.acos(Ye)}function P(Ye){return Ye>0?Math.sqrt(Ye):0}function j(Ye){return(l(Ye)-l(-Ye))/2}function V(Ye){return(l(Ye)+l(-Ye))/2}function Z(Ye){var Ke=m(Ye/2),ut=2*v(a(Ye/2))/(Ke*Ke);function gt(Mt,wt){var zt=a(Mt),cn=a(wt),hn=g(wt),ln=cn*zt,bn=-((1-ln?v((1+ln)/2)/(1-ln):-.5)+ut/(1+ln));return[bn*cn*g(Mt),bn*hn]}return gt.invert=function(Mt,wt){var zt,cn=P(Mt*Mt+wt*wt),hn=-Ye/2,ln=50;if(!cn)return[0,0];do{var bn=hn/2,En=a(bn),On=g(bn),Nn=On/En,Xn=-v(_(En));hn-=zt=(2/Nn*Xn-ut*Nn-cn)/(-Xn/(On*On)+1-ut/(2*En*En))*(En<0?.7:1)}while(_(zt)>u&&--ln>0);var Mr=g(hn);return[o(Mt*Mr,cn*a(hn)),F(wt*Mr/cn)]},gt}function Y(Ye,Ke){var Mt,ut=a(Ke),gt=(Mt=I(ut*a(Ye/=2)))?Mt/Math.sin(Mt):1;return[2*ut*g(Ye)*gt,g(Ke)*gt]}function ee(Ye){var Ke=g(Ye),ut=a(Ye),gt=Ye>=0?1:-1,Mt=m(gt*Ye),wt=(1+Ke-ut)/2;function zt(cn,hn){var ln=a(hn),bn=a(cn/=2);return[(1+ln)*g(cn),(gt*hn>-o(bn,Mt)-.001?0:10*-gt)+wt+g(hn)*ut-(1+ln)*Ke*bn]}return zt.invert=function(cn,hn){var ln=0,bn=0,En=50;do{var On=a(ln),Nn=g(ln),Xn=a(bn),Mr=g(bn),Or=1+Xn,ii=Or*Nn-cn,ci=wt+Mr*ut-Or*Ke*On-hn,vi=Or*On/2,ai=-Nn*Mr,Yi=Ke*Or*Nn/2,Ni=ut*Xn+Ke*On*Mr,Sa=ai*Yi-Ni*vi,Da=(ci*ai-ii*Ni)/Sa/2,Oa=(ii*Yi-ci*vi)/Sa;_(Oa)>2&&(Oa/=2),ln-=Da,bn-=Oa}while((_(Da)>u||_(Oa)>u)&&--En>0);return gt*bn>-o(a(ln),Mt)-.001?[2*ln,bn]:null},zt}function re(Ye,Ke){var ut=m(Ke/2),gt=P(1-ut*ut),Mt=1+gt*a(Ye/=2),wt=g(Ye)*gt/Mt,zt=ut/Mt,cn=wt*wt,hn=zt*zt;return[4/3*wt*(3+cn-3*hn),4/3*zt*(3+3*cn-hn)]}Y.invert=function(Ye,Ke){if(!(Ye*Ye+4*Ke*Ke>w*w+u)){var ut=Ye,gt=Ke,Mt=25;do{var wt,zt=g(ut),cn=g(ut/2),hn=a(ut/2),ln=g(gt),bn=a(gt),En=g(2*gt),On=ln*ln,Nn=bn*bn,Xn=cn*cn,Mr=1-Nn*hn*hn,Or=Mr?I(bn*hn)*P(wt=1/Mr):wt=0,ii=2*Or*bn*cn-Ye,ci=Or*ln-Ke,vi=wt*(Nn*Xn+Or*bn*hn*On),ai=wt*(.5*zt*En-2*Or*ln*cn),Yi=.25*wt*(En*cn-Or*ln*Nn*zt),Ni=wt*(On*hn+Or*Xn*bn),Sa=ai*Yi-Ni*vi;if(!Sa)break;var Da=(ci*ai-ii*Ni)/Sa,Oa=(ii*Yi-ci*vi)/Sa;ut-=Da,gt-=Oa}while((_(Da)>u||_(Oa)>u)&&--Mt>0);return[ut,gt]}},re.invert=function(Ye,Ke){if(Ke*=3/8,!(Ye*=3/8)&&_(Ke)>1)return null;var ln,ut=1+Ye*Ye+Ke*Ke,gt=P((ut-P(ut*ut-4*Ke*Ke))/2),Mt=F(gt)/3,wt=gt?(ln=_(Ke/gt),v(ln+P(ln*ln-1))/3):function(ln){return v(ln+P(ln*ln+1))}(_(Ye))/3,zt=a(Mt),cn=V(wt),hn=cn*cn-zt*zt;return[2*f(Ye)*o(j(wt)*zt,.25-hn),2*f(Ke)*o(cn*g(Mt),.25+hn)]};var X=P(8),K=v(1+C);function ie(Ye,Ke){var ut=_(Ke);return ut<A?[Ye,v(m(A+Ke/2))]:[Ye*a(ut)*(2*C-1/g(ut)),f(Ke)*(2*C*(ut-A)-v(m(ut/2)))]}function q(Ye){var Ke=2*w/Ye;function ut(gt,Mt){var wt=x.geoAzimuthalEquidistantRaw(gt,Mt);if(_(gt)>c){var zt=o(wt[1],wt[0]),cn=P(wt[0]*wt[0]+wt[1]*wt[1]),hn=Ke*p((zt-c)/Ke)+c,ln=o(g(zt-=hn),2-a(zt));zt=hn+F(w/cn*g(ln))-ln,wt[0]=cn*a(zt),wt[1]=cn*g(zt)}return wt}return ut.invert=function(gt,Mt){var wt=P(gt*gt+Mt*Mt);if(wt>c){var zt=o(Mt,gt),cn=Ke*p((zt-c)/Ke)+c,hn=zt>cn?-1:1,ln=wt*a(cn-zt),bn=1/m(hn*I((ln-w)/P(w*(w-2*ln)+wt*wt)));zt=cn+2*e((bn+hn*P(bn*bn-3))/3),gt=wt*a(zt),Mt=wt*g(zt)}return x.geoAzimuthalEquidistantRaw.invert(gt,Mt)},ut}function U(Ye,Ke){if(arguments.length<2&&(Ke=Ye),1===Ke)return x.geoAzimuthalEqualAreaRaw;if(Ke===1/0)return W;function ut(gt,Mt){var wt=x.geoAzimuthalEqualAreaRaw(gt/Ke,Mt);return wt[0]*=Ye,wt}return ut.invert=function(gt,Mt){var wt=x.geoAzimuthalEqualAreaRaw.invert(gt/Ye,Mt);return wt[0]*=Ke,wt},ut}function W(Ye,Ke){return[Ye*a(Ke)/a(Ke/=2),2*g(Ke)]}function ae(Ye,Ke,ut){var gt,Mt,wt,zt=100;ut=void 0===ut?0:+ut,Ke=+Ke;do{(Mt=Ye(ut))===(wt=Ye(ut+u))&&(wt=Mt+u),ut-=gt=-1*u*(Mt-Ke)/(Mt-wt)}while(zt-- >0&&_(gt)>u);return zt<0?NaN:ut}function G(Ye,Ke,ut){return void 0===Ke&&(Ke=40),void 0===ut&&(ut=1e-12),function(gt,Mt,wt,zt){var cn,hn,ln;wt=void 0===wt?0:+wt,zt=void 0===zt?0:+zt;for(var bn=0;bn<Ke;bn++){var En=Ye(wt,zt),On=En[0]-gt,Nn=En[1]-Mt;if(_(On)<ut&&_(Nn)<ut)break;var Xn=On*On+Nn*Nn;if(Xn>cn)wt-=hn/=2,zt-=ln/=2;else{cn=Xn;var Mr=(wt>0?-1:1)*ut,Or=(zt>0?-1:1)*ut,ii=Ye(wt+Mr,zt),ci=Ye(wt,zt+Or),vi=(ii[0]-En[0])/Mr,ai=(ii[1]-En[1])/Mr,Yi=(ci[0]-En[0])/Or,Ni=(ci[1]-En[1])/Or,Sa=Ni*vi-ai*Yi,Da=(_(Sa)<.5?.5:1)/Sa;if(wt+=hn=(Nn*Yi-On*Ni)*Da,zt+=ln=(On*ai-Nn*vi)*Da,_(hn)<ut&&_(ln)<ut)break}}return[wt,zt]}}function te(){var Ye=U(1.68,2);function Ke(ut,gt){if(ut+gt<-1.4){var Mt=(ut-gt+1.6)*(ut+gt+1.4)/8;ut+=Mt,gt-=.8*Mt*g(gt+w/2)}var wt=Ye(ut,gt),zt=(1-a(ut*gt))/12;return wt[1]<0&&(wt[0]*=1+zt),wt[1]>0&&(wt[1]*=1+zt/1.5*wt[0]*wt[0]),wt}return Ke.invert=G(Ke),Ke}function ne(Ye,Ke){var ut,gt=Ye*g(Ke),Mt=30;do{Ke-=ut=(Ke+g(Ke)-gt)/(1+a(Ke))}while(_(ut)>u&&--Mt>0);return Ke/2}function le(Ye,Ke,ut){function gt(Mt,wt){return[Ye*Mt*a(wt=ne(ut,wt)),Ke*g(wt)]}return gt.invert=function(Mt,wt){return wt=F(wt/Ke),[Mt/(Ye*a(wt)),F((2*wt+g(2*wt))/ut)]},gt}ie.invert=function(Ye,Ke){if((gt=_(Ke))<K)return[Ye,2*e(l(Ke))-c];var ut,gt,Mt=A,wt=25;do{var zt=a(Mt/2),cn=m(Mt/2);Mt-=ut=(X*(Mt-A)-v(cn)-gt)/(X-zt*zt/(2*cn))}while(_(ut)>1e-12&&--wt>0);return[Ye/(a(Mt)*(X-1/g(Mt))),f(Ke)*Mt]},W.invert=function(Ye,Ke){var ut=2*F(Ke/2);return[Ye*a(ut/2)/a(ut),ut]};var ue=le(C/c,C,w),pe=2.00276;function _e(Ye,Ke){var ut=ne(w,Ke);return[pe*Ye/(1/a(Ke)+1.11072/a(ut)),(Ke+C*g(ut))/pe]}function me(Ye){var Ke=0,ut=x.geoProjectionMutator(Ye),gt=ut(Ke);return gt.parallel=function(Mt){return arguments.length?ut(Ke=Mt*N):Ke*D},gt}function we(Ye,Ke){return[Ye*a(Ke),Ke]}function De(Ye){if(!Ye)return we;var Ke=1/m(Ye);function ut(gt,Mt){var wt=Ke+Ye-Mt,zt=wt&&gt*a(Mt)/wt;return[wt*g(zt),Ke-wt*a(zt)]}return ut.invert=function(gt,Mt){var wt=P(gt*gt+(Mt=Ke-Mt)*Mt),zt=Ke+Ye-wt;return[wt/a(zt)*o(gt,Mt),zt]},ut}function Le(Ye){function Ke(ut,gt){var Mt=c-gt,wt=Mt&&ut*Ye*g(Mt)/Mt;return[Mt*g(wt)/Ye,c-Mt*a(wt)]}return Ke.invert=function(ut,gt){var Mt=ut*Ye,wt=c-gt,zt=P(Mt*Mt+wt*wt),cn=o(Mt,wt);return[(zt?zt/g(zt):1)*cn/Ye,c-zt]},Ke}_e.invert=function(Ye,Ke){var ut,gt,Mt=pe*Ke,wt=Ke<0?-A:A,zt=25;do{gt=Mt-C*g(wt),wt-=ut=(g(2*wt)+2*wt-w*g(gt))/(2*a(2*wt)+2+w*a(gt)*C*a(wt))}while(_(ut)>u&&--zt>0);return gt=Mt-C*g(wt),[Ye*(1/a(gt)+1.11072/a(wt))/pe,gt]},we.invert=function(Ye,Ke){return[Ye/a(Ke),Ke]};var Ie=le(1,4/w,w);function je(Ye,Ke,ut,gt,Mt,wt){var zt,cn=a(wt);if(_(Ye)>1||_(wt)>1)zt=I(ut*Mt+Ke*gt*cn);else{var hn=g(Ye/2),ln=g(wt/2);zt=2*F(P(hn*hn+Ke*gt*ln*ln))}return _(zt)>u?[zt,o(gt*g(wt),Ke*Mt-ut*gt*cn)]:[0,0]}function ye(Ye,Ke,ut){return I((Ye*Ye+Ke*Ke-ut*ut)/(2*Ye*Ke))}function Me(Ye){return Ye-2*w*i((Ye+w)/(2*w))}function Oe(Ye,Ke,ut){for(var gt,Mt=[[Ye[0],Ye[1],g(Ye[1]),a(Ye[1])],[Ke[0],Ke[1],g(Ke[1]),a(Ke[1])],[ut[0],ut[1],g(ut[1]),a(ut[1])]],wt=Mt[2],zt=0;zt<3;++zt,wt=gt)wt.v=je((gt=Mt[zt])[1]-wt[1],wt[3],wt[2],gt[3],gt[2],gt[0]-wt[0]),wt.point=[0,0];var cn=ye(Mt[0].v[0],Mt[2].v[0],Mt[1].v[0]),hn=ye(Mt[0].v[0],Mt[1].v[0],Mt[2].v[0]),ln=w-cn;Mt[2].point[1]=0,Mt[0].point[0]=-(Mt[1].point[0]=Mt[0].v[0]/2);var bn=[Mt[2].point[0]=Mt[0].point[0]+Mt[2].v[0]*a(cn),2*(Mt[0].point[1]=Mt[1].point[1]=Mt[2].v[0]*g(cn))];return function(En,On){var Nn,Xn=g(On),Mr=a(On),Or=new Array(3);for(Nn=0;Nn<3;++Nn){var ii=Mt[Nn];if(Or[Nn]=je(On-ii[1],ii[3],ii[2],Mr,Xn,En-ii[0]),!Or[Nn][0])return ii.point;Or[Nn][1]=Me(Or[Nn][1]-ii.v[1])}var ci=bn.slice();for(Nn=0;Nn<3;++Nn){var ai=ye(Mt[Nn].v[0],Or[Nn][0],Or[2==Nn?0:Nn+1][0]);Or[Nn][1]<0&&(ai=-ai),Nn?1==Nn?(ci[0]-=Or[Nn][0]*a(ai=hn-ai),ci[1]-=Or[Nn][0]*g(ai)):(ci[0]+=Or[Nn][0]*a(ai=ln-ai),ci[1]+=Or[Nn][0]*g(ai)):(ci[0]+=Or[Nn][0]*a(ai),ci[1]-=Or[Nn][0]*g(ai))}return ci[0]/=3,ci[1]/=3,ci}}function Pe(Ye){return Ye[0]*=N,Ye[1]*=N,Ye}function Re(Ye,Ke,ut){var gt=x.geoCentroid({type:"MultiPoint",coordinates:[Ye,Ke,ut]}),Mt=[-gt[0],-gt[1]],wt=x.geoRotation(Mt),zt=Oe(Pe(wt(Ye)),Pe(wt(Ke)),Pe(wt(ut)));zt.invert=G(zt);var cn=x.geoProjection(zt).rotate(Mt),hn=cn.center;return delete cn.rotate,cn.center=function(ln){return arguments.length?hn(wt(ln)):wt.invert(hn())},cn.clipAngle(90)}function Ue(Ye,Ke){var ut=P(1-g(Ke));return[2/E*Ye*ut,E*(1-ut)]}function qe(Ye){var Ke=m(Ye);function ut(gt,Mt){return[gt,(gt?gt/g(gt):1)*(g(Mt)*a(gt)-Ke*a(Mt))]}return ut.invert=Ke?function(gt,Mt){gt&&(Mt*=g(gt)/gt);var wt=a(gt);return[gt,2*o(P(wt*wt+Ke*Ke-Mt*Mt)-wt,Ke-Mt)]}:function(gt,Mt){return[gt,F(gt?Mt*m(gt)/gt:Mt)]},ut}Ue.invert=function(Ye,Ke){var ut=(ut=Ke/E-1)*ut;return[ut>0?Ye*P(w/ut)/2:0,F(1-ut)]};var Xe=P(3);function lt(Ye,Ke){return[Xe*Ye*(2*a(2*Ke/3)-1)/E,Xe*E*g(Ke/3)]}function He(Ye){var Ke=a(Ye);function ut(gt,Mt){return[gt*Ke,g(Mt)/Ke]}return ut.invert=function(gt,Mt){return[gt/Ke,F(Mt*Ke)]},ut}function $e(Ye){var Ke=a(Ye);function ut(gt,Mt){return[gt*Ke,(1+Ke)*m(Mt/2)]}return ut.invert=function(gt,Mt){return[gt/Ke,2*e(Mt/(1+Ke))]},ut}function et(Ye,Ke){var ut=P(8/(3*w));return[ut*Ye*(1-_(Ke)/w),ut*Ke]}function nt(Ye,Ke){var ut=P(4-3*g(_(Ke)));return[2/P(6*w)*Ye*ut,f(Ke)*P(2*w/3)*(2-ut)]}function ct(Ye,Ke){var ut=P(w*(4+w));return[2/ut*Ye*(1+P(1-4*Ke*Ke/(w*w))),4/ut*Ke]}function bt(Ye,Ke){var ut=(2+c)*g(Ke);Ke/=2;for(var gt=0,Mt=1/0;gt<10&&_(Mt)>u;gt++){var wt=a(Ke);Ke-=Mt=(Ke+g(Ke)*(wt+2)-ut)/(2*wt*(1+wt))}return[2/P(w*(4+w))*Ye*(1+a(Ke)),2*P(w/(4+w))*g(Ke)]}function kt(Ye,Ke){return[Ye*(1+a(Ke))/P(2+w),2*Ke/P(2+w)]}function Bt(Ye,Ke){for(var ut=(1+c)*g(Ke),gt=0,Mt=1/0;gt<10&&_(Mt)>u;gt++)Ke-=Mt=(Ke+g(Ke)-ut)/(1+a(Ke));return ut=P(2+w),[Ye*(1+a(Ke))/ut,2*Ke/ut]}lt.invert=function(Ye,Ke){var ut=3*F(Ke/(Xe*E));return[E*Ye/(Xe*(2*a(2*ut/3)-1)),ut]},et.invert=function(Ye,Ke){var ut=P(8/(3*w)),gt=Ke/ut;return[Ye/(ut*(1-_(gt)/w)),gt]},nt.invert=function(Ye,Ke){var ut=2-_(Ke)/P(2*w/3);return[Ye*P(6*w)/(2*ut),f(Ke)*F((4-ut*ut)/3)]},ct.invert=function(Ye,Ke){var ut=P(w*(4+w))/2;return[Ye*ut/(1+P(1-Ke*Ke*(4+w)/(4*w))),Ke*ut/2]},bt.invert=function(Ye,Ke){var ut=Ke*P((4+w)/w)/2,gt=F(ut),Mt=a(gt);return[Ye/(2/P(w*(4+w))*(1+Mt)),F((gt+ut*(Mt+2))/(2+c))]},kt.invert=function(Ye,Ke){var ut=P(2+w),gt=Ke*ut/2;return[ut*Ye/(1+a(gt)),gt]},Bt.invert=function(Ye,Ke){var ut=1+c,gt=P(ut/2);return[2*Ye*gt/(1+a(Ke*=gt)),F((Ke+g(Ke))/ut)]};var Et=3+2*C;function ht(Ye,Ke){var ut=g(Ye/=2),gt=a(Ye),Mt=P(a(Ke)),wt=a(Ke/=2),zt=g(Ke)/(wt+C*gt*Mt),cn=P(2/(1+zt*zt)),hn=P((C*wt+(gt+ut)*Mt)/(C*wt+(gt-ut)*Mt));return[Et*(cn*(hn-1/hn)-2*v(hn)),Et*(cn*zt*(hn+1/hn)-2*e(zt))]}ht.invert=function(Ye,Ke){if(!(ut=re.invert(Ye/1.2,1.065*Ke)))return null;var ut,gt=ut[0],Mt=ut[1],wt=20;Ye/=Et,Ke/=Et;do{var zt=gt/2,cn=Mt/2,hn=g(zt),ln=a(zt),bn=g(cn),En=a(cn),On=a(Mt),Nn=P(On),Xn=bn/(En+C*ln*Nn),Mr=Xn*Xn,Or=P(2/(1+Mr)),ii=(C*En+(ln+hn)*Nn)/(C*En+(ln-hn)*Nn),ci=P(ii),vi=ci-1/ci,ai=ci+1/ci,Yi=Or*vi-2*v(ci)-Ye,Ni=Or*Xn*ai-2*e(Xn)-Ke,Sa=bn&&k*Nn*hn*Mr/bn,Da=(C*ln*En+Nn)/(2*(En+C*ln*Nn)*(En+C*ln*Nn)*Nn),Oa=-.5*Xn*Or*Or*Or,Co=Oa*Sa,Mo=Oa*Da,io=(io=2*En+C*Nn*(ln-hn))*io*ci,Ja=(C*ln*En*Nn+On)/io,Eo=-C*hn*bn/(Nn*io),to=vi*Co-2*Ja/ci+Or*(Ja+Ja/ii),ps=vi*Mo-2*Eo/ci+Or*(Eo+Eo/ii),gs=Xn*ai*Co-2*Sa/(1+Mr)+Or*ai*Sa+Or*Xn*(Ja-Ja/ii),ls=Xn*ai*Mo-2*Da/(1+Mr)+Or*ai*Da+Or*Xn*(Eo-Eo/ii),ws=ps*gs-ls*to;if(!ws)break;var ba=(Ni*ps-Yi*ls)/ws,_t=(Yi*gs-Ni*to)/ws;gt-=ba,Mt=h(-c,s(c,Mt-_t))}while((_(ba)>u||_(_t)>u)&&--wt>0);return _(_(Mt)-c)<u?[0,Mt]:wt&&[gt,Mt]};var at=a(35*N);function Ft(Ye,Ke){var ut=m(Ke/2);return[Ye*at*P(1-ut*ut),(1+at)*ut]}function en(Ye,Ke){var ut=Ke/2,gt=a(ut);return[2*Ye/E*a(Ke)*gt*gt,E*m(ut)]}function Qt(Ye){var Ke=1-Ye,ut=Mt(w,0)[0]-Mt(-w,0)[0],gt=P(2*(Mt(0,c)[1]-Mt(0,-c)[1])/ut);function Mt(cn,hn){var ln=a(hn),bn=g(hn);return[ln/(Ke+Ye*ln)*cn,Ke*hn+Ye*bn]}function wt(cn,hn){var ln=Mt(cn,hn);return[ln[0]*gt,ln[1]/gt]}function zt(cn){return wt(0,cn)[1]}return wt.invert=function(cn,hn){var ln=ae(zt,hn);return[cn/gt*(Ye+Ke/a(ln)),ln]},wt}function tn(Ye){return[Ye[0]/2,F(m(Ye[1]/2*N))*D]}function dn(Ye){return[2*Ye[0],2*e(g(Ye[1]*N))*D]}function Mn(Ye,Ke){var ut=2*w/Ke,gt=Ye*Ye;function Mt(wt,zt){var cn=x.geoAzimuthalEquidistantRaw(wt,zt),hn=cn[0],ln=cn[1],bn=hn*hn+ln*ln;if(bn>gt){var En=P(bn),On=o(ln,hn),Nn=ut*p(On/ut),Xn=On-Nn,Mr=Ye*a(Xn),Or=(Ye*g(Xn)-Xn*g(Mr))/(c-Mr),ii=sn(Xn,Or),ci=(w-Ye)/ke(ii,Mr,w);hn=En;var vi,ai=50;do{hn-=vi=(Ye+ke(ii,Mr,hn)*ci-En)/(ii(hn)*ci)}while(_(vi)>u&&--ai>0);ln=Xn*g(hn),hn<c&&(ln-=Or*(hn-c));var Yi=g(Nn),Ni=a(Nn);cn[0]=hn*Ni-ln*Yi,cn[1]=hn*Yi+ln*Ni}return cn}return Mt.invert=function(wt,zt){var cn=wt*wt+zt*zt;if(cn>gt){var hn=P(cn),ln=o(zt,wt),bn=ut*p(ln/ut),En=ln-bn;wt=hn*a(En),zt=hn*g(En);for(var On=wt-c,Nn=g(wt),Xn=zt/Nn,Mr=wt<c?1/0:0,Or=10;;){var ii=Ye*g(Xn),ci=Ye*a(Xn),vi=g(ci),ai=c-ci,Yi=(ii-Xn*vi)/ai,Ni=sn(Xn,Yi);if(_(Mr)<1e-12||!--Or)break;Xn-=Mr=(Xn*Nn-Yi*On-zt)/(Nn-2*On*(ai*(ci+Xn*ii*a(ci)-vi)-ii*(ii-Xn*vi))/(ai*ai))}wt=(hn=Ye+ke(Ni,ci,wt)*(w-Ye)/ke(Ni,ci,w))*a(ln=bn+Xn),zt=hn*g(ln)}return x.geoAzimuthalEquidistantRaw.invert(wt,zt)},Mt}function sn(Ye,Ke){return function(ut){var gt=Ye*a(ut);return ut<c&&(gt-=Ke),P(1+gt*gt)}}function ke(Ye,Ke,ut){for(var gt=(ut-Ke)/50,Mt=Ye(Ke)+Ye(ut),wt=1,zt=Ke;wt<50;++wt)Mt+=2*Ye(zt+=gt);return.5*Mt*gt}function Se(Ye,Ke,ut,gt,Mt,wt,zt,cn){function hn(ln,bn){if(!bn)return[Ye*ln/w,0];var En=bn*bn,On=Ye+En*(Ke+En*(ut+En*gt)),Nn=bn*(Mt-1+En*(wt-cn+En*zt)),Xn=(On*On+Nn*Nn)/(2*Nn),Mr=ln*F(On/Xn)/w;return[Xn*g(Mr),bn*(1+En*cn)+Xn*(1-a(Mr))]}return arguments.length<8&&(cn=0),hn.invert=function(ln,bn){var En,On,Nn=w*ln/Ye,Xn=bn,Mr=50;do{var Or=Xn*Xn,ii=Ye+Or*(Ke+Or*(ut+Or*gt)),ci=Xn*(Mt-1+Or*(wt-cn+Or*zt)),vi=ii*ii+ci*ci,ai=2*ci,Yi=vi/ai,Ni=Yi*Yi,Sa=F(ii/Yi)/w,Da=Nn*Sa,Oa=ii*ii,Co=(2*Ke+Or*(4*ut+6*Or*gt))*Xn,Mo=Mt+Or*(3*wt+5*Or*zt),io=(2*(ii*Co+ci*(Mo-1))*ai-vi*(2*(Mo-1)))/(ai*ai),Ja=a(Da),Eo=g(Da),to=Yi*Ja,ps=Yi*Eo,gs=Nn/w*(1/P(1-Oa/Ni))*(Co*Yi-ii*io)/Ni,ls=ps-ln,ws=Xn*(1+Or*cn)+Yi-to-bn,ba=io*Eo+to*gs,_t=to*Sa,jt=1+io-(io*Ja-ps*gs),_n=ps*Sa,Kt=ba*_n-jt*_t;if(!Kt)break;Nn-=En=(ws*ba-ls*jt)/Kt,Xn-=On=(ls*_n-ws*_t)/Kt}while((_(En)>u||_(On)>u)&&--Mr>0);return[Nn,Xn]},hn}Ft.invert=function(Ye,Ke){var ut=Ke/(1+at);return[Ye&&Ye/(at*P(1-ut*ut)),2*e(ut)]},en.invert=function(Ye,Ke){var ut=e(Ke/E),gt=a(ut),Mt=2*ut;return[Ye*E/2/(a(Mt)*gt*gt),Mt]};var Ce=Se(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),Ve=Se(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),Ge=Se(5/6*w,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Qe(Ye,Ke){var ut=Ye*Ye,gt=Ke*Ke;return[Ye*(1-.162388*gt)*(.87-952426e-9*ut*ut),Ke*(1+gt/12)]}Qe.invert=function(Ye,Ke){var ut,gt=Ye,Mt=Ke,wt=50;do{var zt=Mt*Mt;Mt-=ut=(Mt*(1+zt/12)-Ke)/(1+zt/4)}while(_(ut)>u&&--wt>0);wt=50,Ye/=1-.162388*zt;do{var cn=(cn=gt*gt)*cn;gt-=ut=(gt*(.87-952426e-9*cn)-Ye)/(.87-.00476213*cn)}while(_(ut)>u&&--wt>0);return[gt,Mt]};var ot=Se(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function it(Ye){var Ke=Ye(c,0)[0]-Ye(-c,0)[0];function ut(gt,Mt){var wt=gt>0?-.5:.5,zt=Ye(gt+wt*w,Mt);return zt[0]-=wt*Ke,zt}return Ye.invert&&(ut.invert=function(gt,Mt){var wt=gt>0?-.5:.5,zt=Ye.invert(gt+wt*Ke,Mt),cn=zt[0]-wt*w;return cn<-w?cn+=2*w:cn>w&&(cn-=2*w),zt[0]=cn,zt}),ut}function mt(Ye,Ke){var ut=f(Ye),gt=f(Ke),Mt=a(Ke),wt=a(Ye)*Mt,zt=g(Ye)*Mt,cn=g(gt*Ke);Ye=_(o(zt,cn)),Ke=F(wt),_(Ye-c)>u&&(Ye%=c);var hn=function(ln,bn){if(bn===c)return[0,0];var En,On,Nn=g(bn),Xn=Nn*Nn,Mr=Xn*Xn,Or=1+Mr,ii=1+3*Mr,ci=1-Mr,vi=F(1/P(Or)),ai=ci+Xn*Or*vi,Yi=(1-Nn)/ai,Ni=P(Yi),Sa=Yi*Or,Da=P(Sa),Oa=Ni*ci;if(0===ln)return[0,-(Oa+Xn*Da)];var Co,Mo=a(bn),io=1/Mo,Ja=2*Nn*Mo,Eo=(-ai*Mo-(-3*Xn+vi*ii)*Ja*(1-Nn))/(ai*ai),to=-io*Ja,ps=-io*(Xn*Or*Eo+Yi*ii*Ja),gs=-2*io*(ci*(.5*Eo/Ni)-2*Xn*Ni*Ja),ls=4*ln/w;if(ln>.222*w||bn<w/4&&ln>.175*w){if(En=(Oa+Xn*P(Sa*(1+Mr)-Oa*Oa))/(1+Mr),ln>w/4)return[En,En];var ws=En,ba=.5*En;En=.5*(ba+ws),On=50;do{var jt=En*(gs+to*P(Sa-En*En))+ps*F(En/Da)-ls;if(!jt)break;jt<0?ba=En:ws=En,En=.5*(ba+ws)}while(_(ws-ba)>u&&--On>0)}else{En=u,On=25;do{var _n=En*En,Kt=P(Sa-_n),wn=gs+to*Kt,Vn=En*wn+ps*F(En/Da)-ls;En-=Co=Kt?Vn/(wn+(ps-to*_n)/Kt):0}while(_(Co)>u&&--On>0)}return[En,-Oa-Xn*P(Sa-En*En)]}(Ye>w/4?c-Ye:Ye,Ke);return Ye>w/4&&(cn=hn[0],hn[0]=-hn[1],hn[1]=-cn),hn[0]*=ut,hn[1]*=-gt,hn}function xt(Ye,Ke){var ut,gt,Mt,wt,zt,cn;if(Ke<u)return[(wt=g(Ye))-(ut=Ke*(Ye-wt*(gt=a(Ye)))/4)*gt,gt+ut*wt,1-Ke*wt*wt/2,Ye-ut];if(Ke>=1-u)return ut=(1-Ke)/4,Mt=1/(gt=V(Ye)),[(wt=((cn=l(2*(cn=Ye)))-1)/(cn+1))+ut*((zt=gt*j(Ye))-Ye)/(gt*gt),Mt-ut*wt*Mt*(zt-Ye),Mt+ut*wt*Mt*(zt+Ye),2*e(l(Ye))-c+ut*(zt-Ye)/gt];var hn=[1,0,0,0,0,0,0,0,0],ln=[P(Ke),0,0,0,0,0,0,0,0],bn=0;for(gt=P(1-Ke),zt=1;_(ln[bn]/hn[bn])>u&&bn<8;)ut=hn[bn++],ln[bn]=(ut-gt)/2,hn[bn]=(ut+gt)/2,gt=P(ut*gt),zt*=2;Mt=zt*hn[bn]*Ye;do{Mt=(F(wt=ln[bn]*g(gt=Mt)/hn[bn])+Mt)/2}while(--bn);return[g(Mt),wt=a(Mt),wt/a(Mt-gt),Mt]}function Vt(Ye,Ke){if(!Ke)return Ye;if(1===Ke)return v(m(Ye/2+A));for(var ut=1,gt=P(1-Ke),Mt=P(Ke),wt=0;_(Mt)>u;wt++){if(Ye%w){var zt=e(gt*m(Ye)/ut);zt<0&&(zt+=w),Ye+=zt+~~(Ye/w)*w}else Ye+=Ye;Mt=(ut+gt)/2,gt=P(ut*gt),Mt=((ut=Mt)-gt)/2}return Ye/(d(2,wt)*ut)}function $t(Ye,Ke){var ln,bn,En,On,Nn,ut=(C-1)/(C+1),gt=P(1-ut*ut),Mt=Vt(c,gt*gt),wt=v(m(w/4+_(Ke)/2)),zt=l(-1*wt)/P(ut),cn=(ln=zt*a(-1*Ye),On=(bn=zt*g(-1*Ye))+1,[.5*((ln>=0?c:-c)-o(Nn=1-(En=ln*ln)-bn*bn,2*ln)),-.25*v(Nn*Nn+4*En)+.5*v(On*On+En)]),hn=function(ln,bn,En){var On=_(ln),Nn=j(_(bn));if(On){var Xn=1/g(On),Mr=1/(m(On)*m(On)),Or=-(Mr+En*(Nn*Nn*Xn*Xn)-1+En),ii=(-Or+P(Or*Or-(En-1)*Mr*4))/2;return[Vt(e(1/P(ii)),En)*f(ln),Vt(e(P((ii/Mr-1)/En)),1-En)*f(bn)]}return[0,Vt(e(Nn),1-En)*f(bn)]}(cn[0],cn[1],gt*gt);return[-hn[1],(Ke>=0?1:-1)*(.5*Mt-hn[0])]}function pt(Ye){var Ke=g(Ye),ut=a(Ye),gt=At(Ye);function Mt(wt,zt){var cn=gt(wt,zt);wt=cn[0];var hn=g(zt=cn[1]),ln=a(zt),bn=a(wt),En=I(Ke*hn+ut*ln*bn),On=g(En),Nn=_(On)>u?En/On:1;return[Nn*ut*g(wt),(_(wt)>c?Nn:-Nn)*(Ke*ln-ut*hn*bn)]}return gt.invert=At(-Ye),Mt.invert=function(wt,zt){var cn=P(wt*wt+zt*zt),hn=-g(cn),ln=a(cn),bn=cn*ln,En=-zt*hn,On=cn*Ke,Nn=P(bn*bn+En*En-On*On),Xn=o(bn*On+En*Nn,En*On-bn*Nn),Mr=(cn>c?-1:1)*o(wt*hn,cn*a(Xn)*ln+zt*g(Xn)*hn);return gt.invert(Mr,Xn)},Mt}function At(Ye){var Ke=g(Ye),ut=a(Ye);return function(gt,Mt){var wt=a(Mt),zt=a(gt)*wt,cn=g(gt)*wt,hn=g(Mt);return[o(cn,zt*ut-hn*Ke),F(hn*ut+zt*Ke)]}}mt.invert=function(Ye,Ke){_(Ye)>1&&(Ye=2*f(Ye)-Ye),_(Ke)>1&&(Ke=2*f(Ke)-Ke);var ut=f(Ye),gt=f(Ke),Mt=-ut*Ye,wt=-gt*Ke,zt=wt/Mt<1,cn=function(En,On){for(var Nn=0,Xn=1,Mr=.5,Or=50;;){var ii=Mr*Mr,ci=P(Mr),vi=F(1/P(1+ii)),ai=1-ii+Mr*(1+ii)*vi,Yi=(1-ci)/ai,Ni=P(Yi),Sa=Yi*(1+ii),Da=Ni*(1-ii),Oa=P(Sa-En*En),Co=On+Da+Mr*Oa;if(_(Xn-Nn)<1e-12||0==--Or||0===Co)break;Co>0?Nn=Mr:Xn=Mr,Mr=.5*(Nn+Xn)}if(!Or)return null;var Mo=F(ci),io=a(Mo),Ja=1/io,Eo=2*ci*io,to=(-ai*io-(-3*Mr+vi*(1+3*ii))*Eo*(1-ci))/(ai*ai);return[w/4*(En*(-2*Ja*(.5*to/Ni*(1-ii)-2*Mr*Ni*Eo)+-Ja*Eo*Oa)+-Ja*(Mr*(1+ii)*to+Yi*(1+3*ii)*Eo)*F(En/P(Sa))),Mo]}(zt?wt:Mt,zt?Mt:wt),hn=cn[0],ln=cn[1],bn=a(ln);return zt&&(hn=-c-hn),[ut*(o(g(hn)*bn,-g(ln))+w),gt*F(a(hn)*bn)]},$t.invert=function(Ye,Ke){var ut,gt,Mt,wt,zt,cn,Nn,Xn,Mr,hn=(C-1)/(C+1),ln=P(1-hn*hn),En=(gt=-Ye,Mt=ln*ln,(ut=.5*Vt(c,ln*ln)-Ke)?(wt=xt(ut,Mt),gt?(cn=(zt=xt(gt,1-Mt))[1]*zt[1]+Mt*wt[0]*wt[0]*zt[0]*zt[0],[[wt[0]*zt[2]/cn,wt[1]*wt[2]*zt[0]*zt[1]/cn],[wt[1]*zt[1]/cn,-wt[0]*wt[2]*zt[0]*zt[2]/cn],[wt[2]*zt[1]*zt[2]/cn,-Mt*wt[0]*wt[1]*zt[0]/cn]]):[[wt[0],0],[wt[1],0],[wt[2],0]]):[[0,(zt=xt(gt,1-Mt))[0]/zt[1]],[1/zt[1],0],[zt[2]/zt[1],0]]),On=[((Nn=En[0])[0]*(Xn=En[1])[0]+Nn[1]*Xn[1])/(Mr=Xn[0]*Xn[0]+Xn[1]*Xn[1]),(Nn[1]*Xn[0]-Nn[0]*Xn[1])/Mr];return[o(On[1],On[0])/-1,2*e(l(-.5*v(hn*On[0]*On[0]+hn*On[1]*On[1])))-c]};var Xt=F(1-1/3)*D,Ct=He(0);function Pt(Ye){var Ke=Xt*N,ut=Ue(w,Ke)[0]-Ue(-w,Ke)[0],gt=Ct(0,Ke)[1],Mt=Ue(0,Ke)[1],wt=E-Mt,zt=L/Ye,cn=4/L,hn=gt+wt*wt*4/L;function ln(bn,En){var On,Nn=_(En);if(Nn>Ke){var Xn=s(Ye-1,h(0,i((bn+w)/zt)));(On=Ue(bn+=w*(Ye-1)/Ye-Xn*zt,Nn))[0]=On[0]*L/ut-L*(Ye-1)/(2*Ye)+Xn*L/Ye,On[1]=gt+4*(On[1]-Mt)*wt/L,En<0&&(On[1]=-On[1])}else On=Ct(bn,En);return On[0]*=cn,On[1]/=hn,On}return ln.invert=function(bn,En){bn/=cn;var On=_(En*=hn);if(On>gt){var Nn=s(Ye-1,h(0,i((bn+w)/zt))),Xn=Ue.invert(bn=(bn+w*(Ye-1)/Ye-Nn*zt)*ut/L,.25*(On-gt)*L/wt+Mt);return Xn[0]-=w*(Ye-1)/Ye-Nn*zt,En<0&&(Xn[1]=-Xn[1]),Xn}return Ct.invert(bn,En)},ln}function Be(Ye,Ke){return[Ye,1&Ke?90-u:Xt]}function tt(Ye,Ke){return[Ye,1&Ke?-90+u:-Xt]}function dt(Ye){return[Ye[0]*(1-u),Ye[1]]}function Dt(Ye){var Ke,ut=1+Ye,gt=F(g(1/ut)),Mt=2*P(w/(Ke=w+4*gt*ut)),wt=.5*Mt*(ut+P(Ye*(2+Ye))),zt=Ye*Ye,cn=ut*ut;function hn(ln,bn){var En,On,Nn=1-g(bn);if(Nn&&Nn<2){var Xn,Mr=c-bn,Or=25;do{var ii=g(Mr),ci=a(Mr),vi=gt+o(ii,ut-ci),ai=1+cn-2*ut*ci;Mr-=Xn=(Mr-zt*gt-ut*ii+ai*vi-.5*Nn*Ke)/(2*ut*ii*vi)}while(_(Xn)>1e-12&&--Or>0);En=Mt*P(ai),On=ln*vi/w}else En=Mt*(Ye+Nn),On=ln*gt/w;return[En*g(On),wt-En*a(On)]}return hn.invert=function(ln,bn){var En=ln*ln+(bn-=wt)*bn,On=(1+cn-En/(Mt*Mt))/(2*ut),Nn=I(On),Xn=g(Nn),Mr=gt+o(Xn,ut-On);return[F(ln/P(En))*w/Mr,F(1-2*(Nn-zt*gt-ut*Xn+(1+cn-2*ut*On)*Mr)/Ke)]},hn}function Nt(Ye,Ke){return Ke>-.7109889596207567?((Ye=ue(Ye,Ke))[1]+=.0528035274542,Ye):we(Ye,Ke)}function Yt(Ye,Ke){return _(Ke)>.7109889596207567?((Ye=ue(Ye,Ke))[1]-=Ke>0?.0528035274542:-.0528035274542,Ye):we(Ye,Ke)}function fn(Ye,Ke,ut,gt){var Mt=P(4*w/(2*ut+(1+Ye-Ke/2)*g(2*ut)+(Ye+Ke)/2*g(4*ut)+Ke/2*g(6*ut))),wt=P(gt*g(ut)*P((1+Ye*a(2*ut)+Ke*a(4*ut))/(1+Ye+Ke))),zt=ut*hn(1);function cn(En){return P(1+Ye*a(2*En)+Ke*a(4*En))}function hn(En){var On=En*ut;return(2*On+(1+Ye-Ke/2)*g(2*On)+(Ye+Ke)/2*g(4*On)+Ke/2*g(6*On))/ut}function ln(En){return cn(En)*g(En)}var bn=function(En,On){var Nn=ut*ae(hn,zt*g(On)/ut,On/w);isNaN(Nn)&&(Nn=ut*f(On));var Xn=Mt*cn(Nn);return[Xn*wt*En/w*a(Nn),Xn/wt*g(Nn)]};return bn.invert=function(En,On){var Nn=ae(ln,On*wt/Mt);return[En*w/(a(Nn)*Mt*wt*cn(Nn)),F(ut*hn(Nn/ut)/zt)]},0===ut&&(Mt=P(gt/w),(bn=function(En,On){return[En*Mt,g(On)/Mt]}).invert=function(En,On){return[En/Mt,F(On*Mt)]}),bn}function In(Ye,Ke,ut){function gt(Nn){return Ye+(1-Ye)*d(1-d(Nn,Ke),1/Ke)}function Mt(Nn){return function(Ye,Ke,ut,gt,Mt){void 0===gt&&(gt=1e-8),void 0===Mt&&(Mt=20);var wt=Ye(Ke),zt=Ye(.5*(Ke+ut)),cn=Ye(ut);return function hn(ln,bn,En,On,Nn,Xn,Mr,Or,ii,ci,vi){if(vi.nanEncountered)return NaN;var ai,Yi,Ni,Sa,Da,Oa,Co,Mo,io,Ja;if(Yi=ln(bn+.25*(ai=En-bn)),Ni=ln(En-.25*ai),isNaN(Yi))vi.nanEncountered=!0;else{if(!isNaN(Ni))return Ja=((Oa=(Sa=ai*(On+4*Yi+Nn)/12)+(Da=ai*(Nn+4*Ni+Xn)/12))-Mr)/15,ci>ii?(vi.maxDepthCount++,Oa+Ja):Math.abs(Ja)<Or?Oa+Ja:(Mo=hn(ln,bn,Co=bn+.5*ai,On,Yi,Nn,Sa,.5*Or,ii,ci+1,vi),isNaN(Mo)?(vi.nanEncountered=!0,NaN):(io=hn(ln,Co,En,Nn,Ni,Xn,Da,.5*Or,ii,ci+1,vi),isNaN(io)?(vi.nanEncountered=!0,NaN):Mo+io));vi.nanEncountered=!0}}(Ye,Ke,ut,wt,zt,cn,(wt+4*zt+cn)*(ut-Ke)/6,gt,Mt,1,{maxDepthCount:0,nanEncountered:!1})}(gt,0,Nn,1e-4)}for(var wt=1/Mt(1),cn=(1+1e-8)*wt,hn=[],ln=0;ln<=1e3;ln++)hn.push(Mt(ln/1e3)*cn);function bn(Nn){var Xn=0,Mr=1e3,Or=500;do{hn[Or]>Nn?Mr=Or:Xn=Or,Or=Xn+Mr>>1}while(Or>Xn);var ii=hn[Or+1]-hn[Or];return ii&&(ii=(Nn-hn[Or+1])/ii),(Or+1+ii)/1e3}var En=2*bn(1)/w*wt/ut,On=function(Nn,Xn){var Mr=bn(_(g(Xn))),Or=gt(Mr)*Nn;return Mr/=En,[Or,Xn>=0?Mr:-Mr]};return On.invert=function(Nn,Xn){var Mr;return _(Xn*=En)<1&&(Mr=f(Xn)*F(Mt(_(Xn))*wt)),[Nn/gt(_(Xn)),Mr]},On}function Dn(Ye,Ke){return _(Ye[0]-Ke[0])<u&&_(Ye[1]-Ke[1])<u}function kn(Ye,Ke){for(var ut,gt,Mt,wt=-1,zt=Ye.length,cn=Ye[0],hn=[];++wt<zt;){gt=((ut=Ye[wt])[0]-cn[0])/Ke,Mt=(ut[1]-cn[1])/Ke;for(var ln=0;ln<Ke;++ln)hn.push([cn[0]+ln*gt,cn[1]+ln*Mt]);cn=ut}return hn.push(ut),hn}function rn(Ye){var Ke,ut,Mt,wt,cn,hn=[],ln=Ye[0].length;for(cn=0;cn<ln;++cn)ut=(Ke=Ye[0][cn])[0][0],hn.push(kn([[ut+u,Ke[0][1]+u],[ut+u,(Mt=Ke[1][1])-u],[(wt=Ke[2][0])-u,Mt-u],[wt-u,Ke[2][1]+u]],30));for(cn=Ye[1].length-1;cn>=0;--cn)ut=(Ke=Ye[1][cn])[0][0],hn.push(kn([[(wt=Ke[2][0])-u,Ke[2][1]-u],[wt-u,(Mt=Ke[1][1])+u],[ut+u,Mt+u],[ut+u,Ke[0][1]-u]],30));return{type:"Polygon",coordinates:[M.merge(hn)]}}function pn(Ye,Ke,ut){var gt,Mt;function wt(hn,ln){for(var bn=ln<0?-1:1,En=Ke[+(ln<0)],On=0,Nn=En.length-1;On<Nn&&hn>En[On][2][0];++On);var Xn=Ye(hn-En[On][1][0],ln);return Xn[0]+=Ye(En[On][1][0],bn*ln>bn*En[On][0][1]?En[On][0][1]:ln)[0],Xn}ut?wt.invert=ut(wt):Ye.invert&&(wt.invert=function(hn,ln){for(var bn=Mt[+(ln<0)],En=Ke[+(ln<0)],On=0,Nn=bn.length;On<Nn;++On){var Xn=bn[On];if(Xn[0][0]<=hn&&hn<Xn[1][0]&&Xn[0][1]<=ln&&ln<Xn[1][1]){var Mr=Ye.invert(hn-Ye(En[On][1][0],0)[0],ln);return Mr[0]+=En[On][1][0],Dn(wt(Mr[0],Mr[1]),[hn,ln])?Mr:null}}});var zt=x.geoProjection(wt),cn=zt.stream;return zt.stream=function(hn){var ln=zt.rotate(),bn=cn(hn),En=(zt.rotate([0,0]),cn(hn));return zt.rotate(ln),bn.sphere=function(){x.geoStream(gt,En)},bn},zt.lobes=function(hn){return arguments.length?(gt=rn(hn),Ke=hn.map(function(ln){return ln.map(function(bn){return[[bn[0][0]*N,bn[0][1]*N],[bn[1][0]*N,bn[1][1]*N],[bn[2][0]*N,bn[2][1]*N]]})}),Mt=Ke.map(function(ln){return ln.map(function(bn){var En,On=Ye(bn[0][0],bn[0][1])[0],Nn=Ye(bn[2][0],bn[2][1])[0],Xn=Ye(bn[1][0],bn[0][1])[1],Mr=Ye(bn[1][0],bn[1][1])[1];return Xn>Mr&&(En=Xn,Xn=Mr,Mr=En),[[On,Xn],[Nn,Mr]]})}),zt):Ke.map(function(ln){return ln.map(function(bn){return[[bn[0][0]*D,bn[0][1]*D],[bn[1][0]*D,bn[1][1]*D],[bn[2][0]*D,bn[2][1]*D]]})})},null!=Ke&&zt.lobes(Ke),zt}Nt.invert=function(Ye,Ke){return Ke>-.7109889596207567?ue.invert(Ye,Ke-.0528035274542):we.invert(Ye,Ke)},Yt.invert=function(Ye,Ke){return _(Ke)>.7109889596207567?ue.invert(Ye,Ke+(Ke>0?.0528035274542:-.0528035274542)):we.invert(Ye,Ke)};var gn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Pn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],jn=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Kn=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],rr=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],lr=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function kr(Ye,Ke){return[3/L*Ye*P(w*w/3-Ke*Ke),Ke]}function Xr(Ye){function Ke(ut,gt){if(_(_(gt)-c)<u)return[0,gt<0?-2:2];var Mt=g(gt),wt=d((1+Mt)/(1-Mt),Ye/2),zt=.5*(wt+1/wt)+a(ut*=Ye);return[2*g(ut)/zt,(wt-1/wt)/zt]}return Ke.invert=function(ut,gt){var Mt=_(gt);if(_(Mt-2)<u)return ut?null:[0,f(gt)*c];if(Mt>2)return null;var wt=(ut/=2)*ut,zt=(gt/=2)*gt,cn=2*gt/(1+wt+zt);return cn=d((1+cn)/(1-cn),1/Ye),[o(2*ut,1-wt-zt)/Ye,F((cn-1)/(cn+1))]},Ke}kr.invert=function(Ye,Ke){return[L/3*Ye/P(w*w/3-Ke*Ke),Ke]};var sr=w/C;function oi(Ye,Ke){return[Ye*(1+P(a(Ke)))/2,Ke/(a(Ke/2)*a(Ye/6))]}function Gr(Ye,Ke){var ut=Ye*Ye,gt=Ke*Ke;return[Ye*(.975534+gt*(-.0143059*ut-.119161+-.0547009*gt)),Ke*(1.00384+ut*(.0802894+-.02855*gt+199025e-9*ut)+gt*(.0998909+-.0491032*gt))]}function Lr(Ye,Ke){return[g(Ye)/a(Ke),m(Ke)*a(Ye)]}function Jr(Ye){var Ke=a(Ye),ut=m(A+Ye/2);function gt(Mt,wt){var zt=wt-Ye,cn=_(zt)<u?Mt*Ke:_(cn=A+wt/2)<u||_(_(cn)-c)<u?0:Mt*zt/v(m(cn)/ut);return[cn,zt]}return gt.invert=function(Mt,wt){var zt,cn=wt+Ye;return[_(wt)<u?Mt/Ke:_(zt=A+cn/2)<u||_(_(zt)-c)<u?0:Mt*v(m(zt)/ut)/wt,cn]},gt}function Mi(Ye,Ke){return[Ye,1.25*v(m(A+.4*Ke))]}function Jn(Ye){var Ke=Ye.length-1;function ut(gt,Mt){for(var wt,zt=a(Mt),cn=2/(1+zt*a(gt)),hn=cn*zt*g(gt),ln=cn*g(Mt),bn=Ke,En=Ye[bn],On=En[0],Nn=En[1];--bn>=0;)On=(En=Ye[bn])[0]+hn*(wt=On)-ln*Nn,Nn=En[1]+hn*Nn+ln*wt;return[On=hn*(wt=On)-ln*Nn,Nn=hn*Nn+ln*wt]}return ut.invert=function(gt,Mt){var wt=20,zt=gt,cn=Mt;do{for(var hn,ln=Ke,bn=Ye[ln],En=bn[0],On=bn[1],Nn=0,Xn=0;--ln>=0;)Nn=En+zt*(hn=Nn)-cn*Xn,Xn=On+zt*Xn+cn*hn,En=(bn=Ye[ln])[0]+zt*(hn=En)-cn*On,On=bn[1]+zt*On+cn*hn;var Mr,Or,ii=(Nn=En+zt*(hn=Nn)-cn*Xn)*Nn+(Xn=On+zt*Xn+cn*hn)*Xn;zt-=Mr=((En=zt*(hn=En)-cn*On-gt)*Nn+(On=zt*On+cn*hn-Mt)*Xn)/ii,cn-=Or=(On*Nn-En*Xn)/ii}while(_(Mr)+_(Or)>1e-12&&--wt>0);if(wt){var ci=P(zt*zt+cn*cn),vi=2*e(.5*ci),ai=g(vi);return[o(zt*ai,ci*a(vi)),ci?F(cn*ai/ci):0]}},ut}oi.invert=function(Ye,Ke){var ut=_(Ye),gt=_(Ke),Mt=u,wt=c;gt<sr?wt*=gt/sr:Mt+=6*I(sr/gt);for(var zt=0;zt<25;zt++){var cn=g(wt),hn=P(a(wt)),ln=g(wt/2),bn=a(wt/2),En=g(Mt/6),On=a(Mt/6),Nn=.5*Mt*(1+hn)-ut,Xn=wt/(bn*On)-gt,Mr=hn?-.25*Mt*cn/hn:0,Or=.5*(1+hn),ii=(1+.5*wt*ln/bn)/(bn*On),ci=wt/bn*(En/6)/(On*On),vi=Mr*ci-ii*Or,ai=(Nn*ci-Xn*Or)/vi,Yi=(Xn*Mr-Nn*ii)/vi;if(wt-=ai,Mt-=Yi,_(ai)<u&&_(Yi)<u)break}return[Ye<0?-Mt:Mt,Ke<0?-wt:wt]},Gr.invert=function(Ye,Ke){var ut=f(Ye)*w,gt=Ke/2,Mt=50;do{var wt=ut*ut,zt=gt*gt,cn=ut*gt,hn=ut*(.975534+zt*(-.0143059*wt-.119161+-.0547009*zt))-Ye,ln=gt*(1.00384+wt*(.0802894+-.02855*zt+199025e-9*wt)+zt*(.0998909+-.0491032*zt))-Ke,bn=.975534-zt*(.119161+3*wt*.0143059+.0547009*zt),En=-cn*(.238322+.2188036*zt+.0286118*wt),On=cn*(.1605788+7961e-7*wt+-.0571*zt),Nn=1.00384+wt*(.0802894+199025e-9*wt)+zt*(3*(.0998909-.02855*wt)-.245516*zt),Xn=En*On-Nn*bn,Mr=(ln*En-hn*Nn)/Xn,Or=(hn*On-ln*bn)/Xn;ut-=Mr,gt-=Or}while((_(Mr)>u||_(Or)>u)&&--Mt>0);return Mt&&[ut,gt]},Lr.invert=function(Ye,Ke){var ut=Ye*Ye,gt=Ke*Ke+1,Mt=ut+gt,wt=Ye?k*P((Mt-P(Mt*Mt-4*ut))/ut):1/P(gt);return[F(Ye*wt),f(Ke)*I(wt)]},Mi.invert=function(Ye,Ke){return[Ye,2.5*e(l(.8*Ke))-.625*w]};var br=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Fr=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],cr=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],Qr=[[.9245,0],[0,0],[.01943,0]],ui=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Nr(Ye,Ke){var ut=x.geoProjection(Jn(Ye)).rotate(Ke).clipAngle(90),gt=x.geoRotation(Ke),Mt=ut.center;return delete ut.rotate,ut.center=function(wt){return arguments.length?Mt(gt(wt)):gt.invert(Mt())},ut}var Hr=P(6),wr=P(7);function un(Ye,Ke){var ut=F(7*g(Ke)/(3*Hr));return[Hr*Ye*(2*a(2*ut/3)-1)/wr,9*g(ut/3)/wr]}function er(Ye,Ke){for(var ut,gt=(1+k)*g(Ke),Mt=Ke,wt=0;wt<25&&(Mt-=ut=(g(Mt/2)+g(Mt)-gt)/(.5*a(Mt/2)+a(Mt)),!(_(ut)<u));wt++);return[Ye*(1+2*a(Mt)/a(Mt/2))/(3*C),2*P(3)*g(Mt/2)/P(2+C)]}function Ut(Ye,Ke){for(var ut,gt=P(6/(4+w)),Mt=(1+w/4)*g(Ke),wt=Ke/2,zt=0;zt<25&&(wt-=ut=(wt/2+g(wt)-Mt)/(.5+a(wt)),!(_(ut)<u));zt++);return[gt*(.5+a(wt))*Ye/1.5,gt*wt]}function vn(Ye,Ke){var ut=Ke*Ke,gt=ut*ut,Mt=ut*gt;return[Ye*(.84719-.13063*ut+Mt*Mt*(.05494*ut-.04515-.02326*gt+.00331*Mt)),Ke*(1.01183+gt*gt*(.01926*ut-.02625-.00396*gt))]}function Tn(Ye,Ke){return[Ye*(1+a(Ke))/2,2*(Ke-m(Ke/2))]}un.invert=function(Ye,Ke){var ut=3*F(Ke*wr/9);return[Ye*wr/(Hr*(2*a(2*ut/3)-1)),F(3*g(ut)*Hr/7)]},er.invert=function(Ye,Ke){var ut=Ke*P(2+C)/(2*P(3)),gt=2*F(ut);return[3*C*Ye/(1+2*a(gt)/a(gt/2)),F((ut+g(gt))/(1+k))]},Ut.invert=function(Ye,Ke){var ut=P(6/(4+w)),gt=Ke/ut;return _(_(gt)-c)<u&&(gt=gt<0?-c:c),[1.5*Ye/(ut*(.5+a(gt))),F((gt/2+g(gt))/(1+w/4))]},vn.invert=function(Ye,Ke){var ut,gt,Mt,wt,zt=Ke,cn=25;do{zt-=ut=(zt*(1.01183+(Mt=(gt=zt*zt)*gt)*Mt*(.01926*gt-.02625-.00396*Mt))-Ke)/(1.01183+Mt*Mt*(.21186*gt-.23625+-.05148*Mt))}while(_(ut)>1e-12&&--cn>0);return[Ye/(.84719-.13063*(gt=zt*zt)+(wt=gt*(Mt=gt*gt))*wt*(.05494*gt-.04515-.02326*Mt+.00331*wt)),zt]},Tn.invert=function(Ye,Ke){for(var ut=Ke/2,gt=0,Mt=1/0;gt<10&&_(Mt)>u;++gt){var wt=a(Ke/2);Ke-=Mt=(Ke-m(Ke/2)-ut)/(1-.5/(wt*wt))}return[2*Ye/(1+a(Ke)),Ke]};var Qn=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Zn(Ye,Ke){var ut=g(Ke),gt=a(Ke),Mt=f(Ye);if(0===Ye||_(Ke)===c)return[0,Ke];if(0===Ke)return[Ye,0];if(_(Ye)===c)return[Ye*gt,c*ut];var wt=w/(2*Ye)-2*Ye/w,zt=2*Ke/w,cn=(1-zt*zt)/(ut-zt),hn=wt*wt,ln=cn*cn,bn=1+hn/ln,En=1+ln/hn,On=(wt*ut/cn-wt/2)/bn,Nn=(ln*ut/hn+cn/2)/En,Xn=Nn*Nn-(ln*ut*ut/hn+cn*ut-1)/En;return[c*(On+P(On*On+gt*gt/bn)*Mt),c*(Nn+P(Xn<0?0:Xn)*f(-Ke*wt)*Mt)]}function $n(Ye,Ke){var ut=Ke*Ke;return[Ye,Ke*(1.0148+ut*ut*(.23185+ut*(.02406*ut-.14499)))]}function Hn(Ye,Ke){if(_(Ke)<u)return[Ye,0];var ut=m(Ke),gt=Ye*g(Ke);return[g(gt)/ut,Ke+(1-a(gt))/ut]}function Fn(Ye,Ke){return[Ye[0]*Ke[0]+Ye[1]*Ke[3],Ye[0]*Ke[1]+Ye[1]*Ke[4],Ye[0]*Ke[2]+Ye[1]*Ke[5]+Ye[2],Ye[3]*Ke[0]+Ye[4]*Ke[3],Ye[3]*Ke[1]+Ye[4]*Ke[4],Ye[3]*Ke[2]+Ye[4]*Ke[5]+Ye[5]]}function zn(Ye,Ke){return[Ye[0]-Ke[0],Ye[1]-Ke[1]]}function Yn(Ye){return P(Ye[0]*Ye[0]+Ye[1]*Ye[1])}function nr(Ye,Ke,ut){function gt(zt,cn){var hn,ln=Ke(zt,cn),bn=ln.project([zt*D,cn*D]);return(hn=ln.transform)?[hn[0]*bn[0]+hn[1]*bn[1]+hn[2],-(hn[3]*bn[0]+hn[4]*bn[1]+hn[5])]:(bn[1]=-bn[1],bn)}(function zt(cn,hn){if(cn.edges=function(Xn){for(var Mr=Xn.length,Or=[],ii=Xn[Mr-1],ci=0;ci<Mr;++ci)Or.push([ii,ii=Xn[ci]]);return Or}(cn.face),hn.face){var ln=cn.shared=function(Xn,Mr){for(var Or,ii,ci=Xn.length,vi=null,ai=0;ai<ci;++ai){Or=Xn[ai];for(var Yi=Mr.length;--Yi>=0;)if(Or[0]===(ii=Mr[Yi])[0]&&Or[1]===ii[1]){if(vi)return[vi,Or];vi=Or}}}(cn.face,hn.face),bn=function(Ye,Ke){var zt,cn,ut=zn(Ye[1],Ye[0]),gt=zn(Ke[1],Ke[0]),Mt=o((zt=ut)[0]*(cn=gt)[1]-zt[1]*cn[0],zt[0]*cn[0]+zt[1]*cn[1]),wt=Yn(ut)/Yn(gt);return Fn([1,0,Ye[0][0],0,1,Ye[0][1]],Fn([wt,0,0,0,wt,0],Fn([a(Mt),g(Mt),0,-g(Mt),a(Mt),0],[1,0,-Ke[0][0],0,1,-Ke[0][1]])))}(ln.map(hn.project),ln.map(cn.project));cn.transform=hn.transform?Fn(hn.transform,bn):bn;for(var En=hn.edges,On=0,Nn=En.length;On<Nn;++On)hr(ln[0],En[On][1])&&hr(ln[1],En[On][0])&&(En[On]=cn),hr(ln[0],En[On][0])&&hr(ln[1],En[On][1])&&(En[On]=cn);for(On=0,Nn=(En=cn.edges).length;On<Nn;++On)hr(ln[0],En[On][0])&&hr(ln[1],En[On][1])&&(En[On]=hn),hr(ln[0],En[On][1])&&hr(ln[1],En[On][0])&&(En[On]=hn)}else cn.transform=hn.transform;return cn.children&&cn.children.forEach(function(Xn){zt(Xn,cn)}),cn})(Ye,{transform:null}),_r(Ye)&&(gt.invert=function(zt,cn){var hn=function ln(bn,En){var vi,ai,On=bn.project.invert,Nn=bn.transform,Xn=En;if(Nn&&(Xn=[(Nn=[(ai=1/((vi=Nn)[0]*vi[4]-vi[1]*vi[3]))*vi[4],-ai*vi[1],ai*(vi[1]*vi[5]-vi[2]*vi[4]),-ai*vi[3],ai*vi[0],ai*(vi[2]*vi[3]-vi[0]*vi[5])])[0]*Xn[0]+Nn[1]*Xn[1]+Nn[2],Nn[3]*Xn[0]+Nn[4]*Xn[1]+Nn[5]]),On&&bn===function(vi){return Ke(vi[0]*N,vi[1]*N)}(Mr=On(Xn)))return Mr;for(var Mr,Or=bn.children,ii=0,ci=Or&&Or.length;ii<ci;++ii)if(Mr=ln(Or[ii],En))return Mr}(Ye,[zt,-cn]);return hn&&(hn[0]*=N,hn[1]*=N,hn)});var Mt=x.geoProjection(gt),wt=Mt.stream;return Mt.stream=function(zt){var cn=Mt.rotate(),hn=wt(zt),ln=(Mt.rotate([0,0]),wt(zt));return Mt.rotate(cn),hn.sphere=function(){ln.polygonStart(),ln.lineStart(),function bn(En,On,Nn){var Xn,Mr,Or=On.edges,ii=Or.length,ci={type:"MultiPoint",coordinates:On.face},vi=On.face.filter(function(Co){return 90!==_(Co[1])}),ai=x.geoBounds({type:"MultiPoint",coordinates:vi}),Yi=!1,Ni=-1,Sa=ai[1][0]-ai[0][0],Da=180===Sa||360===Sa?[(ai[0][0]+ai[1][0])/2,(ai[0][1]+ai[1][1])/2]:x.geoCentroid(ci);if(Nn)for(;++Ni<ii&&Or[Ni]!==Nn;);++Ni;for(var Oa=0;Oa<ii;++Oa)Mr=Or[(Oa+Ni)%ii],Array.isArray(Mr)?(Yi||(En.point((Xn=x.geoInterpolate(Mr[0],Da)(u))[0],Xn[1]),Yi=!0),En.point((Xn=x.geoInterpolate(Mr[1],Da)(u))[0],Xn[1])):(Yi=!1,Mr!==Nn&&bn(En,Mr,On))}(ln,Ye),ln.lineEnd(),ln.polygonEnd()},hn},Mt.angle(null==ut?-30:ut*D)}function hr(Ye,Ke){return Ye&&Ke&&Ye[0]===Ke[0]&&Ye[1]===Ke[1]}function _r(Ye){return Ye.project.invert||Ye.children&&Ye.children.some(_r)}Zn.invert=function(Ye,Ke){var ut=(Ye/=c)*Ye,gt=ut+(Ke/=c)*Ke,Mt=w*w;return[Ye?(gt-1+P((1-gt)*(1-gt)+4*ut))/(2*Ye)*c:0,ae(function(wt){return gt*(w*g(wt)-2*wt)*w+4*wt*wt*(Ke-g(wt))+2*w*wt-Mt*Ke},0)]},$n.invert=function(Ye,Ke){Ke>1.790857183?Ke=1.790857183:Ke<-1.790857183&&(Ke=-1.790857183);var ut,gt=Ke;do{var Mt=gt*gt;gt-=ut=(gt*(1.0148+Mt*Mt*(.23185+Mt*(.02406*Mt-.14499)))-Ke)/(1.0148+Mt*Mt*(5*.23185+Mt*(.21654*Mt-1.01493)))}while(_(ut)>u);return[Ye,gt]},Hn.invert=function(Ye,Ke){if(_(Ke)<u)return[Ye,0];var ut,gt=Ye*Ye+Ke*Ke,Mt=.5*Ke,wt=10;do{var zt=m(Mt),cn=1/a(Mt),hn=gt-2*Ke*Mt+Mt*Mt;Mt-=ut=(zt*hn+2*(Mt-Ke))/(2+hn*cn*cn+2*(Mt-Ke)*zt)}while(_(ut)>u&&--wt>0);return zt=m(Mt),[(_(Ke)<_(Mt+1/zt)?F(Ye*zt):f(Ke)*f(Ye)*(I(_(Ye*zt))+c))/g(Mt),Mt]};var Tr=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],jr=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Ye){return Ye.map(function(Ke){return Tr[Ke]})}),Er=2/P(3);function Yr(Ye,Ke){var ut=Ue(Ye,Ke);return[ut[0]*Er,ut[1]]}function ei(Ye,Ke){for(var ut=0,gt=Ye.length,Mt=0;ut<gt;++ut)Mt+=Ye[ut]*Ke[ut];return Mt}function xr(Ye){return[o(Ye[1],Ye[0])*D,F(h(-1,s(1,Ye[2])))*D]}function pi(Ye){var Ke=Ye[0]*N,ut=Ye[1]*N,gt=a(ut);return[gt*a(Ke),gt*g(Ke),g(ut)]}function Ui(){}function $i(Ye,Ke){return{type:"FeatureCollection",features:Ye.features.map(function(ut){return Wr(ut,Ke)})}}function Wr(Ye,Ke){return{type:"Feature",id:Ye.id,properties:Ye.properties,geometry:xi(Ye.geometry,Ke)}}function xi(Ye,Ke){if(!Ye)return null;if("GeometryCollection"===Ye.type)return Mt=Ke,{type:"GeometryCollection",geometries:Ye.geometries.map(function(wt){return xi(wt,Mt)})};var Mt,ut;switch(Ye.type){case"Point":case"MultiPoint":ut=hi;break;case"LineString":case"MultiLineString":ut=Xi;break;case"Polygon":case"MultiPolygon":case"Sphere":ut=Ea;break;default:return null}return x.geoStream(Ye,Ke(ut)),ut.result()}Yr.invert=function(Ye,Ke){return Ue.invert(Ye/Er,Ke)};var ki=[],oa=[],hi={point:function(Ye,Ke){ki.push([Ye,Ke])},result:function(){var Ye=ki.length?ki.length<2?{type:"Point",coordinates:ki[0]}:{type:"MultiPoint",coordinates:ki}:null;return ki=[],Ye}},Xi={lineStart:Ui,point:function(Ye,Ke){ki.push([Ye,Ke])},lineEnd:function(){ki.length&&(oa.push(ki),ki=[])},result:function(){var Ye=oa.length?oa.length<2?{type:"LineString",coordinates:oa[0]}:{type:"MultiLineString",coordinates:oa}:null;return oa=[],Ye}},Ea={polygonStart:Ui,lineStart:Ui,point:function(Ye,Ke){ki.push([Ye,Ke])},lineEnd:function(){var Ye=ki.length;if(Ye){do{ki.push(ki[0].slice())}while(++Ye<4);oa.push(ki),ki=[]}},polygonEnd:Ui,result:function(){if(!oa.length)return null;var Ye=[],Ke=[];return oa.forEach(function(ut){!function(gt){if((Mt=gt.length)<4)return!1;for(var Mt,wt=0,zt=gt[Mt-1][1]*gt[0][0]-gt[Mt-1][0]*gt[0][1];++wt<Mt;)zt+=gt[wt-1][1]*gt[wt][0]-gt[wt-1][0]*gt[wt][1];return zt<=0}(ut)?Ke.push(ut):Ye.push([ut])}),Ke.forEach(function(ut){var gt=ut[0];Ye.some(function(Mt){if(function(wt,zt){for(var cn=zt[0],hn=zt[1],ln=!1,bn=0,En=wt.length,On=En-1;bn<En;On=bn++){var Nn=wt[bn],Xn=Nn[0],Mr=Nn[1],Or=wt[On],ci=Or[1];Mr>hn^ci>hn&&cn<(Or[0]-Xn)*(hn-Mr)/(ci-Mr)+Xn&&(ln=!ln)}return ln}(Mt[0],gt))return Mt.push(ut),!0})||Ye.push([ut])}),oa=[],Ye.length?Ye.length>1?{type:"MultiPolygon",coordinates:Ye}:{type:"Polygon",coordinates:Ye[0]}:null}};function ha(Ye){var Ke=Ye(c,0)[0]-Ye(-c,0)[0];function ut(gt,Mt){var wt=_(gt)<c,zt=Ye(wt?gt:gt>0?gt-w:gt+w,Mt),cn=(zt[0]-zt[1])*k,hn=(zt[0]+zt[1])*k;if(wt)return[cn,hn];var ln=Ke*k,bn=cn>0^hn>0?-1:1;return[bn*cn-f(hn)*ln,bn*hn-f(cn)*ln]}return Ye.invert&&(ut.invert=function(gt,Mt){var wt=(gt+Mt)*k,zt=(Mt-gt)*k,cn=_(wt)<.5*Ke&&_(zt)<.5*Ke;if(!cn){var hn=Ke*k,ln=wt>0^zt>0?-1:1,bn=-ln*gt+(zt>0?1:-1)*hn,En=-ln*Mt+(wt>0?1:-1)*hn;wt=(-bn-En)*k,zt=(bn-En)*k}var On=Ye.invert(wt,zt);return cn||(On[0]+=wt>0?w:-w),On}),x.geoProjection(ut).rotate([-90,-90,45]).clipAngle(179.999)}function Aa(){return ha($t).scale(111.48)}function qa(Ye){var Ke=g(Ye);function ut(gt,Mt){var wt=Ke?m(gt*Ke/2)/Ke:gt/2;if(!Mt)return[2*wt,-Ye];var zt=2*e(wt*g(Mt)),cn=1/m(Mt);return[g(zt)*cn,Mt+(1-a(zt))*cn-Ye]}return ut.invert=function(gt,Mt){if(_(Mt+=Ye)<u)return[Ke?2*e(Ke*gt/2)/Ke:gt,0];var wt,zt=gt*gt+Mt*Mt,cn=0,hn=10;do{var ln=m(cn),bn=1/a(cn),En=zt-2*Mt*cn+cn*cn;cn-=wt=(ln*En+2*(cn-Mt))/(2+En*bn*bn+2*(cn-Mt)*ln)}while(_(wt)>u&&--hn>0);var On=gt*(ln=m(cn)),Nn=m(_(Mt)<_(cn+1/ln)?.5*F(On):.5*I(On)+w/4)/g(cn);return[Ke?2*e(Ke*Nn)/Ke:2*Nn,cn]},ut}var da=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function za(Ye,Ke){var ut,gt=s(18,36*_(Ke)/w),Mt=i(gt),wt=gt-Mt,zt=(ut=da[Mt])[0],cn=ut[1],hn=(ut=da[++Mt])[0],ln=ut[1],bn=(ut=da[s(19,++Mt)])[0],En=ut[1];return[Ye*(hn+wt*(bn-zt)/2+wt*wt*(bn-2*hn+zt)/2),(Ke>0?c:-c)*(ln+wt*(En-cn)/2+wt*wt*(En-2*ln+cn)/2)]}function rs(Ye,Ke){var ut=function(zt){function cn(hn,ln){var bn=a(ln),En=(zt-1)/(zt-bn*a(hn));return[En*bn*g(hn),En*g(ln)]}return cn.invert=function(hn,ln){var bn=hn*hn+ln*ln,En=P(bn),On=(zt-P(1-bn*(zt+1)/(zt-1)))/((zt-1)/En+En/(zt-1));return[o(hn*On,En*P(1-On*On)),En?F(ln*On/En):0]},cn}(Ye);if(!Ke)return ut;var gt=a(Ke),Mt=g(Ke);function wt(zt,cn){var hn=ut(zt,cn),ln=hn[1],bn=ln*Mt/(Ye-1)+gt;return[hn[0]*gt/bn,ln/bn]}return wt.invert=function(zt,cn){var hn=(Ye-1)/(Ye-1-cn*Mt);return ut.invert(hn*zt,hn*cn*gt)},wt}da.forEach(function(Ye){Ye[1]*=1.0144}),za.invert=function(Ye,Ke){var ut=Ke/c,gt=90*ut,Mt=s(18,_(gt/5)),wt=h(0,i(Mt));do{var zt=da[wt][1],cn=da[wt+1][1],hn=da[s(19,wt+2)][1],ln=hn-zt,bn=hn-2*cn+zt,En=2*(_(ut)-cn)/ln,On=bn/ln,Nn=En*(1-On*En*(1-2*On*En));if(Nn>=0||1===wt){gt=(Ke>=0?5:-5)*(Nn+Mt);var Xn,Mr=50;do{Nn=(Mt=s(18,_(gt)/5))-(wt=i(Mt)),zt=da[wt][1],cn=da[wt+1][1],hn=da[s(19,wt+2)][1],gt-=(Xn=(Ke>=0?c:-c)*(cn+Nn*(hn-zt)/2+Nn*Nn*(hn-2*cn+zt)/2)-Ke)*D}while(_(Xn)>1e-12&&--Mr>0);break}}while(--wt>=0);var Or=da[wt][0],ii=da[wt+1][0],ci=da[s(19,wt+2)][0];return[Ye/(ii+Nn*(ci-Or)/2+Nn*Nn*(ci-2*ii+Or)/2),gt*N]};var po=-179.9999,Ji=179.9999,ds=-89.9999;function is(Ye){return Ye.length>0}function Bo(Ye){return-90===Ye||90===Ye?[0,Ye]:[-180,(Ke=Ye,Math.floor(1e4*Ke)/1e4)];var Ke}function ro(Ye){var Ke=Ye[0],ut=Ye[1],gt=!1;return Ke<=po?(Ke=-180,gt=!0):Ke>=Ji&&(Ke=180,gt=!0),ut<=ds?(ut=-90,gt=!0):ut>=89.9999&&(ut=90,gt=!0),gt?[Ke,ut]:Ye}function eo(Ye){return Ye.map(ro)}function fl(Ye,Ke,ut){for(var gt=0,Mt=Ye.length;gt<Mt;++gt){var wt=Ye[gt].slice();ut.push({index:-1,polygon:Ke,ring:wt});for(var zt=0,cn=wt.length;zt<cn;++zt){var hn=wt[zt],ln=hn[0],bn=hn[1];if(ln<=po||ln>=Ji||bn<=ds||bn>=89.9999){wt[zt]=ro(hn);for(var En=zt+1;En<cn;++En){var On=wt[En],Nn=On[0],Xn=On[1];if(Nn>po&&Nn<Ji&&Xn>ds&&Xn<89.9999)break}if(En===zt+1)continue;if(zt){var Mr={index:-1,polygon:Ke,ring:wt.slice(0,zt+1)};Mr.ring[Mr.ring.length-1]=Bo(bn),ut[ut.length-1]=Mr}else ut.pop();if(En>=cn)break;ut.push({index:-1,polygon:Ke,ring:wt=wt.slice(En-1)}),wt[0]=Bo(wt[0][1]),zt=-1,cn=wt.length}}}}function hl(Ye){var Ke,ut,gt,Mt,wt,zt,cn=Ye.length,hn={},ln={};for(Ke=0;Ke<cn;++Ke)(gt=(ut=Ye[Ke]).ring[0])[0]!==(wt=ut.ring[ut.ring.length-1])[0]||gt[1]!==wt[1]?(ut.index=Ke,hn[gt]=ln[wt]=ut):(ut.polygon.push(ut.ring),Ye[Ke]=null);for(Ke=0;Ke<cn;++Ke)if(ut=Ye[Ke]){if(Mt=ln[gt=ut.ring[0]],zt=hn[wt=ut.ring[ut.ring.length-1]],delete hn[gt],delete ln[wt],gt[0]===wt[0]&&gt[1]===wt[1]){ut.polygon.push(ut.ring);continue}Mt?(delete ln[gt],delete hn[Mt.ring[0]],Mt.ring.pop(),Ye[Mt.index]=null,ut={index:-1,polygon:Mt.polygon,ring:Mt.ring.concat(ut.ring)},Mt===zt?ut.polygon.push(ut.ring):(ut.index=cn++,Ye.push(hn[ut.ring[0]]=ln[ut.ring[ut.ring.length-1]]=ut))):zt?(delete hn[wt],delete ln[zt.ring[zt.ring.length-1]],ut.ring.pop(),ut={index:cn++,polygon:zt.polygon,ring:ut.ring.concat(zt.ring)},Ye[zt.index]=null,Ye.push(hn[ut.ring[0]]=ln[ut.ring[ut.ring.length-1]]=ut)):(ut.ring.push(ut.ring[0]),ut.polygon.push(ut.ring))}}function va(Ye){var Ke={type:"Feature",geometry:Xa(Ye.geometry)};return null!=Ye.id&&(Ke.id=Ye.id),null!=Ye.bbox&&(Ke.bbox=Ye.bbox),null!=Ye.properties&&(Ke.properties=Ye.properties),Ke}function Xa(Ye){if(null==Ye)return Ye;var Ke,ut,gt,Mt;switch(Ye.type){case"GeometryCollection":Ke={type:"GeometryCollection",geometries:Ye.geometries.map(Xa)};break;case"Point":Ke={type:"Point",coordinates:ro(Ye.coordinates)};break;case"MultiPoint":case"LineString":Ke={type:Ye.type,coordinates:eo(Ye.coordinates)};break;case"MultiLineString":Ke={type:"MultiLineString",coordinates:Ye.coordinates.map(eo)};break;case"Polygon":var wt=[];fl(Ye.coordinates,wt,ut=[]),hl(ut),Ke={type:"Polygon",coordinates:wt};break;case"MultiPolygon":ut=[],gt=-1,Mt=Ye.coordinates.length;for(var zt=new Array(Mt);++gt<Mt;)fl(Ye.coordinates[gt],zt[gt]=[],ut);hl(ut),Ke={type:"MultiPolygon",coordinates:zt.filter(is)};break;default:return Ye}return null!=Ye.bbox&&(Ke.bbox=Ye.bbox),Ke}function Ml(Ye,Ke){var ut=m(Ke/2),gt=g(A*ut);return[Ye*(.74482-.34588*gt*gt),1.70711*ut]}function cu(Ye,Ke,ut){var gt=x.geoInterpolate(Ke,ut),Mt=gt(.5),wt=x.geoRotation([-Mt[0],-Mt[1]])(Ke),zt=gt.distance/2,cn=-F(g(wt[1]*N)/g(zt)),hn=[-Mt[0],-Mt[1],-(wt[0]>0?w-cn:cn)*D],ln=x.geoProjection(Ye(zt)).rotate(hn),bn=x.geoRotation(hn),En=ln.center;return delete ln.rotate,ln.center=function(On){return arguments.length?En(bn(On)):bn.invert(En())},ln.clipAngle(90)}function Il(Ye){var Ke=a(Ye);function ut(gt,Mt){var wt=x.geoGnomonicRaw(gt,Mt);return wt[0]*=Ke,wt}return ut.invert=function(gt,Mt){return x.geoGnomonicRaw.invert(gt/Ke,Mt)},ut}function Pl(Ye,Ke){return cu(Il,Ye,Ke)}function kl(Ye){if(!(Ye*=2))return x.geoAzimuthalEquidistantRaw;var Ke=-Ye/2,ut=-Ke,gt=Ye*Ye,Mt=m(ut),wt=.5/g(ut);function zt(cn,hn){var ln=I(a(hn)*a(cn-Ke)),bn=I(a(hn)*a(cn-ut));return[((ln*=ln)-(bn*=bn))/(2*Ye),(hn<0?-1:1)*P(4*gt*bn-(gt-ln+bn)*(gt-ln+bn))/(2*Ye)]}return zt.invert=function(cn,hn){var ln,bn,En=hn*hn,On=a(P(En+(ln=cn+Ke)*ln)),Nn=a(P(En+(ln=cn+ut)*ln));return[o(bn=On-Nn,ln=(On+Nn)*Mt),(hn<0?-1:1)*I(P(ln*ln+bn*bn)*wt)]},zt}function Es(Ye,Ke){return cu(kl,Ye,Ke)}function as(Ye,Ke){if(_(Ke)<u)return[Ye,0];var ut=_(Ke/c),gt=F(ut);if(_(Ye)<u||_(_(Ke)-c)<u)return[0,f(Ke)*w*m(gt/2)];var Mt=a(gt),wt=_(w/Ye-Ye/w)/2,zt=wt*wt,cn=Mt/(ut+Mt-1),hn=cn*(2/ut-1),ln=hn*hn,bn=ln+zt,En=cn-ln,On=zt+cn;return[f(Ye)*w*(wt*En+P(zt*En*En-bn*(cn*cn-ln)))/bn,f(Ke)*w*(hn*On-wt*P((zt+1)*bn-On*On))/bn]}function bo(Ye,Ke){if(_(Ke)<u)return[Ye,0];var ut=_(Ke/c),gt=F(ut);if(_(Ye)<u||_(_(Ke)-c)<u)return[0,f(Ke)*w*m(gt/2)];var Mt=a(gt),wt=_(w/Ye-Ye/w)/2,zt=wt*wt,cn=Mt*(P(1+zt)-wt*Mt)/(1+zt*ut*ut);return[f(Ye)*w*cn,f(Ke)*w*P(1-cn*(2*wt+cn))]}function nl(Ye,Ke){if(_(Ke)<u)return[Ye,0];var ut=Ke/c,gt=F(ut);if(_(Ye)<u||_(_(Ke)-c)<u)return[0,w*m(gt/2)];var Mt=(w/Ye-Ye/w)/2,wt=ut/(1+a(gt));return[w*(f(Ye)*P(Mt*Mt+1-wt*wt)-Mt),w*wt]}function ts(Ye,Ke){if(!Ke)return[Ye,0];var ut=_(Ke);if(!Ye||ut===c)return[0,Ke];var gt=ut/c,Mt=gt*gt,wt=(8*gt-Mt*(Mt+2)-5)/(2*Mt*(gt-1)),zt=wt*wt,cn=gt*wt,hn=Mt+zt+2*cn,ln=gt+3*wt,bn=Ye/c,En=bn+1/bn,On=f(_(Ye)-c)*P(En*En-4),Nn=On*On,Xn=(On*(hn+zt-1)+2*P(hn*(Mt+zt*Nn-1)+(1-Mt)*(Mt*(ln*ln+4*zt)+12*cn*zt+4*zt*zt)))/(4*hn+Nn);return[f(Ye)*c*Xn,f(Ke)*c*P(1+On*_(Xn)-Xn*Xn)]}function os(Ye,Ke,ut,gt){var Mt=w/3;Ye=h(Ye,u),Ke=h(Ke,u),Ye=s(Ye,c),Ke=s(Ke,w-u),ut=h(ut,0),ut=s(ut,100-u);var wt=(gt=h(gt,u))/100,zt=I((ut/100+1)*a(Mt))/Mt,cn=g(Ye)/g(zt*c),hn=Ke/w,ln=P(wt*g(Ye/2)/g(Ke/2));return function(bn,En,On,Nn,Xn){function Mr(Or,ii){var ci=On*g(Nn*ii),vi=P(1-ci*ci),ai=P(2/(1+vi*a(Or*=Xn)));return[bn*vi*ai*g(Or),En*ci*ai]}return Mr.invert=function(Or,ii){var ci=Or/bn,vi=ii/En,ai=P(ci*ci+vi*vi),Yi=2*F(ai/2);return[o(Or*m(Yi),bn*ai)/Xn,ai&&F(ii*g(Yi)/(En*On*ai))/Nn]},Mr}(ln/P(hn*cn*zt),1/(ln*P(hn*cn*zt)),cn,zt,hn)}function _s(){var Ye=65*N,Ke=60*N,ut=20,gt=200,Mt=x.geoProjectionMutator(os),wt=Mt(Ye,Ke,ut,gt);return wt.poleline=function(zt){return arguments.length?Mt(Ye=+zt*N,Ke,ut,gt):Ye*D},wt.parallels=function(zt){return arguments.length?Mt(Ye,Ke=+zt*N,ut,gt):Ke*D},wt.inflation=function(zt){return arguments.length?Mt(Ye,Ke,ut=+zt,gt):ut},wt.ratio=function(zt){return arguments.length?Mt(Ye,Ke,ut,gt=+zt):gt},wt.scale(163.775)}Ml.invert=function(Ye,Ke){var ut=Ke/1.70711,gt=g(A*ut);return[Ye/(.74482-.34588*gt*gt),2*e(ut)]},as.invert=function(Ye,Ke){if(_(Ke)<u)return[Ye,0];if(_(Ye)<u)return[0,c*g(2*e(Ke/w))];var ut=(Ye/=w)*Ye,gt=(Ke/=w)*Ke,Mt=ut+gt,wt=Mt*Mt,zt=-_(Ke)*(1+Mt),cn=zt-2*gt+ut,hn=-2*zt+1+2*gt+wt,ln=gt/hn+(2*cn*cn*cn/(hn*hn*hn)-9*zt*cn/(hn*hn))/27,bn=(zt-cn*cn/(3*hn))/hn,En=2*P(-bn/3),On=I(3*ln/(bn*En))/3;return[w*(Mt-1+P(1+2*(ut-gt)+wt))/(2*Ye),f(Ke)*w*(-En*a(On+w/3)-cn/(3*hn))]},bo.invert=function(Ye,Ke){if(!Ye)return[0,c*g(2*e(Ke/w))];var ut=_(Ye/w),gt=(1-ut*ut-(Ke/=w)*Ke)/(2*ut),Mt=P(gt*gt+1);return[f(Ye)*w*(Mt-gt),f(Ke)*c*g(2*o(P((1-2*gt*ut)*(gt+Mt)-ut),P(Mt+gt+ut)))]},nl.invert=function(Ye,Ke){if(!Ke)return[Ye,0];var ut=Ke/w,gt=(w*w*(1-ut*ut)-Ye*Ye)/(2*w*Ye);return[Ye?w*(f(Ye)*P(gt*gt+1)-gt):0,c*g(2*e(ut))]},ts.invert=function(Ye,Ke){var ut;if(!Ye||!Ke)return[Ye,Ke];Ke/=w;var gt=f(Ye)*Ye/c,Mt=(gt*gt-1+4*Ke*Ke)/_(gt),wt=Mt*Mt,zt=2*Ke,cn=50;do{var hn=zt*zt,ln=(8*zt-hn*(hn+2)-5)/(2*hn*(zt-1)),bn=(3*zt-hn*zt-10)/(2*hn*zt),En=ln*ln,On=zt*ln,Nn=zt+ln,Xn=Nn*Nn,Mr=zt+3*ln,Or=-2*Nn*(4*On*En+(1-4*hn+3*hn*hn)*(1+bn)+En*(14*hn-6-wt+(8*hn-8-2*wt)*bn)+On*(12*hn-8+(10*hn-10-wt)*bn)),ii=P(Xn*(hn+En*wt-1)+(1-hn)*(hn*(Mr*Mr+4*En)+En*(12*On+4*En)));zt-=ut=(Mt*(Xn+En-1)+2*ii-gt*(4*Xn+wt))/(Mt*(2*ln*bn+2*Nn*(1+bn))+Or/ii-8*Nn*(Mt*(-1+En+Xn)+2*ii)*(1+bn)/(wt+4*Xn))}while(ut>u&&--cn>0);return[f(Ye)*(P(Mt*Mt+4)+Mt)*w/4,c*zt]};var dl=4*w+3*P(3),ss=2*P(2*w*P(3)/dl),Jo=le(ss*P(3)/w,ss,dl/6);function Wl(Ye,Ke){return[Ye*P(1-3*Ke*Ke/(w*w)),Ke]}function Ys(Ye,Ke){var ut=a(Ke),gt=a(Ye)*ut,Mt=1-gt,wt=a(Ye=o(g(Ye)*ut,-g(Ke))),zt=g(Ye);return[zt*(ut=P(1-gt*gt))-wt*Mt,-wt*ut-zt*Mt]}function Va(Ye,Ke){var ut=Y(Ye,Ke);return[(ut[0]+Ye/c)/2,(ut[1]+Ke)/2]}Wl.invert=function(Ye,Ke){return[Ye/P(1-3*Ke*Ke/(w*w)),Ke]},Ys.invert=function(Ye,Ke){var ut=(Ye*Ye+Ke*Ke)/-2,gt=P(-ut*(2+ut)),Mt=Ke*ut+Ye*gt,wt=Ye*ut-Ke*gt,zt=P(wt*wt+Mt*Mt);return[o(gt*Mt,zt*(1+ut)),zt?-F(gt*wt/zt):0]},Va.invert=function(Ye,Ke){var ut=Ye,gt=Ke,Mt=25;do{var wt,zt=a(gt),cn=g(gt),hn=g(2*gt),ln=cn*cn,bn=zt*zt,En=g(ut),On=a(ut/2),Nn=g(ut/2),Xn=Nn*Nn,Mr=1-bn*On*On,Or=Mr?I(zt*On)*P(wt=1/Mr):wt=0,ii=.5*(2*Or*zt*Nn+ut/c)-Ye,ci=.5*(Or*cn+gt)-Ke,vi=.5*wt*(bn*Xn+Or*zt*On*ln)+.5/c,ai=wt*(En*hn/4-Or*cn*Nn),Yi=.125*wt*(hn*Nn-Or*cn*bn*En),Ni=.5*wt*(ln*On+Or*Xn*zt)+.5,Sa=ai*Yi-Ni*vi,Da=(ci*ai-ii*Ni)/Sa,Oa=(ii*Yi-ci*vi)/Sa;ut-=Da,gt-=Oa}while((_(Da)>u||_(Oa)>u)&&--Mt>0);return[ut,gt]},y.geoNaturalEarth=x.geoNaturalEarth1,y.geoNaturalEarthRaw=x.geoNaturalEarth1Raw,y.geoAiry=function(){var Ye=c,Ke=x.geoProjectionMutator(Z),ut=Ke(Ye);return ut.radius=function(gt){return arguments.length?Ke(Ye=gt*N):Ye*D},ut.scale(179.976).clipAngle(147)},y.geoAiryRaw=Z,y.geoAitoff=function(){return x.geoProjection(Y).scale(152.63)},y.geoAitoffRaw=Y,y.geoArmadillo=function(){var Ye=20*N,Ke=Ye>=0?1:-1,ut=m(Ke*Ye),gt=x.geoProjectionMutator(ee),Mt=gt(Ye),wt=Mt.stream;return Mt.parallel=function(zt){return arguments.length?(ut=m((Ke=(Ye=zt*N)>=0?1:-1)*Ye),gt(Ye)):Ye*D},Mt.stream=function(zt){var cn=Mt.rotate(),hn=wt(zt),ln=(Mt.rotate([0,0]),wt(zt)),bn=Mt.precision();return Mt.rotate(cn),hn.sphere=function(){ln.polygonStart(),ln.lineStart();for(var En=-180*Ke;Ke*En<180;En+=90*Ke)ln.point(En,90*Ke);if(Ye)for(;Ke*(En-=3*Ke*bn)>=-180;)ln.point(En,Ke*-o(a(En*N/2),ut)*D);ln.lineEnd(),ln.polygonEnd()},hn},Mt.scale(218.695).center([0,28.0974])},y.geoArmadilloRaw=ee,y.geoAugust=function(){return x.geoProjection(re).scale(66.1603)},y.geoAugustRaw=re,y.geoBaker=function(){return x.geoProjection(ie).scale(112.314)},y.geoBakerRaw=ie,y.geoBerghaus=function(){var Ye=5,Ke=x.geoProjectionMutator(q),ut=Ke(Ye),gt=ut.stream,Mt=-a(.01*N),wt=g(.01*N);return ut.lobes=function(zt){return arguments.length?Ke(Ye=+zt):Ye},ut.stream=function(zt){var cn=ut.rotate(),hn=gt(zt),ln=(ut.rotate([0,0]),gt(zt));return ut.rotate(cn),hn.sphere=function(){ln.polygonStart(),ln.lineStart();for(var bn=0,En=360/Ye,On=2*w/Ye,Nn=90-180/Ye,Xn=c;bn<Ye;++bn,Nn-=En,Xn-=On)ln.point(o(wt*a(Xn),Mt)*D,F(wt*g(Xn))*D),Nn<-90?(ln.point(-90,-180-Nn-.01),ln.point(-90,-180-Nn+.01)):(ln.point(90,Nn+.01),ln.point(90,Nn-.01));ln.lineEnd(),ln.polygonEnd()},hn},ut.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},y.geoBerghausRaw=q,y.geoBertin1953=function(){return x.geoProjection(te()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])},y.geoBertin1953Raw=te,y.geoBoggs=function(){return x.geoProjection(_e).scale(160.857)},y.geoBoggsRaw=_e,y.geoBonne=function(){return me(De).scale(123.082).center([0,26.1441]).parallel(45)},y.geoBonneRaw=De,y.geoBottomley=function(){var Ye=.5,Ke=x.geoProjectionMutator(Le),ut=Ke(Ye);return ut.fraction=function(gt){return arguments.length?Ke(Ye=+gt):Ye},ut.scale(158.837)},y.geoBottomleyRaw=Le,y.geoBromley=function(){return x.geoProjection(Ie).scale(152.63)},y.geoBromleyRaw=Ie,y.geoChamberlin=Re,y.geoChamberlinRaw=Oe,y.geoChamberlinAfrica=function(){return Re([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},y.geoCollignon=function(){return x.geoProjection(Ue).scale(95.6464).center([0,30])},y.geoCollignonRaw=Ue,y.geoCraig=function(){return me(qe).scale(249.828).clipAngle(90)},y.geoCraigRaw=qe,y.geoCraster=function(){return x.geoProjection(lt).scale(156.19)},y.geoCrasterRaw=lt,y.geoCylindricalEqualArea=function(){return me(He).parallel(38.58).scale(195.044)},y.geoCylindricalEqualAreaRaw=He,y.geoCylindricalStereographic=function(){return me($e).scale(124.75)},y.geoCylindricalStereographicRaw=$e,y.geoEckert1=function(){return x.geoProjection(et).scale(165.664)},y.geoEckert1Raw=et,y.geoEckert2=function(){return x.geoProjection(nt).scale(165.664)},y.geoEckert2Raw=nt,y.geoEckert3=function(){return x.geoProjection(ct).scale(180.739)},y.geoEckert3Raw=ct,y.geoEckert4=function(){return x.geoProjection(bt).scale(180.739)},y.geoEckert4Raw=bt,y.geoEckert5=function(){return x.geoProjection(kt).scale(173.044)},y.geoEckert5Raw=kt,y.geoEckert6=function(){return x.geoProjection(Bt).scale(173.044)},y.geoEckert6Raw=Bt,y.geoEisenlohr=function(){return x.geoProjection(ht).scale(62.5271)},y.geoEisenlohrRaw=ht,y.geoFahey=function(){return x.geoProjection(Ft).scale(137.152)},y.geoFaheyRaw=Ft,y.geoFoucaut=function(){return x.geoProjection(en).scale(135.264)},y.geoFoucautRaw=en,y.geoFoucautSinusoidal=function(){var Ye=.5,Ke=x.geoProjectionMutator(Qt),ut=Ke(Ye);return ut.alpha=function(gt){return arguments.length?Ke(Ye=+gt):Ye},ut.scale(168.725)},y.geoFoucautSinusoidalRaw=Qt,y.geoGilbert=function(Ye){null==Ye&&(Ye=x.geoOrthographic);var Ke=Ye(),ut=x.geoEquirectangular().scale(D).precision(0).clipAngle(null).translate([0,0]);function gt(wt){return Ke(tn(wt))}function Mt(wt){gt[wt]=function(){return arguments.length?(Ke[wt].apply(Ke,arguments),gt):Ke[wt]()}}return Ke.invert&&(gt.invert=function(wt){return dn(Ke.invert(wt))}),gt.stream=function(wt){var zt=Ke.stream(wt),cn=ut.stream({point:function(hn,ln){zt.point(hn/2,F(m(-ln/2*N))*D)},lineStart:function(){zt.lineStart()},lineEnd:function(){zt.lineEnd()},polygonStart:function(){zt.polygonStart()},polygonEnd:function(){zt.polygonEnd()}});return cn.sphere=zt.sphere,cn},gt.rotate=function(wt){return arguments.length?(ut.rotate(wt),gt):ut.rotate()},gt.center=function(wt){return arguments.length?(Ke.center(tn(wt)),gt):dn(Ke.center())},Mt("angle"),Mt("clipAngle"),Mt("clipExtent"),Mt("fitExtent"),Mt("fitHeight"),Mt("fitSize"),Mt("fitWidth"),Mt("scale"),Mt("translate"),Mt("precision"),gt.scale(249.5)},y.geoGingery=function(){var Ye=6,Ke=30*N,ut=a(Ke),gt=g(Ke),Mt=x.geoProjectionMutator(Mn),wt=Mt(Ke,Ye),zt=wt.stream,cn=-a(.01*N),hn=g(.01*N);return wt.radius=function(ln){return arguments.length?(ut=a(Ke=ln*N),gt=g(Ke),Mt(Ke,Ye)):Ke*D},wt.lobes=function(ln){return arguments.length?Mt(Ke,Ye=+ln):Ye},wt.stream=function(ln){var bn=wt.rotate(),En=zt(ln),On=(wt.rotate([0,0]),zt(ln));return wt.rotate(bn),En.sphere=function(){On.polygonStart(),On.lineStart();for(var Nn=0,Xn=2*w/Ye,Mr=0;Nn<Ye;++Nn,Mr-=Xn)On.point(o(hn*a(Mr),cn)*D,F(hn*g(Mr))*D),On.point(o(gt*a(Mr-Xn/2),ut)*D,F(gt*g(Mr-Xn/2))*D);On.lineEnd(),On.polygonEnd()},En},wt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},y.geoGingeryRaw=Mn,y.geoGinzburg4=function(){return x.geoProjection(Ce).scale(149.995)},y.geoGinzburg4Raw=Ce,y.geoGinzburg5=function(){return x.geoProjection(Ve).scale(153.93)},y.geoGinzburg5Raw=Ve,y.geoGinzburg6=function(){return x.geoProjection(Ge).scale(130.945)},y.geoGinzburg6Raw=Ge,y.geoGinzburg8=function(){return x.geoProjection(Qe).scale(131.747)},y.geoGinzburg8Raw=Qe,y.geoGinzburg9=function(){return x.geoProjection(ot).scale(131.087)},y.geoGinzburg9Raw=ot,y.geoGringorten=function(){return x.geoProjection(it(mt)).scale(239.75)},y.geoGringortenRaw=mt,y.geoGuyou=function(){return x.geoProjection(it($t)).scale(151.496)},y.geoGuyouRaw=$t,y.geoHammer=function(){var Ye=2,Ke=x.geoProjectionMutator(U),ut=Ke(Ye);return ut.coefficient=function(gt){return arguments.length?Ke(Ye=+gt):Ye},ut.scale(169.529)},y.geoHammerRaw=U,y.geoHammerRetroazimuthal=function(){var Ye=0,Ke=x.geoProjectionMutator(pt),ut=Ke(Ye),gt=ut.rotate,Mt=ut.stream,wt=x.geoCircle();return ut.parallel=function(zt){if(!arguments.length)return Ye*D;var cn=ut.rotate();return Ke(Ye=zt*N).rotate(cn)},ut.rotate=function(zt){return arguments.length?(gt.call(ut,[zt[0],zt[1]-Ye*D]),wt.center([-zt[0],-zt[1]]),ut):((zt=gt.call(ut))[1]+=Ye*D,zt)},ut.stream=function(zt){return(zt=Mt(zt)).sphere=function(){zt.polygonStart();var cn,hn=wt.radius(89.99)().coordinates[0],ln=hn.length-1,bn=-1;for(zt.lineStart();++bn<ln;)zt.point((cn=hn[bn])[0],cn[1]);for(zt.lineEnd(),ln=(hn=wt.radius(90.01)().coordinates[0]).length-1,zt.lineStart();--bn>=0;)zt.point((cn=hn[bn])[0],cn[1]);zt.lineEnd(),zt.polygonEnd()},zt},ut.scale(79.4187).parallel(45).clipAngle(179.999)},y.geoHammerRetroazimuthalRaw=pt,y.geoHealpix=function(){var Ye=4,Ke=x.geoProjectionMutator(Pt),ut=Ke(Ye),gt=ut.stream;return ut.lobes=function(Mt){return arguments.length?Ke(Ye=+Mt):Ye},ut.stream=function(Mt){var wt=ut.rotate(),zt=gt(Mt),cn=(ut.rotate([0,0]),gt(Mt));return ut.rotate(wt),zt.sphere=function(){var hn,ln;x.geoStream((ln=[].concat(M.range(-180,180+(hn=180/Ye)/2,hn).map(Be),M.range(180,-180-hn/2,-hn).map(tt)),{type:"Polygon",coordinates:[180===hn?ln.map(dt):ln]}),cn)},zt},ut.scale(239.75)},y.geoHealpixRaw=Pt,y.geoHill=function(){var Ye=1,Ke=x.geoProjectionMutator(Dt),ut=Ke(Ye);return ut.ratio=function(gt){return arguments.length?Ke(Ye=+gt):Ye},ut.scale(167.774).center([0,18.67])},y.geoHillRaw=Dt,y.geoHomolosine=function(){return x.geoProjection(Yt).scale(152.63)},y.geoHomolosineRaw=Yt,y.geoHufnagel=function(){var Ye=1,Ke=0,ut=45*N,gt=2,Mt=x.geoProjectionMutator(fn),wt=Mt(Ye,Ke,ut,gt);return wt.a=function(zt){return arguments.length?Mt(Ye=+zt,Ke,ut,gt):Ye},wt.b=function(zt){return arguments.length?Mt(Ye,Ke=+zt,ut,gt):Ke},wt.psiMax=function(zt){return arguments.length?Mt(Ye,Ke,ut=+zt*N,gt):ut*D},wt.ratio=function(zt){return arguments.length?Mt(Ye,Ke,ut,gt=+zt):gt},wt.scale(180.739)},y.geoHufnagelRaw=fn,y.geoHyperelliptical=function(){var Ye=0,Ke=2.5,ut=1.183136,gt=x.geoProjectionMutator(In),Mt=gt(Ye,Ke,ut);return Mt.alpha=function(wt){return arguments.length?gt(Ye=+wt,Ke,ut):Ye},Mt.k=function(wt){return arguments.length?gt(Ye,Ke=+wt,ut):Ke},Mt.gamma=function(wt){return arguments.length?gt(Ye,Ke,ut=+wt):ut},Mt.scale(152.63)},y.geoHyperellipticalRaw=In,y.geoInterrupt=pn,y.geoInterruptedBoggs=function(){return pn(_e,gn).scale(160.857)},y.geoInterruptedHomolosine=function(){return pn(Yt,Pn).scale(152.63)},y.geoInterruptedMollweide=function(){return pn(ue,jn).scale(169.529)},y.geoInterruptedMollweideHemispheres=function(){return pn(ue,Kn).scale(169.529).rotate([20,0])},y.geoInterruptedSinuMollweide=function(){return pn(Nt,rr,G).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},y.geoInterruptedSinusoidal=function(){return pn(we,lr).scale(152.63).rotate([-20,0])},y.geoKavrayskiy7=function(){return x.geoProjection(kr).scale(158.837)},y.geoKavrayskiy7Raw=kr,y.geoLagrange=function(){var Ye=.5,Ke=x.geoProjectionMutator(Xr),ut=Ke(Ye);return ut.spacing=function(gt){return arguments.length?Ke(Ye=+gt):Ye},ut.scale(124.75)},y.geoLagrangeRaw=Xr,y.geoLarrivee=function(){return x.geoProjection(oi).scale(97.2672)},y.geoLarriveeRaw=oi,y.geoLaskowski=function(){return x.geoProjection(Gr).scale(139.98)},y.geoLaskowskiRaw=Gr,y.geoLittrow=function(){return x.geoProjection(Lr).scale(144.049).clipAngle(89.999)},y.geoLittrowRaw=Lr,y.geoLoximuthal=function(){return me(Jr).parallel(40).scale(158.837)},y.geoLoximuthalRaw=Jr,y.geoMiller=function(){return x.geoProjection(Mi).scale(108.318)},y.geoMillerRaw=Mi,y.geoModifiedStereographic=Nr,y.geoModifiedStereographicRaw=Jn,y.geoModifiedStereographicAlaska=function(){return Nr(br,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)},y.geoModifiedStereographicGs48=function(){return Nr(Fr,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},y.geoModifiedStereographicGs50=function(){return Nr(cr,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},y.geoModifiedStereographicMiller=function(){return Nr(Qr,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},y.geoModifiedStereographicLee=function(){return Nr(ui,[165,10]).scale(250).clipAngle(130).center([-165,-10])},y.geoMollweide=function(){return x.geoProjection(ue).scale(169.529)},y.geoMollweideRaw=ue,y.geoMtFlatPolarParabolic=function(){return x.geoProjection(un).scale(164.859)},y.geoMtFlatPolarParabolicRaw=un,y.geoMtFlatPolarQuartic=function(){return x.geoProjection(er).scale(188.209)},y.geoMtFlatPolarQuarticRaw=er,y.geoMtFlatPolarSinusoidal=function(){return x.geoProjection(Ut).scale(166.518)},y.geoMtFlatPolarSinusoidalRaw=Ut,y.geoNaturalEarth2=function(){return x.geoProjection(vn).scale(175.295)},y.geoNaturalEarth2Raw=vn,y.geoNellHammer=function(){return x.geoProjection(Tn).scale(152.63)},y.geoNellHammerRaw=Tn,y.geoInterruptedQuarticAuthalic=function(){return pn(U(1/0),Qn).rotate([20,0]).scale(152.63)},y.geoNicolosi=function(){return x.geoProjection(Zn).scale(127.267)},y.geoNicolosiRaw=Zn,y.geoPatterson=function(){return x.geoProjection($n).scale(139.319)},y.geoPattersonRaw=$n,y.geoPolyconic=function(){return x.geoProjection(Hn).scale(103.74)},y.geoPolyconicRaw=Hn,y.geoPolyhedral=nr,y.geoPolyhedralButterfly=function(Ye){Ye=Ye||function(ut){var gt=x.geoCentroid({type:"MultiPoint",coordinates:ut});return x.geoGnomonic().scale(1).translate([0,0]).rotate([-gt[0],-gt[1]])};var Ke=jr.map(function(ut){return{face:ut,project:Ye(ut)}});return[-1,0,0,1,0,1,4,5].forEach(function(ut,gt){var Mt=Ke[ut];Mt&&(Mt.children||(Mt.children=[])).push(Ke[gt])}),nr(Ke[0],function(ut,gt){return Ke[ut<-w/2?gt<0?6:4:ut<0?gt<0?2:0:ut<w/2?gt<0?3:1:gt<0?7:5]}).angle(-30).scale(101.858).center([0,45])},y.geoPolyhedralCollignon=function(Ye){Ye=Ye||function(ut){var gt=x.geoCentroid({type:"MultiPoint",coordinates:ut});return x.geoProjection(Yr).translate([0,0]).scale(1).rotate(gt[1]>0?[-gt[0],0]:[180-gt[0],180])};var Ke=jr.map(function(ut){return{face:ut,project:Ye(ut)}});return[-1,0,0,1,0,1,4,5].forEach(function(ut,gt){var Mt=Ke[ut];Mt&&(Mt.children||(Mt.children=[])).push(Ke[gt])}),nr(Ke[0],function(ut,gt){return Ke[ut<-w/2?gt<0?6:4:ut<0?gt<0?2:0:ut<w/2?gt<0?3:1:gt<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])},y.geoPolyhedralWaterman=function(Ye){Ye=Ye||function(wt){var zt=6===wt.length?x.geoCentroid({type:"MultiPoint",coordinates:wt}):wt[0];return x.geoGnomonic().scale(1).translate([0,0]).rotate([-zt[0],-zt[1]])};var Ke=jr.map(function(wt){for(var zt,cn=wt.map(pi),hn=cn.length,ln=cn[hn-1],bn=[],En=0;En<hn;++En)bn.push(xr([.9486832980505138*ln[0]+.31622776601683794*(zt=cn[En])[0],.9486832980505138*ln[1]+.31622776601683794*zt[1],.9486832980505138*ln[2]+.31622776601683794*zt[2]]),xr([.9486832980505138*zt[0]+.31622776601683794*ln[0],.9486832980505138*zt[1]+.31622776601683794*ln[1],.9486832980505138*zt[2]+.31622776601683794*ln[2]])),ln=zt;return bn}),ut=[],gt=[-1,0,0,1,0,1,4,5];Ke.forEach(function(wt,zt){for(var cn,hn,ln=jr[zt],bn=ln.length,En=ut[zt]=[],On=0;On<bn;++On)Ke.push([ln[On],wt[(2*On+2)%(2*bn)],wt[(2*On+1)%(2*bn)]]),gt.push(zt),En.push((cn=pi(wt[(2*On+2)%(2*bn)]),hn=pi(wt[(2*On+1)%(2*bn)]),[cn[1]*hn[2]-cn[2]*hn[1],cn[2]*hn[0]-cn[0]*hn[2],cn[0]*hn[1]-cn[1]*hn[0]]))});var Mt=Ke.map(function(wt){return{project:Ye(wt),face:wt}});return gt.forEach(function(wt,zt){var cn=Mt[wt];cn&&(cn.children||(cn.children=[])).push(Mt[zt])}),nr(Mt[0],function(wt,zt){var cn=a(zt),hn=[cn*a(wt),cn*g(wt),g(zt)],ln=wt<-w/2?zt<0?6:4:wt<0?zt<0?2:0:wt<w/2?zt<0?3:1:zt<0?7:5,bn=ut[ln];return Mt[ei(bn[0],hn)<0?8+3*ln:ei(bn[1],hn)<0?8+3*ln+1:ei(bn[2],hn)<0?8+3*ln+2:ln]}).angle(-30).scale(110.625).center([0,45])},y.geoProject=function(Ye,Ke){var ut,gt=Ke.stream;if(!gt)throw new Error("invalid projection");switch(Ye&&Ye.type){case"Feature":ut=Wr;break;case"FeatureCollection":ut=$i;break;default:ut=xi}return ut(Ye,gt)},y.geoGringortenQuincuncial=function(){return ha(mt).scale(176.423)},y.geoPeirceQuincuncial=Aa,y.geoPierceQuincuncial=Aa,y.geoQuantize=function(Ye,Ke){if(!(0<=(Ke=+Ke)&&Ke<=20))throw new Error("invalid digits");function ut(ln){var bn=ln.length,En=2,On=new Array(bn);for(On[0]=+ln[0].toFixed(Ke),On[1]=+ln[1].toFixed(Ke);En<bn;)On[En]=ln[En],++En;return On}function gt(ln){return ln.map(ut)}function Mt(ln){for(var bn=ut(ln[0]),En=[bn],On=1;On<ln.length;On++){var Nn=ut(ln[On]);(Nn.length>2||Nn[0]!=bn[0]||Nn[1]!=bn[1])&&(En.push(Nn),bn=Nn)}return 1===En.length&&ln.length>1&&En.push(ut(ln[ln.length-1])),En}function wt(ln){return ln.map(Mt)}function zt(ln){if(null==ln)return ln;var bn;switch(ln.type){case"GeometryCollection":bn={type:"GeometryCollection",geometries:ln.geometries.map(zt)};break;case"Point":bn={type:"Point",coordinates:ut(ln.coordinates)};break;case"MultiPoint":bn={type:ln.type,coordinates:gt(ln.coordinates)};break;case"LineString":bn={type:ln.type,coordinates:Mt(ln.coordinates)};break;case"MultiLineString":case"Polygon":bn={type:ln.type,coordinates:wt(ln.coordinates)};break;case"MultiPolygon":bn={type:"MultiPolygon",coordinates:ln.coordinates.map(wt)};break;default:return ln}return null!=ln.bbox&&(bn.bbox=ln.bbox),bn}function cn(ln){var bn={type:"Feature",properties:ln.properties,geometry:zt(ln.geometry)};return null!=ln.id&&(bn.id=ln.id),null!=ln.bbox&&(bn.bbox=ln.bbox),bn}if(null!=Ye)switch(Ye.type){case"Feature":return cn(Ye);case"FeatureCollection":var hn={type:"FeatureCollection",features:Ye.features.map(cn)};return null!=Ye.bbox&&(hn.bbox=Ye.bbox),hn;default:return zt(Ye)}return Ye},y.geoQuincuncial=ha,y.geoRectangularPolyconic=function(){return me(qa).scale(131.215)},y.geoRectangularPolyconicRaw=qa,y.geoRobinson=function(){return x.geoProjection(za).scale(152.63)},y.geoRobinsonRaw=za,y.geoSatellite=function(){var Ye=2,Ke=0,ut=x.geoProjectionMutator(rs),gt=ut(Ye,Ke);return gt.distance=function(Mt){return arguments.length?ut(Ye=+Mt,Ke):Ye},gt.tilt=function(Mt){return arguments.length?ut(Ye,Ke=Mt*N):Ke*D},gt.scale(432.147).clipAngle(I(1/Ye)*D-1e-6)},y.geoSatelliteRaw=rs,y.geoSinuMollweide=function(){return x.geoProjection(Nt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},y.geoSinuMollweideRaw=Nt,y.geoSinusoidal=function(){return x.geoProjection(we).scale(152.63)},y.geoSinusoidalRaw=we,y.geoStitch=function(Ye){if(null==Ye)return Ye;switch(Ye.type){case"Feature":return va(Ye);case"FeatureCollection":var Ke={type:"FeatureCollection",features:Ye.features.map(va)};return null!=Ye.bbox&&(Ke.bbox=Ye.bbox),Ke;default:return Xa(Ye)}},y.geoTimes=function(){return x.geoProjection(Ml).scale(146.153)},y.geoTimesRaw=Ml,y.geoTwoPointAzimuthal=Pl,y.geoTwoPointAzimuthalRaw=Il,y.geoTwoPointAzimuthalUsa=function(){return Pl([-158,21.5],[-77,39]).clipAngle(60).scale(400)},y.geoTwoPointEquidistant=Es,y.geoTwoPointEquidistantRaw=kl,y.geoTwoPointEquidistantUsa=function(){return Es([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},y.geoVanDerGrinten=function(){return x.geoProjection(as).scale(79.4183)},y.geoVanDerGrintenRaw=as,y.geoVanDerGrinten2=function(){return x.geoProjection(bo).scale(79.4183)},y.geoVanDerGrinten2Raw=bo,y.geoVanDerGrinten3=function(){return x.geoProjection(nl).scale(79.4183)},y.geoVanDerGrinten3Raw=nl,y.geoVanDerGrinten4=function(){return x.geoProjection(ts).scale(127.16)},y.geoVanDerGrinten4Raw=ts,y.geoWagner=_s,y.geoWagner7=function(){return _s().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)},y.geoWagnerRaw=os,y.geoWagner4=function(){return x.geoProjection(Jo).scale(176.84)},y.geoWagner4Raw=Jo,y.geoWagner6=function(){return x.geoProjection(Wl).scale(152.63)},y.geoWagner6Raw=Wl,y.geoWiechel=function(){return x.geoProjection(Ys).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)},y.geoWiechelRaw=Ys,y.geoWinkel3=function(){return x.geoProjection(Va).scale(158.837)},y.geoWinkel3Raw=Va,Object.defineProperty(y,"__esModule",{value:!0})},"object"==typeof se&&void 0!==oe?x(se,b("d3-geo"),b("d3-array")):x(y.d3=y.d3||{},y.d3,y.d3)},{"d3-array":107,"d3-geo":114}],114:[function(b,oe,se){var y,x;y=this,x=function(y,x){"use strict";function M(){return new _}function _(){this.reset()}_.prototype={constructor:_,reset:function(){this.s=this.t=0},add:function(_t){o(e,_t,this.t),o(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new _;function o(_t,jt,_n){var Kt=_t.s=jt+_n,wn=Kt-jt;_t.t=jt-(Kt-wn)+(_n-wn)}var a=1e-6,l=Math.PI,i=l/2,v=l/4,h=2*l,s=180/l,d=l/180,p=Math.abs,f=Math.atan,g=Math.atan2,m=Math.cos,u=Math.ceil,w=Math.exp,c=Math.log,A=Math.pow,k=Math.sin,C=Math.sign||function(_t){return _t>0?1:_t<0?-1:0},E=Math.sqrt,L=Math.tan;function D(_t){return _t>1?0:_t<-1?l:Math.acos(_t)}function N(_t){return _t>1?i:_t<-1?-i:Math.asin(_t)}function F(_t){return(_t=k(_t/2))*_t}function I(){}function P(_t,jt){_t&&V.hasOwnProperty(_t.type)&&V[_t.type](_t,jt)}var j={Feature:function(_t,jt){P(_t.geometry,jt)},FeatureCollection:function(_t,jt){for(var _n=_t.features,Kt=-1,wn=_n.length;++Kt<wn;)P(_n[Kt].geometry,jt)}},V={Sphere:function(_t,jt){jt.sphere()},Point:function(_t,jt){jt.point((_t=_t.coordinates)[0],_t[1],_t[2])},MultiPoint:function(_t,jt){for(var _n=_t.coordinates,Kt=-1,wn=_n.length;++Kt<wn;)jt.point((_t=_n[Kt])[0],_t[1],_t[2])},LineString:function(_t,jt){Z(_t.coordinates,jt,0)},MultiLineString:function(_t,jt){for(var _n=_t.coordinates,Kt=-1,wn=_n.length;++Kt<wn;)Z(_n[Kt],jt,0)},Polygon:function(_t,jt){Y(_t.coordinates,jt)},MultiPolygon:function(_t,jt){for(var _n=_t.coordinates,Kt=-1,wn=_n.length;++Kt<wn;)Y(_n[Kt],jt)},GeometryCollection:function(_t,jt){for(var _n=_t.geometries,Kt=-1,wn=_n.length;++Kt<wn;)P(_n[Kt],jt)}};function Z(_t,jt,_n){var Kt,wn=-1,Vn=_t.length-_n;for(jt.lineStart();++wn<Vn;)jt.point((Kt=_t[wn])[0],Kt[1],Kt[2]);jt.lineEnd()}function Y(_t,jt){var _n=-1,Kt=_t.length;for(jt.polygonStart();++_n<Kt;)Z(_t[_n],jt,1);jt.polygonEnd()}function ee(_t,jt){_t&&j.hasOwnProperty(_t.type)?j[_t.type](_t,jt):P(_t,jt)}var re,X,K,ie,q,U=M(),W=M(),ae={point:I,lineStart:I,lineEnd:I,polygonStart:function(){U.reset(),ae.lineStart=G,ae.lineEnd=te},polygonEnd:function(){var _t=+U;W.add(_t<0?h+_t:_t),this.lineStart=this.lineEnd=this.point=I},sphere:function(){W.add(h)}};function G(){ae.point=ne}function te(){le(re,X)}function ne(_t,jt){ae.point=le,re=_t,X=jt,K=_t*=d,ie=m(jt=(jt*=d)/2+v),q=k(jt)}function le(_t,jt){var _n=(_t*=d)-K,Kt=_n>=0?1:-1,wn=Kt*_n,Vn=m(jt=(jt*=d)/2+v),tr=k(jt),pr=q*tr,Sr=ie*Vn+pr*m(wn),yr=pr*Kt*k(wn);U.add(g(yr,Sr)),K=_t,ie=Vn,q=tr}function ue(_t){return[g(_t[1],_t[0]),N(_t[2])]}function pe(_t){var jt=_t[0],_n=_t[1],Kt=m(_n);return[Kt*m(jt),Kt*k(jt),k(_n)]}function de(_t,jt){return _t[0]*jt[0]+_t[1]*jt[1]+_t[2]*jt[2]}function _e(_t,jt){return[_t[1]*jt[2]-_t[2]*jt[1],_t[2]*jt[0]-_t[0]*jt[2],_t[0]*jt[1]-_t[1]*jt[0]]}function me(_t,jt){_t[0]+=jt[0],_t[1]+=jt[1],_t[2]+=jt[2]}function we(_t,jt){return[_t[0]*jt,_t[1]*jt,_t[2]*jt]}function De(_t){var jt=E(_t[0]*_t[0]+_t[1]*_t[1]+_t[2]*_t[2]);_t[0]/=jt,_t[1]/=jt,_t[2]/=jt}var Le,Ie,je,ye,Me,Oe,Pe,Re,Ue,qe,Xe,lt,He,$e,et,nt,ct,bt,kt,Bt,Et,ht,at,Ft,en,Qt,tn=M(),dn={point:Mn,lineStart:ke,lineEnd:Se,polygonStart:function(){dn.point=Ce,dn.lineStart=Ve,dn.lineEnd=Ge,tn.reset(),ae.polygonStart()},polygonEnd:function(){ae.polygonEnd(),dn.point=Mn,dn.lineStart=ke,dn.lineEnd=Se,U<0?(Le=-(je=180),Ie=-(ye=90)):tn>a?ye=90:tn<-a&&(Ie=-90),qe[0]=Le,qe[1]=je},sphere:function(){Le=-(je=180),Ie=-(ye=90)}};function Mn(_t,jt){Ue.push(qe=[Le=_t,je=_t]),jt<Ie&&(Ie=jt),jt>ye&&(ye=jt)}function sn(_t,jt){var _n=pe([_t*d,jt*d]);if(Re){var Kt=_e(Re,_n),wn=_e([Kt[1],-Kt[0],0],Kt);De(wn),wn=ue(wn);var Vn,tr=_t-Me,pr=tr>0?1:-1,Sr=wn[0]*s*pr,yr=p(tr)>180;yr^(pr*Me<Sr&&Sr<pr*_t)?(Vn=wn[1]*s)>ye&&(ye=Vn):yr^(pr*Me<(Sr=(Sr+360)%360-180)&&Sr<pr*_t)?(Vn=-wn[1]*s)<Ie&&(Ie=Vn):(jt<Ie&&(Ie=jt),jt>ye&&(ye=jt)),yr?_t<Me?Qe(Le,_t)>Qe(Le,je)&&(je=_t):Qe(_t,je)>Qe(Le,je)&&(Le=_t):je>=Le?(_t<Le&&(Le=_t),_t>je&&(je=_t)):_t>Me?Qe(Le,_t)>Qe(Le,je)&&(je=_t):Qe(_t,je)>Qe(Le,je)&&(Le=_t)}else Ue.push(qe=[Le=_t,je=_t]);jt<Ie&&(Ie=jt),jt>ye&&(ye=jt),Re=_n,Me=_t}function ke(){dn.point=sn}function Se(){qe[0]=Le,qe[1]=je,dn.point=Mn,Re=null}function Ce(_t,jt){if(Re){var _n=_t-Me;tn.add(p(_n)>180?_n+(_n>0?360:-360):_n)}else Oe=_t,Pe=jt;ae.point(_t,jt),sn(_t,jt)}function Ve(){ae.lineStart()}function Ge(){Ce(Oe,Pe),ae.lineEnd(),p(tn)>a&&(Le=-(je=180)),qe[0]=Le,qe[1]=je,Re=null}function Qe(_t,jt){return(jt-=_t)<0?jt+360:jt}function ot(_t,jt){return _t[0]-jt[0]}function it(_t,jt){return _t[0]<=_t[1]?_t[0]<=jt&&jt<=_t[1]:jt<_t[0]||_t[1]<jt}var mt={sphere:I,point:xt,lineStart:$t,lineEnd:Xt,polygonStart:function(){mt.lineStart=Ct,mt.lineEnd=Pt},polygonEnd:function(){mt.lineStart=$t,mt.lineEnd=Xt}};function xt(_t,jt){_t*=d;var _n=m(jt*=d);Vt(_n*m(_t),_n*k(_t),k(jt))}function Vt(_t,jt,_n){++Xe,He+=(_t-He)/Xe,$e+=(jt-$e)/Xe,et+=(_n-et)/Xe}function $t(){mt.point=pt}function pt(_t,jt){_t*=d;var _n=m(jt*=d);Ft=_n*m(_t),en=_n*k(_t),Qt=k(jt),mt.point=At,Vt(Ft,en,Qt)}function At(_t,jt){_t*=d;var _n=m(jt*=d),Kt=_n*m(_t),wn=_n*k(_t),Vn=k(jt),tr=g(E((tr=en*Vn-Qt*wn)*tr+(tr=Qt*Kt-Ft*Vn)*tr+(tr=Ft*wn-en*Kt)*tr),Ft*Kt+en*wn+Qt*Vn);lt+=tr,nt+=tr*(Ft+(Ft=Kt)),ct+=tr*(en+(en=wn)),bt+=tr*(Qt+(Qt=Vn)),Vt(Ft,en,Qt)}function Xt(){mt.point=xt}function Ct(){mt.point=Be}function Pt(){tt(ht,at),mt.point=xt}function Be(_t,jt){ht=_t,at=jt,_t*=d,jt*=d,mt.point=tt;var _n=m(jt);Ft=_n*m(_t),en=_n*k(_t),Qt=k(jt),Vt(Ft,en,Qt)}function tt(_t,jt){_t*=d;var _n=m(jt*=d),Kt=_n*m(_t),wn=_n*k(_t),Vn=k(jt),tr=en*Vn-Qt*wn,pr=Qt*Kt-Ft*Vn,Sr=Ft*wn-en*Kt,yr=E(tr*tr+pr*pr+Sr*Sr),zr=N(yr),Zr=yr&&-zr/yr;kt+=Zr*tr,Bt+=Zr*pr,Et+=Zr*Sr,lt+=zr,nt+=zr*(Ft+(Ft=Kt)),ct+=zr*(en+(en=wn)),bt+=zr*(Qt+(Qt=Vn)),Vt(Ft,en,Qt)}function dt(_t){return function(){return _t}}function Dt(_t,jt){function _n(Kt,wn){return Kt=_t(Kt,wn),jt(Kt[0],Kt[1])}return _t.invert&&jt.invert&&(_n.invert=function(Kt,wn){return(Kt=jt.invert(Kt,wn))&&_t.invert(Kt[0],Kt[1])}),_n}function Nt(_t,jt){return[p(_t)>l?_t+Math.round(-_t/h)*h:_t,jt]}function Yt(_t,jt,_n){return(_t%=h)?jt||_n?Dt(nn(_t),In(jt,_n)):nn(_t):jt||_n?In(jt,_n):Nt}function fn(_t){return function(jt,_n){return[(jt+=_t)>l?jt-h:jt<-l?jt+h:jt,_n]}}function nn(_t){var jt=fn(_t);return jt.invert=fn(-_t),jt}function In(_t,jt){var _n=m(_t),Kt=k(_t),wn=m(jt),Vn=k(jt);function tr(pr,Sr){var yr=m(Sr),zr=m(pr)*yr,Zr=k(pr)*yr,Ar=k(Sr),Br=Ar*_n+zr*Kt;return[g(Zr*wn-Br*Vn,zr*_n-Ar*Kt),N(Br*wn+Zr*Vn)]}return tr.invert=function(pr,Sr){var yr=m(Sr),zr=m(pr)*yr,Zr=k(pr)*yr,Ar=k(Sr),Br=Ar*wn-Zr*Vn;return[g(Zr*wn+Ar*Vn,zr*_n+Br*Kt),N(Br*_n-zr*Kt)]},tr}function Dn(_t){function jt(_n){return(_n=_t(_n[0]*d,_n[1]*d))[0]*=s,_n[1]*=s,_n}return _t=Yt(_t[0]*d,_t[1]*d,_t.length>2?_t[2]*d:0),jt.invert=function(_n){return(_n=_t.invert(_n[0]*d,_n[1]*d))[0]*=s,_n[1]*=s,_n},jt}function kn(_t,jt,_n,Kt,wn,Vn){if(_n){var tr=m(jt),pr=k(jt),Sr=Kt*_n;null==wn?(wn=jt+Kt*h,Vn=jt-Sr/2):(wn=rn(tr,wn),Vn=rn(tr,Vn),(Kt>0?wn<Vn:wn>Vn)&&(wn+=Kt*h));for(var yr,zr=wn;Kt>0?zr>Vn:zr<Vn;zr-=Sr)yr=ue([tr,-pr*m(zr),-pr*k(zr)]),_t.point(yr[0],yr[1])}}function rn(_t,jt){(jt=pe(jt))[0]-=_t,De(jt);var _n=D(-jt[1]);return((-jt[2]<0?-_n:_n)+h-a)%h}function pn(){var _t,jt=[];return{point:function(_n,Kt,wn){_t.push([_n,Kt,wn])},lineStart:function(){jt.push(_t=[])},lineEnd:I,rejoin:function(){jt.length>1&&jt.push(jt.pop().concat(jt.shift()))},result:function(){var _n=jt;return jt=[],_t=null,_n}}}function gn(_t,jt){return p(_t[0]-jt[0])<a&&p(_t[1]-jt[1])<a}function Pn(_t,jt,_n,Kt){this.x=_t,this.z=jt,this.o=_n,this.e=Kt,this.v=!1,this.n=this.p=null}function jn(_t,jt,_n,Kt,wn){var Vn,tr,pr=[],Sr=[];if(_t.forEach(function(li){if(!((gi=li.length-1)<=0)){var gi,Li,fr=li[0],Di=li[gi];if(gn(fr,Di)){if(!fr[2]&&!Di[2]){for(wn.lineStart(),Vn=0;Vn<gi;++Vn)wn.point((fr=li[Vn])[0],fr[1]);return void wn.lineEnd()}Di[0]+=2*a}pr.push(Li=new Pn(fr,li,null,!0)),Sr.push(Li.o=new Pn(fr,null,Li,!1)),pr.push(Li=new Pn(Di,li,null,!1)),Sr.push(Li.o=new Pn(Di,null,Li,!0))}}),pr.length){for(Sr.sort(jt),Kn(pr),Kn(Sr),Vn=0,tr=Sr.length;Vn<tr;++Vn)Sr[Vn].e=_n=!_n;for(var yr,zr,Zr=pr[0];;){for(var Ar=Zr,Br=!0;Ar.v;)if((Ar=Ar.n)===Zr)return;yr=Ar.z,wn.lineStart();do{if(Ar.v=Ar.o.v=!0,Ar.e){if(Br)for(Vn=0,tr=yr.length;Vn<tr;++Vn)wn.point((zr=yr[Vn])[0],zr[1]);else Kt(Ar.x,Ar.n.x,1,wn);Ar=Ar.n}else{if(Br)for(Vn=(yr=Ar.p.z).length-1;Vn>=0;--Vn)wn.point((zr=yr[Vn])[0],zr[1]);else Kt(Ar.x,Ar.p.x,-1,wn);Ar=Ar.p}yr=(Ar=Ar.o).z,Br=!Br}while(!Ar.v);wn.lineEnd()}}}function Kn(_t){if(jt=_t.length){for(var jt,_n,Kt=0,wn=_t[0];++Kt<jt;)wn.n=_n=_t[Kt],_n.p=wn,wn=_n;wn.n=_n=_t[0],_n.p=wn}}Nt.invert=Nt;var rr=M();function lr(_t){return p(_t[0])<=l?_t[0]:C(_t[0])*((p(_t[0])+l)%h-l)}function kr(_t,jt){var _n=lr(jt),Kt=jt[1],wn=k(Kt),Vn=[k(_n),-m(_n),0],tr=0,pr=0;rr.reset(),1===wn?Kt=i+a:-1===wn&&(Kt=-i-a);for(var Sr=0,yr=_t.length;Sr<yr;++Sr)if(Zr=(zr=_t[Sr]).length)for(var zr,Zr,Ar=zr[Zr-1],Br=lr(Ar),li=Ar[1]/2+v,gi=k(li),Li=m(li),fr=0;fr<Zr;++fr,Br=ri,gi=Ii,Li=aa,Ar=Di){var Di=zr[fr],ri=lr(Di),Ir=Di[1]/2+v,Ii=k(Ir),aa=m(Ir),ya=ri-Br,Kr=ya>=0?1:-1,Ta=Kr*ya,pa=Ta>l,Wi=gi*Ii;if(rr.add(g(Wi*Kr*k(Ta),Li*aa+Wi*m(Ta))),tr+=pa?ya+Kr*h:ya,pa^Br>=_n^ri>=_n){var Dr=_e(pe(Ar),pe(Di));De(Dr);var Ai=_e(Vn,Dr);De(Ai);var Ba=(pa^ya>=0?-1:1)*N(Ai[2]);(Kt>Ba||Kt===Ba&&(Dr[0]||Dr[1]))&&(pr+=pa^ya>=0?1:-1)}}return(tr<-a||tr<a&&rr<-a)^1&pr}function Xr(_t,jt,_n,Kt){return function(wn){var Vn,tr,pr,Sr=jt(wn),yr=pn(),zr=jt(yr),Zr=!1,Ar={point:Br,lineStart:gi,lineEnd:Li,polygonStart:function(){Ar.point=fr,Ar.lineStart=Di,Ar.lineEnd=ri,tr=[],Vn=[]},polygonEnd:function(){Ar.point=Br,Ar.lineStart=gi,Ar.lineEnd=Li,tr=x.merge(tr);var Ir=kr(Vn,Kt);tr.length?(Zr||(wn.polygonStart(),Zr=!0),jn(tr,oi,Ir,_n,wn)):Ir&&(Zr||(wn.polygonStart(),Zr=!0),wn.lineStart(),_n(null,null,1,wn),wn.lineEnd()),Zr&&(wn.polygonEnd(),Zr=!1),tr=Vn=null},sphere:function(){wn.polygonStart(),wn.lineStart(),_n(null,null,1,wn),wn.lineEnd(),wn.polygonEnd()}};function Br(Ir,Ii){_t(Ir,Ii)&&wn.point(Ir,Ii)}function li(Ir,Ii){Sr.point(Ir,Ii)}function gi(){Ar.point=li,Sr.lineStart()}function Li(){Ar.point=Br,Sr.lineEnd()}function fr(Ir,Ii){pr.push([Ir,Ii]),zr.point(Ir,Ii)}function Di(){zr.lineStart(),pr=[]}function ri(){fr(pr[0][0],pr[0][1]),zr.lineEnd();var Ir,Ii,aa,ya,Kr=zr.clean(),Ta=yr.result(),pa=Ta.length;if(pr.pop(),Vn.push(pr),pr=null,pa)if(1&Kr){if((Ii=(aa=Ta[0]).length-1)>0){for(Zr||(wn.polygonStart(),Zr=!0),wn.lineStart(),Ir=0;Ir<Ii;++Ir)wn.point((ya=aa[Ir])[0],ya[1]);wn.lineEnd()}}else pa>1&&2&Kr&&Ta.push(Ta.pop().concat(Ta.shift())),tr.push(Ta.filter(sr))}return Ar}}function sr(_t){return _t.length>1}function oi(_t,jt){return((_t=_t.x)[0]<0?_t[1]-i-a:i-_t[1])-((jt=jt.x)[0]<0?jt[1]-i-a:i-jt[1])}var Gr=Xr(function(){return!0},function(_t){var jt,_n=NaN,Kt=NaN,wn=NaN;return{lineStart:function(){_t.lineStart(),jt=1},point:function(Vn,tr){var yr,zr,Zr,Ar,Br,li,gi,pr=Vn>0?l:-l,Sr=p(Vn-_n);p(Sr-l)<a?(_t.point(_n,Kt=(Kt+tr)/2>0?i:-i),_t.point(wn,Kt),_t.lineEnd(),_t.lineStart(),_t.point(pr,Kt),_t.point(Vn,Kt),jt=0):wn!==pr&&Sr>=l&&(p(_n-wn)<a&&(_n-=wn*a),p(Vn-pr)<a&&(Vn-=pr*a),zr=Kt,Ar=tr,gi=k((yr=_n)-(Zr=Vn)),Kt=p(gi)>a?f((k(zr)*(li=m(Ar))*k(Zr)-k(Ar)*(Br=m(zr))*k(yr))/(Br*li*gi)):(zr+Ar)/2,_t.point(wn,Kt),_t.lineEnd(),_t.lineStart(),_t.point(pr,Kt),jt=0),_t.point(_n=Vn,Kt=tr),wn=pr},lineEnd:function(){_t.lineEnd(),_n=Kt=NaN},clean:function(){return 2-jt}}},function(_t,jt,_n,Kt){var wn;if(null==_t)Kt.point(-l,wn=_n*i),Kt.point(0,wn),Kt.point(l,wn),Kt.point(l,0),Kt.point(l,-wn),Kt.point(0,-wn),Kt.point(-l,-wn),Kt.point(-l,0),Kt.point(-l,wn);else if(p(_t[0]-jt[0])>a){var Vn=_t[0]<jt[0]?l:-l;Kt.point(-Vn,wn=_n*Vn/2),Kt.point(0,wn),Kt.point(Vn,wn)}else Kt.point(jt[0],jt[1])},[-l,-i]);function Lr(_t){var jt=m(_t),_n=6*d,Kt=jt>0,wn=p(jt)>a;function Vn(Sr,yr){return m(Sr)*m(yr)>jt}function tr(Sr,yr,zr){var Zr=[1,0,0],Ar=_e(pe(Sr),pe(yr)),Br=de(Ar,Ar),li=Ar[0],gi=Br-li*li;if(!gi)return!zr&&Sr;var Li=jt*Br/gi,fr=-jt*li/gi,Di=_e(Zr,Ar),ri=we(Zr,Li);me(ri,we(Ar,fr));var Ir=Di,Ii=de(ri,Ir),aa=de(Ir,Ir),ya=Ii*Ii-aa*(de(ri,ri)-1);if(!(ya<0)){var Kr=E(ya),Ta=we(Ir,(-Ii-Kr)/aa);if(me(Ta,ri),Ta=ue(Ta),!zr)return Ta;var pa,Wi=Sr[0],Dr=yr[0],Ai=Sr[1],Ba=yr[1];Dr<Wi&&(pa=Wi,Wi=Dr,Dr=pa);var mi=Dr-Wi,Ua=p(mi-l)<a;if(!Ua&&Ba<Ai&&(pa=Ai,Ai=Ba,Ba=pa),Ua||mi<a?Ua?Ai+Ba>0^Ta[1]<(p(Ta[0]-Wi)<a?Ai:Ba):Ai<=Ta[1]&&Ta[1]<=Ba:mi>l^(Wi<=Ta[0]&&Ta[0]<=Dr)){var So=we(Ir,(-Ii+Kr)/aa);return me(So,ri),[Ta,ue(So)]}}}function pr(Sr,yr){var zr=Kt?_t:l-_t,Zr=0;return Sr<-zr?Zr|=1:Sr>zr&&(Zr|=2),yr<-zr?Zr|=4:yr>zr&&(Zr|=8),Zr}return Xr(Vn,function(Sr){var yr,zr,Zr,Ar,Br;return{lineStart:function(){Ar=Zr=!1,Br=1},point:function(li,gi){var Li,fr=[li,gi],Di=Vn(li,gi),ri=Kt?Di?0:pr(li,gi):Di?pr(li+(li<0?l:-l),gi):0;if(!yr&&(Ar=Zr=Di)&&Sr.lineStart(),Di!==Zr&&(!(Li=tr(yr,fr))||gn(yr,Li)||gn(fr,Li))&&(fr[2]=1),Di!==Zr)Br=0,Di?(Sr.lineStart(),Li=tr(fr,yr),Sr.point(Li[0],Li[1])):(Li=tr(yr,fr),Sr.point(Li[0],Li[1],2),Sr.lineEnd()),yr=Li;else if(wn&&yr&&Kt^Di){var Ir;ri&zr||!(Ir=tr(fr,yr,!0))||(Br=0,Kt?(Sr.lineStart(),Sr.point(Ir[0][0],Ir[0][1]),Sr.point(Ir[1][0],Ir[1][1]),Sr.lineEnd()):(Sr.point(Ir[1][0],Ir[1][1]),Sr.lineEnd(),Sr.lineStart(),Sr.point(Ir[0][0],Ir[0][1],3)))}!Di||yr&&gn(yr,fr)||Sr.point(fr[0],fr[1]),yr=fr,Zr=Di,zr=ri},lineEnd:function(){Zr&&Sr.lineEnd(),yr=null},clean:function(){return Br|(Ar&&Zr)<<1}}},function(Sr,yr,zr,Zr){kn(Zr,_t,_n,zr,Sr,yr)},Kt?[0,-_t]:[-l,_t-l])}function Jr(_t,jt,_n,Kt){function wn(yr,zr){return _t<=yr&&yr<=_n&&jt<=zr&&zr<=Kt}function Vn(yr,zr,Zr,Ar){var Br=0,li=0;if(null==yr||(Br=tr(yr,Zr))!==(li=tr(zr,Zr))||Sr(yr,zr)<0^Zr>0)do{Ar.point(0===Br||3===Br?_t:_n,Br>1?Kt:jt)}while((Br=(Br+Zr+4)%4)!==li);else Ar.point(zr[0],zr[1])}function tr(yr,zr){return p(yr[0]-_t)<a?zr>0?0:3:p(yr[0]-_n)<a?zr>0?2:1:p(yr[1]-jt)<a?zr>0?1:0:zr>0?3:2}function pr(yr,zr){return Sr(yr.x,zr.x)}function Sr(yr,zr){var Zr=tr(yr,1),Ar=tr(zr,1);return Zr!==Ar?Zr-Ar:0===Zr?zr[1]-yr[1]:1===Zr?yr[0]-zr[0]:2===Zr?yr[1]-zr[1]:zr[0]-yr[0]}return function(yr){var zr,Zr,Ar,Br,li,gi,Li,fr,Di,ri,Ir,Ii=yr,aa=pn(),ya={point:Kr,lineStart:function(){ya.point=Ta,Zr&&Zr.push(Ar=[]),ri=!0,Di=!1,Li=fr=NaN},lineEnd:function(){zr&&(Ta(Br,li),gi&&Di&&aa.rejoin(),zr.push(aa.result())),ya.point=Kr,Di&&Ii.lineEnd()},polygonStart:function(){Ii=aa,zr=[],Zr=[],Ir=!0},polygonEnd:function(){var pa=function(){for(var Ai=0,Ba=0,mi=Zr.length;Ba<mi;++Ba)for(var Ua,So,us=Zr[Ba],Ls=1,Ts=us.length,na=us[0],ko=na[0],ms=na[1];Ls<Ts;++Ls)Ua=ko,So=ms,ko=(na=us[Ls])[0],ms=na[1],So<=Kt?ms>Kt&&(ko-Ua)*(Kt-So)>(ms-So)*(_t-Ua)&&++Ai:ms<=Kt&&(ko-Ua)*(Kt-So)<(ms-So)*(_t-Ua)&&--Ai;return Ai}(),Wi=Ir&&pa,Dr=(zr=x.merge(zr)).length;(Wi||Dr)&&(yr.polygonStart(),Wi&&(yr.lineStart(),Vn(null,null,1,yr),yr.lineEnd()),Dr&&jn(zr,pr,pa,Vn,yr),yr.polygonEnd()),Ii=yr,zr=Zr=Ar=null}};function Kr(pa,Wi){wn(pa,Wi)&&Ii.point(pa,Wi)}function Ta(pa,Wi){var Dr=wn(pa,Wi);if(Zr&&Ar.push([pa,Wi]),ri)Br=pa,li=Wi,gi=Dr,ri=!1,Dr&&(Ii.lineStart(),Ii.point(pa,Wi));else if(Dr&&Di)Ii.point(pa,Wi);else{var Ai=[Li=Math.max(-1e9,Math.min(1e9,Li)),fr=Math.max(-1e9,Math.min(1e9,fr))],Ba=[pa=Math.max(-1e9,Math.min(1e9,pa)),Wi=Math.max(-1e9,Math.min(1e9,Wi))];!function(mi,Ua,So,us,Ls,Ts){var na,ko=mi[0],ms=mi[1],Ra=0,Fa=1,go=Ua[0]-ko,Ka=Ua[1]-ms;if(na=So-ko,go||!(na>0)){if(na/=go,go<0){if(na<Ra)return;na<Fa&&(Fa=na)}else if(go>0){if(na>Fa)return;na>Ra&&(Ra=na)}if(na=Ls-ko,go||!(na<0)){if(na/=go,go<0){if(na>Fa)return;na>Ra&&(Ra=na)}else if(go>0){if(na<Ra)return;na<Fa&&(Fa=na)}if(na=us-ms,Ka||!(na>0)){if(na/=Ka,Ka<0){if(na<Ra)return;na<Fa&&(Fa=na)}else if(Ka>0){if(na>Fa)return;na>Ra&&(Ra=na)}if(na=Ts-ms,Ka||!(na<0)){if(na/=Ka,Ka<0){if(na>Fa)return;na>Ra&&(Ra=na)}else if(Ka>0){if(na<Ra)return;na<Fa&&(Fa=na)}return Ra>0&&(mi[0]=ko+Ra*go,mi[1]=ms+Ra*Ka),Fa<1&&(Ua[0]=ko+Fa*go,Ua[1]=ms+Fa*Ka),!0}}}}}(Ai,Ba,_t,jt,_n,Kt)?Dr&&(Ii.lineStart(),Ii.point(pa,Wi),Ir=!1):(Di||(Ii.lineStart(),Ii.point(Ai[0],Ai[1])),Ii.point(Ba[0],Ba[1]),Dr||Ii.lineEnd(),Ir=!1)}Li=pa,fr=Wi,Di=Dr}return ya}}var Mi,Jn,br,Fr=M(),cr={sphere:I,point:I,lineStart:function(){cr.point=ui,cr.lineEnd=Qr},lineEnd:I,polygonStart:I,polygonEnd:I};function Qr(){cr.point=cr.lineEnd=I}function ui(_t,jt){Mi=_t*=d,Jn=k(jt*=d),br=m(jt),cr.point=Nr}function Nr(_t,jt){_t*=d;var _n=k(jt*=d),Kt=m(jt),wn=p(_t-Mi),Vn=m(wn),tr=Kt*k(wn),pr=br*_n-Jn*Kt*Vn,Sr=Jn*_n+br*Kt*Vn;Fr.add(g(E(tr*tr+pr*pr),Sr)),Mi=_t,Jn=_n,br=Kt}function Hr(_t){return Fr.reset(),ee(_t,cr),+Fr}var wr=[null,null],un={type:"LineString",coordinates:wr};function er(_t,jt){return wr[0]=_t,wr[1]=jt,Hr(un)}var Ut={Feature:function(_t,jt){return Tn(_t.geometry,jt)},FeatureCollection:function(_t,jt){for(var _n=_t.features,Kt=-1,wn=_n.length;++Kt<wn;)if(Tn(_n[Kt].geometry,jt))return!0;return!1}},vn={Sphere:function(){return!0},Point:function(_t,jt){return Qn(_t.coordinates,jt)},MultiPoint:function(_t,jt){for(var _n=_t.coordinates,Kt=-1,wn=_n.length;++Kt<wn;)if(Qn(_n[Kt],jt))return!0;return!1},LineString:function(_t,jt){return Zn(_t.coordinates,jt)},MultiLineString:function(_t,jt){for(var _n=_t.coordinates,Kt=-1,wn=_n.length;++Kt<wn;)if(Zn(_n[Kt],jt))return!0;return!1},Polygon:function(_t,jt){return $n(_t.coordinates,jt)},MultiPolygon:function(_t,jt){for(var _n=_t.coordinates,Kt=-1,wn=_n.length;++Kt<wn;)if($n(_n[Kt],jt))return!0;return!1},GeometryCollection:function(_t,jt){for(var _n=_t.geometries,Kt=-1,wn=_n.length;++Kt<wn;)if(Tn(_n[Kt],jt))return!0;return!1}};function Tn(_t,jt){return!(!_t||!vn.hasOwnProperty(_t.type))&&vn[_t.type](_t,jt)}function Qn(_t,jt){return 0===er(_t,jt)}function Zn(_t,jt){for(var _n,Kt,wn,Vn=0,tr=_t.length;Vn<tr;Vn++){if(0===(Kt=er(_t[Vn],jt))||Vn>0&&(wn=er(_t[Vn],_t[Vn-1]))>0&&_n<=wn&&Kt<=wn&&(_n+Kt-wn)*(1-Math.pow((_n-Kt)/wn,2))<1e-12*wn)return!0;_n=Kt}return!1}function $n(_t,jt){return!!kr(_t.map(Hn),Rn(jt))}function Hn(_t){return(_t=_t.map(Rn)).pop(),_t}function Rn(_t){return[_t[0]*d,_t[1]*d]}function Fn(_t,jt,_n){var Kt=x.range(_t,jt-a,_n).concat(jt);return function(wn){return Kt.map(function(Vn){return[wn,Vn]})}}function zn(_t,jt,_n){var Kt=x.range(_t,jt-a,_n).concat(jt);return function(wn){return Kt.map(function(Vn){return[Vn,wn]})}}function Yn(){var _t,jt,_n,Kt,wn,Vn,tr,pr,Sr,yr,zr,Zr,Ar=10,Br=Ar,li=90,gi=360,Li=2.5;function fr(){return{type:"MultiLineString",coordinates:Di()}}function Di(){return x.range(u(Kt/li)*li,_n,li).map(zr).concat(x.range(u(pr/gi)*gi,tr,gi).map(Zr)).concat(x.range(u(jt/Ar)*Ar,_t,Ar).filter(function(ri){return p(ri%li)>a}).map(Sr)).concat(x.range(u(Vn/Br)*Br,wn,Br).filter(function(ri){return p(ri%gi)>a}).map(yr))}return fr.lines=function(){return Di().map(function(ri){return{type:"LineString",coordinates:ri}})},fr.outline=function(){return{type:"Polygon",coordinates:[zr(Kt).concat(Zr(tr).slice(1),zr(_n).reverse().slice(1),Zr(pr).reverse().slice(1))]}},fr.extent=function(ri){return arguments.length?fr.extentMajor(ri).extentMinor(ri):fr.extentMinor()},fr.extentMajor=function(ri){return arguments.length?(pr=+ri[0][1],tr=+ri[1][1],(Kt=+ri[0][0])>(_n=+ri[1][0])&&(ri=Kt,Kt=_n,_n=ri),pr>tr&&(ri=pr,pr=tr,tr=ri),fr.precision(Li)):[[Kt,pr],[_n,tr]]},fr.extentMinor=function(ri){return arguments.length?(Vn=+ri[0][1],wn=+ri[1][1],(jt=+ri[0][0])>(_t=+ri[1][0])&&(ri=jt,jt=_t,_t=ri),Vn>wn&&(ri=Vn,Vn=wn,wn=ri),fr.precision(Li)):[[jt,Vn],[_t,wn]]},fr.step=function(ri){return arguments.length?fr.stepMajor(ri).stepMinor(ri):fr.stepMinor()},fr.stepMajor=function(ri){return arguments.length?(li=+ri[0],gi=+ri[1],fr):[li,gi]},fr.stepMinor=function(ri){return arguments.length?(Ar=+ri[0],Br=+ri[1],fr):[Ar,Br]},fr.precision=function(ri){return arguments.length?(Li=+ri,Sr=Fn(Vn,wn,90),yr=zn(jt,_t,Li),zr=Fn(pr,tr,90),Zr=zn(Kt,_n,Li),fr):Li},fr.extentMajor([[-180,-90+a],[180,90-a]]).extentMinor([[-180,-80-a],[180,80+a]])}function nr(_t){return _t}var hr,_r,Tr,jr,Er=M(),Yr=M(),ei={point:I,lineStart:I,lineEnd:I,polygonStart:function(){ei.lineStart=xr,ei.lineEnd=$i},polygonEnd:function(){ei.lineStart=ei.lineEnd=ei.point=I,Er.add(p(Yr)),Yr.reset()},result:function(){var _t=Er/2;return Er.reset(),_t}};function xr(){ei.point=pi}function pi(_t,jt){ei.point=Ui,hr=Tr=_t,_r=jr=jt}function Ui(_t,jt){Yr.add(jr*_t-Tr*jt),Tr=_t,jr=jt}function $i(){Ui(hr,_r)}var Xi,Ea,ha,Aa,Wr=1/0,xi=Wr,ki=-Wr,oa=ki,hi={point:function(_t,jt){_t<Wr&&(Wr=_t),_t>ki&&(ki=_t),jt<xi&&(xi=jt),jt>oa&&(oa=jt)},lineStart:I,lineEnd:I,polygonStart:I,polygonEnd:I,result:function(){var _t=[[Wr,xi],[ki,oa]];return ki=oa=-(xi=Wr=1/0),_t}},qa=0,da=0,za=0,rs=0,po=0,Ji=0,ds=0,is=0,Bo=0,ro={point:eo,lineStart:fl,lineEnd:Xa,polygonStart:function(){ro.lineStart=Ml,ro.lineEnd=cu},polygonEnd:function(){ro.point=eo,ro.lineStart=fl,ro.lineEnd=Xa},result:function(){var _t=Bo?[ds/Bo,is/Bo]:Ji?[rs/Ji,po/Ji]:za?[qa/za,da/za]:[NaN,NaN];return qa=da=za=rs=po=Ji=ds=is=Bo=0,_t}};function eo(_t,jt){qa+=_t,da+=jt,++za}function fl(){ro.point=hl}function hl(_t,jt){ro.point=va,eo(ha=_t,Aa=jt)}function va(_t,jt){var _n=_t-ha,Kt=jt-Aa,wn=E(_n*_n+Kt*Kt);rs+=wn*(ha+_t)/2,po+=wn*(Aa+jt)/2,Ji+=wn,eo(ha=_t,Aa=jt)}function Xa(){ro.point=eo}function Ml(){ro.point=Il}function cu(){Pl(Xi,Ea)}function Il(_t,jt){ro.point=Pl,eo(Xi=ha=_t,Ea=Aa=jt)}function Pl(_t,jt){var _n=_t-ha,Kt=jt-Aa,wn=E(_n*_n+Kt*Kt);rs+=wn*(ha+_t)/2,po+=wn*(Aa+jt)/2,Ji+=wn,ds+=(wn=Aa*_t-ha*jt)*(ha+_t),is+=wn*(Aa+jt),Bo+=3*wn,eo(ha=_t,Aa=jt)}function kl(_t){this._context=_t}kl.prototype={_radius:4.5,pointRadius:function(_t){return this._radius=_t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(_t,jt){switch(this._point){case 0:this._context.moveTo(_t,jt),this._point=1;break;case 1:this._context.lineTo(_t,jt);break;default:this._context.moveTo(_t+this._radius,jt),this._context.arc(_t,jt,this._radius,0,h)}},result:I};var Es,as,bo,nl,ts,os=M(),_s={point:I,lineStart:function(){_s.point=dl},lineEnd:function(){Es&&ss(as,bo),_s.point=I},polygonStart:function(){Es=!0},polygonEnd:function(){Es=null},result:function(){var _t=+os;return os.reset(),_t}};function dl(_t,jt){_s.point=ss,as=nl=_t,bo=ts=jt}function ss(_t,jt){os.add(E((nl-=_t)*nl+(ts-=jt)*ts)),nl=_t,ts=jt}function Jo(){this._string=[]}function Wl(_t){return"m0,"+_t+"a"+_t+","+_t+" 0 1,1 0,"+-2*_t+"a"+_t+","+_t+" 0 1,1 0,"+2*_t+"z"}function Ys(_t){return function(jt){var _n=new Va;for(var Kt in _t)_n[Kt]=_t[Kt];return _n.stream=jt,_n}}function Va(){}function Ye(_t,jt,_n){var Kt=_t.clipExtent&&_t.clipExtent();return _t.scale(150).translate([0,0]),null!=Kt&&_t.clipExtent(null),ee(_n,_t.stream(hi)),jt(hi.result()),null!=Kt&&_t.clipExtent(Kt),_t}function Ke(_t,jt,_n){return Ye(_t,function(Kt){var wn=jt[1][0]-jt[0][0],Vn=jt[1][1]-jt[0][1],tr=Math.min(wn/(Kt[1][0]-Kt[0][0]),Vn/(Kt[1][1]-Kt[0][1])),pr=+jt[0][0]+(wn-tr*(Kt[1][0]+Kt[0][0]))/2,Sr=+jt[0][1]+(Vn-tr*(Kt[1][1]+Kt[0][1]))/2;_t.scale(150*tr).translate([pr,Sr])},_n)}function ut(_t,jt,_n){return Ke(_t,[[0,0],jt],_n)}function gt(_t,jt,_n){return Ye(_t,function(Kt){var wn=+jt,Vn=wn/(Kt[1][0]-Kt[0][0]),tr=(wn-Vn*(Kt[1][0]+Kt[0][0]))/2,pr=-Vn*Kt[0][1];_t.scale(150*Vn).translate([tr,pr])},_n)}function Mt(_t,jt,_n){return Ye(_t,function(Kt){var wn=+jt,Vn=wn/(Kt[1][1]-Kt[0][1]),tr=-Vn*Kt[0][0],pr=(wn-Vn*(Kt[1][1]+Kt[0][1]))/2;_t.scale(150*Vn).translate([tr,pr])},_n)}Jo.prototype={_radius:4.5,_circle:Wl(4.5),pointRadius:function(_t){return(_t=+_t)!==this._radius&&(this._radius=_t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(_t,jt){switch(this._point){case 0:this._string.push("M",_t,",",jt),this._point=1;break;case 1:this._string.push("L",_t,",",jt);break;default:null==this._circle&&(this._circle=Wl(this._radius)),this._string.push("M",_t,",",jt,this._circle)}},result:function(){if(this._string.length){var _t=this._string.join("");return this._string=[],_t}return null}},Va.prototype={constructor:Va,point:function(_t,jt){this.stream.point(_t,jt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var wt=m(30*d);function zt(_t,jt){return+jt?function(_n,Kt){function wn(Vn,tr,pr,Sr,yr,zr,Zr,Ar,Br,li,gi,Li,fr,Di){var ri=Zr-Vn,Ir=Ar-tr,Ii=ri*ri+Ir*Ir;if(Ii>4*Kt&&fr--){var aa=Sr+li,ya=yr+gi,Kr=zr+Li,Ta=E(aa*aa+ya*ya+Kr*Kr),pa=N(Kr/=Ta),Wi=p(p(Kr)-1)<a||p(pr-Br)<a?(pr+Br)/2:g(ya,aa),Dr=_n(Wi,pa),Ai=Dr[0],Ba=Dr[1],mi=Ai-Vn,Ua=Ba-tr,So=Ir*mi-ri*Ua;(So*So/Ii>Kt||p((ri*mi+Ir*Ua)/Ii-.5)>.3||Sr*li+yr*gi+zr*Li<wt)&&(wn(Vn,tr,pr,Sr,yr,zr,Ai,Ba,Wi,aa/=Ta,ya/=Ta,Kr,fr,Di),Di.point(Ai,Ba),wn(Ai,Ba,Wi,aa,ya,Kr,Zr,Ar,Br,li,gi,Li,fr,Di))}}return function(Vn){var tr,pr,Sr,yr,zr,Zr,Ar,Br,li,gi,Li,fr,Di={point:ri,lineStart:Ir,lineEnd:aa,polygonStart:function(){Vn.polygonStart(),Di.lineStart=ya},polygonEnd:function(){Vn.polygonEnd(),Di.lineStart=Ir}};function ri(pa,Wi){pa=_n(pa,Wi),Vn.point(pa[0],pa[1])}function Ir(){Br=NaN,Di.point=Ii,Vn.lineStart()}function Ii(pa,Wi){var Dr=pe([pa,Wi]),Ai=_n(pa,Wi);wn(Br,li,Ar,gi,Li,fr,Br=Ai[0],li=Ai[1],Ar=pa,gi=Dr[0],Li=Dr[1],fr=Dr[2],16,Vn),Vn.point(Br,li)}function aa(){Di.point=ri,Vn.lineEnd()}function ya(){Ir(),Di.point=Kr,Di.lineEnd=Ta}function Kr(pa,Wi){Ii(tr=pa,Wi),pr=Br,Sr=li,yr=gi,zr=Li,Zr=fr,Di.point=Ii}function Ta(){wn(Br,li,Ar,gi,Li,fr,pr,Sr,tr,yr,zr,Zr,16,Vn),Di.lineEnd=aa,aa()}return Di}}(_t,jt):(_n=_t,Ys({point:function(Kt,wn){Kt=_n(Kt,wn),this.stream.point(Kt[0],Kt[1])}}));var _n}var cn=Ys({point:function(_t,jt){this.stream.point(_t*d,jt*d)}});function hn(_t,jt,_n,Kt,wn){function Vn(tr,pr){return[jt+_t*(tr*=Kt),_n-_t*(pr*=wn)]}return Vn.invert=function(tr,pr){return[(tr-jt)/_t*Kt,(_n-pr)/_t*wn]},Vn}function ln(_t,jt,_n,Kt,wn,Vn){var tr=m(Vn),pr=k(Vn),Sr=tr*_t,yr=pr*_t,zr=tr/_t,Zr=pr/_t,Ar=(pr*_n-tr*jt)/_t,Br=(pr*jt+tr*_n)/_t;function li(gi,Li){return[Sr*(gi*=Kt)-yr*(Li*=wn)+jt,_n-yr*gi-Sr*Li]}return li.invert=function(gi,Li){return[Kt*(zr*gi-Zr*Li+Ar),wn*(Br-Zr*gi-zr*Li)]},li}function bn(_t){return En(function(){return _t})()}function En(_t){var jt,_n,Kt,wn,Vn,tr,pr,Sr,yr,zr,Zr=150,Ar=480,Br=250,li=0,gi=0,Li=0,fr=0,Di=0,ri=0,Ir=1,Ii=1,aa=null,ya=Gr,Kr=null,Ta=nr,pa=.5;function Wi(mi){return Sr(mi[0]*d,mi[1]*d)}function Dr(mi){return(mi=Sr.invert(mi[0],mi[1]))&&[mi[0]*s,mi[1]*s]}function Ai(){var mi=ln(Zr,0,0,Ir,Ii,ri).apply(null,jt(li,gi)),Ua=(ri?ln:hn)(Zr,Ar-mi[0],Br-mi[1],Ir,Ii,ri);return _n=Yt(Li,fr,Di),pr=Dt(jt,Ua),Sr=Dt(_n,pr),tr=zt(pr,pa),Ba()}function Ba(){return yr=zr=null,Wi}return Wi.stream=function(mi){return yr&&zr===mi?yr:yr=cn((Ua=_n,Ys({point:function(So,us){var Ls=Ua(So,us);return this.stream.point(Ls[0],Ls[1])}}))(ya(tr(Ta(zr=mi)))));var Ua},Wi.preclip=function(mi){return arguments.length?(ya=mi,aa=void 0,Ba()):ya},Wi.postclip=function(mi){return arguments.length?(Ta=mi,Kr=Kt=wn=Vn=null,Ba()):Ta},Wi.clipAngle=function(mi){return arguments.length?(ya=+mi?Lr(aa=mi*d):(aa=null,Gr),Ba()):aa*s},Wi.clipExtent=function(mi){return arguments.length?(Ta=null==mi?(Kr=Kt=wn=Vn=null,nr):Jr(Kr=+mi[0][0],Kt=+mi[0][1],wn=+mi[1][0],Vn=+mi[1][1]),Ba()):null==Kr?null:[[Kr,Kt],[wn,Vn]]},Wi.scale=function(mi){return arguments.length?(Zr=+mi,Ai()):Zr},Wi.translate=function(mi){return arguments.length?(Ar=+mi[0],Br=+mi[1],Ai()):[Ar,Br]},Wi.center=function(mi){return arguments.length?(li=mi[0]%360*d,gi=mi[1]%360*d,Ai()):[li*s,gi*s]},Wi.rotate=function(mi){return arguments.length?(Li=mi[0]%360*d,fr=mi[1]%360*d,Di=mi.length>2?mi[2]%360*d:0,Ai()):[Li*s,fr*s,Di*s]},Wi.angle=function(mi){return arguments.length?(ri=mi%360*d,Ai()):ri*s},Wi.reflectX=function(mi){return arguments.length?(Ir=mi?-1:1,Ai()):Ir<0},Wi.reflectY=function(mi){return arguments.length?(Ii=mi?-1:1,Ai()):Ii<0},Wi.precision=function(mi){return arguments.length?(tr=zt(pr,pa=mi*mi),Ba()):E(pa)},Wi.fitExtent=function(mi,Ua){return Ke(Wi,mi,Ua)},Wi.fitSize=function(mi,Ua){return ut(Wi,mi,Ua)},Wi.fitWidth=function(mi,Ua){return gt(Wi,mi,Ua)},Wi.fitHeight=function(mi,Ua){return Mt(Wi,mi,Ua)},function(){return jt=_t.apply(this,arguments),Wi.invert=jt.invert&&Dr,Ai()}}function On(_t){var jt=0,_n=l/3,Kt=En(_t),wn=Kt(jt,_n);return wn.parallels=function(Vn){return arguments.length?Kt(jt=Vn[0]*d,_n=Vn[1]*d):[jt*s,_n*s]},wn}function Nn(_t,jt){var _n=k(_t),Kt=(_n+k(jt))/2;if(p(Kt)<a)return function(pr){var Sr=m(pr);function yr(zr,Zr){return[zr*Sr,k(Zr)/Sr]}return yr.invert=function(zr,Zr){return[zr/Sr,N(Zr*Sr)]},yr}(_t);var wn=1+_n*(2*Kt-_n),Vn=E(wn)/Kt;function tr(pr,Sr){var yr=E(wn-2*Kt*k(Sr))/Kt;return[yr*k(pr*=Kt),Vn-yr*m(pr)]}return tr.invert=function(pr,Sr){var yr=Vn-Sr,zr=g(pr,p(yr))*C(yr);return yr*Kt<0&&(zr-=l*C(pr)*C(yr)),[zr/Kt,N((wn-(pr*pr+yr*yr)*Kt*Kt)/(2*Kt))]},tr}function Xn(){return On(Nn).scale(155.424).center([0,33.6442])}function Mr(){return Xn().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Or(_t){return function(jt,_n){var Kt=m(jt),wn=m(_n),Vn=_t(Kt*wn);return[Vn*wn*k(jt),Vn*k(_n)]}}function ii(_t){return function(jt,_n){var Kt=E(jt*jt+_n*_n),wn=_t(Kt),Vn=k(wn),tr=m(wn);return[g(jt*Vn,Kt*tr),N(Kt&&_n*Vn/Kt)]}}var ci=Or(function(_t){return E(2/(1+_t))});ci.invert=ii(function(_t){return 2*N(_t/2)});var vi=Or(function(_t){return(_t=D(_t))&&_t/k(_t)});function ai(_t,jt){return[_t,c(L((i+jt)/2))]}function Yi(_t){var jt,_n,Kt,wn=bn(_t),Vn=wn.center,tr=wn.scale,pr=wn.translate,Sr=wn.clipExtent,yr=null;function zr(){var Zr=l*tr(),Ar=wn(Dn(wn.rotate()).invert([0,0]));return Sr(null==yr?[[Ar[0]-Zr,Ar[1]-Zr],[Ar[0]+Zr,Ar[1]+Zr]]:_t===ai?[[Math.max(Ar[0]-Zr,yr),jt],[Math.min(Ar[0]+Zr,_n),Kt]]:[[yr,Math.max(Ar[1]-Zr,jt)],[_n,Math.min(Ar[1]+Zr,Kt)]])}return wn.scale=function(Zr){return arguments.length?(tr(Zr),zr()):tr()},wn.translate=function(Zr){return arguments.length?(pr(Zr),zr()):pr()},wn.center=function(Zr){return arguments.length?(Vn(Zr),zr()):Vn()},wn.clipExtent=function(Zr){return arguments.length?(null==Zr?yr=jt=_n=Kt=null:(yr=+Zr[0][0],jt=+Zr[0][1],_n=+Zr[1][0],Kt=+Zr[1][1]),zr()):null==yr?null:[[yr,jt],[_n,Kt]]},zr()}function Ni(_t){return L((i+_t)/2)}function Sa(_t,jt){var _n=m(_t),Kt=_t===jt?k(_t):c(_n/m(jt))/c(Ni(jt)/Ni(_t)),wn=_n*A(Ni(_t),Kt)/Kt;if(!Kt)return ai;function Vn(tr,pr){wn>0?pr<-i+a&&(pr=-i+a):pr>i-a&&(pr=i-a);var Sr=wn/A(Ni(pr),Kt);return[Sr*k(Kt*tr),wn-Sr*m(Kt*tr)]}return Vn.invert=function(tr,pr){var Sr=wn-pr,yr=C(Kt)*E(tr*tr+Sr*Sr),zr=g(tr,p(Sr))*C(Sr);return Sr*Kt<0&&(zr-=l*C(tr)*C(Sr)),[zr/Kt,2*f(A(wn/yr,1/Kt))-i]},Vn}function Da(_t,jt){return[_t,jt]}function Oa(_t,jt){var _n=m(_t),Kt=_t===jt?k(_t):(_n-m(jt))/(jt-_t),wn=_n/Kt+_t;if(p(Kt)<a)return Da;function Vn(tr,pr){var Sr=wn-pr,yr=Kt*tr;return[Sr*k(yr),wn-Sr*m(yr)]}return Vn.invert=function(tr,pr){var Sr=wn-pr,yr=g(tr,p(Sr))*C(Sr);return Sr*Kt<0&&(yr-=l*C(tr)*C(Sr)),[yr/Kt,wn-C(Kt)*E(tr*tr+Sr*Sr)]},Vn}vi.invert=ii(function(_t){return _t}),ai.invert=function(_t,jt){return[_t,2*f(w(jt))-i]},Da.invert=Da;var Co=1.340264,Mo=-.081106,io=893e-6,Ja=.003796,Eo=E(3)/2;function to(_t,jt){var _n=N(Eo*k(jt)),Kt=_n*_n,wn=Kt*Kt*Kt;return[_t*m(_n)/(Eo*(Co+3*Mo*Kt+wn*(7*io+9*Ja*Kt))),_n*(Co+Mo*Kt+wn*(io+Ja*Kt))]}function ps(_t,jt){var _n=m(jt),Kt=m(_t)*_n;return[_n*k(_t)/Kt,k(jt)/Kt]}function gs(_t,jt){var _n=jt*jt,Kt=_n*_n;return[_t*(.8707-.131979*_n+Kt*(Kt*(.003971*_n-.001529*Kt)-.013791)),jt*(1.007226+_n*(.015085+Kt*(.028874*_n-.044475-.005916*Kt)))]}function ls(_t,jt){return[m(jt)*k(_t),k(jt)]}function ws(_t,jt){var _n=m(jt),Kt=1+m(_t)*_n;return[_n*k(_t)/Kt,k(jt)/Kt]}function ba(_t,jt){return[c(L((i+jt)/2)),-_t]}to.invert=function(_t,jt){for(var _n,Kt=jt,wn=Kt*Kt,Vn=wn*wn*wn,tr=0;tr<12&&(Vn=(wn=(Kt-=_n=(Kt*(Co+Mo*wn+Vn*(io+Ja*wn))-jt)/(Co+3*Mo*wn+Vn*(7*io+9*Ja*wn)))*Kt)*wn*wn,!(p(_n)<1e-12));++tr);return[Eo*_t*(Co+3*Mo*wn+Vn*(7*io+9*Ja*wn))/m(Kt),N(k(Kt)/Eo)]},ps.invert=ii(f),gs.invert=function(_t,jt){var _n,Kt=jt,wn=25;do{var Vn=Kt*Kt,tr=Vn*Vn;Kt-=_n=(Kt*(1.007226+Vn*(.015085+tr*(.028874*Vn-.044475-.005916*tr)))-jt)/(1.007226+Vn*(.045255+tr*(.259866*Vn-.311325-.005916*11*tr)))}while(p(_n)>a&&--wn>0);return[_t/(.8707+(Vn=Kt*Kt)*(Vn*(Vn*Vn*Vn*(.003971-.001529*Vn)-.013791)-.131979)),Kt]},ls.invert=ii(N),ws.invert=ii(function(_t){return 2*f(_t)}),ba.invert=function(_t,jt){return[-jt,2*f(w(_t))-i]},y.geoAlbers=Mr,y.geoAlbersUsa=function(){var _t,jt,_n,Kt,wn,Vn,tr=Mr(),pr=Xn().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Sr=Xn().rotate([157,0]).center([-3,19.9]).parallels([8,18]),yr={point:function(Ar,Br){Vn=[Ar,Br]}};function zr(Ar){var Br=Ar[0],li=Ar[1];return Vn=null,_n.point(Br,li),Vn||(Kt.point(Br,li),Vn)||(wn.point(Br,li),Vn)}function Zr(){return _t=jt=null,zr}return zr.invert=function(Ar){var Br=tr.scale(),li=tr.translate(),gi=(Ar[0]-li[0])/Br,Li=(Ar[1]-li[1])/Br;return(Li>=.12&&Li<.234&&gi>=-.425&&gi<-.214?pr:Li>=.166&&Li<.234&&gi>=-.214&&gi<-.115?Sr:tr).invert(Ar)},zr.stream=function(Ar){return _t&&jt===Ar?_t:(Br=[tr.stream(jt=Ar),pr.stream(Ar),Sr.stream(Ar)],li=Br.length,_t={point:function(gi,Li){for(var fr=-1;++fr<li;)Br[fr].point(gi,Li)},sphere:function(){for(var gi=-1;++gi<li;)Br[gi].sphere()},lineStart:function(){for(var gi=-1;++gi<li;)Br[gi].lineStart()},lineEnd:function(){for(var gi=-1;++gi<li;)Br[gi].lineEnd()},polygonStart:function(){for(var gi=-1;++gi<li;)Br[gi].polygonStart()},polygonEnd:function(){for(var gi=-1;++gi<li;)Br[gi].polygonEnd()}});var Br,li},zr.precision=function(Ar){return arguments.length?(tr.precision(Ar),pr.precision(Ar),Sr.precision(Ar),Zr()):tr.precision()},zr.scale=function(Ar){return arguments.length?(tr.scale(Ar),pr.scale(.35*Ar),Sr.scale(Ar),zr.translate(tr.translate())):tr.scale()},zr.translate=function(Ar){if(!arguments.length)return tr.translate();var Br=tr.scale(),li=+Ar[0],gi=+Ar[1];return _n=tr.translate(Ar).clipExtent([[li-.455*Br,gi-.238*Br],[li+.455*Br,gi+.238*Br]]).stream(yr),Kt=pr.translate([li-.307*Br,gi+.201*Br]).clipExtent([[li-.425*Br+a,gi+.12*Br+a],[li-.214*Br-a,gi+.234*Br-a]]).stream(yr),wn=Sr.translate([li-.205*Br,gi+.212*Br]).clipExtent([[li-.214*Br+a,gi+.166*Br+a],[li-.115*Br-a,gi+.234*Br-a]]).stream(yr),Zr()},zr.fitExtent=function(Ar,Br){return Ke(zr,Ar,Br)},zr.fitSize=function(Ar,Br){return ut(zr,Ar,Br)},zr.fitWidth=function(Ar,Br){return gt(zr,Ar,Br)},zr.fitHeight=function(Ar,Br){return Mt(zr,Ar,Br)},zr.scale(1070)},y.geoArea=function(_t){return W.reset(),ee(_t,ae),2*W},y.geoAzimuthalEqualArea=function(){return bn(ci).scale(124.75).clipAngle(179.999)},y.geoAzimuthalEqualAreaRaw=ci,y.geoAzimuthalEquidistant=function(){return bn(vi).scale(79.4188).clipAngle(179.999)},y.geoAzimuthalEquidistantRaw=vi,y.geoBounds=function(_t){var jt,_n,Kt,wn,Vn,tr,pr;if(ye=je=-(Le=Ie=1/0),Ue=[],ee(_t,dn),_n=Ue.length){for(Ue.sort(ot),jt=1,Vn=[Kt=Ue[0]];jt<_n;++jt)it(Kt,(wn=Ue[jt])[0])||it(Kt,wn[1])?(Qe(Kt[0],wn[1])>Qe(Kt[0],Kt[1])&&(Kt[1]=wn[1]),Qe(wn[0],Kt[1])>Qe(Kt[0],Kt[1])&&(Kt[0]=wn[0])):Vn.push(Kt=wn);for(tr=-1/0,jt=0,Kt=Vn[_n=Vn.length-1];jt<=_n;Kt=wn,++jt)(pr=Qe(Kt[1],(wn=Vn[jt])[0]))>tr&&(tr=pr,Le=wn[0],je=Kt[1])}return Ue=qe=null,Le===1/0||Ie===1/0?[[NaN,NaN],[NaN,NaN]]:[[Le,Ie],[je,ye]]},y.geoCentroid=function(_t){Xe=lt=He=$e=et=nt=ct=bt=kt=Bt=Et=0,ee(_t,mt);var jt=kt,_n=Bt,Kt=Et,wn=jt*jt+_n*_n+Kt*Kt;return wn<1e-12&&(jt=nt,_n=ct,Kt=bt,lt<a&&(jt=He,_n=$e,Kt=et),(wn=jt*jt+_n*_n+Kt*Kt)<1e-12)?[NaN,NaN]:[g(_n,jt)*s,N(Kt/E(wn))*s]},y.geoCircle=function(){var _t,jt,_n=dt([0,0]),Kt=dt(90),wn=dt(6),Vn={point:function(pr,Sr){_t.push(pr=jt(pr,Sr)),pr[0]*=s,pr[1]*=s}};function tr(){var pr=_n.apply(this,arguments),Sr=Kt.apply(this,arguments)*d,yr=wn.apply(this,arguments)*d;return _t=[],jt=Yt(-pr[0]*d,-pr[1]*d,0).invert,kn(Vn,Sr,yr,1),pr={type:"Polygon",coordinates:[_t]},_t=jt=null,pr}return tr.center=function(pr){return arguments.length?(_n="function"==typeof pr?pr:dt([+pr[0],+pr[1]]),tr):_n},tr.radius=function(pr){return arguments.length?(Kt="function"==typeof pr?pr:dt(+pr),tr):Kt},tr.precision=function(pr){return arguments.length?(wn="function"==typeof pr?pr:dt(+pr),tr):wn},tr},y.geoClipAntimeridian=Gr,y.geoClipCircle=Lr,y.geoClipExtent=function(){var _t,jt,_n,Kt=0,wn=0,Vn=960,tr=500;return _n={stream:function(pr){return _t&&jt===pr?_t:_t=Jr(Kt,wn,Vn,tr)(jt=pr)},extent:function(pr){return arguments.length?(Kt=+pr[0][0],wn=+pr[0][1],Vn=+pr[1][0],tr=+pr[1][1],_t=jt=null,_n):[[Kt,wn],[Vn,tr]]}}},y.geoClipRectangle=Jr,y.geoConicConformal=function(){return On(Sa).scale(109.5).parallels([30,30])},y.geoConicConformalRaw=Sa,y.geoConicEqualArea=Xn,y.geoConicEqualAreaRaw=Nn,y.geoConicEquidistant=function(){return On(Oa).scale(131.154).center([0,13.9389])},y.geoConicEquidistantRaw=Oa,y.geoContains=function(_t,jt){return(_t&&Ut.hasOwnProperty(_t.type)?Ut[_t.type]:Tn)(_t,jt)},y.geoDistance=er,y.geoEqualEarth=function(){return bn(to).scale(177.158)},y.geoEqualEarthRaw=to,y.geoEquirectangular=function(){return bn(Da).scale(152.63)},y.geoEquirectangularRaw=Da,y.geoGnomonic=function(){return bn(ps).scale(144.049).clipAngle(60)},y.geoGnomonicRaw=ps,y.geoGraticule=Yn,y.geoGraticule10=function(){return Yn()()},y.geoIdentity=function(){var _t,jt,_n,Kt,wn,Vn,tr,pr=1,Sr=0,yr=0,zr=1,Zr=1,Ar=0,Br=null,li=1,gi=1,Li=Ys({point:function(Ir,Ii){var aa=ri([Ir,Ii]);this.stream.point(aa[0],aa[1])}}),fr=nr;function Di(){return li=pr*zr,gi=pr*Zr,Vn=tr=null,ri}function ri(Ir){var Ii=Ir[0]*li,aa=Ir[1]*gi;if(Ar){var ya=aa*_t-Ii*jt;Ii=Ii*_t+aa*jt,aa=ya}return[Ii+Sr,aa+yr]}return ri.invert=function(Ir){var Ii=Ir[0]-Sr,aa=Ir[1]-yr;if(Ar){var ya=aa*_t+Ii*jt;Ii=Ii*_t-aa*jt,aa=ya}return[Ii/li,aa/gi]},ri.stream=function(Ir){return Vn&&tr===Ir?Vn:Vn=Li(fr(tr=Ir))},ri.postclip=function(Ir){return arguments.length?(fr=Ir,Br=_n=Kt=wn=null,Di()):fr},ri.clipExtent=function(Ir){return arguments.length?(fr=null==Ir?(Br=_n=Kt=wn=null,nr):Jr(Br=+Ir[0][0],_n=+Ir[0][1],Kt=+Ir[1][0],wn=+Ir[1][1]),Di()):null==Br?null:[[Br,_n],[Kt,wn]]},ri.scale=function(Ir){return arguments.length?(pr=+Ir,Di()):pr},ri.translate=function(Ir){return arguments.length?(Sr=+Ir[0],yr=+Ir[1],Di()):[Sr,yr]},ri.angle=function(Ir){return arguments.length?(jt=k(Ar=Ir%360*d),_t=m(Ar),Di()):Ar*s},ri.reflectX=function(Ir){return arguments.length?(zr=Ir?-1:1,Di()):zr<0},ri.reflectY=function(Ir){return arguments.length?(Zr=Ir?-1:1,Di()):Zr<0},ri.fitExtent=function(Ir,Ii){return Ke(ri,Ir,Ii)},ri.fitSize=function(Ir,Ii){return ut(ri,Ir,Ii)},ri.fitWidth=function(Ir,Ii){return gt(ri,Ir,Ii)},ri.fitHeight=function(Ir,Ii){return Mt(ri,Ir,Ii)},ri},y.geoInterpolate=function(_t,jt){var _n=_t[0]*d,Kt=_t[1]*d,wn=jt[0]*d,Vn=jt[1]*d,tr=m(Kt),pr=k(Kt),Sr=m(Vn),yr=k(Vn),zr=tr*m(_n),Zr=tr*k(_n),Ar=Sr*m(wn),Br=Sr*k(wn),li=2*N(E(F(Vn-Kt)+tr*Sr*F(wn-_n))),gi=k(li),Li=li?function(fr){var Di=k(fr*=li)/gi,ri=k(li-fr)/gi,Ir=ri*zr+Di*Ar,Ii=ri*Zr+Di*Br,aa=ri*pr+Di*yr;return[g(Ii,Ir)*s,g(aa,E(Ir*Ir+Ii*Ii))*s]}:function(){return[_n*s,Kt*s]};return Li.distance=li,Li},y.geoLength=Hr,y.geoMercator=function(){return Yi(ai).scale(961/h)},y.geoMercatorRaw=ai,y.geoNaturalEarth1=function(){return bn(gs).scale(175.295)},y.geoNaturalEarth1Raw=gs,y.geoOrthographic=function(){return bn(ls).scale(249.5).clipAngle(90+a)},y.geoOrthographicRaw=ls,y.geoPath=function(_t,jt){var _n,Kt,wn=4.5;function Vn(tr){return tr&&("function"==typeof wn&&Kt.pointRadius(+wn.apply(this,arguments)),ee(tr,_n(Kt))),Kt.result()}return Vn.area=function(tr){return ee(tr,_n(ei)),ei.result()},Vn.measure=function(tr){return ee(tr,_n(_s)),_s.result()},Vn.bounds=function(tr){return ee(tr,_n(hi)),hi.result()},Vn.centroid=function(tr){return ee(tr,_n(ro)),ro.result()},Vn.projection=function(tr){return arguments.length?(_n=null==tr?(_t=null,nr):(_t=tr).stream,Vn):_t},Vn.context=function(tr){return arguments.length?(Kt=null==tr?(jt=null,new Jo):new kl(jt=tr),"function"!=typeof wn&&Kt.pointRadius(wn),Vn):jt},Vn.pointRadius=function(tr){return arguments.length?(wn="function"==typeof tr?tr:(Kt.pointRadius(+tr),+tr),Vn):wn},Vn.projection(_t).context(jt)},y.geoProjection=bn,y.geoProjectionMutator=En,y.geoRotation=Dn,y.geoStereographic=function(){return bn(ws).scale(250).clipAngle(142)},y.geoStereographicRaw=ws,y.geoStream=ee,y.geoTransform=function(_t){return{stream:Ys(_t)}},y.geoTransverseMercator=function(){var _t=Yi(ba),jt=_t.center,_n=_t.rotate;return _t.center=function(Kt){return arguments.length?jt([-Kt[1],Kt[0]]):[(Kt=jt())[1],-Kt[0]]},_t.rotate=function(Kt){return arguments.length?_n([Kt[0],Kt[1],Kt.length>2?Kt[2]+90:90]):[(Kt=_n())[0],Kt[1],Kt[2]-90]},_n([0,0,90]).scale(159.155)},y.geoTransverseMercatorRaw=ba,Object.defineProperty(y,"__esModule",{value:!0})},"object"==typeof se&&void 0!==oe?x(se,b("d3-array")):x((y=y||self).d3=y.d3||{},y.d3)},{"d3-array":107}],115:[function(b,oe,se){var y;y=this,function(y){"use strict";function x(de,_e){return de.parent===_e.parent?1:2}function M(de,_e){return de+_e.x}function _(de,_e){return Math.max(de,_e.y)}function e(de){var _e=0,me=de.children,we=me&&me.length;if(we)for(;--we>=0;)_e+=me[we].value;else _e=1;de.value=_e}function o(de,_e){var me,we,De,Le,Ie,je=new v(de),ye=+de.value&&(je.value=de.value),Me=[je];for(null==_e&&(_e=a);me=Me.pop();)if(ye&&(me.value=+me.data.value),(De=_e(me.data))&&(Ie=De.length))for(me.children=new Array(Ie),Le=Ie-1;Le>=0;--Le)Me.push(we=me.children[Le]=new v(De[Le])),we.parent=me,we.depth=me.depth+1;return je.eachBefore(i)}function a(de){return de.children}function l(de){de.data=de.data.data}function i(de){var _e=0;do{de.height=_e}while((de=de.parent)&&de.height<++_e)}function v(de){this.data=de,this.depth=this.height=0,this.parent=null}v.prototype=o.prototype={constructor:v,count:function(){return this.eachAfter(e)},each:function(de){var _e,me,we,De,Le=this,Ie=[Le];do{for(_e=Ie.reverse(),Ie=[];Le=_e.pop();)if(de(Le),me=Le.children)for(we=0,De=me.length;we<De;++we)Ie.push(me[we])}while(Ie.length);return this},eachAfter:function(de){for(var _e,me,we,De=this,Le=[De],Ie=[];De=Le.pop();)if(Ie.push(De),_e=De.children)for(me=0,we=_e.length;me<we;++me)Le.push(_e[me]);for(;De=Ie.pop();)de(De);return this},eachBefore:function(de){for(var _e,me,we=this,De=[we];we=De.pop();)if(de(we),_e=we.children)for(me=_e.length-1;me>=0;--me)De.push(_e[me]);return this},sum:function(de){return this.eachAfter(function(_e){for(var me=+de(_e.data)||0,we=_e.children,De=we&&we.length;--De>=0;)me+=we[De].value;_e.value=me})},sort:function(de){return this.eachBefore(function(_e){_e.children&&_e.children.sort(de)})},path:function(de){for(var _e=this,me=function(Le,Ie){if(Le===Ie)return Le;var je=Le.ancestors(),ye=Ie.ancestors(),Me=null;for(Le=je.pop(),Ie=ye.pop();Le===Ie;)Me=Le,Le=je.pop(),Ie=ye.pop();return Me}(_e,de),we=[_e];_e!==me;)we.push(_e=_e.parent);for(var De=we.length;de!==me;)we.splice(De,0,de),de=de.parent;return we},ancestors:function(){for(var de=this,_e=[de];de=de.parent;)_e.push(de);return _e},descendants:function(){var de=[];return this.each(function(_e){de.push(_e)}),de},leaves:function(){var de=[];return this.eachBefore(function(_e){_e.children||de.push(_e)}),de},links:function(){var de=this,_e=[];return de.each(function(me){me!==de&&_e.push({source:me.parent,target:me})}),_e},copy:function(){return o(this).eachBefore(l)}};var h=Array.prototype.slice;function s(de){for(var _e,me,we=0,De=(de=function(Ie){for(var je,ye,Me=Ie.length;Me;)ye=Math.random()*Me--|0,je=Ie[Me],Ie[Me]=Ie[ye],Ie[ye]=je;return Ie}(h.call(de))).length,Le=[];we<De;)_e=de[we],me&&f(me,_e)?++we:(me=m(Le=d(Le,_e)),we=0);return me}function d(de,_e){var me,we;if(g(_e,de))return[_e];for(me=0;me<de.length;++me)if(p(_e,de[me])&&g(u(de[me],_e),de))return[de[me],_e];for(me=0;me<de.length-1;++me)for(we=me+1;we<de.length;++we)if(p(u(de[me],de[we]),_e)&&p(u(de[me],_e),de[we])&&p(u(de[we],_e),de[me])&&g(w(de[me],de[we],_e),de))return[de[me],de[we],_e];throw new Error}function p(de,_e){var me=de.r-_e.r,we=_e.x-de.x,De=_e.y-de.y;return me<0||me*me<we*we+De*De}function f(de,_e){var me=de.r-_e.r+1e-6,we=_e.x-de.x,De=_e.y-de.y;return me>0&&me*me>we*we+De*De}function g(de,_e){for(var me=0;me<_e.length;++me)if(!f(de,_e[me]))return!1;return!0}function m(de){switch(de.length){case 1:return{x:(_e=de[0]).x,y:_e.y,r:_e.r};case 2:return u(de[0],de[1]);case 3:return w(de[0],de[1],de[2])}var _e}function u(de,_e){var me=de.x,we=de.y,De=de.r,Le=_e.x,Ie=_e.y,je=_e.r,ye=Le-me,Me=Ie-we,Oe=je-De,Pe=Math.sqrt(ye*ye+Me*Me);return{x:(me+Le+ye/Pe*Oe)/2,y:(we+Ie+Me/Pe*Oe)/2,r:(Pe+De+je)/2}}function w(de,_e,me){var we=de.x,De=de.y,Le=de.r,Ie=_e.x,je=_e.y,ye=_e.r,Me=me.x,Oe=me.y,Pe=me.r,Re=we-Ie,Ue=we-Me,qe=De-je,Xe=De-Oe,lt=ye-Le,He=Pe-Le,$e=we*we+De*De-Le*Le,et=$e-Ie*Ie-je*je+ye*ye,nt=$e-Me*Me-Oe*Oe+Pe*Pe,ct=Ue*qe-Re*Xe,bt=(qe*nt-Xe*et)/(2*ct)-we,kt=(Xe*lt-qe*He)/ct,Bt=(Ue*et-Re*nt)/(2*ct)-De,Et=(Re*He-Ue*lt)/ct,ht=kt*kt+Et*Et-1,at=2*(Le+bt*kt+Bt*Et),Ft=bt*bt+Bt*Bt-Le*Le,en=-(ht?(at+Math.sqrt(at*at-4*ht*Ft))/(2*ht):Ft/at);return{x:we+bt+kt*en,y:De+Bt+Et*en,r:en}}function c(de,_e,me){var we,De,Le,Ie,je=de.x-_e.x,ye=de.y-_e.y,Me=je*je+ye*ye;Me?(De=_e.r+me.r,Ie=de.r+me.r,(De*=De)>(Ie*=Ie)?(we=(Me+Ie-De)/(2*Me),Le=Math.sqrt(Math.max(0,Ie/Me-we*we)),me.x=de.x-we*je-Le*ye,me.y=de.y-we*ye+Le*je):(we=(Me+De-Ie)/(2*Me),Le=Math.sqrt(Math.max(0,De/Me-we*we)),me.x=_e.x+we*je-Le*ye,me.y=_e.y+we*ye+Le*je)):(me.x=_e.x+me.r,me.y=_e.y)}function A(de,_e){var me=de.r+_e.r-1e-6,we=_e.x-de.x,De=_e.y-de.y;return me>0&&me*me>we*we+De*De}function k(de){var _e=de._,me=de.next._,we=_e.r+me.r,De=(_e.x*me.r+me.x*_e.r)/we,Le=(_e.y*me.r+me.y*_e.r)/we;return De*De+Le*Le}function C(de){this._=de,this.next=null,this.previous=null}function E(de){if(!(De=de.length))return 0;var _e,me,we,De,Le,Ie,je,ye,Me,Oe,Pe;if((_e=de[0]).x=0,_e.y=0,!(De>1))return _e.r;if(_e.x=-(me=de[1]).r,me.x=_e.r,me.y=0,!(De>2))return _e.r+me.r;c(me,_e,we=de[2]),_e=new C(_e),me=new C(me),we=new C(we),_e.next=we.previous=me,me.next=_e.previous=we,we.next=me.previous=_e;e:for(je=3;je<De;++je){c(_e._,me._,we=de[je]),we=new C(we),ye=me.next,Me=_e.previous,Oe=me._.r,Pe=_e._.r;do{if(Oe<=Pe){if(A(ye._,we._)){_e.next=me=ye,me.previous=_e,--je;continue e}Oe+=ye._.r,ye=ye.next}else{if(A(Me._,we._)){(_e=Me).next=me,me.previous=_e,--je;continue e}Pe+=Me._.r,Me=Me.previous}}while(ye!==Me.next);for(we.previous=_e,we.next=me,_e.next=me.previous=me=we,Le=k(_e);(we=we.next)!==me;)(Ie=k(we))<Le&&(_e=we,Le=Ie);me=_e.next}for(_e=[me._],we=me;(we=we.next)!==me;)_e.push(we._);for(we=s(_e),je=0;je<De;++je)(_e=de[je]).x-=we.x,_e.y-=we.y;return we.r}function L(de){return null==de?null:D(de)}function D(de){if("function"!=typeof de)throw new Error;return de}function N(){return 0}function F(de){return function(){return de}}function I(de){return Math.sqrt(de.value)}function P(de){return function(_e){_e.children||(_e.r=Math.max(0,+de(_e)||0))}}function j(de,_e){return function(me){if(we=me.children){var we,De,Le,Ie=we.length,je=de(me)*_e||0;if(je)for(De=0;De<Ie;++De)we[De].r+=je;if(Le=E(we),je)for(De=0;De<Ie;++De)we[De].r-=je;me.r=Le+je}}}function V(de){return function(_e){var me=_e.parent;_e.r*=de,me&&(_e.x=me.x+de*_e.x,_e.y=me.y+de*_e.y)}}function Z(de){de.x0=Math.round(de.x0),de.y0=Math.round(de.y0),de.x1=Math.round(de.x1),de.y1=Math.round(de.y1)}function Y(de,_e,me,we,De){for(var Le,Ie=de.children,je=-1,ye=Ie.length,Me=de.value&&(we-_e)/de.value;++je<ye;)(Le=Ie[je]).y0=me,Le.y1=De,Le.x0=_e,Le.x1=_e+=Le.value*Me}var ee={depth:-1},re={};function X(de){return de.id}function K(de){return de.parentId}function ie(de,_e){return de.parent===_e.parent?1:2}function q(de){var _e=de.children;return _e?_e[0]:de.t}function U(de){var _e=de.children;return _e?_e[_e.length-1]:de.t}function W(de,_e,me){var we=me/(_e.i-de.i);_e.c-=we,_e.s+=me,de.c+=we,_e.z+=me,_e.m+=me}function ae(de,_e,me){return de.a.parent===_e.parent?de.a:me}function G(de,_e){this._=de,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=_e}function te(de,_e,me,we,De){for(var Le,Ie=de.children,je=-1,ye=Ie.length,Me=de.value&&(De-me)/de.value;++je<ye;)(Le=Ie[je]).x0=_e,Le.x1=we,Le.y0=me,Le.y1=me+=Le.value*Me}G.prototype=Object.create(v.prototype);var ne=(1+Math.sqrt(5))/2;function le(de,_e,me,we,De,Le){for(var Ie,je,ye,Me,Oe,Pe,Re,Ue,qe,Xe,lt,He=[],$e=_e.children,et=0,nt=0,ct=$e.length,bt=_e.value;et<ct;){ye=De-me,Me=Le-we;do{Oe=$e[nt++].value}while(!Oe&&nt<ct);for(Pe=Re=Oe,lt=Oe*Oe*(Xe=Math.max(Me/ye,ye/Me)/(bt*de)),qe=Math.max(Re/lt,lt/Pe);nt<ct;++nt){if(Oe+=je=$e[nt].value,je<Pe&&(Pe=je),je>Re&&(Re=je),lt=Oe*Oe*Xe,(Ue=Math.max(Re/lt,lt/Pe))>qe){Oe-=je;break}qe=Ue}He.push(Ie={value:Oe,dice:ye<Me,children:$e.slice(et,nt)}),Ie.dice?Y(Ie,me,we,De,bt?we+=Me*Oe/bt:Le):te(Ie,me,we,bt?me+=ye*Oe/bt:De,Le),bt-=Oe,et=nt}return He}var ue=function de(_e){function me(we,De,Le,Ie,je){le(_e,we,De,Le,Ie,je)}return me.ratio=function(we){return de((we=+we)>1?we:1)},me}(ne),pe=function de(_e){function me(we,De,Le,Ie,je){if((ye=we._squarify)&&ye.ratio===_e)for(var ye,Me,Oe,Pe,Re,Ue=-1,qe=ye.length,Xe=we.value;++Ue<qe;){for(Oe=(Me=ye[Ue]).children,Pe=Me.value=0,Re=Oe.length;Pe<Re;++Pe)Me.value+=Oe[Pe].value;Me.dice?Y(Me,De,Le,Ie,Le+=(je-Le)*Me.value/Xe):te(Me,De,Le,De+=(Ie-De)*Me.value/Xe,je),Xe-=Me.value}else we._squarify=ye=le(_e,we,De,Le,Ie,je),ye.ratio=_e}return me.ratio=function(we){return de((we=+we)>1?we:1)},me}(ne);y.cluster=function(){var de=x,_e=1,me=1,we=!1;function De(Le){var Ie,je=0;Le.eachAfter(function(Re){var qe,Ue=Re.children;Ue?(Re.x=(qe=Ue).reduce(M,0)/qe.length,Re.y=function(qe){return 1+qe.reduce(_,0)}(Ue)):(Re.x=Ie?je+=de(Re,Ie):0,Re.y=0,Ie=Re)});var ye=function(Re){for(var Ue;Ue=Re.children;)Re=Ue[0];return Re}(Le),Me=function(Re){for(var Ue;Ue=Re.children;)Re=Ue[Ue.length-1];return Re}(Le),Oe=ye.x-de(ye,Me)/2,Pe=Me.x+de(Me,ye)/2;return Le.eachAfter(we?function(Re){Re.x=(Re.x-Le.x)*_e,Re.y=(Le.y-Re.y)*me}:function(Re){Re.x=(Re.x-Oe)/(Pe-Oe)*_e,Re.y=(1-(Le.y?Re.y/Le.y:1))*me})}return De.separation=function(Le){return arguments.length?(de=Le,De):de},De.size=function(Le){return arguments.length?(we=!1,_e=+Le[0],me=+Le[1],De):we?null:[_e,me]},De.nodeSize=function(Le){return arguments.length?(we=!0,_e=+Le[0],me=+Le[1],De):we?[_e,me]:null},De},y.hierarchy=o,y.pack=function(){var de=null,_e=1,me=1,we=N;function De(Le){return Le.x=_e/2,Le.y=me/2,de?Le.eachBefore(P(de)).eachAfter(j(we,.5)).eachBefore(V(1)):Le.eachBefore(P(I)).eachAfter(j(N,1)).eachAfter(j(we,Le.r/Math.min(_e,me))).eachBefore(V(Math.min(_e,me)/(2*Le.r))),Le}return De.radius=function(Le){return arguments.length?(de=L(Le),De):de},De.size=function(Le){return arguments.length?(_e=+Le[0],me=+Le[1],De):[_e,me]},De.padding=function(Le){return arguments.length?(we="function"==typeof Le?Le:F(+Le),De):we},De},y.packEnclose=s,y.packSiblings=function(de){return E(de),de},y.partition=function(){var de=1,_e=1,me=0,we=!1;function De(Le){var je,ye,Ie=Le.height+1;return Le.x0=Le.y0=me,Le.x1=de,Le.y1=_e/Ie,Le.eachBefore((je=_e,ye=Ie,function(Me){Me.children&&Y(Me,Me.x0,je*(Me.depth+1)/ye,Me.x1,je*(Me.depth+2)/ye);var Oe=Me.x0,Pe=Me.y0,Re=Me.x1-me,Ue=Me.y1-me;Re<Oe&&(Oe=Re=(Oe+Re)/2),Ue<Pe&&(Pe=Ue=(Pe+Ue)/2),Me.x0=Oe,Me.y0=Pe,Me.x1=Re,Me.y1=Ue})),we&&Le.eachBefore(Z),Le}return De.round=function(Le){return arguments.length?(we=!!Le,De):we},De.size=function(Le){return arguments.length?(de=+Le[0],_e=+Le[1],De):[de,_e]},De.padding=function(Le){return arguments.length?(me=+Le,De):me},De},y.stratify=function(){var de=X,_e=K;function me(we){var De,Le,Ie,je,ye,Me,Oe,Pe=we.length,Re=new Array(Pe),Ue={};for(Le=0;Le<Pe;++Le)ye=Re[Le]=new v(De=we[Le]),null!=(Me=de(De,Le,we))&&(Me+="")&&(Ue[Oe="$"+(ye.id=Me)]=Oe in Ue?re:ye);for(Le=0;Le<Pe;++Le)if(ye=Re[Le],null!=(Me=_e(we[Le],Le,we))&&(Me+="")){if(!(je=Ue["$"+Me]))throw new Error("missing: "+Me);if(je===re)throw new Error("ambiguous: "+Me);je.children?je.children.push(ye):je.children=[ye],ye.parent=je}else{if(Ie)throw new Error("multiple roots");Ie=ye}if(!Ie)throw new Error("no root");if(Ie.parent=ee,Ie.eachBefore(function(qe){qe.depth=qe.parent.depth+1,--Pe}).eachBefore(i),Ie.parent=null,Pe>0)throw new Error("cycle");return Ie}return me.id=function(we){return arguments.length?(de=D(we),me):de},me.parentId=function(we){return arguments.length?(_e=D(we),me):_e},me},y.tree=function(){var de=ie,_e=1,me=1,we=null;function De(ye){var Me=function(He){for(var $e,et,nt,ct,bt,kt=new G(He,0),Bt=[kt];$e=Bt.pop();)if(nt=$e._.children)for($e.children=new Array(bt=nt.length),ct=bt-1;ct>=0;--ct)Bt.push(et=$e.children[ct]=new G(nt[ct],ct)),et.parent=$e;return(kt.parent=new G(null,0)).children=[kt],kt}(ye);if(Me.eachAfter(Le),Me.parent.m=-Me.z,Me.eachBefore(Ie),we)ye.eachBefore(je);else{var Oe=ye,Pe=ye,Re=ye;ye.eachBefore(function(He){He.x<Oe.x&&(Oe=He),He.x>Pe.x&&(Pe=He),He.depth>Re.depth&&(Re=He)});var Ue=Oe===Pe?1:de(Oe,Pe)/2,qe=Ue-Oe.x,Xe=_e/(Pe.x+Ue+qe),lt=me/(Re.depth||1);ye.eachBefore(function(He){He.x=(He.x+qe)*Xe,He.y=He.depth*lt})}return ye}function Le(ye){var Me=ye.children,Oe=ye.parent.children,Pe=ye.i?Oe[ye.i-1]:null;if(Me){!function(Ue){for(var qe,Xe=0,lt=0,He=Ue.children,$e=He.length;--$e>=0;)(qe=He[$e]).z+=Xe,qe.m+=Xe,Xe+=qe.s+(lt+=qe.c)}(ye);var Re=(Me[0].z+Me[Me.length-1].z)/2;Pe?(ye.z=Pe.z+de(ye._,Pe._),ye.m=ye.z-Re):ye.z=Re}else Pe&&(ye.z=Pe.z+de(ye._,Pe._));ye.parent.A=function(Ue,qe,Xe){if(qe){for(var lt,He=Ue,$e=Ue,et=qe,nt=He.parent.children[0],ct=He.m,bt=$e.m,kt=et.m,Bt=nt.m;et=U(et),He=q(He),et&&He;)nt=q(nt),($e=U($e)).a=Ue,(lt=et.z+kt-He.z-ct+de(et._,He._))>0&&(W(ae(et,Ue,Xe),Ue,lt),ct+=lt,bt+=lt),kt+=et.m,ct+=He.m,Bt+=nt.m,bt+=$e.m;et&&!U($e)&&($e.t=et,$e.m+=kt-bt),He&&!q(nt)&&(nt.t=He,nt.m+=ct-Bt,Xe=Ue)}return Xe}(ye,Pe,ye.parent.A||Oe[0])}function Ie(ye){ye._.x=ye.z+ye.parent.m,ye.m+=ye.parent.m}function je(ye){ye.x*=_e,ye.y=ye.depth*me}return De.separation=function(ye){return arguments.length?(de=ye,De):de},De.size=function(ye){return arguments.length?(we=!1,_e=+ye[0],me=+ye[1],De):we?null:[_e,me]},De.nodeSize=function(ye){return arguments.length?(we=!0,_e=+ye[0],me=+ye[1],De):we?[_e,me]:null},De},y.treemap=function(){var de=ue,_e=!1,me=1,we=1,De=[0],Le=N,Ie=N,je=N,ye=N,Me=N;function Oe(Re){return Re.x0=Re.y0=0,Re.x1=me,Re.y1=we,Re.eachBefore(Pe),De=[0],_e&&Re.eachBefore(Z),Re}function Pe(Re){var Ue=De[Re.depth],qe=Re.x0+Ue,Xe=Re.y0+Ue,lt=Re.x1-Ue,He=Re.y1-Ue;lt<qe&&(qe=lt=(qe+lt)/2),He<Xe&&(Xe=He=(Xe+He)/2),Re.x0=qe,Re.y0=Xe,Re.x1=lt,Re.y1=He,Re.children&&(Ue=De[Re.depth+1]=Le(Re)/2,qe+=Me(Re)-Ue,Xe+=Ie(Re)-Ue,(lt-=je(Re)-Ue)<qe&&(qe=lt=(qe+lt)/2),(He-=ye(Re)-Ue)<Xe&&(Xe=He=(Xe+He)/2),de(Re,qe,Xe,lt,He))}return Oe.round=function(Re){return arguments.length?(_e=!!Re,Oe):_e},Oe.size=function(Re){return arguments.length?(me=+Re[0],we=+Re[1],Oe):[me,we]},Oe.tile=function(Re){return arguments.length?(de=D(Re),Oe):de},Oe.padding=function(Re){return arguments.length?Oe.paddingInner(Re).paddingOuter(Re):Oe.paddingInner()},Oe.paddingInner=function(Re){return arguments.length?(Le="function"==typeof Re?Re:F(+Re),Oe):Le},Oe.paddingOuter=function(Re){return arguments.length?Oe.paddingTop(Re).paddingRight(Re).paddingBottom(Re).paddingLeft(Re):Oe.paddingTop()},Oe.paddingTop=function(Re){return arguments.length?(Ie="function"==typeof Re?Re:F(+Re),Oe):Ie},Oe.paddingRight=function(Re){return arguments.length?(je="function"==typeof Re?Re:F(+Re),Oe):je},Oe.paddingBottom=function(Re){return arguments.length?(ye="function"==typeof Re?Re:F(+Re),Oe):ye},Oe.paddingLeft=function(Re){return arguments.length?(Me="function"==typeof Re?Re:F(+Re),Oe):Me},Oe},y.treemapBinary=function(de,_e,me,we,De){var Le,Ie,je=de.children,ye=je.length,Me=new Array(ye+1);for(Me[0]=Ie=Le=0;Le<ye;++Le)Me[Le+1]=Ie+=je[Le].value;!function Oe(Pe,Re,Ue,qe,Xe,lt,He){if(Pe>=Re-1){var $e=je[Pe];return $e.x0=qe,$e.y0=Xe,$e.x1=lt,void($e.y1=He)}for(var et=Me[Pe],nt=Ue/2+et,ct=Pe+1,bt=Re-1;ct<bt;){var kt=ct+bt>>>1;Me[kt]<nt?ct=kt+1:bt=kt}nt-Me[ct-1]<Me[ct]-nt&&Pe+1<ct&&--ct;var Bt=Me[ct]-et,Et=Ue-Bt;if(lt-qe>He-Xe){var ht=(qe*Et+lt*Bt)/Ue;Oe(Pe,ct,Bt,qe,Xe,ht,He),Oe(ct,Re,Et,ht,Xe,lt,He)}else{var at=(Xe*Et+He*Bt)/Ue;Oe(Pe,ct,Bt,qe,Xe,lt,at),Oe(ct,Re,Et,qe,at,lt,He)}}(0,ye,de.value,_e,me,we,De)},y.treemapDice=Y,y.treemapResquarify=pe,y.treemapSlice=te,y.treemapSliceDice=function(de,_e,me,we,De){(1&de.depth?te:Y)(de,_e,me,we,De)},y.treemapSquarify=ue,Object.defineProperty(y,"__esModule",{value:!0})}("object"==typeof se&&void 0!==oe?se:(y=y||self).d3=y.d3||{})},{}],116:[function(b,oe,se){var y,x;y=this,x=function(y,x){"use strict";function M(ne,le,ue,pe,de){var _e=ne*ne,me=_e*ne;return((1-3*ne+3*_e-me)*le+(4-6*_e+3*me)*ue+(1+3*ne+3*_e-3*me)*pe+me*de)/6}function _(ne){var le=ne.length-1;return function(ue){var pe=ue<=0?ue=0:ue>=1?(ue=1,le-1):Math.floor(ue*le),de=ne[pe],_e=ne[pe+1];return M((ue-pe/le)*le,pe>0?ne[pe-1]:2*de-_e,de,_e,pe<le-1?ne[pe+2]:2*_e-de)}}function e(ne){var le=ne.length;return function(ue){var pe=Math.floor(((ue%=1)<0?++ue:ue)*le);return M((ue-pe/le)*le,ne[(pe+le-1)%le],ne[pe%le],ne[(pe+1)%le],ne[(pe+2)%le])}}function o(ne){return function(){return ne}}function a(ne,le){return function(ue){return ne+ue*le}}function l(ne,le){var ue=le-ne;return ue?a(ne,ue>180||ue<-180?ue-360*Math.round(ue/360):ue):o(isNaN(ne)?le:ne)}function v(ne,le){var ue=le-ne;return ue?a(ne,ue):o(isNaN(ne)?le:ne)}var h=function ne(le){var ue=function(ne){return 1==(ne=+ne)?v:function(le,ue){return ue-le?(pe=le,de=ue,_e=ne,pe=Math.pow(pe,_e),de=Math.pow(de,_e)-pe,_e=1/_e,function(me){return Math.pow(pe+me*de,_e)}):o(isNaN(le)?ue:le);var pe,de,_e}}(le);function pe(de,_e){var me=ue((de=x.rgb(de)).r,(_e=x.rgb(_e)).r),we=ue(de.g,_e.g),De=ue(de.b,_e.b),Le=v(de.opacity,_e.opacity);return function(Ie){return de.r=me(Ie),de.g=we(Ie),de.b=De(Ie),de.opacity=Le(Ie),de+""}}return pe.gamma=ne,pe}(1);function s(ne){return function(le){var ue,pe,de=le.length,_e=new Array(de),me=new Array(de),we=new Array(de);for(ue=0;ue<de;++ue)pe=x.rgb(le[ue]),_e[ue]=pe.r||0,me[ue]=pe.g||0,we[ue]=pe.b||0;return _e=ne(_e),me=ne(me),we=ne(we),pe.opacity=1,function(De){return pe.r=_e(De),pe.g=me(De),pe.b=we(De),pe+""}}}var d=s(_),p=s(e);function f(ne,le){le||(le=[]);var ue,pe=ne?Math.min(le.length,ne.length):0,de=le.slice();return function(_e){for(ue=0;ue<pe;++ue)de[ue]=ne[ue]*(1-_e)+le[ue]*_e;return de}}function g(ne){return ArrayBuffer.isView(ne)&&!(ne instanceof DataView)}function m(ne,le){var ue,pe=le?le.length:0,de=ne?Math.min(pe,ne.length):0,_e=new Array(de),me=new Array(pe);for(ue=0;ue<de;++ue)_e[ue]=E(ne[ue],le[ue]);for(;ue<pe;++ue)me[ue]=le[ue];return function(we){for(ue=0;ue<de;++ue)me[ue]=_e[ue](we);return me}}function u(ne,le){var ue=new Date;return ne=+ne,le=+le,function(pe){return ue.setTime(ne*(1-pe)+le*pe),ue}}function w(ne,le){return ne=+ne,le=+le,function(ue){return ne*(1-ue)+le*ue}}function c(ne,le){var ue,pe={},de={};for(ue in null!==ne&&"object"==typeof ne||(ne={}),null!==le&&"object"==typeof le||(le={}),le)ue in ne?pe[ue]=E(ne[ue],le[ue]):de[ue]=le[ue];return function(_e){for(ue in pe)de[ue]=pe[ue](_e);return de}}var A=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,k=new RegExp(A.source,"g");function C(ne,le){var ue,pe,de,Le,_e=A.lastIndex=k.lastIndex=0,me=-1,we=[],De=[];for(ne+="",le+="";(ue=A.exec(ne))&&(pe=k.exec(le));)(de=pe.index)>_e&&(de=le.slice(_e,de),we[me]?we[me]+=de:we[++me]=de),(ue=ue[0])===(pe=pe[0])?we[me]?we[me]+=pe:we[++me]=pe:(we[++me]=null,De.push({i:me,x:w(ue,pe)})),_e=k.lastIndex;return _e<le.length&&(de=le.slice(_e),we[me]?we[me]+=de:we[++me]=de),we.length<2?De[0]?(Le=De[0].x,function(Ie){return Le(Ie)+""}):function(Le){return function(){return Le}}(le):(le=De.length,function(Le){for(var Ie,je=0;je<le;++je)we[(Ie=De[je]).i]=Ie.x(Le);return we.join("")})}function E(ne,le){var ue,pe=typeof le;return null==le||"boolean"===pe?o(le):("number"===pe?w:"string"===pe?(ue=x.color(le))?(le=ue,h):C:le instanceof x.color?h:le instanceof Date?u:g(le)?f:Array.isArray(le)?m:"function"!=typeof le.valueOf&&"function"!=typeof le.toString||isNaN(le)?c:w)(ne,le)}var L,D,N,F,I=180/Math.PI,P={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function j(ne,le,ue,pe,de,_e){var me,we,De;return(me=Math.sqrt(ne*ne+le*le))&&(ne/=me,le/=me),(De=ne*ue+le*pe)&&(ue-=ne*De,pe-=le*De),(we=Math.sqrt(ue*ue+pe*pe))&&(ue/=we,pe/=we,De/=we),ne*pe<le*ue&&(ne=-ne,le=-le,De=-De,me=-me),{translateX:de,translateY:_e,rotate:Math.atan2(le,ne)*I,skewX:Math.atan(De)*I,scaleX:me,scaleY:we}}function V(ne,le,ue,pe){function de(_e){return _e.length?_e.pop()+" ":""}return function(_e,me){var Le,Ie,je,we=[],De=[];return _e=ne(_e),me=ne(me),function(Le,Ie,je,ye,Me,Oe){if(Le!==je||Ie!==ye){var Pe=Me.push("translate(",null,le,null,ue);Oe.push({i:Pe-4,x:w(Le,je)},{i:Pe-2,x:w(Ie,ye)})}else(je||ye)&&Me.push("translate("+je+le+ye+ue)}(_e.translateX,_e.translateY,me.translateX,me.translateY,we,De),je=we,(Le=_e.rotate)!==(Ie=me.rotate)?(Le-Ie>180?Ie+=360:Ie-Le>180&&(Le+=360),De.push({i:je.push(de(je)+"rotate(",null,pe)-2,x:w(Le,Ie)})):Ie&&je.push(de(je)+"rotate("+Ie+pe),function(Le,Ie,je,ye){Le!==Ie?ye.push({i:je.push(de(je)+"skewX(",null,pe)-2,x:w(Le,Ie)}):Ie&&je.push(de(je)+"skewX("+Ie+pe)}(_e.skewX,me.skewX,we,De),function(Le,Ie,je,ye,Me,Oe){if(Le!==je||Ie!==ye){var Pe=Me.push(de(Me)+"scale(",null,",",null,")");Oe.push({i:Pe-4,x:w(Le,je)},{i:Pe-2,x:w(Ie,ye)})}else 1===je&&1===ye||Me.push(de(Me)+"scale("+je+","+ye+")")}(_e.scaleX,_e.scaleY,me.scaleX,me.scaleY,we,De),_e=me=null,function(Le){for(var Ie,je=-1,ye=De.length;++je<ye;)we[(Ie=De[je]).i]=Ie.x(Le);return we.join("")}}}var Z=V(function(ne){return"none"===ne?P:(L||(L=document.createElement("DIV"),D=document.documentElement,N=document.defaultView),L.style.transform=ne,ne=N.getComputedStyle(D.appendChild(L),null).getPropertyValue("transform"),D.removeChild(L),j(+(ne=ne.slice(7,-1).split(","))[0],+ne[1],+ne[2],+ne[3],+ne[4],+ne[5]))},"px, ","px)","deg)"),Y=V(function(ne){return null==ne?P:(F||(F=document.createElementNS("http://www.w3.org/2000/svg","g")),F.setAttribute("transform",ne),(ne=F.transform.baseVal.consolidate())?j((ne=ne.matrix).a,ne.b,ne.c,ne.d,ne.e,ne.f):P)},", ",")",")"),ee=Math.SQRT2;function re(ne){return((ne=Math.exp(ne))+1/ne)/2}function X(ne){return function(le,ue){var pe=ne((le=x.hsl(le)).h,(ue=x.hsl(ue)).h),de=v(le.s,ue.s),_e=v(le.l,ue.l),me=v(le.opacity,ue.opacity);return function(we){return le.h=pe(we),le.s=de(we),le.l=_e(we),le.opacity=me(we),le+""}}}var K=X(l),ie=X(v);function q(ne){return function(le,ue){var pe=ne((le=x.hcl(le)).h,(ue=x.hcl(ue)).h),de=v(le.c,ue.c),_e=v(le.l,ue.l),me=v(le.opacity,ue.opacity);return function(we){return le.h=pe(we),le.c=de(we),le.l=_e(we),le.opacity=me(we),le+""}}}var U=q(l),W=q(v);function ae(ne){return function le(ue){function pe(de,_e){var me=ne((de=x.cubehelix(de)).h,(_e=x.cubehelix(_e)).h),we=v(de.s,_e.s),De=v(de.l,_e.l),Le=v(de.opacity,_e.opacity);return function(Ie){return de.h=me(Ie),de.s=we(Ie),de.l=De(Math.pow(Ie,ue)),de.opacity=Le(Ie),de+""}}return ue=+ue,pe.gamma=le,pe}(1)}var G=ae(l),te=ae(v);y.interpolate=E,y.interpolateArray=function(ne,le){return(g(le)?f:m)(ne,le)},y.interpolateBasis=_,y.interpolateBasisClosed=e,y.interpolateCubehelix=G,y.interpolateCubehelixLong=te,y.interpolateDate=u,y.interpolateDiscrete=function(ne){var le=ne.length;return function(ue){return ne[Math.max(0,Math.min(le-1,Math.floor(ue*le)))]}},y.interpolateHcl=U,y.interpolateHclLong=W,y.interpolateHsl=K,y.interpolateHslLong=ie,y.interpolateHue=function(ne,le){var ue=l(+ne,+le);return function(pe){var de=ue(pe);return de-360*Math.floor(de/360)}},y.interpolateLab=function(ne,le){var ue=v((ne=x.lab(ne)).l,(le=x.lab(le)).l),pe=v(ne.a,le.a),de=v(ne.b,le.b),_e=v(ne.opacity,le.opacity);return function(me){return ne.l=ue(me),ne.a=pe(me),ne.b=de(me),ne.opacity=_e(me),ne+""}},y.interpolateNumber=w,y.interpolateNumberArray=f,y.interpolateObject=c,y.interpolateRgb=h,y.interpolateRgbBasis=d,y.interpolateRgbBasisClosed=p,y.interpolateRound=function(ne,le){return ne=+ne,le=+le,function(ue){return Math.round(ne*(1-ue)+le*ue)}},y.interpolateString=C,y.interpolateTransformCss=Z,y.interpolateTransformSvg=Y,y.interpolateZoom=function(ne,le){var ue,pe,de=ne[0],_e=ne[1],me=ne[2],Le=le[2],Ie=le[0]-de,je=le[1]-_e,ye=Ie*Ie+je*je;if(ye<1e-12)pe=Math.log(Le/me)/ee,ue=function(qe){return[de+qe*Ie,_e+qe*je,me*Math.exp(ee*qe*pe)]};else{var Me=Math.sqrt(ye),Oe=(Le*Le-me*me+4*ye)/(2*me*2*Me),Pe=(Le*Le-me*me-4*ye)/(2*Le*2*Me),Re=Math.log(Math.sqrt(Oe*Oe+1)-Oe),Ue=Math.log(Math.sqrt(Pe*Pe+1)-Pe);pe=(Ue-Re)/ee,ue=function(qe){var Xe,et,lt=qe*pe,He=re(Re),$e=me/(2*Me)*(He*(Xe=ee*lt+Re,((Xe=Math.exp(2*Xe))-1)/(Xe+1))-(et=Re,((et=Math.exp(et))-1/et)/2));return[de+$e*Ie,_e+$e*je,me*He/re(ee*lt+Re)]}}return ue.duration=1e3*pe,ue},y.piecewise=function(ne,le){for(var ue=0,pe=le.length-1,de=le[0],_e=new Array(pe<0?0:pe);ue<pe;)_e[ue]=ne(de,de=le[++ue]);return function(me){var we=Math.max(0,Math.min(pe-1,Math.floor(me*=pe)));return _e[we](me-we)}},y.quantize=function(ne,le){for(var ue=new Array(le),pe=0;pe<le;++pe)ue[pe]=ne(pe/(le-1));return ue},Object.defineProperty(y,"__esModule",{value:!0})},"object"==typeof se&&void 0!==oe?x(se,b("d3-color")):x((y=y||self).d3=y.d3||{},y.d3)},{"d3-color":109}],117:[function(b,oe,se){var y;y=this,function(y){"use strict";var x=Math.PI,M=2*x,_=M-1e-6;function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function o(){return new e}e.prototype=o.prototype={constructor:e,moveTo:function(a,l){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+l)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(a,l){this._+="L"+(this._x1=+a)+","+(this._y1=+l)},quadraticCurveTo:function(a,l,i,v){this._+="Q"+ +a+","+ +l+","+(this._x1=+i)+","+(this._y1=+v)},bezierCurveTo:function(a,l,i,v,h,s){this._+="C"+ +a+","+ +l+","+ +i+","+ +v+","+(this._x1=+h)+","+(this._y1=+s)},arcTo:function(a,l,i,v,h){var s=this._x1,d=this._y1,p=(i=+i)-(a=+a),f=(v=+v)-(l=+l),g=s-a,m=d-l,u=g*g+m*m;if((h=+h)<0)throw new Error("negative radius: "+h);if(null===this._x1)this._+="M"+(this._x1=a)+","+(this._y1=l);else if(u>1e-6)if(Math.abs(m*p-f*g)>1e-6&&h){var w=i-s,c=v-d,A=p*p+f*f,k=w*w+c*c,C=Math.sqrt(A),E=Math.sqrt(u),L=h*Math.tan((x-Math.acos((A+u-k)/(2*C*E)))/2),D=L/E,N=L/C;Math.abs(D-1)>1e-6&&(this._+="L"+(a+D*g)+","+(l+D*m)),this._+="A"+h+","+h+",0,0,"+ +(m*w>g*c)+","+(this._x1=a+N*p)+","+(this._y1=l+N*f)}else this._+="L"+(this._x1=a)+","+(this._y1=l)},arc:function(a,l,i,v,h,s){a=+a,l=+l,s=!!s;var d=(i=+i)*Math.cos(v),p=i*Math.sin(v),f=a+d,g=l+p,m=1^s,u=s?v-h:h-v;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+f+","+g:(Math.abs(this._x1-f)>1e-6||Math.abs(this._y1-g)>1e-6)&&(this._+="L"+f+","+g),i&&(u<0&&(u=u%M+M),u>_?this._+="A"+i+","+i+",0,1,"+m+","+(a-d)+","+(l-p)+"A"+i+","+i+",0,1,"+m+","+(this._x1=f)+","+(this._y1=g):u>1e-6&&(this._+="A"+i+","+i+",0,"+ +(u>=x)+","+m+","+(this._x1=a+i*Math.cos(h))+","+(this._y1=l+i*Math.sin(h))))},rect:function(a,l,i,v){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+l)+"h"+ +i+"v"+ +v+"h"+-i+"Z"},toString:function(){return this._}},y.path=o,Object.defineProperty(y,"__esModule",{value:!0})}("object"==typeof se&&void 0!==oe?se:(y=y||self).d3=y.d3||{})},{}],118:[function(b,oe,se){var y;y=this,function(y){"use strict";function x(v,h,s,d){if(isNaN(h)||isNaN(s))return v;var p,f,g,m,u,w,c,A,k,C=v._root,E={data:d},L=v._x0,D=v._y0,N=v._x1,F=v._y1;if(!C)return v._root=E,v;for(;C.length;)if((w=h>=(f=(L+N)/2))?L=f:N=f,(c=s>=(g=(D+F)/2))?D=g:F=g,p=C,!(C=C[A=c<<1|w]))return p[A]=E,v;if(m=+v._x.call(null,C.data),u=+v._y.call(null,C.data),h===m&&s===u)return E.next=C,p?p[A]=E:v._root=E,v;do{p=p?p[A]=new Array(4):v._root=new Array(4),(w=h>=(f=(L+N)/2))?L=f:N=f,(c=s>=(g=(D+F)/2))?D=g:F=g}while((A=c<<1|w)==(k=(u>=g)<<1|m>=f));return p[k]=C,p[A]=E,v}function M(v,h,s,d,p){this.node=v,this.x0=h,this.y0=s,this.x1=d,this.y1=p}function _(v){return v[0]}function e(v){return v[1]}function o(v,h,s){var d=new a(null==h?_:h,null==s?e:s,NaN,NaN,NaN,NaN);return null==v?d:d.addAll(v)}function a(v,h,s,d,p,f){this._x=v,this._y=h,this._x0=s,this._y0=d,this._x1=p,this._y1=f,this._root=void 0}function l(v){for(var h={data:v.data},s=h;v=v.next;)s=s.next={data:v.data};return h}var i=o.prototype=a.prototype;i.copy=function(){var v,h,s=new a(this._x,this._y,this._x0,this._y0,this._x1,this._y1),d=this._root;if(!d)return s;if(!d.length)return s._root=l(d),s;for(v=[{source:d,target:s._root=new Array(4)}];d=v.pop();)for(var p=0;p<4;++p)(h=d.source[p])&&(h.length?v.push({source:h,target:d.target[p]=new Array(4)}):d.target[p]=l(h));return s},i.add=function(v){var h=+this._x.call(null,v),s=+this._y.call(null,v);return x(this.cover(h,s),h,s,v)},i.addAll=function(v){var h,s,d,p,f=v.length,g=new Array(f),m=new Array(f),u=1/0,w=1/0,c=-1/0,A=-1/0;for(s=0;s<f;++s)isNaN(d=+this._x.call(null,h=v[s]))||isNaN(p=+this._y.call(null,h))||(g[s]=d,m[s]=p,d<u&&(u=d),d>c&&(c=d),p<w&&(w=p),p>A&&(A=p));if(u>c||w>A)return this;for(this.cover(u,w).cover(c,A),s=0;s<f;++s)x(this,g[s],m[s],v[s]);return this},i.cover=function(v,h){if(isNaN(v=+v)||isNaN(h=+h))return this;var s=this._x0,d=this._y0,p=this._x1,f=this._y1;if(isNaN(s))p=(s=Math.floor(v))+1,f=(d=Math.floor(h))+1;else{for(var g,m,u=p-s,w=this._root;s>v||v>=p||d>h||h>=f;)switch(m=(h<d)<<1|v<s,(g=new Array(4))[m]=w,w=g,u*=2,m){case 0:p=s+u,f=d+u;break;case 1:s=p-u,f=d+u;break;case 2:p=s+u,d=f-u;break;case 3:s=p-u,d=f-u}this._root&&this._root.length&&(this._root=w)}return this._x0=s,this._y0=d,this._x1=p,this._y1=f,this},i.data=function(){var v=[];return this.visit(function(h){if(!h.length)do{v.push(h.data)}while(h=h.next)}),v},i.extent=function(v){return arguments.length?this.cover(+v[0][0],+v[0][1]).cover(+v[1][0],+v[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},i.find=function(v,h,s){var d,p,f,g,m,u,w,c=this._x0,A=this._y0,k=this._x1,C=this._y1,E=[],L=this._root;for(L&&E.push(new M(L,c,A,k,C)),null==s?s=1/0:(c=v-s,A=h-s,k=v+s,C=h+s,s*=s);u=E.pop();)if(!(!(L=u.node)||(p=u.x0)>k||(f=u.y0)>C||(g=u.x1)<c||(m=u.y1)<A))if(L.length){var D=(p+g)/2,N=(f+m)/2;E.push(new M(L[3],D,N,g,m),new M(L[2],p,N,D,m),new M(L[1],D,f,g,N),new M(L[0],p,f,D,N)),(w=(h>=N)<<1|v>=D)&&(u=E[E.length-1],E[E.length-1]=E[E.length-1-w],E[E.length-1-w]=u)}else{var F=v-+this._x.call(null,L.data),I=h-+this._y.call(null,L.data),P=F*F+I*I;if(P<s){var j=Math.sqrt(s=P);c=v-j,A=h-j,k=v+j,C=h+j,d=L.data}}return d},i.remove=function(v){if(isNaN(f=+this._x.call(null,v))||isNaN(g=+this._y.call(null,v)))return this;var h,s,d,p,f,g,m,u,w,c,A,k,C=this._root,E=this._x0,L=this._y0,D=this._x1,N=this._y1;if(!C)return this;if(C.length)for(;;){if((w=f>=(m=(E+D)/2))?E=m:D=m,(c=g>=(u=(L+N)/2))?L=u:N=u,h=C,!(C=C[A=c<<1|w]))return this;if(!C.length)break;(h[A+1&3]||h[A+2&3]||h[A+3&3])&&(s=h,k=A)}for(;C.data!==v;)if(d=C,!(C=C.next))return this;return(p=C.next)&&delete C.next,d?(p?d.next=p:delete d.next,this):h?(p?h[A]=p:delete h[A],(C=h[0]||h[1]||h[2]||h[3])&&C===(h[3]||h[2]||h[1]||h[0])&&!C.length&&(s?s[k]=C:this._root=C),this):(this._root=p,this)},i.removeAll=function(v){for(var h=0,s=v.length;h<s;++h)this.remove(v[h]);return this},i.root=function(){return this._root},i.size=function(){var v=0;return this.visit(function(h){if(!h.length)do{++v}while(h=h.next)}),v},i.visit=function(v){var h,s,d,p,f,g,m=[],u=this._root;for(u&&m.push(new M(u,this._x0,this._y0,this._x1,this._y1));h=m.pop();)if(!v(u=h.node,d=h.x0,p=h.y0,f=h.x1,g=h.y1)&&u.length){var w=(d+f)/2,c=(p+g)/2;(s=u[3])&&m.push(new M(s,w,c,f,g)),(s=u[2])&&m.push(new M(s,d,c,w,g)),(s=u[1])&&m.push(new M(s,w,p,f,c)),(s=u[0])&&m.push(new M(s,d,p,w,c))}return this},i.visitAfter=function(v){var h,s=[],d=[];for(this._root&&s.push(new M(this._root,this._x0,this._y0,this._x1,this._y1));h=s.pop();){var p=h.node;if(p.length){var f,g=h.x0,m=h.y0,u=h.x1,w=h.y1,c=(g+u)/2,A=(m+w)/2;(f=p[0])&&s.push(new M(f,g,m,c,A)),(f=p[1])&&s.push(new M(f,c,m,u,A)),(f=p[2])&&s.push(new M(f,g,A,c,w)),(f=p[3])&&s.push(new M(f,c,A,u,w))}d.push(h)}for(;h=d.pop();)v(h.node,h.x0,h.y0,h.x1,h.y1);return this},i.x=function(v){return arguments.length?(this._x=v,this):this._x},i.y=function(v){return arguments.length?(this._y=v,this):this._y},y.quadtree=o,Object.defineProperty(y,"__esModule",{value:!0})}("object"==typeof se&&void 0!==oe?se:(y=y||self).d3=y.d3||{})},{}],119:[function(b,oe,se){var y,x;y=this,x=function(y,x){"use strict";function M(Be){return function(){return Be}}var _=Math.abs,e=Math.atan2,o=Math.cos,a=Math.max,l=Math.min,i=Math.sin,v=Math.sqrt,h=Math.PI,s=h/2,d=2*h;function p(Be){return Be>1?0:Be<-1?h:Math.acos(Be)}function f(Be){return Be>=1?s:Be<=-1?-s:Math.asin(Be)}function g(Be){return Be.innerRadius}function m(Be){return Be.outerRadius}function u(Be){return Be.startAngle}function w(Be){return Be.endAngle}function c(Be){return Be&&Be.padAngle}function A(Be,tt,dt,Dt,Nt,Yt,fn,nn){var In=dt-Be,Dn=Dt-tt,kn=fn-Nt,rn=nn-Yt,pn=rn*In-kn*Dn;if(!(pn*pn<1e-12))return[Be+(pn=(kn*(tt-Yt)-rn*(Be-Nt))/pn)*In,tt+pn*Dn]}function k(Be,tt,dt,Dt,Nt,Yt,fn){var nn=Be-dt,In=tt-Dt,Dn=(fn?Yt:-Yt)/v(nn*nn+In*In),kn=Dn*In,rn=-Dn*nn,pn=Be+kn,gn=tt+rn,Pn=dt+kn,jn=Dt+rn,Kn=(pn+Pn)/2,rr=(gn+jn)/2,lr=Pn-pn,kr=jn-gn,Xr=lr*lr+kr*kr,sr=Nt-Yt,oi=pn*jn-Pn*gn,Gr=(kr<0?-1:1)*v(a(0,sr*sr*Xr-oi*oi)),Lr=(oi*kr-lr*Gr)/Xr,Jr=(-oi*lr-kr*Gr)/Xr,Mi=(oi*kr+lr*Gr)/Xr,Jn=(-oi*lr+kr*Gr)/Xr,br=Lr-Kn,Fr=Jr-rr,cr=Mi-Kn,Qr=Jn-rr;return br*br+Fr*Fr>cr*cr+Qr*Qr&&(Lr=Mi,Jr=Jn),{cx:Lr,cy:Jr,x01:-kn,y01:-rn,x11:Lr*(Nt/sr-1),y11:Jr*(Nt/sr-1)}}function C(Be){this._context=Be}function E(Be){return new C(Be)}function L(Be){return Be[0]}function D(Be){return Be[1]}function N(){var Be=L,tt=D,dt=M(!0),Dt=null,Nt=E,Yt=null;function fn(nn){var In,Dn,kn,rn=nn.length,pn=!1;for(null==Dt&&(Yt=Nt(kn=x.path())),In=0;In<=rn;++In)!(In<rn&&dt(Dn=nn[In],In,nn))===pn&&((pn=!pn)?Yt.lineStart():Yt.lineEnd()),pn&&Yt.point(+Be(Dn,In,nn),+tt(Dn,In,nn));if(kn)return Yt=null,kn+""||null}return fn.x=function(nn){return arguments.length?(Be="function"==typeof nn?nn:M(+nn),fn):Be},fn.y=function(nn){return arguments.length?(tt="function"==typeof nn?nn:M(+nn),fn):tt},fn.defined=function(nn){return arguments.length?(dt="function"==typeof nn?nn:M(!!nn),fn):dt},fn.curve=function(nn){return arguments.length?(Nt=nn,null!=Dt&&(Yt=Nt(Dt)),fn):Nt},fn.context=function(nn){return arguments.length?(null==nn?Dt=Yt=null:Yt=Nt(Dt=nn),fn):Dt},fn}function F(){var Be=L,tt=null,dt=M(0),Dt=D,Nt=M(!0),Yt=null,fn=E,nn=null;function In(kn){var rn,pn,gn,Pn,jn,Kn=kn.length,rr=!1,lr=new Array(Kn),kr=new Array(Kn);for(null==Yt&&(nn=fn(jn=x.path())),rn=0;rn<=Kn;++rn){if(!(rn<Kn&&Nt(Pn=kn[rn],rn,kn))===rr)if(rr=!rr)pn=rn,nn.areaStart(),nn.lineStart();else{for(nn.lineEnd(),nn.lineStart(),gn=rn-1;gn>=pn;--gn)nn.point(lr[gn],kr[gn]);nn.lineEnd(),nn.areaEnd()}rr&&(lr[rn]=+Be(Pn,rn,kn),kr[rn]=+dt(Pn,rn,kn),nn.point(tt?+tt(Pn,rn,kn):lr[rn],Dt?+Dt(Pn,rn,kn):kr[rn]))}if(jn)return nn=null,jn+""||null}function Dn(){return N().defined(Nt).curve(fn).context(Yt)}return In.x=function(kn){return arguments.length?(Be="function"==typeof kn?kn:M(+kn),tt=null,In):Be},In.x0=function(kn){return arguments.length?(Be="function"==typeof kn?kn:M(+kn),In):Be},In.x1=function(kn){return arguments.length?(tt=null==kn?null:"function"==typeof kn?kn:M(+kn),In):tt},In.y=function(kn){return arguments.length?(dt="function"==typeof kn?kn:M(+kn),Dt=null,In):dt},In.y0=function(kn){return arguments.length?(dt="function"==typeof kn?kn:M(+kn),In):dt},In.y1=function(kn){return arguments.length?(Dt=null==kn?null:"function"==typeof kn?kn:M(+kn),In):Dt},In.lineX0=In.lineY0=function(){return Dn().x(Be).y(dt)},In.lineY1=function(){return Dn().x(Be).y(Dt)},In.lineX1=function(){return Dn().x(tt).y(dt)},In.defined=function(kn){return arguments.length?(Nt="function"==typeof kn?kn:M(!!kn),In):Nt},In.curve=function(kn){return arguments.length?(fn=kn,null!=Yt&&(nn=fn(Yt)),In):fn},In.context=function(kn){return arguments.length?(null==kn?Yt=nn=null:nn=fn(Yt=kn),In):Yt},In}function I(Be,tt){return tt<Be?-1:tt>Be?1:tt>=Be?0:NaN}function P(Be){return Be}C.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Be,tt){switch(Be=+Be,tt=+tt,this._point){case 0:this._point=1,this._line?this._context.lineTo(Be,tt):this._context.moveTo(Be,tt);break;case 1:this._point=2;default:this._context.lineTo(Be,tt)}}};var j=Z(E);function V(Be){this._curve=Be}function Z(Be){function tt(dt){return new V(Be(dt))}return tt._curve=Be,tt}function Y(Be){var tt=Be.curve;return Be.angle=Be.x,delete Be.x,Be.radius=Be.y,delete Be.y,Be.curve=function(dt){return arguments.length?tt(Z(dt)):tt()._curve},Be}function ee(){return Y(N().curve(j))}function re(){var Be=F().curve(j),tt=Be.curve,dt=Be.lineX0,Dt=Be.lineX1,Nt=Be.lineY0,Yt=Be.lineY1;return Be.angle=Be.x,delete Be.x,Be.startAngle=Be.x0,delete Be.x0,Be.endAngle=Be.x1,delete Be.x1,Be.radius=Be.y,delete Be.y,Be.innerRadius=Be.y0,delete Be.y0,Be.outerRadius=Be.y1,delete Be.y1,Be.lineStartAngle=function(){return Y(dt())},delete Be.lineX0,Be.lineEndAngle=function(){return Y(Dt())},delete Be.lineX1,Be.lineInnerRadius=function(){return Y(Nt())},delete Be.lineY0,Be.lineOuterRadius=function(){return Y(Yt())},delete Be.lineY1,Be.curve=function(fn){return arguments.length?tt(Z(fn)):tt()._curve},Be}function X(Be,tt){return[(tt=+tt)*Math.cos(Be-=Math.PI/2),tt*Math.sin(Be)]}V.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(Be,tt){this._curve.point(tt*Math.sin(Be),tt*-Math.cos(Be))}};var K=Array.prototype.slice;function ie(Be){return Be.source}function q(Be){return Be.target}function U(Be){var tt=ie,dt=q,Dt=L,Nt=D,Yt=null;function fn(){var nn,In=K.call(arguments),Dn=tt.apply(this,In),kn=dt.apply(this,In);if(Yt||(Yt=nn=x.path()),Be(Yt,+Dt.apply(this,(In[0]=Dn,In)),+Nt.apply(this,In),+Dt.apply(this,(In[0]=kn,In)),+Nt.apply(this,In)),nn)return Yt=null,nn+""||null}return fn.source=function(nn){return arguments.length?(tt=nn,fn):tt},fn.target=function(nn){return arguments.length?(dt=nn,fn):dt},fn.x=function(nn){return arguments.length?(Dt="function"==typeof nn?nn:M(+nn),fn):Dt},fn.y=function(nn){return arguments.length?(Nt="function"==typeof nn?nn:M(+nn),fn):Nt},fn.context=function(nn){return arguments.length?(Yt=null==nn?null:nn,fn):Yt},fn}function W(Be,tt,dt,Dt,Nt){Be.moveTo(tt,dt),Be.bezierCurveTo(tt=(tt+Dt)/2,dt,tt,Nt,Dt,Nt)}function ae(Be,tt,dt,Dt,Nt){Be.moveTo(tt,dt),Be.bezierCurveTo(tt,dt=(dt+Nt)/2,Dt,dt,Dt,Nt)}function G(Be,tt,dt,Dt,Nt){var Yt=X(tt,dt),fn=X(tt,dt=(dt+Nt)/2),nn=X(Dt,dt),In=X(Dt,Nt);Be.moveTo(Yt[0],Yt[1]),Be.bezierCurveTo(fn[0],fn[1],nn[0],nn[1],In[0],In[1])}var te={draw:function(Be,tt){var dt=Math.sqrt(tt/h);Be.moveTo(dt,0),Be.arc(0,0,dt,0,d)}},ne={draw:function(Be,tt){var dt=Math.sqrt(tt/5)/2;Be.moveTo(-3*dt,-dt),Be.lineTo(-dt,-dt),Be.lineTo(-dt,-3*dt),Be.lineTo(dt,-3*dt),Be.lineTo(dt,-dt),Be.lineTo(3*dt,-dt),Be.lineTo(3*dt,dt),Be.lineTo(dt,dt),Be.lineTo(dt,3*dt),Be.lineTo(-dt,3*dt),Be.lineTo(-dt,dt),Be.lineTo(-3*dt,dt),Be.closePath()}},le=Math.sqrt(1/3),ue=2*le,pe={draw:function(Be,tt){var dt=Math.sqrt(tt/ue),Dt=dt*le;Be.moveTo(0,-dt),Be.lineTo(Dt,0),Be.lineTo(0,dt),Be.lineTo(-Dt,0),Be.closePath()}},de=Math.sin(h/10)/Math.sin(7*h/10),_e=Math.sin(d/10)*de,me=-Math.cos(d/10)*de,we={draw:function(Be,tt){var dt=Math.sqrt(.8908130915292852*tt),Dt=_e*dt,Nt=me*dt;Be.moveTo(0,-dt),Be.lineTo(Dt,Nt);for(var Yt=1;Yt<5;++Yt){var fn=d*Yt/5,nn=Math.cos(fn),In=Math.sin(fn);Be.lineTo(In*dt,-nn*dt),Be.lineTo(nn*Dt-In*Nt,In*Dt+nn*Nt)}Be.closePath()}},De={draw:function(Be,tt){var dt=Math.sqrt(tt),Dt=-dt/2;Be.rect(Dt,Dt,dt,dt)}},Le=Math.sqrt(3),Ie={draw:function(Be,tt){var dt=-Math.sqrt(tt/(3*Le));Be.moveTo(0,2*dt),Be.lineTo(-Le*dt,-dt),Be.lineTo(Le*dt,-dt),Be.closePath()}},je=-.5,ye=Math.sqrt(3)/2,Me=1/Math.sqrt(12),Oe=3*(Me/2+1),Pe={draw:function(Be,tt){var dt=Math.sqrt(tt/Oe),Dt=dt/2,Nt=dt*Me,Yt=Dt,fn=dt*Me+dt,nn=-Yt,In=fn;Be.moveTo(Dt,Nt),Be.lineTo(Yt,fn),Be.lineTo(nn,In),Be.lineTo(je*Dt-ye*Nt,ye*Dt+je*Nt),Be.lineTo(je*Yt-ye*fn,ye*Yt+je*fn),Be.lineTo(je*nn-ye*In,ye*nn+je*In),Be.lineTo(je*Dt+ye*Nt,je*Nt-ye*Dt),Be.lineTo(je*Yt+ye*fn,je*fn-ye*Yt),Be.lineTo(je*nn+ye*In,je*In-ye*nn),Be.closePath()}},Re=[te,ne,pe,De,we,Ie,Pe];function Ue(){}function qe(Be,tt,dt){Be._context.bezierCurveTo((2*Be._x0+Be._x1)/3,(2*Be._y0+Be._y1)/3,(Be._x0+2*Be._x1)/3,(Be._y0+2*Be._y1)/3,(Be._x0+4*Be._x1+tt)/6,(Be._y0+4*Be._y1+dt)/6)}function Xe(Be){this._context=Be}function lt(Be){this._context=Be}function He(Be){this._context=Be}function $e(Be,tt){this._basis=new Xe(Be),this._beta=tt}Xe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:qe(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Be,tt){switch(Be=+Be,tt=+tt,this._point){case 0:this._point=1,this._line?this._context.lineTo(Be,tt):this._context.moveTo(Be,tt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:qe(this,Be,tt)}this._x0=this._x1,this._x1=Be,this._y0=this._y1,this._y1=tt}},lt.prototype={areaStart:Ue,areaEnd:Ue,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(Be,tt){switch(Be=+Be,tt=+tt,this._point){case 0:this._point=1,this._x2=Be,this._y2=tt;break;case 1:this._point=2,this._x3=Be,this._y3=tt;break;case 2:this._point=3,this._x4=Be,this._y4=tt,this._context.moveTo((this._x0+4*this._x1+Be)/6,(this._y0+4*this._y1+tt)/6);break;default:qe(this,Be,tt)}this._x0=this._x1,this._x1=Be,this._y0=this._y1,this._y1=tt}},He.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Be,tt){switch(Be=+Be,tt=+tt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var dt=(this._x0+4*this._x1+Be)/6,Dt=(this._y0+4*this._y1+tt)/6;this._line?this._context.lineTo(dt,Dt):this._context.moveTo(dt,Dt);break;case 3:this._point=4;default:qe(this,Be,tt)}this._x0=this._x1,this._x1=Be,this._y0=this._y1,this._y1=tt}},$e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var Be=this._x,tt=this._y,dt=Be.length-1;if(dt>0)for(var Dt,Nt=Be[0],Yt=tt[0],fn=Be[dt]-Nt,nn=tt[dt]-Yt,In=-1;++In<=dt;)this._basis.point(this._beta*Be[In]+(1-this._beta)*(Nt+(Dt=In/dt)*fn),this._beta*tt[In]+(1-this._beta)*(Yt+Dt*nn));this._x=this._y=null,this._basis.lineEnd()},point:function(Be,tt){this._x.push(+Be),this._y.push(+tt)}};var et=function Be(tt){function dt(Dt){return 1===tt?new Xe(Dt):new $e(Dt,tt)}return dt.beta=function(Dt){return Be(+Dt)},dt}(.85);function nt(Be,tt,dt){Be._context.bezierCurveTo(Be._x1+Be._k*(Be._x2-Be._x0),Be._y1+Be._k*(Be._y2-Be._y0),Be._x2+Be._k*(Be._x1-tt),Be._y2+Be._k*(Be._y1-dt),Be._x2,Be._y2)}function ct(Be,tt){this._context=Be,this._k=(1-tt)/6}ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:nt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Be,tt){switch(Be=+Be,tt=+tt,this._point){case 0:this._point=1,this._line?this._context.lineTo(Be,tt):this._context.moveTo(Be,tt);break;case 1:this._point=2,this._x1=Be,this._y1=tt;break;case 2:this._point=3;default:nt(this,Be,tt)}this._x0=this._x1,this._x1=this._x2,this._x2=Be,this._y0=this._y1,this._y1=this._y2,this._y2=tt}};var bt=function Be(tt){function dt(Dt){return new ct(Dt,tt)}return dt.tension=function(Dt){return Be(+Dt)},dt}(0);function kt(Be,tt){this._context=Be,this._k=(1-tt)/6}kt.prototype={areaStart:Ue,areaEnd:Ue,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Be,tt){switch(Be=+Be,tt=+tt,this._point){case 0:this._point=1,this._x3=Be,this._y3=tt;break;case 1:this._point=2,this._context.moveTo(this._x4=Be,this._y4=tt);break;case 2:this._point=3,this._x5=Be,this._y5=tt;break;default:nt(this,Be,tt)}this._x0=this._x1,this._x1=this._x2,this._x2=Be,this._y0=this._y1,this._y1=this._y2,this._y2=tt}};var Bt=function Be(tt){function dt(Dt){return new kt(Dt,tt)}return dt.tension=function(Dt){return Be(+Dt)},dt}(0);function Et(Be,tt){this._context=Be,this._k=(1-tt)/6}Et.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Be,tt){switch(Be=+Be,tt=+tt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:nt(this,Be,tt)}this._x0=this._x1,this._x1=this._x2,this._x2=Be,this._y0=this._y1,this._y1=this._y2,this._y2=tt}};var ht=function Be(tt){function dt(Dt){return new Et(Dt,tt)}return dt.tension=function(Dt){return Be(+Dt)},dt}(0);function at(Be,tt,dt){var Dt=Be._x1,Nt=Be._y1,Yt=Be._x2,fn=Be._y2;if(Be._l01_a>1e-12){var nn=2*Be._l01_2a+3*Be._l01_a*Be._l12_a+Be._l12_2a,In=3*Be._l01_a*(Be._l01_a+Be._l12_a);Dt=(Dt*nn-Be._x0*Be._l12_2a+Be._x2*Be._l01_2a)/In,Nt=(Nt*nn-Be._y0*Be._l12_2a+Be._y2*Be._l01_2a)/In}if(Be._l23_a>1e-12){var Dn=2*Be._l23_2a+3*Be._l23_a*Be._l12_a+Be._l12_2a,kn=3*Be._l23_a*(Be._l23_a+Be._l12_a);Yt=(Yt*Dn+Be._x1*Be._l23_2a-tt*Be._l12_2a)/kn,fn=(fn*Dn+Be._y1*Be._l23_2a-dt*Be._l12_2a)/kn}Be._context.bezierCurveTo(Dt,Nt,Yt,fn,Be._x2,Be._y2)}function Ft(Be,tt){this._context=Be,this._alpha=tt}Ft.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Be,tt){if(Be=+Be,tt=+tt,this._point){var dt=this._x2-Be,Dt=this._y2-tt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(dt*dt+Dt*Dt,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Be,tt):this._context.moveTo(Be,tt);break;case 1:this._point=2;break;case 2:this._point=3;default:at(this,Be,tt)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Be,this._y0=this._y1,this._y1=this._y2,this._y2=tt}};var en=function Be(tt){function dt(Dt){return tt?new Ft(Dt,tt):new ct(Dt,0)}return dt.alpha=function(Dt){return Be(+Dt)},dt}(.5);function Qt(Be,tt){this._context=Be,this._alpha=tt}Qt.prototype={areaStart:Ue,areaEnd:Ue,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Be,tt){if(Be=+Be,tt=+tt,this._point){var dt=this._x2-Be,Dt=this._y2-tt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(dt*dt+Dt*Dt,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=Be,this._y3=tt;break;case 1:this._point=2,this._context.moveTo(this._x4=Be,this._y4=tt);break;case 2:this._point=3,this._x5=Be,this._y5=tt;break;default:at(this,Be,tt)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Be,this._y0=this._y1,this._y1=this._y2,this._y2=tt}};var tn=function Be(tt){function dt(Dt){return tt?new Qt(Dt,tt):new kt(Dt,0)}return dt.alpha=function(Dt){return Be(+Dt)},dt}(.5);function dn(Be,tt){this._context=Be,this._alpha=tt}dn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Be,tt){if(Be=+Be,tt=+tt,this._point){var dt=this._x2-Be,Dt=this._y2-tt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(dt*dt+Dt*Dt,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:at(this,Be,tt)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=Be,this._y0=this._y1,this._y1=this._y2,this._y2=tt}};var Mn=function Be(tt){function dt(Dt){return tt?new dn(Dt,tt):new Et(Dt,0)}return dt.alpha=function(Dt){return Be(+Dt)},dt}(.5);function sn(Be){this._context=Be}function ke(Be){return Be<0?-1:1}function Se(Be,tt,dt){var Dt=Be._x1-Be._x0,Nt=tt-Be._x1,Yt=(Be._y1-Be._y0)/(Dt||Nt<0&&-0),fn=(dt-Be._y1)/(Nt||Dt<0&&-0),nn=(Yt*Nt+fn*Dt)/(Dt+Nt);return(ke(Yt)+ke(fn))*Math.min(Math.abs(Yt),Math.abs(fn),.5*Math.abs(nn))||0}function Ce(Be,tt){var dt=Be._x1-Be._x0;return dt?(3*(Be._y1-Be._y0)/dt-tt)/2:tt}function Ve(Be,tt,dt){var Dt=Be._x0,Yt=Be._x1,fn=Be._y1,nn=(Yt-Dt)/3;Be._context.bezierCurveTo(Dt+nn,Be._y0+nn*tt,Yt-nn,fn-nn*dt,Yt,fn)}function Ge(Be){this._context=Be}function Qe(Be){this._context=new ot(Be)}function ot(Be){this._context=Be}function it(Be){this._context=Be}function mt(Be){var tt,dt,Dt=Be.length-1,Nt=new Array(Dt),Yt=new Array(Dt),fn=new Array(Dt);for(Nt[0]=0,Yt[0]=2,fn[0]=Be[0]+2*Be[1],tt=1;tt<Dt-1;++tt)Nt[tt]=1,Yt[tt]=4,fn[tt]=4*Be[tt]+2*Be[tt+1];for(Nt[Dt-1]=2,Yt[Dt-1]=7,fn[Dt-1]=8*Be[Dt-1]+Be[Dt],tt=1;tt<Dt;++tt)Yt[tt]-=dt=Nt[tt]/Yt[tt-1],fn[tt]-=dt*fn[tt-1];for(Nt[Dt-1]=fn[Dt-1]/Yt[Dt-1],tt=Dt-2;tt>=0;--tt)Nt[tt]=(fn[tt]-Nt[tt+1])/Yt[tt];for(Yt[Dt-1]=(Be[Dt]+Nt[Dt-1])/2,tt=0;tt<Dt-1;++tt)Yt[tt]=2*Be[tt+1]-Nt[tt+1];return[Nt,Yt]}function xt(Be,tt){this._context=Be,this._t=tt}function Vt(Be,tt){if((Nt=Be.length)>1)for(var dt,Dt,Nt,Yt=1,fn=Be[tt[0]],nn=fn.length;Yt<Nt;++Yt)for(Dt=fn,fn=Be[tt[Yt]],dt=0;dt<nn;++dt)fn[dt][1]+=fn[dt][0]=isNaN(Dt[dt][1])?Dt[dt][0]:Dt[dt][1]}function $t(Be){for(var tt=Be.length,dt=new Array(tt);--tt>=0;)dt[tt]=tt;return dt}function pt(Be,tt){return Be[tt]}function At(Be){var tt=Be.map(Xt);return $t(Be).sort(function(dt,Dt){return tt[dt]-tt[Dt]})}function Xt(Be){for(var tt,dt=-1,Dt=0,Nt=Be.length,Yt=-1/0;++dt<Nt;)(tt=+Be[dt][1])>Yt&&(Yt=tt,Dt=dt);return Dt}function Ct(Be){var tt=Be.map(Pt);return $t(Be).sort(function(dt,Dt){return tt[dt]-tt[Dt]})}function Pt(Be){for(var tt,dt=0,Dt=-1,Nt=Be.length;++Dt<Nt;)(tt=+Be[Dt][1])&&(dt+=tt);return dt}sn.prototype={areaStart:Ue,areaEnd:Ue,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(Be,tt){Be=+Be,tt=+tt,this._point?this._context.lineTo(Be,tt):(this._point=1,this._context.moveTo(Be,tt))}},Ge.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ve(this,this._t0,Ce(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(Be,tt){var dt=NaN;if(tt=+tt,(Be=+Be)!==this._x1||tt!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(Be,tt):this._context.moveTo(Be,tt);break;case 1:this._point=2;break;case 2:this._point=3,Ve(this,Ce(this,dt=Se(this,Be,tt)),dt);break;default:Ve(this,this._t0,dt=Se(this,Be,tt))}this._x0=this._x1,this._x1=Be,this._y0=this._y1,this._y1=tt,this._t0=dt}}},(Qe.prototype=Object.create(Ge.prototype)).point=function(Be,tt){Ge.prototype.point.call(this,tt,Be)},ot.prototype={moveTo:function(Be,tt){this._context.moveTo(tt,Be)},closePath:function(){this._context.closePath()},lineTo:function(Be,tt){this._context.lineTo(tt,Be)},bezierCurveTo:function(Be,tt,dt,Dt,Nt,Yt){this._context.bezierCurveTo(tt,Be,Dt,dt,Yt,Nt)}},it.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var Be=this._x,tt=this._y,dt=Be.length;if(dt)if(this._line?this._context.lineTo(Be[0],tt[0]):this._context.moveTo(Be[0],tt[0]),2===dt)this._context.lineTo(Be[1],tt[1]);else for(var Dt=mt(Be),Nt=mt(tt),Yt=0,fn=1;fn<dt;++Yt,++fn)this._context.bezierCurveTo(Dt[0][Yt],Nt[0][Yt],Dt[1][Yt],Nt[1][Yt],Be[fn],tt[fn]);(this._line||0!==this._line&&1===dt)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(Be,tt){this._x.push(+Be),this._y.push(+tt)}},xt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(Be,tt){switch(Be=+Be,tt=+tt,this._point){case 0:this._point=1,this._line?this._context.lineTo(Be,tt):this._context.moveTo(Be,tt);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,tt),this._context.lineTo(Be,tt);else{var dt=this._x*(1-this._t)+Be*this._t;this._context.lineTo(dt,this._y),this._context.lineTo(dt,tt)}}this._x=Be,this._y=tt}},y.arc=function(){var Be=g,tt=m,dt=M(0),Dt=null,Nt=u,Yt=w,fn=c,nn=null;function In(){var Dn,kn,rn=+Be.apply(this,arguments),pn=+tt.apply(this,arguments),gn=Nt.apply(this,arguments)-s,Pn=Yt.apply(this,arguments)-s,jn=_(Pn-gn),Kn=Pn>gn;if(nn||(nn=Dn=x.path()),pn<rn&&(kn=pn,pn=rn,rn=kn),pn>1e-12)if(jn>d-1e-12)nn.moveTo(pn*o(gn),pn*i(gn)),nn.arc(0,0,pn,gn,Pn,!Kn),rn>1e-12&&(nn.moveTo(rn*o(Pn),rn*i(Pn)),nn.arc(0,0,rn,Pn,gn,Kn));else{var rr,lr,kr=gn,Xr=Pn,sr=gn,oi=Pn,Gr=jn,Lr=jn,Jr=fn.apply(this,arguments)/2,Mi=Jr>1e-12&&(Dt?+Dt.apply(this,arguments):v(rn*rn+pn*pn)),Jn=l(_(pn-rn)/2,+dt.apply(this,arguments)),br=Jn,Fr=Jn;if(Mi>1e-12){var cr=f(Mi/rn*i(Jr)),Qr=f(Mi/pn*i(Jr));(Gr-=2*cr)>1e-12?(sr+=cr*=Kn?1:-1,oi-=cr):(Gr=0,sr=oi=(gn+Pn)/2),(Lr-=2*Qr)>1e-12?(kr+=Qr*=Kn?1:-1,Xr-=Qr):(Lr=0,kr=Xr=(gn+Pn)/2)}var ui=pn*o(kr),Nr=pn*i(kr),Hr=rn*o(oi),wr=rn*i(oi);if(Jn>1e-12){var un,er=pn*o(Xr),Ut=pn*i(Xr),vn=rn*o(sr),Tn=rn*i(sr);if(jn<h&&(un=A(ui,Nr,vn,Tn,er,Ut,Hr,wr))){var Qn=ui-un[0],Zn=Nr-un[1],$n=er-un[0],Hn=Ut-un[1],Rn=1/i(p((Qn*$n+Zn*Hn)/(v(Qn*Qn+Zn*Zn)*v($n*$n+Hn*Hn)))/2),Fn=v(un[0]*un[0]+un[1]*un[1]);br=l(Jn,(rn-Fn)/(Rn-1)),Fr=l(Jn,(pn-Fn)/(Rn+1))}}Lr>1e-12?Fr>1e-12?(rr=k(vn,Tn,ui,Nr,pn,Fr,Kn),lr=k(er,Ut,Hr,wr,pn,Fr,Kn),nn.moveTo(rr.cx+rr.x01,rr.cy+rr.y01),Fr<Jn?nn.arc(rr.cx,rr.cy,Fr,e(rr.y01,rr.x01),e(lr.y01,lr.x01),!Kn):(nn.arc(rr.cx,rr.cy,Fr,e(rr.y01,rr.x01),e(rr.y11,rr.x11),!Kn),nn.arc(0,0,pn,e(rr.cy+rr.y11,rr.cx+rr.x11),e(lr.cy+lr.y11,lr.cx+lr.x11),!Kn),nn.arc(lr.cx,lr.cy,Fr,e(lr.y11,lr.x11),e(lr.y01,lr.x01),!Kn))):(nn.moveTo(ui,Nr),nn.arc(0,0,pn,kr,Xr,!Kn)):nn.moveTo(ui,Nr),rn>1e-12&&Gr>1e-12?br>1e-12?(rr=k(Hr,wr,er,Ut,rn,-br,Kn),lr=k(ui,Nr,vn,Tn,rn,-br,Kn),nn.lineTo(rr.cx+rr.x01,rr.cy+rr.y01),br<Jn?nn.arc(rr.cx,rr.cy,br,e(rr.y01,rr.x01),e(lr.y01,lr.x01),!Kn):(nn.arc(rr.cx,rr.cy,br,e(rr.y01,rr.x01),e(rr.y11,rr.x11),!Kn),nn.arc(0,0,rn,e(rr.cy+rr.y11,rr.cx+rr.x11),e(lr.cy+lr.y11,lr.cx+lr.x11),Kn),nn.arc(lr.cx,lr.cy,br,e(lr.y11,lr.x11),e(lr.y01,lr.x01),!Kn))):nn.arc(0,0,rn,oi,sr,Kn):nn.lineTo(Hr,wr)}else nn.moveTo(0,0);if(nn.closePath(),Dn)return nn=null,Dn+""||null}return In.centroid=function(){var Dn=(+Be.apply(this,arguments)+ +tt.apply(this,arguments))/2,kn=(+Nt.apply(this,arguments)+ +Yt.apply(this,arguments))/2-h/2;return[o(kn)*Dn,i(kn)*Dn]},In.innerRadius=function(Dn){return arguments.length?(Be="function"==typeof Dn?Dn:M(+Dn),In):Be},In.outerRadius=function(Dn){return arguments.length?(tt="function"==typeof Dn?Dn:M(+Dn),In):tt},In.cornerRadius=function(Dn){return arguments.length?(dt="function"==typeof Dn?Dn:M(+Dn),In):dt},In.padRadius=function(Dn){return arguments.length?(Dt=null==Dn?null:"function"==typeof Dn?Dn:M(+Dn),In):Dt},In.startAngle=function(Dn){return arguments.length?(Nt="function"==typeof Dn?Dn:M(+Dn),In):Nt},In.endAngle=function(Dn){return arguments.length?(Yt="function"==typeof Dn?Dn:M(+Dn),In):Yt},In.padAngle=function(Dn){return arguments.length?(fn="function"==typeof Dn?Dn:M(+Dn),In):fn},In.context=function(Dn){return arguments.length?(nn=null==Dn?null:Dn,In):nn},In},y.area=F,y.areaRadial=re,y.curveBasis=function(Be){return new Xe(Be)},y.curveBasisClosed=function(Be){return new lt(Be)},y.curveBasisOpen=function(Be){return new He(Be)},y.curveBundle=et,y.curveCardinal=bt,y.curveCardinalClosed=Bt,y.curveCardinalOpen=ht,y.curveCatmullRom=en,y.curveCatmullRomClosed=tn,y.curveCatmullRomOpen=Mn,y.curveLinear=E,y.curveLinearClosed=function(Be){return new sn(Be)},y.curveMonotoneX=function(Be){return new Ge(Be)},y.curveMonotoneY=function(Be){return new Qe(Be)},y.curveNatural=function(Be){return new it(Be)},y.curveStep=function(Be){return new xt(Be,.5)},y.curveStepAfter=function(Be){return new xt(Be,1)},y.curveStepBefore=function(Be){return new xt(Be,0)},y.line=N,y.lineRadial=ee,y.linkHorizontal=function(){return U(W)},y.linkRadial=function(){var Be=U(G);return Be.angle=Be.x,delete Be.x,Be.radius=Be.y,delete Be.y,Be},y.linkVertical=function(){return U(ae)},y.pie=function(){var Be=P,tt=I,dt=null,Dt=M(0),Nt=M(d),Yt=M(0);function fn(nn){var In,Dn,kn,rn,pn,gn=nn.length,Pn=0,jn=new Array(gn),Kn=new Array(gn),rr=+Dt.apply(this,arguments),lr=Math.min(d,Math.max(-d,Nt.apply(this,arguments)-rr)),kr=Math.min(Math.abs(lr)/gn,Yt.apply(this,arguments)),Xr=kr*(lr<0?-1:1);for(In=0;In<gn;++In)(pn=Kn[jn[In]=In]=+Be(nn[In],In,nn))>0&&(Pn+=pn);for(null!=tt?jn.sort(function(sr,oi){return tt(Kn[sr],Kn[oi])}):null!=dt&&jn.sort(function(sr,oi){return dt(nn[sr],nn[oi])}),In=0,kn=Pn?(lr-gn*Xr)/Pn:0;In<gn;++In,rr=rn)rn=rr+((pn=Kn[Dn=jn[In]])>0?pn*kn:0)+Xr,Kn[Dn]={data:nn[Dn],index:In,value:pn,startAngle:rr,endAngle:rn,padAngle:kr};return Kn}return fn.value=function(nn){return arguments.length?(Be="function"==typeof nn?nn:M(+nn),fn):Be},fn.sortValues=function(nn){return arguments.length?(tt=nn,dt=null,fn):tt},fn.sort=function(nn){return arguments.length?(dt=nn,tt=null,fn):dt},fn.startAngle=function(nn){return arguments.length?(Dt="function"==typeof nn?nn:M(+nn),fn):Dt},fn.endAngle=function(nn){return arguments.length?(Nt="function"==typeof nn?nn:M(+nn),fn):Nt},fn.padAngle=function(nn){return arguments.length?(Yt="function"==typeof nn?nn:M(+nn),fn):Yt},fn},y.pointRadial=X,y.radialArea=re,y.radialLine=ee,y.stack=function(){var Be=M([]),tt=$t,dt=Vt,Dt=pt;function Nt(Yt){var fn,nn,In=Be.apply(this,arguments),Dn=Yt.length,kn=In.length,rn=new Array(kn);for(fn=0;fn<kn;++fn){for(var pn,gn=In[fn],Pn=rn[fn]=new Array(Dn),jn=0;jn<Dn;++jn)Pn[jn]=pn=[0,+Dt(Yt[jn],gn,jn,Yt)],pn.data=Yt[jn];Pn.key=gn}for(fn=0,nn=tt(rn);fn<kn;++fn)rn[nn[fn]].index=fn;return dt(rn,nn),rn}return Nt.keys=function(Yt){return arguments.length?(Be="function"==typeof Yt?Yt:M(K.call(Yt)),Nt):Be},Nt.value=function(Yt){return arguments.length?(Dt="function"==typeof Yt?Yt:M(+Yt),Nt):Dt},Nt.order=function(Yt){return arguments.length?(tt=null==Yt?$t:"function"==typeof Yt?Yt:M(K.call(Yt)),Nt):tt},Nt.offset=function(Yt){return arguments.length?(dt=null==Yt?Vt:Yt,Nt):dt},Nt},y.stackOffsetDiverging=function(Be,tt){if((nn=Be.length)>0)for(var dt,Dt,Nt,Yt,fn,nn,In=0,Dn=Be[tt[0]].length;In<Dn;++In)for(Yt=fn=0,dt=0;dt<nn;++dt)(Nt=(Dt=Be[tt[dt]][In])[1]-Dt[0])>0?(Dt[0]=Yt,Dt[1]=Yt+=Nt):Nt<0?(Dt[1]=fn,Dt[0]=fn+=Nt):(Dt[0]=0,Dt[1]=Nt)},y.stackOffsetExpand=function(Be,tt){if((Dt=Be.length)>0){for(var dt,Dt,Nt,Yt=0,fn=Be[0].length;Yt<fn;++Yt){for(Nt=dt=0;dt<Dt;++dt)Nt+=Be[dt][Yt][1]||0;if(Nt)for(dt=0;dt<Dt;++dt)Be[dt][Yt][1]/=Nt}Vt(Be,tt)}},y.stackOffsetNone=Vt,y.stackOffsetSilhouette=function(Be,tt){if((dt=Be.length)>0){for(var dt,Dt=0,Nt=Be[tt[0]],Yt=Nt.length;Dt<Yt;++Dt){for(var fn=0,nn=0;fn<dt;++fn)nn+=Be[fn][Dt][1]||0;Nt[Dt][1]+=Nt[Dt][0]=-nn/2}Vt(Be,tt)}},y.stackOffsetWiggle=function(Be,tt){if((Nt=Be.length)>0&&(Dt=(dt=Be[tt[0]]).length)>0){for(var dt,Dt,Nt,Yt=0,fn=1;fn<Dt;++fn){for(var nn=0,In=0,Dn=0;nn<Nt;++nn){for(var kn=Be[tt[nn]],rn=kn[fn][1]||0,pn=(rn-(kn[fn-1][1]||0))/2,gn=0;gn<nn;++gn){var Pn=Be[tt[gn]];pn+=(Pn[fn][1]||0)-(Pn[fn-1][1]||0)}In+=rn,Dn+=pn*rn}dt[fn-1][1]+=dt[fn-1][0]=Yt,In&&(Yt-=Dn/In)}dt[fn-1][1]+=dt[fn-1][0]=Yt,Vt(Be,tt)}},y.stackOrderAppearance=At,y.stackOrderAscending=Ct,y.stackOrderDescending=function(Be){return Ct(Be).reverse()},y.stackOrderInsideOut=function(Be){var tt,dt,Dt=Be.length,Nt=Be.map(Pt),Yt=At(Be),fn=0,nn=0,In=[],Dn=[];for(tt=0;tt<Dt;++tt)dt=Yt[tt],fn<nn?(fn+=Nt[dt],In.push(dt)):(nn+=Nt[dt],Dn.push(dt));return Dn.reverse().concat(In)},y.stackOrderNone=$t,y.stackOrderReverse=function(Be){return $t(Be).reverse()},y.symbol=function(){var Be=M(te),tt=M(64),dt=null;function Dt(){var Nt;if(dt||(dt=Nt=x.path()),Be.apply(this,arguments).draw(dt,+tt.apply(this,arguments)),Nt)return dt=null,Nt+""||null}return Dt.type=function(Nt){return arguments.length?(Be="function"==typeof Nt?Nt:M(Nt),Dt):Be},Dt.size=function(Nt){return arguments.length?(tt="function"==typeof Nt?Nt:M(+Nt),Dt):tt},Dt.context=function(Nt){return arguments.length?(dt=null==Nt?null:Nt,Dt):dt},Dt},y.symbolCircle=te,y.symbolCross=ne,y.symbolDiamond=pe,y.symbolSquare=De,y.symbolStar=we,y.symbolTriangle=Ie,y.symbolWye=Pe,y.symbols=Re,Object.defineProperty(y,"__esModule",{value:!0})},"object"==typeof se&&void 0!==oe?x(se,b("d3-path")):x((y=y||self).d3=y.d3||{},y.d3)},{"d3-path":117}],120:[function(b,oe,se){var y,x;y=this,x=function(y,x){"use strict";function M(ht){if(0<=ht.y&&ht.y<100){var at=new Date(-1,ht.m,ht.d,ht.H,ht.M,ht.S,ht.L);return at.setFullYear(ht.y),at}return new Date(ht.y,ht.m,ht.d,ht.H,ht.M,ht.S,ht.L)}function _(ht){if(0<=ht.y&&ht.y<100){var at=new Date(Date.UTC(-1,ht.m,ht.d,ht.H,ht.M,ht.S,ht.L));return at.setUTCFullYear(ht.y),at}return new Date(Date.UTC(ht.y,ht.m,ht.d,ht.H,ht.M,ht.S,ht.L))}function e(ht,at,Ft){return{y:ht,m:at,d:Ft,H:0,M:0,S:0,L:0}}function o(ht){var at=ht.dateTime,Ft=ht.date,en=ht.time,Qt=ht.periods,tn=ht.days,dn=ht.shortDays,Mn=ht.months,sn=ht.shortMonths,ke=p(Qt),Se=f(Qt),Ce=p(tn),Ve=f(tn),Ge=p(dn),Qe=f(dn),ot=p(Mn),it=f(Mn),mt=p(sn),xt=f(sn),Vt={a:function(Pt){return dn[Pt.getDay()]},A:function(Pt){return tn[Pt.getDay()]},b:function(Pt){return sn[Pt.getMonth()]},B:function(Pt){return Mn[Pt.getMonth()]},c:null,d:re,e:re,f:U,H:X,I:K,j:ie,L:q,m:W,M:ae,p:function(Pt){return Qt[+(Pt.getHours()>=12)]},q:function(Pt){return 1+~~(Pt.getMonth()/3)},Q:ct,s:bt,S:G,u:te,U:ne,V:le,w:ue,W:pe,x:null,X:null,y:de,Y:_e,Z:me,"%":nt},$t={a:function(Pt){return dn[Pt.getUTCDay()]},A:function(Pt){return tn[Pt.getUTCDay()]},b:function(Pt){return sn[Pt.getUTCMonth()]},B:function(Pt){return Mn[Pt.getUTCMonth()]},c:null,d:we,e:we,f:ye,H:De,I:Le,j:Ie,L:je,m:Me,M:Oe,p:function(Pt){return Qt[+(Pt.getUTCHours()>=12)]},q:function(Pt){return 1+~~(Pt.getUTCMonth()/3)},Q:ct,s:bt,S:Pe,u:Re,U:Ue,V:qe,w:Xe,W:lt,x:null,X:null,y:He,Y:$e,Z:et,"%":nt},pt={a:function(Pt,Be,tt){var dt=Ge.exec(Be.slice(tt));return dt?(Pt.w=Qe[dt[0].toLowerCase()],tt+dt[0].length):-1},A:function(Pt,Be,tt){var dt=Ce.exec(Be.slice(tt));return dt?(Pt.w=Ve[dt[0].toLowerCase()],tt+dt[0].length):-1},b:function(Pt,Be,tt){var dt=mt.exec(Be.slice(tt));return dt?(Pt.m=xt[dt[0].toLowerCase()],tt+dt[0].length):-1},B:function(Pt,Be,tt){var dt=ot.exec(Be.slice(tt));return dt?(Pt.m=it[dt[0].toLowerCase()],tt+dt[0].length):-1},c:function(Pt,Be,tt){return Ct(Pt,at,Be,tt)},d:D,e:D,f:V,H:F,I:F,j:N,L:j,m:L,M:I,p:function(Pt,Be,tt){var dt=ke.exec(Be.slice(tt));return dt?(Pt.p=Se[dt[0].toLowerCase()],tt+dt[0].length):-1},q:E,Q:Y,s:ee,S:P,u:m,U:u,V:w,w:g,W:c,x:function(Pt,Be,tt){return Ct(Pt,Ft,Be,tt)},X:function(Pt,Be,tt){return Ct(Pt,en,Be,tt)},y:k,Y:A,Z:C,"%":Z};function At(Pt,Be){return function(tt){var dt,Dt,Nt,Yt=[],fn=-1,nn=0,In=Pt.length;for(tt instanceof Date||(tt=new Date(+tt));++fn<In;)37===Pt.charCodeAt(fn)&&(Yt.push(Pt.slice(nn,fn)),null!=(Dt=l[dt=Pt.charAt(++fn)])?dt=Pt.charAt(++fn):Dt="e"===dt?" ":"0",(Nt=Be[dt])&&(dt=Nt(tt,Dt)),Yt.push(dt),nn=fn+1);return Yt.push(Pt.slice(nn,fn)),Yt.join("")}}function Xt(Pt,Be){return function(tt){var dt,Dt,Nt=e(1900,void 0,1);if(Ct(Nt,Pt,tt+="",0)!=tt.length)return null;if("Q"in Nt)return new Date(Nt.Q);if("s"in Nt)return new Date(1e3*Nt.s+("L"in Nt?Nt.L:0));if(Be&&!("Z"in Nt)&&(Nt.Z=0),"p"in Nt&&(Nt.H=Nt.H%12+12*Nt.p),void 0===Nt.m&&(Nt.m="q"in Nt?Nt.q:0),"V"in Nt){if(Nt.V<1||Nt.V>53)return null;"w"in Nt||(Nt.w=1),"Z"in Nt?(Dt=(dt=_(e(Nt.y,0,1))).getUTCDay(),dt=Dt>4||0===Dt?x.utcMonday.ceil(dt):x.utcMonday(dt),dt=x.utcDay.offset(dt,7*(Nt.V-1)),Nt.y=dt.getUTCFullYear(),Nt.m=dt.getUTCMonth(),Nt.d=dt.getUTCDate()+(Nt.w+6)%7):(Dt=(dt=M(e(Nt.y,0,1))).getDay(),dt=Dt>4||0===Dt?x.timeMonday.ceil(dt):x.timeMonday(dt),dt=x.timeDay.offset(dt,7*(Nt.V-1)),Nt.y=dt.getFullYear(),Nt.m=dt.getMonth(),Nt.d=dt.getDate()+(Nt.w+6)%7)}else("W"in Nt||"U"in Nt)&&("w"in Nt||(Nt.w="u"in Nt?Nt.u%7:"W"in Nt?1:0),Dt="Z"in Nt?_(e(Nt.y,0,1)).getUTCDay():M(e(Nt.y,0,1)).getDay(),Nt.m=0,Nt.d="W"in Nt?(Nt.w+6)%7+7*Nt.W-(Dt+5)%7:Nt.w+7*Nt.U-(Dt+6)%7);return"Z"in Nt?(Nt.H+=Nt.Z/100|0,Nt.M+=Nt.Z%100,_(Nt)):M(Nt)}}function Ct(Pt,Be,tt,dt){for(var Dt,Nt,Yt=0,fn=Be.length,nn=tt.length;Yt<fn;){if(dt>=nn)return-1;if(37===(Dt=Be.charCodeAt(Yt++))){if(Dt=Be.charAt(Yt++),!(Nt=pt[Dt in l?Be.charAt(Yt++):Dt])||(dt=Nt(Pt,tt,dt))<0)return-1}else if(Dt!=tt.charCodeAt(dt++))return-1}return dt}return Vt.x=At(Ft,Vt),Vt.X=At(en,Vt),Vt.c=At(at,Vt),$t.x=At(Ft,$t),$t.X=At(en,$t),$t.c=At(at,$t),{format:function(Pt){var Be=At(Pt+="",Vt);return Be.toString=function(){return Pt},Be},parse:function(Pt){var Be=Xt(Pt+="",!1);return Be.toString=function(){return Pt},Be},utcFormat:function(Pt){var Be=At(Pt+="",$t);return Be.toString=function(){return Pt},Be},utcParse:function(Pt){var Be=Xt(Pt+="",!0);return Be.toString=function(){return Pt},Be}}}var a,l={"-":"",_:" ",0:"0"},i=/^\s*\d+/,v=/^%/,h=/[\\^$*+?|[\]().{}]/g;function s(ht,at,Ft){var en=ht<0?"-":"",Qt=(en?-ht:ht)+"",tn=Qt.length;return en+(tn<Ft?new Array(Ft-tn+1).join(at)+Qt:Qt)}function d(ht){return ht.replace(h,"\\$&")}function p(ht){return new RegExp("^(?:"+ht.map(d).join("|")+")","i")}function f(ht){for(var at={},Ft=-1,en=ht.length;++Ft<en;)at[ht[Ft].toLowerCase()]=Ft;return at}function g(ht,at,Ft){var en=i.exec(at.slice(Ft,Ft+1));return en?(ht.w=+en[0],Ft+en[0].length):-1}function m(ht,at,Ft){var en=i.exec(at.slice(Ft,Ft+1));return en?(ht.u=+en[0],Ft+en[0].length):-1}function u(ht,at,Ft){var en=i.exec(at.slice(Ft,Ft+2));return en?(ht.U=+en[0],Ft+en[0].length):-1}function w(ht,at,Ft){var en=i.exec(at.slice(Ft,Ft+2));return en?(ht.V=+en[0],Ft+en[0].length):-1}function c(ht,at,Ft){var en=i.exec(at.slice(Ft,Ft+2));return en?(ht.W=+en[0],Ft+en[0].length):-1}function A(ht,at,Ft){var en=i.exec(at.slice(Ft,Ft+4));return en?(ht.y=+en[0],Ft+en[0].length):-1}function k(ht,at,Ft){var en=i.exec(at.slice(Ft,Ft+2));return en?(ht.y=+en[0]+(+en[0]>68?1900:2e3),Ft+en[0].length):-1}function C(ht,at,Ft){var en=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(at.slice(Ft,Ft+6));return en?(ht.Z=en[1]?0:-(en[2]+(en[3]||"00")),Ft+en[0].length):-1}function E(ht,at,Ft){var en=i.exec(at.slice(Ft,Ft+1));return en?(ht.q=3*en[0]-3,Ft+en[0].length):-1}function L(ht,at,Ft){var en=i.exec(at.slice(Ft,Ft+2));return en?(ht.m=en[0]-1,Ft+en[0].length):-1}function D(ht,at,Ft){var en=i.exec(at.slice(Ft,Ft+2));return en?(ht.d=+en[0],Ft+en[0].length):-1}function N(ht,at,Ft){var en=i.exec(at.slice(Ft,Ft+3));return en?(ht.m=0,ht.d=+en[0],Ft+en[0].length):-1}function F(ht,at,Ft){var en=i.exec(at.slice(Ft,Ft+2));return en?(ht.H=+en[0],Ft+en[0].length):-1}function I(ht,at,Ft){var en=i.exec(at.slice(Ft,Ft+2));return en?(ht.M=+en[0],Ft+en[0].length):-1}function P(ht,at,Ft){var en=i.exec(at.slice(Ft,Ft+2));return en?(ht.S=+en[0],Ft+en[0].length):-1}function j(ht,at,Ft){var en=i.exec(at.slice(Ft,Ft+3));return en?(ht.L=+en[0],Ft+en[0].length):-1}function V(ht,at,Ft){var en=i.exec(at.slice(Ft,Ft+6));return en?(ht.L=Math.floor(en[0]/1e3),Ft+en[0].length):-1}function Z(ht,at,Ft){var en=v.exec(at.slice(Ft,Ft+1));return en?Ft+en[0].length:-1}function Y(ht,at,Ft){var en=i.exec(at.slice(Ft));return en?(ht.Q=+en[0],Ft+en[0].length):-1}function ee(ht,at,Ft){var en=i.exec(at.slice(Ft));return en?(ht.s=+en[0],Ft+en[0].length):-1}function re(ht,at){return s(ht.getDate(),at,2)}function X(ht,at){return s(ht.getHours(),at,2)}function K(ht,at){return s(ht.getHours()%12||12,at,2)}function ie(ht,at){return s(1+x.timeDay.count(x.timeYear(ht),ht),at,3)}function q(ht,at){return s(ht.getMilliseconds(),at,3)}function U(ht,at){return q(ht,at)+"000"}function W(ht,at){return s(ht.getMonth()+1,at,2)}function ae(ht,at){return s(ht.getMinutes(),at,2)}function G(ht,at){return s(ht.getSeconds(),at,2)}function te(ht){var at=ht.getDay();return 0===at?7:at}function ne(ht,at){return s(x.timeSunday.count(x.timeYear(ht)-1,ht),at,2)}function le(ht,at){var Ft=ht.getDay();return ht=Ft>=4||0===Ft?x.timeThursday(ht):x.timeThursday.ceil(ht),s(x.timeThursday.count(x.timeYear(ht),ht)+(4===x.timeYear(ht).getDay()),at,2)}function ue(ht){return ht.getDay()}function pe(ht,at){return s(x.timeMonday.count(x.timeYear(ht)-1,ht),at,2)}function de(ht,at){return s(ht.getFullYear()%100,at,2)}function _e(ht,at){return s(ht.getFullYear()%1e4,at,4)}function me(ht){var at=ht.getTimezoneOffset();return(at>0?"-":(at*=-1,"+"))+s(at/60|0,"0",2)+s(at%60,"0",2)}function we(ht,at){return s(ht.getUTCDate(),at,2)}function De(ht,at){return s(ht.getUTCHours(),at,2)}function Le(ht,at){return s(ht.getUTCHours()%12||12,at,2)}function Ie(ht,at){return s(1+x.utcDay.count(x.utcYear(ht),ht),at,3)}function je(ht,at){return s(ht.getUTCMilliseconds(),at,3)}function ye(ht,at){return je(ht,at)+"000"}function Me(ht,at){return s(ht.getUTCMonth()+1,at,2)}function Oe(ht,at){return s(ht.getUTCMinutes(),at,2)}function Pe(ht,at){return s(ht.getUTCSeconds(),at,2)}function Re(ht){var at=ht.getUTCDay();return 0===at?7:at}function Ue(ht,at){return s(x.utcSunday.count(x.utcYear(ht)-1,ht),at,2)}function qe(ht,at){var Ft=ht.getUTCDay();return ht=Ft>=4||0===Ft?x.utcThursday(ht):x.utcThursday.ceil(ht),s(x.utcThursday.count(x.utcYear(ht),ht)+(4===x.utcYear(ht).getUTCDay()),at,2)}function Xe(ht){return ht.getUTCDay()}function lt(ht,at){return s(x.utcMonday.count(x.utcYear(ht)-1,ht),at,2)}function He(ht,at){return s(ht.getUTCFullYear()%100,at,2)}function $e(ht,at){return s(ht.getUTCFullYear()%1e4,at,4)}function et(){return"+0000"}function nt(){return"%"}function ct(ht){return+ht}function bt(ht){return Math.floor(+ht/1e3)}function kt(ht){return a=o(ht),y.timeFormat=a.format,y.timeParse=a.parse,y.utcFormat=a.utcFormat,y.utcParse=a.utcParse,a}kt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Bt=Date.prototype.toISOString?function(ht){return ht.toISOString()}:y.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Et=+new Date("2000-01-01T00:00:00.000Z")?function(ht){var at=new Date(ht);return isNaN(at)?null:at}:y.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");y.isoFormat=Bt,y.isoParse=Et,y.timeFormatDefaultLocale=kt,y.timeFormatLocale=o,Object.defineProperty(y,"__esModule",{value:!0})},"object"==typeof se&&void 0!==oe?x(se,b("d3-time")):x((y=y||self).d3=y.d3||{},y.d3)},{"d3-time":121}],121:[function(b,oe,se){var y;y=this,function(y){"use strict";var x=new Date,M=new Date;function _(Me,Oe,Pe,Re){function Ue(qe){return Me(qe=0===arguments.length?new Date:new Date(+qe)),qe}return Ue.floor=function(qe){return Me(qe=new Date(+qe)),qe},Ue.ceil=function(qe){return Me(qe=new Date(qe-1)),Oe(qe,1),Me(qe),qe},Ue.round=function(qe){var Xe=Ue(qe),lt=Ue.ceil(qe);return qe-Xe<lt-qe?Xe:lt},Ue.offset=function(qe,Xe){return Oe(qe=new Date(+qe),null==Xe?1:Math.floor(Xe)),qe},Ue.range=function(qe,Xe,lt){var He,$e=[];if(qe=Ue.ceil(qe),lt=null==lt?1:Math.floor(lt),!(qe<Xe&&lt>0))return $e;do{$e.push(He=new Date(+qe)),Oe(qe,lt),Me(qe)}while(He<qe&&qe<Xe);return $e},Ue.filter=function(qe){return _(function(Xe){if(Xe>=Xe)for(;Me(Xe),!qe(Xe);)Xe.setTime(Xe-1)},function(Xe,lt){if(Xe>=Xe)if(lt<0)for(;++lt<=0;)for(;Oe(Xe,-1),!qe(Xe););else for(;--lt>=0;)for(;Oe(Xe,1),!qe(Xe););})},Pe&&(Ue.count=function(qe,Xe){return x.setTime(+qe),M.setTime(+Xe),Me(x),Me(M),Math.floor(Pe(x,M))},Ue.every=function(qe){return qe=Math.floor(qe),isFinite(qe)&&qe>0?qe>1?Ue.filter(Re?function(Xe){return Re(Xe)%qe==0}:function(Xe){return Ue.count(0,Xe)%qe==0}):Ue:null}),Ue}var e=_(function(){},function(Me,Oe){Me.setTime(+Me+Oe)},function(Me,Oe){return Oe-Me});e.every=function(Me){return Me=Math.floor(Me),isFinite(Me)&&Me>0?Me>1?_(function(Oe){Oe.setTime(Math.floor(Oe/Me)*Me)},function(Oe,Pe){Oe.setTime(+Oe+Pe*Me)},function(Oe,Pe){return(Pe-Oe)/Me}):e:null};var o=e.range,a=_(function(Me){Me.setTime(Me-Me.getMilliseconds())},function(Me,Oe){Me.setTime(+Me+1e3*Oe)},function(Me,Oe){return(Oe-Me)/1e3},function(Me){return Me.getUTCSeconds()}),l=a.range,i=_(function(Me){Me.setTime(Me-Me.getMilliseconds()-1e3*Me.getSeconds())},function(Me,Oe){Me.setTime(+Me+6e4*Oe)},function(Me,Oe){return(Oe-Me)/6e4},function(Me){return Me.getMinutes()}),v=i.range,h=_(function(Me){Me.setTime(Me-Me.getMilliseconds()-1e3*Me.getSeconds()-6e4*Me.getMinutes())},function(Me,Oe){Me.setTime(+Me+36e5*Oe)},function(Me,Oe){return(Oe-Me)/36e5},function(Me){return Me.getHours()}),s=h.range,d=_(function(Me){Me.setHours(0,0,0,0)},function(Me,Oe){Me.setDate(Me.getDate()+Oe)},function(Me,Oe){return(Oe-Me-6e4*(Oe.getTimezoneOffset()-Me.getTimezoneOffset()))/864e5},function(Me){return Me.getDate()-1}),p=d.range;function f(Me){return _(function(Oe){Oe.setDate(Oe.getDate()-(Oe.getDay()+7-Me)%7),Oe.setHours(0,0,0,0)},function(Oe,Pe){Oe.setDate(Oe.getDate()+7*Pe)},function(Oe,Pe){return(Pe-Oe-6e4*(Pe.getTimezoneOffset()-Oe.getTimezoneOffset()))/6048e5})}var g=f(0),m=f(1),u=f(2),w=f(3),c=f(4),A=f(5),k=f(6),C=g.range,E=m.range,L=u.range,D=w.range,N=c.range,F=A.range,I=k.range,P=_(function(Me){Me.setDate(1),Me.setHours(0,0,0,0)},function(Me,Oe){Me.setMonth(Me.getMonth()+Oe)},function(Me,Oe){return Oe.getMonth()-Me.getMonth()+12*(Oe.getFullYear()-Me.getFullYear())},function(Me){return Me.getMonth()}),j=P.range,V=_(function(Me){Me.setMonth(0,1),Me.setHours(0,0,0,0)},function(Me,Oe){Me.setFullYear(Me.getFullYear()+Oe)},function(Me,Oe){return Oe.getFullYear()-Me.getFullYear()},function(Me){return Me.getFullYear()});V.every=function(Me){return isFinite(Me=Math.floor(Me))&&Me>0?_(function(Oe){Oe.setFullYear(Math.floor(Oe.getFullYear()/Me)*Me),Oe.setMonth(0,1),Oe.setHours(0,0,0,0)},function(Oe,Pe){Oe.setFullYear(Oe.getFullYear()+Pe*Me)}):null};var Z=V.range,Y=_(function(Me){Me.setUTCSeconds(0,0)},function(Me,Oe){Me.setTime(+Me+6e4*Oe)},function(Me,Oe){return(Oe-Me)/6e4},function(Me){return Me.getUTCMinutes()}),ee=Y.range,re=_(function(Me){Me.setUTCMinutes(0,0,0)},function(Me,Oe){Me.setTime(+Me+36e5*Oe)},function(Me,Oe){return(Oe-Me)/36e5},function(Me){return Me.getUTCHours()}),X=re.range,K=_(function(Me){Me.setUTCHours(0,0,0,0)},function(Me,Oe){Me.setUTCDate(Me.getUTCDate()+Oe)},function(Me,Oe){return(Oe-Me)/864e5},function(Me){return Me.getUTCDate()-1}),ie=K.range;function q(Me){return _(function(Oe){Oe.setUTCDate(Oe.getUTCDate()-(Oe.getUTCDay()+7-Me)%7),Oe.setUTCHours(0,0,0,0)},function(Oe,Pe){Oe.setUTCDate(Oe.getUTCDate()+7*Pe)},function(Oe,Pe){return(Pe-Oe)/6048e5})}var U=q(0),W=q(1),ae=q(2),G=q(3),te=q(4),ne=q(5),le=q(6),ue=U.range,pe=W.range,de=ae.range,_e=G.range,me=te.range,we=ne.range,De=le.range,Le=_(function(Me){Me.setUTCDate(1),Me.setUTCHours(0,0,0,0)},function(Me,Oe){Me.setUTCMonth(Me.getUTCMonth()+Oe)},function(Me,Oe){return Oe.getUTCMonth()-Me.getUTCMonth()+12*(Oe.getUTCFullYear()-Me.getUTCFullYear())},function(Me){return Me.getUTCMonth()}),Ie=Le.range,je=_(function(Me){Me.setUTCMonth(0,1),Me.setUTCHours(0,0,0,0)},function(Me,Oe){Me.setUTCFullYear(Me.getUTCFullYear()+Oe)},function(Me,Oe){return Oe.getUTCFullYear()-Me.getUTCFullYear()},function(Me){return Me.getUTCFullYear()});je.every=function(Me){return isFinite(Me=Math.floor(Me))&&Me>0?_(function(Oe){Oe.setUTCFullYear(Math.floor(Oe.getUTCFullYear()/Me)*Me),Oe.setUTCMonth(0,1),Oe.setUTCHours(0,0,0,0)},function(Oe,Pe){Oe.setUTCFullYear(Oe.getUTCFullYear()+Pe*Me)}):null};var ye=je.range;y.timeDay=d,y.timeDays=p,y.timeFriday=A,y.timeFridays=F,y.timeHour=h,y.timeHours=s,y.timeInterval=_,y.timeMillisecond=e,y.timeMilliseconds=o,y.timeMinute=i,y.timeMinutes=v,y.timeMonday=m,y.timeMondays=E,y.timeMonth=P,y.timeMonths=j,y.timeSaturday=k,y.timeSaturdays=I,y.timeSecond=a,y.timeSeconds=l,y.timeSunday=g,y.timeSundays=C,y.timeThursday=c,y.timeThursdays=N,y.timeTuesday=u,y.timeTuesdays=L,y.timeWednesday=w,y.timeWednesdays=D,y.timeWeek=g,y.timeWeeks=C,y.timeYear=V,y.timeYears=Z,y.utcDay=K,y.utcDays=ie,y.utcFriday=ne,y.utcFridays=we,y.utcHour=re,y.utcHours=X,y.utcMillisecond=e,y.utcMilliseconds=o,y.utcMinute=Y,y.utcMinutes=ee,y.utcMonday=W,y.utcMondays=pe,y.utcMonth=Le,y.utcMonths=Ie,y.utcSaturday=le,y.utcSaturdays=De,y.utcSecond=a,y.utcSeconds=l,y.utcSunday=U,y.utcSundays=ue,y.utcThursday=te,y.utcThursdays=me,y.utcTuesday=ae,y.utcTuesdays=de,y.utcWednesday=G,y.utcWednesdays=_e,y.utcWeek=U,y.utcWeeks=ue,y.utcYear=je,y.utcYears=ye,Object.defineProperty(y,"__esModule",{value:!0})}("object"==typeof se&&void 0!==oe?se:(y=y||self).d3=y.d3||{})},{}],122:[function(b,oe,se){arguments[4][121][0].apply(se,arguments)},{dup:121}],123:[function(b,oe,se){var y;y=this,function(y){"use strict";var x,M,_=0,e=0,o=0,a=0,l=0,i=0,v="object"==typeof performance&&performance.now?performance:Date,h="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(c){setTimeout(c,17)};function s(){return l||(h(d),l=v.now()+i)}function d(){l=0}function p(){this._call=this._time=this._next=null}function f(c,A,k){var C=new p;return C.restart(c,A,k),C}function g(){s(),++_;for(var c,A=x;A;)(c=l-A._time)>=0&&A._call.call(null,c),A=A._next;--_}function m(){l=(a=v.now())+i,_=e=0;try{g()}finally{_=0,function(){for(var c,A,k=x,C=1/0;k;)k._call?(C>k._time&&(C=k._time),c=k,k=k._next):(A=k._next,k._next=null,k=c?c._next=A:x=A);M=c,w(C)}(),l=0}}function u(){var c=v.now(),A=c-a;A>1e3&&(i-=A,a=c)}function w(c){_||(e&&(e=clearTimeout(e)),c-l>24?(c<1/0&&(e=setTimeout(m,c-v.now()-i)),o&&(o=clearInterval(o))):(o||(a=v.now(),o=setInterval(u,1e3)),_=1,h(m)))}p.prototype=f.prototype={constructor:p,restart:function(c,A,k){if("function"!=typeof c)throw new TypeError("callback is not a function");k=(null==k?s():+k)+(null==A?0:+A),this._next||M===this||(M?M._next=this:x=this,M=this),this._call=c,this._time=k,w()},stop:function(){this._call&&(this._call=null,this._time=1/0,w())}},y.interval=function(c,A,k){var C=new p,E=A;return null==A?(C.restart(c,A,k),C):(A=+A,k=null==k?s():+k,C.restart(function L(D){D+=E,C.restart(L,E+=A,k),c(D)},A,k),C)},y.now=s,y.timeout=function(c,A,k){var C=new p;return C.restart(function(E){C.stop(),c(E+A)},A=null==A?0:+A,k),C},y.timer=f,y.timerFlush=g,Object.defineProperty(y,"__esModule",{value:!0})}("object"==typeof se&&void 0!==oe?se:(y=y||self).d3=y.d3||{})},{}],124:[function(b,oe,se){oe.exports=function(){for(var y=0;y<arguments.length;y++)if(void 0!==arguments[y])return arguments[y]}},{}],125:[function(b,oe,se){"use strict";oe.exports=M;var y=(M.canvas=document.createElement("canvas")).getContext("2d"),x=_([32,126]);function M(e,o){Array.isArray(e)&&(e=e.join(", "));var a,l={},i=16,v=.05;o&&(2===o.length&&"number"==typeof o[0]?a=_(o):Array.isArray(o)?a=o:(o.o?a=_(o.o):o.pairs&&(a=o.pairs),o.fontSize&&(i=o.fontSize),null!=o.threshold&&(v=o.threshold))),a||(a=x),y.font=i+"px "+e;for(var h=0;h<a.length;h++){var s=a[h],d=y.measureText(s[0]).width+y.measureText(s[1]).width,p=y.measureText(s).width;Math.abs(d-p)>i*v&&(l[s]=(p-d)/i*1e3)}return l}function _(e){for(var o=[],a=e[0];a<=e[1];a++)for(var l=String.fromCharCode(a),i=e[0];i<e[1];i++){var v=l+String.fromCharCode(i);o.push(v)}return o}M.createPairs=_,M.ascii=x},{}],126:[function(b,oe,se){var y=b("abs-svg-path"),x=b("normalize-svg-path"),M={M:"moveTo",C:"bezierCurveTo"};oe.exports=function(_,e){_.beginPath(),x(y(e)).forEach(function(o){var a=o[0],l=o.slice(1);_[M[a]].apply(_,l)}),_.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(b,oe,se){oe.exports=function(y){switch(y){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(b,oe,se){"use strict";oe.exports=function(y,x){switch(void 0===x&&(x=0),typeof y){case"number":if(y>0)return function(M,_){var e,o;for(e=new Array(M),o=0;o<M;++o)e[o]=_;return e}(0|y,x);break;case"object":if("number"==typeof y.length)return function M(_,e,o){var a=0|_[o];if(a<=0)return[];var l,i=new Array(a);if(o===_.length-1)for(l=0;l<a;++l)i[l]=e;else for(l=0;l<a;++l)i[l]=M(_,e,o+1);return i}(y,x,0)}return[]}},{}],129:[function(b,oe,se){"use strict";function y(N,F,I){I=I||2;var P,j,V,Z,Y,ee,re,X=F&&F.length,K=X?F[0]*I:N.length,ie=x(N,0,K,I,!0),q=[];if(!ie||ie.next===ie.prev)return q;if(X&&(ie=function(W,ae,G,te){var ne,le,de,_e=[];for(ne=0,le=ae.length;ne<le;ne++)(de=x(W,ae[ne]*te,ne<le-1?ae[ne+1]*te:W.length,te,!1))===de.next&&(de.steiner=!0),_e.push(d(de));for(_e.sort(i),ne=0;ne<_e.length;ne++)v(_e[ne],G),G=M(G,G.next);return G}(N,F,ie,I)),N.length>80*I){P=V=N[0],j=Z=N[1];for(var U=I;U<K;U+=I)(Y=N[U])<P&&(P=Y),(ee=N[U+1])<j&&(j=ee),Y>V&&(V=Y),ee>Z&&(Z=ee);re=0!==(re=Math.max(V-P,Z-j))?1/re:0}return _(ie,q,I,P,j,re),q}function x(N,F,I,P,j){var V,Z;if(j===D(N,F,I,P)>0)for(V=F;V<I;V+=P)Z=C(V,N[V],N[V+1],Z);else for(V=I-P;V>=F;V-=P)Z=C(V,N[V],N[V+1],Z);return Z&&m(Z,Z.next)&&(E(Z),Z=Z.next),Z}function M(N,F){if(!N)return N;F||(F=N);var I,P=N;do{if(I=!1,P.steiner||!m(P,P.next)&&0!==g(P.prev,P,P.next))P=P.next;else{if(E(P),(P=F=P.prev)===P.next)break;I=!0}}while(I||P!==F);return F}function _(N,F,I,P,j,V,Z){if(N){!Z&&V&&function(X,K,ie,q){var U=X;do{null===U.z&&(U.z=s(U.x,U.y,K,ie,q)),U.prevZ=U.prev,U.nextZ=U.next,U=U.next}while(U!==X);U.prevZ.nextZ=null,U.prevZ=null,function(W){var ae,G,te,ne,le,ue,pe,de,_e=1;do{for(G=W,W=null,le=null,ue=0;G;){for(ue++,te=G,pe=0,ae=0;ae<_e&&(pe++,te=te.nextZ);ae++);for(de=_e;pe>0||de>0&&te;)0!==pe&&(0===de||!te||G.z<=te.z)?(ne=G,G=G.nextZ,pe--):(ne=te,te=te.nextZ,de--),le?le.nextZ=ne:W=ne,ne.prevZ=le,le=ne;G=te}le.nextZ=null,_e*=2}while(ue>1)}(U)}(N,P,j,V);for(var Y,ee,re=N;N.prev!==N.next;)if(Y=N.prev,ee=N.next,V?o(N,P,j,V):e(N))F.push(Y.i/I),F.push(N.i/I),F.push(ee.i/I),E(N),N=ee.next,re=ee.next;else if((N=ee)===re){Z?1===Z?_(N=a(M(N),F,I),F,I,P,j,V,2):2===Z&&l(N,F,I,P,j,V):_(M(N),F,I,P,j,V,1);break}}}function e(N){var F=N.prev,I=N,P=N.next;if(g(F,I,P)>=0)return!1;for(var j=N.next.next;j!==N.prev;){if(p(F.x,F.y,I.x,I.y,P.x,P.y,j.x,j.y)&&g(j.prev,j,j.next)>=0)return!1;j=j.next}return!0}function o(N,F,I,P){var j=N.prev,V=N,Z=N.next;if(g(j,V,Z)>=0)return!1;for(var re=j.x>V.x?j.x>Z.x?j.x:Z.x:V.x>Z.x?V.x:Z.x,X=j.y>V.y?j.y>Z.y?j.y:Z.y:V.y>Z.y?V.y:Z.y,K=s(j.x<V.x?j.x<Z.x?j.x:Z.x:V.x<Z.x?V.x:Z.x,j.y<V.y?j.y<Z.y?j.y:Z.y:V.y<Z.y?V.y:Z.y,F,I,P),ie=s(re,X,F,I,P),q=N.prevZ,U=N.nextZ;q&&q.z>=K&&U&&U.z<=ie;){if(q!==N.prev&&q!==N.next&&p(j.x,j.y,V.x,V.y,Z.x,Z.y,q.x,q.y)&&g(q.prev,q,q.next)>=0||(q=q.prevZ,U!==N.prev&&U!==N.next&&p(j.x,j.y,V.x,V.y,Z.x,Z.y,U.x,U.y)&&g(U.prev,U,U.next)>=0))return!1;U=U.nextZ}for(;q&&q.z>=K;){if(q!==N.prev&&q!==N.next&&p(j.x,j.y,V.x,V.y,Z.x,Z.y,q.x,q.y)&&g(q.prev,q,q.next)>=0)return!1;q=q.prevZ}for(;U&&U.z<=ie;){if(U!==N.prev&&U!==N.next&&p(j.x,j.y,V.x,V.y,Z.x,Z.y,U.x,U.y)&&g(U.prev,U,U.next)>=0)return!1;U=U.nextZ}return!0}function a(N,F,I){var P=N;do{var j=P.prev,V=P.next.next;!m(j,V)&&u(j,P,P.next,V)&&A(j,V)&&A(V,j)&&(F.push(j.i/I),F.push(P.i/I),F.push(V.i/I),E(P),E(P.next),P=N=V),P=P.next}while(P!==N);return M(P)}function l(N,F,I,P,j,V){var Z=N;do{for(var Y=Z.next.next;Y!==Z.prev;){if(Z.i!==Y.i&&f(Z,Y)){var ee=k(Z,Y);return Z=M(Z,Z.next),ee=M(ee,ee.next),_(Z,F,I,P,j,V),void _(ee,F,I,P,j,V)}Y=Y.next}Z=Z.next}while(Z!==N)}function i(N,F){return N.x-F.x}function v(N,F){if(F=function(P,j){var V,Z=j,Y=P.x,ee=P.y,re=-1/0;do{if(ee<=Z.y&&ee>=Z.next.y&&Z.next.y!==Z.y){var X=Z.x+(ee-Z.y)*(Z.next.x-Z.x)/(Z.next.y-Z.y);if(X<=Y&&X>re){if(re=X,X===Y){if(ee===Z.y)return Z;if(ee===Z.next.y)return Z.next}V=Z.x<Z.next.x?Z:Z.next}}Z=Z.next}while(Z!==j);if(!V)return null;if(Y===re)return V;var K,ie=V,q=V.x,U=V.y,W=1/0;Z=V;do{Y>=Z.x&&Z.x>=q&&Y!==Z.x&&p(ee<U?Y:re,ee,q,U,ee<U?re:Y,ee,Z.x,Z.y)&&(K=Math.abs(ee-Z.y)/(Y-Z.x),A(Z,P)&&(K<W||K===W&&(Z.x>V.x||Z.x===V.x&&h(V,Z)))&&(V=Z,W=K)),Z=Z.next}while(Z!==ie);return V}(N,F)){var I=k(F,N);M(F,F.next),M(I,I.next)}}function h(N,F){return g(N.prev,N,F.prev)<0&&g(F.next,N,N.next)<0}function s(N,F,I,P,j){return(N=1431655765&((N=858993459&((N=252645135&((N=16711935&((N=32767*(N-I)*j)|N<<8))|N<<4))|N<<2))|N<<1))|(F=1431655765&((F=858993459&((F=252645135&((F=16711935&((F=32767*(F-P)*j)|F<<8))|F<<4))|F<<2))|F<<1))<<1}function d(N){var F=N,I=N;do{(F.x<I.x||F.x===I.x&&F.y<I.y)&&(I=F),F=F.next}while(F!==N);return I}function p(N,F,I,P,j,V,Z,Y){return(j-Z)*(F-Y)-(N-Z)*(V-Y)>=0&&(N-Z)*(P-Y)-(I-Z)*(F-Y)>=0&&(I-Z)*(V-Y)-(j-Z)*(P-Y)>=0}function f(N,F){return N.next.i!==F.i&&N.prev.i!==F.i&&!function(I,P){var j=I;do{if(j.i!==I.i&&j.next.i!==I.i&&j.i!==P.i&&j.next.i!==P.i&&u(j,j.next,I,P))return!0;j=j.next}while(j!==I);return!1}(N,F)&&(A(N,F)&&A(F,N)&&function(I,P){var j=I,V=!1,Z=(I.x+P.x)/2,Y=(I.y+P.y)/2;do{j.y>Y!=j.next.y>Y&&j.next.y!==j.y&&Z<(j.next.x-j.x)*(Y-j.y)/(j.next.y-j.y)+j.x&&(V=!V),j=j.next}while(j!==I);return V}(N,F)&&(g(N.prev,N,F.prev)||g(N,F.prev,F))||m(N,F)&&g(N.prev,N,N.next)>0&&g(F.prev,F,F.next)>0)}function g(N,F,I){return(F.y-N.y)*(I.x-F.x)-(F.x-N.x)*(I.y-F.y)}function m(N,F){return N.x===F.x&&N.y===F.y}function u(N,F,I,P){var j=c(g(N,F,I)),V=c(g(N,F,P)),Z=c(g(I,P,N)),Y=c(g(I,P,F));return j!==V&&Z!==Y||!(0!==j||!w(N,I,F))||!(0!==V||!w(N,P,F))||!(0!==Z||!w(I,N,P))||!(0!==Y||!w(I,F,P))}function w(N,F,I){return F.x<=Math.max(N.x,I.x)&&F.x>=Math.min(N.x,I.x)&&F.y<=Math.max(N.y,I.y)&&F.y>=Math.min(N.y,I.y)}function c(N){return N>0?1:N<0?-1:0}function A(N,F){return g(N.prev,N,N.next)<0?g(N,F,N.next)>=0&&g(N,N.prev,F)>=0:g(N,F,N.prev)<0||g(N,N.next,F)<0}function k(N,F){var I=new L(N.i,N.x,N.y),P=new L(F.i,F.x,F.y),j=N.next,V=F.prev;return N.next=F,F.prev=N,I.next=j,j.prev=I,P.next=I,I.prev=P,V.next=P,P.prev=V,P}function C(N,F,I,P){var j=new L(N,F,I);return P?(j.next=P.next,j.prev=P,P.next.prev=j,P.next=j):(j.prev=j,j.next=j),j}function E(N){N.next.prev=N.prev,N.prev.next=N.next,N.prevZ&&(N.prevZ.nextZ=N.nextZ),N.nextZ&&(N.nextZ.prevZ=N.prevZ)}function L(N,F,I){this.i=N,this.x=F,this.y=I,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function D(N,F,I,P){for(var j=0,V=F,Z=I-P;V<I;V+=P)j+=(N[Z]-N[V])*(N[V+1]+N[Z+1]),Z=V;return j}oe.exports=y,oe.exports.default=y,y.deviation=function(N,F,I,P){var j=F&&F.length,Z=Math.abs(D(N,0,j?F[0]*I:N.length,I));if(j)for(var Y=0,ee=F.length;Y<ee;Y++)Z-=Math.abs(D(N,F[Y]*I,Y<ee-1?F[Y+1]*I:N.length,I));var K=0;for(Y=0;Y<P.length;Y+=3){var ie=P[Y]*I,q=P[Y+1]*I,U=P[Y+2]*I;K+=Math.abs((N[ie]-N[U])*(N[q+1]-N[ie+1])-(N[ie]-N[q])*(N[U+1]-N[ie+1]))}return 0===Z&&0===K?0:Math.abs((K-Z)/Z)},y.flatten=function(N){for(var F=N[0][0].length,I={vertices:[],holes:[],dimensions:F},P=0,j=0;j<N.length;j++){for(var V=0;V<N[j].length;V++)for(var Z=0;Z<F;Z++)I.vertices.push(N[j][V][Z]);j>0&&I.holes.push(P+=N[j-1].length)}return I}},{}],130:[function(b,oe,se){var y=b("strongly-connected-components");oe.exports=function(x,M){var _,e=[],o=[],a=[],l={},i=[];function v(u){var w,c,A=!1;for(o.push(u),a[u]=!0,w=0;w<i[u].length;w++)(c=i[u][w])===_?(h(_,o),A=!0):a[c]||(A=v(c));if(A)!function C(E){a[E]=!1,l.hasOwnProperty(E)&&Object.keys(l[E]).forEach(function(L){delete l[E][L],a[L]&&C(L)})}(u);else for(w=0;w<i[u].length;w++){var k=l[c=i[u][w]];k||(l[c]=k={}),k[c]=!0}return o.pop(),A}function h(u,w){var c=[].concat(w).concat(u);M?M(v):e.push(c)}function s(u){!function(L){for(var D=0;D<x.length;D++)D<L&&(x[D]=[]),x[D]=x[D].filter(function(N){return N>=L})}(u);for(var w,c=y(x).components.filter(function(L){return L.length>1}),A=1/0,k=0;k<c.length;k++)for(var C=0;C<c[k].length;C++)c[k][C]<A&&(A=c[k][C],w=k);var E=c[w];return!!E&&{leastVertex:A,adjList:x.map(function(L,D){return-1===E.indexOf(D)?[]:L.filter(function(N){return-1!==E.indexOf(N)})})}}_=0;for(var d=x.length;_<d;){var p=s(_);if(_=p.leastVertex,i=p.adjList){for(var f=0;f<i.length;f++)for(var g=0;g<i[f].length;g++){var m=i[f][g];a[+m]=!1,l[m]={}}v(_),_+=1}else _=d}return M?void 0:e}},{"strongly-connected-components":306}],131:[function(b,oe,se){"use strict";var y=b("../../object/valid-value");oe.exports=function(){return y(this).length=0,this}},{"../../object/valid-value":162}],132:[function(b,oe,se){"use strict";oe.exports=b("./is-implemented")()?Array.from:b("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(b,oe,se){"use strict";oe.exports=function(){var y,x,M=Array.from;return"function"==typeof M&&(x=M(y=["raz","dwa"]),Boolean(x&&x!==y&&"dwa"===x[1]))}},{}],134:[function(b,oe,se){"use strict";var y=b("es6-symbol").iterator,x=b("../../function/is-arguments"),M=b("../../function/is-function"),_=b("../../number/to-pos-integer"),e=b("../../object/valid-callable"),o=b("../../object/valid-value"),a=b("../../object/is-value"),l=b("../../string/is-string"),i=Array.isArray,v=Function.prototype.call,h={configurable:!0,enumerable:!0,writable:!0,value:null},s=Object.defineProperty;oe.exports=function(d){var p,f,g,m,u,w,c,A,k,C,E=arguments[1],L=arguments[2];if(d=Object(o(d)),a(E)&&e(E),this&&this!==Array&&M(this))p=this;else{if(!E){if(x(d))return 1!==(u=d.length)?Array.apply(null,d):((m=new Array(1))[0]=d[0],m);if(i(d)){for(m=new Array(u=d.length),f=0;f<u;++f)m[f]=d[f];return m}}m=[]}if(!i(d))if(void 0!==(k=d[y])){for(c=e(k).call(d),p&&(m=new p),A=c.next(),f=0;!A.done;)C=E?v.call(E,L,A.value,f):A.value,p?(h.value=C,s(m,f,h)):m[f]=C,A=c.next(),++f;u=f}else if(l(d)){for(u=d.length,p&&(m=new p),f=0,g=0;f<u;++f)C=d[f],f+1<u&&(w=C.charCodeAt(0))>=55296&&w<=56319&&(C+=d[++f]),C=E?v.call(E,L,C,g):C,p?(h.value=C,s(m,g,h)):m[g]=C,++g;u=g}if(void 0===u)for(u=_(d.length),p&&(m=new p(u)),f=0;f<u;++f)C=E?v.call(E,L,d[f],f):d[f],p?(h.value=C,s(m,f,h)):m[f]=C;return p&&(h.value=null,m.length=u),m}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(b,oe,se){"use strict";var y=Object.prototype.toString,x=y.call(function(){return arguments}());oe.exports=function(M){return y.call(M)===x}},{}],136:[function(b,oe,se){"use strict";var y=Object.prototype.toString,x=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);oe.exports=function(M){return"function"==typeof M&&x(y.call(M))}},{}],137:[function(b,oe,se){"use strict";oe.exports=function(){}},{}],138:[function(b,oe,se){"use strict";oe.exports=b("./is-implemented")()?Math.sign:b("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(b,oe,se){"use strict";oe.exports=function(){var y=Math.sign;return"function"==typeof y&&1===y(10)&&-1===y(-20)}},{}],140:[function(b,oe,se){"use strict";oe.exports=function(y){return y=Number(y),isNaN(y)||0===y?y:y>0?1:-1}},{}],141:[function(b,oe,se){"use strict";var y=b("../math/sign"),x=Math.abs,M=Math.floor;oe.exports=function(_){return isNaN(_)?0:0!==(_=Number(_))&&isFinite(_)?y(_)*M(x(_)):_}},{"../math/sign":138}],142:[function(b,oe,se){"use strict";var y=b("./to-integer"),x=Math.max;oe.exports=function(M){return x(0,y(M))}},{"./to-integer":141}],143:[function(b,oe,se){"use strict";var y=b("./valid-callable"),x=b("./valid-value"),M=Function.prototype.bind,_=Function.prototype.call,e=Object.keys,o=Object.prototype.propertyIsEnumerable;oe.exports=function(a,l){return function(i,v){var h,s=arguments[2],d=arguments[3];return i=Object(x(i)),y(v),h=e(i),d&&h.sort("function"==typeof d?M.call(d,i):void 0),"function"!=typeof a&&(a=h[a]),_.call(a,h,function(p,f){return o.call(i,p)?_.call(v,s,i[p],p,i,f):l})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(b,oe,se){"use strict";oe.exports=b("./is-implemented")()?Object.assign:b("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(b,oe,se){"use strict";oe.exports=function(){var y,x=Object.assign;return"function"==typeof x&&(x(y={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),y.foo+y.bar+y.trzy==="razdwatrzy")}},{}],146:[function(b,oe,se){"use strict";var y=b("../keys"),x=b("../valid-value"),M=Math.max;oe.exports=function(_,e){var o,a,l,i=M(arguments.length,2);for(_=Object(x(_)),l=function(v){try{_[v]=e[v]}catch(h){o||(o=h)}},a=1;a<i;++a)y(e=arguments[a]).forEach(l);if(void 0!==o)throw o;return _}},{"../keys":152,"../valid-value":162}],147:[function(b,oe,se){"use strict";var y=b("../array/from"),x=b("./assign"),M=b("./valid-value");oe.exports=function(_){var e=Object(M(_)),o=arguments[1],a=Object(arguments[2]);if(e!==_&&!o)return e;var l={};return o?y(o,function(i){(a.ensure||i in _)&&(l[i]=_[i])}):x(l,_),l}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(b,oe,se){"use strict";var y,x,M,_,e=Object.create;b("./set-prototype-of/is-implemented")()||(y=b("./set-prototype-of/shim")),oe.exports=y?1!==y.level?e:(x={},M={},_={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(o){M[o]="__proto__"!==o?_:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(x,M),Object.defineProperty(y,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:x}),function(o,a){return e(null===o?x:o,a)}):e},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(b,oe,se){"use strict";oe.exports=b("./_iterate")("forEach")},{"./_iterate":143}],150:[function(b,oe,se){"use strict";var y=b("./is-value"),x={function:!0,object:!0};oe.exports=function(M){return y(M)&&x[typeof M]||!1}},{"./is-value":151}],151:[function(b,oe,se){"use strict";var y=b("../function/noop")();oe.exports=function(x){return x!==y&&null!==x}},{"../function/noop":137}],152:[function(b,oe,se){"use strict";oe.exports=b("./is-implemented")()?Object.keys:b("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(b,oe,se){"use strict";oe.exports=function(){try{return Object.keys("primitive"),!0}catch(y){return!1}}},{}],154:[function(b,oe,se){"use strict";var y=b("../is-value"),x=Object.keys;oe.exports=function(M){return x(y(M)?Object(M):M)}},{"../is-value":151}],155:[function(b,oe,se){"use strict";var y=b("./valid-callable"),x=b("./for-each"),M=Function.prototype.call;oe.exports=function(_,e){var o={},a=arguments[2];return y(e),x(_,function(l,i,v,h){o[i]=M.call(e,a,l,i,v,h)}),o}},{"./for-each":149,"./valid-callable":160}],156:[function(b,oe,se){"use strict";var y=b("./is-value"),x=Array.prototype.forEach,M=Object.create,_=function(e,o){var a;for(a in e)o[a]=e[a]};oe.exports=function(e){var o=M(null);return x.call(arguments,function(a){y(a)&&_(Object(a),o)}),o}},{"./is-value":151}],157:[function(b,oe,se){"use strict";oe.exports=b("./is-implemented")()?Object.setPrototypeOf:b("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(b,oe,se){"use strict";var y=Object.create,x=Object.getPrototypeOf,M={};oe.exports=function(){var _=Object.setPrototypeOf;return"function"==typeof _&&x(_((arguments[0]||y)(null),M))===M}},{}],159:[function(b,oe,se){"use strict";var y,a,l,i,x=b("../is-object"),M=b("../valid-value"),_=Object.prototype.isPrototypeOf,e=Object.defineProperty,o={configurable:!0,enumerable:!1,writable:!0,value:void 0};y=function(a,l){if(M(a),null===l||x(l))return a;throw new TypeError("Prototype must be null or an object")},oe.exports=(a=function(){var a,l=Object.create(null),i={},v=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(v){try{(a=v.set).call(l,i)}catch(h){}if(Object.getPrototypeOf(l)===i)return{set:a,level:2}}return l.__proto__=i,Object.getPrototypeOf(l)===i?{level:2}:((l={}).__proto__=i,Object.getPrototypeOf(l)===i&&{level:1})}())?(2===a.level?a.set?(i=a.set,l=function(v,h){return i.call(y(v,h),h),v}):l=function(v,h){return y(v,h).__proto__=h,v}:l=function v(h,s){var d;return y(h,s),(d=_.call(v.nullPolyfill,h))&&delete v.nullPolyfill.__proto__,null===s&&(s=v.nullPolyfill),h.__proto__=s,d&&e(v.nullPolyfill,"__proto__",o),h},Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:a.level})):null,b("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(b,oe,se){"use strict";oe.exports=function(y){if("function"!=typeof y)throw new TypeError(y+" is not a function");return y}},{}],161:[function(b,oe,se){"use strict";var y=b("./is-object");oe.exports=function(x){if(!y(x))throw new TypeError(x+" is not an Object");return x}},{"./is-object":150}],162:[function(b,oe,se){"use strict";var y=b("./is-value");oe.exports=function(x){if(!y(x))throw new TypeError("Cannot use null or undefined");return x}},{"./is-value":151}],163:[function(b,oe,se){"use strict";oe.exports=b("./is-implemented")()?String.prototype.contains:b("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(b,oe,se){"use strict";var y="razdwatrzy";oe.exports=function(){return"function"==typeof y.contains&&!0===y.contains("dwa")&&!1===y.contains("foo")}},{}],165:[function(b,oe,se){"use strict";var y=String.prototype.indexOf;oe.exports=function(x){return y.call(this,x,arguments[1])>-1}},{}],166:[function(b,oe,se){"use strict";var y=Object.prototype.toString,x=y.call("");oe.exports=function(M){return"string"==typeof M||M&&"object"==typeof M&&(M instanceof String||y.call(M)===x)||!1}},{}],167:[function(b,oe,se){"use strict";var y=Object.create(null),x=Math.random;oe.exports=function(){var M;do{M=x().toString(36).slice(2)}while(y[M]);return M}},{}],168:[function(b,oe,se){"use strict";var y,x=b("es5-ext/object/set-prototype-of"),M=b("es5-ext/string/#/contains"),_=b("d"),e=b("es6-symbol"),o=b("./"),a=Object.defineProperty;y=oe.exports=function(l,i){if(!(this instanceof y))throw new TypeError("Constructor requires 'new'");o.call(this,l),i=i?M.call(i,"key+value")?"key+value":M.call(i,"key")?"key":"value":"value",a(this,"__kind__",_("",i))},x&&x(y,o),delete y.prototype.constructor,y.prototype=Object.create(o.prototype,{_resolve:_(function(l){return"value"===this.__kind__?this.__list__[l]:"key+value"===this.__kind__?[l,this.__list__[l]]:l})}),a(y.prototype,e.toStringTag,_("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(b,oe,se){"use strict";var y=b("es5-ext/function/is-arguments"),x=b("es5-ext/object/valid-callable"),M=b("es5-ext/string/is-string"),_=b("./get"),e=Array.isArray,o=Function.prototype.call,a=Array.prototype.some;oe.exports=function(l,i){var v,h,s,d,p,f,g,m,u=arguments[2];if(e(l)||y(l)?v="array":M(l)?v="string":l=_(l),x(i),s=function(){d=!0},"array"!==v)if("string"!==v)for(h=l.next();!h.done;){if(o.call(i,u,h.value,s),d)return;h=l.next()}else for(f=l.length,p=0;p<f&&(g=l[p],p+1<f&&(m=g.charCodeAt(0))>=55296&&m<=56319&&(g+=l[++p]),o.call(i,u,g,s),!d);++p);else a.call(l,function(w){return o.call(i,u,w,s),d})}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(b,oe,se){"use strict";var y=b("es5-ext/function/is-arguments"),x=b("es5-ext/string/is-string"),M=b("./array"),_=b("./string"),e=b("./valid-iterable"),o=b("es6-symbol").iterator;oe.exports=function(a){return"function"==typeof e(a)[o]?a[o]():y(a)?new M(a):x(a)?new _(a):new M(a)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(b,oe,se){"use strict";var y,x=b("es5-ext/array/#/clear"),M=b("es5-ext/object/assign"),_=b("es5-ext/object/valid-callable"),e=b("es5-ext/object/valid-value"),o=b("d"),a=b("d/auto-bind"),l=b("es6-symbol"),i=Object.defineProperty,v=Object.defineProperties;oe.exports=y=function(h,s){if(!(this instanceof y))throw new TypeError("Constructor requires 'new'");v(this,{__list__:o("w",e(h)),__context__:o("w",s),__nextIndex__:o("w",0)}),s&&(_(s.on),s.on("_add",this._onAdd),s.on("_delete",this._onDelete),s.on("_clear",this._onClear))},delete y.prototype.constructor,v(y.prototype,M({_next:o(function(){var h;if(this.__list__)return this.__redo__&&void 0!==(h=this.__redo__.shift())?h:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:o(function(){return this._createResult(this._next())}),_createResult:o(function(h){return void 0===h?{done:!0,value:void 0}:{done:!1,value:this._resolve(h)}}),_resolve:o(function(h){return this.__list__[h]}),_unBind:o(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:o(function(){return"[object "+(this[l.toStringTag]||"Object")+"]"})},a({_onAdd:o(function(h){h>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(s,d){s>=h&&(this.__redo__[d]=++s)},this),this.__redo__.push(h)):i(this,"__redo__",o("c",[h])))}),_onDelete:o(function(h){var s;h>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(s=this.__redo__.indexOf(h))&&this.__redo__.splice(s,1),this.__redo__.forEach(function(d,p){d>h&&(this.__redo__[p]=--d)},this)))}),_onClear:o(function(){this.__redo__&&x.call(this.__redo__),this.__nextIndex__=0})}))),i(y.prototype,l.iterator,o(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(b,oe,se){"use strict";var y=b("es5-ext/function/is-arguments"),x=b("es5-ext/object/is-value"),M=b("es5-ext/string/is-string"),_=b("es6-symbol").iterator,e=Array.isArray;oe.exports=function(o){return!(!x(o)||!e(o)&&!M(o)&&!y(o)&&"function"!=typeof o[_])}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(b,oe,se){"use strict";var y,x=b("es5-ext/object/set-prototype-of"),M=b("d"),_=b("es6-symbol"),e=b("./"),o=Object.defineProperty;y=oe.exports=function(a){if(!(this instanceof y))throw new TypeError("Constructor requires 'new'");a=String(a),e.call(this,a),o(this,"__length__",M("",a.length))},x&&x(y,e),delete y.prototype.constructor,y.prototype=Object.create(e.prototype,{_next:M(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:M(function(a){var l,i=this.__list__[a];return this.__nextIndex__===this.__length__?i:(l=i.charCodeAt(0))>=55296&&l<=56319?i+this.__list__[this.__nextIndex__++]:i})}),o(y.prototype,_.toStringTag,M("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(b,oe,se){"use strict";var y=b("./is-iterable");oe.exports=function(x){if(!y(x))throw new TypeError(x+" is not iterable");return x}},{"./is-iterable":172}],175:[function(b,oe,se){"use strict";oe.exports=b("./is-implemented")()?b("ext/global-this").Symbol:b("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(b,oe,se){"use strict";var y=b("ext/global-this"),x={object:!0,symbol:!0};oe.exports=function(){var M,_=y.Symbol;if("function"!=typeof _)return!1;M=_("test symbol");try{String(M)}catch(e){return!1}return!!x[typeof _.iterator]&&!!x[typeof _.toPrimitive]&&!!x[typeof _.toStringTag]}},{"ext/global-this":188}],177:[function(b,oe,se){"use strict";oe.exports=function(y){return!!y&&("symbol"==typeof y||!!y.constructor&&"Symbol"===y.constructor.name&&"Symbol"===y[y.constructor.toStringTag])}},{}],178:[function(b,oe,se){"use strict";var y=b("d"),M=Object.defineProperty,_=Object.prototype,e=(0,Object.create)(null);oe.exports=function(o){for(var a,l,i=0;e[o+(i||"")];)++i;return e[o+=i||""]=!0,M(_,a="@@"+o,y.gs(null,function(v){l||(l=!0,M(this,a,y(v)),l=!1)})),a}},{d:106}],179:[function(b,oe,se){"use strict";var y=b("d"),x=b("ext/global-this").Symbol;oe.exports=function(M){return Object.defineProperties(M,{hasInstance:y("",x&&x.hasInstance||M("hasInstance")),isConcatSpreadable:y("",x&&x.isConcatSpreadable||M("isConcatSpreadable")),iterator:y("",x&&x.iterator||M("iterator")),match:y("",x&&x.match||M("match")),replace:y("",x&&x.replace||M("replace")),search:y("",x&&x.search||M("search")),species:y("",x&&x.species||M("species")),split:y("",x&&x.split||M("split")),toPrimitive:y("",x&&x.toPrimitive||M("toPrimitive")),toStringTag:y("",x&&x.toStringTag||M("toStringTag")),unscopables:y("",x&&x.unscopables||M("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(b,oe,se){"use strict";var y=b("d"),x=b("../../../validate-symbol"),M=Object.create(null);oe.exports=function(_){return Object.defineProperties(_,{for:y(function(e){return M[e]?M[e]:M[e]=_(String(e))}),keyFor:y(function(e){var o;for(o in x(e),M)if(M[o]===e)return o})})}},{"../../../validate-symbol":182,d:106}],181:[function(b,oe,se){"use strict";var y,x,M,_=b("d"),e=b("./validate-symbol"),o=b("ext/global-this").Symbol,a=b("./lib/private/generate-name"),l=b("./lib/private/setup/standard-symbols"),i=b("./lib/private/setup/symbol-registry"),v=Object.create,h=Object.defineProperties,s=Object.defineProperty;if("function"==typeof o)try{String(o()),M=!0}catch(d){}else o=null;x=function(d){if(this instanceof x)throw new TypeError("Symbol is not a constructor");return y(d)},oe.exports=y=function d(p){var f;if(this instanceof d)throw new TypeError("Symbol is not a constructor");return M?o(p):(f=v(x.prototype),p=void 0===p?"":String(p),h(f,{__description__:_("",p),__name__:_("",a(p))}))},l(y),i(y),h(x.prototype,{constructor:_(y),toString:_("",function(){return this.__name__})}),h(y.prototype,{toString:_(function(){return"Symbol ("+e(this).__description__+")"}),valueOf:_(function(){return e(this)})}),s(y.prototype,y.toPrimitive,_("",function(){var d=e(this);return"symbol"==typeof d?d:d.toString()})),s(y.prototype,y.toStringTag,_("c","Symbol")),s(x.prototype,y.toStringTag,_("c",y.prototype[y.toStringTag])),s(x.prototype,y.toPrimitive,_("c",y.prototype[y.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(b,oe,se){"use strict";var y=b("./is-symbol");oe.exports=function(x){if(!y(x))throw new TypeError(x+" is not a symbol");return x}},{"./is-symbol":177}],183:[function(b,oe,se){"use strict";oe.exports=b("./is-implemented")()?WeakMap:b("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(b,oe,se){"use strict";oe.exports=function(){var y,x;if("function"!=typeof WeakMap)return!1;try{y=new WeakMap([[x={},"one"],[{},"two"],[{},"three"]])}catch(M){return!1}return"[object WeakMap]"===String(y)&&"function"==typeof y.set&&y.set({},1)===y&&"function"==typeof y.delete&&"function"==typeof y.has&&"one"===y.get(x)}},{}],185:[function(b,oe,se){"use strict";oe.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},{}],186:[function(b,oe,se){"use strict";var y,x=b("es5-ext/object/is-value"),M=b("es5-ext/object/set-prototype-of"),_=b("es5-ext/object/valid-object"),e=b("es5-ext/object/valid-value"),o=b("es5-ext/string/random-uniq"),a=b("d"),l=b("es6-iterator/get"),i=b("es6-iterator/for-of"),v=b("es6-symbol").toStringTag,h=b("./is-native-implemented"),s=Array.isArray,d=Object.defineProperty,p=Object.prototype.hasOwnProperty,f=Object.getPrototypeOf;oe.exports=y=function(){var g,m=arguments[0];if(!(this instanceof y))throw new TypeError("Constructor requires 'new'");return g=h&&M&&WeakMap!==y?M(new WeakMap,f(this)):this,x(m)&&(s(m)||(m=l(m))),d(g,"__weakMapData__",a("c","$weakMap$"+o())),m&&i(m,function(u){e(u),g.set(u[0],u[1])}),g},h&&(M&&M(y,WeakMap),y.prototype=Object.create(WeakMap.prototype,{constructor:a(y)})),Object.defineProperties(y.prototype,{delete:a(function(g){return!!p.call(_(g),this.__weakMapData__)&&(delete g[this.__weakMapData__],!0)}),get:a(function(g){if(p.call(_(g),this.__weakMapData__))return g[this.__weakMapData__]}),has:a(function(g){return p.call(_(g),this.__weakMapData__)}),set:a(function(g,m){return d(_(g),this.__weakMapData__,a("c",m)),this}),toString:a(function(){return"[object WeakMap]"})}),d(y.prototype,v,a("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(b,oe,se){var y=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};oe.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(x){return y()}try{return __global__||y()}finally{delete Object.prototype.__global__}}()},{}],188:[function(b,oe,se){"use strict";oe.exports=b("./is-implemented")()?globalThis:b("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(b,oe,se){"use strict";oe.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},{}],190:[function(b,oe,se){"use strict";var y=b("is-string-blank");oe.exports=function(x){var M=typeof x;if("string"===M){var _=x;if(0==(x=+x)&&y(_))return!1}else if("number"!==M)return!1;return x-x<1}},{"is-string-blank":237}],191:[function(b,oe,se){var y=b("dtype");oe.exports=function(x,M,_){if(!x)throw new TypeError("must specify data as first parameter");if(_=0|+(_||0),Array.isArray(x)&&x[0]&&"number"==typeof x[0][0]){var e,o,a,l,i=x[0].length,v=x.length*i;M&&"string"!=typeof M||(M=new(y(M||"float32"))(v+_));var h=M.length-_;if(v!==h)throw new Error("source length "+v+" ("+i+"x"+x.length+") does not match destination length "+h);for(e=0,a=_;e<x.length;e++)for(o=0;o<i;o++)M[a++]=null===x[e][o]?NaN:x[e][o]}else if(M&&"string"!=typeof M)M.set(x,_);else{var s=y(M||"float32");if(Array.isArray(x)||"array"===M)for(e=0,a=_,l=(M=new s(x.length+_)).length;a<l;a++,e++)M[a]=null===x[e]?NaN:x[e];else 0===_?M=new s(x):(M=new s(x.length+_)).set(x,_)}return M}},{dtype:127}],192:[function(b,oe,se){"use strict";var y=b("css-font/stringify"),x=[32,126];oe.exports=function(M){var _=(M=M||{}).shape?M.shape:M.canvas?[M.canvas.width,M.canvas.height]:[512,512],e=M.canvas||document.createElement("canvas"),o=M.font,a="number"==typeof M.step?[M.step,M.step]:M.step||[32,32],l=M.chars||x;if(o&&"string"!=typeof o&&(o=y(o)),Array.isArray(l)){if(2===l.length&&"number"==typeof l[0]&&"number"==typeof l[1]){for(var i=[],v=l[0],h=0;v<=l[1];v++)i[h++]=String.fromCharCode(v);l=i}}else l=String(l).split("");_=_.slice(),e.width=_[0],e.height=_[1];var s=e.getContext("2d");s.fillStyle="#000",s.fillRect(0,0,e.width,e.height),s.font=o,s.textAlign="center",s.textBaseline="middle",s.fillStyle="#fff";var d=a[0]/2,p=a[1]/2;for(v=0;v<l.length;v++)s.fillText(l[v],d,p),(d+=a[0])>_[0]-a[0]/2&&(d=a[0]/2,p+=a[1]);return e}},{"css-font/stringify":102}],193:[function(b,oe,se){"use strict";function y(e,o){o||(o={}),("string"==typeof e||Array.isArray(e))&&(o.family=e);var a=Array.isArray(o.family)?o.family.join(", "):o.family;if(!a)throw Error("`family` must be defined");var l=o.size||o.fontSize||o.em||48,v=(e=[o.style||o.fontStyle||"",o.weight||o.fontWeight||"",l].join(" ")+"px "+a,o.origin||"top");if(y.cache[a]&&l<=y.cache[a].em)return x(y.cache[a],v);var h=o.canvas||y.canvas,s=h.getContext("2d"),d={upper:void 0!==o.upper?o.upper:"H",lower:void 0!==o.lower?o.lower:"x",descent:void 0!==o.descent?o.descent:"p",ascent:void 0!==o.ascent?o.ascent:"h",tittle:void 0!==o.tittle?o.tittle:"i",overshoot:void 0!==o.overshoot?o.overshoot:"O"},p=Math.ceil(1.5*l);h.height=p,h.width=.5*p,s.font=e;var f={top:0};s.clearRect(0,0,p,p),s.textBaseline="top",s.fillStyle="black",s.fillText("H",0,0);var g=M(s.getImageData(0,0,p,p));s.clearRect(0,0,p,p),s.textBaseline="bottom",s.fillText("H",0,p);var m=M(s.getImageData(0,0,p,p));f.lineHeight=f.bottom=p-m+g,s.clearRect(0,0,p,p),s.textBaseline="alphabetic",s.fillText("H",0,p);var u=p-M(s.getImageData(0,0,p,p))-1+g;f.baseline=f.alphabetic=u,s.clearRect(0,0,p,p),s.textBaseline="middle",s.fillText("H",0,.5*p);var w=M(s.getImageData(0,0,p,p));f.median=f.middle=p-w-1+g-.5*p,s.clearRect(0,0,p,p),s.textBaseline="hanging",s.fillText("H",0,.5*p);var c=M(s.getImageData(0,0,p,p));f.hanging=p-c-1+g-.5*p,s.clearRect(0,0,p,p),s.textBaseline="ideographic",s.fillText("H",0,p);var A=M(s.getImageData(0,0,p,p));if(f.ideographic=p-A-1+g,d.upper&&(s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(d.upper,0,0),f.upper=M(s.getImageData(0,0,p,p)),f.capHeight=f.baseline-f.upper),d.lower&&(s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(d.lower,0,0),f.lower=M(s.getImageData(0,0,p,p)),f.xHeight=f.baseline-f.lower),d.tittle&&(s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(d.tittle,0,0),f.tittle=M(s.getImageData(0,0,p,p))),d.ascent&&(s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(d.ascent,0,0),f.ascent=M(s.getImageData(0,0,p,p))),d.descent&&(s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(d.descent,0,0),f.descent=_(s.getImageData(0,0,p,p))),d.overshoot){s.clearRect(0,0,p,p),s.textBaseline="top",s.fillText(d.overshoot,0,0);var k=_(s.getImageData(0,0,p,p));f.overshoot=k-u}for(var C in f)f[C]/=l;return f.em=l,y.cache[a]=f,x(f,v)}function x(e,o){var a={};for(var l in"string"==typeof o&&(o=e[o]),e)"em"!==l&&(a[l]=e[l]-o);return a}function M(e){for(var o=e.height,a=e.data,l=3;l<a.length;l+=4)if(0!==a[l])return Math.floor(.25*(l-3)/o)}function _(e){for(var o=e.height,a=e.data,l=a.length-1;l>0;l-=4)if(0!==a[l])return Math.floor(.25*(l-3)/o)}oe.exports=y,y.canvas=document.createElement("canvas"),y.cache={}},{}],194:[function(b,oe,se){oe.exports=function(y,x){if("string"!=typeof y)throw new TypeError("must specify type string");if(x=x||{},"undefined"==typeof document&&!x.canvas)return null;var M=x.canvas||document.createElement("canvas");"number"==typeof x.width&&(M.width=x.width),"number"==typeof x.height&&(M.height=x.height);var _,e=x;try{var o=[y];0===y.indexOf("webgl")&&o.push("experimental-"+y);for(var a=0;a<o.length;a++)if(_=M.getContext(o[a],e))return _}catch(l){_=null}return _||null}},{}],195:[function(b,oe,se){oe.exports=function(y,x){var M=x[0],_=x[1],e=x[2],o=x[3],a=x[4],l=x[5],i=x[6],v=x[7],h=x[8],s=x[9],d=x[10],p=x[11],f=x[12],g=x[13],m=x[14],u=x[15];return y[0]=l*(d*u-p*m)-s*(i*u-v*m)+g*(i*p-v*d),y[1]=-(_*(d*u-p*m)-s*(e*u-o*m)+g*(e*p-o*d)),y[2]=_*(i*u-v*m)-l*(e*u-o*m)+g*(e*v-o*i),y[3]=-(_*(i*p-v*d)-l*(e*p-o*d)+s*(e*v-o*i)),y[4]=-(a*(d*u-p*m)-h*(i*u-v*m)+f*(i*p-v*d)),y[5]=M*(d*u-p*m)-h*(e*u-o*m)+f*(e*p-o*d),y[6]=-(M*(i*u-v*m)-a*(e*u-o*m)+f*(e*v-o*i)),y[7]=M*(i*p-v*d)-a*(e*p-o*d)+h*(e*v-o*i),y[8]=a*(s*u-p*g)-h*(l*u-v*g)+f*(l*p-v*s),y[9]=-(M*(s*u-p*g)-h*(_*u-o*g)+f*(_*p-o*s)),y[10]=M*(l*u-v*g)-a*(_*u-o*g)+f*(_*v-o*l),y[11]=-(M*(l*p-v*s)-a*(_*p-o*s)+h*(_*v-o*l)),y[12]=-(a*(s*m-d*g)-h*(l*m-i*g)+f*(l*d-i*s)),y[13]=M*(s*m-d*g)-h*(_*m-e*g)+f*(_*d-e*s),y[14]=-(M*(l*m-i*g)-a*(_*m-e*g)+f*(_*i-e*l)),y[15]=M*(l*d-i*s)-a*(_*d-e*s)+h*(_*i-e*l),y}},{}],196:[function(b,oe,se){oe.exports=function(y){var x=new Float32Array(16);return x[0]=y[0],x[1]=y[1],x[2]=y[2],x[3]=y[3],x[4]=y[4],x[5]=y[5],x[6]=y[6],x[7]=y[7],x[8]=y[8],x[9]=y[9],x[10]=y[10],x[11]=y[11],x[12]=y[12],x[13]=y[13],x[14]=y[14],x[15]=y[15],x}},{}],197:[function(b,oe,se){oe.exports=function(y,x){return y[0]=x[0],y[1]=x[1],y[2]=x[2],y[3]=x[3],y[4]=x[4],y[5]=x[5],y[6]=x[6],y[7]=x[7],y[8]=x[8],y[9]=x[9],y[10]=x[10],y[11]=x[11],y[12]=x[12],y[13]=x[13],y[14]=x[14],y[15]=x[15],y}},{}],198:[function(b,oe,se){oe.exports=function(){var y=new Float32Array(16);return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}},{}],199:[function(b,oe,se){oe.exports=function(y){var x=y[0],M=y[1],_=y[2],e=y[3],o=y[4],a=y[5],l=y[6],i=y[7],v=y[8],h=y[9],s=y[10],d=y[11],p=y[12],f=y[13],g=y[14],m=y[15];return(x*a-M*o)*(s*m-d*g)-(x*l-_*o)*(h*m-d*f)+(x*i-e*o)*(h*g-s*f)+(M*l-_*a)*(v*m-d*p)-(M*i-e*a)*(v*g-s*p)+(_*i-e*l)*(v*f-h*p)}},{}],200:[function(b,oe,se){oe.exports=function(y,x){var M=x[0],_=x[1],e=x[2],o=x[3],a=M+M,l=_+_,i=e+e,v=M*a,h=_*a,s=_*l,d=e*a,p=e*l,f=e*i,g=o*a,m=o*l,u=o*i;return y[0]=1-s-f,y[1]=h+u,y[2]=d-m,y[3]=0,y[4]=h-u,y[5]=1-v-f,y[6]=p+g,y[7]=0,y[8]=d+m,y[9]=p-g,y[10]=1-v-s,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}},{}],201:[function(b,oe,se){oe.exports=function(y,x,M){var _,e,o,a=M[0],l=M[1],i=M[2],v=Math.sqrt(a*a+l*l+i*i);return Math.abs(v)<1e-6?null:(a*=v=1/v,l*=v,i*=v,_=Math.sin(x),e=Math.cos(x),y[0]=a*a*(o=1-e)+e,y[1]=l*a*o+i*_,y[2]=i*a*o-l*_,y[3]=0,y[4]=a*l*o-i*_,y[5]=l*l*o+e,y[6]=i*l*o+a*_,y[7]=0,y[8]=a*i*o+l*_,y[9]=l*i*o-a*_,y[10]=i*i*o+e,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y)}},{}],202:[function(b,oe,se){oe.exports=function(y,x,M){var _=x[0],e=x[1],o=x[2],a=x[3],l=_+_,i=e+e,v=o+o,h=_*l,s=_*i,d=_*v,p=e*i,f=e*v,g=o*v,m=a*l,u=a*i,w=a*v;return y[0]=1-(p+g),y[1]=s+w,y[2]=d-u,y[3]=0,y[4]=s-w,y[5]=1-(h+g),y[6]=f+m,y[7]=0,y[8]=d+u,y[9]=f-m,y[10]=1-(h+p),y[11]=0,y[12]=M[0],y[13]=M[1],y[14]=M[2],y[15]=1,y}},{}],203:[function(b,oe,se){oe.exports=function(y,x){return y[0]=x[0],y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=x[1],y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=x[2],y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}},{}],204:[function(b,oe,se){oe.exports=function(y,x){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=x[0],y[13]=x[1],y[14]=x[2],y[15]=1,y}},{}],205:[function(b,oe,se){oe.exports=function(y,x){var M=Math.sin(x),_=Math.cos(x);return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=_,y[6]=M,y[7]=0,y[8]=0,y[9]=-M,y[10]=_,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}},{}],206:[function(b,oe,se){oe.exports=function(y,x){var M=Math.sin(x),_=Math.cos(x);return y[0]=_,y[1]=0,y[2]=-M,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=M,y[9]=0,y[10]=_,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}},{}],207:[function(b,oe,se){oe.exports=function(y,x){var M=Math.sin(x),_=Math.cos(x);return y[0]=_,y[1]=M,y[2]=0,y[3]=0,y[4]=-M,y[5]=_,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}},{}],208:[function(b,oe,se){oe.exports=function(y,x,M,_,e,o,a){var l=1/(M-x),i=1/(e-_),v=1/(o-a);return y[0]=2*o*l,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=2*o*i,y[6]=0,y[7]=0,y[8]=(M+x)*l,y[9]=(e+_)*i,y[10]=(a+o)*v,y[11]=-1,y[12]=0,y[13]=0,y[14]=a*o*2*v,y[15]=0,y}},{}],209:[function(b,oe,se){oe.exports=function(y){return y[0]=1,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=1,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=1,y[11]=0,y[12]=0,y[13]=0,y[14]=0,y[15]=1,y}},{}],210:[function(b,oe,se){oe.exports={create:b("./create"),clone:b("./clone"),copy:b("./copy"),identity:b("./identity"),transpose:b("./transpose"),invert:b("./invert"),adjoint:b("./adjoint"),determinant:b("./determinant"),multiply:b("./multiply"),translate:b("./translate"),scale:b("./scale"),rotate:b("./rotate"),rotateX:b("./rotateX"),rotateY:b("./rotateY"),rotateZ:b("./rotateZ"),fromRotation:b("./fromRotation"),fromRotationTranslation:b("./fromRotationTranslation"),fromScaling:b("./fromScaling"),fromTranslation:b("./fromTranslation"),fromXRotation:b("./fromXRotation"),fromYRotation:b("./fromYRotation"),fromZRotation:b("./fromZRotation"),fromQuat:b("./fromQuat"),frustum:b("./frustum"),perspective:b("./perspective"),perspectiveFromFieldOfView:b("./perspectiveFromFieldOfView"),ortho:b("./ortho"),lookAt:b("./lookAt"),str:b("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(b,oe,se){oe.exports=function(y,x){var M=x[0],_=x[1],e=x[2],o=x[3],a=x[4],l=x[5],i=x[6],v=x[7],h=x[8],s=x[9],d=x[10],p=x[11],f=x[12],g=x[13],m=x[14],u=x[15],w=M*l-_*a,c=M*i-e*a,A=M*v-o*a,k=_*i-e*l,C=_*v-o*l,E=e*v-o*i,L=h*g-s*f,D=h*m-d*f,N=h*u-p*f,F=s*m-d*g,I=s*u-p*g,P=d*u-p*m,j=w*P-c*I+A*F+k*N-C*D+E*L;return j?(y[0]=(l*P-i*I+v*F)*(j=1/j),y[1]=(e*I-_*P-o*F)*j,y[2]=(g*E-m*C+u*k)*j,y[3]=(d*C-s*E-p*k)*j,y[4]=(i*N-a*P-v*D)*j,y[5]=(M*P-e*N+o*D)*j,y[6]=(m*A-f*E-u*c)*j,y[7]=(h*E-d*A+p*c)*j,y[8]=(a*I-l*N+v*L)*j,y[9]=(_*N-M*I-o*L)*j,y[10]=(f*C-g*A+u*w)*j,y[11]=(s*A-h*C-p*w)*j,y[12]=(l*D-a*F-i*L)*j,y[13]=(M*F-_*D+e*L)*j,y[14]=(g*c-f*k-m*w)*j,y[15]=(h*k-s*c+d*w)*j,y):null}},{}],212:[function(b,oe,se){var y=b("./identity");oe.exports=function(x,M,_,e){var o,a,l,i,v,h,s,d,p,f,g=M[0],m=M[1],u=M[2],w=e[0],c=e[1],A=e[2],k=_[0],C=_[1],E=_[2];return Math.abs(g-k)<1e-6&&Math.abs(m-C)<1e-6&&Math.abs(u-E)<1e-6?y(x):(s=g-k,d=m-C,p=u-E,o=c*(p*=f=1/Math.sqrt(s*s+d*d+p*p))-A*(d*=f),a=A*(s*=f)-w*p,l=w*d-c*s,(f=Math.sqrt(o*o+a*a+l*l))?(o*=f=1/f,a*=f,l*=f):(o=0,a=0,l=0),i=d*l-p*a,v=p*o-s*l,h=s*a-d*o,(f=Math.sqrt(i*i+v*v+h*h))?(i*=f=1/f,v*=f,h*=f):(i=0,v=0,h=0),x[0]=o,x[1]=i,x[2]=s,x[3]=0,x[4]=a,x[5]=v,x[6]=d,x[7]=0,x[8]=l,x[9]=h,x[10]=p,x[11]=0,x[12]=-(o*g+a*m+l*u),x[13]=-(i*g+v*m+h*u),x[14]=-(s*g+d*m+p*u),x[15]=1,x)}},{"./identity":209}],213:[function(b,oe,se){oe.exports=function(y,x,M){var _=x[0],e=x[1],o=x[2],a=x[3],l=x[4],i=x[5],v=x[6],h=x[7],s=x[8],d=x[9],p=x[10],f=x[11],g=x[12],m=x[13],u=x[14],w=x[15],c=M[0],A=M[1],k=M[2],C=M[3];return y[0]=c*_+A*l+k*s+C*g,y[1]=c*e+A*i+k*d+C*m,y[2]=c*o+A*v+k*p+C*u,y[3]=c*a+A*h+k*f+C*w,y[4]=(c=M[4])*_+(A=M[5])*l+(k=M[6])*s+(C=M[7])*g,y[5]=c*e+A*i+k*d+C*m,y[6]=c*o+A*v+k*p+C*u,y[7]=c*a+A*h+k*f+C*w,y[8]=(c=M[8])*_+(A=M[9])*l+(k=M[10])*s+(C=M[11])*g,y[9]=c*e+A*i+k*d+C*m,y[10]=c*o+A*v+k*p+C*u,y[11]=c*a+A*h+k*f+C*w,y[12]=(c=M[12])*_+(A=M[13])*l+(k=M[14])*s+(C=M[15])*g,y[13]=c*e+A*i+k*d+C*m,y[14]=c*o+A*v+k*p+C*u,y[15]=c*a+A*h+k*f+C*w,y}},{}],214:[function(b,oe,se){oe.exports=function(y,x,M,_,e,o,a){var l=1/(x-M),i=1/(_-e),v=1/(o-a);return y[0]=-2*l,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=-2*i,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=2*v,y[11]=0,y[12]=(x+M)*l,y[13]=(e+_)*i,y[14]=(a+o)*v,y[15]=1,y}},{}],215:[function(b,oe,se){oe.exports=function(y,x,M,_,e){var o=1/Math.tan(x/2),a=1/(_-e);return y[0]=o/M,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=o,y[6]=0,y[7]=0,y[8]=0,y[9]=0,y[10]=(e+_)*a,y[11]=-1,y[12]=0,y[13]=0,y[14]=2*e*_*a,y[15]=0,y}},{}],216:[function(b,oe,se){oe.exports=function(y,x,M,_){var e=Math.tan(x.upDegrees*Math.PI/180),o=Math.tan(x.downDegrees*Math.PI/180),a=Math.tan(x.leftDegrees*Math.PI/180),l=Math.tan(x.rightDegrees*Math.PI/180),i=2/(a+l),v=2/(e+o);return y[0]=i,y[1]=0,y[2]=0,y[3]=0,y[4]=0,y[5]=v,y[6]=0,y[7]=0,y[8]=-(a-l)*i*.5,y[9]=(e-o)*v*.5,y[10]=_/(M-_),y[11]=-1,y[12]=0,y[13]=0,y[14]=_*M/(M-_),y[15]=0,y}},{}],217:[function(b,oe,se){oe.exports=function(y,x,M,_){var e,o,a,l,i,v,h,s,d,p,f,g,m,u,w,c,A,k,C,E,L,D,N,F,I=_[0],P=_[1],j=_[2],V=Math.sqrt(I*I+P*P+j*j);return Math.abs(V)<1e-6?null:(I*=V=1/V,P*=V,j*=V,e=Math.sin(M),o=Math.cos(M),i=x[1],v=x[2],h=x[3],d=x[5],p=x[6],f=x[7],m=x[9],u=x[10],w=x[11],C=I*P*(a=1-o)-j*e,E=P*P*a+o,L=j*P*a+I*e,D=I*j*a+P*e,N=P*j*a-I*e,F=j*j*a+o,y[0]=(l=x[0])*(c=I*I*a+o)+(s=x[4])*(A=P*I*a+j*e)+(g=x[8])*(k=j*I*a-P*e),y[1]=i*c+d*A+m*k,y[2]=v*c+p*A+u*k,y[3]=h*c+f*A+w*k,y[4]=l*C+s*E+g*L,y[5]=i*C+d*E+m*L,y[6]=v*C+p*E+u*L,y[7]=h*C+f*E+w*L,y[8]=l*D+s*N+g*F,y[9]=i*D+d*N+m*F,y[10]=v*D+p*N+u*F,y[11]=h*D+f*N+w*F,x!==y&&(y[12]=x[12],y[13]=x[13],y[14]=x[14],y[15]=x[15]),y)}},{}],218:[function(b,oe,se){oe.exports=function(y,x,M){var _=Math.sin(M),e=Math.cos(M),o=x[4],a=x[5],l=x[6],i=x[7],v=x[8],h=x[9],s=x[10],d=x[11];return x!==y&&(y[0]=x[0],y[1]=x[1],y[2]=x[2],y[3]=x[3],y[12]=x[12],y[13]=x[13],y[14]=x[14],y[15]=x[15]),y[4]=o*e+v*_,y[5]=a*e+h*_,y[6]=l*e+s*_,y[7]=i*e+d*_,y[8]=v*e-o*_,y[9]=h*e-a*_,y[10]=s*e-l*_,y[11]=d*e-i*_,y}},{}],219:[function(b,oe,se){oe.exports=function(y,x,M){var _=Math.sin(M),e=Math.cos(M),o=x[0],a=x[1],l=x[2],i=x[3],v=x[8],h=x[9],s=x[10],d=x[11];return x!==y&&(y[4]=x[4],y[5]=x[5],y[6]=x[6],y[7]=x[7],y[12]=x[12],y[13]=x[13],y[14]=x[14],y[15]=x[15]),y[0]=o*e-v*_,y[1]=a*e-h*_,y[2]=l*e-s*_,y[3]=i*e-d*_,y[8]=o*_+v*e,y[9]=a*_+h*e,y[10]=l*_+s*e,y[11]=i*_+d*e,y}},{}],220:[function(b,oe,se){oe.exports=function(y,x,M){var _=Math.sin(M),e=Math.cos(M),o=x[0],a=x[1],l=x[2],i=x[3],v=x[4],h=x[5],s=x[6],d=x[7];return x!==y&&(y[8]=x[8],y[9]=x[9],y[10]=x[10],y[11]=x[11],y[12]=x[12],y[13]=x[13],y[14]=x[14],y[15]=x[15]),y[0]=o*e+v*_,y[1]=a*e+h*_,y[2]=l*e+s*_,y[3]=i*e+d*_,y[4]=v*e-o*_,y[5]=h*e-a*_,y[6]=s*e-l*_,y[7]=d*e-i*_,y}},{}],221:[function(b,oe,se){oe.exports=function(y,x,M){var _=M[0],e=M[1],o=M[2];return y[0]=x[0]*_,y[1]=x[1]*_,y[2]=x[2]*_,y[3]=x[3]*_,y[4]=x[4]*e,y[5]=x[5]*e,y[6]=x[6]*e,y[7]=x[7]*e,y[8]=x[8]*o,y[9]=x[9]*o,y[10]=x[10]*o,y[11]=x[11]*o,y[12]=x[12],y[13]=x[13],y[14]=x[14],y[15]=x[15],y}},{}],222:[function(b,oe,se){oe.exports=function(y){return"mat4("+y[0]+", "+y[1]+", "+y[2]+", "+y[3]+", "+y[4]+", "+y[5]+", "+y[6]+", "+y[7]+", "+y[8]+", "+y[9]+", "+y[10]+", "+y[11]+", "+y[12]+", "+y[13]+", "+y[14]+", "+y[15]+")"}},{}],223:[function(b,oe,se){oe.exports=function(y,x,M){var _,e,o,a,l,i,v,h,s,d,p,f,g=M[0],m=M[1],u=M[2];return x===y?(y[12]=x[0]*g+x[4]*m+x[8]*u+x[12],y[13]=x[1]*g+x[5]*m+x[9]*u+x[13],y[14]=x[2]*g+x[6]*m+x[10]*u+x[14],y[15]=x[3]*g+x[7]*m+x[11]*u+x[15]):(e=x[1],o=x[2],a=x[3],l=x[4],i=x[5],v=x[6],h=x[7],s=x[8],d=x[9],p=x[10],f=x[11],y[0]=_=x[0],y[1]=e,y[2]=o,y[3]=a,y[4]=l,y[5]=i,y[6]=v,y[7]=h,y[8]=s,y[9]=d,y[10]=p,y[11]=f,y[12]=_*g+l*m+s*u+x[12],y[13]=e*g+i*m+d*u+x[13],y[14]=o*g+v*m+p*u+x[14],y[15]=a*g+h*m+f*u+x[15]),y}},{}],224:[function(b,oe,se){oe.exports=function(y,x){if(y===x){var M=x[1],_=x[2],e=x[3],o=x[6],a=x[7],l=x[11];y[1]=x[4],y[2]=x[8],y[3]=x[12],y[4]=M,y[6]=x[9],y[7]=x[13],y[8]=_,y[9]=o,y[11]=x[14],y[12]=e,y[13]=a,y[14]=l}else y[0]=x[0],y[1]=x[4],y[2]=x[8],y[3]=x[12],y[4]=x[1],y[5]=x[5],y[6]=x[9],y[7]=x[13],y[8]=x[2],y[9]=x[6],y[10]=x[10],y[11]=x[14],y[12]=x[3],y[13]=x[7],y[14]=x[11],y[15]=x[15];return y}},{}],225:[function(b,oe,se){"use strict";var y=b("css-font"),x=b("pick-by-alias"),M=b("regl"),_=b("gl-util/context"),e=b("es6-weak-map"),o=b("color-normalize"),a=b("font-atlas"),l=b("typedarray-pool"),i=b("parse-rect"),v=b("is-plain-obj"),h=b("parse-unit"),s=b("to-px"),d=b("detect-kerning"),p=b("object-assign"),f=b("font-measure"),g=b("flatten-vertex-data"),m=b("bit-twiddle").nextPow2,u=new e,w=!1;if(document.body){var c=document.body.appendChild(document.createElement("div"));c.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(c).fontStretch&&(w=!0),document.body.removeChild(c)}var A=function(k){var C;this.gl="function"==typeof(C=k)&&C._gl&&C.prop&&C.texture&&C.buffer?(k={regl:k}).regl._gl:_(k),this.shader=u.get(this.gl),this.regl=this.shader?this.shader.regl:k.regl||M({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),u.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(v(k)?k:{})};A.prototype.createShader=function(){var k=this.regl,C=k({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:k.prop("count"),offset:k.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:k.this("sizeBuffer")},width:{offset:0,stride:8,buffer:k.this("sizeBuffer")},char:k.this("charBuffer"),position:k.this("position")},uniforms:{atlasSize:function(E,L){return[L.atlas.width,L.atlas.height]},atlasDim:function(E,L){return[L.atlas.cols,L.atlas.rows]},atlas:function(E,L){return L.atlas.texture},charStep:function(E,L){return L.atlas.step},em:function(E,L){return L.atlas.em},color:k.prop("color"),opacity:k.prop("opacity"),viewport:k.this("viewportArray"),scale:k.this("scale"),align:k.prop("align"),baseline:k.prop("baseline"),translate:k.this("translate"),positionOffset:k.prop("positionOffset")},primitive:"points",viewport:k.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:k,draw:C,atlas:{}}},A.prototype.update=function(k){var C=this;if("string"==typeof k)k={text:k};else if(!k)return;null!=(k=x(k,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(k.opacity)?k.opacity.map(function(Me){return parseFloat(Me)}):parseFloat(k.opacity)),null!=k.viewport&&(this.viewport=i(k.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=k.kerning&&(this.kerning=k.kerning),null!=k.offset&&("number"==typeof k.offset&&(k.offset=[k.offset,0]),this.positionOffset=g(k.offset)),k.direction&&(this.direction=k.direction),k.range&&(this.range=k.range,this.scale=[1/(k.range[2]-k.range[0]),1/(k.range[3]-k.range[1])],this.translate=[-k.range[0],-k.range[1]]),k.scale&&(this.scale=k.scale),k.translate&&(this.translate=k.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||k.font||(k.font=A.baseFontSize+"px sans-serif");var E,L=!1,D=!1;if(k.font&&(Array.isArray(k.font)?k.font:[k.font]).forEach(function(Me,Oe){if("string"==typeof Me)try{Me=y.parse(Me)}catch(lt){Me=y.parse(A.baseFontSize+"px "+Me)}else Me=y.parse(y.stringify(Me));var Pe=y.stringify({size:A.baseFontSize,family:Me.family,stretch:w?Me.stretch:void 0,variant:Me.variant,weight:Me.weight,style:Me.style}),Re=h(Me.size),Ue=Math.round(Re[0]*s(Re[1]));if(Ue!==C.fontSize[Oe]&&(D=!0,C.fontSize[Oe]=Ue),!(C.font[Oe]&&Pe==C.font[Oe].baseString||(L=!0,C.font[Oe]=A.fonts[Pe],C.font[Oe]))){var qe=Me.family.join(", "),Xe=[Me.style];Me.style!=Me.variant&&Xe.push(Me.variant),Me.variant!=Me.weight&&Xe.push(Me.weight),w&&Me.weight!=Me.stretch&&Xe.push(Me.stretch),C.font[Oe]={baseString:Pe,family:qe,weight:Me.weight,stretch:Me.stretch,style:Me.style,variant:Me.variant,width:{},kerning:{},metrics:f(qe,{origin:"top",fontSize:A.baseFontSize,fontStyle:Xe.join(" ")})},A.fonts[Pe]=C.font[Oe]}}),(L||D)&&this.font.forEach(function(Me,Oe){var Pe=y.stringify({size:C.fontSize[Oe],family:Me.family,stretch:w?Me.stretch:void 0,variant:Me.variant,weight:Me.weight,style:Me.style});C.fontAtlas[Oe]=C.shader.atlas[Pe],C.fontAtlas[Oe]||(C.shader.atlas[Pe]=C.fontAtlas[Oe]={fontString:Pe,step:2*Math.ceil(C.fontSize[Oe]*Me.metrics.bottom*.5),em:C.fontSize[Oe],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:C.regl.texture()}),null==k.text&&(k.text=C.text)}),"string"==typeof k.text&&k.position&&k.position.length>2){for(var N=Array(.5*k.position.length),F=0;F<N.length;F++)N[F]=k.text;k.text=N}if(null!=k.text||L){if(this.textOffsets=[0],Array.isArray(k.text)){this.count=k.text[0].length,this.counts=[this.count];for(var I=1;I<k.text.length;I++)this.textOffsets[I]=this.textOffsets[I-1]+k.text[I-1].length,this.count+=k.text[I].length,this.counts.push(k.text[I].length);this.text=k.text.join("")}else this.text=k.text,this.count=this.text.length,this.counts=[this.count];E=[],this.font.forEach(function(Me,Oe){A.atlasContext.font=Me.baseString;for(var Pe=C.fontAtlas[Oe],Re=0;Re<C.text.length;Re++){var Ue=C.text.charAt(Re);if(null==Pe.ids[Ue]&&(Pe.ids[Ue]=Pe.chars.length,Pe.chars.push(Ue),E.push(Ue)),null==Me.width[Ue]&&(Me.width[Ue]=A.atlasContext.measureText(Ue).width/A.baseFontSize,C.kerning)){var qe=[];for(var Xe in Me.width)qe.push(Xe+Ue,Ue+Xe);p(Me.kerning,d(Me.family,{pairs:qe}))}}})}if(k.position)if(k.position.length>2){for(var P=!k.position[0].length,j=l.mallocFloat(2*this.count),V=0,Z=0;V<this.counts.length;V++){var Y=this.counts[V];if(P)for(var ee=0;ee<Y;ee++)j[Z++]=k.position[2*V],j[Z++]=k.position[2*V+1];else for(var re=0;re<Y;re++)j[Z++]=k.position[V][0],j[Z++]=k.position[V][1]}this.position.call?this.position({type:"float",data:j}):this.position=this.regl.buffer({type:"float",data:j}),l.freeFloat(j)}else this.position.destroy&&this.position.destroy(),this.position={constant:k.position};if(k.text||L){var X=l.mallocUint8(this.count),K=l.mallocFloat(2*this.count);this.textWidth=[];for(var ie=0,q=0;ie<this.counts.length;ie++){for(var U=this.counts[ie],W=this.font[ie]||this.font[0],ae=this.fontAtlas[ie]||this.fontAtlas[0],G=0;G<U;G++){var te=this.text.charAt(q),ne=this.text.charAt(q-1);if(X[q]=ae.ids[te],K[2*q]=W.width[te],G){var pe=K[2*q-1]+.5*K[2*q-2]+.5*K[2*q];if(this.kerning){var de=W.kerning[ne+te];de&&(pe+=.001*de)}K[2*q+1]=pe}else K[2*q+1]=.5*K[2*q];q++}this.textWidth.push(K.length?.5*K[2*q-2]+K[2*q-1]:0)}k.align||(k.align=this.align),this.charBuffer({data:X,type:"uint8",usage:"stream"}),this.sizeBuffer({data:K,type:"float",usage:"stream"}),l.freeUint8(X),l.freeFloat(K),E.length&&this.font.forEach(function(Me,Oe){var Pe=C.fontAtlas[Oe],Re=Pe.step,Ue=Math.floor(A.maxAtlasSize/Re),qe=Math.min(Ue,Pe.chars.length),Xe=Math.ceil(Pe.chars.length/qe),lt=m(qe*Re),He=m(Xe*Re);Pe.width=lt,Pe.height=He,Pe.rows=Xe,Pe.cols=qe,Pe.em&&Pe.texture({data:a({canvas:A.atlasCanvas,font:Pe.fontString,chars:Pe.chars,shape:[lt,He],step:[Re,Re]})})})}if(k.align&&(this.align=k.align,this.alignOffset=this.textWidth.map(function(Me,Oe){var Pe=Array.isArray(C.align)?C.align.length>1?C.align[Oe]:C.align[0]:C.align;if("number"==typeof Pe)return Pe;switch(Pe){case"right":case"end":return-Me;case"center":case"centre":case"middle":return.5*-Me}return 0})),null==this.baseline&&null==k.baseline&&(k.baseline=0),null!=k.baseline&&(this.baseline=k.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Me,Oe){var Pe=(C.font[Oe]||C.font[0]).metrics,Re=0;return-1*((Re+=.5*Pe.bottom)+("number"==typeof Me?Me-Pe.baseline:-Pe[Me]))})),null!=k.color)if(k.color||(k.color="transparent"),"string"!=typeof k.color&&isNaN(k.color)){var _e;if("number"==typeof k.color[0]&&k.color.length>this.counts.length){var me=k.color.length;_e=l.mallocUint8(me);for(var we=(k.color.subarray||k.color.slice).bind(k.color),De=0;De<me;De+=4)_e.set(o(we(De,De+4),"uint8"),De)}else{var Le=k.color.length;_e=l.mallocUint8(4*Le);for(var Ie=0;Ie<Le;Ie++)_e.set(o(k.color[Ie]||0,"uint8"),4*Ie)}this.color=_e}else this.color=o(k.color,"uint8");if(k.position||k.text||k.color||k.baseline||k.align||k.font||k.offset||k.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var je=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(je);for(var ye=0;ye<this.batch.length;ye++)this.batch[ye]={count:this.counts.length>1?this.counts[ye]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[ye]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*ye,4*ye+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[ye]:this.opacity,baseline:null!=this.baselineOffset[ye]?this.baselineOffset[ye]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[ye]?this.alignOffset[ye]:this.alignOffset[0]:0,atlas:this.fontAtlas[ye]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*ye,2*ye+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},A.prototype.destroy=function(){},A.prototype.kerning=!0,A.prototype.position={constant:new Float32Array(2)},A.prototype.translate=null,A.prototype.scale=null,A.prototype.font=null,A.prototype.text="",A.prototype.positionOffset=[0,0],A.prototype.opacity=1,A.prototype.color=new Uint8Array([0,0,0,255]),A.prototype.alignOffset=[0,0],A.maxAtlasSize=1024,A.atlasCanvas=document.createElement("canvas"),A.atlasContext=A.atlasCanvas.getContext("2d",{alpha:!1}),A.baseFontSize=64,A.fonts={},oe.exports=A},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:283,"to-px":314,"typedarray-pool":327}],226:[function(b,oe,se){(function(y){(function(){"use strict";var x=b("pick-by-alias");function M(o){if(o.container)if(o.container==document.body)document.body.style.width||(o.canvas.width=o.width||o.pixelRatio*y.innerWidth),document.body.style.height||(o.canvas.height=o.height||o.pixelRatio*y.innerHeight);else{var a=o.container.getBoundingClientRect();o.canvas.width=o.width||a.right-a.left,o.canvas.height=o.height||a.bottom-a.top}}function _(o){return"function"==typeof o.getContext&&"width"in o&&"height"in o}function e(){var o=document.createElement("canvas");return o.style.position="absolute",o.style.top=0,o.style.left=0,o}oe.exports=function(o){var a,i;if(o?"string"==typeof o&&(o={container:o}):o={},(o=_(o)||"string"==typeof(a=o).nodeName&&"function"==typeof a.appendChild&&"function"==typeof a.getBoundingClientRect?{container:o}:"function"==typeof(i=o).drawArrays||"function"==typeof i.drawElements?{gl:o}:x(o,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(o.pixelRatio=y.pixelRatio||1),o.gl)return o.gl;if(o.canvas&&(o.container=o.canvas.parentNode),o.container){if("string"==typeof o.container){var l=document.querySelector(o.container);if(!l)throw Error("Element "+o.container+" is not found");o.container=l}_(o.container)?(o.canvas=o.container,o.container=o.canvas.parentNode):o.canvas||(o.canvas=e(),o.container.appendChild(o.canvas),M(o))}else if(!o.canvas){if("undefined"==typeof document)throw Error("Not DOM environment. Use headless-gl.");o.container=document.body||document.documentElement,o.canvas=e(),o.container.appendChild(o.canvas),M(o)}return o.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(i){try{o.gl=o.canvas.getContext(i,o.attrs)}catch(v){}return o.gl}),o.gl}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"pick-by-alias":253}],227:[function(b,oe,se){oe.exports=function(y){"string"==typeof y&&(y=[y]);for(var x=[].slice.call(arguments,1),M=[],_=0;_<y.length-1;_++)M.push(y[_],x[_]||"");return M.push(y[_]),M.join("")}},{}],228:[function(b,oe,se){(function(y){(function(){"use strict";var x,M=b("is-browser");x="function"==typeof y.matchMedia?!y.matchMedia("(hover: none)").matches:M,oe.exports=x}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":232}],229:[function(b,oe,se){"use strict";var y=b("is-browser");oe.exports=y&&function(){var x=!1;try{var M=Object.defineProperty({},"passive",{get:function(){x=!0}});window.addEventListener("test",null,M),window.removeEventListener("test",null,M)}catch(_){x=!1}return x}()},{"is-browser":232}],230:[function(b,oe,se){se.read=function(y,x,M,_,e){var o,a,l=8*e-_-1,i=(1<<l)-1,v=i>>1,h=-7,s=M?e-1:0,d=M?-1:1,p=y[x+s];for(s+=d,o=p&(1<<-h)-1,p>>=-h,h+=l;h>0;o=256*o+y[x+s],s+=d,h-=8);for(a=o&(1<<-h)-1,o>>=-h,h+=_;h>0;a=256*a+y[x+s],s+=d,h-=8);if(0===o)o=1-v;else{if(o===i)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,_),o-=v}return(p?-1:1)*a*Math.pow(2,o-_)},se.write=function(y,x,M,_,e,o){var a,l,i,v=8*o-e-1,h=(1<<v)-1,s=h>>1,d=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,p=_?0:o-1,f=_?1:-1,g=x<0||0===x&&1/x<0?1:0;for(x=Math.abs(x),isNaN(x)||x===1/0?(l=isNaN(x)?1:0,a=h):(a=Math.floor(Math.log(x)/Math.LN2),x*(i=Math.pow(2,-a))<1&&(a--,i*=2),(x+=a+s>=1?d/i:d*Math.pow(2,1-s))*i>=2&&(a++,i/=2),a+s>=h?(l=0,a=h):a+s>=1?(l=(x*i-1)*Math.pow(2,e),a+=s):(l=x*Math.pow(2,s-1)*Math.pow(2,e),a=0));e>=8;y[M+p]=255&l,p+=f,l/=256,e-=8);for(a=a<<e|l,v+=e;v>0;y[M+p]=255&a,p+=f,a/=256,v-=8);y[M+p-f]|=128*g}},{}],231:[function(b,oe,se){oe.exports="function"==typeof Object.create?function(y,x){x&&(y.super_=x,y.prototype=Object.create(x.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}))}:function(y,x){if(x){y.super_=x;var M=function(){};M.prototype=x.prototype,y.prototype=new M,y.prototype.constructor=y}}},{}],232:[function(b,oe,se){oe.exports=!0},{}],233:[function(b,oe,se){"use strict";oe.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(b,oe,se){"use strict";oe.exports=M,oe.exports.isMobile=M,oe.exports.default=M;var y=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,x=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function M(_){_||(_={});var e=_.ua;if(e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var o=_.tablet?x.test(e):y.test(e);return!o&&_.tablet&&_.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(o=!0),o}},{}],235:[function(b,oe,se){"use strict";oe.exports=function(y){var x=typeof y;return null!==y&&("object"===x||"function"===x)}},{}],236:[function(b,oe,se){"use strict";var y=Object.prototype.toString;oe.exports=function(x){var M;return"[object Object]"===y.call(x)&&(null===(M=Object.getPrototypeOf(x))||M===Object.getPrototypeOf({}))}},{}],237:[function(b,oe,se){"use strict";oe.exports=function(y){for(var x,M=y.length,_=0;_<M;_++)if(((x=y.charCodeAt(_))<9||x>13)&&32!==x&&133!==x&&160!==x&&5760!==x&&6158!==x&&(x<8192||x>8205)&&8232!==x&&8233!==x&&8239!==x&&8287!==x&&8288!==x&&12288!==x&&65279!==x)return!1;return!0}},{}],238:[function(b,oe,se){"use strict";oe.exports=function(y){return"string"==typeof y&&(y=y.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(y)&&/[\dz]$/i.test(y)&&y.length>4))}},{}],239:[function(b,oe,se){var y,x;y=this,x=function(){"use strict";var y,x,M;function _(e,o){if(y)if(x){var a="var sharedChunk = {}; ("+y+")(sharedChunk); ("+x+")(sharedChunk);",l={};y(l),(M=o(l)).workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}else x=o;else y=o}return _(0,function(e){function o(S,z){return S(z={exports:{}},z.exports),z.exports}var a=l;function l(S,z,J,ce){this.cx=3*S,this.bx=3*(J-S)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*z,this.by=3*(ce-z)-this.cy,this.ay=1-this.cy-this.by,this.p1x=S,this.p1y=ce,this.p2x=J,this.p2y=ce}l.prototype.sampleCurveX=function(S){return((this.ax*S+this.bx)*S+this.cx)*S},l.prototype.sampleCurveY=function(S){return((this.ay*S+this.by)*S+this.cy)*S},l.prototype.sampleCurveDerivativeX=function(S){return(3*this.ax*S+2*this.bx)*S+this.cx},l.prototype.solveCurveX=function(S,z){var J,ce,be,Ae,Ne;for(void 0===z&&(z=1e-6),be=S,Ne=0;Ne<8;Ne++){if(Ae=this.sampleCurveX(be)-S,Math.abs(Ae)<z)return be;var We=this.sampleCurveDerivativeX(be);if(Math.abs(We)<1e-6)break;be-=Ae/We}if((be=S)<(J=0))return J;if(be>(ce=1))return ce;for(;J<ce;){if(Ae=this.sampleCurveX(be),Math.abs(Ae-S)<z)return be;S>Ae?J=be:ce=be,be=.5*(ce-J)+J}return be},l.prototype.solve=function(S,z){return this.sampleCurveY(this.solveCurveX(S,z))};var i=v;function v(S,z){this.x=S,this.y=z}function h(S,z,J,ce){var be=new a(S,z,J,ce);return function(Ae){return be.solve(Ae)}}v.prototype={clone:function(){return new v(this.x,this.y)},add:function(S){return this.clone()._add(S)},sub:function(S){return this.clone()._sub(S)},multByPoint:function(S){return this.clone()._multByPoint(S)},divByPoint:function(S){return this.clone()._divByPoint(S)},mult:function(S){return this.clone()._mult(S)},div:function(S){return this.clone()._div(S)},rotate:function(S){return this.clone()._rotate(S)},rotateAround:function(S,z){return this.clone()._rotateAround(S,z)},matMult:function(S){return this.clone()._matMult(S)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(S){return this.x===S.x&&this.y===S.y},dist:function(S){return Math.sqrt(this.distSqr(S))},distSqr:function(S){var z=S.x-this.x,J=S.y-this.y;return z*z+J*J},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(S){return Math.atan2(this.y-S.y,this.x-S.x)},angleWith:function(S){return this.angleWithSep(S.x,S.y)},angleWithSep:function(S,z){return Math.atan2(this.x*z-this.y*S,this.x*S+this.y*z)},_matMult:function(S){var J=S[2]*this.x+S[3]*this.y;return this.x=S[0]*this.x+S[1]*this.y,this.y=J,this},_add:function(S){return this.x+=S.x,this.y+=S.y,this},_sub:function(S){return this.x-=S.x,this.y-=S.y,this},_mult:function(S){return this.x*=S,this.y*=S,this},_div:function(S){return this.x/=S,this.y/=S,this},_multByPoint:function(S){return this.x*=S.x,this.y*=S.y,this},_divByPoint:function(S){return this.x/=S.x,this.y/=S.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var S=this.y;return this.y=this.x,this.x=-S,this},_rotate:function(S){var z=Math.cos(S),J=Math.sin(S),be=J*this.x+z*this.y;return this.x=z*this.x-J*this.y,this.y=be,this},_rotateAround:function(S,z){var J=Math.cos(S),ce=Math.sin(S),Ae=z.y+ce*(this.x-z.x)+J*(this.y-z.y);return this.x=z.x+J*(this.x-z.x)-ce*(this.y-z.y),this.y=Ae,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},v.convert=function(S){return S instanceof v?S:Array.isArray(S)?new v(S[0],S[1]):S};var s=h(.25,.1,.25,1);function d(S,z,J){return Math.min(J,Math.max(z,S))}function p(S,z,J){var ce=J-z,be=((S-z)%ce+ce)%ce+z;return be===z?J:be}function f(S){for(var z=[],J=arguments.length-1;J-- >0;)z[J]=arguments[J+1];for(var ce=0,be=z;ce<be.length;ce+=1){var Ae=be[ce];for(var Ne in Ae)S[Ne]=Ae[Ne]}return S}var g=1;function m(){return g++}function u(){return function S(z){return z?(z^16*Math.random()>>z/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,S)}()}function w(S){return!!S&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(S)}function c(S,z){S.forEach(function(J){z[J]&&(z[J]=z[J].bind(z))})}function A(S,z){return-1!==S.indexOf(z,S.length-z.length)}function k(S,z,J){var ce={};for(var be in S)ce[be]=z.call(J||this,S[be],be,S);return ce}function C(S,z,J){var ce={};for(var be in S)z.call(J||this,S[be],be,S)&&(ce[be]=S[be]);return ce}function E(S){return Array.isArray(S)?S.map(E):"object"==typeof S&&S?k(S,E):S}var L={};function D(S){L[S]||("undefined"!=typeof console&&console.warn(S),L[S]=!0)}function N(S,z,J){return(J.y-S.y)*(z.x-S.x)>(z.y-S.y)*(J.x-S.x)}function F(S){for(var z=0,J=0,ce=S.length,be=ce-1,Ae=void 0,Ne=void 0;J<ce;be=J++)z+=((Ne=S[be]).x-(Ae=S[J]).x)*(Ae.y+Ne.y);return z}function I(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function P(S){var z={};if(S.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ce,be,Ae,Ne){var We=Ae||Ne;return z[be]=!We||We.toLowerCase(),""}),z["max-age"]){var J=parseInt(z["max-age"],10);isNaN(J)?delete z["max-age"]:z["max-age"]=J}return z}var j=null;function V(S){if(null==j){var z=S.navigator?S.navigator.userAgent:null;j=!!S.safari||!(!z||!(/\b(iPad|iPhone|iPod)\b/.test(z)||z.match("Safari")&&!z.match("Chrome")))}return j}function Z(S){try{var z=self[S];return z.setItem("_mapbox_test_",1),z.removeItem("_mapbox_test_"),!0}catch(J){return!1}}var Y,ee,re,X,K=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),ie=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,q=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,U={now:K,frame:function(S){var z=ie(S);return{cancel:function(){return q(z)}}},getImageData:function(S,z){void 0===z&&(z=0);var J=self.document.createElement("canvas"),ce=J.getContext("2d");if(!ce)throw new Error("failed to create canvas 2d context");return J.width=S.width,J.height=S.height,ce.drawImage(S,0,0,S.width,S.height),ce.getImageData(-z,-z,S.width+2*z,S.height+2*z)},resolveURL:function(S){return Y||(Y=self.document.createElement("a")),Y.href=S,Y.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==ee&&(ee=self.matchMedia("(prefers-reduced-motion: reduce)")),ee.matches)}},W={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ae={supported:!1,testSupport:function(S){G||!X||(te?ne(S):re=S)}},G=!1,te=!1;function ne(S){var z=S.createTexture();S.bindTexture(S.TEXTURE_2D,z);try{if(S.texImage2D(S.TEXTURE_2D,0,S.RGBA,S.RGBA,S.UNSIGNED_BYTE,X),S.isContextLost())return;ae.supported=!0}catch(J){}S.deleteTexture(z),G=!0}self.document&&((X=self.document.createElement("img")).onload=function(){re&&ne(re),re=null,te=!0},X.onerror=function(){G=!0,re=null},X.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var le="01",ue=function(S,z){this._transformRequestFn=S,this._customAccessToken=z,this._createSkuToken()};function pe(S){return 0===S.indexOf("mapbox:")}ue.prototype._createSkuToken=function(){var S=function(){for(var z="",J=0;J<10;J++)z+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",le,z].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=S.token,this._skuTokenExpiresAt=S.tokenExpiresAt},ue.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ue.prototype.transformRequest=function(S,z){return this._transformRequestFn&&this._transformRequestFn(S,z)||{url:S}},ue.prototype.normalizeStyleURL=function(S,z){if(!pe(S))return S;var J=we(S);return J.path="/styles/v1"+J.path,this._makeAPIURL(J,this._customAccessToken||z)},ue.prototype.normalizeGlyphsURL=function(S,z){if(!pe(S))return S;var J=we(S);return J.path="/fonts/v1"+J.path,this._makeAPIURL(J,this._customAccessToken||z)},ue.prototype.normalizeSourceURL=function(S,z){if(!pe(S))return S;var J=we(S);return J.path="/v4/"+J.authority+".json",J.params.push("secure"),this._makeAPIURL(J,this._customAccessToken||z)},ue.prototype.normalizeSpriteURL=function(S,z,J,ce){var be=we(S);return pe(S)?(be.path="/styles/v1"+be.path+"/sprite"+z+J,this._makeAPIURL(be,this._customAccessToken||ce)):(be.path+=""+z+J,De(be))},ue.prototype.normalizeTileURL=function(S,z){if(this._isSkuTokenExpired()&&this._createSkuToken(),S&&!pe(S))return S;var J=we(S);J.path=J.path.replace(/(\.(png|jpg)\d*)(?=$)/,(U.devicePixelRatio>=2||512===z?"@2x":"")+(ae.supported?".webp":"$1")),J.path=J.path.replace(/^.+\/v4\//,"/"),J.path="/v4"+J.path;var Ae=this._customAccessToken||function(Ne){for(var We=0,st=Ne;We<st.length;We+=1){var vt=st[We].match(/^access_token=(.*)$/);if(vt)return vt[1]}return null}(J.params)||W.ACCESS_TOKEN;return W.REQUIRE_ACCESS_TOKEN&&Ae&&this._skuToken&&J.params.push("sku="+this._skuToken),this._makeAPIURL(J,Ae)},ue.prototype.canonicalizeTileURL=function(S,z){var J=we(S);if(!J.path.match(/(^\/v4\/)/)||!J.path.match(/\.[\w]+$/))return S;var ce="mapbox://tiles/";ce+=J.path.replace("/v4/","");var be=J.params;return z&&(be=be.filter(function(Ae){return!Ae.match(/^access_token=/)})),be.length&&(ce+="?"+be.join("&")),ce},ue.prototype.canonicalizeTileset=function(S,z){for(var J=!!z&&pe(z),ce=[],be=0,Ae=S.tiles||[];be<Ae.length;be+=1){var Ne=Ae[be];_e(Ne)?ce.push(this.canonicalizeTileURL(Ne,J)):ce.push(Ne)}return ce},ue.prototype._makeAPIURL=function(S,z){var J="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ce=we(W.API_URL);if(S.protocol=ce.protocol,S.authority=ce.authority,"/"!==ce.path&&(S.path=""+ce.path+S.path),!W.REQUIRE_ACCESS_TOKEN)return De(S);if(!(z=z||W.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+J);if("s"===z[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+J);return S.params=S.params.filter(function(be){return-1===be.indexOf("access_token")}),S.params.push("access_token="+z),De(S)};var de=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function _e(S){return de.test(S)}var me=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function we(S){var z=S.match(me);if(!z)throw new Error("Unable to parse URL object");return{protocol:z[1],authority:z[2],path:z[3]||"/",params:z[4]?z[4].split("&"):[]}}function De(S){var z=S.params.length?"?"+S.params.join("&"):"";return S.protocol+"://"+S.authority+S.path+z}function Le(S){if(!S)return null;var J=S.split(".");if(!J||3!==J.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(J[1]).split("").map(function(ce){return"%"+("00"+ce.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(ce){return null}}var Ie=function(S){this.type=S,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Ie.prototype.getStorageKey=function(S){var ce,J=Le(W.ACCESS_TOKEN);return ce=J&&J.u?self.btoa(encodeURIComponent(J.u).replace(/%([0-9A-F]{2})/g,function(be,Ae){return String.fromCharCode(Number("0x"+Ae))})):W.ACCESS_TOKEN||"",S?"mapbox.eventData."+S+":"+ce:"mapbox.eventData:"+ce},Ie.prototype.fetchEventData=function(){var S=Z("localStorage"),z=this.getStorageKey(),J=this.getStorageKey("uuid");if(S)try{var ce=self.localStorage.getItem(z);ce&&(this.eventData=JSON.parse(ce));var be=self.localStorage.getItem(J);be&&(this.anonId=be)}catch(Ae){D("Unable to read from LocalStorage")}},Ie.prototype.saveEventData=function(){var S=Z("localStorage"),z=this.getStorageKey(),J=this.getStorageKey("uuid");if(S)try{self.localStorage.setItem(J,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(z,JSON.stringify(this.eventData))}catch(ce){D("Unable to write to LocalStorage")}},Ie.prototype.processRequests=function(S){},Ie.prototype.postEvent=function(S,z,J,ce){var be=this;if(W.EVENTS_URL){var Ae=we(W.EVENTS_URL);Ae.params.push("access_token="+(ce||W.ACCESS_TOKEN||""));var Ne={event:this.type,created:new Date(S).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:le,userId:this.anonId},We=z?f(Ne,z):Ne,st={url:De(Ae),headers:{"Content-Type":"text/plain"},body:JSON.stringify([We])};this.pendingRequest=en(st,function(vt){be.pendingRequest=null,J(vt),be.saveEventData(),be.processRequests(ce)})}},Ie.prototype.queueRequest=function(S,z){this.queue.push(S),this.processRequests(z)};var je,ye,Me=function(S){function z(){S.call(this,"map.load"),this.success={},this.skuToken=""}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.postMapLoadEvent=function(J,ce,be,Ae){this.skuToken=be,(W.EVENTS_URL&&Ae||W.ACCESS_TOKEN&&Array.isArray(J)&&J.some(function(Ne){return pe(Ne)||_e(Ne)}))&&this.queueRequest({id:ce,timestamp:Date.now()},Ae)},z.prototype.processRequests=function(J){var ce=this;if(!this.pendingRequest&&0!==this.queue.length){var be=this.queue.shift(),Ae=be.id,Ne=be.timestamp;Ae&&this.success[Ae]||(this.anonId||this.fetchEventData(),w(this.anonId)||(this.anonId=u()),this.postEvent(Ne,{skuToken:this.skuToken},function(We){We||Ae&&(ce.success[Ae]=!0)},J))}},z}(Ie),Oe=new(function(S){function z(J){S.call(this,"appUserTurnstile"),this._customAccessToken=J}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.postTurnstileEvent=function(J,ce){W.EVENTS_URL&&W.ACCESS_TOKEN&&Array.isArray(J)&&J.some(function(be){return pe(be)||_e(be)})&&this.queueRequest(Date.now(),ce)},z.prototype.processRequests=function(J){var ce=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var be=Le(W.ACCESS_TOKEN),Ae=be?be.u:W.ACCESS_TOKEN,Ne=Ae!==this.eventData.tokenU;w(this.anonId)||(this.anonId=u(),Ne=!0);var We=this.queue.shift();if(this.eventData.lastSuccess){var st=new Date(this.eventData.lastSuccess),vt=new Date(We),Tt=(We-this.eventData.lastSuccess)/864e5;Ne=Ne||Tt>=1||Tt<-1||st.getDate()!==vt.getDate()}else Ne=!0;if(!Ne)return this.processRequests();this.postEvent(We,{"enabled.telemetry":!1},function(Wt){Wt||(ce.eventData.lastSuccess=We,ce.eventData.tokenU=Ae)},J)}},z}(Ie)),Pe=Oe.postTurnstileEvent.bind(Oe),Re=new Me,Ue=Re.postMapLoadEvent.bind(Re),qe=500,Xe=50;function lt(){self.caches&&!je&&(je=self.caches.open("mapbox-tiles"))}function $e(S){var z=S.indexOf("?");return z<0?S:S.slice(0,z)}var nt,ct=1/0;function bt(){return null==nt&&(nt=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),nt}var kt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(kt);var Bt=function(S){function z(J,ce,be){401===ce&&_e(be)&&(J+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),S.call(this,J),this.status=ce,this.url=be,this.name=this.constructor.name,this.message=J}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},z}(Error),Et=I()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function ht(S,z){var J,ce=new self.AbortController,be=new self.Request(S.url,{method:S.method||"GET",body:S.body,credentials:S.credentials,headers:S.headers,referrer:Et(),signal:ce.signal}),Ae=!1,Ne=!1,We=(J=be.url).indexOf("sku=")>0&&_e(J);"json"===S.type&&be.headers.set("Accept","application/json");var st=function(Tt,Wt,on){if(!Ne){if(Tt&&"SecurityError"!==Tt.message&&D(Tt),Wt&&on)return vt(Wt);var Jt=Date.now();self.fetch(be).then(function(xn){if(xn.ok){var Ln=We?xn.clone():null;return vt(xn,Ln,Jt)}return z(new Bt(xn.statusText,xn.status,S.url))}).catch(function(xn){20!==xn.code&&z(new Error(xn.message))})}},vt=function(Tt,Wt,on){("arrayBuffer"===S.type?Tt.arrayBuffer():"json"===S.type?Tt.json():Tt.text()).then(function(Jt){Ne||(Wt&&on&&function(S,z,J){if(lt(),je){var ce={status:z.status,statusText:z.statusText,headers:new self.Headers};z.headers.forEach(function(Ae,Ne){return ce.headers.set(Ne,Ae)});var be=P(z.headers.get("Cache-Control")||"");be["no-store"]||(be["max-age"]&&ce.headers.set("Expires",new Date(J+1e3*be["max-age"]).toUTCString()),new Date(ce.headers.get("Expires")).getTime()-J<42e4||function(Ae,Ne){if(void 0===ye)try{new Response(new ReadableStream),ye=!0}catch(We){ye=!1}ye?Ne(Ae.body):Ae.blob().then(Ne)}(z,function(Ae){var Ne=new self.Response(Ae,ce);lt(),je&&je.then(function(We){return We.put($e(S.url),Ne)}).catch(function(We){return D(We.message)})}))}}(be,Wt,on),Ae=!0,z(null,Jt,Tt.headers.get("Cache-Control"),Tt.headers.get("Expires")))}).catch(function(Jt){Ne||z(new Error(Jt.message))})};return We?function(S,z){if(lt(),!je)return z(null);var J=$e(S.url);je.then(function(ce){ce.match(J).then(function(be){var Ae=function(Ne){if(!Ne)return!1;var We=new Date(Ne.headers.get("Expires")||0),st=P(Ne.headers.get("Cache-Control")||"");return We>Date.now()&&!st["no-cache"]}(be);ce.delete(J),Ae&&ce.put(J,be.clone()),z(null,be,Ae)}).catch(z)}).catch(z)}(be,st):st(null,null),{cancel:function(){Ne=!0,Ae||ce.abort()}}}var Qt,tn,at=function(S,z){if(!(/^file:/.test(J=S.url)||/^file:/.test(Et())&&!/^\w+:/.test(J))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return ht(S,z);if(I()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",S,z,void 0,!0)}var J;return function(ce,be){var Ae=new self.XMLHttpRequest;for(var Ne in Ae.open(ce.method||"GET",ce.url,!0),"arrayBuffer"===ce.type&&(Ae.responseType="arraybuffer"),ce.headers)Ae.setRequestHeader(Ne,ce.headers[Ne]);return"json"===ce.type&&(Ae.responseType="text",Ae.setRequestHeader("Accept","application/json")),Ae.withCredentials="include"===ce.credentials,Ae.onerror=function(){be(new Error(Ae.statusText))},Ae.onload=function(){if((Ae.status>=200&&Ae.status<300||0===Ae.status)&&null!==Ae.response){var We=Ae.response;if("json"===ce.type)try{We=JSON.parse(Ae.response)}catch(st){return be(st)}be(null,We,Ae.getResponseHeader("Cache-Control"),Ae.getResponseHeader("Expires"))}else be(new Bt(Ae.statusText,Ae.status,ce.url))},Ae.send(ce.body),{cancel:function(){return Ae.abort()}}}(S,z)},Ft=function(S,z){return at(f(S,{type:"arrayBuffer"}),z)},en=function(S,z){return at(f(S,{method:"POST"}),z)};Qt=[],tn=0;var dn=function(S,z){if(ae.supported&&(S.headers||(S.headers={}),S.headers.accept="image/webp,*/*"),tn>=W.MAX_PARALLEL_IMAGE_REQUESTS){var J={requestParameters:S,callback:z,cancelled:!1,cancel:function(){this.cancelled=!0}};return Qt.push(J),J}tn++;var ce=!1,be=function(){if(!ce)for(ce=!0,tn--;Qt.length&&tn<W.MAX_PARALLEL_IMAGE_REQUESTS;){var Ne=Qt.shift();Ne.cancelled||(Ne.cancel=dn(Ne.requestParameters,Ne.callback).cancel)}},Ae=Ft(S,function(Ne,We,st,vt){var Wt,on;be(),Ne?z(Ne):We&&(bt()?(Wt=z,on=new self.Blob([new Uint8Array(We)],{type:"image/png"}),self.createImageBitmap(on).then(function(Jt){Wt(null,Jt)}).catch(function(Jt){Wt(new Error("Could not load image because of "+Jt.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(Tt,Wt,on,Jt){var xn=new self.Image,Ln=self.URL;xn.onload=function(){Wt(null,xn),Ln.revokeObjectURL(xn.src)},xn.onerror=function(){return Wt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Wn=new self.Blob([new Uint8Array(Tt)],{type:"image/png"});xn.cacheControl=on,xn.expires=Jt,xn.src=Tt.byteLength?Ln.createObjectURL(Wn):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(We,z,st,vt))});return{cancel:function(){Ae.cancel(),be()}}};function Mn(S,z,J){J[S]&&-1!==J[S].indexOf(z)||(J[S]=J[S]||[],J[S].push(z))}function sn(S,z,J){if(J&&J[S]){var ce=J[S].indexOf(z);-1!==ce&&J[S].splice(ce,1)}}var ke=function(S,z){void 0===z&&(z={}),f(this,z),this.type=S},Se=function(S){function z(J,ce){void 0===ce&&(ce={}),S.call(this,"error",f({error:J},ce))}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z}(ke),Ce=function(){};Ce.prototype.on=function(S,z){return this._listeners=this._listeners||{},Mn(S,z,this._listeners),this},Ce.prototype.off=function(S,z){return sn(S,z,this._listeners),sn(S,z,this._oneTimeListeners),this},Ce.prototype.once=function(S,z){return this._oneTimeListeners=this._oneTimeListeners||{},Mn(S,z,this._oneTimeListeners),this},Ce.prototype.fire=function(S,z){"string"==typeof S&&(S=new ke(S,z||{}));var J=S.type;if(this.listens(J)){S.target=this;for(var ce=0,be=this._listeners&&this._listeners[J]?this._listeners[J].slice():[];ce<be.length;ce+=1)be[ce].call(this,S);for(var Ae=0,Ne=this._oneTimeListeners&&this._oneTimeListeners[J]?this._oneTimeListeners[J].slice():[];Ae<Ne.length;Ae+=1){var We=Ne[Ae];sn(J,We,this._oneTimeListeners),We.call(this,S)}var st=this._eventedParent;st&&(f(S,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),st.fire(S))}else S instanceof Se&&console.error(S.error);return this},Ce.prototype.listens=function(S){return this._listeners&&this._listeners[S]&&this._listeners[S].length>0||this._oneTimeListeners&&this._oneTimeListeners[S]&&this._oneTimeListeners[S].length>0||this._eventedParent&&this._eventedParent.listens(S)},Ce.prototype.setEventedParent=function(S,z){return this._eventedParent=S,this._eventedParentData=z,this};var Ve={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},Ge=function(S,z,J,ce){this.message=(S?S+": ":"")+J,ce&&(this.identifier=ce),null!=z&&z.__line__&&(this.line=z.__line__)};function Qe(S){var J=S.value;return J?[new Ge(S.key,J,"constants have been deprecated as of v8")]:[]}function ot(S){for(var z=[],J=arguments.length-1;J-- >0;)z[J]=arguments[J+1];for(var ce=0,be=z;ce<be.length;ce+=1){var Ae=be[ce];for(var Ne in Ae)S[Ne]=Ae[Ne]}return S}function it(S){return S instanceof Number||S instanceof String||S instanceof Boolean?S.valueOf():S}function mt(S){if(Array.isArray(S))return S.map(mt);if(S instanceof Object&&!(S instanceof Number||S instanceof String||S instanceof Boolean)){var z={};for(var J in S)z[J]=mt(S[J]);return z}return it(S)}var xt=function(S){function z(J,ce){S.call(this,ce),this.message=ce,this.key=J}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z}(Error),Vt=function(S,z){void 0===z&&(z=[]),this.parent=S,this.bindings={};for(var J=0,ce=z;J<ce.length;J+=1){var be=ce[J];this.bindings[be[0]]=be[1]}};Vt.prototype.concat=function(S){return new Vt(this,S)},Vt.prototype.get=function(S){if(this.bindings[S])return this.bindings[S];if(this.parent)return this.parent.get(S);throw new Error(S+" not found in scope.")},Vt.prototype.has=function(S){return!!this.bindings[S]||!!this.parent&&this.parent.has(S)};var $t={kind:"null"},pt={kind:"number"},At={kind:"string"},Xt={kind:"boolean"},Ct={kind:"color"},Pt={kind:"object"},Be={kind:"value"},tt={kind:"collator"},dt={kind:"formatted"},Dt={kind:"resolvedImage"};function Nt(S,z){return{kind:"array",itemType:S,N:z}}function Yt(S){if("array"===S.kind){var z=Yt(S.itemType);return"number"==typeof S.N?"array<"+z+", "+S.N+">":"value"===S.itemType.kind?"array":"array<"+z+">"}return S.kind}var fn=[$t,pt,At,Xt,Ct,dt,Pt,Nt(Be),Dt];function nn(S,z){if("error"===z.kind)return null;if("array"===S.kind){if("array"===z.kind&&(0===z.N&&"value"===z.itemType.kind||!nn(S.itemType,z.itemType))&&("number"!=typeof S.N||S.N===z.N))return null}else{if(S.kind===z.kind)return null;if("value"===S.kind)for(var J=0,ce=fn;J<ce.length;J+=1)if(!nn(ce[J],z))return null}return"Expected "+Yt(S)+" but found "+Yt(z)+" instead."}function In(S,z){return z.some(function(J){return J.kind===S.kind})}function Dn(S,z){return z.some(function(J){return"null"===J?null===S:"array"===J?Array.isArray(S):"object"===J?S&&!Array.isArray(S)&&"object"==typeof S:J===typeof S})}var kn=o(function(S,z){var J={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ce(st){return(st=Math.round(st))<0?0:st>255?255:st}function Ae(st){return ce("%"===st[st.length-1]?parseFloat(st)/100*255:parseInt(st))}function Ne(st){return function(st){return st<0?0:st>1?1:st}("%"===st[st.length-1]?parseFloat(st)/100:parseFloat(st))}function We(st,vt,Tt){return Tt<0?Tt+=1:Tt>1&&(Tt-=1),6*Tt<1?st+(vt-st)*Tt*6:2*Tt<1?vt:3*Tt<2?st+(vt-st)*(2/3-Tt)*6:st}try{z.parseCSSColor=function(st){var vt,Tt=st.replace(/ /g,"").toLowerCase();if(Tt in J)return J[Tt].slice();if("#"===Tt[0])return 4===Tt.length?(vt=parseInt(Tt.substr(1),16))>=0&&vt<=4095?[(3840&vt)>>4|(3840&vt)>>8,240&vt|(240&vt)>>4,15&vt|(15&vt)<<4,1]:null:7===Tt.length&&(vt=parseInt(Tt.substr(1),16))>=0&&vt<=16777215?[(16711680&vt)>>16,(65280&vt)>>8,255&vt,1]:null;var Wt=Tt.indexOf("("),on=Tt.indexOf(")");if(-1!==Wt&&on+1===Tt.length){var Jt=Tt.substr(0,Wt),xn=Tt.substr(Wt+1,on-(Wt+1)).split(","),Ln=1;switch(Jt){case"rgba":if(4!==xn.length)return null;Ln=Ne(xn.pop());case"rgb":return 3!==xn.length?null:[Ae(xn[0]),Ae(xn[1]),Ae(xn[2]),Ln];case"hsla":if(4!==xn.length)return null;Ln=Ne(xn.pop());case"hsl":if(3!==xn.length)return null;var Wn=(parseFloat(xn[0])%360+360)%360/360,Gn=Ne(xn[1]),ir=Ne(xn[2]),or=ir<=.5?ir*(Gn+1):ir+Gn-ir*Gn,dr=2*ir-or;return[ce(255*We(dr,or,Wn+1/3)),ce(255*We(dr,or,Wn)),ce(255*We(dr,or,Wn-1/3)),Ln];default:return null}}return null}}catch(st){}}).parseCSSColor,rn=function(S,z,J,ce){void 0===ce&&(ce=1),this.r=S,this.g=z,this.b=J,this.a=ce};rn.parse=function(S){if(S){if(S instanceof rn)return S;if("string"==typeof S){var z=kn(S);if(z)return new rn(z[0]/255*z[3],z[1]/255*z[3],z[2]/255*z[3],z[3])}}},rn.prototype.toString=function(){var S=this.toArray(),J=S[1],ce=S[2],be=S[3];return"rgba("+Math.round(S[0])+","+Math.round(J)+","+Math.round(ce)+","+be+")"},rn.prototype.toArray=function(){var ce=this.a;return 0===ce?[0,0,0,0]:[255*this.r/ce,255*this.g/ce,255*this.b/ce,ce]},rn.black=new rn(0,0,0,1),rn.white=new rn(1,1,1,1),rn.transparent=new rn(0,0,0,0),rn.red=new rn(1,0,0,1);var pn=function(S,z,J){this.sensitivity=S?z?"variant":"case":z?"accent":"base",this.locale=J,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};pn.prototype.compare=function(S,z){return this.collator.compare(S,z)},pn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var gn=function(S,z,J,ce,be){this.text=S,this.image=z,this.scale=J,this.fontStack=ce,this.textColor=be},Pn=function(S){this.sections=S};Pn.fromString=function(S){return new Pn([new gn(S,null,null,null,null)])},Pn.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(S){return 0!==S.text.length||S.image&&0!==S.image.name.length})},Pn.factory=function(S){return S instanceof Pn?S:Pn.fromString(S)},Pn.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(S){return S.text}).join("")},Pn.prototype.serialize=function(){for(var S=["format"],z=0,J=this.sections;z<J.length;z+=1){var ce=J[z];if(ce.image)S.push(["image",ce.image.name]);else{S.push(ce.text);var be={};ce.fontStack&&(be["text-font"]=["literal",ce.fontStack.split(",")]),ce.scale&&(be["font-scale"]=ce.scale),ce.textColor&&(be["text-color"]=["rgba"].concat(ce.textColor.toArray())),S.push(be)}}return S};var jn=function(S){this.name=S.name,this.available=S.available};function Kn(S,z,J,ce){return"number"==typeof S&&S>=0&&S<=255&&"number"==typeof z&&z>=0&&z<=255&&"number"==typeof J&&J>=0&&J<=255?void 0===ce||"number"==typeof ce&&ce>=0&&ce<=1?null:"Invalid rgba value ["+[S,z,J,ce].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof ce?[S,z,J,ce]:[S,z,J]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function rr(S){if(null===S||"string"==typeof S||"boolean"==typeof S||"number"==typeof S||S instanceof rn||S instanceof pn||S instanceof Pn||S instanceof jn)return!0;if(Array.isArray(S)){for(var z=0,J=S;z<J.length;z+=1)if(!rr(J[z]))return!1;return!0}if("object"==typeof S){for(var ce in S)if(!rr(S[ce]))return!1;return!0}return!1}function lr(S){if(null===S)return $t;if("string"==typeof S)return At;if("boolean"==typeof S)return Xt;if("number"==typeof S)return pt;if(S instanceof rn)return Ct;if(S instanceof pn)return tt;if(S instanceof Pn)return dt;if(S instanceof jn)return Dt;if(Array.isArray(S)){for(var z,J=S.length,ce=0,be=S;ce<be.length;ce+=1){var Ae=lr(be[ce]);if(z){if(z===Ae)continue;z=Be;break}z=Ae}return Nt(z||Be,J)}return Pt}function kr(S){var z=typeof S;return null===S?"":"string"===z||"number"===z||"boolean"===z?String(S):S instanceof rn||S instanceof Pn||S instanceof jn?S.toString():JSON.stringify(S)}jn.prototype.toString=function(){return this.name},jn.fromString=function(S){return S?new jn({name:S,available:!1}):null},jn.prototype.serialize=function(){return["image",this.name]};var Xr=function(S,z){this.type=S,this.value=z};Xr.parse=function(S,z){if(2!==S.length)return z.error("'literal' expression requires exactly one argument, but found "+(S.length-1)+" instead.");if(!rr(S[1]))return z.error("invalid value");var J=S[1],ce=lr(J),be=z.expectedType;return"array"!==ce.kind||0!==ce.N||!be||"array"!==be.kind||"number"==typeof be.N&&0!==be.N||(ce=be),new Xr(ce,J)},Xr.prototype.evaluate=function(){return this.value},Xr.prototype.eachChild=function(){},Xr.prototype.outputDefined=function(){return!0},Xr.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof rn?["rgba"].concat(this.value.toArray()):this.value instanceof Pn?this.value.serialize():this.value};var sr=function(S){this.name="ExpressionEvaluationError",this.message=S};sr.prototype.toJSON=function(){return this.message};var oi={string:At,number:pt,boolean:Xt,object:Pt},Gr=function(S,z){this.type=S,this.args=z};Gr.parse=function(S,z){if(S.length<2)return z.error("Expected at least one argument.");var J,ce=1,be=S[0];if("array"===be){var Ae,Ne;if(S.length>2){var We=S[1];if("string"!=typeof We||!(We in oi)||"object"===We)return z.error('The item type argument of "array" must be one of string, number, boolean',1);Ae=oi[We],ce++}else Ae=Be;if(S.length>3){if(null!==S[2]&&("number"!=typeof S[2]||S[2]<0||S[2]!==Math.floor(S[2])))return z.error('The length argument to "array" must be a positive integer literal',2);Ne=S[2],ce++}J=Nt(Ae,Ne)}else J=oi[be];for(var st=[];ce<S.length;ce++){var vt=z.parse(S[ce],ce,Be);if(!vt)return null;st.push(vt)}return new Gr(J,st)},Gr.prototype.evaluate=function(S){for(var z=0;z<this.args.length;z++){var J=this.args[z].evaluate(S);if(!nn(this.type,lr(J)))return J;if(z===this.args.length-1)throw new sr("Expected value to be of type "+Yt(this.type)+", but found "+Yt(lr(J))+" instead.")}return null},Gr.prototype.eachChild=function(S){this.args.forEach(S)},Gr.prototype.outputDefined=function(){return this.args.every(function(S){return S.outputDefined()})},Gr.prototype.serialize=function(){var S=this.type,z=[S.kind];if("array"===S.kind){var J=S.itemType;if("string"===J.kind||"number"===J.kind||"boolean"===J.kind){z.push(J.kind);var ce=S.N;("number"==typeof ce||this.args.length>1)&&z.push(ce)}}return z.concat(this.args.map(function(be){return be.serialize()}))};var Lr=function(S){this.type=dt,this.sections=S};Lr.parse=function(S,z){if(S.length<2)return z.error("Expected at least one argument.");var J=S[1];if(!Array.isArray(J)&&"object"==typeof J)return z.error("First argument must be an image or text section.");for(var ce=[],be=!1,Ae=1;Ae<=S.length-1;++Ae){var Ne=S[Ae];if(be&&"object"==typeof Ne&&!Array.isArray(Ne)){be=!1;var We=null;if(Ne["font-scale"]&&!(We=z.parse(Ne["font-scale"],1,pt)))return null;var st=null;if(Ne["text-font"]&&!(st=z.parse(Ne["text-font"],1,Nt(At))))return null;var vt=null;if(Ne["text-color"]&&!(vt=z.parse(Ne["text-color"],1,Ct)))return null;var Tt=ce[ce.length-1];Tt.scale=We,Tt.font=st,Tt.textColor=vt}else{var Wt=z.parse(S[Ae],1,Be);if(!Wt)return null;var on=Wt.type.kind;if("string"!==on&&"value"!==on&&"null"!==on&&"resolvedImage"!==on)return z.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");be=!0,ce.push({content:Wt,scale:null,font:null,textColor:null})}}return new Lr(ce)},Lr.prototype.evaluate=function(S){return new Pn(this.sections.map(function(z){var J=z.content.evaluate(S);return lr(J)===Dt?new gn("",J,null,null,null):new gn(kr(J),null,z.scale?z.scale.evaluate(S):null,z.font?z.font.evaluate(S).join(","):null,z.textColor?z.textColor.evaluate(S):null)}))},Lr.prototype.eachChild=function(S){for(var z=0,J=this.sections;z<J.length;z+=1){var ce=J[z];S(ce.content),ce.scale&&S(ce.scale),ce.font&&S(ce.font),ce.textColor&&S(ce.textColor)}},Lr.prototype.outputDefined=function(){return!1},Lr.prototype.serialize=function(){for(var S=["format"],z=0,J=this.sections;z<J.length;z+=1){var ce=J[z];S.push(ce.content.serialize());var be={};ce.scale&&(be["font-scale"]=ce.scale.serialize()),ce.font&&(be["text-font"]=ce.font.serialize()),ce.textColor&&(be["text-color"]=ce.textColor.serialize()),S.push(be)}return S};var Jr=function(S){this.type=Dt,this.input=S};Jr.parse=function(S,z){if(2!==S.length)return z.error("Expected two arguments.");var J=z.parse(S[1],1,At);return J?new Jr(J):z.error("No image name provided.")},Jr.prototype.evaluate=function(S){var z=this.input.evaluate(S),J=jn.fromString(z);return J&&S.availableImages&&(J.available=S.availableImages.indexOf(z)>-1),J},Jr.prototype.eachChild=function(S){S(this.input)},Jr.prototype.outputDefined=function(){return!1},Jr.prototype.serialize=function(){return["image",this.input.serialize()]};var Mi={"to-boolean":Xt,"to-color":Ct,"to-number":pt,"to-string":At},Jn=function(S,z){this.type=S,this.args=z};Jn.parse=function(S,z){if(S.length<2)return z.error("Expected at least one argument.");var J=S[0];if(("to-boolean"===J||"to-string"===J)&&2!==S.length)return z.error("Expected one argument.");for(var ce=Mi[J],be=[],Ae=1;Ae<S.length;Ae++){var Ne=z.parse(S[Ae],Ae,Be);if(!Ne)return null;be.push(Ne)}return new Jn(ce,be)},Jn.prototype.evaluate=function(S){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(S));if("color"===this.type.kind){for(var z,J,ce=0,be=this.args;ce<be.length;ce+=1){if(J=null,(z=be[ce].evaluate(S))instanceof rn)return z;if("string"==typeof z){var Ae=S.parseColor(z);if(Ae)return Ae}else if(Array.isArray(z)&&!(J=z.length<3||z.length>4?"Invalid rbga value "+JSON.stringify(z)+": expected an array containing either three or four numeric values.":Kn(z[0],z[1],z[2],z[3])))return new rn(z[0]/255,z[1]/255,z[2]/255,z[3])}throw new sr(J||"Could not parse color from value '"+("string"==typeof z?z:String(JSON.stringify(z)))+"'")}if("number"===this.type.kind){for(var Ne=null,We=0,st=this.args;We<st.length;We+=1){if(null===(Ne=st[We].evaluate(S)))return 0;var vt=Number(Ne);if(!isNaN(vt))return vt}throw new sr("Could not convert "+JSON.stringify(Ne)+" to number.")}return"formatted"===this.type.kind?Pn.fromString(kr(this.args[0].evaluate(S))):"resolvedImage"===this.type.kind?jn.fromString(kr(this.args[0].evaluate(S))):kr(this.args[0].evaluate(S))},Jn.prototype.eachChild=function(S){this.args.forEach(S)},Jn.prototype.outputDefined=function(){return this.args.every(function(S){return S.outputDefined()})},Jn.prototype.serialize=function(){if("formatted"===this.type.kind)return new Lr([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Jr(this.args[0]).serialize();var S=["to-"+this.type.kind];return this.eachChild(function(z){S.push(z.serialize())}),S};var br=["Unknown","Point","LineString","Polygon"],Fr=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Fr.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Fr.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?br[this.feature.type]:this.feature.type:null},Fr.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Fr.prototype.canonicalID=function(){return this.canonical},Fr.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Fr.prototype.parseColor=function(S){var z=this._parseColorCache[S];return z||(z=this._parseColorCache[S]=rn.parse(S)),z};var cr=function(S,z,J,ce){this.name=S,this.type=z,this._evaluate=J,this.args=ce};cr.prototype.evaluate=function(S){return this._evaluate(S,this.args)},cr.prototype.eachChild=function(S){this.args.forEach(S)},cr.prototype.outputDefined=function(){return!1},cr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(S){return S.serialize()}))},cr.parse=function(S,z){var J,ce=S[0],be=cr.definitions[ce];if(!be)return z.error('Unknown expression "'+ce+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Ae=Array.isArray(be)?be[0]:be.type,Ne=Array.isArray(be)?[[be[1],be[2]]]:be.overloads,We=Ne.filter(function(Oi){var Ci=Oi[0];return!Array.isArray(Ci)||Ci.length===S.length-1}),st=null,vt=0,Tt=We;vt<Tt.length;vt+=1){var Wt=Tt[vt],on=Wt[0],Jt=Wt[1];st=new Tr(z.registry,z.path,null,z.scope);for(var xn=[],Ln=!1,Wn=1;Wn<S.length;Wn++){var Gn=S[Wn],ir=Array.isArray(on)?on[Wn-1]:on.type,or=st.parse(Gn,1+xn.length,ir);if(!or){Ln=!0;break}xn.push(or)}if(!Ln)if(Array.isArray(on)&&on.length!==xn.length)st.error("Expected "+on.length+" arguments, but found "+xn.length+" instead.");else{for(var dr=0;dr<xn.length;dr++){var Rr=Array.isArray(on)?on[dr]:on.type,qr=xn[dr];st.concat(dr+1).checkSubtype(Rr,qr.type)}if(0===st.errors.length)return new cr(ce,Ae,Jt,xn)}}if(1===We.length)(J=z.errors).push.apply(J,st.errors);else{for(var fi=(We.length?We:Ne).map(function(Oi){var Ci;return Ci=Oi[0],Array.isArray(Ci)?"("+Ci.map(Yt).join(", ")+")":"("+Yt(Ci.type)+"...)"}).join(" | "),si=[],_i=1;_i<S.length;_i++){var Ri=z.parse(S[_i],1+si.length);if(!Ri)return null;si.push(Yt(Ri.type))}z.error("Expected arguments of type "+fi+", but found ("+si.join(", ")+") instead.")}return null},cr.register=function(S,z){for(var J in cr.definitions=z,z)S[J]=cr};var Qr=function(S,z,J){this.type=tt,this.locale=J,this.caseSensitive=S,this.diacriticSensitive=z};function ui(S,z){S[0]=Math.min(S[0],z[0]),S[1]=Math.min(S[1],z[1]),S[2]=Math.max(S[2],z[0]),S[3]=Math.max(S[3],z[1])}function Nr(S,z){return!(S[0]<=z[0]||S[2]>=z[2]||S[1]<=z[1]||S[3]>=z[3])}function Hr(S,z){var ce=(180+S[0])/360,be=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+S[1]*Math.PI/360)))/360,Ae=Math.pow(2,z.z);return[Math.round(ce*Ae*8192),Math.round(be*Ae*8192)]}function wr(S,z,J){return z[1]>S[1]!=J[1]>S[1]&&S[0]<(J[0]-z[0])*(S[1]-z[1])/(J[1]-z[1])+z[0]}function un(S,z){for(var J,ce,be,Ae,Ne,We,st,vt=!1,Tt=0,Wt=z.length;Tt<Wt;Tt++)for(var on=z[Tt],Jt=0,xn=on.length;Jt<xn-1;Jt++){if(void 0,void 0,void 0,void 0,(Ae=(J=S)[0]-(ce=on[Jt])[0])*(st=J[1]-(be=on[Jt+1])[1])-(We=J[0]-be[0])*(Ne=J[1]-ce[1])==0&&Ae*We<=0&&Ne*st<=0)return!1;wr(S,on[Jt],on[Jt+1])&&(vt=!vt)}return vt}function er(S,z){for(var J=0;J<z.length;J++)if(un(S,z[J]))return!0;return!1}function Ut(S,z,J,ce){var st=ce[0]-J[0],vt=ce[1]-J[1],Tt=(S[0]-J[0])*vt-st*(S[1]-J[1]),Wt=(z[0]-J[0])*vt-st*(z[1]-J[1]);return Tt>0&&Wt<0||Tt<0&&Wt>0}function vn(S,z,J){for(var ce=0,be=J;ce<be.length;ce+=1)for(var Ae=be[ce],Ne=0;Ne<Ae.length-1;++Ne)if(void 0,void 0,(Wt=[(Tt=Ae[Ne+1])[0]-(vt=Ae[Ne])[0],Tt[1]-vt[1]])[0]*(on=[(st=z)[0]-(We=S)[0],st[1]-We[1]])[1]-Wt[1]*on[0]!=0&&Ut(We,st,vt,Tt)&&Ut(vt,Tt,We,st))return!0;var We,st,vt,Tt,Wt,on;return!1}function Tn(S,z){for(var J=0;J<S.length;++J)if(!un(S[J],z))return!1;for(var ce=0;ce<S.length-1;++ce)if(vn(S[ce],S[ce+1],z))return!1;return!0}function Qn(S,z){for(var J=0;J<z.length;J++)if(Tn(S,z[J]))return!0;return!1}function Zn(S,z,J){for(var ce=[],be=0;be<S.length;be++){for(var Ae=[],Ne=0;Ne<S[be].length;Ne++){var We=Hr(S[be][Ne],J);ui(z,We),Ae.push(We)}ce.push(Ae)}return ce}function $n(S,z,J){for(var ce=[],be=0;be<S.length;be++){var Ae=Zn(S[be],z,J);ce.push(Ae)}return ce}function Hn(S,z,J,ce){if(S[0]<J[0]||S[0]>J[2]){var be=.5*ce,Ae=S[0]-J[0]>be?-ce:J[0]-S[0]>be?ce:0;0===Ae&&(Ae=S[0]-J[2]>be?-ce:J[2]-S[0]>be?ce:0),S[0]+=Ae}ui(z,S)}function Rn(S,z,J,ce){for(var be=8192*Math.pow(2,ce.z),Ae=[8192*ce.x,8192*ce.y],Ne=[],We=0,st=S;We<st.length;We+=1)for(var vt=0,Tt=st[We];vt<Tt.length;vt+=1){var Wt=Tt[vt],on=[Wt.x+Ae[0],Wt.y+Ae[1]];Hn(on,z,J,be),Ne.push(on)}return Ne}function Fn(S,z,J,ce){for(var be,Ae=8192*Math.pow(2,ce.z),Ne=[8192*ce.x,8192*ce.y],We=[],st=0,vt=S;st<vt.length;st+=1){for(var Tt=[],Wt=0,on=vt[st];Wt<on.length;Wt+=1){var Jt=on[Wt],xn=[Jt.x+Ne[0],Jt.y+Ne[1]];ui(z,xn),Tt.push(xn)}We.push(Tt)}if(z[2]-z[0]<=Ae/2){(be=z)[0]=be[1]=1/0,be[2]=be[3]=-1/0;for(var Ln=0,Wn=We;Ln<Wn.length;Ln+=1)for(var Gn=0,ir=Wn[Ln];Gn<ir.length;Gn+=1)Hn(ir[Gn],z,J,Ae)}return We}Qr.parse=function(S,z){if(2!==S.length)return z.error("Expected one argument.");var J=S[1];if("object"!=typeof J||Array.isArray(J))return z.error("Collator options argument must be an object.");var ce=z.parse(void 0!==J["case-sensitive"]&&J["case-sensitive"],1,Xt);if(!ce)return null;var be=z.parse(void 0!==J["diacritic-sensitive"]&&J["diacritic-sensitive"],1,Xt);if(!be)return null;var Ae=null;return J.locale&&!(Ae=z.parse(J.locale,1,At))?null:new Qr(ce,be,Ae)},Qr.prototype.evaluate=function(S){return new pn(this.caseSensitive.evaluate(S),this.diacriticSensitive.evaluate(S),this.locale?this.locale.evaluate(S):null)},Qr.prototype.eachChild=function(S){S(this.caseSensitive),S(this.diacriticSensitive),this.locale&&S(this.locale)},Qr.prototype.outputDefined=function(){return!1},Qr.prototype.serialize=function(){var S={};return S["case-sensitive"]=this.caseSensitive.serialize(),S["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(S.locale=this.locale.serialize()),["collator",S]};var zn=function(S,z){this.type=Xt,this.geojson=S,this.geometries=z};function Yn(S){if(S instanceof cr&&("get"===S.name&&1===S.args.length||"feature-state"===S.name||"has"===S.name&&1===S.args.length||"properties"===S.name||"geometry-type"===S.name||"id"===S.name||/^filter-/.test(S.name))||S instanceof zn)return!1;var z=!0;return S.eachChild(function(J){z&&!Yn(J)&&(z=!1)}),z}function nr(S){if(S instanceof cr&&"feature-state"===S.name)return!1;var z=!0;return S.eachChild(function(J){z&&!nr(J)&&(z=!1)}),z}function hr(S,z){if(S instanceof cr&&z.indexOf(S.name)>=0)return!1;var J=!0;return S.eachChild(function(ce){J&&!hr(ce,z)&&(J=!1)}),J}zn.parse=function(S,z){if(2!==S.length)return z.error("'within' expression requires exactly one argument, but found "+(S.length-1)+" instead.");if(rr(S[1])){var J=S[1];if("FeatureCollection"===J.type)for(var ce=0;ce<J.features.length;++ce){var be=J.features[ce].geometry.type;if("Polygon"===be||"MultiPolygon"===be)return new zn(J,J.features[ce].geometry)}else if("Feature"===J.type){var Ae=J.geometry.type;if("Polygon"===Ae||"MultiPolygon"===Ae)return new zn(J,J.geometry)}else if("Polygon"===J.type||"MultiPolygon"===J.type)return new zn(J,J)}return z.error("'within' expression requires valid geojson object that contains polygon geometry type.")},zn.prototype.evaluate=function(S){if(null!=S.geometry()&&null!=S.canonicalID()){if("Point"===S.geometryType())return function(z,J){var ce=[1/0,1/0,-1/0,-1/0],be=[1/0,1/0,-1/0,-1/0],Ae=z.canonicalID();if("Polygon"===J.type){var Ne=Zn(J.coordinates,be,Ae),We=Rn(z.geometry(),ce,be,Ae);if(!Nr(ce,be))return!1;for(var st=0,vt=We;st<vt.length;st+=1)if(!un(vt[st],Ne))return!1}if("MultiPolygon"===J.type){var Tt=$n(J.coordinates,be,Ae),Wt=Rn(z.geometry(),ce,be,Ae);if(!Nr(ce,be))return!1;for(var on=0,Jt=Wt;on<Jt.length;on+=1)if(!er(Jt[on],Tt))return!1}return!0}(S,this.geometries);if("LineString"===S.geometryType())return function(z,J){var ce=[1/0,1/0,-1/0,-1/0],be=[1/0,1/0,-1/0,-1/0],Ae=z.canonicalID();if("Polygon"===J.type){var Ne=Zn(J.coordinates,be,Ae),We=Fn(z.geometry(),ce,be,Ae);if(!Nr(ce,be))return!1;for(var st=0,vt=We;st<vt.length;st+=1)if(!Tn(vt[st],Ne))return!1}if("MultiPolygon"===J.type){var Tt=$n(J.coordinates,be,Ae),Wt=Fn(z.geometry(),ce,be,Ae);if(!Nr(ce,be))return!1;for(var on=0,Jt=Wt;on<Jt.length;on+=1)if(!Qn(Jt[on],Tt))return!1}return!0}(S,this.geometries)}return!1},zn.prototype.eachChild=function(){},zn.prototype.outputDefined=function(){return!0},zn.prototype.serialize=function(){return["within",this.geojson]};var _r=function(S,z){this.type=z.type,this.name=S,this.boundExpression=z};_r.parse=function(S,z){if(2!==S.length||"string"!=typeof S[1])return z.error("'var' expression requires exactly one string literal argument.");var J=S[1];return z.scope.has(J)?new _r(J,z.scope.get(J)):z.error('Unknown variable "'+J+'". Make sure "'+J+'" has been bound in an enclosing "let" expression before using it.',1)},_r.prototype.evaluate=function(S){return this.boundExpression.evaluate(S)},_r.prototype.eachChild=function(){},_r.prototype.outputDefined=function(){return!1},_r.prototype.serialize=function(){return["var",this.name]};var Tr=function(S,z,J,ce,be){void 0===z&&(z=[]),void 0===ce&&(ce=new Vt),void 0===be&&(be=[]),this.registry=S,this.path=z,this.key=z.map(function(Ae){return"["+Ae+"]"}).join(""),this.scope=ce,this.errors=be,this.expectedType=J};function jr(S,z){for(var J,be=S.length-1,Ae=0,Ne=be,We=0;Ae<=Ne;)if((J=S[We=Math.floor((Ae+Ne)/2)])<=z){if(We===be||z<S[We+1])return We;Ae=We+1}else{if(!(J>z))throw new sr("Input is not a number.");Ne=We-1}return 0}Tr.prototype.parse=function(S,z,J,ce,be){return void 0===be&&(be={}),z?this.concat(z,J,ce)._parse(S,be):this._parse(S,be)},Tr.prototype._parse=function(S,z){function J(vt,Tt,Wt){return"assert"===Wt?new Gr(Tt,[vt]):"coerce"===Wt?new Jn(Tt,[vt]):vt}if(null!==S&&"string"!=typeof S&&"boolean"!=typeof S&&"number"!=typeof S||(S=["literal",S]),Array.isArray(S)){if(0===S.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ce=S[0];if("string"!=typeof ce)return this.error("Expression name must be a string, but found "+typeof ce+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var be=this.registry[ce];if(be){var Ae=be.parse(S,this);if(!Ae)return null;if(this.expectedType){var Ne=this.expectedType,We=Ae.type;if("string"!==Ne.kind&&"number"!==Ne.kind&&"boolean"!==Ne.kind&&"object"!==Ne.kind&&"array"!==Ne.kind||"value"!==We.kind)if("color"!==Ne.kind&&"formatted"!==Ne.kind&&"resolvedImage"!==Ne.kind||"value"!==We.kind&&"string"!==We.kind){if(this.checkSubtype(Ne,We))return null}else Ae=J(Ae,Ne,z.typeAnnotation||"coerce");else Ae=J(Ae,Ne,z.typeAnnotation||"assert")}if(!(Ae instanceof Xr)&&"resolvedImage"!==Ae.type.kind&&function vt(Tt){if(Tt instanceof _r)return vt(Tt.boundExpression);if(Tt instanceof cr&&"error"===Tt.name||Tt instanceof Qr||Tt instanceof zn)return!1;var Wt=Tt instanceof Jn||Tt instanceof Gr,on=!0;return Tt.eachChild(function(Jt){on=Wt?on&&vt(Jt):on&&Jt instanceof Xr}),!!on&&Yn(Tt)&&hr(Tt,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(Ae)){var st=new Fr;try{Ae=new Xr(Ae.type,Ae.evaluate(st))}catch(vt){return this.error(vt.message),null}}return Ae}return this.error('Unknown expression "'+ce+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===S?"'undefined' value invalid. Use null instead.":"object"==typeof S?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof S+" instead.")},Tr.prototype.concat=function(S,z,J){var ce="number"==typeof S?this.path.concat(S):this.path,be=J?this.scope.concat(J):this.scope;return new Tr(this.registry,ce,z||null,be,this.errors)},Tr.prototype.error=function(S){for(var z=[],J=arguments.length-1;J-- >0;)z[J]=arguments[J+1];var ce=""+this.key+z.map(function(be){return"["+be+"]"}).join("");this.errors.push(new xt(ce,S))},Tr.prototype.checkSubtype=function(S,z){var J=nn(S,z);return J&&this.error(J),J};var Er=function(S,z,J){this.type=S,this.input=z,this.labels=[],this.outputs=[];for(var ce=0,be=J;ce<be.length;ce+=1){var Ae=be[ce],We=Ae[1];this.labels.push(Ae[0]),this.outputs.push(We)}};function Yr(S,z,J){return S*(1-J)+z*J}Er.parse=function(S,z){if(S.length-1<4)return z.error("Expected at least 4 arguments, but found only "+(S.length-1)+".");if((S.length-1)%2!=0)return z.error("Expected an even number of arguments.");var J=z.parse(S[1],1,pt);if(!J)return null;var ce=[],be=null;z.expectedType&&"value"!==z.expectedType.kind&&(be=z.expectedType);for(var Ae=1;Ae<S.length;Ae+=2){var Ne=1===Ae?-1/0:S[Ae],We=S[Ae+1],st=Ae,vt=Ae+1;if("number"!=typeof Ne)return z.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',st);if(ce.length&&ce[ce.length-1][0]>=Ne)return z.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',st);var Tt=z.parse(We,vt,be);if(!Tt)return null;be=be||Tt.type,ce.push([Ne,Tt])}return new Er(be,J,ce)},Er.prototype.evaluate=function(S){var z=this.labels,J=this.outputs;if(1===z.length)return J[0].evaluate(S);var ce=this.input.evaluate(S);if(ce<=z[0])return J[0].evaluate(S);var be=z.length;return ce>=z[be-1]?J[be-1].evaluate(S):J[jr(z,ce)].evaluate(S)},Er.prototype.eachChild=function(S){S(this.input);for(var z=0,J=this.outputs;z<J.length;z+=1)S(J[z])},Er.prototype.outputDefined=function(){return this.outputs.every(function(S){return S.outputDefined()})},Er.prototype.serialize=function(){for(var S=["step",this.input.serialize()],z=0;z<this.labels.length;z++)z>0&&S.push(this.labels[z]),S.push(this.outputs[z].serialize());return S};var ei=Object.freeze({__proto__:null,number:Yr,color:function(S,z,J){return new rn(Yr(S.r,z.r,J),Yr(S.g,z.g,J),Yr(S.b,z.b,J),Yr(S.a,z.a,J))},array:function(S,z,J){return S.map(function(ce,be){return Yr(ce,z[be],J)})}}),xr=6/29,pi=3*xr*xr,Ui=Math.PI/180,$i=180/Math.PI;function Wr(S){return S>.008856451679035631?Math.pow(S,1/3):S/pi+4/29}function xi(S){return S>xr?S*S*S:pi*(S-4/29)}function ki(S){return 255*(S<=.0031308?12.92*S:1.055*Math.pow(S,1/2.4)-.055)}function oa(S){return(S/=255)<=.04045?S/12.92:Math.pow((S+.055)/1.055,2.4)}function hi(S){var z=oa(S.r),J=oa(S.g),ce=oa(S.b),be=Wr((.4124564*z+.3575761*J+.1804375*ce)/.95047),Ae=Wr((.2126729*z+.7151522*J+.072175*ce)/1);return{l:116*Ae-16,a:500*(be-Ae),b:200*(Ae-Wr((.0193339*z+.119192*J+.9503041*ce)/1.08883)),alpha:S.a}}function Xi(S){var z=(S.l+16)/116,J=isNaN(S.a)?z:z+S.a/500,ce=isNaN(S.b)?z:z-S.b/200;return z=1*xi(z),J=.95047*xi(J),ce=1.08883*xi(ce),new rn(ki(3.2404542*J-1.5371385*z-.4985314*ce),ki(-.969266*J+1.8760108*z+.041556*ce),ki(.0556434*J-.2040259*z+1.0572252*ce),S.alpha)}function Ea(S,z,J){var ce=z-S;return S+J*(ce>180||ce<-180?ce-360*Math.round(ce/360):ce)}var ha={forward:hi,reverse:Xi,interpolate:function(S,z,J){return{l:Yr(S.l,z.l,J),a:Yr(S.a,z.a,J),b:Yr(S.b,z.b,J),alpha:Yr(S.alpha,z.alpha,J)}}},Aa={forward:function(S){var z=hi(S),J=z.l,ce=z.a,be=z.b,Ae=Math.atan2(be,ce)*$i;return{h:Ae<0?Ae+360:Ae,c:Math.sqrt(ce*ce+be*be),l:J,alpha:S.a}},reverse:function(S){var z=S.h*Ui,J=S.c;return Xi({l:S.l,a:Math.cos(z)*J,b:Math.sin(z)*J,alpha:S.alpha})},interpolate:function(S,z,J){return{h:Ea(S.h,z.h,J),c:Yr(S.c,z.c,J),l:Yr(S.l,z.l,J),alpha:Yr(S.alpha,z.alpha,J)}}},qa=Object.freeze({__proto__:null,lab:ha,hcl:Aa}),da=function(S,z,J,ce,be){this.type=S,this.operator=z,this.interpolation=J,this.input=ce,this.labels=[],this.outputs=[];for(var Ae=0,Ne=be;Ae<Ne.length;Ae+=1){var We=Ne[Ae],vt=We[1];this.labels.push(We[0]),this.outputs.push(vt)}};function za(S,z,J,ce){var be=ce-J,Ae=S-J;return 0===be?0:1===z?Ae/be:(Math.pow(z,Ae)-1)/(Math.pow(z,be)-1)}da.interpolationFactor=function(S,z,J,ce){var be=0;if("exponential"===S.name)be=za(z,S.base,J,ce);else if("linear"===S.name)be=za(z,1,J,ce);else if("cubic-bezier"===S.name){var Ae=S.controlPoints;be=new a(Ae[0],Ae[1],Ae[2],Ae[3]).solve(za(z,1,J,ce))}return be},da.parse=function(S,z){var J=S[0],ce=S[1],be=S[2],Ae=S.slice(3);if(!Array.isArray(ce)||0===ce.length)return z.error("Expected an interpolation type expression.",1);if("linear"===ce[0])ce={name:"linear"};else if("exponential"===ce[0]){var Ne=ce[1];if("number"!=typeof Ne)return z.error("Exponential interpolation requires a numeric base.",1,1);ce={name:"exponential",base:Ne}}else{if("cubic-bezier"!==ce[0])return z.error("Unknown interpolation type "+String(ce[0]),1,0);var We=ce.slice(1);if(4!==We.length||We.some(function(Wn){return"number"!=typeof Wn||Wn<0||Wn>1}))return z.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ce={name:"cubic-bezier",controlPoints:We}}if(S.length-1<4)return z.error("Expected at least 4 arguments, but found only "+(S.length-1)+".");if((S.length-1)%2!=0)return z.error("Expected an even number of arguments.");if(!(be=z.parse(be,2,pt)))return null;var st=[],vt=null;"interpolate-hcl"===J||"interpolate-lab"===J?vt=Ct:z.expectedType&&"value"!==z.expectedType.kind&&(vt=z.expectedType);for(var Tt=0;Tt<Ae.length;Tt+=2){var Wt=Ae[Tt],on=Ae[Tt+1],Jt=Tt+3,xn=Tt+4;if("number"!=typeof Wt)return z.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Jt);if(st.length&&st[st.length-1][0]>=Wt)return z.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Jt);var Ln=z.parse(on,xn,vt);if(!Ln)return null;vt=vt||Ln.type,st.push([Wt,Ln])}return"number"===vt.kind||"color"===vt.kind||"array"===vt.kind&&"number"===vt.itemType.kind&&"number"==typeof vt.N?new da(vt,J,ce,be,st):z.error("Type "+Yt(vt)+" is not interpolatable.")},da.prototype.evaluate=function(S){var z=this.labels,J=this.outputs;if(1===z.length)return J[0].evaluate(S);var ce=this.input.evaluate(S);if(ce<=z[0])return J[0].evaluate(S);var be=z.length;if(ce>=z[be-1])return J[be-1].evaluate(S);var Ae=jr(z,ce),st=da.interpolationFactor(this.interpolation,ce,z[Ae],z[Ae+1]),vt=J[Ae].evaluate(S),Tt=J[Ae+1].evaluate(S);return"interpolate"===this.operator?ei[this.type.kind.toLowerCase()](vt,Tt,st):"interpolate-hcl"===this.operator?Aa.reverse(Aa.interpolate(Aa.forward(vt),Aa.forward(Tt),st)):ha.reverse(ha.interpolate(ha.forward(vt),ha.forward(Tt),st))},da.prototype.eachChild=function(S){S(this.input);for(var z=0,J=this.outputs;z<J.length;z+=1)S(J[z])},da.prototype.outputDefined=function(){return this.outputs.every(function(S){return S.outputDefined()})},da.prototype.serialize=function(){var S;S="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var z=[this.operator,S,this.input.serialize()],J=0;J<this.labels.length;J++)z.push(this.labels[J],this.outputs[J].serialize());return z};var rs=function(S,z){this.type=S,this.args=z};rs.parse=function(S,z){if(S.length<2)return z.error("Expectected at least one argument.");var J=null,ce=z.expectedType;ce&&"value"!==ce.kind&&(J=ce);for(var be=[],Ae=0,Ne=S.slice(1);Ae<Ne.length;Ae+=1){var st=z.parse(Ne[Ae],1+be.length,J,void 0,{typeAnnotation:"omit"});if(!st)return null;J=J||st.type,be.push(st)}var vt=ce&&be.some(function(Tt){return nn(ce,Tt.type)});return new rs(vt?Be:J,be)},rs.prototype.evaluate=function(S){for(var z,J=null,ce=0,be=0,Ae=this.args;be<Ae.length&&(ce++,(J=Ae[be].evaluate(S))&&J instanceof jn&&!J.available&&(z||(z=J.name),J=null,ce===this.args.length&&(J=z)),null===J);be+=1);return J},rs.prototype.eachChild=function(S){this.args.forEach(S)},rs.prototype.outputDefined=function(){return this.args.every(function(S){return S.outputDefined()})},rs.prototype.serialize=function(){var S=["coalesce"];return this.eachChild(function(z){S.push(z.serialize())}),S};var po=function(S,z){this.type=z.type,this.bindings=[].concat(S),this.result=z};po.prototype.evaluate=function(S){return this.result.evaluate(S)},po.prototype.eachChild=function(S){for(var z=0,J=this.bindings;z<J.length;z+=1)S(J[z][1]);S(this.result)},po.parse=function(S,z){if(S.length<4)return z.error("Expected at least 3 arguments, but found "+(S.length-1)+" instead.");for(var J=[],ce=1;ce<S.length-1;ce+=2){var be=S[ce];if("string"!=typeof be)return z.error("Expected string, but found "+typeof be+" instead.",ce);if(/[^a-zA-Z0-9_]/.test(be))return z.error("Variable names must contain only alphanumeric characters or '_'.",ce);var Ae=z.parse(S[ce+1],ce+1);if(!Ae)return null;J.push([be,Ae])}var Ne=z.parse(S[S.length-1],S.length-1,z.expectedType,J);return Ne?new po(J,Ne):null},po.prototype.outputDefined=function(){return this.result.outputDefined()},po.prototype.serialize=function(){for(var S=["let"],z=0,J=this.bindings;z<J.length;z+=1){var ce=J[z];S.push(ce[0],ce[1].serialize())}return S.push(this.result.serialize()),S};var Ji=function(S,z,J){this.type=S,this.index=z,this.input=J};Ji.parse=function(S,z){if(3!==S.length)return z.error("Expected 2 arguments, but found "+(S.length-1)+" instead.");var J=z.parse(S[1],1,pt),ce=z.parse(S[2],2,Nt(z.expectedType||Be));return J&&ce?new Ji(ce.type.itemType,J,ce):null},Ji.prototype.evaluate=function(S){var z=this.index.evaluate(S),J=this.input.evaluate(S);if(z<0)throw new sr("Array index out of bounds: "+z+" < 0.");if(z>=J.length)throw new sr("Array index out of bounds: "+z+" > "+(J.length-1)+".");if(z!==Math.floor(z))throw new sr("Array index must be an integer, but found "+z+" instead.");return J[z]},Ji.prototype.eachChild=function(S){S(this.index),S(this.input)},Ji.prototype.outputDefined=function(){return!1},Ji.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var ds=function(S,z){this.type=Xt,this.needle=S,this.haystack=z};ds.parse=function(S,z){if(3!==S.length)return z.error("Expected 2 arguments, but found "+(S.length-1)+" instead.");var J=z.parse(S[1],1,Be),ce=z.parse(S[2],2,Be);return J&&ce?In(J.type,[Xt,At,pt,$t,Be])?new ds(J,ce):z.error("Expected first argument to be of type boolean, string, number or null, but found "+Yt(J.type)+" instead"):null},ds.prototype.evaluate=function(S){var z=this.needle.evaluate(S),J=this.haystack.evaluate(S);if(!J)return!1;if(!Dn(z,["boolean","string","number","null"]))throw new sr("Expected first argument to be of type boolean, string, number or null, but found "+Yt(lr(z))+" instead.");if(!Dn(J,["string","array"]))throw new sr("Expected second argument to be of type array or string, but found "+Yt(lr(J))+" instead.");return J.indexOf(z)>=0},ds.prototype.eachChild=function(S){S(this.needle),S(this.haystack)},ds.prototype.outputDefined=function(){return!0},ds.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var is=function(S,z,J){this.type=pt,this.needle=S,this.haystack=z,this.fromIndex=J};is.parse=function(S,z){if(S.length<=2||S.length>=5)return z.error("Expected 3 or 4 arguments, but found "+(S.length-1)+" instead.");var J=z.parse(S[1],1,Be),ce=z.parse(S[2],2,Be);if(!J||!ce)return null;if(!In(J.type,[Xt,At,pt,$t,Be]))return z.error("Expected first argument to be of type boolean, string, number or null, but found "+Yt(J.type)+" instead");if(4===S.length){var be=z.parse(S[3],3,pt);return be?new is(J,ce,be):null}return new is(J,ce)},is.prototype.evaluate=function(S){var z=this.needle.evaluate(S),J=this.haystack.evaluate(S);if(!Dn(z,["boolean","string","number","null"]))throw new sr("Expected first argument to be of type boolean, string, number or null, but found "+Yt(lr(z))+" instead.");if(!Dn(J,["string","array"]))throw new sr("Expected second argument to be of type array or string, but found "+Yt(lr(J))+" instead.");if(this.fromIndex){var ce=this.fromIndex.evaluate(S);return J.indexOf(z,ce)}return J.indexOf(z)},is.prototype.eachChild=function(S){S(this.needle),S(this.haystack),this.fromIndex&&S(this.fromIndex)},is.prototype.outputDefined=function(){return!1},is.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var S=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),S]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var Bo=function(S,z,J,ce,be,Ae){this.inputType=S,this.type=z,this.input=J,this.cases=ce,this.outputs=be,this.otherwise=Ae};Bo.parse=function(S,z){if(S.length<5)return z.error("Expected at least 4 arguments, but found only "+(S.length-1)+".");if(S.length%2!=1)return z.error("Expected an even number of arguments.");var J,ce;z.expectedType&&"value"!==z.expectedType.kind&&(ce=z.expectedType);for(var be={},Ae=[],Ne=2;Ne<S.length-1;Ne+=2){var We=S[Ne],st=S[Ne+1];Array.isArray(We)||(We=[We]);var vt=z.concat(Ne);if(0===We.length)return vt.error("Expected at least one branch label.");for(var Tt=0,Wt=We;Tt<Wt.length;Tt+=1){var on=Wt[Tt];if("number"!=typeof on&&"string"!=typeof on)return vt.error("Branch labels must be numbers or strings.");if("number"==typeof on&&Math.abs(on)>Number.MAX_SAFE_INTEGER)return vt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof on&&Math.floor(on)!==on)return vt.error("Numeric branch labels must be integer values.");if(J){if(vt.checkSubtype(J,lr(on)))return null}else J=lr(on);if(void 0!==be[String(on)])return vt.error("Branch labels must be unique.");be[String(on)]=Ae.length}var Jt=z.parse(st,Ne,ce);if(!Jt)return null;ce=ce||Jt.type,Ae.push(Jt)}var xn=z.parse(S[1],1,Be);if(!xn)return null;var Ln=z.parse(S[S.length-1],S.length-1,ce);return Ln?"value"!==xn.type.kind&&z.concat(1).checkSubtype(J,xn.type)?null:new Bo(J,ce,xn,be,Ae,Ln):null},Bo.prototype.evaluate=function(S){var z=this.input.evaluate(S);return(lr(z)===this.inputType&&this.outputs[this.cases[z]]||this.otherwise).evaluate(S)},Bo.prototype.eachChild=function(S){S(this.input),this.outputs.forEach(S),S(this.otherwise)},Bo.prototype.outputDefined=function(){return this.outputs.every(function(S){return S.outputDefined()})&&this.otherwise.outputDefined()},Bo.prototype.serialize=function(){for(var S=this,z=["match",this.input.serialize()],J=[],ce={},be=0,Ae=Object.keys(this.cases).sort();be<Ae.length;be+=1){var Ne=Ae[be];void 0===(Wt=ce[this.cases[Ne]])?(ce[this.cases[Ne]]=J.length,J.push([this.cases[Ne],[Ne]])):J[Wt][1].push(Ne)}for(var We=function(Jt){return"number"===S.inputType.kind?Number(Jt):Jt},st=0,vt=J;st<vt.length;st+=1){var Tt=vt[st],Wt=Tt[0],on=Tt[1];z.push(1===on.length?We(on[0]):on.map(We)),z.push(this.outputs[outputIndex$1].serialize())}return z.push(this.otherwise.serialize()),z};var ro=function(S,z,J){this.type=S,this.branches=z,this.otherwise=J};ro.parse=function(S,z){if(S.length<4)return z.error("Expected at least 3 arguments, but found only "+(S.length-1)+".");if(S.length%2!=0)return z.error("Expected an odd number of arguments.");var J;z.expectedType&&"value"!==z.expectedType.kind&&(J=z.expectedType);for(var ce=[],be=1;be<S.length-1;be+=2){var Ae=z.parse(S[be],be,Xt);if(!Ae)return null;var Ne=z.parse(S[be+1],be+1,J);if(!Ne)return null;ce.push([Ae,Ne]),J=J||Ne.type}var We=z.parse(S[S.length-1],S.length-1,J);return We?new ro(J,ce,We):null},ro.prototype.evaluate=function(S){for(var z=0,J=this.branches;z<J.length;z+=1){var ce=J[z],Ae=ce[1];if(ce[0].evaluate(S))return Ae.evaluate(S)}return this.otherwise.evaluate(S)},ro.prototype.eachChild=function(S){for(var z=0,J=this.branches;z<J.length;z+=1){var ce=J[z],Ae=ce[1];S(ce[0]),S(Ae)}S(this.otherwise)},ro.prototype.outputDefined=function(){return this.branches.every(function(S){return S[1].outputDefined()})&&this.otherwise.outputDefined()},ro.prototype.serialize=function(){var S=["case"];return this.eachChild(function(z){S.push(z.serialize())}),S};var eo=function(S,z,J,ce){this.type=S,this.input=z,this.beginIndex=J,this.endIndex=ce};function fl(S,z){return"=="===S||"!="===S?"boolean"===z.kind||"string"===z.kind||"number"===z.kind||"null"===z.kind||"value"===z.kind:"string"===z.kind||"number"===z.kind||"value"===z.kind}function hl(S,z,J,ce){return 0===ce.compare(z,J)}function va(S,z,J){var ce="=="!==S&&"!="!==S;return function(){function be(Ae,Ne,We){this.type=Xt,this.lhs=Ae,this.rhs=Ne,this.collator=We,this.hasUntypedArgument="value"===Ae.type.kind||"value"===Ne.type.kind}return be.parse=function(Ae,Ne){if(3!==Ae.length&&4!==Ae.length)return Ne.error("Expected two or three arguments.");var We=Ae[0],st=Ne.parse(Ae[1],1,Be);if(!st)return null;if(!fl(We,st.type))return Ne.concat(1).error('"'+We+"\" comparisons are not supported for type '"+Yt(st.type)+"'.");var vt=Ne.parse(Ae[2],2,Be);if(!vt)return null;if(!fl(We,vt.type))return Ne.concat(2).error('"'+We+"\" comparisons are not supported for type '"+Yt(vt.type)+"'.");if(st.type.kind!==vt.type.kind&&"value"!==st.type.kind&&"value"!==vt.type.kind)return Ne.error("Cannot compare types '"+Yt(st.type)+"' and '"+Yt(vt.type)+"'.");ce&&("value"===st.type.kind&&"value"!==vt.type.kind?st=new Gr(vt.type,[st]):"value"!==st.type.kind&&"value"===vt.type.kind&&(vt=new Gr(st.type,[vt])));var Tt=null;if(4===Ae.length){if("string"!==st.type.kind&&"string"!==vt.type.kind&&"value"!==st.type.kind&&"value"!==vt.type.kind)return Ne.error("Cannot use collator to compare non-string types.");if(!(Tt=Ne.parse(Ae[3],3,tt)))return null}return new be(st,vt,Tt)},be.prototype.evaluate=function(Ae){var Ne=this.lhs.evaluate(Ae),We=this.rhs.evaluate(Ae);if(ce&&this.hasUntypedArgument){var st=lr(Ne),vt=lr(We);if(st.kind!==vt.kind||"string"!==st.kind&&"number"!==st.kind)throw new sr('Expected arguments for "'+S+'" to be (string, string) or (number, number), but found ('+st.kind+", "+vt.kind+") instead.")}if(this.collator&&!ce&&this.hasUntypedArgument){var Tt=lr(Ne),Wt=lr(We);if("string"!==Tt.kind||"string"!==Wt.kind)return z(Ae,Ne,We)}return this.collator?J(Ae,Ne,We,this.collator.evaluate(Ae)):z(Ae,Ne,We)},be.prototype.eachChild=function(Ae){Ae(this.lhs),Ae(this.rhs),this.collator&&Ae(this.collator)},be.prototype.outputDefined=function(){return!0},be.prototype.serialize=function(){var Ae=[S];return this.eachChild(function(Ne){Ae.push(Ne.serialize())}),Ae},be}()}eo.parse=function(S,z){if(S.length<=2||S.length>=5)return z.error("Expected 3 or 4 arguments, but found "+(S.length-1)+" instead.");var J=z.parse(S[1],1,Be),ce=z.parse(S[2],2,pt);if(!J||!ce)return null;if(!In(J.type,[Nt(Be),At,Be]))return z.error("Expected first argument to be of type array or string, but found "+Yt(J.type)+" instead");if(4===S.length){var be=z.parse(S[3],3,pt);return be?new eo(J.type,J,ce,be):null}return new eo(J.type,J,ce)},eo.prototype.evaluate=function(S){var z=this.input.evaluate(S),J=this.beginIndex.evaluate(S);if(!Dn(z,["string","array"]))throw new sr("Expected first argument to be of type array or string, but found "+Yt(lr(z))+" instead.");if(this.endIndex){var ce=this.endIndex.evaluate(S);return z.slice(J,ce)}return z.slice(J)},eo.prototype.eachChild=function(S){S(this.input),S(this.beginIndex),this.endIndex&&S(this.endIndex)},eo.prototype.outputDefined=function(){return!1},eo.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var S=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),S]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Xa=va("==",function(S,z,J){return z===J},hl),Ml=va("!=",function(S,z,J){return z!==J},function(S,z,J,ce){return!hl(0,z,J,ce)}),cu=va("<",function(S,z,J){return z<J},function(S,z,J,ce){return ce.compare(z,J)<0}),Il=va(">",function(S,z,J){return z>J},function(S,z,J,ce){return ce.compare(z,J)>0}),Pl=va("<=",function(S,z,J){return z<=J},function(S,z,J,ce){return ce.compare(z,J)<=0}),kl=va(">=",function(S,z,J){return z>=J},function(S,z,J,ce){return ce.compare(z,J)>=0}),Es=function(S,z,J,ce,be){this.type=At,this.number=S,this.locale=z,this.currency=J,this.minFractionDigits=ce,this.maxFractionDigits=be};Es.parse=function(S,z){if(3!==S.length)return z.error("Expected two arguments.");var J=z.parse(S[1],1,pt);if(!J)return null;var ce=S[2];if("object"!=typeof ce||Array.isArray(ce))return z.error("NumberFormat options argument must be an object.");var be=null;if(ce.locale&&!(be=z.parse(ce.locale,1,At)))return null;var Ae=null;if(ce.currency&&!(Ae=z.parse(ce.currency,1,At)))return null;var Ne=null;if(ce["min-fraction-digits"]&&!(Ne=z.parse(ce["min-fraction-digits"],1,pt)))return null;var We=null;return ce["max-fraction-digits"]&&!(We=z.parse(ce["max-fraction-digits"],1,pt))?null:new Es(J,be,Ae,Ne,We)},Es.prototype.evaluate=function(S){return new Intl.NumberFormat(this.locale?this.locale.evaluate(S):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(S):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(S):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(S):void 0}).format(this.number.evaluate(S))},Es.prototype.eachChild=function(S){S(this.number),this.locale&&S(this.locale),this.currency&&S(this.currency),this.minFractionDigits&&S(this.minFractionDigits),this.maxFractionDigits&&S(this.maxFractionDigits)},Es.prototype.outputDefined=function(){return!1},Es.prototype.serialize=function(){var S={};return this.locale&&(S.locale=this.locale.serialize()),this.currency&&(S.currency=this.currency.serialize()),this.minFractionDigits&&(S["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(S["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),S]};var as=function(S){this.type=pt,this.input=S};as.parse=function(S,z){if(2!==S.length)return z.error("Expected 1 argument, but found "+(S.length-1)+" instead.");var J=z.parse(S[1],1);return J?"array"!==J.type.kind&&"string"!==J.type.kind&&"value"!==J.type.kind?z.error("Expected argument of type string or array, but found "+Yt(J.type)+" instead."):new as(J):null},as.prototype.evaluate=function(S){var z=this.input.evaluate(S);if("string"==typeof z||Array.isArray(z))return z.length;throw new sr("Expected value to be of type string or array, but found "+Yt(lr(z))+" instead.")},as.prototype.eachChild=function(S){S(this.input)},as.prototype.outputDefined=function(){return!1},as.prototype.serialize=function(){var S=["length"];return this.eachChild(function(z){S.push(z.serialize())}),S};var bo={"==":Xa,"!=":Ml,">":Il,"<":cu,">=":kl,"<=":Pl,array:Gr,at:Ji,boolean:Gr,case:ro,coalesce:rs,collator:Qr,format:Lr,image:Jr,in:ds,"index-of":is,interpolate:da,"interpolate-hcl":da,"interpolate-lab":da,length:as,let:po,literal:Xr,match:Bo,number:Gr,"number-format":Es,object:Gr,slice:eo,step:Er,string:Gr,"to-boolean":Jn,"to-color":Jn,"to-number":Jn,"to-string":Jn,var:_r,within:zn};function nl(S,z){var J=z[0],ce=z[1],be=z[2],Ae=z[3];J=J.evaluate(S),ce=ce.evaluate(S),be=be.evaluate(S);var Ne=Ae?Ae.evaluate(S):1,We=Kn(J,ce,be,Ne);if(We)throw new sr(We);return new rn(J/255*Ne,ce/255*Ne,be/255*Ne,Ne)}function ts(S,z){return S in z}function os(S,z){var J=z[S];return void 0===J?null:J}function _s(S){return{type:S}}function dl(S){return{result:"success",value:S}}function ss(S){return{result:"error",value:S}}function Jo(S){return"data-driven"===S["property-type"]||"cross-faded-data-driven"===S["property-type"]}function Wl(S){return!!S.expression&&S.expression.parameters.indexOf("zoom")>-1}function Ys(S){return!!S.expression&&S.expression.interpolated}function Va(S){return S instanceof Number?"number":S instanceof String?"string":S instanceof Boolean?"boolean":Array.isArray(S)?"array":null===S?"null":typeof S}function Ye(S){return"object"==typeof S&&null!==S&&!Array.isArray(S)}function Ke(S){return S}function ut(S,z,J){return void 0!==S?S:void 0!==z?z:void 0!==J?J:void 0}function gt(S,z,J,ce,be){return ut(typeof J===be?ce[J]:void 0,S.default,z.default)}function Mt(S,z,J){if("number"!==Va(J))return ut(S.default,z.default);var ce=S.stops.length;if(1===ce||J<=S.stops[0][0])return S.stops[0][1];if(J>=S.stops[ce-1][0])return S.stops[ce-1][1];var be=jr(S.stops.map(function(Ae){return Ae[0]}),J);return S.stops[be][1]}function wt(S,z,J){var ce=void 0!==S.base?S.base:1;if("number"!==Va(J))return ut(S.default,z.default);var be=S.stops.length;if(1===be||J<=S.stops[0][0])return S.stops[0][1];if(J>=S.stops[be-1][0])return S.stops[be-1][1];var on,Jt,Ln,Wn,Ae=jr(S.stops.map(function(Wt){return Wt[0]}),J),Ne=(on=ce,Wn=J-(Jt=S.stops[Ae][0]),0==(Ln=S.stops[Ae+1][0]-Jt)?0:1===on?Wn/Ln:(Math.pow(on,Wn)-1)/(Math.pow(on,Ln)-1)),We=S.stops[Ae][1],st=S.stops[Ae+1][1],vt=ei[z.type]||Ke;if(S.colorSpace&&"rgb"!==S.colorSpace){var Tt=qa[S.colorSpace];vt=function(Wt,on){return Tt.reverse(Tt.interpolate(Tt.forward(Wt),Tt.forward(on),Ne))}}return"function"==typeof We.evaluate?{evaluate:function(){for(var Wt=[],on=arguments.length;on--;)Wt[on]=arguments[on];var Jt=We.evaluate.apply(void 0,Wt),xn=st.evaluate.apply(void 0,Wt);if(void 0!==Jt&&void 0!==xn)return vt(Jt,xn,Ne)}}:vt(We,st,Ne)}function zt(S,z,J){return"color"===z.type?J=rn.parse(J):"formatted"===z.type?J=Pn.fromString(J.toString()):"resolvedImage"===z.type?J=jn.fromString(J.toString()):Va(J)===z.type||"enum"===z.type&&z.values[J]||(J=void 0),ut(J,S.default,z.default)}cr.register(bo,{error:[{kind:"error"},[At],function(S,z){throw new sr(z[0].evaluate(S))}],typeof:[At,[Be],function(S,z){return Yt(lr(z[0].evaluate(S)))}],"to-rgba":[Nt(pt,4),[Ct],function(S,z){return z[0].evaluate(S).toArray()}],rgb:[Ct,[pt,pt,pt],nl],rgba:[Ct,[pt,pt,pt,pt],nl],has:{type:Xt,overloads:[[[At],function(S,z){return ts(z[0].evaluate(S),S.properties())}],[[At,Pt],function(S,z){var ce=z[1];return ts(z[0].evaluate(S),ce.evaluate(S))}]]},get:{type:Be,overloads:[[[At],function(S,z){return os(z[0].evaluate(S),S.properties())}],[[At,Pt],function(S,z){var ce=z[1];return os(z[0].evaluate(S),ce.evaluate(S))}]]},"feature-state":[Be,[At],function(S,z){return os(z[0].evaluate(S),S.featureState||{})}],properties:[Pt,[],function(S){return S.properties()}],"geometry-type":[At,[],function(S){return S.geometryType()}],id:[Be,[],function(S){return S.id()}],zoom:[pt,[],function(S){return S.globals.zoom}],"heatmap-density":[pt,[],function(S){return S.globals.heatmapDensity||0}],"line-progress":[pt,[],function(S){return S.globals.lineProgress||0}],accumulated:[Be,[],function(S){return void 0===S.globals.accumulated?null:S.globals.accumulated}],"+":[pt,_s(pt),function(S,z){for(var J=0,ce=0,be=z;ce<be.length;ce+=1)J+=be[ce].evaluate(S);return J}],"*":[pt,_s(pt),function(S,z){for(var J=1,ce=0,be=z;ce<be.length;ce+=1)J*=be[ce].evaluate(S);return J}],"-":{type:pt,overloads:[[[pt,pt],function(S,z){var ce=z[1];return z[0].evaluate(S)-ce.evaluate(S)}],[[pt],function(S,z){return-z[0].evaluate(S)}]]},"/":[pt,[pt,pt],function(S,z){var ce=z[1];return z[0].evaluate(S)/ce.evaluate(S)}],"%":[pt,[pt,pt],function(S,z){var ce=z[1];return z[0].evaluate(S)%ce.evaluate(S)}],ln2:[pt,[],function(){return Math.LN2}],pi:[pt,[],function(){return Math.PI}],e:[pt,[],function(){return Math.E}],"^":[pt,[pt,pt],function(S,z){var ce=z[1];return Math.pow(z[0].evaluate(S),ce.evaluate(S))}],sqrt:[pt,[pt],function(S,z){return Math.sqrt(z[0].evaluate(S))}],log10:[pt,[pt],function(S,z){return Math.log(z[0].evaluate(S))/Math.LN10}],ln:[pt,[pt],function(S,z){return Math.log(z[0].evaluate(S))}],log2:[pt,[pt],function(S,z){return Math.log(z[0].evaluate(S))/Math.LN2}],sin:[pt,[pt],function(S,z){return Math.sin(z[0].evaluate(S))}],cos:[pt,[pt],function(S,z){return Math.cos(z[0].evaluate(S))}],tan:[pt,[pt],function(S,z){return Math.tan(z[0].evaluate(S))}],asin:[pt,[pt],function(S,z){return Math.asin(z[0].evaluate(S))}],acos:[pt,[pt],function(S,z){return Math.acos(z[0].evaluate(S))}],atan:[pt,[pt],function(S,z){return Math.atan(z[0].evaluate(S))}],min:[pt,_s(pt),function(S,z){return Math.min.apply(Math,z.map(function(J){return J.evaluate(S)}))}],max:[pt,_s(pt),function(S,z){return Math.max.apply(Math,z.map(function(J){return J.evaluate(S)}))}],abs:[pt,[pt],function(S,z){return Math.abs(z[0].evaluate(S))}],round:[pt,[pt],function(S,z){var J=z[0].evaluate(S);return J<0?-Math.round(-J):Math.round(J)}],floor:[pt,[pt],function(S,z){return Math.floor(z[0].evaluate(S))}],ceil:[pt,[pt],function(S,z){return Math.ceil(z[0].evaluate(S))}],"filter-==":[Xt,[At,Be],function(S,z){var J=z[0],ce=z[1];return S.properties()[J.value]===ce.value}],"filter-id-==":[Xt,[Be],function(S,z){var J=z[0];return S.id()===J.value}],"filter-type-==":[Xt,[At],function(S,z){var J=z[0];return S.geometryType()===J.value}],"filter-<":[Xt,[At,Be],function(S,z){var J=z[0],ce=z[1],be=S.properties()[J.value],Ae=ce.value;return typeof be==typeof Ae&&be<Ae}],"filter-id-<":[Xt,[Be],function(S,z){var J=z[0],ce=S.id(),be=J.value;return typeof ce==typeof be&&ce<be}],"filter->":[Xt,[At,Be],function(S,z){var J=z[0],ce=z[1],be=S.properties()[J.value],Ae=ce.value;return typeof be==typeof Ae&&be>Ae}],"filter-id->":[Xt,[Be],function(S,z){var J=z[0],ce=S.id(),be=J.value;return typeof ce==typeof be&&ce>be}],"filter-<=":[Xt,[At,Be],function(S,z){var J=z[0],ce=z[1],be=S.properties()[J.value],Ae=ce.value;return typeof be==typeof Ae&&be<=Ae}],"filter-id-<=":[Xt,[Be],function(S,z){var J=z[0],ce=S.id(),be=J.value;return typeof ce==typeof be&&ce<=be}],"filter->=":[Xt,[At,Be],function(S,z){var J=z[0],ce=z[1],be=S.properties()[J.value],Ae=ce.value;return typeof be==typeof Ae&&be>=Ae}],"filter-id->=":[Xt,[Be],function(S,z){var J=z[0],ce=S.id(),be=J.value;return typeof ce==typeof be&&ce>=be}],"filter-has":[Xt,[Be],function(S,z){return z[0].value in S.properties()}],"filter-has-id":[Xt,[],function(S){return null!==S.id()&&void 0!==S.id()}],"filter-type-in":[Xt,[Nt(At)],function(S,z){return z[0].value.indexOf(S.geometryType())>=0}],"filter-id-in":[Xt,[Nt(Be)],function(S,z){return z[0].value.indexOf(S.id())>=0}],"filter-in-small":[Xt,[At,Nt(Be)],function(S,z){var J=z[0];return z[1].value.indexOf(S.properties()[J.value])>=0}],"filter-in-large":[Xt,[At,Nt(Be)],function(S,z){var J=z[0],ce=z[1];return function(be,Ae,Ne,We){for(;Ne<=We;){var st=Ne+We>>1;if(Ae[st]===be)return!0;Ae[st]>be?We=st-1:Ne=st+1}return!1}(S.properties()[J.value],ce.value,0,ce.value.length-1)}],all:{type:Xt,overloads:[[[Xt,Xt],function(S,z){var ce=z[1];return z[0].evaluate(S)&&ce.evaluate(S)}],[_s(Xt),function(S,z){for(var J=0,ce=z;J<ce.length;J+=1)if(!ce[J].evaluate(S))return!1;return!0}]]},any:{type:Xt,overloads:[[[Xt,Xt],function(S,z){var ce=z[1];return z[0].evaluate(S)||ce.evaluate(S)}],[_s(Xt),function(S,z){for(var J=0,ce=z;J<ce.length;J+=1)if(ce[J].evaluate(S))return!0;return!1}]]},"!":[Xt,[Xt],function(S,z){return!z[0].evaluate(S)}],"is-supported-script":[Xt,[At],function(S,z){var ce=S.globals&&S.globals.isSupportedScript;return!ce||ce(z[0].evaluate(S))}],upcase:[At,[At],function(S,z){return z[0].evaluate(S).toUpperCase()}],downcase:[At,[At],function(S,z){return z[0].evaluate(S).toLowerCase()}],concat:[At,_s(Be),function(S,z){return z.map(function(J){return kr(J.evaluate(S))}).join("")}],"resolved-locale":[At,[tt],function(S,z){return z[0].evaluate(S).resolvedLocale()}]});var cn=function(S,z){var J;this.expression=S,this._warningHistory={},this._evaluator=new Fr,this._defaultValue=z?"color"===(J=z).type&&Ye(J.default)?new rn(0,0,0,0):"color"===J.type?rn.parse(J.default)||null:void 0===J.default?null:J.default:null,this._enumValues=z&&"enum"===z.type?z.values:null};function hn(S){return Array.isArray(S)&&S.length>0&&"string"==typeof S[0]&&S[0]in bo}function ln(S,z){var be,Ae,J=new Tr(bo,[],z?(Ae={color:Ct,string:At,number:pt,enum:At,boolean:Xt,formatted:dt,resolvedImage:Dt},"array"===(be=z).type?Nt(Ae[be.value]||Be,be.length):Ae[be.type]):void 0),ce=J.parse(S,void 0,void 0,void 0,z&&"string"===z.type?{typeAnnotation:"coerce"}:void 0);return ce?dl(new cn(ce,z)):ss(J.errors)}cn.prototype.evaluateWithoutErrorHandling=function(S,z,J,ce,be,Ae){return this._evaluator.globals=S,this._evaluator.feature=z,this._evaluator.featureState=J,this._evaluator.canonical=ce,this._evaluator.availableImages=be||null,this._evaluator.formattedSection=Ae,this.expression.evaluate(this._evaluator)},cn.prototype.evaluate=function(S,z,J,ce,be,Ae){this._evaluator.globals=S,this._evaluator.feature=z||null,this._evaluator.featureState=J||null,this._evaluator.canonical=ce,this._evaluator.availableImages=be||null,this._evaluator.formattedSection=Ae||null;try{var Ne=this.expression.evaluate(this._evaluator);if(null==Ne||"number"==typeof Ne&&Ne!=Ne)return this._defaultValue;if(this._enumValues&&!(Ne in this._enumValues))throw new sr("Expected value to be one of "+Object.keys(this._enumValues).map(function(We){return JSON.stringify(We)}).join(", ")+", but found "+JSON.stringify(Ne)+" instead.");return Ne}catch(We){return this._warningHistory[We.message]||(this._warningHistory[We.message]=!0,"undefined"!=typeof console&&console.warn(We.message)),this._defaultValue}};var bn=function(S,z){this.kind=S,this._styleExpression=z,this.isStateDependent="constant"!==S&&!nr(z.expression)};bn.prototype.evaluateWithoutErrorHandling=function(S,z,J,ce,be,Ae){return this._styleExpression.evaluateWithoutErrorHandling(S,z,J,ce,be,Ae)},bn.prototype.evaluate=function(S,z,J,ce,be,Ae){return this._styleExpression.evaluate(S,z,J,ce,be,Ae)};var En=function(S,z,J,ce){this.kind=S,this.zoomStops=J,this._styleExpression=z,this.isStateDependent="camera"!==S&&!nr(z.expression),this.interpolationType=ce};function On(S,z){if("error"===(S=ln(S,z)).result)return S;var J=S.value.expression,ce=Yn(J);if(!ce&&!Jo(z))return ss([new xt("","data expressions not supported")]);var be=hr(J,["zoom"]);if(!be&&!Wl(z))return ss([new xt("","zoom expressions not supported")]);var Ae=function We(st){var vt=null;if(st instanceof po)vt=We(st.result);else if(st instanceof rs)for(var Tt=0,Wt=st.args;Tt<Wt.length&&!(vt=We(Wt[Tt]));Tt+=1);else(st instanceof Er||st instanceof da)&&st.input instanceof cr&&"zoom"===st.input.name&&(vt=st);return vt instanceof xt||st.eachChild(function(Jt){var xn=We(Jt);xn instanceof xt?vt=xn:!vt&&xn?vt=new xt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):vt&&xn&&vt!==xn&&(vt=new xt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),vt}(J);return Ae||be?Ae instanceof xt?ss([Ae]):Ae instanceof da&&!Ys(z)?ss([new xt("",'"interpolate" expressions cannot be used with this property')]):dl(Ae?new En(ce?"camera":"composite",S.value,Ae.labels,Ae instanceof da?Ae.interpolation:void 0):new bn(ce?"constant":"source",S.value)):ss([new xt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}En.prototype.evaluateWithoutErrorHandling=function(S,z,J,ce,be,Ae){return this._styleExpression.evaluateWithoutErrorHandling(S,z,J,ce,be,Ae)},En.prototype.evaluate=function(S,z,J,ce,be,Ae){return this._styleExpression.evaluate(S,z,J,ce,be,Ae)},En.prototype.interpolationFactor=function(S,z,J){return this.interpolationType?da.interpolationFactor(this.interpolationType,S,z,J):0};var Nn=function(S,z){this._parameters=S,this._specification=z,ot(this,function J(ce,be){var Ae,Ne,We,st="color"===be.type,vt=ce.stops&&"object"==typeof ce.stops[0][0],Wt=vt||!(vt||void 0!==ce.property),on=ce.type||(Ys(be)?"exponential":"interval");if(st&&((ce=ot({},ce)).stops&&(ce.stops=ce.stops.map(function(Oi){return[Oi[0],rn.parse(Oi[1])]})),ce.default=rn.parse(ce.default?ce.default:be.default)),ce.colorSpace&&"rgb"!==ce.colorSpace&&!qa[ce.colorSpace])throw new Error("Unknown color space: "+ce.colorSpace);if("exponential"===on)Ae=wt;else if("interval"===on)Ae=Mt;else if("categorical"===on){Ae=gt,Ne=Object.create(null);for(var Jt=0,xn=ce.stops;Jt<xn.length;Jt+=1){var Ln=xn[Jt];Ne[Ln[0]]=Ln[1]}We=typeof ce.stops[0][0]}else{if("identity"!==on)throw new Error('Unknown function type "'+on+'"');Ae=zt}if(vt){for(var Wn={},Gn=[],ir=0;ir<ce.stops.length;ir++){var or=ce.stops[ir],dr=or[0].zoom;void 0===Wn[dr]&&(Wn[dr]={zoom:dr,type:ce.type,property:ce.property,default:ce.default,stops:[]},Gn.push(dr)),Wn[dr].stops.push([or[0].value,or[1]])}for(var Rr=[],qr=0,fi=Gn;qr<fi.length;qr+=1){var si=fi[qr];Rr.push([Wn[si].zoom,J(Wn[si],be)])}var _i={name:"linear"};return{kind:"composite",interpolationType:_i,interpolationFactor:da.interpolationFactor.bind(void 0,_i),zoomStops:Rr.map(function(Oi){return Oi[0]}),evaluate:function(Oi,Ci){var Hi=Oi.zoom;return wt({stops:Rr,base:ce.base},be,Hi).evaluate(Hi,Ci)}}}if(Wt){var Ri="exponential"===on?{name:"exponential",base:void 0!==ce.base?ce.base:1}:null;return{kind:"camera",interpolationType:Ri,interpolationFactor:da.interpolationFactor.bind(void 0,Ri),zoomStops:ce.stops.map(function(Oi){return Oi[0]}),evaluate:function(Oi){return Ae(ce,be,Oi.zoom,Ne,We)}}}return{kind:"source",evaluate:function(Oi,Ci){var Hi=Ci&&Ci.properties?Ci.properties[ce.property]:void 0;return void 0===Hi?ut(ce.default,be.default):Ae(ce,be,Hi,Ne,We)}}}(this._parameters,this._specification))};function Xn(S){var z=S.key,J=S.value,ce=S.valueSpec||{},be=S.objectElementValidators||{},Ae=S.style,Ne=S.styleSpec,We=[],st=Va(J);if("object"!==st)return[new Ge(z,J,"object expected, "+st+" found")];for(var vt in J){var Tt=vt.split(".")[0],Wt=ce[Tt]||ce["*"],on=void 0;if(be[Tt])on=be[Tt];else if(ce[Tt])on=_n;else if(be["*"])on=be["*"];else{if(!ce["*"]){We.push(new Ge(z,J[vt],'unknown property "'+vt+'"'));continue}on=_n}We=We.concat(on({key:(z&&z+".")+vt,value:J[vt],valueSpec:Wt,style:Ae,styleSpec:Ne,object:J,objectKey:vt},J))}for(var Jt in ce)be[Jt]||ce[Jt].required&&void 0===ce[Jt].default&&void 0===J[Jt]&&We.push(new Ge(z,J,'missing required property "'+Jt+'"'));return We}function Mr(S){var z=S.value,J=S.valueSpec,ce=S.style,be=S.styleSpec,Ae=S.key,Ne=S.arrayElementValidator||_n;if("array"!==Va(z))return[new Ge(Ae,z,"array expected, "+Va(z)+" found")];if(J.length&&z.length!==J.length)return[new Ge(Ae,z,"array length "+J.length+" expected, length "+z.length+" found")];if(J["min-length"]&&z.length<J["min-length"])return[new Ge(Ae,z,"array length at least "+J["min-length"]+" expected, length "+z.length+" found")];var We={type:J.value,values:J.values};be.$version<7&&(We.function=J.function),"object"===Va(J.value)&&(We=J.value);for(var st=[],vt=0;vt<z.length;vt++)st=st.concat(Ne({array:z,arrayIndex:vt,value:z[vt],valueSpec:We,style:ce,styleSpec:be,key:Ae+"["+vt+"]"}));return st}function Or(S){var z=S.key,J=S.value,ce=S.valueSpec,be=Va(J);return"number"===be&&J!=J&&(be="NaN"),"number"!==be?[new Ge(z,J,"number expected, "+be+" found")]:"minimum"in ce&&J<ce.minimum?[new Ge(z,J,J+" is less than the minimum value "+ce.minimum)]:"maximum"in ce&&J>ce.maximum?[new Ge(z,J,J+" is greater than the maximum value "+ce.maximum)]:[]}function ii(S){var z,J,ce,be=S.valueSpec,Ae=it(S.value.type),Ne={},We="categorical"!==Ae&&void 0===S.value.property,st=!We,vt="array"===Va(S.value.stops)&&"array"===Va(S.value.stops[0])&&"object"===Va(S.value.stops[0][0]),Tt=Xn({key:S.key,value:S.value,valueSpec:S.styleSpec.function,style:S.style,styleSpec:S.styleSpec,objectElementValidators:{stops:function(Jt){if("identity"===Ae)return[new Ge(Jt.key,Jt.value,'identity function may not have a "stops" property')];var xn=[],Ln=Jt.value;return xn=xn.concat(Mr({key:Jt.key,value:Ln,valueSpec:Jt.valueSpec,style:Jt.style,styleSpec:Jt.styleSpec,arrayElementValidator:Wt})),"array"===Va(Ln)&&0===Ln.length&&xn.push(new Ge(Jt.key,Ln,"array must have at least one stop")),xn},default:function(Jt){return _n({key:Jt.key,value:Jt.value,valueSpec:be,style:Jt.style,styleSpec:Jt.styleSpec})}}});return"identity"===Ae&&We&&Tt.push(new Ge(S.key,S.value,'missing required property "property"')),"identity"===Ae||S.value.stops||Tt.push(new Ge(S.key,S.value,'missing required property "stops"')),"exponential"===Ae&&S.valueSpec.expression&&!Ys(S.valueSpec)&&Tt.push(new Ge(S.key,S.value,"exponential functions not supported")),S.styleSpec.$version>=8&&(st&&!Jo(S.valueSpec)?Tt.push(new Ge(S.key,S.value,"property functions not supported")):We&&!Wl(S.valueSpec)&&Tt.push(new Ge(S.key,S.value,"zoom functions not supported"))),"categorical"!==Ae&&!vt||void 0!==S.value.property||Tt.push(new Ge(S.key,S.value,'"property" property is required')),Tt;function Wt(Jt){var xn=[],Ln=Jt.value,Wn=Jt.key;if("array"!==Va(Ln))return[new Ge(Wn,Ln,"array expected, "+Va(Ln)+" found")];if(2!==Ln.length)return[new Ge(Wn,Ln,"array length 2 expected, length "+Ln.length+" found")];if(vt){if("object"!==Va(Ln[0]))return[new Ge(Wn,Ln,"object expected, "+Va(Ln[0])+" found")];if(void 0===Ln[0].zoom)return[new Ge(Wn,Ln,"object stop key must have zoom")];if(void 0===Ln[0].value)return[new Ge(Wn,Ln,"object stop key must have value")];if(ce&&ce>it(Ln[0].zoom))return[new Ge(Wn,Ln[0].zoom,"stop zoom values must appear in ascending order")];it(Ln[0].zoom)!==ce&&(ce=it(Ln[0].zoom),J=void 0,Ne={}),xn=xn.concat(Xn({key:Wn+"[0]",value:Ln[0],valueSpec:{zoom:{}},style:Jt.style,styleSpec:Jt.styleSpec,objectElementValidators:{zoom:Or,value:on}}))}else xn=xn.concat(on({key:Wn+"[0]",value:Ln[0],valueSpec:{},style:Jt.style,styleSpec:Jt.styleSpec},Ln));return hn(mt(Ln[1]))?xn.concat([new Ge(Wn+"[1]",Ln[1],"expressions are not allowed in function stops.")]):xn.concat(_n({key:Wn+"[1]",value:Ln[1],valueSpec:be,style:Jt.style,styleSpec:Jt.styleSpec}))}function on(Jt,xn){var Ln=Va(Jt.value),Wn=it(Jt.value),Gn=null!==Jt.value?Jt.value:xn;if(z){if(Ln!==z)return[new Ge(Jt.key,Gn,Ln+" stop domain type must match previous stop domain type "+z)]}else z=Ln;if("number"!==Ln&&"string"!==Ln&&"boolean"!==Ln)return[new Ge(Jt.key,Gn,"stop domain value must be a number, string, or boolean")];if("number"!==Ln&&"categorical"!==Ae){var ir="number expected, "+Ln+" found";return Jo(be)&&void 0===Ae&&(ir+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Ge(Jt.key,Gn,ir)]}return"categorical"!==Ae||"number"!==Ln||isFinite(Wn)&&Math.floor(Wn)===Wn?"categorical"!==Ae&&"number"===Ln&&void 0!==J&&Wn<J?[new Ge(Jt.key,Gn,"stop domain values must appear in ascending order")]:(J=Wn,"categorical"===Ae&&Wn in Ne?[new Ge(Jt.key,Gn,"stop domain values must be unique")]:(Ne[Wn]=!0,[])):[new Ge(Jt.key,Gn,"integer expected, found "+Wn)]}}function ci(S){var z=("property"===S.expressionContext?On:ln)(mt(S.value),S.valueSpec);if("error"===z.result)return z.value.map(function(ce){return new Ge(""+S.key+ce.key,S.value,ce.message)});var J=z.value.expression||z.value._styleExpression.expression;if("property"===S.expressionContext&&"text-font"===S.propertyKey&&!J.outputDefined())return[new Ge(S.key,S.value,'Invalid data expression for "'+S.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===S.expressionContext&&"layout"===S.propertyType&&!nr(J))return[new Ge(S.key,S.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===S.expressionContext&&!nr(J))return[new Ge(S.key,S.value,'"feature-state" data expressions are not supported with filters.')];if(S.expressionContext&&0===S.expressionContext.indexOf("cluster")){if(!hr(J,["zoom","feature-state"]))return[new Ge(S.key,S.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===S.expressionContext&&!Yn(J))return[new Ge(S.key,S.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function vi(S){var z=S.key,J=S.value,ce=S.valueSpec,be=[];return Array.isArray(ce.values)?-1===ce.values.indexOf(it(J))&&be.push(new Ge(z,J,"expected one of ["+ce.values.join(", ")+"], "+JSON.stringify(J)+" found")):-1===Object.keys(ce.values).indexOf(it(J))&&be.push(new Ge(z,J,"expected one of ["+Object.keys(ce.values).join(", ")+"], "+JSON.stringify(J)+" found")),be}function ai(S){if(!0===S||!1===S)return!0;if(!Array.isArray(S)||0===S.length)return!1;switch(S[0]){case"has":return S.length>=2&&"$id"!==S[1]&&"$type"!==S[1];case"in":return S.length>=3&&("string"!=typeof S[1]||Array.isArray(S[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==S.length||Array.isArray(S[1])||Array.isArray(S[2]);case"any":case"all":for(var z=0,J=S.slice(1);z<J.length;z+=1){var ce=J[z];if(!ai(ce)&&"boolean"!=typeof ce)return!1}return!0;default:return!0}}Nn.deserialize=function(S){return new Nn(S._parameters,S._specification)},Nn.serialize=function(S){return{_parameters:S._parameters,_specification:S._specification}};var Yi={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ni(S){if(null==S)return{filter:function(){return!0},needGeometry:!1};ai(S)||(S=Da(S));var z=ln(S,Yi);if("error"===z.result)throw new Error(z.value.map(function(J){return J.key+": "+J.message}).join(", "));return{filter:function(J,ce,be){return z.value.evaluate(J,ce,{},be)},needGeometry:function J(ce){if(!Array.isArray(ce))return!1;if("within"===ce[0])return!0;for(var be=1;be<ce.length;be++)if(J(ce[be]))return!0;return!1}(S)}}function Sa(S,z){return S<z?-1:S>z?1:0}function Da(S){if(!S)return!0;var z,J=S[0];return S.length<=1?"any"!==J:"=="===J?Oa(S[1],S[2],"=="):"!="===J?io(Oa(S[1],S[2],"==")):"<"===J||">"===J||"<="===J||">="===J?Oa(S[1],S[2],J):"any"===J?(z=S.slice(1),["any"].concat(z.map(Da))):"all"===J?["all"].concat(S.slice(1).map(Da)):"none"===J?["all"].concat(S.slice(1).map(Da).map(io)):"in"===J?Co(S[1],S.slice(2)):"!in"===J?io(Co(S[1],S.slice(2))):"has"===J?Mo(S[1]):"!has"===J?io(Mo(S[1])):"within"!==J||S}function Oa(S,z,J){switch(S){case"$type":return["filter-type-"+J,z];case"$id":return["filter-id-"+J,z];default:return["filter-"+J,S,z]}}function Co(S,z){if(0===z.length)return!1;switch(S){case"$type":return["filter-type-in",["literal",z]];case"$id":return["filter-id-in",["literal",z]];default:return z.length>200&&!z.some(function(J){return typeof J!=typeof z[0]})?["filter-in-large",S,["literal",z.sort(Sa)]]:["filter-in-small",S,["literal",z]]}}function Mo(S){switch(S){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",S]}}function io(S){return["!",S]}function Ja(S){return ai(mt(S.value))?ci(ot({},S,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function z(J){var ce=J.value,be=J.key;if("array"!==Va(ce))return[new Ge(be,ce,"array expected, "+Va(ce)+" found")];var Ae,Ne=J.styleSpec,We=[];if(ce.length<1)return[new Ge(be,ce,"filter array must have at least 1 element")];switch(We=We.concat(vi({key:be+"[0]",value:ce[0],valueSpec:Ne.filter_operator,style:J.style,styleSpec:J.styleSpec})),it(ce[0])){case"<":case"<=":case">":case">=":ce.length>=2&&"$type"===it(ce[1])&&We.push(new Ge(be,ce,'"$type" cannot be use with operator "'+ce[0]+'"'));case"==":case"!=":3!==ce.length&&We.push(new Ge(be,ce,'filter array for operator "'+ce[0]+'" must have 3 elements'));case"in":case"!in":ce.length>=2&&"string"!==(Ae=Va(ce[1]))&&We.push(new Ge(be+"[1]",ce[1],"string expected, "+Ae+" found"));for(var st=2;st<ce.length;st++)Ae=Va(ce[st]),"$type"===it(ce[1])?We=We.concat(vi({key:be+"["+st+"]",value:ce[st],valueSpec:Ne.geometry_type,style:J.style,styleSpec:J.styleSpec})):"string"!==Ae&&"number"!==Ae&&"boolean"!==Ae&&We.push(new Ge(be+"["+st+"]",ce[st],"string, number, or boolean expected, "+Ae+" found"));break;case"any":case"all":case"none":for(var vt=1;vt<ce.length;vt++)We=We.concat(z({key:be+"["+vt+"]",value:ce[vt],style:J.style,styleSpec:J.styleSpec}));break;case"has":case"!has":Ae=Va(ce[1]),2!==ce.length?We.push(new Ge(be,ce,'filter array for "'+ce[0]+'" operator must have 2 elements')):"string"!==Ae&&We.push(new Ge(be+"[1]",ce[1],"string expected, "+Ae+" found"));break;case"within":Ae=Va(ce[1]),2!==ce.length?We.push(new Ge(be,ce,'filter array for "'+ce[0]+'" operator must have 2 elements')):"object"!==Ae&&We.push(new Ge(be+"[1]",ce[1],"object expected, "+Ae+" found"))}return We}(S)}function Eo(S,z){var J=S.key,ce=S.style,be=S.styleSpec,Ae=S.value,Ne=S.objectKey,We=be[z+"_"+S.layerType];if(!We)return[];var st=Ne.match(/^(.*)-transition$/);if("paint"===z&&st&&We[st[1]]&&We[st[1]].transition)return _n({key:J,value:Ae,valueSpec:be.transition,style:ce,styleSpec:be});var vt,Tt=S.valueSpec||We[Ne];if(!Tt)return[new Ge(J,Ae,'unknown property "'+Ne+'"')];if("string"===Va(Ae)&&Jo(Tt)&&!Tt.tokens&&(vt=/^{([^}]+)}$/.exec(Ae)))return[new Ge(J,Ae,'"'+Ne+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(vt[1])+" }`.")];var Wt=[];return"symbol"===S.layerType&&("text-field"===Ne&&ce&&!ce.glyphs&&Wt.push(new Ge(J,Ae,'use of "text-field" requires a style "glyphs" property')),"text-font"===Ne&&Ye(mt(Ae))&&"identity"===it(Ae.type)&&Wt.push(new Ge(J,Ae,'"text-font" does not support identity functions'))),Wt.concat(_n({key:S.key,value:Ae,valueSpec:Tt,style:ce,styleSpec:be,expressionContext:"property",propertyType:z,propertyKey:Ne}))}function to(S){return Eo(S,"paint")}function ps(S){return Eo(S,"layout")}function gs(S){var z=[],J=S.value,ce=S.key,be=S.style,Ae=S.styleSpec;J.type||J.ref||z.push(new Ge(ce,J,'either "type" or "ref" is required'));var Ne,We=it(J.type),st=it(J.ref);if(J.id)for(var vt=it(J.id),Tt=0;Tt<S.arrayIndex;Tt++){var Wt=be.layers[Tt];it(Wt.id)===vt&&z.push(new Ge(ce,J.id,'duplicate layer id "'+J.id+'", previously used at line '+Wt.id.__line__))}if("ref"in J)["type","source","source-layer","filter","layout"].forEach(function(xn){xn in J&&z.push(new Ge(ce,J[xn],'"'+xn+'" is prohibited for ref layers'))}),be.layers.forEach(function(xn){it(xn.id)===st&&(Ne=xn)}),Ne?Ne.ref?z.push(new Ge(ce,J.ref,"ref cannot reference another ref layer")):We=it(Ne.type):z.push(new Ge(ce,J.ref,'ref layer "'+st+'" not found'));else if("background"!==We)if(J.source){var on=be.sources&&be.sources[J.source],Jt=on&&it(on.type);on?"vector"===Jt&&"raster"===We?z.push(new Ge(ce,J.source,'layer "'+J.id+'" requires a raster source')):"raster"===Jt&&"raster"!==We?z.push(new Ge(ce,J.source,'layer "'+J.id+'" requires a vector source')):"vector"!==Jt||J["source-layer"]?"raster-dem"===Jt&&"hillshade"!==We?z.push(new Ge(ce,J.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==We||!J.paint||!J.paint["line-gradient"]||"geojson"===Jt&&on.lineMetrics||z.push(new Ge(ce,J,'layer "'+J.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):z.push(new Ge(ce,J,'layer "'+J.id+'" must specify a "source-layer"')):z.push(new Ge(ce,J.source,'source "'+J.source+'" not found'))}else z.push(new Ge(ce,J,'missing required property "source"'));return z=z.concat(Xn({key:ce,value:J,valueSpec:Ae.layer,style:S.style,styleSpec:S.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return _n({key:ce+".type",value:J.type,valueSpec:Ae.layer.type,style:S.style,styleSpec:S.styleSpec,object:J,objectKey:"type"})},filter:Ja,layout:function(xn){return Xn({layer:J,key:xn.key,value:xn.value,style:xn.style,styleSpec:xn.styleSpec,objectElementValidators:{"*":function(Ln){return ps(ot({layerType:We},Ln))}}})},paint:function(xn){return Xn({layer:J,key:xn.key,value:xn.value,style:xn.style,styleSpec:xn.styleSpec,objectElementValidators:{"*":function(Ln){return to(ot({layerType:We},Ln))}}})}}}))}function ls(S){var z=S.value,J=S.key,ce=Va(z);return"string"!==ce?[new Ge(J,z,"string expected, "+ce+" found")]:[]}var ws={promoteId:function(S){var z=S.key,J=S.value;if("string"===Va(J))return ls({key:z,value:J});var ce=[];for(var be in J)ce.push.apply(ce,ls({key:z+"."+be,value:J[be]}));return ce}};function ba(S){var z=S.value,J=S.key,ce=S.styleSpec,be=S.style;if(!z.type)return[new Ge(J,z,'"type" is required')];var Ae,Ne=it(z.type);switch(Ne){case"vector":case"raster":case"raster-dem":return Xn({key:J,value:z,valueSpec:ce["source_"+Ne.replace("-","_")],style:S.style,styleSpec:ce,objectElementValidators:ws});case"geojson":if(Ae=Xn({key:J,value:z,valueSpec:ce.source_geojson,style:be,styleSpec:ce,objectElementValidators:ws}),z.cluster)for(var We in z.clusterProperties){var st=z.clusterProperties[We],vt=st[0],Wt="string"==typeof vt?[vt,["accumulated"],["get",We]]:vt;Ae.push.apply(Ae,ci({key:J+"."+We+".map",value:st[1],expressionContext:"cluster-map"})),Ae.push.apply(Ae,ci({key:J+"."+We+".reduce",value:Wt,expressionContext:"cluster-reduce"}))}return Ae;case"video":return Xn({key:J,value:z,valueSpec:ce.source_video,style:be,styleSpec:ce});case"image":return Xn({key:J,value:z,valueSpec:ce.source_image,style:be,styleSpec:ce});case"canvas":return[new Ge(J,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return vi({key:J+".type",value:z.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:be,styleSpec:ce})}}function _t(S){var z=S.value,J=S.styleSpec,ce=J.light,be=S.style,Ae=[],Ne=Va(z);if(void 0===z)return Ae;if("object"!==Ne)return Ae.concat([new Ge("light",z,"object expected, "+Ne+" found")]);for(var We in z){var st=We.match(/^(.*)-transition$/);Ae=Ae.concat(st&&ce[st[1]]&&ce[st[1]].transition?_n({key:We,value:z[We],valueSpec:J.transition,style:be,styleSpec:J}):ce[We]?_n({key:We,value:z[We],valueSpec:ce[We],style:be,styleSpec:J}):[new Ge(We,z[We],'unknown property "'+We+'"')])}return Ae}var jt={"*":function(){return[]},array:Mr,boolean:function(S){var z=S.value,J=S.key,ce=Va(z);return"boolean"!==ce?[new Ge(J,z,"boolean expected, "+ce+" found")]:[]},number:Or,color:function(S){var z=S.key,J=S.value,ce=Va(J);return"string"!==ce?[new Ge(z,J,"color expected, "+ce+" found")]:null===kn(J)?[new Ge(z,J,'color expected, "'+J+'" found')]:[]},constants:Qe,enum:vi,filter:Ja,function:ii,layer:gs,object:Xn,source:ba,light:_t,string:ls,formatted:function(S){return 0===ls(S).length?[]:ci(S)},resolvedImage:function(S){return 0===ls(S).length?[]:ci(S)}};function _n(S){var z=S.value,J=S.valueSpec,ce=S.styleSpec;return J.expression&&Ye(it(z))?ii(S):J.expression&&hn(mt(z))?ci(S):J.type&&jt[J.type]?jt[J.type](S):Xn(ot({},S,{valueSpec:J.type?ce[J.type]:J}))}function Kt(S){var z=S.value,J=S.key,ce=ls(S);return ce.length||(-1===z.indexOf("{fontstack}")&&ce.push(new Ge(J,z,'"glyphs" url must include a "{fontstack}" token')),-1===z.indexOf("{range}")&&ce.push(new Ge(J,z,'"glyphs" url must include a "{range}" token'))),ce}function wn(S,z){void 0===z&&(z=Ve);var J=[];return J=J.concat(_n({key:"",value:S,valueSpec:z.$root,styleSpec:z,style:S,objectElementValidators:{glyphs:Kt,"*":function(){return[]}}})),S.constants&&(J=J.concat(Qe({key:"constants",value:S.constants,style:S,styleSpec:z}))),Vn(J)}function Vn(S){return[].concat(S).sort(function(z,J){return z.line-J.line})}function tr(S){return function(){for(var z=[],J=arguments.length;J--;)z[J]=arguments[J];return Vn(S.apply(this,z))}}wn.source=tr(ba),wn.light=tr(_t),wn.layer=tr(gs),wn.filter=tr(Ja),wn.paintProperty=tr(to),wn.layoutProperty=tr(ps);var pr=wn,Sr=pr.light,yr=pr.paintProperty,zr=pr.layoutProperty;function Zr(S,z){var J=!1;if(z&&z.length)for(var ce=0,be=z;ce<be.length;ce+=1)S.fire(new Se(new Error(be[ce].message))),J=!0;return J}var Ar=Br;function Br(S,z,J){var ce=this.cells=[];if(S instanceof ArrayBuffer){this.arrayBuffer=S;var be=new Int32Array(this.arrayBuffer);S=be[0],this.d=(z=be[1])+2*(J=be[2]);for(var Ae=0;Ae<this.d*this.d;Ae++){var Ne=be[3+Ae],We=be[3+Ae+1];ce.push(Ne===We?null:be.subarray(Ne,We))}var vt=be[3+ce.length+1];this.keys=be.subarray(be[3+ce.length],vt),this.bboxes=be.subarray(vt),this.insert=this._insertReadonly}else{this.d=z+2*J;for(var Tt=0;Tt<this.d*this.d;Tt++)ce.push([]);this.keys=[],this.bboxes=[]}this.n=z,this.extent=S,this.padding=J,this.scale=z/S,this.uid=0;var Wt=J/z*S;this.min=-Wt,this.max=S+Wt}Br.prototype.insert=function(S,z,J,ce,be){this._forEachCell(z,J,ce,be,this._insertCell,this.uid++),this.keys.push(S),this.bboxes.push(z),this.bboxes.push(J),this.bboxes.push(ce),this.bboxes.push(be)},Br.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Br.prototype._insertCell=function(S,z,J,ce,be,Ae){this.cells[be].push(Ae)},Br.prototype.query=function(S,z,J,ce,be){var Ae=this.min,Ne=this.max;if(S<=Ae&&z<=Ae&&Ne<=J&&Ne<=ce&&!be)return Array.prototype.slice.call(this.keys);var We=[];return this._forEachCell(S,z,J,ce,this._queryCell,We,{},be),We},Br.prototype._queryCell=function(S,z,J,ce,be,Ae,Ne,We){var st=this.cells[be];if(null!==st)for(var vt=this.keys,Tt=this.bboxes,Wt=0;Wt<st.length;Wt++){var on=st[Wt];if(void 0===Ne[on]){var Jt=4*on;(We?We(Tt[Jt+0],Tt[Jt+1],Tt[Jt+2],Tt[Jt+3]):S<=Tt[Jt+2]&&z<=Tt[Jt+3]&&J>=Tt[Jt+0]&&ce>=Tt[Jt+1])?(Ne[on]=!0,Ae.push(vt[on])):Ne[on]=!1}}},Br.prototype._forEachCell=function(S,z,J,ce,be,Ae,Ne,We){for(var st=this._convertToCellCoord(S),vt=this._convertToCellCoord(z),Tt=this._convertToCellCoord(J),Wt=this._convertToCellCoord(ce),on=st;on<=Tt;on++)for(var Jt=vt;Jt<=Wt;Jt++){var xn=this.d*Jt+on;if((!We||We(this._convertFromCellCoord(on),this._convertFromCellCoord(Jt),this._convertFromCellCoord(on+1),this._convertFromCellCoord(Jt+1)))&&be.call(this,S,z,J,ce,xn,Ae,Ne,We))return}},Br.prototype._convertFromCellCoord=function(S){return(S-this.padding)/this.scale},Br.prototype._convertToCellCoord=function(S){return Math.max(0,Math.min(this.d-1,Math.floor(S*this.scale)+this.padding))},Br.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var S=this.cells,z=3+this.cells.length+1+1,J=0,ce=0;ce<this.cells.length;ce++)J+=this.cells[ce].length;var be=new Int32Array(z+J+this.keys.length+this.bboxes.length);be[0]=this.extent,be[1]=this.n,be[2]=this.padding;for(var Ae=z,Ne=0;Ne<S.length;Ne++){var We=S[Ne];be[3+Ne]=Ae,be.set(We,Ae),Ae+=We.length}return be[3+S.length]=Ae,be.set(this.keys,Ae),be[3+S.length+1]=Ae+=this.keys.length,be.set(this.bboxes,Ae),Ae+=this.bboxes.length,be.buffer};var li=self.ImageData,gi=self.ImageBitmap,Li={};function fr(S,z,J){void 0===J&&(J={}),Object.defineProperty(z,"_classRegistryKey",{value:S,writeable:!1}),Li[S]={klass:z,omit:J.omit||[],shallow:J.shallow||[]}}for(var Di in fr("Object",Object),Ar.serialize=function(S,z){var J=S.toArrayBuffer();return z&&z.push(J),{buffer:J}},Ar.deserialize=function(S){return new Ar(S.buffer)},fr("Grid",Ar),fr("Color",rn),fr("Error",Error),fr("ResolvedImage",jn),fr("StylePropertyFunction",Nn),fr("StyleExpression",cn,{omit:["_evaluator"]}),fr("ZoomDependentExpression",En),fr("ZoomConstantExpression",bn),fr("CompoundExpression",cr,{omit:["_evaluate"]}),bo)bo[Di]._classRegistryKey||fr("Expression_"+Di,bo[Di]);function ri(S){return S&&"undefined"!=typeof ArrayBuffer&&(S instanceof ArrayBuffer||S.constructor&&"ArrayBuffer"===S.constructor.name)}function Ir(S){return gi&&S instanceof gi}function Ii(S,z){if(null==S||"boolean"==typeof S||"number"==typeof S||"string"==typeof S||S instanceof Boolean||S instanceof Number||S instanceof String||S instanceof Date||S instanceof RegExp)return S;if(ri(S)||Ir(S))return z&&z.push(S),S;if(ArrayBuffer.isView(S)){var J=S;return z&&z.push(J.buffer),J}if(S instanceof li)return z&&z.push(S.data.buffer),S;if(Array.isArray(S)){for(var ce=[],be=0,Ae=S;be<Ae.length;be+=1)ce.push(Ii(Ae[be],z));return ce}if("object"==typeof S){var We=S.constructor,st=We._classRegistryKey;if(!st)throw new Error("can't serialize object of unregistered class");var vt=We.serialize?We.serialize(S,z):{};if(!We.serialize){for(var Tt in S)if(S.hasOwnProperty(Tt)&&!(Li[st].omit.indexOf(Tt)>=0)){var Wt=S[Tt];vt[Tt]=Li[st].shallow.indexOf(Tt)>=0?Wt:Ii(Wt,z)}S instanceof Error&&(vt.message=S.message)}if(vt.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==st&&(vt.$name=st),vt}throw new Error("can't serialize object of type "+typeof S)}function aa(S){if(null==S||"boolean"==typeof S||"number"==typeof S||"string"==typeof S||S instanceof Boolean||S instanceof Number||S instanceof String||S instanceof Date||S instanceof RegExp||ri(S)||Ir(S)||ArrayBuffer.isView(S)||S instanceof li)return S;if(Array.isArray(S))return S.map(aa);if("object"==typeof S){var z=S.$name||"Object",J=Li[z].klass;if(!J)throw new Error("can't deserialize unregistered class "+z);if(J.deserialize)return J.deserialize(S);for(var ce=Object.create(J.prototype),be=0,Ae=Object.keys(S);be<Ae.length;be+=1){var Ne=Ae[be];if("$name"!==Ne){var We=S[Ne];ce[Ne]=Li[z].shallow.indexOf(Ne)>=0?We:aa(We)}}return ce}throw new Error("can't deserialize object of type "+typeof S)}var ya=function(){this.first=!0};ya.prototype.update=function(S,z){var J=Math.floor(S);return this.first?(this.first=!1,this.lastIntegerZoom=J,this.lastIntegerZoomTime=0,this.lastZoom=S,this.lastFloorZoom=J,!0):(this.lastFloorZoom>J?(this.lastIntegerZoom=J+1,this.lastIntegerZoomTime=z):this.lastFloorZoom<J&&(this.lastIntegerZoom=J,this.lastIntegerZoomTime=z),S!==this.lastZoom&&(this.lastZoom=S,this.lastFloorZoom=J,!0))};var Kr={"Latin-1 Supplement":function(S){return S>=128&&S<=255},Arabic:function(S){return S>=1536&&S<=1791},"Arabic Supplement":function(S){return S>=1872&&S<=1919},"Arabic Extended-A":function(S){return S>=2208&&S<=2303},"Hangul Jamo":function(S){return S>=4352&&S<=4607},"Unified Canadian Aboriginal Syllabics":function(S){return S>=5120&&S<=5759},Khmer:function(S){return S>=6016&&S<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(S){return S>=6320&&S<=6399},"General Punctuation":function(S){return S>=8192&&S<=8303},"Letterlike Symbols":function(S){return S>=8448&&S<=8527},"Number Forms":function(S){return S>=8528&&S<=8591},"Miscellaneous Technical":function(S){return S>=8960&&S<=9215},"Control Pictures":function(S){return S>=9216&&S<=9279},"Optical Character Recognition":function(S){return S>=9280&&S<=9311},"Enclosed Alphanumerics":function(S){return S>=9312&&S<=9471},"Geometric Shapes":function(S){return S>=9632&&S<=9727},"Miscellaneous Symbols":function(S){return S>=9728&&S<=9983},"Miscellaneous Symbols and Arrows":function(S){return S>=11008&&S<=11263},"CJK Radicals Supplement":function(S){return S>=11904&&S<=12031},"Kangxi Radicals":function(S){return S>=12032&&S<=12255},"Ideographic Description Characters":function(S){return S>=12272&&S<=12287},"CJK Symbols and Punctuation":function(S){return S>=12288&&S<=12351},Hiragana:function(S){return S>=12352&&S<=12447},Katakana:function(S){return S>=12448&&S<=12543},Bopomofo:function(S){return S>=12544&&S<=12591},"Hangul Compatibility Jamo":function(S){return S>=12592&&S<=12687},Kanbun:function(S){return S>=12688&&S<=12703},"Bopomofo Extended":function(S){return S>=12704&&S<=12735},"CJK Strokes":function(S){return S>=12736&&S<=12783},"Katakana Phonetic Extensions":function(S){return S>=12784&&S<=12799},"Enclosed CJK Letters and Months":function(S){return S>=12800&&S<=13055},"CJK Compatibility":function(S){return S>=13056&&S<=13311},"CJK Unified Ideographs Extension A":function(S){return S>=13312&&S<=19903},"Yijing Hexagram Symbols":function(S){return S>=19904&&S<=19967},"CJK Unified Ideographs":function(S){return S>=19968&&S<=40959},"Yi Syllables":function(S){return S>=40960&&S<=42127},"Yi Radicals":function(S){return S>=42128&&S<=42191},"Hangul Jamo Extended-A":function(S){return S>=43360&&S<=43391},"Hangul Syllables":function(S){return S>=44032&&S<=55215},"Hangul Jamo Extended-B":function(S){return S>=55216&&S<=55295},"Private Use Area":function(S){return S>=57344&&S<=63743},"CJK Compatibility Ideographs":function(S){return S>=63744&&S<=64255},"Arabic Presentation Forms-A":function(S){return S>=64336&&S<=65023},"Vertical Forms":function(S){return S>=65040&&S<=65055},"CJK Compatibility Forms":function(S){return S>=65072&&S<=65103},"Small Form Variants":function(S){return S>=65104&&S<=65135},"Arabic Presentation Forms-B":function(S){return S>=65136&&S<=65279},"Halfwidth and Fullwidth Forms":function(S){return S>=65280&&S<=65519}};function Ta(S){for(var z=0,J=S;z<J.length;z+=1)if(Wi(J[z].charCodeAt(0)))return!0;return!1}function pa(S){return!(Kr.Arabic(S)||Kr["Arabic Supplement"](S)||Kr["Arabic Extended-A"](S)||Kr["Arabic Presentation Forms-A"](S)||Kr["Arabic Presentation Forms-B"](S))}function Wi(S){return!(746!==S&&747!==S&&(S<4352||!(Kr["Bopomofo Extended"](S)||Kr.Bopomofo(S)||Kr["CJK Compatibility Forms"](S)&&!(S>=65097&&S<=65103)||Kr["CJK Compatibility Ideographs"](S)||Kr["CJK Compatibility"](S)||Kr["CJK Radicals Supplement"](S)||Kr["CJK Strokes"](S)||!(!Kr["CJK Symbols and Punctuation"](S)||S>=12296&&S<=12305||S>=12308&&S<=12319||12336===S)||Kr["CJK Unified Ideographs Extension A"](S)||Kr["CJK Unified Ideographs"](S)||Kr["Enclosed CJK Letters and Months"](S)||Kr["Hangul Compatibility Jamo"](S)||Kr["Hangul Jamo Extended-A"](S)||Kr["Hangul Jamo Extended-B"](S)||Kr["Hangul Jamo"](S)||Kr["Hangul Syllables"](S)||Kr.Hiragana(S)||Kr["Ideographic Description Characters"](S)||Kr.Kanbun(S)||Kr["Kangxi Radicals"](S)||Kr["Katakana Phonetic Extensions"](S)||Kr.Katakana(S)&&12540!==S||!(!Kr["Halfwidth and Fullwidth Forms"](S)||65288===S||65289===S||65293===S||S>=65306&&S<=65310||65339===S||65341===S||65343===S||S>=65371&&S<=65503||65507===S||S>=65512&&S<=65519)||!(!Kr["Small Form Variants"](S)||S>=65112&&S<=65118||S>=65123&&S<=65126)||Kr["Unified Canadian Aboriginal Syllabics"](S)||Kr["Unified Canadian Aboriginal Syllabics Extended"](S)||Kr["Vertical Forms"](S)||Kr["Yijing Hexagram Symbols"](S)||Kr["Yi Syllables"](S)||Kr["Yi Radicals"](S))))}function Dr(S){return!(Wi(S)||(z=S,Kr["Latin-1 Supplement"](z)&&(167===z||169===z||174===z||177===z||188===z||189===z||190===z||215===z||247===z)||Kr["General Punctuation"](z)&&(8214===z||8224===z||8225===z||8240===z||8241===z||8251===z||8252===z||8258===z||8263===z||8264===z||8265===z||8273===z)||Kr["Letterlike Symbols"](z)||Kr["Number Forms"](z)||Kr["Miscellaneous Technical"](z)&&(z>=8960&&z<=8967||z>=8972&&z<=8991||z>=8996&&z<=9e3||9003===z||z>=9085&&z<=9114||z>=9150&&z<=9165||9167===z||z>=9169&&z<=9179||z>=9186&&z<=9215)||Kr["Control Pictures"](z)&&9251!==z||Kr["Optical Character Recognition"](z)||Kr["Enclosed Alphanumerics"](z)||Kr["Geometric Shapes"](z)||Kr["Miscellaneous Symbols"](z)&&!(z>=9754&&z<=9759)||Kr["Miscellaneous Symbols and Arrows"](z)&&(z>=11026&&z<=11055||z>=11088&&z<=11097||z>=11192&&z<=11243)||Kr["CJK Symbols and Punctuation"](z)||Kr.Katakana(z)||Kr["Private Use Area"](z)||Kr["CJK Compatibility Forms"](z)||Kr["Small Form Variants"](z)||Kr["Halfwidth and Fullwidth Forms"](z)||8734===z||8756===z||8757===z||z>=9984&&z<=10087||z>=10102&&z<=10131||65532===z||65533===z));var z}function Ai(S){return S>=1424&&S<=2303||Kr["Arabic Presentation Forms-A"](S)||Kr["Arabic Presentation Forms-B"](S)}function Ba(S,z){return!(!z&&Ai(S)||S>=2304&&S<=3583||S>=3840&&S<=4255||Kr.Khmer(S))}function mi(S){for(var z=0,J=S;z<J.length;z+=1)if(Ai(J[z].charCodeAt(0)))return!0;return!1}var Ua="deferred",So="loading",us="loaded",Ts=null,na="unavailable",ko=null,ms=function(S){S&&"string"==typeof S&&S.indexOf("NetworkError")>-1&&(na="error"),Ts&&Ts(S)};function Ra(){Fa.fire(new ke("pluginStateChange",{pluginStatus:na,pluginURL:ko}))}var Fa=new Ce,go=function(){return na},Ka=function(){if(na!==Ua||!ko)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");na=So,Ra(),ko&&Ft({url:ko},function(S){S?ms(S):(na=us,Ra())})},Ko={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return na===us||null!=Ko.applyArabicShaping},isLoading:function(){return na===So},setState:function(S){na=S.pluginStatus,ko=S.pluginURL},isParsed:function(){return null!=Ko.applyArabicShaping&&null!=Ko.processBidirectionalText&&null!=Ko.processStyledBidirectionalText},getPluginURL:function(){return ko}},Ia=function(S,z){this.zoom=S,z?(this.now=z.now,this.fadeDuration=z.fadeDuration,this.zoomHistory=z.zoomHistory,this.transition=z.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ya,this.transition={})};Ia.prototype.isSupportedScript=function(S){return function(z,J){for(var ce=0,be=z;ce<be.length;ce+=1)if(!Ba(be[ce].charCodeAt(0),J))return!1;return!0}(S,Ko.isLoaded())},Ia.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Ia.prototype.getCrossfadeParameters=function(){var S=this.zoom,z=S-Math.floor(S),J=this.crossFadingFactor();return S>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:z+(1-z)*J}:{fromScale:.5,toScale:1,t:1-(1-J)*z}};var Ms=function(S,z){this.property=S,this.value=z,this.expression=function(J,ce){if(Ye(J))return new Nn(J,ce);if(hn(J)){var be=On(J,ce);if("error"===be.result)throw new Error(be.value.map(function(Ne){return Ne.key+": "+Ne.message}).join(", "));return be.value}var Ae=J;return"string"==typeof J&&"color"===ce.type&&(Ae=rn.parse(J)),{kind:"constant",evaluate:function(){return Ae}}}(void 0===z?S.specification.default:z,S.specification)};Ms.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Ms.prototype.possiblyEvaluate=function(S,z,J){return this.property.possiblyEvaluate(this,S,z,J)};var Al=function(S){this.property=S,this.value=new Ms(S,void 0)};Al.prototype.transitioned=function(S,z){return new Iu(this.property,this.value,z,f({},S.transition,this.transition),S.now)},Al.prototype.untransitioned=function(){return new Iu(this.property,this.value,null,{},0)};var Cl=function(S){this._properties=S,this._values=Object.create(S.defaultTransitionablePropertyValues)};Cl.prototype.getValue=function(S){return E(this._values[S].value.value)},Cl.prototype.setValue=function(S,z){this._values.hasOwnProperty(S)||(this._values[S]=new Al(this._values[S].property)),this._values[S].value=new Ms(this._values[S].property,null===z?void 0:E(z))},Cl.prototype.getTransition=function(S){return E(this._values[S].transition)},Cl.prototype.setTransition=function(S,z){this._values.hasOwnProperty(S)||(this._values[S]=new Al(this._values[S].property)),this._values[S].transition=E(z)||void 0},Cl.prototype.serialize=function(){for(var S={},z=0,J=Object.keys(this._values);z<J.length;z+=1){var ce=J[z],be=this.getValue(ce);void 0!==be&&(S[ce]=be);var Ae=this.getTransition(ce);void 0!==Ae&&(S[ce+"-transition"]=Ae)}return S},Cl.prototype.transitioned=function(S,z){for(var J=new Fo(this._properties),ce=0,be=Object.keys(this._values);ce<be.length;ce+=1){var Ae=be[ce];J._values[Ae]=this._values[Ae].transitioned(S,z._values[Ae])}return J},Cl.prototype.untransitioned=function(){for(var S=new Fo(this._properties),z=0,J=Object.keys(this._values);z<J.length;z+=1){var ce=J[z];S._values[ce]=this._values[ce].untransitioned()}return S};var Iu=function(S,z,J,ce,be){this.property=S,this.value=z,this.begin=be+ce.delay||0,this.end=this.begin+ce.duration||0,S.specification.transition&&(ce.delay||ce.duration)&&(this.prior=J)};Iu.prototype.possiblyEvaluate=function(S,z,J){var ce=S.now||0,be=this.value.possiblyEvaluate(S,z,J),Ae=this.prior;if(Ae){if(ce>this.end)return this.prior=null,be;if(this.value.isDataDriven())return this.prior=null,be;if(ce<this.begin)return Ae.possiblyEvaluate(S,z,J);var Ne=(ce-this.begin)/(this.end-this.begin);return this.property.interpolate(Ae.possiblyEvaluate(S,z,J),be,function(We){if(We<=0)return 0;if(We>=1)return 1;var st=We*We,vt=st*We;return 4*(We<.5?vt:3*(We-st)+vt-.75)}(Ne))}return be};var Fo=function(S){this._properties=S,this._values=Object.create(S.defaultTransitioningPropertyValues)};Fo.prototype.possiblyEvaluate=function(S,z,J){for(var ce=new rl(this._properties),be=0,Ae=Object.keys(this._values);be<Ae.length;be+=1){var Ne=Ae[be];ce._values[Ne]=this._values[Ne].possiblyEvaluate(S,z,J)}return ce},Fo.prototype.hasTransition=function(){for(var S=0,z=Object.keys(this._values);S<z.length;S+=1)if(this._values[z[S]].prior)return!0;return!1};var tu=function(S){this._properties=S,this._values=Object.create(S.defaultPropertyValues)};tu.prototype.getValue=function(S){return E(this._values[S].value)},tu.prototype.setValue=function(S,z){this._values[S]=new Ms(this._values[S].property,null===z?void 0:E(z))},tu.prototype.serialize=function(){for(var S={},z=0,J=Object.keys(this._values);z<J.length;z+=1){var ce=J[z],be=this.getValue(ce);void 0!==be&&(S[ce]=be)}return S},tu.prototype.possiblyEvaluate=function(S,z,J){for(var ce=new rl(this._properties),be=0,Ae=Object.keys(this._values);be<Ae.length;be+=1){var Ne=Ae[be];ce._values[Ne]=this._values[Ne].possiblyEvaluate(S,z,J)}return ce};var jo=function(S,z,J){this.property=S,this.value=z,this.parameters=J};jo.prototype.isConstant=function(){return"constant"===this.value.kind},jo.prototype.constantOr=function(S){return"constant"===this.value.kind?this.value.value:S},jo.prototype.evaluate=function(S,z,J,ce){return this.property.evaluate(this.value,this.parameters,S,z,J,ce)};var rl=function(S){this._properties=S,this._values=Object.create(S.defaultPossiblyEvaluatedValues)};rl.prototype.get=function(S){return this._values[S]};var zi=function(S){this.specification=S};zi.prototype.possiblyEvaluate=function(S,z){return S.expression.evaluate(z)},zi.prototype.interpolate=function(S,z,J){var ce=ei[this.specification.type];return ce?ce(S,z,J):S};var Ki=function(S,z){this.specification=S,this.overrides=z};Ki.prototype.possiblyEvaluate=function(S,z,J,ce){return new jo(this,"constant"===S.expression.kind||"camera"===S.expression.kind?{kind:"constant",value:S.expression.evaluate(z,null,{},J,ce)}:S.expression,z)},Ki.prototype.interpolate=function(S,z,J){if("constant"!==S.value.kind||"constant"!==z.value.kind)return S;if(void 0===S.value.value||void 0===z.value.value)return new jo(this,{kind:"constant",value:void 0},S.parameters);var ce=ei[this.specification.type];return ce?new jo(this,{kind:"constant",value:ce(S.value.value,z.value.value,J)},S.parameters):S},Ki.prototype.evaluate=function(S,z,J,ce,be,Ae){return"constant"===S.kind?S.value:S.evaluate(z,J,ce,be,Ae)};var Yl=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.possiblyEvaluate=function(J,ce,be,Ae){if(void 0===J.value)return new jo(this,{kind:"constant",value:void 0},ce);if("constant"===J.expression.kind){var Ne=J.expression.evaluate(ce,null,{},be,Ae),We="resolvedImage"===J.property.specification.type&&"string"!=typeof Ne?Ne.name:Ne,st=this._calculate(We,We,We,ce);return new jo(this,{kind:"constant",value:st},ce)}if("camera"===J.expression.kind){var vt=this._calculate(J.expression.evaluate({zoom:ce.zoom-1}),J.expression.evaluate({zoom:ce.zoom}),J.expression.evaluate({zoom:ce.zoom+1}),ce);return new jo(this,{kind:"constant",value:vt},ce)}return new jo(this,J.expression,ce)},z.prototype.evaluate=function(J,ce,be,Ae,Ne,We){if("source"===J.kind){var st=J.evaluate(ce,be,Ae,Ne,We);return this._calculate(st,st,st,ce)}return"composite"===J.kind?this._calculate(J.evaluate({zoom:Math.floor(ce.zoom)-1},be,Ae),J.evaluate({zoom:Math.floor(ce.zoom)},be,Ae),J.evaluate({zoom:Math.floor(ce.zoom)+1},be,Ae),ce):J.value},z.prototype._calculate=function(J,ce,be,Ae){return Ae.zoom>Ae.zoomHistory.lastIntegerZoom?{from:J,to:ce}:{from:be,to:ce}},z.prototype.interpolate=function(J){return J},z}(Ki),fu=function(S){this.specification=S};fu.prototype.possiblyEvaluate=function(S,z,J,ce){if(void 0!==S.value){if("constant"===S.expression.kind){var be=S.expression.evaluate(z,null,{},J,ce);return this._calculate(be,be,be,z)}return this._calculate(S.expression.evaluate(new Ia(Math.floor(z.zoom-1),z)),S.expression.evaluate(new Ia(Math.floor(z.zoom),z)),S.expression.evaluate(new Ia(Math.floor(z.zoom+1),z)),z)}},fu.prototype._calculate=function(S,z,J,ce){return ce.zoom>ce.zoomHistory.lastIntegerZoom?{from:S,to:z}:{from:J,to:z}},fu.prototype.interpolate=function(S){return S};var pl=function(S){this.specification=S};pl.prototype.possiblyEvaluate=function(S,z,J,ce){return!!S.expression.evaluate(z,null,{},J,ce)},pl.prototype.interpolate=function(){return!1};var Os=function(S){for(var z in this.properties=S,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],S){var J=S[z];J.specification.overridable&&this.overridableProperties.push(z);var ce=this.defaultPropertyValues[z]=new Ms(J,void 0),be=this.defaultTransitionablePropertyValues[z]=new Al(J);this.defaultTransitioningPropertyValues[z]=be.untransitioned(),this.defaultPossiblyEvaluatedValues[z]=ce.possiblyEvaluate({})}};fr("DataDrivenProperty",Ki),fr("DataConstantProperty",zi),fr("CrossFadedDataDrivenProperty",Yl),fr("CrossFadedProperty",fu),fr("ColorRampProperty",pl);var Zs=function(S){function z(J,ce){if(S.call(this),this.id=J.id,this.type=J.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==J.type&&(this.metadata=(J=J).metadata,this.minzoom=J.minzoom,this.maxzoom=J.maxzoom,"background"!==J.type&&(this.source=J.source,this.sourceLayer=J["source-layer"],this.filter=J.filter),ce.layout&&(this._unevaluatedLayout=new tu(ce.layout)),ce.paint)){for(var be in this._transitionablePaint=new Cl(ce.paint),J.paint)this.setPaintProperty(be,J.paint[be],{validate:!1});for(var Ae in J.layout)this.setLayoutProperty(Ae,J.layout[Ae],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new rl(ce.paint)}}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},z.prototype.getLayoutProperty=function(J){return"visibility"===J?this.visibility:this._unevaluatedLayout.getValue(J)},z.prototype.setLayoutProperty=function(J,ce,be){void 0===be&&(be={}),null!=ce&&this._validate(zr,"layers."+this.id+".layout."+J,J,ce,be)||("visibility"!==J?this._unevaluatedLayout.setValue(J,ce):this.visibility=ce)},z.prototype.getPaintProperty=function(J){return A(J,"-transition")?this._transitionablePaint.getTransition(J.slice(0,-"-transition".length)):this._transitionablePaint.getValue(J)},z.prototype.setPaintProperty=function(J,ce,be){if(void 0===be&&(be={}),null!=ce&&this._validate(yr,"layers."+this.id+".paint."+J,J,ce,be))return!1;if(A(J,"-transition"))return this._transitionablePaint.setTransition(J.slice(0,-"-transition".length),ce||void 0),!1;var Ne=this._transitionablePaint._values[J],We="cross-faded-data-driven"===Ne.property.specification["property-type"],st=Ne.value.isDataDriven(),vt=Ne.value;this._transitionablePaint.setValue(J,ce),this._handleSpecialPaintPropertyUpdate(J);var Tt=this._transitionablePaint._values[J].value;return Tt.isDataDriven()||st||We||this._handleOverridablePaintPropertyUpdate(J,vt,Tt)},z.prototype._handleSpecialPaintPropertyUpdate=function(J){},z.prototype._handleOverridablePaintPropertyUpdate=function(J,ce,be){return!1},z.prototype.isHidden=function(J){return!!(this.minzoom&&J<this.minzoom)||!!(this.maxzoom&&J>=this.maxzoom)||"none"===this.visibility},z.prototype.updateTransitions=function(J){this._transitioningPaint=this._transitionablePaint.transitioned(J,this._transitioningPaint)},z.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},z.prototype.recalculate=function(J,ce){J.getCrossfadeParameters&&(this._crossfadeParameters=J.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(J,void 0,ce)),this.paint=this._transitioningPaint.possiblyEvaluate(J,void 0,ce)},z.prototype.serialize=function(){var J={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(J.layout=J.layout||{},J.layout.visibility=this.visibility),C(J,function(ce,be){return!(void 0===ce||"layout"===be&&!Object.keys(ce).length||"paint"===be&&!Object.keys(ce).length)})},z.prototype._validate=function(J,ce,be,Ae,Ne){return void 0===Ne&&(Ne={}),(!Ne||!1!==Ne.validate)&&Zr(this,J.call(pr,{key:ce,layerType:this.type,objectKey:be,value:Ae,styleSpec:Ve,style:{glyphs:!0,sprite:!0}}))},z.prototype.is3D=function(){return!1},z.prototype.isTileClipped=function(){return!1},z.prototype.hasOffscreenPass=function(){return!1},z.prototype.resize=function(){},z.prototype.isStateDependent=function(){for(var J in this.paint._values){var ce=this.paint.get(J);if(ce instanceof jo&&Jo(ce.property.specification)&&("source"===ce.value.kind||"composite"===ce.value.kind)&&ce.value.isStateDependent)return!0}return!1},z}(Ce),hu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},du=function(S,z){this._structArray=S,this._pos1=z*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Ga=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function ga(S,z){void 0===z&&(z=1);var J=0,ce=0;return{members:S.map(function(be){var Ne=hu[be.type].BYTES_PER_ELEMENT,We=J=Rs(J,Math.max(z,Ne)),st=be.components||1;return ce=Math.max(ce,Ne),J+=Ne*st,{name:be.name,type:be.type,components:st,offset:We}}),size:Rs(J,Math.max(ce,z)),alignment:z}}function Rs(S,z){return Math.ceil(S/z)*z}Ga.serialize=function(S,z){return S._trim(),z&&(S.isTransferred=!0,z.push(S.arrayBuffer)),{length:S.length,arrayBuffer:S.arrayBuffer}},Ga.deserialize=function(S){var z=Object.create(this.prototype);return z.arrayBuffer=S.arrayBuffer,z.length=S.length,z.capacity=S.arrayBuffer.byteLength/z.bytesPerElement,z._refreshViews(),z},Ga.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Ga.prototype.clear=function(){this.length=0},Ga.prototype.resize=function(S){this.reserve(S),this.length=S},Ga.prototype.reserve=function(S){if(S>this.capacity){this.capacity=Math.max(S,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var z=this.uint8;this._refreshViews(),z&&this.uint8.set(z)}},Ga.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var so=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce){var be=this.length;return this.resize(be+1),this.emplace(be,J,ce)},z.prototype.emplace=function(J,ce,be){var Ae=2*J;return this.int16[Ae+0]=ce,this.int16[Ae+1]=be,J},z}(Ga);so.prototype.bytesPerElement=4,fr("StructArrayLayout2i4",so);var Vo=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,be,Ae){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,J,ce,be,Ae)},z.prototype.emplace=function(J,ce,be,Ae,Ne){var We=4*J;return this.int16[We+0]=ce,this.int16[We+1]=be,this.int16[We+2]=Ae,this.int16[We+3]=Ne,J},z}(Ga);Vo.prototype.bytesPerElement=8,fr("StructArrayLayout4i8",Vo);var Zl=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,be,Ae,Ne,We){var st=this.length;return this.resize(st+1),this.emplace(st,J,ce,be,Ae,Ne,We)},z.prototype.emplace=function(J,ce,be,Ae,Ne,We,st){var vt=6*J;return this.int16[vt+0]=ce,this.int16[vt+1]=be,this.int16[vt+2]=Ae,this.int16[vt+3]=Ne,this.int16[vt+4]=We,this.int16[vt+5]=st,J},z}(Ga);Zl.prototype.bytesPerElement=12,fr("StructArrayLayout2i4i12",Zl);var pu=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,be,Ae,Ne,We){var st=this.length;return this.resize(st+1),this.emplace(st,J,ce,be,Ae,Ne,We)},z.prototype.emplace=function(J,ce,be,Ae,Ne,We,st){var vt=4*J,Tt=8*J;return this.int16[vt+0]=ce,this.int16[vt+1]=be,this.uint8[Tt+4]=Ae,this.uint8[Tt+5]=Ne,this.uint8[Tt+6]=We,this.uint8[Tt+7]=st,J},z}(Ga);pu.prototype.bytesPerElement=8,fr("StructArrayLayout2i4ub8",pu);var nu=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,be,Ae,Ne,We,st,vt,Tt,Wt){var on=this.length;return this.resize(on+1),this.emplace(on,J,ce,be,Ae,Ne,We,st,vt,Tt,Wt)},z.prototype.emplace=function(J,ce,be,Ae,Ne,We,st,vt,Tt,Wt,on){var Jt=9*J,xn=18*J;return this.uint16[Jt+0]=ce,this.uint16[Jt+1]=be,this.uint16[Jt+2]=Ae,this.uint16[Jt+3]=Ne,this.uint16[Jt+4]=We,this.uint16[Jt+5]=st,this.uint16[Jt+6]=vt,this.uint16[Jt+7]=Tt,this.uint8[xn+16]=Wt,this.uint8[xn+17]=on,J},z}(Ga);nu.prototype.bytesPerElement=18,fr("StructArrayLayout8ui2ub18",nu);var gu=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,be,Ae,Ne,We,st,vt,Tt,Wt,on,Jt){var xn=this.length;return this.resize(xn+1),this.emplace(xn,J,ce,be,Ae,Ne,We,st,vt,Tt,Wt,on,Jt)},z.prototype.emplace=function(J,ce,be,Ae,Ne,We,st,vt,Tt,Wt,on,Jt,xn){var Ln=12*J;return this.int16[Ln+0]=ce,this.int16[Ln+1]=be,this.int16[Ln+2]=Ae,this.int16[Ln+3]=Ne,this.uint16[Ln+4]=We,this.uint16[Ln+5]=st,this.uint16[Ln+6]=vt,this.uint16[Ln+7]=Tt,this.int16[Ln+8]=Wt,this.int16[Ln+9]=on,this.int16[Ln+10]=Jt,this.int16[Ln+11]=xn,J},z}(Ga);gu.prototype.bytesPerElement=24,fr("StructArrayLayout4i4ui4i24",gu);var Ll=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,be){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,J,ce,be)},z.prototype.emplace=function(J,ce,be,Ae){var Ne=3*J;return this.float32[Ne+0]=ce,this.float32[Ne+1]=be,this.float32[Ne+2]=Ae,J},z}(Ga);Ll.prototype.bytesPerElement=12,fr("StructArrayLayout3f12",Ll);var mu=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J){var ce=this.length;return this.resize(ce+1),this.emplace(ce,J)},z.prototype.emplace=function(J,ce){return this.uint32[1*J+0]=ce,J},z}(Ga);mu.prototype.bytesPerElement=4,fr("StructArrayLayout1ul4",mu);var Pu=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,be,Ae,Ne,We,st,vt,Tt){var Wt=this.length;return this.resize(Wt+1),this.emplace(Wt,J,ce,be,Ae,Ne,We,st,vt,Tt)},z.prototype.emplace=function(J,ce,be,Ae,Ne,We,st,vt,Tt,Wt){var on=10*J,Jt=5*J;return this.int16[on+0]=ce,this.int16[on+1]=be,this.int16[on+2]=Ae,this.int16[on+3]=Ne,this.int16[on+4]=We,this.int16[on+5]=st,this.uint32[Jt+3]=vt,this.uint16[on+8]=Tt,this.uint16[on+9]=Wt,J},z}(Ga);Pu.prototype.bytesPerElement=20,fr("StructArrayLayout6i1ul2ui20",Pu);var ml=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,be,Ae,Ne,We){var st=this.length;return this.resize(st+1),this.emplace(st,J,ce,be,Ae,Ne,We)},z.prototype.emplace=function(J,ce,be,Ae,Ne,We,st){var vt=6*J;return this.int16[vt+0]=ce,this.int16[vt+1]=be,this.int16[vt+2]=Ae,this.int16[vt+3]=Ne,this.int16[vt+4]=We,this.int16[vt+5]=st,J},z}(Ga);ml.prototype.bytesPerElement=12,fr("StructArrayLayout2i2i2i12",ml);var Lu=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,be,Ae,Ne){var We=this.length;return this.resize(We+1),this.emplace(We,J,ce,be,Ae,Ne)},z.prototype.emplace=function(J,ce,be,Ae,Ne,We){var st=4*J,vt=8*J;return this.float32[st+0]=ce,this.float32[st+1]=be,this.float32[st+2]=Ae,this.int16[vt+6]=Ne,this.int16[vt+7]=We,J},z}(Ga);Lu.prototype.bytesPerElement=16,fr("StructArrayLayout2f1f2i16",Lu);var ru=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,be,Ae){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,J,ce,be,Ae)},z.prototype.emplace=function(J,ce,be,Ae,Ne){var We=12*J,st=3*J;return this.uint8[We+0]=ce,this.uint8[We+1]=be,this.float32[st+1]=Ae,this.float32[st+2]=Ne,J},z}(Ga);ru.prototype.bytesPerElement=12,fr("StructArrayLayout2ub2f12",ru);var ks=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,be){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,J,ce,be)},z.prototype.emplace=function(J,ce,be,Ae){var Ne=3*J;return this.uint16[Ne+0]=ce,this.uint16[Ne+1]=be,this.uint16[Ne+2]=Ae,J},z}(Ga);ks.prototype.bytesPerElement=6,fr("StructArrayLayout3ui6",ks);var Ol=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,be,Ae,Ne,We,st,vt,Tt,Wt,on,Jt,xn,Ln,Wn,Gn,ir){var or=this.length;return this.resize(or+1),this.emplace(or,J,ce,be,Ae,Ne,We,st,vt,Tt,Wt,on,Jt,xn,Ln,Wn,Gn,ir)},z.prototype.emplace=function(J,ce,be,Ae,Ne,We,st,vt,Tt,Wt,on,Jt,xn,Ln,Wn,Gn,ir,or){var dr=24*J,Rr=12*J,qr=48*J;return this.int16[dr+0]=ce,this.int16[dr+1]=be,this.uint16[dr+2]=Ae,this.uint16[dr+3]=Ne,this.uint32[Rr+2]=We,this.uint32[Rr+3]=st,this.uint32[Rr+4]=vt,this.uint16[dr+10]=Tt,this.uint16[dr+11]=Wt,this.uint16[dr+12]=on,this.float32[Rr+7]=Jt,this.float32[Rr+8]=xn,this.uint8[qr+36]=Ln,this.uint8[qr+37]=Wn,this.uint8[qr+38]=Gn,this.uint32[Rr+10]=ir,this.int16[dr+22]=or,J},z}(Ga);Ol.prototype.bytesPerElement=48,fr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ol);var vu=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,be,Ae,Ne,We,st,vt,Tt,Wt,on,Jt,xn,Ln,Wn,Gn,ir,or,dr,Rr,qr,fi,si,_i,Ri,Oi,Ci,Hi){var Vi=this.length;return this.resize(Vi+1),this.emplace(Vi,J,ce,be,Ae,Ne,We,st,vt,Tt,Wt,on,Jt,xn,Ln,Wn,Gn,ir,or,dr,Rr,qr,fi,si,_i,Ri,Oi,Ci,Hi)},z.prototype.emplace=function(J,ce,be,Ae,Ne,We,st,vt,Tt,Wt,on,Jt,xn,Ln,Wn,Gn,ir,or,dr,Rr,qr,fi,si,_i,Ri,Oi,Ci,Hi,Vi){var Fi=34*J,xa=17*J;return this.int16[Fi+0]=ce,this.int16[Fi+1]=be,this.int16[Fi+2]=Ae,this.int16[Fi+3]=Ne,this.int16[Fi+4]=We,this.int16[Fi+5]=st,this.int16[Fi+6]=vt,this.int16[Fi+7]=Tt,this.uint16[Fi+8]=Wt,this.uint16[Fi+9]=on,this.uint16[Fi+10]=Jt,this.uint16[Fi+11]=xn,this.uint16[Fi+12]=Ln,this.uint16[Fi+13]=Wn,this.uint16[Fi+14]=Gn,this.uint16[Fi+15]=ir,this.uint16[Fi+16]=or,this.uint16[Fi+17]=dr,this.uint16[Fi+18]=Rr,this.uint16[Fi+19]=qr,this.uint16[Fi+20]=fi,this.uint16[Fi+21]=si,this.uint16[Fi+22]=_i,this.uint32[xa+12]=Ri,this.float32[xa+13]=Oi,this.float32[xa+14]=Ci,this.float32[xa+15]=Hi,this.float32[xa+16]=Vi,J},z}(Ga);vu.prototype.bytesPerElement=68,fr("StructArrayLayout8i15ui1ul4f68",vu);var ge=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J){var ce=this.length;return this.resize(ce+1),this.emplace(ce,J)},z.prototype.emplace=function(J,ce){return this.float32[1*J+0]=ce,J},z}(Ga);ge.prototype.bytesPerElement=4,fr("StructArrayLayout1f4",ge);var O=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,be){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,J,ce,be)},z.prototype.emplace=function(J,ce,be,Ae){var Ne=3*J;return this.int16[Ne+0]=ce,this.int16[Ne+1]=be,this.int16[Ne+2]=Ae,J},z}(Ga);O.prototype.bytesPerElement=6,fr("StructArrayLayout3i6",O);var B=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,be){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,J,ce,be)},z.prototype.emplace=function(J,ce,be,Ae){var We=4*J;return this.uint32[2*J+0]=ce,this.uint16[We+2]=be,this.uint16[We+3]=Ae,J},z}(Ga);B.prototype.bytesPerElement=8,fr("StructArrayLayout1ul2ui8",B);var H=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce){var be=this.length;return this.resize(be+1),this.emplace(be,J,ce)},z.prototype.emplace=function(J,ce,be){var Ae=2*J;return this.uint16[Ae+0]=ce,this.uint16[Ae+1]=be,J},z}(Ga);H.prototype.bytesPerElement=4,fr("StructArrayLayout2ui4",H);var $=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J){var ce=this.length;return this.resize(ce+1),this.emplace(ce,J)},z.prototype.emplace=function(J,ce){return this.uint16[1*J+0]=ce,J},z}(Ga);$.prototype.bytesPerElement=2,fr("StructArrayLayout1ui2",$);var fe=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce){var be=this.length;return this.resize(be+1),this.emplace(be,J,ce)},z.prototype.emplace=function(J,ce,be){var Ae=2*J;return this.float32[Ae+0]=ce,this.float32[Ae+1]=be,J},z}(Ga);fe.prototype.bytesPerElement=8,fr("StructArrayLayout2f8",fe);var ve=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(J,ce,be,Ae){var Ne=this.length;return this.resize(Ne+1),this.emplace(Ne,J,ce,be,Ae)},z.prototype.emplace=function(J,ce,be,Ae,Ne){var We=4*J;return this.float32[We+0]=ce,this.float32[We+1]=be,this.float32[We+2]=Ae,this.float32[We+3]=Ne,J},z}(Ga);ve.prototype.bytesPerElement=16,fr("StructArrayLayout4f16",ve);var Te=function(S){function z(){S.apply(this,arguments)}S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z;var J={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return J.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},J.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},J.x1.get=function(){return this._structArray.int16[this._pos2+2]},J.y1.get=function(){return this._structArray.int16[this._pos2+3]},J.x2.get=function(){return this._structArray.int16[this._pos2+4]},J.y2.get=function(){return this._structArray.int16[this._pos2+5]},J.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},J.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},J.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},J.anchorPoint.get=function(){return new i(this.anchorPointX,this.anchorPointY)},Object.defineProperties(z.prototype,J),z}(du);Te.prototype.size=20;var Ee=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.get=function(J){return new Te(this,J)},z}(Pu);fr("CollisionBoxArray",Ee);var Fe=function(S){function z(){S.apply(this,arguments)}S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z;var J={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return J.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},J.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},J.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},J.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},J.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},J.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},J.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},J.segment.get=function(){return this._structArray.uint16[this._pos2+10]},J.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},J.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},J.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},J.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},J.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},J.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},J.placedOrientation.set=function(ce){this._structArray.uint8[this._pos1+37]=ce},J.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},J.hidden.set=function(ce){this._structArray.uint8[this._pos1+38]=ce},J.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},J.crossTileID.set=function(ce){this._structArray.uint32[this._pos4+10]=ce},J.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(z.prototype,J),z}(du);Fe.prototype.size=48;var Ze=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.get=function(J){return new Fe(this,J)},z}(Ol);fr("PlacedSymbolArray",Ze);var rt=function(S){function z(){S.apply(this,arguments)}S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z;var J={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return J.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},J.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},J.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},J.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},J.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},J.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},J.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},J.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},J.key.get=function(){return this._structArray.uint16[this._pos2+8]},J.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},J.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},J.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},J.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},J.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},J.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},J.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},J.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},J.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},J.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},J.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},J.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},J.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},J.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},J.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},J.crossTileID.set=function(ce){this._structArray.uint32[this._pos4+12]=ce},J.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},J.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},J.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},J.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(z.prototype,J),z}(du);rt.prototype.size=68;var ft=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.get=function(J){return new rt(this,J)},z}(vu);fr("SymbolInstanceArray",ft);var It=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.getoffsetX=function(J){return this.float32[1*J+0]},z}(ge);fr("GlyphOffsetArray",It);var Rt=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.getx=function(J){return this.int16[3*J+0]},z.prototype.gety=function(J){return this.int16[3*J+1]},z.prototype.gettileUnitDistanceFromAnchor=function(J){return this.int16[3*J+2]},z}(O);fr("SymbolLineVertexArray",Rt);var Lt=function(S){function z(){S.apply(this,arguments)}S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z;var J={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return J.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},J.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},J.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(z.prototype,J),z}(du);Lt.prototype.size=8;var Ot=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.get=function(J){return new Lt(this,J)},z}(B);fr("FeatureIndexArray",Ot);var St=ga([{name:"a_pos",components:2,type:"Int16"}],4).members,Gt=function(S){void 0===S&&(S=[]),this.segments=S};function qt(S,z){return 256*(S=d(Math.floor(S),0,255))+d(Math.floor(z),0,255)}Gt.prototype.prepareSegment=function(S,z,J,ce){var be=this.segments[this.segments.length-1];return S>Gt.MAX_VERTEX_ARRAY_LENGTH&&D("Max vertices per segment is "+Gt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+S),(!be||be.vertexLength+S>Gt.MAX_VERTEX_ARRAY_LENGTH||be.sortKey!==ce)&&(be={vertexOffset:z.length,primitiveOffset:J.length,vertexLength:0,primitiveLength:0},void 0!==ce&&(be.sortKey=ce),this.segments.push(be)),be},Gt.prototype.get=function(){return this.segments},Gt.prototype.destroy=function(){for(var S=0,z=this.segments;S<z.length;S+=1){var J=z[S];for(var ce in J.vaos)J.vaos[ce].destroy()}},Gt.simpleSegment=function(S,z,J,ce){return new Gt([{vertexOffset:S,primitiveOffset:z,vertexLength:J,primitiveLength:ce,vaos:{},sortKey:0}])},Gt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,fr("SegmentVector",Gt);var Zt=ga([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),yn=o(function(S){S.exports=function(z,J){var ce,be,Ae,Ne,We,st,vt,Tt;for(be=z.length-(ce=3&z.length),Ae=J,We=3432918353,st=461845907,Tt=0;Tt<be;)vt=255&z.charCodeAt(Tt)|(255&z.charCodeAt(++Tt))<<8|(255&z.charCodeAt(++Tt))<<16|(255&z.charCodeAt(++Tt))<<24,++Tt,Ae=27492+(65535&(Ne=5*(65535&(Ae=(Ae^=vt=(65535&(vt=(vt=(65535&vt)*We+(((vt>>>16)*We&65535)<<16)&4294967295)<<15|vt>>>17))*st+(((vt>>>16)*st&65535)<<16)&4294967295)<<13|Ae>>>19))+((5*(Ae>>>16)&65535)<<16)&4294967295))+((58964+(Ne>>>16)&65535)<<16);switch(vt=0,ce){case 3:vt^=(255&z.charCodeAt(Tt+2))<<16;case 2:vt^=(255&z.charCodeAt(Tt+1))<<8;case 1:Ae^=vt=(65535&(vt=(vt=(65535&(vt^=255&z.charCodeAt(Tt)))*We+(((vt>>>16)*We&65535)<<16)&4294967295)<<15|vt>>>17))*st+(((vt>>>16)*st&65535)<<16)&4294967295}return Ae^=z.length,Ae=2246822507*(65535&(Ae^=Ae>>>16))+((2246822507*(Ae>>>16)&65535)<<16)&4294967295,Ae=3266489909*(65535&(Ae^=Ae>>>13))+((3266489909*(Ae>>>16)&65535)<<16)&4294967295,(Ae^=Ae>>>16)>>>0}}),Sn=o(function(S){S.exports=function(z,J){for(var ce,be=z.length,Ae=J^be,Ne=0;be>=4;)ce=1540483477*(65535&(ce=255&z.charCodeAt(Ne)|(255&z.charCodeAt(++Ne))<<8|(255&z.charCodeAt(++Ne))<<16|(255&z.charCodeAt(++Ne))<<24))+((1540483477*(ce>>>16)&65535)<<16),Ae=1540483477*(65535&Ae)+((1540483477*(Ae>>>16)&65535)<<16)^(ce=1540483477*(65535&(ce^=ce>>>24))+((1540483477*(ce>>>16)&65535)<<16)),be-=4,++Ne;switch(be){case 3:Ae^=(255&z.charCodeAt(Ne+2))<<16;case 2:Ae^=(255&z.charCodeAt(Ne+1))<<8;case 1:Ae=1540483477*(65535&(Ae^=255&z.charCodeAt(Ne)))+((1540483477*(Ae>>>16)&65535)<<16)}return Ae=1540483477*(65535&(Ae^=Ae>>>13))+((1540483477*(Ae>>>16)&65535)<<16),(Ae^=Ae>>>15)>>>0}}),qn=yn,mr=Sn;qn.murmur3=yn,qn.murmur2=mr;var gr=function(){this.ids=[],this.positions=[],this.indexed=!1};gr.prototype.add=function(S,z,J,ce){this.ids.push(Cr(S)),this.positions.push(z,J,ce)},gr.prototype.getPositions=function(S){for(var z=Cr(S),J=0,ce=this.ids.length-1;J<ce;){var be=J+ce>>1;this.ids[be]>=z?ce=be:J=be+1}for(var Ae=[];this.ids[J]===z;)Ae.push({index:this.positions[3*J],start:this.positions[3*J+1],end:this.positions[3*J+2]}),J++;return Ae},gr.serialize=function(S,z){var J=new Float64Array(S.ids),ce=new Uint32Array(S.positions);return function be(Ae,Ne,We,st){for(;We<st;){for(var vt=Ae[We+st>>1],Tt=We-1,Wt=st+1;;){do{Tt++}while(Ae[Tt]<vt);do{Wt--}while(Ae[Wt]>vt);if(Tt>=Wt)break;di(Ae,Tt,Wt),di(Ne,3*Tt,3*Wt),di(Ne,3*Tt+1,3*Wt+1),di(Ne,3*Tt+2,3*Wt+2)}Wt-We<st-Wt?(be(Ae,Ne,We,Wt),We=Wt+1):(be(Ae,Ne,Wt+1,st),st=Wt)}}(J,ce,0,J.length-1),z&&z.push(J.buffer,ce.buffer),{ids:J,positions:ce}},gr.deserialize=function(S){var z=new gr;return z.ids=S.ids,z.positions=S.positions,z.indexed=!0,z};var Pr=Math.pow(2,53)-1;function Cr(S){var z=+S;return!isNaN(z)&&z<=Pr?z:qn(String(S))}function di(S,z,J){var ce=S[z];S[z]=S[J],S[J]=ce}fr("FeaturePositionMap",gr);var wi=function(S,z){this.gl=S.gl,this.location=z},Bi=function(S){function z(J,ce){S.call(this,J,ce),this.current=0}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.set=function(J){this.current!==J&&(this.current=J,this.gl.uniform1i(this.location,J))},z}(wi),ur=function(S){function z(J,ce){S.call(this,J,ce),this.current=0}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.set=function(J){this.current!==J&&(this.current=J,this.gl.uniform1f(this.location,J))},z}(wi),$r=function(S){function z(J,ce){S.call(this,J,ce),this.current=[0,0]}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.set=function(J){J[0]===this.current[0]&&J[1]===this.current[1]||(this.current=J,this.gl.uniform2f(this.location,J[0],J[1]))},z}(wi),Ti=function(S){function z(J,ce){S.call(this,J,ce),this.current=[0,0,0]}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.set=function(J){J[0]===this.current[0]&&J[1]===this.current[1]&&J[2]===this.current[2]||(this.current=J,this.gl.uniform3f(this.location,J[0],J[1],J[2]))},z}(wi),bi=function(S){function z(J,ce){S.call(this,J,ce),this.current=[0,0,0,0]}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.set=function(J){J[0]===this.current[0]&&J[1]===this.current[1]&&J[2]===this.current[2]&&J[3]===this.current[3]||(this.current=J,this.gl.uniform4f(this.location,J[0],J[1],J[2],J[3]))},z}(wi),Si=function(S){function z(J,ce){S.call(this,J,ce),this.current=rn.transparent}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.set=function(J){J.r===this.current.r&&J.g===this.current.g&&J.b===this.current.b&&J.a===this.current.a||(this.current=J,this.gl.uniform4f(this.location,J.r,J.g,J.b,J.a))},z}(wi),ji=new Float32Array(16),ca=function(S){function z(J,ce){S.call(this,J,ce),this.current=ji}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.set=function(J){if(J[12]!==this.current[12]||J[0]!==this.current[0])return this.current=J,void this.gl.uniformMatrix4fv(this.location,!1,J);for(var ce=1;ce<16;ce++)if(J[ce]!==this.current[ce]){this.current=J,this.gl.uniformMatrix4fv(this.location,!1,J);break}},z}(wi);function Ei(S){return[qt(255*S.r,255*S.g),qt(255*S.b,255*S.a)]}var ta=function(S,z,J){this.value=S,this.uniformNames=z.map(function(ce){return"u_"+ce}),this.type=J};ta.prototype.setUniform=function(S,z,J){S.set(J.constantOr(this.value))},ta.prototype.getBinding=function(S,z,J){return"color"===this.type?new Si(S,z):new ur(S,z)};var Zi=function(S,z){this.uniformNames=z.map(function(J){return"u_"+J}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Zi.prototype.setConstantPatternPositions=function(S,z){this.pixelRatioFrom=z.pixelRatio,this.pixelRatioTo=S.pixelRatio,this.patternFrom=z.tlbr,this.patternTo=S.tlbr},Zi.prototype.setUniform=function(S,z,J,ce){var be="u_pattern_to"===ce?this.patternTo:"u_pattern_from"===ce?this.patternFrom:"u_pixel_ratio_to"===ce?this.pixelRatioTo:"u_pixel_ratio_from"===ce?this.pixelRatioFrom:null;be&&S.set(be)},Zi.prototype.getBinding=function(S,z,J){return"u_pattern"===J.substr(0,9)?new bi(S,z):new ur(S,z)};var ra=function(S,z,J,ce){this.expression=S,this.type=J,this.maxValue=0,this.paintVertexAttributes=z.map(function(be){return{name:"a_"+be,type:"Float32",components:"color"===J?2:1,offset:0}}),this.paintVertexArray=new ce};ra.prototype.populatePaintArray=function(S,z,J,ce,be){var Ae=this.paintVertexArray.length,Ne=this.expression.evaluate(new Ia(0),z,{},ce,[],be);this.paintVertexArray.resize(S),this._setPaintValue(Ae,S,Ne)},ra.prototype.updatePaintArray=function(S,z,J,ce){var be=this.expression.evaluate({zoom:0},J,ce);this._setPaintValue(S,z,be)},ra.prototype._setPaintValue=function(S,z,J){if("color"===this.type)for(var ce=Ei(J),be=S;be<z;be++)this.paintVertexArray.emplace(be,ce[0],ce[1]);else{for(var Ae=S;Ae<z;Ae++)this.paintVertexArray.emplace(Ae,J);this.maxValue=Math.max(this.maxValue,Math.abs(J))}},ra.prototype.upload=function(S){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=S.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ra.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Qi=function(S,z,J,ce,be,Ae){this.expression=S,this.uniformNames=z.map(function(Ne){return"u_"+Ne+"_t"}),this.type=J,this.useIntegerZoom=ce,this.zoom=be,this.maxValue=0,this.paintVertexAttributes=z.map(function(Ne){return{name:"a_"+Ne,type:"Float32",components:"color"===J?4:2,offset:0}}),this.paintVertexArray=new Ae};Qi.prototype.populatePaintArray=function(S,z,J,ce,be){var Ae=this.expression.evaluate(new Ia(this.zoom),z,{},ce,[],be),Ne=this.expression.evaluate(new Ia(this.zoom+1),z,{},ce,[],be),We=this.paintVertexArray.length;this.paintVertexArray.resize(S),this._setPaintValue(We,S,Ae,Ne)},Qi.prototype.updatePaintArray=function(S,z,J,ce){var be=this.expression.evaluate({zoom:this.zoom},J,ce),Ae=this.expression.evaluate({zoom:this.zoom+1},J,ce);this._setPaintValue(S,z,be,Ae)},Qi.prototype._setPaintValue=function(S,z,J,ce){if("color"===this.type)for(var be=Ei(J),Ae=Ei(ce),Ne=S;Ne<z;Ne++)this.paintVertexArray.emplace(Ne,be[0],be[1],Ae[0],Ae[1]);else{for(var We=S;We<z;We++)this.paintVertexArray.emplace(We,J,ce);this.maxValue=Math.max(this.maxValue,Math.abs(J),Math.abs(ce))}},Qi.prototype.upload=function(S){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=S.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Qi.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Qi.prototype.setUniform=function(S,z){var J=this.useIntegerZoom?Math.floor(z.zoom):z.zoom,ce=d(this.expression.interpolationFactor(J,this.zoom,this.zoom+1),0,1);S.set(ce)},Qi.prototype.getBinding=function(S,z,J){return new ur(S,z)};var fa=function(S,z,J,ce,be,Ae){this.expression=S,this.type=z,this.useIntegerZoom=J,this.zoom=ce,this.layerId=Ae,this.zoomInPaintVertexArray=new be,this.zoomOutPaintVertexArray=new be};fa.prototype.populatePaintArray=function(S,z,J){var ce=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(S),this.zoomOutPaintVertexArray.resize(S),this._setPaintValues(ce,S,z.patterns&&z.patterns[this.layerId],J)},fa.prototype.updatePaintArray=function(S,z,J,ce,be){this._setPaintValues(S,z,J.patterns&&J.patterns[this.layerId],be)},fa.prototype._setPaintValues=function(S,z,J,ce){if(ce&&J){var We=ce[J.min],st=ce[J.mid],vt=ce[J.max];if(We&&st&&vt)for(var Tt=S;Tt<z;Tt++)this.zoomInPaintVertexArray.emplace(Tt,st.tl[0],st.tl[1],st.br[0],st.br[1],We.tl[0],We.tl[1],We.br[0],We.br[1],st.pixelRatio,We.pixelRatio),this.zoomOutPaintVertexArray.emplace(Tt,st.tl[0],st.tl[1],st.br[0],st.br[1],vt.tl[0],vt.tl[1],vt.br[0],vt.br[1],st.pixelRatio,vt.pixelRatio)}},fa.prototype.upload=function(S){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=S.createVertexBuffer(this.zoomInPaintVertexArray,Zt.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=S.createVertexBuffer(this.zoomOutPaintVertexArray,Zt.members,this.expression.isStateDependent))},fa.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ma=function(S,z,J,ce){this.binders={},this.layoutAttributes=ce,this._buffers=[];var be=[];for(var Ae in S.paint._values)if(J(Ae)){var Ne=S.paint.get(Ae);if(Ne instanceof jo&&Jo(Ne.property.specification)){var We=xo(Ae,S.type),st=Ne.value,vt=Ne.property.specification.type,Tt=Ne.property.useIntegerZoom,Wt=Ne.property.specification["property-type"],on="cross-faded"===Wt||"cross-faded-data-driven"===Wt;if("constant"===st.kind)this.binders[Ae]=on?new Zi(st.value,We):new ta(st.value,We,vt),be.push("/u_"+Ae);else if("source"===st.kind||on){var Jt=_o(Ae,vt,"source");this.binders[Ae]=on?new fa(st,vt,Tt,z,Jt,S.id):new ra(st,We,vt,Jt),be.push("/a_"+Ae)}else{var xn=_o(Ae,vt,"composite");this.binders[Ae]=new Qi(st,We,vt,Tt,z,xn),be.push("/z_"+Ae)}}}this.cacheKey=be.sort().join("")};Ma.prototype.getMaxValue=function(S){var z=this.binders[S];return z instanceof ra||z instanceof Qi?z.maxValue:0},Ma.prototype.populatePaintArrays=function(S,z,J,ce,be){for(var Ae in this.binders){var Ne=this.binders[Ae];(Ne instanceof ra||Ne instanceof Qi||Ne instanceof fa)&&Ne.populatePaintArray(S,z,J,ce,be)}},Ma.prototype.setConstantPatternPositions=function(S,z){for(var J in this.binders){var ce=this.binders[J];ce instanceof Zi&&ce.setConstantPatternPositions(S,z)}},Ma.prototype.updatePaintArrays=function(S,z,J,ce,be){var Ae=!1;for(var Ne in S)for(var We=0,st=z.getPositions(Ne);We<st.length;We+=1){var vt=st[We],Tt=J.feature(vt.index);for(var Wt in this.binders){var on=this.binders[Wt];if((on instanceof ra||on instanceof Qi||on instanceof fa)&&!0===on.expression.isStateDependent){var Jt=ce.paint.get(Wt);on.expression=Jt.value,on.updatePaintArray(vt.start,vt.end,Tt,S[Ne],be),Ae=!0}}}return Ae},Ma.prototype.defines=function(){var S=[];for(var z in this.binders){var J=this.binders[z];(J instanceof ta||J instanceof Zi)&&S.push.apply(S,J.uniformNames.map(function(ce){return"#define HAS_UNIFORM_"+ce}))}return S},Ma.prototype.getPaintVertexBuffers=function(){return this._buffers},Ma.prototype.getUniforms=function(S,z){var J=[];for(var ce in this.binders){var be=this.binders[ce];if(be instanceof ta||be instanceof Zi||be instanceof Qi)for(var Ae=0,Ne=be.uniformNames;Ae<Ne.length;Ae+=1){var We=Ne[Ae];if(z[We]){var st=be.getBinding(S,z[We],We);J.push({name:We,property:ce,binding:st})}}}return J},Ma.prototype.setUniforms=function(S,z,J,ce){for(var be=0,Ae=z;be<Ae.length;be+=1){var Ne=Ae[be],We=Ne.name,st=Ne.property;this.binders[st].setUniform(Ne.binding,ce,J.get(st),We)}},Ma.prototype.updatePaintBuffers=function(S){for(var z in this._buffers=[],this.binders){var J=this.binders[z];if(S&&J instanceof fa){var ce=2===S.fromScale?J.zoomInPaintVertexBuffer:J.zoomOutPaintVertexBuffer;ce&&this._buffers.push(ce)}else(J instanceof ra||J instanceof Qi)&&J.paintVertexBuffer&&this._buffers.push(J.paintVertexBuffer)}},Ma.prototype.upload=function(S){for(var z in this.binders){var J=this.binders[z];(J instanceof ra||J instanceof Qi||J instanceof fa)&&J.upload(S)}this.updatePaintBuffers()},Ma.prototype.destroy=function(){for(var S in this.binders){var z=this.binders[S];(z instanceof ra||z instanceof Qi||z instanceof fa)&&z.destroy()}};var no=function(S,z,J,ce){void 0===ce&&(ce=function(){return!0}),this.programConfigurations={};for(var be=0,Ae=z;be<Ae.length;be+=1){var Ne=Ae[be];this.programConfigurations[Ne.id]=new Ma(Ne,J,ce,S)}this.needsUpload=!1,this._featureMap=new gr,this._bufferOffset=0};function xo(S,z){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[S]||[S.replace(z+"-","").replace(/-/g,"_")]}function _o(S,z,J){var be={"line-pattern":{source:nu,composite:nu},"fill-pattern":{source:nu,composite:nu},"fill-extrusion-pattern":{source:nu,composite:nu}}[S];return be&&be[J]||{color:{source:fe,composite:ve},number:{source:ge,composite:fe}}[z][J]}no.prototype.populatePaintArrays=function(S,z,J,ce,be,Ae){for(var Ne in this.programConfigurations)this.programConfigurations[Ne].populatePaintArrays(S,z,ce,be,Ae);void 0!==z.id&&this._featureMap.add(z.id,J,this._bufferOffset,S),this._bufferOffset=S,this.needsUpload=!0},no.prototype.updatePaintArrays=function(S,z,J,ce){for(var be=0,Ae=J;be<Ae.length;be+=1){var Ne=Ae[be];this.needsUpload=this.programConfigurations[Ne.id].updatePaintArrays(S,this._featureMap,z,Ne,ce)||this.needsUpload}},no.prototype.get=function(S){return this.programConfigurations[S]},no.prototype.upload=function(S){if(this.needsUpload){for(var z in this.programConfigurations)this.programConfigurations[z].upload(S);this.needsUpload=!1}},no.prototype.destroy=function(){for(var S in this.programConfigurations)this.programConfigurations[S].destroy()},fr("ConstantBinder",ta),fr("CrossFadedConstantBinder",Zi),fr("SourceExpressionBinder",ra),fr("CrossFadedCompositeBinder",fa),fr("CompositeExpressionBinder",Qi),fr("ProgramConfiguration",Ma,{omit:["_buffers"]}),fr("ProgramConfigurationSet",no);var uo=(15,{min:-1*Math.pow(2,14),max:Math.pow(2,14)-1});function Do(S){for(var z=8192/S.extent,J=S.loadGeometry(),ce=0;ce<J.length;ce++)for(var be=J[ce],Ae=0;Ae<be.length;Ae++){var Ne=be[Ae];Ne.x=Math.round(Ne.x*z),Ne.y=Math.round(Ne.y*z),(Ne.x<uo.min||Ne.x>uo.max||Ne.y<uo.min||Ne.y>uo.max)&&(D("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Ne.x=d(Ne.x,uo.min,uo.max),Ne.y=d(Ne.y,uo.min,uo.max))}return J}function Fs(S,z,J,ce,be){S.emplaceBack(2*z+(ce+1)/2,2*J+(be+1)/2)}var cs=function(S){this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=S.index,this.hasPattern=!1,this.layoutVertexArray=new so,this.indexArray=new ks,this.segments=new Gt,this.programConfigurations=new no(St,S.layers,S.zoom),this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};function il(S,z){for(var J=0;J<S.length;J++)if(Rl(z,S[J]))return!0;for(var ce=0;ce<z.length;ce++)if(Rl(S,z[ce]))return!0;return!!ec(S,z)}function iu(S,z,J){return!!Rl(S,z)||!!Ns(z,S,J)}function ma(S,z){if(1===S.length)return bf(z,S[0]);for(var J=0;J<z.length;J++)for(var ce=z[J],be=0;be<ce.length;be++)if(Rl(S,ce[be]))return!0;for(var Ae=0;Ae<S.length;Ae++)if(bf(z,S[Ae]))return!0;for(var Ne=0;Ne<z.length;Ne++)if(ec(S,z[Ne]))return!0;return!1}function Gc(S,z,J){if(S.length>1){if(ec(S,z))return!0;for(var ce=0;ce<z.length;ce++)if(Ns(z[ce],S,J))return!0}for(var be=0;be<S.length;be++)if(Ns(S[be],z,J))return!0;return!1}function ec(S,z){if(0===S.length||0===z.length)return!1;for(var J=0;J<S.length-1;J++)for(var ce=S[J],be=S[J+1],Ae=0;Ae<z.length-1;Ae++)if(Wc(ce,be,z[Ae],z[Ae+1]))return!0;return!1}function Wc(S,z,J,ce){return N(S,J,ce)!==N(z,J,ce)&&N(S,z,J)!==N(S,z,ce)}function Ns(S,z,J){var ce=J*J;if(1===z.length)return S.distSqr(z[0])<ce;for(var be=1;be<z.length;be++)if(wc(S,z[be-1],z[be])<ce)return!0;return!1}function wc(S,z,J){var ce=z.distSqr(J);if(0===ce)return S.distSqr(z);var be=((S.x-z.x)*(J.x-z.x)+(S.y-z.y)*(J.y-z.y))/ce;return S.distSqr(be<0?z:be>1?J:J.sub(z)._mult(be)._add(z))}function bf(S,z){for(var J,ce,be,Ae=!1,Ne=0;Ne<S.length;Ne++)for(var We=0,st=(J=S[Ne]).length-1;We<J.length;st=We++)(ce=J[We]).y>z.y!=(be=J[st]).y>z.y&&z.x<(be.x-ce.x)*(z.y-ce.y)/(be.y-ce.y)+ce.x&&(Ae=!Ae);return Ae}function Rl(S,z){for(var J=!1,ce=0,be=S.length-1;ce<S.length;be=ce++){var Ae=S[ce],Ne=S[be];Ae.y>z.y!=Ne.y>z.y&&z.x<(Ne.x-Ae.x)*(z.y-Ae.y)/(Ne.y-Ae.y)+Ae.x&&(J=!J)}return J}function _f(S,z,J){var ce=J[0],be=J[2];if(S.x<ce.x&&z.x<ce.x||S.x>be.x&&z.x>be.x||S.y<ce.y&&z.y<ce.y||S.y>be.y&&z.y>be.y)return!1;var Ae=N(S,z,J[0]);return Ae!==N(S,z,J[1])||Ae!==N(S,z,J[2])||Ae!==N(S,z,J[3])}function Uo(S,z,J){var ce=z.paint.get(S).value;return"constant"===ce.kind?ce.value:J.programConfigurations.get(z.id).getMaxValue(S)}function $s(S){return Math.sqrt(S[0]*S[0]+S[1]*S[1])}function Xs(S,z,J,ce,be){if(!z[0]&&!z[1])return S;var Ae=i.convert(z)._mult(be);"viewport"===J&&Ae._rotate(-ce);for(var Ne=[],We=0;We<S.length;We++)Ne.push(S[We].sub(Ae));return Ne}cs.prototype.populate=function(S,z,J){var ce=this.layers[0],be=[],Ae=null;"circle"===ce.type&&(Ae=ce.layout.get("circle-sort-key"));for(var Ne=0,We=S;Ne<We.length;Ne+=1){var st=We[Ne],vt=st.feature,Tt=st.id,Wt=st.index,on=st.sourceLayerIndex,Jt=this.layers[0]._featureFilter.needGeometry,xn={type:vt.type,id:Tt,properties:vt.properties,geometry:Jt?Do(vt):[]};if(this.layers[0]._featureFilter.filter(new Ia(this.zoom),xn,J)){Jt||(xn.geometry=Do(vt));var Ln=Ae?Ae.evaluate(xn,{},J):void 0;be.push({id:Tt,properties:vt.properties,type:vt.type,sourceLayerIndex:on,index:Wt,geometry:xn.geometry,patterns:{},sortKey:Ln})}}Ae&&be.sort(function(_i,Ri){return _i.sortKey-Ri.sortKey});for(var Gn=0,ir=be;Gn<ir.length;Gn+=1){var or=ir[Gn],Rr=or.geometry,qr=or.index,fi=or.sourceLayerIndex,si=S[qr].feature;this.addFeature(or,Rr,qr,J),z.featureIndex.insert(si,Rr,qr,fi,this.index)}},cs.prototype.update=function(S,z,J){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(S,z,this.stateDependentLayers,J)},cs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},cs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},cs.prototype.upload=function(S){this.uploaded||(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,St),this.indexBuffer=S.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(S),this.uploaded=!0},cs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},cs.prototype.addFeature=function(S,z,J,ce){for(var be=0,Ae=z;be<Ae.length;be+=1)for(var Ne=0,We=Ae[be];Ne<We.length;Ne+=1){var st=We[Ne],vt=st.x,Tt=st.y;if(!(vt<0||vt>=8192||Tt<0||Tt>=8192)){var Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,S.sortKey),on=Wt.vertexLength;Fs(this.layoutVertexArray,vt,Tt,-1,-1),Fs(this.layoutVertexArray,vt,Tt,1,-1),Fs(this.layoutVertexArray,vt,Tt,1,1),Fs(this.layoutVertexArray,vt,Tt,-1,1),this.indexArray.emplaceBack(on,on+1,on+2),this.indexArray.emplaceBack(on,on+3,on+2),Wt.vertexLength+=4,Wt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,S,J,{},ce)},fr("CircleBucket",cs,{omit:["layers"]});var Ou=new Os({"circle-sort-key":new Ki(Ve.layout_circle["circle-sort-key"])}),Dg={paint:new Os({"circle-radius":new Ki(Ve.paint_circle["circle-radius"]),"circle-color":new Ki(Ve.paint_circle["circle-color"]),"circle-blur":new Ki(Ve.paint_circle["circle-blur"]),"circle-opacity":new Ki(Ve.paint_circle["circle-opacity"]),"circle-translate":new zi(Ve.paint_circle["circle-translate"]),"circle-translate-anchor":new zi(Ve.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new zi(Ve.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new zi(Ve.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ki(Ve.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ki(Ve.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ki(Ve.paint_circle["circle-stroke-opacity"])}),layout:Ou},mo="undefined"!=typeof Float32Array?Float32Array:Array;function Tc(S){return S[0]=1,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=1,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=1,S[11]=0,S[12]=0,S[13]=0,S[14]=0,S[15]=1,S}function Ru(S,z,J){var ce=z[0],be=z[1],Ae=z[2],Ne=z[3],We=z[4],st=z[5],vt=z[6],Tt=z[7],Wt=z[8],on=z[9],Jt=z[10],xn=z[11],Ln=z[12],Wn=z[13],Gn=z[14],ir=z[15],or=J[0],dr=J[1],Rr=J[2],qr=J[3];return S[0]=or*ce+dr*We+Rr*Wt+qr*Ln,S[1]=or*be+dr*st+Rr*on+qr*Wn,S[2]=or*Ae+dr*vt+Rr*Jt+qr*Gn,S[3]=or*Ne+dr*Tt+Rr*xn+qr*ir,S[4]=(or=J[4])*ce+(dr=J[5])*We+(Rr=J[6])*Wt+(qr=J[7])*Ln,S[5]=or*be+dr*st+Rr*on+qr*Wn,S[6]=or*Ae+dr*vt+Rr*Jt+qr*Gn,S[7]=or*Ne+dr*Tt+Rr*xn+qr*ir,S[8]=(or=J[8])*ce+(dr=J[9])*We+(Rr=J[10])*Wt+(qr=J[11])*Ln,S[9]=or*be+dr*st+Rr*on+qr*Wn,S[10]=or*Ae+dr*vt+Rr*Jt+qr*Gn,S[11]=or*Ne+dr*Tt+Rr*xn+qr*ir,S[12]=(or=J[12])*ce+(dr=J[13])*We+(Rr=J[14])*Wt+(qr=J[15])*Ln,S[13]=or*be+dr*st+Rr*on+qr*Wn,S[14]=or*Ae+dr*vt+Rr*Jt+qr*Gn,S[15]=or*Ne+dr*Tt+Rr*xn+qr*ir,S}Math.hypot||(Math.hypot=function(){for(var S=arguments,z=0,J=arguments.length;J--;)z+=S[J]*S[J];return Math.sqrt(z)});var Fu,z,Ig=Ru;function yu(S,z,J){var ce=z[0],be=z[1],Ae=z[2],Ne=z[3];return S[0]=J[0]*ce+J[4]*be+J[8]*Ae+J[12]*Ne,S[1]=J[1]*ce+J[5]*be+J[9]*Ae+J[13]*Ne,S[2]=J[2]*ce+J[6]*be+J[10]*Ae+J[14]*Ne,S[3]=J[3]*ce+J[7]*be+J[11]*Ae+J[15]*Ne,S}Fu=new mo(3),mo!=Float32Array&&(Fu[0]=0,Fu[1]=0,Fu[2]=0),z=new mo(4),mo!=Float32Array&&(z[0]=0,z[1]=0,z[2]=0,z[3]=0);var Mc=(function(){var z=new mo(2);mo!=Float32Array&&(z[0]=0,z[1]=0)}(),function(S){function z(J){S.call(this,J,Dg)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.createBucket=function(J){return new cs(J)},z.prototype.queryRadius=function(J){var ce=J;return Uo("circle-radius",this,ce)+Uo("circle-stroke-width",this,ce)+$s(this.paint.get("circle-translate"))},z.prototype.queryIntersectsFeature=function(J,ce,be,Ae,Ne,We,st,vt){for(var Tt=Xs(J,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),We.angle,st),Wt=this.paint.get("circle-radius").evaluate(ce,be)+this.paint.get("circle-stroke-width").evaluate(ce,be),on="map"===this.paint.get("circle-pitch-alignment"),Jt=on?Tt:function(fi,si){return fi.map(function(_i){return Ip(_i,si)})}(Tt,vt),xn=on?Wt*st:Wt,Ln=0,Wn=Ae;Ln<Wn.length;Ln+=1)for(var Gn=0,ir=Wn[Ln];Gn<ir.length;Gn+=1){var or=ir[Gn],dr=on?or:Ip(or,vt),Rr=xn,qr=yu([],[or.x,or.y,0,1],vt);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Rr*=qr[3]/We.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Rr*=We.cameraToCenterDistance/qr[3]),iu(Jt,dr,Rr))return!0}return!1},z}(Zs));function Ip(S,z){var J=yu([],[S.x,S.y,0,1],z);return new i(J[0]/J[3],J[1]/J[3])}var Pg=function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z}(cs);function Pp(S,z,J,ce){var be=z.width,Ae=z.height;if(ce){if(ce instanceof Uint8ClampedArray)ce=new Uint8Array(ce.buffer);else if(ce.length!==be*Ae*J)throw new RangeError("mismatched image size")}else ce=new Uint8Array(be*Ae*J);return S.width=be,S.height=Ae,S.data=ce,S}function fy(S,z,J){var ce=z.width,be=z.height;if(ce!==S.width||be!==S.height){var Ae=Pp({},{width:ce,height:be},J);Lg(S,Ae,{x:0,y:0},{x:0,y:0},{width:Math.min(S.width,ce),height:Math.min(S.height,be)},J),S.width=ce,S.height=be,S.data=Ae.data}}function Lg(S,z,J,ce,be,Ae){if(0===be.width||0===be.height)return z;if(be.width>S.width||be.height>S.height||J.x>S.width-be.width||J.y>S.height-be.height)throw new RangeError("out of range source coordinates for image copy");if(be.width>z.width||be.height>z.height||ce.x>z.width-be.width||ce.y>z.height-be.height)throw new RangeError("out of range destination coordinates for image copy");for(var Ne=S.data,We=z.data,st=0;st<be.height;st++)for(var vt=((J.y+st)*S.width+J.x)*Ae,Tt=((ce.y+st)*z.width+ce.x)*Ae,Wt=0;Wt<be.width*Ae;Wt++)We[Tt+Wt]=Ne[vt+Wt];return z}fr("HeatmapBucket",Pg,{omit:["layers"]});var kc=function(S,z){Pp(this,S,1,z)};kc.prototype.resize=function(S){fy(this,S,1)},kc.prototype.clone=function(){return new kc({width:this.width,height:this.height},new Uint8Array(this.data))},kc.copy=function(S,z,J,ce,be){Lg(S,z,J,ce,be,1)};var Ho=function(S,z){Pp(this,S,4,z)};Ho.prototype.resize=function(S){fy(this,S,4)},Ho.prototype.replace=function(S,z){z?this.data.set(S):this.data=S instanceof Uint8ClampedArray?new Uint8Array(S.buffer):S},Ho.prototype.clone=function(){return new Ho({width:this.width,height:this.height},new Uint8Array(this.data))},Ho.copy=function(S,z,J,ce,be){Lg(S,z,J,ce,be,4)},fr("AlphaImage",kc),fr("RGBAImage",Ho);var Lp={paint:new Os({"heatmap-radius":new Ki(Ve.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ki(Ve.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new zi(Ve.paint_heatmap["heatmap-intensity"]),"heatmap-color":new pl(Ve.paint_heatmap["heatmap-color"]),"heatmap-opacity":new zi(Ve.paint_heatmap["heatmap-opacity"])})};function Zc(S,z){for(var J=new Uint8Array(1024),ce={},be=0,Ae=0;be<256;be++,Ae+=4){ce[z]=be/255;var Ne=S.evaluate(ce);J[Ae+0]=Math.floor(255*Ne.r/Ne.a),J[Ae+1]=Math.floor(255*Ne.g/Ne.a),J[Ae+2]=Math.floor(255*Ne.b/Ne.a),J[Ae+3]=Math.floor(255*Ne.a)}return new Ho({width:256,height:1},J)}var r_=function(S){function z(J){S.call(this,J,Lp),this._updateColorRamp()}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.createBucket=function(J){return new Pg(J)},z.prototype._handleSpecialPaintPropertyUpdate=function(J){"heatmap-color"===J&&this._updateColorRamp()},z.prototype._updateColorRamp=function(){this.colorRamp=Zc(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},z.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},z.prototype.queryRadius=function(){return 0},z.prototype.queryIntersectsFeature=function(){return!1},z.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},z}(Zs),Og={paint:new Os({"hillshade-illumination-direction":new zi(Ve.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new zi(Ve.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new zi(Ve.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new zi(Ve.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new zi(Ve.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new zi(Ve.paint_hillshade["hillshade-accent-color"])})},hy=function(S){function z(J){S.call(this,J,Og)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},z}(Zs),Rg=ga([{name:"a_pos",components:2,type:"Int16"}],4).members,Op=pd,dy=pd;function pd(S,z,J){J=J||2;var ce,be,Ae,Ne,We,st,vt,Tt=z&&z.length,Wt=Tt?z[0]*J:S.length,on=wf(S,0,Wt,J,!0),Jt=[];if(!on||on.next===on.prev)return Jt;if(Tt&&(on=function(Ln,Wn,Gn,ir){var or,dr,fi,si=[];for(or=0,dr=Wn.length;or<dr;or++)(fi=wf(Ln,Wn[or]*ir,or<dr-1?Wn[or+1]*ir:Ln.length,ir,!1))===fi.next&&(fi.steiner=!0),si.push(a_(fi));for(si.sort(py),or=0;or<si.length;or++)gy(si[or],Gn),Gn=Nu(Gn,Gn.next);return Gn}(S,z,on,J)),S.length>80*J){ce=Ae=S[0],be=Ne=S[1];for(var xn=J;xn<Wt;xn+=J)(We=S[xn])<ce&&(ce=We),(st=S[xn+1])<be&&(be=st),We>Ae&&(Ae=We),st>Ne&&(Ne=st);vt=0!==(vt=Math.max(Ae-ce,Ne-be))?1/vt:0}return Ac(on,Jt,J,ce,be,vt),Jt}function wf(S,z,J,ce,be){var Ae,Ne;if(be===Ng(S,z,J,ce)>0)for(Ae=z;Ae<J;Ae+=ce)Ne=Fg(Ae,S[Ae],S[Ae+1],Ne);else for(Ae=J-ce;Ae>=z;Ae-=ce)Ne=Fg(Ae,S[Ae],S[Ae+1],Ne);return Ne&&gd(Ne,Ne.next)&&(kf(Ne),Ne=Ne.next),Ne}function Nu(S,z){if(!S)return S;z||(z=S);var J,ce=S;do{if(J=!1,ce.steiner||!gd(ce,ce.next)&&0!==qo(ce.prev,ce,ce.next))ce=ce.next;else{if(kf(ce),(ce=z=ce.prev)===ce.next)break;J=!0}}while(J||ce!==z);return z}function Ac(S,z,J,ce,be,Ae,Ne){if(S){!Ne&&Ae&&function(Tt,Wt,on,Jt){var xn=Tt;do{null===xn.z&&(xn.z=wh(xn.x,xn.y,Wt,on,Jt)),xn.prevZ=xn.prev,xn.nextZ=xn.next,xn=xn.next}while(xn!==Tt);xn.prevZ.nextZ=null,xn.prevZ=null,function(Ln){var Wn,Gn,ir,or,dr,Rr,qr,fi,si=1;do{for(Gn=Ln,Ln=null,dr=null,Rr=0;Gn;){for(Rr++,ir=Gn,qr=0,Wn=0;Wn<si&&(qr++,ir=ir.nextZ);Wn++);for(fi=si;qr>0||fi>0&&ir;)0!==qr&&(0===fi||!ir||Gn.z<=ir.z)?(or=Gn,Gn=Gn.nextZ,qr--):(or=ir,ir=ir.nextZ,fi--),dr?dr.nextZ=or:Ln=or,or.prevZ=dr,dr=or;Gn=ir}dr.nextZ=null,si*=2}while(Rr>1)}(xn)}(S,ce,be,Ae);for(var We,st,vt=S;S.prev!==S.next;)if(We=S.prev,st=S.next,Ae?_h(S,ce,be,Ae):i_(S))z.push(We.i/J),z.push(S.i/J),z.push(st.i/J),kf(S),S=st.next,vt=st.next;else if((S=st)===vt){Ne?1===Ne?Ac(S=Rp(Nu(S),z,J),z,J,ce,be,Ae,2):2===Ne&&Tf(S,z,J,ce,be,Ae):Ac(Nu(S),z,J,ce,be,Ae,1);break}}}function i_(S){var z=S.prev,J=S,ce=S.next;if(qo(z,J,ce)>=0)return!1;for(var be=S.next.next;be!==S.prev;){if(Cc(z.x,z.y,J.x,J.y,ce.x,ce.y,be.x,be.y)&&qo(be.prev,be,be.next)>=0)return!1;be=be.next}return!0}function _h(S,z,J,ce){var be=S.prev,Ae=S,Ne=S.next;if(qo(be,Ae,Ne)>=0)return!1;for(var vt=be.x>Ae.x?be.x>Ne.x?be.x:Ne.x:Ae.x>Ne.x?Ae.x:Ne.x,Tt=be.y>Ae.y?be.y>Ne.y?be.y:Ne.y:Ae.y>Ne.y?Ae.y:Ne.y,Wt=wh(be.x<Ae.x?be.x<Ne.x?be.x:Ne.x:Ae.x<Ne.x?Ae.x:Ne.x,be.y<Ae.y?be.y<Ne.y?be.y:Ne.y:Ae.y<Ne.y?Ae.y:Ne.y,z,J,ce),on=wh(vt,Tt,z,J,ce),Jt=S.prevZ,xn=S.nextZ;Jt&&Jt.z>=Wt&&xn&&xn.z<=on;){if(Jt!==S.prev&&Jt!==S.next&&Cc(be.x,be.y,Ae.x,Ae.y,Ne.x,Ne.y,Jt.x,Jt.y)&&qo(Jt.prev,Jt,Jt.next)>=0||(Jt=Jt.prevZ,xn!==S.prev&&xn!==S.next&&Cc(be.x,be.y,Ae.x,Ae.y,Ne.x,Ne.y,xn.x,xn.y)&&qo(xn.prev,xn,xn.next)>=0))return!1;xn=xn.nextZ}for(;Jt&&Jt.z>=Wt;){if(Jt!==S.prev&&Jt!==S.next&&Cc(be.x,be.y,Ae.x,Ae.y,Ne.x,Ne.y,Jt.x,Jt.y)&&qo(Jt.prev,Jt,Jt.next)>=0)return!1;Jt=Jt.prevZ}for(;xn&&xn.z<=on;){if(xn!==S.prev&&xn!==S.next&&Cc(be.x,be.y,Ae.x,Ae.y,Ne.x,Ne.y,xn.x,xn.y)&&qo(xn.prev,xn,xn.next)>=0)return!1;xn=xn.nextZ}return!0}function Rp(S,z,J){var ce=S;do{var be=ce.prev,Ae=ce.next.next;!gd(be,Ae)&&yi(be,ce,ce.next,Ae)&&xu(be,Ae)&&xu(Ae,be)&&(z.push(be.i/J),z.push(ce.i/J),z.push(Ae.i/J),kf(ce),kf(ce.next),ce=S=Ae),ce=ce.next}while(ce!==S);return Nu(ce)}function Tf(S,z,J,ce,be,Ae){var Ne=S;do{for(var We=Ne.next.next;We!==Ne.prev;){if(Ne.i!==We.i&&Th(Ne,We)){var st=Mf(Ne,We);return Ne=Nu(Ne,Ne.next),st=Nu(st,st.next),Ac(Ne,z,J,ce,be,Ae),void Ac(st,z,J,ce,be,Ae)}We=We.next}Ne=Ne.next}while(Ne!==S)}function py(S,z){return S.x-z.x}function gy(S,z){if(z=function(ce,be){var Ae,Ne=be,We=ce.x,st=ce.y,vt=-1/0;do{if(st<=Ne.y&&st>=Ne.next.y&&Ne.next.y!==Ne.y){var Tt=Ne.x+(st-Ne.y)*(Ne.next.x-Ne.x)/(Ne.next.y-Ne.y);if(Tt<=We&&Tt>vt){if(vt=Tt,Tt===We){if(st===Ne.y)return Ne;if(st===Ne.next.y)return Ne.next}Ae=Ne.x<Ne.next.x?Ne:Ne.next}}Ne=Ne.next}while(Ne!==be);if(!Ae)return null;if(We===vt)return Ae;var Wt,on=Ae,Jt=Ae.x,xn=Ae.y,Ln=1/0;Ne=Ae;do{We>=Ne.x&&Ne.x>=Jt&&We!==Ne.x&&Cc(st<xn?We:vt,st,Jt,xn,st<xn?vt:We,st,Ne.x,Ne.y)&&(Wt=Math.abs(st-Ne.y)/(We-Ne.x),xu(Ne,ce)&&(Wt<Ln||Wt===Ln&&(Ne.x>Ae.x||Ne.x===Ae.x&&my(Ae,Ne)))&&(Ae=Ne,Ln=Wt)),Ne=Ne.next}while(Ne!==on);return Ae}(S,z)){var J=Mf(z,S);Nu(z,z.next),Nu(J,J.next)}}function my(S,z){return qo(S.prev,S,z.prev)<0&&qo(z.next,S,S.next)<0}function wh(S,z,J,ce,be){return(S=1431655765&((S=858993459&((S=252645135&((S=16711935&((S=32767*(S-J)*be)|S<<8))|S<<4))|S<<2))|S<<1))|(z=1431655765&((z=858993459&((z=252645135&((z=16711935&((z=32767*(z-ce)*be)|z<<8))|z<<4))|z<<2))|z<<1))<<1}function a_(S){var z=S,J=S;do{(z.x<J.x||z.x===J.x&&z.y<J.y)&&(J=z),z=z.next}while(z!==S);return J}function Cc(S,z,J,ce,be,Ae,Ne,We){return(be-Ne)*(z-We)-(S-Ne)*(Ae-We)>=0&&(S-Ne)*(ce-We)-(J-Ne)*(z-We)>=0&&(J-Ne)*(Ae-We)-(be-Ne)*(ce-We)>=0}function Th(S,z){return S.next.i!==z.i&&S.prev.i!==z.i&&!function(J,ce){var be=J;do{if(be.i!==J.i&&be.next.i!==J.i&&be.i!==ce.i&&be.next.i!==ce.i&&yi(be,be.next,J,ce))return!0;be=be.next}while(be!==J);return!1}(S,z)&&(xu(S,z)&&xu(z,S)&&function(J,ce){var be=J,Ae=!1,Ne=(J.x+ce.x)/2,We=(J.y+ce.y)/2;do{be.y>We!=be.next.y>We&&be.next.y!==be.y&&Ne<(be.next.x-be.x)*(We-be.y)/(be.next.y-be.y)+be.x&&(Ae=!Ae),be=be.next}while(be!==J);return Ae}(S,z)&&(qo(S.prev,S,z.prev)||qo(S,z.prev,z))||gd(S,z)&&qo(S.prev,S,S.next)>0&&qo(z.prev,z,z.next)>0)}function qo(S,z,J){return(z.y-S.y)*(J.x-z.x)-(z.x-S.x)*(J.y-z.y)}function gd(S,z){return S.x===z.x&&S.y===z.y}function yi(S,z,J,ce){var be=Fp(qo(S,z,J)),Ae=Fp(qo(S,z,ce)),Ne=Fp(qo(J,ce,S)),We=Fp(qo(J,ce,z));return be!==Ae&&Ne!==We||!(0!==be||!Mh(S,J,z))||!(0!==Ae||!Mh(S,ce,z))||!(0!==Ne||!Mh(J,S,ce))||!(0!==We||!Mh(J,z,ce))}function Mh(S,z,J){return z.x<=Math.max(S.x,J.x)&&z.x>=Math.min(S.x,J.x)&&z.y<=Math.max(S.y,J.y)&&z.y>=Math.min(S.y,J.y)}function Fp(S){return S>0?1:S<0?-1:0}function xu(S,z){return qo(S.prev,S,S.next)<0?qo(S,z,S.next)>=0&&qo(S,S.prev,z)>=0:qo(S,z,S.prev)<0||qo(S,S.next,z)<0}function Mf(S,z){var J=new md(S.i,S.x,S.y),ce=new md(z.i,z.x,z.y),be=S.next,Ae=z.prev;return S.next=z,z.prev=S,J.next=be,be.prev=J,ce.next=J,J.prev=ce,Ae.next=ce,ce.prev=Ae,ce}function Fg(S,z,J,ce){var be=new md(S,z,J);return ce?(be.next=ce.next,be.prev=ce,ce.next.prev=be,ce.next=be):(be.prev=be,be.next=be),be}function kf(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function md(S,z,J){this.i=S,this.x=z,this.y=J,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Ng(S,z,J,ce){for(var be=0,Ae=z,Ne=J-ce;Ae<J;Ae+=ce)be+=(S[Ne]-S[Ae])*(S[Ae+1]+S[Ne+1]),Ne=Ae;return be}function Af(S,z,J,ce,be){!function Ae(Ne,We,st,vt,Tt){for(;vt>st;){if(vt-st>600){var Wt=vt-st+1,on=We-st+1,Jt=Math.log(Wt),xn=.5*Math.exp(2*Jt/3),Ln=.5*Math.sqrt(Jt*xn*(Wt-xn)/Wt)*(on-Wt/2<0?-1:1);Ae(Ne,We,Math.max(st,Math.floor(We-on*xn/Wt+Ln)),Math.min(vt,Math.floor(We+(Wt-on)*xn/Wt+Ln)),Tt)}var ir=Ne[We],or=st,dr=vt;for(Js(Ne,st,We),Tt(Ne[vt],ir)>0&&Js(Ne,st,vt);or<dr;){for(Js(Ne,or,dr),or++,dr--;Tt(Ne[or],ir)<0;)or++;for(;Tt(Ne[dr],ir)>0;)dr--}0===Tt(Ne[st],ir)?Js(Ne,st,dr):Js(Ne,++dr,vt),dr<=We&&(st=dr+1),We<=dr&&(vt=dr-1)}}(S,z,J||0,ce||S.length-1,be||vd)}function Js(S,z,J){var ce=S[z];S[z]=S[J],S[J]=ce}function vd(S,z){return S<z?-1:S>z?1:0}function zu(S,z){var J=S.length;if(J<=1)return[S];for(var ce,be,Ae=[],Ne=0;Ne<J;Ne++){var We=F(S[Ne]);0!==We&&(S[Ne].area=Math.abs(We),void 0===be&&(be=We<0),be===We<0?(ce&&Ae.push(ce),ce=[S[Ne]]):ce.push(S[Ne]))}if(ce&&Ae.push(ce),z>1)for(var st=0;st<Ae.length;st++)Ae[st].length<=z||(Af(Ae[st],z,1,Ae[st].length-1,vy),Ae[st]=Ae[st].slice(0,z));return Ae}function vy(S,z){return z.area-S.area}function yd(S,z,J){for(var ce=J.patternDependencies,be=!1,Ae=0,Ne=z;Ae<Ne.length;Ae+=1){var We=Ne[Ae].paint.get(S+"-pattern");We.isConstant()||(be=!0);var st=We.constantOr(null);st&&(be=!0,ce[st.to]=!0,ce[st.from]=!0)}return be}function kh(S,z,J,ce,be){for(var Ae=be.patternDependencies,Ne=0,We=z;Ne<We.length;Ne+=1){var st=We[Ne],vt=st.paint.get(S+"-pattern").value;if("constant"!==vt.kind){var Tt=vt.evaluate({zoom:ce-1},J,{},be.availableImages),Wt=vt.evaluate({zoom:ce},J,{},be.availableImages),on=vt.evaluate({zoom:ce+1},J,{},be.availableImages);Wt=Wt&&Wt.name?Wt.name:Wt,on=on&&on.name?on.name:on,Ae[Tt=Tt&&Tt.name?Tt.name:Tt]=!0,Ae[Wt]=!0,Ae[on]=!0,J.patterns[st.id]={min:Tt,mid:Wt,max:on}}}return J}pd.deviation=function(S,z,J,ce){var be=z&&z.length,Ne=Math.abs(Ng(S,0,be?z[0]*J:S.length,J));if(be)for(var We=0,st=z.length;We<st;We++)Ne-=Math.abs(Ng(S,z[We]*J,We<st-1?z[We+1]*J:S.length,J));var Wt=0;for(We=0;We<ce.length;We+=3){var on=ce[We]*J,Jt=ce[We+1]*J,xn=ce[We+2]*J;Wt+=Math.abs((S[on]-S[xn])*(S[Jt+1]-S[on+1])-(S[on]-S[Jt])*(S[xn+1]-S[on+1]))}return 0===Ne&&0===Wt?0:Math.abs((Wt-Ne)/Ne)},pd.flatten=function(S){for(var z=S[0][0].length,J={vertices:[],holes:[],dimensions:z},ce=0,be=0;be<S.length;be++){for(var Ae=0;Ae<S[be].length;Ae++)for(var Ne=0;Ne<z;Ne++)J.vertices.push(S[be][Ae][Ne]);be>0&&J.holes.push(ce+=S[be-1].length)}return J},Op.default=dy;var Nl=function(S){this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=S.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new so,this.indexArray=new ks,this.indexArray2=new H,this.programConfigurations=new no(Rg,S.layers,S.zoom),this.segments=new Gt,this.segments2=new Gt,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};Nl.prototype.populate=function(S,z,J){this.hasPattern=yd("fill",this.layers,z);for(var ce=this.layers[0].layout.get("fill-sort-key"),be=[],Ae=0,Ne=S;Ae<Ne.length;Ae+=1){var We=Ne[Ae],st=We.feature,vt=We.id,Tt=We.index,Wt=We.sourceLayerIndex,on=this.layers[0]._featureFilter.needGeometry,Jt={type:st.type,id:vt,properties:st.properties,geometry:on?Do(st):[]};if(this.layers[0]._featureFilter.filter(new Ia(this.zoom),Jt,J)){on||(Jt.geometry=Do(st));var xn=ce?ce.evaluate(Jt,{},J,z.availableImages):void 0;be.push({id:vt,properties:st.properties,type:st.type,sourceLayerIndex:Wt,index:Tt,geometry:Jt.geometry,patterns:{},sortKey:xn})}}ce&&be.sort(function(_i,Ri){return _i.sortKey-Ri.sortKey});for(var Wn=0,Gn=be;Wn<Gn.length;Wn+=1){var ir=Gn[Wn],dr=ir.geometry,Rr=ir.index,qr=ir.sourceLayerIndex;if(this.hasPattern){var fi=kh("fill",this.layers,ir,this.zoom,z);this.patternFeatures.push(fi)}else this.addFeature(ir,dr,Rr,J,{});z.featureIndex.insert(S[Rr].feature,dr,Rr,qr,this.index)}},Nl.prototype.update=function(S,z,J){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(S,z,this.stateDependentLayers,J)},Nl.prototype.addFeatures=function(S,z,J){for(var ce=0,be=this.patternFeatures;ce<be.length;ce+=1){var Ae=be[ce];this.addFeature(Ae,Ae.geometry,Ae.index,z,J)}},Nl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Nl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Nl.prototype.upload=function(S){this.uploaded||(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,Rg),this.indexBuffer=S.createIndexBuffer(this.indexArray),this.indexBuffer2=S.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(S),this.uploaded=!0},Nl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Nl.prototype.addFeature=function(S,z,J,ce,be){for(var Ae=0,Ne=zu(z,500);Ae<Ne.length;Ae+=1){for(var We=Ne[Ae],st=0,vt=0,Tt=We;vt<Tt.length;vt+=1)st+=Tt[vt].length;for(var Wt=this.segments.prepareSegment(st,this.layoutVertexArray,this.indexArray),on=Wt.vertexLength,Jt=[],xn=[],Ln=0,Wn=We;Ln<Wn.length;Ln+=1){var Gn=Wn[Ln];if(0!==Gn.length){Gn!==We[0]&&xn.push(Jt.length/2);var ir=this.segments2.prepareSegment(Gn.length,this.layoutVertexArray,this.indexArray2),or=ir.vertexLength;this.layoutVertexArray.emplaceBack(Gn[0].x,Gn[0].y),this.indexArray2.emplaceBack(or+Gn.length-1,or),Jt.push(Gn[0].x),Jt.push(Gn[0].y);for(var dr=1;dr<Gn.length;dr++)this.layoutVertexArray.emplaceBack(Gn[dr].x,Gn[dr].y),this.indexArray2.emplaceBack(or+dr-1,or+dr),Jt.push(Gn[dr].x),Jt.push(Gn[dr].y);ir.vertexLength+=Gn.length,ir.primitiveLength+=Gn.length}}for(var Rr=Op(Jt,xn),qr=0;qr<Rr.length;qr+=3)this.indexArray.emplaceBack(on+Rr[qr],on+Rr[qr+1],on+Rr[qr+2]);Wt.vertexLength+=st,Wt.primitiveLength+=Rr.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,S,J,be,ce)},fr("FillBucket",Nl,{omit:["layers","patternFeatures"]});var zg=new Os({"fill-sort-key":new Ki(Ve.layout_fill["fill-sort-key"])}),yy={paint:new Os({"fill-antialias":new zi(Ve.paint_fill["fill-antialias"]),"fill-opacity":new Ki(Ve.paint_fill["fill-opacity"]),"fill-color":new Ki(Ve.paint_fill["fill-color"]),"fill-outline-color":new Ki(Ve.paint_fill["fill-outline-color"]),"fill-translate":new zi(Ve.paint_fill["fill-translate"]),"fill-translate-anchor":new zi(Ve.paint_fill["fill-translate-anchor"]),"fill-pattern":new Yl(Ve.paint_fill["fill-pattern"])}),layout:zg},xy=function(S){function z(J){S.call(this,J,yy)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.recalculate=function(J,ce){S.prototype.recalculate.call(this,J,ce);var be=this.paint._values["fill-outline-color"];"constant"===be.value.kind&&void 0===be.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},z.prototype.createBucket=function(J){return new Nl(J)},z.prototype.queryRadius=function(){return $s(this.paint.get("fill-translate"))},z.prototype.queryIntersectsFeature=function(J,ce,be,Ae,Ne,We,st){return ma(Xs(J,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),We.angle,st),Ae)},z.prototype.isTileClipped=function(){return!0},z}(Zs),$c=ga([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Cf=Ef;function Ef(S,z,J,ce,be){this.properties={},this.extent=J,this.type=0,this._pbf=S,this._geometry=-1,this._keys=ce,this._values=be,S.readFields(o_,this,z)}function o_(S,z,J){1==S?z.id=J.readVarint():2==S?function(ce,be){for(var Ae=ce.readVarint()+ce.pos;ce.pos<Ae;){var Ne=be._keys[ce.readVarint()],We=be._values[ce.readVarint()];be.properties[Ne]=We}}(J,z):3==S?z.type=J.readVarint():4==S&&(z._geometry=J.pos)}function Bg(S){for(var z,J,ce=0,be=0,Ae=S.length,Ne=Ae-1;be<Ae;Ne=be++)ce+=((J=S[Ne]).x-(z=S[be]).x)*(z.y+J.y);return ce}Ef.types=["Unknown","Point","LineString","Polygon"],Ef.prototype.loadGeometry=function(){var S=this._pbf;S.pos=this._geometry;for(var z,J=S.readVarint()+S.pos,ce=1,be=0,Ae=0,Ne=0,We=[];S.pos<J;){if(be<=0){var st=S.readVarint();ce=7&st,be=st>>3}if(be--,1===ce||2===ce)Ae+=S.readSVarint(),Ne+=S.readSVarint(),1===ce&&(z&&We.push(z),z=[]),z.push(new i(Ae,Ne));else{if(7!==ce)throw new Error("unknown command "+ce);z&&z.push(z[0].clone())}}return z&&We.push(z),We},Ef.prototype.bbox=function(){var S=this._pbf;S.pos=this._geometry;for(var z=S.readVarint()+S.pos,J=1,ce=0,be=0,Ae=0,Ne=1/0,We=-1/0,st=1/0,vt=-1/0;S.pos<z;){if(ce<=0){var Tt=S.readVarint();J=7&Tt,ce=Tt>>3}if(ce--,1===J||2===J)(be+=S.readSVarint())<Ne&&(Ne=be),be>We&&(We=be),(Ae+=S.readSVarint())<st&&(st=Ae),Ae>vt&&(vt=Ae);else if(7!==J)throw new Error("unknown command "+J)}return[Ne,st,We,vt]},Ef.prototype.toGeoJSON=function(S,z,J){var ce,be,Ae=this.extent*Math.pow(2,J),Ne=this.extent*S,We=this.extent*z,st=this.loadGeometry(),vt=Ef.types[this.type];function Tt(Jt){for(var xn=0;xn<Jt.length;xn++){var Ln=Jt[xn];Jt[xn]=[360*(Ln.x+Ne)/Ae-180,360/Math.PI*Math.atan(Math.exp((180-360*(Ln.y+We)/Ae)*Math.PI/180))-90]}}switch(this.type){case 1:var Wt=[];for(ce=0;ce<st.length;ce++)Wt[ce]=st[ce][0];Tt(st=Wt);break;case 2:for(ce=0;ce<st.length;ce++)Tt(st[ce]);break;case 3:for(st=function(Jt){var xn=Jt.length;if(xn<=1)return[Jt];for(var Ln,Wn,Gn=[],ir=0;ir<xn;ir++){var or=Bg(Jt[ir]);0!==or&&(void 0===Wn&&(Wn=or<0),Wn===or<0?(Ln&&Gn.push(Ln),Ln=[Jt[ir]]):Ln.push(Jt[ir]))}return Ln&&Gn.push(Ln),Gn}(st),ce=0;ce<st.length;ce++)for(be=0;be<st[ce].length;be++)Tt(st[ce][be])}1===st.length?st=st[0]:vt="Multi"+vt;var on={type:"Feature",geometry:{type:vt,coordinates:st},properties:this.properties};return"id"in this&&(on.id=this.id),on};var jg=by;function by(S,z){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=S,this._keys=[],this._values=[],this._features=[],S.readFields(_y,this,z),this.length=this._features.length}function _y(S,z,J){15===S?z.version=J.readVarint():1===S?z.name=J.readString():5===S?z.extent=J.readVarint():2===S?z._features.push(J.pos):3===S?z._keys.push(J.readString()):4===S&&z._values.push(function(ce){for(var be=null,Ae=ce.readVarint()+ce.pos;ce.pos<Ae;){var Ne=ce.readVarint()>>3;be=1===Ne?ce.readString():2===Ne?ce.readFloat():3===Ne?ce.readDouble():4===Ne?ce.readVarint64():5===Ne?ce.readVarint():6===Ne?ce.readSVarint():7===Ne?ce.readBoolean():null}return be}(J))}function wy(S,z,J){if(3===S){var ce=new jg(J,J.readVarint()+J.pos);ce.length&&(z[ce.name]=ce)}}by.prototype.feature=function(S){if(S<0||S>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[S];var z=this._pbf.readVarint()+this._pbf.pos;return new Cf(this._pbf,z,this.extent,this._keys,this._values)};var Sf={VectorTile:function(S,z){this.layers=S.readFields(wy,{},z)},VectorTileFeature:Cf,VectorTileLayer:jg},xd=Sf.VectorTileFeature.types,Ah=Math.pow(2,13);function Bu(S,z,J,ce,be,Ae,Ne,We){S.emplaceBack(z,J,2*Math.floor(ce*Ah)+Ne,be*Ah*2,Ae*Ah*2,Math.round(We))}var bu=function(S){this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=S.index,this.hasPattern=!1,this.layoutVertexArray=new Zl,this.indexArray=new ks,this.programConfigurations=new no($c,S.layers,S.zoom),this.segments=new Gt,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};function Ty(S,z){return S.x===z.x&&(S.x<0||S.x>8192)||S.y===z.y&&(S.y<0||S.y>8192)}function s_(S){return S.every(function(z){return z.x<0})||S.every(function(z){return z.x>8192})||S.every(function(z){return z.y<0})||S.every(function(z){return z.y>8192})}bu.prototype.populate=function(S,z,J){this.features=[],this.hasPattern=yd("fill-extrusion",this.layers,z);for(var ce=0,be=S;ce<be.length;ce+=1){var Ae=be[ce],Ne=Ae.feature,We=Ae.id,st=Ae.index,vt=Ae.sourceLayerIndex,Tt=this.layers[0]._featureFilter.needGeometry,Wt={type:Ne.type,id:We,properties:Ne.properties,geometry:Tt?Do(Ne):[]};if(this.layers[0]._featureFilter.filter(new Ia(this.zoom),Wt,J)){var on={id:We,sourceLayerIndex:vt,index:st,geometry:Tt?Wt.geometry:Do(Ne),properties:Ne.properties,type:Ne.type,patterns:{}};void 0!==Ne.id&&(on.id=Ne.id),this.hasPattern?this.features.push(kh("fill-extrusion",this.layers,on,this.zoom,z)):this.addFeature(on,on.geometry,st,J,{}),z.featureIndex.insert(Ne,on.geometry,st,vt,this.index,!0)}}},bu.prototype.addFeatures=function(S,z,J){for(var ce=0,be=this.features;ce<be.length;ce+=1){var Ae=be[ce];this.addFeature(Ae,Ae.geometry,Ae.index,z,J)}},bu.prototype.update=function(S,z,J){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(S,z,this.stateDependentLayers,J)},bu.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},bu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},bu.prototype.upload=function(S){this.uploaded||(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,$c),this.indexBuffer=S.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(S),this.uploaded=!0},bu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},bu.prototype.addFeature=function(S,z,J,ce,be){for(var Ae=0,Ne=zu(z,500);Ae<Ne.length;Ae+=1){for(var We=Ne[Ae],st=0,vt=0,Tt=We;vt<Tt.length;vt+=1)st+=Tt[vt].length;for(var Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),on=0,Jt=We;on<Jt.length;on+=1){var xn=Jt[on];if(0!==xn.length&&!s_(xn))for(var Ln=0,Wn=0;Wn<xn.length;Wn++){var Gn=xn[Wn];if(Wn>=1){var ir=xn[Wn-1];if(!Ty(Gn,ir)){Wt.vertexLength+4>Gt.MAX_VERTEX_ARRAY_LENGTH&&(Wt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var or=Gn.sub(ir)._perp()._unit(),dr=ir.dist(Gn);Ln+dr>32768&&(Ln=0),Bu(this.layoutVertexArray,Gn.x,Gn.y,or.x,or.y,0,0,Ln),Bu(this.layoutVertexArray,Gn.x,Gn.y,or.x,or.y,0,1,Ln),Bu(this.layoutVertexArray,ir.x,ir.y,or.x,or.y,0,0,Ln+=dr),Bu(this.layoutVertexArray,ir.x,ir.y,or.x,or.y,0,1,Ln);var Rr=Wt.vertexLength;this.indexArray.emplaceBack(Rr,Rr+2,Rr+1),this.indexArray.emplaceBack(Rr+1,Rr+2,Rr+3),Wt.vertexLength+=4,Wt.primitiveLength+=2}}}}if(Wt.vertexLength+st>Gt.MAX_VERTEX_ARRAY_LENGTH&&(Wt=this.segments.prepareSegment(st,this.layoutVertexArray,this.indexArray)),"Polygon"===xd[S.type]){for(var qr=[],fi=[],si=Wt.vertexLength,_i=0,Ri=We;_i<Ri.length;_i+=1){var Oi=Ri[_i];if(0!==Oi.length){Oi!==We[0]&&fi.push(qr.length/2);for(var Ci=0;Ci<Oi.length;Ci++){var Hi=Oi[Ci];Bu(this.layoutVertexArray,Hi.x,Hi.y,0,0,1,1,0),qr.push(Hi.x),qr.push(Hi.y)}}}for(var Vi=Op(qr,fi),Fi=0;Fi<Vi.length;Fi+=3)this.indexArray.emplaceBack(si+Vi[Fi],si+Vi[Fi+2],si+Vi[Fi+1]);Wt.primitiveLength+=Vi.length/3,Wt.vertexLength+=st}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,S,J,be,ce)},fr("FillExtrusionBucket",bu,{omit:["layers","features"]});var bd={paint:new Os({"fill-extrusion-opacity":new zi(Ve["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ki(Ve["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new zi(Ve["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new zi(Ve["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Yl(Ve["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ki(Ve["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ki(Ve["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new zi(Ve["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},Np=function(S){function z(J){S.call(this,J,bd)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.createBucket=function(J){return new bu(J)},z.prototype.queryRadius=function(){return $s(this.paint.get("fill-extrusion-translate"))},z.prototype.is3D=function(){return!0},z.prototype.queryIntersectsFeature=function(J,ce,be,Ae,Ne,We,st,vt){var Tt=Xs(J,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),We.angle,st),Wt=this.paint.get("fill-extrusion-height").evaluate(ce,be),on=this.paint.get("fill-extrusion-base").evaluate(ce,be),Jt=function(Ln,Wn,Gn,ir){for(var or=[],dr=0,Rr=Ln;dr<Rr.length;dr+=1){var qr=Rr[dr],fi=[qr.x,qr.y,0,1];yu(fi,fi,Wn),or.push(new i(fi[0]/fi[3],fi[1]/fi[3]))}return or}(Tt,vt),xn=function(Ln,Wn,Gn,ir){for(var or=[],dr=[],Rr=ir[8]*Wn,qr=ir[9]*Wn,fi=ir[10]*Wn,si=ir[11]*Wn,_i=ir[8]*Gn,Ri=ir[9]*Gn,Oi=ir[10]*Gn,Ci=ir[11]*Gn,Hi=0,Vi=Ln;Hi<Vi.length;Hi+=1){for(var xa=[],ja=[],Za=0,ia=Vi[Hi];Za<ia.length;Za+=1){var Ha=ia[Za],Ao=Ha.x,wo=Ha.y,Oo=ir[0]*Ao+ir[4]*wo+ir[12],To=ir[1]*Ao+ir[5]*wo+ir[13],As=ir[2]*Ao+ir[6]*wo+ir[14],No=ir[3]*Ao+ir[7]*wo+ir[15],ea=As+fi,Pi=No+si,Ds=Oo+_i,zs=To+Ri,Go=As+Oi,vs=No+Ci,Bs=new i((Oo+Rr)/Pi,(To+qr)/Pi);Bs.z=ea/Pi,xa.push(Bs);var ns=new i(Ds/vs,zs/vs);ns.z=Go/vs,ja.push(ns)}or.push(xa),dr.push(ja)}return[or,dr]}(Ae,on,Wt,vt);return function(Ln,Wn,Gn){var ir=1/0;ma(Gn,Wn)&&(ir=zp(Gn,Wn[0]));for(var or=0;or<Wn.length;or++)for(var dr=Wn[or],Rr=Ln[or],qr=0;qr<dr.length-1;qr++){var fi=dr[qr],Oi=[fi,dr[qr+1],Rr[qr+1],Rr[qr],fi];il(Gn,Oi)&&(ir=Math.min(ir,zp(Gn,Oi)))}return ir!==1/0&&ir}(xn[0],xn[1],Jt)},z}(Zs);function Df(S,z){return S.x*z.x+S.y*z.y}function zp(S,z){if(1===S.length){for(var J,ce=0,be=z[ce++];!J||be.equals(J);)if(!(J=z[ce++]))return 1/0;for(;ce<z.length;ce++){var Ae=z[ce],Ne=S[0],We=J.sub(be),st=Ae.sub(be),vt=Ne.sub(be),Tt=Df(We,We),Wt=Df(We,st),on=Df(st,st),Jt=Df(vt,We),xn=Df(vt,st),Ln=Tt*on-Wt*Wt,Wn=(on*Jt-Wt*xn)/Ln,Gn=(Tt*xn-Wt*Jt)/Ln,or=be.z*(1-Wn-Gn)+J.z*Wn+Ae.z*Gn;if(isFinite(or))return or}return 1/0}for(var dr=1/0,Rr=0,qr=z;Rr<qr.length;Rr+=1)dr=Math.min(dr,qr[Rr].z);return dr}var Bp=ga([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Xc=Sf.VectorTileFeature.types,My=Math.cos(Math.PI/180*37.5),Vg=Math.pow(2,14)/.5,vl=function(S){this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=S.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new pu,this.indexArray=new ks,this.programConfigurations=new no(Bp,S.layers,S.zoom),this.segments=new Gt,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};vl.prototype.populate=function(S,z,J){this.hasPattern=yd("line",this.layers,z);for(var ce=this.layers[0].layout.get("line-sort-key"),be=[],Ae=0,Ne=S;Ae<Ne.length;Ae+=1){var We=Ne[Ae],st=We.feature,vt=We.id,Tt=We.index,Wt=We.sourceLayerIndex,on=this.layers[0]._featureFilter.needGeometry,Jt={type:st.type,id:vt,properties:st.properties,geometry:on?Do(st):[]};if(this.layers[0]._featureFilter.filter(new Ia(this.zoom),Jt,J)){on||(Jt.geometry=Do(st));var xn=ce?ce.evaluate(Jt,{},J):void 0;be.push({id:vt,properties:st.properties,type:st.type,sourceLayerIndex:Wt,index:Tt,geometry:Jt.geometry,patterns:{},sortKey:xn})}}ce&&be.sort(function(_i,Ri){return _i.sortKey-Ri.sortKey});for(var Wn=0,Gn=be;Wn<Gn.length;Wn+=1){var ir=Gn[Wn],dr=ir.geometry,Rr=ir.index,qr=ir.sourceLayerIndex;if(this.hasPattern){var fi=kh("line",this.layers,ir,this.zoom,z);this.patternFeatures.push(fi)}else this.addFeature(ir,dr,Rr,J,{});z.featureIndex.insert(S[Rr].feature,dr,Rr,qr,this.index)}},vl.prototype.update=function(S,z,J){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(S,z,this.stateDependentLayers,J)},vl.prototype.addFeatures=function(S,z,J){for(var ce=0,be=this.patternFeatures;ce<be.length;ce+=1){var Ae=be[ce];this.addFeature(Ae,Ae.geometry,Ae.index,z,J)}},vl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},vl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},vl.prototype.upload=function(S){this.uploaded||(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,Bp),this.indexBuffer=S.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(S),this.uploaded=!0},vl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},vl.prototype.addFeature=function(S,z,J,ce,be){for(var Ae=this.layers[0].layout,Ne=Ae.get("line-join").evaluate(S,{}),We=Ae.get("line-cap"),st=Ae.get("line-miter-limit"),vt=Ae.get("line-round-limit"),Tt=0,Wt=z;Tt<Wt.length;Tt+=1)this.addLine(Wt[Tt],S,Ne,We,st,vt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,S,J,be,ce)},vl.prototype.addLine=function(S,z,J,ce,be,Ae){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,z.properties&&z.properties.hasOwnProperty("mapbox_clip_start")&&z.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+z.properties.mapbox_clip_start,this.clipEnd=+z.properties.mapbox_clip_end;for(var Ne=0;Ne<S.length-1;Ne++)this.totalDistance+=S[Ne].dist(S[Ne+1]);this.updateScaledDistance()}for(var We="Polygon"===Xc[z.type],st=S.length;st>=2&&S[st-1].equals(S[st-2]);)st--;for(var vt=0;vt<st-1&&S[vt].equals(S[vt+1]);)vt++;if(!(st<(We?3:2))){"bevel"===J&&(be=1.05);var Tt,Wt=this.overscaling<=16?122880/(512*this.overscaling):0,on=this.segments.prepareSegment(10*st,this.layoutVertexArray,this.indexArray),Jt=void 0,xn=void 0,Ln=void 0,Wn=void 0;this.e1=this.e2=-1,We&&(Wn=S[vt].sub(Tt=S[st-2])._unit()._perp());for(var Gn=vt;Gn<st;Gn++)if(!(xn=Gn===st-1?We?S[vt+1]:void 0:S[Gn+1])||!S[Gn].equals(xn)){Wn&&(Ln=Wn),Tt&&(Jt=Tt),Tt=S[Gn],Wn=xn?xn.sub(Tt)._unit()._perp():Ln;var ir=(Ln=Ln||Wn).add(Wn);0===ir.x&&0===ir.y||ir._unit();var or=Ln.x*Wn.x+Ln.y*Wn.y,dr=ir.x*Wn.x+ir.y*Wn.y,Rr=0!==dr?1/dr:1/0,qr=2*Math.sqrt(2-2*dr),fi=dr<My&&Jt&&xn,si=Ln.x*Wn.y-Ln.y*Wn.x>0;if(fi&&Gn>vt){var _i=Tt.dist(Jt);if(_i>2*Wt){var Ri=Tt.sub(Tt.sub(Jt)._mult(Wt/_i)._round());this.updateDistance(Jt,Ri),this.addCurrentVertex(Ri,Ln,0,0,on),Jt=Ri}}var Oi=Jt&&xn,Ci=Oi?J:We?"butt":ce;if(Oi&&"round"===Ci&&(Rr<Ae?Ci="miter":Rr<=2&&(Ci="fakeround")),"miter"===Ci&&Rr>be&&(Ci="bevel"),"bevel"===Ci&&(Rr>2&&(Ci="flipbevel"),Rr<be&&(Ci="miter")),Jt&&this.updateDistance(Jt,Tt),"miter"===Ci)ir._mult(Rr),this.addCurrentVertex(Tt,ir,0,0,on);else if("flipbevel"===Ci){if(Rr>100)ir=Wn.mult(-1);else{var Hi=Rr*Ln.add(Wn).mag()/Ln.sub(Wn).mag();ir._perp()._mult(Hi*(si?-1:1))}this.addCurrentVertex(Tt,ir,0,0,on),this.addCurrentVertex(Tt,ir.mult(-1),0,0,on)}else if("bevel"===Ci||"fakeround"===Ci){var Vi=-Math.sqrt(Rr*Rr-1),Fi=si?Vi:0,xa=si?0:Vi;if(Jt&&this.addCurrentVertex(Tt,Ln,Fi,xa,on),"fakeround"===Ci)for(var ja=Math.round(180*qr/Math.PI/20),Za=1;Za<ja;Za++){var ia=Za/ja;if(.5!==ia){var Ha=ia-.5;ia+=ia*Ha*(ia-1)*((1.0904+or*(or*(3.55645-1.43519*or)-3.2452))*Ha*Ha+(.848013+or*(.215638*or-1.06021)))}var Ao=Wn.sub(Ln)._mult(ia)._add(Ln)._unit()._mult(si?-1:1);this.addHalfVertex(Tt,Ao.x,Ao.y,!1,si,0,on)}xn&&this.addCurrentVertex(Tt,Wn,-Fi,-xa,on)}else if("butt"===Ci)this.addCurrentVertex(Tt,ir,0,0,on);else if("square"===Ci){var wo=Jt?1:-1;this.addCurrentVertex(Tt,ir,wo,wo,on)}else"round"===Ci&&(Jt&&(this.addCurrentVertex(Tt,Ln,0,0,on),this.addCurrentVertex(Tt,Ln,1,1,on,!0)),xn&&(this.addCurrentVertex(Tt,Wn,-1,-1,on,!0),this.addCurrentVertex(Tt,Wn,0,0,on)));if(fi&&Gn<st-1){var Oo=Tt.dist(xn);if(Oo>2*Wt){var To=Tt.add(xn.sub(Tt)._mult(Wt/Oo)._round());this.updateDistance(Tt,To),this.addCurrentVertex(To,Wn,0,0,on),Tt=To}}}}},vl.prototype.addCurrentVertex=function(S,z,J,ce,be,Ae){void 0===Ae&&(Ae=!1);var st=z.y*ce-z.x,vt=-z.y-z.x*ce;this.addHalfVertex(S,z.x+z.y*J,z.y-z.x*J,Ae,!1,J,be),this.addHalfVertex(S,st,vt,Ae,!0,-ce,be),this.distance>Vg/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(S,z,J,ce,be,Ae))},vl.prototype.addHalfVertex=function(S,z,J,ce,be,Ae,Ne){var vt=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((S.x<<1)+(ce?1:0),(S.y<<1)+(be?1:0),Math.round(63*z)+128,Math.round(63*J)+128,1+(0===Ae?0:Ae<0?-1:1)|(63&vt)<<2,vt>>6);var Tt=Ne.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Tt),Ne.primitiveLength++),be?this.e2=Tt:this.e1=Tt},vl.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Vg-1):this.distance},vl.prototype.updateDistance=function(S,z){this.distance+=S.dist(z),this.updateScaledDistance()},fr("LineBucket",vl,{omit:["layers","patternFeatures"]});var ky=new Os({"line-cap":new zi(Ve.layout_line["line-cap"]),"line-join":new Ki(Ve.layout_line["line-join"]),"line-miter-limit":new zi(Ve.layout_line["line-miter-limit"]),"line-round-limit":new zi(Ve.layout_line["line-round-limit"]),"line-sort-key":new Ki(Ve.layout_line["line-sort-key"])}),Ug={paint:new Os({"line-opacity":new Ki(Ve.paint_line["line-opacity"]),"line-color":new Ki(Ve.paint_line["line-color"]),"line-translate":new zi(Ve.paint_line["line-translate"]),"line-translate-anchor":new zi(Ve.paint_line["line-translate-anchor"]),"line-width":new Ki(Ve.paint_line["line-width"]),"line-gap-width":new Ki(Ve.paint_line["line-gap-width"]),"line-offset":new Ki(Ve.paint_line["line-offset"]),"line-blur":new Ki(Ve.paint_line["line-blur"]),"line-dasharray":new fu(Ve.paint_line["line-dasharray"]),"line-pattern":new Yl(Ve.paint_line["line-pattern"]),"line-gradient":new pl(Ve.paint_line["line-gradient"])}),layout:ky},zl=new(function(S){function z(){S.apply(this,arguments)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.possiblyEvaluate=function(J,ce){return ce=new Ia(Math.floor(ce.zoom),{now:ce.now,fadeDuration:ce.fadeDuration,zoomHistory:ce.zoomHistory,transition:ce.transition}),S.prototype.possiblyEvaluate.call(this,J,ce)},z.prototype.evaluate=function(J,ce,be,Ae){return ce=f({},ce,{zoom:Math.floor(ce.zoom)}),S.prototype.evaluate.call(this,J,ce,be,Ae)},z}(Ki))(Ug.paint.properties["line-width"].specification);zl.useIntegerZoom=!0;var ju=function(S){function z(J){S.call(this,J,Ug)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype._handleSpecialPaintPropertyUpdate=function(J){"line-gradient"===J&&this._updateGradient()},z.prototype._updateGradient=function(){this.gradient=Zc(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},z.prototype.recalculate=function(J,ce){S.prototype.recalculate.call(this,J,ce),this.paint._values["line-floorwidth"]=zl.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,J)},z.prototype.createBucket=function(J){return new vl(J)},z.prototype.queryRadius=function(J){var ce=J,be=jp(Uo("line-width",this,ce),Uo("line-gap-width",this,ce)),Ae=Uo("line-offset",this,ce);return be/2+Math.abs(Ae)+$s(this.paint.get("line-translate"))},z.prototype.queryIntersectsFeature=function(J,ce,be,Ae,Ne,We,st){var vt=Xs(J,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),We.angle,st),Tt=st/2*jp(this.paint.get("line-width").evaluate(ce,be),this.paint.get("line-gap-width").evaluate(ce,be)),Wt=this.paint.get("line-offset").evaluate(ce,be);return Wt&&(Ae=function(on,Jt){for(var xn=[],Ln=new i(0,0),Wn=0;Wn<on.length;Wn++){for(var Gn=on[Wn],ir=[],or=0;or<Gn.length;or++){var Rr=Gn[or],qr=Gn[or+1],fi=0===or?Ln:Rr.sub(Gn[or-1])._unit()._perp(),si=or===Gn.length-1?Ln:qr.sub(Rr)._unit()._perp(),_i=fi._add(si)._unit();_i._mult(1/(_i.x*si.x+_i.y*si.y)),ir.push(_i._mult(Jt)._add(Rr))}xn.push(ir)}return xn}(Ae,Wt*st)),function(on,Jt,xn){for(var Ln=0;Ln<Jt.length;Ln++){var Wn=Jt[Ln];if(on.length>=3)for(var Gn=0;Gn<Wn.length;Gn++)if(Rl(on,Wn[Gn]))return!0;if(Gc(on,Wn,xn))return!0}return!1}(vt,Ae,Tt)},z.prototype.isTileClipped=function(){return!0},z}(Zs);function jp(S,z){return z>0?z+2*S:S}var Vp=ga([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Ay=ga([{name:"a_projected_pos",components:3,type:"Float32"}],4),Cy=(ga([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ga([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),Hg=(ga([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),ga([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ey=ga([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function qg(S,z,J){return S.sections.forEach(function(ce){var be,Ne,We;ce.text=(be=ce.text,Ne=J,"uppercase"===(We=z.layout.get("text-transform").evaluate(Ne,{}))?be=be.toLocaleUpperCase():"lowercase"===We&&(be=be.toLocaleLowerCase()),Ko.applyArabicShaping&&(be=Ko.applyArabicShaping(be)),be)}),S}ga([{name:"triangle",components:3,type:"Uint16"}]),ga([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ga([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ga([{type:"Float32",name:"offsetX"}]),ga([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Ch={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Gg=function(S,z,J,ce,be){var Ae,Ne,We=8*be-ce-1,st=(1<<We)-1,vt=st>>1,Tt=-7,Wt=J?be-1:0,on=J?-1:1,Jt=S[z+Wt];for(Wt+=on,Ae=Jt&(1<<-Tt)-1,Jt>>=-Tt,Tt+=We;Tt>0;Ae=256*Ae+S[z+Wt],Wt+=on,Tt-=8);for(Ne=Ae&(1<<-Tt)-1,Ae>>=-Tt,Tt+=ce;Tt>0;Ne=256*Ne+S[z+Wt],Wt+=on,Tt-=8);if(0===Ae)Ae=1-vt;else{if(Ae===st)return Ne?NaN:1/0*(Jt?-1:1);Ne+=Math.pow(2,ce),Ae-=vt}return(Jt?-1:1)*Ne*Math.pow(2,Ae-ce)},Wg=function(S,z,J,ce,be,Ae){var Ne,We,st,vt=8*Ae-be-1,Tt=(1<<vt)-1,Wt=Tt>>1,on=23===be?Math.pow(2,-24)-Math.pow(2,-77):0,Jt=ce?0:Ae-1,xn=ce?1:-1,Ln=z<0||0===z&&1/z<0?1:0;for(z=Math.abs(z),isNaN(z)||z===1/0?(We=isNaN(z)?1:0,Ne=Tt):(Ne=Math.floor(Math.log(z)/Math.LN2),z*(st=Math.pow(2,-Ne))<1&&(Ne--,st*=2),(z+=Ne+Wt>=1?on/st:on*Math.pow(2,1-Wt))*st>=2&&(Ne++,st/=2),Ne+Wt>=Tt?(We=0,Ne=Tt):Ne+Wt>=1?(We=(z*st-1)*Math.pow(2,be),Ne+=Wt):(We=z*Math.pow(2,Wt-1)*Math.pow(2,be),Ne=0));be>=8;S[J+Jt]=255&We,Jt+=xn,We/=256,be-=8);for(Ne=Ne<<be|We,vt+=be;vt>0;S[J+Jt]=255&Ne,Jt+=xn,Ne/=256,vt-=8);S[J+Jt-xn]|=128*Ln},_d=Io;function Io(S){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(S)?S:new Uint8Array(S||0),this.pos=0,this.type=0,this.length=this.buf.length}Io.Varint=0,Io.Fixed64=1,Io.Bytes=2,Io.Fixed32=5;var Yg="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function $l(S){return S.type===Io.Bytes?S.readVarint()+S.pos:S.pos+1}function _u(S,z,J){var ce=z<=16383?1:z<=2097151?2:z<=268435455?3:Math.floor(Math.log(z)/(7*Math.LN2));J.realloc(ce);for(var be=J.pos-1;be>=S;be--)J.buf[be+ce]=J.buf[be]}function Eh(S,z){for(var J=0;J<S.length;J++)z.writeVarint(S[J])}function Zg(S,z){for(var J=0;J<S.length;J++)z.writeSVarint(S[J])}function $g(S,z){for(var J=0;J<S.length;J++)z.writeFloat(S[J])}function Xg(S,z){for(var J=0;J<S.length;J++)z.writeDouble(S[J])}function l_(S,z){for(var J=0;J<S.length;J++)z.writeBoolean(S[J])}function u_(S,z){for(var J=0;J<S.length;J++)z.writeFixed32(S[J])}function c_(S,z){for(var J=0;J<S.length;J++)z.writeSFixed32(S[J])}function Up(S,z){for(var J=0;J<S.length;J++)z.writeFixed64(S[J])}function Hp(S,z){for(var J=0;J<S.length;J++)z.writeSFixed64(S[J])}function If(S,z){return(S[z]|S[z+1]<<8|S[z+2]<<16)+16777216*S[z+3]}function Sh(S,z,J){S[J]=z,S[J+1]=z>>>8,S[J+2]=z>>>16,S[J+3]=z>>>24}function Sy(S,z){return(S[z]|S[z+1]<<8|S[z+2]<<16)+(S[z+3]<<24)}function Jg(S,z,J){1===S&&J.readMessage(Dy,z)}function Dy(S,z,J){if(3===S){var ce=J.readMessage(Iy,{}),Ne=ce.width,We=ce.height,st=ce.left,vt=ce.top,Tt=ce.advance;z.push({id:ce.id,bitmap:new kc({width:Ne+6,height:We+6},ce.bitmap),metrics:{width:Ne,height:We,left:st,top:vt,advance:Tt}})}}function Iy(S,z,J){1===S?z.id=J.readVarint():2===S?z.bitmap=J.readBytes():3===S?z.width=J.readVarint():4===S?z.height=J.readVarint():5===S?z.left=J.readSVarint():6===S?z.top=J.readSVarint():7===S&&(z.advance=J.readVarint())}function Kg(S){for(var z=0,J=0,ce=0,be=S;ce<be.length;ce+=1){var Ae=be[ce];z+=Ae.w*Ae.h,J=Math.max(J,Ae.w)}S.sort(function(Ln,Wn){return Wn.h-Ln.h});for(var Ne=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(z/.95)),J),h:1/0}],We=0,st=0,vt=0,Tt=S;vt<Tt.length;vt+=1)for(var Wt=Tt[vt],on=Ne.length-1;on>=0;on--){var Jt=Ne[on];if(!(Wt.w>Jt.w||Wt.h>Jt.h)){if(Wt.x=Jt.x,Wt.y=Jt.y,st=Math.max(st,Wt.y+Wt.h),We=Math.max(We,Wt.x+Wt.w),Wt.w===Jt.w&&Wt.h===Jt.h){var xn=Ne.pop();on<Ne.length&&(Ne[on]=xn)}else Wt.h===Jt.h?(Jt.x+=Wt.w,Jt.w-=Wt.w):Wt.w===Jt.w?(Jt.y+=Wt.h,Jt.h-=Wt.h):(Ne.push({x:Jt.x+Wt.w,y:Jt.y,w:Jt.w-Wt.w,h:Wt.h}),Jt.y+=Wt.h,Jt.h-=Wt.h);break}}return{w:We,h:st,fill:z/(We*st)||0}}Io.prototype={destroy:function(){this.buf=null},readFields:function(S,z,J){for(J=J||this.length;this.pos<J;){var ce=this.readVarint(),be=ce>>3,Ae=this.pos;this.type=7&ce,S(be,z,this),this.pos===Ae&&this.skip(ce)}return z},readMessage:function(S,z){return this.readFields(S,z,this.readVarint()+this.pos)},readFixed32:function(){var S=If(this.buf,this.pos);return this.pos+=4,S},readSFixed32:function(){var S=Sy(this.buf,this.pos);return this.pos+=4,S},readFixed64:function(){var S=If(this.buf,this.pos)+4294967296*If(this.buf,this.pos+4);return this.pos+=8,S},readSFixed64:function(){var S=If(this.buf,this.pos)+4294967296*Sy(this.buf,this.pos+4);return this.pos+=8,S},readFloat:function(){var S=Gg(this.buf,this.pos,!0,23,4);return this.pos+=4,S},readDouble:function(){var S=Gg(this.buf,this.pos,!0,52,8);return this.pos+=8,S},readVarint:function(S){var z,J,ce=this.buf;return z=127&(J=ce[this.pos++]),J<128?z:(z|=(127&(J=ce[this.pos++]))<<7,J<128?z:(z|=(127&(J=ce[this.pos++]))<<14,J<128?z:(z|=(127&(J=ce[this.pos++]))<<21,J<128?z:function(be,Ae,Ne){var We,st,vt=Ne.buf;if(We=(112&(st=vt[Ne.pos++]))>>4,st<128||(We|=(127&(st=vt[Ne.pos++]))<<3,st<128)||(We|=(127&(st=vt[Ne.pos++]))<<10,st<128)||(We|=(127&(st=vt[Ne.pos++]))<<17,st<128)||(We|=(127&(st=vt[Ne.pos++]))<<24,st<128)||(We|=(1&(st=vt[Ne.pos++]))<<31,st<128))return function(S,z,J){return J?4294967296*z+(S>>>0):4294967296*(z>>>0)+(S>>>0)}(be,We,Ae);throw new Error("Expected varint not more than 10 bytes")}(z|=(15&(J=ce[this.pos]))<<28,S,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var S=this.readVarint();return S%2==1?(S+1)/-2:S/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var S=this.readVarint()+this.pos,z=this.pos;return this.pos=S,S-z>=12&&Yg?Yg.decode(this.buf.subarray(z,S)):function(J,ce,be){for(var Ae="",Ne=ce;Ne<be;){var We,st,vt,Tt=J[Ne],Wt=null,on=Tt>239?4:Tt>223?3:Tt>191?2:1;if(Ne+on>be)break;1===on?Tt<128&&(Wt=Tt):2===on?128==(192&(We=J[Ne+1]))&&(Wt=(31&Tt)<<6|63&We)<=127&&(Wt=null):3===on?(st=J[Ne+2],128==(192&(We=J[Ne+1]))&&128==(192&st)&&((Wt=(15&Tt)<<12|(63&We)<<6|63&st)<=2047||Wt>=55296&&Wt<=57343)&&(Wt=null)):4===on&&(st=J[Ne+2],vt=J[Ne+3],128==(192&(We=J[Ne+1]))&&128==(192&st)&&128==(192&vt)&&((Wt=(15&Tt)<<18|(63&We)<<12|(63&st)<<6|63&vt)<=65535||Wt>=1114112)&&(Wt=null)),null===Wt?(Wt=65533,on=1):Wt>65535&&(Wt-=65536,Ae+=String.fromCharCode(Wt>>>10&1023|55296),Wt=56320|1023&Wt),Ae+=String.fromCharCode(Wt),Ne+=on}return Ae}(this.buf,z,S)},readBytes:function(){var S=this.readVarint()+this.pos,z=this.buf.subarray(this.pos,S);return this.pos=S,z},readPackedVarint:function(S,z){if(this.type!==Io.Bytes)return S.push(this.readVarint(z));var J=$l(this);for(S=S||[];this.pos<J;)S.push(this.readVarint(z));return S},readPackedSVarint:function(S){if(this.type!==Io.Bytes)return S.push(this.readSVarint());var z=$l(this);for(S=S||[];this.pos<z;)S.push(this.readSVarint());return S},readPackedBoolean:function(S){if(this.type!==Io.Bytes)return S.push(this.readBoolean());var z=$l(this);for(S=S||[];this.pos<z;)S.push(this.readBoolean());return S},readPackedFloat:function(S){if(this.type!==Io.Bytes)return S.push(this.readFloat());var z=$l(this);for(S=S||[];this.pos<z;)S.push(this.readFloat());return S},readPackedDouble:function(S){if(this.type!==Io.Bytes)return S.push(this.readDouble());var z=$l(this);for(S=S||[];this.pos<z;)S.push(this.readDouble());return S},readPackedFixed32:function(S){if(this.type!==Io.Bytes)return S.push(this.readFixed32());var z=$l(this);for(S=S||[];this.pos<z;)S.push(this.readFixed32());return S},readPackedSFixed32:function(S){if(this.type!==Io.Bytes)return S.push(this.readSFixed32());var z=$l(this);for(S=S||[];this.pos<z;)S.push(this.readSFixed32());return S},readPackedFixed64:function(S){if(this.type!==Io.Bytes)return S.push(this.readFixed64());var z=$l(this);for(S=S||[];this.pos<z;)S.push(this.readFixed64());return S},readPackedSFixed64:function(S){if(this.type!==Io.Bytes)return S.push(this.readSFixed64());var z=$l(this);for(S=S||[];this.pos<z;)S.push(this.readSFixed64());return S},skip:function(S){var z=7&S;if(z===Io.Varint)for(;this.buf[this.pos++]>127;);else if(z===Io.Bytes)this.pos=this.readVarint()+this.pos;else if(z===Io.Fixed32)this.pos+=4;else{if(z!==Io.Fixed64)throw new Error("Unimplemented type: "+z);this.pos+=8}},writeTag:function(S,z){this.writeVarint(S<<3|z)},realloc:function(S){for(var z=this.length||16;z<this.pos+S;)z*=2;if(z!==this.length){var J=new Uint8Array(z);J.set(this.buf),this.buf=J,this.length=z}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(S){this.realloc(4),Sh(this.buf,S,this.pos),this.pos+=4},writeSFixed32:function(S){this.realloc(4),Sh(this.buf,S,this.pos),this.pos+=4},writeFixed64:function(S){this.realloc(8),Sh(this.buf,-1&S,this.pos),Sh(this.buf,Math.floor(S*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(S){this.realloc(8),Sh(this.buf,-1&S,this.pos),Sh(this.buf,Math.floor(S*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(S){(S=+S||0)>268435455||S<0?function(z,J){var ce,be,Ae,We;if(z>=0?(ce=z%4294967296|0,be=z/4294967296|0):(be=~(-z/4294967296),4294967295^(ce=~(-z%4294967296))?ce=ce+1|0:(ce=0,be=be+1|0)),z>=0x10000000000000000||z<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");J.realloc(10),Ae=ce,(We=J).buf[We.pos++]=127&Ae|128,Ae>>>=7,We.buf[We.pos++]=127&Ae|128,Ae>>>=7,We.buf[We.pos++]=127&Ae|128,Ae>>>=7,We.buf[We.pos++]=127&Ae|128,We.buf[We.pos]=127&(Ae>>>=7),function(Ae,Ne){var We=(7&Ae)<<4;Ne.buf[Ne.pos++]|=We|((Ae>>>=3)?128:0),Ae&&(Ne.buf[Ne.pos++]=127&Ae|((Ae>>>=7)?128:0),Ae&&(Ne.buf[Ne.pos++]=127&Ae|((Ae>>>=7)?128:0),Ae&&(Ne.buf[Ne.pos++]=127&Ae|((Ae>>>=7)?128:0),Ae&&(Ne.buf[Ne.pos++]=127&Ae|((Ae>>>=7)?128:0),Ae&&(Ne.buf[Ne.pos++]=127&Ae)))))}(be,J)}(S,this):(this.realloc(4),this.buf[this.pos++]=127&S|(S>127?128:0),S<=127||(this.buf[this.pos++]=127&(S>>>=7)|(S>127?128:0),S<=127||(this.buf[this.pos++]=127&(S>>>=7)|(S>127?128:0),S<=127||(this.buf[this.pos++]=S>>>7&127))))},writeSVarint:function(S){this.writeVarint(S<0?2*-S-1:2*S)},writeBoolean:function(S){this.writeVarint(Boolean(S))},writeString:function(S){S=String(S),this.realloc(4*S.length),this.pos++;var z=this.pos;this.pos=function(ce,be,Ae){for(var Ne,We,st=0;st<be.length;st++){if((Ne=be.charCodeAt(st))>55295&&Ne<57344){if(!We){Ne>56319||st+1===be.length?(ce[Ae++]=239,ce[Ae++]=191,ce[Ae++]=189):We=Ne;continue}if(Ne<56320){ce[Ae++]=239,ce[Ae++]=191,ce[Ae++]=189,We=Ne;continue}Ne=We-55296<<10|Ne-56320|65536,We=null}else We&&(ce[Ae++]=239,ce[Ae++]=191,ce[Ae++]=189,We=null);Ne<128?ce[Ae++]=Ne:(Ne<2048?ce[Ae++]=Ne>>6|192:(Ne<65536?ce[Ae++]=Ne>>12|224:(ce[Ae++]=Ne>>18|240,ce[Ae++]=Ne>>12&63|128),ce[Ae++]=Ne>>6&63|128),ce[Ae++]=63&Ne|128)}return Ae}(this.buf,S,this.pos);var J=this.pos-z;J>=128&&_u(z,J,this),this.pos=z-1,this.writeVarint(J),this.pos+=J},writeFloat:function(S){this.realloc(4),Wg(this.buf,S,this.pos,!0,23,4),this.pos+=4},writeDouble:function(S){this.realloc(8),Wg(this.buf,S,this.pos,!0,52,8),this.pos+=8},writeBytes:function(S){var z=S.length;this.writeVarint(z),this.realloc(z);for(var J=0;J<z;J++)this.buf[this.pos++]=S[J]},writeRawMessage:function(S,z){this.pos++;var J=this.pos;S(z,this);var ce=this.pos-J;ce>=128&&_u(J,ce,this),this.pos=J-1,this.writeVarint(ce),this.pos+=ce},writeMessage:function(S,z,J){this.writeTag(S,Io.Bytes),this.writeRawMessage(z,J)},writePackedVarint:function(S,z){z.length&&this.writeMessage(S,Eh,z)},writePackedSVarint:function(S,z){z.length&&this.writeMessage(S,Zg,z)},writePackedBoolean:function(S,z){z.length&&this.writeMessage(S,l_,z)},writePackedFloat:function(S,z){z.length&&this.writeMessage(S,$g,z)},writePackedDouble:function(S,z){z.length&&this.writeMessage(S,Xg,z)},writePackedFixed32:function(S,z){z.length&&this.writeMessage(S,u_,z)},writePackedSFixed32:function(S,z){z.length&&this.writeMessage(S,c_,z)},writePackedFixed64:function(S,z){z.length&&this.writeMessage(S,Up,z)},writePackedSFixed64:function(S,z){z.length&&this.writeMessage(S,Hp,z)},writeBytesField:function(S,z){this.writeTag(S,Io.Bytes),this.writeBytes(z)},writeFixed32Field:function(S,z){this.writeTag(S,Io.Fixed32),this.writeFixed32(z)},writeSFixed32Field:function(S,z){this.writeTag(S,Io.Fixed32),this.writeSFixed32(z)},writeFixed64Field:function(S,z){this.writeTag(S,Io.Fixed64),this.writeFixed64(z)},writeSFixed64Field:function(S,z){this.writeTag(S,Io.Fixed64),this.writeSFixed64(z)},writeVarintField:function(S,z){this.writeTag(S,Io.Varint),this.writeVarint(z)},writeSVarintField:function(S,z){this.writeTag(S,Io.Varint),this.writeSVarint(z)},writeStringField:function(S,z){this.writeTag(S,Io.Bytes),this.writeString(z)},writeFloatField:function(S,z){this.writeTag(S,Io.Fixed32),this.writeFloat(z)},writeDoubleField:function(S,z){this.writeTag(S,Io.Fixed64),this.writeDouble(z)},writeBooleanField:function(S,z){this.writeVarintField(S,Boolean(z))}};var wd=function(S,z){var J=z.pixelRatio,ce=z.version,be=z.stretchX,Ae=z.stretchY,Ne=z.content;this.paddedRect=S,this.pixelRatio=J,this.stretchX=be,this.stretchY=Ae,this.content=Ne,this.version=ce},Pf={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Pf.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Pf.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Pf.tlbr.get=function(){return this.tl.concat(this.br)},Pf.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(wd.prototype,Pf);var Ec=function(S,z){var J={},ce={};this.haveRenderCallbacks=[];var be=[];this.addImages(S,J,be),this.addImages(z,ce,be);var Ae=Kg(be),st=new Ho({width:Ae.w||1,height:Ae.h||1});for(var vt in S){var Tt=S[vt],Wt=J[vt].paddedRect;Ho.copy(Tt.data,st,{x:0,y:0},{x:Wt.x+1,y:Wt.y+1},Tt.data)}for(var on in z){var Jt=z[on],xn=ce[on].paddedRect,Ln=xn.x+1,Wn=xn.y+1,Gn=Jt.data.width,ir=Jt.data.height;Ho.copy(Jt.data,st,{x:0,y:0},{x:Ln,y:Wn},Jt.data),Ho.copy(Jt.data,st,{x:0,y:ir-1},{x:Ln,y:Wn-1},{width:Gn,height:1}),Ho.copy(Jt.data,st,{x:0,y:0},{x:Ln,y:Wn+ir},{width:Gn,height:1}),Ho.copy(Jt.data,st,{x:Gn-1,y:0},{x:Ln-1,y:Wn},{width:1,height:ir}),Ho.copy(Jt.data,st,{x:0,y:0},{x:Ln+Gn,y:Wn},{width:1,height:ir})}this.image=st,this.iconPositions=J,this.patternPositions=ce};Ec.prototype.addImages=function(S,z,J){for(var ce in S){var be=S[ce],Ae={x:0,y:0,w:be.data.width+2,h:be.data.height+2};J.push(Ae),z[ce]=new wd(Ae,be),be.hasRenderCallback&&this.haveRenderCallbacks.push(ce)}},Ec.prototype.patchUpdatedImages=function(S,z){for(var J in S.dispatchRenderCallbacks(this.haveRenderCallbacks),S.updatedImages)this.patchUpdatedImage(this.iconPositions[J],S.getImage(J),z),this.patchUpdatedImage(this.patternPositions[J],S.getImage(J),z)},Ec.prototype.patchUpdatedImage=function(S,z,J){if(S&&z&&S.version!==z.version){S.version=z.version;var ce=S.tl;J.update(z.data,void 0,{x:ce[0],y:ce[1]})}},fr("ImagePosition",wd),fr("ImageAtlas",Ec);var El={horizontal:1,vertical:2,horizontalOnly:3},Sc=function(){this.scale=1,this.fontStack="",this.imageName=null};Sc.forText=function(S,z){var J=new Sc;return J.scale=S||1,J.fontStack=z,J},Sc.forImage=function(S){var z=new Sc;return z.imageName=S,z};var Ks=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Po(S,z,J,ce,be,Ae,Ne,We,st,vt,Tt,Wt,on,Jt,xn,Ln){var Wn,Gn=Ks.fromFeature(S,be);Wt===El.vertical&&Gn.verticalizePunctuation();var ir=Ko.processBidirectionalText,or=Ko.processStyledBidirectionalText;if(ir&&1===Gn.sections.length){Wn=[];for(var dr=0,Rr=ir(Gn.toString(),Gp(Gn,vt,Ae,z,ce,Jt,xn));dr<Rr.length;dr+=1){var qr=Rr[dr],fi=new Ks;fi.text=qr,fi.sections=Gn.sections;for(var si=0;si<qr.length;si++)fi.sectionIndex.push(0);Wn.push(fi)}}else if(or){Wn=[];for(var _i=0,Ri=or(Gn.text,Gn.sectionIndex,Gp(Gn,vt,Ae,z,ce,Jt,xn));_i<Ri.length;_i+=1){var Oi=Ri[_i],Ci=new Ks;Ci.text=Oi[0],Ci.sectionIndex=Oi[1],Ci.sections=Gn.sections,Wn.push(Ci)}}else Wn=function(Fi,xa){for(var ja=[],Za=Fi.text,ia=0,Ha=0,Ao=xa;Ha<Ao.length;Ha+=1){var wo=Ao[Ha];ja.push(Fi.substring(ia,wo)),ia=wo}return ia<Za.length&&ja.push(Fi.substring(ia,Za.length)),ja}(Gn,Gp(Gn,vt,Ae,z,ce,Jt,xn));var Hi=[],Vi={positionedLines:Hi,text:Gn.toString(),top:Tt[1],bottom:Tt[1],left:Tt[0],right:Tt[0],writingMode:Wt,iconsInText:!1,verticalizable:!1};return function(Fi,xa,ja,Za,ia,Ha,Ao,wo,Oo,To,As,No){for(var ea=0,Pi=-17,Ds=0,zs=0,Go="right"===wo?1:"left"===wo?0:.5,vs=0,Bs=0,ns=ia;Bs<ns.length;Bs+=1){var Ro=ns[Bs];Ro.trim();var _a=Ro.getMaxScale(),Wa=24*(_a-1),Wo={positionedGlyphs:[],lineOffset:0};Fi.positionedLines[vs]=Wo;var hs=Wo.positionedGlyphs,Yo=0;if(Ro.length()){for(var Zo=0;Zo<Ro.length();Zo++){var Pa=Ro.getSection(Zo),zo=Ro.getSectionIndex(Zo),js=Ro.getCharCode(Zo),ol=0,sl=null,wu=null,Hu=null,Vs=24,Tu=!(Oo===El.horizontal||!As&&!Wi(js)||As&&(Kc[js]||(tf=js,Kr.Arabic(tf)||Kr["Arabic Supplement"](tf)||Kr["Arabic Extended-A"](tf)||Kr["Arabic Presentation Forms-A"](tf)||Kr["Arabic Presentation Forms-B"](tf))));if(Pa.imageName){var qu=Za[Pa.imageName];if(!qu)continue;Hu=Pa.imageName,Fi.iconsInText=Fi.iconsInText||!0,wu=qu.paddedRect;var ou=qu.displaySize;Pa.scale=24*Pa.scale/No,ol=Wa+(24-ou[1]*Pa.scale),Vs=(sl={width:ou[0],height:ou[1],left:1,top:-3,advance:Tu?ou[1]:ou[0]}).advance;var Vf=Tu?ou[0]*Pa.scale-24*_a:ou[1]*Pa.scale-24*_a;Vf>0&&Vf>Yo&&(Yo=Vf)}else{var Uf=ja[Pa.fontStack],Hf=Uf&&Uf[js];if(Hf&&Hf.rect)wu=Hf.rect,sl=Hf.metrics;else{var s0=xa[Pa.fontStack],l0=s0&&s0[js];if(!l0)continue;sl=l0.metrics}ol=24*(_a-Pa.scale)}Tu?(Fi.verticalizable=!0,hs.push({glyph:js,imageName:Hu,x:ea,y:Pi+ol,vertical:Tu,scale:Pa.scale,fontStack:Pa.fontStack,sectionIndex:zo,metrics:sl,rect:wu}),ea+=Vs*Pa.scale+To):(hs.push({glyph:js,imageName:Hu,x:ea,y:Pi+ol,vertical:Tu,scale:Pa.scale,fontStack:Pa.fontStack,sectionIndex:zo,metrics:sl,rect:wu}),ea+=sl.advance*Pa.scale+To)}0!==hs.length&&(Ds=Math.max(ea-To,Ds),Ly(hs,0,hs.length-1,Go,Yo)),ea=0;var c0=Ha*_a+Yo;Wo.lineOffset=Math.max(Yo,Wa),Pi+=c0,zs=Math.max(c0,zs),++vs}else Pi+=Ha,++vs}var tf,Rh=Pi- -17,f0=Wp(Ao),Fh=f0.horizontalAlign,nf=f0.verticalAlign;(function(Od,Mu,qf,Rd,Gf,Wf,Yf,Zf,Nh){var rf,ku=(Mu-qf)*Gf;rf=Wf!==Yf?-Zf*Rd- -17:(-Rd*Nh+.5)*Yf;for(var $f=0,zh=Od;$f<zh.length;$f+=1)for(var Jf=0,Kf=zh[$f].positionedGlyphs;Jf<Kf.length;Jf+=1){var Qf=Kf[Jf];Qf.x+=ku,Qf.y+=rf}})(Fi.positionedLines,Go,Fh,nf,Ds,zs,Ha,Rh,ia.length),Fi.top+=-nf*Rh,Fi.bottom=Fi.top+Rh,Fi.left+=-Fh*Ds,Fi.right=Fi.left+Ds}(Vi,z,J,ce,Wn,Ne,We,st,Wt,vt,on,Ln),!function(Fi){for(var xa=0,ja=Fi;xa<ja.length;xa+=1)if(0!==ja[xa].positionedGlyphs.length)return!1;return!0}(Hi)&&Vi}Ks.fromFeature=function(S,z){for(var J=new Ks,ce=0;ce<S.sections.length;ce++){var be=S.sections[ce];be.image?J.addImageSection(be):J.addTextSection(be,z)}return J},Ks.prototype.length=function(){return this.text.length},Ks.prototype.getSection=function(S){return this.sections[this.sectionIndex[S]]},Ks.prototype.getSectionIndex=function(S){return this.sectionIndex[S]},Ks.prototype.getCharCode=function(S){return this.text.charCodeAt(S)},Ks.prototype.verticalizePunctuation=function(){this.text=function(S){for(var z="",J=0;J<S.length;J++){var ce=S.charCodeAt(J+1)||null,be=S.charCodeAt(J-1)||null;ce&&Dr(ce)&&!Ch[S[J+1]]||be&&Dr(be)&&!Ch[S[J-1]]||!Ch[S[J]]?z+=S[J]:z+=Ch[S[J]]}return z}(this.text)},Ks.prototype.trim=function(){for(var S=0,z=0;z<this.text.length&&Kc[this.text.charCodeAt(z)];z++)S++;for(var J=this.text.length,ce=this.text.length-1;ce>=0&&ce>=S&&Kc[this.text.charCodeAt(ce)];ce--)J--;this.text=this.text.substring(S,J),this.sectionIndex=this.sectionIndex.slice(S,J)},Ks.prototype.substring=function(S,z){var J=new Ks;return J.text=this.text.substring(S,z),J.sectionIndex=this.sectionIndex.slice(S,z),J.sections=this.sections,J},Ks.prototype.toString=function(){return this.text},Ks.prototype.getMaxScale=function(){var S=this;return this.sectionIndex.reduce(function(z,J){return Math.max(z,S.sections[J].scale)},0)},Ks.prototype.addTextSection=function(S,z){this.text+=S.text,this.sections.push(Sc.forText(S.scale,S.fontStack||z));for(var J=this.sections.length-1,ce=0;ce<S.text.length;++ce)this.sectionIndex.push(J)},Ks.prototype.addImageSection=function(S){var z=S.image?S.image.name:"";if(0!==z.length){var J=this.getNextImageSectionCharCode();J?(this.text+=String.fromCharCode(J),this.sections.push(Sc.forImage(z)),this.sectionIndex.push(this.sections.length-1)):D("Reached maximum number of images 6401")}else D("Can't add FormattedSection with an empty image.")},Ks.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Kc={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Sl={};function Lf(S,z,J,ce,be,Ae){if(z.imageName){var Ne=ce[z.imageName];return Ne?Ne.displaySize[0]*z.scale*24/Ae+be:0}var We=J[z.fontStack],st=We&&We[S];return st?st.metrics.advance*z.scale+be:0}function qp(S,z,J,ce){var be=Math.pow(S-z,2);return ce?S<z?be/2:2*be:be+Math.abs(J)*J}function Py(S,z,J){var ce=0;return 10===S&&(ce-=1e4),J&&(ce+=150),40!==S&&65288!==S||(ce+=50),41!==z&&65289!==z||(ce+=50),ce}function Qg(S,z,J,ce,be,Ae){for(var Ne=null,We=qp(z,J,be,Ae),st=0,vt=ce;st<vt.length;st+=1){var Tt=vt[st],Wt=qp(z-Tt.x,J,be,Ae)+Tt.badness;Wt<=We&&(Ne=Tt,We=Wt)}return{index:S,x:z,priorBreak:Ne,badness:We}}function Gp(S,z,J,ce,be,Ae,Ne){if("point"!==Ae)return[];if(!S)return[];for(var We,st=[],vt=function(Wn,Gn,ir,or,dr,Rr){for(var qr=0,fi=0;fi<Wn.length();fi++){var si=Wn.getSection(fi);qr+=Lf(Wn.getCharCode(fi),si,or,dr,Gn,Rr)}return qr/Math.max(1,Math.ceil(qr/ir))}(S,z,J,ce,be,Ne),Tt=S.text.indexOf("\u200b")>=0,Wt=0,on=0;on<S.length();on++){var Jt=S.getSection(on),xn=S.getCharCode(on);if(Kc[xn]||(Wt+=Lf(xn,Jt,ce,be,z,Ne)),on<S.length()-1){var Ln=!((We=xn)<11904||!(Kr["Bopomofo Extended"](We)||Kr.Bopomofo(We)||Kr["CJK Compatibility Forms"](We)||Kr["CJK Compatibility Ideographs"](We)||Kr["CJK Compatibility"](We)||Kr["CJK Radicals Supplement"](We)||Kr["CJK Strokes"](We)||Kr["CJK Symbols and Punctuation"](We)||Kr["CJK Unified Ideographs Extension A"](We)||Kr["CJK Unified Ideographs"](We)||Kr["Enclosed CJK Letters and Months"](We)||Kr["Halfwidth and Fullwidth Forms"](We)||Kr.Hiragana(We)||Kr["Ideographic Description Characters"](We)||Kr["Kangxi Radicals"](We)||Kr["Katakana Phonetic Extensions"](We)||Kr.Katakana(We)||Kr["Vertical Forms"](We)||Kr["Yi Radicals"](We)||Kr["Yi Syllables"](We)));(Sl[xn]||Ln||Jt.imageName)&&st.push(Qg(on+1,Wt,vt,st,Py(xn,S.getCharCode(on+1),Ln&&Tt),!1))}}return function Wn(Gn){return Gn?Wn(Gn.priorBreak).concat(Gn.index):[]}(Qg(S.length(),Wt,vt,st,0,!0))}function Wp(S){var z=.5,J=.5;switch(S){case"right":case"top-right":case"bottom-right":z=1;break;case"left":case"top-left":case"bottom-left":z=0}switch(S){case"bottom":case"bottom-right":case"bottom-left":J=1;break;case"top":case"top-right":case"top-left":J=0}return{horizontalAlign:z,verticalAlign:J}}function Ly(S,z,J,ce,be){if(ce||be)for(var Ae=S[J],We=(S[J].x+Ae.metrics.advance*Ae.scale)*ce,st=z;st<=J;st++)S[st].x-=We,S[st].y+=be}function Oy(S,z,J,ce,be,Ae){var Ne,We=S.image;if(We.content){var st=We.content,vt=We.pixelRatio||1;Ne=[st[0]/vt,st[1]/vt,We.displaySize[0]-st[2]/vt,We.displaySize[1]-st[3]/vt]}var Tt,Wt,on,Jt,xn=z.left*Ae,Ln=z.right*Ae;"width"===J||"both"===J?(Jt=be[0]+xn-ce[3],Wt=be[0]+Ln+ce[1]):Wt=(Jt=be[0]+(xn+Ln-We.displaySize[0])/2)+We.displaySize[0];var Wn=z.top*Ae,Gn=z.bottom*Ae;return"height"===J||"both"===J?(Tt=be[1]+Wn-ce[0],on=be[1]+Gn+ce[2]):on=(Tt=be[1]+(Wn+Gn-We.displaySize[1])/2)+We.displaySize[1],{image:We,top:Tt,right:Wt,bottom:on,left:Jt,collisionPadding:Ne}}Sl[10]=!0,Sl[32]=!0,Sl[38]=!0,Sl[40]=!0,Sl[41]=!0,Sl[43]=!0,Sl[45]=!0,Sl[47]=!0,Sl[173]=!0,Sl[183]=!0,Sl[8203]=!0,Sl[8208]=!0,Sl[8211]=!0,Sl[8231]=!0;var Dh=function(S){function z(J,ce,be,Ae){S.call(this,J,ce),this.angle=be,void 0!==Ae&&(this.segment=Ae)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.clone=function(){return new z(this.x,this.y,this.angle,this.segment)},z}(i);function Qc(S,z){var J=z.expression;if("constant"===J.kind)return{kind:"constant",layoutSize:J.evaluate(new Ia(S+1))};if("source"===J.kind)return{kind:"source"};for(var ce=J.zoomStops,be=J.interpolationType,Ae=0;Ae<ce.length&&ce[Ae]<=S;)Ae++;for(var Ne=Ae=Math.max(0,Ae-1);Ne<ce.length&&ce[Ne]<S+1;)Ne++;Ne=Math.min(ce.length-1,Ne);var We=ce[Ae],st=ce[Ne];return"composite"===J.kind?{kind:"composite",minZoom:We,maxZoom:st,interpolationType:be}:{kind:"camera",minZoom:We,maxZoom:st,minSize:J.evaluate(new Ia(We)),maxSize:J.evaluate(new Ia(st)),interpolationType:be}}function yl(S,z,J){var ce=z.uSize,Ae=J.lowerSize;return"source"===S.kind?Ae/128:"composite"===S.kind?Yr(Ae/128,J.upperSize/128,z.uSizeT):ce}function Td(S,z){var J=0,ce=0;if("constant"===S.kind)ce=S.layoutSize;else if("source"!==S.kind){var be=S.interpolationType,We=be?d(da.interpolationFactor(be,z,S.minZoom,S.maxZoom),0,1):0;"camera"===S.kind?ce=Yr(S.minSize,S.maxSize,We):J=We}return{uSizeT:J,uSize:ce}}fr("Anchor",Dh);var em=Object.freeze({__proto__:null,getSizeData:Qc,evaluateSizeForFeature:yl,evaluateSizeForZoom:Td,SIZE_PACK_FACTOR:128});function Yp(S,z,J,ce,be){if(void 0===z.segment)return!0;for(var Ae=z,Ne=z.segment+1,We=0;We>-J/2;){if(--Ne<0)return!1;We-=S[Ne].dist(Ae),Ae=S[Ne]}We+=S[Ne].dist(S[Ne+1]),Ne++;for(var st=[],vt=0;We<J/2;){var Wt=S[Ne],on=S[Ne+1];if(!on)return!1;var Jt=S[Ne-1].angleTo(Wt)-Wt.angleTo(on);for(Jt=Math.abs((Jt+3*Math.PI)%(2*Math.PI)-Math.PI),st.push({distance:We,angleDelta:Jt}),vt+=Jt;We-st[0].distance>ce;)vt-=st.shift().angleDelta;if(vt>be)return!1;Ne++,We+=Wt.dist(on)}return!0}function al(S){for(var z=0,J=0;J<S.length-1;J++)z+=S[J].dist(S[J+1]);return z}function Of(S,z,J){return S?.6*z*J:0}function Md(S,z){return Math.max(S?S.right-S.left:0,z?z.right-z.left:0)}function Ry(S,z,J,ce,be,Ae){for(var Ne=Of(J,be,Ae),We=Md(J,ce)*Ae,st=0,vt=al(S)/2,Tt=0;Tt<S.length-1;Tt++){var Wt=S[Tt],on=S[Tt+1],Jt=Wt.dist(on);if(st+Jt>vt){var xn=(vt-st)/Jt,Ln=Yr(Wt.x,on.x,xn),Wn=Yr(Wt.y,on.y,xn),Gn=new Dh(Ln,Wn,on.angleTo(Wt),Tt);return Gn._round(),!Ne||Yp(S,Gn,We,Ne,z)?Gn:void 0}st+=Jt}}function Fy(S,z,J,ce,be,Ae,Ne,We,st){var vt=Of(ce,Ae,Ne),Tt=Md(ce,be),Wt=Tt*Ne,on=0===S[0].x||S[0].x===st||0===S[0].y||S[0].y===st;return z-Wt<z/4&&(z=Wt+z/4),function Jt(xn,Ln,Wn,Gn,ir,or,dr,Rr,qr){for(var fi=or/2,si=al(xn),_i=0,Ri=Ln-Wn,Oi=[],Ci=0;Ci<xn.length-1;Ci++){for(var Hi=xn[Ci],Vi=xn[Ci+1],Fi=Hi.dist(Vi),xa=Vi.angleTo(Hi);Ri+Wn<_i+Fi;){var ja=((Ri+=Wn)-_i)/Fi,Za=Yr(Hi.x,Vi.x,ja),ia=Yr(Hi.y,Vi.y,ja);if(Za>=0&&Za<qr&&ia>=0&&ia<qr&&Ri-fi>=0&&Ri+fi<=si){var Ha=new Dh(Za,ia,xa,Ci);Ha._round(),Gn&&!Yp(xn,Ha,or,Gn,ir)||Oi.push(Ha)}}_i+=Fi}return Rr||Oi.length||dr||(Oi=Jt(xn,_i/2,Wn,Gn,ir,or,dr,!0,qr)),Oi}(S,on?z/2*We%z:(Tt/2+2*Ae)*Ne*We%z,z,vt,J,Wt,on,!1,st)}function Zp(S,z,J,ce,be){for(var Ae=[],Ne=0;Ne<S.length;Ne++)for(var We=S[Ne],st=void 0,vt=0;vt<We.length-1;vt++){var Tt=We[vt],Wt=We[vt+1];Tt.x<z&&Wt.x<z||(Tt.x<z?Tt=new i(z,Tt.y+(z-Tt.x)/(Wt.x-Tt.x)*(Wt.y-Tt.y))._round():Wt.x<z&&(Wt=new i(z,Tt.y+(z-Tt.x)/(Wt.x-Tt.x)*(Wt.y-Tt.y))._round()),Tt.y<J&&Wt.y<J||(Tt.y<J?Tt=new i(Tt.x+(J-Tt.y)/(Wt.y-Tt.y)*(Wt.x-Tt.x),J)._round():Wt.y<J&&(Wt=new i(Tt.x+(J-Tt.y)/(Wt.y-Tt.y)*(Wt.x-Tt.x),J)._round()),Tt.x>=ce&&Wt.x>=ce||(Tt.x>=ce?Tt=new i(ce,Tt.y+(ce-Tt.x)/(Wt.x-Tt.x)*(Wt.y-Tt.y))._round():Wt.x>=ce&&(Wt=new i(ce,Tt.y+(ce-Tt.x)/(Wt.x-Tt.x)*(Wt.y-Tt.y))._round()),Tt.y>=be&&Wt.y>=be||(Tt.y>=be?Tt=new i(Tt.x+(be-Tt.y)/(Wt.y-Tt.y)*(Wt.x-Tt.x),be)._round():Wt.y>=be&&(Wt=new i(Tt.x+(be-Tt.y)/(Wt.y-Tt.y)*(Wt.x-Tt.x),be)._round()),st&&Tt.equals(st[st.length-1])||Ae.push(st=[Tt]),st.push(Wt)))))}return Ae}function tm(S,z,J,ce){var be=[],Ae=S.image,Ne=Ae.pixelRatio,We=Ae.paddedRect.w-2,st=Ae.paddedRect.h-2,vt=S.right-S.left,Tt=S.bottom-S.top,Wt=Ae.stretchX||[[0,We]],on=Ae.stretchY||[[0,st]],Jt=function(Ha,Ao){return Ha+Ao[1]-Ao[0]},xn=Wt.reduce(Jt,0),Ln=on.reduce(Jt,0),Wn=We-xn,Gn=st-Ln,ir=0,or=xn,dr=0,Rr=Ln,qr=0,fi=Wn,si=0,_i=Gn;if(Ae.content&&ce){var Ri=Ae.content;ir=Ih(Wt,0,Ri[0]),dr=Ih(on,0,Ri[1]),or=Ih(Wt,Ri[0],Ri[2]),Rr=Ih(on,Ri[1],Ri[3]),qr=Ri[0]-ir,si=Ri[1]-dr,fi=Ri[2]-Ri[0]-or,_i=Ri[3]-Ri[1]-Rr}var Oi=function(Ha,Ao,wo,Oo){var To=Ph(Ha.stretch-ir,or,vt,S.left),As=kd(Ha.fixed-qr,fi,Ha.stretch,xn),No=Ph(Ao.stretch-dr,Rr,Tt,S.top),ea=kd(Ao.fixed-si,_i,Ao.stretch,Ln),Pi=Ph(wo.stretch-ir,or,vt,S.left),Ds=kd(wo.fixed-qr,fi,wo.stretch,xn),zs=Ph(Oo.stretch-dr,Rr,Tt,S.top),Go=kd(Oo.fixed-si,_i,Oo.stretch,Ln),vs=new i(To,No),Bs=new i(Pi,No),ns=new i(Pi,zs),Ro=new i(To,zs),_a=new i(As/Ne,ea/Ne),Wa=new i(Ds/Ne,Go/Ne),Wo=z*Math.PI/180;if(Wo){var hs=Math.sin(Wo),Yo=Math.cos(Wo),Zo=[Yo,-hs,hs,Yo];vs._matMult(Zo),Bs._matMult(Zo),Ro._matMult(Zo),ns._matMult(Zo)}var Pa=Ha.stretch+Ha.fixed,js=Ao.stretch+Ao.fixed;return{tl:vs,tr:Bs,bl:Ro,br:ns,tex:{x:Ae.paddedRect.x+1+Pa,y:Ae.paddedRect.y+1+js,w:wo.stretch+wo.fixed-Pa,h:Oo.stretch+Oo.fixed-js},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:_a,pixelOffsetBR:Wa,minFontScaleX:fi/Ne/vt,minFontScaleY:_i/Ne/Tt,isSDF:J}};if(ce&&(Ae.stretchX||Ae.stretchY))for(var Ci=nm(Wt,Wn,xn),Hi=nm(on,Gn,Ln),Vi=0;Vi<Ci.length-1;Vi++)for(var Fi=Ci[Vi],xa=Ci[Vi+1],ja=0;ja<Hi.length-1;ja++)be.push(Oi(Fi,Hi[ja],xa,Hi[ja+1]));else be.push(Oi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:We+1},{fixed:0,stretch:st+1}));return be}function Ih(S,z,J){for(var ce=0,be=0,Ae=S;be<Ae.length;be+=1){var Ne=Ae[be];ce+=Math.max(z,Math.min(J,Ne[1]))-Math.max(z,Math.min(J,Ne[0]))}return ce}function nm(S,z,J){for(var ce=[{fixed:-1,stretch:0}],be=0,Ae=S;be<Ae.length;be+=1){var Ne=Ae[be],We=Ne[0],st=Ne[1],vt=ce[ce.length-1];ce.push({fixed:We-vt.stretch,stretch:vt.stretch}),ce.push({fixed:We-vt.stretch,stretch:vt.stretch+(st-We)})}return ce.push({fixed:z+1,stretch:J}),ce}function Ph(S,z,J,ce){return S/z*J+ce}function kd(S,z,J,ce){return S-z*J/ce}var Ad=function(S,z,J,ce,be,Ae,Ne,We,st,vt){if(this.boxStartIndex=S.length,st){var Tt=Ae.top,Wt=Ae.bottom,on=Ae.collisionPadding;on&&(Tt-=on[1],Wt+=on[3]);var Jt=Wt-Tt;Jt>0&&(Jt=Math.max(10,Jt),this.circleDiameter=Jt)}else{var xn=Ae.top*Ne-We,Ln=Ae.bottom*Ne+We,Wn=Ae.left*Ne-We,Gn=Ae.right*Ne+We,ir=Ae.collisionPadding;if(ir&&(Wn-=ir[0]*Ne,xn-=ir[1]*Ne,Gn+=ir[2]*Ne,Ln+=ir[3]*Ne),vt){var or=new i(Wn,xn),dr=new i(Gn,xn),Rr=new i(Wn,Ln),qr=new i(Gn,Ln),fi=vt*Math.PI/180;or._rotate(fi),dr._rotate(fi),Rr._rotate(fi),qr._rotate(fi),Wn=Math.min(or.x,dr.x,Rr.x,qr.x),Gn=Math.max(or.x,dr.x,Rr.x,qr.x),xn=Math.min(or.y,dr.y,Rr.y,qr.y),Ln=Math.max(or.y,dr.y,Rr.y,qr.y)}S.emplaceBack(z.x,z.y,Wn,xn,Gn,Ln,J,ce,be)}this.boxEndIndex=S.length},Rf=function(S,z){if(void 0===S&&(S=[]),void 0===z&&(z=rm),this.data=S,this.length=this.data.length,this.compare=z,this.length>0)for(var J=(this.length>>1)-1;J>=0;J--)this._down(J)};function rm(S,z){return S<z?-1:S>z?1:0}function $p(S,z,J){void 0===z&&(z=1),void 0===J&&(J=!1);for(var ce=1/0,be=1/0,Ae=-1/0,Ne=-1/0,We=S[0],st=0;st<We.length;st++){var vt=We[st];(!st||vt.x<ce)&&(ce=vt.x),(!st||vt.y<be)&&(be=vt.y),(!st||vt.x>Ae)&&(Ae=vt.x),(!st||vt.y>Ne)&&(Ne=vt.y)}var on=Math.min(Ae-ce,Ne-be),Jt=on/2,xn=new Rf([],im);if(0===on)return new i(ce,be);for(var Ln=ce;Ln<Ae;Ln+=on)for(var Wn=be;Wn<Ne;Wn+=on)xn.push(new Ff(Ln+Jt,Wn+Jt,Jt,S));for(var Gn=function(dr){for(var Rr=0,qr=0,fi=0,si=dr[0],_i=0,Ri=si.length,Oi=Ri-1;_i<Ri;Oi=_i++){var Ci=si[_i],Hi=si[Oi],Vi=Ci.x*Hi.y-Hi.x*Ci.y;qr+=(Ci.x+Hi.x)*Vi,fi+=(Ci.y+Hi.y)*Vi,Rr+=3*Vi}return new Ff(qr/Rr,fi/Rr,0,dr)}(S),ir=xn.length;xn.length;){var or=xn.pop();(or.d>Gn.d||!Gn.d)&&(Gn=or,J&&console.log("found best %d after %d probes",Math.round(1e4*or.d)/1e4,ir)),or.max-Gn.d<=z||(xn.push(new Ff(or.p.x-(Jt=or.h/2),or.p.y-Jt,Jt,S)),xn.push(new Ff(or.p.x+Jt,or.p.y-Jt,Jt,S)),xn.push(new Ff(or.p.x-Jt,or.p.y+Jt,Jt,S)),xn.push(new Ff(or.p.x+Jt,or.p.y+Jt,Jt,S)),ir+=4)}return J&&(console.log("num probes: "+ir),console.log("best distance: "+Gn.d)),Gn.p}function im(S,z){return z.max-S.max}function Ff(S,z,J,ce){this.p=new i(S,z),this.h=J,this.d=function(be,Ae){for(var Ne=!1,We=1/0,st=0;st<Ae.length;st++)for(var vt=Ae[st],Tt=0,Wt=vt.length,on=Wt-1;Tt<Wt;on=Tt++){var Jt=vt[Tt],xn=vt[on];Jt.y>be.y!=xn.y>be.y&&be.x<(xn.x-Jt.x)*(be.y-Jt.y)/(xn.y-Jt.y)+Jt.x&&(Ne=!Ne),We=Math.min(We,wc(be,Jt,xn))}return(Ne?1:-1)*Math.sqrt(We)}(this.p,ce),this.max=this.d+this.h*Math.SQRT2}Rf.prototype.push=function(S){this.data.push(S),this.length++,this._up(this.length-1)},Rf.prototype.pop=function(){if(0!==this.length){var S=this.data[0],z=this.data.pop();return this.length--,this.length>0&&(this.data[0]=z,this._down(0)),S}},Rf.prototype.peek=function(){return this.data[0]},Rf.prototype._up=function(S){for(var z=this.data,J=this.compare,ce=z[S];S>0;){var be=S-1>>1,Ae=z[be];if(J(ce,Ae)>=0)break;z[S]=Ae,S=be}z[S]=ce},Rf.prototype._down=function(S){for(var z=this.data,J=this.compare,ce=this.length>>1,be=z[S];S<ce;){var Ae=1+(S<<1),Ne=z[Ae],We=Ae+1;if(We<this.length&&J(z[We],Ne)<0&&(Ae=We,Ne=z[We]),J(Ne,be)>=0)break;z[S]=Ne,S=Ae}z[S]=be};var am=Number.POSITIVE_INFINITY;function Xp(S,z){return z[1]!==am?function(J,ce,be){var Ae=0,Ne=0;switch(ce=Math.abs(ce),be=Math.abs(be),J){case"top-right":case"top-left":case"top":Ne=be-7;break;case"bottom-right":case"bottom-left":case"bottom":Ne=7-be}switch(J){case"top-right":case"bottom-right":case"right":Ae=-ce;break;case"top-left":case"bottom-left":case"left":Ae=ce}return[Ae,Ne]}(S,z[0],z[1]):function(J,ce){var be=0,Ae=0;ce<0&&(ce=0);var Ne=ce/Math.sqrt(2);switch(J){case"top-right":case"top-left":Ae=Ne-7;break;case"bottom-right":case"bottom-left":Ae=7-Ne;break;case"bottom":Ae=7-ce;break;case"top":Ae=ce-7}switch(J){case"top-right":case"bottom-right":be=-Ne;break;case"top-left":case"bottom-left":be=Ne;break;case"left":be=ce;break;case"right":be=-ce}return[be,Ae]}(S,z[0])}function Nf(S){switch(S){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function om(S,z,J,ce,be,Ae,Ne,We,st,vt,Tt,Wt,on,Jt,xn){var Ln=function(dr,Rr,qr,fi,si,_i,Ri,Oi){for(var Ci=fi.layout.get("text-rotate").evaluate(_i,{})*Math.PI/180,Hi=[],Vi=0,Fi=Rr.positionedLines;Vi<Fi.length;Vi+=1)for(var xa=Fi[Vi],ja=0,Za=xa.positionedGlyphs;ja<Za.length;ja+=1){var ia=Za[ja];if(ia.rect){var Ha=ia.rect||{},Ao=4,wo=!0,Oo=1,To=0,As=(si||Oi)&&ia.vertical,No=ia.metrics.advance*ia.scale/2;if(Oi&&Rr.verticalizable&&(To=xa.lineOffset/2-(ia.imageName?-(24-ia.metrics.width*ia.scale)/2:24*(ia.scale-1))),ia.imageName){var Ds=Ri[ia.imageName];wo=Ds.sdf,Ao=1/(Oo=Ds.pixelRatio)}var zs=si?[ia.x+No,ia.y]:[0,0],Go=si?[0,0]:[ia.x+No+qr[0],ia.y+qr[1]-To],vs=[0,0];As&&(vs=Go,Go=[0,0]);var Bs=(ia.metrics.left-Ao)*ia.scale-No+Go[0],ns=(-ia.metrics.top-Ao)*ia.scale+Go[1],Ro=Bs+Ha.w*ia.scale/Oo,_a=ns+Ha.h*ia.scale/Oo,Wa=new i(Bs,ns),Wo=new i(Ro,ns),hs=new i(Bs,_a),Yo=new i(Ro,_a);if(As){var Zo=new i(-No,No- -17),Pa=-Math.PI/2,zo=12-No,ol=new i(22-zo,-(ia.imageName?zo:0)),sl=new(Function.prototype.bind.apply(i,[null].concat(vs)));Wa._rotateAround(Pa,Zo)._add(ol)._add(sl),Wo._rotateAround(Pa,Zo)._add(ol)._add(sl),hs._rotateAround(Pa,Zo)._add(ol)._add(sl),Yo._rotateAround(Pa,Zo)._add(ol)._add(sl)}if(Ci){var wu=Math.sin(Ci),Hu=Math.cos(Ci),Vs=[Hu,-wu,wu,Hu];Wa._matMult(Vs),Wo._matMult(Vs),hs._matMult(Vs),Yo._matMult(Vs)}var Tu=new i(0,0),qu=new i(0,0);Hi.push({tl:Wa,tr:Wo,bl:hs,br:Yo,tex:Ha,writingMode:Rr.writingMode,glyphOffset:zs,sectionIndex:ia.sectionIndex,isSDF:wo,pixelOffsetTL:Tu,pixelOffsetBR:qu,minFontScaleX:0,minFontScaleY:0})}}return Hi}(0,J,We,be,Ae,Ne,ce,S.allowVerticalPlacement),Wn=S.textSizeData,Gn=null;"source"===Wn.kind?(Gn=[128*be.layout.get("text-size").evaluate(Ne,{})])[0]>32640&&D(S.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Wn.kind&&((Gn=[128*Jt.compositeTextSizes[0].evaluate(Ne,{},xn),128*Jt.compositeTextSizes[1].evaluate(Ne,{},xn)])[0]>32640||Gn[1]>32640)&&D(S.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),S.addSymbols(S.text,Ln,Gn,We,Ae,Ne,vt,z,st.lineStartIndex,st.lineLength,on,xn);for(var ir=0,or=Tt;ir<or.length;ir+=1)Wt[or[ir]]=S.text.placedSymbolArray.length-1;return 4*Ln.length}function sm(S){for(var z in S)return S[z];return null}function Dc(S,z,J,ce){var be=S.compareText;if(z in be){for(var Ae=be[z],Ne=Ae.length-1;Ne>=0;Ne--)if(ce.dist(Ae[Ne])<J)return!0}else be[z]=[];return be[z].push(ce),!1}var Ny=Sf.VectorTileFeature.types,zy=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Cd(S,z,J,ce,be,Ae,Ne,We,st,vt,Tt,Wt,on){var Jt=We?Math.min(32640,Math.round(We[0])):0,xn=We?Math.min(32640,Math.round(We[1])):0;S.emplaceBack(z,J,Math.round(32*ce),Math.round(32*be),Ae,Ne,(Jt<<1)+(st?1:0),xn,16*vt,16*Tt,256*Wt,256*on)}function Jp(S,z,J){S.emplaceBack(z.x,z.y,J),S.emplaceBack(z.x,z.y,J),S.emplaceBack(z.x,z.y,J),S.emplaceBack(z.x,z.y,J)}function By(S){for(var z=0,J=S.sections;z<J.length;z+=1)if(mi(J[z].text))return!0;return!1}var tc=function(S){this.layoutVertexArray=new gu,this.indexArray=new ks,this.programConfigurations=S,this.segments=new Gt,this.dynamicLayoutVertexArray=new Ll,this.opacityVertexArray=new mu,this.placedSymbolArray=new Ze};tc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},tc.prototype.upload=function(S,z,J,ce){this.isEmpty()||(J&&(this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,Vp.members),this.indexBuffer=S.createIndexBuffer(this.indexArray,z),this.dynamicLayoutVertexBuffer=S.createVertexBuffer(this.dynamicLayoutVertexArray,Ay.members,!0),this.opacityVertexBuffer=S.createVertexBuffer(this.opacityVertexArray,zy,!0),this.opacityVertexBuffer.itemSize=1),(J||ce)&&this.programConfigurations.upload(S))},tc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},fr("SymbolBuffers",tc);var xl=function(S,z,J){this.layoutVertexArray=new S,this.layoutAttributes=z,this.indexArray=new J,this.segments=new Gt,this.collisionVertexArray=new ru};xl.prototype.upload=function(S){this.layoutVertexBuffer=S.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=S.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=S.createVertexBuffer(this.collisionVertexArray,Cy.members,!0)},xl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},fr("CollisionBuffers",xl);var co=function(S){this.collisionBoxArray=S.collisionBoxArray,this.zoom=S.zoom,this.overscaling=S.overscaling,this.layers=S.layers,this.layerIds=this.layers.map(function(Ne){return Ne.id}),this.index=S.index,this.pixelRatio=S.pixelRatio,this.sourceLayerIndex=S.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Tc([]),this.placementViewportMatrix=Tc([]);var z=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Qc(this.zoom,z["text-size"]),this.iconSizeData=Qc(this.zoom,z["icon-size"]);var J=this.layers[0].layout,ce=J.get("symbol-sort-key"),be=J.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==be&&void 0!==ce.constantOr(1),this.sortFeaturesByY=("viewport-y"===be||"auto"===be&&!this.sortFeaturesByKey)&&(J.get("text-allow-overlap")||J.get("icon-allow-overlap")||J.get("text-ignore-placement")||J.get("icon-ignore-placement")),"point"===J.get("symbol-placement")&&(this.writingModes=J.get("text-writing-mode").map(function(Ne){return El[Ne]})),this.stateDependentLayerIds=this.layers.filter(function(Ne){return Ne.isStateDependent()}).map(function(Ne){return Ne.id}),this.sourceID=S.sourceID};co.prototype.createArrays=function(){this.text=new tc(new no(Vp.members,this.layers,this.zoom,function(S){return/^text/.test(S)})),this.icon=new tc(new no(Vp.members,this.layers,this.zoom,function(S){return/^icon/.test(S)})),this.glyphOffsetArray=new It,this.lineVertexArray=new Rt,this.symbolInstances=new ft},co.prototype.calculateGlyphDependencies=function(S,z,J,ce,be){for(var Ae=0;Ae<S.length;Ae++)if(z[S.charCodeAt(Ae)]=!0,(J||ce)&&be){var Ne=Ch[S.charAt(Ae)];Ne&&(z[Ne.charCodeAt(0)]=!0)}},co.prototype.populate=function(S,z,J){var ce=this.layers[0],be=ce.layout,Ae=be.get("text-font"),Ne=be.get("text-field"),We=be.get("icon-image"),st=("constant"!==Ne.value.kind||Ne.value.value instanceof Pn&&!Ne.value.value.isEmpty()||Ne.value.value.toString().length>0)&&("constant"!==Ae.value.kind||Ae.value.value.length>0),vt="constant"!==We.value.kind||!!We.value.value||Object.keys(We.parameters).length>0,Tt=be.get("symbol-sort-key");if(this.features=[],st||vt){for(var Wt=z.iconDependencies,on=z.glyphDependencies,Jt=z.availableImages,xn=new Ia(this.zoom),Ln=0,Wn=S;Ln<Wn.length;Ln+=1){var Gn=Wn[Ln],ir=Gn.feature,or=Gn.id,dr=Gn.index,Rr=Gn.sourceLayerIndex,qr=ce._featureFilter.needGeometry,fi={type:ir.type,id:or,properties:ir.properties,geometry:qr?Do(ir):[]};if(ce._featureFilter.filter(xn,fi,J)){qr||(fi.geometry=Do(ir));var si=void 0;if(st){var _i=ce.getValueAndResolveTokens("text-field",fi,J,Jt),Ri=Pn.factory(_i);By(Ri)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===go()||this.hasRTLText&&Ko.isParsed())&&(si=qg(Ri,ce,fi))}var Oi=void 0;if(vt){var Ci=ce.getValueAndResolveTokens("icon-image",fi,J,Jt);Oi=Ci instanceof jn?Ci:jn.fromString(Ci)}if(si||Oi){var Hi=this.sortFeaturesByKey?Tt.evaluate(fi,{},J):void 0,Vi={id:or,text:si,icon:Oi,index:dr,sourceLayerIndex:Rr,geometry:Do(ir),properties:ir.properties,type:Ny[ir.type],sortKey:Hi};if(this.features.push(Vi),Oi&&(Wt[Oi.name]=!0),si){var Fi=Ae.evaluate(fi,{},J).join(","),xa="map"===be.get("text-rotation-alignment")&&"point"!==be.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(El.vertical)>=0;for(var ja=0,Za=si.sections;ja<Za.length;ja+=1){var ia=Za[ja];if(ia.image)Wt[ia.image.name]=!0;else{var Ha=Ta(si.toString()),Ao=ia.fontStack||Fi,wo=on[Ao]=on[Ao]||{};this.calculateGlyphDependencies(ia.text,wo,xa,this.allowVerticalPlacement,Ha)}}}}}}"line"===be.get("symbol-placement")&&(this.features=function(Oo){var To={},As={},No=[],ea=0;function Pi(Yo){No.push(Oo[Yo]),ea++}function Ds(Yo,Zo,Pa){var zo=As[Yo];return delete As[Yo],As[Zo]=zo,No[zo].geometry[0].pop(),No[zo].geometry[0]=No[zo].geometry[0].concat(Pa[0]),zo}function zs(Yo,Zo,Pa){var zo=To[Zo];return delete To[Zo],To[Yo]=zo,No[zo].geometry[0].shift(),No[zo].geometry[0]=Pa[0].concat(No[zo].geometry[0]),zo}function Go(Yo,Zo,Pa){var zo=Pa?Zo[0][Zo[0].length-1]:Zo[0][0];return Yo+":"+zo.x+":"+zo.y}for(var vs=0;vs<Oo.length;vs++){var Bs=Oo[vs],ns=Bs.geometry,Ro=Bs.text?Bs.text.toString():null;if(Ro){var _a=Go(Ro,ns),Wa=Go(Ro,ns,!0);if(_a in As&&Wa in To&&As[_a]!==To[Wa]){var Wo=zs(_a,Wa,ns),hs=Ds(_a,Wa,No[Wo].geometry);delete To[_a],delete As[Wa],As[Go(Ro,No[hs].geometry,!0)]=hs,No[Wo].geometry=null}else _a in As?Ds(_a,Wa,ns):Wa in To?zs(_a,Wa,ns):(Pi(vs),To[_a]=ea-1,As[Wa]=ea-1)}else Pi(vs)}return No.filter(function(Yo){return Yo.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Oo,To){return Oo.sortKey-To.sortKey})}},co.prototype.update=function(S,z,J){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(S,z,this.layers,J),this.icon.programConfigurations.updatePaintArrays(S,z,this.layers,J))},co.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},co.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},co.prototype.upload=function(S){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(S),this.iconCollisionBox.upload(S)),this.text.upload(S,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(S,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},co.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},co.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},co.prototype.addToLineVertexArray=function(S,z){var J=this.lineVertexArray.length;if(void 0!==S.segment){for(var ce=S.dist(z[S.segment+1]),be=S.dist(z[S.segment]),Ae={},Ne=S.segment+1;Ne<z.length;Ne++)Ae[Ne]={x:z[Ne].x,y:z[Ne].y,tileUnitDistanceFromAnchor:ce},Ne<z.length-1&&(ce+=z[Ne+1].dist(z[Ne]));for(var We=S.segment||0;We>=0;We--)Ae[We]={x:z[We].x,y:z[We].y,tileUnitDistanceFromAnchor:be},We>0&&(be+=z[We-1].dist(z[We]));for(var st=0;st<z.length;st++){var vt=Ae[st];this.lineVertexArray.emplaceBack(vt.x,vt.y,vt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:J,lineLength:this.lineVertexArray.length-J}},co.prototype.addSymbols=function(S,z,J,ce,be,Ae,Ne,We,st,vt,Tt,Wt){for(var on=S.indexArray,Jt=S.layoutVertexArray,xn=S.segments.prepareSegment(4*z.length,Jt,on,Ae.sortKey),Ln=this.glyphOffsetArray.length,Wn=xn.vertexLength,Gn=this.allowVerticalPlacement&&Ne===El.vertical?Math.PI/2:0,ir=Ae.text&&Ae.text.sections,or=0;or<z.length;or++){var dr=z[or],Rr=dr.tl,qr=dr.tr,fi=dr.bl,si=dr.br,_i=dr.tex,Ri=dr.pixelOffsetTL,Oi=dr.pixelOffsetBR,Ci=dr.minFontScaleX,Hi=dr.minFontScaleY,Vi=dr.glyphOffset,Fi=dr.isSDF,xa=dr.sectionIndex,ja=xn.vertexLength,Za=Vi[1];Cd(Jt,We.x,We.y,Rr.x,Za+Rr.y,_i.x,_i.y,J,Fi,Ri.x,Ri.y,Ci,Hi),Cd(Jt,We.x,We.y,qr.x,Za+qr.y,_i.x+_i.w,_i.y,J,Fi,Oi.x,Ri.y,Ci,Hi),Cd(Jt,We.x,We.y,fi.x,Za+fi.y,_i.x,_i.y+_i.h,J,Fi,Ri.x,Oi.y,Ci,Hi),Cd(Jt,We.x,We.y,si.x,Za+si.y,_i.x+_i.w,_i.y+_i.h,J,Fi,Oi.x,Oi.y,Ci,Hi),Jp(S.dynamicLayoutVertexArray,We,Gn),on.emplaceBack(ja,ja+1,ja+2),on.emplaceBack(ja+1,ja+2,ja+3),xn.vertexLength+=4,xn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Vi[0]),or!==z.length-1&&xa===z[or+1].sectionIndex||S.programConfigurations.populatePaintArrays(Jt.length,Ae,Ae.index,{},Wt,ir&&ir[xa])}S.placedSymbolArray.emplaceBack(We.x,We.y,Ln,this.glyphOffsetArray.length-Ln,Wn,st,vt,We.segment,J?J[0]:0,J?J[1]:0,ce[0],ce[1],Ne,0,!1,0,Tt)},co.prototype._addCollisionDebugVertex=function(S,z,J,ce,be,Ae){return z.emplaceBack(0,0),S.emplaceBack(J.x,J.y,ce,be,Math.round(Ae.x),Math.round(Ae.y))},co.prototype.addCollisionDebugVertices=function(S,z,J,ce,be,Ae,Ne){var We=be.segments.prepareSegment(4,be.layoutVertexArray,be.indexArray),st=We.vertexLength,vt=be.layoutVertexArray,Tt=be.collisionVertexArray,Wt=Ne.anchorX,on=Ne.anchorY;this._addCollisionDebugVertex(vt,Tt,Ae,Wt,on,new i(S,z)),this._addCollisionDebugVertex(vt,Tt,Ae,Wt,on,new i(J,z)),this._addCollisionDebugVertex(vt,Tt,Ae,Wt,on,new i(J,ce)),this._addCollisionDebugVertex(vt,Tt,Ae,Wt,on,new i(S,ce)),We.vertexLength+=4;var Jt=be.indexArray;Jt.emplaceBack(st,st+1),Jt.emplaceBack(st+1,st+2),Jt.emplaceBack(st+2,st+3),Jt.emplaceBack(st+3,st),We.primitiveLength+=4},co.prototype.addDebugCollisionBoxes=function(S,z,J,ce){for(var be=S;be<z;be++){var Ae=this.collisionBoxArray.get(be);this.addCollisionDebugVertices(Ae.x1,Ae.y1,Ae.x2,Ae.y2,ce?this.textCollisionBox:this.iconCollisionBox,Ae.anchorPoint,J)}},co.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new xl(ml,Hg.members,H),this.iconCollisionBox=new xl(ml,Hg.members,H);for(var S=0;S<this.symbolInstances.length;S++){var z=this.symbolInstances.get(S);this.addDebugCollisionBoxes(z.textBoxStartIndex,z.textBoxEndIndex,z,!0),this.addDebugCollisionBoxes(z.verticalTextBoxStartIndex,z.verticalTextBoxEndIndex,z,!0),this.addDebugCollisionBoxes(z.iconBoxStartIndex,z.iconBoxEndIndex,z,!1),this.addDebugCollisionBoxes(z.verticalIconBoxStartIndex,z.verticalIconBoxEndIndex,z,!1)}},co.prototype._deserializeCollisionBoxesForSymbol=function(S,z,J,ce,be,Ae,Ne,We,st){for(var vt={},Tt=z;Tt<J;Tt++){var Wt=S.get(Tt);vt.textBox={x1:Wt.x1,y1:Wt.y1,x2:Wt.x2,y2:Wt.y2,anchorPointX:Wt.anchorPointX,anchorPointY:Wt.anchorPointY},vt.textFeatureIndex=Wt.featureIndex;break}for(var on=ce;on<be;on++){var Jt=S.get(on);vt.verticalTextBox={x1:Jt.x1,y1:Jt.y1,x2:Jt.x2,y2:Jt.y2,anchorPointX:Jt.anchorPointX,anchorPointY:Jt.anchorPointY},vt.verticalTextFeatureIndex=Jt.featureIndex;break}for(var xn=Ae;xn<Ne;xn++){var Ln=S.get(xn);vt.iconBox={x1:Ln.x1,y1:Ln.y1,x2:Ln.x2,y2:Ln.y2,anchorPointX:Ln.anchorPointX,anchorPointY:Ln.anchorPointY},vt.iconFeatureIndex=Ln.featureIndex;break}for(var Wn=We;Wn<st;Wn++){var Gn=S.get(Wn);vt.verticalIconBox={x1:Gn.x1,y1:Gn.y1,x2:Gn.x2,y2:Gn.y2,anchorPointX:Gn.anchorPointX,anchorPointY:Gn.anchorPointY},vt.verticalIconFeatureIndex=Gn.featureIndex;break}return vt},co.prototype.deserializeCollisionBoxes=function(S){this.collisionArrays=[];for(var z=0;z<this.symbolInstances.length;z++){var J=this.symbolInstances.get(z);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(S,J.textBoxStartIndex,J.textBoxEndIndex,J.verticalTextBoxStartIndex,J.verticalTextBoxEndIndex,J.iconBoxStartIndex,J.iconBoxEndIndex,J.verticalIconBoxStartIndex,J.verticalIconBoxEndIndex))}},co.prototype.hasTextData=function(){return this.text.segments.get().length>0},co.prototype.hasIconData=function(){return this.icon.segments.get().length>0},co.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},co.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},co.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},co.prototype.addIndicesForPlacedSymbol=function(S,z){for(var J=S.placedSymbolArray.get(z),ce=J.vertexStartIndex+4*J.numGlyphs,be=J.vertexStartIndex;be<ce;be+=4)S.indexArray.emplaceBack(be,be+1,be+2),S.indexArray.emplaceBack(be+1,be+2,be+3)},co.prototype.getSortedSymbolIndexes=function(S){if(this.sortedAngle===S&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var z=Math.sin(S),J=Math.cos(S),ce=[],be=[],Ae=[],Ne=0;Ne<this.symbolInstances.length;++Ne){Ae.push(Ne);var We=this.symbolInstances.get(Ne);ce.push(0|Math.round(z*We.anchorX+J*We.anchorY)),be.push(We.featureIndex)}return Ae.sort(function(st,vt){return ce[st]-ce[vt]||be[vt]-be[st]}),Ae},co.prototype.addToSortKeyRanges=function(S,z){var J=this.sortKeyRanges[this.sortKeyRanges.length-1];J&&J.sortKey===z?J.symbolInstanceEnd=S+1:this.sortKeyRanges.push({sortKey:z,symbolInstanceStart:S,symbolInstanceEnd:S+1})},co.prototype.sortFeatures=function(S){var z=this;if(this.sortFeaturesByY&&this.sortedAngle!==S&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(S),this.sortedAngle=S,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var J=0,ce=this.symbolInstanceIndexes;J<ce.length;J+=1){var Ae=this.symbolInstances.get(ce[J]);this.featureSortOrder.push(Ae.featureIndex),[Ae.rightJustifiedTextSymbolIndex,Ae.centerJustifiedTextSymbolIndex,Ae.leftJustifiedTextSymbolIndex].forEach(function(Ne,We,st){Ne>=0&&st.indexOf(Ne)===We&&z.addIndicesForPlacedSymbol(z.text,Ne)}),Ae.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Ae.verticalPlacedTextSymbolIndex),Ae.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ae.placedIconSymbolIndex),Ae.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ae.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},fr("SymbolBucket",co,{omit:["layers","collisionBoxArray","features","compareText"]}),co.MAX_GLYPHS=65535,co.addDynamicAttributes=Jp;var jy=new Os({"symbol-placement":new zi(Ve.layout_symbol["symbol-placement"]),"symbol-spacing":new zi(Ve.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new zi(Ve.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ki(Ve.layout_symbol["symbol-sort-key"]),"symbol-z-order":new zi(Ve.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new zi(Ve.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new zi(Ve.layout_symbol["icon-ignore-placement"]),"icon-optional":new zi(Ve.layout_symbol["icon-optional"]),"icon-rotation-alignment":new zi(Ve.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ki(Ve.layout_symbol["icon-size"]),"icon-text-fit":new zi(Ve.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new zi(Ve.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ki(Ve.layout_symbol["icon-image"]),"icon-rotate":new Ki(Ve.layout_symbol["icon-rotate"]),"icon-padding":new zi(Ve.layout_symbol["icon-padding"]),"icon-keep-upright":new zi(Ve.layout_symbol["icon-keep-upright"]),"icon-offset":new Ki(Ve.layout_symbol["icon-offset"]),"icon-anchor":new Ki(Ve.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new zi(Ve.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new zi(Ve.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new zi(Ve.layout_symbol["text-rotation-alignment"]),"text-field":new Ki(Ve.layout_symbol["text-field"]),"text-font":new Ki(Ve.layout_symbol["text-font"]),"text-size":new Ki(Ve.layout_symbol["text-size"]),"text-max-width":new Ki(Ve.layout_symbol["text-max-width"]),"text-line-height":new zi(Ve.layout_symbol["text-line-height"]),"text-letter-spacing":new Ki(Ve.layout_symbol["text-letter-spacing"]),"text-justify":new Ki(Ve.layout_symbol["text-justify"]),"text-radial-offset":new Ki(Ve.layout_symbol["text-radial-offset"]),"text-variable-anchor":new zi(Ve.layout_symbol["text-variable-anchor"]),"text-anchor":new Ki(Ve.layout_symbol["text-anchor"]),"text-max-angle":new zi(Ve.layout_symbol["text-max-angle"]),"text-writing-mode":new zi(Ve.layout_symbol["text-writing-mode"]),"text-rotate":new Ki(Ve.layout_symbol["text-rotate"]),"text-padding":new zi(Ve.layout_symbol["text-padding"]),"text-keep-upright":new zi(Ve.layout_symbol["text-keep-upright"]),"text-transform":new Ki(Ve.layout_symbol["text-transform"]),"text-offset":new Ki(Ve.layout_symbol["text-offset"]),"text-allow-overlap":new zi(Ve.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new zi(Ve.layout_symbol["text-ignore-placement"]),"text-optional":new zi(Ve.layout_symbol["text-optional"])}),Kp={paint:new Os({"icon-opacity":new Ki(Ve.paint_symbol["icon-opacity"]),"icon-color":new Ki(Ve.paint_symbol["icon-color"]),"icon-halo-color":new Ki(Ve.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ki(Ve.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ki(Ve.paint_symbol["icon-halo-blur"]),"icon-translate":new zi(Ve.paint_symbol["icon-translate"]),"icon-translate-anchor":new zi(Ve.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ki(Ve.paint_symbol["text-opacity"]),"text-color":new Ki(Ve.paint_symbol["text-color"],{runtimeType:Ct,getOverride:function(S){return S.textColor},hasOverride:function(S){return!!S.textColor}}),"text-halo-color":new Ki(Ve.paint_symbol["text-halo-color"]),"text-halo-width":new Ki(Ve.paint_symbol["text-halo-width"]),"text-halo-blur":new Ki(Ve.paint_symbol["text-halo-blur"]),"text-translate":new zi(Ve.paint_symbol["text-translate"]),"text-translate-anchor":new zi(Ve.paint_symbol["text-translate-anchor"])}),layout:jy},ef=function(S){this.type=S.property.overrides?S.property.overrides.runtimeType:$t,this.defaultValue=S};ef.prototype.evaluate=function(S){if(S.formattedSection){var z=this.defaultValue.property.overrides;if(z&&z.hasOverride(S.formattedSection))return z.getOverride(S.formattedSection)}return S.feature&&S.featureState?this.defaultValue.evaluate(S.feature,S.featureState):this.defaultValue.property.specification.default},ef.prototype.eachChild=function(S){this.defaultValue.isConstant()||S(this.defaultValue.value._styleExpression.expression)},ef.prototype.outputDefined=function(){return!1},ef.prototype.serialize=function(){return null},fr("FormatSectionOverride",ef,{omit:["defaultValue"]});var f_=function(S){function z(J){S.call(this,J,Kp)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.recalculate=function(J,ce){if(S.prototype.recalculate.call(this,J,ce),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var be=this.layout.get("text-writing-mode");if(be){for(var Ae=[],Ne=0,We=be;Ne<We.length;Ne+=1){var st=We[Ne];Ae.indexOf(st)<0&&Ae.push(st)}this.layout._values["text-writing-mode"]=Ae}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},z.prototype.getValueAndResolveTokens=function(J,ce,be,Ae){var st,Ne=this.layout.get(J).evaluate(ce,{},be,Ae),We=this._unevaluatedLayout._values[J];return We.isDataDriven()||hn(We.value)||!Ne?Ne:(st=ce.properties,Ne.replace(/{([^{}]+)}/g,function(Tt,Wt){return Wt in st?String(st[Wt]):""}))},z.prototype.createBucket=function(J){return new co(J)},z.prototype.queryRadius=function(){return 0},z.prototype.queryIntersectsFeature=function(){return!1},z.prototype._setPaintOverrides=function(){for(var J=0,ce=Kp.paint.overridableProperties;J<ce.length;J+=1){var be=ce[J];if(z.hasPaintOverride(this.layout,be)){var st,Ae=this.paint.get(be),Ne=new ef(Ae),We=new cn(Ne,Ae.property.specification);st="constant"===Ae.value.kind||"source"===Ae.value.kind?new bn("source",We):new En("composite",We,Ae.value.zoomStops,Ae.value._interpolationType),this.paint._values[be]=new jo(Ae.property,st,Ae.parameters)}}},z.prototype._handleOverridablePaintPropertyUpdate=function(J,ce,be){return!(!this.layout||ce.isDataDriven()||be.isDataDriven())&&z.hasPaintOverride(this.layout,J)},z.hasPaintOverride=function(J,ce){var be=J.get("text-field"),Ae=Kp.paint.properties[ce],Ne=!1,We=function(Tt){for(var Wt=0,on=Tt;Wt<on.length;Wt+=1)if(Ae.overrides&&Ae.overrides.hasOverride(on[Wt]))return void(Ne=!0)};if("constant"===be.value.kind&&be.value.value instanceof Pn)We(be.value.value.sections);else if("source"===be.value.kind){var st=function(Tt){Ne||(Tt instanceof Xr&&lr(Tt.value)===dt?We(Tt.value.sections):Tt instanceof Lr?We(Tt.sections):Tt.eachChild(st))},vt=be.value;vt._styleExpression&&st(vt._styleExpression.expression)}return Ne},z}(Zs),lm={paint:new Os({"background-color":new zi(Ve.paint_background["background-color"]),"background-pattern":new fu(Ve.paint_background["background-pattern"]),"background-opacity":new zi(Ve.paint_background["background-opacity"])})},um=function(S){function z(J){S.call(this,J,lm)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z}(Zs),cm={paint:new Os({"raster-opacity":new zi(Ve.paint_raster["raster-opacity"]),"raster-hue-rotate":new zi(Ve.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new zi(Ve.paint_raster["raster-brightness-min"]),"raster-brightness-max":new zi(Ve.paint_raster["raster-brightness-max"]),"raster-saturation":new zi(Ve.paint_raster["raster-saturation"]),"raster-contrast":new zi(Ve.paint_raster["raster-contrast"]),"raster-resampling":new zi(Ve.paint_raster["raster-resampling"]),"raster-fade-duration":new zi(Ve.paint_raster["raster-fade-duration"])})},Vy=function(S){function z(J){S.call(this,J,cm)}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z}(Zs),zf=function(S){function z(J){S.call(this,J,{}),this.implementation=J}return S&&(z.__proto__=S),(z.prototype=Object.create(S&&S.prototype)).constructor=z,z.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},z.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},z.prototype.recalculate=function(){},z.prototype.updateTransitions=function(){},z.prototype.hasTransition=function(){},z.prototype.serialize=function(){},z.prototype.onAdd=function(J){this.implementation.onAdd&&this.implementation.onAdd(J,J.painter.context.gl)},z.prototype.onRemove=function(J){this.implementation.onRemove&&this.implementation.onRemove(J,J.painter.context.gl)},z}(Zs),Vu={circle:Mc,heatmap:r_,hillshade:hy,fill:xy,"fill-extrusion":Np,line:ju,symbol:f_,background:um,raster:Vy},Uy=self.HTMLImageElement,Hy=self.HTMLCanvasElement,Qp=self.HTMLVideoElement,qy=self.ImageData,bl=self.ImageBitmap,nc=function(S,z,J,ce){this.context=S,this.format=J,this.texture=S.gl.createTexture(),this.update(z,ce)};nc.prototype.update=function(S,z,J){var ce=S.width,be=S.height,Ae=!(this.size&&this.size[0]===ce&&this.size[1]===be||J),Ne=this.context,We=Ne.gl;if(this.useMipmap=Boolean(z&&z.useMipmap),We.bindTexture(We.TEXTURE_2D,this.texture),Ne.pixelStoreUnpackFlipY.set(!1),Ne.pixelStoreUnpack.set(1),Ne.pixelStoreUnpackPremultiplyAlpha.set(this.format===We.RGBA&&(!z||!1!==z.premultiply)),Ae)this.size=[ce,be],S instanceof Uy||S instanceof Hy||S instanceof Qp||S instanceof qy||bl&&S instanceof bl?We.texImage2D(We.TEXTURE_2D,0,this.format,this.format,We.UNSIGNED_BYTE,S):We.texImage2D(We.TEXTURE_2D,0,this.format,ce,be,0,this.format,We.UNSIGNED_BYTE,S.data);else{var st=J||{x:0,y:0},vt=st.x,Tt=st.y;S instanceof Uy||S instanceof Hy||S instanceof Qp||S instanceof qy||bl&&S instanceof bl?We.texSubImage2D(We.TEXTURE_2D,0,vt,Tt,We.RGBA,We.UNSIGNED_BYTE,S):We.texSubImage2D(We.TEXTURE_2D,0,vt,Tt,ce,be,We.RGBA,We.UNSIGNED_BYTE,S.data)}this.useMipmap&&this.isSizePowerOfTwo()&&We.generateMipmap(We.TEXTURE_2D)},nc.prototype.bind=function(S,z,J){var ce=this.context.gl;ce.bindTexture(ce.TEXTURE_2D,this.texture),J!==ce.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(J=ce.LINEAR),S!==this.filter&&(ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MAG_FILTER,S),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MIN_FILTER,J||S),this.filter=S),z!==this.wrap&&(ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_S,z),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_T,z),this.wrap=z)},nc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},nc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var Lh=function(S){var z=this;this._callback=S,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){z._triggered=!1,z._callback()})};Lh.prototype.trigger=function(){var S=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){S._triggered=!1,S._callback()},0))},Lh.prototype.remove=function(){delete this._channel,this._callback=function(){}};var Bf=function(S,z,J){this.target=S,this.parent=z,this.mapId=J,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},c(["receive","process"],this),this.invoker=new Lh(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=I()?S:self};function e0(S,z,J){var ce=2*Math.PI*6378137/256/Math.pow(2,J);return[S*ce-2*Math.PI*6378137/2,z*ce-2*Math.PI*6378137/2]}Bf.prototype.send=function(S,z,J,ce,be){var Ae=this;void 0===be&&(be=!1);var Ne=Math.round(1e18*Math.random()).toString(36).substring(0,10);J&&(this.callbacks[Ne]=J);var We=V(this.globalScope)?void 0:[];return this.target.postMessage({id:Ne,type:S,hasCallback:!!J,targetMapId:ce,mustQueue:be,sourceMapId:this.mapId,data:Ii(z,We)},We),{cancel:function(){J&&delete Ae.callbacks[Ne],Ae.target.postMessage({id:Ne,type:"<cancel>",targetMapId:ce,sourceMapId:Ae.mapId})}}},Bf.prototype.receive=function(S){var z=S.data,J=z.id;if(J&&(!z.targetMapId||this.mapId===z.targetMapId))if("<cancel>"===z.type){delete this.tasks[J];var ce=this.cancelCallbacks[J];delete this.cancelCallbacks[J],ce&&ce()}else I()||z.mustQueue?(this.tasks[J]=z,this.taskQueue.push(J),this.invoker.trigger()):this.processTask(J,z)},Bf.prototype.process=function(){if(this.taskQueue.length){var S=this.taskQueue.shift(),z=this.tasks[S];delete this.tasks[S],this.taskQueue.length&&this.invoker.trigger(),z&&this.processTask(S,z)}},Bf.prototype.processTask=function(S,z){var J=this;if("<response>"===z.type){var ce=this.callbacks[S];delete this.callbacks[S],ce&&(z.error?ce(aa(z.error)):ce(null,aa(z.data)))}else{var be=!1,Ae=V(this.globalScope)?void 0:[],Ne=z.hasCallback?function(Tt,Wt){be=!0,delete J.cancelCallbacks[S],J.target.postMessage({id:S,type:"<response>",sourceMapId:J.mapId,error:Tt?Ii(Tt):null,data:Ii(Wt,Ae)},Ae)}:function(Tt){be=!0},We=null,st=aa(z.data);if(this.parent[z.type])We=this.parent[z.type](z.sourceMapId,st,Ne);else if(this.parent.getWorkerSource){var vt=z.type.split(".");We=this.parent.getWorkerSource(z.sourceMapId,vt[0],st.source)[vt[1]](st,Ne)}else Ne(new Error("Could not find function "+z.type));!be&&We&&We.cancel&&(this.cancelCallbacks[S]=We.cancel)}},Bf.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Qo=function(S,z){S&&(z?this.setSouthWest(S).setNorthEast(z):4===S.length?this.setSouthWest([S[0],S[1]]).setNorthEast([S[2],S[3]]):this.setSouthWest(S[0]).setNorthEast(S[1]))};Qo.prototype.setNorthEast=function(S){return this._ne=S instanceof Lo?new Lo(S.lng,S.lat):Lo.convert(S),this},Qo.prototype.setSouthWest=function(S){return this._sw=S instanceof Lo?new Lo(S.lng,S.lat):Lo.convert(S),this},Qo.prototype.extend=function(S){var z,J,ce=this._sw,be=this._ne;if(S instanceof Lo)z=S,J=S;else{if(!(S instanceof Qo))return Array.isArray(S)?4===S.length||S.every(Array.isArray)?this.extend(Qo.convert(S)):this.extend(Lo.convert(S)):this;if(J=S._ne,!(z=S._sw)||!J)return this}return ce||be?(ce.lng=Math.min(z.lng,ce.lng),ce.lat=Math.min(z.lat,ce.lat),be.lng=Math.max(J.lng,be.lng),be.lat=Math.max(J.lat,be.lat)):(this._sw=new Lo(z.lng,z.lat),this._ne=new Lo(J.lng,J.lat)),this},Qo.prototype.getCenter=function(){return new Lo((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Qo.prototype.getSouthWest=function(){return this._sw},Qo.prototype.getNorthEast=function(){return this._ne},Qo.prototype.getNorthWest=function(){return new Lo(this.getWest(),this.getNorth())},Qo.prototype.getSouthEast=function(){return new Lo(this.getEast(),this.getSouth())},Qo.prototype.getWest=function(){return this._sw.lng},Qo.prototype.getSouth=function(){return this._sw.lat},Qo.prototype.getEast=function(){return this._ne.lng},Qo.prototype.getNorth=function(){return this._ne.lat},Qo.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Qo.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Qo.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Qo.prototype.contains=function(S){var z=Lo.convert(S),J=z.lng,ce=z.lat,Ae=this._sw.lng<=J&&J<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Ae=this._sw.lng>=J&&J>=this._ne.lng),this._sw.lat<=ce&&ce<=this._ne.lat&&Ae},Qo.convert=function(S){return!S||S instanceof Qo?S:new Qo(S)};var Lo=function(S,z){if(isNaN(S)||isNaN(z))throw new Error("Invalid LngLat object: ("+S+", "+z+")");if(this.lng=+S,this.lat=+z,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Lo.prototype.wrap=function(){return new Lo(p(this.lng,-180,180),this.lat)},Lo.prototype.toArray=function(){return[this.lng,this.lat]},Lo.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Lo.prototype.distanceTo=function(S){var z=Math.PI/180,J=this.lat*z,ce=S.lat*z,be=Math.sin(J)*Math.sin(ce)+Math.cos(J)*Math.cos(ce)*Math.cos((S.lng-this.lng)*z);return 6371008.8*Math.acos(Math.min(be,1))},Lo.prototype.toBounds=function(S){void 0===S&&(S=0);var z=360*S/40075017,J=z/Math.cos(Math.PI/180*this.lat);return new Qo(new Lo(this.lng-J,this.lat-z),new Lo(this.lng+J,this.lat+z))},Lo.convert=function(S){if(S instanceof Lo)return S;if(Array.isArray(S)&&(2===S.length||3===S.length))return new Lo(Number(S[0]),Number(S[1]));if(!Array.isArray(S)&&"object"==typeof S&&null!==S)return new Lo(Number("lng"in S?S.lng:S.lon),Number(S.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var t0=2*Math.PI*6371008.8;function Ed(S){return t0*Math.cos(S*Math.PI/180)}function Sd(S){return(180+S)/360}function n0(S){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+S*Math.PI/360)))/360}function Gy(S,z){return S/Ed(z)}function Ic(S){return 360/Math.PI*Math.atan(Math.exp((180-360*S)*Math.PI/180))-90}var rc=function(S,z,J){void 0===J&&(J=0),this.x=+S,this.y=+z,this.z=+J};rc.fromLngLat=function(S,z){void 0===z&&(z=0);var J=Lo.convert(S);return new rc(Sd(J.lng),n0(J.lat),Gy(z,J.lat))},rc.prototype.toLngLat=function(){return new Lo(360*this.x-180,Ic(this.y))},rc.prototype.toAltitude=function(){return this.z*Ed(Ic(this.y))},rc.prototype.meterInMercatorCoordinateUnits=function(){return 1/t0*(S=Ic(this.y),1/Math.cos(S*Math.PI/180));var S};var Pc=function(S,z,J){this.z=S,this.x=z,this.y=J,this.key=Oh(0,S,S,z,J)};Pc.prototype.equals=function(S){return this.z===S.z&&this.x===S.x&&this.y===S.y},Pc.prototype.url=function(S,z){var J,ce,be,Ae,Ne,We=(ce=this.y,be=this.z,Ae=e0(256*(J=this.x),256*(ce=Math.pow(2,be)-ce-1),be),Ne=e0(256*(J+1),256*(ce+1),be),Ae[0]+","+Ae[1]+","+Ne[0]+","+Ne[1]),st=function(vt,Tt,Wt){for(var on,Jt="",xn=vt;xn>0;xn--)Jt+=(Tt&(on=1<<xn-1)?1:0)+(Wt&on?2:0);return Jt}(this.z,this.x,this.y);return S[(this.x+this.y)%S.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===z?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",st).replace("{bbox-epsg-3857}",We)},Pc.prototype.getTilePoint=function(S){var z=Math.pow(2,this.z);return new i(8192*(S.x*z-this.x),8192*(S.y*z-this.y))},Pc.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var fm=function(S,z){this.wrap=S,this.canonical=z,this.key=Oh(S,z.z,z.z,z.x,z.y)},fs=function(S,z,J,ce,be){this.overscaledZ=S,this.wrap=z,this.canonical=new Pc(J,+ce,+be),this.key=Oh(z,S,J,ce,be)};function Oh(S,z,J,ce,be){(S*=2)<0&&(S=-1*S-1);var Ae=1<<J;return(Ae*Ae*S+Ae*be+ce).toString(36)+J.toString(36)+z.toString(36)}fs.prototype.equals=function(S){return this.overscaledZ===S.overscaledZ&&this.wrap===S.wrap&&this.canonical.equals(S.canonical)},fs.prototype.scaledTo=function(S){var z=this.canonical.z-S;return S>this.canonical.z?new fs(S,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new fs(S,this.wrap,S,this.canonical.x>>z,this.canonical.y>>z)},fs.prototype.calculateScaledKey=function(S,z){var J=this.canonical.z-S;return S>this.canonical.z?Oh(this.wrap*+z,S,this.canonical.z,this.canonical.x,this.canonical.y):Oh(this.wrap*+z,S,S,this.canonical.x>>J,this.canonical.y>>J)},fs.prototype.isChildOf=function(S){if(S.wrap!==this.wrap)return!1;var z=this.canonical.z-S.canonical.z;return 0===S.overscaledZ||S.overscaledZ<this.overscaledZ&&S.canonical.x===this.canonical.x>>z&&S.canonical.y===this.canonical.y>>z},fs.prototype.children=function(S){if(this.overscaledZ>=S)return[new fs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var z=this.canonical.z+1,J=2*this.canonical.x,ce=2*this.canonical.y;return[new fs(z,this.wrap,z,J,ce),new fs(z,this.wrap,z,J+1,ce),new fs(z,this.wrap,z,J,ce+1),new fs(z,this.wrap,z,J+1,ce+1)]},fs.prototype.isLessThan=function(S){return this.wrap<S.wrap||!(this.wrap>S.wrap)&&(this.overscaledZ<S.overscaledZ||!(this.overscaledZ>S.overscaledZ)&&(this.canonical.x<S.canonical.x||!(this.canonical.x>S.canonical.x)&&this.canonical.y<S.canonical.y))},fs.prototype.wrapped=function(){return new fs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},fs.prototype.unwrapTo=function(S){return new fs(this.overscaledZ,S,this.canonical.z,this.canonical.x,this.canonical.y)},fs.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},fs.prototype.toUnwrapped=function(){return new fm(this.wrap,this.canonical)},fs.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},fs.prototype.getTilePoint=function(S){return this.canonical.getTilePoint(new rc(S.x-this.wrap,S.y))},fr("CanonicalTileID",Pc),fr("OverscaledTileID",fs,{omit:["posMatrix"]});var ic=function(S,z,J){if(this.uid=S,z.height!==z.width)throw new RangeError("DEM tiles must be square");if(J&&"mapbox"!==J&&"terrarium"!==J)return D('"'+J+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=z.height;var ce=this.dim=z.height-2;this.data=new Uint32Array(z.data.buffer),this.encoding=J||"mapbox";for(var be=0;be<ce;be++)this.data[this._idx(-1,be)]=this.data[this._idx(0,be)],this.data[this._idx(ce,be)]=this.data[this._idx(ce-1,be)],this.data[this._idx(be,-1)]=this.data[this._idx(be,0)],this.data[this._idx(be,ce)]=this.data[this._idx(be,ce-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ce,-1)]=this.data[this._idx(ce-1,0)],this.data[this._idx(-1,ce)]=this.data[this._idx(0,ce-1)],this.data[this._idx(ce,ce)]=this.data[this._idx(ce-1,ce-1)]};ic.prototype.get=function(S,z){var J=new Uint8Array(this.data.buffer),ce=4*this._idx(S,z);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(J[ce],J[ce+1],J[ce+2])},ic.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},ic.prototype._idx=function(S,z){if(S<-1||S>=this.dim+1||z<-1||z>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(z+1)*this.stride+(S+1)},ic.prototype._unpackMapbox=function(S,z,J){return(256*S*256+256*z+J)/10-1e4},ic.prototype._unpackTerrarium=function(S,z,J){return 256*S+z+J/256-32768},ic.prototype.getPixels=function(){return new Ho({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},ic.prototype.backfillBorder=function(S,z,J){if(this.dim!==S.dim)throw new Error("dem dimension mismatch");var ce=z*this.dim,be=z*this.dim+this.dim,Ae=J*this.dim,Ne=J*this.dim+this.dim;switch(z){case-1:ce=be-1;break;case 1:be=ce+1}switch(J){case-1:Ae=Ne-1;break;case 1:Ne=Ae+1}for(var We=-z*this.dim,st=-J*this.dim,vt=Ae;vt<Ne;vt++)for(var Tt=ce;Tt<be;Tt++)this.data[this._idx(Tt,vt)]=S.data[this._idx(Tt+We,vt+st)]},fr("DEMData",ic);var Dd=function(S){this._stringToNumber={},this._numberToString=[];for(var z=0;z<S.length;z++){var J=S[z];this._stringToNumber[J]=z,this._numberToString[z]=J}};Dd.prototype.encode=function(S){return this._stringToNumber[S]},Dd.prototype.decode=function(S){return this._numberToString[S]};var Id=function(S,z,J,ce,be){this.type="Feature",this._vectorTileFeature=S,S._z=z,S._x=J,S._y=ce,this.properties=S.properties,this.id=be},r0={geometry:{configurable:!0}};r0.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},r0.geometry.set=function(S){this._geometry=S},Id.prototype.toJSON=function(){var S={geometry:this.geometry};for(var z in this)"_geometry"!==z&&"_vectorTileFeature"!==z&&(S[z]=this[z]);return S},Object.defineProperties(Id.prototype,r0);var jf=function(){this.state={},this.stateChanges={},this.deletedStates={}};jf.prototype.updateState=function(S,z,J){var ce=String(z);if(this.stateChanges[S]=this.stateChanges[S]||{},this.stateChanges[S][ce]=this.stateChanges[S][ce]||{},f(this.stateChanges[S][ce],J),null===this.deletedStates[S])for(var be in this.deletedStates[S]={},this.state[S])be!==ce&&(this.deletedStates[S][be]=null);else if(this.deletedStates[S]&&null===this.deletedStates[S][ce])for(var Ae in this.deletedStates[S][ce]={},this.state[S][ce])J[Ae]||(this.deletedStates[S][ce][Ae]=null);else for(var Ne in J)this.deletedStates[S]&&this.deletedStates[S][ce]&&null===this.deletedStates[S][ce][Ne]&&delete this.deletedStates[S][ce][Ne]},jf.prototype.removeFeatureState=function(S,z,J){if(null!==this.deletedStates[S]){var ce=String(z);if(this.deletedStates[S]=this.deletedStates[S]||{},J&&void 0!==z)null!==this.deletedStates[S][ce]&&(this.deletedStates[S][ce]=this.deletedStates[S][ce]||{},this.deletedStates[S][ce][J]=null);else if(void 0!==z)if(this.stateChanges[S]&&this.stateChanges[S][ce])for(J in this.deletedStates[S][ce]={},this.stateChanges[S][ce])this.deletedStates[S][ce][J]=null;else this.deletedStates[S][ce]=null;else this.deletedStates[S]=null}},jf.prototype.getState=function(S,z){var J=String(z),Ae=f({},(this.state[S]||{})[J],(this.stateChanges[S]||{})[J]);if(null===this.deletedStates[S])return{};if(this.deletedStates[S]){var Ne=this.deletedStates[S][z];if(null===Ne)return{};for(var We in Ne)delete Ae[We]}return Ae},jf.prototype.initializeTileState=function(S,z){S.setFeatureState(this.state,z)},jf.prototype.coalesceChanges=function(S,z){var J={};for(var ce in this.stateChanges){this.state[ce]=this.state[ce]||{};var be={};for(var Ae in this.stateChanges[ce])this.state[ce][Ae]||(this.state[ce][Ae]={}),f(this.state[ce][Ae],this.stateChanges[ce][Ae]),be[Ae]=this.state[ce][Ae];J[ce]=be}for(var Ne in this.deletedStates){this.state[Ne]=this.state[Ne]||{};var We={};if(null===this.deletedStates[Ne])for(var st in this.state[Ne])We[st]={},this.state[Ne][st]={};else for(var vt in this.deletedStates[Ne]){if(null===this.deletedStates[Ne][vt])this.state[Ne][vt]={};else for(var Tt=0,Wt=Object.keys(this.deletedStates[Ne][vt]);Tt<Wt.length;Tt+=1)delete this.state[Ne][vt][Wt[Tt]];We[vt]=this.state[Ne][vt]}J[Ne]=J[Ne]||{},f(J[Ne],We)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(J).length)for(var Jt in S)S[Jt].setFeatureState(J,z)};var Uu=function(S,z){this.tileID=S,this.x=S.canonical.x,this.y=S.canonical.y,this.z=S.canonical.z,this.grid=new Ar(8192,16,0),this.grid3D=new Ar(8192,16,0),this.featureIndexArray=new Ot,this.promoteId=z};function Pd(S,z,J,ce,be){return k(S,function(Ae,Ne){var We=z instanceof rl?z.get(Ne):null;return We&&We.evaluate?We.evaluate(J,ce,be):We})}function i0(S){for(var z=1/0,J=1/0,ce=-1/0,be=-1/0,Ae=0,Ne=S;Ae<Ne.length;Ae+=1){var We=Ne[Ae];z=Math.min(z,We.x),J=Math.min(J,We.y),ce=Math.max(ce,We.x),be=Math.max(be,We.y)}return{minX:z,minY:J,maxX:ce,maxY:be}}function a0(S,z){return z-S}Uu.prototype.insert=function(S,z,J,ce,be,Ae){var Ne=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(J,ce,be);for(var We=Ae?this.grid3D:this.grid,st=0;st<z.length;st++){for(var vt=z[st],Tt=[1/0,1/0,-1/0,-1/0],Wt=0;Wt<vt.length;Wt++){var on=vt[Wt];Tt[0]=Math.min(Tt[0],on.x),Tt[1]=Math.min(Tt[1],on.y),Tt[2]=Math.max(Tt[2],on.x),Tt[3]=Math.max(Tt[3],on.y)}Tt[0]<8192&&Tt[1]<8192&&Tt[2]>=0&&Tt[3]>=0&&We.insert(Ne,Tt[0],Tt[1],Tt[2],Tt[3])}},Uu.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Sf.VectorTile(new _d(this.rawTileData)).layers,this.sourceLayerCoder=new Dd(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Uu.prototype.query=function(S,z,J,ce){var be=this;this.loadVTLayers();for(var Ae=S.params||{},Ne=8192/S.tileSize/S.scale,We=Ni(Ae.filter),st=S.queryGeometry,vt=S.queryPadding*Ne,Tt=i0(st),Wt=this.grid.query(Tt.minX-vt,Tt.minY-vt,Tt.maxX+vt,Tt.maxY+vt),on=i0(S.cameraQueryGeometry),xn=0,Ln=this.grid3D.query(on.minX-vt,on.minY-vt,on.maxX+vt,on.maxY+vt,function(Rr,qr,fi,si){return function(_i,Ri,Oi,Ci,Hi){for(var Vi=0,Fi=_i;Vi<Fi.length;Vi+=1){var xa=Fi[Vi];if(Ri<=xa.x&&Oi<=xa.y&&Ci>=xa.x&&Hi>=xa.y)return!0}var ja=[new i(Ri,Oi),new i(Ri,Hi),new i(Ci,Hi),new i(Ci,Oi)];if(_i.length>2)for(var Za=0,ia=ja;Za<ia.length;Za+=1)if(Rl(_i,ia[Za]))return!0;for(var Ha=0;Ha<_i.length-1;Ha++)if(_f(_i[Ha],_i[Ha+1],ja))return!0;return!1}(S.cameraQueryGeometry,Rr-vt,qr-vt,fi+vt,si+vt)});xn<Ln.length;xn+=1)Wt.push(Ln[xn]);Wt.sort(a0);for(var Gn,ir={},or=function(Rr){var qr=Wt[Rr];if(qr!==Gn){Gn=qr;var fi=be.featureIndexArray.get(qr),si=null;be.loadMatchingFeature(ir,fi.bucketIndex,fi.sourceLayerIndex,fi.featureIndex,We,Ae.layers,Ae.availableImages,z,J,ce,function(_i,Ri,Oi){return si||(si=Do(_i)),Ri.queryIntersectsFeature(st,_i,Oi,si,be.z,S.transform,Ne,S.pixelPosMatrix)})}},dr=0;dr<Wt.length;dr++)or(dr);return ir},Uu.prototype.loadMatchingFeature=function(S,z,J,ce,be,Ae,Ne,We,st,vt,Tt){var Wt=this.bucketLayerIDs[z];if(!Ae||function(fi,si){for(var _i=0;_i<fi.length;_i++)if(si.indexOf(fi[_i])>=0)return!0;return!1}(Ae,Wt)){var on=this.sourceLayerCoder.decode(J),Jt=this.vtLayers[on].feature(ce);if(be.filter(new Ia(this.tileID.overscaledZ),Jt))for(var xn=this.getId(Jt,on),Ln=0;Ln<Wt.length;Ln++){var Wn=Wt[Ln];if(!(Ae&&Ae.indexOf(Wn)<0)){var Gn=We[Wn];if(Gn){var ir={};void 0!==xn&&vt&&(ir=vt.getState(Gn.sourceLayer||"_geojsonTileLayer",xn));var or=st[Wn];or.paint=Pd(or.paint,Gn.paint,Jt,ir,Ne),or.layout=Pd(or.layout,Gn.layout,Jt,ir,Ne);var dr=!Tt||Tt(Jt,Gn,ir);if(dr){var Rr=new Id(Jt,this.z,this.x,this.y,xn);Rr.layer=or;var qr=S[Wn];void 0===qr&&(qr=S[Wn]=[]),qr.push({featureIndex:ce,feature:Rr,intersectionZ:dr})}}}}}},Uu.prototype.lookupSymbolFeatures=function(S,z,J,ce,be,Ae,Ne,We){var st={};this.loadVTLayers();for(var vt=Ni(be),Tt=0,Wt=S;Tt<Wt.length;Tt+=1)this.loadMatchingFeature(st,J,ce,Wt[Tt],vt,Ae,Ne,We,z);return st},Uu.prototype.hasLayer=function(S){for(var z=0,J=this.bucketLayerIDs;z<J.length;z+=1)for(var ce=0,be=J[z];ce<be.length;ce+=1)if(S===be[ce])return!0;return!1},Uu.prototype.getId=function(S,z){var J=S.id;return this.promoteId&&"boolean"==typeof(J=S.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[z]])&&(J=Number(J)),J},fr("FeatureIndex",Uu,{omit:["rawTileData","sourceLayerCoder"]});var Ss=function(S,z){this.tileID=S,this.uid=m(),this.uses=0,this.tileSize=z,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Ss.prototype.registerFadeDuration=function(S){var z=S+this.timeAdded;z<U.now()||this.fadeEndTime&&z<this.fadeEndTime||(this.fadeEndTime=z)},Ss.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Ss.prototype.loadVectorData=function(S,z,J){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",S){for(var ce in S.featureIndex&&(this.latestFeatureIndex=S.featureIndex,S.rawTileData?(this.latestRawTileData=S.rawTileData,this.latestFeatureIndex.rawTileData=S.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=S.collisionBoxArray,this.buckets=function(vt,Tt){var Wt={};if(!Tt)return Wt;for(var on=function(){var Ln=xn[Jt],Wn=Ln.layerIds.map(function(dr){return Tt.getLayer(dr)}).filter(Boolean);if(0!==Wn.length){Ln.layers=Wn,Ln.stateDependentLayerIds&&(Ln.stateDependentLayers=Ln.stateDependentLayerIds.map(function(dr){return Wn.filter(function(Rr){return Rr.id===dr})[0]}));for(var Gn=0,ir=Wn;Gn<ir.length;Gn+=1)Wt[ir[Gn].id]=Ln}},Jt=0,xn=vt;Jt<xn.length;Jt+=1)on();return Wt}(S.buckets,z.style),this.hasSymbolBuckets=!1,this.buckets){var be=this.buckets[ce];if(be instanceof co){if(this.hasSymbolBuckets=!0,!J)break;be.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Ae in this.buckets){var Ne=this.buckets[Ae];if(Ne instanceof co&&Ne.hasRTLText){this.hasRTLText=!0,Ko.isLoading()||Ko.isLoaded()||"deferred"!==go()||Ka();break}}for(var We in this.queryPadding=0,this.buckets){var st=this.buckets[We];this.queryPadding=Math.max(this.queryPadding,z.style.getLayer(We).queryRadius(st))}S.imageAtlas&&(this.imageAtlas=S.imageAtlas),S.glyphAtlasImage&&(this.glyphAtlasImage=S.glyphAtlasImage)}else this.collisionBoxArray=new Ee},Ss.prototype.unloadVectorData=function(){for(var S in this.buckets)this.buckets[S].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ss.prototype.getBucket=function(S){return this.buckets[S.id]},Ss.prototype.upload=function(S){for(var z in this.buckets){var J=this.buckets[z];J.uploadPending()&&J.upload(S)}var ce=S.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new nc(S,this.imageAtlas.image,ce.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new nc(S,this.glyphAtlasImage,ce.ALPHA),this.glyphAtlasImage=null)},Ss.prototype.prepare=function(S){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(S,this.imageAtlasTexture)},Ss.prototype.queryRenderedFeatures=function(S,z,J,ce,be,Ae,Ne,We,st,vt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ce,cameraQueryGeometry:be,scale:Ae,tileSize:this.tileSize,pixelPosMatrix:vt,transform:We,params:Ne,queryPadding:this.queryPadding*st},S,z,J):{}},Ss.prototype.querySourceFeatures=function(S,z){var J=this.latestFeatureIndex;if(J&&J.rawTileData){var ce=J.loadVTLayers(),be=z?z.sourceLayer:"",Ae=ce._geojsonTileLayer||ce[be];if(Ae)for(var Ne=Ni(z&&z.filter),We=this.tileID.canonical,st=We.z,vt=We.x,Tt=We.y,Wt={z:st,x:vt,y:Tt},on=0;on<Ae.length;on++){var Jt=Ae.feature(on);if(Ne.filter(new Ia(this.tileID.overscaledZ),Jt)){var xn=J.getId(Jt,be),Ln=new Id(Jt,st,vt,Tt,xn);Ln.tile=Wt,S.push(Ln)}}}},Ss.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Ss.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ss.prototype.setExpiryData=function(S){var z=this.expirationTime;if(S.cacheControl){var J=P(S.cacheControl);J["max-age"]&&(this.expirationTime=Date.now()+1e3*J["max-age"])}else S.expires&&(this.expirationTime=new Date(S.expires).getTime());if(this.expirationTime){var ce=Date.now(),be=!1;if(this.expirationTime>ce)be=!1;else if(z)if(this.expirationTime<z)be=!0;else{var Ae=this.expirationTime-z;Ae?this.expirationTime=ce+Math.max(Ae,3e4):be=!0}else be=!0;be?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ss.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Ss.prototype.setFeatureState=function(S,z){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(S).length){var J=this.latestFeatureIndex.loadVTLayers();for(var ce in this.buckets)if(z.style.hasLayer(ce)){var be=this.buckets[ce],Ae=be.layers[0].sourceLayer||"_geojsonTileLayer",Ne=J[Ae],We=S[Ae];if(Ne&&We&&0!==Object.keys(We).length){be.update(We,Ne,this.imageAtlas&&this.imageAtlas.patternPositions||{});var st=z&&z.style&&z.style.getLayer(ce);st&&(this.queryPadding=Math.max(this.queryPadding,st.queryRadius(be)))}}}},Ss.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Ss.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<U.now()},Ss.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ss.prototype.setHoldDuration=function(S){this.symbolFadeHoldUntil=U.now()+S},Ss.prototype.setDependencies=function(S,z){for(var J={},ce=0,be=z;ce<be.length;ce+=1)J[be[ce]]=!0;this.dependencies[S]=J},Ss.prototype.hasDependency=function(S,z){for(var J=0,ce=S;J<ce.length;J+=1){var Ae=this.dependencies[ce[J]];if(Ae)for(var Ne=0,We=z;Ne<We.length;Ne+=1)if(Ae[We[Ne]])return!0}return!1};var Lc=self.performance,o0=function(S){this._marks={start:[S.url,"start"].join("#"),end:[S.url,"end"].join("#"),measure:S.url.toString()},Lc.mark(this._marks.start)};o0.prototype.finish=function(){Lc.mark(this._marks.end);var S=Lc.getEntriesByName(this._marks.measure);return 0===S.length&&(Lc.measure(this._marks.measure,this._marks.start,this._marks.end),S=Lc.getEntriesByName(this._marks.measure),Lc.clearMarks(this._marks.start),Lc.clearMarks(this._marks.end),Lc.clearMeasures(this._marks.measure)),S},e.Actor=Bf,e.AlphaImage=kc,e.CanonicalTileID=Pc,e.CollisionBoxArray=Ee,e.Color=rn,e.DEMData=ic,e.DataConstantProperty=zi,e.DictionaryCoder=Dd,e.EXTENT=8192,e.ErrorEvent=Se,e.EvaluationParameters=Ia,e.Event=ke,e.Evented=Ce,e.FeatureIndex=Uu,e.FillBucket=Nl,e.FillExtrusionBucket=bu,e.ImageAtlas=Ec,e.ImagePosition=wd,e.LineBucket=vl,e.LngLat=Lo,e.LngLatBounds=Qo,e.MercatorCoordinate=rc,e.ONE_EM=24,e.OverscaledTileID=fs,e.Point=i,e.Point$1=i,e.Properties=Os,e.Protobuf=_d,e.RGBAImage=Ho,e.RequestManager=ue,e.RequestPerformance=o0,e.ResourceType=kt,e.SegmentVector=Gt,e.SourceFeatureState=jf,e.StructArrayLayout1ui2=$,e.StructArrayLayout2f1f2i16=Lu,e.StructArrayLayout2i4=so,e.StructArrayLayout3ui6=ks,e.StructArrayLayout4i8=Vo,e.SymbolBucket=co,e.Texture=nc,e.Tile=Ss,e.Transitionable=Cl,e.Uniform1f=ur,e.Uniform1i=Bi,e.Uniform2f=$r,e.Uniform3f=Ti,e.Uniform4f=bi,e.UniformColor=Si,e.UniformMatrix4f=ca,e.UnwrappedTileID=fm,e.ValidationError=Ge,e.WritingMode=El,e.ZoomHistory=ya,e.add=function(S,z,J){return S[0]=z[0]+J[0],S[1]=z[1]+J[1],S[2]=z[2]+J[2],S},e.addDynamicAttributes=Jp,e.asyncAll=function(S,z,J){if(!S.length)return J(null,[]);var ce=S.length,be=new Array(S.length),Ae=null;S.forEach(function(Ne,We){z(Ne,function(st,vt){st&&(Ae=st),be[We]=vt,0==--ce&&J(Ae,be)})})},e.bezier=h,e.bindAll=c,e.browser=U,e.cacheEntryPossiblyAdded=function(S){++ct>Xe&&(S.getActor().send("enforceCacheSizeLimit",qe),ct=0)},e.clamp=d,e.clearTileCache=function(S){var z=self.caches.delete("mapbox-tiles");S&&z.catch(S).then(function(){return S()})},e.clipLine=Zp,e.clone=function(S){var z=new mo(16);return z[0]=S[0],z[1]=S[1],z[2]=S[2],z[3]=S[3],z[4]=S[4],z[5]=S[5],z[6]=S[6],z[7]=S[7],z[8]=S[8],z[9]=S[9],z[10]=S[10],z[11]=S[11],z[12]=S[12],z[13]=S[13],z[14]=S[14],z[15]=S[15],z},e.clone$1=E,e.clone$2=function(S){var z=new mo(3);return z[0]=S[0],z[1]=S[1],z[2]=S[2],z},e.collisionCircleLayout=Ey,e.config=W,e.create=function(){var S=new mo(16);return mo!=Float32Array&&(S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=0,S[12]=0,S[13]=0,S[14]=0),S[0]=1,S[5]=1,S[10]=1,S[15]=1,S},e.create$1=function(){var S=new mo(9);return mo!=Float32Array&&(S[1]=0,S[2]=0,S[3]=0,S[5]=0,S[6]=0,S[7]=0),S[0]=1,S[4]=1,S[8]=1,S},e.create$2=function(){var S=new mo(4);return mo!=Float32Array&&(S[1]=0,S[2]=0),S[0]=1,S[3]=1,S},e.createCommonjsModule=o,e.createExpression=ln,e.createLayout=ga,e.createStyleLayer=function(S){return"custom"===S.type?new zf(S):new Vu[S.type](S)},e.cross=function(S,z,J){var ce=z[0],be=z[1],Ae=z[2],Ne=J[0],We=J[1],st=J[2];return S[0]=be*st-Ae*We,S[1]=Ae*Ne-ce*st,S[2]=ce*We-be*Ne,S},e.deepEqual=function S(z,J){if(Array.isArray(z)){if(!Array.isArray(J)||z.length!==J.length)return!1;for(var ce=0;ce<z.length;ce++)if(!S(z[ce],J[ce]))return!1;return!0}if("object"==typeof z&&null!==z&&null!==J){if("object"!=typeof J||Object.keys(z).length!==Object.keys(J).length)return!1;for(var be in z)if(!S(z[be],J[be]))return!1;return!0}return z===J},e.dot=function(S,z){return S[0]*z[0]+S[1]*z[1]+S[2]*z[2]},e.dot$1=function(S,z){return S[0]*z[0]+S[1]*z[1]+S[2]*z[2]+S[3]*z[3]},e.ease=s,e.emitValidationErrors=Zr,e.endsWith=A,e.enforceCacheSizeLimit=function(S){lt(),je&&je.then(function(z){z.keys().then(function(J){for(var ce=0;ce<J.length-S;ce++)z.delete(J[ce])})})},e.evaluateSizeForFeature=yl,e.evaluateSizeForZoom=Td,e.evaluateVariableOffset=Xp,e.evented=Fa,e.extend=f,e.featureFilter=Ni,e.filterObject=C,e.fromRotation=function(S,z){var J=Math.sin(z),ce=Math.cos(z);return S[0]=ce,S[1]=J,S[2]=0,S[3]=-J,S[4]=ce,S[5]=0,S[6]=0,S[7]=0,S[8]=1,S},e.getAnchorAlignment=Wp,e.getAnchorJustification=Nf,e.getArrayBuffer=Ft,e.getImage=dn,e.getJSON=function(S,z){return at(f(S,{type:"json"}),z)},e.getRTLTextPluginStatus=go,e.getReferrer=Et,e.getVideo=function(S,z){var J,ce,be=self.document.createElement("video");be.muted=!0,be.onloadstart=function(){z(null,be)};for(var Ae=0;Ae<S.length;Ae++){var Ne=self.document.createElement("source");J=S[Ae],ce=void 0,(ce=self.document.createElement("a")).href=J,(ce.protocol!==self.document.location.protocol||ce.host!==self.document.location.host)&&(be.crossOrigin="Anonymous"),Ne.src=S[Ae],be.appendChild(Ne)}return{cancel:function(){}}},e.identity=Tc,e.invert=function(S,z){var J=z[0],ce=z[1],be=z[2],Ae=z[3],Ne=z[4],We=z[5],st=z[6],vt=z[7],Tt=z[8],Wt=z[9],on=z[10],Jt=z[11],xn=z[12],Ln=z[13],Wn=z[14],Gn=z[15],ir=J*We-ce*Ne,or=J*st-be*Ne,dr=J*vt-Ae*Ne,Rr=ce*st-be*We,qr=ce*vt-Ae*We,fi=be*vt-Ae*st,si=Tt*Ln-Wt*xn,_i=Tt*Wn-on*xn,Ri=Tt*Gn-Jt*xn,Oi=Wt*Wn-on*Ln,Ci=Wt*Gn-Jt*Ln,Hi=on*Gn-Jt*Wn,Vi=ir*Hi-or*Ci+dr*Oi+Rr*Ri-qr*_i+fi*si;return Vi?(S[0]=(We*Hi-st*Ci+vt*Oi)*(Vi=1/Vi),S[1]=(be*Ci-ce*Hi-Ae*Oi)*Vi,S[2]=(Ln*fi-Wn*qr+Gn*Rr)*Vi,S[3]=(on*qr-Wt*fi-Jt*Rr)*Vi,S[4]=(st*Ri-Ne*Hi-vt*_i)*Vi,S[5]=(J*Hi-be*Ri+Ae*_i)*Vi,S[6]=(Wn*dr-xn*fi-Gn*or)*Vi,S[7]=(Tt*fi-on*dr+Jt*or)*Vi,S[8]=(Ne*Ci-We*Ri+vt*si)*Vi,S[9]=(ce*Ri-J*Ci-Ae*si)*Vi,S[10]=(xn*qr-Ln*dr+Gn*ir)*Vi,S[11]=(Wt*dr-Tt*qr-Jt*ir)*Vi,S[12]=(We*_i-Ne*Oi-st*si)*Vi,S[13]=(J*Oi-ce*_i+be*si)*Vi,S[14]=(Ln*or-xn*Rr-Wn*ir)*Vi,S[15]=(Tt*Rr-Wt*or+on*ir)*Vi,S):null},e.isChar=Kr,e.isMapboxURL=pe,e.keysDifference=function(S,z){var J=[];for(var ce in S)ce in z||J.push(ce);return J},e.makeRequest=at,e.mapObject=k,e.mercatorXfromLng=Sd,e.mercatorYfromLat=n0,e.mercatorZfromAltitude=Gy,e.mul=Ig,e.multiply=Ru,e.mvt=Sf,e.normalize=function(S,z){var J=z[0],ce=z[1],be=z[2],Ae=J*J+ce*ce+be*be;return Ae>0&&(Ae=1/Math.sqrt(Ae)),S[0]=z[0]*Ae,S[1]=z[1]*Ae,S[2]=z[2]*Ae,S},e.number=Yr,e.offscreenCanvasSupported=bt,e.ortho=function(S,z,J,ce,be,Ae,Ne){var We=1/(z-J),st=1/(ce-be),vt=1/(Ae-Ne);return S[0]=-2*We,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=-2*st,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[10]=2*vt,S[11]=0,S[12]=(z+J)*We,S[13]=(be+ce)*st,S[14]=(Ne+Ae)*vt,S[15]=1,S},e.parseGlyphPBF=function(S){return new _d(S).readFields(Jg,[])},e.pbf=_d,e.performSymbolLayout=function(S,z,J,ce,be,Ae,Ne){S.createArrays(),S.tilePixelRatio=8192/(512*S.overscaling),S.compareText={},S.iconsNeedLinear=!1;var st=S.layers[0].layout,vt=S.layers[0]._unevaluatedLayout._values,Tt={};if("composite"===S.textSizeData.kind){var Wt=S.textSizeData,Jt=Wt.maxZoom;Tt.compositeTextSizes=[vt["text-size"].possiblyEvaluate(new Ia(Wt.minZoom),Ne),vt["text-size"].possiblyEvaluate(new Ia(Jt),Ne)]}if("composite"===S.iconSizeData.kind){var xn=S.iconSizeData,Wn=xn.maxZoom;Tt.compositeIconSizes=[vt["icon-size"].possiblyEvaluate(new Ia(xn.minZoom),Ne),vt["icon-size"].possiblyEvaluate(new Ia(Wn),Ne)]}Tt.layoutTextSize=vt["text-size"].possiblyEvaluate(new Ia(S.zoom+1),Ne),Tt.layoutIconSize=vt["icon-size"].possiblyEvaluate(new Ia(S.zoom+1),Ne),Tt.textMaxSize=vt["text-size"].possiblyEvaluate(new Ia(18));for(var Gn=24*st.get("text-line-height"),ir="map"===st.get("text-rotation-alignment")&&"point"!==st.get("symbol-placement"),or=st.get("text-keep-upright"),dr=st.get("text-size"),Rr=function(){var si=fi[qr],_i=st.get("text-font").evaluate(si,{},Ne).join(","),Ri=dr.evaluate(si,{},Ne),Oi=Tt.layoutTextSize.evaluate(si,{},Ne),Ci=Tt.layoutIconSize.evaluate(si,{},Ne),Hi={horizontal:{},vertical:void 0},Vi=si.text,Fi=[0,0];if(Vi){var xa=Vi.toString(),ja=24*st.get("text-letter-spacing").evaluate(si,{},Ne),Za=function(_a){for(var Wa=0,Wo=_a;Wa<Wo.length;Wa+=1)if(!pa(Wo[Wa].charCodeAt(0)))return!1;return!0}(xa)?ja:0,ia=st.get("text-anchor").evaluate(si,{},Ne),Ha=st.get("text-variable-anchor");if(!Ha){var Ao=st.get("text-radial-offset").evaluate(si,{},Ne);Fi=Ao?Xp(ia,[24*Ao,am]):st.get("text-offset").evaluate(si,{},Ne).map(function(_a){return 24*_a})}var wo=ir?"center":st.get("text-justify").evaluate(si,{},Ne),Oo=st.get("symbol-placement"),To="point"===Oo?24*st.get("text-max-width").evaluate(si,{},Ne):0,As=function(){S.allowVerticalPlacement&&Ta(xa)&&(Hi.vertical=Po(Vi,z,J,be,_i,To,Gn,ia,"left",Za,Fi,El.vertical,!0,Oo,Oi,Ri))};if(!ir&&Ha){for(var No="auto"===wo?Ha.map(function(_a){return Nf(_a)}):[wo],ea=!1,Pi=0;Pi<No.length;Pi++){var Ds=No[Pi];if(!Hi.horizontal[Ds])if(ea)Hi.horizontal[Ds]=Hi.horizontal[0];else{var zs=Po(Vi,z,J,be,_i,To,Gn,"center",Ds,Za,Fi,El.horizontal,!1,Oo,Oi,Ri);zs&&(Hi.horizontal[Ds]=zs,ea=1===zs.positionedLines.length)}}As()}else{"auto"===wo&&(wo=Nf(ia));var Go=Po(Vi,z,J,be,_i,To,Gn,ia,wo,Za,Fi,El.horizontal,!1,Oo,Oi,Ri);Go&&(Hi.horizontal[wo]=Go),As(),Ta(xa)&&ir&&or&&(Hi.vertical=Po(Vi,z,J,be,_i,To,Gn,ia,wo,Za,Fi,El.vertical,!1,Oo,Oi,Ri))}}var _a,Wa,hs,js,sl,vs=void 0,Bs=!1;if(si.icon&&si.icon.name){var ns=ce[si.icon.name];ns&&(_a=be[si.icon.name],Wa=st.get("icon-offset").evaluate(si,{},Ne),hs=Wp(st.get("icon-anchor").evaluate(si,{},Ne)),vs={image:_a,top:sl=Wa[1]-_a.displaySize[1]*hs.verticalAlign,bottom:sl+_a.displaySize[1],left:js=Wa[0]-_a.displaySize[0]*hs.horizontalAlign,right:js+_a.displaySize[0]},Bs=ns.sdf,void 0===S.sdfIcons?S.sdfIcons=ns.sdf:S.sdfIcons!==ns.sdf&&D("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ns.pixelRatio!==S.pixelRatio||0!==st.get("icon-rotate").constantOr(1))&&(S.iconsNeedLinear=!0))}var Ro=sm(Hi.horizontal)||Hi.vertical;S.iconsInText=!!Ro&&Ro.iconsInText,(Ro||vs)&&function(_a,Wa,Wo,hs,Yo,Zo,Pa,zo,js,ol,sl){var wu=Zo.textMaxSize.evaluate(Wa,{});void 0===wu&&(wu=Pa);var Hu,Vs=_a.layers[0].layout,Tu=Vs.get("icon-offset").evaluate(Wa,{},sl),qu=sm(Wo.horizontal),ou=Pa/24,Ld=_a.tilePixelRatio*ou,Vf=_a.tilePixelRatio*wu/24,Uf=_a.tilePixelRatio*zo,Hf=_a.tilePixelRatio*Vs.get("symbol-spacing"),s0=Vs.get("text-padding")*_a.tilePixelRatio,l0=Vs.get("icon-padding")*_a.tilePixelRatio,u0=Vs.get("text-max-angle")/180*Math.PI,c0="map"===Vs.get("text-rotation-alignment")&&"point"!==Vs.get("symbol-placement"),tf="map"===Vs.get("icon-rotation-alignment")&&"point"!==Vs.get("symbol-placement"),Rh=Vs.get("symbol-placement"),f0=Hf/2,Fh=Vs.get("icon-text-fit");hs&&"none"!==Fh&&(_a.allowVerticalPlacement&&Wo.vertical&&(Hu=Oy(hs,Wo.vertical,Fh,Vs.get("icon-text-fit-padding"),Tu,ou)),qu&&(hs=Oy(hs,qu,Fh,Vs.get("icon-text-fit-padding"),Tu,ou)));var nf=function(dm,th){th.x<0||th.x>=8192||th.y<0||th.y>=8192||function(es,Xl,pm,Au,d0,p0,g0,Cu,Bh,jh,Vh,Nd,m0,Bl,Uh,gm,Wy,Yy,v0,Zy,jl,nh,y0,Gu,$y){var x0,Rc,rh,lf,ih,ah=es.addToLineVertexArray(Xl,pm),b0=0,_0=0,mm=0,Eu=0,Hh=-1,w0=-1,ac={},Xy=qn(""),zd=0,T0=0;if(void 0===Cu._unevaluatedLayout.getValue("text-radial-offset")?(zd=(x0=Cu.layout.get("text-offset").evaluate(jl,{},Gu).map(function(Yh){return 24*Yh}))[0],T0=x0[1]):(zd=24*Cu.layout.get("text-radial-offset").evaluate(jl,{},Gu),T0=am),es.allowVerticalPlacement&&Au.vertical){var vm=Cu.layout.get("text-rotate").evaluate(jl,{},Gu)+90;lf=new Ad(Bh,Xl,jh,Vh,Nd,Au.vertical,m0,Bl,Uh,vm),g0&&(ih=new Ad(Bh,Xl,jh,Vh,Nd,g0,Wy,Yy,Uh,vm))}if(d0){var qh=Cu.layout.get("icon-rotate").evaluate(jl,{}),ym="none"!==Cu.layout.get("icon-text-fit"),xm=tm(d0,qh,y0,ym),oh=g0?tm(g0,qh,y0,ym):void 0;rh=new Ad(Bh,Xl,jh,Vh,Nd,d0,Wy,Yy,!1,qh),b0=4*xm.length;var Bd=es.iconSizeData,Gh=null;"source"===Bd.kind?(Gh=[128*Cu.layout.get("icon-size").evaluate(jl,{})])[0]>32640&&D(es.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===Bd.kind&&((Gh=[128*nh.compositeIconSizes[0].evaluate(jl,{},Gu),128*nh.compositeIconSizes[1].evaluate(jl,{},Gu)])[0]>32640||Gh[1]>32640)&&D(es.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),es.addSymbols(es.icon,xm,Gh,Zy,v0,jl,!1,Xl,ah.lineStartIndex,ah.lineLength,-1,Gu),Hh=es.icon.placedSymbolArray.length-1,oh&&(_0=4*oh.length,es.addSymbols(es.icon,oh,Gh,Zy,v0,jl,El.vertical,Xl,ah.lineStartIndex,ah.lineLength,-1,Gu),w0=es.icon.placedSymbolArray.length-1)}for(var jd in Au.horizontal){var sh=Au.horizontal[jd];if(!Rc){Xy=qn(sh.text);var bm=Cu.layout.get("text-rotate").evaluate(jl,{},Gu);Rc=new Ad(Bh,Xl,jh,Vh,Nd,sh,m0,Bl,Uh,bm)}var _m=1===sh.positionedLines.length;if(mm+=om(es,Xl,sh,p0,Cu,Uh,jl,gm,ah,Au.vertical?El.horizontal:El.horizontalOnly,_m?Object.keys(Au.horizontal):[jd],ac,Hh,nh,Gu),_m)break}Au.vertical&&(Eu+=om(es,Xl,Au.vertical,p0,Cu,Uh,jl,gm,ah,El.vertical,["vertical"],ac,w0,nh,Gu));var Ky=Rc?Rc.boxStartIndex:es.collisionBoxArray.length,M0=Rc?Rc.boxEndIndex:es.collisionBoxArray.length,h_=lf?lf.boxStartIndex:es.collisionBoxArray.length,Qy=lf?lf.boxEndIndex:es.collisionBoxArray.length,wm=rh?rh.boxStartIndex:es.collisionBoxArray.length,Tm=rh?rh.boxEndIndex:es.collisionBoxArray.length,Mm=ih?ih.boxStartIndex:es.collisionBoxArray.length,km=ih?ih.boxEndIndex:es.collisionBoxArray.length,Su=-1,su=function(Yh,Am){return Yh&&Yh.circleDiameter?Math.max(Yh.circleDiameter,Am):Am};Su=su(Rc,Su),Su=su(lf,Su),Su=su(rh,Su);var Wh=(Su=su(ih,Su))>-1?1:0;Wh&&(Su*=$y/24),es.glyphOffsetArray.length>=co.MAX_GLYPHS&&D("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==jl.sortKey&&es.addToSortKeyRanges(es.symbolInstances.length,jl.sortKey),es.symbolInstances.emplaceBack(Xl.x,Xl.y,ac.right>=0?ac.right:-1,ac.center>=0?ac.center:-1,ac.left>=0?ac.left:-1,ac.vertical||-1,Hh,w0,Xy,Ky,M0,h_,Qy,wm,Tm,Mm,km,jh,mm,Eu,b0,_0,Wh,0,m0,zd,T0,Su)}(_a,th,dm,Wo,hs,Yo,Hu,_a.layers[0],_a.collisionBoxArray,Wa.index,Wa.sourceLayerIndex,_a.index,Ld,s0,c0,js,Uf,l0,tf,Tu,Wa,Zo,ol,sl,Pa)};if("line"===Rh)for(var Od=0,Mu=Zp(Wa.geometry,0,0,8192,8192);Od<Mu.length;Od+=1)for(var qf=Mu[Od],Gf=0,Wf=Fy(qf,Hf,u0,Wo.vertical||qu,hs,24,Vf,_a.overscaling,8192);Gf<Wf.length;Gf+=1){var Yf=Wf[Gf];qu&&Dc(_a,qu.text,f0,Yf)||nf(qf,Yf)}else if("line-center"===Rh)for(var Nh=0,ku=Wa.geometry;Nh<ku.length;Nh+=1){var rf=ku[Nh];if(rf.length>1){var $f=Ry(rf,u0,Wo.vertical||qu,hs,24,Vf);$f&&nf(rf,$f)}}else if("Polygon"===Wa.type)for(var zh=0,Xf=zu(Wa.geometry,0);zh<Xf.length;zh+=1){var Jf=Xf[zh],Kf=$p(Jf,16);nf(Jf[0],new Dh(Kf.x,Kf.y,0))}else if("LineString"===Wa.type)for(var Qf=0,hm=Wa.geometry;Qf<hm.length;Qf+=1){var af=hm[Qf];nf(af,new Dh(af[0].x,af[0].y,0))}else if("Point"===Wa.type)for(var Oc=0,Fd=Wa.geometry;Oc<Fd.length;Oc+=1)for(var of=0,sf=Fd[Oc];of<sf.length;of+=1){var h0=sf[of];nf([h0],new Dh(h0.x,h0.y,0))}}(S,si,Hi,vs,ce,Tt,Oi,Ci,Fi,Bs,Ne)},qr=0,fi=S.features;qr<fi.length;qr+=1)Rr();Ae&&S.generateCollisionDebugBuffers()},e.perspective=function(S,z,J,ce,be){var Ae,Ne=1/Math.tan(z/2);return S[0]=Ne/J,S[1]=0,S[2]=0,S[3]=0,S[4]=0,S[5]=Ne,S[6]=0,S[7]=0,S[8]=0,S[9]=0,S[11]=-1,S[12]=0,S[13]=0,S[15]=0,null!=be&&be!==1/0?(S[10]=(be+ce)*(Ae=1/(ce-be)),S[14]=2*be*ce*Ae):(S[10]=-1,S[14]=-2*ce),S},e.pick=function(S,z){for(var J={},ce=0;ce<z.length;ce++){var be=z[ce];be in S&&(J[be]=S[be])}return J},e.plugin=Ko,e.polygonIntersectsPolygon=il,e.postMapLoadEvent=Ue,e.postTurnstileEvent=Pe,e.potpack=Kg,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=fr,e.registerForPluginStateChange=function(S){return S({pluginStatus:na,pluginURL:ko}),Fa.on("pluginStateChange",S),S},e.rotate=function(S,z,J){var ce=z[0],be=z[1],Ae=z[2],Ne=z[3],We=Math.sin(J),st=Math.cos(J);return S[0]=ce*st+Ae*We,S[1]=be*st+Ne*We,S[2]=ce*-We+Ae*st,S[3]=be*-We+Ne*st,S},e.rotateX=function(S,z,J){var ce=Math.sin(J),be=Math.cos(J),Ae=z[4],Ne=z[5],We=z[6],st=z[7],vt=z[8],Tt=z[9],Wt=z[10],on=z[11];return z!==S&&(S[0]=z[0],S[1]=z[1],S[2]=z[2],S[3]=z[3],S[12]=z[12],S[13]=z[13],S[14]=z[14],S[15]=z[15]),S[4]=Ae*be+vt*ce,S[5]=Ne*be+Tt*ce,S[6]=We*be+Wt*ce,S[7]=st*be+on*ce,S[8]=vt*be-Ae*ce,S[9]=Tt*be-Ne*ce,S[10]=Wt*be-We*ce,S[11]=on*be-st*ce,S},e.rotateZ=function(S,z,J){var ce=Math.sin(J),be=Math.cos(J),Ae=z[0],Ne=z[1],We=z[2],st=z[3],vt=z[4],Tt=z[5],Wt=z[6],on=z[7];return z!==S&&(S[8]=z[8],S[9]=z[9],S[10]=z[10],S[11]=z[11],S[12]=z[12],S[13]=z[13],S[14]=z[14],S[15]=z[15]),S[0]=Ae*be+vt*ce,S[1]=Ne*be+Tt*ce,S[2]=We*be+Wt*ce,S[3]=st*be+on*ce,S[4]=vt*be-Ae*ce,S[5]=Tt*be-Ne*ce,S[6]=Wt*be-We*ce,S[7]=on*be-st*ce,S},e.scale=function(S,z,J){var ce=J[0],be=J[1],Ae=J[2];return S[0]=z[0]*ce,S[1]=z[1]*ce,S[2]=z[2]*ce,S[3]=z[3]*ce,S[4]=z[4]*be,S[5]=z[5]*be,S[6]=z[6]*be,S[7]=z[7]*be,S[8]=z[8]*Ae,S[9]=z[9]*Ae,S[10]=z[10]*Ae,S[11]=z[11]*Ae,S[12]=z[12],S[13]=z[13],S[14]=z[14],S[15]=z[15],S},e.scale$1=function(S,z,J){return S[0]=z[0]*J,S[1]=z[1]*J,S[2]=z[2]*J,S[3]=z[3]*J,S},e.scale$2=function(S,z,J){return S[0]=z[0]*J,S[1]=z[1]*J,S[2]=z[2]*J,S},e.setCacheLimits=function(S,z){qe=S,Xe=z},e.setRTLTextPlugin=function(S,z,J){if(void 0===J&&(J=!1),na===Ua||na===So||na===us)throw new Error("setRTLTextPlugin cannot be called multiple times.");ko=U.resolveURL(S),na=Ua,Ts=z,Ra(),J||Ka()},e.sphericalToCartesian=function(S){var z=S[0],J=S[1],ce=S[2];return J+=90,J*=Math.PI/180,ce*=Math.PI/180,{x:z*Math.cos(J)*Math.sin(ce),y:z*Math.sin(J)*Math.sin(ce),z:z*Math.cos(ce)}},e.sqrLen=function(S){var z=S[0],J=S[1];return z*z+J*J},e.styleSpec=Ve,e.sub=function(S,z,J){return S[0]=z[0]-J[0],S[1]=z[1]-J[1],S[2]=z[2]-J[2],S},e.symbolSize=em,e.transformMat3=function(S,z,J){var ce=z[0],be=z[1],Ae=z[2];return S[0]=ce*J[0]+be*J[3]+Ae*J[6],S[1]=ce*J[1]+be*J[4]+Ae*J[7],S[2]=ce*J[2]+be*J[5]+Ae*J[8],S},e.transformMat4=yu,e.translate=function(S,z,J){var ce,be,Ae,Ne,We,st,vt,Tt,Wt,on,Jt,xn,Ln=J[0],Wn=J[1],Gn=J[2];return z===S?(S[12]=z[0]*Ln+z[4]*Wn+z[8]*Gn+z[12],S[13]=z[1]*Ln+z[5]*Wn+z[9]*Gn+z[13],S[14]=z[2]*Ln+z[6]*Wn+z[10]*Gn+z[14],S[15]=z[3]*Ln+z[7]*Wn+z[11]*Gn+z[15]):(be=z[1],Ae=z[2],Ne=z[3],We=z[4],st=z[5],vt=z[6],Tt=z[7],Wt=z[8],on=z[9],Jt=z[10],xn=z[11],S[0]=ce=z[0],S[1]=be,S[2]=Ae,S[3]=Ne,S[4]=We,S[5]=st,S[6]=vt,S[7]=Tt,S[8]=Wt,S[9]=on,S[10]=Jt,S[11]=xn,S[12]=ce*Ln+We*Wn+Wt*Gn+z[12],S[13]=be*Ln+st*Wn+on*Gn+z[13],S[14]=Ae*Ln+vt*Wn+Jt*Gn+z[14],S[15]=Ne*Ln+Tt*Wn+xn*Gn+z[15]),S},e.triggerPluginCompletionEvent=ms,e.uniqueId=m,e.validateCustomStyleLayer=function(S){var z=[],J=S.id;return void 0===J&&z.push({message:"layers."+J+': missing required property "id"'}),void 0===S.render&&z.push({message:"layers."+J+': missing required method "render"'}),S.renderingMode&&"2d"!==S.renderingMode&&"3d"!==S.renderingMode&&z.push({message:"layers."+J+': property "renderingMode" must be either "2d" or "3d"'}),z},e.validateLight=Sr,e.validateStyle=pr,e.values=function(S){var z=[];for(var J in S)z.push(S[J]);return z},e.vectorTile=Sf,e.version="1.10.1",e.warnOnce=D,e.webpSupported=ae,e.window=self,e.wrap=p}),_(0,function(e){function o(ke){var Se=typeof ke;if("number"===Se||"boolean"===Se||"string"===Se||null==ke)return JSON.stringify(ke);if(Array.isArray(ke)){for(var Ce="[",Ve=0,Ge=ke;Ve<Ge.length;Ve+=1)Ce+=o(Ge[Ve])+",";return Ce+"]"}for(var Qe=Object.keys(ke).sort(),ot="{",it=0;it<Qe.length;it++)ot+=JSON.stringify(Qe[it])+":"+o(ke[Qe[it]])+",";return ot+"}"}function a(ke){for(var Se="",Ce=0,Ve=e.refProperties;Ce<Ve.length;Ce+=1)Se+="/"+o(ke[Ve[Ce]]);return Se}var l=function(ke){this.keyCache={},ke&&this.replace(ke)};l.prototype.replace=function(ke){this._layerConfigs={},this._layers={},this.update(ke,[])},l.prototype.update=function(ke,Se){for(var Ce=this,Ve=0,Ge=ke;Ve<Ge.length;Ve+=1){var Qe=Ge[Ve];this._layerConfigs[Qe.id]=Qe;var ot=this._layers[Qe.id]=e.createStyleLayer(Qe);ot._featureFilter=e.featureFilter(ot.filter),this.keyCache[Qe.id]&&delete this.keyCache[Qe.id]}for(var it=0,mt=Se;it<mt.length;it+=1){var xt=mt[it];delete this.keyCache[xt],delete this._layerConfigs[xt],delete this._layers[xt]}this.familiesBySource={};for(var Vt=0,$t=function(tt,dt){for(var Dt={},Nt=0;Nt<tt.length;Nt++){var Yt=dt&&dt[tt[Nt].id]||a(tt[Nt]);dt&&(dt[tt[Nt].id]=Yt);var fn=Dt[Yt];fn||(fn=Dt[Yt]=[]),fn.push(tt[Nt])}var nn=[];for(var In in Dt)nn.push(Dt[In]);return nn}(e.values(this._layerConfigs),this.keyCache);Vt<$t.length;Vt+=1){var pt=$t[Vt].map(function(tt){return Ce._layers[tt.id]}),At=pt[0];if("none"!==At.visibility){var Xt=At.source||"",Ct=this.familiesBySource[Xt];Ct||(Ct=this.familiesBySource[Xt]={});var Pt=At.sourceLayer||"_geojsonTileLayer",Be=Ct[Pt];Be||(Be=Ct[Pt]=[]),Be.push(pt)}}};var i=function(ke){var Se={},Ce=[];for(var Ve in ke){var Ge=ke[Ve],Qe=Se[Ve]={};for(var ot in Ge){var it=Ge[+ot];if(it&&0!==it.bitmap.width&&0!==it.bitmap.height){var mt={x:0,y:0,w:it.bitmap.width+2,h:it.bitmap.height+2};Ce.push(mt),Qe[ot]={rect:mt,metrics:it.metrics}}}}var xt=e.potpack(Ce),pt=new e.AlphaImage({width:xt.w||1,height:xt.h||1});for(var At in ke){var Xt=ke[At];for(var Ct in Xt){var Pt=Xt[+Ct];if(Pt&&0!==Pt.bitmap.width&&0!==Pt.bitmap.height){var Be=Se[At][Ct].rect;e.AlphaImage.copy(Pt.bitmap,pt,{x:0,y:0},{x:Be.x+1,y:Be.y+1},Pt.bitmap)}}}this.image=pt,this.positions=Se};e.register("GlyphAtlas",i);var v=function(ke){this.tileID=new e.OverscaledTileID(ke.tileID.overscaledZ,ke.tileID.wrap,ke.tileID.canonical.z,ke.tileID.canonical.x,ke.tileID.canonical.y),this.uid=ke.uid,this.zoom=ke.zoom,this.pixelRatio=ke.pixelRatio,this.tileSize=ke.tileSize,this.source=ke.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ke.showCollisionBoxes,this.collectResourceTiming=!!ke.collectResourceTiming,this.returnDependencies=!!ke.returnDependencies,this.promoteId=ke.promoteId};function h(ke,Se,Ce){for(var Ve=new e.EvaluationParameters(Se),Ge=0,Qe=ke;Ge<Qe.length;Ge+=1)Qe[Ge].recalculate(Ve,Ce)}function s(ke,Se){var Ce=e.getArrayBuffer(ke.request,function(Ve,Ge,Qe,ot){Ve?Se(Ve):Ge&&Se(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(Ge)),rawData:Ge,cacheControl:Qe,expires:ot})});return function(){Ce.cancel(),Se()}}v.prototype.parse=function(ke,Se,Ce,Ve,Ge){var Qe=this;this.status="parsing",this.data=ke,this.collisionBoxArray=new e.CollisionBoxArray;var ot=new e.DictionaryCoder(Object.keys(ke.layers).sort()),it=new e.FeatureIndex(this.tileID,this.promoteId);it.bucketLayerIDs=[];var mt,xt,Vt,$t,pt={},At={featureIndex:it,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ce},Xt=Se.familiesBySource[this.source];for(var Ct in Xt){var Pt=ke.layers[Ct];if(Pt){1===Pt.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+Ct+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var Be=ot.encode(Ct),tt=[],dt=0;dt<Pt.length;dt++){var Dt=Pt.feature(dt),Nt=it.getId(Dt,Ct);tt.push({feature:Dt,id:Nt,index:dt,sourceLayerIndex:Be})}for(var Yt=0,fn=Xt[Ct];Yt<fn.length;Yt+=1){var nn=fn[Yt],In=nn[0];In.minzoom&&this.zoom<Math.floor(In.minzoom)||In.maxzoom&&this.zoom>=In.maxzoom||"none"!==In.visibility&&(h(nn,this.zoom,Ce),(pt[In.id]=In.createBucket({index:it.bucketLayerIDs.length,layers:nn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Be,sourceID:this.source})).populate(tt,At,this.tileID.canonical),it.bucketLayerIDs.push(nn.map(function(gn){return gn.id})))}}}var Dn=e.mapObject(At.glyphDependencies,function(gn){return Object.keys(gn).map(Number)});Object.keys(Dn).length?Ve.send("getGlyphs",{uid:this.uid,stacks:Dn},function(gn,Pn){mt||(mt=gn,xt=Pn,pn.call(Qe))}):xt={};var kn=Object.keys(At.iconDependencies);kn.length?Ve.send("getImages",{icons:kn,source:this.source,tileID:this.tileID,type:"icons"},function(gn,Pn){mt||(mt=gn,Vt=Pn,pn.call(Qe))}):Vt={};var rn=Object.keys(At.patternDependencies);function pn(){if(mt)return Ge(mt);if(xt&&Vt&&$t){var gn=new i(xt),Pn=new e.ImageAtlas(Vt,$t);for(var jn in pt){var Kn=pt[jn];Kn instanceof e.SymbolBucket?(h(Kn.layers,this.zoom,Ce),e.performSymbolLayout(Kn,xt,gn.positions,Vt,Pn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):Kn.hasPattern&&(Kn instanceof e.LineBucket||Kn instanceof e.FillBucket||Kn instanceof e.FillExtrusionBucket)&&(h(Kn.layers,this.zoom,Ce),Kn.addFeatures(At,this.tileID.canonical,Pn.patternPositions))}this.status="done",Ge(null,{buckets:e.values(pt).filter(function(rr){return!rr.isEmpty()}),featureIndex:it,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:gn.image,imageAtlas:Pn,glyphMap:this.returnDependencies?xt:null,iconMap:this.returnDependencies?Vt:null,glyphPositions:this.returnDependencies?gn.positions:null})}}rn.length?Ve.send("getImages",{icons:rn,source:this.source,tileID:this.tileID,type:"patterns"},function(gn,Pn){mt||(mt=gn,$t=Pn,pn.call(Qe))}):$t={},pn.call(this)};var d=function(ke,Se,Ce,Ve){this.actor=ke,this.layerIndex=Se,this.availableImages=Ce,this.loadVectorData=Ve||s,this.loading={},this.loaded={}};d.prototype.loadTile=function(ke,Se){var Ce=this,Ve=ke.uid;this.loading||(this.loading={});var Ge=!!(ke&&ke.request&&ke.request.collectResourceTiming)&&new e.RequestPerformance(ke.request),Qe=this.loading[Ve]=new v(ke);Qe.abort=this.loadVectorData(ke,function(ot,it){if(delete Ce.loading[Ve],ot||!it)return Qe.status="done",Ce.loaded[Ve]=Qe,Se(ot);var mt=it.rawData,xt={};it.expires&&(xt.expires=it.expires),it.cacheControl&&(xt.cacheControl=it.cacheControl);var Vt={};if(Ge){var $t=Ge.finish();$t&&(Vt.resourceTiming=JSON.parse(JSON.stringify($t)))}Qe.vectorTile=it.vectorTile,Qe.parse(it.vectorTile,Ce.layerIndex,Ce.availableImages,Ce.actor,function(pt,At){if(pt||!At)return Se(pt);Se(null,e.extend({rawTileData:mt.slice(0)},At,xt,Vt))}),Ce.loaded=Ce.loaded||{},Ce.loaded[Ve]=Qe})},d.prototype.reloadTile=function(ke,Se){var Ce=this,Ve=this.loaded,Ge=ke.uid,Qe=this;if(Ve&&Ve[Ge]){var ot=Ve[Ge];ot.showCollisionBoxes=ke.showCollisionBoxes;var it=function(mt,xt){var Vt=ot.reloadCallback;Vt&&(delete ot.reloadCallback,ot.parse(ot.vectorTile,Qe.layerIndex,Ce.availableImages,Qe.actor,Vt)),Se(mt,xt)};"parsing"===ot.status?ot.reloadCallback=it:"done"===ot.status&&(ot.vectorTile?ot.parse(ot.vectorTile,this.layerIndex,this.availableImages,this.actor,it):it())}},d.prototype.abortTile=function(ke,Se){var Ce=this.loading,Ve=ke.uid;Ce&&Ce[Ve]&&Ce[Ve].abort&&(Ce[Ve].abort(),delete Ce[Ve]),Se()},d.prototype.removeTile=function(ke,Se){var Ce=this.loaded,Ve=ke.uid;Ce&&Ce[Ve]&&delete Ce[Ve],Se()};var p=e.window.ImageBitmap,f=function(){this.loaded={}};f.prototype.loadTile=function(ke,Se){var Ce=ke.uid,Ve=ke.encoding,Ge=ke.rawImageData,Qe=p&&Ge instanceof p?this.getImageData(Ge):Ge,ot=new e.DEMData(Ce,Qe,Ve);this.loaded=this.loaded||{},this.loaded[Ce]=ot,Se(null,ot)},f.prototype.getImageData=function(ke){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(ke.width,ke.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=ke.width,this.offscreenCanvas.height=ke.height,this.offscreenCanvasContext.drawImage(ke,0,0,ke.width,ke.height);var Se=this.offscreenCanvasContext.getImageData(-1,-1,ke.width+2,ke.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:Se.width,height:Se.height},Se.data)},f.prototype.removeTile=function(ke){var Se=this.loaded,Ce=ke.uid;Se&&Se[Ce]&&delete Se[Ce]};var g=function ke(Se,Ce){var Ve,Ge=Se&&Se.type;if("FeatureCollection"===Ge)for(Ve=0;Ve<Se.features.length;Ve++)ke(Se.features[Ve],Ce);else if("GeometryCollection"===Ge)for(Ve=0;Ve<Se.geometries.length;Ve++)ke(Se.geometries[Ve],Ce);else if("Feature"===Ge)ke(Se.geometry,Ce);else if("Polygon"===Ge)m(Se.coordinates,Ce);else if("MultiPolygon"===Ge)for(Ve=0;Ve<Se.coordinates.length;Ve++)m(Se.coordinates[Ve],Ce);return Se};function m(ke,Se){if(0!==ke.length){u(ke[0],Se);for(var Ce=1;Ce<ke.length;Ce++)u(ke[Ce],!Se)}}function u(ke,Se){for(var Ce=0,Ve=0,Ge=ke.length,Qe=Ge-1;Ve<Ge;Qe=Ve++)Ce+=(ke[Ve][0]-ke[Qe][0])*(ke[Qe][1]+ke[Ve][1]);Ce>=0!=!!Se&&ke.reverse()}var w=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,c=function(ke){this._feature=ke,this.extent=e.EXTENT,this.type=ke.type,this.properties=ke.tags,"id"in ke&&!isNaN(ke.id)&&(this.id=parseInt(ke.id,10))};c.prototype.loadGeometry=function(){if(1===this._feature.type){for(var ke=[],Se=0,Ce=this._feature.geometry;Se<Ce.length;Se+=1){var Ve=Ce[Se];ke.push([new e.Point$1(Ve[0],Ve[1])])}return ke}for(var Ge=[],Qe=0,ot=this._feature.geometry;Qe<ot.length;Qe+=1){for(var it=[],mt=0,xt=ot[Qe];mt<xt.length;mt+=1){var Vt=xt[mt];it.push(new e.Point$1(Vt[0],Vt[1]))}Ge.push(it)}return Ge},c.prototype.toGeoJSON=function(ke,Se,Ce){return w.call(this,ke,Se,Ce)};var A=function(ke){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=ke.length,this._features=ke};A.prototype.feature=function(ke){return new c(this._features[ke])};var k=e.vectorTile.VectorTileFeature,C=E;function E(ke,Se){this.options=Se||{},this.features=ke,this.length=ke.length}function L(ke,Se){this.id="number"==typeof ke.id?ke.id:void 0,this.type=ke.type,this.rawGeometry=1===ke.type?[ke.geometry]:ke.geometry,this.properties=ke.tags,this.extent=Se||4096}E.prototype.feature=function(ke){return new L(this.features[ke],this.options.extent)},L.prototype.loadGeometry=function(){var ke=this.rawGeometry;this.geometry=[];for(var Se=0;Se<ke.length;Se++){for(var Ce=ke[Se],Ve=[],Ge=0;Ge<Ce.length;Ge++)Ve.push(new e.Point$1(Ce[Ge][0],Ce[Ge][1]));this.geometry.push(Ve)}return this.geometry},L.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ke=this.geometry,Se=1/0,Ce=-1/0,Ve=1/0,Ge=-1/0,Qe=0;Qe<ke.length;Qe++)for(var ot=ke[Qe],it=0;it<ot.length;it++){var mt=ot[it];Se=Math.min(Se,mt.x),Ce=Math.max(Ce,mt.x),Ve=Math.min(Ve,mt.y),Ge=Math.max(Ge,mt.y)}return[Se,Ve,Ce,Ge]},L.prototype.toGeoJSON=k.prototype.toGeoJSON;var D=P,I=C;function P(ke){var Se=new e.pbf;return function(Ce,Ve){for(var Ge in Ce.layers)Ve.writeMessage(3,j,Ce.layers[Ge])}(ke,Se),Se.finish()}function j(ke,Se){var Ce;Se.writeVarintField(15,ke.version||1),Se.writeStringField(1,ke.name||""),Se.writeVarintField(5,ke.extent||4096);var Ve={keys:[],values:[],keycache:{},valuecache:{}};for(Ce=0;Ce<ke.length;Ce++)Ve.feature=ke.feature(Ce),Se.writeMessage(2,V,Ve);var Ge=Ve.keys;for(Ce=0;Ce<Ge.length;Ce++)Se.writeStringField(3,Ge[Ce]);var Qe=Ve.values;for(Ce=0;Ce<Qe.length;Ce++)Se.writeMessage(4,X,Qe[Ce])}function V(ke,Se){var Ce=ke.feature;void 0!==Ce.id&&Se.writeVarintField(1,Ce.id),Se.writeMessage(2,Z,ke),Se.writeVarintField(3,Ce.type),Se.writeMessage(4,re,Ce)}function Z(ke,Se){var Ce=ke.feature,Ve=ke.keys,Ge=ke.values,Qe=ke.keycache,ot=ke.valuecache;for(var it in Ce.properties){var mt=Qe[it];void 0===mt&&(Ve.push(it),Qe[it]=mt=Ve.length-1),Se.writeVarint(mt);var xt=Ce.properties[it],Vt=typeof xt;"string"!==Vt&&"boolean"!==Vt&&"number"!==Vt&&(xt=JSON.stringify(xt));var $t=Vt+":"+xt,pt=ot[$t];void 0===pt&&(Ge.push(xt),ot[$t]=pt=Ge.length-1),Se.writeVarint(pt)}}function Y(ke,Se){return(Se<<3)+(7&ke)}function ee(ke){return ke<<1^ke>>31}function re(ke,Se){for(var Ce=ke.loadGeometry(),Ve=ke.type,Ge=0,Qe=0,ot=Ce.length,it=0;it<ot;it++){var mt=Ce[it],xt=1;1===Ve&&(xt=mt.length),Se.writeVarint(Y(1,xt));for(var Vt=3===Ve?mt.length-1:mt.length,$t=0;$t<Vt;$t++){1===$t&&1!==Ve&&Se.writeVarint(Y(2,Vt-1));var pt=mt[$t].x-Ge,At=mt[$t].y-Qe;Se.writeVarint(ee(pt)),Se.writeVarint(ee(At)),Ge+=pt,Qe+=At}3===Ve&&Se.writeVarint(Y(7,1))}}function X(ke,Se){var Ce=typeof ke;"string"===Ce?Se.writeStringField(1,ke):"boolean"===Ce?Se.writeBooleanField(7,ke):"number"===Ce&&(ke%1!=0?Se.writeDoubleField(3,ke):ke<0?Se.writeSVarintField(6,ke):Se.writeVarintField(5,ke))}function K(ke,Se,Ce,Ve,Ge,Qe){if(!(Ge-Ve<=Ce)){var ot=Ve+Ge>>1;(function it(mt,xt,Vt,$t,pt,At){for(;pt>$t;){if(pt-$t>600){var Xt=pt-$t+1,Ct=Vt-$t+1,Pt=Math.log(Xt),Be=.5*Math.exp(2*Pt/3),tt=.5*Math.sqrt(Pt*Be*(Xt-Be)/Xt)*(Ct-Xt/2<0?-1:1);it(mt,xt,Vt,Math.max($t,Math.floor(Vt-Ct*Be/Xt+tt)),Math.min(pt,Math.floor(Vt+(Xt-Ct)*Be/Xt+tt)),At)}var Nt=xt[2*Vt+At],Yt=$t,fn=pt;for(ie(mt,xt,$t,Vt),xt[2*pt+At]>Nt&&ie(mt,xt,$t,pt);Yt<fn;){for(ie(mt,xt,Yt,fn),Yt++,fn--;xt[2*Yt+At]<Nt;)Yt++;for(;xt[2*fn+At]>Nt;)fn--}xt[2*$t+At]===Nt?ie(mt,xt,$t,fn):ie(mt,xt,++fn,pt),fn<=Vt&&($t=fn+1),Vt<=fn&&(pt=fn-1)}})(ke,Se,ot,Ve,Ge,Qe%2),K(ke,Se,Ce,Ve,ot-1,Qe+1),K(ke,Se,Ce,ot+1,Ge,Qe+1)}}function ie(ke,Se,Ce,Ve){q(ke,Ce,Ve),q(Se,2*Ce,2*Ve),q(Se,2*Ce+1,2*Ve+1)}function q(ke,Se,Ce){var Ve=ke[Se];ke[Se]=ke[Ce],ke[Ce]=Ve}function U(ke,Se,Ce,Ve){var Ge=ke-Ce,Qe=Se-Ve;return Ge*Ge+Qe*Qe}D.fromVectorTileJs=P,D.fromGeojsonVt=function(ke,Se){Se=Se||{};var Ce={};for(var Ve in ke)Ce[Ve]=new C(ke[Ve].features,Se),Ce[Ve].name=Ve,Ce[Ve].version=Se.version,Ce[Ve].extent=Se.extent;return P({layers:Ce})},D.GeoJSONWrapper=I;var W=function(ke){return ke[0]},ae=function(ke){return ke[1]},G=function(ke,Se,Ce,Ve,Ge){void 0===Se&&(Se=W),void 0===Ce&&(Ce=ae),void 0===Ve&&(Ve=64),void 0===Ge&&(Ge=Float64Array),this.nodeSize=Ve,this.points=ke;for(var Qe=ke.length<65536?Uint16Array:Uint32Array,ot=this.ids=new Qe(ke.length),it=this.coords=new Ge(2*ke.length),mt=0;mt<ke.length;mt++)ot[mt]=mt,it[2*mt]=Se(ke[mt]),it[2*mt+1]=Ce(ke[mt]);K(ot,it,Ve,0,ot.length-1,0)};G.prototype.range=function(ke,Se,Ce,Ve){return function(Ge,Qe,ot,it,mt,xt,Vt){for(var $t,pt,At=[0,Ge.length-1,0],Xt=[];At.length;){var Ct=At.pop(),Pt=At.pop(),Be=At.pop();if(Pt-Be<=Vt)for(var tt=Be;tt<=Pt;tt++)pt=Qe[2*tt+1],($t=Qe[2*tt])>=ot&&$t<=mt&&pt>=it&&pt<=xt&&Xt.push(Ge[tt]);else{var dt=Math.floor((Be+Pt)/2);pt=Qe[2*dt+1],($t=Qe[2*dt])>=ot&&$t<=mt&&pt>=it&&pt<=xt&&Xt.push(Ge[dt]);var Dt=(Ct+1)%2;(0===Ct?ot<=$t:it<=pt)&&(At.push(Be),At.push(dt-1),At.push(Dt)),(0===Ct?mt>=$t:xt>=pt)&&(At.push(dt+1),At.push(Pt),At.push(Dt))}}return Xt}(this.ids,this.coords,ke,Se,Ce,Ve,this.nodeSize)},G.prototype.within=function(ke,Se,Ce){return function(Ve,Ge,Qe,ot,it,mt){for(var xt=[0,Ve.length-1,0],Vt=[],$t=it*it;xt.length;){var pt=xt.pop(),At=xt.pop(),Xt=xt.pop();if(At-Xt<=mt)for(var Ct=Xt;Ct<=At;Ct++)U(Ge[2*Ct],Ge[2*Ct+1],Qe,ot)<=$t&&Vt.push(Ve[Ct]);else{var Pt=Math.floor((Xt+At)/2),Be=Ge[2*Pt],tt=Ge[2*Pt+1];U(Be,tt,Qe,ot)<=$t&&Vt.push(Ve[Pt]);var dt=(pt+1)%2;(0===pt?Qe-it<=Be:ot-it<=tt)&&(xt.push(Xt),xt.push(Pt-1),xt.push(dt)),(0===pt?Qe+it>=Be:ot+it>=tt)&&(xt.push(Pt+1),xt.push(At),xt.push(dt))}}return Vt}(this.ids,this.coords,ke,Se,Ce,this.nodeSize)};var te={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(ke){return ke}},ne=function(ke){this.options=we(Object.create(te),ke),this.trees=new Array(this.options.maxZoom+1)};function le(ke,Se,Ce,Ve,Ge){return{x:ke,y:Se,zoom:1/0,id:Ce,parentId:-1,numPoints:Ve,properties:Ge}}function ue(ke,Se){var Ce=ke.geometry.coordinates,Ge=Ce[1];return{x:_e(Ce[0]),y:me(Ge),zoom:1/0,index:Se,parentId:-1}}function pe(ke){return{type:"Feature",id:ke.id,properties:de(ke),geometry:{type:"Point",coordinates:[(Ve=ke.x,360*(Ve-.5)),(Se=ke.y,Ce=(180-360*Se)*Math.PI/180,360*Math.atan(Math.exp(Ce))/Math.PI-90)]}};var Se,Ce,Ve}function de(ke){var Se=ke.numPoints,Ce=Se>=1e4?Math.round(Se/1e3)+"k":Se>=1e3?Math.round(Se/100)/10+"k":Se;return we(we({},ke.properties),{cluster:!0,cluster_id:ke.id,point_count:Se,point_count_abbreviated:Ce})}function _e(ke){return ke/360+.5}function me(ke){var Se=Math.sin(ke*Math.PI/180),Ce=.5-.25*Math.log((1+Se)/(1-Se))/Math.PI;return Ce<0?0:Ce>1?1:Ce}function we(ke,Se){for(var Ce in Se)ke[Ce]=Se[Ce];return ke}function De(ke){return ke.x}function Le(ke){return ke.y}function Ie(ke,Se,Ce,Ve,Ge,Qe){var ot=Ge-Ce,it=Qe-Ve;if(0!==ot||0!==it){var mt=((ke-Ce)*ot+(Se-Ve)*it)/(ot*ot+it*it);mt>1?(Ce=Ge,Ve=Qe):mt>0&&(Ce+=ot*mt,Ve+=it*mt)}return(ot=ke-Ce)*ot+(it=Se-Ve)*it}function je(ke,Se,Ce,Ve){var Ge={id:void 0===ke?null:ke,type:Se,geometry:Ce,tags:Ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Qe){var ot=Qe.geometry,it=Qe.type;if("Point"===it||"MultiPoint"===it||"LineString"===it)ye(Qe,ot);else if("Polygon"===it||"MultiLineString"===it)for(var mt=0;mt<ot.length;mt++)ye(Qe,ot[mt]);else if("MultiPolygon"===it)for(mt=0;mt<ot.length;mt++)for(var xt=0;xt<ot[mt].length;xt++)ye(Qe,ot[mt][xt])}(Ge),Ge}function ye(ke,Se){for(var Ce=0;Ce<Se.length;Ce+=3)ke.minX=Math.min(ke.minX,Se[Ce]),ke.minY=Math.min(ke.minY,Se[Ce+1]),ke.maxX=Math.max(ke.maxX,Se[Ce]),ke.maxY=Math.max(ke.maxY,Se[Ce+1])}function Me(ke,Se,Ce,Ve){if(Se.geometry){var Ge=Se.geometry.coordinates,Qe=Se.geometry.type,ot=Math.pow(Ce.tolerance/((1<<Ce.maxZoom)*Ce.extent),2),it=[],mt=Se.id;if(Ce.promoteId?mt=Se.properties[Ce.promoteId]:Ce.generateId&&(mt=Ve||0),"Point"===Qe)Oe(Ge,it);else if("MultiPoint"===Qe)for(var xt=0;xt<Ge.length;xt++)Oe(Ge[xt],it);else if("LineString"===Qe)Pe(Ge,it,ot,!1);else if("MultiLineString"===Qe){if(Ce.lineMetrics){for(xt=0;xt<Ge.length;xt++)Pe(Ge[xt],it=[],ot,!1),ke.push(je(mt,"LineString",it,Se.properties));return}Re(Ge,it,ot,!1)}else if("Polygon"===Qe)Re(Ge,it,ot,!0);else{if("MultiPolygon"!==Qe){if("GeometryCollection"===Qe){for(xt=0;xt<Se.geometry.geometries.length;xt++)Me(ke,{id:mt,geometry:Se.geometry.geometries[xt],properties:Se.properties},Ce,Ve);return}throw new Error("Input data is not a valid GeoJSON object.")}for(xt=0;xt<Ge.length;xt++){var Vt=[];Re(Ge[xt],Vt,ot,!0),it.push(Vt)}}ke.push(je(mt,Qe,it,Se.properties))}}function Oe(ke,Se){Se.push(Ue(ke[0])),Se.push(qe(ke[1])),Se.push(0)}function Pe(ke,Se,Ce,Ve){for(var Ge,Qe,ot=0,it=0;it<ke.length;it++){var mt=Ue(ke[it][0]),xt=qe(ke[it][1]);Se.push(mt),Se.push(xt),Se.push(0),it>0&&(ot+=Ve?(Ge*xt-mt*Qe)/2:Math.sqrt(Math.pow(mt-Ge,2)+Math.pow(xt-Qe,2))),Ge=mt,Qe=xt}var Vt=Se.length-3;Se[2]=1,function $t(pt,At,Xt,Ct){for(var Pt,Be=Ct,tt=Xt-At>>1,dt=Xt-At,Dt=pt[At],Nt=pt[At+1],Yt=pt[Xt],fn=pt[Xt+1],nn=At+3;nn<Xt;nn+=3){var In=Ie(pt[nn],pt[nn+1],Dt,Nt,Yt,fn);if(In>Be)Pt=nn,Be=In;else if(In===Be){var Dn=Math.abs(nn-tt);Dn<dt&&(Pt=nn,dt=Dn)}}Be>Ct&&(Pt-At>3&&$t(pt,At,Pt,Ct),pt[Pt+2]=Be,Xt-Pt>3&&$t(pt,Pt,Xt,Ct))}(Se,0,Vt,Ce),Se[Vt+2]=1,Se.size=Math.abs(ot),Se.start=0,Se.end=Se.size}function Re(ke,Se,Ce,Ve){for(var Ge=0;Ge<ke.length;Ge++){var Qe=[];Pe(ke[Ge],Qe,Ce,Ve),Se.push(Qe)}}function Ue(ke){return ke/360+.5}function qe(ke){var Se=Math.sin(ke*Math.PI/180),Ce=.5-.25*Math.log((1+Se)/(1-Se))/Math.PI;return Ce<0?0:Ce>1?1:Ce}function Xe(ke,Se,Ce,Ve,Ge,Qe,ot,it){if(Ve/=Se,Qe>=(Ce/=Se)&&ot<Ve)return ke;if(ot<Ce||Qe>=Ve)return null;for(var mt=[],xt=0;xt<ke.length;xt++){var Vt=ke[xt],$t=Vt.geometry,pt=Vt.type,At=0===Ge?Vt.minX:Vt.minY,Xt=0===Ge?Vt.maxX:Vt.maxY;if(At>=Ce&&Xt<Ve)mt.push(Vt);else if(!(Xt<Ce||At>=Ve)){var Ct=[];if("Point"===pt||"MultiPoint"===pt)lt($t,Ct,Ce,Ve,Ge);else if("LineString"===pt)He($t,Ct,Ce,Ve,Ge,!1,it.lineMetrics);else if("MultiLineString"===pt)et($t,Ct,Ce,Ve,Ge,!1);else if("Polygon"===pt)et($t,Ct,Ce,Ve,Ge,!0);else if("MultiPolygon"===pt)for(var Pt=0;Pt<$t.length;Pt++){var Be=[];et($t[Pt],Be,Ce,Ve,Ge,!0),Be.length&&Ct.push(Be)}if(Ct.length){if(it.lineMetrics&&"LineString"===pt){for(Pt=0;Pt<Ct.length;Pt++)mt.push(je(Vt.id,pt,Ct[Pt],Vt.tags));continue}"LineString"!==pt&&"MultiLineString"!==pt||(1===Ct.length?(pt="LineString",Ct=Ct[0]):pt="MultiLineString"),"Point"!==pt&&"MultiPoint"!==pt||(pt=3===Ct.length?"Point":"MultiPoint"),mt.push(je(Vt.id,pt,Ct,Vt.tags))}}}return mt.length?mt:null}function lt(ke,Se,Ce,Ve,Ge){for(var Qe=0;Qe<ke.length;Qe+=3){var ot=ke[Qe+Ge];ot>=Ce&&ot<=Ve&&(Se.push(ke[Qe]),Se.push(ke[Qe+1]),Se.push(ke[Qe+2]))}}function He(ke,Se,Ce,Ve,Ge,Qe,ot){for(var it,mt,xt=$e(ke),Vt=0===Ge?ct:bt,$t=ke.start,pt=0;pt<ke.length-3;pt+=3){var At=ke[pt],Xt=ke[pt+1],Ct=ke[pt+2],Pt=ke[pt+3],Be=ke[pt+4],tt=0===Ge?At:Xt,dt=0===Ge?Pt:Be,Dt=!1;ot&&(it=Math.sqrt(Math.pow(At-Pt,2)+Math.pow(Xt-Be,2))),tt<Ce?dt>Ce&&(mt=Vt(xt,At,Xt,Pt,Be,Ce),ot&&(xt.start=$t+it*mt)):tt>Ve?dt<Ve&&(mt=Vt(xt,At,Xt,Pt,Be,Ve),ot&&(xt.start=$t+it*mt)):nt(xt,At,Xt,Ct),dt<Ce&&tt>=Ce&&(mt=Vt(xt,At,Xt,Pt,Be,Ce),Dt=!0),dt>Ve&&tt<=Ve&&(mt=Vt(xt,At,Xt,Pt,Be,Ve),Dt=!0),!Qe&&Dt&&(ot&&(xt.end=$t+it*mt),Se.push(xt),xt=$e(ke)),ot&&($t+=it)}var Nt=ke.length-3;At=ke[Nt],Xt=ke[Nt+1],Ct=ke[Nt+2],(tt=0===Ge?At:Xt)>=Ce&&tt<=Ve&&nt(xt,At,Xt,Ct),Nt=xt.length-3,Qe&&Nt>=3&&(xt[Nt]!==xt[0]||xt[Nt+1]!==xt[1])&&nt(xt,xt[0],xt[1],xt[2]),xt.length&&Se.push(xt)}function $e(ke){var Se=[];return Se.size=ke.size,Se.start=ke.start,Se.end=ke.end,Se}function et(ke,Se,Ce,Ve,Ge,Qe){for(var ot=0;ot<ke.length;ot++)He(ke[ot],Se,Ce,Ve,Ge,Qe,!1)}function nt(ke,Se,Ce,Ve){ke.push(Se),ke.push(Ce),ke.push(Ve)}function ct(ke,Se,Ce,Ve,Ge,Qe){var ot=(Qe-Se)/(Ve-Se);return ke.push(Qe),ke.push(Ce+(Ge-Ce)*ot),ke.push(1),ot}function bt(ke,Se,Ce,Ve,Ge,Qe){var ot=(Qe-Ce)/(Ge-Ce);return ke.push(Se+(Ve-Se)*ot),ke.push(Qe),ke.push(1),ot}function kt(ke,Se){for(var Ce=[],Ve=0;Ve<ke.length;Ve++){var Ge,Qe=ke[Ve],ot=Qe.type;if("Point"===ot||"MultiPoint"===ot||"LineString"===ot)Ge=Bt(Qe.geometry,Se);else if("MultiLineString"===ot||"Polygon"===ot){Ge=[];for(var it=0;it<Qe.geometry.length;it++)Ge.push(Bt(Qe.geometry[it],Se))}else if("MultiPolygon"===ot)for(Ge=[],it=0;it<Qe.geometry.length;it++){for(var mt=[],xt=0;xt<Qe.geometry[it].length;xt++)mt.push(Bt(Qe.geometry[it][xt],Se));Ge.push(mt)}Ce.push(je(Qe.id,ot,Ge,Qe.tags))}return Ce}function Bt(ke,Se){var Ce=[];Ce.size=ke.size,void 0!==ke.start&&(Ce.start=ke.start,Ce.end=ke.end);for(var Ve=0;Ve<ke.length;Ve+=3)Ce.push(ke[Ve]+Se,ke[Ve+1],ke[Ve+2]);return Ce}function Et(ke,Se){if(ke.transformed)return ke;var Ce,Ve,Ge,Qe=1<<ke.z,ot=ke.x,it=ke.y;for(Ce=0;Ce<ke.features.length;Ce++){var mt=ke.features[Ce],xt=mt.geometry,Vt=mt.type;if(mt.geometry=[],1===Vt)for(Ve=0;Ve<xt.length;Ve+=2)mt.geometry.push(ht(xt[Ve],xt[Ve+1],Se,Qe,ot,it));else for(Ve=0;Ve<xt.length;Ve++){var $t=[];for(Ge=0;Ge<xt[Ve].length;Ge+=2)$t.push(ht(xt[Ve][Ge],xt[Ve][Ge+1],Se,Qe,ot,it));mt.geometry.push($t)}}return ke.transformed=!0,ke}function ht(ke,Se,Ce,Ve,Ge,Qe){return[Math.round(Ce*(ke*Ve-Ge)),Math.round(Ce*(Se*Ve-Qe))]}function at(ke,Se,Ce,Ve,Ge){for(var Qe=Se===Ge.maxZoom?0:Ge.tolerance/((1<<Se)*Ge.extent),ot={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ce,y:Ve,z:Se,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},it=0;it<ke.length;it++){ot.numFeatures++,Ft(ot,ke[it],Qe,Ge);var mt=ke[it].minX,xt=ke[it].minY,Vt=ke[it].maxX,$t=ke[it].maxY;mt<ot.minX&&(ot.minX=mt),xt<ot.minY&&(ot.minY=xt),Vt>ot.maxX&&(ot.maxX=Vt),$t>ot.maxY&&(ot.maxY=$t)}return ot}function Ft(ke,Se,Ce,Ve){var Ge=Se.geometry,Qe=Se.type,ot=[];if("Point"===Qe||"MultiPoint"===Qe)for(var it=0;it<Ge.length;it+=3)ot.push(Ge[it]),ot.push(Ge[it+1]),ke.numPoints++,ke.numSimplified++;else if("LineString"===Qe)en(ot,Ge,ke,Ce,!1,!1);else if("MultiLineString"===Qe||"Polygon"===Qe)for(it=0;it<Ge.length;it++)en(ot,Ge[it],ke,Ce,"Polygon"===Qe,0===it);else if("MultiPolygon"===Qe)for(var mt=0;mt<Ge.length;mt++){var xt=Ge[mt];for(it=0;it<xt.length;it++)en(ot,xt[it],ke,Ce,!0,0===it)}if(ot.length){var Vt=Se.tags||null;if("LineString"===Qe&&Ve.lineMetrics){for(var $t in Vt={},Se.tags)Vt[$t]=Se.tags[$t];Vt.mapbox_clip_start=Ge.start/Ge.size,Vt.mapbox_clip_end=Ge.end/Ge.size}var pt={geometry:ot,type:"Polygon"===Qe||"MultiPolygon"===Qe?3:"LineString"===Qe||"MultiLineString"===Qe?2:1,tags:Vt};null!==Se.id&&(pt.id=Se.id),ke.features.push(pt)}}function en(ke,Se,Ce,Ve,Ge,Qe){var ot=Ve*Ve;if(Ve>0&&Se.size<(Ge?ot:Ve))Ce.numPoints+=Se.length/3;else{for(var it=[],mt=0;mt<Se.length;mt+=3)(0===Ve||Se[mt+2]>ot)&&(Ce.numSimplified++,it.push(Se[mt]),it.push(Se[mt+1])),Ce.numPoints++;Ge&&function(xt,Vt){for(var $t=0,pt=0,At=xt.length,Xt=At-2;pt<At;Xt=pt,pt+=2)$t+=(xt[pt]-xt[Xt])*(xt[pt+1]+xt[Xt+1]);if($t>0===Vt)for(pt=0,At=xt.length;pt<At/2;pt+=2){var Ct=xt[pt],Pt=xt[pt+1];xt[pt]=xt[At-2-pt],xt[pt+1]=xt[At-1-pt],xt[At-2-pt]=Ct,xt[At-1-pt]=Pt}}(it,Qe),ke.push(it)}}function Qt(ke,Se){var Ce=(Se=this.options=function(Ge,Qe){for(var ot in Qe)Ge[ot]=Qe[ot];return Ge}(Object.create(this.options),Se)).debug;if(Ce&&console.time("preprocess data"),Se.maxZoom<0||Se.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(Se.promoteId&&Se.generateId)throw new Error("promoteId and generateId cannot be used together.");var Ge,Qe,ot,it,mt,xt,Ve=function(Ge,Qe){var ot=[];if("FeatureCollection"===Ge.type)for(var it=0;it<Ge.features.length;it++)Me(ot,Ge.features[it],Qe,it);else Me(ot,"Feature"===Ge.type?Ge:{geometry:Ge},Qe);return ot}(ke,Se);this.tiles={},this.tileCoords=[],Ce&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",Se.indexMaxZoom,Se.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Ge=Ve,Qe=Se,ot=Qe.buffer/Qe.extent,it=Ge,mt=Xe(Ge,1,-1-ot,ot,0,-1,2,Qe),xt=Xe(Ge,1,1-ot,2+ot,0,-1,2,Qe),(mt||xt)&&(it=Xe(Ge,1,-ot,1+ot,0,-1,2,Qe)||[],mt&&(it=kt(mt,1).concat(it)),xt&&(it=it.concat(kt(xt,-1)))),Ve=it).length&&this.splitTile(Ve,0,0,0),Ce&&(Ve.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function tn(ke,Se,Ce){return 32*((1<<ke)*Ce+Se)+ke}function dn(ke,Se){var Ce=ke.tileID.canonical;if(!this._geoJSONIndex)return Se(null,null);var Ve=this._geoJSONIndex.getTile(Ce.z,Ce.x,Ce.y);if(!Ve)return Se(null,null);var Ge=new A(Ve.features),Qe=D(Ge);0===Qe.byteOffset&&Qe.byteLength===Qe.buffer.byteLength||(Qe=new Uint8Array(Qe)),Se(null,{vectorTile:Ge,rawData:Qe.buffer})}ne.prototype.load=function(ke){var Se=this.options,Ce=Se.log,Ve=Se.minZoom,Ge=Se.maxZoom,Qe=Se.nodeSize;Ce&&console.time("total time");var ot="prepare "+ke.length+" points";Ce&&console.time(ot),this.points=ke;for(var it=[],mt=0;mt<ke.length;mt++)ke[mt].geometry&&it.push(ue(ke[mt],mt));this.trees[Ge+1]=new G(it,De,Le,Qe,Float32Array),Ce&&console.timeEnd(ot);for(var xt=Ge;xt>=Ve;xt--){var Vt=+Date.now();it=this._cluster(it,xt),this.trees[xt]=new G(it,De,Le,Qe,Float32Array),Ce&&console.log("z%d: %d clusters in %dms",xt,it.length,+Date.now()-Vt)}return Ce&&console.timeEnd("total time"),this},ne.prototype.getClusters=function(ke,Se){var Ce=((ke[0]+180)%360+360)%360-180,Ve=Math.max(-90,Math.min(90,ke[1])),Ge=180===ke[2]?180:((ke[2]+180)%360+360)%360-180,Qe=Math.max(-90,Math.min(90,ke[3]));if(ke[2]-ke[0]>=360)Ce=-180,Ge=180;else if(Ce>Ge){var ot=this.getClusters([Ce,Ve,180,Qe],Se),it=this.getClusters([-180,Ve,Ge,Qe],Se);return ot.concat(it)}for(var mt=this.trees[this._limitZoom(Se)],xt=[],Vt=0,$t=mt.range(_e(Ce),me(Qe),_e(Ge),me(Ve));Vt<$t.length;Vt+=1){var At=mt.points[$t[Vt]];xt.push(At.numPoints?pe(At):this.points[At.index])}return xt},ne.prototype.getChildren=function(ke){var Se=this._getOriginId(ke),Ce=this._getOriginZoom(ke),Ve="No cluster with the specified id.",Ge=this.trees[Ce];if(!Ge)throw new Error(Ve);var Qe=Ge.points[Se];if(!Qe)throw new Error(Ve);for(var ot=this.options.radius/(this.options.extent*Math.pow(2,Ce-1)),it=[],mt=0,xt=Ge.within(Qe.x,Qe.y,ot);mt<xt.length;mt+=1){var $t=Ge.points[xt[mt]];$t.parentId===ke&&it.push($t.numPoints?pe($t):this.points[$t.index])}if(0===it.length)throw new Error(Ve);return it},ne.prototype.getLeaves=function(ke,Se,Ce){var Ve=[];return this._appendLeaves(Ve,ke,Se=Se||10,Ce=Ce||0,0),Ve},ne.prototype.getTile=function(ke,Se,Ce){var Ve=this.trees[this._limitZoom(ke)],Ge=Math.pow(2,ke),Qe=this.options,it=Qe.radius/Qe.extent,mt=(Ce-it)/Ge,xt=(Ce+1+it)/Ge,Vt={features:[]};return this._addTileFeatures(Ve.range((Se-it)/Ge,mt,(Se+1+it)/Ge,xt),Ve.points,Se,Ce,Ge,Vt),0===Se&&this._addTileFeatures(Ve.range(1-it/Ge,mt,1,xt),Ve.points,Ge,Ce,Ge,Vt),Se===Ge-1&&this._addTileFeatures(Ve.range(0,mt,it/Ge,xt),Ve.points,-1,Ce,Ge,Vt),Vt.features.length?Vt:null},ne.prototype.getClusterExpansionZoom=function(ke){for(var Se=this._getOriginZoom(ke)-1;Se<=this.options.maxZoom;){var Ce=this.getChildren(ke);if(Se++,1!==Ce.length)break;ke=Ce[0].properties.cluster_id}return Se},ne.prototype._appendLeaves=function(ke,Se,Ce,Ve,Ge){for(var Qe=0,ot=this.getChildren(Se);Qe<ot.length;Qe+=1){var it=ot[Qe],mt=it.properties;if(mt&&mt.cluster?Ge+mt.point_count<=Ve?Ge+=mt.point_count:Ge=this._appendLeaves(ke,mt.cluster_id,Ce,Ve,Ge):Ge<Ve?Ge++:ke.push(it),ke.length===Ce)break}return Ge},ne.prototype._addTileFeatures=function(ke,Se,Ce,Ve,Ge,Qe){for(var ot=0,it=ke;ot<it.length;ot+=1){var mt=Se[it[ot]],xt=mt.numPoints,Vt={type:1,geometry:[[Math.round(this.options.extent*(mt.x*Ge-Ce)),Math.round(this.options.extent*(mt.y*Ge-Ve))]],tags:xt?de(mt):this.points[mt.index].properties},$t=void 0;xt?$t=mt.id:this.options.generateId?$t=mt.index:this.points[mt.index].id&&($t=this.points[mt.index].id),void 0!==$t&&(Vt.id=$t),Qe.features.push(Vt)}},ne.prototype._limitZoom=function(ke){return Math.max(this.options.minZoom,Math.min(ke,this.options.maxZoom+1))},ne.prototype._cluster=function(ke,Se){for(var Ce=[],Ve=this.options,ot=Ve.reduce,it=Ve.radius/(Ve.extent*Math.pow(2,Se)),mt=0;mt<ke.length;mt++){var xt=ke[mt];if(!(xt.zoom<=Se)){xt.zoom=Se;for(var Vt=this.trees[Se+1],$t=Vt.within(xt.x,xt.y,it),pt=xt.numPoints||1,At=xt.x*pt,Xt=xt.y*pt,Ct=ot&&pt>1?this._map(xt,!0):null,Pt=(mt<<5)+(Se+1)+this.points.length,Be=0,tt=$t;Be<tt.length;Be+=1){var Dt=Vt.points[tt[Be]];if(!(Dt.zoom<=Se)){Dt.zoom=Se;var Nt=Dt.numPoints||1;At+=Dt.x*Nt,Xt+=Dt.y*Nt,pt+=Nt,Dt.parentId=Pt,ot&&(Ct||(Ct=this._map(xt,!0)),ot(Ct,this._map(Dt)))}}1===pt?Ce.push(xt):(xt.parentId=Pt,Ce.push(le(At/pt,Xt/pt,Pt,pt,Ct)))}}return Ce},ne.prototype._getOriginId=function(ke){return ke-this.points.length>>5},ne.prototype._getOriginZoom=function(ke){return(ke-this.points.length)%32},ne.prototype._map=function(ke,Se){if(ke.numPoints)return Se?we({},ke.properties):ke.properties;var Ce=this.points[ke.index].properties,Ve=this.options.map(Ce);return Se&&Ve===Ce?we({},Ve):Ve},Qt.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Qt.prototype.splitTile=function(ke,Se,Ce,Ve,Ge,Qe,ot){for(var it=[ke,Se,Ce,Ve],mt=this.options,xt=mt.debug;it.length;){Ve=it.pop(),Ce=it.pop(),Se=it.pop(),ke=it.pop();var Vt=1<<Se,$t=tn(Se,Ce,Ve),pt=this.tiles[$t];if(!pt&&(xt>1&&console.time("creation"),pt=this.tiles[$t]=at(ke,Se,Ce,Ve,mt),this.tileCoords.push({z:Se,x:Ce,y:Ve}),xt)){xt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",Se,Ce,Ve,pt.numFeatures,pt.numPoints,pt.numSimplified),console.timeEnd("creation"));var At="z"+Se;this.stats[At]=(this.stats[At]||0)+1,this.total++}if(pt.source=ke,Ge){if(Se===mt.maxZoom||Se===Ge)continue;var Xt=1<<Ge-Se;if(Ce!==Math.floor(Qe/Xt)||Ve!==Math.floor(ot/Xt))continue}else if(Se===mt.indexMaxZoom||pt.numPoints<=mt.indexMaxPoints)continue;if(pt.source=null,0!==ke.length){xt>1&&console.time("clipping");var Ct,Pt,Be,tt,dt,Dt,Nt=.5*mt.buffer/mt.extent,Yt=.5-Nt,fn=.5+Nt,nn=1+Nt;Ct=Pt=Be=tt=null,dt=Xe(ke,Vt,Ce-Nt,Ce+fn,0,pt.minX,pt.maxX,mt),Dt=Xe(ke,Vt,Ce+Yt,Ce+nn,0,pt.minX,pt.maxX,mt),ke=null,dt&&(Ct=Xe(dt,Vt,Ve-Nt,Ve+fn,1,pt.minY,pt.maxY,mt),Pt=Xe(dt,Vt,Ve+Yt,Ve+nn,1,pt.minY,pt.maxY,mt),dt=null),Dt&&(Be=Xe(Dt,Vt,Ve-Nt,Ve+fn,1,pt.minY,pt.maxY,mt),tt=Xe(Dt,Vt,Ve+Yt,Ve+nn,1,pt.minY,pt.maxY,mt),Dt=null),xt>1&&console.timeEnd("clipping"),it.push(Ct||[],Se+1,2*Ce,2*Ve),it.push(Pt||[],Se+1,2*Ce,2*Ve+1),it.push(Be||[],Se+1,2*Ce+1,2*Ve),it.push(tt||[],Se+1,2*Ce+1,2*Ve+1)}}},Qt.prototype.getTile=function(ke,Se,Ce){var Ve=this.options,Ge=Ve.extent,Qe=Ve.debug;if(ke<0||ke>24)return null;var ot=1<<ke,it=tn(ke,Se=(Se%ot+ot)%ot,Ce);if(this.tiles[it])return Et(this.tiles[it],Ge);Qe>1&&console.log("drilling down to z%d-%d-%d",ke,Se,Ce);for(var mt,xt=ke,Vt=Se,$t=Ce;!mt&&xt>0;)xt--,Vt=Math.floor(Vt/2),$t=Math.floor($t/2),mt=this.tiles[tn(xt,Vt,$t)];return mt&&mt.source?(Qe>1&&console.log("found parent tile z%d-%d-%d",xt,Vt,$t),Qe>1&&console.time("drilling down"),this.splitTile(mt.source,xt,Vt,$t,ke,Se,Ce),Qe>1&&console.timeEnd("drilling down"),this.tiles[it]?Et(this.tiles[it],Ge):null):null};var Mn=function(ke){function Se(Ce,Ve,Ge,Qe){ke.call(this,Ce,Ve,Ge,dn),Qe&&(this.loadGeoJSON=Qe)}return ke&&(Se.__proto__=ke),(Se.prototype=Object.create(ke&&ke.prototype)).constructor=Se,Se.prototype.loadData=function(Ce,Ve){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Ve,this._pendingLoadDataParams=Ce,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},Se.prototype._loadData=function(){var Ce=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Ve=this._pendingCallback,Ge=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var Qe=!!(Ge&&Ge.request&&Ge.request.collectResourceTiming)&&new e.RequestPerformance(Ge.request);this.loadGeoJSON(Ge,function(ot,it){if(ot||!it)return Ve(ot);if("object"!=typeof it)return Ve(new Error("Input data given to '"+Ge.source+"' is not a valid GeoJSON object."));g(it,!0);try{Ce._geoJSONIndex=Ge.cluster?new ne(function(Vt){var $t=Vt.superclusterOptions,pt=Vt.clusterProperties;if(!pt||!$t)return $t;for(var At={},Xt={},Ct={accumulated:null,zoom:0},Pt={properties:null},Be=Object.keys(pt),tt=0,dt=Be;tt<dt.length;tt+=1){var Dt=dt[tt],Nt=pt[Dt],Yt=Nt[0],nn=e.createExpression(Nt[1]),In=e.createExpression("string"==typeof Yt?[Yt,["accumulated"],["get",Dt]]:Yt);At[Dt]=nn.value,Xt[Dt]=In.value}return $t.map=function(Dn){Pt.properties=Dn;for(var kn={},rn=0,pn=Be;rn<pn.length;rn+=1){var gn=pn[rn];kn[gn]=At[gn].evaluate(Ct,Pt)}return kn},$t.reduce=function(Dn,kn){Pt.properties=kn;for(var rn=0,pn=Be;rn<pn.length;rn+=1){var gn=pn[rn];Ct.accumulated=Dn[gn],Dn[gn]=Xt[gn].evaluate(Ct,Pt)}},$t}(Ge)).load(it.features):new Qt(Vt=it,Ge.geojsonVtOptions)}catch(Vt){return Ve(Vt)}var Vt;Ce.loaded={};var mt={};if(Qe){var xt=Qe.finish();xt&&(mt.resourceTiming={},mt.resourceTiming[Ge.source]=JSON.parse(JSON.stringify(xt)))}Ve(null,mt)})}},Se.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},Se.prototype.reloadTile=function(Ce,Ve){var Ge=this.loaded;return Ge&&Ge[Ce.uid]?ke.prototype.reloadTile.call(this,Ce,Ve):this.loadTile(Ce,Ve)},Se.prototype.loadGeoJSON=function(Ce,Ve){if(Ce.request)e.getJSON(Ce.request,Ve);else{if("string"!=typeof Ce.data)return Ve(new Error("Input data given to '"+Ce.source+"' is not a valid GeoJSON object."));try{return Ve(null,JSON.parse(Ce.data))}catch(Ge){return Ve(new Error("Input data given to '"+Ce.source+"' is not a valid GeoJSON object."))}}},Se.prototype.removeSource=function(Ce,Ve){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Ve()},Se.prototype.getClusterExpansionZoom=function(Ce,Ve){try{Ve(null,this._geoJSONIndex.getClusterExpansionZoom(Ce.clusterId))}catch(Ge){Ve(Ge)}},Se.prototype.getClusterChildren=function(Ce,Ve){try{Ve(null,this._geoJSONIndex.getChildren(Ce.clusterId))}catch(Ge){Ve(Ge)}},Se.prototype.getClusterLeaves=function(Ce,Ve){try{Ve(null,this._geoJSONIndex.getLeaves(Ce.clusterId,Ce.limit,Ce.offset))}catch(Ge){Ve(Ge)}},Se}(d),sn=function(ke){var Se=this;this.self=ke,this.actor=new e.Actor(ke,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:d,geojson:Mn},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ce,Ve){if(Se.workerSourceTypes[Ce])throw new Error('Worker source with name "'+Ce+'" already registered.');Se.workerSourceTypes[Ce]=Ve},this.self.registerRTLTextPlugin=function(Ce){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=Ce.applyArabicShaping,e.plugin.processBidirectionalText=Ce.processBidirectionalText,e.plugin.processStyledBidirectionalText=Ce.processStyledBidirectionalText}};return sn.prototype.setReferrer=function(ke,Se){this.referrer=Se},sn.prototype.setImages=function(ke,Se,Ce){for(var Ve in this.availableImages[ke]=Se,this.workerSources[ke]){var Ge=this.workerSources[ke][Ve];for(var Qe in Ge)Ge[Qe].availableImages=Se}Ce()},sn.prototype.setLayers=function(ke,Se,Ce){this.getLayerIndex(ke).replace(Se),Ce()},sn.prototype.updateLayers=function(ke,Se,Ce){this.getLayerIndex(ke).update(Se.layers,Se.removedIds),Ce()},sn.prototype.loadTile=function(ke,Se,Ce){this.getWorkerSource(ke,Se.type,Se.source).loadTile(Se,Ce)},sn.prototype.loadDEMTile=function(ke,Se,Ce){this.getDEMWorkerSource(ke,Se.source).loadTile(Se,Ce)},sn.prototype.reloadTile=function(ke,Se,Ce){this.getWorkerSource(ke,Se.type,Se.source).reloadTile(Se,Ce)},sn.prototype.abortTile=function(ke,Se,Ce){this.getWorkerSource(ke,Se.type,Se.source).abortTile(Se,Ce)},sn.prototype.removeTile=function(ke,Se,Ce){this.getWorkerSource(ke,Se.type,Se.source).removeTile(Se,Ce)},sn.prototype.removeDEMTile=function(ke,Se){this.getDEMWorkerSource(ke,Se.source).removeTile(Se)},sn.prototype.removeSource=function(ke,Se,Ce){if(this.workerSources[ke]&&this.workerSources[ke][Se.type]&&this.workerSources[ke][Se.type][Se.source]){var Ve=this.workerSources[ke][Se.type][Se.source];delete this.workerSources[ke][Se.type][Se.source],void 0!==Ve.removeSource?Ve.removeSource(Se,Ce):Ce()}},sn.prototype.loadWorkerSource=function(ke,Se,Ce){try{this.self.importScripts(Se.url),Ce()}catch(Ve){Ce(Ve.toString())}},sn.prototype.syncRTLPluginState=function(ke,Se,Ce){try{e.plugin.setState(Se);var Ve=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=Ve){this.self.importScripts(Ve);var Ge=e.plugin.isParsed();Ce(Ge?void 0:new Error("RTL Text Plugin failed to import scripts from "+Ve),Ge)}}catch(Qe){Ce(Qe.toString())}},sn.prototype.getAvailableImages=function(ke){var Se=this.availableImages[ke];return Se||(Se=[]),Se},sn.prototype.getLayerIndex=function(ke){var Se=this.layerIndexes[ke];return Se||(Se=this.layerIndexes[ke]=new l),Se},sn.prototype.getWorkerSource=function(ke,Se,Ce){var Ve=this;return this.workerSources[ke]||(this.workerSources[ke]={}),this.workerSources[ke][Se]||(this.workerSources[ke][Se]={}),this.workerSources[ke][Se][Ce]||(this.workerSources[ke][Se][Ce]=new this.workerSourceTypes[Se]({send:function(Qe,ot,it){Ve.actor.send(Qe,ot,it,ke)}},this.getLayerIndex(ke),this.getAvailableImages(ke))),this.workerSources[ke][Se][Ce]},sn.prototype.getDEMWorkerSource=function(ke,Se){return this.demWorkerSources[ke]||(this.demWorkerSources[ke]={}),this.demWorkerSources[ke][Se]||(this.demWorkerSources[ke][Se]=new f),this.demWorkerSources[ke][Se]},sn.prototype.enforceCacheSizeLimit=function(ke,Se){e.enforceCacheSizeLimit(Se)},"undefined"!=typeof WorkerGlobalScope&&void 0!==e.window&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new sn(e.window)),sn}),_(0,function(e){var o=e.createCommonjsModule(function(O){function B(fe){return!H(fe)}function H(fe){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var ve,Te,Ee=new Blob([""],{type:"text/javascript"}),Fe=URL.createObjectURL(Ee);try{Te=new Worker(Fe),ve=!0}catch(Ze){ve=!1}return Te&&Te.terminate(),URL.revokeObjectURL(Fe),ve}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var ve=document.createElement("canvas");ve.width=ve.height=1;var Te=ve.getContext("2d");if(!Te)return!1;var Ee=Te.getImageData(0,0,1,1);return Ee&&Ee.width===ve.width}()?(void 0===$[ve=fe&&fe.failIfMajorPerformanceCaveat]&&($[ve]=function(Te){var Ze,rt,ft,Ee=(Ze=Te,rt=document.createElement("canvas"),(ft=Object.create(B.webGLContextAttributes)).failIfMajorPerformanceCaveat=Ze,rt.probablySupportsContext?rt.probablySupportsContext("webgl",ft)||rt.probablySupportsContext("experimental-webgl",ft):rt.supportsContext?rt.supportsContext("webgl",ft)||rt.supportsContext("experimental-webgl",ft):rt.getContext("webgl",ft)||rt.getContext("experimental-webgl",ft));if(!Ee)return!1;var Fe=Ee.createShader(Ee.VERTEX_SHADER);return!(!Fe||Ee.isContextLost())&&(Ee.shaderSource(Fe,"void main() {}"),Ee.compileShader(Fe),!0===Ee.getShaderParameter(Fe,Ee.COMPILE_STATUS))}(ve)),$[ve]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var ve}O.exports?O.exports=B:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=B,window.mapboxgl.notSupportedReason=H);var $={};B.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),a={create:function(O,B,H){var $=e.window.document.createElement(O);return void 0!==B&&($.className=B),H&&H.appendChild($),$},createNS:function(O,B){return e.window.document.createElementNS(O,B)}},l=e.window.document.documentElement.style;function i(O){if(!l)return O[0];for(var B=0;B<O.length;B++)if(O[B]in l)return O[B];return O[0]}var v,h=i(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);a.disableDrag=function(){l&&h&&(v=l[h],l[h]="none")},a.enableDrag=function(){l&&h&&(l[h]=v)};var s=i(["transform","WebkitTransform"]);a.setTransform=function(O,B){O.style[s]=B};var d=!1;try{var p=Object.defineProperty({},"passive",{get:function(){d=!0}});e.window.addEventListener("test",p,p),e.window.removeEventListener("test",p,p)}catch(O){d=!1}a.addEventListener=function(O,B,H,$){void 0===$&&($={}),O.addEventListener(B,H,"passive"in $&&d?$:$.capture)},a.removeEventListener=function(O,B,H,$){void 0===$&&($={}),O.removeEventListener(B,H,"passive"in $&&d?$:$.capture)};var f=function(O){O.preventDefault(),O.stopPropagation(),e.window.removeEventListener("click",f,!0)};function g(O){var B=O.userImage;return!!(B&&B.render&&B.render())&&(O.data.replace(new Uint8Array(B.data.buffer)),!0)}a.suppressClick=function(){e.window.addEventListener("click",f,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",f,!0)},0)},a.mousePos=function(O,B){var H=O.getBoundingClientRect();return new e.Point(B.clientX-H.left-O.clientLeft,B.clientY-H.top-O.clientTop)},a.touchPos=function(O,B){for(var H=O.getBoundingClientRect(),$=[],fe=0;fe<B.length;fe++)$.push(new e.Point(B[fe].clientX-H.left-O.clientLeft,B[fe].clientY-H.top-O.clientTop));return $},a.mouseButton=function(O){return void 0!==e.window.InstallTrigger&&2===O.button&&O.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:O.button},a.remove=function(O){O.parentNode&&O.parentNode.removeChild(O)};var m=function(O){function B(){O.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.isLoaded=function(){return this.loaded},B.prototype.setLoaded=function(H){if(this.loaded!==H&&(this.loaded=H,H)){for(var $=0,fe=this.requestors;$<fe.length;$+=1){var ve=fe[$];this._notify(ve.ids,ve.callback)}this.requestors=[]}},B.prototype.getImage=function(H){return this.images[H]},B.prototype.addImage=function(H,$){this._validate(H,$)&&(this.images[H]=$)},B.prototype._validate=function(H,$){var fe=!0;return this._validateStretch($.stretchX,$.data&&$.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+H+'" has invalid "stretchX" value'))),fe=!1),this._validateStretch($.stretchY,$.data&&$.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+H+'" has invalid "stretchY" value'))),fe=!1),this._validateContent($.content,$)||(this.fire(new e.ErrorEvent(new Error('Image "'+H+'" has invalid "content" value'))),fe=!1),fe},B.prototype._validateStretch=function(H,$){if(!H)return!0;for(var fe=0,ve=0,Te=H;ve<Te.length;ve+=1){var Ee=Te[ve];if(Ee[0]<fe||Ee[1]<Ee[0]||$<Ee[1])return!1;fe=Ee[1]}return!0},B.prototype._validateContent=function(H,$){return!(H&&(4!==H.length||H[0]<0||$.data.width<H[0]||H[1]<0||$.data.height<H[1]||H[2]<0||$.data.width<H[2]||H[3]<0||$.data.height<H[3]||H[2]<H[0]||H[3]<H[1]))},B.prototype.updateImage=function(H,$){$.version=this.images[H].version+1,this.images[H]=$,this.updatedImages[H]=!0},B.prototype.removeImage=function(H){var $=this.images[H];delete this.images[H],delete this.patterns[H],$.userImage&&$.userImage.onRemove&&$.userImage.onRemove()},B.prototype.listImages=function(){return Object.keys(this.images)},B.prototype.getImages=function(H,$){var fe=!0;if(!this.isLoaded())for(var ve=0,Te=H;ve<Te.length;ve+=1)this.images[Te[ve]]||(fe=!1);this.isLoaded()||fe?this._notify(H,$):this.requestors.push({ids:H,callback:$})},B.prototype._notify=function(H,$){for(var fe={},ve=0,Te=H;ve<Te.length;ve+=1){var Ee=Te[ve];this.images[Ee]||this.fire(new e.Event("styleimagemissing",{id:Ee}));var Fe=this.images[Ee];Fe?fe[Ee]={data:Fe.data.clone(),pixelRatio:Fe.pixelRatio,sdf:Fe.sdf,version:Fe.version,stretchX:Fe.stretchX,stretchY:Fe.stretchY,content:Fe.content,hasRenderCallback:Boolean(Fe.userImage&&Fe.userImage.render)}:e.warnOnce('Image "'+Ee+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}$(null,fe)},B.prototype.getPixelSize=function(){var H=this.atlasImage;return{width:H.width,height:H.height}},B.prototype.getPattern=function(H){var $=this.patterns[H],fe=this.getImage(H);if(!fe)return null;if($&&$.position.version===fe.version)return $.position;if($)$.position.version=fe.version;else{var ve={w:fe.data.width+2,h:fe.data.height+2,x:0,y:0},Te=new e.ImagePosition(ve,fe);this.patterns[H]={bin:ve,position:Te}}return this._updatePatternAtlas(),this.patterns[H].position},B.prototype.bind=function(H){var $=H.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(H,this.atlasImage,$.RGBA),this.atlasTexture.bind($.LINEAR,$.CLAMP_TO_EDGE)},B.prototype._updatePatternAtlas=function(){var H=[];for(var $ in this.patterns)H.push(this.patterns[$].bin);var fe=e.potpack(H),ve=fe.w,Te=fe.h,Ee=this.atlasImage;for(var Fe in Ee.resize({width:ve||1,height:Te||1}),this.patterns){var Ze=this.patterns[Fe].bin,rt=Ze.x+1,ft=Ze.y+1,It=this.images[Fe].data,Rt=It.width,Lt=It.height;e.RGBAImage.copy(It,Ee,{x:0,y:0},{x:rt,y:ft},{width:Rt,height:Lt}),e.RGBAImage.copy(It,Ee,{x:0,y:Lt-1},{x:rt,y:ft-1},{width:Rt,height:1}),e.RGBAImage.copy(It,Ee,{x:0,y:0},{x:rt,y:ft+Lt},{width:Rt,height:1}),e.RGBAImage.copy(It,Ee,{x:Rt-1,y:0},{x:rt-1,y:ft},{width:1,height:Lt}),e.RGBAImage.copy(It,Ee,{x:0,y:0},{x:rt+Rt,y:ft},{width:1,height:Lt})}this.dirty=!0},B.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},B.prototype.dispatchRenderCallbacks=function(H){for(var $=0,fe=H;$<fe.length;$+=1){var ve=fe[$];if(!this.callbackDispatchedThisFrame[ve]){this.callbackDispatchedThisFrame[ve]=!0;var Te=this.images[ve];g(Te)&&this.updateImage(ve,Te)}}},B}(e.Evented),u=A,w=A,c=1e20;function A(O,B,H,$,fe,ve){this.fontSize=O||24,this.buffer=void 0===B?3:B,this.cutoff=$||.25,this.fontFamily=fe||"sans-serif",this.fontWeight=ve||"normal",this.radius=H||8;var Te=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Te,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Te*Te),this.gridInner=new Float64Array(Te*Te),this.f=new Float64Array(Te),this.d=new Float64Array(Te),this.z=new Float64Array(Te+1),this.v=new Int16Array(Te),this.middle=Math.round(Te/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function k(O,B,H,$,fe,ve,Te){for(var Ee=0;Ee<B;Ee++){for(var Fe=0;Fe<H;Fe++)$[Fe]=O[Fe*B+Ee];for(C($,fe,ve,Te,H),Fe=0;Fe<H;Fe++)O[Fe*B+Ee]=fe[Fe]}for(Fe=0;Fe<H;Fe++){for(Ee=0;Ee<B;Ee++)$[Ee]=O[Fe*B+Ee];for(C($,fe,ve,Te,B),Ee=0;Ee<B;Ee++)O[Fe*B+Ee]=Math.sqrt(fe[Ee])}}function C(O,B,H,$,fe){H[0]=0,$[0]=-c,$[1]=+c;for(var ve=1,Te=0;ve<fe;ve++){for(var Ee=(O[ve]+ve*ve-(O[H[Te]]+H[Te]*H[Te]))/(2*ve-2*H[Te]);Ee<=$[Te];)Te--,Ee=(O[ve]+ve*ve-(O[H[Te]]+H[Te]*H[Te]))/(2*ve-2*H[Te]);H[++Te]=ve,$[Te]=Ee,$[Te+1]=+c}for(ve=0,Te=0;ve<fe;ve++){for(;$[Te+1]<ve;)Te++;B[ve]=(ve-H[Te])*(ve-H[Te])+O[H[Te]]}}A.prototype.draw=function(O){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(O,this.buffer,this.middle);for(var B=this.ctx.getImageData(0,0,this.size,this.size),H=new Uint8ClampedArray(this.size*this.size),$=0;$<this.size*this.size;$++){var fe=B.data[4*$+3]/255;this.gridOuter[$]=1===fe?0:0===fe?c:Math.pow(Math.max(0,.5-fe),2),this.gridInner[$]=1===fe?c:0===fe?0:Math.pow(Math.max(0,fe-.5),2)}for(k(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),k(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),$=0;$<this.size*this.size;$++)H[$]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[$]-this.gridInner[$])/this.radius+this.cutoff))));return H},u.default=w;var E=function(O,B){this.requestManager=O,this.localIdeographFontFamily=B,this.entries={}};E.prototype.setURL=function(O){this.url=O},E.prototype.getGlyphs=function(O,B){var H=this,$=[];for(var fe in O)for(var ve=0,Te=O[fe];ve<Te.length;ve+=1)$.push({stack:fe,id:Te[ve]});e.asyncAll($,function(Fe,Ze){var rt=Fe.stack,ft=Fe.id,It=H.entries[rt];It||(It=H.entries[rt]={glyphs:{},requests:{},ranges:{}});var Rt=It.glyphs[ft];if(void 0===Rt){if(Rt=H._tinySDF(It,rt,ft))return It.glyphs[ft]=Rt,void Ze(null,{stack:rt,id:ft,glyph:Rt});var Lt=Math.floor(ft/256);if(256*Lt>65535)Ze(new Error("glyphs > 65535 not supported"));else if(It.ranges[Lt])Ze(null,{stack:rt,id:ft,glyph:Rt});else{var Ot=It.requests[Lt];Ot||(Ot=It.requests[Lt]=[],E.loadGlyphRange(rt,Lt,H.url,H.requestManager,function(St,Gt){if(Gt){for(var qt in Gt)H._doesCharSupportLocalGlyph(+qt)||(It.glyphs[+qt]=Gt[+qt]);It.ranges[Lt]=!0}for(var Zt=0,yn=Ot;Zt<yn.length;Zt+=1)(0,yn[Zt])(St,Gt);delete It.requests[Lt]})),Ot.push(function(St,Gt){St?Ze(St):Gt&&Ze(null,{stack:rt,id:ft,glyph:Gt[ft]||null})})}}else Ze(null,{stack:rt,id:ft,glyph:Rt})},function(Fe,Ze){if(Fe)B(Fe);else if(Ze){for(var rt={},ft=0,It=Ze;ft<It.length;ft+=1){var Rt=It[ft],Lt=Rt.stack,Ot=Rt.id,St=Rt.glyph;(rt[Lt]||(rt[Lt]={}))[Ot]=St&&{id:St.id,bitmap:St.bitmap.clone(),metrics:St.metrics}}B(null,rt)}})},E.prototype._doesCharSupportLocalGlyph=function(O){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](O)||e.isChar["Hangul Syllables"](O)||e.isChar.Hiragana(O)||e.isChar.Katakana(O))},E.prototype._tinySDF=function(O,B,H){var $=this.localIdeographFontFamily;if($&&this._doesCharSupportLocalGlyph(H)){var fe=O.tinySDF;if(!fe){var ve="400";/bold/i.test(B)?ve="900":/medium/i.test(B)?ve="500":/light/i.test(B)&&(ve="200"),fe=O.tinySDF=new E.TinySDF(24,3,8,.25,$,ve)}return{id:H,bitmap:new e.AlphaImage({width:30,height:30},fe.draw(String.fromCharCode(H))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},E.loadGlyphRange=function(O,B,H,$,fe){var ve=256*B,Te=ve+255,Ee=$.transformRequest($.normalizeGlyphsURL(H).replace("{fontstack}",O).replace("{range}",ve+"-"+Te),e.ResourceType.Glyphs);e.getArrayBuffer(Ee,function(Fe,Ze){if(Fe)fe(Fe);else if(Ze){for(var rt={},ft=0,It=e.parseGlyphPBF(Ze);ft<It.length;ft+=1){var Rt=It[ft];rt[Rt.id]=Rt}fe(null,rt)}})},E.TinySDF=u;var L=function(){this.specification=e.styleSpec.light.position};L.prototype.possiblyEvaluate=function(O,B){return e.sphericalToCartesian(O.expression.evaluate(B))},L.prototype.interpolate=function(O,B,H){return{x:e.number(O.x,B.x,H),y:e.number(O.y,B.y,H),z:e.number(O.z,B.z,H)}};var D=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new L,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),N=function(O){function B(H){O.call(this),this._transitionable=new e.Transitionable(D),this.setLight(H),this._transitioning=this._transitionable.untransitioned()}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getLight=function(){return this._transitionable.serialize()},B.prototype.setLight=function(H,$){if(void 0===$&&($={}),!this._validate(e.validateLight,H,$))for(var fe in H){var ve=H[fe];e.endsWith(fe,"-transition")?this._transitionable.setTransition(fe.slice(0,-"-transition".length),ve):this._transitionable.setValue(fe,ve)}},B.prototype.updateTransitions=function(H){this._transitioning=this._transitionable.transitioned(H,this._transitioning)},B.prototype.hasTransition=function(){return this._transitioning.hasTransition()},B.prototype.recalculate=function(H){this.properties=this._transitioning.possiblyEvaluate(H)},B.prototype._validate=function(H,$,fe){return(!fe||!1!==fe.validate)&&e.emitValidationErrors(this,H.call(e.validateStyle,e.extend({value:$,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},B}(e.Evented),F=function(O,B){this.width=O,this.height=B,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};F.prototype.getDash=function(O,B){var H=O.join(",")+String(B);return this.dashEntry[H]||(this.dashEntry[H]=this.addDash(O,B)),this.dashEntry[H]},F.prototype.getDashRanges=function(O,B,H){var $=[],fe=O.length%2==1?-O[O.length-1]*H:0,ve=O[0]*H,Te=!0;$.push({left:fe,right:ve,isDash:Te,zeroLength:0===O[0]});for(var Ee=O[0],Fe=1;Fe<O.length;Fe++){var Ze=O[Fe];fe=Ee*H,ve=(Ee+=Ze)*H,$.push({left:fe,right:ve,isDash:Te=!Te,zeroLength:0===Ze})}return $},F.prototype.addRoundDash=function(O,B,H){for(var $=B/2,fe=-H;fe<=H;fe++)for(var Te=this.width*(this.nextRow+H+fe),Ee=0,Fe=O[Ee],Ze=0;Ze<this.width;Ze++){Ze/Fe.right>1&&(Fe=O[++Ee]);var rt=Math.abs(Ze-Fe.left),ft=Math.abs(Ze-Fe.right),It=Math.min(rt,ft),Rt=void 0,Lt=fe/H*($+1);if(Fe.isDash){var Ot=$-Math.abs(Lt);Rt=Math.sqrt(It*It+Ot*Ot)}else Rt=$-Math.sqrt(It*It+Lt*Lt);this.data[Te+Ze]=Math.max(0,Math.min(255,Rt+128))}},F.prototype.addRegularDash=function(O){for(var B=O.length-1;B>=0;--B){var H=O[B],$=O[B+1];H.zeroLength?O.splice(B,1):$&&$.isDash===H.isDash&&($.left=H.left,O.splice(B,1))}var fe=O[0],ve=O[O.length-1];fe.isDash===ve.isDash&&(fe.left=ve.left-this.width,ve.right=fe.right+this.width);for(var Te=this.width*this.nextRow,Ee=0,Fe=O[Ee],Ze=0;Ze<this.width;Ze++){Ze/Fe.right>1&&(Fe=O[++Ee]);var rt=Math.abs(Ze-Fe.left),ft=Math.abs(Ze-Fe.right),It=Math.min(rt,ft);this.data[Te+Ze]=Math.max(0,Math.min(255,(Fe.isDash?It:-It)+128))}},F.prototype.addDash=function(O,B){var H=B?7:0,$=2*H+1;if(this.nextRow+$>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var fe=0,ve=0;ve<O.length;ve++)fe+=O[ve];if(0!==fe){var Te=this.width/fe,Ee=this.getDashRanges(O,this.width,Te);B?this.addRoundDash(Ee,Te,H):this.addRegularDash(Ee)}var Fe={y:(this.nextRow+H+.5)/this.height,height:2*H/this.height,width:fe};return this.nextRow+=$,this.dirty=!0,Fe},F.prototype.bind=function(O){var B=O.gl;this.texture?(B.bindTexture(B.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,B.texSubImage2D(B.TEXTURE_2D,0,0,0,this.width,this.height,B.ALPHA,B.UNSIGNED_BYTE,this.data))):(this.texture=B.createTexture(),B.bindTexture(B.TEXTURE_2D,this.texture),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_S,B.REPEAT),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_WRAP_T,B.REPEAT),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MIN_FILTER,B.LINEAR),B.texParameteri(B.TEXTURE_2D,B.TEXTURE_MAG_FILTER,B.LINEAR),B.texImage2D(B.TEXTURE_2D,0,B.ALPHA,this.width,this.height,0,B.ALPHA,B.UNSIGNED_BYTE,this.data))};var I=function O(B,H){this.workerPool=B,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var $=this.workerPool.acquire(this.id),fe=0;fe<$.length;fe++){var Te=new O.Actor($[fe],H,this.id);Te.name="Worker "+fe,this.actors.push(Te)}};function P(O,B,H){var $=function(fe,ve){if(fe)return H(fe);if(ve){var Te=e.pick(e.extend(ve,O),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);ve.vector_layers&&(Te.vectorLayers=ve.vector_layers,Te.vectorLayerIds=Te.vectorLayers.map(function(Ee){return Ee.id})),Te.tiles=B.canonicalizeTileset(Te,O.url),H(null,Te)}};return O.url?e.getJSON(B.transformRequest(B.normalizeSourceURL(O.url),e.ResourceType.Source),$):e.browser.frame(function(){return $(null,O)})}I.prototype.broadcast=function(O,B,H){e.asyncAll(this.actors,function($,fe){$.send(O,B,fe)},H=H||function(){})},I.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},I.prototype.remove=function(){this.actors.forEach(function(O){O.remove()}),this.actors=[],this.workerPool.release(this.id)},I.Actor=e.Actor;var j=function(O,B,H){this.bounds=e.LngLatBounds.convert(this.validateBounds(O)),this.minzoom=B||0,this.maxzoom=H||24};j.prototype.validateBounds=function(O){return Array.isArray(O)&&4===O.length?[Math.max(-180,O[0]),Math.max(-90,O[1]),Math.min(180,O[2]),Math.min(90,O[3])]:[-180,-90,180,90]},j.prototype.contains=function(O){var B=Math.pow(2,O.z),H=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*B),$=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*B),fe=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*B),ve=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*B);return O.x>=H&&O.x<fe&&O.y>=$&&O.y<ve};var V=function(O){function B(H,$,fe,ve){if(O.call(this),this.id=H,this.dispatcher=fe,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick($,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},$),this._collectResourceTiming=$.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(ve)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.load=function(){var H=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=P(this._options,this.map._requestManager,function($,fe){H._tileJSONRequest=null,H._loaded=!0,$?H.fire(new e.ErrorEvent($)):fe&&(e.extend(H,fe),fe.bounds&&(H.tileBounds=new j(fe.bounds,H.minzoom,H.maxzoom)),e.postTurnstileEvent(fe.tiles,H.map._requestManager._customAccessToken),e.postMapLoadEvent(fe.tiles,H.map._getMapId(),H.map._requestManager._skuToken,H.map._requestManager._customAccessToken),H.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),H.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},B.prototype.loaded=function(){return this._loaded},B.prototype.hasTile=function(H){return!this.tileBounds||this.tileBounds.contains(H.canonical)},B.prototype.onAdd=function(H){this.map=H,this.load()},B.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},B.prototype.serialize=function(){return e.extend({},this._options)},B.prototype.loadTile=function(H,$){var fe=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme)),ve={request:this.map._requestManager.transformRequest(fe,e.ResourceType.Tile),uid:H.uid,tileID:H.tileID,zoom:H.tileID.overscaledZ,tileSize:this.tileSize*H.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function Te(Ee,Fe){return delete H.request,H.aborted?$(null):Ee&&404!==Ee.status?$(Ee):(Fe&&Fe.resourceTiming&&(H.resourceTiming=Fe.resourceTiming),this.map._refreshExpiredTiles&&Fe&&H.setExpiryData(Fe),H.loadVectorData(Fe,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),$(null),void(H.reloadCallback&&(this.loadTile(H,H.reloadCallback),H.reloadCallback=null)))}ve.request.collectResourceTiming=this._collectResourceTiming,H.actor&&"expired"!==H.state?"loading"===H.state?H.reloadCallback=$:H.request=H.actor.send("reloadTile",ve,Te.bind(this)):(H.actor=this.dispatcher.getActor(),H.request=H.actor.send("loadTile",ve,Te.bind(this)))},B.prototype.abortTile=function(H){H.request&&(H.request.cancel(),delete H.request),H.actor&&H.actor.send("abortTile",{uid:H.uid,type:this.type,source:this.id},void 0)},B.prototype.unloadTile=function(H){H.unloadVectorData(),H.actor&&H.actor.send("removeTile",{uid:H.uid,type:this.type,source:this.id},void 0)},B.prototype.hasTransition=function(){return!1},B}(e.Evented),Z=function(O){function B(H,$,fe,ve){O.call(this),this.id=H,this.dispatcher=fe,this.setEventedParent(ve),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},$),e.extend(this,e.pick($,["url","scheme","tileSize"]))}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.load=function(){var H=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=P(this._options,this.map._requestManager,function($,fe){H._tileJSONRequest=null,H._loaded=!0,$?H.fire(new e.ErrorEvent($)):fe&&(e.extend(H,fe),fe.bounds&&(H.tileBounds=new j(fe.bounds,H.minzoom,H.maxzoom)),e.postTurnstileEvent(fe.tiles),e.postMapLoadEvent(fe.tiles,H.map._getMapId(),H.map._requestManager._skuToken),H.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),H.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},B.prototype.loaded=function(){return this._loaded},B.prototype.onAdd=function(H){this.map=H,this.load()},B.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},B.prototype.serialize=function(){return e.extend({},this._options)},B.prototype.hasTile=function(H){return!this.tileBounds||this.tileBounds.contains(H.canonical)},B.prototype.loadTile=function(H,$){var fe=this,ve=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);H.request=e.getImage(this.map._requestManager.transformRequest(ve,e.ResourceType.Tile),function(Te,Ee){if(delete H.request,H.aborted)H.state="unloaded",$(null);else if(Te)H.state="errored",$(Te);else if(Ee){fe.map._refreshExpiredTiles&&H.setExpiryData(Ee),delete Ee.cacheControl,delete Ee.expires;var Fe=fe.map.painter.context,Ze=Fe.gl;H.texture=fe.map.painter.getTileTexture(Ee.width),H.texture?H.texture.update(Ee,{useMipmap:!0}):(H.texture=new e.Texture(Fe,Ee,Ze.RGBA,{useMipmap:!0}),H.texture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE,Ze.LINEAR_MIPMAP_NEAREST),Fe.extTextureFilterAnisotropic&&Ze.texParameterf(Ze.TEXTURE_2D,Fe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Fe.extTextureFilterAnisotropicMax)),H.state="loaded",e.cacheEntryPossiblyAdded(fe.dispatcher),$(null)}})},B.prototype.abortTile=function(H,$){H.request&&(H.request.cancel(),delete H.request),$()},B.prototype.unloadTile=function(H,$){H.texture&&this.map.painter.saveTileTexture(H.texture),$()},B.prototype.hasTransition=function(){return!1},B}(e.Evented),Y=function(O){function B(H,$,fe,ve){O.call(this,H,$,fe,ve),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},$),this.encoding=$.encoding||"mapbox"}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},B.prototype.loadTile=function(H,$){var fe=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function ve(Te,Ee){Te&&(H.state="errored",$(Te)),Ee&&(H.dem=Ee,H.needsHillshadePrepare=!0,H.state="loaded",$(null))}H.request=e.getImage(this.map._requestManager.transformRequest(fe,e.ResourceType.Tile),function(Te,Ee){if(delete H.request,H.aborted)H.state="unloaded",$(null);else if(Te)H.state="errored",$(Te);else if(Ee){this.map._refreshExpiredTiles&&H.setExpiryData(Ee),delete Ee.cacheControl,delete Ee.expires;var Fe=e.window.ImageBitmap&&Ee instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?Ee:e.browser.getImageData(Ee,1),Ze={uid:H.uid,coord:H.tileID,source:this.id,rawImageData:Fe,encoding:this.encoding};H.actor&&"expired"!==H.state||(H.actor=this.dispatcher.getActor(),H.actor.send("loadDEMTile",Ze,ve.bind(this)))}}.bind(this)),H.neighboringTiles=this._getNeighboringTiles(H.tileID)},B.prototype._getNeighboringTiles=function(H){var $=H.canonical,fe=Math.pow(2,$.z),ve=($.x-1+fe)%fe,Te=0===$.x?H.wrap-1:H.wrap,Ee=($.x+1+fe)%fe,Fe=$.x+1===fe?H.wrap+1:H.wrap,Ze={};return Ze[new e.OverscaledTileID(H.overscaledZ,Te,$.z,ve,$.y).key]={backfilled:!1},Ze[new e.OverscaledTileID(H.overscaledZ,Fe,$.z,Ee,$.y).key]={backfilled:!1},$.y>0&&(Ze[new e.OverscaledTileID(H.overscaledZ,Te,$.z,ve,$.y-1).key]={backfilled:!1},Ze[new e.OverscaledTileID(H.overscaledZ,H.wrap,$.z,$.x,$.y-1).key]={backfilled:!1},Ze[new e.OverscaledTileID(H.overscaledZ,Fe,$.z,Ee,$.y-1).key]={backfilled:!1}),$.y+1<fe&&(Ze[new e.OverscaledTileID(H.overscaledZ,Te,$.z,ve,$.y+1).key]={backfilled:!1},Ze[new e.OverscaledTileID(H.overscaledZ,H.wrap,$.z,$.x,$.y+1).key]={backfilled:!1},Ze[new e.OverscaledTileID(H.overscaledZ,Fe,$.z,Ee,$.y+1).key]={backfilled:!1}),Ze},B.prototype.unloadTile=function(H){H.demTexture&&this.map.painter.saveTileTexture(H.demTexture),H.fbo&&(H.fbo.destroy(),delete H.fbo),H.dem&&delete H.dem,delete H.neighboringTiles,H.state="unloaded",H.actor&&H.actor.send("removeDEMTile",{uid:H.uid,source:this.id})},B}(Z),ee=function(O){function B(H,$,fe,ve){O.call(this),this.id=H,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=fe.getActor(),this.setEventedParent(ve),this._data=$.data,this._options=e.extend({},$),this._collectResourceTiming=$.collectResourceTiming,this._resourceTiming=[],void 0!==$.maxzoom&&(this.maxzoom=$.maxzoom),$.type&&(this.type=$.type),$.attribution&&(this.attribution=$.attribution),this.promoteId=$.promoteId;var Te=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:$.cluster||!1,geojsonVtOptions:{buffer:(void 0!==$.buffer?$.buffer:128)*Te,tolerance:(void 0!==$.tolerance?$.tolerance:.375)*Te,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:$.lineMetrics||!1,generateId:$.generateId||!1},superclusterOptions:{maxZoom:void 0!==$.clusterMaxZoom?Math.min($.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:($.clusterRadius||50)*Te,log:!1,generateId:$.generateId||!1},clusterProperties:$.clusterProperties},$.workerOptions)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.load=function(){var H=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function($){if($)H.fire(new e.ErrorEvent($));else{var fe={dataType:"source",sourceDataType:"metadata"};H._collectResourceTiming&&H._resourceTiming&&H._resourceTiming.length>0&&(fe.resourceTiming=H._resourceTiming,H._resourceTiming=[]),H.fire(new e.Event("data",fe))}})},B.prototype.onAdd=function(H){this.map=H,this.load()},B.prototype.setData=function(H){var $=this;return this._data=H,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(fe){if(fe)$.fire(new e.ErrorEvent(fe));else{var ve={dataType:"source",sourceDataType:"content"};$._collectResourceTiming&&$._resourceTiming&&$._resourceTiming.length>0&&(ve.resourceTiming=$._resourceTiming,$._resourceTiming=[]),$.fire(new e.Event("data",ve))}}),this},B.prototype.getClusterExpansionZoom=function(H,$){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:H,source:this.id},$),this},B.prototype.getClusterChildren=function(H,$){return this.actor.send("geojson.getClusterChildren",{clusterId:H,source:this.id},$),this},B.prototype.getClusterLeaves=function(H,$,fe,ve){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:H,limit:$,offset:fe},ve),this},B.prototype._updateWorkerData=function(H){var $=this;this._loaded=!1;var fe=e.extend({},this.workerOptions),ve=this._data;"string"==typeof ve?(fe.request=this.map._requestManager.transformRequest(e.browser.resolveURL(ve),e.ResourceType.Source),fe.request.collectResourceTiming=this._collectResourceTiming):fe.data=JSON.stringify(ve),this.actor.send(this.type+".loadData",fe,function(Te,Ee){$._removed||Ee&&Ee.abandoned||($._loaded=!0,Ee&&Ee.resourceTiming&&Ee.resourceTiming[$.id]&&($._resourceTiming=Ee.resourceTiming[$.id].slice(0)),$.actor.send($.type+".coalesce",{source:fe.source},null),H(Te))})},B.prototype.loaded=function(){return this._loaded},B.prototype.loadTile=function(H,$){var fe=this,ve=H.actor?"reloadTile":"loadTile";H.actor=this.actor,H.request=this.actor.send(ve,{type:this.type,uid:H.uid,tileID:H.tileID,zoom:H.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(Ee,Fe){return delete H.request,H.unloadVectorData(),H.aborted?$(null):Ee?$(Ee):(H.loadVectorData(Fe,fe.map.painter,"reloadTile"===ve),$(null))})},B.prototype.abortTile=function(H){H.request&&(H.request.cancel(),delete H.request),H.aborted=!0},B.prototype.unloadTile=function(H){H.unloadVectorData(),this.actor.send("removeTile",{uid:H.uid,type:this.type,source:this.id})},B.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},B.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},B.prototype.hasTransition=function(){return!1},B}(e.Evented),re=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),X=function(O){function B(H,$,fe,ve){O.call(this),this.id=H,this.dispatcher=fe,this.coordinates=$.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(ve),this.options=$}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.load=function(H,$){var fe=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(ve,Te){fe._loaded=!0,ve?fe.fire(new e.ErrorEvent(ve)):Te&&(fe.image=Te,H&&(fe.coordinates=H),$&&$(),fe._finishLoading())})},B.prototype.loaded=function(){return this._loaded},B.prototype.updateImage=function(H){var $=this;return this.image&&H.url?(this.options.url=H.url,this.load(H.coordinates,function(){$.texture=null}),this):this},B.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},B.prototype.onAdd=function(H){this.map=H,this.load()},B.prototype.setCoordinates=function(H){var $=this;this.coordinates=H;var fe=H.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(Te){for(var Ee=1/0,Fe=1/0,Ze=-1/0,rt=-1/0,ft=0,It=Te;ft<It.length;ft+=1){var Rt=It[ft];Ee=Math.min(Ee,Rt.x),Fe=Math.min(Fe,Rt.y),Ze=Math.max(Ze,Rt.x),rt=Math.max(rt,Rt.y)}var St=Math.max(Ze-Ee,rt-Fe),Gt=Math.max(0,Math.floor(-Math.log(St)/Math.LN2)),qt=Math.pow(2,Gt);return new e.CanonicalTileID(Gt,Math.floor((Ee+Ze)/2*qt),Math.floor((Fe+rt)/2*qt))}(fe),this.minzoom=this.maxzoom=this.tileID.z;var ve=fe.map(function(Te){return $.tileID.getTilePoint(Te)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(ve[0].x,ve[0].y,0,0),this._boundsArray.emplaceBack(ve[1].x,ve[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(ve[3].x,ve[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(ve[2].x,ve[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},B.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var H=this.map.painter.context,$=H.gl;for(var fe in this.boundsBuffer||(this.boundsBuffer=H.createVertexBuffer(this._boundsArray,re.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(H,this.image,$.RGBA),this.texture.bind($.LINEAR,$.CLAMP_TO_EDGE)),this.tiles){var ve=this.tiles[fe];"loaded"!==ve.state&&(ve.state="loaded",ve.texture=this.texture)}}},B.prototype.loadTile=function(H,$){this.tileID&&this.tileID.equals(H.tileID.canonical)?(this.tiles[String(H.tileID.wrap)]=H,H.buckets={},$(null)):(H.state="errored",$(null))},B.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},B.prototype.hasTransition=function(){return!1},B}(e.Evented),K=function(O){function B(H,$,fe,ve){O.call(this,H,$,fe,ve),this.roundZoom=!0,this.type="video",this.options=$}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.load=function(){var H=this;this._loaded=!1;var $=this.options;this.urls=[];for(var fe=0,ve=$.urls;fe<ve.length;fe+=1)this.urls.push(this.map._requestManager.transformRequest(ve[fe],e.ResourceType.Source).url);e.getVideo(this.urls,function(Ee,Fe){H._loaded=!0,Ee?H.fire(new e.ErrorEvent(Ee)):Fe&&(H.video=Fe,H.video.loop=!0,H.video.addEventListener("playing",function(){H.map.triggerRepaint()}),H.map&&H.video.play(),H._finishLoading())})},B.prototype.pause=function(){this.video&&this.video.pause()},B.prototype.play=function(){this.video&&this.video.play()},B.prototype.seek=function(H){if(this.video){var $=this.video.seekable;H<$.start(0)||H>$.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+$.start(0)+" and "+$.end(0)+"-second mark."))):this.video.currentTime=H}},B.prototype.getVideo=function(){return this.video},B.prototype.onAdd=function(H){this.map||(this.map=H,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},B.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var H=this.map.painter.context,$=H.gl;for(var fe in this.boundsBuffer||(this.boundsBuffer=H.createVertexBuffer(this._boundsArray,re.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind($.LINEAR,$.CLAMP_TO_EDGE),$.texSubImage2D($.TEXTURE_2D,0,0,0,$.RGBA,$.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(H,this.video,$.RGBA),this.texture.bind($.LINEAR,$.CLAMP_TO_EDGE)),this.tiles){var ve=this.tiles[fe];"loaded"!==ve.state&&(ve.state="loaded",ve.texture=this.texture)}}},B.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},B.prototype.hasTransition=function(){return this.video&&!this.video.paused},B}(X),ie=function(O){function B(H,$,fe,ve){O.call(this,H,$,fe,ve),$.coordinates?Array.isArray($.coordinates)&&4===$.coordinates.length&&!$.coordinates.some(function(Te){return!Array.isArray(Te)||2!==Te.length||Te.some(function(Ee){return"number"!=typeof Ee})})||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+H,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+H,null,'missing required property "coordinates"'))),$.animate&&"boolean"!=typeof $.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+H,null,'optional "animate" property must be a boolean value'))),$.canvas?"string"==typeof $.canvas||$.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+H,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+H,null,'missing required property "canvas"'))),this.options=$,this.animate=void 0===$.animate||$.animate}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},B.prototype.getCanvas=function(){return this.canvas},B.prototype.onAdd=function(H){this.map=H,this.load(),this.canvas&&this.animate&&this.play()},B.prototype.onRemove=function(){this.pause()},B.prototype.prepare=function(){var H=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,H=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,H=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var $=this.map.painter.context,fe=$.gl;for(var ve in this.boundsBuffer||(this.boundsBuffer=$.createVertexBuffer(this._boundsArray,re.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(H||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture($,this.canvas,fe.RGBA,{premultiply:!0}),this.tiles){var Te=this.tiles[ve];"loaded"!==Te.state&&(Te.state="loaded",Te.texture=this.texture)}}},B.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},B.prototype.hasTransition=function(){return this._playing},B.prototype._hasInvalidDimensions=function(){for(var H=0,$=[this.canvas.width,this.canvas.height];H<$.length;H+=1){var fe=$[H];if(isNaN(fe)||fe<=0)return!0}return!1},B}(X),q={vector:V,raster:Z,"raster-dem":Y,geojson:ee,video:K,image:X,canvas:ie};function U(O,B){var H=e.identity([]);return e.translate(H,H,[1,1,0]),e.scale(H,H,[.5*O.width,.5*O.height,1]),e.multiply(H,H,O.calculatePosMatrix(B.toUnwrapped()))}function W(O,B,H,$,fe,ve){var Te=function(Ot,St,Gt){if(Ot)for(var qt=0,Zt=Ot;qt<Zt.length;qt+=1){var yn=St[Zt[qt]];if(yn&&yn.source===Gt&&"fill-extrusion"===yn.type)return!0}else for(var Sn in St){var qn=St[Sn];if(qn.source===Gt&&"fill-extrusion"===qn.type)return!0}return!1}(fe&&fe.layers,B,O.id),Ee=ve.maxPitchScaleFactor(),Fe=O.tilesIn($,Ee,Te);Fe.sort(ae);for(var Ze=[],rt=0,ft=Fe;rt<ft.length;rt+=1){var It=ft[rt];Ze.push({wrappedTileID:It.tileID.wrapped().key,queryResults:It.tile.queryRenderedFeatures(B,H,O._state,It.queryGeometry,It.cameraQueryGeometry,It.scale,fe,ve,Ee,U(O.transform,It.tileID))})}var Rt=function(Ot){for(var St={},Gt={},qt=0,Zt=Ot;qt<Zt.length;qt+=1){var yn=Zt[qt],Sn=yn.queryResults,qn=yn.wrappedTileID,Un=Gt[qn]=Gt[qn]||{};for(var mr in Sn)for(var gr=Sn[mr],Pr=Un[mr]=Un[mr]||{},Cr=St[mr]=St[mr]||[],di=0,wi=gr;di<wi.length;di+=1){var Bi=wi[di];Pr[Bi.featureIndex]||(Pr[Bi.featureIndex]=!0,Cr.push(Bi))}}return St}(Ze);for(var Lt in Rt)Rt[Lt].forEach(function(Ot){var St=Ot.feature,Gt=O.getFeatureState(St.layer["source-layer"],St.id);St.source=St.layer.source,St.layer["source-layer"]&&(St.sourceLayer=St.layer["source-layer"]),St.state=Gt});return Rt}function ae(O,B){var H=O.tileID,$=B.tileID;return H.overscaledZ-$.overscaledZ||H.canonical.y-$.canonical.y||H.wrap-$.wrap||H.canonical.x-$.canonical.x}var G=function(O,B){this.max=O,this.onRemove=B,this.reset()};G.prototype.reset=function(){for(var O in this.data)for(var B=0,H=this.data[O];B<H.length;B+=1){var $=H[B];$.timeout&&clearTimeout($.timeout),this.onRemove($.value)}return this.data={},this.order=[],this},G.prototype.add=function(O,B,H){var $=this,fe=O.wrapped().key;void 0===this.data[fe]&&(this.data[fe]=[]);var ve={value:B,timeout:void 0};if(void 0!==H&&(ve.timeout=setTimeout(function(){$.remove(O,ve)},H)),this.data[fe].push(ve),this.order.push(fe),this.order.length>this.max){var Te=this._getAndRemoveByKey(this.order[0]);Te&&this.onRemove(Te)}return this},G.prototype.has=function(O){return O.wrapped().key in this.data},G.prototype.getAndRemove=function(O){return this.has(O)?this._getAndRemoveByKey(O.wrapped().key):null},G.prototype._getAndRemoveByKey=function(O){var B=this.data[O].shift();return B.timeout&&clearTimeout(B.timeout),0===this.data[O].length&&delete this.data[O],this.order.splice(this.order.indexOf(O),1),B.value},G.prototype.getByKey=function(O){var B=this.data[O];return B?B[0].value:null},G.prototype.get=function(O){return this.has(O)?this.data[O.wrapped().key][0].value:null},G.prototype.remove=function(O,B){if(!this.has(O))return this;var H=O.wrapped().key,$=void 0===B?0:this.data[H].indexOf(B),fe=this.data[H][$];return this.data[H].splice($,1),fe.timeout&&clearTimeout(fe.timeout),0===this.data[H].length&&delete this.data[H],this.onRemove(fe.value),this.order.splice(this.order.indexOf(H),1),this},G.prototype.setMaxSize=function(O){for(this.max=O;this.order.length>this.max;){var B=this._getAndRemoveByKey(this.order[0]);B&&this.onRemove(B)}return this},G.prototype.filter=function(O){var B=[];for(var H in this.data)for(var $=0,fe=this.data[H];$<fe.length;$+=1){var ve=fe[$];O(ve.value)||B.push(ve)}for(var Te=0,Ee=B;Te<Ee.length;Te+=1){var Fe=Ee[Te];this.remove(Fe.value.tileID,Fe)}};var te=function(O,B,H){this.context=O;var $=O.gl;this.buffer=$.createBuffer(),this.dynamicDraw=Boolean(H),this.context.unbindVAO(),O.bindElementBuffer.set(this.buffer),$.bufferData($.ELEMENT_ARRAY_BUFFER,B.arrayBuffer,this.dynamicDraw?$.DYNAMIC_DRAW:$.STATIC_DRAW),this.dynamicDraw||delete B.arrayBuffer};te.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},te.prototype.updateData=function(O){var B=this.context.gl;this.context.unbindVAO(),this.bind(),B.bufferSubData(B.ELEMENT_ARRAY_BUFFER,0,O.arrayBuffer)},te.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ne={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},le=function(O,B,H,$){this.length=B.length,this.attributes=H,this.itemSize=B.bytesPerElement,this.dynamicDraw=$,this.context=O;var fe=O.gl;this.buffer=fe.createBuffer(),O.bindVertexBuffer.set(this.buffer),fe.bufferData(fe.ARRAY_BUFFER,B.arrayBuffer,this.dynamicDraw?fe.DYNAMIC_DRAW:fe.STATIC_DRAW),this.dynamicDraw||delete B.arrayBuffer};le.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},le.prototype.updateData=function(O){var B=this.context.gl;this.bind(),B.bufferSubData(B.ARRAY_BUFFER,0,O.arrayBuffer)},le.prototype.enableAttributes=function(O,B){for(var H=0;H<this.attributes.length;H++){var fe=B.attributes[this.attributes[H].name];void 0!==fe&&O.enableVertexAttribArray(fe)}},le.prototype.setVertexAttribPointers=function(O,B,H){for(var $=0;$<this.attributes.length;$++){var fe=this.attributes[$],ve=B.attributes[fe.name];void 0!==ve&&O.vertexAttribPointer(ve,fe.components,O[ne[fe.type]],!1,this.itemSize,fe.offset+this.itemSize*(H||0))}},le.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ue=function(O){this.gl=O.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ue.prototype.get=function(){return this.current},ue.prototype.set=function(O){},ue.prototype.getDefault=function(){return this.default},ue.prototype.setDefault=function(){this.set(this.default)};var pe=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return e.Color.transparent},B.prototype.set=function(H){var $=this.current;(H.r!==$.r||H.g!==$.g||H.b!==$.b||H.a!==$.a||this.dirty)&&(this.gl.clearColor(H.r,H.g,H.b,H.a),this.current=H,this.dirty=!1)},B}(ue),de=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return 1},B.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.clearDepth(H),this.current=H,this.dirty=!1)},B}(ue),_e=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return 0},B.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.clearStencil(H),this.current=H,this.dirty=!1)},B}(ue),me=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return[!0,!0,!0,!0]},B.prototype.set=function(H){var $=this.current;(H[0]!==$[0]||H[1]!==$[1]||H[2]!==$[2]||H[3]!==$[3]||this.dirty)&&(this.gl.colorMask(H[0],H[1],H[2],H[3]),this.current=H,this.dirty=!1)},B}(ue),we=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return!0},B.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.depthMask(H),this.current=H,this.dirty=!1)},B}(ue),De=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return 255},B.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.stencilMask(H),this.current=H,this.dirty=!1)},B}(ue),Le=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},B.prototype.set=function(H){var $=this.current;(H.func!==$.func||H.ref!==$.ref||H.mask!==$.mask||this.dirty)&&(this.gl.stencilFunc(H.func,H.ref,H.mask),this.current=H,this.dirty=!1)},B}(ue),Ie=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){var H=this.gl;return[H.KEEP,H.KEEP,H.KEEP]},B.prototype.set=function(H){var $=this.current;(H[0]!==$[0]||H[1]!==$[1]||H[2]!==$[2]||this.dirty)&&(this.gl.stencilOp(H[0],H[1],H[2]),this.current=H,this.dirty=!1)},B}(ue),je=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return!1},B.prototype.set=function(H){if(H!==this.current||this.dirty){var $=this.gl;H?$.enable($.STENCIL_TEST):$.disable($.STENCIL_TEST),this.current=H,this.dirty=!1}},B}(ue),ye=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return[0,1]},B.prototype.set=function(H){var $=this.current;(H[0]!==$[0]||H[1]!==$[1]||this.dirty)&&(this.gl.depthRange(H[0],H[1]),this.current=H,this.dirty=!1)},B}(ue),Me=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return!1},B.prototype.set=function(H){if(H!==this.current||this.dirty){var $=this.gl;H?$.enable($.DEPTH_TEST):$.disable($.DEPTH_TEST),this.current=H,this.dirty=!1}},B}(ue),Oe=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return this.gl.LESS},B.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.depthFunc(H),this.current=H,this.dirty=!1)},B}(ue),Pe=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return!1},B.prototype.set=function(H){if(H!==this.current||this.dirty){var $=this.gl;H?$.enable($.BLEND):$.disable($.BLEND),this.current=H,this.dirty=!1}},B}(ue),Re=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){var H=this.gl;return[H.ONE,H.ZERO]},B.prototype.set=function(H){var $=this.current;(H[0]!==$[0]||H[1]!==$[1]||this.dirty)&&(this.gl.blendFunc(H[0],H[1]),this.current=H,this.dirty=!1)},B}(ue),Ue=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return e.Color.transparent},B.prototype.set=function(H){var $=this.current;(H.r!==$.r||H.g!==$.g||H.b!==$.b||H.a!==$.a||this.dirty)&&(this.gl.blendColor(H.r,H.g,H.b,H.a),this.current=H,this.dirty=!1)},B}(ue),qe=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return this.gl.FUNC_ADD},B.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.blendEquation(H),this.current=H,this.dirty=!1)},B}(ue),Xe=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return!1},B.prototype.set=function(H){if(H!==this.current||this.dirty){var $=this.gl;H?$.enable($.CULL_FACE):$.disable($.CULL_FACE),this.current=H,this.dirty=!1}},B}(ue),lt=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return this.gl.BACK},B.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.cullFace(H),this.current=H,this.dirty=!1)},B}(ue),He=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return this.gl.CCW},B.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.frontFace(H),this.current=H,this.dirty=!1)},B}(ue),$e=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return null},B.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.useProgram(H),this.current=H,this.dirty=!1)},B}(ue),et=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return this.gl.TEXTURE0},B.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.activeTexture(H),this.current=H,this.dirty=!1)},B}(ue),nt=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){var H=this.gl;return[0,0,H.drawingBufferWidth,H.drawingBufferHeight]},B.prototype.set=function(H){var $=this.current;(H[0]!==$[0]||H[1]!==$[1]||H[2]!==$[2]||H[3]!==$[3]||this.dirty)&&(this.gl.viewport(H[0],H[1],H[2],H[3]),this.current=H,this.dirty=!1)},B}(ue),ct=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return null},B.prototype.set=function(H){if(H!==this.current||this.dirty){var $=this.gl;$.bindFramebuffer($.FRAMEBUFFER,H),this.current=H,this.dirty=!1}},B}(ue),bt=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return null},B.prototype.set=function(H){if(H!==this.current||this.dirty){var $=this.gl;$.bindRenderbuffer($.RENDERBUFFER,H),this.current=H,this.dirty=!1}},B}(ue),kt=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return null},B.prototype.set=function(H){if(H!==this.current||this.dirty){var $=this.gl;$.bindTexture($.TEXTURE_2D,H),this.current=H,this.dirty=!1}},B}(ue),Bt=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return null},B.prototype.set=function(H){if(H!==this.current||this.dirty){var $=this.gl;$.bindBuffer($.ARRAY_BUFFER,H),this.current=H,this.dirty=!1}},B}(ue),Et=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return null},B.prototype.set=function(H){var $=this.gl;$.bindBuffer($.ELEMENT_ARRAY_BUFFER,H),this.current=H,this.dirty=!1},B}(ue),ht=function(O){function B(H){O.call(this,H),this.vao=H.extVertexArrayObject}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return null},B.prototype.set=function(H){this.vao&&(H!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(H),this.current=H,this.dirty=!1)},B}(ue),at=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return 4},B.prototype.set=function(H){if(H!==this.current||this.dirty){var $=this.gl;$.pixelStorei($.UNPACK_ALIGNMENT,H),this.current=H,this.dirty=!1}},B}(ue),Ft=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return!1},B.prototype.set=function(H){if(H!==this.current||this.dirty){var $=this.gl;$.pixelStorei($.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H),this.current=H,this.dirty=!1}},B}(ue),en=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return!1},B.prototype.set=function(H){if(H!==this.current||this.dirty){var $=this.gl;$.pixelStorei($.UNPACK_FLIP_Y_WEBGL,H),this.current=H,this.dirty=!1}},B}(ue),Qt=function(O){function B(H,$){O.call(this,H),this.context=H,this.parent=$}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getDefault=function(){return null},B}(ue),tn=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.setDirty=function(){this.dirty=!0},B.prototype.set=function(H){if(H!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var $=this.gl;$.framebufferTexture2D($.FRAMEBUFFER,$.COLOR_ATTACHMENT0,$.TEXTURE_2D,H,0),this.current=H,this.dirty=!1}},B}(Qt),dn=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.set=function(H){if(H!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var $=this.gl;$.framebufferRenderbuffer($.FRAMEBUFFER,$.DEPTH_ATTACHMENT,$.RENDERBUFFER,H),this.current=H,this.dirty=!1}},B}(Qt),Mn=function(O,B,H,$){this.context=O,this.width=B,this.height=H;var ve=this.framebuffer=O.gl.createFramebuffer();this.colorAttachment=new tn(O,ve),$&&(this.depthAttachment=new dn(O,ve))};Mn.prototype.destroy=function(){var O=this.context.gl,B=this.colorAttachment.get();if(B&&O.deleteTexture(B),this.depthAttachment){var H=this.depthAttachment.get();H&&O.deleteRenderbuffer(H)}O.deleteFramebuffer(this.framebuffer)};var sn=function(O,B,H){this.func=O,this.mask=B,this.range=H};sn.ReadOnly=!1,sn.ReadWrite=!0,sn.disabled=new sn(519,sn.ReadOnly,[0,1]);var ke=function(O,B,H,$,fe,ve){this.test=O,this.ref=B,this.mask=H,this.fail=$,this.depthFail=fe,this.pass=ve};ke.disabled=new ke({func:519,mask:0},0,0,7680,7680,7680);var Se=function(O,B,H){this.blendFunction=O,this.blendColor=B,this.mask=H};Se.disabled=new Se(Se.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),Se.unblended=new Se(Se.Replace,e.Color.transparent,[!0,!0,!0,!0]),Se.alphaBlended=new Se([1,771],e.Color.transparent,[!0,!0,!0,!0]);var Ce=function(O,B,H){this.enable=O,this.mode=B,this.frontFace=H};Ce.disabled=new Ce(!1,1029,2305),Ce.backCCW=new Ce(!0,1029,2305);var Ve=function(O){this.gl=O,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new pe(this),this.clearDepth=new de(this),this.clearStencil=new _e(this),this.colorMask=new me(this),this.depthMask=new we(this),this.stencilMask=new De(this),this.stencilFunc=new Le(this),this.stencilOp=new Ie(this),this.stencilTest=new je(this),this.depthRange=new ye(this),this.depthTest=new Me(this),this.depthFunc=new Oe(this),this.blend=new Pe(this),this.blendFunc=new Re(this),this.blendColor=new Ue(this),this.blendEquation=new qe(this),this.cullFace=new Xe(this),this.cullFaceSide=new lt(this),this.frontFace=new He(this),this.program=new $e(this),this.activeTexture=new et(this),this.viewport=new nt(this),this.bindFramebuffer=new ct(this),this.bindRenderbuffer=new bt(this),this.bindTexture=new kt(this),this.bindVertexBuffer=new Bt(this),this.bindElementBuffer=new Et(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ht(this),this.pixelStoreUnpack=new at(this),this.pixelStoreUnpackPremultiplyAlpha=new Ft(this),this.pixelStoreUnpackFlipY=new en(this),this.extTextureFilterAnisotropic=O.getExtension("EXT_texture_filter_anisotropic")||O.getExtension("MOZ_EXT_texture_filter_anisotropic")||O.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=O.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=O.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(O.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=O.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=O.getExtension("EXT_disjoint_timer_query")};Ve.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Ve.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Ve.prototype.createIndexBuffer=function(O,B){return new te(this,O,B)},Ve.prototype.createVertexBuffer=function(O,B,H){return new le(this,O,B,H)},Ve.prototype.createRenderbuffer=function(O,B,H){var $=this.gl,fe=$.createRenderbuffer();return this.bindRenderbuffer.set(fe),$.renderbufferStorage($.RENDERBUFFER,O,B,H),this.bindRenderbuffer.set(null),fe},Ve.prototype.createFramebuffer=function(O,B,H){return new Mn(this,O,B,H)},Ve.prototype.clear=function(O){var B=O.color,H=O.depth,$=this.gl,fe=0;B&&(fe|=$.COLOR_BUFFER_BIT,this.clearColor.set(B),this.colorMask.set([!0,!0,!0,!0])),void 0!==H&&(fe|=$.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(H),this.depthMask.set(!0)),$.clear(fe)},Ve.prototype.setCullFace=function(O){!1===O.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(O.mode),this.frontFace.set(O.frontFace))},Ve.prototype.setDepthMode=function(O){O.func!==this.gl.ALWAYS||O.mask?(this.depthTest.set(!0),this.depthFunc.set(O.func),this.depthMask.set(O.mask),this.depthRange.set(O.range)):this.depthTest.set(!1)},Ve.prototype.setStencilMode=function(O){O.test.func!==this.gl.ALWAYS||O.mask?(this.stencilTest.set(!0),this.stencilMask.set(O.mask),this.stencilOp.set([O.fail,O.depthFail,O.pass]),this.stencilFunc.set({func:O.test.func,ref:O.ref,mask:O.test.mask})):this.stencilTest.set(!1)},Ve.prototype.setColorMode=function(O){e.deepEqual(O.blendFunction,Se.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(O.blendFunction),this.blendColor.set(O.blendColor)),this.colorMask.set(O.mask)},Ve.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var Ge=function(O){function B(H,$,fe){var ve=this;O.call(this),this.id=H,this.dispatcher=fe,this.on("data",function(Te){"source"===Te.dataType&&"metadata"===Te.sourceDataType&&(ve._sourceLoaded=!0),ve._sourceLoaded&&!ve._paused&&"source"===Te.dataType&&"content"===Te.sourceDataType&&(ve.reload(),ve.transform&&ve.update(ve.transform))}),this.on("error",function(){ve._sourceErrored=!0}),this._source=function(Te,Ee,Fe,Ze){var rt=new q[Ee.type](Te,Ee,Fe,Ze);if(rt.id!==Te)throw new Error("Expected Source id to be "+Te+" instead of "+rt.id);return e.bindAll(["load","abort","unload","serialize","prepare"],rt),rt}(H,$,fe,this),this._tiles={},this._cache=new G(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.onAdd=function(H){this.map=H,this._maxTileCacheSize=H?H._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(H)},B.prototype.onRemove=function(H){this._source&&this._source.onRemove&&this._source.onRemove(H)},B.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var H in this._tiles){var $=this._tiles[H];if("loaded"!==$.state&&"errored"!==$.state)return!1}return!0},B.prototype.getSource=function(){return this._source},B.prototype.pause=function(){this._paused=!0},B.prototype.resume=function(){if(this._paused){var H=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,H&&this.reload(),this.transform&&this.update(this.transform)}},B.prototype._loadTile=function(H,$){return this._source.loadTile(H,$)},B.prototype._unloadTile=function(H){if(this._source.unloadTile)return this._source.unloadTile(H,function(){})},B.prototype._abortTile=function(H){if(this._source.abortTile)return this._source.abortTile(H,function(){})},B.prototype.serialize=function(){return this._source.serialize()},B.prototype.prepare=function(H){for(var $ in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var fe=this._tiles[$];fe.upload(H),fe.prepare(this.map.style.imageManager)}},B.prototype.getIds=function(){return e.values(this._tiles).map(function(H){return H.tileID}).sort(Qe).map(function(H){return H.key})},B.prototype.getRenderableIds=function(H){var $=this,fe=[];for(var ve in this._tiles)this._isIdRenderable(ve,H)&&fe.push(this._tiles[ve]);return H?fe.sort(function(Te,Ee){var Fe=Te.tileID,Ze=Ee.tileID,rt=new e.Point(Fe.canonical.x,Fe.canonical.y)._rotate($.transform.angle),ft=new e.Point(Ze.canonical.x,Ze.canonical.y)._rotate($.transform.angle);return Fe.overscaledZ-Ze.overscaledZ||ft.y-rt.y||ft.x-rt.x}).map(function(Te){return Te.tileID.key}):fe.map(function(Te){return Te.tileID}).sort(Qe).map(function(Te){return Te.key})},B.prototype.hasRenderableParent=function(H){var $=this.findLoadedParent(H,0);return!!$&&this._isIdRenderable($.tileID.key)},B.prototype._isIdRenderable=function(H,$){return this._tiles[H]&&this._tiles[H].hasData()&&!this._coveredTiles[H]&&($||!this._tiles[H].holdingForFade())},B.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var H in this._cache.reset(),this._tiles)"errored"!==this._tiles[H].state&&this._reloadTile(H,"reloading")},B.prototype._reloadTile=function(H,$){var fe=this._tiles[H];fe&&("loading"!==fe.state&&(fe.state=$),this._loadTile(fe,this._tileLoaded.bind(this,fe,H,$)))},B.prototype._tileLoaded=function(H,$,fe,ve){if(ve)return H.state="errored",void(404!==ve.status?this._source.fire(new e.ErrorEvent(ve,{tile:H})):this.update(this.transform));H.timeAdded=e.browser.now(),"expired"===fe&&(H.refreshedUponExpiration=!0),this._setTileReloadTimer($,H),"raster-dem"===this.getSource().type&&H.dem&&this._backfillDEM(H),this._state.initializeTileState(H,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:H,coord:H.tileID}))},B.prototype._backfillDEM=function(H){for(var $=this.getRenderableIds(),fe=0;fe<$.length;fe++){var ve=$[fe];if(H.neighboringTiles&&H.neighboringTiles[ve]){var Te=this.getTileByID(ve);Ee(H,Te),Ee(Te,H)}}function Ee(Fe,Ze){Fe.needsHillshadePrepare=!0;var rt=Ze.tileID.canonical.x-Fe.tileID.canonical.x,ft=Ze.tileID.canonical.y-Fe.tileID.canonical.y,It=Math.pow(2,Fe.tileID.canonical.z),Rt=Ze.tileID.key;0===rt&&0===ft||Math.abs(ft)>1||(Math.abs(rt)>1&&(1===Math.abs(rt+It)?rt+=It:1===Math.abs(rt-It)&&(rt-=It)),Ze.dem&&Fe.dem&&(Fe.dem.backfillBorder(Ze.dem,rt,ft),Fe.neighboringTiles&&Fe.neighboringTiles[Rt]&&(Fe.neighboringTiles[Rt].backfilled=!0)))}},B.prototype.getTile=function(H){return this.getTileByID(H.key)},B.prototype.getTileByID=function(H){return this._tiles[H]},B.prototype._retainLoadedChildren=function(H,$,fe,ve){for(var Te in this._tiles){var Ee=this._tiles[Te];if(!(ve[Te]||!Ee.hasData()||Ee.tileID.overscaledZ<=$||Ee.tileID.overscaledZ>fe)){for(var Fe=Ee.tileID;Ee&&Ee.tileID.overscaledZ>$+1;){var Ze=Ee.tileID.scaledTo(Ee.tileID.overscaledZ-1);(Ee=this._tiles[Ze.key])&&Ee.hasData()&&(Fe=Ze)}for(var rt=Fe;rt.overscaledZ>$;)if(H[(rt=rt.scaledTo(rt.overscaledZ-1)).key]){ve[Fe.key]=Fe;break}}}},B.prototype.findLoadedParent=function(H,$){if(H.key in this._loadedParentTiles){var fe=this._loadedParentTiles[H.key];return fe&&fe.tileID.overscaledZ>=$?fe:null}for(var ve=H.overscaledZ-1;ve>=$;ve--){var Te=H.scaledTo(ve),Ee=this._getLoadedTile(Te);if(Ee)return Ee}},B.prototype._getLoadedTile=function(H){var $=this._tiles[H.key];return $&&$.hasData()?$:this._cache.getByKey(H.wrapped().key)},B.prototype.updateCacheSize=function(H){var $=(Math.ceil(H.width/this._source.tileSize)+1)*(Math.ceil(H.height/this._source.tileSize)+1),fe=Math.floor(5*$),ve="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,fe):fe;this._cache.setMaxSize(ve)},B.prototype.handleWrapJump=function(H){var fe=Math.round((H-(void 0===this._prevLng?H:this._prevLng))/360);if(this._prevLng=H,fe){var ve={};for(var Te in this._tiles){var Ee=this._tiles[Te];Ee.tileID=Ee.tileID.unwrapTo(Ee.tileID.wrap+fe),ve[Ee.tileID.key]=Ee}for(var Fe in this._tiles=ve,this._timers)clearTimeout(this._timers[Fe]),delete this._timers[Fe];for(var Ze in this._tiles)this._setTileReloadTimer(Ze,this._tiles[Ze])}},B.prototype.update=function(H){var $=this;if(this.transform=H,this._sourceLoaded&&!this._paused){var fe;this.updateCacheSize(H),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?fe=H.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Un){return new e.OverscaledTileID(Un.canonical.z,Un.wrap,Un.canonical.z,Un.canonical.x,Un.canonical.y)}):(fe=H.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(fe=fe.filter(function(Un){return $._source.hasTile(Un)}))):fe=[];var ve=H.coveringZoomLevel(this._source),Te=Math.max(ve-B.maxOverzooming,this._source.minzoom),Ee=Math.max(ve+B.maxUnderzooming,this._source.minzoom),Fe=this._updateRetainedTiles(fe,ve);if(ot(this._source.type)){for(var Ze={},rt={},ft=0,It=Object.keys(Fe);ft<It.length;ft+=1){var Rt=It[ft],Lt=Fe[Rt],Ot=this._tiles[Rt];if(Ot&&!(Ot.fadeEndTime&&Ot.fadeEndTime<=e.browser.now())){var St=this.findLoadedParent(Lt,Te);St&&(this._addTile(St.tileID),Ze[St.tileID.key]=St.tileID),rt[Rt]=Lt}}for(var Gt in this._retainLoadedChildren(rt,ve,Ee,Fe),Ze)Fe[Gt]||(this._coveredTiles[Gt]=!0,Fe[Gt]=Ze[Gt])}for(var qt in Fe)this._tiles[qt].clearFadeHold();for(var Zt=0,yn=e.keysDifference(this._tiles,Fe);Zt<yn.length;Zt+=1){var Sn=yn[Zt],qn=this._tiles[Sn];qn.hasSymbolBuckets&&!qn.holdingForFade()?qn.setHoldDuration(this.map._fadeDuration):qn.hasSymbolBuckets&&!qn.symbolFadeFinished()||this._removeTile(Sn)}this._updateLoadedParentTileCache()}},B.prototype.releaseSymbolFadeTiles=function(){for(var H in this._tiles)this._tiles[H].holdingForFade()&&this._removeTile(H)},B.prototype._updateRetainedTiles=function(H,$){for(var fe={},ve={},Te=Math.max($-B.maxOverzooming,this._source.minzoom),Ee=Math.max($+B.maxUnderzooming,this._source.minzoom),Fe={},Ze=0,rt=H;Ze<rt.length;Ze+=1){var ft=rt[Ze],It=this._addTile(ft);fe[ft.key]=ft,It.hasData()||$<this._source.maxzoom&&(Fe[ft.key]=ft)}this._retainLoadedChildren(Fe,$,Ee,fe);for(var Rt=0,Lt=H;Rt<Lt.length;Rt+=1){var Ot=Lt[Rt],St=this._tiles[Ot.key];if(!St.hasData()){if($+1>this._source.maxzoom){var Gt=Ot.children(this._source.maxzoom)[0],qt=this.getTile(Gt);if(qt&&qt.hasData()){fe[Gt.key]=Gt;continue}}else{var Zt=Ot.children(this._source.maxzoom);if(fe[Zt[0].key]&&fe[Zt[1].key]&&fe[Zt[2].key]&&fe[Zt[3].key])continue}for(var yn=St.wasRequested(),Sn=Ot.overscaledZ-1;Sn>=Te;--Sn){var qn=Ot.scaledTo(Sn);if(ve[qn.key]||(ve[qn.key]=!0,!(St=this.getTile(qn))&&yn&&(St=this._addTile(qn)),St&&(fe[qn.key]=qn,yn=St.wasRequested(),St.hasData())))break}}}return fe},B.prototype._updateLoadedParentTileCache=function(){for(var H in this._loadedParentTiles={},this._tiles){for(var $=[],fe=void 0,ve=this._tiles[H].tileID;ve.overscaledZ>0;){if(ve.key in this._loadedParentTiles){fe=this._loadedParentTiles[ve.key];break}$.push(ve.key);var Te=ve.scaledTo(ve.overscaledZ-1);if(fe=this._getLoadedTile(Te))break;ve=Te}for(var Ee=0,Fe=$;Ee<Fe.length;Ee+=1)this._loadedParentTiles[Fe[Ee]]=fe}},B.prototype._addTile=function(H){var $=this._tiles[H.key];if($)return $;($=this._cache.getAndRemove(H))&&(this._setTileReloadTimer(H.key,$),$.tileID=H,this._state.initializeTileState($,this.map?this.map.painter:null),this._cacheTimers[H.key]&&(clearTimeout(this._cacheTimers[H.key]),delete this._cacheTimers[H.key],this._setTileReloadTimer(H.key,$)));var fe=Boolean($);return fe||($=new e.Tile(H,this._source.tileSize*H.overscaleFactor()),this._loadTile($,this._tileLoaded.bind(this,$,H.key,$.state))),$?($.uses++,this._tiles[H.key]=$,fe||this._source.fire(new e.Event("dataloading",{tile:$,coord:$.tileID,dataType:"source"})),$):null},B.prototype._setTileReloadTimer=function(H,$){var fe=this;H in this._timers&&(clearTimeout(this._timers[H]),delete this._timers[H]);var ve=$.getExpiryTimeout();ve&&(this._timers[H]=setTimeout(function(){fe._reloadTile(H,"expired"),delete fe._timers[H]},ve))},B.prototype._removeTile=function(H){var $=this._tiles[H];$&&($.uses--,delete this._tiles[H],this._timers[H]&&(clearTimeout(this._timers[H]),delete this._timers[H]),$.uses>0||($.hasData()&&"reloading"!==$.state?this._cache.add($.tileID,$,$.getExpiryTimeout()):($.aborted=!0,this._abortTile($),this._unloadTile($))))},B.prototype.clearTiles=function(){for(var H in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(H);this._cache.reset()},B.prototype.tilesIn=function(H,$,fe){var ve=this,Te=[],Ee=this.transform;if(!Ee)return Te;for(var Fe=fe?Ee.getCameraQueryGeometry(H):H,Ze=H.map(function(Sn){return Ee.pointCoordinate(Sn)}),rt=Fe.map(function(Sn){return Ee.pointCoordinate(Sn)}),ft=this.getIds(),It=1/0,Rt=1/0,Lt=-1/0,Ot=-1/0,St=0,Gt=rt;St<Gt.length;St+=1){var qt=Gt[St];It=Math.min(It,qt.x),Rt=Math.min(Rt,qt.y),Lt=Math.max(Lt,qt.x),Ot=Math.max(Ot,qt.y)}for(var Zt=function(Sn){var qn=ve._tiles[ft[Sn]];if(!qn.holdingForFade()){var Un=qn.tileID,mr=Math.pow(2,Ee.zoom-qn.tileID.overscaledZ),gr=$*qn.queryPadding*e.EXTENT/qn.tileSize/mr,Pr=[Un.getTilePoint(new e.MercatorCoordinate(It,Rt)),Un.getTilePoint(new e.MercatorCoordinate(Lt,Ot))];if(Pr[0].x-gr<e.EXTENT&&Pr[0].y-gr<e.EXTENT&&Pr[1].x+gr>=0&&Pr[1].y+gr>=0){var Cr=Ze.map(function(wi){return Un.getTilePoint(wi)}),di=rt.map(function(wi){return Un.getTilePoint(wi)});Te.push({tile:qn,tileID:Un,queryGeometry:Cr,cameraQueryGeometry:di,scale:mr})}}},yn=0;yn<ft.length;yn++)Zt(yn);return Te},B.prototype.getVisibleCoordinates=function(H){for(var $=this,fe=this.getRenderableIds(H).map(function(Fe){return $._tiles[Fe].tileID}),ve=0,Te=fe;ve<Te.length;ve+=1){var Ee=Te[ve];Ee.posMatrix=this.transform.calculatePosMatrix(Ee.toUnwrapped())}return fe},B.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(ot(this._source.type))for(var H in this._tiles){var $=this._tiles[H];if(void 0!==$.fadeEndTime&&$.fadeEndTime>=e.browser.now())return!0}return!1},B.prototype.setFeatureState=function(H,$,fe){this._state.updateState(H=H||"_geojsonTileLayer",$,fe)},B.prototype.removeFeatureState=function(H,$,fe){this._state.removeFeatureState(H=H||"_geojsonTileLayer",$,fe)},B.prototype.getFeatureState=function(H,$){return this._state.getState(H=H||"_geojsonTileLayer",$)},B.prototype.setDependencies=function(H,$,fe){var ve=this._tiles[H];ve&&ve.setDependencies($,fe)},B.prototype.reloadTilesForDependencies=function(H,$){for(var fe in this._tiles)this._tiles[fe].hasDependency(H,$)&&this._reloadTile(fe,"reloading");this._cache.filter(function(ve){return!ve.hasDependency(H,$)})},B}(e.Evented);function Qe(O,B){var H=Math.abs(2*O.wrap)-+(O.wrap<0),$=Math.abs(2*B.wrap)-+(B.wrap<0);return O.overscaledZ-B.overscaledZ||$-H||B.canonical.y-O.canonical.y||B.canonical.x-O.canonical.x}function ot(O){return"raster"===O||"image"===O||"video"===O}function it(){return new e.window.Worker(ge.workerUrl)}Ge.maxOverzooming=10,Ge.maxUnderzooming=3;var mt="mapboxgl_preloaded_worker_pool",xt=function(){this.active={}};xt.prototype.acquire=function(O){if(!this.workers)for(this.workers=[];this.workers.length<xt.workerCount;)this.workers.push(new it);return this.active[O]=!0,this.workers.slice()},xt.prototype.release=function(O){delete this.active[O],0===this.numActive()&&(this.workers.forEach(function(B){B.terminate()}),this.workers=null)},xt.prototype.isPreloaded=function(){return!!this.active[mt]},xt.prototype.numActive=function(){return Object.keys(this.active).length};var Vt,$t=Math.floor(e.browser.hardwareConcurrency/2);function pt(){return Vt||(Vt=new xt),Vt}function At(O,B){var H={};for(var $ in O)"ref"!==$&&(H[$]=O[$]);return e.refProperties.forEach(function(fe){fe in B&&(H[fe]=B[fe])}),H}function Xt(O){O=O.slice();for(var B=Object.create(null),H=0;H<O.length;H++)B[O[H].id]=O[H];for(var $=0;$<O.length;$++)"ref"in O[$]&&(O[$]=At(O[$],B[O[$].ref]));return O}xt.workerCount=Math.max(Math.min($t,6),1);var Ct={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Pt(O,B,H){H.push({command:Ct.addSource,args:[O,B[O]]})}function Be(O,B,H){B.push({command:Ct.removeSource,args:[O]}),H[O]=!0}function tt(O,B,H,$){Be(O,H,$),Pt(O,B,H)}function dt(O,B,H){var $;for($ in O[H])if(O[H].hasOwnProperty($)&&"data"!==$&&!e.deepEqual(O[H][$],B[H][$]))return!1;for($ in B[H])if(B[H].hasOwnProperty($)&&"data"!==$&&!e.deepEqual(O[H][$],B[H][$]))return!1;return!0}function Dt(O,B,H,$,fe,ve){var Te;for(Te in B=B||{},O=O||{})O.hasOwnProperty(Te)&&(e.deepEqual(O[Te],B[Te])||H.push({command:ve,args:[$,Te,B[Te],fe]}));for(Te in B)B.hasOwnProperty(Te)&&!O.hasOwnProperty(Te)&&(e.deepEqual(O[Te],B[Te])||H.push({command:ve,args:[$,Te,B[Te],fe]}))}function Nt(O){return O.id}function Yt(O,B){return O[B.id]=B,O}var nn=function(O,B){this.reset(O,B)};nn.prototype.reset=function(O,B){this.points=O||[],this._distances=[0];for(var H=1;H<this.points.length;H++)this._distances[H]=this._distances[H-1]+this.points[H].dist(this.points[H-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(B||0,.5*this.length),this.paddedLength=this.length-2*this.padding},nn.prototype.lerp=function(O){if(1===this.points.length)return this.points[0];O=e.clamp(O,0,1);for(var B=1,H=this._distances[B],$=O*this.paddedLength+this.padding;H<$&&B<this._distances.length;)H=this._distances[++B];var fe=B-1,ve=this._distances[fe],Te=H-ve,Ee=Te>0?($-ve)/Te:0;return this.points[fe].mult(1-Ee).add(this.points[B].mult(Ee))};var In=function(O,B,H){var $=this.boxCells=[],fe=this.circleCells=[];this.xCellCount=Math.ceil(O/H),this.yCellCount=Math.ceil(B/H);for(var ve=0;ve<this.xCellCount*this.yCellCount;ve++)$.push([]),fe.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=O,this.height=B,this.xScale=this.xCellCount/O,this.yScale=this.yCellCount/B,this.boxUid=0,this.circleUid=0};function Dn(O,B,H,$,fe){var ve=e.create();return B?(e.scale(ve,ve,[1/fe,1/fe,1]),H||e.rotateZ(ve,ve,$.angle)):e.multiply(ve,$.labelPlaneMatrix,O),ve}function kn(O,B,H,$,fe){if(B){var ve=e.clone(O);return e.scale(ve,ve,[fe,fe,1]),H||e.rotateZ(ve,ve,-$.angle),ve}return $.glCoordMatrix}function rn(O,B){var H=[O.x,O.y,0,1];oi(H,H,B);var $=H[3];return{point:new e.Point(H[0]/$,H[1]/$),signedDistanceFromCamera:$}}function pn(O,B){return.5+O/B*.5}function gn(O,B){var H=O[0]/O[3],$=O[1]/O[3];return H>=-B[0]&&H<=B[0]&&$>=-B[1]&&$<=B[1]}function Pn(O,B,H,$,fe,ve,Te,Ee){var Fe=$?O.textSizeData:O.iconSizeData,Ze=e.evaluateSizeForZoom(Fe,H.transform.zoom),rt=[256/H.width*2+1,256/H.height*2+1],ft=$?O.text.dynamicLayoutVertexArray:O.icon.dynamicLayoutVertexArray;ft.clear();for(var It=O.lineVertexArray,Rt=$?O.text.placedSymbolArray:O.icon.placedSymbolArray,Lt=H.transform.width/H.transform.height,Ot=!1,St=0;St<Rt.length;St++){var Gt=Rt.get(St);if(Gt.hidden||Gt.writingMode===e.WritingMode.vertical&&!Ot)sr(Gt.numGlyphs,ft);else{Ot=!1;var qt=[Gt.anchorX,Gt.anchorY,0,1];if(e.transformMat4(qt,qt,B),gn(qt,rt)){var yn=pn(H.transform.cameraToCenterDistance,qt[3]),Sn=e.evaluateSizeForFeature(Fe,Ze,Gt),qn=Te?Sn/yn:Sn*yn,Un=new e.Point(Gt.anchorX,Gt.anchorY),mr=rn(Un,fe).point,gr={},Pr=rr(Gt,qn,!1,Ee,B,fe,ve,O.glyphOffsetArray,It,ft,mr,Un,gr,Lt);Ot=Pr.useVertical,(Pr.notEnoughRoom||Ot||Pr.needsFlipping&&rr(Gt,qn,!0,Ee,B,fe,ve,O.glyphOffsetArray,It,ft,mr,Un,gr,Lt).notEnoughRoom)&&sr(Gt.numGlyphs,ft)}else sr(Gt.numGlyphs,ft)}}$?O.text.dynamicLayoutVertexBuffer.updateData(ft):O.icon.dynamicLayoutVertexBuffer.updateData(ft)}function jn(O,B,H,$,fe,ve,Te,Ee,Fe,Ze,rt){var ft=Ee.glyphStartIndex+Ee.numGlyphs,It=Ee.lineStartIndex,Rt=Ee.lineStartIndex+Ee.lineLength,Lt=B.getoffsetX(Ee.glyphStartIndex),Ot=B.getoffsetX(ft-1),St=kr(O*Lt,H,$,fe,ve,Te,Ee.segment,It,Rt,Fe,Ze,rt);if(!St)return null;var Gt=kr(O*Ot,H,$,fe,ve,Te,Ee.segment,It,Rt,Fe,Ze,rt);return Gt?{first:St,last:Gt}:null}function Kn(O,B,H,$){return O===e.WritingMode.horizontal&&Math.abs(H.y-B.y)>Math.abs(H.x-B.x)*$?{useVertical:!0}:(O===e.WritingMode.vertical?B.y<H.y:B.x>H.x)?{needsFlipping:!0}:null}function rr(O,B,H,$,fe,ve,Te,Ee,Fe,Ze,rt,ft,It,Rt){var Lt,Ot=B/24,St=O.lineOffsetX*Ot,Gt=O.lineOffsetY*Ot;if(O.numGlyphs>1){var qt=O.glyphStartIndex+O.numGlyphs,Zt=O.lineStartIndex,yn=O.lineStartIndex+O.lineLength,Sn=jn(Ot,Ee,St,Gt,H,rt,ft,O,Fe,ve,It);if(!Sn)return{notEnoughRoom:!0};var qn=rn(Sn.first.point,Te).point,Un=rn(Sn.last.point,Te).point;if($&&!H){var mr=Kn(O.writingMode,qn,Un,Rt);if(mr)return mr}Lt=[Sn.first];for(var gr=O.glyphStartIndex+1;gr<qt-1;gr++)Lt.push(kr(Ot*Ee.getoffsetX(gr),St,Gt,H,rt,ft,O.segment,Zt,yn,Fe,ve,It));Lt.push(Sn.last)}else{if($&&!H){var Pr=rn(ft,fe).point,Cr=O.lineStartIndex+O.segment+1,di=new e.Point(Fe.getx(Cr),Fe.gety(Cr)),wi=rn(di,fe),Bi=wi.signedDistanceFromCamera>0?wi.point:lr(ft,di,Pr,1,fe),ur=Kn(O.writingMode,Pr,Bi,Rt);if(ur)return ur}var $r=kr(Ot*Ee.getoffsetX(O.glyphStartIndex),St,Gt,H,rt,ft,O.segment,O.lineStartIndex,O.lineStartIndex+O.lineLength,Fe,ve,It);if(!$r)return{notEnoughRoom:!0};Lt=[$r]}for(var Ti=0,bi=Lt;Ti<bi.length;Ti+=1){var Si=bi[Ti];e.addDynamicAttributes(Ze,Si.point,Si.angle)}return{}}function lr(O,B,H,$,fe){var ve=rn(O.add(O.sub(B)._unit()),fe).point,Te=H.sub(ve);return H.add(Te._mult($/Te.mag()))}function kr(O,B,H,$,fe,ve,Te,Ee,Fe,Ze,rt,ft){var It=$?O-B:O+B,Rt=It>0?1:-1,Lt=0;$&&(Rt*=-1,Lt=Math.PI),Rt<0&&(Lt+=Math.PI);for(var Ot=Rt>0?Ee+Te:Ee+Te+1,St=fe,Gt=fe,qt=0,Zt=0,yn=Math.abs(It),Sn=[];qt+Zt<=yn;){if((Ot+=Rt)<Ee||Ot>=Fe)return null;if(Gt=St,Sn.push(St),void 0===(St=ft[Ot])){var qn=new e.Point(Ze.getx(Ot),Ze.gety(Ot)),Un=rn(qn,rt);if(Un.signedDistanceFromCamera>0)St=ft[Ot]=Un.point;else{var mr=Ot-Rt;St=lr(0===qt?ve:new e.Point(Ze.getx(mr),Ze.gety(mr)),qn,Gt,yn-qt+1,rt)}}qt+=Zt,Zt=Gt.dist(St)}var gr=(yn-qt)/Zt,Pr=St.sub(Gt),Cr=Pr.mult(gr)._add(Gt);Cr._add(Pr._unit()._perp()._mult(H*Rt));var di=Lt+Math.atan2(St.y-Gt.y,St.x-Gt.x);return Sn.push(Cr),{point:Cr,angle:di,path:Sn}}In.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},In.prototype.insert=function(O,B,H,$,fe){this._forEachCell(B,H,$,fe,this._insertBoxCell,this.boxUid++),this.boxKeys.push(O),this.bboxes.push(B),this.bboxes.push(H),this.bboxes.push($),this.bboxes.push(fe)},In.prototype.insertCircle=function(O,B,H,$){this._forEachCell(B-$,H-$,B+$,H+$,this._insertCircleCell,this.circleUid++),this.circleKeys.push(O),this.circles.push(B),this.circles.push(H),this.circles.push($)},In.prototype._insertBoxCell=function(O,B,H,$,fe,ve){this.boxCells[fe].push(ve)},In.prototype._insertCircleCell=function(O,B,H,$,fe,ve){this.circleCells[fe].push(ve)},In.prototype._query=function(O,B,H,$,fe,ve){if(H<0||O>this.width||$<0||B>this.height)return!fe&&[];var Te=[];if(O<=0&&B<=0&&this.width<=H&&this.height<=$){if(fe)return!0;for(var Ee=0;Ee<this.boxKeys.length;Ee++)Te.push({key:this.boxKeys[Ee],x1:this.bboxes[4*Ee],y1:this.bboxes[4*Ee+1],x2:this.bboxes[4*Ee+2],y2:this.bboxes[4*Ee+3]});for(var Fe=0;Fe<this.circleKeys.length;Fe++){var Ze=this.circles[3*Fe],rt=this.circles[3*Fe+1],ft=this.circles[3*Fe+2];Te.push({key:this.circleKeys[Fe],x1:Ze-ft,y1:rt-ft,x2:Ze+ft,y2:rt+ft})}return ve?Te.filter(ve):Te}return this._forEachCell(O,B,H,$,this._queryCell,Te,{hitTest:fe,seenUids:{box:{},circle:{}}},ve),fe?Te.length>0:Te},In.prototype._queryCircle=function(O,B,H,$,fe){var ve=O-H,Te=O+H,Ee=B-H,Fe=B+H;if(Te<0||ve>this.width||Fe<0||Ee>this.height)return!$&&[];var Ze=[];return this._forEachCell(ve,Ee,Te,Fe,this._queryCellCircle,Ze,{hitTest:$,circle:{x:O,y:B,radius:H},seenUids:{box:{},circle:{}}},fe),$?Ze.length>0:Ze},In.prototype.query=function(O,B,H,$,fe){return this._query(O,B,H,$,!1,fe)},In.prototype.hitTest=function(O,B,H,$,fe){return this._query(O,B,H,$,!0,fe)},In.prototype.hitTestCircle=function(O,B,H,$){return this._queryCircle(O,B,H,!0,$)},In.prototype._queryCell=function(O,B,H,$,fe,ve,Te,Ee){var Fe=Te.seenUids,Ze=this.boxCells[fe];if(null!==Ze)for(var rt=this.bboxes,ft=0,It=Ze;ft<It.length;ft+=1){var Rt=It[ft];if(!Fe.box[Rt]){Fe.box[Rt]=!0;var Lt=4*Rt;if(O<=rt[Lt+2]&&B<=rt[Lt+3]&&H>=rt[Lt+0]&&$>=rt[Lt+1]&&(!Ee||Ee(this.boxKeys[Rt]))){if(Te.hitTest)return ve.push(!0),!0;ve.push({key:this.boxKeys[Rt],x1:rt[Lt],y1:rt[Lt+1],x2:rt[Lt+2],y2:rt[Lt+3]})}}}var Ot=this.circleCells[fe];if(null!==Ot)for(var St=this.circles,Gt=0,qt=Ot;Gt<qt.length;Gt+=1){var Zt=qt[Gt];if(!Fe.circle[Zt]){Fe.circle[Zt]=!0;var yn=3*Zt;if(this._circleAndRectCollide(St[yn],St[yn+1],St[yn+2],O,B,H,$)&&(!Ee||Ee(this.circleKeys[Zt]))){if(Te.hitTest)return ve.push(!0),!0;var Sn=St[yn],qn=St[yn+1],Un=St[yn+2];ve.push({key:this.circleKeys[Zt],x1:Sn-Un,y1:qn-Un,x2:Sn+Un,y2:qn+Un})}}}},In.prototype._queryCellCircle=function(O,B,H,$,fe,ve,Te,Ee){var Fe=Te.circle,Ze=Te.seenUids,rt=this.boxCells[fe];if(null!==rt)for(var ft=this.bboxes,It=0,Rt=rt;It<Rt.length;It+=1){var Lt=Rt[It];if(!Ze.box[Lt]){Ze.box[Lt]=!0;var Ot=4*Lt;if(this._circleAndRectCollide(Fe.x,Fe.y,Fe.radius,ft[Ot+0],ft[Ot+1],ft[Ot+2],ft[Ot+3])&&(!Ee||Ee(this.boxKeys[Lt])))return ve.push(!0),!0}}var St=this.circleCells[fe];if(null!==St)for(var Gt=this.circles,qt=0,Zt=St;qt<Zt.length;qt+=1){var yn=Zt[qt];if(!Ze.circle[yn]){Ze.circle[yn]=!0;var Sn=3*yn;if(this._circlesCollide(Gt[Sn],Gt[Sn+1],Gt[Sn+2],Fe.x,Fe.y,Fe.radius)&&(!Ee||Ee(this.circleKeys[yn])))return ve.push(!0),!0}}},In.prototype._forEachCell=function(O,B,H,$,fe,ve,Te,Ee){for(var Fe=this._convertToXCellCoord(O),Ze=this._convertToYCellCoord(B),rt=this._convertToXCellCoord(H),ft=this._convertToYCellCoord($),It=Fe;It<=rt;It++)for(var Rt=Ze;Rt<=ft;Rt++)if(fe.call(this,O,B,H,$,this.xCellCount*Rt+It,ve,Te,Ee))return},In.prototype._convertToXCellCoord=function(O){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(O*this.xScale)))},In.prototype._convertToYCellCoord=function(O){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(O*this.yScale)))},In.prototype._circlesCollide=function(O,B,H,$,fe,ve){var Te=$-O,Ee=fe-B,Fe=H+ve;return Fe*Fe>Te*Te+Ee*Ee},In.prototype._circleAndRectCollide=function(O,B,H,$,fe,ve,Te){var Ee=(ve-$)/2,Fe=Math.abs(O-($+Ee));if(Fe>Ee+H)return!1;var Ze=(Te-fe)/2,rt=Math.abs(B-(fe+Ze));if(rt>Ze+H)return!1;if(Fe<=Ee||rt<=Ze)return!0;var ft=Fe-Ee,It=rt-Ze;return ft*ft+It*It<=H*H};var Xr=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function sr(O,B){for(var H=0;H<O;H++){var $=B.length;B.resize($+4),B.float32.set(Xr,3*$)}}function oi(O,B,H){var $=B[0],fe=B[1];return O[0]=H[0]*$+H[4]*fe+H[12],O[1]=H[1]*$+H[5]*fe+H[13],O[3]=H[3]*$+H[7]*fe+H[15],O}var Gr=function(O,B,H){void 0===B&&(B=new In(O.width+200,O.height+200,25)),void 0===H&&(H=new In(O.width+200,O.height+200,25)),this.transform=O,this.grid=B,this.ignoredGrid=H,this.pitchfactor=Math.cos(O._pitch)*O.cameraToCenterDistance,this.screenRightBoundary=O.width+100,this.screenBottomBoundary=O.height+100,this.gridRightBoundary=O.width+200,this.gridBottomBoundary=O.height+200};function Lr(O,B,H){return B*(e.EXTENT/(O.tileSize*Math.pow(2,H-O.tileID.overscaledZ)))}Gr.prototype.placeCollisionBox=function(O,B,H,$,fe){var ve=this.projectAndGetPerspectiveRatio($,O.anchorPointX,O.anchorPointY),Te=H*ve.perspectiveRatio,Ee=O.x1*Te+ve.point.x,Fe=O.y1*Te+ve.point.y,Ze=O.x2*Te+ve.point.x,rt=O.y2*Te+ve.point.y;return!this.isInsideGrid(Ee,Fe,Ze,rt)||!B&&this.grid.hitTest(Ee,Fe,Ze,rt,fe)?{box:[],offscreen:!1}:{box:[Ee,Fe,Ze,rt],offscreen:this.isOffscreen(Ee,Fe,Ze,rt)}},Gr.prototype.placeCollisionCircles=function(O,B,H,$,fe,ve,Te,Ee,Fe,Ze,rt,ft,It){var Rt=[],Lt=new e.Point(B.anchorX,B.anchorY),Ot=rn(Lt,ve),St=pn(this.transform.cameraToCenterDistance,Ot.signedDistanceFromCamera),Gt=(Ze?fe/St:fe*St)/e.ONE_EM,qt=rn(Lt,Te).point,Zt=jn(Gt,$,B.lineOffsetX*Gt,B.lineOffsetY*Gt,!1,qt,Lt,B,H,Te,{}),yn=!1,Sn=!1,qn=!0;if(Zt){for(var Un=.5*ft*St+It,mr=new e.Point(-100,-100),gr=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Pr=new nn,Cr=Zt.first,di=Zt.last,wi=[],Bi=Cr.path.length-1;Bi>=1;Bi--)wi.push(Cr.path[Bi]);for(var ur=1;ur<di.path.length;ur++)wi.push(di.path[ur]);var $r=2.5*Un;if(Ee){var Ti=wi.map(function(Fs){return rn(Fs,Ee)});wi=Ti.some(function(Fs){return Fs.signedDistanceFromCamera<=0})?[]:Ti.map(function(Fs){return Fs.point})}var bi=[];if(wi.length>0){for(var Si=wi[0].clone(),ji=wi[0].clone(),ca=1;ca<wi.length;ca++)Si.x=Math.min(Si.x,wi[ca].x),Si.y=Math.min(Si.y,wi[ca].y),ji.x=Math.max(ji.x,wi[ca].x),ji.y=Math.max(ji.y,wi[ca].y);bi=Si.x>=mr.x&&ji.x<=gr.x&&Si.y>=mr.y&&ji.y<=gr.y?[wi]:ji.x<mr.x||Si.x>gr.x||ji.y<mr.y||Si.y>gr.y?[]:e.clipLine([wi],mr.x,mr.y,gr.x,gr.y)}for(var Ei=0,ta=bi;Ei<ta.length;Ei+=1){Pr.reset(ta[Ei],.25*Un);var ra;ra=Pr.length<=.5*Un?1:Math.ceil(Pr.paddedLength/$r)+1;for(var Qi=0;Qi<ra;Qi++){var fa=Qi/Math.max(ra-1,1),Ma=Pr.lerp(fa),no=Ma.x+100,xo=Ma.y+100;Rt.push(no,xo,Un,0);var _o=no-Un,lo=xo-Un,uo=no+Un,Do=xo+Un;if(qn=qn&&this.isOffscreen(_o,lo,uo,Do),Sn=Sn||this.isInsideGrid(_o,lo,uo,Do),!O&&this.grid.hitTestCircle(no,xo,Un,rt)&&(yn=!0,!Fe))return{circles:[],offscreen:!1,collisionDetected:yn}}}}return{circles:!Fe&&yn||!Sn?[]:Rt,offscreen:qn,collisionDetected:yn}},Gr.prototype.queryRenderedSymbols=function(O){if(0===O.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var B=[],H=1/0,$=1/0,fe=-1/0,ve=-1/0,Te=0,Ee=O;Te<Ee.length;Te+=1){var Fe=Ee[Te],Ze=new e.Point(Fe.x+100,Fe.y+100);H=Math.min(H,Ze.x),$=Math.min($,Ze.y),fe=Math.max(fe,Ze.x),ve=Math.max(ve,Ze.y),B.push(Ze)}for(var rt={},ft={},It=0,Rt=this.grid.query(H,$,fe,ve).concat(this.ignoredGrid.query(H,$,fe,ve));It<Rt.length;It+=1){var Lt=Rt[It],Ot=Lt.key;if(void 0===rt[Ot.bucketInstanceId]&&(rt[Ot.bucketInstanceId]={}),!rt[Ot.bucketInstanceId][Ot.featureIndex]){var St=[new e.Point(Lt.x1,Lt.y1),new e.Point(Lt.x2,Lt.y1),new e.Point(Lt.x2,Lt.y2),new e.Point(Lt.x1,Lt.y2)];e.polygonIntersectsPolygon(B,St)&&(rt[Ot.bucketInstanceId][Ot.featureIndex]=!0,void 0===ft[Ot.bucketInstanceId]&&(ft[Ot.bucketInstanceId]=[]),ft[Ot.bucketInstanceId].push(Ot.featureIndex))}}return ft},Gr.prototype.insertCollisionBox=function(O,B,H,$,fe){(B?this.ignoredGrid:this.grid).insert({bucketInstanceId:H,featureIndex:$,collisionGroupID:fe},O[0],O[1],O[2],O[3])},Gr.prototype.insertCollisionCircles=function(O,B,H,$,fe){for(var ve=B?this.ignoredGrid:this.grid,Te={bucketInstanceId:H,featureIndex:$,collisionGroupID:fe},Ee=0;Ee<O.length;Ee+=4)ve.insertCircle(Te,O[Ee],O[Ee+1],O[Ee+2])},Gr.prototype.projectAndGetPerspectiveRatio=function(O,B,H){var $=[B,H,0,1];return oi($,$,O),{point:new e.Point(($[0]/$[3]+1)/2*this.transform.width+100,(-$[1]/$[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/$[3]*.5}},Gr.prototype.isOffscreen=function(O,B,H,$){return H<100||O>=this.screenRightBoundary||$<100||B>this.screenBottomBoundary},Gr.prototype.isInsideGrid=function(O,B,H,$){return H>=0&&O<this.gridRightBoundary&&$>=0&&B<this.gridBottomBoundary},Gr.prototype.getViewportMatrix=function(){var O=e.identity([]);return e.translate(O,O,[-100,-100,0]),O};var Jr=function(O,B,H,$){this.opacity=O?Math.max(0,Math.min(1,O.opacity+(O.placed?B:-B))):$&&H?1:0,this.placed=H};Jr.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var Mi=function(O,B,H,$,fe){this.text=new Jr(O?O.text:null,B,H,fe),this.icon=new Jr(O?O.icon:null,B,$,fe)};Mi.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var Jn=function(O,B,H){this.text=O,this.icon=B,this.skipFade=H},br=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},Fr=function(O,B,H,$,fe){this.bucketInstanceId=O,this.featureIndex=B,this.sourceLayerIndex=H,this.bucketIndex=$,this.tileID=fe},cr=function(O){this.crossSourceCollisions=O,this.maxGroupID=0,this.collisionGroups={}};function Qr(O,B,H,$,fe){var ve=e.getAnchorAlignment(O),Te=-(ve.horizontalAlign-.5)*B,Ee=-(ve.verticalAlign-.5)*H,Fe=e.evaluateVariableOffset(O,$);return new e.Point(Te+Fe[0]*fe,Ee+Fe[1]*fe)}function ui(O,B,H,$,fe,ve){var Te=O.x1,Ee=O.x2,Fe=O.y1,Ze=O.y2,rt=O.anchorPointX,ft=O.anchorPointY,It=new e.Point(B,H);return $&&It._rotate(fe?ve:-ve),{x1:Te+It.x,y1:Fe+It.y,x2:Ee+It.x,y2:Ze+It.y,anchorPointX:rt,anchorPointY:ft}}cr.prototype.get=function(O){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[O]){var B=++this.maxGroupID;this.collisionGroups[O]={ID:B,predicate:function(H){return H.collisionGroupID===B}}}return this.collisionGroups[O]};var Nr=function(O,B,H,$){this.transform=O.clone(),this.collisionIndex=new Gr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=B,this.retainedQueryData={},this.collisionGroups=new cr(H),this.collisionCircleArrays={},this.prevPlacement=$,$&&($.prevPlacement=void 0),this.placedOrientations={}};function Hr(O,B,H,$,fe){O.emplaceBack(B?1:0,H?1:0,$||0,fe||0),O.emplaceBack(B?1:0,H?1:0,$||0,fe||0),O.emplaceBack(B?1:0,H?1:0,$||0,fe||0),O.emplaceBack(B?1:0,H?1:0,$||0,fe||0)}Nr.prototype.getBucketParts=function(O,B,H,$){var fe=H.getBucket(B),ve=H.latestFeatureIndex;if(fe&&ve&&B.id===fe.layerIds[0]){var Te=H.collisionBoxArray,Ee=fe.layers[0].layout,Fe=Math.pow(2,this.transform.zoom-H.tileID.overscaledZ),Ze=H.tileSize/e.EXTENT,rt=this.transform.calculatePosMatrix(H.tileID.toUnwrapped()),ft="map"===Ee.get("text-pitch-alignment"),It="map"===Ee.get("text-rotation-alignment"),Rt=Lr(H,1,this.transform.zoom),Lt=Dn(rt,ft,It,this.transform,Rt),Ot=null;if(ft){var St=kn(rt,ft,It,this.transform,Rt);Ot=e.multiply([],this.transform.labelPlaneMatrix,St)}this.retainedQueryData[fe.bucketInstanceId]=new Fr(fe.bucketInstanceId,ve,fe.sourceLayerIndex,fe.index,H.tileID);var Gt={bucket:fe,layout:Ee,posMatrix:rt,textLabelPlaneMatrix:Lt,labelToScreenMatrix:Ot,scale:Fe,textPixelRatio:Ze,holdingForFade:H.holdingForFade(),collisionBoxArray:Te,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(fe.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(fe.sourceID)};if($)for(var qt=0,Zt=fe.sortKeyRanges;qt<Zt.length;qt+=1){var yn=Zt[qt];O.push({sortKey:yn.sortKey,symbolInstanceStart:yn.symbolInstanceStart,symbolInstanceEnd:yn.symbolInstanceEnd,parameters:Gt})}else O.push({symbolInstanceStart:0,symbolInstanceEnd:fe.symbolInstances.length,parameters:Gt})}},Nr.prototype.attemptAnchorPlacement=function(O,B,H,$,fe,ve,Te,Ee,Fe,Ze,rt,ft,It,Rt,Lt){var Ot,St=[ft.textOffset0,ft.textOffset1],Gt=Qr(O,H,$,St,fe),qt=this.collisionIndex.placeCollisionBox(ui(B,Gt.x,Gt.y,ve,Te,this.transform.angle),rt,Ee,Fe,Ze.predicate);if((!Lt||0!==this.collisionIndex.placeCollisionBox(ui(Lt,Gt.x,Gt.y,ve,Te,this.transform.angle),rt,Ee,Fe,Ze.predicate).box.length)&&qt.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[ft.crossTileID]&&this.prevPlacement.placements[ft.crossTileID]&&this.prevPlacement.placements[ft.crossTileID].text&&(Ot=this.prevPlacement.variableOffsets[ft.crossTileID].anchor),this.variableOffsets[ft.crossTileID]={textOffset:St,width:H,height:$,anchor:O,textBoxScale:fe,prevAnchor:Ot},this.markUsedJustification(It,O,ft,Rt),It.allowVerticalPlacement&&(this.markUsedOrientation(It,Rt,ft),this.placedOrientations[ft.crossTileID]=Rt),{shift:Gt,placedGlyphBoxes:qt}},Nr.prototype.placeLayerBucketPart=function(O,B,H){var $=this,fe=O.parameters,ve=fe.bucket,Te=fe.layout,Ee=fe.posMatrix,Fe=fe.textLabelPlaneMatrix,Ze=fe.labelToScreenMatrix,rt=fe.textPixelRatio,ft=fe.holdingForFade,It=fe.collisionBoxArray,Rt=fe.partiallyEvaluatedTextSize,Lt=fe.collisionGroup,Ot=Te.get("text-optional"),St=Te.get("icon-optional"),Gt=Te.get("text-allow-overlap"),qt=Te.get("icon-allow-overlap"),Zt="map"===Te.get("text-rotation-alignment"),yn="map"===Te.get("text-pitch-alignment"),Sn="none"!==Te.get("icon-text-fit"),qn="viewport-y"===Te.get("symbol-z-order"),Un=Gt&&(qt||!ve.hasIconData()||St),mr=qt&&(Gt||!ve.hasTextData()||Ot);!ve.collisionArrays&&It&&ve.deserializeCollisionBoxes(It);var gr=function(ur,$r){if(!B[ur.crossTileID])if(ft)$.placements[ur.crossTileID]=new Jn(!1,!1,!1);else{var Ti,bi=!1,Si=!1,ji=!0,ca=null,Ei={box:null,offscreen:null},ta={box:null,offscreen:null},Zi=null,ra=null,Qi=0,fa=0,Ma=0;$r.textFeatureIndex?Qi=$r.textFeatureIndex:ur.useRuntimeCollisionCircles&&(Qi=ur.featureIndex),$r.verticalTextFeatureIndex&&(fa=$r.verticalTextFeatureIndex);var no=$r.textBox;if(no){var xo=function(Uo){var $s=e.WritingMode.horizontal;if(ve.allowVerticalPlacement&&!Uo&&$.prevPlacement){var Xs=$.prevPlacement.placedOrientations[ur.crossTileID];Xs&&($.placedOrientations[ur.crossTileID]=Xs,$.markUsedOrientation(ve,$s=Xs,ur))}return $s},_o=function(Uo,$s){if(ve.allowVerticalPlacement&&ur.numVerticalGlyphVertices>0&&$r.verticalTextBox)for(var Xs=0,Ou=ve.writingModes;Xs<Ou.length&&(Ou[Xs]===e.WritingMode.vertical?(Ei=$s(),ta=Ei):Ei=Uo(),!(Ei&&Ei.box&&Ei.box.length));Xs+=1);else Ei=Uo()};if(Te.get("text-variable-anchor")){var lo=Te.get("text-variable-anchor");if($.prevPlacement&&$.prevPlacement.variableOffsets[ur.crossTileID]){var uo=$.prevPlacement.variableOffsets[ur.crossTileID];lo.indexOf(uo.anchor)>0&&(lo=lo.filter(function(Uo){return Uo!==uo.anchor})).unshift(uo.anchor)}var Do=function(Uo,$s,Xs){for(var Ou=Uo.x2-Uo.x1,Dg=Uo.y2-Uo.y1,mo=ur.textBoxScale,Tc=Sn&&!qt?$s:null,Ru={box:[],offscreen:!1},Ig=Gt?2*lo.length:lo.length,Fu=0;Fu<Ig;++Fu){var yu=$.attemptAnchorPlacement(lo[Fu%lo.length],Uo,Ou,Dg,mo,Zt,yn,rt,Ee,Lt,Fu>=lo.length,ur,ve,Xs,Tc);if(yu&&(Ru=yu.placedGlyphBoxes)&&Ru.box&&Ru.box.length){bi=!0,ca=yu.shift;break}}return Ru};_o(function(){return Do(no,$r.iconBox,e.WritingMode.horizontal)},function(){var Uo=$r.verticalTextBox;return ve.allowVerticalPlacement&&!(Ei&&Ei.box&&Ei.box.length)&&ur.numVerticalGlyphVertices>0&&Uo?Do(Uo,$r.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}}),Ei&&(bi=Ei.box,ji=Ei.offscreen);var Fs=xo(Ei&&Ei.box);if(!bi&&$.prevPlacement){var cs=$.prevPlacement.variableOffsets[ur.crossTileID];cs&&($.variableOffsets[ur.crossTileID]=cs,$.markUsedJustification(ve,cs.anchor,ur,Fs))}}else{var il=function(Uo,$s){var Xs=$.collisionIndex.placeCollisionBox(Uo,Gt,rt,Ee,Lt.predicate);return Xs&&Xs.box&&Xs.box.length&&($.markUsedOrientation(ve,$s,ur),$.placedOrientations[ur.crossTileID]=$s),Xs};_o(function(){return il(no,e.WritingMode.horizontal)},function(){var Uo=$r.verticalTextBox;return ve.allowVerticalPlacement&&ur.numVerticalGlyphVertices>0&&Uo?il(Uo,e.WritingMode.vertical):{box:null,offscreen:null}}),xo(Ei&&Ei.box&&Ei.box.length)}}if(bi=(Ti=Ei)&&Ti.box&&Ti.box.length>0,ji=Ti&&Ti.offscreen,ur.useRuntimeCollisionCircles){var iu=ve.text.placedSymbolArray.get(ur.centerJustifiedTextSymbolIndex),ma=e.evaluateSizeForFeature(ve.textSizeData,Rt,iu),Gc=Te.get("text-padding");Zi=$.collisionIndex.placeCollisionCircles(Gt,iu,ve.lineVertexArray,ve.glyphOffsetArray,ma,Ee,Fe,Ze,H,yn,Lt.predicate,ur.collisionCircleDiameter,Gc),bi=Gt||Zi.circles.length>0&&!Zi.collisionDetected,ji=ji&&Zi.offscreen}if($r.iconFeatureIndex&&(Ma=$r.iconFeatureIndex),$r.iconBox){var Wc=function(Uo){var $s=Sn&&ca?ui(Uo,ca.x,ca.y,Zt,yn,$.transform.angle):Uo;return $.collisionIndex.placeCollisionBox($s,qt,rt,Ee,Lt.predicate)};Si=ta&&ta.box&&ta.box.length&&$r.verticalIconBox?(ra=Wc($r.verticalIconBox)).box.length>0:(ra=Wc($r.iconBox)).box.length>0,ji=ji&&ra.offscreen}var Ns=Ot||0===ur.numHorizontalGlyphVertices&&0===ur.numVerticalGlyphVertices,wc=St||0===ur.numIconVertices;if(Ns||wc?wc?Ns||(Si=Si&&bi):bi=Si&&bi:Si=bi=Si&&bi,bi&&Ti&&Ti.box&&$.collisionIndex.insertCollisionBox(Ti.box,Te.get("text-ignore-placement"),ve.bucketInstanceId,ta&&ta.box&&fa?fa:Qi,Lt.ID),Si&&ra&&$.collisionIndex.insertCollisionBox(ra.box,Te.get("icon-ignore-placement"),ve.bucketInstanceId,Ma,Lt.ID),Zi&&(bi&&$.collisionIndex.insertCollisionCircles(Zi.circles,Te.get("text-ignore-placement"),ve.bucketInstanceId,Qi,Lt.ID),H)){var bf=ve.bucketInstanceId,Rl=$.collisionCircleArrays[bf];void 0===Rl&&(Rl=$.collisionCircleArrays[bf]=new br);for(var _f=0;_f<Zi.circles.length;_f+=4)Rl.circles.push(Zi.circles[_f+0]),Rl.circles.push(Zi.circles[_f+1]),Rl.circles.push(Zi.circles[_f+2]),Rl.circles.push(Zi.collisionDetected?1:0)}$.placements[ur.crossTileID]=new Jn(bi||Un,Si||mr,ji||ve.justReloaded),B[ur.crossTileID]=!0}};if(qn)for(var Pr=ve.getSortedSymbolIndexes(this.transform.angle),Cr=Pr.length-1;Cr>=0;--Cr){var di=Pr[Cr];gr(ve.symbolInstances.get(di),ve.collisionArrays[di])}else for(var wi=O.symbolInstanceStart;wi<O.symbolInstanceEnd;wi++)gr(ve.symbolInstances.get(wi),ve.collisionArrays[wi]);if(H&&ve.bucketInstanceId in this.collisionCircleArrays){var Bi=this.collisionCircleArrays[ve.bucketInstanceId];e.invert(Bi.invProjMatrix,Ee),Bi.viewportMatrix=this.collisionIndex.getViewportMatrix()}ve.justReloaded=!1},Nr.prototype.markUsedJustification=function(O,B,H,$){var fe;fe=$===e.WritingMode.vertical?H.verticalPlacedTextSymbolIndex:{left:H.leftJustifiedTextSymbolIndex,center:H.centerJustifiedTextSymbolIndex,right:H.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(B)];for(var Te=0,Ee=[H.leftJustifiedTextSymbolIndex,H.centerJustifiedTextSymbolIndex,H.rightJustifiedTextSymbolIndex,H.verticalPlacedTextSymbolIndex];Te<Ee.length;Te+=1){var Fe=Ee[Te];Fe>=0&&(O.text.placedSymbolArray.get(Fe).crossTileID=fe>=0&&Fe!==fe?0:H.crossTileID)}},Nr.prototype.markUsedOrientation=function(O,B,H){for(var $=B===e.WritingMode.horizontal||B===e.WritingMode.horizontalOnly?B:0,fe=B===e.WritingMode.vertical?B:0,ve=0,Te=[H.leftJustifiedTextSymbolIndex,H.centerJustifiedTextSymbolIndex,H.rightJustifiedTextSymbolIndex];ve<Te.length;ve+=1)O.text.placedSymbolArray.get(Te[ve]).placedOrientation=$;H.verticalPlacedTextSymbolIndex&&(O.text.placedSymbolArray.get(H.verticalPlacedTextSymbolIndex).placedOrientation=fe)},Nr.prototype.commit=function(O){this.commitTime=O,this.zoomAtLastRecencyCheck=this.transform.zoom;var B=this.prevPlacement,H=!1;this.prevZoomAdjustment=B?B.zoomAdjustment(this.transform.zoom):0;var $=B?B.symbolFadeChange(O):1,fe=B?B.opacities:{},ve=B?B.variableOffsets:{},Te=B?B.placedOrientations:{};for(var Ee in this.placements){var Fe=this.placements[Ee],Ze=fe[Ee];Ze?(this.opacities[Ee]=new Mi(Ze,$,Fe.text,Fe.icon),H=H||Fe.text!==Ze.text.placed||Fe.icon!==Ze.icon.placed):(this.opacities[Ee]=new Mi(null,$,Fe.text,Fe.icon,Fe.skipFade),H=H||Fe.text||Fe.icon)}for(var rt in fe){var ft=fe[rt];if(!this.opacities[rt]){var It=new Mi(ft,$,!1,!1);It.isHidden()||(this.opacities[rt]=It,H=H||ft.text.placed||ft.icon.placed)}}for(var Rt in ve)this.variableOffsets[Rt]||!this.opacities[Rt]||this.opacities[Rt].isHidden()||(this.variableOffsets[Rt]=ve[Rt]);for(var Lt in Te)this.placedOrientations[Lt]||!this.opacities[Lt]||this.opacities[Lt].isHidden()||(this.placedOrientations[Lt]=Te[Lt]);H?this.lastPlacementChangeTime=O:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=B?B.lastPlacementChangeTime:O)},Nr.prototype.updateLayerOpacities=function(O,B){for(var H={},$=0,fe=B;$<fe.length;$+=1){var ve=fe[$],Te=ve.getBucket(O);Te&&ve.latestFeatureIndex&&O.id===Te.layerIds[0]&&this.updateBucketOpacities(Te,H,ve.collisionBoxArray)}},Nr.prototype.updateBucketOpacities=function(O,B,H){var $=this;O.hasTextData()&&O.text.opacityVertexArray.clear(),O.hasIconData()&&O.icon.opacityVertexArray.clear(),O.hasIconCollisionBoxData()&&O.iconCollisionBox.collisionVertexArray.clear(),O.hasTextCollisionBoxData()&&O.textCollisionBox.collisionVertexArray.clear();var fe=O.layers[0].layout,ve=new Mi(null,0,!1,!1,!0),Te=fe.get("text-allow-overlap"),Ee=fe.get("icon-allow-overlap"),Fe=fe.get("text-variable-anchor"),Ze="map"===fe.get("text-rotation-alignment"),rt="map"===fe.get("text-pitch-alignment"),ft="none"!==fe.get("icon-text-fit"),It=new Mi(null,0,Te&&(Ee||!O.hasIconData()||fe.get("icon-optional")),Ee&&(Te||!O.hasTextData()||fe.get("text-optional")),!0);!O.collisionArrays&&H&&(O.hasIconCollisionBoxData()||O.hasTextCollisionBoxData())&&O.deserializeCollisionBoxes(H);for(var Rt=function(Gt,qt,Zt){for(var yn=0;yn<qt/4;yn++)Gt.opacityVertexArray.emplaceBack(Zt)},Lt=function(Gt){var qt=O.symbolInstances.get(Gt),Zt=qt.numHorizontalGlyphVertices,yn=qt.numVerticalGlyphVertices,Sn=qt.crossTileID,Un=$.opacities[Sn];B[Sn]?Un=ve:Un||($.opacities[Sn]=Un=It),B[Sn]=!0;var gr=qt.numIconVertices>0,Pr=$.placedOrientations[qt.crossTileID],Cr=Pr===e.WritingMode.vertical,di=Pr===e.WritingMode.horizontal||Pr===e.WritingMode.horizontalOnly;if(Zt>0||yn>0){var wi=Zn(Un.text);Rt(O.text,Zt,Cr?$n:wi),Rt(O.text,yn,di?$n:wi);var $r=Un.text.isHidden();[qt.rightJustifiedTextSymbolIndex,qt.centerJustifiedTextSymbolIndex,qt.leftJustifiedTextSymbolIndex].forEach(function(Ma){Ma>=0&&(O.text.placedSymbolArray.get(Ma).hidden=$r||Cr?1:0)}),qt.verticalPlacedTextSymbolIndex>=0&&(O.text.placedSymbolArray.get(qt.verticalPlacedTextSymbolIndex).hidden=$r||di?1:0);var Ti=$.variableOffsets[qt.crossTileID];Ti&&$.markUsedJustification(O,Ti.anchor,qt,Pr);var bi=$.placedOrientations[qt.crossTileID];bi&&($.markUsedJustification(O,"left",qt,bi),$.markUsedOrientation(O,bi,qt))}if(gr){var Si=Zn(Un.icon),ji=!(ft&&qt.verticalPlacedIconSymbolIndex&&Cr);qt.placedIconSymbolIndex>=0&&(Rt(O.icon,qt.numIconVertices,ji?Si:$n),O.icon.placedSymbolArray.get(qt.placedIconSymbolIndex).hidden=Un.icon.isHidden()),qt.verticalPlacedIconSymbolIndex>=0&&(Rt(O.icon,qt.numVerticalIconVertices,ji?$n:Si),O.icon.placedSymbolArray.get(qt.verticalPlacedIconSymbolIndex).hidden=Un.icon.isHidden())}if(O.hasIconCollisionBoxData()||O.hasTextCollisionBoxData()){var ta=O.collisionArrays[Gt];if(ta){var Zi=new e.Point(0,0);if(ta.textBox||ta.verticalTextBox){var ra=!0;if(Fe){var Qi=$.variableOffsets[Sn];Qi?(Zi=Qr(Qi.anchor,Qi.width,Qi.height,Qi.textOffset,Qi.textBoxScale),Ze&&Zi._rotate(rt?$.transform.angle:-$.transform.angle)):ra=!1}ta.textBox&&Hr(O.textCollisionBox.collisionVertexArray,Un.text.placed,!ra||Cr,Zi.x,Zi.y),ta.verticalTextBox&&Hr(O.textCollisionBox.collisionVertexArray,Un.text.placed,!ra||di,Zi.x,Zi.y)}var fa=Boolean(!di&&ta.verticalIconBox);ta.iconBox&&Hr(O.iconCollisionBox.collisionVertexArray,Un.icon.placed,fa,ft?Zi.x:0,ft?Zi.y:0),ta.verticalIconBox&&Hr(O.iconCollisionBox.collisionVertexArray,Un.icon.placed,!fa,ft?Zi.x:0,ft?Zi.y:0)}}},Ot=0;Ot<O.symbolInstances.length;Ot++)Lt(Ot);if(O.sortFeatures(this.transform.angle),this.retainedQueryData[O.bucketInstanceId]&&(this.retainedQueryData[O.bucketInstanceId].featureSortOrder=O.featureSortOrder),O.hasTextData()&&O.text.opacityVertexBuffer&&O.text.opacityVertexBuffer.updateData(O.text.opacityVertexArray),O.hasIconData()&&O.icon.opacityVertexBuffer&&O.icon.opacityVertexBuffer.updateData(O.icon.opacityVertexArray),O.hasIconCollisionBoxData()&&O.iconCollisionBox.collisionVertexBuffer&&O.iconCollisionBox.collisionVertexBuffer.updateData(O.iconCollisionBox.collisionVertexArray),O.hasTextCollisionBoxData()&&O.textCollisionBox.collisionVertexBuffer&&O.textCollisionBox.collisionVertexBuffer.updateData(O.textCollisionBox.collisionVertexArray),O.bucketInstanceId in this.collisionCircleArrays){var St=this.collisionCircleArrays[O.bucketInstanceId];O.placementInvProjMatrix=St.invProjMatrix,O.placementViewportMatrix=St.viewportMatrix,O.collisionCircleArray=St.circles,delete this.collisionCircleArrays[O.bucketInstanceId]}},Nr.prototype.symbolFadeChange=function(O){return 0===this.fadeDuration?1:(O-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},Nr.prototype.zoomAdjustment=function(O){return Math.max(0,(this.transform.zoom-O)/1.5)},Nr.prototype.hasTransitions=function(O){return this.stale||O-this.lastPlacementChangeTime<this.fadeDuration},Nr.prototype.stillRecent=function(O,B){var H=this.zoomAtLastRecencyCheck===B?1-this.zoomAdjustment(B):1;return this.zoomAtLastRecencyCheck=B,this.commitTime+this.fadeDuration*H>O},Nr.prototype.setStale=function(){this.stale=!0};var wr=Math.pow(2,25),un=Math.pow(2,24),er=Math.pow(2,17),Ut=Math.pow(2,16),vn=Math.pow(2,9),Tn=Math.pow(2,8),Qn=Math.pow(2,1);function Zn(O){if(0===O.opacity&&!O.placed)return 0;if(1===O.opacity&&O.placed)return 4294967295;var B=O.placed?1:0,H=Math.floor(127*O.opacity);return H*wr+B*un+H*er+B*Ut+H*vn+B*Tn+H*Qn+B}var $n=0,Hn=function(O){this._sortAcrossTiles="viewport-y"!==O.layout.get("symbol-z-order")&&void 0!==O.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Hn.prototype.continuePlacement=function(O,B,H,$,fe){for(var ve=this._bucketParts;this._currentTileIndex<O.length;)if(B.getBucketParts(ve,$,O[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,fe())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,ve.sort(function(Fe,Ze){return Fe.sortKey-Ze.sortKey}));this._currentPartIndex<ve.length;)if(B.placeLayerBucketPart(ve[this._currentPartIndex],this._seenCrossTileIDs,H),this._currentPartIndex++,fe())return!0;return!1};var Rn=function(O,B,H,$,fe,ve,Te){this.placement=new Nr(O,fe,ve,Te),this._currentPlacementIndex=B.length-1,this._forceFullPlacement=H,this._showCollisionBoxes=$,this._done=!1};Rn.prototype.isDone=function(){return this._done},Rn.prototype.continuePlacement=function(O,B,H){for(var $=this,fe=e.browser.now(),ve=function(){var Fe=e.browser.now()-fe;return!$._forceFullPlacement&&Fe>2};this._currentPlacementIndex>=0;){var Te=B[O[this._currentPlacementIndex]],Ee=this.placement.collisionIndex.transform.zoom;if("symbol"===Te.type&&(!Te.minzoom||Te.minzoom<=Ee)&&(!Te.maxzoom||Te.maxzoom>Ee)){if(this._inProgressLayer||(this._inProgressLayer=new Hn(Te)),this._inProgressLayer.continuePlacement(H[Te.source],this.placement,this._showCollisionBoxes,Te,ve))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Rn.prototype.commit=function(O){return this.placement.commit(O),this.placement};var Fn=512/e.EXTENT/2,zn=function(O,B,H){this.tileID=O,this.indexedSymbolInstances={},this.bucketInstanceId=H;for(var $=0;$<B.length;$++){var fe=B.get($),ve=fe.key;this.indexedSymbolInstances[ve]||(this.indexedSymbolInstances[ve]=[]),this.indexedSymbolInstances[ve].push({crossTileID:fe.crossTileID,coord:this.getScaledCoordinates(fe,O)})}};zn.prototype.getScaledCoordinates=function(O,B){var $=Fn/Math.pow(2,B.canonical.z-this.tileID.canonical.z);return{x:Math.floor((B.canonical.x*e.EXTENT+O.anchorX)*$),y:Math.floor((B.canonical.y*e.EXTENT+O.anchorY)*$)}},zn.prototype.findMatches=function(O,B,H){for(var $=this.tileID.canonical.z<B.canonical.z?1:Math.pow(2,this.tileID.canonical.z-B.canonical.z),fe=0;fe<O.length;fe++){var ve=O.get(fe);if(!ve.crossTileID){var Te=this.indexedSymbolInstances[ve.key];if(Te)for(var Ee=this.getScaledCoordinates(ve,B),Fe=0,Ze=Te;Fe<Ze.length;Fe+=1){var rt=Ze[Fe];if(Math.abs(rt.coord.x-Ee.x)<=$&&Math.abs(rt.coord.y-Ee.y)<=$&&!H[rt.crossTileID]){H[rt.crossTileID]=!0,ve.crossTileID=rt.crossTileID;break}}}}};var Yn=function(){this.maxCrossTileID=0};Yn.prototype.generate=function(){return++this.maxCrossTileID};var nr=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};nr.prototype.handleWrapJump=function(O){var B=Math.round((O-this.lng)/360);if(0!==B)for(var H in this.indexes){var $=this.indexes[H],fe={};for(var ve in $){var Te=$[ve];Te.tileID=Te.tileID.unwrapTo(Te.tileID.wrap+B),fe[Te.tileID.key]=Te}this.indexes[H]=fe}this.lng=O},nr.prototype.addBucket=function(O,B,H){if(this.indexes[O.overscaledZ]&&this.indexes[O.overscaledZ][O.key]){if(this.indexes[O.overscaledZ][O.key].bucketInstanceId===B.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(O.overscaledZ,this.indexes[O.overscaledZ][O.key])}for(var $=0;$<B.symbolInstances.length;$++)B.symbolInstances.get($).crossTileID=0;this.usedCrossTileIDs[O.overscaledZ]||(this.usedCrossTileIDs[O.overscaledZ]={});var fe=this.usedCrossTileIDs[O.overscaledZ];for(var ve in this.indexes){var Te=this.indexes[ve];if(Number(ve)>O.overscaledZ)for(var Ee in Te){var Fe=Te[Ee];Fe.tileID.isChildOf(O)&&Fe.findMatches(B.symbolInstances,O,fe)}else{var Ze=Te[O.scaledTo(Number(ve)).key];Ze&&Ze.findMatches(B.symbolInstances,O,fe)}}for(var rt=0;rt<B.symbolInstances.length;rt++){var ft=B.symbolInstances.get(rt);ft.crossTileID||(ft.crossTileID=H.generate(),fe[ft.crossTileID]=!0)}return void 0===this.indexes[O.overscaledZ]&&(this.indexes[O.overscaledZ]={}),this.indexes[O.overscaledZ][O.key]=new zn(O,B.symbolInstances,B.bucketInstanceId),!0},nr.prototype.removeBucketCrossTileIDs=function(O,B){for(var H in B.indexedSymbolInstances)for(var $=0,fe=B.indexedSymbolInstances[H];$<fe.length;$+=1)delete this.usedCrossTileIDs[O][fe[$].crossTileID]},nr.prototype.removeStaleBuckets=function(O){var B=!1;for(var H in this.indexes){var $=this.indexes[H];for(var fe in $)O[$[fe].bucketInstanceId]||(this.removeBucketCrossTileIDs(H,$[fe]),delete $[fe],B=!0)}return B};var hr=function(){this.layerIndexes={},this.crossTileIDs=new Yn,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};hr.prototype.addLayer=function(O,B,H){var $=this.layerIndexes[O.id];void 0===$&&($=this.layerIndexes[O.id]=new nr);var fe=!1,ve={};$.handleWrapJump(H);for(var Te=0,Ee=B;Te<Ee.length;Te+=1){var Fe=Ee[Te],Ze=Fe.getBucket(O);Ze&&O.id===Ze.layerIds[0]&&(Ze.bucketInstanceId||(Ze.bucketInstanceId=++this.maxBucketInstanceId),$.addBucket(Fe.tileID,Ze,this.crossTileIDs)&&(fe=!0),ve[Ze.bucketInstanceId]=!0)}return $.removeStaleBuckets(ve)&&(fe=!0),fe},hr.prototype.pruneUnusedLayers=function(O){var B={};for(var H in O.forEach(function($){B[$]=!0}),this.layerIndexes)B[H]||delete this.layerIndexes[H]};var _r=function(O,B){return e.emitValidationErrors(O,B&&B.filter(function(H){return"source.canvas"!==H.identifier}))},Tr=e.pick(Ct,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),jr=e.pick(Ct,["setCenter","setZoom","setBearing","setPitch"]),Er=function(){var O={},B=e.styleSpec.$version;for(var H in e.styleSpec.$root){var $=e.styleSpec.$root[H];if($.required){var fe;null!=(fe="version"===H?B:"array"===$.type?[]:{})&&(O[H]=fe)}}return O}(),Yr=function(O){function B(H,$){var fe=this;void 0===$&&($={}),O.call(this),this.map=H,this.dispatcher=new I(pt(),this),this.imageManager=new m,this.imageManager.setEventedParent(this),this.glyphManager=new E(H._requestManager,$.localIdeographFontFamily),this.lineAtlas=new F(256,512),this.crossTileSymbolIndex=new hr,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var ve=this;this._rtlTextPluginCallback=B.registerForPluginStateChange(function(Te){ve.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:Te.pluginStatus,pluginURL:Te.pluginURL},function(Fe,Ze){if(e.triggerPluginCompletionEvent(Fe),Ze&&Ze.every(function(ft){return ft}))for(var rt in ve.sourceCaches)ve.sourceCaches[rt].reload()})}),this.on("data",function(Te){if("source"===Te.dataType&&"metadata"===Te.sourceDataType){var Ee=fe.sourceCaches[Te.sourceId];if(Ee){var Fe=Ee.getSource();if(Fe&&Fe.vectorLayerIds)for(var Ze in fe._layers){var rt=fe._layers[Ze];rt.source===Fe.id&&fe._validateLayer(rt)}}}})}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.loadURL=function(H,$){var fe=this;void 0===$&&($={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var ve="boolean"==typeof $.validate?$.validate:!e.isMapboxURL(H);H=this.map._requestManager.normalizeStyleURL(H,$.accessToken);var Te=this.map._requestManager.transformRequest(H,e.ResourceType.Style);this._request=e.getJSON(Te,function(Ee,Fe){fe._request=null,Ee?fe.fire(new e.ErrorEvent(Ee)):Fe&&fe._load(Fe,ve)})},B.prototype.loadJSON=function(H,$){var fe=this;void 0===$&&($={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){fe._request=null,fe._load(H,!1!==$.validate)})},B.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Er,!1)},B.prototype._load=function(H,$){if(!$||!_r(this,e.validateStyle(H))){for(var fe in this._loaded=!0,this.stylesheet=H,H.sources)this.addSource(fe,H.sources[fe],{validate:!1});H.sprite?this._loadSprite(H.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(H.glyphs);var ve=Xt(this.stylesheet.layers);this._order=ve.map(function(Ze){return Ze.id}),this._layers={},this._serializedLayers={};for(var Te=0,Ee=ve;Te<Ee.length;Te+=1){var Fe=Ee[Te];(Fe=e.createStyleLayer(Fe)).setEventedParent(this,{layer:{id:Fe.id}}),this._layers[Fe.id]=Fe,this._serializedLayers[Fe.id]=Fe.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new N(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},B.prototype._loadSprite=function(H){var $=this;this._spriteRequest=function(fe,ve,Te){var Ee,Fe,Ze,rt=e.browser.devicePixelRatio>1?"@2x":"",ft=e.getJSON(ve.transformRequest(ve.normalizeSpriteURL(fe,rt,".json"),e.ResourceType.SpriteJSON),function(Lt,Ot){ft=null,Ze||(Ze=Lt,Ee=Ot,Rt())}),It=e.getImage(ve.transformRequest(ve.normalizeSpriteURL(fe,rt,".png"),e.ResourceType.SpriteImage),function(Lt,Ot){It=null,Ze||(Ze=Lt,Fe=Ot,Rt())});function Rt(){if(Ze)Te(Ze);else if(Ee&&Fe){var Lt=e.browser.getImageData(Fe),Ot={};for(var St in Ee){var Gt=Ee[St],qt=Gt.width,Zt=Gt.height,yn=Gt.x,Sn=Gt.y,qn=Gt.sdf,Un=Gt.pixelRatio,mr=Gt.stretchX,gr=Gt.stretchY,Pr=Gt.content,Cr=new e.RGBAImage({width:qt,height:Zt});e.RGBAImage.copy(Lt,Cr,{x:yn,y:Sn},{x:0,y:0},{width:qt,height:Zt}),Ot[St]={data:Cr,pixelRatio:Un,sdf:qn,stretchX:mr,stretchY:gr,content:Pr}}Te(null,Ot)}}return{cancel:function(){ft&&(ft.cancel(),ft=null),It&&(It.cancel(),It=null)}}}(H,this.map._requestManager,function(fe,ve){if($._spriteRequest=null,fe)$.fire(new e.ErrorEvent(fe));else if(ve)for(var Te in ve)$.imageManager.addImage(Te,ve[Te]);$.imageManager.setLoaded(!0),$._availableImages=$.imageManager.listImages(),$.dispatcher.broadcast("setImages",$._availableImages),$.fire(new e.Event("data",{dataType:"style"}))})},B.prototype._validateLayer=function(H){var $=this.sourceCaches[H.source];if($){var fe=H.sourceLayer;if(fe){var ve=$.getSource();("geojson"===ve.type||ve.vectorLayerIds&&-1===ve.vectorLayerIds.indexOf(fe))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+fe+'" does not exist on source "'+ve.id+'" as specified by style layer "'+H.id+'"')))}}},B.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var H in this.sourceCaches)if(!this.sourceCaches[H].loaded())return!1;return!!this.imageManager.isLoaded()},B.prototype._serializeLayers=function(H){for(var $=[],fe=0,ve=H;fe<ve.length;fe+=1){var Ee=this._layers[ve[fe]];"custom"!==Ee.type&&$.push(Ee.serialize())}return $},B.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var H in this.sourceCaches)if(this.sourceCaches[H].hasTransition())return!0;for(var $ in this._layers)if(this._layers[$].hasTransition())return!0;return!1},B.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},B.prototype.update=function(H){if(this._loaded){var $=this._changed;if(this._changed){var fe=Object.keys(this._updatedLayers),ve=Object.keys(this._removedLayers);for(var Te in(fe.length||ve.length)&&this._updateWorkerLayers(fe,ve),this._updatedSources){var Ee=this._updatedSources[Te];"reload"===Ee?this._reloadSource(Te):"clear"===Ee&&this._clearSource(Te)}for(var Fe in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Fe].updateTransitions(H);this.light.updateTransitions(H),this._resetUpdates()}for(var Ze in this.sourceCaches)this.sourceCaches[Ze].used=!1;for(var rt=0,ft=this._order;rt<ft.length;rt+=1){var Rt=this._layers[ft[rt]];Rt.recalculate(H,this._availableImages),!Rt.isHidden(H.zoom)&&Rt.source&&(this.sourceCaches[Rt.source].used=!0)}this.light.recalculate(H),this.z=H.zoom,$&&this.fire(new e.Event("data",{dataType:"style"}))}},B.prototype._updateTilesForChangedImages=function(){var H=Object.keys(this._changedImages);if(H.length){for(var $ in this.sourceCaches)this.sourceCaches[$].reloadTilesForDependencies(["icons","patterns"],H);this._changedImages={}}},B.prototype._updateWorkerLayers=function(H,$){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(H),removedIds:$})},B.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},B.prototype.setState=function(H){var $=this;if(this._checkLoaded(),_r(this,e.validateStyle(H)))return!1;(H=e.clone$1(H)).layers=Xt(H.layers);var fe=function(O,B){if(!O)return[{command:Ct.setStyle,args:[B]}];var H=[];try{if(!e.deepEqual(O.version,B.version))return[{command:Ct.setStyle,args:[B]}];e.deepEqual(O.center,B.center)||H.push({command:Ct.setCenter,args:[B.center]}),e.deepEqual(O.zoom,B.zoom)||H.push({command:Ct.setZoom,args:[B.zoom]}),e.deepEqual(O.bearing,B.bearing)||H.push({command:Ct.setBearing,args:[B.bearing]}),e.deepEqual(O.pitch,B.pitch)||H.push({command:Ct.setPitch,args:[B.pitch]}),e.deepEqual(O.sprite,B.sprite)||H.push({command:Ct.setSprite,args:[B.sprite]}),e.deepEqual(O.glyphs,B.glyphs)||H.push({command:Ct.setGlyphs,args:[B.glyphs]}),e.deepEqual(O.transition,B.transition)||H.push({command:Ct.setTransition,args:[B.transition]}),e.deepEqual(O.light,B.light)||H.push({command:Ct.setLight,args:[B.light]});var $={},fe=[];!function(Te,Ee,Fe,Ze){var rt;for(rt in Ee=Ee||{},Te=Te||{})Te.hasOwnProperty(rt)&&(Ee.hasOwnProperty(rt)||Be(rt,Fe,Ze));for(rt in Ee)Ee.hasOwnProperty(rt)&&(Te.hasOwnProperty(rt)?e.deepEqual(Te[rt],Ee[rt])||("geojson"===Te[rt].type&&"geojson"===Ee[rt].type&&dt(Te,Ee,rt)?Fe.push({command:Ct.setGeoJSONSourceData,args:[rt,Ee[rt].data]}):tt(rt,Ee,Fe,Ze)):Pt(rt,Ee,Fe))}(O.sources,B.sources,fe,$);var ve=[];O.layers&&O.layers.forEach(function(Te){$[Te.source]?H.push({command:Ct.removeLayer,args:[Te.id]}):ve.push(Te)}),H=H.concat(fe),function(Te,Ee,Fe){Ee=Ee||[];var Ze,rt,ft,It,Rt,Lt,Ot,St=(Te=Te||[]).map(Nt),Gt=Ee.map(Nt),qt=Te.reduce(Yt,{}),Zt=Ee.reduce(Yt,{}),yn=St.slice(),Sn=Object.create(null);for(Ze=0,rt=0;Ze<St.length;Ze++)Zt.hasOwnProperty(ft=St[Ze])?rt++:(Fe.push({command:Ct.removeLayer,args:[ft]}),yn.splice(yn.indexOf(ft,rt),1));for(Ze=0,rt=0;Ze<Gt.length;Ze++)yn[yn.length-1-Ze]!==(ft=Gt[Gt.length-1-Ze])&&(qt.hasOwnProperty(ft)?(Fe.push({command:Ct.removeLayer,args:[ft]}),yn.splice(yn.lastIndexOf(ft,yn.length-rt),1)):rt++,Fe.push({command:Ct.addLayer,args:[Zt[ft],Lt=yn[yn.length-Ze]]}),yn.splice(yn.length-Ze,0,ft),Sn[ft]=!0);for(Ze=0;Ze<Gt.length;Ze++)if(It=qt[ft=Gt[Ze]],Rt=Zt[ft],!Sn[ft]&&!e.deepEqual(It,Rt))if(e.deepEqual(It.source,Rt.source)&&e.deepEqual(It["source-layer"],Rt["source-layer"])&&e.deepEqual(It.type,Rt.type)){for(Ot in Dt(It.layout,Rt.layout,Fe,ft,null,Ct.setLayoutProperty),Dt(It.paint,Rt.paint,Fe,ft,null,Ct.setPaintProperty),e.deepEqual(It.filter,Rt.filter)||Fe.push({command:Ct.setFilter,args:[ft,Rt.filter]}),e.deepEqual(It.minzoom,Rt.minzoom)&&e.deepEqual(It.maxzoom,Rt.maxzoom)||Fe.push({command:Ct.setLayerZoomRange,args:[ft,Rt.minzoom,Rt.maxzoom]}),It)It.hasOwnProperty(Ot)&&"layout"!==Ot&&"paint"!==Ot&&"filter"!==Ot&&"metadata"!==Ot&&"minzoom"!==Ot&&"maxzoom"!==Ot&&(0===Ot.indexOf("paint.")?Dt(It[Ot],Rt[Ot],Fe,ft,Ot.slice(6),Ct.setPaintProperty):e.deepEqual(It[Ot],Rt[Ot])||Fe.push({command:Ct.setLayerProperty,args:[ft,Ot,Rt[Ot]]}));for(Ot in Rt)Rt.hasOwnProperty(Ot)&&!It.hasOwnProperty(Ot)&&"layout"!==Ot&&"paint"!==Ot&&"filter"!==Ot&&"metadata"!==Ot&&"minzoom"!==Ot&&"maxzoom"!==Ot&&(0===Ot.indexOf("paint.")?Dt(It[Ot],Rt[Ot],Fe,ft,Ot.slice(6),Ct.setPaintProperty):e.deepEqual(It[Ot],Rt[Ot])||Fe.push({command:Ct.setLayerProperty,args:[ft,Ot,Rt[Ot]]}))}else Fe.push({command:Ct.removeLayer,args:[ft]}),Lt=yn[yn.lastIndexOf(ft)+1],Fe.push({command:Ct.addLayer,args:[Rt,Lt]})}(ve,B.layers,H)}catch(Te){console.warn("Unable to compute style diff:",Te),H=[{command:Ct.setStyle,args:[B]}]}return H}(this.serialize(),H).filter(function(Te){return!(Te.command in jr)});if(0===fe.length)return!1;var ve=fe.filter(function(Te){return!(Te.command in Tr)});if(ve.length>0)throw new Error("Unimplemented: "+ve.map(function(Te){return Te.command}).join(", ")+".");return fe.forEach(function(Te){"setTransition"!==Te.command&&$[Te.command].apply($,Te.args)}),this.stylesheet=H,!0},B.prototype.addImage=function(H,$){if(this.getImage(H))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(H,$),this._availableImages=this.imageManager.listImages(),this._changedImages[H]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},B.prototype.updateImage=function(H,$){this.imageManager.updateImage(H,$)},B.prototype.getImage=function(H){return this.imageManager.getImage(H)},B.prototype.removeImage=function(H){if(!this.getImage(H))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(H),this._availableImages=this.imageManager.listImages(),this._changedImages[H]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},B.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},B.prototype.addSource=function(H,$,fe){var ve=this;if(void 0===fe&&(fe={}),this._checkLoaded(),void 0!==this.sourceCaches[H])throw new Error("There is already a source with this ID");if(!$.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys($).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf($.type)>=0&&this._validate(e.validateStyle.source,"sources."+H,$,null,fe))){this.map&&this.map._collectResourceTiming&&($.collectResourceTiming=!0);var Te=this.sourceCaches[H]=new Ge(H,$,this.dispatcher);Te.style=this,Te.setEventedParent(this,function(){return{isSourceLoaded:ve.loaded(),source:Te.serialize(),sourceId:H}}),Te.onAdd(this.map),this._changed=!0}},B.prototype.removeSource=function(H){if(this._checkLoaded(),void 0===this.sourceCaches[H])throw new Error("There is no source with this ID");for(var $ in this._layers)if(this._layers[$].source===H)return this.fire(new e.ErrorEvent(new Error('Source "'+H+'" cannot be removed while layer "'+$+'" is using it.')));var fe=this.sourceCaches[H];delete this.sourceCaches[H],delete this._updatedSources[H],fe.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:H})),fe.setEventedParent(null),fe.clearTiles(),fe.onRemove&&fe.onRemove(this.map),this._changed=!0},B.prototype.setGeoJSONSourceData=function(H,$){this._checkLoaded(),this.sourceCaches[H].getSource().setData($),this._changed=!0},B.prototype.getSource=function(H){return this.sourceCaches[H]&&this.sourceCaches[H].getSource()},B.prototype.addLayer=function(H,$,fe){void 0===fe&&(fe={}),this._checkLoaded();var ve=H.id;if(this.getLayer(ve))this.fire(new e.ErrorEvent(new Error('Layer with id "'+ve+'" already exists on this map')));else{var Te;if("custom"===H.type){if(_r(this,e.validateCustomStyleLayer(H)))return;Te=e.createStyleLayer(H)}else{if("object"==typeof H.source&&(this.addSource(ve,H.source),H=e.clone$1(H),H=e.extend(H,{source:ve})),this._validate(e.validateStyle.layer,"layers."+ve,H,{arrayIndex:-1},fe))return;Te=e.createStyleLayer(H),this._validateLayer(Te),Te.setEventedParent(this,{layer:{id:ve}}),this._serializedLayers[Te.id]=Te.serialize()}var Ee=$?this._order.indexOf($):this._order.length;if($&&-1===Ee)this.fire(new e.ErrorEvent(new Error('Layer with id "'+$+'" does not exist on this map.')));else{if(this._order.splice(Ee,0,ve),this._layerOrderChanged=!0,this._layers[ve]=Te,this._removedLayers[ve]&&Te.source&&"custom"!==Te.type){var Fe=this._removedLayers[ve];delete this._removedLayers[ve],Fe.type!==Te.type?this._updatedSources[Te.source]="clear":(this._updatedSources[Te.source]="reload",this.sourceCaches[Te.source].pause())}this._updateLayer(Te),Te.onAdd&&Te.onAdd(this.map)}}},B.prototype.moveLayer=function(H,$){if(this._checkLoaded(),this._changed=!0,this._layers[H]){if(H!==$){var fe=this._order.indexOf(H);this._order.splice(fe,1);var ve=$?this._order.indexOf($):this._order.length;$&&-1===ve?this.fire(new e.ErrorEvent(new Error('Layer with id "'+$+'" does not exist on this map.'))):(this._order.splice(ve,0,H),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be moved.")))},B.prototype.removeLayer=function(H){this._checkLoaded();var $=this._layers[H];if($){$.setEventedParent(null);var fe=this._order.indexOf(H);this._order.splice(fe,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[H]=$,delete this._layers[H],delete this._serializedLayers[H],delete this._updatedLayers[H],delete this._updatedPaintProps[H],$.onRemove&&$.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be removed.")))},B.prototype.getLayer=function(H){return this._layers[H]},B.prototype.hasLayer=function(H){return H in this._layers},B.prototype.setLayerZoomRange=function(H,$,fe){this._checkLoaded();var ve=this.getLayer(H);ve?ve.minzoom===$&&ve.maxzoom===fe||(null!=$&&(ve.minzoom=$),null!=fe&&(ve.maxzoom=fe),this._updateLayer(ve)):this.fire(new e.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot have zoom extent.")))},B.prototype.setFilter=function(H,$,fe){void 0===fe&&(fe={}),this._checkLoaded();var ve=this.getLayer(H);if(ve){if(!e.deepEqual(ve.filter,$))return null==$?(ve.filter=void 0,void this._updateLayer(ve)):void(this._validate(e.validateStyle.filter,"layers."+ve.id+".filter",$,null,fe)||(ve.filter=e.clone$1($),this._updateLayer(ve)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be filtered.")))},B.prototype.getFilter=function(H){return e.clone$1(this.getLayer(H).filter)},B.prototype.setLayoutProperty=function(H,$,fe,ve){void 0===ve&&(ve={}),this._checkLoaded();var Te=this.getLayer(H);Te?e.deepEqual(Te.getLayoutProperty($),fe)||(Te.setLayoutProperty($,fe,ve),this._updateLayer(Te)):this.fire(new e.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be styled.")))},B.prototype.getLayoutProperty=function(H,$){var fe=this.getLayer(H);if(fe)return fe.getLayoutProperty($);this.fire(new e.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style.")))},B.prototype.setPaintProperty=function(H,$,fe,ve){void 0===ve&&(ve={}),this._checkLoaded();var Te=this.getLayer(H);Te?e.deepEqual(Te.getPaintProperty($),fe)||(Te.setPaintProperty($,fe,ve)&&this._updateLayer(Te),this._changed=!0,this._updatedPaintProps[H]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be styled.")))},B.prototype.getPaintProperty=function(H,$){return this.getLayer(H).getPaintProperty($)},B.prototype.setFeatureState=function(H,$){this._checkLoaded();var fe=H.source,ve=H.sourceLayer,Te=this.sourceCaches[fe];if(void 0!==Te){var Ee=Te.getSource().type;"geojson"===Ee&&ve?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==Ee||ve?(void 0===H.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),Te.setFeatureState(ve,H.id,$)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+fe+"' does not exist in the map's style.")))},B.prototype.removeFeatureState=function(H,$){this._checkLoaded();var fe=H.source,ve=this.sourceCaches[fe];if(void 0!==ve){var Te=ve.getSource().type,Ee="vector"===Te?H.sourceLayer:void 0;"vector"!==Te||Ee?$&&"string"!=typeof H.id&&"number"!=typeof H.id?this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):ve.removeFeatureState(Ee,H.id,$):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+fe+"' does not exist in the map's style.")))},B.prototype.getFeatureState=function(H){this._checkLoaded();var $=H.source,fe=H.sourceLayer,ve=this.sourceCaches[$];if(void 0!==ve){if("vector"!==ve.getSource().type||fe)return void 0===H.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),ve.getFeatureState(fe,H.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+$+"' does not exist in the map's style.")))},B.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},B.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(H){return H.serialize()}),layers:this._serializeLayers(this._order)},function(H){return void 0!==H})},B.prototype._updateLayer=function(H){this._updatedLayers[H.id]=!0,H.source&&!this._updatedSources[H.source]&&"raster"!==this.sourceCaches[H.source].getSource().type&&(this._updatedSources[H.source]="reload",this.sourceCaches[H.source].pause()),this._changed=!0},B.prototype._flattenAndSortRenderedFeatures=function(H){for(var $=this,fe=function(Pr){return"fill-extrusion"===$._layers[Pr].type},ve={},Te=[],Ee=this._order.length-1;Ee>=0;Ee--){var Fe=this._order[Ee];if(fe(Fe)){ve[Fe]=Ee;for(var Ze=0,rt=H;Ze<rt.length;Ze+=1){var ft=rt[Ze][Fe];if(ft)for(var It=0,Rt=ft;It<Rt.length;It+=1)Te.push(Rt[It])}}}Te.sort(function(Pr,Cr){return Cr.intersectionZ-Pr.intersectionZ});for(var Ot=[],St=this._order.length-1;St>=0;St--){var Gt=this._order[St];if(fe(Gt))for(var qt=Te.length-1;qt>=0;qt--){var Zt=Te[qt].feature;if(ve[Zt.layer.id]<St)break;Ot.push(Zt),Te.pop()}else for(var yn=0,Sn=H;yn<Sn.length;yn+=1){var qn=Sn[yn][Gt];if(qn)for(var Un=0,mr=qn;Un<mr.length;Un+=1)Ot.push(mr[Un].feature)}}return Ot},B.prototype.queryRenderedFeatures=function(H,$,fe){$&&$.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",$.filter,null,$);var ve={};if($&&$.layers){if(!Array.isArray($.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Te=0,Ee=$.layers;Te<Ee.length;Te+=1){var Fe=Ee[Te],Ze=this._layers[Fe];if(!Ze)return this.fire(new e.ErrorEvent(new Error("The layer '"+Fe+"' does not exist in the map's style and cannot be queried for features."))),[];ve[Ze.source]=!0}}var rt=[];for(var ft in $.availableImages=this._availableImages,this.sourceCaches)$.layers&&!ve[ft]||rt.push(W(this.sourceCaches[ft],this._layers,this._serializedLayers,H,$,fe));return this.placement&&rt.push(function(It,Rt,Lt,Ot,St,Gt,qt){for(var Zt={},yn=Gt.queryRenderedSymbols(Ot),Sn=[],qn=0,Un=Object.keys(yn).map(Number);qn<Un.length;qn+=1)Sn.push(qt[Un[qn]]);Sn.sort(ae);for(var gr=function(){var Bi=Cr[Pr],ur=Bi.featureIndex.lookupSymbolFeatures(yn[Bi.bucketInstanceId],Rt,Bi.bucketIndex,Bi.sourceLayerIndex,St.filter,St.layers,St.availableImages,It);for(var $r in ur){var Ti=Zt[$r]=Zt[$r]||[],bi=ur[$r];bi.sort(function(Ei,ta){var Zi=Bi.featureSortOrder;if(Zi){var ra=Zi.indexOf(Ei.featureIndex);return Zi.indexOf(ta.featureIndex)-ra}return ta.featureIndex-Ei.featureIndex});for(var Si=0,ji=bi;Si<ji.length;Si+=1)Ti.push(ji[Si])}},Pr=0,Cr=Sn;Pr<Cr.length;Pr+=1)gr();var di=function(Bi){Zt[Bi].forEach(function(ur){var $r=ur.feature,bi=Lt[It[Bi].source].getFeatureState($r.layer["source-layer"],$r.id);$r.source=$r.layer.source,$r.layer["source-layer"]&&($r.sourceLayer=$r.layer["source-layer"]),$r.state=bi})};for(var wi in Zt)di(wi);return Zt}(this._layers,this._serializedLayers,this.sourceCaches,H,$,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(rt)},B.prototype.querySourceFeatures=function(H,$){$&&$.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",$.filter,null,$);var fe=this.sourceCaches[H];return fe?function(ve,Te){for(var Ee=ve.getRenderableIds().map(function(Rt){return ve.getTileByID(Rt)}),Fe=[],Ze={},rt=0;rt<Ee.length;rt++){var ft=Ee[rt],It=ft.tileID.canonical.key;Ze[It]||(Ze[It]=!0,ft.querySourceFeatures(Fe,Te))}return Fe}(fe,$):[]},B.prototype.addSourceType=function(H,$,fe){return B.getSourceType(H)?fe(new Error('A source type called "'+H+'" already exists.')):(B.setSourceType(H,$),$.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:H,url:$.workerSourceURL},fe):fe(null,null))},B.prototype.getLight=function(){return this.light.getLight()},B.prototype.setLight=function(H,$){void 0===$&&($={}),this._checkLoaded();var fe=this.light.getLight(),ve=!1;for(var Te in H)if(!e.deepEqual(H[Te],fe[Te])){ve=!0;break}if(ve){var Ee={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(H,$),this.light.updateTransitions(Ee)}},B.prototype._validate=function(H,$,fe,ve,Te){return void 0===Te&&(Te={}),(!Te||!1!==Te.validate)&&_r(this,H.call(e.validateStyle,e.extend({key:$,style:this.serialize(),value:fe,styleSpec:e.styleSpec},ve)))},B.prototype._remove=function(){for(var H in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[H].setEventedParent(null);for(var $ in this.sourceCaches)this.sourceCaches[$].clearTiles(),this.sourceCaches[$].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},B.prototype._clearSource=function(H){this.sourceCaches[H].clearTiles()},B.prototype._reloadSource=function(H){this.sourceCaches[H].resume(),this.sourceCaches[H].reload()},B.prototype._updateSources=function(H){for(var $ in this.sourceCaches)this.sourceCaches[$].update(H)},B.prototype._generateCollisionBoxes=function(){for(var H in this.sourceCaches)this._reloadSource(H)},B.prototype._updatePlacement=function(H,$,fe,ve,Te){void 0===Te&&(Te=!1);for(var Ee=!1,Fe=!1,Ze={},rt=0,ft=this._order;rt<ft.length;rt+=1){var Rt=this._layers[ft[rt]];if("symbol"===Rt.type){if(!Ze[Rt.source]){var Lt=this.sourceCaches[Rt.source];Ze[Rt.source]=Lt.getRenderableIds(!0).map(function(yn){return Lt.getTileByID(yn)}).sort(function(yn,Sn){return Sn.tileID.overscaledZ-yn.tileID.overscaledZ||(yn.tileID.isLessThan(Sn.tileID)?-1:1)})}var Ot=this.crossTileSymbolIndex.addLayer(Rt,Ze[Rt.source],H.center.lng);Ee=Ee||Ot}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Te=Te||this._layerOrderChanged||0===fe)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),H.zoom))&&(this.pauseablePlacement=new Rn(H,this._order,Te,$,fe,ve,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Ze),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Fe=!0),Ee&&this.pauseablePlacement.placement.setStale()),Fe||Ee)for(var St=0,Gt=this._order;St<Gt.length;St+=1){var Zt=this._layers[Gt[St]];"symbol"===Zt.type&&this.placement.updateLayerOpacities(Zt,Ze[Zt.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},B.prototype._releaseSymbolFadeTiles=function(){for(var H in this.sourceCaches)this.sourceCaches[H].releaseSymbolFadeTiles()},B.prototype.getImages=function(H,$,fe){this.imageManager.getImages($.icons,fe),this._updateTilesForChangedImages();var ve=this.sourceCaches[$.source];ve&&ve.setDependencies($.tileID.key,$.type,$.icons)},B.prototype.getGlyphs=function(H,$,fe){this.glyphManager.getGlyphs($.stacks,fe)},B.prototype.getResource=function(H,$,fe){return e.makeRequest($,fe)},B}(e.Evented);Yr.getSourceType=function(O){return q[O]},Yr.setSourceType=function(O,B){q[O]=B},Yr.registerForPluginStateChange=e.registerForPluginStateChange;var ei=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),xr=va("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),pi=va("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ui=va("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),$i=va("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),Wr=va("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),xi=va("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),ki=va("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),oa=va("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),hi=va("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Xi=va("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Ea=va("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),ha=va("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),Aa=va("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),qa=va("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),da=va("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),za=va("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),rs=va("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),po=va("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),Ji=va("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),ds=va("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),is=va("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),Bo=va("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),ro=va("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),eo=va("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),fl=va("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),hl=va("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function va(O,B){var H=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,$={};return{fragmentSource:O=O.replace(H,function(fe,ve,Te,Ee,Fe){return $[Fe]=!0,"define"===ve?"\n#ifndef HAS_UNIFORM_u_"+Fe+"\nvarying "+Te+" "+Ee+" "+Fe+";\n#else\nuniform "+Te+" "+Ee+" u_"+Fe+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+Fe+"\n    "+Te+" "+Ee+" "+Fe+" = u_"+Fe+";\n#endif\n"}),vertexSource:B=B.replace(H,function(fe,ve,Te,Ee,Fe){var Ze="float"===Ee?"vec2":"vec4",rt=Fe.match(/color/)?"color":Ze;return $[Fe]?"define"===ve?"\n#ifndef HAS_UNIFORM_u_"+Fe+"\nuniform lowp float u_"+Fe+"_t;\nattribute "+Te+" "+Ze+" a_"+Fe+";\nvarying "+Te+" "+Ee+" "+Fe+";\n#else\nuniform "+Te+" "+Ee+" u_"+Fe+";\n#endif\n":"vec4"===rt?"\n#ifndef HAS_UNIFORM_u_"+Fe+"\n    "+Fe+" = a_"+Fe+";\n#else\n    "+Te+" "+Ee+" "+Fe+" = u_"+Fe+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Fe+"\n    "+Fe+" = unpack_mix_"+rt+"(a_"+Fe+", u_"+Fe+"_t);\n#else\n    "+Te+" "+Ee+" "+Fe+" = u_"+Fe+";\n#endif\n":"define"===ve?"\n#ifndef HAS_UNIFORM_u_"+Fe+"\nuniform lowp float u_"+Fe+"_t;\nattribute "+Te+" "+Ze+" a_"+Fe+";\n#else\nuniform "+Te+" "+Ee+" u_"+Fe+";\n#endif\n":"vec4"===rt?"\n#ifndef HAS_UNIFORM_u_"+Fe+"\n    "+Te+" "+Ee+" "+Fe+" = a_"+Fe+";\n#else\n    "+Te+" "+Ee+" "+Fe+" = u_"+Fe+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Fe+"\n    "+Te+" "+Ee+" "+Fe+" = unpack_mix_"+rt+"(a_"+Fe+", u_"+Fe+"_t);\n#else\n    "+Te+" "+Ee+" "+Fe+" = u_"+Fe+";\n#endif\n"})}}var Xa=Object.freeze({__proto__:null,prelude:xr,background:pi,backgroundPattern:Ui,circle:$i,clippingMask:Wr,heatmap:xi,heatmapTexture:ki,collisionBox:oa,collisionCircle:hi,debug:Xi,fill:Ea,fillOutline:ha,fillOutlinePattern:Aa,fillPattern:qa,fillExtrusion:da,fillExtrusionPattern:za,hillshadePrepare:rs,hillshade:po,line:Ji,lineGradient:ds,linePattern:is,lineSDF:Bo,raster:ro,symbolIcon:eo,symbolSDF:fl,symbolTextAndIcon:hl}),Ml=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Ml.prototype.bind=function(O,B,H,$,fe,ve,Te,Ee){this.context=O;for(var Fe=this.boundPaintVertexBuffers.length!==$.length,Ze=0;!Fe&&Ze<$.length;Ze++)this.boundPaintVertexBuffers[Ze]!==$[Ze]&&(Fe=!0);O.extVertexArrayObject&&this.vao&&this.boundProgram===B&&this.boundLayoutVertexBuffer===H&&!Fe&&this.boundIndexBuffer===fe&&this.boundVertexOffset===ve&&this.boundDynamicVertexBuffer===Te&&this.boundDynamicVertexBuffer2===Ee?(O.bindVertexArrayOES.set(this.vao),Te&&Te.bind(),fe&&fe.dynamicDraw&&fe.bind(),Ee&&Ee.bind()):this.freshBind(B,H,$,fe,ve,Te,Ee)},Ml.prototype.freshBind=function(O,B,H,$,fe,ve,Te){var Ee,Fe=O.numAttributes,Ze=this.context,rt=Ze.gl;if(Ze.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Ze.extVertexArrayObject.createVertexArrayOES(),Ze.bindVertexArrayOES.set(this.vao),Ee=0,this.boundProgram=O,this.boundLayoutVertexBuffer=B,this.boundPaintVertexBuffers=H,this.boundIndexBuffer=$,this.boundVertexOffset=fe,this.boundDynamicVertexBuffer=ve,this.boundDynamicVertexBuffer2=Te;else{Ee=Ze.currentNumAttributes||0;for(var ft=Fe;ft<Ee;ft++)rt.disableVertexAttribArray(ft)}B.enableAttributes(rt,O);for(var It=0,Rt=H;It<Rt.length;It+=1)Rt[It].enableAttributes(rt,O);ve&&ve.enableAttributes(rt,O),Te&&Te.enableAttributes(rt,O),B.bind(),B.setVertexAttribPointers(rt,O,fe);for(var Lt=0,Ot=H;Lt<Ot.length;Lt+=1){var St=Ot[Lt];St.bind(),St.setVertexAttribPointers(rt,O,fe)}ve&&(ve.bind(),ve.setVertexAttribPointers(rt,O,fe)),$&&$.bind(),Te&&(Te.bind(),Te.setVertexAttribPointers(rt,O,fe)),Ze.currentNumAttributes=Fe},Ml.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var cu=function(O,B,H,$,fe){var ve=O.gl;this.program=ve.createProgram();var Te=H?H.defines():[];fe&&Te.push("#define OVERDRAW_INSPECTOR;");var Ee=Te.concat(xr.fragmentSource,B.fragmentSource).join("\n"),Fe=Te.concat(xr.vertexSource,B.vertexSource).join("\n"),Ze=ve.createShader(ve.FRAGMENT_SHADER);if(ve.isContextLost())this.failedToCreate=!0;else{ve.shaderSource(Ze,Ee),ve.compileShader(Ze),ve.attachShader(this.program,Ze);var rt=ve.createShader(ve.VERTEX_SHADER);if(ve.isContextLost())this.failedToCreate=!0;else{ve.shaderSource(rt,Fe),ve.compileShader(rt),ve.attachShader(this.program,rt);for(var ft=H?H.layoutAttributes:[],It=0;It<ft.length;It++)ve.bindAttribLocation(this.program,It,ft[It].name);ve.linkProgram(this.program),ve.deleteShader(rt),ve.deleteShader(Ze),this.numAttributes=ve.getProgramParameter(this.program,ve.ACTIVE_ATTRIBUTES),this.attributes={};for(var Rt={},Lt=0;Lt<this.numAttributes;Lt++){var Ot=ve.getActiveAttrib(this.program,Lt);Ot&&(this.attributes[Ot.name]=ve.getAttribLocation(this.program,Ot.name))}for(var St=ve.getProgramParameter(this.program,ve.ACTIVE_UNIFORMS),Gt=0;Gt<St;Gt++){var qt=ve.getActiveUniform(this.program,Gt);qt&&(Rt[qt.name]=ve.getUniformLocation(this.program,qt.name))}this.fixedUniforms=$(O,Rt),this.binderUniforms=H?H.getUniforms(O,Rt):[]}}};function Il(O,B,H){var $=1/Lr(H,1,B.transform.tileZoom),fe=Math.pow(2,H.tileID.overscaledZ),ve=H.tileSize*Math.pow(2,B.transform.tileZoom)/fe,Te=ve*(H.tileID.canonical.x+H.tileID.wrap*fe),Ee=ve*H.tileID.canonical.y;return{u_image:0,u_texsize:H.imageAtlasTexture.size,u_scale:[$,O.fromScale,O.toScale],u_fade:O.t,u_pixel_coord_upper:[Te>>16,Ee>>16],u_pixel_coord_lower:[65535&Te,65535&Ee]}}cu.prototype.draw=function(O,B,H,$,fe,ve,Te,Ee,Fe,Ze,rt,ft,It,Rt,Lt,Ot){var St,Gt=O.gl;if(!this.failedToCreate){for(var qt in O.program.set(this.program),O.setDepthMode(H),O.setStencilMode($),O.setColorMode(fe),O.setCullFace(ve),this.fixedUniforms)this.fixedUniforms[qt].set(Te[qt]);Rt&&Rt.setUniforms(O,this.binderUniforms,ft,{zoom:It});for(var Zt=(St={},St[Gt.LINES]=2,St[Gt.TRIANGLES]=3,St[Gt.LINE_STRIP]=1,St)[B],yn=0,Sn=rt.get();yn<Sn.length;yn+=1){var qn=Sn[yn],Un=qn.vaos||(qn.vaos={});(Un[Ee]||(Un[Ee]=new Ml)).bind(O,this,Fe,Rt?Rt.getPaintVertexBuffers():[],Ze,qn.vertexOffset,Lt,Ot),Gt.drawElements(B,qn.primitiveLength*Zt,Gt.UNSIGNED_SHORT,qn.primitiveOffset*Zt*2)}}};var Pl=function(O,B,H,$){var fe=B.style.light,ve=fe.properties.get("position"),Te=[ve.x,ve.y,ve.z],Ee=e.create$1();"viewport"===fe.properties.get("anchor")&&e.fromRotation(Ee,-B.transform.angle),e.transformMat3(Te,Te,Ee);var Fe=fe.properties.get("color");return{u_matrix:O,u_lightpos:Te,u_lightintensity:fe.properties.get("intensity"),u_lightcolor:[Fe.r,Fe.g,Fe.b],u_vertical_gradient:+H,u_opacity:$}},kl=function(O,B,H,$,fe,ve,Te){return e.extend(Pl(O,B,H,$),Il(ve,B,Te),{u_height_factor:-Math.pow(2,fe.overscaledZ)/Te.tileSize/8})},Es=function(O){return{u_matrix:O}},as=function(O,B,H,$){return e.extend(Es(O),Il(H,B,$))},bo=function(O,B){return{u_matrix:O,u_world:B}},nl=function(O,B,H,$,fe){return e.extend(as(O,B,H,$),{u_world:fe})},ts=function(O,B,H,$){var fe,ve,Te=O.transform;if("map"===$.paint.get("circle-pitch-alignment")){var Ee=Lr(H,1,Te.zoom);fe=!0,ve=[Ee,Ee]}else fe=!1,ve=Te.pixelsToGLUnits;return{u_camera_to_center_distance:Te.cameraToCenterDistance,u_scale_with_map:+("map"===$.paint.get("circle-pitch-scale")),u_matrix:O.translatePosMatrix(B.posMatrix,H,$.paint.get("circle-translate"),$.paint.get("circle-translate-anchor")),u_pitch_with_map:+fe,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:ve}},os=function(O,B,H){var $=Lr(H,1,B.zoom),fe=Math.pow(2,B.zoom-H.tileID.overscaledZ),ve=H.tileID.overscaleFactor();return{u_matrix:O,u_camera_to_center_distance:B.cameraToCenterDistance,u_pixels_to_tile_units:$,u_extrude_scale:[B.pixelsToGLUnits[0]/($*fe),B.pixelsToGLUnits[1]/($*fe)],u_overscale_factor:ve}},_s=function(O,B,H){return{u_matrix:O,u_inv_matrix:B,u_camera_to_center_distance:H.cameraToCenterDistance,u_viewport_size:[H.width,H.height]}},dl=function(O,B,H){return void 0===H&&(H=1),{u_matrix:O,u_color:B,u_overlay:0,u_overlay_scale:H}},ss=function(O){return{u_matrix:O}},Jo=function(O,B,H,$){return{u_matrix:O,u_extrude_scale:Lr(B,1,H),u_intensity:$}};function Wl(O,B){var H=Math.pow(2,B.canonical.z),$=B.canonical.y;return[new e.MercatorCoordinate(0,$/H).toLngLat().lat,new e.MercatorCoordinate(0,($+1)/H).toLngLat().lat]}var Ys=function(O,B,H){var $=O.transform;return{u_matrix:gt(O,B,H),u_ratio:1/Lr(B,1,$.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/$.pixelsToGLUnits[0],1/$.pixelsToGLUnits[1]]}},Va=function(O,B,H){return e.extend(Ys(O,B,H),{u_image:0})},Ye=function(O,B,H,$){var fe=O.transform,ve=ut(B,fe);return{u_matrix:gt(O,B,H),u_texsize:B.imageAtlasTexture.size,u_ratio:1/Lr(B,1,fe.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[ve,$.fromScale,$.toScale],u_fade:$.t,u_units_to_pixels:[1/fe.pixelsToGLUnits[0],1/fe.pixelsToGLUnits[1]]}},Ke=function(O,B,H,$,fe){var Te=O.lineAtlas,Ee=ut(B,O.transform),Fe="round"===H.layout.get("line-cap"),Ze=Te.getDash($.from,Fe),rt=Te.getDash($.to,Fe),ft=Ze.width*fe.fromScale,It=rt.width*fe.toScale;return e.extend(Ys(O,B,H),{u_patternscale_a:[Ee/ft,-Ze.height/2],u_patternscale_b:[Ee/It,-rt.height/2],u_sdfgamma:Te.width/(256*Math.min(ft,It)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Ze.y,u_tex_y_b:rt.y,u_mix:fe.t})};function ut(O,B){return 1/Lr(O,1,B.tileZoom)}function gt(O,B,H){return O.translatePosMatrix(B.tileID.posMatrix,B,H.paint.get("line-translate"),H.paint.get("line-translate-anchor"))}var Mt=function(O,B,H,$,fe){return{u_matrix:O,u_tl_parent:B,u_scale_parent:H,u_buffer_scale:1,u_fade_t:$.mix,u_opacity:$.opacity*fe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:fe.paint.get("raster-brightness-min"),u_brightness_high:fe.paint.get("raster-brightness-max"),u_saturation_factor:(Te=fe.paint.get("raster-saturation"),Te>0?1-1/(1.001-Te):-Te),u_contrast_factor:(ve=fe.paint.get("raster-contrast"),ve>0?1/(1-ve):1+ve),u_spin_weights:wt(fe.paint.get("raster-hue-rotate"))};var ve,Te};function wt(O){O*=Math.PI/180;var B=Math.sin(O),H=Math.cos(O);return[(2*H+1)/3,(-Math.sqrt(3)*B-H+1)/3,(Math.sqrt(3)*B-H+1)/3]}var zt,cn=function(O,B,H,$,fe,ve,Te,Ee,Fe,Ze){var rt=fe.transform;return{u_is_size_zoom_constant:+("constant"===O||"source"===O),u_is_size_feature_constant:+("constant"===O||"camera"===O),u_size_t:B?B.uSizeT:0,u_size:B?B.uSize:0,u_camera_to_center_distance:rt.cameraToCenterDistance,u_pitch:rt.pitch/360*2*Math.PI,u_rotate_symbol:+H,u_aspect_ratio:rt.width/rt.height,u_fade_change:fe.options.fadeDuration?fe.symbolFadeChange:1,u_matrix:ve,u_label_plane_matrix:Te,u_coord_matrix:Ee,u_is_text:+Fe,u_pitch_with_map:+$,u_texsize:Ze,u_texture:0}},hn=function(O,B,H,$,fe,ve,Te,Ee,Fe,Ze,rt){var ft=fe.transform;return e.extend(cn(O,B,H,$,fe,ve,Te,Ee,Fe,Ze),{u_gamma_scale:$?Math.cos(ft._pitch)*ft.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+rt})},ln=function(O,B,H,$,fe,ve,Te,Ee,Fe,Ze){return e.extend(hn(O,B,H,$,fe,ve,Te,Ee,!0,Fe,!0),{u_texsize_icon:Ze,u_texture_icon:1})},bn=function(O,B,H){return{u_matrix:O,u_opacity:B,u_color:H}},En=function(O,B,H,$,fe,ve){return e.extend((Ee=ve,Ze=fe,rt=(Fe=H).imageManager.getPattern((Te=$).from.toString()),ft=Fe.imageManager.getPattern(Te.to.toString()),Rt=(It=Fe.imageManager.getPixelSize()).width,Lt=It.height,Ot=Math.pow(2,Ze.tileID.overscaledZ),Gt=(St=Ze.tileSize*Math.pow(2,Fe.transform.tileZoom)/Ot)*(Ze.tileID.canonical.x+Ze.tileID.wrap*Ot),qt=St*Ze.tileID.canonical.y,{u_image:0,u_pattern_tl_a:rt.tl,u_pattern_br_a:rt.br,u_pattern_tl_b:ft.tl,u_pattern_br_b:ft.br,u_texsize:[Rt,Lt],u_mix:Ee.t,u_pattern_size_a:rt.displaySize,u_pattern_size_b:ft.displaySize,u_scale_a:Ee.fromScale,u_scale_b:Ee.toScale,u_tile_units_to_pixels:1/Lr(Ze,1,Fe.transform.tileZoom),u_pixel_coord_upper:[Gt>>16,qt>>16],u_pixel_coord_lower:[65535&Gt,65535&qt]}),{u_matrix:O,u_opacity:B});var Te,Ee,Fe,Ze,rt,ft,It,Rt,Lt,Ot,St,Gt,qt},On={fillExtrusion:function(O,B){return{u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_lightpos:new e.Uniform3f(O,B.u_lightpos),u_lightintensity:new e.Uniform1f(O,B.u_lightintensity),u_lightcolor:new e.Uniform3f(O,B.u_lightcolor),u_vertical_gradient:new e.Uniform1f(O,B.u_vertical_gradient),u_opacity:new e.Uniform1f(O,B.u_opacity)}},fillExtrusionPattern:function(O,B){return{u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_lightpos:new e.Uniform3f(O,B.u_lightpos),u_lightintensity:new e.Uniform1f(O,B.u_lightintensity),u_lightcolor:new e.Uniform3f(O,B.u_lightcolor),u_vertical_gradient:new e.Uniform1f(O,B.u_vertical_gradient),u_height_factor:new e.Uniform1f(O,B.u_height_factor),u_image:new e.Uniform1i(O,B.u_image),u_texsize:new e.Uniform2f(O,B.u_texsize),u_pixel_coord_upper:new e.Uniform2f(O,B.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(O,B.u_pixel_coord_lower),u_scale:new e.Uniform3f(O,B.u_scale),u_fade:new e.Uniform1f(O,B.u_fade),u_opacity:new e.Uniform1f(O,B.u_opacity)}},fill:function(O,B){return{u_matrix:new e.UniformMatrix4f(O,B.u_matrix)}},fillPattern:function(O,B){return{u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_image:new e.Uniform1i(O,B.u_image),u_texsize:new e.Uniform2f(O,B.u_texsize),u_pixel_coord_upper:new e.Uniform2f(O,B.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(O,B.u_pixel_coord_lower),u_scale:new e.Uniform3f(O,B.u_scale),u_fade:new e.Uniform1f(O,B.u_fade)}},fillOutline:function(O,B){return{u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_world:new e.Uniform2f(O,B.u_world)}},fillOutlinePattern:function(O,B){return{u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_world:new e.Uniform2f(O,B.u_world),u_image:new e.Uniform1i(O,B.u_image),u_texsize:new e.Uniform2f(O,B.u_texsize),u_pixel_coord_upper:new e.Uniform2f(O,B.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(O,B.u_pixel_coord_lower),u_scale:new e.Uniform3f(O,B.u_scale),u_fade:new e.Uniform1f(O,B.u_fade)}},circle:function(O,B){return{u_camera_to_center_distance:new e.Uniform1f(O,B.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(O,B.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(O,B.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(O,B.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(O,B.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(O,B.u_matrix)}},collisionBox:function(O,B){return{u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_camera_to_center_distance:new e.Uniform1f(O,B.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(O,B.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(O,B.u_extrude_scale),u_overscale_factor:new e.Uniform1f(O,B.u_overscale_factor)}},collisionCircle:function(O,B){return{u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_inv_matrix:new e.UniformMatrix4f(O,B.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(O,B.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(O,B.u_viewport_size)}},debug:function(O,B){return{u_color:new e.UniformColor(O,B.u_color),u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_overlay:new e.Uniform1i(O,B.u_overlay),u_overlay_scale:new e.Uniform1f(O,B.u_overlay_scale)}},clippingMask:function(O,B){return{u_matrix:new e.UniformMatrix4f(O,B.u_matrix)}},heatmap:function(O,B){return{u_extrude_scale:new e.Uniform1f(O,B.u_extrude_scale),u_intensity:new e.Uniform1f(O,B.u_intensity),u_matrix:new e.UniformMatrix4f(O,B.u_matrix)}},heatmapTexture:function(O,B){return{u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_world:new e.Uniform2f(O,B.u_world),u_image:new e.Uniform1i(O,B.u_image),u_color_ramp:new e.Uniform1i(O,B.u_color_ramp),u_opacity:new e.Uniform1f(O,B.u_opacity)}},hillshade:function(O,B){return{u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_image:new e.Uniform1i(O,B.u_image),u_latrange:new e.Uniform2f(O,B.u_latrange),u_light:new e.Uniform2f(O,B.u_light),u_shadow:new e.UniformColor(O,B.u_shadow),u_highlight:new e.UniformColor(O,B.u_highlight),u_accent:new e.UniformColor(O,B.u_accent)}},hillshadePrepare:function(O,B){return{u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_image:new e.Uniform1i(O,B.u_image),u_dimension:new e.Uniform2f(O,B.u_dimension),u_zoom:new e.Uniform1f(O,B.u_zoom),u_maxzoom:new e.Uniform1f(O,B.u_maxzoom),u_unpack:new e.Uniform4f(O,B.u_unpack)}},line:function(O,B){return{u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_ratio:new e.Uniform1f(O,B.u_ratio),u_device_pixel_ratio:new e.Uniform1f(O,B.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(O,B.u_units_to_pixels)}},lineGradient:function(O,B){return{u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_ratio:new e.Uniform1f(O,B.u_ratio),u_device_pixel_ratio:new e.Uniform1f(O,B.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(O,B.u_units_to_pixels),u_image:new e.Uniform1i(O,B.u_image)}},linePattern:function(O,B){return{u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_texsize:new e.Uniform2f(O,B.u_texsize),u_ratio:new e.Uniform1f(O,B.u_ratio),u_device_pixel_ratio:new e.Uniform1f(O,B.u_device_pixel_ratio),u_image:new e.Uniform1i(O,B.u_image),u_units_to_pixels:new e.Uniform2f(O,B.u_units_to_pixels),u_scale:new e.Uniform3f(O,B.u_scale),u_fade:new e.Uniform1f(O,B.u_fade)}},lineSDF:function(O,B){return{u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_ratio:new e.Uniform1f(O,B.u_ratio),u_device_pixel_ratio:new e.Uniform1f(O,B.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(O,B.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(O,B.u_patternscale_a),u_patternscale_b:new e.Uniform2f(O,B.u_patternscale_b),u_sdfgamma:new e.Uniform1f(O,B.u_sdfgamma),u_image:new e.Uniform1i(O,B.u_image),u_tex_y_a:new e.Uniform1f(O,B.u_tex_y_a),u_tex_y_b:new e.Uniform1f(O,B.u_tex_y_b),u_mix:new e.Uniform1f(O,B.u_mix)}},raster:function(O,B){return{u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_tl_parent:new e.Uniform2f(O,B.u_tl_parent),u_scale_parent:new e.Uniform1f(O,B.u_scale_parent),u_buffer_scale:new e.Uniform1f(O,B.u_buffer_scale),u_fade_t:new e.Uniform1f(O,B.u_fade_t),u_opacity:new e.Uniform1f(O,B.u_opacity),u_image0:new e.Uniform1i(O,B.u_image0),u_image1:new e.Uniform1i(O,B.u_image1),u_brightness_low:new e.Uniform1f(O,B.u_brightness_low),u_brightness_high:new e.Uniform1f(O,B.u_brightness_high),u_saturation_factor:new e.Uniform1f(O,B.u_saturation_factor),u_contrast_factor:new e.Uniform1f(O,B.u_contrast_factor),u_spin_weights:new e.Uniform3f(O,B.u_spin_weights)}},symbolIcon:function(O,B){return{u_is_size_zoom_constant:new e.Uniform1i(O,B.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(O,B.u_is_size_feature_constant),u_size_t:new e.Uniform1f(O,B.u_size_t),u_size:new e.Uniform1f(O,B.u_size),u_camera_to_center_distance:new e.Uniform1f(O,B.u_camera_to_center_distance),u_pitch:new e.Uniform1f(O,B.u_pitch),u_rotate_symbol:new e.Uniform1i(O,B.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(O,B.u_aspect_ratio),u_fade_change:new e.Uniform1f(O,B.u_fade_change),u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(O,B.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(O,B.u_coord_matrix),u_is_text:new e.Uniform1i(O,B.u_is_text),u_pitch_with_map:new e.Uniform1i(O,B.u_pitch_with_map),u_texsize:new e.Uniform2f(O,B.u_texsize),u_texture:new e.Uniform1i(O,B.u_texture)}},symbolSDF:function(O,B){return{u_is_size_zoom_constant:new e.Uniform1i(O,B.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(O,B.u_is_size_feature_constant),u_size_t:new e.Uniform1f(O,B.u_size_t),u_size:new e.Uniform1f(O,B.u_size),u_camera_to_center_distance:new e.Uniform1f(O,B.u_camera_to_center_distance),u_pitch:new e.Uniform1f(O,B.u_pitch),u_rotate_symbol:new e.Uniform1i(O,B.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(O,B.u_aspect_ratio),u_fade_change:new e.Uniform1f(O,B.u_fade_change),u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(O,B.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(O,B.u_coord_matrix),u_is_text:new e.Uniform1i(O,B.u_is_text),u_pitch_with_map:new e.Uniform1i(O,B.u_pitch_with_map),u_texsize:new e.Uniform2f(O,B.u_texsize),u_texture:new e.Uniform1i(O,B.u_texture),u_gamma_scale:new e.Uniform1f(O,B.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(O,B.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(O,B.u_is_halo)}},symbolTextAndIcon:function(O,B){return{u_is_size_zoom_constant:new e.Uniform1i(O,B.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(O,B.u_is_size_feature_constant),u_size_t:new e.Uniform1f(O,B.u_size_t),u_size:new e.Uniform1f(O,B.u_size),u_camera_to_center_distance:new e.Uniform1f(O,B.u_camera_to_center_distance),u_pitch:new e.Uniform1f(O,B.u_pitch),u_rotate_symbol:new e.Uniform1i(O,B.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(O,B.u_aspect_ratio),u_fade_change:new e.Uniform1f(O,B.u_fade_change),u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(O,B.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(O,B.u_coord_matrix),u_is_text:new e.Uniform1i(O,B.u_is_text),u_pitch_with_map:new e.Uniform1i(O,B.u_pitch_with_map),u_texsize:new e.Uniform2f(O,B.u_texsize),u_texsize_icon:new e.Uniform2f(O,B.u_texsize_icon),u_texture:new e.Uniform1i(O,B.u_texture),u_texture_icon:new e.Uniform1i(O,B.u_texture_icon),u_gamma_scale:new e.Uniform1f(O,B.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(O,B.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(O,B.u_is_halo)}},background:function(O,B){return{u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_opacity:new e.Uniform1f(O,B.u_opacity),u_color:new e.UniformColor(O,B.u_color)}},backgroundPattern:function(O,B){return{u_matrix:new e.UniformMatrix4f(O,B.u_matrix),u_opacity:new e.Uniform1f(O,B.u_opacity),u_image:new e.Uniform1i(O,B.u_image),u_pattern_tl_a:new e.Uniform2f(O,B.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(O,B.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(O,B.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(O,B.u_pattern_br_b),u_texsize:new e.Uniform2f(O,B.u_texsize),u_mix:new e.Uniform1f(O,B.u_mix),u_pattern_size_a:new e.Uniform2f(O,B.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(O,B.u_pattern_size_b),u_scale_a:new e.Uniform1f(O,B.u_scale_a),u_scale_b:new e.Uniform1f(O,B.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(O,B.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(O,B.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(O,B.u_tile_units_to_pixels)}}};function Nn(O,B,H,$,fe,ve,Te){for(var Ee=O.context,Fe=Ee.gl,Ze=O.useProgram("collisionBox"),rt=[],ft=0,It=0,Rt=0;Rt<$.length;Rt++){var Lt=$[Rt],Ot=B.getTile(Lt),St=Ot.getBucket(H);if(St){var Gt=Lt.posMatrix;0===fe[0]&&0===fe[1]||(Gt=O.translatePosMatrix(Lt.posMatrix,Ot,fe,ve));var qt=Te?St.textCollisionBox:St.iconCollisionBox,Zt=St.collisionCircleArray;if(Zt.length>0){var yn=e.create(),Sn=Gt;e.mul(yn,St.placementInvProjMatrix,O.transform.glCoordMatrix),e.mul(yn,yn,St.placementViewportMatrix),rt.push({circleArray:Zt,circleOffset:It,transform:Sn,invTransform:yn}),It=ft+=Zt.length/4}qt&&Ze.draw(Ee,Fe.LINES,sn.disabled,ke.disabled,O.colorModeForRenderPass(),Ce.disabled,os(Gt,O.transform,Ot),H.id,qt.layoutVertexBuffer,qt.indexBuffer,qt.segments,null,O.transform.zoom,null,null,qt.collisionVertexBuffer)}}if(Te&&rt.length){var qn=O.useProgram("collisionCircle"),Un=new e.StructArrayLayout2f1f2i16;Un.resize(4*ft),Un._trim();for(var mr=0,gr=0,Pr=rt;gr<Pr.length;gr+=1)for(var Cr=Pr[gr],di=0;di<Cr.circleArray.length/4;di++){var wi=4*di,Bi=Cr.circleArray[wi+0],ur=Cr.circleArray[wi+1],$r=Cr.circleArray[wi+2],Ti=Cr.circleArray[wi+3];Un.emplace(mr++,Bi,ur,$r,Ti,0),Un.emplace(mr++,Bi,ur,$r,Ti,1),Un.emplace(mr++,Bi,ur,$r,Ti,2),Un.emplace(mr++,Bi,ur,$r,Ti,3)}(!zt||zt.length<2*ft)&&(zt=function(Zi){var ra=2*Zi,Qi=new e.StructArrayLayout3ui6;Qi.resize(ra),Qi._trim();for(var fa=0;fa<ra;fa++){var Ma=6*fa;Qi.uint16[Ma+0]=4*fa+0,Qi.uint16[Ma+1]=4*fa+1,Qi.uint16[Ma+2]=4*fa+2,Qi.uint16[Ma+3]=4*fa+2,Qi.uint16[Ma+4]=4*fa+3,Qi.uint16[Ma+5]=4*fa+0}return Qi}(ft));for(var bi=Ee.createIndexBuffer(zt,!0),Si=Ee.createVertexBuffer(Un,e.collisionCircleLayout.members,!0),ji=0,ca=rt;ji<ca.length;ji+=1){var Ei=ca[ji],ta=_s(Ei.transform,Ei.invTransform,O.transform);qn.draw(Ee,Fe.TRIANGLES,sn.disabled,ke.disabled,O.colorModeForRenderPass(),Ce.disabled,ta,H.id,Si,bi,e.SegmentVector.simpleSegment(0,2*Ei.circleOffset,Ei.circleArray.length,Ei.circleArray.length/2),null,O.transform.zoom,null,null,null)}Si.destroy(),bi.destroy()}}var Xn=e.identity(new Float32Array(16));function Mr(O,B,H,$,fe,ve){var Te=e.getAnchorAlignment(O),Ee=-(Te.horizontalAlign-.5)*B,Fe=-(Te.verticalAlign-.5)*H,Ze=e.evaluateVariableOffset(O,$);return new e.Point((Ee/fe+Ze[0])*ve,(Fe/fe+Ze[1])*ve)}function Or(O,B,H,$,fe,ve,Te,Ee,Fe,Ze,rt){var ft=O.text.placedSymbolArray,It=O.text.dynamicLayoutVertexArray,Rt=O.icon.dynamicLayoutVertexArray,Lt={};It.clear();for(var Ot=0;Ot<ft.length;Ot++){var St=ft.get(Ot),qt=St.hidden||!St.crossTileID||O.allowVerticalPlacement&&!St.placedOrientation?null:$[St.crossTileID];if(qt){var Zt=new e.Point(St.anchorX,St.anchorY),yn=rn(Zt,H?Ee:Te),Sn=pn(ve.cameraToCenterDistance,yn.signedDistanceFromCamera),qn=fe.evaluateSizeForFeature(O.textSizeData,Ze,St)*Sn/e.ONE_EM;H&&(qn*=O.tilePixelRatio/Fe);for(var gr=Mr(qt.anchor,qt.width,qt.height,qt.textOffset,qt.textBoxScale,qn),Pr=H?rn(Zt.add(gr),Te).point:yn.point.add(B?gr.rotate(-ve.angle):gr),Cr=O.allowVerticalPlacement&&St.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,di=0;di<St.numGlyphs;di++)e.addDynamicAttributes(It,Pr,Cr);rt&&St.associatedIconIndex>=0&&(Lt[St.associatedIconIndex]={shiftedAnchor:Pr,angle:Cr})}else sr(St.numGlyphs,It)}if(rt){Rt.clear();for(var wi=O.icon.placedSymbolArray,Bi=0;Bi<wi.length;Bi++){var ur=wi.get(Bi);if(ur.hidden)sr(ur.numGlyphs,Rt);else{var $r=Lt[Bi];if($r)for(var Ti=0;Ti<ur.numGlyphs;Ti++)e.addDynamicAttributes(Rt,$r.shiftedAnchor,$r.angle);else sr(ur.numGlyphs,Rt)}}O.icon.dynamicLayoutVertexBuffer.updateData(Rt)}O.text.dynamicLayoutVertexBuffer.updateData(It)}function ii(O,B,H){return H.iconsInText&&B?"symbolTextAndIcon":O?"symbolSDF":"symbolIcon"}function ci(O,B,H,$,fe,ve,Te,Ee,Fe,Ze,rt,ft){for(var It=O.context,Rt=It.gl,Lt=O.transform,Ot="map"===Ee,St="map"===Fe,Gt=Ot&&"point"!==H.layout.get("symbol-placement"),qt=Ot&&!St&&!Gt,Zt=void 0!==H.layout.get("symbol-sort-key").constantOr(1),yn=O.depthModeForSublayer(0,sn.ReadOnly),Sn=H.layout.get("text-variable-anchor"),qn=[],Un=0,mr=$;Un<mr.length;Un+=1){var gr=mr[Un],Pr=B.getTile(gr),Cr=Pr.getBucket(H);if(Cr){var di=fe?Cr.text:Cr.icon;if(di&&di.segments.get().length){var wi=di.programConfigurations.get(H.id),Bi=fe||Cr.sdfIcons,ur=fe?Cr.textSizeData:Cr.iconSizeData,$r=St||0!==Lt.pitch,Ti=O.useProgram(ii(Bi,fe,Cr),wi),bi=e.evaluateSizeForZoom(ur,Lt.zoom),Si=void 0,ji=[0,0],ca=void 0,Ei=void 0,ta=null,Zi=void 0;if(fe)ca=Pr.glyphAtlasTexture,Ei=Rt.LINEAR,Si=Pr.glyphAtlasTexture.size,Cr.iconsInText&&(ji=Pr.imageAtlasTexture.size,ta=Pr.imageAtlasTexture,Zi=$r||O.options.rotating||O.options.zooming||"composite"===ur.kind||"camera"===ur.kind?Rt.LINEAR:Rt.NEAREST);else{var Qi=1!==H.layout.get("icon-size").constantOr(0)||Cr.iconsNeedLinear;ca=Pr.imageAtlasTexture,Ei=Bi||O.options.rotating||O.options.zooming||Qi||$r?Rt.LINEAR:Rt.NEAREST,Si=Pr.imageAtlasTexture.size}var fa=Lr(Pr,1,O.transform.zoom),Ma=Dn(gr.posMatrix,St,Ot,O.transform,fa),no=kn(gr.posMatrix,St,Ot,O.transform,fa),xo=Sn&&Cr.hasTextData(),_o="none"!==H.layout.get("icon-text-fit")&&xo&&Cr.hasIconData();Gt&&Pn(Cr,gr.posMatrix,O,fe,Ma,no,St,Ze);var lo=O.translatePosMatrix(gr.posMatrix,Pr,ve,Te),uo=Gt||fe&&Sn||_o?Xn:Ma,Do=O.translatePosMatrix(no,Pr,ve,Te,!0),Fs=Bi&&0!==H.paint.get(fe?"text-halo-width":"icon-halo-width").constantOr(1),cs={program:Ti,buffers:di,uniformValues:Bi?Cr.iconsInText?ln(ur.kind,bi,qt,St,O,lo,uo,Do,Si,ji):hn(ur.kind,bi,qt,St,O,lo,uo,Do,fe,Si,!0):cn(ur.kind,bi,qt,St,O,lo,uo,Do,fe,Si),atlasTexture:ca,atlasTextureIcon:ta,atlasInterpolation:Ei,atlasInterpolationIcon:Zi,isSDF:Bi,hasHalo:Fs};if(Zt)for(var il=0,iu=di.segments.get();il<iu.length;il+=1){var ma=iu[il];qn.push({segments:new e.SegmentVector([ma]),sortKey:ma.sortKey,state:cs})}else qn.push({segments:di.segments,sortKey:0,state:cs})}}}Zt&&qn.sort(function(bf,Rl){return bf.sortKey-Rl.sortKey});for(var Gc=0,ec=qn;Gc<ec.length;Gc+=1){var Wc=ec[Gc],Ns=Wc.state;if(It.activeTexture.set(Rt.TEXTURE0),Ns.atlasTexture.bind(Ns.atlasInterpolation,Rt.CLAMP_TO_EDGE),Ns.atlasTextureIcon&&(It.activeTexture.set(Rt.TEXTURE1),Ns.atlasTextureIcon&&Ns.atlasTextureIcon.bind(Ns.atlasInterpolationIcon,Rt.CLAMP_TO_EDGE)),Ns.isSDF){var wc=Ns.uniformValues;Ns.hasHalo&&(wc.u_is_halo=1,vi(Ns.buffers,Wc.segments,H,O,Ns.program,yn,rt,ft,wc)),wc.u_is_halo=0}vi(Ns.buffers,Wc.segments,H,O,Ns.program,yn,rt,ft,Ns.uniformValues)}}function vi(O,B,H,$,fe,ve,Te,Ee,Fe){var Ze=$.context;fe.draw(Ze,Ze.gl.TRIANGLES,ve,Te,Ee,Ce.disabled,Fe,H.id,O.layoutVertexBuffer,O.indexBuffer,B,H.paint,$.transform.zoom,O.programConfigurations.get(H.id),O.dynamicLayoutVertexBuffer,O.opacityVertexBuffer)}function ai(O,B,H,$,fe,ve,Te){var Ee,Fe,Ze,rt,ft,It=O.context.gl,Rt=H.paint.get("fill-pattern"),Lt=Rt&&Rt.constantOr(1),Ot=H.getCrossfadeParameters();Te?(Fe=Lt&&!H.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Ee=It.LINES):(Fe=Lt?"fillPattern":"fill",Ee=It.TRIANGLES);for(var St=0,Gt=$;St<Gt.length;St+=1){var qt=Gt[St],Zt=B.getTile(qt);if(!Lt||Zt.patternsLoaded()){var yn=Zt.getBucket(H);if(yn){var Sn=yn.programConfigurations.get(H.id),qn=O.useProgram(Fe,Sn);Lt&&(O.context.activeTexture.set(It.TEXTURE0),Zt.imageAtlasTexture.bind(It.LINEAR,It.CLAMP_TO_EDGE),Sn.updatePaintBuffers(Ot));var Un=Rt.constantOr(null);if(Un&&Zt.imageAtlas){var mr=Zt.imageAtlas,gr=mr.patternPositions[Un.to.toString()],Pr=mr.patternPositions[Un.from.toString()];gr&&Pr&&Sn.setConstantPatternPositions(gr,Pr)}var Cr=O.translatePosMatrix(qt.posMatrix,Zt,H.paint.get("fill-translate"),H.paint.get("fill-translate-anchor"));if(Te){rt=yn.indexBuffer2,ft=yn.segments2;var di=[It.drawingBufferWidth,It.drawingBufferHeight];Ze="fillOutlinePattern"===Fe&&Lt?nl(Cr,O,Ot,Zt,di):bo(Cr,di)}else rt=yn.indexBuffer,ft=yn.segments,Ze=Lt?as(Cr,O,Ot,Zt):Es(Cr);qn.draw(O.context,Ee,fe,O.stencilModeForClipping(qt),ve,Ce.disabled,Ze,H.id,yn.layoutVertexBuffer,rt,ft,H.paint,O.transform.zoom,Sn)}}}}function Yi(O,B,H,$,fe,ve,Te){for(var Ee=O.context,Fe=Ee.gl,Ze=H.paint.get("fill-extrusion-pattern"),rt=Ze.constantOr(1),ft=H.getCrossfadeParameters(),It=H.paint.get("fill-extrusion-opacity"),Rt=0,Lt=$;Rt<Lt.length;Rt+=1){var Ot=Lt[Rt],St=B.getTile(Ot),Gt=St.getBucket(H);if(Gt){var qt=Gt.programConfigurations.get(H.id),Zt=O.useProgram(rt?"fillExtrusionPattern":"fillExtrusion",qt);rt&&(O.context.activeTexture.set(Fe.TEXTURE0),St.imageAtlasTexture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),qt.updatePaintBuffers(ft));var yn=Ze.constantOr(null);if(yn&&St.imageAtlas){var Sn=St.imageAtlas,qn=Sn.patternPositions[yn.to.toString()],Un=Sn.patternPositions[yn.from.toString()];qn&&Un&&qt.setConstantPatternPositions(qn,Un)}var mr=O.translatePosMatrix(Ot.posMatrix,St,H.paint.get("fill-extrusion-translate"),H.paint.get("fill-extrusion-translate-anchor")),gr=H.paint.get("fill-extrusion-vertical-gradient"),Pr=rt?kl(mr,O,gr,It,Ot,ft,St):Pl(mr,O,gr,It);Zt.draw(Ee,Ee.gl.TRIANGLES,fe,ve,Te,Ce.backCCW,Pr,H.id,Gt.layoutVertexBuffer,Gt.indexBuffer,Gt.segments,H.paint,O.transform.zoom,qt)}}}function Ni(O,B,H,$,fe,ve){var Te=O.context,Ee=Te.gl,Fe=B.fbo;if(Fe){var Ze=O.useProgram("hillshade");Te.activeTexture.set(Ee.TEXTURE0),Ee.bindTexture(Ee.TEXTURE_2D,Fe.colorAttachment.get());var rt=function(ft,It,Rt){var Lt=Rt.paint.get("hillshade-shadow-color"),Ot=Rt.paint.get("hillshade-highlight-color"),St=Rt.paint.get("hillshade-accent-color"),Gt=Rt.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Rt.paint.get("hillshade-illumination-anchor")&&(Gt-=ft.transform.angle);var qt=!ft.options.moving;return{u_matrix:ft.transform.calculatePosMatrix(It.tileID.toUnwrapped(),qt),u_image:0,u_latrange:Wl(0,It.tileID),u_light:[Rt.paint.get("hillshade-exaggeration"),Gt],u_shadow:Lt,u_highlight:Ot,u_accent:St}}(O,B,H);Ze.draw(Te,Ee.TRIANGLES,$,fe,ve,Ce.disabled,rt,H.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments)}}function Sa(O,B,H,$,fe,ve,Te){var St,Gt,qt,Zt,yn,Ee=O.context,Fe=Ee.gl,Ze=B.dem;if(Ze&&Ze.data){var rt=Ze.dim,ft=Ze.stride,It=Ze.getPixels();if(Ee.activeTexture.set(Fe.TEXTURE1),Ee.pixelStoreUnpackPremultiplyAlpha.set(!1),B.demTexture=B.demTexture||O.getTileTexture(ft),B.demTexture){var Rt=B.demTexture;Rt.update(It,{premultiply:!1}),Rt.bind(Fe.NEAREST,Fe.CLAMP_TO_EDGE)}else B.demTexture=new e.Texture(Ee,It,Fe.RGBA,{premultiply:!1}),B.demTexture.bind(Fe.NEAREST,Fe.CLAMP_TO_EDGE);Ee.activeTexture.set(Fe.TEXTURE0);var Lt=B.fbo;if(!Lt){var Ot=new e.Texture(Ee,{width:rt,height:rt,data:null},Fe.RGBA);Ot.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),(Lt=B.fbo=Ee.createFramebuffer(rt,rt,!0)).colorAttachment.set(Ot.texture)}Ee.bindFramebuffer.set(Lt.framebuffer),Ee.viewport.set([0,0,rt,rt]),O.useProgram("hillshadePrepare").draw(Ee,Fe.TRIANGLES,fe,ve,Te,Ce.disabled,(St=B.tileID,qt=$,Zt=(Gt=Ze).stride,yn=e.create(),e.ortho(yn,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(yn,yn,[0,-e.EXTENT,0]),{u_matrix:yn,u_image:1,u_dimension:[Zt,Zt],u_zoom:St.overscaledZ,u_maxzoom:qt,u_unpack:Gt.getUnpackVector()}),H.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments),B.needsHillshadePrepare=!1}}function Da(O,B,H,$,fe){var ve=$.paint.get("raster-fade-duration");if(ve>0){var Te=e.browser.now(),Ee=(Te-O.timeAdded)/ve,Fe=B?(Te-B.timeAdded)/ve:-1,Ze=H.getSource(),rt=fe.coveringZoomLevel({tileSize:Ze.tileSize,roundZoom:Ze.roundZoom}),ft=!B||Math.abs(B.tileID.overscaledZ-rt)>Math.abs(O.tileID.overscaledZ-rt),It=ft&&O.refreshedUponExpiration?1:e.clamp(ft?Ee:1-Fe,0,1);return O.refreshedUponExpiration&&Ee>=1&&(O.refreshedUponExpiration=!1),B?{opacity:1,mix:1-It}:{opacity:It,mix:0}}return{opacity:1,mix:0}}var Oa=new e.Color(1,0,0,1),Co=new e.Color(0,1,0,1),Mo=new e.Color(0,0,1,1),io=new e.Color(1,0,1,1),Ja=new e.Color(0,1,1,1);function to(O,B,H,$){gs(O,0,B+H/2,O.transform.width,H,$)}function ps(O,B,H,$){gs(O,B-H/2,0,H,O.transform.height,$)}function gs(O,B,H,$,fe,ve){var Te=O.context,Ee=Te.gl;Ee.enable(Ee.SCISSOR_TEST),Ee.scissor(B*e.browser.devicePixelRatio,H*e.browser.devicePixelRatio,$*e.browser.devicePixelRatio,fe*e.browser.devicePixelRatio),Te.clear({color:ve}),Ee.disable(Ee.SCISSOR_TEST)}function ls(O,B,H){var $=O.context,fe=$.gl,ve=H.posMatrix,Te=O.useProgram("debug"),Ee=sn.disabled,Fe=ke.disabled,Ze=O.colorModeForRenderPass();$.activeTexture.set(fe.TEXTURE0),O.emptyTexture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),Te.draw($,fe.LINE_STRIP,Ee,Fe,Ze,Ce.disabled,dl(ve,e.Color.red),"$debug",O.debugBuffer,O.tileBorderIndexBuffer,O.debugSegments);var rt=B.getTileByID(H.key).latestRawTileData,It=Math.floor((rt&&rt.byteLength||0)/1024),Rt=B.getTile(H).tileSize,Lt=512/Math.min(Rt,512)*(H.overscaledZ/O.transform.zoom)*.5,Ot=H.canonical.toString();H.overscaledZ!==H.canonical.z&&(Ot+=" => "+H.overscaledZ),function(St,Gt){St.initDebugOverlayCanvas();var qt=St.debugOverlayCanvas,Zt=St.context.gl,yn=St.debugOverlayCanvas.getContext("2d");yn.clearRect(0,0,qt.width,qt.height),yn.shadowColor="white",yn.shadowBlur=2,yn.lineWidth=1.5,yn.strokeStyle="white",yn.textBaseline="top",yn.font="bold 36px Open Sans, sans-serif",yn.fillText(Gt,5,5),yn.strokeText(Gt,5,5),St.debugOverlayTexture.update(qt),St.debugOverlayTexture.bind(Zt.LINEAR,Zt.CLAMP_TO_EDGE)}(O,Ot+" "+It+"kb"),Te.draw($,fe.TRIANGLES,Ee,Fe,Se.alphaBlended,Ce.disabled,dl(ve,e.Color.transparent,Lt),"$debug",O.debugBuffer,O.quadTriangleIndexBuffer,O.debugSegments)}var ws={symbol:function(O,B,H,$,fe){if("translucent"===O.renderPass){var ve=ke.disabled,Te=O.colorModeForRenderPass();H.layout.get("text-variable-anchor")&&function(Ee,Fe,Ze,rt,ft,It,Rt){for(var Lt=Fe.transform,Ot="map"===ft,St="map"===It,Gt=0,qt=Ee;Gt<qt.length;Gt+=1){var Zt=qt[Gt],yn=rt.getTile(Zt),Sn=yn.getBucket(Ze);if(Sn&&Sn.text&&Sn.text.segments.get().length){var Un=e.evaluateSizeForZoom(Sn.textSizeData,Lt.zoom),mr=Lr(yn,1,Fe.transform.zoom),gr=Dn(Zt.posMatrix,St,Ot,Fe.transform,mr),Pr="none"!==Ze.layout.get("icon-text-fit")&&Sn.hasIconData();if(Un){var Cr=Math.pow(2,Lt.zoom-yn.tileID.overscaledZ);Or(Sn,Ot,St,Rt,e.symbolSize,Lt,gr,Zt.posMatrix,Cr,Un,Pr)}}}}($,O,H,B,H.layout.get("text-rotation-alignment"),H.layout.get("text-pitch-alignment"),fe),0!==H.paint.get("icon-opacity").constantOr(1)&&ci(O,B,H,$,!1,H.paint.get("icon-translate"),H.paint.get("icon-translate-anchor"),H.layout.get("icon-rotation-alignment"),H.layout.get("icon-pitch-alignment"),H.layout.get("icon-keep-upright"),ve,Te),0!==H.paint.get("text-opacity").constantOr(1)&&ci(O,B,H,$,!0,H.paint.get("text-translate"),H.paint.get("text-translate-anchor"),H.layout.get("text-rotation-alignment"),H.layout.get("text-pitch-alignment"),H.layout.get("text-keep-upright"),ve,Te),B.map.showCollisionBoxes&&(Nn(O,B,H,$,H.paint.get("text-translate"),H.paint.get("text-translate-anchor"),!0),Nn(O,B,H,$,H.paint.get("icon-translate"),H.paint.get("icon-translate-anchor"),!1))}},circle:function(O,B,H,$){if("translucent"===O.renderPass){var fe=H.paint.get("circle-opacity"),ve=H.paint.get("circle-stroke-width"),Te=H.paint.get("circle-stroke-opacity"),Ee=void 0!==H.layout.get("circle-sort-key").constantOr(1);if(0!==fe.constantOr(1)||0!==ve.constantOr(1)&&0!==Te.constantOr(1)){for(var Fe=O.context,Ze=Fe.gl,rt=O.depthModeForSublayer(0,sn.ReadOnly),ft=ke.disabled,It=O.colorModeForRenderPass(),Rt=[],Lt=0;Lt<$.length;Lt++){var Ot=$[Lt],St=B.getTile(Ot),Gt=St.getBucket(H);if(Gt){var qt=Gt.programConfigurations.get(H.id),Zt={programConfiguration:qt,program:O.useProgram("circle",qt),layoutVertexBuffer:Gt.layoutVertexBuffer,indexBuffer:Gt.indexBuffer,uniformValues:ts(O,Ot,St,H)};if(Ee)for(var yn=0,Sn=Gt.segments.get();yn<Sn.length;yn+=1){var qn=Sn[yn];Rt.push({segments:new e.SegmentVector([qn]),sortKey:qn.sortKey,state:Zt})}else Rt.push({segments:Gt.segments,sortKey:0,state:Zt})}}Ee&&Rt.sort(function(Ti,bi){return Ti.sortKey-bi.sortKey});for(var Un=0,mr=Rt;Un<mr.length;Un+=1){var gr=mr[Un],Pr=gr.state;Pr.program.draw(Fe,Ze.TRIANGLES,rt,ft,It,Ce.disabled,Pr.uniformValues,H.id,Pr.layoutVertexBuffer,Pr.indexBuffer,gr.segments,H.paint,O.transform.zoom,Pr.programConfiguration)}}}},heatmap:function(O,B,H,$){if(0!==H.paint.get("heatmap-opacity"))if("offscreen"===O.renderPass){var fe=O.context,ve=fe.gl,Te=ke.disabled,Ee=new Se([ve.ONE,ve.ONE],e.Color.transparent,[!0,!0,!0,!0]);(function(Ot,St,Gt){var qt=Ot.gl;Ot.activeTexture.set(qt.TEXTURE1),Ot.viewport.set([0,0,St.width/4,St.height/4]);var Sn,qn,Un,mr,gr,Zt=Gt.heatmapFbo;if(Zt)qt.bindTexture(qt.TEXTURE_2D,Zt.colorAttachment.get()),Ot.bindFramebuffer.set(Zt.framebuffer);else{var yn=qt.createTexture();qt.bindTexture(qt.TEXTURE_2D,yn),qt.texParameteri(qt.TEXTURE_2D,qt.TEXTURE_WRAP_S,qt.CLAMP_TO_EDGE),qt.texParameteri(qt.TEXTURE_2D,qt.TEXTURE_WRAP_T,qt.CLAMP_TO_EDGE),qt.texParameteri(qt.TEXTURE_2D,qt.TEXTURE_MIN_FILTER,qt.LINEAR),qt.texParameteri(qt.TEXTURE_2D,qt.TEXTURE_MAG_FILTER,qt.LINEAR),Un=yn,mr=Zt=Gt.heatmapFbo=Ot.createFramebuffer(St.width/4,St.height/4,!1),(gr=(Sn=Ot).gl).texImage2D(gr.TEXTURE_2D,0,gr.RGBA,(qn=St).width/4,qn.height/4,0,gr.RGBA,Sn.extRenderToTextureHalfFloat?Sn.extTextureHalfFloat.HALF_FLOAT_OES:gr.UNSIGNED_BYTE,null),mr.colorAttachment.set(Un)}})(fe,O,H),fe.clear({color:e.Color.transparent});for(var Fe=0;Fe<$.length;Fe++){var Ze=$[Fe];if(!B.hasRenderableParent(Ze)){var rt=B.getTile(Ze),ft=rt.getBucket(H);if(ft){var It=ft.programConfigurations.get(H.id);O.useProgram("heatmap",It).draw(fe,ve.TRIANGLES,sn.disabled,Te,Ee,Ce.disabled,Jo(Ze.posMatrix,rt,O.transform.zoom,H.paint.get("heatmap-intensity")),H.id,ft.layoutVertexBuffer,ft.indexBuffer,ft.segments,H.paint,O.transform.zoom,It)}}}fe.viewport.set([0,0,O.width,O.height])}else"translucent"===O.renderPass&&(O.context.setColorMode(O.colorModeForRenderPass()),function(Ot,St){var Gt=Ot.context,qt=Gt.gl,Zt=St.heatmapFbo;if(Zt){Gt.activeTexture.set(qt.TEXTURE0),qt.bindTexture(qt.TEXTURE_2D,Zt.colorAttachment.get()),Gt.activeTexture.set(qt.TEXTURE1);var yn=St.colorRampTexture;yn||(yn=St.colorRampTexture=new e.Texture(Gt,St.colorRamp,qt.RGBA)),yn.bind(qt.LINEAR,qt.CLAMP_TO_EDGE),Ot.useProgram("heatmapTexture").draw(Gt,qt.TRIANGLES,sn.disabled,ke.disabled,Ot.colorModeForRenderPass(),Ce.disabled,function(Sn,qn,Un,mr){var gr=e.create();e.ortho(gr,0,Sn.width,Sn.height,0,0,1);var Pr=Sn.context.gl;return{u_matrix:gr,u_world:[Pr.drawingBufferWidth,Pr.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:qn.paint.get("heatmap-opacity")}}(Ot,St),St.id,Ot.viewportBuffer,Ot.quadTriangleIndexBuffer,Ot.viewportSegments,St.paint,Ot.transform.zoom)}}(O,H))},line:function(O,B,H,$){if("translucent"===O.renderPass){var fe=H.paint.get("line-opacity"),ve=H.paint.get("line-width");if(0!==fe.constantOr(1)&&0!==ve.constantOr(1)){var Te=O.depthModeForSublayer(0,sn.ReadOnly),Ee=O.colorModeForRenderPass(),Fe=H.paint.get("line-dasharray"),Ze=H.paint.get("line-pattern"),rt=Ze.constantOr(1),ft=H.paint.get("line-gradient"),It=H.getCrossfadeParameters(),Rt=rt?"linePattern":Fe?"lineSDF":ft?"lineGradient":"line",Lt=O.context,Ot=Lt.gl,St=!0;if(ft){Lt.activeTexture.set(Ot.TEXTURE0);var Gt=H.gradientTexture;if(!H.gradient)return;Gt||(Gt=H.gradientTexture=new e.Texture(Lt,H.gradient,Ot.RGBA)),Gt.bind(Ot.LINEAR,Ot.CLAMP_TO_EDGE)}for(var qt=0,Zt=$;qt<Zt.length;qt+=1){var yn=Zt[qt],Sn=B.getTile(yn);if(!rt||Sn.patternsLoaded()){var qn=Sn.getBucket(H);if(qn){var Un=qn.programConfigurations.get(H.id),mr=O.context.program.get(),gr=O.useProgram(Rt,Un),Pr=St||gr.program!==mr,Cr=Ze.constantOr(null);if(Cr&&Sn.imageAtlas){var di=Sn.imageAtlas,wi=di.patternPositions[Cr.to.toString()],Bi=di.patternPositions[Cr.from.toString()];wi&&Bi&&Un.setConstantPatternPositions(wi,Bi)}var ur=rt?Ye(O,Sn,H,It):Fe?Ke(O,Sn,H,Fe,It):ft?Va(O,Sn,H):Ys(O,Sn,H);rt?(Lt.activeTexture.set(Ot.TEXTURE0),Sn.imageAtlasTexture.bind(Ot.LINEAR,Ot.CLAMP_TO_EDGE),Un.updatePaintBuffers(It)):Fe&&(Pr||O.lineAtlas.dirty)&&(Lt.activeTexture.set(Ot.TEXTURE0),O.lineAtlas.bind(Lt)),gr.draw(Lt,Ot.TRIANGLES,Te,O.stencilModeForClipping(yn),Ee,Ce.disabled,ur,H.id,qn.layoutVertexBuffer,qn.indexBuffer,qn.segments,H.paint,O.transform.zoom,Un),St=!1}}}}}},fill:function(O,B,H,$){var fe=H.paint.get("fill-color"),ve=H.paint.get("fill-opacity");if(0!==ve.constantOr(1)){var Te=O.colorModeForRenderPass(),Ee=H.paint.get("fill-pattern"),Fe=O.opaquePassEnabledForLayer()&&!Ee.constantOr(1)&&1===fe.constantOr(e.Color.transparent).a&&1===ve.constantOr(0)?"opaque":"translucent";if(O.renderPass===Fe){var Ze=O.depthModeForSublayer(1,"opaque"===O.renderPass?sn.ReadWrite:sn.ReadOnly);ai(O,B,H,$,Ze,Te,!1)}if("translucent"===O.renderPass&&H.paint.get("fill-antialias")){var rt=O.depthModeForSublayer(H.getPaintProperty("fill-outline-color")?2:0,sn.ReadOnly);ai(O,B,H,$,rt,Te,!0)}}},"fill-extrusion":function(O,B,H,$){var fe=H.paint.get("fill-extrusion-opacity");if(0!==fe&&"translucent"===O.renderPass){var ve=new sn(O.context.gl.LEQUAL,sn.ReadWrite,O.depthRangeFor3D);if(1!==fe||H.paint.get("fill-extrusion-pattern").constantOr(1))Yi(O,B,H,$,ve,ke.disabled,Se.disabled),Yi(O,B,H,$,ve,O.stencilModeFor3D(),O.colorModeForRenderPass());else{var Te=O.colorModeForRenderPass();Yi(O,B,H,$,ve,ke.disabled,Te)}}},hillshade:function(O,B,H,$){if("offscreen"===O.renderPass||"translucent"===O.renderPass){for(var fe=O.context,ve=B.getSource().maxzoom,Te=O.depthModeForSublayer(0,sn.ReadOnly),Ee=O.colorModeForRenderPass(),Fe="translucent"===O.renderPass?O.stencilConfigForOverlap($):[{},$],Ze=Fe[0],rt=0,ft=Fe[1];rt<ft.length;rt+=1){var It=ft[rt],Rt=B.getTile(It);Rt.needsHillshadePrepare&&"offscreen"===O.renderPass?Sa(O,Rt,H,ve,Te,ke.disabled,Ee):"translucent"===O.renderPass&&Ni(O,Rt,H,Te,Ze[It.overscaledZ],Ee)}fe.viewport.set([0,0,O.width,O.height])}},raster:function(O,B,H,$){if("translucent"===O.renderPass&&0!==H.paint.get("raster-opacity")&&$.length)for(var fe=O.context,ve=fe.gl,Te=B.getSource(),Ee=O.useProgram("raster"),Fe=O.colorModeForRenderPass(),Ze=Te instanceof X?[{},$]:O.stencilConfigForOverlap($),rt=Ze[0],ft=Ze[1],It=ft[ft.length-1].overscaledZ,Rt=!O.options.moving,Lt=0,Ot=ft;Lt<Ot.length;Lt+=1){var St=Ot[Lt],Gt=O.depthModeForSublayer(St.overscaledZ-It,1===H.paint.get("raster-opacity")?sn.ReadWrite:sn.ReadOnly,ve.LESS),qt=B.getTile(St),Zt=O.transform.calculatePosMatrix(St.toUnwrapped(),Rt);qt.registerFadeDuration(H.paint.get("raster-fade-duration"));var yn=B.findLoadedParent(St,0),Sn=Da(qt,yn,B,H,O.transform),qn=void 0,Un=void 0,mr="nearest"===H.paint.get("raster-resampling")?ve.NEAREST:ve.LINEAR;fe.activeTexture.set(ve.TEXTURE0),qt.texture.bind(mr,ve.CLAMP_TO_EDGE,ve.LINEAR_MIPMAP_NEAREST),fe.activeTexture.set(ve.TEXTURE1),yn?(yn.texture.bind(mr,ve.CLAMP_TO_EDGE,ve.LINEAR_MIPMAP_NEAREST),qn=Math.pow(2,yn.tileID.overscaledZ-qt.tileID.overscaledZ),Un=[qt.tileID.canonical.x*qn%1,qt.tileID.canonical.y*qn%1]):qt.texture.bind(mr,ve.CLAMP_TO_EDGE,ve.LINEAR_MIPMAP_NEAREST);var gr=Mt(Zt,Un||[0,0],qn||1,Sn,H);Te instanceof X?Ee.draw(fe,ve.TRIANGLES,Gt,ke.disabled,Fe,Ce.disabled,gr,H.id,Te.boundsBuffer,O.quadTriangleIndexBuffer,Te.boundsSegments):Ee.draw(fe,ve.TRIANGLES,Gt,rt[St.overscaledZ],Fe,Ce.disabled,gr,H.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments)}},background:function(O,B,H){var $=H.paint.get("background-color"),fe=H.paint.get("background-opacity");if(0!==fe){var ve=O.context,Te=ve.gl,Ee=O.transform,Fe=Ee.tileSize,Ze=H.paint.get("background-pattern");if(!O.isPatternMissing(Ze)){var rt=!Ze&&1===$.a&&1===fe&&O.opaquePassEnabledForLayer()?"opaque":"translucent";if(O.renderPass===rt){var ft=ke.disabled,It=O.depthModeForSublayer(0,"opaque"===rt?sn.ReadWrite:sn.ReadOnly),Rt=O.colorModeForRenderPass(),Lt=O.useProgram(Ze?"backgroundPattern":"background"),Ot=Ee.coveringTiles({tileSize:Fe});Ze&&(ve.activeTexture.set(Te.TEXTURE0),O.imageManager.bind(O.context));for(var St=H.getCrossfadeParameters(),Gt=0,qt=Ot;Gt<qt.length;Gt+=1){var Zt=qt[Gt],yn=O.transform.calculatePosMatrix(Zt.toUnwrapped()),Sn=Ze?En(yn,fe,O,Ze,{tileID:Zt,tileSize:Fe},St):bn(yn,fe,$);Lt.draw(ve,Te.TRIANGLES,It,ft,Rt,Ce.disabled,Sn,H.id,O.tileExtentBuffer,O.quadTriangleIndexBuffer,O.tileExtentSegments)}}}}},debug:function(O,B,H){for(var $=0;$<H.length;$++)ls(O,B,H[$])},custom:function(O,B,H){var $=O.context,fe=H.implementation;if("offscreen"===O.renderPass){var ve=fe.prerender;ve&&(O.setCustomLayerDefaults(),$.setColorMode(O.colorModeForRenderPass()),ve.call(fe,$.gl,O.transform.customLayerMatrix()),$.setDirty(),O.setBaseState())}else if("translucent"===O.renderPass){O.setCustomLayerDefaults(),$.setColorMode(O.colorModeForRenderPass()),$.setStencilMode(ke.disabled);var Te="3d"===fe.renderingMode?new sn(O.context.gl.LEQUAL,sn.ReadWrite,O.depthRangeFor3D):O.depthModeForSublayer(0,sn.ReadOnly);$.setDepthMode(Te),fe.render($.gl,O.transform.customLayerMatrix()),$.setDirty(),O.setBaseState(),$.bindFramebuffer.set(null)}}},ba=function(O,B){this.context=new Ve(O),this.transform=B,this._tileTextures={},this.setup(),this.numSublayers=Ge.maxUnderzooming+Ge.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new hr,this.gpuTimers={}};ba.prototype.resize=function(O,B){if(this.width=O*e.browser.devicePixelRatio,this.height=B*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var H=0,$=this.style._order;H<$.length;H+=1)this.style._layers[$[H]].resize()},ba.prototype.setup=function(){var O=this.context,B=new e.StructArrayLayout2i4;B.emplaceBack(0,0),B.emplaceBack(e.EXTENT,0),B.emplaceBack(0,e.EXTENT),B.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=O.createVertexBuffer(B,ei.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var H=new e.StructArrayLayout2i4;H.emplaceBack(0,0),H.emplaceBack(e.EXTENT,0),H.emplaceBack(0,e.EXTENT),H.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=O.createVertexBuffer(H,ei.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var $=new e.StructArrayLayout4i8;$.emplaceBack(0,0,0,0),$.emplaceBack(e.EXTENT,0,e.EXTENT,0),$.emplaceBack(0,e.EXTENT,0,e.EXTENT),$.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=O.createVertexBuffer($,re.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var fe=new e.StructArrayLayout2i4;fe.emplaceBack(0,0),fe.emplaceBack(1,0),fe.emplaceBack(0,1),fe.emplaceBack(1,1),this.viewportBuffer=O.createVertexBuffer(fe,ei.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var ve=new e.StructArrayLayout1ui2;ve.emplaceBack(0),ve.emplaceBack(1),ve.emplaceBack(3),ve.emplaceBack(2),ve.emplaceBack(0),this.tileBorderIndexBuffer=O.createIndexBuffer(ve);var Te=new e.StructArrayLayout3ui6;Te.emplaceBack(0,1,2),Te.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=O.createIndexBuffer(Te),this.emptyTexture=new e.Texture(O,{width:1,height:1,data:new Uint8Array([0,0,0,0])},O.gl.RGBA);var Ee=this.context.gl;this.stencilClearMode=new ke({func:Ee.ALWAYS,mask:0},0,255,Ee.ZERO,Ee.ZERO,Ee.ZERO)},ba.prototype.clearStencil=function(){var O=this.context,B=O.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var H=e.create();e.ortho(H,0,this.width,this.height,0,0,1),e.scale(H,H,[B.drawingBufferWidth,B.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(O,B.TRIANGLES,sn.disabled,this.stencilClearMode,Se.disabled,Ce.disabled,ss(H),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ba.prototype._renderTileClippingMasks=function(O,B){if(this.currentStencilSource!==O.source&&O.isTileClipped()&&B&&B.length){this.currentStencilSource=O.source;var H=this.context,$=H.gl;this.nextStencilID+B.length>256&&this.clearStencil(),H.setColorMode(Se.disabled),H.setDepthMode(sn.disabled);var fe=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var ve=0,Te=B;ve<Te.length;ve+=1){var Ee=Te[ve],Fe=this._tileClippingMaskIDs[Ee.key]=this.nextStencilID++;fe.draw(H,$.TRIANGLES,sn.disabled,new ke({func:$.ALWAYS,mask:0},Fe,255,$.KEEP,$.KEEP,$.REPLACE),Se.disabled,Ce.disabled,ss(Ee.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ba.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var O=this.nextStencilID++,B=this.context.gl;return new ke({func:B.NOTEQUAL,mask:255},O,255,B.KEEP,B.KEEP,B.REPLACE)},ba.prototype.stencilModeForClipping=function(O){var B=this.context.gl;return new ke({func:B.EQUAL,mask:255},this._tileClippingMaskIDs[O.key],0,B.KEEP,B.KEEP,B.REPLACE)},ba.prototype.stencilConfigForOverlap=function(O){var B,H=this.context.gl,$=O.sort(function(Fe,Ze){return Ze.overscaledZ-Fe.overscaledZ}),fe=$[$.length-1].overscaledZ,ve=$[0].overscaledZ-fe+1;if(ve>1){this.currentStencilSource=void 0,this.nextStencilID+ve>256&&this.clearStencil();for(var Te={},Ee=0;Ee<ve;Ee++)Te[Ee+fe]=new ke({func:H.GEQUAL,mask:255},Ee+this.nextStencilID,255,H.KEEP,H.KEEP,H.REPLACE);return this.nextStencilID+=ve,[Te,$]}return[(B={},B[fe]=ke.disabled,B),$]},ba.prototype.colorModeForRenderPass=function(){var O=this.context.gl;return this._showOverdrawInspector?new Se([O.CONSTANT_COLOR,O.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?Se.unblended:Se.alphaBlended},ba.prototype.depthModeForSublayer=function(O,B,H){if(!this.opaquePassEnabledForLayer())return sn.disabled;var $=1-((1+this.currentLayer)*this.numSublayers+O)*this.depthEpsilon;return new sn(H||this.context.gl.LEQUAL,B,[$,$])},ba.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ba.prototype.render=function(O,B){var H=this;this.style=O,this.options=B,this.lineAtlas=O.lineAtlas,this.imageManager=O.imageManager,this.glyphManager=O.glyphManager,this.symbolFadeChange=O.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var $=this.style._order,fe=this.style.sourceCaches;for(var ve in fe){var Te=fe[ve];Te.used&&Te.prepare(this.context)}var Ee,Fe,Ze={},rt={},ft={};for(var It in fe){var Rt=fe[It];Ze[It]=Rt.getVisibleCoordinates(),rt[It]=Ze[It].slice().reverse(),ft[It]=Rt.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Lt=0;Lt<$.length;Lt++)if(this.style._layers[$[Lt]].is3D()){this.opaquePassCutoff=Lt;break}this.renderPass="offscreen";for(var St=0,Gt=$;St<Gt.length;St+=1){var Zt=this.style._layers[Gt[St]];if(Zt.hasOffscreenPass()&&!Zt.isHidden(this.transform.zoom)){var yn=rt[Zt.source];("custom"===Zt.type||yn.length)&&this.renderLayer(this,fe[Zt.source],Zt,yn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:B.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=B.showOverdrawInspector,this.depthRangeFor3D=[0,1-(O._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=$.length-1;this.currentLayer>=0;this.currentLayer--){var Sn=this.style._layers[$[this.currentLayer]],qn=fe[Sn.source],Un=Ze[Sn.source];this._renderTileClippingMasks(Sn,Un),this.renderLayer(this,qn,Sn,Un)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<$.length;this.currentLayer++){var mr=this.style._layers[$[this.currentLayer]],gr=fe[mr.source],Pr=("symbol"===mr.type?ft:rt)[mr.source];this._renderTileClippingMasks(mr,Ze[mr.source]),this.renderLayer(this,gr,mr,Pr)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach(function(Cr){Cr.source&&!Cr.isHidden(H.transform.zoom)&&(Cr.source!==(Fe&&Fe.id)&&(Fe=H.style.sourceCaches[Cr.source]),(!Ee||Ee.getSource().maxzoom<Fe.getSource().maxzoom)&&(Ee=Fe))}),Ee&&ws.debug(this,Ee,Ee.getVisibleCoordinates())),this.options.showPadding&&function(O){var B=O.transform.padding;to(O,O.transform.height-(B.top||0),3,Oa),to(O,B.bottom||0,3,Co),ps(O,B.left||0,3,Mo),ps(O,O.transform.width-(B.right||0),3,io);var $,fe,ve,Te,H=O.transform.centerPoint;gs($=O,(fe=H.x)-1,(ve=O.transform.height-H.y)-10,2,20,Te=Ja),gs($,fe-10,ve-1,20,2,Te)}(this),this.context.setDefault()},ba.prototype.renderLayer=function(O,B,H,$){H.isHidden(this.transform.zoom)||("background"===H.type||"custom"===H.type||$.length)&&(this.id=H.id,this.gpuTimingStart(H),ws[H.type](O,B,H,$,this.style.placement.variableOffsets),this.gpuTimingEnd())},ba.prototype.gpuTimingStart=function(O){if(this.options.gpuTiming){var B=this.context.extTimerQuery,H=this.gpuTimers[O.id];H||(H=this.gpuTimers[O.id]={calls:0,cpuTime:0,query:B.createQueryEXT()}),H.calls++,B.beginQueryEXT(B.TIME_ELAPSED_EXT,H.query)}},ba.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var O=this.context.extTimerQuery;O.endQueryEXT(O.TIME_ELAPSED_EXT)}},ba.prototype.collectGpuTimers=function(){var O=this.gpuTimers;return this.gpuTimers={},O},ba.prototype.queryGpuTimers=function(O){var B={};for(var H in O){var $=O[H],fe=this.context.extTimerQuery,ve=fe.getQueryObjectEXT($.query,fe.QUERY_RESULT_EXT)/1e6;fe.deleteQueryEXT($.query),B[H]=ve}return B},ba.prototype.translatePosMatrix=function(O,B,H,$,fe){if(!H[0]&&!H[1])return O;var ve=fe?"map"===$?this.transform.angle:0:"viewport"===$?-this.transform.angle:0;if(ve){var Te=Math.sin(ve),Ee=Math.cos(ve);H=[H[0]*Ee-H[1]*Te,H[0]*Te+H[1]*Ee]}var Fe=[fe?H[0]:Lr(B,H[0],this.transform.zoom),fe?H[1]:Lr(B,H[1],this.transform.zoom),0],Ze=new Float32Array(16);return e.translate(Ze,O,Fe),Ze},ba.prototype.saveTileTexture=function(O){var B=this._tileTextures[O.size[0]];B?B.push(O):this._tileTextures[O.size[0]]=[O]},ba.prototype.getTileTexture=function(O){var B=this._tileTextures[O];return B&&B.length>0?B.pop():null},ba.prototype.isPatternMissing=function(O){if(!O)return!1;if(!O.from||!O.to)return!0;var B=this.imageManager.getPattern(O.from.toString()),H=this.imageManager.getPattern(O.to.toString());return!B||!H},ba.prototype.useProgram=function(O,B){this.cache=this.cache||{};var H=""+O+(B?B.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[H]||(this.cache[H]=new cu(this.context,Xa[O],B,On[O],this._showOverdrawInspector)),this.cache[H]},ba.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ba.prototype.setBaseState=function(){var O=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(O.FUNC_ADD)},ba.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},ba.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var _t=function(O,B){this.points=O,this.planes=B};_t.fromInvProjectionMatrix=function(O,B,H){var $=Math.pow(2,H),fe=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(Te){return e.transformMat4([],Te,O)}).map(function(Te){return e.scale$1([],Te,1/Te[3]/B*$)}),ve=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(Te){var Ee=e.sub([],fe[Te[0]],fe[Te[1]]),Fe=e.sub([],fe[Te[2]],fe[Te[1]]),Ze=e.normalize([],e.cross([],Ee,Fe)),rt=-e.dot(Ze,fe[Te[1]]);return Ze.concat(rt)});return new _t(fe,ve)};var jt=function(O,B){this.min=O,this.max=B,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};jt.prototype.quadrant=function(O){for(var B=[O%2==0,O<2],H=e.clone$2(this.min),$=e.clone$2(this.max),fe=0;fe<B.length;fe++)H[fe]=B[fe]?this.min[fe]:this.center[fe],$[fe]=B[fe]?this.center[fe]:this.max[fe];return $[2]=this.max[2],new jt(H,$)},jt.prototype.distanceX=function(O){return Math.max(Math.min(this.max[0],O[0]),this.min[0])-O[0]},jt.prototype.distanceY=function(O){return Math.max(Math.min(this.max[1],O[1]),this.min[1])-O[1]},jt.prototype.intersects=function(O){for(var B=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],H=!0,$=0;$<O.planes.length;$++){for(var fe=O.planes[$],ve=0,Te=0;Te<B.length;Te++)ve+=e.dot$1(fe,B[Te])>=0;if(0===ve)return 0;ve!==B.length&&(H=!1)}if(H)return 2;for(var Ee=0;Ee<3;Ee++){for(var Fe=Number.MAX_VALUE,Ze=-Number.MAX_VALUE,rt=0;rt<O.points.length;rt++){var ft=O.points[rt][Ee]-this.min[Ee];Fe=Math.min(Fe,ft),Ze=Math.max(Ze,ft)}if(Ze<0||Fe>this.max[Ee]-this.min[Ee])return 0}return 1};var _n=function(O,B,H,$){if(void 0===O&&(O=0),void 0===B&&(B=0),void 0===H&&(H=0),void 0===$&&($=0),isNaN(O)||O<0||isNaN(B)||B<0||isNaN(H)||H<0||isNaN($)||$<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=O,this.bottom=B,this.left=H,this.right=$};_n.prototype.interpolate=function(O,B,H){return null!=B.top&&null!=O.top&&(this.top=e.number(O.top,B.top,H)),null!=B.bottom&&null!=O.bottom&&(this.bottom=e.number(O.bottom,B.bottom,H)),null!=B.left&&null!=O.left&&(this.left=e.number(O.left,B.left,H)),null!=B.right&&null!=O.right&&(this.right=e.number(O.right,B.right,H)),this},_n.prototype.getCenter=function(O,B){var H=e.clamp((this.left+O-this.right)/2,0,O),$=e.clamp((this.top+B-this.bottom)/2,0,B);return new e.Point(H,$)},_n.prototype.equals=function(O){return this.top===O.top&&this.bottom===O.bottom&&this.left===O.left&&this.right===O.right},_n.prototype.clone=function(){return new _n(this.top,this.bottom,this.left,this.right)},_n.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Kt=function(O,B,H,$,fe){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===fe||fe,this._minZoom=O||0,this._maxZoom=B||22,this._minPitch=null==H?0:H,this._maxPitch=null==$?60:$,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new _n,this._posMatrixCache={},this._alignedPosMatrixCache={}},wn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Kt.prototype.clone=function(){var O=new Kt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return O.tileSize=this.tileSize,O.latRange=this.latRange,O.width=this.width,O.height=this.height,O._center=this._center,O.zoom=this.zoom,O.angle=this.angle,O._fov=this._fov,O._pitch=this._pitch,O._unmodified=this._unmodified,O._edgeInsets=this._edgeInsets.clone(),O._calcMatrices(),O},wn.minZoom.get=function(){return this._minZoom},wn.minZoom.set=function(O){this._minZoom!==O&&(this._minZoom=O,this.zoom=Math.max(this.zoom,O))},wn.maxZoom.get=function(){return this._maxZoom},wn.maxZoom.set=function(O){this._maxZoom!==O&&(this._maxZoom=O,this.zoom=Math.min(this.zoom,O))},wn.minPitch.get=function(){return this._minPitch},wn.minPitch.set=function(O){this._minPitch!==O&&(this._minPitch=O,this.pitch=Math.max(this.pitch,O))},wn.maxPitch.get=function(){return this._maxPitch},wn.maxPitch.set=function(O){this._maxPitch!==O&&(this._maxPitch=O,this.pitch=Math.min(this.pitch,O))},wn.renderWorldCopies.get=function(){return this._renderWorldCopies},wn.renderWorldCopies.set=function(O){void 0===O?O=!0:null===O&&(O=!1),this._renderWorldCopies=O},wn.worldSize.get=function(){return this.tileSize*this.scale},wn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},wn.size.get=function(){return new e.Point(this.width,this.height)},wn.bearing.get=function(){return-this.angle/Math.PI*180},wn.bearing.set=function(O){var B=-e.wrap(O,-180,180)*Math.PI/180;this.angle!==B&&(this._unmodified=!1,this.angle=B,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},wn.pitch.get=function(){return this._pitch/Math.PI*180},wn.pitch.set=function(O){var B=e.clamp(O,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==B&&(this._unmodified=!1,this._pitch=B,this._calcMatrices())},wn.fov.get=function(){return this._fov/Math.PI*180},wn.fov.set=function(O){O=Math.max(.01,Math.min(60,O)),this._fov!==O&&(this._unmodified=!1,this._fov=O/180*Math.PI,this._calcMatrices())},wn.zoom.get=function(){return this._zoom},wn.zoom.set=function(O){var B=Math.min(Math.max(O,this.minZoom),this.maxZoom);this._zoom!==B&&(this._unmodified=!1,this._zoom=B,this.scale=this.zoomScale(B),this.tileZoom=Math.floor(B),this.zoomFraction=B-this.tileZoom,this._constrain(),this._calcMatrices())},wn.center.get=function(){return this._center},wn.center.set=function(O){O.lat===this._center.lat&&O.lng===this._center.lng||(this._unmodified=!1,this._center=O,this._constrain(),this._calcMatrices())},wn.padding.get=function(){return this._edgeInsets.toJSON()},wn.padding.set=function(O){this._edgeInsets.equals(O)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,O,1),this._calcMatrices())},wn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Kt.prototype.isPaddingEqual=function(O){return this._edgeInsets.equals(O)},Kt.prototype.interpolatePadding=function(O,B,H){this._unmodified=!1,this._edgeInsets.interpolate(O,B,H),this._constrain(),this._calcMatrices()},Kt.prototype.coveringZoomLevel=function(O){var B=(O.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/O.tileSize));return Math.max(0,B)},Kt.prototype.getVisibleUnwrappedCoordinates=function(O){var B=[new e.UnwrappedTileID(0,O)];if(this._renderWorldCopies)for(var H=this.pointCoordinate(new e.Point(0,0)),$=this.pointCoordinate(new e.Point(this.width,0)),fe=this.pointCoordinate(new e.Point(this.width,this.height)),ve=this.pointCoordinate(new e.Point(0,this.height)),Te=Math.floor(Math.min(H.x,$.x,fe.x,ve.x)),Ee=Math.floor(Math.max(H.x,$.x,fe.x,ve.x)),Fe=Te-1;Fe<=Ee+1;Fe++)0!==Fe&&B.push(new e.UnwrappedTileID(Fe,O));return B},Kt.prototype.coveringTiles=function(O){var B=this.coveringZoomLevel(O),H=B;if(void 0!==O.minzoom&&B<O.minzoom)return[];void 0!==O.maxzoom&&B>O.maxzoom&&(B=O.maxzoom);var $=e.MercatorCoordinate.fromLngLat(this.center),fe=Math.pow(2,B),ve=[fe*$.x,fe*$.y,0],Te=_t.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,B),Ee=O.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(Ee=B);var Fe=function(Pr){return{aabb:new jt([Pr*fe,0,0],[(Pr+1)*fe,fe,0]),zoom:0,x:0,y:0,wrap:Pr,fullyVisible:!1}},Ze=[],rt=[],ft=B,It=O.reparseOverscaled?H:B;if(this._renderWorldCopies)for(var Rt=1;Rt<=3;Rt++)Ze.push(Fe(-Rt)),Ze.push(Fe(Rt));for(Ze.push(Fe(0));Ze.length>0;){var Lt=Ze.pop(),Ot=Lt.x,St=Lt.y,Gt=Lt.fullyVisible;if(!Gt){var qt=Lt.aabb.intersects(Te);if(0===qt)continue;Gt=2===qt}var Zt=Lt.aabb.distanceX(ve),yn=Lt.aabb.distanceY(ve),Sn=Math.max(Math.abs(Zt),Math.abs(yn));if(Lt.zoom===ft||Sn>3+(1<<ft-Lt.zoom)-2&&Lt.zoom>=Ee)rt.push({tileID:new e.OverscaledTileID(Lt.zoom===ft?It:Lt.zoom,Lt.wrap,Lt.zoom,Ot,St),distanceSq:e.sqrLen([ve[0]-.5-Ot,ve[1]-.5-St])});else for(var Un=0;Un<4;Un++){var mr=(Ot<<1)+Un%2,gr=(St<<1)+(Un>>1);Ze.push({aabb:Lt.aabb.quadrant(Un),zoom:Lt.zoom+1,x:mr,y:gr,wrap:Lt.wrap,fullyVisible:Gt})}}return rt.sort(function(Pr,Cr){return Pr.distanceSq-Cr.distanceSq}).map(function(Pr){return Pr.tileID})},Kt.prototype.resize=function(O,B){this.width=O,this.height=B,this.pixelsToGLUnits=[2/O,-2/B],this._constrain(),this._calcMatrices()},wn.unmodified.get=function(){return this._unmodified},Kt.prototype.zoomScale=function(O){return Math.pow(2,O)},Kt.prototype.scaleZoom=function(O){return Math.log(O)/Math.LN2},Kt.prototype.project=function(O){var B=e.clamp(O.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(O.lng)*this.worldSize,e.mercatorYfromLat(B)*this.worldSize)},Kt.prototype.unproject=function(O){return new e.MercatorCoordinate(O.x/this.worldSize,O.y/this.worldSize).toLngLat()},wn.point.get=function(){return this.project(this.center)},Kt.prototype.setLocationAtPoint=function(O,B){var H=this.pointCoordinate(B),$=this.pointCoordinate(this.centerPoint),fe=this.locationCoordinate(O),ve=new e.MercatorCoordinate(fe.x-(H.x-$.x),fe.y-(H.y-$.y));this.center=this.coordinateLocation(ve),this._renderWorldCopies&&(this.center=this.center.wrap())},Kt.prototype.locationPoint=function(O){return this.coordinatePoint(this.locationCoordinate(O))},Kt.prototype.pointLocation=function(O){return this.coordinateLocation(this.pointCoordinate(O))},Kt.prototype.locationCoordinate=function(O){return e.MercatorCoordinate.fromLngLat(O)},Kt.prototype.coordinateLocation=function(O){return O.toLngLat()},Kt.prototype.pointCoordinate=function(O){var B=[O.x,O.y,0,1],H=[O.x,O.y,1,1];e.transformMat4(B,B,this.pixelMatrixInverse),e.transformMat4(H,H,this.pixelMatrixInverse);var $=B[3],fe=H[3],Ee=B[1]/$,Fe=H[1]/fe,Ze=B[2]/$,rt=H[2]/fe,ft=Ze===rt?0:(0-Ze)/(rt-Ze);return new e.MercatorCoordinate(e.number(B[0]/$,H[0]/fe,ft)/this.worldSize,e.number(Ee,Fe,ft)/this.worldSize)},Kt.prototype.coordinatePoint=function(O){var B=[O.x*this.worldSize,O.y*this.worldSize,0,1];return e.transformMat4(B,B,this.pixelMatrix),new e.Point(B[0]/B[3],B[1]/B[3])},Kt.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},Kt.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Kt.prototype.setMaxBounds=function(O){O?(this.lngRange=[O.getWest(),O.getEast()],this.latRange=[O.getSouth(),O.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Kt.prototype.calculatePosMatrix=function(O,B){void 0===B&&(B=!1);var H=O.key,$=B?this._alignedPosMatrixCache:this._posMatrixCache;if($[H])return $[H];var fe=O.canonical,ve=this.worldSize/this.zoomScale(fe.z),Te=fe.x+Math.pow(2,fe.z)*O.wrap,Ee=e.identity(new Float64Array(16));return e.translate(Ee,Ee,[Te*ve,fe.y*ve,0]),e.scale(Ee,Ee,[ve/e.EXTENT,ve/e.EXTENT,1]),e.multiply(Ee,B?this.alignedProjMatrix:this.projMatrix,Ee),$[H]=new Float32Array(Ee),$[H]},Kt.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Kt.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var O,B,H,$,fe=-90,ve=90,Te=-180,Ee=180,Fe=this.size,Ze=this._unmodified;if(this.latRange){var rt=this.latRange;fe=e.mercatorYfromLat(rt[1])*this.worldSize,O=(ve=e.mercatorYfromLat(rt[0])*this.worldSize)-fe<Fe.y?Fe.y/(ve-fe):0}if(this.lngRange){var ft=this.lngRange;Te=e.mercatorXfromLng(ft[0])*this.worldSize,B=(Ee=e.mercatorXfromLng(ft[1])*this.worldSize)-Te<Fe.x?Fe.x/(Ee-Te):0}var It=this.point,Rt=Math.max(B||0,O||0);if(Rt)return this.center=this.unproject(new e.Point(B?(Ee+Te)/2:It.x,O?(ve+fe)/2:It.y)),this.zoom+=this.scaleZoom(Rt),this._unmodified=Ze,void(this._constraining=!1);if(this.latRange){var Lt=It.y,Ot=Fe.y/2;Lt-Ot<fe&&($=fe+Ot),Lt+Ot>ve&&($=ve-Ot)}if(this.lngRange){var St=It.x,Gt=Fe.x/2;St-Gt<Te&&(H=Te+Gt),St+Gt>Ee&&(H=Ee-Gt)}void 0===H&&void 0===$||(this.center=this.unproject(new e.Point(void 0!==H?H:It.x,void 0!==$?$:It.y))),this._unmodified=Ze,this._constraining=!1}},Kt.prototype._calcMatrices=function(){if(this.height){var B=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var H=Math.PI/2+this._pitch,$=this._fov*(.5+B.y/this.height),fe=Math.sin($)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-H-$,.01,Math.PI-.01)),ve=this.point,Te=ve.x,Ee=ve.y,Fe=1.01*(Math.cos(Math.PI/2-this._pitch)*fe+this.cameraToCenterDistance),Ze=this.height/50,rt=new Float64Array(16);e.perspective(rt,this._fov,this.width/this.height,Ze,Fe),rt[8]=2*-B.x/this.width,rt[9]=2*B.y/this.height,e.scale(rt,rt,[1,-1,1]),e.translate(rt,rt,[0,0,-this.cameraToCenterDistance]),e.rotateX(rt,rt,this._pitch),e.rotateZ(rt,rt,this.angle),e.translate(rt,rt,[-Te,-Ee,0]),this.mercatorMatrix=e.scale([],rt,[this.worldSize,this.worldSize,this.worldSize]),e.scale(rt,rt,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=rt,this.invProjMatrix=e.invert([],this.projMatrix);var ft=this.width%2/2,It=this.height%2/2,Rt=Math.cos(this.angle),Lt=Math.sin(this.angle),Ot=Te-Math.round(Te)+Rt*ft+Lt*It,St=Ee-Math.round(Ee)+Rt*It+Lt*ft,Gt=new Float64Array(rt);if(e.translate(Gt,Gt,[Ot>.5?Ot-1:Ot,St>.5?St-1:St,0]),this.alignedProjMatrix=Gt,rt=e.create(),e.scale(rt,rt,[this.width/2,-this.height/2,1]),e.translate(rt,rt,[1,-1,0]),this.labelPlaneMatrix=rt,rt=e.create(),e.scale(rt,rt,[1,-1,1]),e.translate(rt,rt,[-1,-1,0]),e.scale(rt,rt,[2/this.width,2/this.height,1]),this.glCoordMatrix=rt,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(rt=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=rt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Kt.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var O=this.pointCoordinate(new e.Point(0,0)),B=[O.x*this.worldSize,O.y*this.worldSize,0,1];return e.transformMat4(B,B,this.pixelMatrix)[3]/this.cameraToCenterDistance},Kt.prototype.getCameraPoint=function(){var B=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,B))},Kt.prototype.getCameraQueryGeometry=function(O){var B=this.getCameraPoint();if(1===O.length)return[O[0],B];for(var H=B.x,$=B.y,fe=B.x,ve=B.y,Te=0,Ee=O;Te<Ee.length;Te+=1){var Fe=Ee[Te];H=Math.min(H,Fe.x),$=Math.min($,Fe.y),fe=Math.max(fe,Fe.x),ve=Math.max(ve,Fe.y)}return[new e.Point(H,$),new e.Point(fe,$),new e.Point(fe,ve),new e.Point(H,ve),new e.Point(H,$)]},Object.defineProperties(Kt.prototype,wn);var Vn=function(O){var B,$,fe,ve;this._hashName=O&&encodeURIComponent(O),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(B=this._updateHashUnthrottled.bind(this),300,$=!1,fe=null,ve=function(){fe=null,$&&(B(),fe=setTimeout(ve,300),$=!1)},function(){return $=!0,fe||ve(),fe})};Vn.prototype.addTo=function(O){return this._map=O,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Vn.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Vn.prototype.getHashString=function(O){var B=this._map.getCenter(),H=Math.round(100*this._map.getZoom())/100,$=Math.ceil((H*Math.LN2+Math.log(512/360/.5))/Math.LN10),fe=Math.pow(10,$),ve=Math.round(B.lng*fe)/fe,Te=Math.round(B.lat*fe)/fe,Ee=this._map.getBearing(),Fe=this._map.getPitch(),Ze="";if(Ze+=O?"/"+ve+"/"+Te+"/"+H:H+"/"+Te+"/"+ve,(Ee||Fe)&&(Ze+="/"+Math.round(10*Ee)/10),Fe&&(Ze+="/"+Math.round(Fe)),this._hashName){var rt=this._hashName,ft=!1,It=e.window.location.hash.slice(1).split("&").map(function(Rt){var Lt=Rt.split("=")[0];return Lt===rt?(ft=!0,Lt+"="+Ze):Rt}).filter(function(Rt){return Rt});return ft||It.push(rt+"="+Ze),"#"+It.join("&")}return"#"+Ze},Vn.prototype._getCurrentHash=function(){var O,B=this,H=e.window.location.hash.replace("#","");return this._hashName?(H.split("&").map(function($){return $.split("=")}).forEach(function($){$[0]===B._hashName&&(O=$)}),(O&&O[1]||"").split("/")):H.split("/")},Vn.prototype._onHashChange=function(){var O=this._getCurrentHash();if(O.length>=3&&!O.some(function(H){return isNaN(H)})){var B=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(O[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+O[2],+O[1]],zoom:+O[0],bearing:B,pitch:+(O[4]||0)}),!0}return!1},Vn.prototype._updateHashUnthrottled=function(){var O=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",O)}catch(B){}};var tr={linearity:.3,easing:e.bezier(0,0,.3,1)},pr=e.extend({deceleration:2500,maxSpeed:1400},tr),Sr=e.extend({deceleration:20,maxSpeed:1400},tr),yr=e.extend({deceleration:1e3,maxSpeed:360},tr),zr=e.extend({deceleration:1e3,maxSpeed:90},tr),Zr=function(O){this._map=O,this.clear()};function Ar(O,B){(!O.duration||O.duration<B.duration)&&(O.duration=B.duration,O.easing=B.easing)}function Br(O,B,H){var $=H.maxSpeed,fe=H.linearity,ve=H.deceleration,Te=e.clamp(O*fe/(B/1e3),-$,$),Ee=Math.abs(Te)/(ve*fe);return{easing:H.easing,duration:1e3*Ee,amount:Te*(Ee/2)}}Zr.prototype.clear=function(){this._inertiaBuffer=[]},Zr.prototype.record=function(O){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:O})},Zr.prototype._drainInertiaBuffer=function(){for(var O=this._inertiaBuffer,B=e.browser.now();O.length>0&&B-O[0].time>160;)O.shift()},Zr.prototype._onMoveEnd=function(O){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var B={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},H=0,$=this._inertiaBuffer;H<$.length;H+=1){var fe=$[H].settings;B.zoom+=fe.zoomDelta||0,B.bearing+=fe.bearingDelta||0,B.pitch+=fe.pitchDelta||0,fe.panDelta&&B.pan._add(fe.panDelta),fe.around&&(B.around=fe.around),fe.pinchAround&&(B.pinchAround=fe.pinchAround)}var ve=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Te={};if(B.pan.mag()){var Ee=Br(B.pan.mag(),ve,e.extend({},pr,O||{}));Te.offset=B.pan.mult(Ee.amount/B.pan.mag()),Te.center=this._map.transform.center,Ar(Te,Ee)}if(B.zoom){var Fe=Br(B.zoom,ve,Sr);Te.zoom=this._map.transform.zoom+Fe.amount,Ar(Te,Fe)}if(B.bearing){var Ze=Br(B.bearing,ve,yr);Te.bearing=this._map.transform.bearing+e.clamp(Ze.amount,-179,179),Ar(Te,Ze)}if(B.pitch){var rt=Br(B.pitch,ve,zr);Te.pitch=this._map.transform.pitch+rt.amount,Ar(Te,rt)}if(Te.zoom||Te.bearing){var ft=void 0===B.pinchAround?B.around:B.pinchAround;Te.around=ft?this._map.unproject(ft):this._map.getCenter()}return this.clear(),e.extend(Te,{noMoveStart:!0})}};var li=function(O){function B($,fe,ve,Te){void 0===Te&&(Te={});var Ee=a.mousePos(fe.getCanvasContainer(),ve),Fe=fe.unproject(Ee);O.call(this,$,e.extend({point:Ee,lngLat:Fe,originalEvent:ve},Te)),this._defaultPrevented=!1,this.target=fe}O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B;var H={defaultPrevented:{configurable:!0}};return B.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(B.prototype,H),B}(e.Event),gi=function(O){function B($,fe,ve){var Te="touchend"===$?ve.changedTouches:ve.touches,Ee=a.touchPos(fe.getCanvasContainer(),Te),Fe=Ee.map(function(ft){return fe.unproject(ft)}),Ze=Ee.reduce(function(ft,It,Rt,Lt){return ft.add(It.div(Lt.length))},new e.Point(0,0)),rt=fe.unproject(Ze);O.call(this,$,{points:Ee,point:Ze,lngLats:Fe,lngLat:rt,originalEvent:ve}),this._defaultPrevented=!1}O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B;var H={defaultPrevented:{configurable:!0}};return B.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(B.prototype,H),B}(e.Event),Li=function(O){function B($,fe,ve){O.call(this,$,{originalEvent:ve}),this._defaultPrevented=!1}O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B;var H={defaultPrevented:{configurable:!0}};return B.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(B.prototype,H),B}(e.Event),fr=function(O,B){this._map=O,this._clickTolerance=B.clickTolerance};fr.prototype.reset=function(){delete this._mousedownPos},fr.prototype.wheel=function(O){return this._firePreventable(new Li(O.type,this._map,O))},fr.prototype.mousedown=function(O,B){return this._mousedownPos=B,this._firePreventable(new li(O.type,this._map,O))},fr.prototype.mouseup=function(O){this._map.fire(new li(O.type,this._map,O))},fr.prototype.click=function(O,B){this._mousedownPos&&this._mousedownPos.dist(B)>=this._clickTolerance||this._map.fire(new li(O.type,this._map,O))},fr.prototype.dblclick=function(O){return this._firePreventable(new li(O.type,this._map,O))},fr.prototype.mouseover=function(O){this._map.fire(new li(O.type,this._map,O))},fr.prototype.mouseout=function(O){this._map.fire(new li(O.type,this._map,O))},fr.prototype.touchstart=function(O){return this._firePreventable(new gi(O.type,this._map,O))},fr.prototype.touchmove=function(O){this._map.fire(new gi(O.type,this._map,O))},fr.prototype.touchend=function(O){this._map.fire(new gi(O.type,this._map,O))},fr.prototype.touchcancel=function(O){this._map.fire(new gi(O.type,this._map,O))},fr.prototype._firePreventable=function(O){if(this._map.fire(O),O.defaultPrevented)return{}},fr.prototype.isEnabled=function(){return!0},fr.prototype.isActive=function(){return!1},fr.prototype.enable=function(){},fr.prototype.disable=function(){};var Di=function(O){this._map=O};Di.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Di.prototype.mousemove=function(O){this._map.fire(new li(O.type,this._map,O))},Di.prototype.mousedown=function(){this._delayContextMenu=!0},Di.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new li("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Di.prototype.contextmenu=function(O){this._delayContextMenu?this._contextMenuEvent=O:this._map.fire(new li(O.type,this._map,O)),this._map.listens("contextmenu")&&O.preventDefault()},Di.prototype.isEnabled=function(){return!0},Di.prototype.isActive=function(){return!1},Di.prototype.enable=function(){},Di.prototype.disable=function(){};var ri=function(O,B){this._map=O,this._el=O.getCanvasContainer(),this._container=O.getContainer(),this._clickTolerance=B.clickTolerance||1};function Ir(O,B){for(var H={},$=0;$<O.length;$++)H[O[$].identifier]=B[$];return H}ri.prototype.isEnabled=function(){return!!this._enabled},ri.prototype.isActive=function(){return!!this._active},ri.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},ri.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},ri.prototype.mousedown=function(O,B){this.isEnabled()&&O.shiftKey&&0===O.button&&(a.disableDrag(),this._startPos=this._lastPos=B,this._active=!0)},ri.prototype.mousemoveWindow=function(O,B){if(this._active){var H=B;if(!(this._lastPos.equals(H)||!this._box&&H.dist(this._startPos)<this._clickTolerance)){var $=this._startPos;this._lastPos=H,this._box||(this._box=a.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",O));var fe=Math.min($.x,H.x),ve=Math.max($.x,H.x),Te=Math.min($.y,H.y),Ee=Math.max($.y,H.y);a.setTransform(this._box,"translate("+fe+"px,"+Te+"px)"),this._box.style.width=ve-fe+"px",this._box.style.height=Ee-Te+"px"}}},ri.prototype.mouseupWindow=function(O,B){var H=this;if(this._active&&0===O.button){var $=this._startPos,fe=B;if(this.reset(),a.suppressClick(),$.x!==fe.x||$.y!==fe.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:O})),{cameraAnimation:function(ve){return ve.fitScreenCoordinates($,fe,H._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",O)}},ri.prototype.keydown=function(O){this._active&&27===O.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",O))},ri.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(a.remove(this._box),this._box=null),a.enableDrag(),delete this._startPos,delete this._lastPos},ri.prototype._fireEvent=function(O,B){return this._map.fire(new e.Event(O,{originalEvent:B}))};var Ii=function(O){this.reset(),this.numTouches=O.numTouches};Ii.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Ii.prototype.touchstart=function(O,B,H){(this.centroid||H.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=O.timeStamp),H.length===this.numTouches&&(this.centroid=function($){for(var fe=new e.Point(0,0),ve=0,Te=$;ve<Te.length;ve+=1)fe._add(Te[ve]);return fe.div($.length)}(B),this.touches=Ir(H,B)))},Ii.prototype.touchmove=function(O,B,H){if(!this.aborted&&this.centroid){var $=Ir(H,B);for(var fe in this.touches){var Te=$[fe];(!Te||Te.dist(this.touches[fe])>30)&&(this.aborted=!0)}}},Ii.prototype.touchend=function(O,B,H){if((!this.centroid||O.timeStamp-this.startTime>500)&&(this.aborted=!0),0===H.length){var $=!this.aborted&&this.centroid;if(this.reset(),$)return $}};var aa=function(O){this.singleTap=new Ii(O),this.numTaps=O.numTaps,this.reset()};aa.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},aa.prototype.touchstart=function(O,B,H){this.singleTap.touchstart(O,B,H)},aa.prototype.touchmove=function(O,B,H){this.singleTap.touchmove(O,B,H)},aa.prototype.touchend=function(O,B,H){var $=this.singleTap.touchend(O,B,H);if($){var fe=O.timeStamp-this.lastTime<500,ve=!this.lastTap||this.lastTap.dist($)<30;if(fe&&ve||this.reset(),this.count++,this.lastTime=O.timeStamp,this.lastTap=$,this.count===this.numTaps)return this.reset(),$}};var ya=function(){this._zoomIn=new aa({numTouches:1,numTaps:2}),this._zoomOut=new aa({numTouches:2,numTaps:1}),this.reset()};ya.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ya.prototype.touchstart=function(O,B,H){this._zoomIn.touchstart(O,B,H),this._zoomOut.touchstart(O,B,H)},ya.prototype.touchmove=function(O,B,H){this._zoomIn.touchmove(O,B,H),this._zoomOut.touchmove(O,B,H)},ya.prototype.touchend=function(O,B,H){var $=this,fe=this._zoomIn.touchend(O,B,H),ve=this._zoomOut.touchend(O,B,H);return fe?(this._active=!0,O.preventDefault(),setTimeout(function(){return $.reset()},0),{cameraAnimation:function(Te){return Te.easeTo({duration:300,zoom:Te.getZoom()+1,around:Te.unproject(fe)},{originalEvent:O})}}):ve?(this._active=!0,O.preventDefault(),setTimeout(function(){return $.reset()},0),{cameraAnimation:function(Te){return Te.easeTo({duration:300,zoom:Te.getZoom()-1,around:Te.unproject(ve)},{originalEvent:O})}}):void 0},ya.prototype.touchcancel=function(){this.reset()},ya.prototype.enable=function(){this._enabled=!0},ya.prototype.disable=function(){this._enabled=!1,this.reset()},ya.prototype.isEnabled=function(){return this._enabled},ya.prototype.isActive=function(){return this._active};var Kr=function(O){this.reset(),this._clickTolerance=O.clickTolerance||1};Kr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},Kr.prototype._correctButton=function(O,B){return!1},Kr.prototype._move=function(O,B){return{}},Kr.prototype.mousedown=function(O,B){if(!this._lastPoint){var H=a.mouseButton(O);this._correctButton(O,H)&&(this._lastPoint=B,this._eventButton=H)}},Kr.prototype.mousemoveWindow=function(O,B){var H=this._lastPoint;if(H&&(O.preventDefault(),this._moved||!(B.dist(H)<this._clickTolerance)))return this._moved=!0,this._lastPoint=B,this._move(H,B)},Kr.prototype.mouseupWindow=function(O){a.mouseButton(O)===this._eventButton&&(this._moved&&a.suppressClick(),this.reset())},Kr.prototype.enable=function(){this._enabled=!0},Kr.prototype.disable=function(){this._enabled=!1,this.reset()},Kr.prototype.isEnabled=function(){return this._enabled},Kr.prototype.isActive=function(){return this._active};var Ta=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.mousedown=function(H,$){O.prototype.mousedown.call(this,H,$),this._lastPoint&&(this._active=!0)},B.prototype._correctButton=function(H,$){return 0===$&&!H.ctrlKey},B.prototype._move=function(H,$){return{around:$,panDelta:$.sub(H)}},B}(Kr),pa=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype._correctButton=function(H,$){return 0===$&&H.ctrlKey||2===$},B.prototype._move=function(H,$){var fe=.8*($.x-H.x);if(fe)return this._active=!0,{bearingDelta:fe}},B.prototype.contextmenu=function(H){H.preventDefault()},B}(Kr),Wi=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype._correctButton=function(H,$){return 0===$&&H.ctrlKey||2===$},B.prototype._move=function(H,$){var fe=-.5*($.y-H.y);if(fe)return this._active=!0,{pitchDelta:fe}},B.prototype.contextmenu=function(H){H.preventDefault()},B}(Kr),Dr=function(O){this._minTouches=1,this._clickTolerance=O.clickTolerance||1,this.reset()};Dr.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},Dr.prototype.touchstart=function(O,B,H){return this._calculateTransform(O,B,H)},Dr.prototype.touchmove=function(O,B,H){if(this._active)return O.preventDefault(),this._calculateTransform(O,B,H)},Dr.prototype.touchend=function(O,B,H){this._calculateTransform(O,B,H),this._active&&H.length<this._minTouches&&this.reset()},Dr.prototype.touchcancel=function(){this.reset()},Dr.prototype._calculateTransform=function(O,B,H){H.length>0&&(this._active=!0);var $=Ir(H,B),fe=new e.Point(0,0),ve=new e.Point(0,0),Te=0;for(var Ee in $){var Fe=$[Ee],Ze=this._touches[Ee];Ze&&(fe._add(Fe),ve._add(Fe.sub(Ze)),Te++,$[Ee]=Fe)}if(this._touches=$,!(Te<this._minTouches)&&ve.mag()){var rt=ve.div(Te);if(this._sum._add(rt),!(this._sum.mag()<this._clickTolerance))return{around:fe.div(Te),panDelta:rt}}},Dr.prototype.enable=function(){this._enabled=!0},Dr.prototype.disable=function(){this._enabled=!1,this.reset()},Dr.prototype.isEnabled=function(){return this._enabled},Dr.prototype.isActive=function(){return this._active};var Ai=function(){this.reset()};function Ba(O,B,H){for(var $=0;$<O.length;$++)if(O[$].identifier===H)return B[$]}function mi(O,B){return Math.log(O/B)/Math.LN2}Ai.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ai.prototype._start=function(O){},Ai.prototype._move=function(O,B,H){return{}},Ai.prototype.touchstart=function(O,B,H){this._firstTwoTouches||H.length<2||(this._firstTwoTouches=[H[0].identifier,H[1].identifier],this._start([B[0],B[1]]))},Ai.prototype.touchmove=function(O,B,H){if(this._firstTwoTouches){O.preventDefault();var $=this._firstTwoTouches,ve=$[1],Te=Ba(H,B,$[0]),Ee=Ba(H,B,ve);if(Te&&Ee){var Fe=this._aroundCenter?null:Te.add(Ee).div(2);return this._move([Te,Ee],Fe,O)}}},Ai.prototype.touchend=function(O,B,H){if(this._firstTwoTouches){var $=this._firstTwoTouches,ve=$[1],Te=Ba(H,B,$[0]),Ee=Ba(H,B,ve);Te&&Ee||(this._active&&a.suppressClick(),this.reset())}},Ai.prototype.touchcancel=function(){this.reset()},Ai.prototype.enable=function(O){this._enabled=!0,this._aroundCenter=!!O&&"center"===O.around},Ai.prototype.disable=function(){this._enabled=!1,this.reset()},Ai.prototype.isEnabled=function(){return this._enabled},Ai.prototype.isActive=function(){return this._active};var Ua=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.reset=function(){O.prototype.reset.call(this),delete this._distance,delete this._startDistance},B.prototype._start=function(H){this._startDistance=this._distance=H[0].dist(H[1])},B.prototype._move=function(H,$){var fe=this._distance;if(this._distance=H[0].dist(H[1]),this._active||!(Math.abs(mi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:mi(this._distance,fe),pinchAround:$}},B}(Ai);function So(O,B){return 180*O.angleWith(B)/Math.PI}var us=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.reset=function(){O.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},B.prototype._start=function(H){this._startVector=this._vector=H[0].sub(H[1]),this._minDiameter=H[0].dist(H[1])},B.prototype._move=function(H,$){var fe=this._vector;if(this._vector=H[0].sub(H[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:So(this._vector,fe),pinchAround:$}},B.prototype._isBelowThreshold=function(H){this._minDiameter=Math.min(this._minDiameter,H.mag());var $=25/(Math.PI*this._minDiameter)*360,fe=So(H,this._startVector);return Math.abs(fe)<$},B}(Ai);function Ls(O){return Math.abs(O.y)>Math.abs(O.x)}var Ts=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.reset=function(){O.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},B.prototype._start=function(H){this._lastPoints=H,Ls(H[0].sub(H[1]))&&(this._valid=!1)},B.prototype._move=function(H,$,fe){var ve=H[0].sub(this._lastPoints[0]),Te=H[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(ve,Te,fe.timeStamp),this._valid)return this._lastPoints=H,this._active=!0,{pitchDelta:(ve.y+Te.y)/2*-.5}},B.prototype.gestureBeginsVertically=function(H,$,fe){if(void 0!==this._valid)return this._valid;var ve=H.mag()>=2,Te=$.mag()>=2;if(ve||Te){if(!ve||!Te)return void 0===this._firstMove&&(this._firstMove=fe),fe-this._firstMove<100&&void 0;var Ee=H.y>0==$.y>0;return Ls(H)&&Ls($)&&Ee}},B}(Ai),na={panStep:100,bearingStep:15,pitchStep:10},ko=function(){var O=na;this._panStep=O.panStep,this._bearingStep=O.bearingStep,this._pitchStep=O.pitchStep};function ms(O){return O*(2-O)}ko.prototype.reset=function(){this._active=!1},ko.prototype.keydown=function(O){var B=this;if(!(O.altKey||O.ctrlKey||O.metaKey)){var H=0,$=0,fe=0,ve=0,Te=0;switch(O.keyCode){case 61:case 107:case 171:case 187:H=1;break;case 189:case 109:case 173:H=-1;break;case 37:O.shiftKey?$=-1:(O.preventDefault(),ve=-1);break;case 39:O.shiftKey?$=1:(O.preventDefault(),ve=1);break;case 38:O.shiftKey?fe=1:(O.preventDefault(),Te=-1);break;case 40:O.shiftKey?fe=-1:(O.preventDefault(),Te=1);break;default:return}return{cameraAnimation:function(Ee){var Fe=Ee.getZoom();Ee.easeTo({duration:300,easeId:"keyboardHandler",easing:ms,zoom:H?Math.round(Fe)+H*(O.shiftKey?2:1):Fe,bearing:Ee.getBearing()+$*B._bearingStep,pitch:Ee.getPitch()+fe*B._pitchStep,offset:[-ve*B._panStep,-Te*B._panStep],center:Ee.getCenter()},{originalEvent:O})}}}},ko.prototype.enable=function(){this._enabled=!0},ko.prototype.disable=function(){this._enabled=!1,this.reset()},ko.prototype.isEnabled=function(){return this._enabled},ko.prototype.isActive=function(){return this._active};var Ra=function(O,B){this._map=O,this._el=O.getCanvasContainer(),this._handler=B,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Ra.prototype.setZoomRate=function(O){this._defaultZoomRate=O},Ra.prototype.setWheelZoomRate=function(O){this._wheelZoomRate=O},Ra.prototype.isEnabled=function(){return!!this._enabled},Ra.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},Ra.prototype.isZooming=function(){return!!this._zooming},Ra.prototype.enable=function(O){this.isEnabled()||(this._enabled=!0,this._aroundCenter=O&&"center"===O.around)},Ra.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Ra.prototype.wheel=function(O){if(this.isEnabled()){var B=O.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*O.deltaY:O.deltaY,H=e.browser.now(),$=H-(this._lastWheelEventTime||0);this._lastWheelEventTime=H,0!==B&&B%4.000244140625==0?this._type="wheel":0!==B&&Math.abs(B)<4?this._type="trackpad":$>400?(this._type=null,this._lastValue=B,this._timeout=setTimeout(this._onTimeout,40,O)):this._type||(this._type=Math.abs($*B)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,B+=this._lastValue)),O.shiftKey&&B&&(B/=4),this._type&&(this._lastWheelEvent=O,this._delta-=B,this._active||this._start(O)),O.preventDefault()}},Ra.prototype._onTimeout=function(O){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(O)},Ra.prototype._start=function(O){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var B=a.mousePos(this._el,O);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(B)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Ra.prototype.renderFrame=function(){return this._onScrollFrame()},Ra.prototype._onScrollFrame=function(){var O=this;if(this._frameId&&(this._frameId=null,this.isActive())){var B=this._map.transform;if(0!==this._delta){var H="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,$=2/(1+Math.exp(-Math.abs(this._delta*H)));this._delta<0&&0!==$&&($=1/$);var fe="number"==typeof this._targetZoom?B.zoomScale(this._targetZoom):B.scale;this._targetZoom=Math.min(B.maxZoom,Math.max(B.minZoom,B.scaleZoom(fe*$))),"wheel"===this._type&&(this._startZoom=B.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var ve,Te="number"==typeof this._targetZoom?this._targetZoom:B.zoom,Ee=this._startZoom,Fe=this._easing,Ze=!1;if("wheel"===this._type&&Ee&&Fe){var rt=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),ft=Fe(rt);ve=e.number(Ee,Te,ft),rt<1?this._frameId||(this._frameId=!0):Ze=!0}else ve=Te,Ze=!0;return this._active=!0,Ze&&(this._active=!1,this._finishTimeout=setTimeout(function(){O._zooming=!1,O._handler._triggerRenderFrame(),delete O._targetZoom,delete O._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Ze,zoomDelta:ve-B.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Ra.prototype._smoothOutEasing=function(O){var B=e.ease;if(this._prevEase){var H=this._prevEase,$=(e.browser.now()-H.start)/H.duration,fe=H.easing($+.01)-H.easing($),ve=.27/Math.sqrt(fe*fe+1e-4)*.01,Te=Math.sqrt(.0729-ve*ve);B=e.bezier(ve,Te,.25,1)}return this._prevEase={start:e.browser.now(),duration:O,easing:B},B},Ra.prototype.reset=function(){this._active=!1};var Fa=function(O,B){this._clickZoom=O,this._tapZoom=B};Fa.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Fa.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Fa.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Fa.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var go=function(){this.reset()};go.prototype.reset=function(){this._active=!1},go.prototype.dblclick=function(O,B){return O.preventDefault(),{cameraAnimation:function(H){H.easeTo({duration:300,zoom:H.getZoom()+(O.shiftKey?-1:1),around:H.unproject(B)},{originalEvent:O})}}},go.prototype.enable=function(){this._enabled=!0},go.prototype.disable=function(){this._enabled=!1,this.reset()},go.prototype.isEnabled=function(){return this._enabled},go.prototype.isActive=function(){return this._active};var Ka=function(){this._tap=new aa({numTouches:1,numTaps:1}),this.reset()};Ka.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Ka.prototype.touchstart=function(O,B,H){this._swipePoint||(this._tapTime&&O.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?H.length>0&&(this._swipePoint=B[0],this._swipeTouch=H[0].identifier):this._tap.touchstart(O,B,H))},Ka.prototype.touchmove=function(O,B,H){if(this._tapTime){if(this._swipePoint){if(H[0].identifier!==this._swipeTouch)return;var $=B[0],fe=$.y-this._swipePoint.y;return this._swipePoint=$,O.preventDefault(),this._active=!0,{zoomDelta:fe/128}}}else this._tap.touchmove(O,B,H)},Ka.prototype.touchend=function(O,B,H){this._tapTime?this._swipePoint&&0===H.length&&this.reset():this._tap.touchend(O,B,H)&&(this._tapTime=O.timeStamp)},Ka.prototype.touchcancel=function(){this.reset()},Ka.prototype.enable=function(){this._enabled=!0},Ka.prototype.disable=function(){this._enabled=!1,this.reset()},Ka.prototype.isEnabled=function(){return this._enabled},Ka.prototype.isActive=function(){return this._active};var Ko=function(O,B,H){this._el=O,this._mousePan=B,this._touchPan=H};Ko.prototype.enable=function(O){this._inertiaOptions=O||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},Ko.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},Ko.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},Ko.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Ia=function(O,B,H){this._pitchWithRotate=O.pitchWithRotate,this._mouseRotate=B,this._mousePitch=H};Ia.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Ia.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Ia.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Ia.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Ms=function(O,B,H,$){this._el=O,this._touchZoom=B,this._touchRotate=H,this._tapDragZoom=$,this._rotationDisabled=!1,this._enabled=!0};Ms.prototype.enable=function(O){this._touchZoom.enable(O),this._rotationDisabled||this._touchRotate.enable(O),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Ms.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Ms.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Ms.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Ms.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Ms.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Al=function(O){return O.zoom||O.drag||O.pitch||O.rotate},Cl=function(O){function B(){O.apply(this,arguments)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B}(e.Event);function Iu(O){return O.panDelta&&O.panDelta.mag()||O.zoomDelta||O.bearingDelta||O.pitchDelta}var Fo=function(O,B){this._map=O,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Zr(O),this._bearingSnap=B.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(B),e.bindAll(["handleEvent","handleWindowEvent"],this);var H=this._el;this._listeners=[[H,"touchstart",{passive:!1}],[H,"touchmove",{passive:!1}],[H,"touchend",void 0],[H,"touchcancel",void 0],[H,"mousedown",void 0],[H,"mousemove",void 0],[H,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[H,"mouseover",void 0],[H,"mouseout",void 0],[H,"dblclick",void 0],[H,"click",void 0],[H,"keydown",{capture:!1}],[H,"keyup",void 0],[H,"wheel",{passive:!1}],[H,"contextmenu",void 0],[e.window,"blur",void 0]];for(var $=0,fe=this._listeners;$<fe.length;$+=1){var ve=fe[$],Te=ve[0];a.addEventListener(Te,ve[1],Te===e.window.document?this.handleWindowEvent:this.handleEvent,ve[2])}};Fo.prototype.destroy=function(){for(var O=0,B=this._listeners;O<B.length;O+=1){var H=B[O],$=H[0];a.removeEventListener($,H[1],$===e.window.document?this.handleWindowEvent:this.handleEvent,H[2])}},Fo.prototype._addDefaultHandlers=function(O){var B=this._map,H=B.getCanvasContainer();this._add("mapEvent",new fr(B,O));var $=B.boxZoom=new ri(B,O);this._add("boxZoom",$);var fe=new ya,ve=new go;B.doubleClickZoom=new Fa(ve,fe),this._add("tapZoom",fe),this._add("clickZoom",ve);var Te=new Ka;this._add("tapDragZoom",Te);var Ee=B.touchPitch=new Ts;this._add("touchPitch",Ee);var Fe=new pa(O),Ze=new Wi(O);B.dragRotate=new Ia(O,Fe,Ze),this._add("mouseRotate",Fe,["mousePitch"]),this._add("mousePitch",Ze,["mouseRotate"]);var rt=new Ta(O),ft=new Dr(O);B.dragPan=new Ko(H,rt,ft),this._add("mousePan",rt),this._add("touchPan",ft,["touchZoom","touchRotate"]);var It=new us,Rt=new Ua;B.touchZoomRotate=new Ms(H,Rt,It,Te),this._add("touchRotate",It,["touchPan","touchZoom"]),this._add("touchZoom",Rt,["touchPan","touchRotate"]);var Lt=B.scrollZoom=new Ra(B,this);this._add("scrollZoom",Lt,["mousePan"]);var Ot=B.keyboard=new ko;this._add("keyboard",Ot),this._add("blockableMapEvent",new Di(B));for(var St=0,Gt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];St<Gt.length;St+=1){var qt=Gt[St];O.interactive&&O[qt]&&B[qt].enable(O[qt])}},Fo.prototype._add=function(O,B,H){this._handlers.push({handlerName:O,handler:B,allowed:H}),this._handlersById[O]=B},Fo.prototype.stop=function(){if(!this._updatingCamera){for(var O=0,B=this._handlers;O<B.length;O+=1)B[O].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},Fo.prototype.isActive=function(){for(var O=0,B=this._handlers;O<B.length;O+=1)if(B[O].handler.isActive())return!0;return!1},Fo.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Fo.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Fo.prototype.isMoving=function(){return Boolean(Al(this._eventsInProgress))||this.isZooming()},Fo.prototype._blockedByActive=function(O,B,H){for(var $ in O)if($!==H&&(!B||B.indexOf($)<0))return!0;return!1},Fo.prototype.handleWindowEvent=function(O){this.handleEvent(O,O.type+"Window")},Fo.prototype._getMapTouches=function(O){for(var B=[],H=0,$=O;H<$.length;H+=1){var fe=$[H];this._el.contains(fe.target)&&B.push(fe)}return B},Fo.prototype.handleEvent=function(O,B){if("blur"!==O.type){this._updatingCamera=!0;for(var H="renderFrame"===O.type?void 0:O,$={needsRenderFrame:!1},fe={},ve={},Te=O.touches?this._getMapTouches(O.touches):void 0,Ee=Te?a.touchPos(this._el,Te):a.mousePos(this._el,O),Fe=0,Ze=this._handlers;Fe<Ze.length;Fe+=1){var rt=Ze[Fe],ft=rt.handlerName,It=rt.handler,Rt=rt.allowed;if(It.isEnabled()){var Lt=void 0;this._blockedByActive(ve,Rt,ft)?It.reset():It[B||O.type]&&(Lt=It[B||O.type](O,Ee,Te),this.mergeHandlerResult($,fe,Lt,ft,H),Lt&&Lt.needsRenderFrame&&this._triggerRenderFrame()),(Lt||It.isActive())&&(ve[ft]=It)}}var Ot={};for(var St in this._previousActiveHandlers)ve[St]||(Ot[St]=H);this._previousActiveHandlers=ve,(Object.keys(Ot).length||Iu($))&&(this._changes.push([$,fe,Ot]),this._triggerRenderFrame()),(Object.keys(ve).length||Iu($))&&this._map._stop(!0),this._updatingCamera=!1;var Gt=$.cameraAnimation;Gt&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Gt(this._map))}else this.stop()},Fo.prototype.mergeHandlerResult=function(O,B,H,$,fe){if(H){e.extend(O,H);var ve={handlerName:$,originalEvent:H.originalEvent||fe};void 0!==H.zoomDelta&&(B.zoom=ve),void 0!==H.panDelta&&(B.drag=ve),void 0!==H.pitchDelta&&(B.pitch=ve),void 0!==H.bearingDelta&&(B.rotate=ve)}},Fo.prototype._applyChanges=function(){for(var O={},B={},H={},$=0,fe=this._changes;$<fe.length;$+=1){var ve=fe[$],Te=ve[0],Ee=ve[1],Fe=ve[2];Te.panDelta&&(O.panDelta=(O.panDelta||new e.Point(0,0))._add(Te.panDelta)),Te.zoomDelta&&(O.zoomDelta=(O.zoomDelta||0)+Te.zoomDelta),Te.bearingDelta&&(O.bearingDelta=(O.bearingDelta||0)+Te.bearingDelta),Te.pitchDelta&&(O.pitchDelta=(O.pitchDelta||0)+Te.pitchDelta),void 0!==Te.around&&(O.around=Te.around),void 0!==Te.pinchAround&&(O.pinchAround=Te.pinchAround),Te.noInertia&&(O.noInertia=Te.noInertia),e.extend(B,Ee),e.extend(H,Fe)}this._updateMapTransform(O,B,H),this._changes=[]},Fo.prototype._updateMapTransform=function(O,B,H){var $=this._map,fe=$.transform;if(!Iu(O))return this._fireEvents(B,H);var ve=O.panDelta,Te=O.zoomDelta,Ee=O.bearingDelta,Fe=O.pitchDelta,Ze=O.around,rt=O.pinchAround;void 0!==rt&&(Ze=rt),$._stop(!0),Ze=Ze||$.transform.centerPoint;var ft=fe.pointLocation(ve?Ze.sub(ve):Ze);Ee&&(fe.bearing+=Ee),Fe&&(fe.pitch+=Fe),Te&&(fe.zoom+=Te),fe.setLocationAtPoint(ft,Ze),this._map._update(),O.noInertia||this._inertia.record(O),this._fireEvents(B,H)},Fo.prototype._fireEvents=function(O,B){var H=this,$=Al(this._eventsInProgress),fe=Al(O),ve={};for(var Te in O)this._eventsInProgress[Te]||(ve[Te+"start"]=O[Te].originalEvent),this._eventsInProgress[Te]=O[Te];for(var Fe in!$&&fe&&this._fireEvent("movestart",fe.originalEvent),ve)this._fireEvent(Fe,ve[Fe]);for(var Ze in O.rotate&&(this._bearingChanged=!0),fe&&this._fireEvent("move",fe.originalEvent),O)this._fireEvent(Ze,O[Ze].originalEvent);var ft,It={};for(var Rt in this._eventsInProgress){var Lt=this._eventsInProgress[Rt],Ot=Lt.handlerName,St=Lt.originalEvent;this._handlersById[Ot].isActive()||(delete this._eventsInProgress[Rt],It[Rt+"end"]=ft=B[Ot]||St)}for(var Gt in It)this._fireEvent(Gt,It[Gt]);var qt=Al(this._eventsInProgress);if(($||fe)&&!qt){this._updatingCamera=!0;var Zt=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),yn=function(Sn){return 0!==Sn&&-H._bearingSnap<Sn&&Sn<H._bearingSnap};Zt?(yn(Zt.bearing||this._map.getBearing())&&(Zt.bearing=0),this._map.easeTo(Zt,{originalEvent:ft})):(this._map.fire(new e.Event("moveend",{originalEvent:ft})),yn(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},Fo.prototype._fireEvent=function(O,B){this._map.fire(new e.Event(O,B?{originalEvent:B}:{}))},Fo.prototype._triggerRenderFrame=function(){var O=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(B){delete O._frameId,O.handleEvent(new Cl("renderFrame",{timeStamp:B})),O._applyChanges()}))};var tu=function(O){function B(H,$){O.call(this),this._moving=!1,this._zooming=!1,this.transform=H,this._bearingSnap=$.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},B.prototype.setCenter=function(H,$){return this.jumpTo({center:H},$)},B.prototype.panBy=function(H,$,fe){return H=e.Point.convert(H).mult(-1),this.panTo(this.transform.center,e.extend({offset:H},$),fe)},B.prototype.panTo=function(H,$,fe){return this.easeTo(e.extend({center:H},$),fe)},B.prototype.getZoom=function(){return this.transform.zoom},B.prototype.setZoom=function(H,$){return this.jumpTo({zoom:H},$),this},B.prototype.zoomTo=function(H,$,fe){return this.easeTo(e.extend({zoom:H},$),fe)},B.prototype.zoomIn=function(H,$){return this.zoomTo(this.getZoom()+1,H,$),this},B.prototype.zoomOut=function(H,$){return this.zoomTo(this.getZoom()-1,H,$),this},B.prototype.getBearing=function(){return this.transform.bearing},B.prototype.setBearing=function(H,$){return this.jumpTo({bearing:H},$),this},B.prototype.getPadding=function(){return this.transform.padding},B.prototype.setPadding=function(H,$){return this.jumpTo({padding:H},$),this},B.prototype.rotateTo=function(H,$,fe){return this.easeTo(e.extend({bearing:H},$),fe)},B.prototype.resetNorth=function(H,$){return this.rotateTo(0,e.extend({duration:1e3},H),$),this},B.prototype.resetNorthPitch=function(H,$){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},H),$),this},B.prototype.snapToNorth=function(H,$){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(H,$):this},B.prototype.getPitch=function(){return this.transform.pitch},B.prototype.setPitch=function(H,$){return this.jumpTo({pitch:H},$),this},B.prototype.cameraForBounds=function(H,$){return H=e.LngLatBounds.convert(H),this._cameraForBoxAndBearing(H.getNorthWest(),H.getSouthEast(),0,$)},B.prototype._cameraForBoxAndBearing=function(H,$,fe,ve){var Te={top:0,bottom:0,right:0,left:0};if("number"==typeof(ve=e.extend({padding:Te,offset:[0,0],maxZoom:this.transform.maxZoom},ve)).padding){var Ee=ve.padding;ve.padding={top:Ee,bottom:Ee,right:Ee,left:Ee}}ve.padding=e.extend(Te,ve.padding);var Fe=this.transform,Ze=Fe.padding,rt=Fe.project(e.LngLat.convert(H)),ft=Fe.project(e.LngLat.convert($)),It=rt.rotate(-fe*Math.PI/180),Rt=ft.rotate(-fe*Math.PI/180),Lt=new e.Point(Math.max(It.x,Rt.x),Math.max(It.y,Rt.y)),Ot=new e.Point(Math.min(It.x,Rt.x),Math.min(It.y,Rt.y)),St=Lt.sub(Ot),Gt=(Fe.width-(Ze.left+Ze.right+ve.padding.left+ve.padding.right))/St.x,qt=(Fe.height-(Ze.top+Ze.bottom+ve.padding.top+ve.padding.bottom))/St.y;if(!(qt<0||Gt<0)){var Zt=Math.min(Fe.scaleZoom(Fe.scale*Math.min(Gt,qt)),ve.maxZoom),yn=e.Point.convert(ve.offset),Un=new e.Point(yn.x+(ve.padding.left-ve.padding.right)/2,yn.y+(ve.padding.top-ve.padding.bottom)/2).mult(Fe.scale/Fe.zoomScale(Zt));return{center:Fe.unproject(rt.add(ft).div(2).sub(Un)),zoom:Zt,bearing:fe}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},B.prototype.fitBounds=function(H,$,fe){return this._fitInternal(this.cameraForBounds(H,$),$,fe)},B.prototype.fitScreenCoordinates=function(H,$,fe,ve,Te){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(H)),this.transform.pointLocation(e.Point.convert($)),fe,ve),ve,Te)},B.prototype._fitInternal=function(H,$,fe){return H?(delete($=e.extend(H,$)).padding,$.linear?this.easeTo($,fe):this.flyTo($,fe)):this},B.prototype.jumpTo=function(H,$){this.stop();var fe=this.transform,ve=!1,Te=!1,Ee=!1;return"zoom"in H&&fe.zoom!==+H.zoom&&(ve=!0,fe.zoom=+H.zoom),void 0!==H.center&&(fe.center=e.LngLat.convert(H.center)),"bearing"in H&&fe.bearing!==+H.bearing&&(Te=!0,fe.bearing=+H.bearing),"pitch"in H&&fe.pitch!==+H.pitch&&(Ee=!0,fe.pitch=+H.pitch),null==H.padding||fe.isPaddingEqual(H.padding)||(fe.padding=H.padding),this.fire(new e.Event("movestart",$)).fire(new e.Event("move",$)),ve&&this.fire(new e.Event("zoomstart",$)).fire(new e.Event("zoom",$)).fire(new e.Event("zoomend",$)),Te&&this.fire(new e.Event("rotatestart",$)).fire(new e.Event("rotate",$)).fire(new e.Event("rotateend",$)),Ee&&this.fire(new e.Event("pitchstart",$)).fire(new e.Event("pitch",$)).fire(new e.Event("pitchend",$)),this.fire(new e.Event("moveend",$))},B.prototype.easeTo=function(H,$){var fe=this;this._stop(!1,H.easeId),(!1===(H=e.extend({offset:[0,0],duration:500,easing:e.ease},H)).animate||!H.essential&&e.browser.prefersReducedMotion)&&(H.duration=0);var ve=this.transform,Te=this.getZoom(),Ee=this.getBearing(),Fe=this.getPitch(),Ze=this.getPadding(),rt="zoom"in H?+H.zoom:Te,ft="bearing"in H?this._normalizeBearing(H.bearing,Ee):Ee,It="pitch"in H?+H.pitch:Fe,Rt="padding"in H?H.padding:ve.padding,Lt=e.Point.convert(H.offset),Ot=ve.centerPoint.add(Lt),St=ve.pointLocation(Ot),Gt=e.LngLat.convert(H.center||St);this._normalizeCenter(Gt);var qt,Zt,yn=ve.project(St),Sn=ve.project(Gt).sub(yn),qn=ve.zoomScale(rt-Te);H.around&&(qt=e.LngLat.convert(H.around),Zt=ve.locationPoint(qt));var Un={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||rt!==Te,this._rotating=this._rotating||Ee!==ft,this._pitching=this._pitching||It!==Fe,this._padding=!ve.isPaddingEqual(Rt),this._easeId=H.easeId,this._prepareEase($,H.noMoveStart,Un),clearTimeout(this._easeEndTimeoutID),this._ease(function(mr){if(fe._zooming&&(ve.zoom=e.number(Te,rt,mr)),fe._rotating&&(ve.bearing=e.number(Ee,ft,mr)),fe._pitching&&(ve.pitch=e.number(Fe,It,mr)),fe._padding&&(ve.interpolatePadding(Ze,Rt,mr),Ot=ve.centerPoint.add(Lt)),qt)ve.setLocationAtPoint(qt,Zt);else{var gr=ve.zoomScale(ve.zoom-Te),Pr=rt>Te?Math.min(2,qn):Math.max(.5,qn),Cr=Math.pow(Pr,1-mr),di=ve.unproject(yn.add(Sn.mult(mr*Cr)).mult(gr));ve.setLocationAtPoint(ve.renderWorldCopies?di.wrap():di,Ot)}fe._fireMoveEvents($)},function(mr){fe._afterEase($,mr)},H),this},B.prototype._prepareEase=function(H,$,fe){void 0===fe&&(fe={}),this._moving=!0,$||fe.moving||this.fire(new e.Event("movestart",H)),this._zooming&&!fe.zooming&&this.fire(new e.Event("zoomstart",H)),this._rotating&&!fe.rotating&&this.fire(new e.Event("rotatestart",H)),this._pitching&&!fe.pitching&&this.fire(new e.Event("pitchstart",H))},B.prototype._fireMoveEvents=function(H){this.fire(new e.Event("move",H)),this._zooming&&this.fire(new e.Event("zoom",H)),this._rotating&&this.fire(new e.Event("rotate",H)),this._pitching&&this.fire(new e.Event("pitch",H))},B.prototype._afterEase=function(H,$){if(!this._easeId||!$||this._easeId!==$){delete this._easeId;var fe=this._zooming,ve=this._rotating,Te=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,fe&&this.fire(new e.Event("zoomend",H)),ve&&this.fire(new e.Event("rotateend",H)),Te&&this.fire(new e.Event("pitchend",H)),this.fire(new e.Event("moveend",H))}},B.prototype.flyTo=function(H,$){var fe=this;if(!H.essential&&e.browser.prefersReducedMotion){var ve=e.pick(H,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ve,$)}this.stop(),H=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},H);var Te=this.transform,Ee=this.getZoom(),Fe=this.getBearing(),Ze=this.getPitch(),rt=this.getPadding(),ft="zoom"in H?e.clamp(+H.zoom,Te.minZoom,Te.maxZoom):Ee,It="bearing"in H?this._normalizeBearing(H.bearing,Fe):Fe,Rt="pitch"in H?+H.pitch:Ze,Lt="padding"in H?H.padding:Te.padding,Ot=Te.zoomScale(ft-Ee),St=e.Point.convert(H.offset),Gt=Te.centerPoint.add(St),qt=Te.pointLocation(Gt),Zt=e.LngLat.convert(H.center||qt);this._normalizeCenter(Zt);var yn=Te.project(qt),Sn=Te.project(Zt).sub(yn),qn=H.curve,Un=Math.max(Te.width,Te.height),mr=Un/Ot,gr=Sn.mag();if("minZoom"in H){var Pr=e.clamp(Math.min(H.minZoom,Ee,ft),Te.minZoom,Te.maxZoom),Cr=Un/Te.zoomScale(Pr-Ee);qn=Math.sqrt(Cr/gr*2)}var di=qn*qn;function wi(Ei){var ta=(mr*mr-Un*Un+(Ei?-1:1)*di*di*gr*gr)/(2*(Ei?mr:Un)*di*gr);return Math.log(Math.sqrt(ta*ta+1)-ta)}function Bi(Ei){return(Math.exp(Ei)-Math.exp(-Ei))/2}function ur(Ei){return(Math.exp(Ei)+Math.exp(-Ei))/2}var $r=wi(0),Ti=function(Ei){return ur($r)/ur($r+qn*Ei)},bi=function(Ei){return Un*((ur($r)*(Bi(ta=$r+qn*Ei)/ur(ta))-Bi($r))/di)/gr;var ta},Si=(wi(1)-$r)/qn;if(Math.abs(gr)<1e-6||!isFinite(Si)){if(Math.abs(Un-mr)<1e-6)return this.easeTo(H,$);var ji=mr<Un?-1:1;Si=Math.abs(Math.log(mr/Un))/qn,bi=function(){return 0},Ti=function(Ei){return Math.exp(ji*qn*Ei)}}return H.duration="duration"in H?+H.duration:1e3*Si/("screenSpeed"in H?+H.screenSpeed/qn:+H.speed),H.maxDuration&&H.duration>H.maxDuration&&(H.duration=0),this._zooming=!0,this._rotating=Fe!==It,this._pitching=Rt!==Ze,this._padding=!Te.isPaddingEqual(Lt),this._prepareEase($,!1),this._ease(function(Ei){var ta=Ei*Si,Zi=1/Ti(ta);Te.zoom=1===Ei?ft:Ee+Te.scaleZoom(Zi),fe._rotating&&(Te.bearing=e.number(Fe,It,Ei)),fe._pitching&&(Te.pitch=e.number(Ze,Rt,Ei)),fe._padding&&(Te.interpolatePadding(rt,Lt,Ei),Gt=Te.centerPoint.add(St));var ra=1===Ei?Zt:Te.unproject(yn.add(Sn.mult(bi(ta))).mult(Zi));Te.setLocationAtPoint(Te.renderWorldCopies?ra.wrap():ra,Gt),fe._fireMoveEvents($)},function(){return fe._afterEase($)},H),this},B.prototype.isEasing=function(){return!!this._easeFrameId},B.prototype.stop=function(){return this._stop()},B.prototype._stop=function(H,$){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var fe=this._onEaseEnd;delete this._onEaseEnd,fe.call(this,$)}if(!H){var ve=this.handlers;ve&&ve.stop()}return this},B.prototype._ease=function(H,$,fe){!1===fe.animate||0===fe.duration?(H(1),$()):(this._easeStart=e.browser.now(),this._easeOptions=fe,this._onEaseFrame=H,this._onEaseEnd=$,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},B.prototype._renderFrameCallback=function(){var H=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(H)),H<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},B.prototype._normalizeBearing=function(H,$){H=e.wrap(H,-180,180);var fe=Math.abs(H-$);return Math.abs(H-360-$)<fe&&(H-=360),Math.abs(H+360-$)<fe&&(H+=360),H},B.prototype._normalizeCenter=function(H){var $=this.transform;if($.renderWorldCopies&&!$.lngRange){var fe=H.lng-$.center.lng;H.lng+=fe>180?-360:fe<-180?360:0}},B}(e.Evented),jo=function(O){void 0===O&&(O={}),this.options=O,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};jo.prototype.getDefaultPosition=function(){return"bottom-right"},jo.prototype.onAdd=function(O){var B=this.options&&this.options.compact;return this._map=O,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=a.create("div","mapboxgl-ctrl-attrib-inner",this._container),B&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===B&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},jo.prototype.onRemove=function(){a.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},jo.prototype._updateEditLink=function(){var O=this._editLink;O||(O=this._editLink=this._container.querySelector(".mapbox-improve-map"));var B=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(O){var H=B.reduce(function($,fe,ve){return fe.value&&($+=fe.key+"="+fe.value+(ve<B.length-1?"&":"")),$},"?");O.href=e.config.FEEDBACK_URL+"/"+H+(this._map._hash?this._map._hash.getHashString(!0):""),O.rel="noopener nofollow"}},jo.prototype._updateData=function(O){!O||"metadata"!==O.sourceDataType&&"style"!==O.dataType||(this._updateAttributions(),this._updateEditLink())},jo.prototype._updateAttributions=function(){if(this._map.style){var O=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?O=O.concat(this.options.customAttribution.map(function(Ee){return"string"!=typeof Ee?"":Ee})):"string"==typeof this.options.customAttribution&&O.push(this.options.customAttribution)),this._map.style.stylesheet){var B=this._map.style.stylesheet;this.styleOwner=B.owner,this.styleId=B.id}var H=this._map.style.sourceCaches;for(var $ in H){var fe=H[$];if(fe.used){var ve=fe.getSource();ve.attribution&&O.indexOf(ve.attribution)<0&&O.push(ve.attribution)}}O.sort(function(Ee,Fe){return Ee.length-Fe.length});var Te=(O=O.filter(function(Ee,Fe){for(var Ze=Fe+1;Ze<O.length;Ze++)if(O[Ze].indexOf(Ee)>=0)return!1;return!0})).join(" | ");Te!==this._attribHTML&&(this._attribHTML=Te,O.length?(this._innerContainer.innerHTML=Te,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},jo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var rl=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};rl.prototype.onAdd=function(O){this._map=O,this._container=a.create("div","mapboxgl-ctrl");var B=a.create("a","mapboxgl-ctrl-logo");return B.target="_blank",B.rel="noopener nofollow",B.href="https://www.mapbox.com/",B.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),B.setAttribute("rel","noopener nofollow"),this._container.appendChild(B),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},rl.prototype.onRemove=function(){a.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},rl.prototype.getDefaultPosition=function(){return"bottom-left"},rl.prototype._updateLogo=function(O){O&&"metadata"!==O.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},rl.prototype._logoRequired=function(){if(this._map.style){var O=this._map.style.sourceCaches;for(var B in O)if(O[B].getSource().mapbox_logo)return!0;return!1}},rl.prototype._updateCompact=function(){var O=this._container.children;if(O.length){var B=O[0];this._map.getCanvasContainer().offsetWidth<250?B.classList.add("mapboxgl-compact"):B.classList.remove("mapboxgl-compact")}};var zi=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};zi.prototype.add=function(O){var B=++this._id;return this._queue.push({callback:O,id:B,cancelled:!1}),B},zi.prototype.remove=function(O){for(var B=this._currentlyRunning,H=0,$=B?this._queue.concat(B):this._queue;H<$.length;H+=1){var fe=$[H];if(fe.id===O)return void(fe.cancelled=!0)}},zi.prototype.run=function(O){void 0===O&&(O=0);var B=this._currentlyRunning=this._queue;this._queue=[];for(var H=0,$=B;H<$.length;H+=1){var fe=$[H];if(!fe.cancelled&&(fe.callback(O),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},zi.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Ki={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Yl=e.window.HTMLImageElement,fu=e.window.HTMLElement,pl=e.window.ImageBitmap,Os={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Zs=function(O){function B($){var fe=this;if(null!=($=e.extend({},Os,$)).minZoom&&null!=$.maxZoom&&$.minZoom>$.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=$.minPitch&&null!=$.maxPitch&&$.minPitch>$.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=$.minPitch&&$.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=$.maxPitch&&$.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var ve=new Kt($.minZoom,$.maxZoom,$.minPitch,$.maxPitch,$.renderWorldCopies);if(O.call(this,ve,$),this._interactive=$.interactive,this._maxTileCacheSize=$.maxTileCacheSize,this._failIfMajorPerformanceCaveat=$.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=$.preserveDrawingBuffer,this._antialias=$.antialias,this._trackResize=$.trackResize,this._bearingSnap=$.bearingSnap,this._refreshExpiredTiles=$.refreshExpiredTiles,this._fadeDuration=$.fadeDuration,this._crossSourceCollisions=$.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=$.collectResourceTiming,this._renderTaskQueue=new zi,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},Ki,$.locale),this._requestManager=new e.RequestManager($.transformRequest,$.accessToken),"string"==typeof $.container){if(this._container=e.window.document.getElementById($.container),!this._container)throw new Error("Container '"+$.container+"' not found.")}else{if(!($.container instanceof fu))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=$.container}if($.maxBounds&&this.setMaxBounds($.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return fe._update(!1)}),this.on("moveend",function(){return fe._update(!1)}),this.on("zoom",function(){return fe._update(!0)}),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new Fo(this,$),this._hash=$.hash&&new Vn("string"==typeof $.hash&&$.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:$.center,zoom:$.zoom,bearing:$.bearing,pitch:$.pitch}),$.bounds&&(this.resize(),this.fitBounds($.bounds,e.extend({},$.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=$.localIdeographFontFamily,$.style&&this.setStyle($.style,{localIdeographFontFamily:$.localIdeographFontFamily}),$.attributionControl&&this.addControl(new jo({customAttribution:$.customAttribution})),this.addControl(new rl,$.logoPosition),this.on("style.load",function(){fe.transform.unmodified&&fe.jumpTo(fe.style.stylesheet)}),this.on("data",function(Ee){fe._update("style"===Ee.dataType),fe.fire(new e.Event(Ee.dataType+"data",Ee))}),this.on("dataloading",function(Ee){fe.fire(new e.Event(Ee.dataType+"dataloading",Ee))})}O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B;var H={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return B.prototype._getMapId=function(){return this._mapId},B.prototype.addControl=function($,fe){if(void 0===fe&&$.getDefaultPosition&&(fe=$.getDefaultPosition()),void 0===fe&&(fe="top-right"),!$||!$.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var ve=$.onAdd(this);this._controls.push($);var Te=this._controlPositions[fe];return-1!==fe.indexOf("bottom")?Te.insertBefore(ve,Te.firstChild):Te.appendChild(ve),this},B.prototype.removeControl=function($){if(!$||!$.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var fe=this._controls.indexOf($);return fe>-1&&this._controls.splice(fe,1),$.onRemove(this),this},B.prototype.resize=function($){var fe=this._containerDimensions(),ve=fe[0],Te=fe[1];this._resizeCanvas(ve,Te),this.transform.resize(ve,Te),this.painter.resize(ve,Te);var Ee=!this._moving;return Ee&&(this.stop(),this.fire(new e.Event("movestart",$)).fire(new e.Event("move",$))),this.fire(new e.Event("resize",$)),Ee&&this.fire(new e.Event("moveend",$)),this},B.prototype.getBounds=function(){return this.transform.getBounds()},B.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},B.prototype.setMaxBounds=function($){return this.transform.setMaxBounds(e.LngLatBounds.convert($)),this._update()},B.prototype.setMinZoom=function($){if(($=null==$?-2:$)>=-2&&$<=this.transform.maxZoom)return this.transform.minZoom=$,this._update(),this.getZoom()<$&&this.setZoom($),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},B.prototype.getMinZoom=function(){return this.transform.minZoom},B.prototype.setMaxZoom=function($){if(($=null==$?22:$)>=this.transform.minZoom)return this.transform.maxZoom=$,this._update(),this.getZoom()>$&&this.setZoom($),this;throw new Error("maxZoom must be greater than the current minZoom")},B.prototype.getMaxZoom=function(){return this.transform.maxZoom},B.prototype.setMinPitch=function($){if(($=null==$?0:$)<0)throw new Error("minPitch must be greater than or equal to 0");if($>=0&&$<=this.transform.maxPitch)return this.transform.minPitch=$,this._update(),this.getPitch()<$&&this.setPitch($),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},B.prototype.getMinPitch=function(){return this.transform.minPitch},B.prototype.setMaxPitch=function($){if(($=null==$?60:$)>60)throw new Error("maxPitch must be less than or equal to 60");if($>=this.transform.minPitch)return this.transform.maxPitch=$,this._update(),this.getPitch()>$&&this.setPitch($),this;throw new Error("maxPitch must be greater than the current minPitch")},B.prototype.getMaxPitch=function(){return this.transform.maxPitch},B.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},B.prototype.setRenderWorldCopies=function($){return this.transform.renderWorldCopies=$,this._update()},B.prototype.project=function($){return this.transform.locationPoint(e.LngLat.convert($))},B.prototype.unproject=function($){return this.transform.pointLocation(e.Point.convert($))},B.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},B.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},B.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},B.prototype._createDelegatedListener=function($,fe,ve){var Te,Ee=this;if("mouseenter"===$||"mouseover"===$){var Fe=!1;return{layer:fe,listener:ve,delegates:{mousemove:function(rt){var ft=Ee.getLayer(fe)?Ee.queryRenderedFeatures(rt.point,{layers:[fe]}):[];ft.length?Fe||(Fe=!0,ve.call(Ee,new li($,Ee,rt.originalEvent,{features:ft}))):Fe=!1},mouseout:function(){Fe=!1}}}}if("mouseleave"===$||"mouseout"===$){var Ze=!1;return{layer:fe,listener:ve,delegates:{mousemove:function(rt){(Ee.getLayer(fe)?Ee.queryRenderedFeatures(rt.point,{layers:[fe]}):[]).length?Ze=!0:Ze&&(Ze=!1,ve.call(Ee,new li($,Ee,rt.originalEvent)))},mouseout:function(rt){Ze&&(Ze=!1,ve.call(Ee,new li($,Ee,rt.originalEvent)))}}}}return{layer:fe,listener:ve,delegates:(Te={},Te[$]=function(rt){var ft=Ee.getLayer(fe)?Ee.queryRenderedFeatures(rt.point,{layers:[fe]}):[];ft.length&&(rt.features=ft,ve.call(Ee,rt),delete rt.features)},Te)}},B.prototype.on=function($,fe,ve){if(void 0===ve)return O.prototype.on.call(this,$,fe);var Te=this._createDelegatedListener($,fe,ve);for(var Ee in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[$]=this._delegatedListeners[$]||[],this._delegatedListeners[$].push(Te),Te.delegates)this.on(Ee,Te.delegates[Ee]);return this},B.prototype.once=function($,fe,ve){if(void 0===ve)return O.prototype.once.call(this,$,fe);var Te=this._createDelegatedListener($,fe,ve);for(var Ee in Te.delegates)this.once(Ee,Te.delegates[Ee]);return this},B.prototype.off=function($,fe,ve){var Te=this;return void 0===ve?O.prototype.off.call(this,$,fe):(this._delegatedListeners&&this._delegatedListeners[$]&&function(Ee){for(var Fe=Ee[$],Ze=0;Ze<Fe.length;Ze++){var rt=Fe[Ze];if(rt.layer===fe&&rt.listener===ve){for(var ft in rt.delegates)Te.off(ft,rt.delegates[ft]);return Fe.splice(Ze,1),Te}}}(this._delegatedListeners),this)},B.prototype.queryRenderedFeatures=function($,fe){if(!this.style)return[];var ve;if(void 0!==fe||void 0===$||$ instanceof e.Point||Array.isArray($)||(fe=$,$=void 0),fe=fe||{},($=$||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof $[0])ve=[e.Point.convert($)];else{var Te=e.Point.convert($[0]),Ee=e.Point.convert($[1]);ve=[Te,new e.Point(Ee.x,Te.y),Ee,new e.Point(Te.x,Ee.y),Te]}return this.style.queryRenderedFeatures(ve,fe,this.transform)},B.prototype.querySourceFeatures=function($,fe){return this.style.querySourceFeatures($,fe)},B.prototype.setStyle=function($,fe){return!1!==(fe=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},fe)).diff&&fe.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&$?(this._diffStyle($,fe),this):(this._localIdeographFontFamily=fe.localIdeographFontFamily,this._updateStyle($,fe))},B.prototype._getUIString=function($){var fe=this._locale[$];if(null==fe)throw new Error("Missing UI string '"+$+"'");return fe},B.prototype._updateStyle=function($,fe){return this.style&&(this.style.setEventedParent(null),this.style._remove()),$?(this.style=new Yr(this,fe||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof $?this.style.loadURL($):this.style.loadJSON($),this):(delete this.style,this)},B.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new Yr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},B.prototype._diffStyle=function($,fe){var ve=this;if("string"==typeof $){var Te=this._requestManager.normalizeStyleURL($),Ee=this._requestManager.transformRequest(Te,e.ResourceType.Style);e.getJSON(Ee,function(Fe,Ze){Fe?ve.fire(new e.ErrorEvent(Fe)):Ze&&ve._updateDiff(Ze,fe)})}else"object"==typeof $&&this._updateDiff($,fe)},B.prototype._updateDiff=function($,fe){try{this.style.setState($)&&this._update(!0)}catch(ve){e.warnOnce("Unable to perform style diff: "+(ve.message||ve.error||ve)+".  Rebuilding the style from scratch."),this._updateStyle($,fe)}},B.prototype.getStyle=function(){if(this.style)return this.style.serialize()},B.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},B.prototype.addSource=function($,fe){return this._lazyInitEmptyStyle(),this.style.addSource($,fe),this._update(!0)},B.prototype.isSourceLoaded=function($){var fe=this.style&&this.style.sourceCaches[$];if(void 0!==fe)return fe.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+$+"'")))},B.prototype.areTilesLoaded=function(){var $=this.style&&this.style.sourceCaches;for(var fe in $){var ve=$[fe]._tiles;for(var Te in ve){var Ee=ve[Te];if("loaded"!==Ee.state&&"errored"!==Ee.state)return!1}}return!0},B.prototype.addSourceType=function($,fe,ve){return this._lazyInitEmptyStyle(),this.style.addSourceType($,fe,ve)},B.prototype.removeSource=function($){return this.style.removeSource($),this._update(!0)},B.prototype.getSource=function($){return this.style.getSource($)},B.prototype.addImage=function($,fe,ve){void 0===ve&&(ve={});var Te=ve.pixelRatio;void 0===Te&&(Te=1);var Ee=ve.sdf;void 0===Ee&&(Ee=!1);var Fe=ve.stretchX,Ze=ve.stretchY,rt=ve.content;if(this._lazyInitEmptyStyle(),fe instanceof Yl||pl&&fe instanceof pl){var ft=e.browser.getImageData(fe);this.style.addImage($,{data:new e.RGBAImage({width:ft.width,height:ft.height},ft.data),pixelRatio:Te,stretchX:Fe,stretchY:Ze,content:rt,sdf:Ee,version:0})}else{if(void 0===fe.width||void 0===fe.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var qt=fe;this.style.addImage($,{data:new e.RGBAImage({width:fe.width,height:fe.height},new Uint8Array(fe.data)),pixelRatio:Te,stretchX:Fe,stretchY:Ze,content:rt,sdf:Ee,version:0,userImage:qt}),qt.onAdd&&qt.onAdd(this,$)}},B.prototype.updateImage=function($,fe){var ve=this.style.getImage($);if(!ve)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Te=fe instanceof Yl||pl&&fe instanceof pl?e.browser.getImageData(fe):fe,Ee=Te.width,Fe=Te.height,Ze=Te.data;return void 0===Ee||void 0===Fe?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):Ee!==ve.data.width||Fe!==ve.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(ve.data.replace(Ze,!(fe instanceof Yl||pl&&fe instanceof pl)),void this.style.updateImage($,ve))},B.prototype.hasImage=function($){return $?!!this.style.getImage($):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},B.prototype.removeImage=function($){this.style.removeImage($)},B.prototype.loadImage=function($,fe){e.getImage(this._requestManager.transformRequest($,e.ResourceType.Image),fe)},B.prototype.listImages=function(){return this.style.listImages()},B.prototype.addLayer=function($,fe){return this._lazyInitEmptyStyle(),this.style.addLayer($,fe),this._update(!0)},B.prototype.moveLayer=function($,fe){return this.style.moveLayer($,fe),this._update(!0)},B.prototype.removeLayer=function($){return this.style.removeLayer($),this._update(!0)},B.prototype.getLayer=function($){return this.style.getLayer($)},B.prototype.setLayerZoomRange=function($,fe,ve){return this.style.setLayerZoomRange($,fe,ve),this._update(!0)},B.prototype.setFilter=function($,fe,ve){return void 0===ve&&(ve={}),this.style.setFilter($,fe,ve),this._update(!0)},B.prototype.getFilter=function($){return this.style.getFilter($)},B.prototype.setPaintProperty=function($,fe,ve,Te){return void 0===Te&&(Te={}),this.style.setPaintProperty($,fe,ve,Te),this._update(!0)},B.prototype.getPaintProperty=function($,fe){return this.style.getPaintProperty($,fe)},B.prototype.setLayoutProperty=function($,fe,ve,Te){return void 0===Te&&(Te={}),this.style.setLayoutProperty($,fe,ve,Te),this._update(!0)},B.prototype.getLayoutProperty=function($,fe){return this.style.getLayoutProperty($,fe)},B.prototype.setLight=function($,fe){return void 0===fe&&(fe={}),this._lazyInitEmptyStyle(),this.style.setLight($,fe),this._update(!0)},B.prototype.getLight=function(){return this.style.getLight()},B.prototype.setFeatureState=function($,fe){return this.style.setFeatureState($,fe),this._update()},B.prototype.removeFeatureState=function($,fe){return this.style.removeFeatureState($,fe),this._update()},B.prototype.getFeatureState=function($){return this.style.getFeatureState($)},B.prototype.getContainer=function(){return this._container},B.prototype.getCanvasContainer=function(){return this._canvasContainer},B.prototype.getCanvas=function(){return this._canvas},B.prototype._containerDimensions=function(){var $=0,fe=0;return this._container&&($=this._container.clientWidth||400,fe=this._container.clientHeight||300),[$,fe]},B.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},B.prototype._setupContainer=function(){var $=this._container;$.classList.add("mapboxgl-map"),(this._missingCSSCanary=a.create("div","mapboxgl-canary",$)).style.visibility="hidden",this._detectMissingCSS();var fe=this._canvasContainer=a.create("div","mapboxgl-canvas-container",$);this._interactive&&fe.classList.add("mapboxgl-interactive"),this._canvas=a.create("canvas","mapboxgl-canvas",fe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var ve=this._containerDimensions();this._resizeCanvas(ve[0],ve[1]);var Te=this._controlContainer=a.create("div","mapboxgl-control-container",$),Ee=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Fe){Ee[Fe]=a.create("div","mapboxgl-ctrl-"+Fe,Te)})},B.prototype._resizeCanvas=function($,fe){var ve=e.browser.devicePixelRatio||1;this._canvas.width=ve*$,this._canvas.height=ve*fe,this._canvas.style.width=$+"px",this._canvas.style.height=fe+"px"},B.prototype._setupPainter=function(){var $=e.extend({},o.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),fe=this._canvas.getContext("webgl",$)||this._canvas.getContext("experimental-webgl",$);fe?(this.painter=new ba(fe,this.transform),e.webpSupported.testSupport(fe)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},B.prototype._contextLost=function($){$.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:$}))},B.prototype._contextRestored=function($){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:$}))},B.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},B.prototype._update=function($){return this.style?(this._styleDirty=this._styleDirty||$,this._sourcesDirty=!0,this.triggerRepaint(),this):this},B.prototype._requestRenderFrame=function($){return this._update(),this._renderTaskQueue.add($)},B.prototype._cancelRenderFrame=function($){this._renderTaskQueue.remove($)},B.prototype._render=function($){var fe,ve=this,Te=0,Ee=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(fe=Ee.createQueryEXT(),Ee.beginQueryEXT(Ee.TIME_ELAPSED_EXT,fe),Te=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run($),!this._removed){var Fe=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Ze=this.transform.zoom,rt=e.browser.now();this.style.zoomHistory.update(Ze,rt);var ft=new e.EvaluationParameters(Ze,{now:rt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),It=ft.crossFadingFactor();1===It&&It===this._crossFadingFactor||(Fe=!0,this._crossFadingFactor=It),this.style.update(ft)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Fe)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Rt=e.browser.now()-Te;Ee.endQueryEXT(Ee.TIME_ELAPSED_EXT,fe),setTimeout(function(){var Ot=Ee.getQueryObjectEXT(fe,Ee.QUERY_RESULT_EXT)/1e6;Ee.deleteQueryEXT(fe),ve.fire(new e.Event("gpu-timing-frame",{cpuTime:Rt,gpuTime:Ot}))},50)}if(this.listens("gpu-timing-layer")){var Lt=this.painter.collectGpuTimers();setTimeout(function(){var Ot=ve.painter.queryGpuTimers(Lt);ve.fire(new e.Event("gpu-timing-layer",{layerTimes:Ot}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},B.prototype.remove=function(){this._hash&&this._hash.remove();for(var $=0,fe=this._controls;$<fe.length;$+=1)fe[$].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var ve=this.painter.context.gl.getExtension("WEBGL_lose_context");ve&&ve.loseContext(),hu(this._canvasContainer),hu(this._controlContainer),hu(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},B.prototype.triggerRepaint=function(){var $=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(fe){$._frame=null,$._render(fe)}))},B.prototype._onWindowOnline=function(){this._update()},B.prototype._onWindowResize=function($){this._trackResize&&this.resize({originalEvent:$})._update()},H.showTileBoundaries.get=function(){return!!this._showTileBoundaries},H.showTileBoundaries.set=function($){this._showTileBoundaries!==$&&(this._showTileBoundaries=$,this._update())},H.showPadding.get=function(){return!!this._showPadding},H.showPadding.set=function($){this._showPadding!==$&&(this._showPadding=$,this._update())},H.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},H.showCollisionBoxes.set=function($){this._showCollisionBoxes!==$&&(this._showCollisionBoxes=$,$?this.style._generateCollisionBoxes():this._update())},H.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},H.showOverdrawInspector.set=function($){this._showOverdrawInspector!==$&&(this._showOverdrawInspector=$,this._update())},H.repaint.get=function(){return!!this._repaint},H.repaint.set=function($){this._repaint!==$&&(this._repaint=$,this.triggerRepaint())},H.vertices.get=function(){return!!this._vertices},H.vertices.set=function($){this._vertices=$,this._update()},B.prototype._setCacheLimits=function($,fe){e.setCacheLimits($,fe)},H.version.get=function(){return e.version},Object.defineProperties(B.prototype,H),B}(tu);function hu(O){O.parentNode&&O.parentNode.removeChild(O)}var du={showCompass:!0,showZoom:!0,visualizePitch:!1},Ga=function(O){var B=this;this.options=e.extend({},du,O),this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(H){return H.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(H){return B._map.zoomIn({},{originalEvent:H})}),a.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(H){return B._map.zoomOut({},{originalEvent:H})}),a.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(H){B.options.visualizePitch?B._map.resetNorthPitch({},{originalEvent:H}):B._map.resetNorth({},{originalEvent:H})}),this._compassIcon=a.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Ga.prototype._updateZoomButtons=function(){var O=this._map.getZoom();this._zoomInButton.disabled=O===this._map.getMaxZoom(),this._zoomOutButton.disabled=O===this._map.getMinZoom()},Ga.prototype._rotateCompassArrow=function(){var O=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=O},Ga.prototype.onAdd=function(O){return this._map=O,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new ga(this._map,this._compass,this.options.visualizePitch)),this._container},Ga.prototype.onRemove=function(){a.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Ga.prototype._createButton=function(O,B){var H=a.create("button",O,this._container);return H.type="button",H.addEventListener("click",B),H},Ga.prototype._setButtonTitle=function(O,B){var H=this._map._getUIString("NavigationControl."+B);O.title=H,O.setAttribute("aria-label",H)};var ga=function(O,B,H){void 0===H&&(H=!1),this._clickTolerance=10,this.element=B,this.mouseRotate=new pa({clickTolerance:O.dragRotate._mouseRotate._clickTolerance}),this.map=O,H&&(this.mousePitch=new Wi({clickTolerance:O.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),a.addEventListener(B,"mousedown",this.mousedown),a.addEventListener(B,"touchstart",this.touchstart,{passive:!1}),a.addEventListener(B,"touchmove",this.touchmove),a.addEventListener(B,"touchend",this.touchend),a.addEventListener(B,"touchcancel",this.reset)};function Rs(O,B,H){if(O=new e.LngLat(O.lng,O.lat),B){var $=new e.LngLat(O.lng-360,O.lat),fe=new e.LngLat(O.lng+360,O.lat),ve=H.locationPoint(O).distSqr(B);H.locationPoint($).distSqr(B)<ve?O=$:H.locationPoint(fe).distSqr(B)<ve&&(O=fe)}for(;Math.abs(O.lng-H.center.lng)>180;){var Te=H.locationPoint(O);if(Te.x>=0&&Te.y>=0&&Te.x<=H.width&&Te.y<=H.height)break;O.lng>H.center.lng?O.lng-=360:O.lng+=360}return O}ga.prototype.down=function(O,B){this.mouseRotate.mousedown(O,B),this.mousePitch&&this.mousePitch.mousedown(O,B),a.disableDrag()},ga.prototype.move=function(O,B){var H=this.map,$=this.mouseRotate.mousemoveWindow(O,B);if($&&$.bearingDelta&&H.setBearing(H.getBearing()+$.bearingDelta),this.mousePitch){var fe=this.mousePitch.mousemoveWindow(O,B);fe&&fe.pitchDelta&&H.setPitch(H.getPitch()+fe.pitchDelta)}},ga.prototype.off=function(){var O=this.element;a.removeEventListener(O,"mousedown",this.mousedown),a.removeEventListener(O,"touchstart",this.touchstart,{passive:!1}),a.removeEventListener(O,"touchmove",this.touchmove),a.removeEventListener(O,"touchend",this.touchend),a.removeEventListener(O,"touchcancel",this.reset),this.offTemp()},ga.prototype.offTemp=function(){a.enableDrag(),a.removeEventListener(e.window,"mousemove",this.mousemove),a.removeEventListener(e.window,"mouseup",this.mouseup)},ga.prototype.mousedown=function(O){this.down(e.extend({},O,{ctrlKey:!0,preventDefault:function(){return O.preventDefault()}}),a.mousePos(this.element,O)),a.addEventListener(e.window,"mousemove",this.mousemove),a.addEventListener(e.window,"mouseup",this.mouseup)},ga.prototype.mousemove=function(O){this.move(O,a.mousePos(this.element,O))},ga.prototype.mouseup=function(O){this.mouseRotate.mouseupWindow(O),this.mousePitch&&this.mousePitch.mouseupWindow(O),this.offTemp()},ga.prototype.touchstart=function(O){1!==O.targetTouches.length?this.reset():(this._startPos=this._lastPos=a.touchPos(this.element,O.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return O.preventDefault()}},this._startPos))},ga.prototype.touchmove=function(O){1!==O.targetTouches.length?this.reset():(this._lastPos=a.touchPos(this.element,O.targetTouches)[0],this.move({preventDefault:function(){return O.preventDefault()}},this._lastPos))},ga.prototype.touchend=function(O){0===O.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},ga.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var so={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Vo(O,B,H){var $=O.classList;for(var fe in so)$.remove("mapboxgl-"+H+"-anchor-"+fe);$.add("mapboxgl-"+H+"-anchor-"+B)}var Zl,pu=function(O){function B(H,$){var fe=this;if(O.call(this),(H instanceof e.window.HTMLElement||$)&&(H=e.extend({element:H},$)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=H&&H.anchor||"center",this._color=H&&H.color||"#3FB1CE",this._draggable=H&&H.draggable||!1,this._state="inactive",this._rotation=H&&H.rotation||0,this._rotationAlignment=H&&H.rotationAlignment||"auto",this._pitchAlignment=H&&H.pitchAlignment&&"auto"!==H.pitchAlignment?H.pitchAlignment:this._rotationAlignment,H&&H.element)this._element=H.element,this._offset=e.Point.convert(H&&H.offset||[0,0]);else{this._defaultMarker=!0,this._element=a.create("div"),this._element.setAttribute("aria-label","Map marker");var ve=a.createNS("http://www.w3.org/2000/svg","svg");ve.setAttributeNS(null,"display","block"),ve.setAttributeNS(null,"height","41px"),ve.setAttributeNS(null,"width","27px"),ve.setAttributeNS(null,"viewBox","0 0 27 41");var Te=a.createNS("http://www.w3.org/2000/svg","g");Te.setAttributeNS(null,"stroke","none"),Te.setAttributeNS(null,"stroke-width","1"),Te.setAttributeNS(null,"fill","none"),Te.setAttributeNS(null,"fill-rule","evenodd");var Ee=a.createNS("http://www.w3.org/2000/svg","g");Ee.setAttributeNS(null,"fill-rule","nonzero");var Fe=a.createNS("http://www.w3.org/2000/svg","g");Fe.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Fe.setAttributeNS(null,"fill","#000000");for(var Ze=0,rt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Ze<rt.length;Ze+=1){var ft=rt[Ze],It=a.createNS("http://www.w3.org/2000/svg","ellipse");It.setAttributeNS(null,"opacity","0.04"),It.setAttributeNS(null,"cx","10.5"),It.setAttributeNS(null,"cy","5.80029008"),It.setAttributeNS(null,"rx",ft.rx),It.setAttributeNS(null,"ry",ft.ry),Fe.appendChild(It)}var Rt=a.createNS("http://www.w3.org/2000/svg","g");Rt.setAttributeNS(null,"fill",this._color);var Lt=a.createNS("http://www.w3.org/2000/svg","path");Lt.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Rt.appendChild(Lt);var Ot=a.createNS("http://www.w3.org/2000/svg","g");Ot.setAttributeNS(null,"opacity","0.25"),Ot.setAttributeNS(null,"fill","#000000");var St=a.createNS("http://www.w3.org/2000/svg","path");St.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Ot.appendChild(St);var Gt=a.createNS("http://www.w3.org/2000/svg","g");Gt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Gt.setAttributeNS(null,"fill","#FFFFFF");var qt=a.createNS("http://www.w3.org/2000/svg","g");qt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Zt=a.createNS("http://www.w3.org/2000/svg","circle");Zt.setAttributeNS(null,"fill","#000000"),Zt.setAttributeNS(null,"opacity","0.25"),Zt.setAttributeNS(null,"cx","5.5"),Zt.setAttributeNS(null,"cy","5.5"),Zt.setAttributeNS(null,"r","5.4999962");var yn=a.createNS("http://www.w3.org/2000/svg","circle");yn.setAttributeNS(null,"fill","#FFFFFF"),yn.setAttributeNS(null,"cx","5.5"),yn.setAttributeNS(null,"cy","5.5"),yn.setAttributeNS(null,"r","5.4999962"),qt.appendChild(Zt),qt.appendChild(yn),Ee.appendChild(Fe),Ee.appendChild(Rt),Ee.appendChild(Ot),Ee.appendChild(Gt),Ee.appendChild(qt),ve.appendChild(Ee),this._element.appendChild(ve),this._offset=e.Point.convert(H&&H.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(Sn){Sn.preventDefault()}),this._element.addEventListener("mousedown",function(Sn){Sn.preventDefault()}),this._element.addEventListener("focus",function(){var Sn=fe._map.getContainer();Sn.scrollTop=0,Sn.scrollLeft=0}),Vo(this._element,this._anchor,"marker"),this._popup=null}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.addTo=function(H){return this.remove(),this._map=H,H.getCanvasContainer().appendChild(this._element),H.on("move",this._update),H.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},B.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),a.remove(this._element),this._popup&&this._popup.remove(),this},B.prototype.getLngLat=function(){return this._lngLat},B.prototype.setLngLat=function(H){return this._lngLat=e.LngLat.convert(H),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},B.prototype.getElement=function(){return this._element},B.prototype.setPopup=function(H){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),H){if(!("offset"in H.options)){var $=Math.sqrt(Math.pow(13.5,2)/2);H.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[$,-1*(24.6+$)],"bottom-right":[-$,-1*(24.6+$)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=H,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},B.prototype._onKeyPress=function(H){var $=H.code,fe=H.charCode||H.keyCode;"Space"!==$&&"Enter"!==$&&32!==fe&&13!==fe||this.togglePopup()},B.prototype._onMapClick=function(H){var $=H.originalEvent.target,fe=this._element;this._popup&&($===fe||fe.contains($))&&this.togglePopup()},B.prototype.getPopup=function(){return this._popup},B.prototype.togglePopup=function(){var H=this._popup;return H?(H.isOpen()?H.remove():H.addTo(this._map),this):this},B.prototype._update=function(H){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Rs(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var $="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?$="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&($="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var fe="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?fe="rotateX(0deg)":"map"===this._pitchAlignment&&(fe="rotateX("+this._map.getPitch()+"deg)"),H&&"moveend"!==H.type||(this._pos=this._pos.round()),a.setTransform(this._element,so[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+fe+" "+$)}},B.prototype.getOffset=function(){return this._offset},B.prototype.setOffset=function(H){return this._offset=e.Point.convert(H),this._update(),this},B.prototype._onMove=function(H){this._pos=H.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},B.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},B.prototype._addDragHandler=function(H){this._element.contains(H.originalEvent.target)&&(H.preventDefault(),this._positionDelta=H.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},B.prototype.setDraggable=function(H){return this._draggable=!!H,this._map&&(H?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},B.prototype.isDraggable=function(){return this._draggable},B.prototype.setRotation=function(H){return this._rotation=H||0,this._update(),this},B.prototype.getRotation=function(){return this._rotation},B.prototype.setRotationAlignment=function(H){return this._rotationAlignment=H||"auto",this._update(),this},B.prototype.getRotationAlignment=function(){return this._rotationAlignment},B.prototype.setPitchAlignment=function(H){return this._pitchAlignment=H&&"auto"!==H?H:this._rotationAlignment,this._update(),this},B.prototype.getPitchAlignment=function(){return this._pitchAlignment},B}(e.Evented),nu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},gu=0,Ll=!1,mu=function(O){function B(H){O.call(this),this.options=e.extend({},nu,H),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.onAdd=function(H){var $;return this._map=H,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),$=this._setupUI,void 0!==Zl?$(Zl):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(function(fe){$(Zl="denied"!==fe.state)}):$(Zl=!!e.window.navigator.geolocation),this._container},B.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),a.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,gu=0,Ll=!1},B.prototype._isOutOfMapMaxBounds=function(H){var $=this._map.getMaxBounds(),fe=H.coords;return $&&(fe.longitude<$.getWest()||fe.longitude>$.getEast()||fe.latitude<$.getSouth()||fe.latitude>$.getNorth())},B.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},B.prototype._onSuccess=function(H){if(this._map){if(this._isOutOfMapMaxBounds(H))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",H)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=H,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(H),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(H),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",H)),this._finish()}},B.prototype._updateCamera=function(H){var $=new e.LngLat(H.coords.longitude,H.coords.latitude),fe=H.coords.accuracy,ve=this._map.getBearing(),Te=e.extend({bearing:ve},this.options.fitBoundsOptions);this._map.fitBounds($.toBounds(fe),Te,{geolocateSource:!0})},B.prototype._updateMarker=function(H){if(H){var $=new e.LngLat(H.coords.longitude,H.coords.latitude);this._accuracyCircleMarker.setLngLat($).addTo(this._map),this._userLocationDotMarker.setLngLat($).addTo(this._map),this._accuracy=H.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},B.prototype._updateCircleRadius=function(){var H=this._map._container.clientHeight/2,$=this._map.unproject([0,H]),fe=this._map.unproject([1,H]),ve=$.distanceTo(fe),Te=Math.ceil(2*this._accuracy/ve);this._circleElement.style.width=Te+"px",this._circleElement.style.height=Te+"px"},B.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},B.prototype._onError=function(H){if(this._map){if(this.options.trackUserLocation)if(1===H.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var $=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=$,this._geolocateButton.setAttribute("aria-label",$),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===H.code&&Ll)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",H)),this._finish()}},B.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},B.prototype._setupUI=function(H){var $=this;if(this._container.addEventListener("contextmenu",function(Te){return Te.preventDefault()}),this._geolocateButton=a.create("button","mapboxgl-ctrl-geolocate",this._container),a.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===H){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var fe=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=fe,this._geolocateButton.setAttribute("aria-label",fe)}else{var ve=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=ve,this._geolocateButton.setAttribute("aria-label",ve)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new pu(this._dotElement),this._circleElement=a.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new pu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Te){Te.geolocateSource||"ACTIVE_LOCK"!==$._watchState||Te.originalEvent&&"resize"===Te.originalEvent.type||($._watchState="BACKGROUND",$._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),$._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),$.fire(new e.Event("trackuserlocationend")))})},B.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":gu--,Ll=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var H;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++gu>1?(H={maximumAge:6e5,timeout:0},Ll=!0):(H=this.options.positionOptions,Ll=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,H)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},B.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},B}(e.Evented),Pu={maxWidth:100,unit:"metric"},ml=function(O){this.options=e.extend({},Pu,O),e.bindAll(["_onMove","setUnit"],this)};function Lu(O,B,H){var $=H&&H.maxWidth||100,fe=O._container.clientHeight/2,ve=O.unproject([0,fe]),Te=O.unproject([$,fe]),Ee=ve.distanceTo(Te);if(H&&"imperial"===H.unit){var Fe=3.2808*Ee;Fe>5280?ru(B,$,Fe/5280,O._getUIString("ScaleControl.Miles")):ru(B,$,Fe,O._getUIString("ScaleControl.Feet"))}else H&&"nautical"===H.unit?ru(B,$,Ee/1852,O._getUIString("ScaleControl.NauticalMiles")):Ee>=1e3?ru(B,$,Ee/1e3,O._getUIString("ScaleControl.Kilometers")):ru(B,$,Ee,O._getUIString("ScaleControl.Meters"))}function ru(O,B,H,$){var fe,ve,Te,Ze,rt,Ee=(fe=H,(ve=Math.pow(10,(""+Math.floor(fe)).length-1))*(Te=(Te=fe/ve)>=10?10:Te>=5?5:Te>=3?3:Te>=2?2:Te>=1?1:(Ze=Te,rt=Math.pow(10,Math.ceil(-Math.log(Ze)/Math.LN10)),Math.round(Ze*rt)/rt)));O.style.width=B*(Ee/H)+"px",O.innerHTML=Ee+"&nbsp;"+$}ml.prototype.getDefaultPosition=function(){return"bottom-left"},ml.prototype._onMove=function(){Lu(this._map,this._container,this.options)},ml.prototype.onAdd=function(O){return this._map=O,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",O.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},ml.prototype.onRemove=function(){a.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},ml.prototype.setUnit=function(O){this.options.unit=O,Lu(this._map,this._container,this.options)};var ks=function(O){this._fullscreen=!1,O&&O.container&&(O.container instanceof e.window.HTMLElement?this._container=O.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};ks.prototype.onAdd=function(O){return this._map=O,this._container||(this._container=this._map.getContainer()),this._controlContainer=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},ks.prototype.onRemove=function(){a.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},ks.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},ks.prototype._setupUI=function(){var O=this._fullscreenButton=a.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);a.create("span","mapboxgl-ctrl-icon",O).setAttribute("aria-hidden",!0),O.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},ks.prototype._updateTitle=function(){var O=this._getTitle();this._fullscreenButton.setAttribute("aria-label",O),this._fullscreenButton.title=O},ks.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},ks.prototype._isFullscreen=function(){return this._fullscreen},ks.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},ks.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Ol={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},vu=function(O){function B(H){O.call(this),this.options=e.extend(Object.create(Ol),H),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return O&&(B.__proto__=O),(B.prototype=Object.create(O&&O.prototype)).constructor=B,B.prototype.addTo=function(H){return this._map&&this.remove(),this._map=H,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},B.prototype.isOpen=function(){return!!this._map},B.prototype.remove=function(){return this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},B.prototype.getLngLat=function(){return this._lngLat},B.prototype.setLngLat=function(H){return this._lngLat=e.LngLat.convert(H),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},B.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},B.prototype.getElement=function(){return this._container},B.prototype.setText=function(H){return this.setDOMContent(e.window.document.createTextNode(H))},B.prototype.setHTML=function(H){var $,fe=e.window.document.createDocumentFragment(),ve=e.window.document.createElement("body");for(ve.innerHTML=H;$=ve.firstChild;)fe.appendChild($);return this.setDOMContent(fe)},B.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},B.prototype.setMaxWidth=function(H){return this.options.maxWidth=H,this._update(),this},B.prototype.setDOMContent=function(H){return this._createContent(),this._content.appendChild(H),this._update(),this},B.prototype.addClassName=function(H){this._container&&this._container.classList.add(H)},B.prototype.removeClassName=function(H){this._container&&this._container.classList.remove(H)},B.prototype.toggleClassName=function(H){if(this._container)return this._container.classList.toggle(H)},B.prototype._createContent=function(){this._content&&a.remove(this._content),this._content=a.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=a.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},B.prototype._onMouseUp=function(H){this._update(H.point)},B.prototype._onMouseMove=function(H){this._update(H.point)},B.prototype._onDrag=function(H){this._update(H.point)},B.prototype._update=function(H){var $=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=a.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=a.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(It){return $._container.classList.add(It)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Rs(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||H)){var ve=this._pos=this._trackPointer&&H?H:this._map.project(this._lngLat),Te=this.options.anchor,Ee=function It(Rt){if(Rt){if("number"==typeof Rt){var Lt=Math.round(Math.sqrt(.5*Math.pow(Rt,2)));return{center:new e.Point(0,0),top:new e.Point(0,Rt),"top-left":new e.Point(Lt,Lt),"top-right":new e.Point(-Lt,Lt),bottom:new e.Point(0,-Rt),"bottom-left":new e.Point(Lt,-Lt),"bottom-right":new e.Point(-Lt,-Lt),left:new e.Point(Rt,0),right:new e.Point(-Rt,0)}}if(Rt instanceof e.Point||Array.isArray(Rt)){var Ot=e.Point.convert(Rt);return{center:Ot,top:Ot,"top-left":Ot,"top-right":Ot,bottom:Ot,"bottom-left":Ot,"bottom-right":Ot,left:Ot,right:Ot}}return{center:e.Point.convert(Rt.center||[0,0]),top:e.Point.convert(Rt.top||[0,0]),"top-left":e.Point.convert(Rt["top-left"]||[0,0]),"top-right":e.Point.convert(Rt["top-right"]||[0,0]),bottom:e.Point.convert(Rt.bottom||[0,0]),"bottom-left":e.Point.convert(Rt["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(Rt["bottom-right"]||[0,0]),left:e.Point.convert(Rt.left||[0,0]),right:e.Point.convert(Rt.right||[0,0])}}return It(new e.Point(0,0))}(this.options.offset);if(!Te){var Fe,Ze=this._container.offsetWidth,rt=this._container.offsetHeight;Fe=ve.y+Ee.bottom.y<rt?["top"]:ve.y>this._map.transform.height-rt?["bottom"]:[],ve.x<Ze/2?Fe.push("left"):ve.x>this._map.transform.width-Ze/2&&Fe.push("right"),Te=0===Fe.length?"bottom":Fe.join("-")}var ft=ve.add(Ee[Te]).round();a.setTransform(this._container,so[Te]+" translate("+ft.x+"px,"+ft.y+"px)"),Vo(this._container,Te,"popup")}},B.prototype._onClose=function(){this.remove()},B}(e.Evented),ge={version:e.version,supported:o,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:Zs,NavigationControl:Ga,GeolocateControl:mu,AttributionControl:jo,ScaleControl:ml,FullscreenControl:ks,Popup:vu,Marker:pu,Style:Yr,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){pt().acquire(mt)},clearPrewarmedResources:function(){var O=Vt;O&&(O.isPreloaded()&&1===O.numActive()?(O.release(mt),Vt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(O){e.config.ACCESS_TOKEN=O},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(O){e.config.API_URL=O},get workerCount(){return xt.workerCount},set workerCount(O){xt.workerCount=O},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(O){e.config.MAX_PARALLEL_IMAGE_REQUESTS=O},clearStorage:function(O){e.clearTileCache(O)},workerUrl:""};return ge}),M},"object"==typeof se&&void 0!==oe?oe.exports=x():(y=y||self).mapboxgl=x()},{}],240:[function(b,oe,se){"use strict";oe.exports=Math.log2||function(y){return Math.log(y)*Math.LOG2E}},{}],241:[function(b,oe,se){"use strict";oe.exports=function(x,M){M||(M=x,x=window);var _=0,e=0,o=0,a={shift:!1,alt:!1,control:!1,meta:!1},l=!1;function i(w){var c=!1;return"altKey"in w&&(c=c||w.altKey!==a.alt,a.alt=!!w.altKey),"shiftKey"in w&&(c=c||w.shiftKey!==a.shift,a.shift=!!w.shiftKey),"ctrlKey"in w&&(c=c||w.ctrlKey!==a.control,a.control=!!w.ctrlKey),"metaKey"in w&&(c=c||w.metaKey!==a.meta,a.meta=!!w.metaKey),c}function v(w,c){var A=y.x(c),k=y.y(c);"buttons"in c&&(w=0|c.buttons),(w!==_||A!==e||k!==o||i(c))&&(_=0|w,e=A||0,o=k||0,M&&M(_,e,o,a))}function h(w){v(0,w)}function s(){(_||e||o||a.shift||a.alt||a.meta||a.control)&&(e=o=0,_=0,a.shift=a.alt=a.control=a.meta=!1,M&&M(0,0,0,a))}function d(w){i(w)&&M&&M(_,e,o,a)}function p(w){0===y.buttons(w)?v(0,w):v(_,w)}function f(w){v(_|y.buttons(w),w)}function g(w){v(_&~y.buttons(w),w)}function m(){l||(l=!0,x.addEventListener("mousemove",p),x.addEventListener("mousedown",f),x.addEventListener("mouseup",g),x.addEventListener("mouseleave",h),x.addEventListener("mouseenter",h),x.addEventListener("mouseout",h),x.addEventListener("mouseover",h),x.addEventListener("blur",s),x.addEventListener("keyup",d),x.addEventListener("keydown",d),x.addEventListener("keypress",d),x!==window&&(window.addEventListener("blur",s),window.addEventListener("keyup",d),window.addEventListener("keydown",d),window.addEventListener("keypress",d)))}m();var u={element:x};return Object.defineProperties(u,{enabled:{get:function(){return l},set:function(w){w?m():!l||(l=!1,x.removeEventListener("mousemove",p),x.removeEventListener("mousedown",f),x.removeEventListener("mouseup",g),x.removeEventListener("mouseleave",h),x.removeEventListener("mouseenter",h),x.removeEventListener("mouseout",h),x.removeEventListener("mouseover",h),x.removeEventListener("blur",s),x.removeEventListener("keyup",d),x.removeEventListener("keydown",d),x.removeEventListener("keypress",d),x!==window&&(window.removeEventListener("blur",s),window.removeEventListener("keyup",d),window.removeEventListener("keydown",d),window.removeEventListener("keypress",d)))},enumerable:!0},buttons:{get:function(){return _},enumerable:!0},x:{get:function(){return e},enumerable:!0},y:{get:function(){return o},enumerable:!0},mods:{get:function(){return a},enumerable:!0}}),u};var y=b("mouse-event")},{"mouse-event":243}],242:[function(b,oe,se){var y={left:0,top:0};oe.exports=function(x,M,_){M=M||x.currentTarget||x.srcElement,Array.isArray(_)||(_=[0,0]);var l,e=x.clientX||0,o=x.clientY||0,a=(l=M)===window||l===document||l===document.body?y:l.getBoundingClientRect();return _[0]=e-a.left,_[1]=o-a.top,_}},{}],243:[function(b,oe,se){"use strict";function y(x){return x.target||x.srcElement||window}se.buttons=function(x){if("object"==typeof x){if("buttons"in x)return x.buttons;if("which"in x){if(2===(M=x.which))return 4;if(3===M)return 2;if(M>0)return 1<<M-1}else if("button"in x){var M;if(1===(M=x.button))return 4;if(2===M)return 2;if(M>=0)return 1<<M}}return 0},se.element=y,se.x=function(x){if("object"==typeof x){if("offsetX"in x)return x.offsetX;var M=y(x).getBoundingClientRect();return x.clientX-M.left}return 0},se.y=function(x){if("object"==typeof x){if("offsetY"in x)return x.offsetY;var M=y(x).getBoundingClientRect();return x.clientY-M.top}return 0}},{}],244:[function(b,oe,se){"use strict";var y=b("to-px");oe.exports=function(x,M,_){"function"==typeof x&&(_=!!M,M=x,x=window);var e=y("ex",x),o=function(a){_&&a.preventDefault();var l=a.deltaX||0,i=a.deltaY||0,v=a.deltaZ||0,h=1;switch(a.deltaMode){case 1:h=e;break;case 2:h=window.innerHeight}if(i*=h,v*=h,(l*=h)||i||v)return M(l,i,v,a)};return x.addEventListener("wheel",o),o}},{"to-px":314}],245:[function(b,oe,se){(function(y,x){(function(){var M,_,e;e=function(){"use strict";var M,_,e,o=Object.prototype.toString,a=void 0!==x?function(w){return x(w)}:setTimeout;try{Object.defineProperty({},"x",{}),M=function(w,c,A,k){return Object.defineProperty(w,c,{value:A,writable:!0,configurable:!1!==k})}}catch(w){M=function(c,A,k){return c[A]=k,c}}function l(w,c){e.add(w,c),_||(_=a(e.drain))}function i(w){var c,A=typeof w;return null==w||"object"!=A&&"function"!=A||(c=w.then),"function"==typeof c&&c}function v(){for(var w=0;w<this.chain.length;w++)h(this,1===this.state?this.chain[w].success:this.chain[w].failure,this.chain[w]);this.chain.length=0}function h(w,c,A){var k,C;try{!1===c?A.reject(w.msg):(k=!0===c?w.msg:c.call(void 0,w.msg))===A.promise?A.reject(TypeError("Promise-chain cycle")):(C=i(k))?C.call(k,A.resolve,A.reject):A.resolve(k)}catch(E){A.reject(E)}}function s(w){var c,A=this;if(!A.triggered){A.triggered=!0,A.def&&(A=A.def);try{(c=i(w))?l(function(){var k=new f(A);try{c.call(w,function(){s.apply(k,arguments)},function(){d.apply(k,arguments)})}catch(C){d.call(k,C)}}):(A.msg=w,A.state=1,A.chain.length>0&&l(v,A))}catch(k){d.call(new f(A),k)}}}function d(w){var c=this;c.triggered||(c.triggered=!0,c.def&&(c=c.def),c.msg=w,c.state=2,c.chain.length>0&&l(v,c))}function p(w,c,A,k){for(var C=0;C<c.length;C++)!function(E){w.resolve(c[E]).then(function(L){A(E,L)},k)}(C)}function f(w){this.def=w,this.triggered=!1}function g(w){this.promise=w,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function m(w){if("function"!=typeof w)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var c=new g(this);this.then=function(A,k){var C={success:"function"!=typeof A||A,failure:"function"==typeof k&&k};return C.promise=new this.constructor(function(E,L){if("function"!=typeof E||"function"!=typeof L)throw TypeError("Not a function");C.resolve=E,C.reject=L}),c.chain.push(C),0!==c.state&&l(v,c),C.promise},this.catch=function(A){return this.then(void 0,A)};try{w.call(void 0,function(A){s.call(c,A)},function(A){d.call(c,A)})}catch(A){d.call(c,A)}}e=function(){var w,c,A;function k(C,E){this.fn=C,this.self=E,this.next=void 0}return{add:function(C,E){A=new k(C,E),c?c.next=A:w=A,c=A,A=void 0},drain:function(){var C=w;for(w=c=_=void 0;C;)C.fn.call(C.self),C=C.next}}}();var u=M({},"constructor",m,!1);return m.prototype=u,M(u,"__NPO__",0,!1),M(m,"resolve",function(w){return w&&"object"==typeof w&&1===w.__NPO__?w:new this(function(c,A){if("function"!=typeof c||"function"!=typeof A)throw TypeError("Not a function");c(w)})}),M(m,"reject",function(w){return new this(function(c,A){if("function"!=typeof c||"function"!=typeof A)throw TypeError("Not a function");A(w)})}),M(m,"all",function(w){var c=this;return"[object Array]"!=o.call(w)?c.reject(TypeError("Not an array")):0===w.length?c.resolve([]):new c(function(A,k){if("function"!=typeof A||"function"!=typeof k)throw TypeError("Not a function");var C=w.length,E=Array(C),L=0;p(c,w,function(D,N){E[D]=N,++L===C&&A(E)},k)})}),M(m,"race",function(w){var c=this;return"[object Array]"!=o.call(w)?c.reject(TypeError("Not an array")):new c(function(A,k){if("function"!=typeof A||"function"!=typeof k)throw TypeError("Not a function");p(c,w,function(C,E){A(E)},k)})}),m},(_=void 0!==y?y:this)[M="Promise"]=_[M]||e(),void 0!==oe&&oe.exports&&(oe.exports=_[M])}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},b("timers").setImmediate)},{timers:311}],246:[function(b,oe,se){var y=Math.PI,x=a(120);function M(l,i,v,h){return["C",l,i,v,h,v,h]}function _(l,i,v,h,s,d){return["C",l/3+2/3*v,i/3+2/3*h,s/3+2/3*v,d/3+2/3*h,s,d]}function e(l,i,v,h,s,d,p,f,g,m){if(m)N=m[0],F=m[1],L=m[2],D=m[3];else{var u=o(l,i,-s);i=u.y;var w=((l=u.x)-(f=(u=o(f,g,-s)).x))/2,c=(i-(g=u.y))/2,A=w*w/(v*v)+c*c/(h*h);A>1&&(v*=A=Math.sqrt(A),h*=A);var k=v*v,C=h*h,E=(d==p?-1:1)*Math.sqrt(Math.abs((k*C-k*c*c-C*w*w)/(k*c*c+C*w*w)));E==1/0&&(E=1);var L=E*v*c/h+(l+f)/2,D=E*-h*w/v+(i+g)/2,N=Math.asin(((i-D)/h).toFixed(9)),F=Math.asin(((g-D)/h).toFixed(9));(N=l<L?y-N:N)<0&&(N=2*y+N),(F=f<L?y-F:F)<0&&(F=2*y+F),p&&N>F&&(N-=2*y),!p&&F>N&&(F-=2*y)}if(Math.abs(F-N)>x){var I=F,P=f,j=g;F=N+x*(p&&F>N?1:-1);var V=e(f=L+v*Math.cos(F),g=D+h*Math.sin(F),v,h,s,0,p,P,j,[F,I,L,D])}var Z=Math.tan((F-N)/4),Y=4/3*v*Z,ee=4/3*h*Z,re=[2*l-(l+Y*Math.sin(N)),2*i-(i-ee*Math.cos(N)),f+Y*Math.sin(F),g-ee*Math.cos(F),f,g];if(m)return re;V&&(re=re.concat(V));for(var X=0;X<re.length;){var K=o(re[X],re[X+1],s);re[X++]=K.x,re[X++]=K.y}return re}function o(l,i,v){return{x:l*Math.cos(v)-i*Math.sin(v),y:l*Math.sin(v)+i*Math.cos(v)}}function a(l){return l*(y/180)}oe.exports=function(l){for(var i,v=[],h=0,s=0,d=0,p=0,f=null,g=null,m=0,u=0,w=0,c=l.length;w<c;w++){var A=l[w],k=A[0];switch(k){case"M":d=A[1],p=A[2];break;case"A":(A=e(m,u,A[1],A[2],a(A[3]),A[4],A[5],A[6],A[7])).unshift("C"),A.length>7&&(v.push(A.splice(0,7)),A.unshift("C"));break;case"S":var C=m,E=u;"C"!=i&&"S"!=i||(C+=C-h,E+=E-s),A=["C",C,E,A[1],A[2],A[3],A[4]];break;case"T":"Q"==i||"T"==i?(f=2*m-f,g=2*u-g):(f=m,g=u),A=_(m,u,f,g,A[1],A[2]);break;case"Q":f=A[1],g=A[2],A=_(m,u,A[1],A[2],A[3],A[4]);break;case"L":A=M(m,u,A[1],A[2]);break;case"H":A=M(m,u,A[1],u);break;case"V":A=M(m,u,m,A[1]);break;case"Z":A=M(m,u,d,p)}i=k,m=A[A.length-2],u=A[A.length-1],A.length>4?(h=A[A.length-4],s=A[A.length-3]):(h=m,s=u),v.push(A)}return v}},{}],247:[function(b,oe,se){"use strict";var y=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;function _(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}oe.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var o={},a=0;a<10;a++)o["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(o).map(function(i){return o[i]}).join(""))return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(i){l[i]=i}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},l)).join("")}catch(i){return!1}}()?Object.assign:function(e,o){for(var a,l,i=_(e),v=1;v<arguments.length;v++){for(var h in a=Object(arguments[v]))x.call(a,h)&&(i[h]=a[h]);if(y){l=y(a);for(var s=0;s<l.length;s++)M.call(a,l[s])&&(i[l[s]]=a[l[s]])}}return i}},{}],248:[function(b,oe,se){"use strict";function y(_,e){if("string"!=typeof _)return[_];var o=[_];"string"==typeof e||Array.isArray(e)?e={brackets:e}:e||(e={});var a=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],l=e.escape||"___",i=!!e.flat;a.forEach(function(h){var s=new RegExp(["\\",h[0],"[^\\",h[0],"\\",h[1],"]*\\",h[1]].join("")),d=[];function p(f,g,m){var u=o.push(f.slice(h[0].length,-h[1].length))-1;return d.push(u),l+u+l}o.forEach(function(f,g){for(var m,u=0;f!=m;)if(m=f,f=f.replace(s,p),u++>1e4)throw Error("References have circular dependency. Please, check them.");o[g]=f}),d=d.reverse(),o=o.map(function(f){return d.forEach(function(g){f=f.replace(new RegExp("(\\"+l+g+"\\"+l+")","g"),h[0]+"$1"+h[1])}),f})});var v=new RegExp("\\"+l+"([0-9]+)\\"+l);return i?o:function h(s,d,p){for(var f,g=[],m=0;f=v.exec(s);){if(m++>1e4)throw Error("Circular references in parenthesis");g.push(s.slice(0,f.index)),g.push(h(d[f[1]],d)),s=s.slice(f.index+f[0].length)}return g.push(s),g}(o[0],o)}function x(_,e){if(e&&e.flat){var o,a=e&&e.escape||"___",l=_[0];if(!l)return"";for(var i=new RegExp("\\"+a+"([0-9]+)\\"+a),v=0;l!=o;){if(v++>1e4)throw Error("Circular references in "+_);o=l,l=l.replace(i,h)}return l}return _.reduce(function s(d,p){return Array.isArray(p)&&(p=p.reduce(s,"")),d+p},"");function h(s,d){if(null==_[d])throw Error("Reference "+d+"is undefined");return _[d]}}function M(_,e){return Array.isArray(_)?x(_,e):y(_,e)}M.parse=y,M.stringify=x,oe.exports=M},{}],249:[function(b,oe,se){"use strict";var y=b("pick-by-alias");oe.exports=function(x){var M;return arguments.length>1&&(x=arguments),"string"==typeof x?x=x.split(/\s/).map(parseFloat):"number"==typeof x&&(x=[x]),x.length&&"number"==typeof x[0]?M=1===x.length?{width:x[0],height:x[0],x:0,y:0}:2===x.length?{width:x[0],height:x[1],x:0,y:0}:{x:x[0],y:x[1],width:x[2]-x[0]||0,height:x[3]-x[1]||0}:x&&((M={x:(x=y(x,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:x.top||0}).width=null==x.width?x.right?x.right-M.x:0:x.width,M.height=null==x.height?x.bottom?x.bottom-M.y:0:x.height),M}},{"pick-by-alias":253}],250:[function(b,oe,se){oe.exports=function(_){var e=[];return _.replace(x,function(o,a,l){var h,i=a.toLowerCase();for(h=void 0,l=(h=l.match(M))?h.map(Number):[],"m"==i&&l.length>2&&(e.push([a].concat(l.splice(0,2))),i="l",a="m"==a?"l":"L");;){if(l.length==y[i])return l.unshift(a),e.push(l);if(l.length<y[i])throw new Error("malformed path data");e.push([a].concat(l.splice(0,y[i])))}}),e};var y={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},x=/([astvzqmhlc])([^astvzqmhlc]*)/gi,M=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],251:[function(b,oe,se){oe.exports=function(y,x){x||(x=[0,""]),y=String(y);var M=parseFloat(y,10);return x[0]=M,x[1]=y.match(/[\d.\-\+]*\s*(.*)/)[1]||"",x}},{}],252:[function(b,oe,se){(function(y){(function(){(function(){var x,M,_,e,o,a;"undefined"!=typeof performance&&null!==performance&&performance.now?oe.exports=function(){return performance.now()}:null!=y&&y.hrtime?(oe.exports=function(){return(x()-o)/1e6},M=y.hrtime,e=(x=function(){var l;return 1e9*(l=M())[0]+l[1]})(),a=1e9*y.uptime(),o=e-a):Date.now?(oe.exports=function(){return Date.now()-_},_=Date.now()):(oe.exports=function(){return(new Date).getTime()-_},_=(new Date).getTime())}).call(this)}).call(this)}).call(this,b("_process"))},{_process:277}],253:[function(b,oe,se){"use strict";oe.exports=function(M,_,e){var o,a,l={};if("string"==typeof _&&(_=x(_)),Array.isArray(_)){var i={};for(a=0;a<_.length;a++)i[_[a]]=!0;_=i}for(o in _)_[o]=x(_[o]);var v={};for(o in _){var h=_[o];if(Array.isArray(h))for(a=0;a<h.length;a++){var s=h[a];if(e&&(v[s]=!0),s in M){if(l[o]=M[s],e)for(var d=a;d<h.length;d++)v[h[d]]=!0;break}}else o in M&&(_[o]&&(l[o]=M[o]),e&&(v[o]=!0))}if(e)for(o in M)v[o]||(l[o]=M[o]);return l};var y={};function x(M){return y[M]?y[M]:("string"==typeof M&&(M=y[M]=M.split(/\s*,\s*|\s+/)),M)}},{}],254:[function(b,oe,se){var y,x=b("./lib/build-log"),M=b("./lib/epsilon"),_=b("./lib/intersecter"),e=b("./lib/segment-chainer"),o=b("./lib/segment-selector"),a=b("./lib/geojson"),l=!1,i=M();function v(h,s,d){var p=y.segments(h),f=y.segments(s),g=d(y.combine(p,f));return y.polygon(g)}y={buildLog:function(h){return!0===h?l=x():!1===h&&(l=!1),!1!==l&&l.list},epsilon:function(h){return i.epsilon(h)},segments:function(h){var s=_(!0,i,l);return h.regions.forEach(s.addRegion),{segments:s.calculate(h.inverted),inverted:h.inverted}},combine:function(h,s){return{combined:_(!1,i,l).calculate(h.segments,h.inverted,s.segments,s.inverted),inverted1:h.inverted,inverted2:s.inverted}},selectUnion:function(h){return{segments:o.union(h.combined,l),inverted:h.inverted1||h.inverted2}},selectIntersect:function(h){return{segments:o.intersect(h.combined,l),inverted:h.inverted1&&h.inverted2}},selectDifference:function(h){return{segments:o.difference(h.combined,l),inverted:h.inverted1&&!h.inverted2}},selectDifferenceRev:function(h){return{segments:o.differenceRev(h.combined,l),inverted:!h.inverted1&&h.inverted2}},selectXor:function(h){return{segments:o.xor(h.combined,l),inverted:h.inverted1!==h.inverted2}},polygon:function(h){return{regions:e(h.segments,i,l),inverted:h.inverted}},polygonFromGeoJSON:function(h){return a.toPolygon(y,h)},polygonToGeoJSON:function(h){return a.fromPolygon(y,i,h)},union:function(h,s){return v(h,s,y.selectUnion)},intersect:function(h,s){return v(h,s,y.selectIntersect)},difference:function(h,s){return v(h,s,y.selectDifference)},differenceRev:function(h,s){return v(h,s,y.selectDifferenceRev)},xor:function(h,s){return v(h,s,y.selectXor)}},"object"==typeof window&&(window.PolyBool=y),oe.exports=y},{"./lib/build-log":255,"./lib/epsilon":256,"./lib/geojson":257,"./lib/intersecter":258,"./lib/segment-chainer":260,"./lib/segment-selector":261}],255:[function(b,oe,se){oe.exports=function(){var y,x=0,M=!1;function _(e,o){return y.list.push({type:e,data:o?JSON.parse(JSON.stringify(o)):void 0}),y}return y={list:[],segmentId:function(){return x++},checkIntersection:function(e,o){return _("check",{seg1:e,seg2:o})},segmentChop:function(e,o){return _("div_seg",{seg:e,pt:o}),_("chop",{seg:e,pt:o})},statusRemove:function(e){return _("pop_seg",{seg:e})},segmentUpdate:function(e){return _("seg_update",{seg:e})},segmentNew:function(e,o){return _("new_seg",{seg:e,primary:o})},segmentRemove:function(e){return _("rem_seg",{seg:e})},tempStatus:function(e,o,a){return _("temp_status",{seg:e,above:o,below:a})},rewind:function(e){return _("rewind",{seg:e})},status:function(e,o,a){return _("status",{seg:e,above:o,below:a})},vert:function(e){return e===M?y:(M=e,_("vert",{x:e}))},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),_("log",{txt:e})},reset:function(){return _("reset")},selected:function(e){return _("selected",{segs:e})},chainStart:function(e){return _("chain_start",{seg:e})},chainRemoveHead:function(e,o){return _("chain_rem_head",{index:e,pt:o})},chainRemoveTail:function(e,o){return _("chain_rem_tail",{index:e,pt:o})},chainNew:function(e,o){return _("chain_new",{pt1:e,pt2:o})},chainMatch:function(e){return _("chain_match",{index:e})},chainClose:function(e){return _("chain_close",{index:e})},chainAddHead:function(e,o){return _("chain_add_head",{index:e,pt:o})},chainAddTail:function(e,o){return _("chain_add_tail",{index:e,pt:o})},chainConnect:function(e,o){return _("chain_con",{index1:e,index2:o})},chainReverse:function(e){return _("chain_rev",{index:e})},chainJoin:function(e,o){return _("chain_join",{index1:e,index2:o})},done:function(){return _("done")}}}},{}],256:[function(b,oe,se){oe.exports=function(y){"number"!=typeof y&&(y=1e-10);var x={epsilon:function(M){return"number"==typeof M&&(y=M),y},pointAboveOrOnLine:function(M,_,e){var o=_[0],a=_[1];return(e[0]-o)*(M[1]-a)-(e[1]-a)*(M[0]-o)>=-y},pointBetween:function(M,_,e){var a=e[0]-_[0],i=e[1]-_[1],v=(M[0]-_[0])*a+(M[1]-_[1])*i;return!(v<y||v-(a*a+i*i)>-y)},pointsSameX:function(M,_){return Math.abs(M[0]-_[0])<y},pointsSameY:function(M,_){return Math.abs(M[1]-_[1])<y},pointsSame:function(M,_){return x.pointsSameX(M,_)&&x.pointsSameY(M,_)},pointsCompare:function(M,_){return x.pointsSameX(M,_)?x.pointsSameY(M,_)?0:M[1]<_[1]?-1:1:M[0]<_[0]?-1:1},pointsCollinear:function(M,_,e){return Math.abs((M[0]-_[0])*(_[1]-e[1])-(_[0]-e[0])*(M[1]-_[1]))<y},linesIntersect:function(M,_,e,o){var a=_[0]-M[0],l=_[1]-M[1],i=o[0]-e[0],v=o[1]-e[1],h=a*v-l*i;if(Math.abs(h)<y)return!1;var s=M[0]-e[0],d=M[1]-e[1],p=(i*d-v*s)/h,f=(a*d-l*s)/h,g={alongA:0,alongB:0,pt:[M[0]+p*a,M[1]+p*l]};return g.alongA=p<=-y?-2:p<y?-1:p-1<=-y?0:p-1<y?1:2,g.alongB=f<=-y?-2:f<y?-1:f-1<=-y?0:f-1<y?1:2,g},pointInsideRegion:function(M,_){for(var e=M[0],o=M[1],a=_[_.length-1][0],l=_[_.length-1][1],i=!1,v=0;v<_.length;v++){var h=_[v][0],s=_[v][1];s-o>y!=l-o>y&&(a-h)*(o-s)/(l-s)+h-e>y&&(i=!i),a=h,l=s}return i}};return x}},{}],257:[function(b,oe,se){oe.exports={toPolygon:function(x,M){function _(a){if(a.length<=0)return x.segments({inverted:!1,regions:[]});function l(h){var s=h.slice(0,h.length-1);return x.segments({inverted:!1,regions:[s]})}for(var i=l(a[0]),v=1;v<a.length;v++)i=x.selectDifference(x.combine(i,l(a[v])));return i}if("Polygon"===M.type)return x.polygon(_(M.coordinates));if("MultiPolygon"===M.type){for(var e=x.segments({inverted:!1,regions:[]}),o=0;o<M.coordinates.length;o++)e=x.selectUnion(x.combine(e,_(M.coordinates[o])));return x.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(x,M,_){function e(f,g){return M.pointInsideRegion([.5*(f[0][0]+f[1][0]),.5*(f[0][1]+f[1][1])],g)}function o(f){return{region:f,children:[]}}_=x.polygon(x.segments(_));var a=o(null);function l(f,g){for(var m=0;m<f.children.length;m++)if(e(g,(w=f.children[m]).region))return void l(w,g);var u=o(g);for(m=0;m<f.children.length;m++){var w;e((w=f.children[m]).region,g)&&(u.children.push(w),f.children.splice(m,1),m--)}f.children.push(u)}for(var i=0;i<_.regions.length;i++){var v=_.regions[i];v.length<3||l(a,v)}function h(f,g){for(var m=0,u=f[f.length-1][0],w=f[f.length-1][1],c=[],A=0;A<f.length;A++){var k=f[A][0],C=f[A][1];c.push([k,C]),m+=C*u-k*w,u=k,w=C}return m<0!==g&&c.reverse(),c.push([c[0][0],c[0][1]]),c}var s=[];function d(f){var g=[h(f.region,!1)];s.push(g);for(var m=0;m<f.children.length;m++)g.push(p(f.children[m]))}function p(f){for(var g=0;g<f.children.length;g++)d(f.children[g]);return h(f.region,!0)}for(i=0;i<a.children.length;i++)d(a.children[i]);return s.length<=0?{type:"Polygon",coordinates:[]}:1==s.length?{type:"Polygon",coordinates:s[0]}:{type:"MultiPolygon",coordinates:s}}}},{}],258:[function(b,oe,se){var y=b("./linked-list");oe.exports=function(x,M,_){function e(h,s,d){return{id:_?_.segmentId():-1,start:h,end:s,myFill:{above:d.myFill.above,below:d.myFill.below},otherFill:null}}var o=y.create();function a(h,s){o.insertBefore(h,function(d){return p=h.isStart,g=s,m=d.isStart,w=d.other.pt,(0!==(c=M.pointsCompare(h.pt,u=d.pt))?c:M.pointsSame(g,w)?0:p!==m?p?1:-1:M.pointAboveOrOnLine(g,m?u:w,m?w:u)?1:-1)<0;var p,g,m,u,w,c})}function l(h,s){var p,g,d=(a(g=y.node({isStart:!0,pt:(p=h).start,seg:p,primary:s,other:null,status:null}),p.end),g);return function(p,f,g){var m=y.node({isStart:!1,pt:f.end,seg:f,primary:g,other:p,status:null});p.other=m,a(m,p.pt)}(d,h,s),d}function i(h,s){var p,f,d=e(s,h.seg.end,h.seg);return p=h,f=s,_&&_.segmentChop(p.seg,f),p.other.remove(),p.seg.end=f,p.other.pt=f,a(p.other,p.pt),l(d,h.primary)}function v(h,s){var d=y.create();function p(N){return d.findTransition(function(F){var I,P,j,V,Z,Y;return V=(I=N).seg.end,(M.pointsCollinear(j=I.seg.start,Z=(P=F.ev).seg.start,Y=P.seg.end)?M.pointsCollinear(V,Z,Y)||M.pointAboveOrOnLine(V,Z,Y)?1:-1:M.pointAboveOrOnLine(j,Z,Y)?1:-1)>0})}function f(N,F){var I=N.seg,P=F.seg,j=I.start,V=I.end,Z=P.start,Y=P.end;_&&_.checkIntersection(I,P);var ee=M.linesIntersect(j,V,Z,Y);if(!1===ee){if(!M.pointsCollinear(j,V,Z)||M.pointsSame(j,Y)||M.pointsSame(V,Z))return!1;var re=M.pointsSame(j,Z),X=M.pointsSame(V,Y);if(re&&X)return F;var K=!re&&M.pointBetween(j,Z,Y),ie=!X&&M.pointBetween(V,Z,Y);if(re)return ie?i(F,V):i(N,Y),F;K&&(X||(ie?i(F,V):i(N,Y)),i(F,j))}else 0===ee.alongA&&(-1===ee.alongB?i(N,Z):0===ee.alongB?i(N,ee.pt):1===ee.alongB&&i(N,Y)),0===ee.alongB&&(-1===ee.alongA?i(F,j):0===ee.alongA?i(F,ee.pt):1===ee.alongA&&i(F,V));return!1}for(var g=[];!o.isEmpty();){var m=o.getHead();if(_&&_.vert(m.pt[0]),m.isStart){let N=function(){if(w){var F=f(m,w);if(F)return F}return!!c&&f(m,c)};_&&_.segmentNew(m.seg,m.primary);var u=p(m),w=u.before?u.before.ev:null,c=u.after?u.after.ev:null;_&&_.tempStatus(m.seg,!!w&&w.seg,!!c&&c.seg);var A,C,k=N();if(k&&(x?(C=null===m.seg.myFill.below||m.seg.myFill.above!==m.seg.myFill.below)&&(k.seg.myFill.above=!k.seg.myFill.above):k.seg.otherFill=m.seg.myFill,_&&_.segmentUpdate(k.seg),m.other.remove(),m.remove()),o.getHead()!==m){_&&_.rewind(m.seg);continue}x?(C=null===m.seg.myFill.below||m.seg.myFill.above!==m.seg.myFill.below,m.seg.myFill.below=c?c.seg.myFill.above:h,m.seg.myFill.above=C?!m.seg.myFill.below:m.seg.myFill.below):null===m.seg.otherFill&&(m.seg.otherFill={above:A=c?m.primary===c.primary?c.seg.otherFill.above:c.seg.myFill.above:m.primary?s:h,below:A}),_&&_.status(m.seg,!!w&&w.seg,!!c&&c.seg),m.other.status=u.insert(y.node({ev:m}))}else{var E=m.status;if(null===E)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(d.exists(E.prev)&&d.exists(E.next)&&f(E.prev.ev,E.next.ev),_&&_.statusRemove(E.ev.seg),E.remove(),!m.primary){var L=m.seg.myFill;m.seg.myFill=m.seg.otherFill,m.seg.otherFill=L}g.push(m.seg)}o.getHead().remove()}return _&&_.done(),g}return x?{addRegion:function(h){for(var s,d,p,f=h[h.length-1],g=0;g<h.length;g++){var m=M.pointsCompare(s=f,f=h[g]);0!==m&&l((d=m<0?s:f,p=m<0?f:s,{id:_?_.segmentId():-1,start:d,end:p,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(h){return v(h,!1)}}:{calculate:function(h,s,d,p){return h.forEach(function(f){l(e(f.start,f.end,f),!0)}),d.forEach(function(f){l(e(f.start,f.end,f),!1)}),v(s,p)}}}},{"./linked-list":259}],259:[function(b,oe,se){oe.exports={create:function(){var y={root:{root:!0,next:null},exists:function(x){return null!==x&&x!==y.root},isEmpty:function(){return null===y.root.next},getHead:function(){return y.root.next},insertBefore:function(x,M){for(var _=y.root,e=y.root.next;null!==e;){if(M(e))return x.prev=e.prev,x.next=e,e.prev.next=x,void(e.prev=x);_=e,e=e.next}_.next=x,x.prev=_,x.next=null},findTransition:function(x){for(var M=y.root,_=y.root.next;null!==_&&!x(_);)M=_,_=_.next;return{before:M===y.root?null:M,after:_,insert:function(e){return e.prev=M,e.next=_,M.next=e,null!==_&&(_.prev=e),e}}}};return y},node:function(y){return y.prev=null,y.next=null,y.remove=function(){y.prev.next=y.next,y.next&&(y.next.prev=y.prev),y.prev=null,y.next=null},y}}},{}],260:[function(b,oe,se){oe.exports=function(y,x,M){var _=[],e=[];return y.forEach(function(o){var a=o.start,l=o.end;if(x.pointsSame(a,l))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{M&&M.chainStart(o);for(var i={index:0,matches_head:!1,matches_pt1:!1},v={index:0,matches_head:!1,matches_pt1:!1},h=i,s=0;s<_.length;s++){var d=(u=_[s])[0],p=u[u.length-1];if(x.pointsSame(d,a)){if(D(s,!0,!0))break}else if(x.pointsSame(d,l)){if(D(s,!0,!1))break}else if(x.pointsSame(p,a)){if(D(s,!1,!0))break}else if(x.pointsSame(p,l)&&D(s,!1,!1))break}if(h===i)return _.push([a,l]),void(M&&M.chainNew(a,l));if(h===v){M&&M.chainMatch(i.index);var f=i.index,g=i.matches_pt1?l:a,m=i.matches_head,u=_[f],w=m?u[0]:u[u.length-1],c=m?u[1]:u[u.length-2],A=m?u[u.length-1]:u[0],k=m?u[u.length-2]:u[1];return x.pointsCollinear(c,w,g)&&(m?(M&&M.chainRemoveHead(i.index,g),u.shift()):(M&&M.chainRemoveTail(i.index,g),u.pop()),w=c),x.pointsSame(A,g)?(_.splice(f,1),x.pointsCollinear(k,A,w)&&(m?(M&&M.chainRemoveTail(i.index,w),u.pop()):(M&&M.chainRemoveHead(i.index,w),u.shift())),M&&M.chainClose(i.index),void e.push(u)):void(m?(M&&M.chainAddHead(i.index,g),u.unshift(g)):(M&&M.chainAddTail(i.index,g),u.push(g)))}var C=i.index,E=v.index;M&&M.chainConnect(C,E);var L=_[C].length<_[E].length;i.matches_head?v.matches_head?L?(N(C),F(C,E)):(N(E),F(E,C)):F(E,C):v.matches_head?F(C,E):L?(N(C),F(E,C)):(N(E),F(C,E))}function D(I,P,j){return h.index=I,h.matches_head=P,h.matches_pt1=j,h===i?(h=v,!1):(h=null,!0)}function N(I){M&&M.chainReverse(I),_[I].reverse()}function F(I,P){var j=_[I],V=_[P],Z=j[j.length-1],Y=j[j.length-2],ee=V[0],re=V[1];x.pointsCollinear(Y,Z,ee)&&(M&&M.chainRemoveTail(I,Z),j.pop(),Z=Y),x.pointsCollinear(Z,ee,re)&&(M&&M.chainRemoveHead(P,ee),V.shift()),M&&M.chainJoin(I,P),_[I]=j.concat(V),_.splice(P,1)}}),e}},{}],261:[function(b,oe,se){function y(M,_,e){var o=[];return M.forEach(function(a){var l=(a.myFill.above?8:0)+(a.myFill.below?4:0)+(a.otherFill&&a.otherFill.above?2:0)+(a.otherFill&&a.otherFill.below?1:0);0!==_[l]&&o.push({id:e?e.segmentId():-1,start:a.start,end:a.end,myFill:{above:1===_[l],below:2===_[l]},otherFill:null})}),e&&e.selected(o),o}oe.exports={union:function(M,_){return y(M,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],_)},intersect:function(M,_){return y(M,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],_)},difference:function(M,_){return y(M,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],_)},differenceRev:function(M,_){return y(M,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],_)},xor:function(M,_){return y(M,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],_)}}},{}],262:[function(b,oe,se){"use strict";var y=b("stream").Transform,x=b("stream-parser");function M(){y.call(this,{readableObjectMode:!0})}function _(e,o,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name=this.constructor.name,this.message=e,o&&(this.code=o),a&&(this.statusCode=a)}(M.prototype=Object.create(y.prototype)).constructor=M,x(M.prototype),se.ParserStream=M,se.sliceEq=function(e,o,a){for(var l=o,i=0;i<a.length;)if(e[l++]!==a[i++])return!1;return!0},se.str2arr=function(e,o){var a=[],l=0;if(o&&"hex"===o)for(;l<e.length;)a.push(parseInt(e.slice(l,l+2),16)),l+=2;else for(;l<e.length;l++)a.push(255&e.charCodeAt(l));return a},se.readUInt16LE=function(e,o){return e[o]|e[o+1]<<8},se.readUInt16BE=function(e,o){return e[o+1]|e[o]<<8},se.readUInt32LE=function(e,o){return e[o]|e[o+1]<<8|e[o+2]<<16|16777216*e[o+3]},se.readUInt32BE=function(e,o){return e[o+3]|e[o+2]<<8|e[o+1]<<16|16777216*e[o]},(_.prototype=Object.create(Error.prototype)).constructor=_,se.ProbeError=_},{stream:285,"stream-parser":301}],263:[function(b,oe,se){"use strict";function y(_,e){var o=new Error(_);return o.code=e,o}function x(_){try{return decodeURIComponent(escape(_))}catch(e){return _}}function M(_,e,o){this.input=_.subarray(e,o),this.start=e;var a=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==a&&"MM\0*"!==a)throw y("invalid TIFF signature","EBADDATA");this.big_endian="M"===a[0]}M.prototype.each=function(_){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var o=this.ifds_to_read.shift();o.offset&&this.scan_ifd(o.id,o.offset,_)}},M.prototype.read_uint16=function(_){var e=this.input;if(_+2>e.length)throw y("unexpected EOF","EBADDATA");return this.big_endian?256*e[_]+e[_+1]:e[_]+256*e[_+1]},M.prototype.read_uint32=function(_){var e=this.input;if(_+4>e.length)throw y("unexpected EOF","EBADDATA");return this.big_endian?16777216*e[_]+65536*e[_+1]+256*e[_+2]+e[_+3]:e[_]+256*e[_+1]+65536*e[_+2]+16777216*e[_+3]},M.prototype.is_subifd_link=function(_,e){return 0===_&&34665===e||0===_&&34853===e||34665===_&&40965===e},M.prototype.exif_format_length=function(_){switch(_){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},M.prototype.exif_format_read=function(_,e){var o;switch(_){case 1:case 2:return this.input[e];case 6:return(o=this.input[e])|33554430*(128&o);case 3:return this.read_uint16(e);case 8:return(o=this.read_uint16(e))|131070*(32768&o);case 4:return this.read_uint32(e);case 9:return 0|this.read_uint32(e);case 5:case 10:case 11:case 12:case 7:default:return null}},M.prototype.scan_ifd=function(_,e,o){var a=this.read_uint16(e);e+=2;for(var l=0;l<a;l++){var i=this.read_uint16(e),v=this.read_uint16(e+2),h=this.read_uint32(e+4),s=this.exif_format_length(v),d=h*s,p=d<=4?e+8:this.read_uint32(e+8),f=!1;if(p+d>this.input.length)throw y("unexpected EOF","EBADDATA");for(var g=[],m=p,u=0;u<h;u++,m+=s){var w=this.exif_format_read(v,m);if(null===w){g=null;break}g.push(w)}if(Array.isArray(g)&&2===v&&(g=x(String.fromCharCode.apply(null,g)))&&"\0"===g[g.length-1]&&(g=g.slice(0,-1)),this.is_subifd_link(_,i)&&Array.isArray(g)&&Number.isInteger(g[0])&&g[0]>0&&(this.ifds_to_read.push({id:i,offset:g[0]}),f=!0),!1===o({is_big_endian:this.big_endian,ifd:_,tag:i,format:v,count:h,entry_offset:e+this.start,data_length:d,data_offset:p+this.start,value:g,is_subifd_link:f}))return void(this.aborted=!0);e+=12}0===_&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},oe.exports.ExifParser=M,oe.exports.get_orientation=function(_){var e=0;try{return new M(_,0,_.length).each(function(o){if(0===o.ifd&&274===o.tag&&Array.isArray(o.value))return e=o.value[0],!1}),e}catch(o){return-1}}},{}],264:[function(b,oe,se){"use strict";var y=b("./common").readUInt16BE,x=b("./common").readUInt32BE;function M(i,v){if(i.length<4+v)return null;var h=x(i,v);return i.length<h+v||h<8?null:{boxtype:String.fromCharCode.apply(null,i.slice(v+4,v+8)),data:i.slice(v+8,v+h),end:v+h}}function _(i,v){for(var h=0;;){var s=M(i,h);if(!s)break;switch(s.boxtype){case"ispe":v.sizes.push({width:x(s.data,4),height:x(s.data,8)});break;case"irot":v.transforms.push({type:"irot",value:3&s.data[0]});break;case"imir":v.transforms.push({type:"imir",value:1&s.data[0]})}h=s.end}}function e(i,v,h){for(var s=0,d=0;d<h;d++)s=256*s+(i[v+d]||0);return s}function o(i,v){for(var h=i[4]>>4&15,s=15&i[4],d=i[5]>>4&15,p=y(i,6),f=8,g=0;g<p;g++){var m=y(i,f),u=y(i,f+=2),w=e(i,f+=2,d),c=y(i,f+=d);if(f+=2,0===u&&1===c){var A=e(i,f,h),k=e(i,f+h,s);v.item_loc[m]={length:k,offset:A+w}}f+=c*(h+s)}}function a(i,v){for(var h=y(i,4),s=6,d=0;d<h;d++){var p=M(i,s);if(!p)break;if("infe"===p.boxtype){for(var f=y(p.data,4),g="",m=8;m<p.data.length&&p.data[m];m++)g+=String.fromCharCode(p.data[m]);v.item_inf[g]=f}s=p.end}}function l(i,v){for(var h=0;;){var s=M(i,h);if(!s)break;"ipco"===s.boxtype&&_(s.data,v),h=s.end}}oe.exports.unbox=M,oe.exports.readSizeFromMeta=function(i){var v={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(m,u){for(var w=4;;){var c=M(m,w);if(!c)break;"iprp"===c.boxtype&&l(c.data,u),"iloc"===c.boxtype&&o(c.data,u),"iinf"===c.boxtype&&a(c.data,u),w=c.end}}(i,v),v.sizes.length){var h,s,d,p=(s=(h=v.sizes).reduce(function(m,u){return m.width>u.width||m.width===u.width&&m.height>u.height?m:u}),d=h.reduce(function(m,u){return m.height>u.height||m.height===u.height&&m.width>u.width?m:u}),s.width>d.height||s.width===d.height&&s.height>d.width?s:d),f=1;v.transforms.forEach(function(m){var u={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},w={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===m.type&&(f=0===m.value?w[f]:u[f=u[f=w[f]]]),"irot"===m.type)for(var c=0;c<m.value;c++)f=u[f]});var g=null;return v.item_inf.Exif&&(g=v.item_loc[v.item_inf.Exif]),{width:p.width,height:p.height,orientation:v.transforms.length?f:null,variants:v.sizes,exif_location:g}}},oe.exports.getMimeType=function(i){var v=String.fromCharCode.apply(null,i.slice(0,4)),h={};h[v]=!0;for(var s=8;s<i.length;s+=4)h[String.fromCharCode.apply(null,i.slice(s,s+4))]=!0;if(h.mif1||h.msf1||h.miaf)return"avif"===v||"avis"===v||"avio"===v?{type:"avif",mime:"image/avif"}:"heic"===v||"heix"===v?{type:"heic",mime:"image/heic"}:"hevc"===v||"hevx"===v?{type:"heic",mime:"image/heic-sequence"}:h.avif||h.avis?{type:"avif",mime:"image/avif"}:h.heic||h.heix||h.hevc||h.hevx||h.heis?h.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":262}],265:[function(b,oe,se){"use strict";var y=b("../common").str2arr,x=b("../common").sliceEq,M=b("../common").readUInt32BE,_=b("../miaf_utils"),e=b("../exif_utils"),o=y("ftyp");oe.exports=function(a){if(x(a,4,o)){var l=_.unbox(a,0);if(l){var i=_.getMimeType(l.data);if(i){for(var v,h=l.end;;){var s=_.unbox(a,h);if(!s)break;if(h=s.end,"mdat"===s.boxtype)return;if("meta"===s.boxtype){v=s.data;break}}if(v){var d=_.readSizeFromMeta(v);if(d){var p={width:d.width,height:d.height,type:i.type,mime:i.mime,wUnits:"px",hUnits:"px"};if(d.variants.length>1&&(p.variants=d.variants),d.orientation&&(p.orientation=d.orientation),d.exif_location&&d.exif_location.offset+d.exif_location.length<=a.length){var f=M(a,d.exif_location.offset),g=a.slice(d.exif_location.offset+f+4,d.exif_location.offset+d.exif_location.length),m=e.get_orientation(g);m>0&&(p.orientation=m)}return p}}}}}}},{"../common":262,"../exif_utils":263,"../miaf_utils":264}],266:[function(b,oe,se){"use strict";var y=b("../common").str2arr,x=b("../common").sliceEq,M=b("../common").readUInt16LE,_=y("BM");oe.exports=function(e){if(!(e.length<26)&&x(e,0,_))return{width:M(e,18),height:M(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":262}],267:[function(b,oe,se){"use strict";var y=b("../common").str2arr,x=b("../common").sliceEq,M=b("../common").readUInt16LE,_=y("GIF87a"),e=y("GIF89a");oe.exports=function(o){if(!(o.length<10)&&(x(o,0,_)||x(o,0,e)))return{width:M(o,6),height:M(o,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":262}],268:[function(b,oe,se){"use strict";var y=b("../common").readUInt16LE;oe.exports=function(x){var M=y(x,0),_=y(x,2),e=y(x,4);if(0===M&&1===_&&e){for(var o=[],a={width:0,height:0},l=0;l<e;l++){var i=x[6+16*l]||256,v=x[6+16*l+1]||256,h={width:i,height:v};o.push(h),(i>a.width||v>a.height)&&(a=h)}return{width:a.width,height:a.height,variants:o,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":262}],269:[function(b,oe,se){"use strict";var y=b("../common").readUInt16BE,x=b("../common").str2arr,M=b("../common").sliceEq,_=b("../exif_utils"),e=x("Exif\0\0");oe.exports=function(o){if(!(o.length<2)&&255===o[0]&&216===o[1]&&255===o[2])for(var a=2;;){for(;;){if(o.length-a<2)return;if(255===o[a++])break}for(var l,i,v=o[a++];255===v;)v=o[a++];if(208<=v&&v<=217||1===v)l=0;else{if(!(192<=v&&v<=254)||o.length-a<2)return;l=y(o,a)-2,a+=2}if(217===v||218===v)return;if(225===v&&l>=10&&M(o,a,e)&&(i=_.get_orientation(o.slice(a+6,a+l))),l>=5&&192<=v&&v<=207&&196!==v&&200!==v&&204!==v){if(o.length-a<l)return;var h={width:y(o,a+3),height:y(o,a+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return i>0&&(h.orientation=i),h}a+=l}}},{"../common":262,"../exif_utils":263}],270:[function(b,oe,se){"use strict";var y=b("../common").str2arr,x=b("../common").sliceEq,M=b("../common").readUInt32BE,_=y("\x89PNG\r\n\x1a\n"),e=y("IHDR");oe.exports=function(o){if(!(o.length<24)&&x(o,0,_)&&x(o,12,e))return{width:M(o,16),height:M(o,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":262}],271:[function(b,oe,se){"use strict";var y=b("../common").str2arr,x=b("../common").sliceEq,M=b("../common").readUInt32BE,_=y("8BPS\0\x01");oe.exports=function(e){if(!(e.length<22)&&x(e,0,_))return{width:M(e,18),height:M(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":262}],272:[function(b,oe,se){"use strict";function y(i){return"number"==typeof i&&isFinite(i)&&i>0}var x=/<[-_.:a-zA-Z0-9][^>]*>/,M=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,_=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,e=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,o=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,a=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function l(i){return a.test(i)?i.match(a)[0]:"px"}oe.exports=function(i){if(function(A){var k,C=0,E=A.length;for(239===A[0]&&187===A[1]&&191===A[2]&&(C=3);C<E&&(32===(k=A[C])||9===k||13===k||10===k);)C++;return C!==E&&60===A[C]}(i)){for(var v="",h=0;h<i.length;h++)v+=String.fromCharCode(i[h]);var s=(v.match(x)||[""])[0];if(M.test(s)){var d=(k=(A=s).match(_),C=A.match(e),E=A.match(o),{width:k&&(k[1]||k[2]),height:C&&(C[1]||C[2]),viewbox:E&&(E[1]||E[2])}),p=parseFloat(d.width),f=parseFloat(d.height);if(d.width&&d.height)return y(p)&&y(f)?{width:p,height:f,type:"svg",mime:"image/svg+xml",wUnits:l(d.width),hUnits:l(d.height)}:void 0;var g=(d.viewbox||"").split(" "),m={width:g[2],height:g[3]},u=parseFloat(m.width),w=parseFloat(m.height);if(y(u)&&y(w)&&l(m.width)===l(m.height)){var c=u/w;return d.width?y(p)?{width:p,height:p/c,type:"svg",mime:"image/svg+xml",wUnits:l(d.width),hUnits:l(d.width)}:void 0:d.height?y(f)?{width:f*c,height:f,type:"svg",mime:"image/svg+xml",wUnits:l(d.height),hUnits:l(d.height)}:void 0:{width:u,height:w,type:"svg",mime:"image/svg+xml",wUnits:l(m.width),hUnits:l(m.height)}}}}var A,k,C,E}},{}],273:[function(b,oe,se){"use strict";var y=b("../common").str2arr,x=b("../common").sliceEq,M=b("../common").readUInt16LE,_=b("../common").readUInt16BE,e=b("../common").readUInt32LE,o=b("../common").readUInt32BE,a=y("II*\0"),l=y("MM\0*");function i(s,d,p){return p?_(s,d):M(s,d)}function v(s,d,p){return p?o(s,d):e(s,d)}function h(s,d,p){var f=i(s,d+2,p);return 1!==v(s,d+4,p)||3!==f&&4!==f?null:3===f?i(s,d+8,p):v(s,d+8,p)}oe.exports=function(s){if(!(s.length<8)&&(x(s,0,a)||x(s,0,l))){var d=77===s[0],p=v(s,4,d)-8;if(!(p<0)){var f=p+8;if(!(s.length-f<2)){var g=12*i(s,f+0,d);if(!(g<=0||(f+=2,s.length-f<g))){var m,u,w,c;for(m=0;m<g;m+=12)256===(c=i(s,f+m,d))?u=h(s,f+m,d):257===c&&(w=h(s,f+m,d));return u&&w?{width:u,height:w,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},{"../common":262}],274:[function(b,oe,se){"use strict";var y=b("../common").str2arr,x=b("../common").sliceEq,M=b("../common").readUInt16LE,_=b("../common").readUInt32LE,e=b("../exif_utils"),o=y("RIFF"),a=y("WEBP");function l(h,s){if(157===h[s+3]&&1===h[s+4]&&42===h[s+5])return{width:16383&M(h,s+6),height:16383&M(h,s+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function i(h,s){if(47===h[s]){var d=_(h,s+1);return{width:1+(16383&d),height:1+(d>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function v(h,s){return{width:1+(h[s+6]<<16|h[s+5]<<8|h[s+4]),height:1+(h[s+9]<<s|h[s+8]<<8|h[s+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}oe.exports=function(h){if(!(h.length<16)&&(x(h,0,o)||x(h,8,a))){var s=12,d=null,p=0,f=_(h,4)+8;if(!(f>h.length)){for(;s+8<f;)if(0!==h[s]){var g=String.fromCharCode.apply(null,h.slice(s,s+4)),m=_(h,s+4);"VP8 "===g&&m>=10?d=d||l(h,s+8):"VP8L"===g&&m>=9?d=d||i(h,s+8):"VP8X"===g&&m>=10?d=d||v(h,s+8):"EXIF"===g&&(p=e.get_orientation(h.slice(s+8,s+8+m)),s=1/0),s+=8+m}else s++;if(d)return p>0&&(d.orientation=p),d}}}},{"../common":262,"../exif_utils":263}],275:[function(b,oe,se){"use strict";oe.exports={avif:b("./parse_sync/avif"),bmp:b("./parse_sync/bmp"),gif:b("./parse_sync/gif"),ico:b("./parse_sync/ico"),jpeg:b("./parse_sync/jpeg"),png:b("./parse_sync/png"),psd:b("./parse_sync/psd"),svg:b("./parse_sync/svg"),tiff:b("./parse_sync/tiff"),webp:b("./parse_sync/webp")}},{"./parse_sync/avif":265,"./parse_sync/bmp":266,"./parse_sync/gif":267,"./parse_sync/ico":268,"./parse_sync/jpeg":269,"./parse_sync/png":270,"./parse_sync/psd":271,"./parse_sync/svg":272,"./parse_sync/tiff":273,"./parse_sync/webp":274}],276:[function(b,oe,se){"use strict";var y=b("./lib/parsers_sync");oe.exports=function(x){return function(M){for(var _=Object.keys(y),e=0;e<_.length;e++){var o=y[_[e]](M);if(o)return o}return null}(x)},oe.exports.parsers=y},{"./lib/parsers_sync":275}],277:[function(b,oe,se){var y,x,M=oe.exports={};function _(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function o(f){if(y===setTimeout)return setTimeout(f,0);if((y===_||!y)&&setTimeout)return y=setTimeout,setTimeout(f,0);try{return y(f,0)}catch(g){try{return y.call(null,f,0)}catch(m){return y.call(this,f,0)}}}!function(){try{y="function"==typeof setTimeout?setTimeout:_}catch(f){y=_}try{x="function"==typeof clearTimeout?clearTimeout:e}catch(f){x=e}}();var a,l=[],i=!1,v=-1;function h(){i&&a&&(i=!1,a.length?l=a.concat(l):v=-1,l.length&&s())}function s(){if(!i){var f=o(h);i=!0;for(var g=l.length;g;){for(a=l,l=[];++v<g;)a&&a[v].run();v=-1,g=l.length}a=null,i=!1,function(m){if(x===clearTimeout)return clearTimeout(m);if((x===e||!x)&&clearTimeout)return x=clearTimeout,clearTimeout(m);try{x(m)}catch(u){try{return x.call(null,m)}catch(w){return x.call(this,m)}}}(f)}}function d(f,g){this.fun=f,this.array=g}function p(){}M.nextTick=function(f){var g=new Array(arguments.length-1);if(arguments.length>1)for(var m=1;m<arguments.length;m++)g[m-1]=arguments[m];l.push(new d(f,g)),1!==l.length||i||o(s)},d.prototype.run=function(){this.fun.apply(null,this.array)},M.title="browser",M.browser=!0,M.env={},M.argv=[],M.version="",M.versions={},M.on=p,M.addListener=p,M.once=p,M.off=p,M.removeListener=p,M.removeAllListeners=p,M.emit=p,M.prependListener=p,M.prependOnceListener=p,M.listeners=function(f){return[]},M.binding=function(f){throw new Error("process.binding is not supported")},M.cwd=function(){return"/"},M.chdir=function(f){throw new Error("process.chdir is not supported")},M.umask=function(){return 0}},{}],278:[function(b,oe,se){(function(y){(function(){for(var x=b("performance-now"),M="undefined"==typeof window?y:window,_=["moz","webkit"],e="AnimationFrame",o=M["request"+e],a=M["cancel"+e]||M["cancelRequest"+e],l=0;!o&&l<_.length;l++)o=M[_[l]+"Request"+e],a=M[_[l]+"Cancel"+e]||M[_[l]+"CancelRequest"+e];if(!o||!a){var i=0,v=0,h=[];o=function(s){if(0===h.length){var d=x(),p=Math.max(0,1e3/60-(d-i));i=p+d,setTimeout(function(){var f=h.slice(0);h.length=0;for(var g=0;g<f.length;g++)if(!f[g].cancelled)try{f[g].callback(i)}catch(m){setTimeout(function(){throw m},0)}},Math.round(p))}return h.push({handle:++v,callback:s,cancelled:!1}),v},a=function(s){for(var d=0;d<h.length;d++)h[d].handle===s&&(h[d].cancelled=!0)}}oe.exports=function(s){return o.call(M,s)},oe.exports.cancel=function(){a.apply(M,arguments)},oe.exports.polyfill=function(s){s||(s=M),s.requestAnimationFrame=o,s.cancelAnimationFrame=a}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":252}],279:[function(b,oe,se){"use strict";var y=b("array-bounds"),x=b("color-normalize"),M=b("update-diff"),_=b("pick-by-alias"),e=b("object-assign"),o=b("flatten-vertex-data"),a=b("to-float32"),l=a.float32,i=a.fract32;oe.exports=function(h,s){if("function"==typeof h?(s||(s={}),s.regl=h):s=h,s.length&&(s.positions=s),!(h=s.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var d,p,f,g,m,u,w=h._gl,c={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},A=[];return g=h.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),p=h.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),f=h.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),m=h.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),u=h.buffer({usage:"static",type:"float",data:v}),L(s),d=h({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:h.prop("range"),lineWidth:h.prop("lineWidth"),capSize:h.prop("capSize"),opacity:h.prop("opacity"),scale:h.prop("scale"),translate:h.prop("translate"),scaleFract:h.prop("scaleFract"),translateFract:h.prop("translateFract"),viewport:function(N,F){return[F.viewport.x,F.viewport.y,N.viewportWidth,N.viewportHeight]}},attributes:{color:{buffer:g,offset:function(N,F){return 4*F.offset},divisor:1},position:{buffer:p,offset:function(N,F){return 8*F.offset},divisor:1},positionFract:{buffer:f,offset:function(N,F){return 8*F.offset},divisor:1},error:{buffer:m,offset:function(N,F){return 16*F.offset},divisor:1},direction:{buffer:u,stride:24,offset:0},lineOffset:{buffer:u,stride:24,offset:8},capOffset:{buffer:u,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:h.prop("viewport")},viewport:h.prop("viewport"),stencil:!1,instances:h.prop("count"),count:v.length}),e(k,{update:L,draw:C,destroy:D,regl:h,gl:w,canvas:w.canvas,groups:A}),k;function k(N){N?L(N):null===N&&D(),C()}function C(N){if("number"==typeof N)return E(N);N&&!Array.isArray(N)&&(N=[N]),h._refresh(),A.forEach(function(F,I){F&&(N&&(F.draw=!!N[I]),F.draw?E(I):F.draw=!0)})}function E(N){"number"==typeof N&&(N=A[N]),null!=N&&N&&N.count&&N.color&&N.opacity&&N.positions&&N.positions.length>1&&(N.scaleRatio=[N.scale[0]*N.viewport.width,N.scale[1]*N.viewport.height],d(N),N.after&&N.after(N))}function L(N){if(N){null!=N.length?"number"==typeof N[0]&&(N=[{positions:N}]):Array.isArray(N)||(N=[N]);var F=0,I=0;if(k.groups=A=N.map(function(re,X){var K=A[X];return re&&("function"==typeof re?re={after:re}:"number"==typeof re[0]&&(re={positions:re}),re=_(re,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),K||(A[X]=K={id:X,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},re=e({},c,re)),M(K,re,[{lineWidth:function(ie){return.5*+ie},capSize:function(ie){return.5*+ie},opacity:parseFloat,errors:function(ie){return ie=o(ie),I+=ie.length,ie},positions:function(ie,q){return ie=o(ie,"float64"),q.count=Math.floor(ie.length/2),q.bounds=y(ie,2),q.offset=F,F+=q.count,ie}},{color:function(ie,q){var U=q.count;if(ie||(ie="transparent"),!Array.isArray(ie)||"number"==typeof ie[0]){var W=ie;ie=Array(U);for(var ae=0;ae<U;ae++)ie[ae]=W}if(ie.length<U)throw Error("Not enough colors");for(var G=new Uint8Array(4*U),te=0;te<U;te++){var ne=x(ie[te],"uint8");G.set(ne,4*te)}return G},range:function(ie,q,U){return ie||(ie=q.bounds),q.scale=[1/(ie[2]-ie[0]),1/(ie[3]-ie[1])],q.translate=[-ie[0],-ie[1]],q.scaleFract=i(q.scale),q.translateFract=i(q.translate),ie},viewport:function(ie){var q;return Array.isArray(ie)?q={x:ie[0],y:ie[1],width:ie[2]-ie[0],height:ie[3]-ie[1]}:ie?((q={x:ie.x||ie.left||0,y:ie.y||ie.top||0}).width=ie.right?ie.right-q.x:ie.w||ie.width||0,q.height=ie.bottom?ie.bottom-q.y:ie.h||ie.height||0):q={x:0,y:0,width:w.drawingBufferWidth,height:w.drawingBufferHeight},q}}])),K}),F||I){var P=A.reduce(function(re,X,K){return re+(X?X.count:0)},0),j=new Float64Array(2*P),V=new Uint8Array(4*P),Z=new Float32Array(4*P);A.forEach(function(re,X){if(re){var K=re.positions,q=re.offset,W=re.errors;re.count&&(V.set(re.color,4*q),Z.set(W,4*q),j.set(K,2*q))}});var Y=l(j);p(Y);var ee=i(j,Y);f(ee),g(V),m(Z)}}}function D(){p.destroy(),f.destroy(),g.destroy(),m.destroy(),u.destroy()}};var v=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":313,"update-diff":329}],280:[function(b,oe,se){"use strict";var y=b("color-normalize"),x=b("array-bounds"),M=b("object-assign"),_=b("glslify"),e=b("pick-by-alias"),o=b("flatten-vertex-data"),a=b("earcut"),l=b("array-normalize"),i=b("to-float32"),v=i.float32,h=i.fract32,s=b("es6-weak-map"),d=b("parse-rect"),p=b("array-find-index");function f(g,m){if(!(this instanceof f))return new f(g,m);if("function"==typeof g?(m||(m={}),m.regl=g):m=g,m.length&&(m.positions=m),!(g=m.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=g._gl,this.regl=g,this.passes=[],this.shaders=f.shaders.has(g)?f.shaders.get(g):f.shaders.set(g,f.createShaders(g)).get(g),this.update(m)}oe.exports=f,f.dashMult=2,f.maxPatternLength=256,f.precisionThreshold=3e6,f.maxPoints=1e4,f.maxLines=2048,f.shaders=new s,f.createShaders=function(g){var m,u=g.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),w={primitive:"triangle strip",instances:g.prop("count"),count:4,offset:0,uniforms:{miterMode:function(A,k){return"round"===k.join?2:1},miterLimit:g.prop("miterLimit"),scale:g.prop("scale"),scaleFract:g.prop("scaleFract"),translateFract:g.prop("translateFract"),translate:g.prop("translate"),thickness:g.prop("thickness"),dashTexture:g.prop("dashTexture"),opacity:g.prop("opacity"),pixelRatio:g.context("pixelRatio"),id:g.prop("id"),dashLength:g.prop("dashLength"),viewport:function(A,k){return[k.viewport.x,k.viewport.y,A.viewportWidth,A.viewportHeight]},depth:g.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(A,k){return!k.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:g.prop("viewport")},viewport:g.prop("viewport")},c=g(M({vert:_(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:_(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:u,divisor:0,stride:8,offset:0},lineTop:{buffer:u,divisor:0,stride:8,offset:4},aCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:g.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},w));try{m=g(M({cull:{enable:!0,face:"back"},vert:_(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:_(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:u,divisor:0,stride:8,offset:0},lineTop:{buffer:u,divisor:0,stride:8,offset:4},aColor:{buffer:g.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:g.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:g.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},w))}catch(A){m=c}return{fill:g({primitive:"triangle",elements:function(A,k){return k.triangles},offset:0,vert:_(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:_(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:g.prop("scale"),color:g.prop("fill"),scaleFract:g.prop("scaleFract"),translateFract:g.prop("translateFract"),translate:g.prop("translate"),opacity:g.prop("opacity"),pixelRatio:g.context("pixelRatio"),id:g.prop("id"),viewport:function(A,k){return[k.viewport.x,k.viewport.y,A.viewportWidth,A.viewportHeight]}},attributes:{position:{buffer:g.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:g.prop("positionFractBuffer"),stride:8,offset:8}},blend:w.blend,depth:{enable:!1},scissor:w.scissor,stencil:w.stencil,viewport:w.viewport}),rect:c,miter:m}},f.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},f.prototype.render=function(){for(var g,m=[],u=arguments.length;u--;)m[u]=arguments[u];m.length&&(g=this).update.apply(g,m),this.draw()},f.prototype.draw=function(){for(var g=this,m=[],u=arguments.length;u--;)m[u]=arguments[u];return(m.length?m:this.passes).forEach(function(w,c){var A;if(w&&Array.isArray(w))return(A=g).draw.apply(A,w);"number"==typeof w&&(w=g.passes[w]),w&&w.count>1&&w.opacity&&(g.regl._refresh(),w.fill&&w.triangles&&w.triangles.length>2&&g.shaders.fill(w),w.thickness&&(w.scale[0]*w.viewport.width>f.precisionThreshold||w.scale[1]*w.viewport.height>f.precisionThreshold||"rect"===w.join||!w.join&&(w.thickness<=2||w.count>=f.maxPoints)?g.shaders.rect(w):g.shaders.miter(w)))}),this},f.prototype.update=function(g){var m=this;if(g){null!=g.length?"number"==typeof g[0]&&(g=[{positions:g}]):Array.isArray(g)||(g=[g]);var u=this.regl,w=this.gl;if(g.forEach(function(E,L){var D=m.passes[L];if(void 0!==E)if(null!==E){if("number"==typeof E[0]&&(E={positions:E}),E=e(E,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),D||(m.passes[L]=D={id:L,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:u.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:u.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:u.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},E=M({},f.defaults,E)),null!=E.thickness&&(D.thickness=parseFloat(E.thickness)),null!=E.opacity&&(D.opacity=parseFloat(E.opacity)),null!=E.miterLimit&&(D.miterLimit=parseFloat(E.miterLimit)),null!=E.overlay&&(D.overlay=!!E.overlay,L<f.maxLines&&(D.depth=2*(f.maxLines-1-L%f.maxLines)/f.maxLines-1)),null!=E.join&&(D.join=E.join),null!=E.hole&&(D.hole=E.hole),null!=E.fill&&(D.fill=E.fill?y(E.fill,"uint8"):null),null!=E.viewport&&(D.viewport=d(E.viewport)),D.viewport||(D.viewport=d([w.drawingBufferWidth,w.drawingBufferHeight])),null!=E.close&&(D.close=E.close),null===E.positions&&(E.positions=[]),E.positions){var N,F;if(E.positions.x&&E.positions.y){var I=E.positions.x,P=E.positions.y;F=D.count=Math.max(I.length,P.length),N=new Float64Array(2*F);for(var j=0;j<F;j++)N[2*j]=I[j],N[2*j+1]=P[j]}else N=o(E.positions,"float64"),F=D.count=Math.floor(N.length/2);var V=D.bounds=x(N,2);if(D.fill){for(var Z=[],Y={},ee=0,re=0,X=0,K=D.count;re<K;re++){var ie=N[2*re],q=N[2*re+1];isNaN(ie)||isNaN(q)||null==ie||null==q?(ie=N[2*ee],q=N[2*ee+1],Y[re]=ee):ee=re,Z[X++]=ie,Z[X++]=q}if(E.splitNull){D.count-1 in Y||(Y[D.count]=D.count-1);var U=Object.keys(Y).map(Number).sort(function(Ft,en){return Ft-en}),W=[],ae=0,G=null!=D.hole?D.hole[0]:null;if(null!=G){var te=p(U,function(Ft){return Ft>=G});(U=U.slice(0,te)).push(G)}for(var ne=function(Ft){var en=Z.slice(2*ae,2*U[Ft]).concat(G?Z.slice(2*G):[]),Qt=(D.hole||[]).map(function(dn){return dn-G+(U[Ft]-ae)}),tn=a(en,Qt);tn=tn.map(function(dn){return dn+ae+(dn+ae<U[Ft]?0:G-U[Ft])}),W.push.apply(W,tn),ae=U[Ft]+1},le=0;le<U.length;le++)ne(le);for(var ue=0,pe=W.length;ue<pe;ue++)null!=Y[W[ue]]&&(W[ue]=Y[W[ue]]);D.triangles=W}else{for(var de=a(Z,D.hole||[]),_e=0,me=de.length;_e<me;_e++)null!=Y[de[_e]]&&(de[_e]=Y[de[_e]]);D.triangles=de}}var we=new Float64Array(N);l(we,2,V);var De=new Float64Array(2*F+6);D.close?N[0]===N[2*F-2]&&N[1]===N[2*F-1]?(De[0]=we[2*F-4],De[1]=we[2*F-3]):(De[0]=we[2*F-2],De[1]=we[2*F-1]):(De[0]=we[0],De[1]=we[1]),De.set(we,2),D.close?N[0]===N[2*F-2]&&N[1]===N[2*F-1]?(De[2*F+2]=we[2],De[2*F+3]=we[3],D.count-=1):(De[2*F+2]=we[0],De[2*F+3]=we[1],De[2*F+4]=we[2],De[2*F+5]=we[3]):(De[2*F+2]=we[2*F-2],De[2*F+3]=we[2*F-1],De[2*F+4]=we[2*F-2],De[2*F+5]=we[2*F-1]);var Le=v(De);D.positionBuffer(Le);var Ie=h(De,Le);D.positionFractBuffer(Ie)}if(E.range?D.range=E.range:D.range||(D.range=D.bounds),(E.range||E.positions)&&D.count){var je=D.bounds,Oe=D.range[2]-D.range[0],Pe=D.range[3]-D.range[1];D.scale=[(je[2]-je[0])/Oe,(je[3]-je[1])/Pe],D.translate=[-D.range[0]/Oe+je[0]/Oe||0,-D.range[1]/Pe+je[1]/Pe||0],D.scaleFract=h(D.scale),D.translateFract=h(D.translate)}if(E.dashes){var Re,Ue=0;if(!E.dashes||E.dashes.length<2)Ue=1,Re=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ue=0;for(var qe=0;qe<E.dashes.length;++qe)Ue+=E.dashes[qe];Re=new Uint8Array(Ue*f.dashMult);for(var Xe=0,lt=255,He=0;He<2;He++)for(var $e=0;$e<E.dashes.length;++$e){for(var et=0,nt=E.dashes[$e]*f.dashMult*.5;et<nt;++et)Re[Xe++]=lt;lt^=255}}D.dashLength=Ue,D.dashTexture({channels:1,data:Re,width:Re.length,height:1,mag:"linear",min:"linear"},0,0)}if(E.color){var ct=D.count,bt=E.color;bt||(bt="transparent");var kt=new Uint8Array(4*ct+4);if(Array.isArray(bt)&&"number"!=typeof bt[0]){for(var Bt=0;Bt<ct;Bt++){var Et=y(bt[Bt],"uint8");kt.set(Et,4*Bt)}kt.set(y(bt[0],"uint8"),4*ct)}else for(var ht=y(bt,"uint8"),at=0;at<ct+1;at++)kt.set(ht,4*at);D.colorBuffer({usage:"dynamic",type:"uint8",data:kt})}}else m.passes[L]=null}),g.length<this.passes.length){for(var c=g.length;c<this.passes.length;c++){var A=this.passes[c];A&&(A.colorBuffer.destroy(),A.positionBuffer.destroy(),A.dashTexture.destroy())}this.passes.length=g.length}for(var k=[],C=0;C<this.passes.length;C++)null!==this.passes[C]&&k.push(this.passes[C]);return this.passes=k,this}},f.prototype.destroy=function(){return this.passes.forEach(function(g){g.colorBuffer.destroy(),g.positionBuffer.destroy(),g.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313}],281:[function(b,oe,se){"use strict";function y(c,A){return function(k){if(Array.isArray(k))return k}(c)||function(k,C){var E=null==k?null:"undefined"!=typeof Symbol&&k[Symbol.iterator]||k["@@iterator"];if(null!=E){var L,D,N=[],F=!0,I=!1;try{for(E=E.call(k);!(F=(L=E.next()).done)&&(N.push(L.value),!C||N.length!==C);F=!0);}catch(P){I=!0,D=P}finally{try{F||null==E.return||E.return()}finally{if(I)throw D}}return N}}(c,A)||M(c,A)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(c){return function(A){if(Array.isArray(A))return _(A)}(c)||function(A){if("undefined"!=typeof Symbol&&null!=A[Symbol.iterator]||null!=A["@@iterator"])return Array.from(A)}(c)||M(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(c,A){if(c){if("string"==typeof c)return _(c,A);var k=Object.prototype.toString.call(c).slice(8,-1);return"Object"===k&&c.constructor&&(k=c.constructor.name),"Map"===k||"Set"===k?Array.from(c):"Arguments"===k||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?_(c,A):void 0}}function _(c,A){(null==A||A>c.length)&&(A=c.length);for(var k=0,C=new Array(A);k<A;k++)C[k]=c[k];return C}var e=b("color-normalize"),o=b("array-bounds"),a=b("color-id"),l=b("@plotly/point-cluster"),i=b("object-assign"),v=b("glslify"),h=b("pick-by-alias"),s=b("update-diff"),d=b("flatten-vertex-data"),p=b("is-iexplorer"),f=b("to-float32"),g=b("parse-rect"),m=u;function u(c,A){var k=this;if(!(this instanceof u))return new u(c,A);"function"==typeof c?(A||(A={}),A.regl=c):(A=c,c=null),A&&A.length&&(A.positions=A);var C,E=(c=A.regl)._gl,L=[];this.tooManyColors=p,C=c.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),i(this,{regl:c,gl:E,groups:[],markerCache:[null],markerTextures:[null],palette:L,paletteIds:{},paletteTexture:C,maxColors:255,maxSize:100,canvas:E.canvas}),this.update(A);var D={uniforms:{constPointSize:!!A.constPointSize,opacity:c.prop("opacity"),paletteSize:function(I,P){return[k.tooManyColors?0:255,C.height]},pixelRatio:c.context("pixelRatio"),scale:c.prop("scale"),scaleFract:c.prop("scaleFract"),translate:c.prop("translate"),translateFract:c.prop("translateFract"),markerTexture:c.prop("markerTexture"),paletteTexture:C},attributes:{x:function(I,P){return P.xAttr||{buffer:P.positionBuffer,stride:8,offset:0}},y:function(I,P){return P.yAttr||{buffer:P.positionBuffer,stride:8,offset:4}},xFract:function(I,P){return P.xAttr?{constant:[0,0]}:{buffer:P.positionFractBuffer,stride:8,offset:0}},yFract:function(I,P){return P.yAttr?{constant:[0,0]}:{buffer:P.positionFractBuffer,stride:8,offset:4}},size:function(I,P){return P.size.length?{buffer:P.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*P.size/k.maxSize)]}},borderSize:function(I,P){return P.borderSize.length?{buffer:P.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*P.borderSize/k.maxSize)]}},colorId:function(I,P){return P.color.length?{buffer:P.colorBuffer,stride:k.tooManyColors?8:4,offset:0}:{constant:k.tooManyColors?L.slice(4*P.color,4*P.color+4):[P.color]}},borderColorId:function(I,P){return P.borderColor.length?{buffer:P.colorBuffer,stride:k.tooManyColors?8:4,offset:k.tooManyColors?4:2}:{constant:k.tooManyColors?L.slice(4*P.borderColor,4*P.borderColor+4):[P.borderColor]}},isActive:function(I,P){return!0===P.activation?{constant:[1]}:P.activation?P.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:c.prop("viewport")},viewport:c.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:c.prop("elements"),count:c.prop("count"),offset:c.prop("offset"),primitive:"points"},N=i({},D);N.frag=v(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),N.vert=v(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=c(N);var F=i({},D);F.frag=v(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),F.vert=v(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),p&&(F.frag=F.frag.replace("smoothstep","smoothStep"),N.frag=N.frag.replace("smoothstep","smoothStep")),this.drawCircle=c(F)}u.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},u.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},u.prototype.draw=function(){for(var c=this,A=arguments.length,k=new Array(A),C=0;C<A;C++)k[C]=arguments[C];var E=this.groups;if(1===k.length&&Array.isArray(k[0])&&(null===k[0][0]||Array.isArray(k[0][0]))&&(k=k[0]),this.regl._refresh(),k.length)for(var L=0;L<k.length;L++)this.drawItem(L,k[L]);else E.forEach(function(D,N){c.drawItem(N)});return this},u.prototype.drawItem=function(c,A){var k=this.groups,C=k[c];if("number"==typeof A&&(c=A,C=k[A],A=null),C&&C.count&&C.opacity){C.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,C,A));for(var E=[],L=1;L<C.activation.length;L++)C.activation[L]&&(!0===C.activation[L]||C.activation[L].data.length)&&E.push.apply(E,x(this.getMarkerDrawOptions(L,C,A)));E.length&&this.drawMarker(E)}},u.prototype.getMarkerDrawOptions=function(c,A,k){var C=A.range,E=A.tree,L=A.viewport,D=A.activation,N=A.selectionBuffer,F=A.count;if(!E)return k?[i({},A,{markerTexture:this.markerTextures[c],activation:D[c],count:k.length,elements:k,offset:0})]:[i({},A,{markerTexture:this.markerTextures[c],activation:D[c],offset:0})];var I=[],P=E.range(C,{lod:!0,px:[(C[2]-C[0])/L.width,(C[3]-C[1])/L.height]});if(k){for(var j=D[c].data,V=new Uint8Array(F),Z=0;Z<k.length;Z++){var Y=k[Z];V[Y]=j?j[Y]:1}N.subdata(V)}for(var ee=P.length;ee--;){var re=y(P[ee],2),X=re[0];I.push(i({},A,{markerTexture:this.markerTextures[c],activation:k?N:D[c],offset:X,count:re[1]-X}))}return I},u.prototype.update=function(){for(var c=this,A=arguments.length,k=new Array(A),C=0;C<A;C++)k[C]=arguments[C];if(k.length){1===k.length&&Array.isArray(k[0])&&(k=k[0]);var E=this.groups,L=this.gl,D=this.regl,N=this.maxSize,F=this.maxColors,I=this.palette;this.groups=E=k.map(function(P,j){var V=E[j];if(void 0===P)return V;null===P?P={positions:null}:"function"==typeof P?P={ondraw:P}:"number"==typeof P[0]&&(P={positions:P}),null===(P=h(P,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(P.positions=[]),null!=P.tooManyColors&&(c.tooManyColors=P.tooManyColors),V||(E[j]=V={id:j,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:D.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},P=i({},u.defaults,P)),P.positions&&!("marker"in P)&&(P.marker=V.marker,delete V.marker),P.marker&&!("positions"in P)&&(P.positions=V.positions,delete V.positions);var Z=0,Y=0;if(s(V,P,[{snap:!0,size:function(me,we){return null==me&&(me=u.defaults.size),Z+=me&&me.length?1:0,me},borderSize:function(me,we){return null==me&&(me=u.defaults.borderSize),Z+=me&&me.length?1:0,me},opacity:parseFloat,color:function(me,we){return null==me&&(me=u.defaults.color),me=c.updateColor(me),Y++,me},borderColor:function(me,we){return null==me&&(me=u.defaults.borderColor),me=c.updateColor(me),Y++,me},bounds:function(me,we,De){return"range"in De||(De.range=null),me},positions:function(me,we,De){var Le=we.snap,Ie=we.positionBuffer,je=we.positionFractBuffer,ye=we.selectionBuffer;if(me.x||me.y)return we.xAttr=me.x.length?{buffer:D.buffer(me.x),offset:0,stride:4,count:me.x.length}:{buffer:me.x.buffer,offset:4*me.x.offset||0,stride:4*(me.x.stride||1),count:me.x.count},we.yAttr=me.y.length?{buffer:D.buffer(me.y),offset:0,stride:4,count:me.y.length}:{buffer:me.y.buffer,offset:4*me.y.offset||0,stride:4*(me.y.stride||1),count:me.y.count},we.count=Math.max(we.xAttr.count,we.yAttr.count),me;me=d(me,"float64");var Me=we.count=Math.floor(me.length/2),Oe=we.bounds=Me?o(me,2):null;if(De.range||we.range||(delete we.range,De.range=Oe),De.marker||we.marker||(delete we.marker,De.marker=null),Le&&(!0===Le||Me>Le)?we.tree=l(me,{bounds:Oe}):Le&&Le.length&&(we.tree=Le),we.tree){var Pe={primitive:"points",usage:"static",data:we.tree,type:"uint32"};we.elements?we.elements(Pe):we.elements=D.elements(Pe)}var Re=f.float32(me);return Ie({data:Re,usage:"dynamic"}),je({data:f.fract32(me,Re),usage:"dynamic"}),ye({data:new Uint8Array(Me),type:"uint8",usage:"stream"}),me}},{marker:function(me,we,De){var Le=we.activation;if(Le.forEach(function(Re){return Re&&Re.destroy&&Re.destroy()}),Le.length=0,me&&"number"!=typeof me[0]){for(var Ie=[],je=0,ye=Math.min(me.length,we.count);je<ye;je++){var Me=c.addMarker(me[je]);Ie[Me]||(Ie[Me]=new Uint8Array(we.count)),Ie[Me][je]=1}for(var Oe=0;Oe<Ie.length;Oe++)if(Ie[Oe]){var Pe={data:Ie[Oe],type:"uint8",usage:"static"};Le[Oe]?Le[Oe](Pe):Le[Oe]=D.buffer(Pe),Le[Oe].data=Ie[Oe]}}else Le[c.addMarker(me)]=!0;return me},range:function(me,we,De){var Le=we.bounds;if(Le)return me||(me=Le),we.scale=[1/(me[2]-me[0]),1/(me[3]-me[1])],we.translate=[-me[0],-me[1]],we.scaleFract=f.fract(we.scale),we.translateFract=f.fract(we.translate),me},viewport:function(me){return g(me||[L.drawingBufferWidth,L.drawingBufferHeight])}}]),Z){var re=V.count,X=V.size,K=V.borderSize,ie=V.sizeBuffer,q=new Uint8Array(2*re);if(X.length||K.length)for(var U=0;U<re;U++)q[2*U]=Math.round(255*(null==X[U]?X:X[U])/N),q[2*U+1]=Math.round(255*(null==K[U]?K:K[U])/N);ie({data:q,usage:"dynamic"})}if(Y){var W,G=V.count,te=V.color,ne=V.borderColor,le=V.colorBuffer;if(c.tooManyColors){if(te.length||ne.length){W=new Uint8Array(8*G);for(var ue=0;ue<G;ue++){var pe=te[ue];W[8*ue]=I[4*pe],W[8*ue+1]=I[4*pe+1],W[8*ue+2]=I[4*pe+2],W[8*ue+3]=I[4*pe+3];var de=ne[ue];W[8*ue+4]=I[4*de],W[8*ue+5]=I[4*de+1],W[8*ue+6]=I[4*de+2],W[8*ue+7]=I[4*de+3]}}}else if(te.length||ne.length){W=new Uint8Array(4*G+2);for(var _e=0;_e<G;_e++)null!=te[_e]&&(W[4*_e]=te[_e]%F,W[4*_e+1]=Math.floor(te[_e]/F)),null!=ne[_e]&&(W[4*_e+2]=ne[_e]%F,W[4*_e+3]=Math.floor(ne[_e]/F))}le({data:W||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return V})}},u.prototype.addMarker=function(c){var A,k=this.markerTextures,C=this.regl,E=this.markerCache,L=null==c?0:E.indexOf(c);if(L>=0)return L;if(c instanceof Uint8Array||c instanceof Uint8ClampedArray)A=c;else{A=new Uint8Array(c.length);for(var D=0,N=c.length;D<N;D++)A[D]=255*c[D]}var F=Math.floor(Math.sqrt(A.length));return L=k.length,E.push(c),k.push(C.texture({channels:1,data:A,radius:F,mag:"linear",min:"linear"})),L},u.prototype.updateColor=function(c){var A=this.paletteIds,k=this.palette,C=this.maxColors;Array.isArray(c)||(c=[c]);var E=[];if("number"==typeof c[0]){var L=[];if(Array.isArray(c))for(var D=0;D<c.length;D+=4)L.push(c.slice(D,D+4));else for(var N=0;N<c.length;N+=4)L.push(c.subarray(N,N+4));c=L}for(var F=0;F<c.length;F++){var I=c[F];I=e(I,"uint8");var P=a(I,!1);if(null==A[P]){var j=k.length;A[P]=Math.floor(j/4),k[j]=I[0],k[j+1]=I[1],k[j+2]=I[2],k[j+3]=I[3]}E[F]=A[P]}return!this.tooManyColors&&k.length>4*C&&(this.tooManyColors=!0),this.updatePalette(k),1===E.length?E[0]:E},u.prototype.updatePalette=function(c){if(!this.tooManyColors){var A=this.maxColors,k=this.paletteTexture,C=Math.ceil(.25*c.length/A);if(C>1)for(var E=.25*(c=c.slice()).length%A;E<C*A;E++)c.push(0,0,0,0);k.height<C&&k.resize(A,C),k.subimage({width:Math.min(.25*c.length,A),height:C,data:c},0,0)}},u.prototype.destroy=function(){return this.groups.forEach(function(c){c.sizeBuffer.destroy(),c.positionBuffer.destroy(),c.positionFractBuffer.destroy(),c.colorBuffer.destroy(),c.activation.forEach(function(A){return A&&A.destroy&&A.destroy()}),c.selectionBuffer.destroy(),c.elements&&c.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(c){return c&&c.destroy&&c.destroy()}),this};var w=b("object-assign");oe.exports=function(c,A){var k=new m(c,A),C=k.render.bind(k);return w(C,{render:C,update:k.update.bind(k),draw:k.draw.bind(k),destroy:k.destroy.bind(k),regl:k.regl,gl:k.gl,canvas:k.gl.canvas,groups:k.groups,markers:k.markerCache,palette:k.palette}),C}},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313,"update-diff":329}],282:[function(b,oe,se){"use strict";var y=b("regl-scatter2d"),x=b("pick-by-alias"),M=b("array-bounds"),_=b("raf"),e=b("array-range"),o=b("parse-rect"),a=b("flatten-vertex-data");function l(s,d){if(!(this instanceof l))return new l(s,d);this.traces=[],this.passes={},this.regl=s,this.scatter=y(s),this.canvas=this.scatter.canvas}function i(s,d,p){return(null!=s.id?s.id:s)<<16|(255&d)<<8|255&p}function v(s,d,p){var f,g,m,u,w=s[d],c=s[p];return w.length>2?(f=w[1],g=w[3]):w.length?(f=w[0],g=w[1]):(f=w.y,g=w.y+w.height),c.length>2?(m=c[0],u=c[2]):c.length?(m=c[0],u=c[1]):(m=c.x,u=c.x+c.width),[m,f,u,g]}function h(s){if("number"==typeof s)return[s,s,s,s];if(2===s.length)return[s[0],s[1],s[0],s[1]];var d=o(s);return[d.x,d.y,d.x+d.width,d.y+d.height]}oe.exports=l,l.prototype.render=function(){for(var s,d=this,p=[],f=arguments.length;f--;)p[f]=arguments[f];return p.length&&(s=this).update.apply(s,p),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=_(function(){d.draw(),d.dirty=!0,d.planned=null})):(this.draw(),this.dirty=!0,_(function(){d.dirty=!1})),this)},l.prototype.update=function(){for(var s,d=[],p=arguments.length;p--;)d[p]=arguments[p];if(d.length){for(var f=0;f<d.length;f++)this.updateItem(f,d[f]);this.traces=this.traces.filter(Boolean);for(var g=[],m=0,u=0;u<this.traces.length;u++){for(var w=this.traces[u],c=this.traces[u].passes,A=0;A<c.length;A++)g.push(this.passes[c[A]]);w.passOffset=m,m+=w.passes.length}return(s=this.scatter).update.apply(s,g),this}},l.prototype.updateItem=function(s,d){var p=this.regl;if(null===d)return this.traces[s]=null,this;if(!d)return this;var f,g=x(d,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),m=this.traces[s]||(this.traces[s]={id:s,buffer:p.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:o([p._gl.drawingBufferWidth,p._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=g.color&&(m.color=g.color),null!=g.size&&(m.size=g.size),null!=g.marker&&(m.marker=g.marker),null!=g.borderColor&&(m.borderColor=g.borderColor),null!=g.borderSize&&(m.borderSize=g.borderSize),null!=g.opacity&&(m.opacity=g.opacity),g.viewport&&(m.viewport=o(g.viewport)),null!=g.diagonal&&(m.diagonal=g.diagonal),null!=g.upper&&(m.upper=g.upper),null!=g.lower&&(m.lower=g.lower),g.data){m.buffer(a(g.data)),m.columns=g.data.length,m.count=g.data[0].length,m.bounds=[];for(var u=0;u<m.columns;u++)m.bounds[u]=M(g.data[u],1)}g.range&&(m.range=g.range,f=m.range&&"number"!=typeof m.range[0]),g.domain&&(m.domain=g.domain);var w=!1;null!=g.padding&&(Array.isArray(g.padding)&&g.padding.length===m.columns&&"number"==typeof g.padding[g.padding.length-1]?(m.padding=g.padding.map(h),w=!0):m.padding=h(g.padding));var c=m.columns,A=m.count,k=m.viewport.width,C=m.viewport.height,E=m.viewport.x,L=m.viewport.y,D=k/c,N=C/c;m.passes=[];for(var F=0;F<c;F++)for(var I=0;I<c;I++)if((m.diagonal||I!==F)&&(m.upper||!(F>I))&&(m.lower||!(F<I))){var P=i(m.id,F,I),j=this.passes[P]||(this.passes[P]={});if(g.data&&(j.positions=g.transpose?{x:{buffer:m.buffer,offset:I,count:A,stride:c},y:{buffer:m.buffer,offset:F,count:A,stride:c}}:{x:{buffer:m.buffer,offset:I*A,count:A},y:{buffer:m.buffer,offset:F*A,count:A}},j.bounds=v(m.bounds,F,I)),g.domain||g.viewport||g.data){var V=w?v(m.padding,F,I):m.padding;if(m.domain){var Z=v(m.domain,F,I);j.viewport=[E+Z[0]*k+V[0],L+Z[1]*C+V[1],E+Z[2]*k-V[2],L+Z[3]*C-V[3]]}else j.viewport=[E+I*D+D*V[0],L+F*N+N*V[1],E+(I+1)*D-D*V[2],L+(F+1)*N-N*V[3]]}g.color&&(j.color=m.color),g.size&&(j.size=m.size),g.marker&&(j.marker=m.marker),g.borderSize&&(j.borderSize=m.borderSize),g.borderColor&&(j.borderColor=m.borderColor),g.opacity&&(j.opacity=m.opacity),g.range&&(j.range=f?v(m.range,F,I):m.range||j.bounds),m.passes.push(P)}return this},l.prototype.draw=function(){for(var s,d=[],p=arguments.length;p--;)d[p]=arguments[p];if(d.length){for(var f=[],g=0;g<d.length;g++)if("number"==typeof d[g]){var m=this.traces[d[g]],w=m.passOffset;f.push.apply(f,e(w,w+m.passes.length))}else if(d[g].length){var c=d[g],A=this.traces[g],k=A.passes,C=A.passOffset;k=k.map(function(E,L){f[C+L]=c})}(s=this.scatter).draw.apply(s,f)}else this.scatter.draw();return this},l.prototype.destroy=function(){return this.traces.forEach(function(s){s.buffer&&s.buffer.destroy&&s.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:278,"regl-scatter2d":281}],283:[function(b,oe,se){var x;x=function(){function y(Ce,Ve){this.id=te++,this.type=Ce,this.data=Ve}function x(Ce){return"["+function Ve(Ge){if(0===Ge.length)return[];var Qe=Ge.charAt(0),ot=Ge.charAt(Ge.length-1);if(1<Ge.length&&Qe===ot&&('"'===Qe||"'"===Qe))return['"'+Ge.substr(1,Ge.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(Qe=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ge))return Ve(Ge.substr(0,Qe.index)).concat(Ve(Qe[1])).concat(Ve(Ge.substr(Qe.index+Qe[0].length)));if(1===(Qe=Ge.split(".")).length)return['"'+Ge.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ge=[],ot=0;ot<Qe.length;++ot)Ge=Ge.concat(Ve(Qe[ot]));return Ge}(Ce).join("][")+"]"}function M(Ce){return"string"==typeof Ce?Ce.split():Ce}function _(Ce){return"string"==typeof Ce?document.querySelector(Ce):Ce}function o(Ce,Ve){for(var Ge=Array(Ce),Qe=0;Qe<Ce;++Qe)Ge[Qe]=Ve(Qe);return Ge}function a(Ce){var Ve,Ge;return Ve=(65535<Ce)<<4,Ve|=Ge=(255<(Ce>>>=Ve))<<3,(Ve|=Ge=(15<(Ce>>>=Ge))<<2)|(Ge=(3<(Ce>>>=Ge))<<1)|Ce>>>Ge>>1}function l(){function Ce(Qe){e:{for(var ot=16;268435456>=ot;ot*=16)if(Qe<=ot){Qe=ot;break e}Qe=0}return 0<(ot=Ge[a(Qe)>>2]).length?ot.pop():new ArrayBuffer(Qe)}function Ve(Qe){Ge[a(Qe.byteLength)>>2].push(Qe)}var Ge=o(8,function(){return[]});return{alloc:Ce,free:Ve,allocType:function(Qe,ot){var it=null;switch(Qe){case 5120:it=new Int8Array(Ce(ot),0,ot);break;case 5121:it=new Uint8Array(Ce(ot),0,ot);break;case 5122:it=new Int16Array(Ce(2*ot),0,ot);break;case 5123:it=new Uint16Array(Ce(2*ot),0,ot);break;case 5124:it=new Int32Array(Ce(4*ot),0,ot);break;case 5125:it=new Uint32Array(Ce(4*ot),0,ot);break;case 5126:it=new Float32Array(Ce(4*ot),0,ot);break;default:return null}return it.length!==ot?it.subarray(0,ot):it},freeType:function(Qe){Ve(Qe.buffer)}}}function i(Ce){return!!Ce&&"object"==typeof Ce&&Array.isArray(Ce.shape)&&Array.isArray(Ce.stride)&&"number"==typeof Ce.offset&&Ce.shape.length===Ce.stride.length&&(Array.isArray(Ce.data)||_e(Ce.data))}function v(Ce,Ve,Ge,Qe,ot,it){for(var mt=0;mt<Ve;++mt)for(var xt=Ce[mt],Vt=0;Vt<Ge;++Vt)for(var $t=xt[Vt],pt=0;pt<Qe;++pt)ot[it++]=$t[pt]}function h(Ce){return 0|De[Object.prototype.toString.call(Ce)]}function s(Ce,Ve){for(var Ge=0;Ge<Ve.length;++Ge)Ce[Ge]=Ve[Ge]}function d(Ce,Ve,Ge,Qe,ot,it,mt){for(var xt=0,Vt=0;Vt<Ge;++Vt)for(var $t=0;$t<Qe;++$t)Ce[xt++]=Ve[ot*Vt+it*$t+mt]}function g(Ce){for(var Ve=pe.allocType(5123,Ce.length),Ge=0;Ge<Ce.length;++Ge)if(isNaN(Ce[Ge]))Ve[Ge]=65535;else if(1/0===Ce[Ge])Ve[Ge]=31744;else if(-1/0===Ce[Ge])Ve[Ge]=64512;else{Pe[0]=Ce[Ge];var Qe=(it=Re[0])>>>31<<15,ot=(it<<1>>>24)-127,it=it>>13&1023;Ve[Ge]=-24>ot?Qe:-14>ot?Qe+(it+1024>>-14-ot):15<ot?Qe+31744:Qe+(ot+15<<10)+it}return Ve}function m(Ce){return Array.isArray(Ce)||_e(Ce)}function u(Ce){return"[object "+Ce+"]"}function w(Ce){return Array.isArray(Ce)&&(0===Ce.length||"number"==typeof Ce[0])}function c(Ce){return!(!Array.isArray(Ce)||0===Ce.length||!m(Ce[0]))}function A(Ce){return Object.prototype.toString.call(Ce)}function k(Ce){if(!Ce)return!1;var Ve=A(Ce);return 0<=bt.indexOf(Ve)||w(Ce)||c(Ce)||i(Ce)}function C(Ce,Ve){36193===Ce.type?(Ce.data=g(Ve),pe.freeType(Ve)):Ce.data=Ve}function E(Ce,Ve,Ge,Qe,ot,it){if(Ce=void 0!==Bt[Ce]?Bt[Ce]:Xe[Ce]*kt[Ve],it&&(Ce*=6),ot){for(Qe=0;1<=Ge;)Qe+=Ce*Ge*Ge,Ge/=2;return Qe}return Ce*Ge*Qe}function N(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function j(Ce,Ve){return Ce>>>Ve|Ce<<32-Ve}function V(Ce,Ve){var Ge=(65535&Ce)+(65535&Ve);return(Ce>>16)+(Ve>>16)+(Ge>>16)<<16|65535&Ge}function Z(Ce){return Array.prototype.slice.call(Ce)}function Y(Ce){return Z(Ce).join("")}function re(Ce){return Array.isArray(Ce)||_e(Ce)||i(Ce)}function X(Ce){return Ce.sort(function(Ve,Ge){return"viewport"===Ve?-1:"viewport"===Ge?1:Ve<Ge?-1:1})}function K(Ce,Ve,Ge,Qe){this.thisDep=Ce,this.contextDep=Ve,this.propDep=Ge,this.append=Qe}function ie(Ce){return Ce&&!(Ce.thisDep||Ce.contextDep||Ce.propDep)}function q(Ce){return new K(!1,!1,!1,Ce)}function U(Ce,Ve){var Ge=Ce.type;if(0===Ge)return new K(!0,1<=(Ge=Ce.data.length),2<=Ge,Ve);if(4===Ge)return new K((Ge=Ce.data).thisDep,Ge.contextDep,Ge.propDep,Ve);if(5===Ge)return new K(!1,!1,!1,Ve);if(6===Ge){for(var Qe=Ge=!1,ot=!1,it=0;it<Ce.data.length;++it){var mt=Ce.data[it];1===mt.type?ot=!0:2===mt.type?Qe=!0:3===mt.type?Ge=!0:0===mt.type?(Ge=!0,1<=(mt=mt.data)&&(Qe=!0),2<=mt&&(ot=!0)):4===mt.type&&(Ge=Ge||mt.data.thisDep,Qe=Qe||mt.data.contextDep,ot=ot||mt.data.propDep)}return new K(Ge,Qe,ot,Ve)}return new K(3===Ge,2===Ge,1===Ge,Ve)}function W(Ce,Ve,Ge,Qe,ot,it,mt,xt,Vt,$t,pt,At,Xt,Ct,Pt,Be){function tt(Ut){return Ut.replace(".","_")}function dt(Ut,vn,Tn){var Qn=tt(Ut);ui.push(Ut),Qr[Qn]=cr[Qn]=!!Tn,Nr[Qn]=vn}function Dt(Ut,vn,Tn){var Qn=tt(Ut);ui.push(Ut),Array.isArray(Tn)?(cr[Qn]=Tn.slice(),Qr[Qn]=Tn.slice()):cr[Qn]=Qr[Qn]=Tn,Hr[Qn]=vn}function Nt(){var Ut=function(Ce){function Ve(){var pt=[],At=[];return G(function(){pt.push.apply(pt,Z(arguments))},{def:function(){var Xt="v"+ot++;return At.push(Xt),0<arguments.length&&(pt.push(Xt,"="),pt.push.apply(pt,Z(arguments)),pt.push(";")),Xt},toString:function(){return Y([0<At.length?"var "+At.join(",")+";":"",Y(pt)])}})}function Ge(){function pt(Be,tt){Xt(Be,tt,"=",At.def(Be,tt),";")}var At=Ve(),Xt=Ve(),Ct=At.toString,Pt=Xt.toString;return G(function(){At.apply(At,Z(arguments))},{def:At.def,entry:At,exit:Xt,save:pt,set:function(Be,tt,dt){pt(Be,tt),At(Be,tt,"=",dt,";")},toString:function(){return Ct()+Pt()}})}var Qe=Ce&&Ce.cache,ot=0,it=[],mt=[],xt=[],Vt=Ve(),$t={};return{global:Vt,link:function(pt,At){var Xt=At&&At.stable;if(!Xt)for(var Ct=0;Ct<mt.length;++Ct)if(mt[Ct]===pt&&!xt[Ct])return it[Ct];return Ct="g"+ot++,it.push(Ct),mt.push(pt),xt.push(Xt),Ct},block:Ve,proc:function(pt,At){function Xt(){var tt="a"+Ct.length;return Ct.push(tt),tt}var Ct=[];At=At||0;for(var Pt=0;Pt<At;++Pt)Xt();var Be=(Pt=Ge()).toString;return $t[pt]=G(Pt,{arg:Xt,toString:function(){return Y(["function(",Ct.join(),"){",Be(),"}"])}})},scope:Ge,cond:function(){var pt=Y(arguments),At=Ge(),Xt=Ge(),Ct=At.toString,Pt=Xt.toString;return G(At,{then:function(){return At.apply(At,Z(arguments)),this},else:function(){return Xt.apply(Xt,Z(arguments)),this},toString:function(){var Be=Pt();return Be&&(Be="else{"+Be+"}"),Y(["if(",pt,"){",Ct(),"}",Be])}})},compile:function(){var pt=['"use strict";',Vt,"return {"];Object.keys($t).forEach(function(Ct){pt.push('"',Ct,'":',$t[Ct].toString(),",")}),pt.push("}");var At,Xt=Y(pt).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Qe&&(At=function(Ct){for(var Pt,Be="",tt=0;tt<Ct.length;tt++)Pt=Ct.charCodeAt(tt),Be+="0123456789abcdef".charAt(Pt>>>4&15)+"0123456789abcdef".charAt(15&Pt);return Be}(function(Ct){for(var Pt=Array(Ct.length>>2),Be=0;Be<Pt.length;Be++)Pt[Be]=0;for(Be=0;Be<8*Ct.length;Be+=8)Pt[Be>>5]|=(255&Ct.charCodeAt(Be/8))<<24-Be%32;var tt,dt,Dt,Nt,Yt,fn,nn,In,Dn,kn,rn,pn=8*Ct.length;for(Ct=[1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225],Be=Array(64),Pt[pn>>5]|=128<<24-pn%32,Pt[15+(pn+64>>9<<4)]=pn,In=0;In<Pt.length;In+=16){for(pn=Ct[0],tt=Ct[1],dt=Ct[2],Dt=Ct[3],Nt=Ct[4],Yt=Ct[5],fn=Ct[6],nn=Ct[7],Dn=0;64>Dn;Dn++){var gn;16>Dn?Be[Dn]=Pt[Dn+In]:(kn=Dn,rn=V(rn=j(rn=Be[Dn-2],17)^j(rn,19)^rn>>>10,Be[Dn-7]),gn=j(gn=Be[Dn-15],7)^j(gn,18)^gn>>>3,Be[kn]=V(V(rn,gn),Be[Dn-16])),kn=V(V(V(V(nn,kn=j(kn=Nt,6)^j(kn,11)^j(kn,25)),Nt&Yt^~Nt&fn),en[Dn]),Be[Dn]),rn=V(nn=j(nn=pn,2)^j(nn,13)^j(nn,22),pn&tt^pn&dt^tt&dt),nn=fn,fn=Yt,Yt=Nt,Nt=V(Dt,kn),Dt=dt,dt=tt,tt=pn,pn=V(kn,rn)}Ct[0]=V(pn,Ct[0]),Ct[1]=V(tt,Ct[1]),Ct[2]=V(dt,Ct[2]),Ct[3]=V(Dt,Ct[3]),Ct[4]=V(Nt,Ct[4]),Ct[5]=V(Yt,Ct[5]),Ct[6]=V(fn,Ct[6]),Ct[7]=V(nn,Ct[7])}for(Pt="",Be=0;Be<32*Ct.length;Be+=8)Pt+=String.fromCharCode(Ct[Be>>5]>>>24-Be%32&255);return Pt}(function(Ct){for(var Pt,Be,tt="",dt=-1;++dt<Ct.length;)Pt=Ct.charCodeAt(dt),Be=dt+1<Ct.length?Ct.charCodeAt(dt+1):0,55296<=Pt&&56319>=Pt&&56320<=Be&&57343>=Be&&(Pt=65536+((1023&Pt)<<10)+(1023&Be),dt++),127>=Pt?tt+=String.fromCharCode(Pt):2047>=Pt?tt+=String.fromCharCode(192|Pt>>>6&31,128|63&Pt):65535>=Pt?tt+=String.fromCharCode(224|Pt>>>12&15,128|Pt>>>6&63,128|63&Pt):2097151>=Pt&&(tt+=String.fromCharCode(240|Pt>>>18&7,128|Pt>>>12&63,128|Pt>>>6&63,128|63&Pt));return tt}(Xt))),Qe[At])?Qe[At].apply(null,mt):(Xt=Function.apply(null,it.concat(Xt)),Qe&&(Qe[At]=Xt),Xt.apply(null,mt))}}}({cache:Pt}),vn=Ut.link,Tn=Ut.global;Ut.id=er++,Ut.batchId="0";var Qn=vn(wr),Zn=Ut.shared={props:"a0"};Object.keys(wr).forEach(function(zn){Zn[zn]=Tn.def(Qn,".",zn)});var $n=Ut.next={},Hn=Ut.current={};Object.keys(Hr).forEach(function(zn){Array.isArray(cr[zn])&&($n[zn]=Tn.def(Zn.next,".",zn),Hn[zn]=Tn.def(Zn.current,".",zn))});var Rn=Ut.constants={};Object.keys(un).forEach(function(zn){Rn[zn]=Tn.def(JSON.stringify(un[zn]))}),Ut.invoke=function(zn,Yn){switch(Yn.type){case 0:var nr=["this",Zn.context,Zn.props,Ut.batchId];return zn.def(vn(Yn.data),".call(",nr.slice(0,Math.max(Yn.data.length+1,4)),")");case 1:return zn.def(Zn.props,Yn.data);case 2:return zn.def(Zn.context,Yn.data);case 3:return zn.def("this",Yn.data);case 4:return Yn.data.append(Ut,zn),Yn.data.ref;case 5:return Yn.data.toString();case 6:return Yn.data.map(function(hr){return Ut.invoke(zn,hr)})}},Ut.attribCache={};var Fn={};return Ut.scopeAttrib=function(zn){if((zn=Ve.id(zn))in Fn)return Fn[zn];var Yn=$t.scope[zn];return Yn||(Yn=$t.scope[zn]=new Jr),Fn[zn]=vn(Yn)},Ut}function Dn(Ut,vn,Tn,Qn,Zn){function $n(jr){var Er=Rn[jr];Er&&(zn[jr]=Er)}var jr,Yr,ei,xr,Hn=function(jr,Er){if("string"==typeof(Yr=jr.static).frag&&"string"==typeof Yr.vert){if(0<Object.keys(Er.dynamic).length)return null;var Yr=Er.static,ei=Object.keys(Yr);if(0<ei.length&&"number"==typeof Yr[ei[0]]){for(var xr=[],pi=0;pi<ei.length;++pi)xr.push([0|Yr[ei[pi]],ei[pi]]);return xr}}return null}(Ut,vn),Rn=function(jr,Er,Yr){function ei($i){if($i in xr){var Wr=xr[$i];$i=!0;var xi,ki,oa=0|Wr.x,hi=0|Wr.y;return"width"in Wr?xi=0|Wr.width:$i=!1,"height"in Wr?ki=0|Wr.height:$i=!1,new K(!$i&&Er&&Er.thisDep,!$i&&Er&&Er.contextDep,!$i&&Er&&Er.propDep,function(Ea,ha){var Aa=Ea.shared.context,qa=xi;"width"in Wr||(qa=ha.def(Aa,".","framebufferWidth","-",oa));var da=ki;return"height"in Wr||(da=ha.def(Aa,".","framebufferHeight","-",hi)),[oa,hi,qa,da]})}if($i in pi){var Xi=pi[$i];return $i=U(Xi,function(Ea,ha){var Aa=Ea.invoke(ha,Xi),qa=Ea.shared.context,da=ha.def(Aa,".x|0"),za=ha.def(Aa,".y|0");return[da,za,ha.def('"width" in ',Aa,"?",Aa,".width|0:","(",qa,".","framebufferWidth","-",da,")"),Aa=ha.def('"height" in ',Aa,"?",Aa,".height|0:","(",qa,".","framebufferHeight","-",za,")")]}),Er&&($i.thisDep=$i.thisDep||Er.thisDep,$i.contextDep=$i.contextDep||Er.contextDep,$i.propDep=$i.propDep||Er.propDep),$i}return Er?new K(Er.thisDep,Er.contextDep,Er.propDep,function(Ea,ha){var Aa=Ea.shared.context;return[0,0,ha.def(Aa,".","framebufferWidth"),ha.def(Aa,".","framebufferHeight")]}):null}var xr=jr.static,pi=jr.dynamic;if(jr=ei("viewport")){var Ui=jr;jr=new K(jr.thisDep,jr.contextDep,jr.propDep,function($i,Wr){var xi=Ui.append($i,Wr),ki=$i.shared.context;return Wr.set(ki,".viewportWidth",xi[2]),Wr.set(ki,".viewportHeight",xi[3]),xi})}return{viewport:jr,scissor_box:ei("scissor.box")}}(Ut,nr=function(Ut,vn){var Tn=Ut.static,Qn=Ut.dynamic;if("framebuffer"in Tn){var Zn=Tn.framebuffer;return Zn?(Zn=xt.getFramebuffer(Zn),q(function(Hn,Rn){var Fn=Hn.link(Zn),zn=Hn.shared;return Rn.set(zn.framebuffer,".next",Fn),Rn.set(zn=zn.context,".framebufferWidth",Fn+".width"),Rn.set(zn,".framebufferHeight",Fn+".height"),Fn})):q(function(Hn,Rn){var Fn=Hn.shared;return Rn.set(Fn.framebuffer,".next","null"),Rn.set(Fn=Fn.context,".framebufferWidth",Fn+".drawingBufferWidth"),Rn.set(Fn,".framebufferHeight",Fn+".drawingBufferHeight"),"null"})}if("framebuffer"in Qn){var $n=Qn.framebuffer;return U($n,function(Hn,Rn){var Fn=Hn.invoke(Rn,$n),zn=Hn.shared,Yn=zn.framebuffer;return Fn=Rn.def(Yn,".getFramebuffer(",Fn,")"),Rn.set(Yn,".next",Fn),Rn.set(zn=zn.context,".framebufferWidth",Fn+"?"+Fn+".width:"+zn+".drawingBufferWidth"),Rn.set(zn,".framebufferHeight",Fn+"?"+Fn+".height:"+zn+".drawingBufferHeight"),Fn})}return null}(Ut)),Fn=function(Ut,vn){function Tn(Tr,jr){if(Tr in Qn){var Er=0|Qn[Tr];return jr?$n.offset=Er:$n.instances=Er,q(function(ei,xr){return jr&&(ei.OFFSET=Er),Er})}if(Tr in Zn){var Yr=Zn[Tr];return U(Yr,function(ei,xr){var pi=ei.invoke(xr,Yr);return jr&&(ei.OFFSET=pi),pi})}if(jr){if(Fn)return q(function(ei,xr){return ei.OFFSET=0});if(Hn)return new K(Rn.thisDep,Rn.contextDep,Rn.propDep,function(ei,xr){return xr.def(ei.shared.vao+".currentVAO?"+ei.shared.vao+".currentVAO.offset:0")})}else if(Hn)return new K(Rn.thisDep,Rn.contextDep,Rn.propDep,function(ei,xr){return xr.def(ei.shared.vao+".currentVAO?"+ei.shared.vao+".currentVAO.instances:-1")});return null}var Qn=Ut.static,Zn=Ut.dynamic,$n={},Hn=!1,Rn=function(){if("vao"in Qn){var Tr=Qn.vao;return null!==Tr&&null===$t.getVAO(Tr)&&(Tr=$t.createVAO(Tr)),Hn=!0,$n.vao=Tr,q(function(Er){var Yr=$t.getVAO(Tr);return Yr?Er.link(Yr):"null"})}if("vao"in Zn){Hn=!0;var jr=Zn.vao;return U(jr,function(Er,Yr){var ei=Er.invoke(Yr,jr);return Yr.def(Er.shared.vao+".getVAO("+ei+")")})}return null}(),Fn=!1,zn=function(){if("elements"in Qn){var Tr=Qn.elements;if($n.elements=Tr,re(Tr)){var jr=$n.elements=it.create(Tr,!0);Tr=it.getElements(jr),Fn=!0}else Tr&&(Tr=it.getElements(Tr),Fn=!0);return(jr=q(function(Yr,ei){if(Tr){var xr=Yr.link(Tr);return Yr.ELEMENTS=xr}return Yr.ELEMENTS=null})).value=Tr,jr}if("elements"in Zn){Fn=!0;var Er=Zn.elements;return U(Er,function(Yr,ei){var xr=(pi=Yr.shared).isBufferArgs,pi=pi.elements,Ui=Yr.invoke(ei,Er),$i=ei.def("null");return xr=ei.def(xr,"(",Ui,")"),Ui=Yr.cond(xr).then($i,"=",pi,".createStream(",Ui,");").else($i,"=",pi,".getElements(",Ui,");"),ei.entry(Ui),ei.exit(Yr.cond(xr).then(pi,".destroyStream(",$i,");")),Yr.ELEMENTS=$i})}return Hn?new K(Rn.thisDep,Rn.contextDep,Rn.propDep,function(Yr,ei){return ei.def(Yr.shared.vao+".currentVAO?"+Yr.shared.elements+".getElements("+Yr.shared.vao+".currentVAO.elements):null")}):null}(),Yn=Tn("offset",!0),nr=function(){if("primitive"in Qn){var Tr=Qn.primitive;return $n.primitive=Tr,q(function(Er,Yr){return Oe[Tr]})}if("primitive"in Zn){var jr=Zn.primitive;return U(jr,function(Er,Yr){var ei=Er.constants.primTypes,xr=Er.invoke(Yr,jr);return Yr.def(ei,"[",xr,"]")})}return Fn?ie(zn)?q(zn.value?function(Er,Yr){return Yr.def(Er.ELEMENTS,".primType")}:function(){return 4}):new K(zn.thisDep,zn.contextDep,zn.propDep,function(Er,Yr){var ei=Er.ELEMENTS;return Yr.def(ei,"?",ei,".primType:",4)}):Hn?new K(Rn.thisDep,Rn.contextDep,Rn.propDep,function(Er,Yr){return Yr.def(Er.shared.vao+".currentVAO?"+Er.shared.vao+".currentVAO.primitive:4")}):null}(),hr=function(){if("count"in Qn){var Tr=0|Qn.count;return $n.count=Tr,q(function(){return Tr})}if("count"in Zn){var jr=Zn.count;return U(jr,function(Er,Yr){return Er.invoke(Yr,jr)})}return Fn?ie(zn)?zn?Yn?new K(Yn.thisDep,Yn.contextDep,Yn.propDep,function(Er,Yr){return Yr.def(Er.ELEMENTS,".vertCount-",Er.OFFSET)}):q(function(Er,Yr){return Yr.def(Er.ELEMENTS,".vertCount")}):q(function(){return-1}):new K(zn.thisDep||Yn.thisDep,zn.contextDep||Yn.contextDep,zn.propDep||Yn.propDep,function(Er,Yr){var ei=Er.ELEMENTS;return Er.OFFSET?Yr.def(ei,"?",ei,".vertCount-",Er.OFFSET,":-1"):Yr.def(ei,"?",ei,".vertCount:-1")}):Hn?new K(Rn.thisDep,Rn.contextDep,Rn.propDep,function(Er,Yr){return Yr.def(Er.shared.vao,".currentVAO?",Er.shared.vao,".currentVAO.count:-1")}):null}(),_r=Tn("instances",!1);return{elements:zn,primitive:nr,count:hr,instances:_r,offset:Yn,vao:Rn,vaoActive:Hn,elementsActive:Fn,static:$n}}(Ut),zn=(Yr=(jr=Ut).static,ei=jr.dynamic,xr={},ui.forEach(function(pi){function Ui(Wr,xi){if(pi in Yr){var ki=Wr(Yr[pi]);xr[$i]=q(function(){return ki})}else if(pi in ei){var oa=ei[pi];xr[$i]=U(oa,function(hi,Xi){return xi(hi,Xi,hi.invoke(Xi,oa))})}}var $i=tt(pi);switch(pi){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return Ui(function(Wr){return Wr},function(Wr,xi,ki){return ki});case"depth.func":return Ui(function(Wr){return Mn[Wr]},function(Wr,xi,ki){return xi.def(Wr.constants.compareFuncs,"[",ki,"]")});case"depth.range":return Ui(function(Wr){return Wr},function(Wr,xi,ki){return[xi.def("+",ki,"[0]"),xi=xi.def("+",ki,"[1]")]});case"blend.func":return Ui(function(Wr){return[dn["srcRGB"in Wr?Wr.srcRGB:Wr.src],dn["dstRGB"in Wr?Wr.dstRGB:Wr.dst],dn["srcAlpha"in Wr?Wr.srcAlpha:Wr.src],dn["dstAlpha"in Wr?Wr.dstAlpha:Wr.dst]]},function(Wr,xi,ki){function oa(ha,Aa){return xi.def('"',ha,Aa,'" in ',ki,"?",ki,".",ha,Aa,":",ki,".",ha)}Wr=Wr.constants.blendFuncs;var hi=oa("src","RGB"),Xi=oa("dst","RGB"),Ea=(hi=xi.def(Wr,"[",hi,"]"),xi.def(Wr,"[",oa("src","Alpha"),"]"));return[hi,Xi=xi.def(Wr,"[",Xi,"]"),Ea,Wr=xi.def(Wr,"[",oa("dst","Alpha"),"]")]});case"blend.equation":return Ui(function(Wr){return"string"==typeof Wr?[Mi[Wr],Mi[Wr]]:"object"==typeof Wr?[Mi[Wr.rgb],Mi[Wr.alpha]]:void 0},function(Wr,xi,ki){var oa=Wr.constants.blendEquations,hi=xi.def(),Xi=xi.def();return(Wr=Wr.cond("typeof ",ki,'==="string"')).then(hi,"=",Xi,"=",oa,"[",ki,"];"),Wr.else(hi,"=",oa,"[",ki,".rgb];",Xi,"=",oa,"[",ki,".alpha];"),xi(Wr),[hi,Xi]});case"blend.color":return Ui(function(Wr){return o(4,function(xi){return+Wr[xi]})},function(Wr,xi,ki){return o(4,function(oa){return xi.def("+",ki,"[",oa,"]")})});case"stencil.mask":return Ui(function(Wr){return 0|Wr},function(Wr,xi,ki){return xi.def(ki,"|0")});case"stencil.func":return Ui(function(Wr){return[Mn[Wr.cmp||"keep"],Wr.ref||0,"mask"in Wr?Wr.mask:-1]},function(Wr,xi,ki){return[Wr=xi.def('"cmp" in ',ki,"?",Wr.constants.compareFuncs,"[",ki,".cmp]",":",7680),xi.def(ki,".ref|0"),xi=xi.def('"mask" in ',ki,"?",ki,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return Ui(function(Wr){return["stencil.opBack"===pi?1029:1028,sn[Wr.fail||"keep"],sn[Wr.zfail||"keep"],sn[Wr.zpass||"keep"]]},function(Wr,xi,ki){function oa(Xi){return xi.def('"',Xi,'" in ',ki,"?",hi,"[",ki,".",Xi,"]:",7680)}var hi=Wr.constants.stencilOps;return["stencil.opBack"===pi?1029:1028,oa("fail"),oa("zfail"),oa("zpass")]});case"polygonOffset.offset":return Ui(function(Wr){return[0|Wr.factor,0|Wr.units]},function(Wr,xi,ki){return[xi.def(ki,".factor|0"),xi=xi.def(ki,".units|0")]});case"cull.face":return Ui(function(Wr){var xi=0;return"front"===Wr?xi=1028:"back"===Wr&&(xi=1029),xi},function(Wr,xi,ki){return xi.def(ki,'==="front"?',1028,":",1029)});case"lineWidth":return Ui(function(Wr){return Wr},function(Wr,xi,ki){return ki});case"frontFace":return Ui(function(Wr){return ke[Wr]},function(Wr,xi,ki){return xi.def(ki+'==="cw"?2304:2305')});case"colorMask":return Ui(function(Wr){return Wr.map(function(xi){return!!xi})},function(Wr,xi,ki){return o(4,function(oa){return"!!"+ki+"["+oa+"]"})});case"sample.coverage":return Ui(function(Wr){return["value"in Wr?Wr.value:1,!!Wr.invert]},function(Wr,xi,ki){return[xi.def('"value" in ',ki,"?+",ki,".value:1"),xi=xi.def("!!",ki,".invert")]})}}),xr),Yn=function(Ut,vn,Tn){function Qn(zn){if(zn in Zn){var Yn=Ve.id(Zn[zn]);return(zn=q(function(){return Yn})).id=Yn,zn}if(zn in $n){var nr=$n[zn];return U(nr,function(hr,_r){var Tr=hr.invoke(_r,nr);return _r.def(hr.shared.strings,".id(",Tr,")")})}return null}var Zn=Ut.static,$n=Ut.dynamic,Hn=Qn("frag"),Rn=Qn("vert"),Fn=null;return ie(Hn)&&ie(Rn)?(Fn=pt.program(Rn.id,Hn.id,null,Tn),Ut=q(function(zn,Yn){return zn.link(Fn)})):Ut=new K(Hn&&Hn.thisDep||Rn&&Rn.thisDep,Hn&&Hn.contextDep||Rn&&Rn.contextDep,Hn&&Hn.propDep||Rn&&Rn.propDep,function(zn,Yn){var nr,hr,_r=zn.shared.shader;return nr=Hn?Hn.append(zn,Yn):Yn.def(_r,".","frag"),hr=Rn?Rn.append(zn,Yn):Yn.def(_r,".","vert"),Yn.def(_r+".program("+hr+","+nr+")")}),{frag:Hn,vert:Rn,progVar:Ut,program:Fn}}(Ut,0,Hn);$n("viewport"),$n(tt("scissor.box"));var nr,hr=0<Object.keys(zn).length;if((nr={framebuffer:nr,draw:Fn,shader:Yn,state:zn,dirty:hr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(jr){var Er,Yr=jr.static;if(jr=jr.dynamic,"profile"in Yr){var ei=!!Yr.profile;(Er=q(function(pi,Ui){return ei})).enable=ei}else if("profile"in jr){var xr=jr.profile;Er=U(xr,function(pi,Ui){return pi.invoke(Ui,xr)})}return Er}(Ut),nr.uniforms=function(jr,Er){var Yr=jr.static,ei=jr.dynamic,xr={};return Object.keys(Yr).forEach(function(pi){var Ui,$i=Yr[pi];if("number"==typeof $i||"boolean"==typeof $i)Ui=q(function(){return $i});else if("function"==typeof $i){var Wr=$i._reglType;"texture2d"===Wr||"textureCube"===Wr?Ui=q(function(xi){return xi.link($i)}):"framebuffer"!==Wr&&"framebufferCube"!==Wr||(Ui=q(function(xi){return xi.link($i.color[0])}))}else m($i)&&(Ui=q(function(xi){return xi.global.def("[",o($i.length,function(ki){return $i[ki]}),"]")}));Ui.value=$i,xr[pi]=Ui}),Object.keys(ei).forEach(function(pi){var Ui=ei[pi];xr[pi]=U(Ui,function($i,Wr){return $i.invoke(Wr,Ui)})}),xr}(Tn),nr.drawVAO=nr.scopeVAO=Fn.vao,!nr.drawVAO&&Yn.program&&!Hn&&Ge.angle_instanced_arrays&&Fn.static.elements){var _r=!0;if(Ut=Yn.program.attributes.map(function(jr){return jr=vn.static[jr],_r=_r&&!!jr,jr}),_r&&0<Ut.length){var Tr=$t.getVAO($t.createVAO({attributes:Ut,elements:Fn.static.elements}));nr.drawVAO=new K(null,null,null,function(jr,Er){return jr.link(Tr)}),nr.useVAO=!0}}return Hn?nr.useVAO=!0:nr.attributes=function(Ut,vn){var Tn=Ut.static,Qn=Ut.dynamic,Zn={};return Object.keys(Tn).forEach(function($n){var Hn=Tn[$n],Rn=Ve.id($n),Fn=new Jr;if(re(Hn))Fn.state=1,Fn.buffer=ot.getBuffer(ot.create(Hn,34962,!1,!0)),Fn.type=0;else if(Yn=ot.getBuffer(Hn))Fn.state=1,Fn.buffer=Yn,Fn.type=0;else if("constant"in Hn){var zn=Hn.constant;Fn.buffer="null",Fn.state=2,"number"==typeof zn?Fn.x=zn:Qt.forEach(function(Er,Yr){Yr<zn.length&&(Fn[Er]=zn[Yr])})}else{var Yn=re(Hn.buffer)?ot.getBuffer(ot.create(Hn.buffer,34962,!1,!0)):ot.getBuffer(Hn.buffer),nr=0|Hn.offset,hr=0|Hn.stride,_r=0|Hn.size,Tr=!!Hn.normalized,jr=0;"type"in Hn&&(jr=Le[Hn.type]),Hn=0|Hn.divisor,Fn.buffer=Yn,Fn.state=1,Fn.size=_r,Fn.normalized=Tr,Fn.type=jr||Yn.dtype,Fn.offset=nr,Fn.stride=hr,Fn.divisor=Hn}Zn[$n]=q(function(Er,Yr){var ei=Er.attribCache;if(Rn in ei)return ei[Rn];var xr={isStream:!1};return Object.keys(Fn).forEach(function(pi){xr[pi]=Fn[pi]}),Fn.buffer&&(xr.buffer=Er.link(Fn.buffer),xr.type=xr.type||xr.buffer+".dtype"),ei[Rn]=xr})}),Object.keys(Qn).forEach(function($n){var Hn=Qn[$n];Zn[$n]=U(Hn,function(Rn,Fn){function zn(ei){Fn(Tr[ei],"=",Yn,".",ei,"|0;")}var Yn=Rn.invoke(Fn,Hn),nr=Rn.shared,hr=Rn.constants,_r=nr.isBufferArgs,Tr=(nr=nr.buffer,{isStream:Fn.def(!1)}),jr=new Jr;jr.state=1,Object.keys(jr).forEach(function(ei){Tr[ei]=Fn.def(""+jr[ei])});var Er=Tr.buffer,Yr=Tr.type;return Fn("if(",_r,"(",Yn,")){",Tr.isStream,"=true;",Er,"=",nr,".createStream(",34962,",",Yn,");",Yr,"=",Er,".dtype;","}else{",Er,"=",nr,".getBuffer(",Yn,");","if(",Er,"){",Yr,"=",Er,".dtype;",'}else if("constant" in ',Yn,"){",Tr.state,"=",2,";","if(typeof "+Yn+'.constant === "number"){',Tr[Qt[0]],"=",Yn,".constant;",Qt.slice(1).map(function(ei){return Tr[ei]}).join("="),"=0;","}else{",Qt.map(function(ei,xr){return Tr[ei]+"="+Yn+".constant.length>"+xr+"?"+Yn+".constant["+xr+"]:0;"}).join(""),"}}else{","if(",_r,"(",Yn,".buffer)){",Er,"=",nr,".createStream(",34962,",",Yn,".buffer);","}else{",Er,"=",nr,".getBuffer(",Yn,".buffer);","}",Yr,'="type" in ',Yn,"?",hr.glTypes,"[",Yn,".type]:",Er,".dtype;",Tr.normalized,"=!!",Yn,".normalized;"),zn("size"),zn("offset"),zn("stride"),zn("divisor"),Fn("}}"),Fn.exit("if(",Tr.isStream,"){",nr,".destroyStream(",Er,");","}"),Tr})}),Zn}(vn),nr.context=function(jr){var Er=jr.static,Yr=jr.dynamic,ei={};return Object.keys(Er).forEach(function(xr){var pi=Er[xr];ei[xr]=q(function(Ui,$i){return"number"==typeof pi||"boolean"==typeof pi?""+pi:Ui.link(pi)})}),Object.keys(Yr).forEach(function(xr){var pi=Yr[xr];ei[xr]=U(pi,function(Ui,$i){return Ui.invoke($i,pi)})}),ei}(Qn),nr}function kn(Ut,vn,Tn){var Qn=Ut.shared.context,Zn=Ut.scope();Object.keys(Tn).forEach(function($n){vn.save(Qn,"."+$n);var Hn=Tn[$n].append(Ut,vn);Array.isArray(Hn)?Zn(Qn,".",$n,"=[",Hn.join(),"];"):Zn(Qn,".",$n,"=",Hn,";")}),vn(Zn)}function rn(Ut,vn,Tn,Qn){var Zn,$n=(Rn=Ut.shared).gl,Hn=Rn.framebuffer;br&&(Zn=vn.def(Rn.extensions,".webgl_draw_buffers"));var Rn=(Fn=Ut.constants).drawBuffer,Fn=Fn.backBuffer;Ut=Tn?Tn.append(Ut,vn):vn.def(Hn,".next"),Qn||vn("if(",Ut,"!==",Hn,".cur){"),vn("if(",Ut,"){",$n,".bindFramebuffer(",36160,",",Ut,".framebuffer);"),br&&vn(Zn,".drawBuffersWEBGL(",Rn,"[",Ut,".colorAttachments.length]);"),vn("}else{",$n,".bindFramebuffer(",36160,",null);"),br&&vn(Zn,".drawBuffersWEBGL(",Fn,");"),vn("}",Hn,".cur=",Ut,";"),Qn||vn("}")}function pn(Ut,vn,Tn){var Qn=Ut.shared,Zn=Qn.gl,$n=Ut.current,Hn=Ut.next,Rn=Qn.current,Fn=Qn.next,zn=Ut.cond(Rn,".dirty");ui.forEach(function(Yn){var nr,hr;if(!((Yn=tt(Yn))in Tn.state))if(Yn in Hn){nr=Hn[Yn],hr=$n[Yn];var _r=o(cr[Yn].length,function(Tr){return zn.def(nr,"[",Tr,"]")});zn(Ut.cond(_r.map(function(Tr,jr){return Tr+"!=="+hr+"["+jr+"]"}).join("||")).then(Zn,".",Hr[Yn],"(",_r,");",_r.map(function(Tr,jr){return hr+"["+jr+"]="+Tr}).join(";"),";"))}else nr=zn.def(Fn,".",Yn),_r=Ut.cond(nr,"!==",Rn,".",Yn),zn(_r),Yn in Nr?_r(Ut.cond(nr).then(Zn,".enable(",Nr[Yn],");").else(Zn,".disable(",Nr[Yn],");"),Rn,".",Yn,"=",nr,";"):_r(Zn,".",Hr[Yn],"(",nr,");",Rn,".",Yn,"=",nr,";")}),0===Object.keys(Tn.state).length&&zn(Rn,".dirty=false;"),vn(zn)}function gn(Ut,vn,Tn,Qn){var Zn,$n=Ut.shared,Hn=Ut.current,Rn=$n.current,Fn=$n.gl;X(Object.keys(Tn)).forEach(function(zn){var Yn=Tn[zn];if(!Qn||Qn(Yn)){var nr=Yn.append(Ut,vn);if(Nr[zn]){var hr=Nr[zn];ie(Yn)?(Zn=Ut.link(nr,{stable:!0}),vn(Ut.cond(Zn).then(Fn,".enable(",hr,");").else(Fn,".disable(",hr,");")),vn(Rn,".",zn,"=",Zn,";")):(vn(Ut.cond(nr).then(Fn,".enable(",hr,");").else(Fn,".disable(",hr,");")),vn(Rn,".",zn,"=",nr,";"))}else if(m(nr)){var _r=Hn[zn];vn(Fn,".",Hr[zn],"(",nr,");",nr.map(function(Tr,jr){return _r+"["+jr+"]="+Tr}).join(";"),";")}else ie(Yn)?(Zn=Ut.link(nr,{stable:!0}),vn(Fn,".",Hr[zn],"(",Zn,");",Rn,".",zn,"=",Zn,";")):vn(Fn,".",Hr[zn],"(",nr,");",Rn,".",zn,"=",nr,";")}})}function Pn(Ut,vn){Jn&&(Ut.instancing=vn.def(Ut.shared.extensions,".angle_instanced_arrays"))}function jn(Ut,vn,Tn,Qn,Zn){function $n(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function Hn(jr){jr(zn=vn.def(),"=",$n(),";"),"string"==typeof Zn?jr(hr,".count+=",Zn,";"):jr(hr,".count++;"),Ct&&(Qn?jr(Yn=vn.def(),"=",Tr,".getNumPendingQueries();"):jr(Tr,".beginQuery(",hr,");"))}function Rn(jr){jr(hr,".cpuTime+=",$n(),"-",zn,";"),Ct&&(Qn?jr(Tr,".pushScopeStats(",Yn,",",Tr,".getNumPendingQueries(),",hr,");"):jr(Tr,".endQuery();"))}function Fn(jr){var Er=vn.def(_r,".profile");vn(_r,".profile=",jr,";"),vn.exit(_r,".profile=",Er,";")}var zn,Yn,nr=Ut.shared,hr=Ut.stats,_r=nr.current,Tr=nr.timer;if(Tn=Tn.profile){if(ie(Tn))return void(Tn.enable?(Hn(vn),Rn(vn.exit),Fn("true")):Fn("false"));Fn(Tn=Tn.append(Ut,vn))}else Tn=vn.def(_r,".profile");Hn(nr=Ut.block()),vn("if(",Tn,"){",nr,"}"),Rn(Ut=Ut.block()),vn.exit("if(",Tn,"){",Ut,"}")}function Kn(Ut,vn,Tn,Qn,Zn){var Hn=Ut.shared;Qn.forEach(function(Rn){var Fn,zn=Rn.name,Yn=Tn.attributes[zn];if(Yn){if(!Zn(Yn))return;Fn=Yn.append(Ut,vn)}else{if(!Zn(Se))return;var nr=Ut.scopeAttrib(zn);Fn={},Object.keys(new Jr).forEach(function(hr){Fn[hr]=vn.def(nr,".",hr)})}!function(Rn,Fn,zn){function Yn(){vn("if(!",Tr,".buffer){",hr,".enableVertexAttribArray(",_r,");}");var ei,xr=zn.type;ei=zn.size?vn.def(zn.size,"||",Fn):Fn,vn("if(",Tr,".type!==",xr,"||",Tr,".size!==",ei,"||",Yr.map(function(pi){return Tr+"."+pi+"!=="+zn[pi]}).join("||"),"){",hr,".bindBuffer(",34962,",",jr,".buffer);",hr,".vertexAttribPointer(",[_r,ei,xr,zn.normalized,zn.stride,zn.offset],");",Tr,".type=",xr,";",Tr,".size=",ei,";",Yr.map(function(pi){return Tr+"."+pi+"="+zn[pi]+";"}).join(""),"}"),Jn&&vn("if(",Tr,".divisor!==",xr=zn.divisor,"){",Ut.instancing,".vertexAttribDivisorANGLE(",[_r,xr],");",Tr,".divisor=",xr,";}")}function nr(){vn("if(",Tr,".buffer){",hr,".disableVertexAttribArray(",_r,");",Tr,".buffer=null;","}if(",Qt.map(function(ei,xr){return Tr+"."+ei+"!=="+Er[xr]}).join("||"),"){",hr,".vertexAttrib4f(",_r,",",Er,");",Qt.map(function(ei,xr){return Tr+"."+ei+"="+Er[xr]+";"}).join(""),"}")}var hr=Hn.gl,_r=vn.def(Rn,".location"),Tr=vn.def(Hn.attributes,"[",_r,"]"),jr=zn.buffer,Er=[zn.x,zn.y,zn.z,zn.w],Yr=["buffer","normalized","offset","stride"];1===(Rn=zn.state)?Yn():2===Rn?nr():(vn("if(",Rn,"===",1,"){"),Yn(),vn("}else{"),nr(),vn("}"))}(Ut.link(Rn),function(hr){switch(hr){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Rn.info.type),Fn)})}function rr(Ut,vn,Tn,Qn,Zn,$n){for(var Hn,Rn=Ut.shared,Fn=Rn.gl,zn=0;zn<Qn.length;++zn){var Yn,nr=(Tr=Qn[zn]).name,hr=Tr.info.type,_r=Tn.uniforms[nr],Tr=Ut.link(Tr)+".location";if(_r){if(!Zn(_r))continue;if(ie(_r)){if(nr=_r.value,35678===hr||35680===hr)vn(Fn,".uniform1i(",Tr,",",(hr=Ut.link(nr._texture||nr.color[0]._texture))+".bind());"),vn.exit(hr,".unbind();");else if(35674===hr||35675===hr||35676===hr)_r=2,35675===hr?_r=3:35676===hr&&(_r=4),vn(Fn,".uniformMatrix",_r,"fv(",Tr,",false,",nr=Ut.global.def("new Float32Array(["+Array.prototype.slice.call(nr)+"])"),");");else{switch(hr){case 5126:Hn="1f";break;case 35664:Hn="2f";break;case 35665:Hn="3f";break;case 35666:Hn="4f";break;case 35670:case 5124:Hn="1i";break;case 35671:case 35667:Hn="2i";break;case 35672:case 35668:Hn="3i";break;case 35673:Hn="4i";break;case 35669:Hn="4i"}vn(Fn,".uniform",Hn,"(",Tr,",",m(nr)?Array.prototype.slice.call(nr):nr,");")}continue}Yn=_r.append(Ut,vn)}else{if(!Zn(Se))continue;Yn=vn.def(Rn.uniforms,"[",Ve.id(nr),"]")}switch(35678===hr?vn("if(",Yn,"&&",Yn,'._reglType==="framebuffer"){',Yn,"=",Yn,".color[0];","}"):35680===hr&&vn("if(",Yn,"&&",Yn,'._reglType==="framebufferCube"){',Yn,"=",Yn,".color[0];","}"),nr=1,hr){case 35678:case 35680:hr=vn.def(Yn,"._texture"),vn(Fn,".uniform1i(",Tr,",",hr,".bind());"),vn.exit(hr,".unbind();");continue;case 5124:case 35670:Hn="1i";break;case 35667:case 35671:Hn="2i",nr=2;break;case 35668:case 35672:Hn="3i",nr=3;break;case 35669:case 35673:Hn="4i",nr=4;break;case 5126:Hn="1f";break;case 35664:Hn="2f",nr=2;break;case 35665:Hn="3f",nr=3;break;case 35666:Hn="4f",nr=4;break;case 35674:Hn="Matrix2fv";break;case 35675:Hn="Matrix3fv";break;case 35676:Hn="Matrix4fv"}if("M"===Hn.charAt(0)){vn(Fn,".uniform",Hn,"(",Tr,","),Tr=Math.pow(hr-35674+2,2);var jr=Ut.global.def("new Float32Array(",Tr,")");Array.isArray(Yn)?vn("false,(",o(Tr,function(Yr){return jr+"["+Yr+"]="+Yn[Yr]}),",",jr,")"):vn("false,(Array.isArray(",Yn,")||",Yn," instanceof Float32Array)?",Yn,":(",o(Tr,function(Yr){return jr+"["+Yr+"]="+Yn+"["+Yr+"]"}),",",jr,")"),vn(");")}else{if(1<nr){hr=[];var Er=[];for(_r=0;_r<nr;++_r)Array.isArray(Yn)?Er.push(Yn[_r]):Er.push(vn.def(Yn+"["+_r+"]")),$n&&hr.push(vn.def());$n&&vn("if(!",Ut.batchId,"||",hr.map(function(Yr,ei){return Yr+"!=="+Er[ei]}).join("||"),"){",hr.map(function(Yr,ei){return Yr+"="+Er[ei]+";"}).join("")),vn(Fn,".uniform",Hn,"(",Tr,",",Er.join(","),");")}else $n&&(hr=vn.def(),vn("if(!",Ut.batchId,"||",hr,"!==",Yn,"){",hr,"=",Yn,";")),vn(Fn,".uniform",Hn,"(",Tr,",",Yn,");");$n&&vn("}")}}}function lr(Ut,vn,Tn,Qn){function Zn(xr){var pi=hr[xr];return pi?pi.append(Ut,pi.contextDep&&Qn.contextDynamic||pi.propDep?Tn:vn):vn.def(nr,".",xr)}function $n(){function xr(){Tn(Fn,".drawElementsInstancedANGLE(",[Tr,Er,Yr,jr+"<<(("+Yr+"-5121)>>1)",Rn],");")}function pi(){Tn(Fn,".drawArraysInstancedANGLE(",[Tr,jr,Er,Rn],");")}_r&&"null"!==_r?ei?xr():(Tn("if(",_r,"){"),xr(),Tn("}else{"),pi(),Tn("}")):pi()}function Hn(){function xr(){Tn(Yn+".drawElements("+[Tr,Er,Yr,jr+"<<(("+Yr+"-5121)>>1)"]+");")}function pi(){Tn(Yn+".drawArrays("+[Tr,jr,Er]+");")}_r&&"null"!==_r?ei?xr():(Tn("if(",_r,"){"),xr(),Tn("}else{"),pi(),Tn("}")):pi()}var Rn,Fn,xr,pi,zn=Ut.shared,Yn=zn.gl,nr=zn.draw,hr=Qn.draw,_r=(pi=vn,(xr=hr.elements)?((xr.contextDep&&Qn.contextDynamic||xr.propDep)&&(pi=Tn),xr=xr.append(Ut,pi),hr.elementsActive&&pi("if("+xr+")"+Yn+".bindBuffer(34963,"+xr+".buffer.buffer);")):(xr=pi.def(),pi(xr,"=",nr,".","elements",";","if(",xr,"){",Yn,".bindBuffer(",34963,",",xr,".buffer.buffer);}","else if(",zn.vao,".currentVAO){",xr,"=",Ut.shared.elements+".getElements("+zn.vao,".currentVAO.elements);",Fr?"":"if("+xr+")"+Yn+".bindBuffer(34963,"+xr+".buffer.buffer);","}")),xr),Tr=Zn("primitive"),jr=Zn("offset"),Er=function(){var xr=hr.count,pi=vn;return xr?((xr.contextDep&&Qn.contextDynamic||xr.propDep)&&(pi=Tn),xr=xr.append(Ut,pi)):xr=pi.def(nr,".","count"),xr}();if("number"==typeof Er){if(0===Er)return}else Tn("if(",Er,"){"),Tn.exit("}");Jn&&(Rn=Zn("instances"),Fn=Ut.instancing);var Yr=_r+".type",ei=hr.elements&&ie(hr.elements)&&!hr.vaoActive;Jn&&("number"!=typeof Rn||0<=Rn)?"string"==typeof Rn?(Tn("if(",Rn,">0){"),$n(),Tn("}else if(",Rn,"<0){"),Hn(),Tn("}")):$n():Hn()}function kr(Ut,vn,Tn,Qn,Zn){return Zn=(vn=Nt()).proc("body",Zn),Jn&&(vn.instancing=Zn.def(vn.shared.extensions,".angle_instanced_arrays")),Ut(vn,Zn,Tn,Qn),vn.compile().body}function Xr(Ut,vn,Tn,Qn){Pn(Ut,vn),Tn.useVAO?Tn.drawVAO?vn(Ut.shared.vao,".setVAO(",Tn.drawVAO.append(Ut,vn),");"):vn(Ut.shared.vao,".setVAO(",Ut.shared.vao,".targetVAO);"):(vn(Ut.shared.vao,".setVAO(null);"),Kn(Ut,vn,Tn,Qn.attributes,function(){return!0})),rr(Ut,vn,Tn,Qn.uniforms,function(){return!0},!1),lr(Ut,vn,vn,Tn)}function sr(Ut,vn,Tn,Qn){function Zn(){return!0}Ut.batchId="a1",Pn(Ut,vn),Kn(Ut,vn,Tn,Qn.attributes,Zn),rr(Ut,vn,Tn,Qn.uniforms,Zn,!1),lr(Ut,vn,vn,Tn)}function oi(Ut,vn,Tn,Qn){function Zn(nr){return nr.contextDep&&Hn||nr.propDep}function $n(nr){return!Zn(nr)}Pn(Ut,vn);var Hn=Tn.contextDep,Rn=vn.def(),Fn=vn.def();Ut.shared.props=Fn,Ut.batchId=Rn;var zn=Ut.scope(),Yn=Ut.scope();vn(zn.entry,"for(",Rn,"=0;",Rn,"<","a1",";++",Rn,"){",Fn,"=","a0","[",Rn,"];",Yn,"}",zn.exit),Tn.needsContext&&kn(Ut,Yn,Tn.context),Tn.needsFramebuffer&&rn(Ut,Yn,Tn.framebuffer),gn(Ut,Yn,Tn.state,Zn),Tn.profile&&Zn(Tn.profile)&&jn(Ut,Yn,Tn,!1,!0),Qn?(Tn.useVAO?Tn.drawVAO?Zn(Tn.drawVAO)?Yn(Ut.shared.vao,".setVAO(",Tn.drawVAO.append(Ut,Yn),");"):zn(Ut.shared.vao,".setVAO(",Tn.drawVAO.append(Ut,zn),");"):zn(Ut.shared.vao,".setVAO(",Ut.shared.vao,".targetVAO);"):(zn(Ut.shared.vao,".setVAO(null);"),Kn(Ut,zn,Tn,Qn.attributes,$n),Kn(Ut,Yn,Tn,Qn.attributes,Zn)),rr(Ut,zn,Tn,Qn.uniforms,$n,!1),rr(Ut,Yn,Tn,Qn.uniforms,Zn,!0),lr(Ut,zn,Yn,Tn)):(vn=Ut.global.def("{}"),Qn=Tn.shader.progVar.append(Ut,Yn),Fn=Yn.def(Qn,".id"),zn=Yn.def(vn,"[",Fn,"]"),Yn(Ut.shared.gl,".useProgram(",Qn,".program);","if(!",zn,"){",zn,"=",vn,"[",Fn,"]=",Ut.link(function(nr){return kr(sr,Ut,Tn,nr,2)}),"(",Qn,");}",zn,".call(this,a0[",Rn,"],",Rn,");"))}function Lr(Ut,vn,Tn){var Qn=vn.static[Tn];if(Qn&&function(Yn){if("object"==typeof Yn&&!m(Yn)){for(var nr=Object.keys(Yn),hr=0;hr<nr.length;++hr)if(ne.isDynamic(Yn[nr[hr]]))return!0;return!1}}(Qn)){var Zn=Ut.global,$n=Object.keys(Qn),Hn=!1,Rn=!1,Fn=!1,zn=Ut.global.def("{}");$n.forEach(function(Yn){var nr=Qn[Yn];if(ne.isDynamic(nr))"function"==typeof nr&&(nr=Qn[Yn]=ne.unbox(nr)),Yn=U(nr,null),Hn=Hn||Yn.thisDep,Fn=Fn||Yn.propDep,Rn=Rn||Yn.contextDep;else{switch(Zn(zn,".",Yn,"="),typeof nr){case"number":Zn(nr);break;case"string":Zn('"',nr,'"');break;case"object":Array.isArray(nr)&&Zn("[",nr.join(),"]");break;default:Zn(Ut.link(nr))}Zn(";")}}),vn.dynamic[Tn]=new ne.DynamicVariable(4,{thisDep:Hn,contextDep:Rn,propDep:Fn,ref:zn,append:function(Yn,nr){$n.forEach(function(hr){var _r=Qn[hr];ne.isDynamic(_r)&&(_r=Yn.invoke(nr,_r),nr(zn,".",hr,"=",_r,";"))})}}),delete vn.static[Tn]}}var Jr=$t.Record,Mi={add:32774,subtract:32778,"reverse subtract":32779};Ge.ext_blend_minmax&&(Mi.min=32775,Mi.max=32776);var Jn=Ge.angle_instanced_arrays,br=Ge.webgl_draw_buffers,Fr=Ge.oes_vertex_array_object,cr={dirty:!0,profile:Be.profile},Qr={},ui=[],Nr={},Hr={};dt("dither",3024),dt("blend.enable",3042),Dt("blend.color","blendColor",[0,0,0,0]),Dt("blend.equation","blendEquationSeparate",[32774,32774]),Dt("blend.func","blendFuncSeparate",[1,0,1,0]),dt("depth.enable",2929,!0),Dt("depth.func","depthFunc",513),Dt("depth.range","depthRange",[0,1]),Dt("depth.mask","depthMask",!0),Dt("colorMask","colorMask",[!0,!0,!0,!0]),dt("cull.enable",2884),Dt("cull.face","cullFace",1029),Dt("frontFace","frontFace",2305),Dt("lineWidth","lineWidth",1),dt("polygonOffset.enable",32823),Dt("polygonOffset.offset","polygonOffset",[0,0]),dt("sample.alpha",32926),dt("sample.enable",32928),Dt("sample.coverage","sampleCoverage",[1,!1]),dt("stencil.enable",2960),Dt("stencil.mask","stencilMask",-1),Dt("stencil.func","stencilFunc",[519,0,-1]),Dt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Dt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),dt("scissor.enable",3089),Dt("scissor.box","scissor",[0,0,Ce.drawingBufferWidth,Ce.drawingBufferHeight]),Dt("viewport","viewport",[0,0,Ce.drawingBufferWidth,Ce.drawingBufferHeight]);var wr={gl:Ce,context:Xt,strings:Ve,next:Qr,current:cr,draw:At,elements:it,buffer:ot,shader:pt,attributes:$t.state,vao:$t,uniforms:Vt,framebuffer:xt,extensions:Ge,timer:Ct,isBufferArgs:re},un={primTypes:Oe,compareFuncs:Mn,blendFuncs:dn,blendEquations:Mi,stencilOps:sn,glTypes:Le,orientationType:ke};br&&(un.backBuffer=[1029],un.drawBuffer=o(Qe.maxDrawbuffers,function(Ut){return 0===Ut?[0]:o(Ut,function(vn){return 36064+vn})}));var er=0;return{next:Qr,current:cr,procs:function(){var Ut=Nt(),vn=Ut.proc("poll"),Tn=Ut.proc("refresh"),Qn=Ut.block();vn(Qn),Tn(Qn);var Zn,$n=(Fn=Ut.shared).gl,Hn=Fn.next,Rn=Fn.current;Qn(Rn,".dirty=false;"),rn(Ut,vn),rn(Ut,Tn,null,!0),Jn&&(Zn=Ut.link(Jn)),Ge.oes_vertex_array_object&&Tn(Ut.link(Ge.oes_vertex_array_object),".bindVertexArrayOES(null);");var Fn=Tn.def(Fn.attributes),zn=Tn.def(0),Yn=Ut.cond(zn,".buffer");Yn.then($n,".enableVertexAttribArray(i);",$n,".bindBuffer(",34962,",",zn,".buffer.buffer);",$n,".vertexAttribPointer(i,",zn,".size,",zn,".type,",zn,".normalized,",zn,".stride,",zn,".offset);").else($n,".disableVertexAttribArray(i);",$n,".vertexAttrib4f(i,",zn,".x,",zn,".y,",zn,".z,",zn,".w);",zn,".buffer=null;");var nr=Ut.link(Qe.maxAttributes,{stable:!0});return Tn("for(var i=0;i<",nr,";++i){",zn,"=",Fn,"[i];",Yn,"}"),Jn&&Tn("for(var i=0;i<",nr,";++i){",Zn,".vertexAttribDivisorANGLE(i,",Fn,"[i].divisor);","}"),Tn(Ut.shared.vao,".currentVAO=null;",Ut.shared.vao,".setVAO(",Ut.shared.vao,".targetVAO);"),Object.keys(Nr).forEach(function(hr){var _r=Nr[hr],Tr=Qn.def(Hn,".",hr),jr=Ut.block();jr("if(",Tr,"){",$n,".enable(",_r,")}else{",$n,".disable(",_r,")}",Rn,".",hr,"=",Tr,";"),Tn(jr),vn("if(",Tr,"!==",Rn,".",hr,"){",jr,"}")}),Object.keys(Hr).forEach(function(hr){var _r,Tr,jr=Hr[hr],Er=cr[hr],Yr=Ut.block();Yr($n,".",jr,"("),m(Er)?(jr=Er.length,_r=Ut.global.def(Hn,".",hr),Tr=Ut.global.def(Rn,".",hr),Yr(o(jr,function(ei){return _r+"["+ei+"]"}),");",o(jr,function(ei){return Tr+"["+ei+"]="+_r+"["+ei+"];"}).join("")),vn("if(",o(jr,function(ei){return _r+"["+ei+"]!=="+Tr+"["+ei+"]"}).join("||"),"){",Yr,"}")):(_r=Qn.def(Hn,".",hr),Tr=Qn.def(Rn,".",hr),Yr(_r,");",Rn,".",hr,"=",_r,";"),vn("if(",_r,"!==",Tr,"){",Yr,"}")),Tn(Yr)}),Ut.compile()}(),compile:function(Ut,vn,Tn,Qn,Zn){var $n=Nt();$n.stats=$n.link(Zn),Object.keys(vn.static).forEach(function(Rn){Lr($n,vn,Rn)}),tn.forEach(function(Rn){Lr($n,Ut,Rn)});var Hn=Dn(Ut,vn,Tn,Qn);return Hn.shader.program&&(Hn.shader.program.attributes.sort(function(Rn,Fn){return Rn.name<Fn.name?-1:1}),Hn.shader.program.uniforms.sort(function(Rn,Fn){return Rn.name<Fn.name?-1:1})),function(Rn,Fn){var zn=Rn.proc("draw",1);Pn(Rn,zn),kn(Rn,zn,Fn.context),rn(Rn,zn,Fn.framebuffer),pn(Rn,zn,Fn),gn(Rn,zn,Fn.state),jn(Rn,zn,Fn,!1,!0);var Yn=Fn.shader.progVar.append(Rn,zn);if(zn(Rn.shared.gl,".useProgram(",Yn,".program);"),Fn.shader.program)Xr(Rn,zn,Fn,Fn.shader.program);else{zn(Rn.shared.vao,".setVAO(null);");var nr=Rn.global.def("{}"),hr=zn.def(Yn,".id"),_r=zn.def(nr,"[",hr,"]");zn(Rn.cond(_r).then(_r,".call(this,a0);").else(_r,"=",nr,"[",hr,"]=",Rn.link(function(Tr){return kr(Xr,Rn,Fn,Tr,1)}),"(",Yn,");",_r,".call(this,a0);"))}0<Object.keys(Fn.state).length&&zn(Rn.shared.current,".dirty=true;"),Rn.shared.vao&&zn(Rn.shared.vao,".setVAO(null);")}($n,Hn),function(Ut,vn){function Tn(Rn){var Fn=vn.shader[Rn];Fn&&(Fn=Fn.append(Ut,Qn),isNaN(Fn)?Qn.set(Zn.shader,"."+Rn,Fn):Qn.set(Zn.shader,"."+Rn,Ut.link(Fn,{stable:!0})))}var Qn=Ut.proc("scope",3);Ut.batchId="a2";var Zn=Ut.shared,$n=Zn.current;if(kn(Ut,Qn,vn.context),vn.framebuffer&&vn.framebuffer.append(Ut,Qn),X(Object.keys(vn.state)).forEach(function(Rn){var Fn=vn.state[Rn],zn=Fn.append(Ut,Qn);m(zn)?zn.forEach(function(Yn,nr){isNaN(Yn)?Qn.set(Ut.next[Rn],"["+nr+"]",Yn):Qn.set(Ut.next[Rn],"["+nr+"]",Ut.link(Yn,{stable:!0}))}):ie(Fn)?Qn.set(Zn.next,"."+Rn,Ut.link(zn,{stable:!0})):Qn.set(Zn.next,"."+Rn,zn)}),jn(Ut,Qn,vn,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(Rn){var Fn=vn.draw[Rn];Fn&&(Fn=Fn.append(Ut,Qn),isNaN(Fn)?Qn.set(Zn.draw,"."+Rn,Fn):Qn.set(Zn.draw,"."+Rn,Ut.link(Fn),{stable:!0}))}),Object.keys(vn.uniforms).forEach(function(Rn){var Fn=vn.uniforms[Rn].append(Ut,Qn);Array.isArray(Fn)&&(Fn="["+Fn.map(function(zn){return isNaN(zn)?zn:Ut.link(zn,{stable:!0})})+"]"),Qn.set(Zn.uniforms,"["+Ut.link(Ve.id(Rn),{stable:!0})+"]",Fn)}),Object.keys(vn.attributes).forEach(function(Rn){var Fn=vn.attributes[Rn].append(Ut,Qn),zn=Ut.scopeAttrib(Rn);Object.keys(new Jr).forEach(function(Yn){Qn.set(zn,"."+Yn,Fn[Yn])})}),vn.scopeVAO){var Hn=vn.scopeVAO.append(Ut,Qn);isNaN(Hn)?Qn.set(Zn.vao,".targetVAO",Hn):Qn.set(Zn.vao,".targetVAO",Ut.link(Hn,{stable:!0}))}Tn("vert"),Tn("frag"),0<Object.keys(vn.state).length&&(Qn($n,".dirty=true;"),Qn.exit($n,".dirty=true;")),Qn("a1(",Ut.shared.context,",a0,",Ut.batchId,");")}($n,Hn),function(Rn,Fn){function zn(Er){return Er.contextDep&&nr||Er.propDep}var Yn=Rn.proc("batch",2);Rn.batchId="0",Pn(Rn,Yn);var nr=!1,hr=!0;Object.keys(Fn.context).forEach(function(Er){nr=nr||Fn.context[Er].propDep}),nr||(kn(Rn,Yn,Fn.context),hr=!1);var _r=!1;if((Tr=Fn.framebuffer)?(Tr.propDep?nr=_r=!0:Tr.contextDep&&nr&&(_r=!0),_r||rn(Rn,Yn,Tr)):rn(Rn,Yn,null),Fn.state.viewport&&Fn.state.viewport.propDep&&(nr=!0),pn(Rn,Yn,Fn),gn(Rn,Yn,Fn.state,function(Er){return!zn(Er)}),Fn.profile&&zn(Fn.profile)||jn(Rn,Yn,Fn,!1,"a1"),Fn.contextDep=nr,Fn.needsContext=hr,Fn.needsFramebuffer=_r,(hr=Fn.shader.progVar).contextDep&&nr||hr.propDep)oi(Rn,Yn,Fn,null);else if(hr=hr.append(Rn,Yn),Yn(Rn.shared.gl,".useProgram(",hr,".program);"),Fn.shader.program)oi(Rn,Yn,Fn,Fn.shader.program);else{Yn(Rn.shared.vao,".setVAO(null);");var Tr=Rn.global.def("{}"),jr=(_r=Yn.def(hr,".id"),Yn.def(Tr,"[",_r,"]"));Yn(Rn.cond(jr).then(jr,".call(this,a0,a1);").else(jr,"=",Tr,"[",_r,"]=",Rn.link(function(Er){return kr(oi,Rn,Fn,Er,2)}),"(",hr,");",jr,".call(this,a0,a1);"))}0<Object.keys(Fn.state).length&&Yn(Rn.shared.current,".dirty=true;"),Rn.shared.vao&&Yn(Rn.shared.vao,".setVAO(null);")}($n,Hn),G($n.compile(),{destroy:function(){Hn.shader.program.destroy()}})}}}function ae(Ce,Ve){for(var Ge=0;Ge<Ce.length;++Ge)if(Ce[Ge]===Ve)return Ge;return-1}var G=function(Ce,Ve){for(var Ge=Object.keys(Ve),Qe=0;Qe<Ge.length;++Qe)Ce[Ge[Qe]]=Ve[Ge[Qe]];return Ce},te=0,ne={DynamicVariable:y,define:function(Ce,Ve){return new y(Ce,x(Ve+""))},isDynamic:function(Ce){return"function"==typeof Ce&&!Ce._reglType||Ce instanceof y},unbox:function Ce(Ve,Ge){return"function"==typeof Ve?new y(0,Ve):"number"==typeof Ve||"boolean"==typeof Ve?new y(5,Ve):Array.isArray(Ve)?new y(6,Ve.map(function(Qe,ot){return Ce(Qe,Ge+"["+ot+"]")})):Ve instanceof y?Ve:void 0},accessor:x},le={next:"function"==typeof requestAnimationFrame?function(Ce){return requestAnimationFrame(Ce)}:function(Ce){return setTimeout(Ce,16)},cancel:"function"==typeof cancelAnimationFrame?function(Ce){return cancelAnimationFrame(Ce)}:clearTimeout},ue="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},pe=l();pe.zero=l();var _e=function(Ce){return Ce instanceof Uint8Array||Ce instanceof Uint16Array||Ce instanceof Uint32Array||Ce instanceof Int8Array||Ce instanceof Int16Array||Ce instanceof Int32Array||Ce instanceof Float32Array||Ce instanceof Float64Array||Ce instanceof Uint8ClampedArray},me=function(Ce){return Object.keys(Ce).map(function(Ve){return Ce[Ve]})},we={shape:function(Ce){for(var Ve=[];Ce.length;Ce=Ce[0])Ve.push(Ce.length);return Ve},flatten:function(Ce,Ve,Ge,Qe){var ot=1;if(Ve.length)for(var it=0;it<Ve.length;++it)ot*=Ve[it];else ot=0;switch(Ge=Qe||pe.allocType(Ge,ot),Ve.length){case 0:break;case 1:for(Qe=Ve[0],Ve=0;Ve<Qe;++Ve)Ge[Ve]=Ce[Ve];break;case 2:for(Qe=Ve[0],Ve=Ve[1],it=ot=0;it<Qe;++it)for(var mt=Ce[it],xt=0;xt<Ve;++xt)Ge[ot++]=mt[xt];break;case 3:v(Ce,Ve[0],Ve[1],Ve[2],Ge,0);break;default:!function Vt($t,pt,At,Xt,Ct){for(var Pt=1,Be=At+1;Be<pt.length;++Be)Pt*=pt[Be];var tt=pt[At];if(pt.length-At==4){var dt=pt[At+1],Dt=pt[At+2];for(pt=pt[At+3],Be=0;Be<tt;++Be)v($t[Be],dt,Dt,pt,Xt,Ct),Ct+=Pt}else for(Be=0;Be<tt;++Be)Vt($t[Be],pt,At+1,Xt,Ct),Ct+=Pt}(Ce,Ve,0,Ge,0)}return Ge}},De={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Le={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Ie={dynamic:35048,stream:35040,static:35044},je=we.flatten,ye=we.shape,Me=[];Me[5120]=1,Me[5122]=2,Me[5124]=4,Me[5121]=1,Me[5123]=2,Me[5125]=4,Me[5126]=4;var Oe={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Pe=new Float32Array(1),Re=new Uint32Array(Pe.buffer),Ue=[9984,9986,9985,9987],qe=[0,6409,6410,6407,6408],Xe={};Xe[6409]=Xe[6406]=Xe[6402]=1,Xe[34041]=Xe[6410]=2,Xe[6407]=Xe[35904]=3,Xe[6408]=Xe[35906]=4;var lt=u("HTMLCanvasElement"),He=u("OffscreenCanvas"),$e=u("CanvasRenderingContext2D"),et=u("ImageBitmap"),nt=u("HTMLImageElement"),ct=u("HTMLVideoElement"),bt=Object.keys(De).concat([lt,He,$e,et,nt,ct]),kt=[];kt[5121]=1,kt[5126]=4,kt[36193]=2,kt[5123]=2,kt[5125]=4;var Bt=[];Bt[32854]=2,Bt[32855]=2,Bt[36194]=2,Bt[34041]=4,Bt[33776]=.5,Bt[33777]=.5,Bt[33778]=1,Bt[33779]=1,Bt[35986]=.5,Bt[35987]=1,Bt[34798]=1,Bt[35840]=.5,Bt[35841]=.25,Bt[35842]=.5,Bt[35843]=.25,Bt[36196]=.5;var Et=[];Et[32854]=2,Et[32855]=2,Et[36194]=2,Et[33189]=2,Et[36168]=1,Et[34041]=4,Et[35907]=4,Et[34836]=16,Et[34842]=8,Et[34843]=6;var at=[];at[6408]=4,at[6407]=3;var Ft=[];Ft[5121]=1,Ft[5126]=4,Ft[36193]=2;var en=[1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998],Qt=["x","y","z","w"],tn="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),dn={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Mn={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},sn={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},ke={cw:2304,ccw:2305},Se=new K(!1,!1,!1,function(){});return function(Ce){function Ve(){if(0===sr.length)Yt&&Yt.update(),Jr=null;else{Jr=le.next(Ve),pt();for(var Jn=sr.length-1;0<=Jn;--Jn){var br=sr[Jn];br&&br(Dn,null,0)}Ct.flush(),Yt&&Yt.update()}}function Ge(){!Jr&&0<sr.length&&(Jr=le.next(Ve))}function Qe(){Jr&&(le.cancel(Ve),Jr=null)}function ot(Jn){Jn.preventDefault(),Qe(),oi.forEach(function(br){br()})}function it(Jn){Ct.getError(),Be.restore(),Pn.restore(),rn.restore(),jn.restore(),Kn.restore(),rr.restore(),gn.restore(),Yt&&Yt.restore(),lr.procs.refresh(),Ge(),Gr.forEach(function(br){br()})}function mt(Jn){function br(Ut,vn){var Tn={},Qn={};return Object.keys(Ut).forEach(function(Zn){var $n=Ut[Zn];if(ne.isDynamic($n))Qn[Zn]=ne.unbox($n,Zn);else{if(vn&&Array.isArray($n))for(var Hn=0;Hn<$n.length;++Hn)if(ne.isDynamic($n[Hn]))return void(Qn[Zn]=ne.unbox($n,Zn));Tn[Zn]=$n}}),{dynamic:Qn,static:Tn}}var Fr=br(Jn.context||{},!0),cr=br(Jn.uniforms||{},!0),Qr=br(Jn.attributes||{},!1);Jn=br(function(Ut){function vn(Qn){if(Qn in Tn){var Zn=Tn[Qn];delete Tn[Qn],Object.keys(Zn).forEach(function($n){Tn[Qn+"."+$n]=Zn[$n]})}}var Tn=G({},Ut);return delete Tn.uniforms,delete Tn.attributes,delete Tn.context,delete Tn.vao,"stencil"in Tn&&Tn.stencil.op&&(Tn.stencil.opBack=Tn.stencil.opFront=Tn.stencil.op,delete Tn.stencil.op),vn("blend"),vn("depth"),vn("cull"),vn("stencil"),vn("polygonOffset"),vn("scissor"),vn("sample"),"vao"in Ut&&(Tn.vao=Ut.vao),Tn}(Jn),!1);var ui={gpuTime:0,cpuTime:0,count:0},Nr=lr.compile(Jn,Qr,cr,Fr,ui),Hr=Nr.draw,wr=Nr.batch,un=Nr.scope,er=[];return G(function(Ut,vn){var Tn;if("function"==typeof Ut)return un.call(this,null,Ut,0);if("function"==typeof vn)if("number"==typeof Ut)for(Tn=0;Tn<Ut;++Tn)un.call(this,null,vn,Tn);else{if(!Array.isArray(Ut))return un.call(this,Ut,vn,0);for(Tn=0;Tn<Ut.length;++Tn)un.call(this,Ut[Tn],vn,Tn)}else if("number"==typeof Ut){if(0<Ut)return wr.call(this,function(Qn){for(;er.length<Qn;)er.push(null);return er}(0|Ut),0|Ut)}else{if(!Array.isArray(Ut))return Hr.call(this,Ut);if(Ut.length)return wr.call(this,Ut,Ut.length)}},{stats:ui,destroy:function(){Nr.destroy()}})}function xt(Jn,br){var Fr=0;lr.procs.poll();var cr=br.color;cr&&(Ct.clearColor(+cr[0]||0,+cr[1]||0,+cr[2]||0,+cr[3]||0),Fr|=16384),"depth"in br&&(Ct.clearDepth(+br.depth),Fr|=256),"stencil"in br&&(Ct.clearStencil(0|br.stencil),Fr|=1024),Ct.clear(Fr)}function Vt(Jn){return sr.push(Jn),Ge(),{cancel:function(){var br=ae(sr,Jn);sr[br]=function Fr(){var cr=ae(sr,Fr);sr[cr]=sr[sr.length-1],--sr.length,0>=sr.length&&Qe()}}}}function $t(){var Jn=kr.viewport,br=kr.scissor_box;Jn[0]=Jn[1]=br[0]=br[1]=0,Dn.viewportWidth=Dn.framebufferWidth=Dn.drawingBufferWidth=Jn[2]=br[2]=Ct.drawingBufferWidth,Dn.viewportHeight=Dn.framebufferHeight=Dn.drawingBufferHeight=Jn[3]=br[3]=Ct.drawingBufferHeight}function pt(){Dn.tick+=1,Dn.time=Xt(),$t(),lr.procs.poll()}function At(){jn.refresh(),$t(),lr.procs.refresh(),Yt&&Yt.update()}function Xt(){return(ue()-fn)/1e3}if(!(Ce=function(Ce){var Ve,Ge,Qe,ot,it=Ce||{};Ce={};var mt=[],xt=[],Vt="undefined"==typeof window?1:window.devicePixelRatio,$t=!1,pt={},At=function(Ct){},Xt=function(){};if("string"==typeof it?Ve=document.querySelector(it):"object"==typeof it&&("string"==typeof it.nodeName&&"function"==typeof it.appendChild&&"function"==typeof it.getBoundingClientRect?Ve=it:"function"==typeof it.drawArrays||"function"==typeof it.drawElements?Qe=(ot=it).canvas:("gl"in it?ot=it.gl:"canvas"in it?Qe=_(it.canvas):"container"in it&&(Ge=_(it.container)),"attributes"in it&&(Ce=it.attributes),"extensions"in it&&(mt=M(it.extensions)),"optionalExtensions"in it&&(xt=M(it.optionalExtensions)),"onDone"in it&&(At=it.onDone),"profile"in it&&($t=!!it.profile),"pixelRatio"in it&&(Vt=+it.pixelRatio),"cachedCode"in it&&(pt=it.cachedCode))),Ve&&("canvas"===Ve.nodeName.toLowerCase()?Qe=Ve:Ge=Ve),!ot){if(!Qe){if(!(Ve=function(Ct,Pt,Be){function tt(){var Nt=window.innerWidth,Yt=window.innerHeight;Ct!==document.body&&(Nt=(Yt=Dt.getBoundingClientRect()).right-Yt.left,Yt=Yt.bottom-Yt.top),Dt.width=Be*Nt,Dt.height=Be*Yt}var dt,Dt=document.createElement("canvas");return G(Dt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Ct.appendChild(Dt),Ct===document.body&&(Dt.style.position="absolute",G(Ct.style,{margin:0,padding:0})),Ct!==document.body&&"function"==typeof ResizeObserver?(dt=new ResizeObserver(function(){setTimeout(tt)})).observe(Ct):window.addEventListener("resize",tt,!1),tt(),{canvas:Dt,onDestroy:function(){dt?dt.disconnect():window.removeEventListener("resize",tt),Ct.removeChild(Dt)}}}(Ge||document.body,0,Vt)))return null;Qe=Ve.canvas,Xt=Ve.onDestroy}void 0===Ce.premultipliedAlpha&&(Ce.premultipliedAlpha=!0),ot=function(Ct,Pt){function Be(tt){try{return Ct.getContext(tt,Pt)}catch(dt){return null}}return Be("webgl")||Be("experimental-webgl")||Be("webgl-experimental")}(Qe,Ce)}return ot?{gl:ot,canvas:Qe,container:Ge,extensions:mt,optionalExtensions:xt,pixelRatio:Vt,profile:$t,cachedCode:pt,onDone:At,onDestroy:Xt}:(Xt(),At("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(Ce)))return null;var Ct=Ce.gl,Pt=Ct.getContextAttributes();Ct.isContextLost();var Be=function(Jn,br){function Fr(Nr){var Hr;Nr=Nr.toLowerCase();try{Hr=cr[Nr]=Jn.getExtension(Nr)}catch(wr){}return!!Hr}for(var cr={},Qr=0;Qr<br.extensions.length;++Qr){var ui=br.extensions[Qr];if(!Fr(ui))return br.onDestroy(),br.onDone('"'+ui+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return br.optionalExtensions.forEach(Fr),{extensions:cr,restore:function(){Object.keys(cr).forEach(function(Nr){if(cr[Nr]&&!Fr(Nr))throw Error("(regl): error restoring extension "+Nr)})}}}(Ct,Ce);if(!Be)return null;var Jn,br,tt=(Jn={"":0},br=[""],{id:function(Fr){var cr=Jn[Fr];return cr||(cr=Jn[Fr]=br.length,br.push(Fr),cr)},str:function(Fr){return br[Fr]}}),dt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},Dt=Ce.cachedCode||{},Nt=Be.extensions,Yt=function(Jn,br){function Fr(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function cr(er,Ut,vn){var Tn=Nr.pop()||new Fr;Tn.startQueryIndex=er,Tn.endQueryIndex=Ut,Tn.sum=0,Tn.stats=vn,Hr.push(Tn)}if(!br.ext_disjoint_timer_query)return null;var Qr=[],ui=[],Nr=[],Hr=[],wr=[],un=[];return{beginQuery:function(er){var Ut=Qr.pop()||br.ext_disjoint_timer_query.createQueryEXT();br.ext_disjoint_timer_query.beginQueryEXT(35007,Ut),ui.push(Ut),cr(ui.length-1,ui.length,er)},endQuery:function(){br.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:cr,update:function(){var er,Ut;if(0!==(er=ui.length)){un.length=Math.max(un.length,er+1),wr.length=Math.max(wr.length,er+1),wr[0]=0;var vn=un[0]=0;for(Ut=er=0;Ut<ui.length;++Ut){var Tn=ui[Ut];br.ext_disjoint_timer_query.getQueryObjectEXT(Tn,34919)?(vn+=br.ext_disjoint_timer_query.getQueryObjectEXT(Tn,34918),Qr.push(Tn)):ui[er++]=Tn,wr[Ut+1]=vn,un[Ut+1]=er}for(ui.length=er,Ut=er=0;Ut<Hr.length;++Ut){var Qn=(vn=Hr[Ut]).startQueryIndex;vn.sum+=wr[Tn=vn.endQueryIndex]-wr[Qn],(Tn=un[Tn])===(Qn=un[Qn])?(vn.stats.gpuTime+=vn.sum/1e6,Nr.push(vn)):(vn.startQueryIndex=Qn,vn.endQueryIndex=Tn,Hr[er++]=vn)}Hr.length=er}},getNumPendingQueries:function(){return ui.length},clear:function(){Qr.push.apply(Qr,ui);for(var er=0;er<Qr.length;er++)br.ext_disjoint_timer_query.deleteQueryEXT(Qr[er]);ui.length=0,Qr.length=0},restore:function(){ui.length=0,Qr.length=0}}}(0,Nt),fn=ue(),nn=Ct.drawingBufferWidth,In=Ct.drawingBufferHeight,Dn={tick:0,time:0,viewportWidth:nn,viewportHeight:In,framebufferWidth:nn,framebufferHeight:In,drawingBufferWidth:nn,drawingBufferHeight:In,pixelRatio:Ce.pixelRatio},kn=(nn={elements:null,primitive:4,count:-1,offset:0,instances:-1},function(Ce,Ve){var Ge=1;Ve.ext_texture_filter_anisotropic&&(Ge=Ce.getParameter(34047));var Qe=1,ot=1;Ve.webgl_draw_buffers&&(Qe=Ce.getParameter(34852),ot=Ce.getParameter(36063));var it=!!Ve.oes_texture_float;if(it){it=Ce.createTexture(),Ce.bindTexture(3553,it),Ce.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var mt=Ce.createFramebuffer();if(Ce.bindFramebuffer(36160,mt),Ce.framebufferTexture2D(36160,36064,3553,it,0),Ce.bindTexture(3553,null),36053!==Ce.checkFramebufferStatus(36160))it=!1;else{Ce.viewport(0,0,1,1),Ce.clearColor(1,0,0,1),Ce.clear(16384);var xt=pe.allocType(5126,4);Ce.readPixels(0,0,1,1,6408,5126,xt),Ce.getError()?it=!1:(Ce.deleteFramebuffer(mt),Ce.deleteTexture(it),it=1===xt[0]),pe.freeType(xt)}}return xt=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(xt=Ce.createTexture(),mt=pe.allocType(5121,36),Ce.activeTexture(33984),Ce.bindTexture(34067,xt),Ce.texImage2D(34069,0,6408,3,3,0,6408,5121,mt),pe.freeType(mt),Ce.bindTexture(34067,null),Ce.deleteTexture(xt),xt=!Ce.getError()),{colorBits:[Ce.getParameter(3410),Ce.getParameter(3411),Ce.getParameter(3412),Ce.getParameter(3413)],depthBits:Ce.getParameter(3414),stencilBits:Ce.getParameter(3415),subpixelBits:Ce.getParameter(3408),extensions:Object.keys(Ve).filter(function(Vt){return!!Ve[Vt]}),maxAnisotropic:Ge,maxDrawbuffers:Qe,maxColorAttachments:ot,pointSizeDims:Ce.getParameter(33901),lineWidthDims:Ce.getParameter(33902),maxViewportDims:Ce.getParameter(3386),maxCombinedTextureUnits:Ce.getParameter(35661),maxCubeMapSize:Ce.getParameter(34076),maxRenderbufferSize:Ce.getParameter(34024),maxTextureUnits:Ce.getParameter(34930),maxTextureSize:Ce.getParameter(3379),maxAttributes:Ce.getParameter(34921),maxVertexUniforms:Ce.getParameter(36347),maxVertexTextureUnits:Ce.getParameter(35660),maxVaryingVectors:Ce.getParameter(36348),maxFragmentUniforms:Ce.getParameter(36349),glsl:Ce.getParameter(35724),renderer:Ce.getParameter(7937),vendor:Ce.getParameter(7936),version:Ce.getParameter(7938),readFloat:it,npotTextureCube:xt}}(Ct,Nt)),rn=function(Ce,Ve,Ge,Qe){function ot(At){this.id=Vt++,this.buffer=Ce.createBuffer(),this.type=At,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Ge.profile&&(this.stats={size:0})}function it(At,Xt,Ct){At.byteLength=Xt.byteLength,Ce.bufferData(At.type,Xt,Ct)}function mt(At,Xt,Ct,Pt,Be,tt){if(At.usage=Ct,Array.isArray(Xt)){if(At.dtype=Pt||5126,0<Xt.length)if(Array.isArray(Xt[0])){Be=ye(Xt);for(var dt=Pt=1;dt<Be.length;++dt)Pt*=Be[dt];At.dimension=Pt,it(At,Xt=je(Xt,Be,At.dtype),Ct),tt?At.persistentData=Xt:pe.freeType(Xt)}else"number"==typeof Xt[0]?(At.dimension=Be,s(Be=pe.allocType(At.dtype,Xt.length),Xt),it(At,Be,Ct),tt?At.persistentData=Be:pe.freeType(Be)):_e(Xt[0])&&(At.dimension=Xt[0].length,At.dtype=Pt||h(Xt[0])||5126,it(At,Xt=je(Xt,[Xt.length,Xt[0].length],At.dtype),Ct),tt?At.persistentData=Xt:pe.freeType(Xt))}else if(_e(Xt))At.dtype=Pt||h(Xt),At.dimension=Be,it(At,Xt,Ct),tt&&(At.persistentData=new Uint8Array(new Uint8Array(Xt.buffer)));else if(i(Xt)){var Dt=Xt.stride,Nt=(dt=Xt.offset,0),Yt=0,fn=0,nn=0;1===(Be=Xt.shape).length?(Nt=Be[0],Yt=1,fn=Dt[0],nn=0):2===Be.length&&(Nt=Be[0],Yt=Be[1],fn=Dt[0],nn=Dt[1]),At.dtype=Pt||h(Xt.data)||5126,At.dimension=Yt,d(Be=pe.allocType(At.dtype,Nt*Yt),Xt.data,Nt,Yt,fn,nn,dt),it(At,Be,Ct),tt?At.persistentData=Be:pe.freeType(Be)}else Xt instanceof ArrayBuffer&&(At.dtype=5121,At.dimension=Be,it(At,Xt,Ct),tt&&(At.persistentData=new Uint8Array(new Uint8Array(Xt))))}function xt(At){Ve.bufferCount--,Qe(At),Ce.deleteBuffer(At.buffer),At.buffer=null,delete $t[At.id]}var Vt=0,$t={};ot.prototype.bind=function(){Ce.bindBuffer(this.type,this.buffer)},ot.prototype.destroy=function(){xt(this)};var pt=[];return Ge.profile&&(Ve.getTotalBufferSize=function(){var At=0;return Object.keys($t).forEach(function(Xt){At+=$t[Xt].stats.size}),At}),{create:function(At,Xt,Ct,Pt){function Be(dt){var Dt=35044,Nt=null,Yt=0,fn=0,nn=1;return Array.isArray(dt)||_e(dt)||i(dt)||dt instanceof ArrayBuffer?Nt=dt:"number"==typeof dt?Yt=0|dt:dt&&("data"in dt&&(Nt=dt.data),"usage"in dt&&(Dt=Ie[dt.usage]),"type"in dt&&(fn=Le[dt.type]),"dimension"in dt&&(nn=0|dt.dimension),"length"in dt&&(Yt=0|dt.length)),tt.bind(),Nt?mt(tt,Nt,Dt,fn,nn,Pt):(Yt&&Ce.bufferData(tt.type,Yt,Dt),tt.dtype=fn||5121,tt.usage=Dt,tt.dimension=nn,tt.byteLength=Yt),Ge.profile&&(tt.stats.size=tt.byteLength*Me[tt.dtype]),Be}Ve.bufferCount++;var tt=new ot(Xt);return $t[tt.id]=tt,Ct||Be(At),Be._reglType="buffer",Be._buffer=tt,Be.subdata=function(dt,Dt){var Nt,Yt=0|(Dt||0);if(tt.bind(),_e(dt)||dt instanceof ArrayBuffer)Ce.bufferSubData(tt.type,Yt,dt);else if(Array.isArray(dt)){if(0<dt.length)if("number"==typeof dt[0]){var fn=pe.allocType(tt.dtype,dt.length);s(fn,dt),Ce.bufferSubData(tt.type,Yt,fn),pe.freeType(fn)}else(Array.isArray(dt[0])||_e(dt[0]))&&(Nt=ye(dt),fn=je(dt,Nt,tt.dtype),Ce.bufferSubData(tt.type,Yt,fn),pe.freeType(fn))}else if(i(dt)){var nn=dt.stride,In=fn=0,Dn=0,kn=0;1===(Nt=dt.shape).length?(fn=Nt[0],In=1,Dn=nn[0],kn=0):2===Nt.length&&(fn=Nt[0],In=Nt[1],Dn=nn[0],kn=nn[1]),Nt=Array.isArray(dt.data)?tt.dtype:h(dt.data),d(Nt=pe.allocType(Nt,fn*In),dt.data,fn,In,Dn,kn,dt.offset),Ce.bufferSubData(tt.type,Yt,Nt),pe.freeType(Nt)}return Be},Ge.profile&&(Be.stats=tt.stats),Be.destroy=function(){xt(tt)},Be},createStream:function(At,Xt){var Ct=pt.pop();return Ct||(Ct=new ot(At)),Ct.bind(),mt(Ct,Xt,35040,0,1,!1),Ct},destroyStream:function(At){pt.push(At)},clear:function(){me($t).forEach(xt),pt.forEach(xt)},getBuffer:function(At){return At&&At._buffer instanceof ot?At._buffer:null},restore:function(){me($t).forEach(function(At){At.buffer=Ce.createBuffer(),Ce.bindBuffer(At.type,At.buffer),Ce.bufferData(At.type,At.persistentData||At.byteLength,At.usage)})},_initBuffer:mt}}(Ct,dt,Ce,function(Jn){return gn.destroyBuffer(Jn)}),pn=function(Ce,Ve,Ge,Qe){function ot(At){this.id=Vt++,xt[this.id]=this,this.buffer=At,this.primType=4,this.type=this.vertCount=0}function it(At,Xt,Ct,Pt,Be,tt,dt){var Dt;if(At.buffer.bind(),Xt?((Dt=dt)||_e(Xt)&&(!i(Xt)||_e(Xt.data))||(Dt=Ve.oes_element_index_uint?5125:5123),Ge._initBuffer(At.buffer,Xt,Ct,Dt,3)):(Ce.bufferData(34963,tt,Ct),At.buffer.dtype=Dt||5121,At.buffer.usage=Ct,At.buffer.dimension=3,At.buffer.byteLength=tt),Dt=dt,!dt){switch(At.buffer.dtype){case 5121:case 5120:Dt=5121;break;case 5123:case 5122:Dt=5123;break;case 5125:case 5124:Dt=5125}At.buffer.dtype=Dt}At.type=Dt,0>(Xt=Be)&&(Xt=At.buffer.byteLength,5123===Dt?Xt>>=1:5125===Dt&&(Xt>>=2)),At.vertCount=Xt,Xt=Pt,0>Pt&&(Xt=4,1===(Pt=At.buffer.dimension)&&(Xt=0),2===Pt&&(Xt=1),3===Pt&&(Xt=4)),At.primType=Xt}function mt(At){Qe.elementsCount--,delete xt[At.id],At.buffer.destroy(),At.buffer=null}var xt={},Vt=0,$t={uint8:5121,uint16:5123};Ve.oes_element_index_uint&&($t.uint32=5125),ot.prototype.bind=function(){this.buffer.bind()};var pt=[];return{create:function(At,Xt){function Ct(tt){if(tt)if("number"==typeof tt)Pt(tt),Be.primType=4,Be.vertCount=0|tt,Be.type=5121;else{var dt=null,Dt=35044,Nt=-1,Yt=-1,fn=0,nn=0;Array.isArray(tt)||_e(tt)||i(tt)?dt=tt:("data"in tt&&(dt=tt.data),"usage"in tt&&(Dt=Ie[tt.usage]),"primitive"in tt&&(Nt=Oe[tt.primitive]),"count"in tt&&(Yt=0|tt.count),"type"in tt&&(nn=$t[tt.type]),"length"in tt?fn=0|tt.length:(fn=Yt,5123===nn||5122===nn?fn*=2:5125!==nn&&5124!==nn||(fn*=4))),it(Be,dt,Dt,Nt,Yt,fn,nn)}else Pt(),Be.primType=4,Be.vertCount=0,Be.type=5121;return Ct}var Pt=Ge.create(null,34963,!0),Be=new ot(Pt._buffer);return Qe.elementsCount++,Ct(At),Ct._reglType="elements",Ct._elements=Be,Ct.subdata=function(tt,dt){return Pt.subdata(tt,dt),Ct},Ct.destroy=function(){mt(Be)},Ct},createStream:function(At){var Xt=pt.pop();return Xt||(Xt=new ot(Ge.create(null,34963,!0,!1)._buffer)),it(Xt,At,35040,-1,-1,0,0),Xt},destroyStream:function(At){pt.push(At)},getElements:function(At){return"function"==typeof At&&At._elements instanceof ot?At._elements:null},clear:function(){me(xt).forEach(mt)}}}(Ct,Nt,rn,dt),gn=function(Ce,Ve,Ge,Qe,ot,it,mt){function xt(){this.id=++pt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var Ct=Ve.oes_vertex_array_object;this.vao=Ct?Ct.createVertexArrayOES():null,At[this.id]=this,this.buffers=[]}var Vt=Ge.maxAttributes,$t=Array(Vt);for(Ge=0;Ge<Vt;++Ge)$t[Ge]=new N;var pt=0,At={},Xt={Record:N,scope:{},state:$t,currentVAO:null,targetVAO:null,restore:Ve.oes_vertex_array_object?function(){Ve.oes_vertex_array_object&&me(At).forEach(function(Ct){Ct.refresh()})}:function(){},createVAO:function(Ct){function Pt(tt){var dt;Array.isArray(tt)?(dt=tt,Be.elements&&Be.ownsElements&&Be.elements.destroy(),Be.elements=null,Be.ownsElements=!1,Be.offset=0,Be.count=0,Be.instances=-1,Be.primitive=4):(tt.elements?(dt=tt.elements,Be.ownsElements?("function"==typeof dt&&"elements"===dt._reglType?Be.elements.destroy():Be.elements(dt),Be.ownsElements=!1):it.getElements(tt.elements)?(Be.elements=tt.elements,Be.ownsElements=!1):(Be.elements=it.create(tt.elements),Be.ownsElements=!0)):(Be.elements=null,Be.ownsElements=!1),dt=tt.attributes,Be.offset=0,Be.count=-1,Be.instances=-1,Be.primitive=4,Be.elements&&(Be.count=Be.elements._elements.vertCount,Be.primitive=Be.elements._elements.primType),"offset"in tt&&(Be.offset=0|tt.offset),"count"in tt&&(Be.count=0|tt.count),"instances"in tt&&(Be.instances=0|tt.instances),"primitive"in tt&&(Be.primitive=Oe[tt.primitive])),tt={};var Dt=Be.attributes;Dt.length=dt.length;for(var Nt=0;Nt<dt.length;++Nt){var Yt,fn=dt[Nt],nn=Dt[Nt]=new N,In=fn.data||fn;Array.isArray(In)||_e(In)||i(In)?(Be.buffers[Nt]&&(Yt=Be.buffers[Nt],_e(In)&&Yt._buffer.byteLength>=In.byteLength?Yt.subdata(In):(Yt.destroy(),Be.buffers[Nt]=null)),Be.buffers[Nt]||(Yt=Be.buffers[Nt]=ot.create(fn,34962,!1,!0)),nn.buffer=ot.getBuffer(Yt),nn.size=0|nn.buffer.dimension,nn.normalized=!1,nn.type=nn.buffer.dtype,nn.offset=0,nn.stride=0,nn.divisor=0,nn.state=1,tt[Nt]=1):ot.getBuffer(fn)?(nn.buffer=ot.getBuffer(fn),nn.size=0|nn.buffer.dimension,nn.normalized=!1,nn.type=nn.buffer.dtype,nn.offset=0,nn.stride=0,nn.divisor=0,nn.state=1):ot.getBuffer(fn.buffer)?(nn.buffer=ot.getBuffer(fn.buffer),nn.size=0|(+fn.size||nn.buffer.dimension),nn.normalized=!!fn.normalized||!1,nn.type="type"in fn?Le[fn.type]:nn.buffer.dtype,nn.offset=0|(fn.offset||0),nn.stride=0|(fn.stride||0),nn.divisor=0|(fn.divisor||0),nn.state=1):"x"in fn&&(nn.x=+fn.x||0,nn.y=+fn.y||0,nn.z=+fn.z||0,nn.w=+fn.w||0,nn.state=2)}for(Yt=0;Yt<Be.buffers.length;++Yt)!tt[Yt]&&Be.buffers[Yt]&&(Be.buffers[Yt].destroy(),Be.buffers[Yt]=null);return Be.refresh(),Pt}var Be=new xt;return Qe.vaoCount+=1,Pt.destroy=function(){for(var tt=0;tt<Be.buffers.length;++tt)Be.buffers[tt]&&Be.buffers[tt].destroy();Be.buffers.length=0,Be.ownsElements&&(Be.elements.destroy(),Be.elements=null,Be.ownsElements=!1),Be.destroy()},Pt._vao=Be,Pt._reglType="vao",Pt(Ct)},getVAO:function(Ct){return"function"==typeof Ct&&Ct._vao?Ct._vao:null},destroyBuffer:function(Ct){for(var Pt=0;Pt<$t.length;++Pt){var Be=$t[Pt];Be.buffer===Ct&&(Ce.disableVertexAttribArray(Pt),Be.buffer=null)}},setVAO:Ve.oes_vertex_array_object?function(Ct){Ct!==Xt.currentVAO&&(Ve.oes_vertex_array_object.bindVertexArrayOES(Ct?Ct.vao:null),Xt.currentVAO=Ct)}:function(Ct){if(Ct!==Xt.currentVAO){if(Ct)Ct.bindAttrs();else{for(var Pt=Ve.angle_instanced_arrays,Be=0;Be<$t.length;++Be){var tt=$t[Be];tt.buffer?(Ce.enableVertexAttribArray(Be),tt.buffer.bind(),Ce.vertexAttribPointer(Be,tt.size,tt.type,tt.normalized,tt.stride,tt.offfset),Pt&&tt.divisor&&Pt.vertexAttribDivisorANGLE(Be,tt.divisor)):(Ce.disableVertexAttribArray(Be),Ce.vertexAttrib4f(Be,tt.x,tt.y,tt.z,tt.w))}Ce.bindBuffer(34963,mt.elements?mt.elements.buffer.buffer:null)}Xt.currentVAO=Ct}},clear:Ve.oes_vertex_array_object?function(){me(At).forEach(function(Ct){Ct.destroy()})}:function(){}};return xt.prototype.bindAttrs=function(){for(var Ct=Ve.angle_instanced_arrays,Pt=this.attributes,Be=0;Be<Pt.length;++Be){var tt=Pt[Be];tt.buffer?(Ce.enableVertexAttribArray(Be),Ce.bindBuffer(34962,tt.buffer.buffer),Ce.vertexAttribPointer(Be,tt.size,tt.type,tt.normalized,tt.stride,tt.offset),Ct&&tt.divisor&&Ct.vertexAttribDivisorANGLE(Be,tt.divisor)):(Ce.disableVertexAttribArray(Be),Ce.vertexAttrib4f(Be,tt.x,tt.y,tt.z,tt.w))}for(Ct=Pt.length;Ct<Vt;++Ct)Ce.disableVertexAttribArray(Ct);(Ct=it.getElements(this.elements))?Ce.bindBuffer(34963,Ct.buffer.buffer):Ce.bindBuffer(34963,null)},xt.prototype.refresh=function(){var Ct=Ve.oes_vertex_array_object;Ct&&(Ct.bindVertexArrayOES(this.vao),this.bindAttrs(),Xt.currentVAO=null,Ct.bindVertexArrayOES(null))},xt.prototype.destroy=function(){if(this.vao){var Ct=Ve.oes_vertex_array_object;this===Xt.currentVAO&&(Xt.currentVAO=null,Ct.bindVertexArrayOES(null)),Ct.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),At[this.id]&&(delete At[this.id],--Qe.vaoCount)},Xt}(Ct,Nt,kn,dt,rn,pn,nn),Pn=function(Ce,Ve,Ge,Qe){function ot(Pt,Be,tt,dt){this.name=Pt,this.id=Be,this.location=tt,this.info=dt}function it(Pt,Be){for(var tt=0;tt<Pt.length;++tt)if(Pt[tt].id===Be.id)return void(Pt[tt].location=Be.location);Pt.push(Be)}function mt(Pt,Be,tt){if(!(Dt=(tt=35632===Pt?$t:pt)[Be])){var dt=Ve.str(Be),Dt=Ce.createShader(Pt);Ce.shaderSource(Dt,dt),Ce.compileShader(Dt),tt[Be]=Dt}return Dt}function xt(Pt,Be){this.id=Ct++,this.fragId=Pt,this.vertId=Be,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,Qe.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Vt(Pt,Be,tt){var dt;dt=mt(35632,Pt.fragId);var Dt=mt(35633,Pt.vertId);if(Be=Pt.program=Ce.createProgram(),Ce.attachShader(Be,dt),Ce.attachShader(Be,Dt),tt)for(dt=0;dt<tt.length;++dt)Ce.bindAttribLocation(Be,(Dt=tt[dt])[0],Dt[1]);Ce.linkProgram(Be),Dt=Ce.getProgramParameter(Be,35718),Qe.profile&&(Pt.stats.uniformsCount=Dt);var Nt=Pt.uniforms;for(dt=0;dt<Dt;++dt)if(tt=Ce.getActiveUniform(Be,dt))if(1<tt.size)for(var Yt=0;Yt<tt.size;++Yt){var fn=tt.name.replace("[0]","["+Yt+"]");it(Nt,new ot(fn,Ve.id(fn),Ce.getUniformLocation(Be,fn),tt))}else it(Nt,new ot(tt.name,Ve.id(tt.name),Ce.getUniformLocation(Be,tt.name),tt));for(Dt=Ce.getProgramParameter(Be,35721),Qe.profile&&(Pt.stats.attributesCount=Dt),Pt=Pt.attributes,dt=0;dt<Dt;++dt)(tt=Ce.getActiveAttrib(Be,dt))&&it(Pt,new ot(tt.name,Ve.id(tt.name),Ce.getAttribLocation(Be,tt.name),tt))}var $t={},pt={},At={},Xt=[],Ct=0;return Qe.profile&&(Ge.getMaxUniformsCount=function(){var Pt=0;return Xt.forEach(function(Be){Be.stats.uniformsCount>Pt&&(Pt=Be.stats.uniformsCount)}),Pt},Ge.getMaxAttributesCount=function(){var Pt=0;return Xt.forEach(function(Be){Be.stats.attributesCount>Pt&&(Pt=Be.stats.attributesCount)}),Pt}),{clear:function(){var Pt=Ce.deleteShader.bind(Ce);me($t).forEach(Pt),$t={},me(pt).forEach(Pt),pt={},Xt.forEach(function(Be){Ce.deleteProgram(Be.program)}),Xt.length=0,At={},Ge.shaderCount=0},program:function(Pt,Be,tt,dt){var Dt=At[Be];Dt||(Dt=At[Be]={});var Nt=Dt[Pt];if(Nt&&(Nt.refCount++,!dt))return Nt;var Yt=new xt(Be,Pt);return Ge.shaderCount++,Vt(Yt,tt,dt),Nt||(Dt[Pt]=Yt),Xt.push(Yt),G(Yt,{destroy:function(){if(Yt.refCount--,0>=Yt.refCount){Ce.deleteProgram(Yt.program);var fn=Xt.indexOf(Yt);Xt.splice(fn,1),Ge.shaderCount--}0>=Dt[Yt.vertId].refCount&&(Ce.deleteShader(pt[Yt.vertId]),delete pt[Yt.vertId],delete At[Yt.fragId][Yt.vertId]),Object.keys(At[Yt.fragId]).length||(Ce.deleteShader($t[Yt.fragId]),delete $t[Yt.fragId],delete At[Yt.fragId])}})},restore:function(){$t={},pt={};for(var Pt=0;Pt<Xt.length;++Pt)Vt(Xt[Pt],null,Xt[Pt].attributes.map(function(Be){return[Be.location,Be.name]}))},shader:mt,frag:-1,vert:-1}}(Ct,tt,dt,Ce),jn=function(Ce,Ve,Ge,Qe,ot,it,mt){function xt(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function Vt(un,er){un.internalformat=er.internalformat,un.format=er.format,un.type=er.type,un.compressed=er.compressed,un.premultiplyAlpha=er.premultiplyAlpha,un.flipY=er.flipY,un.unpackAlignment=er.unpackAlignment,un.colorSpace=er.colorSpace,un.width=er.width,un.height=er.height,un.channels=er.channels}function $t(un,er){if("object"==typeof er&&er){"premultiplyAlpha"in er&&(un.premultiplyAlpha=er.premultiplyAlpha),"flipY"in er&&(un.flipY=er.flipY),"alignment"in er&&(un.unpackAlignment=er.alignment),"colorSpace"in er&&(un.colorSpace=lr[er.colorSpace]),"type"in er&&(un.type=kr[er.type]);var Ut=un.width,vn=un.height,Tn=un.channels,Qn=!1;"shape"in er?(Ut=er.shape[0],vn=er.shape[1],3===er.shape.length&&(Tn=er.shape[2],Qn=!0)):("radius"in er&&(Ut=vn=er.radius),"width"in er&&(Ut=er.width),"height"in er&&(vn=er.height),"channels"in er&&(Tn=er.channels,Qn=!0)),un.width=0|Ut,un.height=0|vn,un.channels=0|Tn,Ut=!1,"format"in er&&(vn=un.internalformat=Xr[Ut=er.format],un.format=Fr[vn],Ut in kr&&!("type"in er)&&(un.type=kr[Ut]),Ut in sr&&(un.compressed=!0),Ut=!0),!Qn&&Ut?un.channels=Xe[un.format]:Qn&&!Ut&&un.channels!==qe[un.format]&&(un.format=un.internalformat=qe[un.channels])}}function pt(un){Ce.pixelStorei(37440,un.flipY),Ce.pixelStorei(37441,un.premultiplyAlpha),Ce.pixelStorei(37443,un.colorSpace),Ce.pixelStorei(3317,un.unpackAlignment)}function At(){xt.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Xt(un,er){var Ut=null;if(k(er)?Ut=er:er&&($t(un,er),"x"in er&&(un.xOffset=0|er.x),"y"in er&&(un.yOffset=0|er.y),k(er.data)&&(Ut=er.data)),er.copy){var vn=ot.viewportWidth,Tn=ot.viewportHeight;un.width=un.width||vn-un.xOffset,un.height=un.height||Tn-un.yOffset,un.needsCopy=!0}else if(Ut){if(_e(Ut))un.channels=un.channels||4,un.data=Ut,"type"in er||5121!==un.type||(un.type=0|De[Object.prototype.toString.call(Ut)]);else if(w(Ut)){switch(un.channels=un.channels||4,Tn=(vn=Ut).length,un.type){case 5121:case 5123:case 5125:case 5126:(Tn=pe.allocType(un.type,Tn)).set(vn),un.data=Tn;break;case 36193:un.data=g(vn)}un.alignment=1,un.needsFree=!0}else if(i(Ut)){vn=Ut.data,Array.isArray(vn)||5121!==un.type||(un.type=0|De[Object.prototype.toString.call(vn)]);var Qn,Zn,$n,Hn,Rn=Ut.stride;3===(Tn=Ut.shape).length?($n=Tn[2],Hn=Rn[2]):Hn=$n=1,Qn=Tn[0],Zn=Tn[1],Tn=Rn[0],Rn=Rn[1],un.alignment=1,un.width=Qn,un.height=Zn,un.channels=$n,un.format=un.internalformat=qe[$n],un.needsFree=!0,Qn=Hn,Ut=Ut.offset;for(var Fn=pe.allocType(36193===un.type?5126:un.type,($n=un.width)*(Hn=un.height)*(Zn=un.channels)),zn=0,Yn=0;Yn<Hn;++Yn)for(var nr=0;nr<$n;++nr)for(var hr=0;hr<Zn;++hr)Fn[zn++]=vn[Tn*nr+Rn*Yn+Qn*hr+Ut];C(un,Fn)}else if(A(Ut)===lt||A(Ut)===He||A(Ut)===$e)un.element=A(Ut)===lt||A(Ut)===He?Ut:Ut.canvas,un.width=un.element.width,un.height=un.element.height,un.channels=4;else if(A(Ut)===et)un.element=Ut,un.width=Ut.width,un.height=Ut.height,un.channels=4;else if(A(Ut)===nt)un.element=Ut,un.width=Ut.naturalWidth,un.height=Ut.naturalHeight,un.channels=4;else if(A(Ut)===ct)un.element=Ut,un.width=Ut.videoWidth,un.height=Ut.videoHeight,un.channels=4;else if(c(Ut)){for(vn=un.width||Ut[0].length,Tn=un.height||Ut.length,Rn=un.channels,Rn=m(Ut[0][0])?Rn||Ut[0][0].length:Rn||1,Qn=we.shape(Ut),$n=1,Hn=0;Hn<Qn.length;++Hn)$n*=Qn[Hn];$n=pe.allocType(36193===un.type?5126:un.type,$n),we.flatten(Ut,Qn,"",$n),C(un,$n),un.alignment=1,un.width=vn,un.height=Tn,un.channels=Rn,un.format=un.internalformat=qe[Rn],un.needsFree=!0}}else un.width=un.width||1,un.height=un.height||1,un.channels=un.channels||4}function Ct(un,er,Ut,vn,Tn){var Qn=un.element,Zn=un.data,$n=un.internalformat,Hn=un.format,Rn=un.type,Fn=un.width,zn=un.height;pt(un),Qn?Ce.texSubImage2D(er,Tn,Ut,vn,Hn,Rn,Qn):un.compressed?Ce.compressedTexSubImage2D(er,Tn,Ut,vn,$n,Fn,zn,Zn):un.needsCopy?(Qe(),Ce.copyTexSubImage2D(er,Tn,Ut,vn,un.xOffset,un.yOffset,Fn,zn)):Ce.texSubImage2D(er,Tn,Ut,vn,Fn,zn,Hn,Rn,Zn)}function Pt(){return cr.pop()||new At}function Be(un){un.needsFree&&pe.freeType(un.data),At.call(un),cr.push(un)}function tt(){xt.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function dt(un,er,Ut){var vn=un.images[0]=Pt();un.mipmask=1,vn.width=un.width=er,vn.height=un.height=Ut,vn.channels=un.channels=4}function Dt(un,er){var Ut=null;if(k(er))Vt(Ut=un.images[0]=Pt(),un),Xt(Ut,er),un.mipmask=1;else if($t(un,er),Array.isArray(er.mipmap))for(var vn=er.mipmap,Tn=0;Tn<vn.length;++Tn)Vt(Ut=un.images[Tn]=Pt(),un),Ut.width>>=Tn,Ut.height>>=Tn,Xt(Ut,vn[Tn]),un.mipmask|=1<<Tn;else Vt(Ut=un.images[0]=Pt(),un),Xt(Ut,er),un.mipmask=1;Vt(un,un.images[0])}function Nt(un,er){for(var Ut=un.images,vn=0;vn<Ut.length&&Ut[vn];++vn){var Tn=Ut[vn],Qn=er,Zn=vn,$n=Tn.element,Hn=Tn.data,Rn=Tn.internalformat,Fn=Tn.format,zn=Tn.type,Yn=Tn.width,nr=Tn.height;pt(Tn),$n?Ce.texImage2D(Qn,Zn,Fn,Fn,zn,$n):Tn.compressed?Ce.compressedTexImage2D(Qn,Zn,Rn,Yn,nr,0,Hn):Tn.needsCopy?(Qe(),Ce.copyTexImage2D(Qn,Zn,Fn,Tn.xOffset,Tn.yOffset,Yn,nr,0)):Ce.texImage2D(Qn,Zn,Fn,Yn,nr,0,Fn,zn,Hn||null)}}function Yt(){var un=Qr.pop()||new tt;xt.call(un);for(var er=un.mipmask=0;16>er;++er)un.images[er]=null;return un}function fn(un){for(var er=un.images,Ut=0;Ut<er.length;++Ut)er[Ut]&&Be(er[Ut]),er[Ut]=null;Qr.push(un)}function nn(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function In(un,er){"min"in er&&(un.minFilter=rr[er.min],0<=Ue.indexOf(un.minFilter)&&!("faces"in er)&&(un.genMipmaps=!0)),"mag"in er&&(un.magFilter=Kn[er.mag]);var Ut=un.wrapS,vn=un.wrapT;if("wrap"in er){var Tn=er.wrap;"string"==typeof Tn?Ut=vn=jn[Tn]:Array.isArray(Tn)&&(Ut=jn[Tn[0]],vn=jn[Tn[1]])}else"wrapS"in er&&(Ut=jn[er.wrapS]),"wrapT"in er&&(vn=jn[er.wrapT]);if(un.wrapS=Ut,un.wrapT=vn,"anisotropic"in er&&(un.anisotropic=er.anisotropic),"mipmap"in er){switch(Ut=!1,typeof er.mipmap){case"string":un.mipmapHint=Pn[er.mipmap],Ut=un.genMipmaps=!0;break;case"boolean":Ut=un.genMipmaps=er.mipmap;break;case"object":un.genMipmaps=!1,Ut=!0}!Ut||"min"in er||(un.minFilter=9984)}}function Dn(un,er){Ce.texParameteri(er,10241,un.minFilter),Ce.texParameteri(er,10240,un.magFilter),Ce.texParameteri(er,10242,un.wrapS),Ce.texParameteri(er,10243,un.wrapT),Ve.ext_texture_filter_anisotropic&&Ce.texParameteri(er,34046,un.anisotropic),un.genMipmaps&&(Ce.hint(33170,un.mipmapHint),Ce.generateMipmap(er))}function kn(un){xt.call(this),this.mipmask=0,this.internalformat=6408,this.id=ui++,this.refCount=1,this.target=un,this.texture=Ce.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new nn,mt.profile&&(this.stats={size:0})}function rn(un){Ce.activeTexture(33984),Ce.bindTexture(un.target,un.texture)}function pn(){var un=wr[0];un?Ce.bindTexture(un.target,un.texture):Ce.bindTexture(3553,null)}function gn(un){var er=un.texture,Ut=un.unit,vn=un.target;0<=Ut&&(Ce.activeTexture(33984+Ut),Ce.bindTexture(vn,null),wr[Ut]=null),Ce.deleteTexture(er),un.texture=null,un.params=null,un.pixels=null,un.refCount=0,delete Nr[un.id],it.textureCount--}var Pn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},jn={repeat:10497,clamp:33071,mirror:33648},Kn={nearest:9728,linear:9729},rr=G({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Kn),lr={none:0,browser:37444},kr={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},Xr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},sr={};Ve.ext_srgb&&(Xr.srgb=35904,Xr.srgba=35906),Ve.oes_texture_float&&(kr.float32=kr.float=5126),Ve.oes_texture_half_float&&(kr.float16=kr["half float"]=36193),Ve.webgl_depth_texture&&(G(Xr,{depth:6402,"depth stencil":34041}),G(kr,{uint16:5123,uint32:5125,"depth stencil":34042})),Ve.webgl_compressed_texture_s3tc&&G(sr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),Ve.webgl_compressed_texture_atc&&G(sr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),Ve.webgl_compressed_texture_pvrtc&&G(sr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),Ve.webgl_compressed_texture_etc1&&(sr["rgb etc1"]=36196);var oi=Array.prototype.slice.call(Ce.getParameter(34467));Object.keys(sr).forEach(function(un){var er=sr[un];0<=oi.indexOf(er)&&(Xr[un]=er)});var Gr=Object.keys(Xr);Ge.textureFormats=Gr;var Lr=[];Object.keys(Xr).forEach(function(un){Lr[Xr[un]]=un});var Jr=[];Object.keys(kr).forEach(function(un){Jr[kr[un]]=un});var Mi=[];Object.keys(Kn).forEach(function(un){Mi[Kn[un]]=un});var Jn=[];Object.keys(rr).forEach(function(un){Jn[rr[un]]=un});var br=[];Object.keys(jn).forEach(function(un){br[jn[un]]=un});var Fr=Gr.reduce(function(un,er){var Ut=Xr[er];return un[Ut]=6409===Ut||6406===Ut||6409===Ut||6410===Ut||6402===Ut||34041===Ut||Ve.ext_srgb&&(35904===Ut||35906===Ut)?Ut:32855===Ut||0<=er.indexOf("rgba")?6408:6407,un},{}),cr=[],Qr=[],ui=0,Nr={},Hr=Ge.maxTextureUnits,wr=Array(Hr).map(function(){return null});return G(kn.prototype,{bind:function(){this.bindCount+=1;var un=this.unit;if(0>un){for(var er=0;er<Hr;++er){var Ut=wr[er];if(Ut){if(0<Ut.bindCount)continue;Ut.unit=-1}wr[er]=this,un=er;break}mt.profile&&it.maxTextureUnits<un+1&&(it.maxTextureUnits=un+1),this.unit=un,Ce.activeTexture(33984+un),Ce.bindTexture(this.target,this.texture)}return un},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&gn(this)}}),mt.profile&&(it.getTotalTextureSize=function(){var un=0;return Object.keys(Nr).forEach(function(er){un+=Nr[er].stats.size}),un}),{create2D:function(un,er){function Ut(Tn,Qn){var Zn=vn.texInfo;nn.call(Zn);var $n=Yt();return"number"==typeof Tn?dt($n,0|Tn,"number"==typeof Qn?0|Qn:0|Tn):Tn?(In(Zn,Tn),Dt($n,Tn)):dt($n,1,1),Zn.genMipmaps&&($n.mipmask=($n.width<<1)-1),vn.mipmask=$n.mipmask,Vt(vn,$n),vn.internalformat=$n.internalformat,Ut.width=$n.width,Ut.height=$n.height,rn(vn),Nt($n,3553),Dn(Zn,3553),pn(),fn($n),mt.profile&&(vn.stats.size=E(vn.internalformat,vn.type,$n.width,$n.height,Zn.genMipmaps,!1)),Ut.format=Lr[vn.internalformat],Ut.type=Jr[vn.type],Ut.mag=Mi[Zn.magFilter],Ut.min=Jn[Zn.minFilter],Ut.wrapS=br[Zn.wrapS],Ut.wrapT=br[Zn.wrapT],Ut}var vn=new kn(3553);return Nr[vn.id]=vn,it.textureCount++,Ut(un,er),Ut.subimage=function(Tn,Qn,Zn,$n){Qn|=0,Zn|=0,$n|=0;var Hn=Pt();return Vt(Hn,vn),Hn.width=0,Hn.height=0,Xt(Hn,Tn),Hn.width=Hn.width||(vn.width>>$n)-Qn,Hn.height=Hn.height||(vn.height>>$n)-Zn,rn(vn),Ct(Hn,3553,Qn,Zn,$n),pn(),Be(Hn),Ut},Ut.resize=function(Tn,Qn){var Zn=0|Tn,$n=0|Qn||Zn;if(Zn===vn.width&&$n===vn.height)return Ut;Ut.width=vn.width=Zn,Ut.height=vn.height=$n,rn(vn);for(var Hn=0;vn.mipmask>>Hn;++Hn){var Rn=Zn>>Hn,Fn=$n>>Hn;if(!Rn||!Fn)break;Ce.texImage2D(3553,Hn,vn.format,Rn,Fn,0,vn.format,vn.type,null)}return pn(),mt.profile&&(vn.stats.size=E(vn.internalformat,vn.type,Zn,$n,!1,!1)),Ut},Ut._reglType="texture2d",Ut._texture=vn,mt.profile&&(Ut.stats=vn.stats),Ut.destroy=function(){vn.decRef()},Ut},createCube:function(un,er,Ut,vn,Tn,Qn){function Zn(Rn,Fn,zn,Yn,nr,hr){var _r,Tr=$n.texInfo;for(nn.call(Tr),_r=0;6>_r;++_r)Hn[_r]=Yt();if("number"!=typeof Rn&&Rn){if("object"==typeof Rn)if(Fn)Dt(Hn[0],Rn),Dt(Hn[1],Fn),Dt(Hn[2],zn),Dt(Hn[3],Yn),Dt(Hn[4],nr),Dt(Hn[5],hr);else if(In(Tr,Rn),$t($n,Rn),"faces"in Rn)for(Rn=Rn.faces,_r=0;6>_r;++_r)Vt(Hn[_r],$n),Dt(Hn[_r],Rn[_r]);else for(_r=0;6>_r;++_r)Dt(Hn[_r],Rn)}else for(Rn=0|Rn||1,_r=0;6>_r;++_r)dt(Hn[_r],Rn,Rn);for(Vt($n,Hn[0]),$n.mipmask=Tr.genMipmaps?(Hn[0].width<<1)-1:Hn[0].mipmask,$n.internalformat=Hn[0].internalformat,Zn.width=Hn[0].width,Zn.height=Hn[0].height,rn($n),_r=0;6>_r;++_r)Nt(Hn[_r],34069+_r);for(Dn(Tr,34067),pn(),mt.profile&&($n.stats.size=E($n.internalformat,$n.type,Zn.width,Zn.height,Tr.genMipmaps,!0)),Zn.format=Lr[$n.internalformat],Zn.type=Jr[$n.type],Zn.mag=Mi[Tr.magFilter],Zn.min=Jn[Tr.minFilter],Zn.wrapS=br[Tr.wrapS],Zn.wrapT=br[Tr.wrapT],_r=0;6>_r;++_r)fn(Hn[_r]);return Zn}var $n=new kn(34067);Nr[$n.id]=$n,it.cubeCount++;var Hn=Array(6);return Zn(un,er,Ut,vn,Tn,Qn),Zn.subimage=function(Rn,Fn,zn,Yn,nr){zn|=0,Yn|=0,nr|=0;var hr=Pt();return Vt(hr,$n),hr.width=0,hr.height=0,Xt(hr,Fn),hr.width=hr.width||($n.width>>nr)-zn,hr.height=hr.height||($n.height>>nr)-Yn,rn($n),Ct(hr,34069+Rn,zn,Yn,nr),pn(),Be(hr),Zn},Zn.resize=function(Rn){if((Rn|=0)!==$n.width){Zn.width=$n.width=Rn,Zn.height=$n.height=Rn,rn($n);for(var Fn=0;6>Fn;++Fn)for(var zn=0;$n.mipmask>>zn;++zn)Ce.texImage2D(34069+Fn,zn,$n.format,Rn>>zn,Rn>>zn,0,$n.format,$n.type,null);return pn(),mt.profile&&($n.stats.size=E($n.internalformat,$n.type,Zn.width,Zn.height,!1,!0)),Zn}},Zn._reglType="textureCube",Zn._texture=$n,mt.profile&&(Zn.stats=$n.stats),Zn.destroy=function(){$n.decRef()},Zn},clear:function(){for(var un=0;un<Hr;++un)Ce.activeTexture(33984+un),Ce.bindTexture(3553,null),wr[un]=null;me(Nr).forEach(gn),it.cubeCount=0,it.textureCount=0},getTexture:function(un){return null},restore:function(){for(var un=0;un<Hr;++un){var er=wr[un];er&&(er.bindCount=0,er.unit=-1,wr[un]=null)}me(Nr).forEach(function(Ut){Ut.texture=Ce.createTexture(),Ce.bindTexture(Ut.target,Ut.texture);for(var vn=0;32>vn;++vn)if(0!=(Ut.mipmask&1<<vn))if(3553===Ut.target)Ce.texImage2D(3553,vn,Ut.internalformat,Ut.width>>vn,Ut.height>>vn,0,Ut.internalformat,Ut.type,null);else for(var Tn=0;6>Tn;++Tn)Ce.texImage2D(34069+Tn,vn,Ut.internalformat,Ut.width>>vn,Ut.height>>vn,0,Ut.internalformat,Ut.type,null);Dn(Ut.texInfo,Ut.target)})},refresh:function(){for(var un=0;un<Hr;++un){var er=wr[un];er&&(er.bindCount=0,er.unit=-1,wr[un]=null),Ce.activeTexture(33984+un),Ce.bindTexture(3553,null),Ce.bindTexture(34067,null)}}}}(Ct,Nt,kn,function(){lr.procs.poll()},Dn,dt,Ce),Kn=function(Ce,Ve,Ge,Qe,ot){function it(At){this.id=$t++,this.refCount=1,this.renderbuffer=At,this.format=32854,this.height=this.width=0,ot.profile&&(this.stats={size:0})}function mt(At){var Xt=At.renderbuffer;Ce.bindRenderbuffer(36161,null),Ce.deleteRenderbuffer(Xt),At.renderbuffer=null,At.refCount=0,delete pt[At.id],Qe.renderbufferCount--}var xt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};Ve.ext_srgb&&(xt.srgba=35907),Ve.ext_color_buffer_half_float&&(xt.rgba16f=34842,xt.rgb16f=34843),Ve.webgl_color_buffer_float&&(xt.rgba32f=34836);var Vt=[];Object.keys(xt).forEach(function(At){Vt[xt[At]]=At});var $t=0,pt={};return it.prototype.decRef=function(){0>=--this.refCount&&mt(this)},ot.profile&&(Qe.getTotalRenderbufferSize=function(){var At=0;return Object.keys(pt).forEach(function(Xt){At+=pt[Xt].stats.size}),At}),{create:function(At,Xt){function Ct(Be,tt){var dt=0,Dt=0,Nt=32854;if("object"==typeof Be&&Be?("shape"in Be?(dt=0|(Dt=Be.shape)[0],Dt=0|Dt[1]):("radius"in Be&&(dt=Dt=0|Be.radius),"width"in Be&&(dt=0|Be.width),"height"in Be&&(Dt=0|Be.height)),"format"in Be&&(Nt=xt[Be.format])):"number"==typeof Be?(dt=0|Be,Dt="number"==typeof tt?0|tt:dt):Be||(dt=Dt=1),dt!==Pt.width||Dt!==Pt.height||Nt!==Pt.format)return Ct.width=Pt.width=dt,Ct.height=Pt.height=Dt,Pt.format=Nt,Ce.bindRenderbuffer(36161,Pt.renderbuffer),Ce.renderbufferStorage(36161,Nt,dt,Dt),ot.profile&&(Pt.stats.size=Et[Pt.format]*Pt.width*Pt.height),Ct.format=Vt[Pt.format],Ct}var Pt=new it(Ce.createRenderbuffer());return pt[Pt.id]=Pt,Qe.renderbufferCount++,Ct(At,Xt),Ct.resize=function(Be,tt){var dt=0|Be,Dt=0|tt||dt;return dt===Pt.width&&Dt===Pt.height||(Ct.width=Pt.width=dt,Ct.height=Pt.height=Dt,Ce.bindRenderbuffer(36161,Pt.renderbuffer),Ce.renderbufferStorage(36161,Pt.format,dt,Dt),ot.profile&&(Pt.stats.size=Et[Pt.format]*Pt.width*Pt.height)),Ct},Ct._reglType="renderbuffer",Ct._renderbuffer=Pt,ot.profile&&(Ct.stats=Pt.stats),Ct.destroy=function(){Pt.decRef()},Ct},clear:function(){me(pt).forEach(mt)},restore:function(){me(pt).forEach(function(At){At.renderbuffer=Ce.createRenderbuffer(),Ce.bindRenderbuffer(36161,At.renderbuffer),Ce.renderbufferStorage(36161,At.format,At.width,At.height)}),Ce.bindRenderbuffer(36161,null)}}}(Ct,Nt,0,dt,Ce),rr=function(Ce,Ve,Ge,Qe,ot,it){function mt(kn,rn,pn){this.target=kn,this.texture=rn,this.renderbuffer=pn;var gn=kn=0;rn?(kn=rn.width,gn=rn.height):pn&&(kn=pn.width,gn=pn.height),this.width=kn,this.height=gn}function xt(kn){kn&&(kn.texture&&kn.texture._texture.decRef(),kn.renderbuffer&&kn.renderbuffer._renderbuffer.decRef())}function Vt(kn,rn,pn){kn&&(kn.texture?kn.texture._texture.refCount+=1:kn.renderbuffer._renderbuffer.refCount+=1)}function $t(kn,rn){rn&&(rn.texture?Ce.framebufferTexture2D(36160,kn,rn.target,rn.texture._texture.texture,0):Ce.framebufferRenderbuffer(36160,kn,36161,rn.renderbuffer._renderbuffer.renderbuffer))}function pt(kn){var rn=3553,pn=null,gn=null,Pn=kn;return"object"==typeof kn&&(Pn=kn.data,"target"in kn&&(rn=0|kn.target)),"texture2d"===(kn=Pn._reglType)||"textureCube"===kn?pn=Pn:"renderbuffer"===kn&&(gn=Pn,rn=36161),new mt(rn,pn,gn)}function At(kn,rn,pn,gn,Pn){return pn?((kn=Qe.create2D({width:kn,height:rn,format:gn,type:Pn}))._texture.refCount=0,new mt(3553,kn,null)):((kn=ot.create({width:kn,height:rn,format:gn}))._renderbuffer.refCount=0,new mt(36161,null,kn))}function Xt(kn){return kn&&(kn.texture||kn.renderbuffer)}function Ct(kn,rn,pn){kn&&(kn.texture?kn.texture.resize(rn,pn):kn.renderbuffer&&kn.renderbuffer.resize(rn,pn),kn.width=rn,kn.height=pn)}function Pt(){this.id=In++,Dn[this.id]=this,this.framebuffer=Ce.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Be(kn){kn.colorAttachments.forEach(xt),xt(kn.depthAttachment),xt(kn.stencilAttachment),xt(kn.depthStencilAttachment)}function tt(kn){Ce.deleteFramebuffer(kn.framebuffer),kn.framebuffer=null,it.framebufferCount--,delete Dn[kn.id]}function dt(kn){var rn;Ce.bindFramebuffer(36160,kn.framebuffer);var pn=kn.colorAttachments;for(rn=0;rn<pn.length;++rn)$t(36064+rn,pn[rn]);for(rn=pn.length;rn<Ge.maxColorAttachments;++rn)Ce.framebufferTexture2D(36160,36064+rn,3553,null,0);Ce.framebufferTexture2D(36160,33306,3553,null,0),Ce.framebufferTexture2D(36160,36096,3553,null,0),Ce.framebufferTexture2D(36160,36128,3553,null,0),$t(36096,kn.depthAttachment),$t(36128,kn.stencilAttachment),$t(33306,kn.depthStencilAttachment),Ce.checkFramebufferStatus(36160),Ce.isContextLost(),Ce.bindFramebuffer(36160,Nt.next?Nt.next.framebuffer:null),Nt.cur=Nt.next,Ce.getError()}function Dt(kn,rn){function pn(Pn,jn){var Kn,rr=0,lr=0,kr=!0,Xr=!0;Kn=null;var sr=!0,oi="rgba",Gr="uint8",Lr=1,Jr=null,Mi=null,Jn=null,br=!1;"number"==typeof Pn?(rr=0|Pn,lr=0|jn||rr):Pn?("shape"in Pn?(rr=(lr=Pn.shape)[0],lr=lr[1]):("radius"in Pn&&(rr=lr=Pn.radius),"width"in Pn&&(rr=Pn.width),"height"in Pn&&(lr=Pn.height)),("color"in Pn||"colors"in Pn)&&(Kn=Pn.color||Pn.colors,Array.isArray(Kn)),Kn||("colorCount"in Pn&&(Lr=0|Pn.colorCount),"colorTexture"in Pn&&(sr=!!Pn.colorTexture,oi="rgba4"),"colorType"in Pn&&(Gr=Pn.colorType,!sr)&&("half float"===Gr||"float16"===Gr?oi="rgba16f":"float"!==Gr&&"float32"!==Gr||(oi="rgba32f")),"colorFormat"in Pn&&(0<=Yt.indexOf(oi=Pn.colorFormat)?sr=!0:0<=fn.indexOf(oi)&&(sr=!1))),("depthTexture"in Pn||"depthStencilTexture"in Pn)&&(br=!(!Pn.depthTexture&&!Pn.depthStencilTexture)),"depth"in Pn&&("boolean"==typeof Pn.depth?kr=Pn.depth:(Jr=Pn.depth,Xr=!1)),"stencil"in Pn&&("boolean"==typeof Pn.stencil?Xr=Pn.stencil:(Mi=Pn.stencil,kr=!1)),"depthStencil"in Pn&&("boolean"==typeof Pn.depthStencil?kr=Xr=Pn.depthStencil:(Jn=Pn.depthStencil,Xr=kr=!1))):rr=lr=1;var Fr=null,cr=null,Qr=null,ui=null;if(Array.isArray(Kn))Fr=Kn.map(pt);else if(Kn)Fr=[pt(Kn)];else for(Fr=Array(Lr),Kn=0;Kn<Lr;++Kn)Fr[Kn]=At(rr,lr,sr,oi,Gr);for(rr=rr||Fr[0].width,lr=lr||Fr[0].height,Jr?cr=pt(Jr):kr&&!Xr&&(cr=At(rr,lr,br,"depth","uint32")),Mi?Qr=pt(Mi):Xr&&!kr&&(Qr=At(rr,lr,!1,"stencil","uint8")),Jn?ui=pt(Jn):!Jr&&!Mi&&Xr&&kr&&(ui=At(rr,lr,br,"depth stencil","depth stencil")),kr=null,Kn=0;Kn<Fr.length;++Kn)Vt(Fr[Kn]),Fr[Kn]&&Fr[Kn].texture&&(Xr=at[Fr[Kn].texture._texture.format]*Ft[Fr[Kn].texture._texture.type],null===kr&&(kr=Xr));return Vt(cr),Vt(Qr),Vt(ui),Be(gn),gn.width=rr,gn.height=lr,gn.colorAttachments=Fr,gn.depthAttachment=cr,gn.stencilAttachment=Qr,gn.depthStencilAttachment=ui,pn.color=Fr.map(Xt),pn.depth=Xt(cr),pn.stencil=Xt(Qr),pn.depthStencil=Xt(ui),pn.width=gn.width,pn.height=gn.height,dt(gn),pn}var gn=new Pt;return it.framebufferCount++,pn(kn,rn),G(pn,{resize:function(Pn,jn){var Kn=Math.max(0|Pn,1),rr=Math.max(0|jn||Kn,1);if(Kn===gn.width&&rr===gn.height)return pn;for(var lr=gn.colorAttachments,kr=0;kr<lr.length;++kr)Ct(lr[kr],Kn,rr);return Ct(gn.depthAttachment,Kn,rr),Ct(gn.stencilAttachment,Kn,rr),Ct(gn.depthStencilAttachment,Kn,rr),gn.width=pn.width=Kn,gn.height=pn.height=rr,dt(gn),pn},_reglType:"framebuffer",_framebuffer:gn,destroy:function(){tt(gn),Be(gn)},use:function(Pn){Nt.setFBO({framebuffer:pn},Pn)}})}var Nt={cur:null,next:null,dirty:!1,setFBO:null},Yt=["rgba"],fn=["rgba4","rgb565","rgb5 a1"];Ve.ext_srgb&&fn.push("srgba"),Ve.ext_color_buffer_half_float&&fn.push("rgba16f","rgb16f"),Ve.webgl_color_buffer_float&&fn.push("rgba32f");var nn=["uint8"];Ve.oes_texture_half_float&&nn.push("half float","float16"),Ve.oes_texture_float&&nn.push("float","float32");var In=0,Dn={};return G(Nt,{getFramebuffer:function(kn){return"function"==typeof kn&&"framebuffer"===kn._reglType&&(kn=kn._framebuffer)instanceof Pt?kn:null},create:Dt,createCube:function(kn){function rn(gn){var Pn,jn={color:null},Kn=0,rr=null;Pn="rgba";var lr="uint8",kr=1;if("number"==typeof gn?Kn=0|gn:gn?("shape"in gn?Kn=gn.shape[0]:("radius"in gn&&(Kn=0|gn.radius),"width"in gn?Kn=0|gn.width:"height"in gn&&(Kn=0|gn.height)),("color"in gn||"colors"in gn)&&(rr=gn.color||gn.colors,Array.isArray(rr)),rr||("colorCount"in gn&&(kr=0|gn.colorCount),"colorType"in gn&&(lr=gn.colorType),"colorFormat"in gn&&(Pn=gn.colorFormat)),"depth"in gn&&(jn.depth=gn.depth),"stencil"in gn&&(jn.stencil=gn.stencil),"depthStencil"in gn&&(jn.depthStencil=gn.depthStencil)):Kn=1,rr)if(Array.isArray(rr))for(gn=[],Pn=0;Pn<rr.length;++Pn)gn[Pn]=rr[Pn];else gn=[rr];else for(gn=Array(kr),rr={radius:Kn,format:Pn,type:lr},Pn=0;Pn<kr;++Pn)gn[Pn]=Qe.createCube(rr);for(jn.color=Array(gn.length),Pn=0;Pn<gn.length;++Pn)kr=gn[Pn],Kn=Kn||kr.width,jn.color[Pn]={target:34069,data:gn[Pn]};for(Pn=0;6>Pn;++Pn){for(kr=0;kr<gn.length;++kr)jn.color[kr].target=34069+Pn;0<Pn&&(jn.depth=pn[0].depth,jn.stencil=pn[0].stencil,jn.depthStencil=pn[0].depthStencil),pn[Pn]?pn[Pn](jn):pn[Pn]=Dt(jn)}return G(rn,{width:Kn,height:Kn,color:gn})}var pn=Array(6);return rn(kn),G(rn,{faces:pn,resize:function(gn){var Pn=0|gn;if(Pn===rn.width)return rn;var jn=rn.color;for(gn=0;gn<jn.length;++gn)jn[gn].resize(Pn);for(gn=0;6>gn;++gn)pn[gn].resize(Pn);return rn.width=rn.height=Pn,rn},_reglType:"framebufferCube",destroy:function(){pn.forEach(function(gn){gn.destroy()})}})},clear:function(){me(Dn).forEach(tt)},restore:function(){Nt.cur=null,Nt.next=null,Nt.dirty=!0,me(Dn).forEach(function(kn){kn.framebuffer=Ce.createFramebuffer(),dt(kn)})}})}(Ct,Nt,kn,jn,Kn,dt),lr=W(Ct,tt,Nt,kn,rn,pn,0,rr,{},gn,Pn,nn,Dn,Yt,Dt,Ce),kr=(tt=function(Ce,Ve,Ge,Qe,ot,it,mt){function xt(Vt){var $t;$t=null===Ve.next?5121:Ve.next.colorAttachments[0].texture._texture.type;var pt=0,At=0,Xt=Qe.framebufferWidth,Ct=Qe.framebufferHeight,Pt=null;return _e(Vt)?Pt=Vt:Vt&&(pt=0|Vt.x,At=0|Vt.y,Xt=0|(Vt.width||Qe.framebufferWidth-pt),Ct=0|(Vt.height||Qe.framebufferHeight-At),Pt=Vt.data||null),Ge(),Vt=Xt*Ct*4,Pt||(5121===$t?Pt=new Uint8Array(Vt):5126===$t&&(Pt=Pt||new Float32Array(Vt))),Ce.pixelStorei(3333,4),Ce.readPixels(pt,At,Xt,Ct,6408,$t,Pt),Pt}return function(Vt){return Vt&&"framebuffer"in Vt?(Ve.setFBO({framebuffer:($t=Vt).framebuffer},function(){pt=xt($t)}),pt):xt(Vt);var $t,pt}}(Ct,rr,lr.procs.poll,Dn),lr.next),Xr=Ct.canvas,sr=[],oi=[],Gr=[],Lr=[Ce.onDestroy],Jr=null;Xr&&(Xr.addEventListener("webglcontextlost",ot,!1),Xr.addEventListener("webglcontextrestored",it,!1));var Mi=rr.setFBO=mt({framebuffer:ne.define.call(null,1,"framebuffer")});return At(),Pt=G(mt,{clear:function(Jn){if("framebuffer"in Jn)if(Jn.framebuffer&&"framebufferCube"===Jn.framebuffer_reglType)for(var br=0;6>br;++br)Mi(G({framebuffer:Jn.framebuffer.faces[br]},Jn),xt);else Mi(Jn,xt);else xt(0,Jn)},prop:ne.define.bind(null,1),context:ne.define.bind(null,2),this:ne.define.bind(null,3),draw:mt({}),buffer:function(Jn){return rn.create(Jn,34962,!1,!1)},elements:function(Jn){return pn.create(Jn,!1)},texture:jn.create2D,cube:jn.createCube,renderbuffer:Kn.create,framebuffer:rr.create,framebufferCube:rr.createCube,vao:gn.createVAO,attributes:Pt,frame:Vt,on:function(Jn,br){var Fr;switch(Jn){case"frame":return Vt(br);case"lost":Fr=oi;break;case"restore":Fr=Gr;break;case"destroy":Fr=Lr}return Fr.push(br),{cancel:function(){for(var cr=0;cr<Fr.length;++cr)if(Fr[cr]===br){Fr[cr]=Fr[Fr.length-1],Fr.pop();break}}}},limits:kn,hasExtension:function(Jn){return 0<=kn.extensions.indexOf(Jn.toLowerCase())},read:tt,destroy:function(){sr.length=0,Qe(),Xr&&(Xr.removeEventListener("webglcontextlost",ot),Xr.removeEventListener("webglcontextrestored",it)),Pn.clear(),rr.clear(),Kn.clear(),gn.clear(),jn.clear(),pn.clear(),rn.clear(),Yt&&Yt.clear(),Lr.forEach(function(Jn){Jn()})},_gl:Ct,_refresh:At,poll:function(){pt(),Yt&&Yt.update()},now:Xt,stats:dt,getCachedCode:function(){return Dt},preloadCachedCode:function(Jn){Object.entries(Jn).forEach(function(br){Dt[br[0]]=br[1]})}}),Ce.onDone(null,Pt),Pt}},"object"==typeof se&&void 0!==oe?oe.exports=x():this.createREGL=x()},{}],284:[function(b,oe,se){var y=b("buffer"),x=y.Buffer;function M(e,o){for(var a in e)o[a]=e[a]}function _(e,o,a){return x(e,o,a)}x.from&&x.alloc&&x.allocUnsafe&&x.allocUnsafeSlow?oe.exports=y:(M(y,se),se.Buffer=_),_.prototype=Object.create(x.prototype),M(x,_),_.from=function(e,o,a){if("number"==typeof e)throw new TypeError("Argument must not be a number");return x(e,o,a)},_.alloc=function(e,o,a){if("number"!=typeof e)throw new TypeError("Argument must be a number");var l=x(e);return void 0!==o?"string"==typeof a?l.fill(o,a):l.fill(o):l.fill(0),l},_.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return x(e)},_.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return y.SlowBuffer(e)}},{buffer:85}],285:[function(b,oe,se){oe.exports=x;var y=b("events").EventEmitter;function x(){y.call(this)}b("inherits")(x,y),x.Readable=b("readable-stream/lib/_stream_readable.js"),x.Writable=b("readable-stream/lib/_stream_writable.js"),x.Duplex=b("readable-stream/lib/_stream_duplex.js"),x.Transform=b("readable-stream/lib/_stream_transform.js"),x.PassThrough=b("readable-stream/lib/_stream_passthrough.js"),x.finished=b("readable-stream/lib/internal/streams/end-of-stream.js"),x.pipeline=b("readable-stream/lib/internal/streams/pipeline.js"),x.Stream=x,x.prototype.pipe=function(M,_){var e=this;function o(d){M.writable&&!1===M.write(d)&&e.pause&&e.pause()}function a(){e.readable&&e.resume&&e.resume()}e.on("data",o),M.on("drain",a),M._isStdio||_&&!1===_.end||(e.on("end",i),e.on("close",v));var l=!1;function i(){l||(l=!0,M.end())}function v(){l||(l=!0,"function"==typeof M.destroy&&M.destroy())}function h(d){if(s(),0===y.listenerCount(this,"error"))throw d}function s(){e.removeListener("data",o),M.removeListener("drain",a),e.removeListener("end",i),e.removeListener("close",v),e.removeListener("error",h),M.removeListener("error",h),e.removeListener("end",s),e.removeListener("close",s),M.removeListener("close",s)}return e.on("error",h),M.on("error",h),e.on("end",s),e.on("close",s),M.on("close",s),M.emit("pipe",e),M}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":287,"readable-stream/lib/_stream_passthrough.js":288,"readable-stream/lib/_stream_readable.js":289,"readable-stream/lib/_stream_transform.js":290,"readable-stream/lib/_stream_writable.js":291,"readable-stream/lib/internal/streams/end-of-stream.js":295,"readable-stream/lib/internal/streams/pipeline.js":297}],286:[function(b,oe,se){"use strict";var y={};function x(_,e,o){o||(o=Error);var a=function(l){var i,v;function h(s,d,p){return l.call(this,"string"==typeof e?e:e(s,d,p))||this}return v=l,(i=h).prototype=Object.create(v.prototype),i.prototype.constructor=i,i.__proto__=v,h}(o);a.prototype.name=o.name,a.prototype.code=_,y[_]=a}function M(_,e){if(Array.isArray(_)){var o=_.length;return _=_.map(function(a){return String(a)}),o>2?"one of ".concat(e," ").concat(_.slice(0,o-1).join(", "),", or ")+_[o-1]:2===o?"one of ".concat(e," ").concat(_[0]," or ").concat(_[1]):"of ".concat(e," ").concat(_[0])}return"of ".concat(e," ").concat(String(_))}x("ERR_INVALID_OPT_VALUE",function(_,e){return'The value "'+e+'" is invalid for option "'+_+'"'},TypeError),x("ERR_INVALID_ARG_TYPE",function(_,e,o){var a,v,s,p;if("string"==typeof e&&"not "===e.substr(0,"not ".length)?(a="must not be",e=e.replace(/^not /,"")):a="must be",s=_,(void 0===p||p>s.length)&&(p=s.length)," argument"===s.substring(p-" argument".length,p))v="The ".concat(_," ").concat(a," ").concat(M(e,"type"));else{var h=function(s,d,p){return"number"!=typeof p&&(p=0),!(p+".".length>s.length)&&-1!==s.indexOf(".",p)}(_)?"property":"argument";v='The "'.concat(_,'" ').concat(h," ").concat(a," ").concat(M(e,"type"))}return v+". Received type ".concat(typeof o)},TypeError),x("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),x("ERR_METHOD_NOT_IMPLEMENTED",function(_){return"The "+_+" method is not implemented"}),x("ERR_STREAM_PREMATURE_CLOSE","Premature close"),x("ERR_STREAM_DESTROYED",function(_){return"Cannot call "+_+" after a stream was destroyed"}),x("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),x("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),x("ERR_STREAM_WRITE_AFTER_END","write after end"),x("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),x("ERR_UNKNOWN_ENCODING",function(_){return"Unknown encoding: "+_},TypeError),x("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),oe.exports.codes=y},{}],287:[function(b,oe,se){(function(y){(function(){"use strict";var x=Object.keys||function(h){var s=[];for(var d in h)s.push(d);return s};oe.exports=l;var M=b("./_stream_readable"),_=b("./_stream_writable");b("inherits")(l,M);for(var e=x(_.prototype),o=0;o<e.length;o++){var a=e[o];l.prototype[a]||(l.prototype[a]=_.prototype[a])}function l(h){if(!(this instanceof l))return new l(h);M.call(this,h),_.call(this,h),this.allowHalfOpen=!0,h&&(!1===h.readable&&(this.readable=!1),!1===h.writable&&(this.writable=!1),!1===h.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",i)))}function i(){this._writableState.ended||y.nextTick(v,this)}function v(h){h.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(h){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=h,this._writableState.destroyed=h)}})}).call(this)}).call(this,b("_process"))},{"./_stream_readable":289,"./_stream_writable":291,_process:277,inherits:231}],288:[function(b,oe,se){"use strict";oe.exports=x;var y=b("./_stream_transform");function x(M){if(!(this instanceof x))return new x(M);y.call(this,M)}b("inherits")(x,y),x.prototype._transform=function(M,_,e){e(null,M)}},{"./_stream_transform":290,inherits:231}],289:[function(b,oe,se){(function(y,x){(function(){"use strict";var M;oe.exports=E,E.ReadableState=C,b("events");var l,_=function(q,U){return q.listeners(U).length},e=b("./internal/streams/stream"),o=b("buffer").Buffer,a=x.Uint8Array||function(){},i=b("util");l=i&&i.debuglog?i.debuglog("stream"):function(){};var v,h,s,d=b("./internal/streams/buffer_list"),p=b("./internal/streams/destroy"),f=b("./internal/streams/state").getHighWaterMark,g=b("../errors").codes,m=g.ERR_INVALID_ARG_TYPE,u=g.ERR_STREAM_PUSH_AFTER_EOF,w=g.ERR_METHOD_NOT_IMPLEMENTED,c=g.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;b("inherits")(E,e);var A=p.errorOrDestroy,k=["error","close","destroy","pause","resume"];function C(q,U,W){M=M||b("./_stream_duplex"),"boolean"!=typeof W&&(W=U instanceof M),this.objectMode=!!(q=q||{}).objectMode,W&&(this.objectMode=this.objectMode||!!q.readableObjectMode),this.highWaterMark=f(this,q,"readableHighWaterMark",W),this.buffer=new d,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==q.emitClose,this.autoDestroy=!!q.autoDestroy,this.destroyed=!1,this.defaultEncoding=q.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,q.encoding&&(v||(v=b("string_decoder/").StringDecoder),this.decoder=new v(q.encoding),this.encoding=q.encoding)}function E(q){if(M=M||b("./_stream_duplex"),!(this instanceof E))return new E(q);this._readableState=new C(q,this,this instanceof M),this.readable=!0,q&&("function"==typeof q.read&&(this._read=q.read),"function"==typeof q.destroy&&(this._destroy=q.destroy)),e.call(this)}function L(q,U,W,ae,G){l("readableAddChunk",U);var te,le,ue,pe,de,ne=q._readableState;if(null===U)ne.reading=!1,function(le,ue){if(l("onEofChunk"),!ue.ended){if(ue.decoder){var pe=ue.decoder.end();pe&&pe.length&&(ue.buffer.push(pe),ue.length+=ue.objectMode?1:pe.length)}ue.ended=!0,ue.sync?F(le):(ue.needReadable=!1,ue.emittedReadable||(ue.emittedReadable=!0,I(le)))}}(q,ne);else if(G||(le=ne,o.isBuffer(de=ue=U)||de instanceof a||"string"==typeof ue||void 0===ue||le.objectMode||(pe=new m("chunk",["string","Buffer","Uint8Array"],ue)),te=pe),te)A(q,te);else if(ne.objectMode||U&&U.length>0)if("string"==typeof U||ne.objectMode||Object.getPrototypeOf(U)===o.prototype||(U=function(le){return o.from(le)}(U)),ae)ne.endEmitted?A(q,new c):D(q,ne,U,!0);else if(ne.ended)A(q,new u);else{if(ne.destroyed)return!1;ne.reading=!1,ne.decoder&&!W?(U=ne.decoder.write(U),ne.objectMode||0!==U.length?D(q,ne,U,!1):P(q,ne)):D(q,ne,U,!1)}else ae||(ne.reading=!1,P(q,ne));return!ne.ended&&(ne.length<ne.highWaterMark||0===ne.length)}function D(q,U,W,ae){U.flowing&&0===U.length&&!U.sync?(U.awaitDrain=0,q.emit("data",W)):(U.length+=U.objectMode?1:W.length,ae?U.buffer.unshift(W):U.buffer.push(W),U.needReadable&&F(q)),P(q,U)}function N(q,U){return q<=0||0===U.length&&U.ended?0:U.objectMode?1:q!=q?U.flowing&&U.length?U.buffer.head.data.length:U.length:(q>U.highWaterMark&&(U.highWaterMark=((W=q)>=1073741824?W=1073741824:(W--,W|=W>>>1,W|=W>>>2,W|=W>>>4,W|=W>>>8,W|=W>>>16,W++),W)),q<=U.length?q:U.ended?U.length:(U.needReadable=!0,0));var W}function F(q){var U=q._readableState;l("emitReadable",U.needReadable,U.emittedReadable),U.needReadable=!1,U.emittedReadable||(l("emitReadable",U.flowing),U.emittedReadable=!0,y.nextTick(I,q))}function I(q){var U=q._readableState;l("emitReadable_",U.destroyed,U.length,U.ended),U.destroyed||!U.length&&!U.ended||(q.emit("readable"),U.emittedReadable=!1),U.needReadable=!U.flowing&&!U.ended&&U.length<=U.highWaterMark,ee(q)}function P(q,U){U.readingMore||(U.readingMore=!0,y.nextTick(j,q,U))}function j(q,U){for(;!U.reading&&!U.ended&&(U.length<U.highWaterMark||U.flowing&&0===U.length);){var W=U.length;if(l("maybeReadMore read 0"),q.read(0),W===U.length)break}U.readingMore=!1}function V(q){var U=q._readableState;U.readableListening=q.listenerCount("readable")>0,U.resumeScheduled&&!U.paused?U.flowing=!0:q.listenerCount("data")>0&&q.resume()}function Z(q){l("readable nexttick read 0"),q.read(0)}function Y(q,U){l("resume",U.reading),U.reading||q.read(0),U.resumeScheduled=!1,q.emit("resume"),ee(q),U.flowing&&!U.reading&&q.read(0)}function ee(q){var U=q._readableState;for(l("flow",U.flowing);U.flowing&&null!==q.read(););}function re(q,U){return 0===U.length?null:(U.objectMode?W=U.buffer.shift():!q||q>=U.length?(W=U.decoder?U.buffer.join(""):1===U.buffer.length?U.buffer.first():U.buffer.concat(U.length),U.buffer.clear()):W=U.buffer.consume(q,U.decoder),W);var W}function X(q){var U=q._readableState;l("endReadable",U.endEmitted),U.endEmitted||(U.ended=!0,y.nextTick(K,U,q))}function K(q,U){if(l("endReadableNT",q.endEmitted,q.length),!q.endEmitted&&0===q.length&&(q.endEmitted=!0,U.readable=!1,U.emit("end"),q.autoDestroy)){var W=U._writableState;(!W||W.autoDestroy&&W.finished)&&U.destroy()}}function ie(q,U){for(var W=0,ae=q.length;W<ae;W++)if(q[W]===U)return W;return-1}Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(q){this._readableState&&(this._readableState.destroyed=q)}}),E.prototype.destroy=p.destroy,E.prototype._undestroy=p.undestroy,E.prototype._destroy=function(q,U){U(q)},E.prototype.push=function(q,U){var W,ae=this._readableState;return ae.objectMode?W=!0:"string"==typeof q&&((U=U||ae.defaultEncoding)!==ae.encoding&&(q=o.from(q,U),U=""),W=!0),L(this,q,U,!1,W)},E.prototype.unshift=function(q){return L(this,q,null,!0,!1)},E.prototype.isPaused=function(){return!1===this._readableState.flowing},E.prototype.setEncoding=function(q){v||(v=b("string_decoder/").StringDecoder);var U=new v(q);this._readableState.decoder=U,this._readableState.encoding=this._readableState.decoder.encoding;for(var W=this._readableState.buffer.head,ae="";null!==W;)ae+=U.write(W.data),W=W.next;return this._readableState.buffer.clear(),""!==ae&&this._readableState.buffer.push(ae),this._readableState.length=ae.length,this},E.prototype.read=function(q){l("read",q),q=parseInt(q,10);var U=this._readableState,W=q;if(0!==q&&(U.emittedReadable=!1),0===q&&U.needReadable&&((0!==U.highWaterMark?U.length>=U.highWaterMark:U.length>0)||U.ended))return l("read: emitReadable",U.length,U.ended),0===U.length&&U.ended?X(this):F(this),null;if(0===(q=N(q,U))&&U.ended)return 0===U.length&&X(this),null;var ae,G=U.needReadable;return l("need readable",G),(0===U.length||U.length-q<U.highWaterMark)&&l("length less than watermark",G=!0),U.ended||U.reading?l("reading or ended",G=!1):G&&(l("do read"),U.reading=!0,U.sync=!0,0===U.length&&(U.needReadable=!0),this._read(U.highWaterMark),U.sync=!1,U.reading||(q=N(W,U))),null===(ae=q>0?re(q,U):null)?(U.needReadable=U.length<=U.highWaterMark,q=0):(U.length-=q,U.awaitDrain=0),0===U.length&&(U.ended||(U.needReadable=!0),W!==q&&U.ended&&X(this)),null!==ae&&this.emit("data",ae),ae},E.prototype._read=function(q){A(this,new w("_read()"))},E.prototype.pipe=function(q,U){var W=this,ae=this._readableState;switch(ae.pipesCount){case 0:ae.pipes=q;break;case 1:ae.pipes=[ae.pipes,q];break;default:ae.pipes.push(q)}ae.pipesCount+=1,l("pipe count=%d opts=%j",ae.pipesCount,U);var G=U&&!1===U.end||q===y.stdout||q===y.stderr?we:ne;function ne(){l("onend"),q.end()}ae.endEmitted?y.nextTick(G):W.once("end",G),q.on("unpipe",function te(De,Le){l("onunpipe"),De===W&&Le&&!1===Le.hasUnpiped&&(Le.hasUnpiped=!0,l("cleanup"),q.removeListener("close",_e),q.removeListener("finish",me),q.removeListener("drain",le),q.removeListener("error",de),q.removeListener("unpipe",te),W.removeListener("end",ne),W.removeListener("end",we),W.removeListener("data",pe),ue=!0,!ae.awaitDrain||q._writableState&&!q._writableState.needDrain||le())});var De,le=(De=W,function(){var Le=De._readableState;l("pipeOnDrain",Le.awaitDrain),Le.awaitDrain&&Le.awaitDrain--,0===Le.awaitDrain&&_(De,"data")&&(Le.flowing=!0,ee(De))});q.on("drain",le);var ue=!1;function pe(De){l("ondata");var Le=q.write(De);l("dest.write",Le),!1===Le&&((1===ae.pipesCount&&ae.pipes===q||ae.pipesCount>1&&-1!==ie(ae.pipes,q))&&!ue&&(l("false write response, pause",ae.awaitDrain),ae.awaitDrain++),W.pause())}function de(De){l("onerror",De),we(),q.removeListener("error",de),0===_(q,"error")&&A(q,De)}function _e(){q.removeListener("finish",me),we()}function me(){l("onfinish"),q.removeListener("close",_e),we()}function we(){l("unpipe"),W.unpipe(q)}return W.on("data",pe),function(De,Le,Ie){if("function"==typeof De.prependListener)return De.prependListener(Le,Ie);De._events&&De._events[Le]?Array.isArray(De._events[Le])?De._events[Le].unshift(Ie):De._events[Le]=[Ie,De._events[Le]]:De.on(Le,Ie)}(q,"error",de),q.once("close",_e),q.once("finish",me),q.emit("pipe",W),ae.flowing||(l("pipe resume"),W.resume()),q},E.prototype.unpipe=function(q){var U=this._readableState,W={hasUnpiped:!1};if(0===U.pipesCount)return this;if(1===U.pipesCount)return q&&q!==U.pipes||(q||(q=U.pipes),U.pipes=null,U.pipesCount=0,U.flowing=!1,q&&q.emit("unpipe",this,W)),this;if(!q){var ae=U.pipes,G=U.pipesCount;U.pipes=null,U.pipesCount=0,U.flowing=!1;for(var te=0;te<G;te++)ae[te].emit("unpipe",this,{hasUnpiped:!1});return this}var ne=ie(U.pipes,q);return-1===ne||(U.pipes.splice(ne,1),U.pipesCount-=1,1===U.pipesCount&&(U.pipes=U.pipes[0]),q.emit("unpipe",this,W)),this},E.prototype.addListener=E.prototype.on=function(q,U){var W=e.prototype.on.call(this,q,U),ae=this._readableState;return"data"===q?(ae.readableListening=this.listenerCount("readable")>0,!1!==ae.flowing&&this.resume()):"readable"===q&&(ae.endEmitted||ae.readableListening||(ae.readableListening=ae.needReadable=!0,ae.flowing=!1,ae.emittedReadable=!1,l("on readable",ae.length,ae.reading),ae.length?F(this):ae.reading||y.nextTick(Z,this))),W},E.prototype.removeListener=function(q,U){var W=e.prototype.removeListener.call(this,q,U);return"readable"===q&&y.nextTick(V,this),W},E.prototype.removeAllListeners=function(q){var U=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==q&&void 0!==q||y.nextTick(V,this),U},E.prototype.resume=function(){var W,q=this._readableState;return q.flowing||(l("resume"),q.flowing=!q.readableListening,this,(W=q).resumeScheduled||(W.resumeScheduled=!0,y.nextTick(Y,this,W))),q.paused=!1,this},E.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},E.prototype.wrap=function(q){var U=this,W=this._readableState,ae=!1;for(var G in q.on("end",function(){if(l("wrapped end"),W.decoder&&!W.ended){var ne=W.decoder.end();ne&&ne.length&&U.push(ne)}U.push(null)}),q.on("data",function(ne){l("wrapped data"),W.decoder&&(ne=W.decoder.write(ne)),W.objectMode&&null==ne||(W.objectMode||ne&&ne.length)&&(U.push(ne)||(ae=!0,q.pause()))}),q)void 0===this[G]&&"function"==typeof q[G]&&(this[G]=function(ne){return function(){return q[ne].apply(q,arguments)}}(G));for(var te=0;te<k.length;te++)q.on(k[te],this.emit.bind(this,k[te]));return this._read=function(ne){l("wrapped _read",ne),ae&&(ae=!1,q.resume())},this},"function"==typeof Symbol&&(E.prototype[Symbol.asyncIterator]=function(){return void 0===h&&(h=b("./internal/streams/async_iterator")),h(this)}),Object.defineProperty(E.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(E.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(E.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(q){this._readableState&&(this._readableState.flowing=q)}}),E._fromList=re,Object.defineProperty(E.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(E.from=function(q,U){return void 0===s&&(s=b("./internal/streams/from")),s(E,q,U)})}).call(this)}).call(this,b("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/async_iterator":292,"./internal/streams/buffer_list":293,"./internal/streams/destroy":294,"./internal/streams/from":296,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,events:84,inherits:231,"string_decoder/":300,util:83}],290:[function(b,oe,se){"use strict";oe.exports=l;var y=b("../errors").codes,x=y.ERR_METHOD_NOT_IMPLEMENTED,M=y.ERR_MULTIPLE_CALLBACK,_=y.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=y.ERR_TRANSFORM_WITH_LENGTH_0,o=b("./_stream_duplex");function a(h,s){var d=this._transformState;d.transforming=!1;var p=d.writecb;if(null===p)return this.emit("error",new M);d.writechunk=null,d.writecb=null,null!=s&&this.push(s),p(h);var f=this._readableState;f.reading=!1,(f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}function l(h){if(!(this instanceof l))return new l(h);o.call(this,h),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,h&&("function"==typeof h.transform&&(this._transform=h.transform),"function"==typeof h.flush&&(this._flush=h.flush)),this.on("prefinish",i)}function i(){var h=this;"function"!=typeof this._flush||this._readableState.destroyed?v(this,null,null):this._flush(function(s,d){v(h,s,d)})}function v(h,s,d){if(s)return h.emit("error",s);if(null!=d&&h.push(d),h._writableState.length)throw new e;if(h._transformState.transforming)throw new _;return h.push(null)}b("inherits")(l,o),l.prototype.push=function(h,s){return this._transformState.needTransform=!1,o.prototype.push.call(this,h,s)},l.prototype._transform=function(h,s,d){d(new x("_transform()"))},l.prototype._write=function(h,s,d){var p=this._transformState;if(p.writecb=d,p.writechunk=h,p.writeencoding=s,!p.transforming){var f=this._readableState;(p.needTransform||f.needReadable||f.length<f.highWaterMark)&&this._read(f.highWaterMark)}},l.prototype._read=function(h){var s=this._transformState;null===s.writechunk||s.transforming?s.needTransform=!0:(s.transforming=!0,this._transform(s.writechunk,s.writeencoding,s.afterTransform))},l.prototype._destroy=function(h,s){o.prototype._destroy.call(this,h,function(d){s(d)})}},{"../errors":286,"./_stream_duplex":287,inherits:231}],291:[function(b,oe,se){(function(y,x){(function(){"use strict";function M(j){var V=this;this.next=null,this.entry=null,this.finish=function(){!function(Z,Y,ee){var re=Z.entry;for(Z.entry=null;re;){var X=re.callback;Y.pendingcb--,X(undefined),re=re.next}Y.corkedRequestsFree.next=Z}(V,j)}}var _;oe.exports=E,E.WritableState=C;var i,e={deprecate:b("util-deprecate")},o=b("./internal/streams/stream"),a=b("buffer").Buffer,l=x.Uint8Array||function(){},v=b("./internal/streams/destroy"),h=b("./internal/streams/state").getHighWaterMark,s=b("../errors").codes,d=s.ERR_INVALID_ARG_TYPE,p=s.ERR_METHOD_NOT_IMPLEMENTED,f=s.ERR_MULTIPLE_CALLBACK,g=s.ERR_STREAM_CANNOT_PIPE,m=s.ERR_STREAM_DESTROYED,u=s.ERR_STREAM_NULL_VALUES,w=s.ERR_STREAM_WRITE_AFTER_END,c=s.ERR_UNKNOWN_ENCODING,A=v.errorOrDestroy;function k(){}function C(j,V,Z){_=_||b("./_stream_duplex"),"boolean"!=typeof Z&&(Z=V instanceof _),this.objectMode=!!(j=j||{}).objectMode,Z&&(this.objectMode=this.objectMode||!!j.writableObjectMode),this.highWaterMark=h(this,j,"writableHighWaterMark",Z),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===j.decodeStrings),this.defaultEncoding=j.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ee){!function(re,X){var W,K=re._writableState,ie=K.sync,q=K.writecb;if("function"!=typeof q)throw new f;if((W=K).writing=!1,W.writecb=null,W.length-=W.writelen,W.writelen=0,X)!function(W,ae,G,te,ne){--ae.pendingcb,G?(y.nextTick(ne,te),y.nextTick(P,W,ae),W._writableState.errorEmitted=!0,A(W,te)):(ne(te),W._writableState.errorEmitted=!0,A(W,te),P(W,ae))}(re,K,ie,X,q);else{var U=F(K)||re.destroyed;U||K.corked||K.bufferProcessing||!K.bufferedRequest||N(re,K),ie?y.nextTick(D,re,K,U,q):D(re,K,U,q)}}(V,ee)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==j.emitClose,this.autoDestroy=!!j.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new M(this)}function E(j){var V=this instanceof(_=_||b("./_stream_duplex"));if(!V&&!i.call(E,this))return new E(j);this._writableState=new C(j,this,V),this.writable=!0,j&&("function"==typeof j.write&&(this._write=j.write),"function"==typeof j.writev&&(this._writev=j.writev),"function"==typeof j.destroy&&(this._destroy=j.destroy),"function"==typeof j.final&&(this._final=j.final)),o.call(this)}function L(j,V,Z,Y,ee,re,X){V.writelen=Y,V.writecb=X,V.writing=!0,V.sync=!0,V.destroyed?V.onwrite(new m("write")):Z?j._writev(ee,V.onwrite):j._write(ee,re,V.onwrite),V.sync=!1}function D(j,V,Z,Y){var ee,re;Z||(ee=j,0===(re=V).length&&re.needDrain&&(re.needDrain=!1,ee.emit("drain"))),V.pendingcb--,Y(),P(j,V)}function N(j,V){V.bufferProcessing=!0;var Z=V.bufferedRequest;if(j._writev&&Z&&Z.next){var ee=new Array(V.bufferedRequestCount),re=V.corkedRequestsFree;re.entry=Z;for(var X=0,K=!0;Z;)ee[X]=Z,Z.isBuf||(K=!1),Z=Z.next,X+=1;ee.allBuffers=K,L(j,V,!0,V.length,ee,"",re.finish),V.pendingcb++,V.lastBufferedRequest=null,re.next?(V.corkedRequestsFree=re.next,re.next=null):V.corkedRequestsFree=new M(V),V.bufferedRequestCount=0}else{for(;Z;){var ie=Z.chunk;if(L(j,V,!1,V.objectMode?1:ie.length,ie,Z.encoding,Z.callback),Z=Z.next,V.bufferedRequestCount--,V.writing)break}null===Z&&(V.lastBufferedRequest=null)}V.bufferedRequest=Z,V.bufferProcessing=!1}function F(j){return j.ending&&0===j.length&&null===j.bufferedRequest&&!j.finished&&!j.writing}function I(j,V){j._final(function(Z){V.pendingcb--,Z&&A(j,Z),V.prefinished=!0,j.emit("prefinish"),P(j,V)})}function P(j,V){var ee,re,Z=F(V);if(Z&&(ee=j,(re=V).prefinished||re.finalCalled||("function"!=typeof ee._final||re.destroyed?(re.prefinished=!0,ee.emit("prefinish")):(re.pendingcb++,re.finalCalled=!0,y.nextTick(I,ee,re))),0===V.pendingcb&&(V.finished=!0,j.emit("finish"),V.autoDestroy))){var Y=j._readableState;(!Y||Y.autoDestroy&&Y.endEmitted)&&j.destroy()}return Z}b("inherits")(E,o),C.prototype.getBuffer=function(){for(var j=this.bufferedRequest,V=[];j;)V.push(j),j=j.next;return V},function(){try{Object.defineProperty(C.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(j){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(i=Function.prototype[Symbol.hasInstance],Object.defineProperty(E,Symbol.hasInstance,{value:function(j){return!!i.call(this,j)||this===E&&j&&j._writableState instanceof C}})):i=function(j){return j instanceof this},E.prototype.pipe=function(){A(this,new g)},E.prototype.write=function(j,V,Z){var Y,K,ie,q,ee=this._writableState,re=!1,X=!ee.objectMode&&(a.isBuffer(Y=j)||Y instanceof l);return X&&!a.isBuffer(j)&&(j=a.from(j)),"function"==typeof V&&(Z=V,V=null),X?V="buffer":V||(V=ee.defaultEncoding),"function"!=typeof Z&&(Z=k),ee.ending?(K=this,ie=Z,q=new w,A(K,q),y.nextTick(ie,q)):(X||function(K,ie,q,U){var W;return null===q?W=new u:"string"==typeof q||ie.objectMode||(W=new d("chunk",["string","Buffer"],q)),!W||(A(K,W),y.nextTick(U,W),!1)}(this,ee,j,Z))&&(ee.pendingcb++,re=function(K,ie,q,U,W,ae){if(!q){var G=(pe=U,(ue=ie).objectMode||!1===ue.decodeStrings||"string"!=typeof pe||(pe=a.from(pe,W)),pe);U!==G&&(q=!0,W="buffer",U=G)}var ue,pe,te=ie.objectMode?1:U.length;ie.length+=te;var ne=ie.length<ie.highWaterMark;if(ne||(ie.needDrain=!0),ie.writing||ie.corked){var le=ie.lastBufferedRequest;ie.lastBufferedRequest={chunk:U,encoding:W,isBuf:q,callback:ae,next:null},le?le.next=ie.lastBufferedRequest:ie.bufferedRequest=ie.lastBufferedRequest,ie.bufferedRequestCount+=1}else L(K,ie,!1,te,U,W,ae);return ne}(this,ee,X,j,V,Z)),re},E.prototype.cork=function(){this._writableState.corked++},E.prototype.uncork=function(){var j=this._writableState;j.corked&&(j.corked--,j.writing||j.corked||j.bufferProcessing||!j.bufferedRequest||N(this,j))},E.prototype.setDefaultEncoding=function(j){if("string"==typeof j&&(j=j.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((j+"").toLowerCase())>-1))throw new c(j);return this._writableState.defaultEncoding=j,this},Object.defineProperty(E.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),E.prototype._write=function(j,V,Z){Z(new p("_write()"))},E.prototype._writev=null,E.prototype.end=function(j,V,Z){var re,X,Y=this._writableState;return"function"==typeof j?(Z=j,j=null,V=null):"function"==typeof V&&(Z=V,V=null),null!=j&&this.write(j,V),Y.corked&&(Y.corked=1,this.uncork()),Y.ending||(this,X=Z,(re=Y).ending=!0,P(this,re),X&&(re.finished?y.nextTick(X):this.once("finish",X)),re.ended=!0,this.writable=!1),this},Object.defineProperty(E.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(E.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(j){this._writableState&&(this._writableState.destroyed=j)}}),E.prototype.destroy=v.destroy,E.prototype._undestroy=v.undestroy,E.prototype._destroy=function(j,V){V(j)}}).call(this)}).call(this,b("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/destroy":294,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,inherits:231,"util-deprecate":330}],292:[function(b,oe,se){(function(y){(function(){"use strict";var x;function M(m,u,w){return u in m?Object.defineProperty(m,u,{value:w,enumerable:!0,configurable:!0,writable:!0}):m[u]=w,m}var _=b("./end-of-stream"),e=Symbol("lastResolve"),o=Symbol("lastReject"),a=Symbol("error"),l=Symbol("ended"),i=Symbol("lastPromise"),v=Symbol("handlePromise"),h=Symbol("stream");function s(m,u){return{value:m,done:u}}function d(m){var u=m[e];if(null!==u){var w=m[h].read();null!==w&&(m[i]=null,m[e]=null,m[o]=null,u(s(w,!1)))}}function p(m){y.nextTick(d,m)}var f=Object.getPrototypeOf(function(){}),g=Object.setPrototypeOf((M(x={get stream(){return this[h]},next:function(){var m=this,u=this[a];if(null!==u)return Promise.reject(u);if(this[l])return Promise.resolve(s(void 0,!0));if(this[h].destroyed)return new Promise(function(k,C){y.nextTick(function(){m[a]?C(m[a]):k(s(void 0,!0))})});var w,k,C,c=this[i];if(c)w=new Promise((k=c,C=this,function(E,L){k.then(function(){C[l]?E(s(void 0,!0)):C[v](E,L)},L)}));else{var A=this[h].read();if(null!==A)return Promise.resolve(s(A,!1));w=new Promise(this[v])}return this[i]=w,w}},Symbol.asyncIterator,function(){return this}),M(x,"return",function(){var m=this;return new Promise(function(u,w){m[h].destroy(null,function(c){c?w(c):u(s(void 0,!0))})})}),x),f);oe.exports=function(m){var u,w=Object.create(g,(M(u={},h,{value:m,writable:!0}),M(u,e,{value:null,writable:!0}),M(u,o,{value:null,writable:!0}),M(u,a,{value:null,writable:!0}),M(u,l,{value:m._readableState.endEmitted,writable:!0}),M(u,v,{value:function(c,A){var k=w[h].read();k?(w[i]=null,w[e]=null,w[o]=null,c(s(k,!1))):(w[e]=c,w[o]=A)},writable:!0}),u));return w[i]=null,_(m,function(c){if(c&&"ERR_STREAM_PREMATURE_CLOSE"!==c.code){var A=w[o];return null!==A&&(w[i]=null,w[e]=null,w[o]=null,A(c)),void(w[a]=c)}var k=w[e];null!==k&&(w[i]=null,w[e]=null,w[o]=null,k(s(void 0,!0))),w[l]=!0}),m.on("readable",p.bind(null,w)),w}}).call(this)}).call(this,b("_process"))},{"./end-of-stream":295,_process:277}],293:[function(b,oe,se){"use strict";function y(a,l){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(a);l&&(v=v.filter(function(h){return Object.getOwnPropertyDescriptor(a,h).enumerable})),i.push.apply(i,v)}return i}function x(a,l,i){return l in a?Object.defineProperty(a,l,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[l]=i,a}function M(a,l){for(var i=0;i<l.length;i++){var v=l[i];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(a,v.key,v)}}var _=b("buffer").Buffer,e=b("util").inspect,o=e&&e.custom||"inspect";oe.exports=function(){function a(){(function(h,s){if(!(h instanceof s))throw new TypeError("Cannot call a class as a function")})(this,a),this.head=null,this.tail=null,this.length=0}var l,i;return l=a,(i=[{key:"push",value:function(h){var s={data:h,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length}},{key:"unshift",value:function(h){var s={data:h,next:this.head};0===this.length&&(this.tail=s),this.head=s,++this.length}},{key:"shift",value:function(){if(0!==this.length){var h=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,h}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(h){if(0===this.length)return"";for(var s=this.head,d=""+s.data;s=s.next;)d+=h+s.data;return d}},{key:"concat",value:function(h){if(0===this.length)return _.alloc(0);for(var f=_.allocUnsafe(h>>>0),g=this.head,m=0;g;)_.prototype.copy.call(g.data,f,m),m+=g.data.length,g=g.next;return f}},{key:"consume",value:function(h,s){var d;return h<this.head.data.length?(d=this.head.data.slice(0,h),this.head.data=this.head.data.slice(h)):d=h===this.head.data.length?this.shift():s?this._getString(h):this._getBuffer(h),d}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(h){var s=this.head,d=1,p=s.data;for(h-=p.length;s=s.next;){var f=s.data,g=h>f.length?f.length:h;if(p+=g===f.length?f:f.slice(0,h),0==(h-=g)){g===f.length?(++d,this.head=s.next?s.next:this.tail=null):(this.head=s,s.data=f.slice(g));break}++d}return this.length-=d,p}},{key:"_getBuffer",value:function(h){var s=_.allocUnsafe(h),d=this.head,p=1;for(d.data.copy(s),h-=d.data.length;d=d.next;){var f=d.data,g=h>f.length?f.length:h;if(f.copy(s,s.length-h,0,g),0==(h-=g)){g===f.length?(++p,this.head=d.next?d.next:this.tail=null):(this.head=d,d.data=f.slice(g));break}++p}return this.length-=p,s}},{key:o,value:function(h,s){return e(this,function(d){for(var p=1;p<arguments.length;p++){var f=null!=arguments[p]?arguments[p]:{};p%2?y(Object(f),!0).forEach(function(g){x(d,g,f[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(d,Object.getOwnPropertyDescriptors(f)):y(Object(f)).forEach(function(g){Object.defineProperty(d,g,Object.getOwnPropertyDescriptor(f,g))})}return d}({},s,{depth:0,customInspect:!1}))}}])&&M(l.prototype,i),a}()},{buffer:85,util:83}],294:[function(b,oe,se){(function(y){(function(){"use strict";function x(e,o){_(e,o),M(e)}function M(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function _(e,o){e.emit("error",o)}oe.exports={destroy:function(e,o){var a=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,y.nextTick(_,this,e)):y.nextTick(_,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(v){!o&&v?a._writableState?a._writableState.errorEmitted?y.nextTick(M,a):(a._writableState.errorEmitted=!0,y.nextTick(x,a,v)):y.nextTick(x,a,v):o?(y.nextTick(M,a),o(v)):y.nextTick(M,a)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,o){var a=e._readableState,l=e._writableState;a&&a.autoDestroy||l&&l.autoDestroy?e.destroy(o):e.emit("error",o)}}}).call(this)}).call(this,b("_process"))},{_process:277}],295:[function(b,oe,se){"use strict";var y=b("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function x(){}oe.exports=function M(_,e,o){if("function"==typeof e)return M(_,null,e);var m,u;e||(e={}),m=o||x,u=!1,o=function(){if(!u){u=!0;for(var w=arguments.length,c=new Array(w),A=0;A<w;A++)c[A]=arguments[A];m.apply(this,c)}};var a=e.readable||!1!==e.readable&&_.readable,l=e.writable||!1!==e.writable&&_.writable,i=function(){_.writable||h()},v=_._writableState&&_._writableState.finished,h=function(){l=!1,v=!0,a||o.call(_)},s=_._readableState&&_._readableState.endEmitted,d=function(){a=!1,s=!0,l||o.call(_)},p=function(m){o.call(_,m)},f=function(){var m;return a&&!s?(_._readableState&&_._readableState.ended||(m=new y),o.call(_,m)):l&&!v?(_._writableState&&_._writableState.ended||(m=new y),o.call(_,m)):void 0},g=function(){_.req.on("finish",h)};return function(m){return m.setHeader&&"function"==typeof m.abort}(_)?(_.on("complete",h),_.on("abort",f),_.req?g():_.on("request",g)):l&&!_._writableState&&(_.on("end",i),_.on("close",i)),_.on("end",d),_.on("finish",h),!1!==e.error&&_.on("error",p),_.on("close",f),function(){_.removeListener("complete",h),_.removeListener("abort",f),_.removeListener("request",g),_.req&&_.req.removeListener("finish",h),_.removeListener("end",i),_.removeListener("close",i),_.removeListener("finish",h),_.removeListener("end",d),_.removeListener("error",p),_.removeListener("close",f)}}},{"../../../errors":286}],296:[function(b,oe,se){oe.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],297:[function(b,oe,se){"use strict";var y,x=b("../../../errors").codes,M=x.ERR_MISSING_ARGS,_=x.ERR_STREAM_DESTROYED;function e(v){if(v)throw v}function o(v,h,s,d){var g,m;g=d,m=!1,d=function(){m||(m=!0,g.apply(void 0,arguments))};var p=!1;v.on("close",function(){p=!0}),void 0===y&&(y=b("./end-of-stream")),y(v,{readable:h,writable:s},function(g){if(g)return d(g);p=!0,d()});var f=!1;return function(g){if(!p&&!f)return f=!0,function(m){return m.setHeader&&"function"==typeof m.abort}(v)?v.abort():"function"==typeof v.destroy?v.destroy():void d(g||new _("pipe"))}}function a(v){v()}function l(v,h){return v.pipe(h)}function i(v){return v.length?"function"!=typeof v[v.length-1]?e:v.pop():e}oe.exports=function(){for(var v=arguments.length,h=new Array(v),s=0;s<v;s++)h[s]=arguments[s];var d,p=i(h);if(Array.isArray(h[0])&&(h=h[0]),h.length<2)throw new M("streams");var f=h.map(function(g,m){var u=m<h.length-1;return o(g,u,m>0,function(w){d||(d=w),w&&f.forEach(a),u||(f.forEach(a),p(d))})});return h.reduce(l)}},{"../../../errors":286,"./end-of-stream":295}],298:[function(b,oe,se){"use strict";var y=b("../../../errors").codes.ERR_INVALID_OPT_VALUE;oe.exports={getHighWaterMark:function(x,M,_,e){var a,o=null!=(a=M).highWaterMark?a.highWaterMark:e?a[_]:null;if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new y(e?_:"highWaterMark",o);return Math.floor(o)}return x.objectMode?16:16384}}},{"../../../errors":286}],299:[function(b,oe,se){oe.exports=b("events").EventEmitter},{events:84}],300:[function(b,oe,se){"use strict";var y=b("safe-buffer").Buffer,x=y.isEncoding||function(s){switch((s=""+s)&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function M(s){var d;switch(this.encoding=function(p){var f=function(g){if(!g)return"utf8";for(var m;;)switch(g){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return g;default:if(m)return;g=(""+g).toLowerCase(),m=!0}}(p);if("string"!=typeof f&&(y.isEncoding===x||!x(p)))throw new Error("Unknown encoding: "+p);return f||p}(s),this.encoding){case"utf16le":this.text=o,this.end=a,d=4;break;case"utf8":this.fillLast=e,d=4;break;case"base64":this.text=l,this.end=i,d=3;break;default:return this.write=v,void(this.end=h)}this.lastNeed=0,this.lastTotal=0,this.lastChar=y.allocUnsafe(d)}function _(s){return s<=127?0:s>>5==6?2:s>>4==14?3:s>>3==30?4:s>>6==2?-1:-2}function e(s){var d=this.lastTotal-this.lastNeed,p=function(f,g,m){if(128!=(192&g[0]))return f.lastNeed=0,"\ufffd";if(f.lastNeed>1&&g.length>1){if(128!=(192&g[1]))return f.lastNeed=1,"\ufffd";if(f.lastNeed>2&&g.length>2&&128!=(192&g[2]))return f.lastNeed=2,"\ufffd"}}(this,s);return void 0!==p?p:this.lastNeed<=s.length?(s.copy(this.lastChar,d,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(s.copy(this.lastChar,d,0,s.length),void(this.lastNeed-=s.length))}function o(s,d){if((s.length-d)%2==0){var p=s.toString("utf16le",d);if(p){var f=p.charCodeAt(p.length-1);if(f>=55296&&f<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1],p.slice(0,-1)}return p}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=s[s.length-1],s.toString("utf16le",d,s.length-1)}function a(s){var d=s&&s.length?this.write(s):"";return this.lastNeed?d+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):d}function l(s,d){var p=(s.length-d)%3;return 0===p?s.toString("base64",d):(this.lastNeed=3-p,this.lastTotal=3,1===p?this.lastChar[0]=s[s.length-1]:(this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1]),s.toString("base64",d,s.length-p))}function i(s){var d=s&&s.length?this.write(s):"";return this.lastNeed?d+this.lastChar.toString("base64",0,3-this.lastNeed):d}function v(s){return s.toString(this.encoding)}function h(s){return s&&s.length?this.write(s):""}se.StringDecoder=M,M.prototype.write=function(s){if(0===s.length)return"";var d,p;if(this.lastNeed){if(void 0===(d=this.fillLast(s)))return"";p=this.lastNeed,this.lastNeed=0}else p=0;return p<s.length?d?d+this.text(s,p):this.text(s,p):d||""},M.prototype.end=function(s){var d=s&&s.length?this.write(s):"";return this.lastNeed?d+"\ufffd":d},M.prototype.text=function(s,d){var p=function(g,m,u){var w=m.length-1;if(w<u)return 0;var c=_(m[w]);return c>=0?(c>0&&(g.lastNeed=c-1),c):--w<u||-2===c?0:(c=_(m[w]))>=0?(c>0&&(g.lastNeed=c-2),c):--w<u||-2===c?0:(c=_(m[w]))>=0?(c>0&&(2===c?c=0:g.lastNeed=c-3),c):0}(this,s,d);if(!this.lastNeed)return s.toString("utf8",d);this.lastTotal=p;var f=s.length-(p-this.lastNeed);return s.copy(this.lastChar,0,f),s.toString("utf8",d,f)},M.prototype.fillLast=function(s){if(this.lastNeed<=s.length)return s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,s.length),this.lastNeed-=s.length}},{"safe-buffer":284}],301:[function(b,oe,se){(function(y,x){(function(){var M=b("assert"),_=b("debug")("stream-parser");function e(p){_("initializing parser stream"),p._parserBytesLeft=0,p._parserBuffers=[],p._parserBuffered=0,p._parserState=-1,p._parserCallback=null,"function"==typeof p.push&&(p._parserOutput=p.push.bind(p)),p._parserInit=!0}function o(p,f){M(!this._parserCallback,'there is already a "callback" set!'),M(isFinite(p)&&p>0,'can only buffer a finite number of bytes > 0, got "'+p+'"'),this._parserInit||e(this),_("buffering %o bytes",p),this._parserBytesLeft=p,this._parserCallback=f,this._parserState=0}function a(p,f){M(!this._parserCallback,'there is already a "callback" set!'),M(p>0,'can only skip > 0 bytes, got "'+p+'"'),this._parserInit||e(this),_("skipping %o bytes",p),this._parserBytesLeft=p,this._parserCallback=f,this._parserState=1}function l(p,f){M(!this._parserCallback,'There is already a "callback" set!'),M(p>0,'can only pass through > 0 bytes, got "'+p+'"'),this._parserInit||e(this),_("passing through %o bytes",p),this._parserBytesLeft=p,this._parserCallback=f,this._parserState=2}function i(p,f,g){this._parserInit||e(this),_("write(%o bytes)",p.length),"function"==typeof f&&(g=f),s(this,p,null,g)}function v(p,f,g){this._parserInit||e(this),_("transform(%o bytes)",p.length),"function"!=typeof f&&(f=this._parserOutput),s(this,p,f,g)}function h(p,f,g,m){if(p._parserBytesLeft-=f.length,_("%o bytes left for stream piece",p._parserBytesLeft),0===p._parserState?(p._parserBuffers.push(f),p._parserBuffered+=f.length):2===p._parserState&&g(f),0!==p._parserBytesLeft)return m;var u=p._parserCallback;if(u&&0===p._parserState&&p._parserBuffers.length>1&&(f=x.concat(p._parserBuffers,p._parserBuffered)),0!==p._parserState&&(f=null),p._parserCallback=null,p._parserBuffered=0,p._parserState=-1,p._parserBuffers.splice(0),u){var w=[];f&&w.push(f),g&&w.push(g);var c=u.length>w.length;c&&w.push(d(m));var A=u.apply(p,w);if(!c||m===A)return m}}oe.exports=function(p){var f=p&&"function"==typeof p._transform;if(!(f||p&&"function"==typeof p._write))throw new Error("must pass a Writable or Transform stream in");_("extending Parser into stream"),p._bytes=o,p._skipBytes=a,f&&(p._passthrough=l),f?p._transform=v:p._write=i};var s=d(function p(f,g,m,u){return f._parserBytesLeft<=0?u(new Error("got data but not currently parsing anything")):g.length<=f._parserBytesLeft?function(){return h(f,g,m,u)}:function(){var w=g.slice(0,f._parserBytesLeft);return h(f,w,m,function(c){return c?u(c):g.length>w.length?function(){return p(f,g.slice(w.length),m,u)}:void 0})}});function d(p){return function(){for(var f=p.apply(this,arguments);"function"==typeof f;)f=f();return f}}}).call(this)}).call(this,b("_process"),b("buffer").Buffer)},{_process:277,assert:75,buffer:85,debug:302}],302:[function(b,oe,se){(function(y){(function(){function x(){var M;try{M=se.storage.debug}catch(_){}return!M&&void 0!==y&&"env"in y&&(M=y.env.DEBUG),M}(se=oe.exports=b("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},se.formatArgs=function(M){var _=this.useColors;if(M[0]=(_?"%c":"")+this.namespace+(_?" %c":" ")+M[0]+(_?"%c ":" ")+"+"+se.humanize(this.diff),_){var e="color: "+this.color;M.splice(1,0,e,"color: inherit");var o=0,a=0;M[0].replace(/%[a-zA-Z%]/g,function(l){"%%"!==l&&(o++,"%c"===l&&(a=o))}),M.splice(a,0,e)}},se.save=function(M){try{null==M?se.storage.removeItem("debug"):se.storage.debug=M}catch(_){}},se.load=x,se.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},se.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(M){}}(),se.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],se.formatters.j=function(M){try{return JSON.stringify(M)}catch(_){return"[UnexpectedJSONParseError]: "+_.message}},se.enable(x())}).call(this)}).call(this,b("_process"))},{"./debug":303,_process:277}],303:[function(b,oe,se){var y;function x(M){function _(){if(_.enabled){var e=_,o=+new Date;e.diff=o-(y||o),e.prev=y,e.curr=o,y=o;for(var l=new Array(arguments.length),i=0;i<l.length;i++)l[i]=arguments[i];l[0]=se.coerce(l[0]),"string"!=typeof l[0]&&l.unshift("%O");var v=0;l[0]=l[0].replace(/%([a-zA-Z%])/g,function(s,d){if("%%"===s)return s;v++;var p=se.formatters[d];return"function"==typeof p&&(s=p.call(e,l[v]),l.splice(v,1),v--),s}),se.formatArgs.call(e,l),(_.log||se.log||console.log.bind(console)).apply(e,l)}}return _.namespace=M,_.enabled=se.enabled(M),_.useColors=se.useColors(),_.color=function(e){var o,a=0;for(o in e)a=(a<<5)-a+e.charCodeAt(o),a|=0;return se.colors[Math.abs(a)%se.colors.length]}(M),"function"==typeof se.init&&se.init(_),_}(se=oe.exports=x.debug=x.default=x).coerce=function(M){return M instanceof Error?M.stack||M.message:M},se.disable=function(){se.enable("")},se.enable=function(M){se.save(M),se.names=[],se.skips=[];for(var _=("string"==typeof M?M:"").split(/[\s,]+/),e=_.length,o=0;o<e;o++)_[o]&&("-"===(M=_[o].replace(/\*/g,".*?"))[0]?se.skips.push(new RegExp("^"+M.substr(1)+"$")):se.names.push(new RegExp("^"+M+"$")))},se.enabled=function(M){var _,e;for(_=0,e=se.skips.length;_<e;_++)if(se.skips[_].test(M))return!1;for(_=0,e=se.names.length;_<e;_++)if(se.names[_].test(M))return!0;return!1},se.humanize=b("ms"),se.names=[],se.skips=[],se.formatters={}},{ms:304}],304:[function(b,oe,se){var y=1e3,x=6e4,M=60*x,_=24*M;function e(o,a,l){if(!(o<a))return o<1.5*a?Math.floor(o/a)+" "+l:Math.ceil(o/a)+" "+l+"s"}oe.exports=function(o,a){a=a||{};var l,v,i=typeof o;if("string"===i&&o.length>0)return function(v){if(!((v=String(v)).length>100)){var h=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(v);if(h){var s=parseFloat(h[1]);switch((h[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*_;case"hours":case"hour":case"hrs":case"hr":case"h":return s*M;case"minutes":case"minute":case"mins":case"min":case"m":return s*x;case"seconds":case"second":case"secs":case"sec":case"s":return s*y;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(o);if("number"===i&&!1===isNaN(o))return a.long?e(l=o,_,"day")||e(l,M,"hour")||e(l,x,"minute")||e(l,y,"second")||l+" ms":(v=o)>=_?Math.round(v/_)+"d":v>=M?Math.round(v/M)+"h":v>=x?Math.round(v/x)+"m":v>=y?Math.round(v/y)+"s":v+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))}},{}],305:[function(b,oe,se){"use strict";var y=b("parenthesis");oe.exports=function(x,M,_){if(null==x)throw Error("First argument should be a string");if(null==M)throw Error("Separator should be a string or a RegExp");_?("string"==typeof _||Array.isArray(_))&&(_={ignore:_}):_={},null==_.escape&&(_.escape=!0),null==_.ignore?_.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof _.ignore&&(_.ignore=[_.ignore]),_.ignore=_.ignore.map(function(h){return 1===h.length&&(h+=h),h}));var e=y.parse(x,{flat:!0,brackets:_.ignore}),o=e[0].split(M);if(_.escape){for(var a=[],l=0;l<o.length;l++){var i=o[l];"\\"===i[i.length-1]&&"\\"!==i[i.length-2]?(a.push(i+M+o[l+1]),l++):a.push(i)}o=a}for(l=0;l<o.length;l++)e[0]=o[l],o[l]=y.stringify(e,{flat:!0});return o}},{parenthesis:248}],306:[function(b,oe,se){"use strict";oe.exports=function(y){for(var x=y.length,M=new Array(x),_=new Array(x),e=new Array(x),o=new Array(x),a=new Array(x),l=new Array(x),i=0;i<x;++i)M[i]=-1,_[i]=0,e[i]=!1,o[i]=0,a[i]=-1,l[i]=[];var v,h=0,s=[],d=[];function p(m){var u=[m],w=[m];for(M[m]=_[m]=h,e[m]=!0,h+=1;w.length>0;){var c=y[m=w[w.length-1]];if(o[m]<c.length){for(var A=o[m];A<c.length;++A){var k=c[A];if(M[k]<0){M[k]=_[k]=h,e[k]=!0,h+=1,u.push(k),w.push(k);break}e[k]&&(_[m]=0|Math.min(_[m],_[k])),a[k]>=0&&l[m].push(a[k])}o[m]=A}else{if(_[m]===M[m]){var C=[],E=[],L=0;for(A=u.length-1;A>=0;--A){var D=u[A];if(e[D]=!1,C.push(D),E.push(l[D]),L+=l[D].length,a[D]=s.length,D===m){u.length=A;break}}s.push(C);var N=new Array(L);for(A=0;A<E.length;A++)for(var F=0;F<E[A].length;F++)N[--L]=E[A][F];d.push(N)}w.pop()}}}for(i=0;i<x;++i)M[i]<0&&p(i);for(i=0;i<d.length;i++){var f=d[i];if(0!==f.length){f.sort(function(m,u){return m-u}),v=[f[0]];for(var g=1;g<f.length;g++)f[g]!==f[g-1]&&v.push(f[g]);d[i]=v}}return{components:s,adjacencyList:d}}},{}],307:[function(b,oe,se){"use strict";Object.defineProperty(se,"__esModule",{value:!0});var x=2*Math.PI,M=function(o,a,l,i,v,h,s){var d=o.x,p=o.y;return{x:i*(d*=a)-v*(p*=l)+h,y:v*d+i*p+s}},_=function(o,a){var l=1.5707963267948966===a?.551915024494:-1.5707963267948966===a?-.551915024494:4/3*Math.tan(a/4),i=Math.cos(o),v=Math.sin(o),h=Math.cos(o+a),s=Math.sin(o+a);return[{x:i-v*l,y:v+i*l},{x:h+s*l,y:s-h*l},{x:h,y:s}]},e=function(o,a,l,i){var v=o*l+a*i;return v>1&&(v=1),v<-1&&(v=-1),(o*i-a*l<0?-1:1)*Math.acos(v)};se.default=function(o){var a=o.px,l=o.py,i=o.cx,v=o.cy,h=o.rx,s=o.ry,d=o.xAxisRotation,p=void 0===d?0:d,f=o.largeArcFlag,g=void 0===f?0:f,m=o.sweepFlag,u=void 0===m?0:m,w=[];if(0===h||0===s)return[];var c=Math.sin(p*x/360),A=Math.cos(p*x/360),k=A*(a-i)/2+c*(l-v)/2,C=-c*(a-i)/2+A*(l-v)/2;if(0===k&&0===C)return[];h=Math.abs(h),s=Math.abs(s);var E=Math.pow(k,2)/Math.pow(h,2)+Math.pow(C,2)/Math.pow(s,2);E>1&&(h*=Math.sqrt(E),s*=Math.sqrt(E));var D=function(o,a){if(Array.isArray(o))return o;if(Symbol.iterator in Object(o))return function(l,i){var v=[],h=!0,s=!1,d=void 0;try{for(var p,f=l[Symbol.iterator]();!(h=(p=f.next()).done)&&(v.push(p.value),!i||v.length!==i);h=!0);}catch(g){s=!0,d=g}finally{try{!h&&f.return&&f.return()}finally{if(s)throw d}}return v}(o,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(Y,ee,re,X,K,ie,q,U,W,ae,G,te){var ne=Math.pow(K,2),le=Math.pow(ie,2),ue=Math.pow(G,2),pe=Math.pow(te,2),de=ne*le-ne*pe-le*ue;de<0&&(de=0),de/=ne*pe+le*ue;var _e=(de=Math.sqrt(de)*(q===U?-1:1))*K/ie*te,me=de*-ie/K*G,we=ae*_e-W*me+(Y+re)/2,De=W*_e+ae*me+(ee+X)/2,Le=(G-_e)/K,Ie=(te-me)/ie,je=(-G-_e)/K,ye=(-te-me)/ie,Me=e(1,0,Le,Ie),Oe=e(Le,Ie,je,ye);return 0===U&&Oe>0&&(Oe-=x),1===U&&Oe<0&&(Oe+=x),[we,De,Me,Oe]}(a,l,i,v,h,s,g,u,c,A,k,C),4),N=D[0],F=D[1],I=D[2],P=D[3],j=Math.abs(P)/(x/4);Math.abs(1-j)<1e-7&&(j=1);var V=Math.max(Math.ceil(j),1);P/=V;for(var Z=0;Z<V;Z++)w.push(_(I,P)),I+=P;return w.map(function(Y){var ee=M(Y[0],h,s,A,c,N,F),re=ee.x,X=ee.y,K=M(Y[1],h,s,A,c,N,F),ie=K.x,q=K.y,U=M(Y[2],h,s,A,c,N,F);return{x1:re,y1:X,x2:ie,y2:q,x:U.x,y:U.y}})},oe.exports=se.default},{}],308:[function(b,oe,se){"use strict";var y=b("parse-svg-path"),x=b("abs-svg-path"),M=b("normalize-svg-path"),_=b("is-svg-path"),e=b("assert");oe.exports=function(o){if(Array.isArray(o)&&1===o.length&&"string"==typeof o[0]&&(o=o[0]),"string"==typeof o&&(e(_(o),"String is not an SVG path."),o=y(o)),e(Array.isArray(o),"Argument should be a string or an array of path segments."),o=x(o),!(o=M(o)).length)return[0,0,0,0];for(var a=[1/0,1/0,-1/0,-1/0],l=0,i=o.length;l<i;l++)for(var v=o[l].slice(1),h=0;h<v.length;h+=2)v[h+0]<a[0]&&(a[0]=v[h+0]),v[h+1]<a[1]&&(a[1]=v[h+1]),v[h+0]>a[2]&&(a[2]=v[h+0]),v[h+1]>a[3]&&(a[3]=v[h+1]);return a}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":309,"parse-svg-path":250}],309:[function(b,oe,se){"use strict";oe.exports=function(_){for(var e,o=[],a=0,l=0,i=0,v=0,h=null,s=null,d=0,p=0,f=0,g=_.length;f<g;f++){var m=_[f],u=m[0];switch(u){case"M":i=m[1],v=m[2];break;case"A":var w=y({px:d,py:p,cx:m[6],cy:m[7],rx:m[1],ry:m[2],xAxisRotation:m[3],largeArcFlag:m[4],sweepFlag:m[5]});if(!w.length)continue;for(var c,A=0;A<w.length;A++)m=["C",(c=w[A]).x1,c.y1,c.x2,c.y2,c.x,c.y],A<w.length-1&&o.push(m);break;case"S":var k=d,C=p;"C"!=e&&"S"!=e||(k+=k-a,C+=C-l),m=["C",k,C,m[1],m[2],m[3],m[4]];break;case"T":"Q"==e||"T"==e?(h=2*d-h,s=2*p-s):(h=d,s=p),m=M(d,p,h,s,m[1],m[2]);break;case"Q":h=m[1],s=m[2],m=M(d,p,m[1],m[2],m[3],m[4]);break;case"L":m=x(d,p,m[1],m[2]);break;case"H":m=x(d,p,m[1],p);break;case"V":m=x(d,p,d,m[1]);break;case"Z":m=x(d,p,i,v)}e=u,d=m[m.length-2],p=m[m.length-1],m.length>4?(a=m[m.length-4],l=m[m.length-3]):(a=d,l=p),o.push(m)}return o};var y=b("svg-arc-to-cubic-bezier");function x(_,e,o,a){return["C",_,e,o,a,o,a]}function M(_,e,o,a,l,i){return["C",_/3+2/3*o,e/3+2/3*a,l/3+2/3*o,i/3+2/3*a,l,i]}},{"svg-arc-to-cubic-bezier":307}],310:[function(b,oe,se){"use strict";var y,x=b("svg-path-bounds"),M=b("parse-svg-path"),_=b("draw-svg-path"),e=b("is-svg-path"),o=b("bitmap-sdf"),a=document.createElement("canvas"),l=a.getContext("2d");oe.exports=function(i,v){if(!e(i))throw Error("Argument should be valid svg path string");var h,s;v||(v={}),v.shape?(h=v.shape[0],s=v.shape[1]):(h=a.width=v.w||v.width||200,s=a.height=v.h||v.height||200);var d=Math.min(h,s),p=v.stroke||0,f=v.viewbox||v.viewBox||x(i),g=[h/(f[2]-f[0]),s/(f[3]-f[1])],m=Math.min(g[0]||0,g[1]||0)/2;if(l.fillStyle="black",l.fillRect(0,0,h,s),l.fillStyle="white",p&&("number"!=typeof p&&(p=1),l.strokeStyle=p>0?"white":"black",l.lineWidth=Math.abs(p)),l.translate(.5*h,.5*s),l.scale(m,m),function(){if(null!=y)return y;var c=document.createElement("canvas").getContext("2d");if(c.canvas.width=c.canvas.height=1,!window.Path2D)return y=!1;var A=new Path2D("M0,0h1v1h-1v-1Z");c.fillStyle="black",c.fill(A);var k=c.getImageData(0,0,1,1);return y=k&&k.data&&255===k.data[3]}()){var u=new Path2D(i);l.fill(u),p&&l.stroke(u)}else{var w=M(i);_(l,w),l.fill(),p&&l.stroke()}return l.setTransform(1,0,0,1,0,0),o(l,{cutoff:null!=v.cutoff?v.cutoff:.5,radius:null!=v.radius?v.radius:.5*d})}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":308}],311:[function(b,oe,se){(function(y,x){(function(){var M=b("process/browser.js").nextTick,_=Function.prototype.apply,e=Array.prototype.slice,o={},a=0;function l(i,v){this._id=i,this._clearFn=v}se.setTimeout=function(){return new l(_.call(setTimeout,window,arguments),clearTimeout)},se.setInterval=function(){return new l(_.call(setInterval,window,arguments),clearInterval)},se.clearTimeout=se.clearInterval=function(i){i.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},se.enroll=function(i,v){clearTimeout(i._idleTimeoutId),i._idleTimeout=v},se.unenroll=function(i){clearTimeout(i._idleTimeoutId),i._idleTimeout=-1},se._unrefActive=se.active=function(i){clearTimeout(i._idleTimeoutId);var v=i._idleTimeout;v>=0&&(i._idleTimeoutId=setTimeout(function(){i._onTimeout&&i._onTimeout()},v))},se.setImmediate="function"==typeof y?y:function(i){var v=a++,h=!(arguments.length<2)&&e.call(arguments,1);return o[v]=!0,M(function(){o[v]&&(h?i.apply(null,h):i.call(null),se.clearImmediate(v))}),v},se.clearImmediate="function"==typeof x?x:function(i){delete o[i]}}).call(this)}).call(this,b("timers").setImmediate,b("timers").clearImmediate)},{"process/browser.js":277,timers:311}],312:[function(b,oe,se){!function(y){var x=/^\s+/,M=/\s+$/,_=0,e=y.round,o=y.min,a=y.max,l=y.random;function i(W,ae){if(ae=ae||{},(W=W||"")instanceof i)return W;if(!(this instanceof i))return new i(W,ae);var te,De,Le,ne,le,ue,pe,de,_e,me,G=(ne={r:0,g:0,b:0},le=1,ue=null,pe=null,de=null,_e=!1,me=!1,"string"==typeof(te=W)&&(te=function(Ie){Ie=Ie.replace(x,"").replace(M,"").toLowerCase();var je,ye=!1;if(N[Ie])Ie=N[Ie],ye=!0;else if("transparent"==Ie)return{r:0,g:0,b:0,a:0,format:"name"};return(je=q.rgb.exec(Ie))?{r:je[1],g:je[2],b:je[3]}:(je=q.rgba.exec(Ie))?{r:je[1],g:je[2],b:je[3],a:je[4]}:(je=q.hsl.exec(Ie))?{h:je[1],s:je[2],l:je[3]}:(je=q.hsla.exec(Ie))?{h:je[1],s:je[2],l:je[3],a:je[4]}:(je=q.hsv.exec(Ie))?{h:je[1],s:je[2],v:je[3]}:(je=q.hsva.exec(Ie))?{h:je[1],s:je[2],v:je[3],a:je[4]}:(je=q.hex8.exec(Ie))?{r:V(je[1]),g:V(je[2]),b:V(je[3]),a:re(je[4]),format:ye?"name":"hex8"}:(je=q.hex6.exec(Ie))?{r:V(je[1]),g:V(je[2]),b:V(je[3]),format:ye?"name":"hex"}:(je=q.hex4.exec(Ie))?{r:V(je[1]+""+je[1]),g:V(je[2]+""+je[2]),b:V(je[3]+""+je[3]),a:re(je[4]+""+je[4]),format:ye?"name":"hex8"}:!!(je=q.hex3.exec(Ie))&&{r:V(je[1]+""+je[1]),g:V(je[2]+""+je[2]),b:V(je[3]+""+je[3]),format:ye?"name":"hex"}}(te)),"object"==typeof te&&(U(te.r)&&U(te.g)&&U(te.b)?(De=te.g,Le=te.b,ne={r:255*P(te.r,255),g:255*P(De,255),b:255*P(Le,255)},_e=!0,me="%"===String(te.r).substr(-1)?"prgb":"rgb"):U(te.h)&&U(te.s)&&U(te.v)?(ue=Y(te.s),pe=Y(te.v),ne=function(Ie,je,ye){Ie=6*P(Ie,360),je=P(je,100),ye=P(ye,100);var Me=y.floor(Ie),Oe=Ie-Me,Pe=ye*(1-je),Re=ye*(1-Oe*je),Ue=ye*(1-(1-Oe)*je),qe=Me%6;return{r:255*[ye,Re,Pe,Pe,Ue,ye][qe],g:255*[Ue,ye,ye,Re,Pe,Pe][qe],b:255*[Pe,Pe,Ue,ye,ye,Re][qe]}}(te.h,ue,pe),_e=!0,me="hsv"):U(te.h)&&U(te.s)&&U(te.l)&&(ue=Y(te.s),de=Y(te.l),ne=function(Ie,je,ye){var Me,Oe,Pe;function Re(Xe,lt,He){return He<0&&(He+=1),He>1&&(He-=1),He<1/6?Xe+6*(lt-Xe)*He:He<.5?lt:He<2/3?Xe+(lt-Xe)*(2/3-He)*6:Xe}if(Ie=P(Ie,360),je=P(je,100),ye=P(ye,100),0===je)Me=Oe=Pe=ye;else{var Ue=ye<.5?ye*(1+je):ye+je-ye*je,qe=2*ye-Ue;Me=Re(qe,Ue,Ie+1/3),Oe=Re(qe,Ue,Ie),Pe=Re(qe,Ue,Ie-1/3)}return{r:255*Me,g:255*Oe,b:255*Pe}}(te.h,ue,de),_e=!0,me="hsl"),te.hasOwnProperty("a")&&(le=te.a)),le=I(le),{ok:_e,format:te.format||me,r:o(255,a(ne.r,0)),g:o(255,a(ne.g,0)),b:o(255,a(ne.b,0)),a:le});this._originalInput=W,this._r=G.r,this._g=G.g,this._b=G.b,this._a=G.a,this._roundA=e(100*this._a)/100,this._format=ae.format||G.format,this._gradientType=ae.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=G.ok,this._tc_id=_++}function v(W,ae,G){W=P(W,255),ae=P(ae,255),G=P(G,255);var te,ne,le=a(W,ae,G),ue=o(W,ae,G),pe=(le+ue)/2;if(le==ue)te=ne=0;else{var de=le-ue;switch(ne=pe>.5?de/(2-le-ue):de/(le+ue),le){case W:te=(ae-G)/de+(ae<G?6:0);break;case ae:te=(G-W)/de+2;break;case G:te=(W-ae)/de+4}te/=6}return{h:te,s:ne,l:pe}}function h(W,ae,G){W=P(W,255),ae=P(ae,255),G=P(G,255);var te,ne,le=a(W,ae,G),ue=o(W,ae,G),pe=le,de=le-ue;if(ne=0===le?0:de/le,le==ue)te=0;else{switch(le){case W:te=(ae-G)/de+(ae<G?6:0);break;case ae:te=(G-W)/de+2;break;case G:te=(W-ae)/de+4}te/=6}return{h:te,s:ne,v:pe}}function s(W,ae,G,te){var ne=[Z(e(W).toString(16)),Z(e(ae).toString(16)),Z(e(G).toString(16))];return te&&ne[0].charAt(0)==ne[0].charAt(1)&&ne[1].charAt(0)==ne[1].charAt(1)&&ne[2].charAt(0)==ne[2].charAt(1)?ne[0].charAt(0)+ne[1].charAt(0)+ne[2].charAt(0):ne.join("")}function d(W,ae,G,te){return[Z(ee(te)),Z(e(W).toString(16)),Z(e(ae).toString(16)),Z(e(G).toString(16))].join("")}function p(W,ae){ae=0===ae?0:ae||10;var G=i(W).toHsl();return G.s-=ae/100,G.s=j(G.s),i(G)}function f(W,ae){ae=0===ae?0:ae||10;var G=i(W).toHsl();return G.s+=ae/100,G.s=j(G.s),i(G)}function g(W){return i(W).desaturate(100)}function m(W,ae){ae=0===ae?0:ae||10;var G=i(W).toHsl();return G.l+=ae/100,G.l=j(G.l),i(G)}function u(W,ae){ae=0===ae?0:ae||10;var G=i(W).toRgb();return G.r=a(0,o(255,G.r-e(-ae/100*255))),G.g=a(0,o(255,G.g-e(-ae/100*255))),G.b=a(0,o(255,G.b-e(-ae/100*255))),i(G)}function w(W,ae){ae=0===ae?0:ae||10;var G=i(W).toHsl();return G.l-=ae/100,G.l=j(G.l),i(G)}function c(W,ae){var G=i(W).toHsl(),te=(G.h+ae)%360;return G.h=te<0?360+te:te,i(G)}function A(W){var ae=i(W).toHsl();return ae.h=(ae.h+180)%360,i(ae)}function k(W){var ae=i(W).toHsl(),G=ae.h;return[i(W),i({h:(G+120)%360,s:ae.s,l:ae.l}),i({h:(G+240)%360,s:ae.s,l:ae.l})]}function C(W){var ae=i(W).toHsl(),G=ae.h;return[i(W),i({h:(G+90)%360,s:ae.s,l:ae.l}),i({h:(G+180)%360,s:ae.s,l:ae.l}),i({h:(G+270)%360,s:ae.s,l:ae.l})]}function E(W){var ae=i(W).toHsl(),G=ae.h;return[i(W),i({h:(G+72)%360,s:ae.s,l:ae.l}),i({h:(G+216)%360,s:ae.s,l:ae.l})]}function L(W,ae,G){ae=ae||6,G=G||30;var te=i(W).toHsl(),ne=360/G,le=[i(W)];for(te.h=(te.h-(ne*ae>>1)+720)%360;--ae;)te.h=(te.h+ne)%360,le.push(i(te));return le}function D(W,ae){ae=ae||6;for(var G=i(W).toHsv(),te=G.h,ne=G.s,le=G.v,ue=[],pe=1/ae;ae--;)ue.push(i({h:te,s:ne,v:le})),le=(le+pe)%1;return ue}i.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var W=this.toRgb();return(299*W.r+587*W.g+114*W.b)/1e3},getLuminance:function(){var W,ae,G,te=this.toRgb();return ae=te.g/255,G=te.b/255,.2126*((W=te.r/255)<=.03928?W/12.92:y.pow((W+.055)/1.055,2.4))+.7152*(ae<=.03928?ae/12.92:y.pow((ae+.055)/1.055,2.4))+.0722*(G<=.03928?G/12.92:y.pow((G+.055)/1.055,2.4))},setAlpha:function(W){return this._a=I(W),this._roundA=e(100*this._a)/100,this},toHsv:function(){var W=h(this._r,this._g,this._b);return{h:360*W.h,s:W.s,v:W.v,a:this._a}},toHsvString:function(){var W=h(this._r,this._g,this._b),ae=e(360*W.h),G=e(100*W.s),te=e(100*W.v);return 1==this._a?"hsv("+ae+", "+G+"%, "+te+"%)":"hsva("+ae+", "+G+"%, "+te+"%, "+this._roundA+")"},toHsl:function(){var W=v(this._r,this._g,this._b);return{h:360*W.h,s:W.s,l:W.l,a:this._a}},toHslString:function(){var W=v(this._r,this._g,this._b),ae=e(360*W.h),G=e(100*W.s),te=e(100*W.l);return 1==this._a?"hsl("+ae+", "+G+"%, "+te+"%)":"hsla("+ae+", "+G+"%, "+te+"%, "+this._roundA+")"},toHex:function(W){return s(this._r,this._g,this._b,W)},toHexString:function(W){return"#"+this.toHex(W)},toHex8:function(W){return G=this._g,te=this._b,ne=this._a,le=W,ue=[Z(e(this._r).toString(16)),Z(e(G).toString(16)),Z(e(te).toString(16)),Z(ee(ne))],le&&ue[0].charAt(0)==ue[0].charAt(1)&&ue[1].charAt(0)==ue[1].charAt(1)&&ue[2].charAt(0)==ue[2].charAt(1)&&ue[3].charAt(0)==ue[3].charAt(1)?ue[0].charAt(0)+ue[1].charAt(0)+ue[2].charAt(0)+ue[3].charAt(0):ue.join("");var G,te,ne,le,ue},toHex8String:function(W){return"#"+this.toHex8(W)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(100*P(this._r,255))+"%",g:e(100*P(this._g,255))+"%",b:e(100*P(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+e(100*P(this._r,255))+"%, "+e(100*P(this._g,255))+"%, "+e(100*P(this._b,255))+"%)":"rgba("+e(100*P(this._r,255))+"%, "+e(100*P(this._g,255))+"%, "+e(100*P(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(F[s(this._r,this._g,this._b,!0)]||!1)},toFilter:function(W){var ae="#"+d(this._r,this._g,this._b,this._a),G=ae,te=this._gradientType?"GradientType = 1, ":"";if(W){var ne=i(W);G="#"+d(ne._r,ne._g,ne._b,ne._a)}return"progid:DXImageTransform.Microsoft.gradient("+te+"startColorstr="+ae+",endColorstr="+G+")"},toString:function(W){var ae=!!W;W=W||this._format;var G=!1;return ae||!(this._a<1&&this._a>=0)||"hex"!==W&&"hex6"!==W&&"hex3"!==W&&"hex4"!==W&&"hex8"!==W&&"name"!==W?("rgb"===W&&(G=this.toRgbString()),"prgb"===W&&(G=this.toPercentageRgbString()),"hex"!==W&&"hex6"!==W||(G=this.toHexString()),"hex3"===W&&(G=this.toHexString(!0)),"hex4"===W&&(G=this.toHex8String(!0)),"hex8"===W&&(G=this.toHex8String()),"name"===W&&(G=this.toName()),"hsl"===W&&(G=this.toHslString()),"hsv"===W&&(G=this.toHsvString()),G||this.toHexString()):"name"===W&&0===this._a?this.toName():this.toRgbString()},clone:function(){return i(this.toString())},_applyModification:function(W,ae){var G=W.apply(null,[this].concat([].slice.call(ae)));return this._r=G._r,this._g=G._g,this._b=G._b,this.setAlpha(G._a),this},lighten:function(){return this._applyModification(m,arguments)},brighten:function(){return this._applyModification(u,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(g,arguments)},spin:function(){return this._applyModification(c,arguments)},_applyCombination:function(W,ae){return W.apply(null,[this].concat([].slice.call(ae)))},analogous:function(){return this._applyCombination(L,arguments)},complement:function(){return this._applyCombination(A,arguments)},monochromatic:function(){return this._applyCombination(D,arguments)},splitcomplement:function(){return this._applyCombination(E,arguments)},triad:function(){return this._applyCombination(k,arguments)},tetrad:function(){return this._applyCombination(C,arguments)}},i.fromRatio=function(W,ae){if("object"==typeof W){var G={};for(var te in W)W.hasOwnProperty(te)&&(G[te]="a"===te?W[te]:Y(W[te]));W=G}return i(W,ae)},i.equals=function(W,ae){return!(!W||!ae)&&i(W).toRgbString()==i(ae).toRgbString()},i.random=function(){return i.fromRatio({r:l(),g:l(),b:l()})},i.mix=function(W,ae,G){G=0===G?0:G||50;var te=i(W).toRgb(),ne=i(ae).toRgb(),le=G/100;return i({r:(ne.r-te.r)*le+te.r,g:(ne.g-te.g)*le+te.g,b:(ne.b-te.b)*le+te.b,a:(ne.a-te.a)*le+te.a})},i.readability=function(W,ae){var G=i(W),te=i(ae);return(y.max(G.getLuminance(),te.getLuminance())+.05)/(y.min(G.getLuminance(),te.getLuminance())+.05)},i.isReadable=function(W,ae,G){var te,ne,ue,pe,de,le=i.readability(W,ae);switch(ne=!1,(ue=G,"AA"!==(pe=((ue=ue||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==pe&&(pe="AA"),"small"!==(de=(ue.size||"small").toLowerCase())&&"large"!==de&&(de="small"),te={level:pe,size:de}).level+te.size){case"AAsmall":case"AAAlarge":ne=le>=4.5;break;case"AAlarge":ne=le>=3;break;case"AAAsmall":ne=le>=7}return ne},i.mostReadable=function(W,ae,G){var te,ne,le,ue,pe=null,de=0;ne=(G=G||{}).includeFallbackColors,le=G.level,ue=G.size;for(var _e=0;_e<ae.length;_e++)(te=i.readability(W,ae[_e]))>de&&(de=te,pe=i(ae[_e]));return i.isReadable(W,pe,{level:le,size:ue})||!ne?pe:(G.includeFallbackColors=!1,i.mostReadable(W,["#fff","#000"],G))};var N=i.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},F=i.hexNames=function(W){var ae={};for(var G in W)W.hasOwnProperty(G)&&(ae[W[G]]=G);return ae}(N);function I(W){return W=parseFloat(W),(isNaN(W)||W<0||W>1)&&(W=1),W}function P(W,ae){var te;"string"==typeof(te=W)&&-1!=te.indexOf(".")&&1===parseFloat(te)&&(W="100%");var G=function(te){return"string"==typeof te&&-1!=te.indexOf("%")}(W);return W=o(ae,a(0,parseFloat(W))),G&&(W=parseInt(W*ae,10)/100),y.abs(W-ae)<1e-6?1:W%ae/parseFloat(ae)}function j(W){return o(1,a(0,W))}function V(W){return parseInt(W,16)}function Z(W){return 1==W.length?"0"+W:""+W}function Y(W){return W<=1&&(W=100*W+"%"),W}function ee(W){return y.round(255*parseFloat(W)).toString(16)}function re(W){return V(W)/255}var X,K,ie,q=(K="[\\s|\\(]+("+(X="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+X+")[,|\\s]+("+X+")\\s*\\)?",ie="[\\s|\\(]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")[,|\\s]+("+X+")\\s*\\)?",{CSS_UNIT:new RegExp(X),rgb:new RegExp("rgb"+K),rgba:new RegExp("rgba"+ie),hsl:new RegExp("hsl"+K),hsla:new RegExp("hsla"+ie),hsv:new RegExp("hsv"+K),hsva:new RegExp("hsva"+ie),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function U(W){return!!q.CSS_UNIT.exec(W)}void 0!==oe&&oe.exports?oe.exports=i:window.tinycolor=i}(Math)},{}],313:[function(b,oe,se){"use strict";oe.exports=x,oe.exports.float32=oe.exports.float=x,oe.exports.fract32=oe.exports.fract=function(M,_){if(M.length){if(M instanceof Float32Array)return new Float32Array(M.length);_ instanceof Float32Array||(_=x(M));for(var e=0,o=_.length;e<o;e++)_[e]=M[e]-_[e];return _}return x(M-x(M))};var y=new Float32Array(1);function x(M){return M.length?M instanceof Float32Array?M:new Float32Array(M):(y[0]=M,y[0])}},{}],314:[function(b,oe,se){"use strict";var y=b("parse-unit");function x(_,e){var o=y(getComputedStyle(_).getPropertyValue(e));return o[0]*M(o[1],_)}function M(_,e){switch(e=e||document.body,_=(_||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),_){case"%":return e.clientHeight/100;case"ch":case"ex":return function(o,a){var l=document.createElement("div");l.style["font-size"]="128"+o,a.appendChild(l);var i=x(l,"font-size")/128;return a.removeChild(l),i}(_,e);case"em":return x(e,"font-size");case"rem":return x(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}oe.exports=M},{"parse-unit":251}],315:[function(b,oe,se){var y;y=this,function(y){"use strict";function x(d){return d}function M(d){if(null==d)return x;var p,f,g=d.scale[0],m=d.scale[1],u=d.translate[0],w=d.translate[1];return function(c,A){A||(p=f=0);var k=2,C=c.length,E=new Array(C);for(E[0]=(p+=c[0])*g+u,E[1]=(f+=c[1])*m+w;k<C;)E[k]=c[k],++k;return E}}function _(d){var p,f=M(d.transform),g=1/0,m=g,u=-g,w=-g;function c(k){(k=f(k))[0]<g&&(g=k[0]),k[0]>u&&(u=k[0]),k[1]<m&&(m=k[1]),k[1]>w&&(w=k[1])}function A(k){switch(k.type){case"GeometryCollection":k.geometries.forEach(A);break;case"Point":c(k.coordinates);break;case"MultiPoint":k.coordinates.forEach(c)}}for(p in d.arcs.forEach(function(k){for(var C,E=-1,L=k.length;++E<L;)(C=f(k[E],E))[0]<g&&(g=C[0]),C[0]>u&&(u=C[0]),C[1]<m&&(m=C[1]),C[1]>w&&(w=C[1])}),d.objects)A(d.objects[p]);return[g,m,u,w]}function e(d,p){var f=p.id,g=p.bbox,m=null==p.properties?{}:p.properties,u=o(d,p);return null==f&&null==g?{type:"Feature",properties:m,geometry:u}:null==g?{type:"Feature",id:f,properties:m,geometry:u}:{type:"Feature",id:f,bbox:g,properties:m,geometry:u}}function o(d,p){var f=M(d.transform),g=d.arcs;function m(k,C){C.length&&C.pop();for(var E=g[k<0?~k:k],L=0,D=E.length;L<D;++L)C.push(f(E[L],L));k<0&&function(N,F){for(var I,P=N.length,j=P-F;j<--P;)I=N[j],N[j++]=N[P],N[P]=I}(C,D)}function u(k){return f(k)}function w(k){for(var C=[],E=0,L=k.length;E<L;++E)m(k[E],C);return C.length<2&&C.push(C[0]),C}function c(k){for(var C=w(k);C.length<4;)C.push(C[0]);return C}function A(k){return k.map(c)}return function k(C){var E,L=C.type;switch(L){case"GeometryCollection":return{type:L,geometries:C.geometries.map(k)};case"Point":E=u(C.coordinates);break;case"MultiPoint":E=C.coordinates.map(u);break;case"LineString":E=w(C.arcs);break;case"MultiLineString":E=C.arcs.map(w);break;case"Polygon":E=A(C.arcs);break;case"MultiPolygon":E=C.arcs.map(A);break;default:return null}return{type:L,coordinates:E}}(p)}function a(d,p){var f={},g={},m={},u=[],w=-1;function c(A,k){for(var C in A){var E=A[C];delete k[E.start],delete E.start,delete E.end,E.forEach(function(L){f[L<0?~L:L]=1}),u.push(E)}}return p.forEach(function(A,k){var C,E=d.arcs[A<0?~A:A];E.length<3&&!E[1][0]&&!E[1][1]&&(C=p[++w],p[w]=A,p[k]=C)}),p.forEach(function(A){var k,C,I,P,j,V,E=(V=(j=d.arcs[(I=A)<0?~I:I])[0],d.transform?(P=[0,0],j.forEach(function(Z){P[0]+=Z[0],P[1]+=Z[1]})):P=j[j.length-1],I<0?[P,V]:[V,P]),L=E[0],D=E[1];if(k=m[L])if(delete m[k.end],k.push(A),k.end=D,C=g[D]){delete g[C.start];var N=C===k?k:k.concat(C);g[N.start=k.start]=m[N.end=C.end]=N}else g[k.start]=m[k.end]=k;else if(k=g[D])if(delete g[k.start],k.unshift(A),k.start=L,C=m[L]){delete m[C.end];var F=C===k?k:C.concat(k);g[F.start=C.start]=m[F.end=k.end]=F}else g[k.start]=m[k.end]=k;else g[(k=[A]).start=L]=m[k.end=D]=k}),c(m,g),c(g,m),p.forEach(function(A){f[A<0?~A:A]||u.push([A])}),u}function l(d,p,f){var g,m,u;if(arguments.length>1)g=i(0,p,f);else for(m=0,g=new Array(u=d.arcs.length);m<u;++m)g[m]=m;return{type:"MultiLineString",arcs:a(d,g)}}function i(d,p,f){var g,m=[],u=[];function w(k){var C=k<0?~k:k;(u[C]||(u[C]=[])).push({i:k,g})}function c(k){k.forEach(w)}function A(k){k.forEach(c)}return function k(C){switch(g=C,C.type){case"GeometryCollection":C.geometries.forEach(k);break;case"LineString":c(C.arcs);break;case"MultiLineString":case"Polygon":A(C.arcs);break;case"MultiPolygon":C.arcs.forEach(A)}}(p),u.forEach(null==f?function(k){m.push(k[0].i)}:function(k){f(k[0].g,k[k.length-1].g)&&m.push(k[0].i)}),m}function v(d,p){var f={},g=[],m=[];function u(c){c.forEach(function(A){A.forEach(function(k){(f[k=k<0?~k:k]||(f[k]=[])).push(c)})}),g.push(c)}function w(c){return function(A){for(var k,C=-1,E=A.length,L=A[E-1],D=0;++C<E;)D+=(k=L)[0]*(L=A[C])[1]-k[1]*L[0];return Math.abs(D)}(o(d,{type:"Polygon",arcs:[c]}).coordinates[0])}return p.forEach(function c(A){switch(A.type){case"GeometryCollection":A.geometries.forEach(c);break;case"Polygon":u(A.arcs);break;case"MultiPolygon":A.arcs.forEach(u)}}),g.forEach(function(c){if(!c._){var A=[],k=[c];for(c._=1,m.push(A);c=k.pop();)A.push(c),c.forEach(function(C){C.forEach(function(E){f[E<0?~E:E].forEach(function(L){L._||(L._=1,k.push(L))})})})}}),g.forEach(function(c){delete c._}),{type:"MultiPolygon",arcs:m.map(function(c){var A,k=[];if(c.forEach(function(N){N.forEach(function(F){F.forEach(function(I){f[I<0?~I:I].length<2&&k.push(I)})})}),(A=(k=a(d,k)).length)>1)for(var C,E,L=1,D=w(k[0]);L<A;++L)(C=w(k[L]))>D&&(E=k[0],k[0]=k[L],k[L]=E,D=C);return k}).filter(function(c){return c.length>0})}}function h(d,p){for(var f=0,g=d.length;f<g;){var m=f+g>>>1;d[m]<p?f=m+1:g=m}return f}function s(d){if(null==d)return x;var p,f,g=d.scale[0],m=d.scale[1],u=d.translate[0],w=d.translate[1];return function(c,A){A||(p=f=0);var k=2,C=c.length,E=new Array(C),L=Math.round((c[0]-u)/g),D=Math.round((c[1]-w)/m);for(E[0]=L-p,p=L,E[1]=D-f,f=D;k<C;)E[k]=c[k],++k;return E}}y.bbox=_,y.feature=function(d,p){return"string"==typeof p&&(p=d.objects[p]),"GeometryCollection"===p.type?{type:"FeatureCollection",features:p.geometries.map(function(f){return e(d,f)})}:e(d,p)},y.merge=function(d){return o(d,v.apply(this,arguments))},y.mergeArcs=v,y.mesh=function(d){return o(d,l.apply(this,arguments))},y.meshArcs=l,y.neighbors=function(d){var p={},f=d.map(function(){return[]});function g(N,F){N.forEach(function(I){I<0&&(I=~I);var P=p[I];P?P.push(F):p[I]=[F]})}function m(N,F){N.forEach(function(I){g(I,F)})}var u={LineString:g,MultiLineString:m,Polygon:m,MultiPolygon:function(N,F){N.forEach(function(I){m(I,F)})}};for(var w in d.forEach(function N(F,I){"GeometryCollection"===F.type?F.geometries.forEach(function(P){N(P,I)}):F.type in u&&u[F.type](F.arcs,I)}),p)for(var c=p[w],A=c.length,k=0;k<A;++k)for(var C=k+1;C<A;++C){var E,L=c[k],D=c[C];(E=f[L])[w=h(E,D)]!==D&&E.splice(w,0,D),(E=f[D])[w=h(E,L)]!==L&&E.splice(w,0,L)}return f},y.quantize=function(d,p){if(d.transform)throw new Error("already quantized");if(p&&p.scale)c=d.bbox;else{if(!((f=Math.floor(p))>=2))throw new Error("n must be \u22652");var f,g=(c=d.bbox||_(d))[0],m=c[1],u=c[2],w=c[3];p={scale:[u-g?(u-g)/(f-1):1,w-m?(w-m)/(f-1):1],translate:[g,m]}}var c,A,k=s(p),C=d.objects,E={};function L(N){return k(N)}function D(N){var F;switch(N.type){case"GeometryCollection":F={type:"GeometryCollection",geometries:N.geometries.map(D)};break;case"Point":F={type:"Point",coordinates:L(N.coordinates)};break;case"MultiPoint":F={type:"MultiPoint",coordinates:N.coordinates.map(L)};break;default:return N}return null!=N.id&&(F.id=N.id),null!=N.bbox&&(F.bbox=N.bbox),null!=N.properties&&(F.properties=N.properties),F}for(A in C)E[A]=D(C[A]);return{type:"Topology",bbox:c,transform:p,objects:E,arcs:d.arcs.map(function(N){var F,I=0,P=1,j=N.length,V=new Array(j);for(V[0]=k(N[0],0);++I<j;)((F=k(N[I],I))[0]||F[1])&&(V[P++]=F);return 1===P&&(V[P++]=[0,0]),V.length=P,V})}},y.transform=M,y.untransform=s,Object.defineProperty(y,"__esModule",{value:!0})}("object"==typeof se&&void 0!==oe?se:(y=y||self).topojson=y.topojson||{})},{}],316:[function(b,oe,se){"use strict";var y=b("../prototype/is");oe.exports=function(x){if("function"!=typeof x||!hasOwnProperty.call(x,"length"))return!1;try{if("number"!=typeof x.length||"function"!=typeof x.call||"function"!=typeof x.apply)return!1}catch(M){return!1}return!y(x)}},{"../prototype/is":323}],317:[function(b,oe,se){"use strict";var y=b("../value/is"),x=b("../object/is"),M=b("../string/coerce"),_=b("./to-short-string"),e=function(o,a){return o.replace("%v",_(a))};oe.exports=function(o,a,l){if(!x(l))throw new TypeError(e(a,o));if(!y(o)){if("default"in l)return l.default;if(l.isOptional)return null}var i=M(l.errorMessage);throw y(i)||(i=a),new TypeError(e(i,o))}},{"../object/is":320,"../string/coerce":324,"../value/is":326,"./to-short-string":319}],318:[function(b,oe,se){"use strict";oe.exports=function(y){try{return y.toString()}catch(x){try{return String(y)}catch(M){return null}}}},{}],319:[function(b,oe,se){"use strict";var y=b("./safe-to-string"),x=/[\n\r\u2028\u2029]/g;oe.exports=function(M){var _=y(M);return null===_?"<Non-coercible to string value>":(_.length>100&&(_=_.slice(0,99)+"\u2026"),_=_.replace(x,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},{"./safe-to-string":318}],320:[function(b,oe,se){"use strict";var y=b("../value/is"),x={object:!0,function:!0,undefined:!0};oe.exports=function(M){return!!y(M)&&hasOwnProperty.call(x,typeof M)}},{"../value/is":326}],321:[function(b,oe,se){"use strict";var y=b("../lib/resolve-exception"),x=b("./is");oe.exports=function(M){return x(M)?M:y(M,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":317,"./is":322}],322:[function(b,oe,se){"use strict";var y=b("../function/is"),x=/^\s*class[\s{/}]/,M=Function.prototype.toString;oe.exports=function(_){return!!y(_)&&!x.test(M.call(_))}},{"../function/is":316}],323:[function(b,oe,se){"use strict";var y=b("../object/is");oe.exports=function(x){if(!y(x))return!1;try{return!!x.constructor&&x.constructor.prototype===x}catch(M){return!1}}},{"../object/is":320}],324:[function(b,oe,se){"use strict";var y=b("../value/is"),x=b("../object/is"),M=Object.prototype.toString;oe.exports=function(_){if(!y(_))return null;if(x(_)){var e=_.toString;if("function"!=typeof e||e===M)return null}try{return""+_}catch(o){return null}}},{"../object/is":320,"../value/is":326}],325:[function(b,oe,se){"use strict";var y=b("../lib/resolve-exception"),x=b("./is");oe.exports=function(M){return x(M)?M:y(M,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":317,"./is":326}],326:[function(b,oe,se){"use strict";oe.exports=function(y){return null!=y}},{}],327:[function(b,oe,se){(function(y){(function(){"use strict";var x=b("bit-twiddle"),M=b("dup"),_=b("buffer").Buffer;y.__TYPEDARRAY_POOL||(y.__TYPEDARRAY_POOL={UINT8:M([32,0]),UINT16:M([32,0]),UINT32:M([32,0]),BIGUINT64:M([32,0]),INT8:M([32,0]),INT16:M([32,0]),INT32:M([32,0]),BIGINT64:M([32,0]),FLOAT:M([32,0]),DOUBLE:M([32,0]),DATA:M([32,0]),UINT8C:M([32,0]),BUFFER:M([32,0])});var e="undefined"!=typeof Uint8ClampedArray,o="undefined"!=typeof BigUint64Array,a="undefined"!=typeof BigInt64Array,l=y.__TYPEDARRAY_POOL;l.UINT8C||(l.UINT8C=M([32,0])),l.BIGUINT64||(l.BIGUINT64=M([32,0])),l.BIGINT64||(l.BIGINT64=M([32,0])),l.BUFFER||(l.BUFFER=M([32,0]));var i=l.DATA,v=l.BUFFER;function h(D){if(D){var F=x.log2(D.length||D.byteLength);i[F].push(D)}}function s(D){D=x.nextPow2(D);var N=x.log2(D),F=i[N];return F.length>0?F.pop():new ArrayBuffer(D)}function d(D){return new Uint8Array(s(D),0,D)}function p(D){return new Uint16Array(s(2*D),0,D)}function f(D){return new Uint32Array(s(4*D),0,D)}function g(D){return new Int8Array(s(D),0,D)}function m(D){return new Int16Array(s(2*D),0,D)}function u(D){return new Int32Array(s(4*D),0,D)}function w(D){return new Float32Array(s(4*D),0,D)}function c(D){return new Float64Array(s(8*D),0,D)}function A(D){return e?new Uint8ClampedArray(s(D),0,D):d(D)}function k(D){return o?new BigUint64Array(s(8*D),0,D):null}function C(D){return a?new BigInt64Array(s(8*D),0,D):null}function E(D){return new DataView(s(D),0,D)}function L(D){D=x.nextPow2(D);var N=x.log2(D),F=v[N];return F.length>0?F.pop():new _(D)}se.free=function(D){if(_.isBuffer(D))v[x.log2(D.length)].push(D);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(D)&&(D=D.buffer),!D)return;var F=0|x.log2(D.length||D.byteLength);i[F].push(D)}},se.freeUint8=se.freeUint16=se.freeUint32=se.freeBigUint64=se.freeInt8=se.freeInt16=se.freeInt32=se.freeBigInt64=se.freeFloat32=se.freeFloat=se.freeFloat64=se.freeDouble=se.freeUint8Clamped=se.freeDataView=function(D){h(D.buffer)},se.freeArrayBuffer=h,se.freeBuffer=function(D){v[x.log2(D.length)].push(D)},se.malloc=function(D,N){if(void 0===N||"arraybuffer"===N)return s(D);switch(N){case"uint8":return d(D);case"uint16":return p(D);case"uint32":return f(D);case"int8":return g(D);case"int16":return m(D);case"int32":return u(D);case"float":case"float32":return w(D);case"double":case"float64":return c(D);case"uint8_clamped":return A(D);case"bigint64":return C(D);case"biguint64":return k(D);case"buffer":return L(D);case"data":case"dataview":return E(D);default:return null}return null},se.mallocArrayBuffer=s,se.mallocUint8=d,se.mallocUint16=p,se.mallocUint32=f,se.mallocInt8=g,se.mallocInt16=m,se.mallocInt32=u,se.mallocFloat32=se.mallocFloat=w,se.mallocFloat64=se.mallocDouble=c,se.mallocUint8Clamped=A,se.mallocBigUint64=k,se.mallocBigInt64=C,se.mallocDataView=E,se.mallocBuffer=L,se.clearCache=function(){for(var D=0;D<32;++D)l.UINT8[D].length=0,l.UINT16[D].length=0,l.UINT32[D].length=0,l.INT8[D].length=0,l.INT16[D].length=0,l.INT32[D].length=0,l.FLOAT[D].length=0,l.DOUBLE[D].length=0,l.BIGUINT64[D].length=0,l.BIGINT64[D].length=0,l.UINT8C[D].length=0,i[D].length=0,v[D].length=0}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],328:[function(b,oe,se){var y=/[\'\"]/;oe.exports=function(x){return x?(y.test(x.charAt(0))&&(x=x.substr(1)),y.test(x.charAt(x.length-1))&&(x=x.substr(0,x.length-1)),x):""}},{}],329:[function(b,oe,se){"use strict";oe.exports=function(y,x,M){Array.isArray(M)||(M=[].slice.call(arguments,2));for(var _=0,e=M.length;_<e;_++){var o=M[_];for(var a in o)if((void 0===x[a]||Array.isArray(x[a])||y[a]!==x[a])&&a in x){var l;if(!0===o[a])l=x[a];else if(!1===o[a]||"function"==typeof o[a]&&void 0===(l=o[a](x[a],y,x)))continue;y[a]=l}}return y}},{}],330:[function(b,oe,se){(function(y){(function(){function x(M){try{if(!y.localStorage)return!1}catch(e){return!1}var _=y.localStorage[M];return null!=_&&"true"===String(_).toLowerCase()}oe.exports=function(M,_){if(x("noDeprecation"))return M;var e=!1;return function(){if(!e){if(x("throwDeprecation"))throw new Error(_);x("traceDeprecation")?console.trace(_):console.warn(_),e=!0}return M.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],331:[function(b,oe,se){var y=b("get-canvas-context");oe.exports=function(x){return y("webgl",x)}},{"get-canvas-context":194}],332:[function(b,oe,se){var y=b("../main"),x=b("object-assign"),M=y.instance();function _(h){this.local=this.regionalOptions[h||""]||this.regionalOptions[""]}x(_.prototype=new y.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(h,s){if("string"==typeof h){var d=h.match(o);return d?d[0]:""}var p=this._validateYear(h),f=h.month(),g=""+this.toChineseMonth(p,f);return s&&g.length<2&&(g="0"+g),this.isIntercalaryMonth(p,f)&&(g+="i"),g},monthNames:function(h){if("string"==typeof h){var s=h.match(a);return s?s[0]:""}var d=this._validateYear(h),p=h.month(),f=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(d,p)-1];return this.isIntercalaryMonth(d,p)&&(f="\u95f0"+f),f},monthNamesShort:function(h){if("string"==typeof h){var s=h.match(l);return s?s[0]:""}var d=this._validateYear(h),p=h.month(),f=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(d,p)-1];return this.isIntercalaryMonth(d,p)&&(f="\u95f0"+f),f},parseMonth:function(h,s){h=this._validateYear(h);var d,p=parseInt(s);if(isNaN(p))"\u95f0"===s[0]&&(d=!0,s=s.substring(1)),"\u6708"===s[s.length-1]&&(s=s.substring(0,s.length-1)),p=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(s);else{var f=s[s.length-1];d="i"===f||"I"===f}return this.toMonthIndex(h,p,d)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(h,s){if(h.year&&(h=h.year()),"number"!=typeof h||h<1888||h>2111)throw s.replace(/\{0\}/,this.local.name);return h},toMonthIndex:function(h,s,d){var p=this.intercalaryMonth(h);if(d&&s!==p||s<1||s>12)throw y.local.invalidMonth.replace(/\{0\}/,this.local.name);return p?!d&&s<=p?s-1:s:s-1},toChineseMonth:function(h,s){h.year&&(s=(h=h.year()).month());var d=this.intercalaryMonth(h);if(s<0||s>(d?12:11))throw y.local.invalidMonth.replace(/\{0\}/,this.local.name);return d?s<d?s+1:s:s+1},intercalaryMonth:function(h){return h=this._validateYear(h),i[h-i[0]]>>13},isIntercalaryMonth:function(h,s){h.year&&(s=(h=h.year()).month());var d=this.intercalaryMonth(h);return!!d&&d===s},leapYear:function(h){return 0!==this.intercalaryMonth(h)},weekOfYear:function(h,s,d){var p,f=this._validateYear(h,y.local.invalidyear),g=v[f-v[0]];(p=M.newDate(g>>9&4095,g>>5&15,31&g)).add(4-(p.dayOfWeek()||7),"d");var c=this.toJD(h,s,d)-p.toJD();return 1+Math.floor(c/7)},monthsInYear:function(h){return this.leapYear(h)?13:12},daysInMonth:function(h,s){h.year&&(s=h.month(),h=h.year()),h=this._validateYear(h);var d=i[h-i[0]];if(s>(d>>13?12:11))throw y.local.invalidMonth.replace(/\{0\}/,this.local.name);return d&1<<12-s?30:29},weekDay:function(h,s,d){return(this.dayOfWeek(h,s,d)||7)<6},toJD:function(h,s,d){var p=this._validate(h,g,d,y.local.invalidDate);h=this._validateYear(p.year()),s=p.month(),d=p.day();var f=this.isIntercalaryMonth(h,s),g=this.toChineseMonth(h,s),m=function(u,w,c,A,k){var C,E,L;if("object"==typeof u)E=u,C=w||{};else{var D;if(!("number"==typeof u&&u>=1888&&u<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof w&&w>=1&&w<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof c&&c>=1&&c<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof A?(D=!1,C=A):(D=!!A,C={}),E={year:u,month:w,day:c,isIntercalary:D}}L=E.day-1;var N,F=i[E.year-i[0]],I=F>>13;N=I&&(E.month>I||E.isIntercalary)?E.month:E.month-1;for(var P=0;P<N;P++)L+=F&1<<12-P?30:29;var j=v[E.year-v[0]],V=new Date(j>>9&4095,(j>>5&15)-1,(31&j)+L);return C.year=V.getFullYear(),C.month=1+V.getMonth(),C.day=V.getDate(),C}(h,g,d,f);return M.toJD(m.year,m.month,m.day)},fromJD:function(h){var s=M.fromJD(h),d=function(f,g,m,u){var w,c;if("object"==typeof f)w=f,c=g||{};else{if(!("number"==typeof f&&f>=1888&&f<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof g&&g>=1&&g<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof m&&m>=1&&m<=31))throw new Error("Solar day outside range 1 - 31");w={year:f,month:g,day:m},c={}}var A=v[w.year-v[0]];c.year=(w.year<<9|w.month<<5|w.day)>=A?w.year:w.year-1,A=v[c.year-v[0]];var C,E=new Date(A>>9&4095,(A>>5&15)-1,31&A),L=new Date(w.year,w.month-1,w.day);C=Math.round((L-E)/864e5);var D,N=i[c.year-i[0]];for(D=0;D<13;D++){var F=N&1<<12-D?30:29;if(C<F)break;C-=F}var I=N>>13;return!I||D<I?(c.isIntercalary=!1,c.month=1+D):D===I?(c.isIntercalary=!0,c.month=D):(c.isIntercalary=!1,c.month=D),c.day=1+C,c}(s.year(),s.month(),s.day()),p=this.toMonthIndex(d.year,d.month,d.isIntercalary);return this.newDate(d.year,p,d.day)},fromString:function(h){var s=h.match(e),d=this._validateYear(+s[1]),g=this.toMonthIndex(d,+s[2],!!s[3]);return this.newDate(d,g,+s[4])},add:function(h,s,d){var p=h.year(),f=h.month(),g=this.isIntercalaryMonth(p,f),m=this.toChineseMonth(p,f),u=Object.getPrototypeOf(_.prototype).add.call(this,h,s,d);if("y"===d){var w=u.year(),c=u.month(),A=this.isIntercalaryMonth(w,m),k=this.toMonthIndex(w,m,!(!g||!A));k!==c&&u.month(k)}return u}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,o=/^\d?\d[iI]?/m,a=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,l=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;y.calendars.chinese=_;var i=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],v=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":346,"object-assign":247}],333:[function(b,oe,se){var y=b("../main");function M(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}b("object-assign")(M.prototype=new y.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var e=this._validate(_,this.minMonth,this.minDay,y.local.invalidYear);return(_=e.year()+(e.year()<0?1:0))%4==3||_%4==-1},monthsInYear:function(_){return this._validate(_,this.minMonth,this.minDay,y.local.invalidYear||y.regionalOptions[""].invalidYear),13},weekOfYear:function(_,e,o){var a=this.newDate(_,e,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(_,e){var o=this._validate(_,e,this.minDay,y.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(13===o.month()&&this.leapYear(o.year())?1:0)},weekDay:function(_,e,o){return(this.dayOfWeek(_,e,o)||7)<6},toJD:function(_,e,o){var a=this._validate(_,e,o,y.local.invalidDate);return(_=a.year())<0&&_++,a.day()+30*(a.month()-1)+365*(_-1)+Math.floor(_/4)+this.jdEpoch-1},fromJD:function(_){var e=Math.floor(_)+.5-this.jdEpoch,o=Math.floor((e-Math.floor((e+366)/1461))/365)+1;o<=0&&o--,e=Math.floor(_)+.5-this.newDate(o,1,1).toJD();var a=Math.floor(e/30)+1;return this.newDate(o,a,e-30*(a-1)+1)}}),y.calendars.coptic=M},{"../main":346,"object-assign":247}],334:[function(b,oe,se){var y=b("../main");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}b("object-assign")(M.prototype=new y.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,y.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,y.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,y.local.invalidYear),400},weekOfYear:function(e,o,a){var l=this.newDate(e,o,a);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/8)+1},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,y.local.invalidMonth);return this.daysPerMonth[a.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,o,a){return(this._validate(e,o,a,y.local.invalidDate).day()+1)%8},weekDay:function(e,o,a){var l=this.dayOfWeek(e,o,a);return l>=2&&l<=6},extraInfo:function(e,o,a){var l=this._validate(e,o,a,y.local.invalidDate);return{century:_[Math.floor((l.year()-1)/100)+1]||""}},toJD:function(e,o,a){var l=this._validate(e,o,a,y.local.invalidDate);return e=l.year()+(l.year()<0?1:0),o=l.month(),(a=l.day())+(o>1?16:0)+(o>2?32*(o-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var o=Math.floor(e/400)+1;e-=400*(o-1),e+=e>15?16:0;var a=Math.floor(e/32)+1;return this.newDate(o<=0?o-1:o,a,e-32*(a-1)+1)}});var _={20:"Fruitbat",21:"Anchovy"};y.calendars.discworld=M},{"../main":346,"object-assign":247}],335:[function(b,oe,se){var y=b("../main");function M(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}b("object-assign")(M.prototype=new y.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var e=this._validate(_,this.minMonth,this.minDay,y.local.invalidYear);return(_=e.year()+(e.year()<0?1:0))%4==3||_%4==-1},monthsInYear:function(_){return this._validate(_,this.minMonth,this.minDay,y.local.invalidYear||y.regionalOptions[""].invalidYear),13},weekOfYear:function(_,e,o){var a=this.newDate(_,e,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(_,e){var o=this._validate(_,e,this.minDay,y.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(13===o.month()&&this.leapYear(o.year())?1:0)},weekDay:function(_,e,o){return(this.dayOfWeek(_,e,o)||7)<6},toJD:function(_,e,o){var a=this._validate(_,e,o,y.local.invalidDate);return(_=a.year())<0&&_++,a.day()+30*(a.month()-1)+365*(_-1)+Math.floor(_/4)+this.jdEpoch-1},fromJD:function(_){var e=Math.floor(_)+.5-this.jdEpoch,o=Math.floor((e-Math.floor((e+366)/1461))/365)+1;o<=0&&o--,e=Math.floor(_)+.5-this.newDate(o,1,1).toJD();var a=Math.floor(e/30)+1;return this.newDate(o,a,e-30*(a-1)+1)}}),y.calendars.ethiopian=M},{"../main":346,"object-assign":247}],336:[function(b,oe,se){var y=b("../main");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function _(e,o){return e-o*Math.floor(e/o)}b("object-assign")(M.prototype=new y.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear);return this._leapYear(o.year())},_leapYear:function(e){return _(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,y.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,o,a){var l=this.newDate(e,o,a);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,o){return e.year&&(o=e.month(),e=e.year()),this._validate(e,o,this.minDay,y.local.invalidMonth),12===o&&this.leapYear(e)||8===o&&5===_(this.daysInYear(e),10)?30:9===o&&3===_(this.daysInYear(e),10)?29:this.daysPerMonth[o-1]},weekDay:function(e,o,a){return 6!==this.dayOfWeek(e,o,a)},extraInfo:function(e,o,a){var l=this._validate(e,o,a,y.local.invalidDate);return{yearType:(this.leapYear(l)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(l)%10-3]}},toJD:function(e,o,a){var l=this._validate(e,o,a,y.local.invalidDate);e=l.year(),o=l.month(),a=l.day();var i=e<=0?e+1:e,v=this.jdEpoch+this._delay1(i)+this._delay2(i)+a+1;if(o<7){for(var h=7;h<=this.monthsInYear(e);h++)v+=this.daysInMonth(e,h);for(h=1;h<o;h++)v+=this.daysInMonth(e,h)}else for(h=7;h<o;h++)v+=this.daysInMonth(e,h);return v},_delay1:function(e){var o=Math.floor((235*e-234)/19),l=29*o+Math.floor((12084+13753*o)/25920);return _(3*(l+1),7)<3&&l++,l},_delay2:function(e){var o=this._delay1(e-1),a=this._delay1(e);return this._delay1(e+1)-a==356?2:a-o==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var o=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===o?1:o+1,7,1);)o++;for(var a=e<this.toJD(o,1,1)?7:1;e>this.toJD(o,a,this.daysInMonth(o,a));)a++;var l=e-this.toJD(o,a,1)+1;return this.newDate(o,a,l)}}),y.calendars.hebrew=M},{"../main":346,"object-assign":247}],337:[function(b,oe,se){var y=b("../main");function M(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}b("object-assign")(M.prototype=new y.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(_){return(11*this._validate(_,this.minMonth,this.minDay,y.local.invalidYear).year()+14)%30<11},weekOfYear:function(_,e,o){var a=this.newDate(_,e,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(_){return this.leapYear(_)?355:354},daysInMonth:function(_,e){var o=this._validate(_,e,this.minDay,y.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(12===o.month()&&this.leapYear(o.year())?1:0)},weekDay:function(_,e,o){return 5!==this.dayOfWeek(_,e,o)},toJD:function(_,e,o){var a=this._validate(_,e,o,y.local.invalidDate);return _=a.year(),e=a.month(),_=_<=0?_+1:_,(o=a.day())+Math.ceil(29.5*(e-1))+354*(_-1)+Math.floor((3+11*_)/30)+this.jdEpoch-1},fromJD:function(_){_=Math.floor(_)+.5;var e=Math.floor((30*(_-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var o=Math.min(12,Math.ceil((_-29-this.toJD(e,1,1))/29.5)+1),a=_-this.toJD(e,o,1)+1;return this.newDate(e,o,a)}}),y.calendars.islamic=M},{"../main":346,"object-assign":247}],338:[function(b,oe,se){var y=b("../main");function M(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}b("object-assign")(M.prototype=new y.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(_){var e=this._validate(_,this.minMonth,this.minDay,y.local.invalidYear);return(_=e.year()<0?e.year()+1:e.year())%4==0},weekOfYear:function(_,e,o){var a=this.newDate(_,e,o);return a.add(4-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(_,e){var o=this._validate(_,e,this.minDay,y.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(2===o.month()&&this.leapYear(o.year())?1:0)},weekDay:function(_,e,o){return(this.dayOfWeek(_,e,o)||7)<6},toJD:function(_,e,o){var a=this._validate(_,e,o,y.local.invalidDate);return _=a.year(),e=a.month(),o=a.day(),_<0&&_++,e<=2&&(_--,e+=12),Math.floor(365.25*(_+4716))+Math.floor(30.6001*(e+1))+o-1524.5},fromJD:function(_){var e=Math.floor(_+.5)+1524,o=Math.floor((e-122.1)/365.25),a=Math.floor(365.25*o),l=Math.floor((e-a)/30.6001),i=l-Math.floor(l<14?1:13),v=o-Math.floor(i>2?4716:4715),h=e-a-Math.floor(30.6001*l);return v<=0&&v--,this.newDate(v,i,h)}}),y.calendars.julian=M},{"../main":346,"object-assign":247}],339:[function(b,oe,se){var y=b("../main");function M(o){this.local=this.regionalOptions[o||""]||this.regionalOptions[""]}function _(o,a){return o-a*Math.floor(o/a)}function e(o,a){return _(o-1,a)+1}b("object-assign")(M.prototype=new y.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(o){return this._validate(o,this.minMonth,this.minDay,y.local.invalidYear),!1},formatYear:function(o){o=this._validate(o,this.minMonth,this.minDay,y.local.invalidYear).year();var a=Math.floor(o/400);return o%=400,o+=o<0?400:0,a+"."+Math.floor(o/20)+"."+o%20},forYear:function(o){if((o=o.split(".")).length<3)throw"Invalid Mayan year";for(var a=0,l=0;l<o.length;l++){var i=parseInt(o[l],10);if(Math.abs(i)>19||l>0&&i<0)throw"Invalid Mayan year";a=20*a+i}return a},monthsInYear:function(o){return this._validate(o,this.minMonth,this.minDay,y.local.invalidYear),18},weekOfYear:function(o,a,l){return this._validate(o,a,l,y.local.invalidDate),0},daysInYear:function(o){return this._validate(o,this.minMonth,this.minDay,y.local.invalidYear),360},daysInMonth:function(o,a){return this._validate(o,a,this.minDay,y.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(o,a,l){return this._validate(o,a,l,y.local.invalidDate).day()},weekDay:function(o,a,l){return this._validate(o,a,l,y.local.invalidDate),!0},extraInfo:function(o,a,l){var i=this._validate(o,a,l,y.local.invalidDate).toJD(),v=this._toHaab(i),h=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[v[0]-1],haabMonth:v[0],haabDay:v[1],tzolkinDayName:this.local.tzolkinMonths[h[0]-1],tzolkinDay:h[0],tzolkinTrecena:h[1]}},_toHaab:function(o){var a=_(8+(o-=this.jdEpoch)+340,365);return[Math.floor(a/20)+1,_(a,20)]},_toTzolkin:function(o){return[e(20+(o-=this.jdEpoch),20),e(o+4,13)]},toJD:function(o,a,l){var i=this._validate(o,a,l,y.local.invalidDate);return i.day()+20*i.month()+360*i.year()+this.jdEpoch},fromJD:function(o){o=Math.floor(o)+.5-this.jdEpoch;var a=Math.floor(o/360);o%=360,o+=o<0?360:0;var l=Math.floor(o/20);return this.newDate(a,l,o%20)}}),y.calendars.mayan=M},{"../main":346,"object-assign":247}],340:[function(b,oe,se){var y=b("../main"),x=b("object-assign");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}M.prototype=new y.baseCalendar;var _=y.instance("gregorian");x(M.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear||y.regionalOptions[""].invalidYear);return _.leapYear(o.year()+(o.year()<1?1:0)+1469)},weekOfYear:function(e,o,a){var l=this.newDate(e,o,a);return l.add(1-(l.dayOfWeek()||7),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,y.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(12===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(e,o,a){return(this.dayOfWeek(e,o,a)||7)<6},toJD:function(e,o,a){var l=this._validate(e,o,a,y.local.invalidMonth);(e=l.year())<0&&e++;for(var i=l.day(),v=1;v<l.month();v++)i+=this.daysPerMonth[v-1];return i+_.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var o=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(o+1,1,1);)o++;for(var a=e-Math.floor(this.toJD(o,1,1)+.5)+1,l=1;a>this.daysInMonth(o,l);)a-=this.daysInMonth(o,l),l++;return this.newDate(o,l,a)}}),y.calendars.nanakshahi=M},{"../main":346,"object-assign":247}],341:[function(b,oe,se){var y=b("../main");function M(_){this.local=this.regionalOptions[_||""]||this.regionalOptions[""]}b("object-assign")(M.prototype=new y.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(_){return this.daysInYear(_)!==this.daysPerYear},weekOfYear:function(_,e,o){var a=this.newDate(_,e,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(_){if(_=this._validate(_,this.minMonth,this.minDay,y.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[_])return this.daysPerYear;for(var e=0,o=this.minMonth;o<=12;o++)e+=this.NEPALI_CALENDAR_DATA[_][o];return e},daysInMonth:function(_,e){return _.year&&(e=_.month(),_=_.year()),this._validate(_,e,this.minDay,y.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[_]?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[_][e]},weekDay:function(_,e,o){return 6!==this.dayOfWeek(_,e,o)},toJD:function(_,e,o){var a=this._validate(_,e,o,y.local.invalidDate);_=a.year(),e=a.month(),o=a.day();var l=y.instance(),i=0,v=e,h=_;this._createMissingCalendarData(_);var s=_-(v>9||9===v&&o>=this.NEPALI_CALENDAR_DATA[h][0]?56:57);for(9!==e&&(i=o,v--);9!==v;)v<=0&&(v=12,h--),i+=this.NEPALI_CALENDAR_DATA[h][v],v--;return 9===e?(i+=o-this.NEPALI_CALENDAR_DATA[h][0])<0&&(i+=l.daysInYear(s)):i+=this.NEPALI_CALENDAR_DATA[h][9]-this.NEPALI_CALENDAR_DATA[h][0],l.newDate(s,1,1).add(i,"d").toJD()},fromJD:function(_){var e=y.instance().fromJD(_),o=e.year(),a=e.dayOfYear(),l=o+56;this._createMissingCalendarData(l);for(var i=9,h=this.NEPALI_CALENDAR_DATA[l][i]-this.NEPALI_CALENDAR_DATA[l][0]+1;a>h;)++i>12&&(i=1,l++),h+=this.NEPALI_CALENDAR_DATA[l][i];return this.newDate(l,i,this.NEPALI_CALENDAR_DATA[l][i]-(h-a))},_createMissingCalendarData:function(_){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var o=_-1;o<_+2;o++)void 0===this.NEPALI_CALENDAR_DATA[o]&&(this.NEPALI_CALENDAR_DATA[o]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),y.calendars.nepali=M},{"../main":346,"object-assign":247}],342:[function(b,oe,se){var y=b("../main");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function _(e,o){return e-o*Math.floor(e/o)}b("object-assign")(M.prototype=new y.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear);return 682*((o.year()-(o.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,o,a){var l=this.newDate(e,o,a);return l.add(-(l.dayOfWeek()+1)%7,"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,y.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(12===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(e,o,a){return 5!==this.dayOfWeek(e,o,a)},toJD:function(e,o,a){var l=this._validate(e,o,a,y.local.invalidDate);e=l.year(),o=l.month(),a=l.day();var i=e-(e>=0?474:473),v=474+_(i,2820);return a+(o<=7?31*(o-1):30*(o-1)+6)+Math.floor((682*v-110)/2816)+365*(v-1)+1029983*Math.floor(i/2820)+this.jdEpoch-1},fromJD:function(e){var o=(e=Math.floor(e)+.5)-this.toJD(475,1,1),a=Math.floor(o/1029983),l=_(o,1029983),i=2820;if(1029982!==l){var v=Math.floor(l/366),h=_(l,366);i=Math.floor((2134*v+2816*h+2815)/1028522)+v+1}var s=i+2820*a+474,d=e-this.toJD(s=s<=0?s-1:s,1,1)+1,p=d<=186?Math.ceil(d/31):Math.ceil((d-6)/30),f=e-this.toJD(s,p,1)+1;return this.newDate(s,p,f)}}),y.calendars.persian=M,y.calendars.jalali=M},{"../main":346,"object-assign":247}],343:[function(b,oe,se){var y=b("../main"),x=b("object-assign"),M=y.instance();function _(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}x(_.prototype=new y.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear);return e=this._t2gYear(o.year()),M.leapYear(e)},weekOfYear:function(e,o,a){var l=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear);return e=this._t2gYear(l.year()),M.weekOfYear(e,l.month(),l.day())},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,y.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(2===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(e,o,a){return(this.dayOfWeek(e,o,a)||7)<6},toJD:function(e,o,a){var l=this._validate(e,o,a,y.local.invalidDate);return e=this._t2gYear(l.year()),M.toJD(e,l.month(),l.day())},fromJD:function(e){var o=M.fromJD(e),a=this._g2tYear(o.year());return this.newDate(a,o.month(),o.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),y.calendars.taiwan=_},{"../main":346,"object-assign":247}],344:[function(b,oe,se){var y=b("../main"),x=b("object-assign"),M=y.instance();function _(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}x(_.prototype=new y.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear);return e=this._t2gYear(o.year()),M.leapYear(e)},weekOfYear:function(e,o,a){var l=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear);return e=this._t2gYear(l.year()),M.weekOfYear(e,l.month(),l.day())},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,y.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(2===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(e,o,a){return(this.dayOfWeek(e,o,a)||7)<6},toJD:function(e,o,a){var l=this._validate(e,o,a,y.local.invalidDate);return e=this._t2gYear(l.year()),M.toJD(e,l.month(),l.day())},fromJD:function(e){var o=M.fromJD(e),a=this._g2tYear(o.year());return this.newDate(a,o.month(),o.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),y.calendars.thai=_},{"../main":346,"object-assign":247}],345:[function(b,oe,se){var y=b("../main");function M(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}b("object-assign")(M.prototype=new y.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,y.local.invalidYear);return 355===this.daysInYear(o.year())},weekOfYear:function(e,o,a){var l=this.newDate(e,o,a);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var o=0,a=1;a<=12;a++)o+=this.daysInMonth(e,a);return o},daysInMonth:function(e,o){for(var a=this._validate(e,o,this.minDay,y.local.invalidMonth).toJD()-24e5+.5,l=0,i=0;i<_.length;i++){if(_[i]>a)return _[l]-_[l-1];l++}return 30},weekDay:function(e,o,a){return 5!==this.dayOfWeek(e,o,a)},toJD:function(e,o,a){var l=this._validate(e,o,a,y.local.invalidDate),i=12*(l.year()-1)+l.month()-15292;return l.day()+_[i-1]-1+24e5-.5},fromJD:function(e){for(var o=e-24e5+.5,a=0,l=0;l<_.length&&!(_[l]>o);l++)a++;var i=a+15292,v=Math.floor((i-1)/12);return this.newDate(v+1,i-12*v,o-_[a-1]+1)},isValid:function(e,o,a){var l=y.baseCalendar.prototype.isValid.apply(this,arguments);return l&&(l=(e=null!=e.year?e.year:e)>=1276&&e<=1500),l},_validate:function(e,o,a,l){var i=y.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||i.year>1500)throw l.replace(/\{0\}/,this.local.name);return i}}),y.calendars.ummalqura=M;var _=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":346,"object-assign":247}],346:[function(b,oe,se){var y=b("object-assign");function x(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function M(l,i,v,h){if(this._calendar=l,this._year=i,this._month=v,this._day=h,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(a.local.invalidDate||a.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function _(l,i){return"000000".substring(0,i-(l=""+l).length)+l}function e(){this.shortYearCutoff="+10"}function o(l){this.local=this.regionalOptions[l]||this.regionalOptions[""]}y(x.prototype,{instance:function(l,i){l=(l||"gregorian").toLowerCase();var v=this._localCals[l+"-"+(i=i||"")];if(!v&&this.calendars[l]&&(v=new this.calendars[l](i),this._localCals[l+"-"+i]=v),!v)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,l);return v},newDate:function(l,i,v,h,s){return(h=(null!=l&&l.year?l.calendar():"string"==typeof h?this.instance(h,s):h)||this.instance()).newDate(l,i,v)},substituteDigits:function(l){return function(i){return(i+"").replace(/[0-9]/g,function(v){return l[v]})}},substituteChineseDigits:function(l,i){return function(v){for(var h="",s=0;v>0;){var d=v%10;h=(0===d?"":l[d]+i[s])+h,s++,v=Math.floor(v/10)}return 0===h.indexOf(l[1]+i[1])&&(h=h.substr(1)),h||l[0]}}}),y(M.prototype,{newDate:function(l,i,v){return this._calendar.newDate(null==l?this:l,i,v)},year:function(l){return 0===arguments.length?this._year:this.set(l,"y")},month:function(l){return 0===arguments.length?this._month:this.set(l,"m")},day:function(l){return 0===arguments.length?this._day:this.set(l,"d")},date:function(l,i,v){if(!this._calendar.isValid(l,i,v))throw(a.local.invalidDate||a.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=l,this._month=i,this._day=v,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(l,i){return this._calendar.add(this,l,i)},set:function(l,i){return this._calendar.set(this,l,i)},compareTo:function(l){if(this._calendar.name!==l._calendar.name)throw(a.local.differentCalendars||a.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,l._calendar.local.name);var i=this._year!==l._year?this._year-l._year:this._month!==l._month?this.monthOfYear()-l.monthOfYear():this._day-l._day;return 0===i?0:i<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(l){return this._calendar.fromJD(l)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(l){return this._calendar.fromJSDate(l)},toString:function(){return(this.year()<0?"-":"")+_(Math.abs(this.year()),4)+"-"+_(this.month(),2)+"-"+_(this.day(),2)}}),y(e.prototype,{_validateLevel:0,newDate:function(l,i,v){return null==l?this.today():(l.year&&(this._validate(l,i,v,a.local.invalidDate||a.regionalOptions[""].invalidDate),v=l.day(),i=l.month(),l=l.year()),new M(this,l,i,v))},today:function(){return this.fromJSDate(new Date)},epoch:function(l){return this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(l){var i=this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return(i.year()<0?"-":"")+_(Math.abs(i.year()),4)},monthsInYear:function(l){return this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),12},monthOfYear:function(l,i){var v=this._validate(l,i,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth);return(v.month()+this.monthsInYear(v)-this.firstMonth)%this.monthsInYear(v)+this.minMonth},fromMonthOfYear:function(l,i){var v=(i+this.firstMonth-2*this.minMonth)%this.monthsInYear(l)+this.minMonth;return this._validate(l,v,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth),v},daysInYear:function(l){var i=this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return this.leapYear(i)?366:365},dayOfYear:function(l,i,v){var h=this._validate(l,i,v,a.local.invalidDate||a.regionalOptions[""].invalidDate);return h.toJD()-this.newDate(h.year(),this.fromMonthOfYear(h.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(l,i,v){var h=this._validate(l,i,v,a.local.invalidDate||a.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(h))+2)%this.daysInWeek()},extraInfo:function(l,i,v){return this._validate(l,i,v,a.local.invalidDate||a.regionalOptions[""].invalidDate),{}},add:function(l,i,v){return this._validate(l,this.minMonth,this.minDay,a.local.invalidDate||a.regionalOptions[""].invalidDate),this._correctAdd(l,this._add(l,i,v),i,v)},_add:function(l,i,v){if(this._validateLevel++,"d"===v||"w"===v){var h=l.toJD()+i*("w"===v?this.daysInWeek():1),s=l.calendar().fromJD(h);return this._validateLevel--,[s.year(),s.month(),s.day()]}try{var d=l.year()+("y"===v?i:0),p=l.monthOfYear()+("m"===v?i:0);s=l.day(),"y"===v?(l.month()!==this.fromMonthOfYear(d,p)&&(p=this.newDate(d,l.month(),this.minDay).monthOfYear()),p=Math.min(p,this.monthsInYear(d)),s=Math.min(s,this.daysInMonth(d,this.fromMonthOfYear(d,p)))):"m"===v&&(function(g){for(;p<g.minMonth;)d--,p+=g.monthsInYear(d);for(var m=g.monthsInYear(d);p>m-1+g.minMonth;)d++,p-=m,m=g.monthsInYear(d)}(this),s=Math.min(s,this.daysInMonth(d,this.fromMonthOfYear(d,p))));var f=[d,this.fromMonthOfYear(d,p),s];return this._validateLevel--,f}catch(g){throw this._validateLevel--,g}},_correctAdd:function(l,i,v,h){if(!(this.hasYearZero||"y"!==h&&"m"!==h||0!==i[0]&&l.year()>0==i[0]>0)){var s={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[h];i=this._add(l,v*s[0]+(v<0?-1:1)*s[1],s[2])}return l.date(i[0],i[1],i[2])},set:function(l,i,v){this._validate(l,this.minMonth,this.minDay,a.local.invalidDate||a.regionalOptions[""].invalidDate);var h="y"===v?i:l.year(),s="m"===v?i:l.month(),d="d"===v?i:l.day();return"y"!==v&&"m"!==v||(d=Math.min(d,this.daysInMonth(h,s))),l.date(h,s,d)},isValid:function(l,i,v){this._validateLevel++;var h=this.hasYearZero||0!==l;if(h){var s=this.newDate(l,i,this.minDay);h=i>=this.minMonth&&i-this.minMonth<this.monthsInYear(s)&&v>=this.minDay&&v-this.minDay<this.daysInMonth(s)}return this._validateLevel--,h},toJSDate:function(l,i,v){var h=this._validate(l,i,v,a.local.invalidDate||a.regionalOptions[""].invalidDate);return a.instance().fromJD(this.toJD(h)).toJSDate()},fromJSDate:function(l){return this.fromJD(a.instance().fromJSDate(l).toJD())},_validate:function(l,i,v,h){if(l.year){if(0===this._validateLevel&&this.name!==l.calendar().name)throw(a.local.differentCalendars||a.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,l.calendar().local.name);return l}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(l,i,v))throw h.replace(/\{0\}/,this.local.name);var s=this.newDate(l,i,v);return this._validateLevel--,s}catch(d){throw this._validateLevel--,d}}}),y(o.prototype=new e,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(l){var i=this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return(l=i.year()+(i.year()<0?1:0))%4==0&&(l%100!=0||l%400==0)},weekOfYear:function(l,i,v){var h=this.newDate(l,i,v);return h.add(4-(h.dayOfWeek()||7),"d"),Math.floor((h.dayOfYear()-1)/7)+1},daysInMonth:function(l,i){var v=this._validate(l,i,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth);return this.daysPerMonth[v.month()-1]+(2===v.month()&&this.leapYear(v.year())?1:0)},weekDay:function(l,i,v){return(this.dayOfWeek(l,i,v)||7)<6},toJD:function(l,i,v){var h=this._validate(l,i,v,a.local.invalidDate||a.regionalOptions[""].invalidDate);l=h.year(),i=h.month(),v=h.day(),l<0&&l++,i<3&&(i+=12,l--);var s=Math.floor(l/100),d=2-s+Math.floor(s/4);return Math.floor(365.25*(l+4716))+Math.floor(30.6001*(i+1))+v+d-1524.5},fromJD:function(l){var i=Math.floor(l+.5),v=Math.floor((i-1867216.25)/36524.25),h=1524+(v=i+1+v-Math.floor(v/4)),s=Math.floor((h-122.1)/365.25),d=Math.floor(365.25*s),p=Math.floor((h-d)/30.6001),f=h-d-Math.floor(30.6001*p),g=p-(p>13.5?13:1),m=s-(g>2.5?4716:4715);return m<=0&&m--,this.newDate(m,g,f)},toJSDate:function(l,i,v){var h=this._validate(l,i,v,a.local.invalidDate||a.regionalOptions[""].invalidDate),s=new Date(h.year(),h.month()-1,h.day());return s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),s.setHours(s.getHours()>12?s.getHours()+2:0),s},fromJSDate:function(l){return this.newDate(l.getFullYear(),l.getMonth()+1,l.getDate())}});var a=oe.exports=new x;a.cdate=M,a.baseCalendar=e,a.calendars.gregorian=o},{"object-assign":247}],347:[function(b,oe,se){var y=b("object-assign"),x=b("./main");y(x.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),x.local=x.regionalOptions[""],y(x.cdate.prototype,{formatDate:function(M,_){return"string"!=typeof M&&(_=M,M=""),this._calendar.formatDate(M||"",this,_)}}),y(x.baseCalendar.prototype,{UNIX_EPOCH:x.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:x.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(M,_,e){if("string"!=typeof M&&(e=_,_=M,M=""),!_)return"";if(_.calendar()!==this)throw x.local.invalidFormat||x.regionalOptions[""].invalidFormat;M=M||this.local.dateFormat;for(var a,l,i,v=(e=e||{}).dayNamesShort||this.local.dayNamesShort,h=e.dayNames||this.local.dayNames,s=e.monthNumbers||this.local.monthNumbers,d=e.monthNamesShort||this.local.monthNamesShort,p=e.monthNames||this.local.monthNames,f=function(L,D){for(var N=1;E+N<M.length&&M.charAt(E+N)===L;)N++;return E+=N-1,Math.floor(N/(D||1))>1},g=function(L,D,N,F){var I=""+D;if(f(L,F))for(;I.length<N;)I="0"+I;return I},m=this,w=function(L,D){return D?"function"==typeof p?p.call(m,L):p[L.month()-m.minMonth]:"function"==typeof d?d.call(m,L):d[L.month()-m.minMonth]},c=this.local.digits,A=function(L){return e.localNumbers&&c?c(L):L},k="",C=!1,E=0;E<M.length;E++)if(C)"'"!==M.charAt(E)||f("'")?k+=M.charAt(E):C=!1;else switch(M.charAt(E)){case"d":k+=A(g("d",_.day(),2));break;case"D":k+=("D",a=_.dayOfWeek(),l=v,i=h,f("D")?i[a]:l[a]);break;case"o":k+=g("o",_.dayOfYear(),3);break;case"w":k+=g("w",_.weekOfYear(),2);break;case"m":k+=(L=_,"function"==typeof s?s.call(m,L,f("m")):A(g("m",L.month(),2)));break;case"M":k+=w(_,f("M"));break;case"y":k+=f("y",2)?_.year():(_.year()%100<10?"0":"")+_.year()%100;break;case"Y":f("Y",2),k+=_.formatYear();break;case"J":k+=_.toJD();break;case"@":k+=(_.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":k+=(_.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":f("'")?k+="'":C=!0;break;default:k+=M.charAt(E)}var L;return k},parseDate:function(M,_,e){if(null==_)throw x.local.invalidArguments||x.regionalOptions[""].invalidArguments;if(""===(_="object"==typeof _?_.toString():_+""))return null;M=M||this.local.dateFormat;var o=(e=e||{}).shortYearCutoff||this.shortYearCutoff;o="string"!=typeof o?o:this.today().year()%100+parseInt(o,10);for(var a=e.dayNamesShort||this.local.dayNamesShort,l=e.dayNames||this.local.dayNames,i=e.parseMonth||this.local.parseMonth,v=e.monthNumbers||this.local.monthNumbers,h=e.monthNamesShort||this.local.monthNamesShort,s=e.monthNames||this.local.monthNames,d=-1,p=-1,f=-1,g=-1,m=-1,u=!1,w=!1,c=function(j,V){for(var Z=1;F+Z<M.length&&M.charAt(F+Z)===j;)Z++;return F+=Z-1,Math.floor(Z/(V||1))>1},A=function(j,V){var Z=c(j,V),Y=[2,3,Z?4:2,Z?4:2,10,11,20]["oyYJ@!".indexOf(j)+1],ee=new RegExp("^-?\\d{1,"+Y+"}"),re=_.substring(N).match(ee);if(!re)throw(x.local.missingNumberAt||x.regionalOptions[""].missingNumberAt).replace(/\{0\}/,N);return N+=re[0].length,parseInt(re[0],10)},k=this,C=function(){if("function"==typeof v){c("m");var j=v.call(k,_.substring(N));return N+=j.length,j}return A("m")},E=function(j,V,Z,Y){for(var ee=c(j,Y)?Z:V,re=0;re<ee.length;re++)if(_.substr(N,ee[re].length).toLowerCase()===ee[re].toLowerCase())return N+=ee[re].length,re+k.minMonth;throw(x.local.unknownNameAt||x.regionalOptions[""].unknownNameAt).replace(/\{0\}/,N)},L=function(){if("function"==typeof s){var j=c("M")?s.call(k,_.substring(N)):h.call(k,_.substring(N));return N+=j.length,j}return E("M",h,s)},D=function(){if(_.charAt(N)!==M.charAt(F))throw(x.local.unexpectedLiteralAt||x.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,N);N++},N=0,F=0;F<M.length;F++)if(w)"'"!==M.charAt(F)||c("'")?D():w=!1;else switch(M.charAt(F)){case"d":g=A("d");break;case"D":E("D",a,l);break;case"o":m=A("o");break;case"w":A("w");break;case"m":f=C();break;case"M":f=L();break;case"y":var I=F;u=!c("y",2),F=I,p=A("y",2);break;case"Y":p=A("Y",2);break;case"J":d=A("J")+.5,"."===_.charAt(N)&&(N++,A("J"));break;case"@":d=A("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":d=A("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":N=_.length;break;case"'":c("'")?D():w=!0;break;default:D()}if(N<_.length)throw x.local.unexpectedText||x.regionalOptions[""].unexpectedText;if(-1===p?p=this.today().year():p<100&&u&&(p+=-1===o?1900:this.today().year()-this.today().year()%100-(p<=o?0:100)),"string"==typeof f&&(f=i.call(this,p,f)),m>-1){g=m;for(var P=this.daysInMonth(p,f=1);g>P;P=this.daysInMonth(p,f))f++,g-=P}return d>-1?this.fromJD(d):this.newDate(p,f,g)},determineDate:function(M,_,e,o,a){e&&"object"!=typeof e&&(a=o,o=e,e=null),"string"!=typeof o&&(a=o,o="");var l=this;return _=_?_.newDate():null,null==M?_:"string"==typeof M?function(i){try{return l.parseDate(o,i,a)}catch(d){}for(var v=((i=i.toLowerCase()).match(/^c/)&&e?e.newDate():null)||l.today(),h=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,s=h.exec(i);s;)v.add(parseInt(s[1],10),s[2]||"d"),s=h.exec(i);return v}(M):"number"==typeof M?isNaN(M)||M===1/0||M===-1/0?_:l.today().add(M,"d"):l.newDate(M)}})},{"./main":346,"object-assign":247}],348:[function(b,oe,se){"use strict";oe.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],349:[function(b,oe,se){"use strict";var y=b("./arrow_paths"),x=b("../../plots/font_attributes"),M=b("../../plots/cartesian/constants"),_=b("../../plot_api/plot_template").templatedArray;b("../../constants/axis_placeable_objects"),oe.exports=_("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:x({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:y.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:y.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",M.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",M.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",M.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",M.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:x({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/font_attributes":585,"./arrow_paths":348}],350:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plots/cartesian/axes"),M=b("./draw").draw;function _(o){y.filterVisible(o._fullLayout.annotations).forEach(function(l){var i=x.getFromId(o,l.xref),v=x.getFromId(o,l.yref),h=x.getRefType(l.xref),s=x.getRefType(l.yref);l._extremes={},"range"===h&&e(l,i),"range"===s&&e(l,v)})}function e(o,a){var l,i=a._id,v=i.charAt(0),h=o[v],s=o["a"+v],f=o["_"+v+"padplus"],g=o["_"+v+"padminus"],m={x:1,y:-1}[v]*o[v+"shift"],u=3*o.arrowsize*o.arrowwidth||0,w=u+m,c=u-m,A=3*o.startarrowsize*o.arrowwidth||0,k=A+m,C=A-m;if(o["a"+v+"ref"]===o[v+"ref"]){var E=x.findExtremes(a,[a.r2c(h)],{ppadplus:w,ppadminus:c}),L=x.findExtremes(a,[a.r2c(s)],{ppadplus:Math.max(f,k),ppadminus:Math.max(g,C)});l={min:[E.min[0],L.min[0]],max:[E.max[0],L.max[0]]}}else k=s?k+s:k,C=s?C-s:C,l=x.findExtremes(a,[a.r2c(h)],{ppadplus:Math.max(f,w,k),ppadminus:Math.max(g,c,C)});o._extremes[i]=l}oe.exports=function(o){if(y.filterVisible(o._fullLayout.annotations).length&&o._fullData.length)return y.syncOrAsync([M,_],o)}},{"../../lib":503,"../../plots/cartesian/axes":554,"./draw":355}],351:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../registry"),M=b("../../plot_api/plot_template").arrayEditor;function _(o,a){var l,i,v,h,s,d,p,f=o._fullLayout.annotations,g=[],m=[],u=[],w=(a||[]).length;for(l=0;l<f.length;l++)if(h=(v=f[l]).clicktoshow){for(i=0;i<w;i++)if(d=(s=a[i]).xaxis,p=s.yaxis,d._id===v.xref&&p._id===v.yref&&d.d2r(s.x)===e(v._xclick,d)&&p.d2r(s.y)===e(v._yclick,p)){(v.visible?"onout"===h?m:u:g).push(l);break}i===w&&v.visible&&"onout"===h&&m.push(l)}return{on:g,off:m,explicitOff:u}}function e(o,a){return"log"===a.type?a.l2r(o):a.d2r(o)}oe.exports={hasClickToShow:function(o,a){var l=_(o,a);return l.on.length>0||l.explicitOff.length>0},onClick:function(o,a){var l,i,v=_(o,a),h=v.on,s=v.off.concat(v.explicitOff),d={},p=o._fullLayout.annotations;if(h.length||s.length){for(l=0;l<h.length;l++)(i=M(o.layout,"annotations",p[h[l]])).modifyItem("visible",!0),y.extendFlat(d,i.getUpdateObj());for(l=0;l<s.length;l++)(i=M(o.layout,"annotations",p[s[l]])).modifyItem("visible",!1),y.extendFlat(d,i.getUpdateObj());return x.call("update",o,{},d)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638}],352:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../color");oe.exports=function(M,_,e,o){o("opacity");var a=o("bgcolor"),l=o("bordercolor"),i=x.opacity(l);o("borderpad");var v=o("borderwidth"),h=o("showarrow");if(o("text",h?" ":e._dfltTitle.annotation),o("textangle"),y.coerceFont(o,"font",e.font),o("width"),o("align"),o("height")&&o("valign"),h){var s,d,p=o("arrowside");-1!==p.indexOf("end")&&(s=o("arrowhead"),d=o("arrowsize")),-1!==p.indexOf("start")&&(o("startarrowhead",s),o("startarrowsize",d)),o("arrowcolor",i?_.bordercolor:x.defaultLine),o("arrowwidth",2*(i&&v||1)),o("standoff"),o("startstandoff")}var f=o("hovertext"),g=e.hoverlabel||{};if(f){var m=o("hoverlabel.bgcolor",g.bgcolor||(x.opacity(a)?x.rgb(a):x.defaultLine)),u=o("hoverlabel.bordercolor",g.bordercolor||x.contrast(m));y.coerceFont(o,"hoverlabel.font",{family:g.font.family,size:g.font.size,color:g.font.color||u})}o("captureevents",!!f)}},{"../../lib":503,"../color":366}],353:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../lib/to_log_range");oe.exports=function(M,_,e,o){_=_||{};var a="log"===e&&"linear"===_.type;if(a||"linear"===e&&"log"===_.type)for(var i,v,h=M._fullLayout.annotations,s=_._id.charAt(0),d=0;d<h.length;d++)v="annotations["+d+"].",(i=h[d])[s+"ref"]===_._id&&p(s),i["a"+s+"ref"]===_._id&&p("a"+s);function p(f){var g=i[f],m=null;m=a?x(g,_.range):Math.pow(10,g),y(m)||(m=null),o(v+f,m)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],354:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plots/cartesian/axes"),M=b("../../plots/array_container_defaults"),_=b("./common_defaults"),e=b("./attributes");function o(a,l,i){function v(L,D){return y.coerce(a,l,e,L,D)}var h=v("visible"),s=v("clicktoshow");if(h||s){_(a,l,i,v);for(var d=l.showarrow,p=["x","y"],f=[-10,-30],g={_fullLayout:i},m=0;m<2;m++){var u=p[m],w=x.coerceRef(a,l,g,u,"","paper");if("paper"!==w&&x.getFromId(g,w)._annIndices.push(l._index),x.coercePosition(l,g,v,w,u,.5),d){var c="a"+u,A=x.coerceRef(a,l,g,c,"pixel",["pixel","paper"]);"pixel"!==A&&A!==w&&(A=l[c]="pixel"),x.coercePosition(l,g,v,A,c,"pixel"===A?f[m]:.4)}v(u+"anchor"),v(u+"shift")}if(y.noneOrAll(a,l,["x","y"]),d&&y.noneOrAll(a,l,["ax","ay"]),s){var C=v("xclick"),E=v("yclick");l._xclick=void 0===C?l.x:x.cleanPosition(C,g,l.xref),l._yclick=void 0===E?l.y:x.cleanPosition(E,g,l.yref)}}}oe.exports=function(a,l){M(a,l,{name:"annotations",handleItemDefaults:o})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":349,"./common_defaults":352}],355:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../registry"),M=b("../../plots/plots"),_=b("../../lib"),e=_.strTranslate,o=b("../../plots/cartesian/axes"),a=b("../color"),l=b("../drawing"),i=b("../fx"),v=b("../../lib/svg_text_utils"),h=b("../../lib/setcursor"),s=b("../dragelement"),d=b("../../plot_api/plot_template").arrayEditor,p=b("./draw_arrow_head");function f(u,w){var c=u._fullLayout.annotations[w]||{},A=o.getFromId(u,c.xref),k=o.getFromId(u,c.yref);A&&A.setScale(),k&&k.setScale(),m(u,c,w,!1,A,k)}function g(u,w,c,A,k){var C=k[c],E=k[c+"ref"],L=-1!==c.indexOf("y"),D="domain"===o.getRefType(E),N=L?A.h:A.w;return u?D?C+(L?-w:w)/u._length:u.p2r(u.r2p(C)+w):C+(L?-w:w)/N}function m(u,w,c,A,k,C){var E,L,D=u._fullLayout,N=u._fullLayout._size,F=u._context.edits;A?(E="annotation-"+A,L=A+".annotations"):(E="annotation",L="annotations");var I=d(u.layout,L,w),P=I.modifyBase,j=I.modifyItem,V=I.getUpdateObj;D._infolayer.selectAll("."+E+'[data-index="'+c+'"]').remove();var Z="clip"+D._uid+"_ann"+c;if(w._input&&!1!==w.visible){var Y={x:{},y:{}},ee=+w.textangle||0,re=D._infolayer.append("g").classed(E,!0).attr("data-index",String(c)).style("opacity",w.opacity),X=re.append("g").classed("annotation-text-g",!0),K=F[w.showarrow?"annotationTail":"annotationPosition"],ie=w.captureevents||F.annotationText||K,q=X.append("g").style("pointer-events",ie?"all":null).call(h,"pointer").on("click",function(){u._dragging=!1,u.emit("plotly_clickannotation",de(y.event))});w.hovertext&&q.on("mouseover",function(){var we=w.hoverlabel,De=we.font,Le=this.getBoundingClientRect(),Ie=u.getBoundingClientRect();i.loneHover({x0:Le.left-Ie.left,x1:Le.right-Ie.left,y:(Le.top+Le.bottom)/2-Ie.top,text:w.hovertext,color:we.bgcolor,borderColor:we.bordercolor,fontFamily:De.family,fontSize:De.size,fontColor:De.color},{container:D._hoverlayer.node(),outerContainer:D._paper.node(),gd:u})}).on("mouseout",function(){i.loneUnhover(D._hoverlayer.node())});var U=w.borderwidth,ae=U+w.borderpad,G=q.append("rect").attr("class","bg").style("stroke-width",U+"px").call(a.stroke,w.bordercolor).call(a.fill,w.bgcolor),te=w.width||w.height,ne=D._topclips.selectAll("#"+Z).data(te?[0]:[]);ne.enter().append("clipPath").classed("annclip",!0).attr("id",Z).append("rect"),ne.exit().remove();var le=w.font,ue=D._meta?_.templateString(w.text,D._meta):w.text,pe=q.append("text").classed("annotation-text",!0).text(ue);F.annotationText?pe.call(v.makeEditable,{delegate:q,gd:u}).call(_e).on("edit",function(we){w.text=we,this.call(_e),j("text",we),k&&k.autorange&&P(k._name+".autorange",!0),C&&C.autorange&&P(C._name+".autorange",!0),x.call("_guiRelayout",u,V())}):pe.call(_e)}else y.selectAll("#"+Z).remove();function de(we){var De={index:c,annotation:w._input,fullAnnotation:w,event:we};return A&&(De.subplotId=A),De}function _e(we){return we.call(l.font,le).attr({"text-anchor":{left:"start",right:"end"}[w.align]||"middle"}),v.convertToTspans(we,u,me),we}function me(){var we=pe.selectAll("a");1===we.size()&&we.text()===pe.text()&&q.insert("a",":first-child").attr({"xlink:xlink:href":we.attr("xlink:href"),"xlink:xlink:show":we.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(G.node());var De=q.select(".annotation-text-math-group"),Le=!De.empty(),Ie=l.bBox((Le?De:pe).node()),je=Ie.width,ye=Ie.height,Me=w.width||je,Oe=w.height||ye,Pe=Math.round(Me+2*ae),Re=Math.round(Oe+2*ae);function Ue(pt,At){return"auto"===At&&(At=pt<1/3?"left":pt>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[At]}for(var qe=!1,Xe=["x","y"],lt=0;lt<Xe.length;lt++){var He,$e,et,nt,ct,bt=Xe[lt],kt=w[bt+"ref"]||bt,Bt=w["a"+bt+"ref"],Et={x:k,y:C}[bt],ht=(ee+("x"===bt?0:-90))*Math.PI/180,at=Pe*Math.cos(ht),Ft=Re*Math.sin(ht),en=Math.abs(at)+Math.abs(Ft),Qt=w[bt+"anchor"],tn=w[bt+"shift"]*("x"===bt?1:-1),dn=Y[bt],Mn=o.getRefType(kt);if(Et&&"domain"!==Mn){var sn=Et.r2fraction(w[bt]);(sn<0||sn>1)&&(Bt===kt?((sn=Et.r2fraction(w["a"+bt]))<0||sn>1)&&(qe=!0):qe=!0),He=Et._offset+Et.r2p(w[bt]),nt=.5}else{var ke="domain"===Mn;"x"===bt?(et=w[bt],He=ke?Et._offset+Et._length*et:He=N.l+N.w*et):(et=1-w[bt],He=ke?Et._offset+Et._length*et:He=N.t+N.h*et),nt=w.showarrow?.5:et}if(w.showarrow){dn.head=He;var Se=w["a"+bt];if(ct=at*Ue(.5,w.xanchor)-Ft*Ue(.5,w.yanchor),Bt===kt){var Ce=o.getRefType(Bt);"domain"===Ce?("y"===bt&&(Se=1-Se),dn.tail=Et._offset+Et._length*Se):dn.tail="paper"===Ce?"y"===bt?N.t+N.h*(Se=1-Se):N.l+N.w*Se:Et._offset+Et.r2p(Se),$e=ct}else dn.tail=He+Se,$e=ct+Se;dn.text=dn.tail+ct;var Ve=D["x"===bt?"width":"height"];if("paper"===kt&&(dn.head=_.constrain(dn.head,1,Ve-1)),"pixel"===Bt){var Ge=-Math.max(dn.tail-3,dn.text),Qe=Math.min(dn.tail+3,dn.text)-Ve;Ge>0?(dn.tail+=Ge,dn.text+=Ge):Qe>0&&(dn.tail-=Qe,dn.text-=Qe)}dn.tail+=tn,dn.head+=tn}else $e=ct=en*Ue(nt,Qt),dn.text=He+ct;dn.text+=tn,ct+=tn,w["_"+bt+"padplus"]=en/2+($e+=tn),w["_"+bt+"padminus"]=en/2-$e,w["_"+bt+"size"]=en,w["_"+bt+"shift"]=ct}if(qe)q.remove();else{var ot=0,it=0;"left"!==w.align&&(ot=(Me-je)*("center"===w.align?.5:1)),"top"!==w.valign&&(it=(Oe-ye)*("middle"===w.valign?.5:1)),Le?De.select("svg").attr({x:ae+ot-1,y:ae+it}).call(l.setClipUrl,te?Z:null,u):pe.call(v.positionText,ae+ot-Ie.left,ae+it-Ie.top).call(l.setClipUrl,te?Z:null,u),ne.select("rect").call(l.setRect,ae,ae,Me,Oe),G.call(l.setRect,U/2,U/2,Pe-U,Re-U),q.call(l.setTranslate,Math.round(Y.x.text-Pe/2),Math.round(Y.y.text-Re/2)),X.attr({transform:"rotate("+ee+","+Y.x.text+","+Y.y.text+")"});var Vt,$t=function(pt,At){re.selectAll(".annotation-arrow-g").remove();var Xt=Y.x.head,Ct=Y.y.head,Pt=Y.x.tail+pt,Be=Y.y.tail+At,tt=Y.x.text+pt,dt=Y.y.text+At,Dt=_.rotationXYMatrix(ee,tt,dt),Nt=_.apply2DTransform(Dt),Yt=_.apply2DTransform2(Dt),fn=+G.attr("width"),nn=+G.attr("height"),In=tt-.5*fn,Dn=In+fn,kn=dt-.5*nn,rn=kn+nn,pn=[[In,kn,In,rn],[In,rn,Dn,rn],[Dn,rn,Dn,kn],[Dn,kn,In,kn]].map(Yt);if(!pn.reduce(function(Lr,Jr){return Lr^!!_.segmentsIntersect(Xt,Ct,Xt+1e6,Ct+1e6,Jr[0],Jr[1],Jr[2],Jr[3])},!1)){pn.forEach(function(Lr){var Jr=_.segmentsIntersect(Pt,Be,Xt,Ct,Lr[0],Lr[1],Lr[2],Lr[3]);Jr&&(Pt=Jr.x,Be=Jr.y)});var gn=w.arrowwidth,Pn=w.arrowcolor,jn=w.arrowside,Kn=re.append("g").style({opacity:a.opacity(Pn)}).classed("annotation-arrow-g",!0),rr=Kn.append("path").attr("d","M"+Pt+","+Be+"L"+Xt+","+Ct).style("stroke-width",gn+"px").call(a.stroke,a.rgb(Pn));if(p(rr,jn,w),F.annotationPosition&&rr.node().parentNode&&!A){var lr=Xt,kr=Ct;if(w.standoff){var Xr=Math.sqrt(Math.pow(Xt-Pt,2)+Math.pow(Ct-Be,2));lr+=w.standoff*(Pt-Xt)/Xr,kr+=w.standoff*(Be-Ct)/Xr}var sr,oi,Gr=Kn.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(Pt-lr)+","+(Be-kr),transform:e(lr,kr)}).style("stroke-width",gn+6+"px").call(a.stroke,"rgba(0,0,0,0)").call(a.fill,"rgba(0,0,0,0)");s.init({element:Gr.node(),gd:u,prepFn:function(){var Lr=l.getTranslate(q);sr=Lr.x,oi=Lr.y,k&&k.autorange&&P(k._name+".autorange",!0),C&&C.autorange&&P(C._name+".autorange",!0)},moveFn:function(Lr,Jr){var Mi=Nt(sr,oi),Jn=Mi[0]+Lr,br=Mi[1]+Jr;q.call(l.setTranslate,Jn,br),j("x",g(k,Lr,"x",N,w)),j("y",g(C,Jr,"y",N,w)),w.axref===w.xref&&j("ax",g(k,Lr,"ax",N,w)),w.ayref===w.yref&&j("ay",g(C,Jr,"ay",N,w)),Kn.attr("transform",e(Lr,Jr)),X.attr({transform:"rotate("+ee+","+Jn+","+br+")"})},doneFn:function(){x.call("_guiRelayout",u,V());var Lr=document.querySelector(".js-notes-box-panel");Lr&&Lr.redraw(Lr.selectedObj)}})}}};w.showarrow&&$t(0,0),K&&s.init({element:q.node(),gd:u,prepFn:function(){Vt=X.attr("transform")},moveFn:function(pt,At){var Xt="pointer";if(w.showarrow)j("ax",w.axref===w.xref?g(k,pt,"ax",N,w):w.ax+pt),j("ay",w.ayref===w.yref?g(C,At,"ay",N.w,w):w.ay+At),$t(pt,At);else{if(A)return;var Ct,Pt;if(k)Ct=g(k,pt,"x",N,w);else{var Be=w._xsize/N.w;Ct=s.align(w.x+(w._xshift-w.xshift)/N.w-Be/2+pt/N.w,Be,0,1,w.xanchor)}if(C)Pt=g(C,At,"y",N,w);else{var dt=w._ysize/N.h;Pt=s.align(w.y-(w._yshift+w.yshift)/N.h-dt/2-At/N.h,dt,0,1,w.yanchor)}j("x",Ct),j("y",Pt),k&&C||(Xt=s.getCursor(k?.5:Ct,C?.5:Pt,w.xanchor,w.yanchor))}X.attr({transform:e(pt,At)+Vt}),h(q,Xt)},clickFn:function(pt,At){w.captureevents&&u.emit("plotly_clickannotation",de(At))},doneFn:function(){h(q),x.call("_guiRelayout",u,V());var pt=document.querySelector(".js-notes-box-panel");pt&&pt.redraw(pt.selectedObj)}})}}}oe.exports={draw:function(u){var w=u._fullLayout;w._infolayer.selectAll(".annotation").remove();for(var c=0;c<w.annotations.length;c++)w.annotations[c].visible&&f(u,c);return M.previousPromises(u)},drawOne:f,drawRaw:m}},{"../../lib":503,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../fx":406,"./draw_arrow_head":356,"@plotly/d3":58}],356:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../color"),M=b("./arrow_paths"),_=b("../../lib"),e=_.strScale,o=_.strRotate,a=_.strTranslate;oe.exports=function(l,i,v){var h,s,d,p,f=l.node(),g=M[v.arrowhead||0],m=M[v.startarrowhead||0],u=(v.arrowwidth||1)*(v.arrowsize||1),w=(v.arrowwidth||1)*(v.startarrowsize||1),c=i.indexOf("start")>=0,A=i.indexOf("end")>=0,k=g.backoff*u+v.standoff,C=m.backoff*w+v.startstandoff;if("line"===f.nodeName){h={x:+l.attr("x1"),y:+l.attr("y1")},s={x:+l.attr("x2"),y:+l.attr("y2")};var E=h.x-s.x,L=h.y-s.y;if(p=(d=Math.atan2(L,E))+Math.PI,k&&C&&k+C>Math.sqrt(E*E+L*L))return void re();if(k){if(k*k>E*E+L*L)return void re();var D=k*Math.cos(d),N=k*Math.sin(d);s.x+=D,s.y+=N,l.attr({x2:s.x,y2:s.y})}if(C){if(C*C>E*E+L*L)return void re();var F=C*Math.cos(d),I=C*Math.sin(d);h.x-=F,h.y-=I,l.attr({x1:h.x,y1:h.y})}}else if("path"===f.nodeName){var P=f.getTotalLength(),j="";if(P<k+C)return void re();var V=f.getPointAtLength(0),Z=f.getPointAtLength(.1);d=Math.atan2(V.y-Z.y,V.x-Z.x),h=f.getPointAtLength(Math.min(C,P)),j="0px,"+C+"px,";var Y=f.getPointAtLength(P),ee=f.getPointAtLength(P-.1);p=Math.atan2(Y.y-ee.y,Y.x-ee.x),s=f.getPointAtLength(Math.max(0,P-k)),l.style("stroke-dasharray",j+=P-(j?C+k:k)+"px,"+P+"px")}function re(){l.style("stroke-dasharray","0px,100px")}function X(K,ie,q,U){K.path&&(K.noRotate&&(q=0),y.select(f.parentNode).append("path").attr({class:l.attr("class"),d:K.path,transform:a(ie.x,ie.y)+o(180*q/Math.PI)+e(U)}).style({fill:x.rgb(v.arrowcolor),"stroke-width":0}))}c&&X(m,h,d,w),A&&X(g,s,p,u)}},{"../../lib":503,"../color":366,"./arrow_paths":348,"@plotly/d3":58}],357:[function(b,oe,se){"use strict";var y=b("./draw"),x=b("./click");oe.exports={moduleType:"component",name:"annotations",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("annotations"),calcAutorange:b("./calc_autorange"),draw:y.draw,drawOne:y.drawOne,drawRaw:y.drawRaw,hasClickToShow:x.hasClickToShow,onClick:x.onClick,convertCoords:b("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":349,"./calc_autorange":350,"./click":351,"./convert_coords":353,"./defaults":354,"./draw":355}],358:[function(b,oe,se){"use strict";var y=b("../annotations/attributes"),x=b("../../plot_api/edit_types").overrideAll,M=b("../../plot_api/plot_template").templatedArray;oe.exports=x(M("annotation",{visible:y.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:y.xanchor,xshift:y.xshift,yanchor:y.yanchor,yshift:y.yshift,text:y.text,textangle:y.textangle,font:y.font,width:y.width,height:y.height,opacity:y.opacity,align:y.align,valign:y.valign,bgcolor:y.bgcolor,bordercolor:y.bordercolor,borderpad:y.borderpad,borderwidth:y.borderwidth,showarrow:y.showarrow,arrowcolor:y.arrowcolor,arrowhead:y.arrowhead,startarrowhead:y.startarrowhead,arrowside:y.arrowside,arrowsize:y.arrowsize,startarrowsize:y.startarrowsize,arrowwidth:y.arrowwidth,standoff:y.standoff,startstandoff:y.startstandoff,hovertext:y.hovertext,hoverlabel:y.hoverlabel,captureevents:y.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../annotations/attributes":349}],359:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plots/cartesian/axes");function M(_,e){var o=e.fullSceneLayout.domain,a=e.fullLayout._size,l={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};_._xa={},y.extendFlat(_._xa,l),x.setConvert(_._xa),_._xa._offset=a.l+o.x[0]*a.w,_._xa.l2p=function(){return.5*(1+_._pdata[0]/_._pdata[3])*a.w*(o.x[1]-o.x[0])},_._ya={},y.extendFlat(_._ya,l),x.setConvert(_._ya),_._ya._offset=a.t+(1-o.y[1])*a.h,_._ya.l2p=function(){return.5*(1-_._pdata[1]/_._pdata[3])*a.h*(o.y[1]-o.y[0])}}oe.exports=function(_){for(var e=_.fullSceneLayout.annotations,o=0;o<e.length;o++)M(e[o],_);_.fullLayout._infolayer.selectAll(".annotation-"+_.id).remove()}},{"../../lib":503,"../../plots/cartesian/axes":554}],360:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plots/cartesian/axes"),M=b("../../plots/array_container_defaults"),_=b("../annotations/common_defaults"),e=b("./attributes");function o(a,l,i,v){function h(d,p){return y.coerce(a,l,e,d,p)}function s(d){var p=d+"axis",f={_fullLayout:{}};return f._fullLayout[p]=i[p],x.coercePosition(l,f,h,d,d,.5)}h("visible")&&(_(a,l,v.fullLayout,h),s("x"),s("y"),s("z"),y.noneOrAll(a,l,["x","y","z"]),l.xref="x",l.yref="y",l.zref="z",h("xanchor"),h("yanchor"),h("xshift"),h("yshift"),l.showarrow&&(l.axref="pixel",l.ayref="pixel",h("ax",-10),h("ay",-30),y.noneOrAll(a,l,["ax","ay"])))}oe.exports=function(a,l,i){M(a,l,{name:"annotations",handleItemDefaults:o,fullLayout:i.fullLayout})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../annotations/common_defaults":352,"./attributes":358}],361:[function(b,oe,se){"use strict";var y=b("../annotations/draw").drawRaw,x=b("../../plots/gl3d/project"),M=["x","y","z"];oe.exports=function(_){for(var e=_.fullSceneLayout,o=_.dataScale,a=e.annotations,l=0;l<a.length;l++){for(var i=a[l],v=!1,h=0;h<3;h++){var s=M[h],p=e[s+"axis"].r2fraction(i[s]);if(p<0||p>1){v=!0;break}}v?_.fullLayout._infolayer.select(".annotation-"+_.id+'[data-index="'+l+'"]').remove():(i._pdata=x(_.glplot.cameraParams,[e.xaxis.r2l(i.x)*o[0],e.yaxis.r2l(i.y)*o[1],e.zaxis.r2l(i.z)*o[2]]),y(_.graphDiv,i,l,_.id,i._xa,i._ya))}}},{"../../plots/gl3d/project":607,"../annotations/draw":355}],362:[function(b,oe,se){"use strict";var y=b("../../registry"),x=b("../../lib");oe.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:b("./attributes")}}},layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),includeBasePlot:function(M,_){var e=y.subplotsRegistry.gl3d;if(e)for(var o=e.attrRegex,a=Object.keys(M),l=0;l<a.length;l++){var i=a[l];o.test(i)&&(M[i].annotations||[]).length&&(x.pushUnique(_._basePlotModules,e),x.pushUnique(_._subplots.gl3d,i))}},convert:b("./convert"),draw:b("./draw")}},{"../../lib":503,"../../registry":638,"./attributes":358,"./convert":359,"./defaults":360,"./draw":361}],363:[function(b,oe,se){"use strict";oe.exports=b("world-calendars/dist/main"),b("world-calendars/dist/plus"),b("world-calendars/dist/calendars/chinese"),b("world-calendars/dist/calendars/coptic"),b("world-calendars/dist/calendars/discworld"),b("world-calendars/dist/calendars/ethiopian"),b("world-calendars/dist/calendars/hebrew"),b("world-calendars/dist/calendars/islamic"),b("world-calendars/dist/calendars/julian"),b("world-calendars/dist/calendars/mayan"),b("world-calendars/dist/calendars/nanakshahi"),b("world-calendars/dist/calendars/nepali"),b("world-calendars/dist/calendars/persian"),b("world-calendars/dist/calendars/taiwan"),b("world-calendars/dist/calendars/thai"),b("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":332,"world-calendars/dist/calendars/coptic":333,"world-calendars/dist/calendars/discworld":334,"world-calendars/dist/calendars/ethiopian":335,"world-calendars/dist/calendars/hebrew":336,"world-calendars/dist/calendars/islamic":337,"world-calendars/dist/calendars/julian":338,"world-calendars/dist/calendars/mayan":339,"world-calendars/dist/calendars/nanakshahi":340,"world-calendars/dist/calendars/nepali":341,"world-calendars/dist/calendars/persian":342,"world-calendars/dist/calendars/taiwan":343,"world-calendars/dist/calendars/thai":344,"world-calendars/dist/calendars/ummalqura":345,"world-calendars/dist/main":346,"world-calendars/dist/plus":347}],364:[function(b,oe,se){"use strict";var y=b("./calendars"),x=b("../../lib"),M=b("../../constants/numerical"),_=M.EPOCHJD,e=M.ONEDAY,o={valType:"enumerated",values:x.sortObjectKeys(y.calendars),editType:"calc",dflt:"gregorian"},a=function(m,u,w,c){var A={};return A[w]=o,x.coerce(m,u,A,w,c)},l={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},i={};function v(m){return i[m]||(i[m]=y.instance(m))}function h(m){return x.extendFlat({},o,{description:m})}function s(m){return"Sets the calendar system to use with `"+m+"` date data."}var d={xcalendar:h(s("x"))},p=x.extendFlat({},d,{ycalendar:h(s("y"))}),f=x.extendFlat({},p,{zcalendar:h(s("z"))}),g=h(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));oe.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:p,bar:p,box:p,heatmap:p,contour:p,histogram:p,histogram2d:p,histogram2dcontour:p,scatter3d:f,surface:f,mesh3d:f,scattergl:p,ohlc:d,candlestick:d},layout:{calendar:h(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:g},yaxis:{calendar:g},scene:{xaxis:{calendar:g},yaxis:{calendar:g},zaxis:{calendar:g}},polar:{radialaxis:{calendar:g}}},transforms:{filter:{valuecalendar:h(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:h(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:o,handleDefaults:a,handleTraceDefaults:function(m,u,w,c){for(var A=0;A<w.length;A++)a(m,u,w[A]+"calendar",c.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:v,worldCalFmt:function(m,u,w){for(var c,A,k,C,E,L=Math.floor((u+.05)/e)+_,D=v(w).fromJD(L),N=0;-1!==(N=m.indexOf("%",N));)"0"===(c=m.charAt(N+1))||"-"===c||"_"===c?(k=3,A=m.charAt(N+2),"_"===c&&(c="-")):(A=c,c="0",k=2),(C=l[A])?(E="##"===C?"##":D.formatDate(C[c]),m=m.substr(0,N)+E+m.substr(N+k),N+=E.length):N+=k;return m}}},{"../../constants/numerical":479,"../../lib":503,"./calendars":363}],365:[function(b,oe,se){"use strict";se.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],se.defaultLine="#444",se.lightLine="#eee",se.background="#fff",se.borderLine="#BEC8D9",se.lightFraction=1e3/11},{}],366:[function(b,oe,se){"use strict";var y=b("tinycolor2"),x=b("fast-isnumeric"),M=b("../../lib/array").isTypedArray,_=oe.exports={},e=b("./attributes");_.defaults=e.defaults;var o=_.defaultLine=e.defaultLine;_.lightLine=e.lightLine;var a=_.background=e.background;function l(i){if(x(i)||"string"!=typeof i)return i;var v=i.trim();if("rgb"!==v.substr(0,3))return i;var h=v.match(/^rgba?\s*\(([^()]*)\)$/);if(!h)return i;var s=h[1].trim().split(/\s*[\s,]\s*/),d="a"===v.charAt(3)&&4===s.length;if(!d&&3!==s.length)return i;for(var p=0;p<s.length;p++){if(!(s[p].length&&(s[p]=Number(s[p]),s[p]>=0)))return i;if(3===p)s[p]>1&&(s[p]=1);else if(s[p]>=1)return i}var f=Math.round(255*s[0])+", "+Math.round(255*s[1])+", "+Math.round(255*s[2]);return d?"rgba("+f+", "+s[3]+")":"rgb("+f+")"}_.tinyRGB=function(i){var v=i.toRgb();return"rgb("+Math.round(v.r)+", "+Math.round(v.g)+", "+Math.round(v.b)+")"},_.rgb=function(i){return _.tinyRGB(y(i))},_.opacity=function(i){return i?y(i).getAlpha():0},_.addOpacity=function(i,v){var h=y(i).toRgb();return"rgba("+Math.round(h.r)+", "+Math.round(h.g)+", "+Math.round(h.b)+", "+v+")"},_.combine=function(i,v){var h=y(i).toRgb();if(1===h.a)return y(i).toRgbString();var s=y(v||a).toRgb(),d=1===s.a?s:{r:255*(1-s.a)+s.r*s.a,g:255*(1-s.a)+s.g*s.a,b:255*(1-s.a)+s.b*s.a};return y({r:d.r*(1-h.a)+h.r*h.a,g:d.g*(1-h.a)+h.g*h.a,b:d.b*(1-h.a)+h.b*h.a}).toRgbString()},_.contrast=function(i,v,h){var s=y(i);return 1!==s.getAlpha()&&(s=y(_.combine(i,a))),(s.isDark()?v?s.lighten(v):a:h?s.darken(h):o).toString()},_.stroke=function(i,v){var h=y(v);i.style({stroke:_.tinyRGB(h),"stroke-opacity":h.getAlpha()})},_.fill=function(i,v){var h=y(v);i.style({fill:_.tinyRGB(h),"fill-opacity":h.getAlpha()})},_.clean=function(i){if(i&&"object"==typeof i){var v,h,s,d,p=Object.keys(i);for(v=0;v<p.length;v++)if(d=i[s=p[v]],"color"===s.substr(s.length-5))if(Array.isArray(d))for(h=0;h<d.length;h++)d[h]=l(d[h]);else i[s]=l(d);else if("colorscale"===s.substr(s.length-10)&&Array.isArray(d))for(h=0;h<d.length;h++)Array.isArray(d[h])&&(d[h][1]=l(d[h][1]));else if(Array.isArray(d)){var f=d[0];if(!Array.isArray(f)&&f&&"object"==typeof f)for(h=0;h<d.length;h++)_.clean(d[h])}else d&&"object"==typeof d&&!M(d)&&_.clean(d)}}},{"../../lib/array":485,"./attributes":365,"fast-isnumeric":190,tinycolor2:312}],367:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/layout_attributes"),x=b("../../plots/font_attributes"),M=b("../../lib/extend").extendFlat,_=b("../../plot_api/edit_types").overrideAll;oe.exports=_({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:y.linecolor,outlinewidth:y.linewidth,bordercolor:y.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:y.tickmode,nticks:y.nticks,tick0:y.tick0,dtick:y.dtick,tickvals:y.tickvals,ticktext:y.ticktext,ticks:M({},y.ticks,{dflt:""}),ticklabeloverflow:M({},y.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:y.ticklen,tickwidth:y.tickwidth,tickcolor:y.tickcolor,ticklabelstep:y.ticklabelstep,showticklabels:y.showticklabels,tickfont:x({}),tickangle:y.tickangle,tickformat:y.tickformat,tickformatstops:y.tickformatstops,tickprefix:y.tickprefix,showtickprefix:y.showtickprefix,ticksuffix:y.ticksuffix,showticksuffix:y.showticksuffix,separatethousands:y.separatethousands,exponentformat:y.exponentformat,minexponent:y.minexponent,showexponent:y.showexponent,title:{text:{valType:"string"},font:x({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:x({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],368:[function(b,oe,se){"use strict";oe.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],369:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plot_api/plot_template"),M=b("../../plots/cartesian/tick_value_defaults"),_=b("../../plots/cartesian/tick_mark_defaults"),e=b("../../plots/cartesian/tick_label_defaults"),o=b("../../plots/cartesian/prefix_suffix_defaults"),a=b("./attributes");oe.exports=function(l,i,v){var h=x.newContainer(i,"colorbar"),s=l.colorbar||{};function d(L,D){return y.coerce(s,h,a,L,D)}var p=v.margin||{t:0,b:0,l:0,r:0},f=v.width-p.l-p.r,g=v.height-p.t-p.b,m="v"===d("orientation"),u=d("thicknessmode");d("thickness","fraction"===u?30/(m?f:g):30);var w=d("lenmode");d("len","fraction"===w?1:m?g:f),d("x",m?1.02:.5),d("xanchor",m?"left":"center"),d("xpad"),d("y",m?.5:1.02),d("yanchor",m?"middle":"bottom"),d("ypad"),y.noneOrAll(s,h,["x","y"]),d("outlinecolor"),d("outlinewidth"),d("bordercolor"),d("borderwidth"),d("bgcolor");var c=y.coerce(s,h,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:m?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");d("ticklabeloverflow",-1!==c.indexOf("inside")?"hide past domain":"hide past div"),M(s,h,d,"linear");var A=v.font,k={outerTicks:!1,font:A};-1!==c.indexOf("inside")&&(k.bgColor="black"),o(s,h,d,"linear",k),e(s,h,d,"linear",k),_(s,h,d,"linear",k),d("title.text",v._dfltTitle.colorbar);var C=h.tickfont,E=y.extendFlat({},C,{color:A.color,size:y.bigFont(C.size)});y.coerceFont(d,"title.font",E),d("title.side",m?"top":"right")}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"./attributes":367}],370:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("tinycolor2"),M=b("../../plots/plots"),_=b("../../registry"),e=b("../../plots/cartesian/axes"),o=b("../dragelement"),a=b("../../lib"),l=a.strTranslate,i=b("../../lib/extend").extendFlat,v=b("../../lib/setcursor"),h=b("../drawing"),s=b("../color"),d=b("../titles"),p=b("../../lib/svg_text_utils"),f=b("../colorscale/helpers").flipScale,g=b("../../plots/cartesian/axis_defaults"),m=b("../../plots/cartesian/position_defaults"),u=b("../../plots/cartesian/layout_attributes"),w=b("../../constants/alignment"),c=w.LINE_SPACING,A=w.FROM_TL,k=w.FROM_BR,C=b("./constants").cn;oe.exports={draw:function(E){var L=E._fullLayout._infolayer.selectAll("g."+C.colorbar).data(function(D){var N,F,I,P,j=D._fullLayout,V=D.calcdata,Z=[];function Y(te){return i(te,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function ee(){"function"==typeof P.calc?P.calc(D,I,N):(N._fillgradient=F.reversescale?f(F.colorscale):F.colorscale,N._zrange=[F[P.min],F[P.max]])}for(var re=0;re<V.length;re++){var K=(I=V[re][0].trace)._module.colorbar;if(!0===I.visible&&K)for(var ie=Array.isArray(K),q=ie?K:[K],U=0;U<q.length;U++){var W=(P=q[U]).container;(F=W?I[W]:I)&&F.showscale&&((N=Y(F.colorbar))._id="cb"+I.uid+(ie&&W?"-"+W:""),N._traceIndex=I.index,N._propPrefix=(W?W+".":"")+"colorbar.",N._meta=I._meta,ee(),Z.push(N))}}for(var ae in j._colorAxes)if((F=j[ae]).showscale){var G=j._colorAxes[ae];(N=Y(F.colorbar))._id="cb"+ae,N._propPrefix=ae+".colorbar.",N._meta=j._meta,P={min:"cmin",max:"cmax"},"heatmap"!==G[0]&&(P.calc=(I=G[1])._module.colorbar.calc),ee(),Z.push(N)}return Z}(E),function(D){return D._id});L.enter().append("g").attr("class",function(D){return D._id}).classed(C.colorbar,!0),L.each(function(D){var N=y.select(this);a.ensureSingle(N,"rect",C.cbbg),a.ensureSingle(N,"g",C.cbfills),a.ensureSingle(N,"g",C.cblines),a.ensureSingle(N,"g",C.cbaxis,function(I){I.classed(C.crisp,!0)}),a.ensureSingle(N,"g",C.cbtitleunshift,function(I){I.append("g").classed(C.cbtitle,!0)}),a.ensureSingle(N,"rect",C.cboutline);var I,P,j,V,Z,Y,ee,re,F=function(I,P,j){var V="v"===P.orientation,Z=P.len,Y=P.lenmode,ee=P.thickness,re=P.thicknessmode,X=P.outlinewidth,K=P.borderwidth,ie=P.bgcolor,q=P.xanchor,U=P.yanchor,W=P.xpad,ae=P.ypad,G=P.x,te=V?P.y:1-P.y,ne=j._fullLayout,le=ne._size,ue=P._fillcolor,pe=P._line,de=P.title,_e=de.side,me=P._zrange||y.extent(("function"==typeof ue?ue:pe.color).domain()),we="function"==typeof pe.color?pe.color:function(){return pe.color},De="function"==typeof ue?ue:function(){return ue},Le=P._levels,Ie=function(Mn,sn,ke){var Se,Ce,Ve=sn._levels,Ge=[],Qe=[],ot=Ve.end+Ve.size/100,it=Ve.size,mt=1.001*ke[0]-.001*ke[1],xt=1.001*ke[1]-.001*ke[0];for(Ce=0;Ce<1e5&&(Se=Ve.start+Ce*it,!(it>0?Se>=ot:Se<=ot));Ce++)Se>mt&&Se<xt&&Ge.push(Se);if(sn._fillgradient)Qe=[0];else if("function"==typeof sn._fillcolor){var Vt=sn._filllevels;if(Vt)for(ot=Vt.end+Vt.size/100,it=Vt.size,Ce=0;Ce<1e5&&(Se=Vt.start+Ce*it,!(it>0?Se>=ot:Se<=ot));Ce++)Se>ke[0]&&Se<ke[1]&&Qe.push(Se);else(Qe=Ge.map(function($t){return $t-Ve.size/2})).push(Qe[Qe.length-1]+Ve.size)}else sn._fillcolor&&"string"==typeof sn._fillcolor&&(Qe=[0]);return Ve.size<0&&(Ge.reverse(),Qe.reverse()),{line:Ge,fill:Qe}}(0,P,me),je=Ie.fill,ye=Ie.line,Me=Math.round(ee*("fraction"===re?V?le.w:le.h:1)),Oe=Me/(V?le.w:le.h),Pe=Math.round(Z*("fraction"===Y?V?le.h:le.w:1)),Re=Pe/(V?le.h:le.w),Ue=Math.round(V?G*le.w+W:te*le.h+ae),qe={center:.5,right:1}[q]||0,Xe={top:1,middle:.5}[U]||0,lt=V?G-qe*Oe:te-Xe*Oe,He=V?te-Xe*Re:G-qe*Re,$e=Math.round(V?le.h*(1-He):le.w*He);P._lenFrac=Re,P._thickFrac=Oe,P._uFrac=lt,P._vFrac=He;var et=P._axis=function(Mn,sn,ke){var Se=Mn._fullLayout,Ce="v"===sn.orientation,Ve={type:"linear",range:ke,tickmode:sn.tickmode,nticks:sn.nticks,tick0:sn.tick0,dtick:sn.dtick,tickvals:sn.tickvals,ticktext:sn.ticktext,ticks:sn.ticks,ticklen:sn.ticklen,tickwidth:sn.tickwidth,tickcolor:sn.tickcolor,showticklabels:sn.showticklabels,ticklabelposition:sn.ticklabelposition,ticklabeloverflow:sn.ticklabeloverflow,ticklabelstep:sn.ticklabelstep,tickfont:sn.tickfont,tickangle:sn.tickangle,tickformat:sn.tickformat,exponentformat:sn.exponentformat,minexponent:sn.minexponent,separatethousands:sn.separatethousands,showexponent:sn.showexponent,showtickprefix:sn.showtickprefix,tickprefix:sn.tickprefix,showticksuffix:sn.showticksuffix,ticksuffix:sn.ticksuffix,title:sn.title,showline:!0,anchor:"free",side:Ce?"right":"bottom",position:1},Ge=Ce?"y":"x",Qe={type:"linear",_id:Ge+sn._id},ot={letter:Ge,font:Se.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:Se.calendar};function it(mt,xt){return a.coerce(Ve,Qe,u,mt,xt)}return g(Ve,Qe,it,ot,Se),m(Ve,Qe,it,ot),Qe}(j,P,me);et.position=Oe+(V?G+W/le.w:te+ae/le.h);var nt=-1!==["top","bottom"].indexOf(_e);if(V&&nt&&(et.title.side=_e,et.titlex=G+W/le.w,et.titley=He+("top"===de.side?Re-ae/le.h:ae/le.h)),V||nt||(et.title.side=_e,et.titley=te+ae/le.h,et.titlex=He+W/le.w),pe.color&&"auto"===P.tickmode){et.tickmode="linear",et.tick0=Le.start;var ct=Le.size,bt=a.constrain(Pe/50,4,15)+1,kt=(me[1]-me[0])/((P.nticks||bt)*ct);if(kt>1){var Bt=Math.pow(10,Math.floor(Math.log(kt)/Math.LN10));ct*=Bt*a.roundUp(kt/Bt,[2,5,10]),(Math.abs(Le.start)/Le.size+1e-6)%1<2e-6&&(et.tick0=0)}et.dtick=ct}et.domain=V?[He+ae/le.h,He+Re-ae/le.h]:[He+W/le.w,He+Re-W/le.w],et.setScale(),I.attr("transform",l(Math.round(le.l),Math.round(le.t)));var Et,ht=I.select("."+C.cbtitleunshift).attr("transform",l(-Math.round(le.l),-Math.round(le.t))),at=et.ticklabelposition,Ft=et.title.font.size,en=I.select("."+C.cbaxis),Qt=0,tn=0;function dn(Mn,sn){var ke={propContainer:et,propName:P._propPrefix+"title",traceIndex:P._traceIndex,_meta:P._meta,placeholder:ne._dfltTitle.colorbar,containerGroup:I.select("."+C.cbtitle)},Se="h"===Mn.charAt(0)?Mn.substr(1):"h"+Mn;I.selectAll("."+Se+",."+Se+"-math-group").remove(),d.draw(j,Mn,i(ke,sn||{}))}return a.syncOrAsync([M.previousPromises,function(){var Mn,sn;(V&&nt||!V&&!nt)&&("top"===_e&&(Mn=W+le.l+le.w*G,sn=ae+le.t+le.h*(1-He-Re)+3+.75*Ft),"bottom"===_e&&(Mn=W+le.l+le.w*G,sn=ae+le.t+le.h*(1-He)-3-.25*Ft),"right"===_e&&(sn=ae+le.t+le.h*te+3+.75*Ft,Mn=W+le.l+le.w*He),dn(et._id+"title",{attributes:{x:Mn,y:sn,"text-anchor":V?"start":"middle"}}))},function(){if(!V&&!nt||V&&nt){var Mn,sn=I.select("."+C.cbtitle),ke=sn.select("text"),Se=[-X/2,X/2],Ce=sn.select(".h"+et._id+"title-math-group").node(),Ve=15.6;if(ke.node()&&(Ve=parseInt(ke.node().style.fontSize,10)*c),Ce?(Mn=h.bBox(Ce),tn=Mn.width,(Qt=Mn.height)>Ve&&(Se[1]-=(Qt-Ve)/2)):ke.node()&&!ke.classed(C.jsPlaceholder)&&(Mn=h.bBox(ke.node()),tn=Mn.width,Qt=Mn.height),V){if(Qt){if(Qt+=5,"top"===_e)et.domain[1]-=Qt/le.h,Se[1]*=-1;else{et.domain[0]+=Qt/le.h;var Ge=p.lineCount(ke);Se[1]+=(1-Ge)*Ve}sn.attr("transform",l(Se[0],Se[1])),et.setScale()}}else tn&&("right"===_e&&(et.domain[0]+=(tn+Ft/2)/le.w),sn.attr("transform",l(Se[0],Se[1])),et.setScale())}I.selectAll("."+C.cbfills+",."+C.cblines).attr("transform",V?l(0,Math.round(le.h*(1-et.domain[1]))):l(Math.round(le.w*et.domain[0]),0)),en.attr("transform",V?l(0,Math.round(-le.t)):l(Math.round(-le.l),0));var Qe=I.select("."+C.cbfills).selectAll("rect."+C.cbfill).attr("style","").data(je);Qe.enter().append("rect").classed(C.cbfill,!0).style("stroke","none"),Qe.exit().remove();var ot=me.map(et.c2p).map(Math.round).sort(function($t,pt){return $t-pt});Qe.each(function($t,pt){var At=[0===pt?me[0]:(je[pt]+je[pt-1])/2,pt===je.length-1?me[1]:(je[pt]+je[pt+1])/2].map(et.c2p).map(Math.round);V&&(At[1]=a.constrain(At[1]+(At[1]>At[0])?1:-1,ot[0],ot[1]));var Xt=y.select(this).attr(V?"x":"y",Ue).attr(V?"y":"x",y.min(At)).attr(V?"width":"height",Math.max(Me,2)).attr(V?"height":"width",Math.max(y.max(At)-y.min(At),2));if(P._fillgradient)h.gradient(Xt,j,P._id,V?"vertical":"horizontalreversed",P._fillgradient,"fill");else{var Ct=De($t).replace("e-","");Xt.attr("fill",x(Ct).toHexString())}});var it=I.select("."+C.cblines).selectAll("path."+C.cbline).data(pe.color&&pe.width?ye:[]);it.enter().append("path").classed(C.cbline,!0),it.exit().remove(),it.each(function($t){var pt=Ue,At=Math.round(et.c2p($t))+pe.width/2%1;y.select(this).attr("d","M"+(V?pt+","+At:At+","+pt)+(V?"h":"v")+Me).call(h.lineGroupStyle,pe.width,we($t),pe.dash)}),en.selectAll("g."+et._id+"tick,path").remove();var mt=Ue+Me+(X||0)/2-("outside"===P.ticks?1:0),xt=e.calcTicks(et),Vt=e.getTickSigns(et)[2];return e.drawTicks(j,et,{vals:"inside"===et.ticks?e.clipEnds(et,xt):xt,layer:en,path:e.makeTickPath(et,mt,Vt),transFn:e.makeTransTickFn(et)}),e.drawLabels(j,et,{vals:xt,layer:en,transFn:e.makeTransTickLabelFn(et),labelFns:e.makeLabelFns(et,mt)})},function(){if(V&&!nt||!V&&nt){var Mn,sn,ke=et.position||0,Se=et._offset+et._length/2;if("right"===_e)sn=Se,Mn=le.l+le.w*ke+10+Ft*(et.showticklabels?1:.5);else if(Mn=Se,"bottom"===_e&&(sn=le.t+le.h*ke+10+(-1===at.indexOf("inside")?et.tickfont.size:0)+("intside"!==et.ticks&&P.ticklen||0)),"top"===_e){var Ce=de.text.split("<br>").length;sn=le.t+le.h*ke+10-Me-c*Ft*Ce}dn((V?"h":"v")+et._id+"title",{avoid:{selection:y.select(j).selectAll("g."+et._id+"tick"),side:_e,offsetTop:V?0:le.t,offsetLeft:V?le.l:0,maxShift:V?ne.width:ne.height},attributes:{x:Mn,y:sn,"text-anchor":"middle"},transform:{rotate:V?-90:0,offset:0}})}},M.previousPromises,function(){var Mn,sn=Me+X/2;-1===at.indexOf("inside")&&(Mn=h.bBox(en.node()),sn+=V?Mn.width:Mn.height),Et=ht.select("text");var ke=0,Se=V&&"top"===_e,Ce=!V&&"right"===_e,Ve=0;if(Et.node()&&!Et.classed(C.jsPlaceholder)){var Ge,Qe=ht.select(".h"+et._id+"title-math-group").node();Qe&&(V&&nt||!V&&!nt)?(ke=(Mn=h.bBox(Qe)).width,Ge=Mn.height):(ke=(Mn=h.bBox(ht.node())).right-le.l-(V?Ue:$e),Ge=Mn.bottom-le.t-(V?$e:Ue),V||"top"!==_e||(sn+=Mn.height,Ve=Mn.height)),Ce&&(Et.attr("transform",l(ke/2+Ft/2,0)),ke*=2),sn=Math.max(sn,V?ke:Ge)}var ot=2*(V?W:ae)+sn+K+X/2,it=0;!V&&de.text&&"bottom"===U&&te<=0&&(ot+=it=ot/2,Ve+=it),ne._hColorbarMoveTitle=it,ne._hColorbarMoveCBTitle=Ve;var mt=K+X;I.select("."+C.cbbg).attr("x",(V?Ue:$e)-mt/2-(V?W:0)).attr("y",(V?$e:Ue)-(V?Pe:ae+Ve-it)).attr(V?"width":"height",Math.max(ot-it,2)).attr(V?"height":"width",Math.max(Pe+mt,2)).call(s.fill,ie).call(s.stroke,P.bordercolor).style("stroke-width",K);var xt=Ce?Math.max(ke-10,0):0;if(I.selectAll("."+C.cboutline).attr("x",(V?Ue:$e+W)+xt).attr("y",(V?$e+ae-Pe:Ue)+(Se?Qt:0)).attr(V?"width":"height",Math.max(Me,2)).attr(V?"height":"width",Math.max(Pe-(V?2*ae+Qt:2*W+xt),2)).call(s.stroke,P.outlinecolor).style({fill:"none","stroke-width":X}),I.attr("transform",l(le.l-(V?qe*ot:0),le.t-(V?0:(1-Xe)*ot-Ve))),!V&&(K||x(ie).getAlpha()&&!x.equals(ne.paper_bgcolor,ie))){var Vt=en.selectAll("text"),$t=Vt[0].length,pt=I.select("."+C.cbbg).node(),At=h.bBox(pt),Xt=h.getTranslate(I);Vt.each(function(Nt,Yt){var fn=$t-1;if(0===Yt||Yt===fn){var nn,In=h.bBox(this),Dn=h.getTranslate(this);Yt===fn?(nn=At.right+Xt.x+$e-K-2+G-(In.right+Dn.x))>0&&(nn=0):0===Yt&&(nn=At.left+Xt.x+$e+K+2-(In.left+Dn.x))<0&&(nn=0),nn&&($t<3?this.setAttribute("transform","translate("+nn+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Ct={},Pt=A[q],Be=k[q],tt=A[U],dt=k[U],Dt=ot-Me;V?("pixels"===Y?(Ct.y=te,Ct.t=Pe*tt,Ct.b=Pe*dt):(Ct.t=Ct.b=0,Ct.yt=te+Z*tt,Ct.yb=te-Z*dt),"pixels"===re?(Ct.x=G,Ct.l=ot*Pt,Ct.r=ot*Be):(Ct.l=Dt*Pt,Ct.r=Dt*Be,Ct.xl=G-ee*Pt,Ct.xr=G+ee*Be)):("pixels"===Y?(Ct.x=G,Ct.l=Pe*Pt,Ct.r=Pe*Be):(Ct.l=Ct.r=0,Ct.xl=G+Z*Pt,Ct.xr=G-Z*Be),"pixels"===re?(Ct.y=1-te,Ct.t=ot*tt,Ct.b=ot*dt):(Ct.t=Dt*tt,Ct.b=Dt*dt,Ct.yt=te-ee*tt,Ct.yb=te+ee*dt)),M.autoMargin(j,P._id,Ct)}],j)}(N,D,E);F&&F.then&&(E._promises||[]).push(F),E._context.edits.colorbarPosition&&(ee="v"===(P=D).orientation,re=(j=E)._fullLayout._size,o.init({element:(I=N).node(),gd:j,prepFn:function(){V=I.attr("transform"),v(I)},moveFn:function(X,K){I.attr("transform",V+l(X,K)),Z=o.align((ee?P._uFrac:P._vFrac)+X/re.w,ee?P._thickFrac:P._lenFrac,0,1,P.xanchor),Y=o.align((ee?P._vFrac:1-P._uFrac)-K/re.h,ee?P._lenFrac:P._thickFrac,0,1,P.yanchor);var ie=o.getCursor(Z,Y,P.xanchor,P.yanchor);v(I,ie)},doneFn:function(){if(v(I),void 0!==Z&&void 0!==Y){var X={};X[P._propPrefix+"x"]=Z,X[P._propPrefix+"y"]=Y,void 0!==P._traceIndex?_.call("_guiRestyle",j,X,P._traceIndex):_.call("_guiRelayout",j,X)}}}))}),L.exit().each(function(D){M.autoMargin(E,D._id)}).remove(),L.order()}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/extend":493,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"../../plots/plots":619,"../../registry":638,"../color":366,"../colorscale/helpers":377,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":368,"@plotly/d3":58,tinycolor2:312}],371:[function(b,oe,se){"use strict";var y=b("../../lib");oe.exports=function(x){return y.isPlainObject(x.colorbar)}},{"../../lib":503}],372:[function(b,oe,se){"use strict";oe.exports={moduleType:"component",name:"colorbar",attributes:b("./attributes"),supplyDefaults:b("./defaults"),draw:b("./draw").draw,hasColorbar:b("./has_colorbar")}},{"./attributes":367,"./defaults":369,"./draw":370,"./has_colorbar":371}],373:[function(b,oe,se){"use strict";var y=b("../colorbar/attributes"),x=b("../../lib/regex").counter,M=b("../../lib/sort_object_keys"),_=b("./scales.js").scales;function e(o){return"`"+o+"`"}M(_),oe.exports=function(o,a){o=o||"";var l,i=(a=a||{}).cLetter||"c",v=("onlyIfNumerical"in a||Boolean(o),"noScale"in a?a.noScale:"marker.line"===o),h="showScaleDflt"in a?a.showScaleDflt:"z"===i,s="string"==typeof a.colorscaleDflt?_[a.colorscaleDflt]:null,d=a.editTypeOverride||"",p=o?o+".":"";"colorAttr"in a?l=a.colorAttr:e(p+(l={z:"z",c:"color"}[i]));var f=i+"auto",g=i+"min",m=i+"max",u=i+"mid",w=(e(p+f),e(p+g),e(p+m),{});w[g]=w[m]=void 0;var c={};c[f]=!1;var A={};return"color"===l&&(A.color={valType:"color",arrayOk:!0,editType:d||"style"},a.anim&&(A.color.anim=!0)),A[f]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:w},A[g]={valType:"number",dflt:null,editType:d||"plot",impliedEdits:c},A[m]={valType:"number",dflt:null,editType:d||"plot",impliedEdits:c},A[u]={valType:"number",dflt:null,editType:"calc",impliedEdits:w},A.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1}},A.autocolorscale={valType:"boolean",dflt:!1!==a.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},A.reversescale={valType:"boolean",dflt:!1,editType:"plot"},v||(A.showscale={valType:"boolean",dflt:h,editType:"calc"},A.colorbar=y),a.noColorAxis||(A.coloraxis={valType:"subplotid",regex:x("coloraxis"),dflt:null,editType:"calc"}),A}},{"../../lib/regex":520,"../../lib/sort_object_keys":526,"../colorbar/attributes":367,"./scales.js":381}],374:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../lib"),M=b("./helpers").extractOpts;oe.exports=function(_,e,o){var l=_._fullLayout,i=o.vals,v=o.containerStr,h=v?x.nestedProperty(e,v).get():e,s=M(h),d=!1!==s.auto,p=s.min,f=s.max,g=s.mid,m=function(){return x.aggNums(Math.min,null,i)},u=function(){return x.aggNums(Math.max,null,i)};void 0===p?p=m():d&&(p=h._colorAx&&y(p)?Math.min(p,m()):m()),void 0===f?f=u():d&&(f=h._colorAx&&y(f)?Math.max(f,u()):u()),d&&void 0!==g&&(f-g>g-p?p=g-(f-g):f-g<g-p&&(f=g+(g-p))),p===f&&(p-=.5,f+=.5),s._sync("min",p),s._sync("max",f),s.autocolorscale&&s._sync("colorscale",p*f<0?l.colorscale.diverging:p>=0?l.colorscale.sequential:l.colorscale.sequentialminus)}},{"../../lib":503,"./helpers":377,"fast-isnumeric":190}],375:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./helpers").hasColorscale,M=b("./helpers").extractOpts;oe.exports=function(_,e){function o(d,p){var f=d["_"+p];void 0!==f&&(d[p]=f)}function a(d,p){var f=p.container?y.nestedProperty(d,p.container).get():d;if(f)if(f.coloraxis)f._colorAx=e[f.coloraxis];else{var g=M(f),m=g.auto;(m||void 0===g.min)&&o(f,p.min),(m||void 0===g.max)&&o(f,p.max),g.autocolorscale&&o(f,"colorscale")}}for(var l=0;l<_.length;l++){var i=_[l],v=i._module.colorbar;if(v)if(Array.isArray(v))for(var h=0;h<v.length;h++)a(i,v[h]);else a(i,v);x(i,"marker.line")&&a(i,{container:"marker.line",min:"cmin",max:"cmax"})}for(var s in e._colorAxes)a(e[s],{min:"cmin",max:"cmax"})}},{"../../lib":503,"./helpers":377}],376:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../lib"),M=b("../colorbar/has_colorbar"),_=b("../colorbar/defaults"),e=b("./scales").isValid,o=b("../../registry").traceIs;function a(l,i){var v=i.slice(0,i.length-1);return i?x.nestedProperty(l,v).get()||{}:l}oe.exports=function l(i,v,h,s,d){var p=d.prefix,f=d.cLetter,g="_module"in v,m=a(i,p),u=a(v,p),w=a(v._template||{},p)||{},c=function(){return delete i.coloraxis,delete v.coloraxis,l(i,v,h,s,d)};if(g){var A=h._colorAxes||{},k=s(p+"coloraxis");if(k){var C=o(v,"contour")&&x.nestedProperty(v,"contours.coloring").get()||"heatmap",E=A[k];return void(E?(E[2].push(c),E[0]!==C&&(E[0]=!1,x.warn(["Ignoring coloraxis:",k,"setting","as it is linked to incompatible colorscales."].join(" ")))):A[k]=[C,v,[c]])}}var L=m[f+"min"],D=m[f+"max"],N=y(L)&&y(D)&&L<D;s(p+f+"auto",!N)?s(p+f+"mid"):(s(p+f+"min"),s(p+f+"max"));var F,I,P=m.colorscale,j=w.colorscale;void 0!==P&&(F=!e(P)),void 0!==j&&(F=!e(j)),s(p+"autocolorscale",F),s(p+"colorscale"),s(p+"reversescale"),"marker.line."!==p&&(p&&g&&(I=M(m)),s(p+"showscale",I)&&(p&&w&&(u._template=w),_(m,u,h)))}},{"../../lib":503,"../../registry":638,"../colorbar/defaults":369,"../colorbar/has_colorbar":371,"./scales":381,"fast-isnumeric":190}],377:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("tinycolor2"),M=b("fast-isnumeric"),_=b("../../lib"),e=b("../color"),o=b("./scales").isValid,a=["showscale","autocolorscale","colorscale","reversescale","colorbar"],l=["min","max","mid","auto"];function i(p){var f,g,m,u=p._colorAx,w=u||p,c={};for(g=0;g<a.length;g++)c[m=a[g]]=w[m];if(u)for(f="c",g=0;g<l.length;g++)c[m=l[g]]=w["c"+m];else{var A;for(g=0;g<l.length;g++)((A="c"+(m=l[g]))in w||(A="z"+m)in w)&&(c[m]=w[A]);f=A.charAt(0)}return c._sync=function(k,C){var E=-1!==l.indexOf(k)?f+k:k;w[E]=w["_"+E]=C},c}function v(p){for(var f=i(p),g=f.min,m=f.max,u=f.reversescale?h(f.colorscale):f.colorscale,w=u.length,c=new Array(w),A=new Array(w),k=0;k<w;k++){var C=u[k];c[k]=g+C[0]*(m-g),A[k]=C[1]}return{domain:c,range:A}}function h(p){for(var f=p.length,g=new Array(f),m=f-1,u=0;m>=0;m--,u++){var w=p[m];g[u]=[1-w[0],w[1]]}return g}function s(p,f){f=f||{};for(var g=p.domain,m=p.range,u=m.length,w=new Array(u),c=0;c<u;c++){var A=x(m[c]).toRgb();w[c]=[A.r,A.g,A.b,A.a]}var k,C=y.scale.linear().domain(g).range(w).clamp(!0),E=f.noNumericCheck,L=f.returnArray;return(k=E&&L?C:E?function(D){return d(C(D))}:L?function(D){return M(D)?C(D):x(D).isValid()?D:e.defaultLine}:function(D){return M(D)?d(C(D)):x(D).isValid()?D:e.defaultLine}).domain=C.domain,k.range=function(){return m},k}function d(p){return x({r:p[0],g:p[1],b:p[2],a:p[3]}).toRgbString()}oe.exports={hasColorscale:function(p,f,g){var m=f?_.nestedProperty(p,f).get()||{}:p,u=m[g||"color"],w=!1;if(_.isArrayOrTypedArray(u))for(var c=0;c<u.length;c++)if(M(u[c])){w=!0;break}return _.isPlainObject(m)&&(w||!0===m.showscale||M(m.cmin)&&M(m.cmax)||o(m.colorscale)||_.isPlainObject(m.colorbar))},extractOpts:i,extractScale:v,flipScale:h,makeColorScaleFunc:s,makeColorScaleFuncFromTrace:function(p,f){return s(v(p),f)}}},{"../../lib":503,"../color":366,"./scales":381,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],378:[function(b,oe,se){"use strict";var y=b("./scales"),x=b("./helpers");oe.exports={moduleType:"component",name:"colorscale",attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),handleDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),calc:b("./calc"),scales:y.scales,defaultScale:y.defaultScale,getScale:y.get,isValidScale:y.isValid,hasColorscale:x.hasColorscale,extractOpts:x.extractOpts,extractScale:x.extractScale,flipScale:x.flipScale,makeColorScaleFunc:x.makeColorScaleFunc,makeColorScaleFuncFromTrace:x.makeColorScaleFuncFromTrace}},{"./attributes":373,"./calc":374,"./cross_trace_defaults":375,"./defaults":376,"./helpers":377,"./layout_attributes":379,"./layout_defaults":380,"./scales":381}],379:[function(b,oe,se){"use strict";var y=b("../../lib/extend").extendFlat,x=b("./attributes"),M=b("./scales").scales;oe.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:M.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:M.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:M.RdBu,editType:"calc"}},coloraxis:y({_isSubplotObj:!0,editType:"calc"},x("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":493,"./attributes":373,"./scales":381}],380:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plot_api/plot_template"),M=b("./layout_attributes"),_=b("./defaults");oe.exports=function(e,o){function a(f,g){return y.coerce(e,o,M,f,g)}a("colorscale.sequential"),a("colorscale.sequentialminus"),a("colorscale.diverging");var l,i,v=o._colorAxes;function h(f,g){return y.coerce(l,i,M.coloraxis,f,g)}for(var s in v){var d=v[s];if(d[0])l=e[s]||{},(i=x.newContainer(o,s,"coloraxis"))._name=s,_(l,i,o,h,{prefix:"",cLetter:"c"});else{for(var p=0;p<d[2].length;p++)d[2][p]();delete o._colorAxes[s]}}}},{"../../lib":503,"../../plot_api/plot_template":543,"./defaults":376,"./layout_attributes":379}],381:[function(b,oe,se){"use strict";var y=b("tinycolor2"),x={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},M=x.RdBu;function _(e){var o=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var a=0;a<e.length;a++){var l=e[a];if(2!==l.length||+l[0]<o||!y(l[1]).isValid())return!1;o=+l[0]}return!0}oe.exports={scales:x,defaultScale:M,get:function(e,o){if(o||(o=M),!e)return o;function a(){try{e=x[e]||JSON.parse(e)}catch(l){e=o}}return"string"==typeof e&&(a(),"string"==typeof e&&a()),_(e)?e:o},isValid:function(e){return void 0!==x[e]||_(e)}}},{tinycolor2:312}],382:[function(b,oe,se){"use strict";oe.exports=function(y,x,M,_,e){var o=(y-M)/(_-M),a=o+x/(_-M),l=(o+a)/2;return"left"===e||"bottom"===e?o:"center"===e||"middle"===e?l:"right"===e||"top"===e?a:o<2/3-l?o:a>4/3-l?a:l}},{}],383:[function(b,oe,se){"use strict";var y=b("../../lib"),x=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];oe.exports=function(M,_,e,o){return M="left"===e?0:"center"===e?1:"right"===e?2:y.constrain(Math.floor(3*M),0,2),_="bottom"===o?0:"middle"===o?1:"top"===o?2:y.constrain(Math.floor(3*_),0,2),x[_][M]}},{"../../lib":503}],384:[function(b,oe,se){"use strict";se.selectMode=function(y){return"lasso"===y||"select"===y},se.drawMode=function(y){return"drawclosedpath"===y||"drawopenpath"===y||"drawline"===y||"drawrect"===y||"drawcircle"===y},se.openMode=function(y){return"drawline"===y||"drawopenpath"===y},se.rectMode=function(y){return"select"===y||"drawline"===y||"drawrect"===y||"drawcircle"===y},se.freeMode=function(y){return"lasso"===y||"drawclosedpath"===y||"drawopenpath"===y},se.selectingOrDrawing=function(y){return se.freeMode(y)||se.rectMode(y)}},{}],385:[function(b,oe,se){"use strict";var y=b("mouse-event-offset"),x=b("has-hover"),M=b("has-passive-events"),_=b("../../lib").removeElement,e=b("../../plots/cartesian/constants"),o=oe.exports={};o.align=b("./align"),o.getCursor=b("./cursor");var a=b("./unhover");function l(){var v=document.createElement("div");v.className="dragcover";var h=v.style;return h.position="fixed",h.left=0,h.right=0,h.top=0,h.bottom=0,h.zIndex=999999999,h.background="none",document.body.appendChild(v),v}function i(v){return y(v.changedTouches?v.changedTouches[0]:v,document.body)}o.unhover=a.wrapped,o.unhoverRaw=a.raw,o.init=function(v){var h,s,d,p,f,g,m,u,w=v.gd,c=1,A=w._context.doubleClickDelay,k=v.element;w._mouseDownTime||(w._mouseDownTime=0),k.style.pointerEvents="all",k.onmousedown=E,M?(k._ontouchstart&&k.removeEventListener("touchstart",k._ontouchstart),k._ontouchstart=E,k.addEventListener("touchstart",E,{passive:!1})):k.ontouchstart=E;var C=v.clampFn||function(N,F,I){return Math.abs(N)<I&&(N=0),Math.abs(F)<I&&(F=0),[N,F]};function E(N){w._dragged=!1,w._dragging=!0;var F=i(N);h=F[0],s=F[1],m=N.target,g=N,u=2===N.buttons||N.ctrlKey,void 0===N.clientX&&void 0===N.clientY&&(N.clientX=h,N.clientY=s),(d=(new Date).getTime())-w._mouseDownTime<A?c+=1:(c=1,w._mouseDownTime=d),v.prepFn&&v.prepFn(N,h,s),x&&!u?(f=l()).style.cursor=window.getComputedStyle(k).cursor:x||(f=document,p=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(k).cursor),document.addEventListener("mouseup",D),document.addEventListener("touchend",D),!1!==v.dragmode&&(N.preventDefault(),document.addEventListener("mousemove",L),document.addEventListener("touchmove",L,{passive:!1}))}function L(N){N.preventDefault();var F=i(N),P=C(F[0]-h,F[1]-s,v.minDrag||e.MINDRAG),j=P[0],V=P[1];(j||V)&&(w._dragged=!0,o.unhover(w,N)),w._dragged&&v.moveFn&&!u&&(w._dragdata={element:k,dx:j,dy:V},v.moveFn(j,V))}function D(N){if(delete w._dragdata,!1!==v.dragmode&&(N.preventDefault(),document.removeEventListener("mousemove",L),document.removeEventListener("touchmove",L)),document.removeEventListener("mouseup",D),document.removeEventListener("touchend",D),x?_(f):p&&(f.documentElement.style.cursor=p,p=null),w._dragging){if(w._dragging=!1,(new Date).getTime()-w._mouseDownTime>A&&(c=Math.max(c-1,1)),w._dragged)v.doneFn&&v.doneFn();else if(v.clickFn&&v.clickFn(c,g),!u){var F;try{F=new MouseEvent("click",N)}catch(P){var I=i(N);(F=document.createEvent("MouseEvents")).initMouseEvent("click",N.bubbles,N.cancelable,N.view,N.detail,N.screenX,N.screenY,I[0],I[1],N.ctrlKey,N.altKey,N.shiftKey,N.metaKey,N.button,N.relatedTarget)}m.dispatchEvent(F)}w._dragging=!1,w._dragged=!1}else w._dragged=!1}},o.coverSlip=l},{"../../lib":503,"../../plots/cartesian/constants":561,"./align":382,"./cursor":383,"./unhover":386,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],386:[function(b,oe,se){"use strict";var y=b("../../lib/events"),x=b("../../lib/throttle"),M=b("../../lib/dom").getGraphDiv,_=b("../fx/constants"),e=oe.exports={};e.wrapped=function(o,a,l){(o=M(o))._fullLayout&&x.clear(o._fullLayout._uid+_.HOVERID),e.raw(o,a,l)},e.raw=function(o,a){var l=o._fullLayout,i=o._hoverdata;a||(a={}),a.target&&!o._dragged&&!1===y.triggerHandler(o,"plotly_beforehover",a)||(l._hoverlayer.selectAll("g").remove(),l._hoverlayer.selectAll("line").remove(),l._hoverlayer.selectAll("circle").remove(),o._hoverdata=void 0,a.target&&i&&o.emit("plotly_unhover",{event:a,points:i}))}},{"../../lib/dom":491,"../../lib/events":492,"../../lib/throttle":530,"../fx/constants":400}],387:[function(b,oe,se){"use strict";se.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},se.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],388:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../lib"),M=x.numberFormat,_=b("fast-isnumeric"),e=b("tinycolor2"),o=b("../../registry"),a=b("../color"),l=b("../colorscale"),i=x.strTranslate,v=b("../../lib/svg_text_utils"),h=b("../../constants/xmlns_namespaces"),s=b("../../constants/alignment").LINE_SPACING,d=b("../../constants/interactions").DESELECTDIM,p=b("../../traces/scatter/subtypes"),f=b("../../traces/scatter/make_bubble_size_func"),g=b("../../components/fx/helpers").appendArrayPointValue,m=oe.exports={};function u(X,K,ie){var q=K.fillpattern,U=q&&m.getPatternAttr(q.shape,0,"");if(U){var W=m.getPatternAttr(q.bgcolor,0,null),ae=m.getPatternAttr(q.fgcolor,0,null),G=q.fgopacity,te=m.getPatternAttr(q.size,0,8),ne=m.getPatternAttr(q.solidity,0,.3);m.pattern(X,"point",ie,K.uid,U,te,ne,void 0,q.fillmode,W,ae,G)}else K.fillcolor&&X.call(a.fill,K.fillcolor)}m.font=function(X,K,ie,q){x.isPlainObject(K)&&(q=K.color,ie=K.size,K=K.family),K&&X.style("font-family",K),ie+1&&X.style("font-size",ie+"px"),q&&X.call(a.fill,q)},m.setPosition=function(X,K,ie){X.attr("x",K).attr("y",ie)},m.setSize=function(X,K,ie){X.attr("width",K).attr("height",ie)},m.setRect=function(X,K,ie,q,U){X.call(m.setPosition,K,ie).call(m.setSize,q,U)},m.translatePoint=function(X,K,ie,q){var U=ie.c2p(X.x),W=q.c2p(X.y);return!!(_(U)&&_(W)&&K.node())&&("text"===K.node().nodeName?K.attr("x",U).attr("y",W):K.attr("transform",i(U,W)),!0)},m.translatePoints=function(X,K,ie){X.each(function(q){var U=y.select(this);m.translatePoint(q,U,K,ie)})},m.hideOutsideRangePoint=function(X,K,ie,q,U,W){K.attr("display",ie.isPtWithinRange(X,U)&&q.isPtWithinRange(X,W)?null:"none")},m.hideOutsideRangePoints=function(X,K){if(K._hasClipOnAxisFalse){var ie=K.xaxis,q=K.yaxis;X.each(function(U){var W=U[0].trace,ae=W.xcalendar,G=W.ycalendar,te=o.traceIs(W,"bar-like")?".bartext":".point,.textpoint";X.selectAll(te).each(function(ne){m.hideOutsideRangePoint(ne,y.select(this),ie,q,ae,G)})})}},m.crispRound=function(X,K,ie){return K&&_(K)?X._context.staticPlot?K:K<1?1:Math.round(K):ie||0},m.singleLineStyle=function(X,K,ie,q,U){K.style("fill","none");var W=(((X||[])[0]||{}).trace||{}).line||{},ae=ie||W.width||0,G=U||W.dash||"";a.stroke(K,q||W.color),m.dashLine(K,G,ae)},m.lineGroupStyle=function(X,K,ie,q){X.style("fill","none").each(function(U){var W=(((U||[])[0]||{}).trace||{}).line||{},ae=K||W.width||0,G=q||W.dash||"";y.select(this).call(a.stroke,ie||W.color).call(m.dashLine,G,ae)})},m.dashLine=function(X,K,ie){K=m.dashStyle(K,ie=+ie||0),X.style({"stroke-dasharray":K,"stroke-width":ie+"px"})},m.dashStyle=function(X,K){K=+K||1;var ie=Math.max(K,3);return"solid"===X?X="":"dot"===X?X=ie+"px,"+ie+"px":"dash"===X?X=3*ie+"px,"+3*ie+"px":"longdash"===X?X=5*ie+"px,"+5*ie+"px":"dashdot"===X?X=3*ie+"px,"+ie+"px,"+ie+"px,"+ie+"px":"longdashdot"===X&&(X=5*ie+"px,"+2*ie+"px,"+ie+"px,"+2*ie+"px"),X},m.singleFillStyle=function(X,K){var ie=y.select(X.node());u(X,((ie.data()[0]||[])[0]||{}).trace||{},K)},m.fillGroupStyle=function(X,K){X.style("stroke-width",0).each(function(ie){var q=y.select(this);ie[0].trace&&u(q,ie[0].trace,K)})};var w=b("./symbol_defs");m.symbolNames=[],m.symbolFuncs=[],m.symbolNeedLines={},m.symbolNoDot={},m.symbolNoFill={},m.symbolList=[],Object.keys(w).forEach(function(X){var K=w[X],ie=K.n;m.symbolList.push(ie,String(ie),X,ie+100,String(ie+100),X+"-open"),m.symbolNames[ie]=X,m.symbolFuncs[ie]=K.f,K.needLine&&(m.symbolNeedLines[ie]=!0),K.noDot?m.symbolNoDot[ie]=!0:m.symbolList.push(ie+200,String(ie+200),X+"-dot",ie+300,String(ie+300),X+"-open-dot"),K.noFill&&(m.symbolNoFill[ie]=!0)});var c=m.symbolNames.length;function A(X,K){return m.symbolFuncs[X%100](K)+(X>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}m.symbolNumber=function(X){if(_(X))X=+X;else if("string"==typeof X){var K=0;X.indexOf("-open")>0&&(K=100,X=X.replace("-open","")),X.indexOf("-dot")>0&&(K+=200,X=X.replace("-dot","")),(X=m.symbolNames.indexOf(X))>=0&&(X+=K)}return X%100>=c||X>=400?0:Math.floor(Math.max(X,0))};var k={x1:1,x2:0,y1:0,y2:0},C={x1:0,x2:0,y1:1,y2:0},E=M("~f"),L={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:k},horizontalreversed:{node:"linearGradient",attrs:k,reversed:!0},vertical:{node:"linearGradient",attrs:C},verticalreversed:{node:"linearGradient",attrs:C,reversed:!0}};m.gradient=function(X,K,ie,q,U,W){for(var ae=U.length,G=L[q],te=new Array(ae),ne=0;ne<ae;ne++)G.reversed?te[ae-1-ne]=[E(100*(1-U[ne][0])),U[ne][1]]:te[ne]=[E(100*U[ne][0]),U[ne][1]];var le=K._fullLayout,ue="g"+le._uid+"-"+ie,pe=le._defs.select(".gradients").selectAll("#"+ue).data([q+te.join(";")],x.identity);pe.exit().remove(),pe.enter().append(G.node).each(function(){var de=y.select(this);G.attrs&&de.attr(G.attrs),de.attr("id",ue);var _e=de.selectAll("stop").data(te);_e.exit().remove(),_e.enter().append("stop"),_e.each(function(me){var we=e(me[1]);y.select(this).attr({offset:me[0]+"%","stop-color":a.tinyRGB(we),"stop-opacity":we.getAlpha()})})}),X.style(W,Y(ue,K)).style(W+"-opacity",null),X.classed("gradient_filled",!0)},m.pattern=function(X,K,ie,q,U,W,ae,G,te,ne,le,ue){var pe="legend"===K;G&&("overlay"===te?le=a.contrast(ne=G):(ne=void 0,le=G));var de,_e,me,we,De,Le,Ie,je,Me,Pe=ie._fullLayout,Re="p"+Pe._uid+"-"+q,Ue={};switch(U){case"/":de=W*Math.sqrt(2),_e=W*Math.sqrt(2),Le="path",Ue={d:me="M-"+de/4+","+_e/4+"l"+de/2+",-"+_e/2+"M0,"+_e+"L"+de+",0M"+de/4*3+","+_e/4*5+"l"+de/2+",-"+_e/2,opacity:ue,stroke:le,"stroke-width":(we=ae*W)+"px"};break;case"\\":de=W*Math.sqrt(2),_e=W*Math.sqrt(2),Le="path",Ue={d:me="M"+de/4*3+",-"+_e/4+"l"+de/2+","+_e/2+"M0,0L"+de+","+_e+"M-"+de/4+","+_e/4*3+"l"+de/2+","+_e/2,opacity:ue,stroke:le,"stroke-width":(we=ae*W)+"px"};break;case"x":de=W*Math.sqrt(2),_e=W*Math.sqrt(2),me="M-"+de/4+","+_e/4+"l"+de/2+",-"+_e/2+"M0,"+_e+"L"+de+",0M"+de/4*3+","+_e/4*5+"l"+de/2+",-"+_e/2+"M"+de/4*3+",-"+_e/4+"l"+de/2+","+_e/2+"M0,0L"+de+","+_e+"M-"+de/4+","+_e/4*3+"l"+de/2+","+_e/2,we=W-W*Math.sqrt(1-ae),Le="path",Ue={d:me,opacity:ue,stroke:le,"stroke-width":we+"px"};break;case"|":Le="path",Le="path",Ue={d:me="M"+(de=W)/2+",0L"+de/2+","+(_e=W),opacity:ue,stroke:le,"stroke-width":(we=ae*W)+"px"};break;case"-":Le="path",Le="path",Ue={d:me="M0,"+(_e=W)/2+"L"+(de=W)+","+_e/2,opacity:ue,stroke:le,"stroke-width":(we=ae*W)+"px"};break;case"+":Le="path",me="M"+(de=W)/2+",0L"+de/2+","+(_e=W)+"M0,"+_e/2+"L"+de+","+_e/2,we=W-W*Math.sqrt(1-ae),Le="path",Ue={d:me,opacity:ue,stroke:le,"stroke-width":we+"px"};break;case".":de=W,_e=W,ae<Math.PI/4?De=Math.sqrt(ae*W*W/Math.PI):(Ie=ae,je=Math.PI/4,1,De=(Me=W/2)+(W/Math.sqrt(2)-Me)*(Ie-je)/(1-je)),Le="circle",Ue={cx:de/2,cy:_e/2,r:De,opacity:ue,fill:le}}var qe=[U||"noSh",ne||"noBg",le||"noFg",W,ae].join(";"),Xe=Pe._defs.select(".patterns").selectAll("#"+Re).data([qe],x.identity);Xe.exit().remove(),Xe.enter().append("pattern").each(function(){var lt=y.select(this);if(lt.attr({id:Re,width:de+"px",height:_e+"px",patternUnits:"userSpaceOnUse",patternTransform:pe?"scale(0.8)":""}),ne){var He=lt.selectAll("rect").data([0]);He.exit().remove(),He.enter().append("rect").attr({width:de+"px",height:_e+"px",fill:ne})}var $e=lt.selectAll(Le).data([0]);$e.exit().remove(),$e.enter().append(Le).attr(Ue)}),X.style("fill",Y(Re,ie)).style("fill-opacity",null),X.classed("pattern_filled",!0)},m.initGradients=function(X){x.ensureSingle(X._fullLayout._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),y.select(X).selectAll(".gradient_filled").classed("gradient_filled",!1)},m.initPatterns=function(X){x.ensureSingle(X._fullLayout._defs,"g","patterns").selectAll("pattern").remove(),y.select(X).selectAll(".pattern_filled").classed("pattern_filled",!1)},m.getPatternAttr=function(X,K,ie){return X&&x.isArrayOrTypedArray(X)?K<X.length?X[K]:ie:X},m.pointStyle=function(X,K,ie){if(X.size()){var q=m.makePointStyleFns(K);X.each(function(U){m.singlePointStyle(U,y.select(this),K,q,ie)})}},m.singlePointStyle=function(X,K,ie,q,U){var W=ie.marker,ae=W.line;if(K.style("opacity",q.selectedOpacityFn?q.selectedOpacityFn(X):void 0===X.mo?W.opacity:X.mo),q.ms2mrc){var G;G="various"===X.ms||"various"===W.size?3:q.ms2mrc(X.ms),X.mrc=G,q.selectedSizeFn&&(G=X.mrc=q.selectedSizeFn(X));var te=m.symbolNumber(X.mx||W.symbol)||0;X.om=te%200>=100,K.attr("d",A(te,G))}var ne,le,ue,pe=!1;if(X.so?(ue=ae.outlierwidth,le=ae.outliercolor,ne=W.outliercolor):(ue=(X.mlw+1||(ae||{}).width+1||(X.trace?(X.trace.marker.line||{}).width:0)+1)-1||0,le="mlc"in X?X.mlcc=q.lineScale(X.mlc):x.isArrayOrTypedArray(ae.color)?a.defaultLine:ae.color,x.isArrayOrTypedArray(W.color)&&(ne=a.defaultLine,pe=!0),ne="mc"in X?X.mcc=q.markerScale(X.mc):W.color||"rgba(0,0,0,0)",q.selectedColorFn&&(ne=q.selectedColorFn(X))),X.om)K.call(a.stroke,ne).style({"stroke-width":(ue||1)+"px",fill:"none"});else{K.style("stroke-width",(X.isBlank?0:ue)+"px");var _e=W.gradient,me=X.mgt;me?pe=!0:me=_e&&_e.type,x.isArrayOrTypedArray(me)&&(L[me=me[0]]||(me=0));var we=W.pattern,De=we&&m.getPatternAttr(we.shape,X.i,"");if(me&&"none"!==me){var Le=X.mgc;Le?pe=!0:Le=_e.color;var Ie=ie.uid;pe&&(Ie+="-"+X.i),m.gradient(K,U,Ie,me,[[0,Le],[1,ne]],"fill")}else if(De){var je=m.getPatternAttr(we.bgcolor,X.i,null),ye=m.getPatternAttr(we.fgcolor,X.i,null),Me=we.fgopacity,Oe=m.getPatternAttr(we.size,X.i,8),Pe=m.getPatternAttr(we.solidity,X.i,.3),Re=X.mcc||x.isArrayOrTypedArray(we.shape)||x.isArrayOrTypedArray(we.bgcolor)||x.isArrayOrTypedArray(we.size)||x.isArrayOrTypedArray(we.solidity),Ue=ie.uid;Re&&(Ue+="-"+X.i),m.pattern(K,"point",U,Ue,De,Oe,Pe,X.mcc,we.fillmode,je,ye,Me)}else a.fill(K,ne);ue&&a.stroke(K,le)}},m.makePointStyleFns=function(X){var K={},ie=X.marker;return K.markerScale=m.tryColorscale(ie,""),K.lineScale=m.tryColorscale(ie,"line"),o.traceIs(X,"symbols")&&(K.ms2mrc=p.isBubble(X)?f(X):function(){return(ie.size||6)/2}),X.selectedpoints&&x.extendFlat(K,m.makeSelectedPointStyleFns(X)),K},m.makeSelectedPointStyleFns=function(X){var K={},U=X.marker||{},W=(X.selected||{}).marker||{},ae=(X.unselected||{}).marker||{},te=W.opacity,ne=ae.opacity,le=void 0!==te,ue=void 0!==ne;(x.isArrayOrTypedArray(U.opacity)||le||ue)&&(K.selectedOpacityFn=function(je){var ye=void 0===je.mo?U.opacity:je.mo;return je.selected?le?te:ye:ue?ne:d*ye});var pe=U.color,de=W.color,_e=ae.color;(de||_e)&&(K.selectedColorFn=function(je){var ye=je.mcc||pe;return je.selected?de||ye:_e||ye});var me=U.size,we=W.size,De=ae.size,Le=void 0!==we,Ie=void 0!==De;return o.traceIs(X,"symbols")&&(Le||Ie)&&(K.selectedSizeFn=function(je){var ye=je.mrc||me/2;return je.selected?Le?we/2:ye:Ie?De/2:ye}),K},m.makeSelectedTextStyleFns=function(X){var K={},G=(X.textfont||{}).color,te=((X.selected||{}).textfont||{}).color,ne=((X.unselected||{}).textfont||{}).color;return K.selectedTextColorFn=function(le){var ue=le.tc||G;return le.selected?te||ue:ne||(te?ue:a.addOpacity(ue,d))},K},m.selectedPointStyle=function(X,K){if(X.size()&&K.selectedpoints){var ie=m.makeSelectedPointStyleFns(K),q=K.marker||{},U=[];ie.selectedOpacityFn&&U.push(function(W,ae){W.style("opacity",ie.selectedOpacityFn(ae))}),ie.selectedColorFn&&U.push(function(W,ae){a.fill(W,ie.selectedColorFn(ae))}),ie.selectedSizeFn&&U.push(function(W,ae){var G=ae.mx||q.symbol||0,te=ie.selectedSizeFn(ae);W.attr("d",A(m.symbolNumber(G),te)),ae.mrc2=te}),U.length&&X.each(function(W){for(var ae=y.select(this),G=0;G<U.length;G++)U[G](ae,W)})}},m.tryColorscale=function(X,K){var ie=K?x.nestedProperty(X,K).get():X;return ie&&(ie.colorscale||ie._colorAx)&&x.isArrayOrTypedArray(ie.color)?l.makeColorScaleFuncFromTrace(ie):x.identity};var D={start:1,end:-1,middle:0,bottom:1,top:-1};function N(X,K,ie,q,U){var W=y.select(X.node().parentNode),ae=-1!==K.indexOf("top")?"top":-1!==K.indexOf("bottom")?"bottom":"middle",G=-1!==K.indexOf("left")?"end":-1!==K.indexOf("right")?"start":"middle",te=q?q/.8+1:0,ne=(v.lineCount(X)-1)*s+1,le=D[G]*te,ue=.75*ie+D[ae]*te+(D[ae]-1)*ne*ie/2;X.attr("text-anchor",G),U||W.attr("transform",i(le,ue))}function F(X,K){var ie=X.ts||K.textfont.size;return _(ie)&&ie>0?ie:0}function I(X,K,ie,q){var U=X[0]-K[0],W=X[1]-K[1],ae=ie[0]-K[0],G=ie[1]-K[1],te=Math.pow(U*U+W*W,.25),ne=Math.pow(ae*ae+G*G,.25),le=(ne*ne*U-te*te*ae)*q,ue=(ne*ne*W-te*te*G)*q,pe=3*ne*(te+ne),de=3*te*(te+ne);return[[y.round(K[0]+(pe&&le/pe),2),y.round(K[1]+(pe&&ue/pe),2)],[y.round(K[0]-(de&&le/de),2),y.round(K[1]-(de&&ue/de),2)]]}m.textPointStyle=function(X,K,ie){if(X.size()){var q;if(K.selectedpoints){var U=m.makeSelectedTextStyleFns(K);q=U.selectedTextColorFn}var W=K.texttemplate,ae=ie._fullLayout;X.each(function(G){var te=y.select(this),ne=W?x.extractOption(G,K,"txt","texttemplate"):x.extractOption(G,K,"tx","text");if(ne||0===ne){if(W){var le=K._module.formatLabels,ue=le?le(G,K,ae):{},pe={};g(pe,K,G.i),ne=x.texttemplateString(ne,ue,ae._d3locale,pe,G,K._meta||{})}var _e=G.tp||K.textposition,me=F(G,K),we=q?q(G):G.tc||K.textfont.color;te.call(m.font,G.tf||K.textfont.family,me,we).text(ne).call(v.convertToTspans,ie).call(N,_e,me,G.mrc)}else te.remove()})}},m.selectedTextStyle=function(X,K){if(X.size()&&K.selectedpoints){var ie=m.makeSelectedTextStyleFns(K);X.each(function(q){var U=y.select(this),W=ie.selectedTextColorFn(q),ae=q.tp||K.textposition,G=F(q,K);a.fill(U,W);var te=o.traceIs(K,"bar-like");N(U,ae,G,q.mrc2||q.mrc,te)})}},m.smoothopen=function(X,K){if(X.length<3)return"M"+X.join("L");var ie,q="M"+X[0],U=[];for(ie=1;ie<X.length-1;ie++)U.push(I(X[ie-1],X[ie],X[ie+1],K));for(q+="Q"+U[0][0]+" "+X[1],ie=2;ie<X.length-1;ie++)q+="C"+U[ie-2][1]+" "+U[ie-1][0]+" "+X[ie];return q+"Q"+U[X.length-3][1]+" "+X[X.length-1]},m.smoothclosed=function(X,K){if(X.length<3)return"M"+X.join("L")+"Z";var ie,q="M"+X[0],U=X.length-1,W=[I(X[U],X[0],X[1],K)];for(ie=1;ie<U;ie++)W.push(I(X[ie-1],X[ie],X[ie+1],K));for(W.push(I(X[U-1],X[U],X[0],K)),ie=1;ie<=U;ie++)q+="C"+W[ie-1][1]+" "+W[ie][0]+" "+X[ie];return q+"C"+W[U][1]+" "+W[0][0]+" "+X[0]+"Z"};var P={hv:function(X,K){return"H"+y.round(K[0],2)+"V"+y.round(K[1],2)},vh:function(X,K){return"V"+y.round(K[1],2)+"H"+y.round(K[0],2)},hvh:function(X,K){return"H"+y.round((X[0]+K[0])/2,2)+"V"+y.round(K[1],2)+"H"+y.round(K[0],2)},vhv:function(X,K){return"V"+y.round((X[1]+K[1])/2,2)+"H"+y.round(K[0],2)+"V"+y.round(K[1],2)}},j=function(X,K){return"L"+y.round(K[0],2)+","+y.round(K[1],2)};m.steps=function(X){var K=P[X]||j;return function(ie){for(var q="M"+y.round(ie[0][0],2)+","+y.round(ie[0][1],2),U=1;U<ie.length;U++)q+=K(ie[U-1],ie[U]);return q}},m.makeTester=function(){var X=x.ensureSingleById(y.select("body"),"svg","js-plotly-tester",function(ie){ie.attr(h.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),K=x.ensureSingle(X,"path","js-reference-point",function(ie){ie.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});m.tester=X,m.testref=K},m.savedBBoxes={};var V=0;function Z(X){var K=X.getAttribute("data-unformatted");if(null!==K)return K+X.getAttribute("data-math")+X.getAttribute("text-anchor")+X.getAttribute("style")}function Y(X,K){if(!X)return null;var ie=K._context,q=ie._exportedPlot?"":ie._baseUrl||"";return q?"url('"+q+"#"+X+"')":"url(#"+X+")"}m.bBox=function(X,K,ie){var q,U,W;if(ie||(ie=Z(X)),ie){if(q=m.savedBBoxes[ie])return x.extendFlat({},q)}else if(1===X.childNodes.length){var ae=X.childNodes[0];if(ie=Z(ae)){var G=+ae.getAttribute("x")||0,te=+ae.getAttribute("y")||0,ne=ae.getAttribute("transform");if(!ne){var le=m.bBox(ae,!1,ie);return G&&(le.left+=G,le.right+=G),te&&(le.top+=te,le.bottom+=te),le}if(q=m.savedBBoxes[ie+="~"+G+"~"+te+"~"+ne])return x.extendFlat({},q)}}K?U=X:(W=m.tester.node(),U=X.cloneNode(!0),W.appendChild(U)),y.select(U).attr("transform",null).call(v.positionText,0,0);var ue=U.getBoundingClientRect(),pe=m.testref.node().getBoundingClientRect();K||W.removeChild(U);var de={height:ue.height,width:ue.width,left:ue.left-pe.left,top:ue.top-pe.top,right:ue.right-pe.left,bottom:ue.bottom-pe.top};return V>=1e4&&(m.savedBBoxes={},V=0),ie&&(m.savedBBoxes[ie]=de),V++,x.extendFlat({},de)},m.setClipUrl=function(X,K,ie){X.attr("clip-path",Y(K,ie))},m.getTranslate=function(X){var K=(X[X.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(ie,q,U){return[q,U].join(" ")}).split(" ");return{x:+K[0]||0,y:+K[1]||0}},m.setTranslate=function(X,K,ie){var U=X.attr?"attr":"setAttribute",W=X[X.attr?"attr":"getAttribute"]("transform")||"";return K=K||0,ie=ie||0,W=W.replace(/(\btranslate\(.*?\);?)/,"").trim(),W=(W+=i(K,ie)).trim(),X[U]("transform",W),W},m.getScale=function(X){var K=(X[X.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(ie,q,U){return[q,U].join(" ")}).split(" ");return{x:+K[0]||1,y:+K[1]||1}},m.setScale=function(X,K,ie){var U=X.attr?"attr":"setAttribute",W=X[X.attr?"attr":"getAttribute"]("transform")||"";return K=K||1,ie=ie||1,W=W.replace(/(\bscale\(.*?\);?)/,"").trim(),W=(W+="scale("+K+","+ie+")").trim(),X[U]("transform",W),W};var ee=/\s*sc.*/;m.setPointGroupScale=function(X,K,ie){if(K=K||1,ie=ie||1,X){var q=1===K&&1===ie?"":"scale("+K+","+ie+")";X.each(function(){var U=(this.getAttribute("transform")||"").replace(ee,"");U=(U+=q).trim(),this.setAttribute("transform",U)})}};var re=/translate\([^)]*\)\s*$/;m.setTextPointsScale=function(X,K,ie){X&&X.each(function(){var q,U=y.select(this),W=U.select("text");if(W.node()){var ae=parseFloat(W.attr("x")||0),G=parseFloat(W.attr("y")||0),te=(U.attr("transform")||"").match(re);q=1===K&&1===ie?[]:[i(ae,G),"scale("+K+","+ie+")",i(-ae,-G)],te&&q.push(te),U.attr("transform",q.join(""))}})}},{"../../components/fx/helpers":402,"../../constants/alignment":471,"../../constants/interactions":478,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../registry":638,"../../traces/scatter/make_bubble_size_func":944,"../../traces/scatter/subtypes":952,"../color":366,"../colorscale":378,"./symbol_defs":389,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],389:[function(b,oe,se){"use strict";var y=b("@plotly/d3");oe.exports={circle:{n:0,f:function(x){var M=y.round(x,2);return"M"+M+",0A"+M+","+M+" 0 1,1 0,-"+M+"A"+M+","+M+" 0 0,1 "+M+",0Z"}},square:{n:1,f:function(x){var M=y.round(x,2);return"M"+M+","+M+"H-"+M+"V-"+M+"H"+M+"Z"}},diamond:{n:2,f:function(x){var M=y.round(1.3*x,2);return"M"+M+",0L0,"+M+"L-"+M+",0L0,-"+M+"Z"}},cross:{n:3,f:function(x){var M=y.round(.4*x,2),_=y.round(1.2*x,2);return"M"+_+","+M+"H"+M+"V"+_+"H-"+M+"V"+M+"H-"+_+"V-"+M+"H-"+M+"V-"+_+"H"+M+"V-"+M+"H"+_+"Z"}},x:{n:4,f:function(x){var M=y.round(.8*x/Math.sqrt(2),2),_="l"+M+","+M,e="l"+M+",-"+M,o="l-"+M+",-"+M,a="l-"+M+","+M;return"M0,"+M+_+e+o+e+o+a+o+a+_+a+_+"Z"}},"triangle-up":{n:5,f:function(x){var M=y.round(2*x/Math.sqrt(3),2);return"M-"+M+","+y.round(x/2,2)+"H"+M+"L0,-"+y.round(x,2)+"Z"}},"triangle-down":{n:6,f:function(x){var M=y.round(2*x/Math.sqrt(3),2);return"M-"+M+",-"+y.round(x/2,2)+"H"+M+"L0,"+y.round(x,2)+"Z"}},"triangle-left":{n:7,f:function(x){var M=y.round(2*x/Math.sqrt(3),2);return"M"+y.round(x/2,2)+",-"+M+"V"+M+"L-"+y.round(x,2)+",0Z"}},"triangle-right":{n:8,f:function(x){var M=y.round(2*x/Math.sqrt(3),2);return"M-"+y.round(x/2,2)+",-"+M+"V"+M+"L"+y.round(x,2)+",0Z"}},"triangle-ne":{n:9,f:function(x){var M=y.round(.6*x,2),_=y.round(1.2*x,2);return"M-"+_+",-"+M+"H"+M+"V"+_+"Z"}},"triangle-se":{n:10,f:function(x){var M=y.round(.6*x,2),_=y.round(1.2*x,2);return"M"+M+",-"+_+"V"+M+"H-"+_+"Z"}},"triangle-sw":{n:11,f:function(x){var M=y.round(.6*x,2),_=y.round(1.2*x,2);return"M"+_+","+M+"H-"+M+"V-"+_+"Z"}},"triangle-nw":{n:12,f:function(x){var M=y.round(.6*x,2),_=y.round(1.2*x,2);return"M-"+M+","+_+"V-"+M+"H"+_+"Z"}},pentagon:{n:13,f:function(x){var M=y.round(.951*x,2),_=y.round(.588*x,2),e=y.round(-x,2),o=y.round(-.309*x,2);return"M"+M+","+o+"L"+_+","+y.round(.809*x,2)+"H-"+_+"L-"+M+","+o+"L0,"+e+"Z"}},hexagon:{n:14,f:function(x){var M=y.round(x,2),_=y.round(x/2,2),e=y.round(x*Math.sqrt(3)/2,2);return"M"+e+",-"+_+"V"+_+"L0,"+M+"L-"+e+","+_+"V-"+_+"L0,-"+M+"Z"}},hexagon2:{n:15,f:function(x){var M=y.round(x,2),_=y.round(x/2,2),e=y.round(x*Math.sqrt(3)/2,2);return"M-"+_+","+e+"H"+_+"L"+M+",0L"+_+",-"+e+"H-"+_+"L-"+M+",0Z"}},octagon:{n:16,f:function(x){var M=y.round(.924*x,2),_=y.round(.383*x,2);return"M-"+_+",-"+M+"H"+_+"L"+M+",-"+_+"V"+_+"L"+_+","+M+"H-"+_+"L-"+M+","+_+"V-"+_+"Z"}},star:{n:17,f:function(x){var M=1.4*x,_=y.round(.225*M,2),e=y.round(.951*M,2),o=y.round(.363*M,2),a=y.round(.588*M,2),l=y.round(-M,2),i=y.round(-.309*M,2),v=y.round(.118*M,2),h=y.round(.809*M,2);return"M"+_+","+i+"H"+e+"L"+o+","+v+"L"+a+","+h+"L0,"+y.round(.382*M,2)+"L-"+a+","+h+"L-"+o+","+v+"L-"+e+","+i+"H-"+_+"L0,"+l+"Z"}},hexagram:{n:18,f:function(x){var M=y.round(.66*x,2),_=y.round(.38*x,2),e=y.round(.76*x,2);return"M-"+e+",0l-"+_+",-"+M+"h"+e+"l"+_+",-"+M+"l"+_+","+M+"h"+e+"l-"+_+","+M+"l"+_+","+M+"h-"+e+"l-"+_+","+M+"l-"+_+",-"+M+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(x){var M=y.round(x*Math.sqrt(3)*.8,2),_=y.round(.8*x,2),e=y.round(1.6*x,2),o=y.round(4*x,2),a="A "+o+","+o+" 0 0 1 ";return"M-"+M+","+_+a+M+","+_+a+"0,-"+e+a+"-"+M+","+_+"Z"}},"star-triangle-down":{n:20,f:function(x){var M=y.round(x*Math.sqrt(3)*.8,2),_=y.round(.8*x,2),e=y.round(1.6*x,2),o=y.round(4*x,2),a="A "+o+","+o+" 0 0 1 ";return"M"+M+",-"+_+a+"-"+M+",-"+_+a+"0,"+e+a+M+",-"+_+"Z"}},"star-square":{n:21,f:function(x){var M=y.round(1.1*x,2),_=y.round(2*x,2),e="A "+_+","+_+" 0 0 1 ";return"M-"+M+",-"+M+e+"-"+M+","+M+e+M+","+M+e+M+",-"+M+e+"-"+M+",-"+M+"Z"}},"star-diamond":{n:22,f:function(x){var M=y.round(1.4*x,2),_=y.round(1.9*x,2),e="A "+_+","+_+" 0 0 1 ";return"M-"+M+",0"+e+"0,"+M+e+M+",0"+e+"0,-"+M+e+"-"+M+",0Z"}},"diamond-tall":{n:23,f:function(x){var M=y.round(.7*x,2),_=y.round(1.4*x,2);return"M0,"+_+"L"+M+",0L0,-"+_+"L-"+M+",0Z"}},"diamond-wide":{n:24,f:function(x){var M=y.round(1.4*x,2),_=y.round(.7*x,2);return"M0,"+_+"L"+M+",0L0,-"+_+"L-"+M+",0Z"}},hourglass:{n:25,f:function(x){var M=y.round(x,2);return"M"+M+","+M+"H-"+M+"L"+M+",-"+M+"H-"+M+"Z"},noDot:!0},bowtie:{n:26,f:function(x){var M=y.round(x,2);return"M"+M+","+M+"V-"+M+"L-"+M+","+M+"V-"+M+"Z"},noDot:!0},"circle-cross":{n:27,f:function(x){var M=y.round(x,2);return"M0,"+M+"V-"+M+"M"+M+",0H-"+M+"M"+M+",0A"+M+","+M+" 0 1,1 0,-"+M+"A"+M+","+M+" 0 0,1 "+M+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(x){var M=y.round(x,2),_=y.round(x/Math.sqrt(2),2);return"M"+_+","+_+"L-"+_+",-"+_+"M"+_+",-"+_+"L-"+_+","+_+"M"+M+",0A"+M+","+M+" 0 1,1 0,-"+M+"A"+M+","+M+" 0 0,1 "+M+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(x){var M=y.round(x,2);return"M0,"+M+"V-"+M+"M"+M+",0H-"+M+"M"+M+","+M+"H-"+M+"V-"+M+"H"+M+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(x){var M=y.round(x,2);return"M"+M+","+M+"L-"+M+",-"+M+"M"+M+",-"+M+"L-"+M+","+M+"M"+M+","+M+"H-"+M+"V-"+M+"H"+M+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(x){var M=y.round(1.3*x,2);return"M"+M+",0L0,"+M+"L-"+M+",0L0,-"+M+"ZM0,-"+M+"V"+M+"M-"+M+",0H"+M},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(x){var M=y.round(1.3*x,2),_=y.round(.65*x,2);return"M"+M+",0L0,"+M+"L-"+M+",0L0,-"+M+"ZM-"+_+",-"+_+"L"+_+","+_+"M-"+_+","+_+"L"+_+",-"+_},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(x){var M=y.round(1.4*x,2);return"M0,"+M+"V-"+M+"M"+M+",0H-"+M},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(x){var M=y.round(x,2);return"M"+M+","+M+"L-"+M+",-"+M+"M"+M+",-"+M+"L-"+M+","+M},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(x){var M=y.round(1.2*x,2),_=y.round(.85*x,2);return"M0,"+M+"V-"+M+"M"+M+",0H-"+M+"M"+_+","+_+"L-"+_+",-"+_+"M"+_+",-"+_+"L-"+_+","+_},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(x){var M=y.round(x/2,2),_=y.round(x,2);return"M"+M+","+_+"V-"+_+"m-"+_+",0V"+_+"M"+_+","+M+"H-"+_+"m0,-"+_+"H"+_},needLine:!0,noFill:!0},"y-up":{n:37,f:function(x){var M=y.round(1.2*x,2),_=y.round(1.6*x,2),e=y.round(.8*x,2);return"M-"+M+","+e+"L0,0M"+M+","+e+"L0,0M0,-"+_+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(x){var M=y.round(1.2*x,2),_=y.round(1.6*x,2),e=y.round(.8*x,2);return"M-"+M+",-"+e+"L0,0M"+M+",-"+e+"L0,0M0,"+_+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(x){var M=y.round(1.2*x,2),_=y.round(1.6*x,2),e=y.round(.8*x,2);return"M"+e+","+M+"L0,0M"+e+",-"+M+"L0,0M-"+_+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(x){var M=y.round(1.2*x,2),_=y.round(1.6*x,2),e=y.round(.8*x,2);return"M-"+e+","+M+"L0,0M-"+e+",-"+M+"L0,0M"+_+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(x){var M=y.round(1.4*x,2);return"M"+M+",0H-"+M},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(x){var M=y.round(1.4*x,2);return"M0,"+M+"V-"+M},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(x){var M=y.round(x,2);return"M"+M+",-"+M+"L-"+M+","+M},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(x){var M=y.round(x,2);return"M"+M+","+M+"L-"+M+",-"+M},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(x){var M=y.round(x,2);return"M0,0L-"+M+","+y.round(2*x,2)+"H"+M+"Z"},noDot:!0},"arrow-down":{n:46,f:function(x){var M=y.round(x,2);return"M0,0L-"+M+",-"+y.round(2*x,2)+"H"+M+"Z"},noDot:!0},"arrow-left":{n:47,f:function(x){var M=y.round(2*x,2),_=y.round(x,2);return"M0,0L"+M+",-"+_+"V"+_+"Z"},noDot:!0},"arrow-right":{n:48,f:function(x){var M=y.round(2*x,2),_=y.round(x,2);return"M0,0L-"+M+",-"+_+"V"+_+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(x){var M=y.round(x,2);return"M-"+M+",0H"+M+"M0,0L-"+M+","+y.round(2*x,2)+"H"+M+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(x){var M=y.round(x,2);return"M-"+M+",0H"+M+"M0,0L-"+M+",-"+y.round(2*x,2)+"H"+M+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(x){var M=y.round(2*x,2),_=y.round(x,2);return"M0,-"+_+"V"+_+"M0,0L"+M+",-"+_+"V"+_+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(x){var M=y.round(2*x,2),_=y.round(x,2);return"M0,-"+_+"V"+_+"M0,0L-"+M+",-"+_+"V"+_+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],390:[function(b,oe,se){"use strict";oe.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],391:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../registry"),M=b("../../plots/cartesian/axes"),_=b("../../lib"),e=b("./compute_error");function o(a,l,i,v){var h=l["error_"+v]||{},s=[];if(h.visible&&-1!==["linear","log"].indexOf(i.type)){for(var d=e(h),p=0;p<a.length;p++){var f=a[p],g=f.i;if(void 0===g)g=p;else if(null===g)continue;var m=f[v];if(y(i.c2l(m))){var u=d(m,g);if(y(u[0])&&y(u[1])){var w=f[v+"s"]=m-u[0],c=f[v+"h"]=m+u[1];s.push(w,c)}}}var k=l._extremes[i._id],C=M.findExtremes(i,s,_.extendFlat({tozero:k.opts.tozero},{padded:!0}));k.min=k.min.concat(C.min),k.max=k.max.concat(C.max)}}oe.exports=function(a){for(var l=a.calcdata,i=0;i<l.length;i++){var v=l[i],h=v[0].trace;if(!0===h.visible&&x.traceIs(h,"errorBarsOK")){var s=M.getFromId(a,h.xaxis),d=M.getFromId(a,h.yaxis);o(v,h,s,"x"),o(v,h,d,"y")}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./compute_error":392,"fast-isnumeric":190}],392:[function(b,oe,se){"use strict";function y(x,M){return"percent"===x?function(_){return Math.abs(_*M/100)}:"constant"===x?function(){return Math.abs(M)}:"sqrt"===x?function(_){return Math.sqrt(Math.abs(_))}:void 0}oe.exports=function(x){var M=x.type,_=x.symmetric;if("data"===M){var e=x.array||[];if(_)return function(i,v){var h=+e[v];return[h,h]};var o=x.arrayminus||[];return function(i,v){var h=+e[v],s=+o[v];return isNaN(h)&&isNaN(s)?[NaN,NaN]:[s||0,h||0]}}var a=y(M,x.value),l=y(M,x.valueminus);return _||void 0===x.valueminus?function(i){var v=a(i);return[v,v]}:function(i){return[l(i),a(i)]}}},{}],393:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../registry"),M=b("../../lib"),_=b("../../plot_api/plot_template"),e=b("./attributes");oe.exports=function(o,a,l,i){var v="error_"+i.axis,h=_.newContainer(a,v),s=o[v]||{};function d(m,u){return M.coerce(s,h,e,m,u)}if(!1!==d("visible",void 0!==s.array||void 0!==s.value||"sqrt"===s.type)){var p=d("type","array"in s?"data":"percent"),f=!0;"sqrt"!==p&&(f=d("symmetric",!(("data"===p?"arrayminus":"valueminus")in s))),"data"===p?(d("array"),d("traceref"),f||(d("arrayminus"),d("tracerefminus"))):"percent"!==p&&"constant"!==p||(d("value"),f||d("valueminus"));var g="copy_"+i.inherit+"style";i.inherit&&(a["error_"+i.inherit]||{}).visible&&d(g,!(s.color||y(s.thickness)||y(s.width))),i.inherit&&h[g]||(d("color",l),d("thickness"),d("width",x.traceIs(a,"gl3d")?0:4))}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"./attributes":390,"fast-isnumeric":190}],394:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plot_api/edit_types").overrideAll,M=b("./attributes"),_={error_x:y.extendFlat({},M),error_y:y.extendFlat({},M)};delete _.error_x.copy_zstyle,delete _.error_y.copy_zstyle,delete _.error_y.copy_ystyle;var e={error_x:y.extendFlat({},M),error_y:y.extendFlat({},M),error_z:y.extendFlat({},M)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,oe.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:_,bar:_,histogram:_,scatter3d:x(e,"calc","nested"),scattergl:x(_,"calc","nested")}},supplyDefaults:b("./defaults"),calc:b("./calc"),makeComputeError:b("./compute_error"),plot:b("./plot"),style:b("./style"),hoverInfo:function(o,a,l){(a.error_y||{}).visible&&(l.yerr=o.yh-o.y,a.error_y.symmetric||(l.yerrneg=o.y-o.ys)),(a.error_x||{}).visible&&(l.xerr=o.xh-o.x,a.error_x.symmetric||(l.xerrneg=o.x-o.xs))}}},{"../../lib":503,"../../plot_api/edit_types":536,"./attributes":390,"./calc":391,"./compute_error":392,"./defaults":393,"./plot":395,"./style":396}],395:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("fast-isnumeric"),M=b("../drawing"),_=b("../../traces/scatter/subtypes");oe.exports=function(e,o,a,l){var i=a.xaxis,v=a.yaxis,h=l&&l.duration>0;o.each(function(s){var d,p=s[0].trace,f=p.error_x||{},g=p.error_y||{};p.ids&&(d=function(c){return c.id});var m=_.hasMarkers(p)&&p.marker.maxdisplayed>0;g.visible||f.visible||(s=[]);var u=y.select(this).selectAll("g.errorbar").data(s,d);if(u.exit().remove(),s.length){f.visible||u.selectAll("path.xerror").remove(),g.visible||u.selectAll("path.yerror").remove(),u.style("opacity",1);var w=u.enter().append("g").classed("errorbar",!0);h&&w.style("opacity",0).transition().duration(l.duration).style("opacity",1),M.setClipUrl(u,a.layerClipId,e),u.each(function(c){var F,I,P,j,A=y.select(this),k=(P=v,j={x:(I=i).c2p((F=c).x),y:P.c2p(F.y)},void 0!==F.yh&&(j.yh=P.c2p(F.yh),j.ys=P.c2p(F.ys),x(j.ys)||(j.noYS=!0,j.ys=P.c2p(F.ys,!0))),void 0!==F.xh&&(j.xh=I.c2p(F.xh),j.xs=I.c2p(F.xs),x(j.xs)||(j.noXS=!0,j.xs=I.c2p(F.xs,!0))),j);if(!m||c.vis){var C,E=A.select("path.yerror");if(g.visible&&x(k.x)&&x(k.yh)&&x(k.ys)){var L=g.width;C="M"+(k.x-L)+","+k.yh+"h"+2*L+"m-"+L+",0V"+k.ys,k.noYS||(C+="m-"+L+",0h"+2*L),E.size()?h&&(E=E.transition().duration(l.duration).ease(l.easing)):E=A.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),E.attr("d",C)}else E.remove();var D=A.select("path.xerror");if(f.visible&&x(k.y)&&x(k.xh)&&x(k.xs)){var N=(f.copy_ystyle?g:f).width;C="M"+k.xh+","+(k.y-N)+"v"+2*N+"m0,-"+N+"H"+k.xs,k.noXS||(C+="m0,-"+N+"v"+2*N),D.size()?h&&(D=D.transition().duration(l.duration).ease(l.easing)):D=A.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),D.attr("d",C)}else D.remove()}})}})}},{"../../traces/scatter/subtypes":952,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],396:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../color");oe.exports=function(M){M.each(function(_){var e=_[0].trace,o=e.error_y||{},a=e.error_x||{},l=y.select(this);l.selectAll("path.yerror").style("stroke-width",o.thickness+"px").call(x.stroke,o.color),a.copy_ystyle&&(a=o),l.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(x.stroke,a.color)})}},{"../color":366,"@plotly/d3":58}],397:[function(b,oe,se){"use strict";var y=b("../../plots/font_attributes"),x=b("./layout_attributes").hoverlabel,M=b("../../lib/extend").extendFlat;oe.exports={hoverlabel:{bgcolor:M({},x.bgcolor,{arrayOk:!0}),bordercolor:M({},x.bordercolor,{arrayOk:!0}),font:y({arrayOk:!0,editType:"none"}),align:M({},x.align,{arrayOk:!0}),namelength:M({},x.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":493,"../../plots/font_attributes":585,"./layout_attributes":407}],398:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../registry");function M(_,e,o,a){a=a||y.identity,Array.isArray(_)&&(e[0][o]=a(_))}oe.exports=function(_){var e=_.calcdata,o=_._fullLayout;function a(s){return function(d){return y.coerceHoverinfo({hoverinfo:d},{_module:s._module},o)}}for(var l=0;l<e.length;l++){var i=e[l],v=i[0].trace;if(!x.traceIs(v,"pie-like")){var h=x.traceIs(v,"2dMap")?M:y.fillArray;h(v.hoverinfo,i,"hi",a(v)),v.hovertemplate&&h(v.hovertemplate,i,"ht"),v.hoverlabel&&(h(v.hoverlabel.bgcolor,i,"hbg"),h(v.hoverlabel.bordercolor,i,"hbc"),h(v.hoverlabel.font.size,i,"hts"),h(v.hoverlabel.font.color,i,"htc"),h(v.hoverlabel.font.family,i,"htf"),h(v.hoverlabel.namelength,i,"hnl"),h(v.hoverlabel.align,i,"hta"))}}}},{"../../lib":503,"../../registry":638}],399:[function(b,oe,se){"use strict";var y=b("../../registry"),x=b("./hover").hover;oe.exports=function(M,_,e){var o=y.getComponentMethod("annotations","onClick")(M,M._hoverdata);function a(){M.emit("plotly_click",{points:M._hoverdata,event:_})}void 0!==e&&x(M,_,e,!0),M._hoverdata&&_&&_.target&&(o&&o.then?o.then(a):a(),_.stopImmediatePropagation&&_.stopImmediatePropagation())}},{"../../registry":638,"./hover":403}],400:[function(b,oe,se){"use strict";oe.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],401:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./attributes"),M=b("./hoverlabel_defaults");oe.exports=function(_,e,o,a){var l=y.extendFlat({},a.hoverlabel);e.hovertemplate&&(l.namelength=-1),M(_,e,function(i,v){return y.coerce(_,e,x,i,v)},l)}},{"../../lib":503,"./attributes":397,"./hoverlabel_defaults":404}],402:[function(b,oe,se){"use strict";var y=b("../../lib");se.getSubplot=function(a){return a.subplot||a.xaxis+a.yaxis||a.geo},se.isTraceInSubplots=function(a,l){if("splom"===a.type){for(var i=a.xaxes||[],v=a.yaxes||[],h=0;h<i.length;h++)for(var s=0;s<v.length;s++)if(-1!==l.indexOf(i[h]+v[s]))return!0;return!1}return-1!==l.indexOf(se.getSubplot(a))},se.flat=function(a,l){for(var i=new Array(a.length),v=0;v<a.length;v++)i[v]=l;return i},se.p2c=function(a,l){for(var i=new Array(a.length),v=0;v<a.length;v++)i[v]=a[v].p2c(l);return i},se.getDistanceFunction=function(a,l,i,v){return"closest"===a?v||se.quadrature(l,i):"x"===a.charAt(0)?l:i},se.getClosest=function(a,l,i){if(!1!==i.index)i.index>=0&&i.index<a.length?i.distance=0:i.index=!1;else for(var v=0;v<a.length;v++){var h=l(a[v]);h<=i.distance&&(i.index=v,i.distance=h)}return i},se.inbox=function(a,l,i){return a*l<0||0===a?i:1/0},se.quadrature=function(a,l){return function(i){var v=a(i),h=l(i);return Math.sqrt(v*v+h*h)}},se.makeEventData=function(a,l,i){var v="index"in a?a.index:a.pointNumber,h={data:l._input,fullData:l,curveNumber:l.index,pointNumber:v};if(l._indexToPoints){var s=l._indexToPoints[v];1===s.length?h.pointIndex=s[0]:h.pointIndices=s}else h.pointIndex=v;return l._module.eventData?h=l._module.eventData(h,a,l,i,v):("xVal"in a?h.x=a.xVal:"x"in a&&(h.x=a.x),"yVal"in a?h.y=a.yVal:"y"in a&&(h.y=a.y),a.xa&&(h.xaxis=a.xa),a.ya&&(h.yaxis=a.ya),void 0!==a.zLabelVal&&(h.z=a.zLabelVal)),se.appendArrayPointValue(h,l,v),h},se.appendArrayPointValue=function(a,l,i){var v=l._arrayAttrs;if(v)for(var h=0;h<v.length;h++){var s=v[h],d=M(s);if(void 0===a[d]){var p=_(y.nestedProperty(l,s).get(),i);void 0!==p&&(a[d]=p)}}},se.appendArrayMultiPointValues=function(a,l,i){var v=l._arrayAttrs;if(v)for(var h=0;h<v.length;h++){var s=v[h],d=M(s);if(void 0===a[d]){for(var p=y.nestedProperty(l,s).get(),f=new Array(i.length),g=0;g<i.length;g++)f[g]=_(p,i[g]);a[d]=f}}};var x={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function M(a){return x[a]||a}function _(a,l){return Array.isArray(l)?Array.isArray(a)&&Array.isArray(a[l[0]])?a[l[0]][l[1]]:void 0:a[l]}var e={x:!0,y:!0},o={"x unified":!0,"y unified":!0};se.isUnifiedHover=function(a){return"string"==typeof a&&!!o[a]},se.isXYhover=function(a){return"string"==typeof a&&!!e[a]}},{"../../lib":503}],403:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("fast-isnumeric"),M=b("tinycolor2"),_=b("../../lib"),e=_.strTranslate,o=_.strRotate,a=b("../../lib/events"),l=b("../../lib/svg_text_utils"),i=b("../../lib/override_cursor"),v=b("../drawing"),h=b("../color"),s=b("../dragelement"),d=b("../../plots/cartesian/axes"),p=b("../../registry"),f=b("./helpers"),g=b("./constants"),m=b("../legend/defaults"),u=b("../legend/draw"),w=g.YANGLE,c=Math.PI*w/180,A=1/Math.sin(c),k=Math.cos(c),C=Math.sin(c),E=g.HOVERARROWSIZE,L=g.HOVERTEXTPAD,D={box:!0,ohlc:!0,violin:!0,candlestick:!0},N={scatter:!0,scattergl:!0,splom:!0};function F(U){return[U.trace.index,U.index,U.x0,U.y0,U.name,U.attr,U.xa?U.xa._id:"",U.ya?U.ya._id:""].join(",")}se.hover=function(U,W,ae,G){U=_.getGraphDiv(U);var te=W.target;_.throttle(U._fullLayout._uid+g.HOVERID,g.HOVERMINTIME,function(){!function(ne,le,ue,pe,de){ue||(ue="xy");var _e=Array.isArray(ue)?ue:[ue],me=ne._fullLayout,we=me._plots||[],De=we[ue],Le=me._has("cartesian");if(De){var Ie=De.overlays.map(function(Jn){return Jn.id});_e=_e.concat(Ie)}for(var je=_e.length,ye=new Array(je),Me=new Array(je),Oe=!1,Pe=0;Pe<je;Pe++){var Re=_e[Pe];if(we[Re])Oe=!0,ye[Pe]=we[Re].xaxis,Me[Pe]=we[Re].yaxis;else{if(!me[Re]||!me[Re]._subplot)return void _.warn("Unrecognized subplot: "+Re);var Ue=me[Re]._subplot;ye[Pe]=Ue.xaxis,Me[Pe]=Ue.yaxis}}var qe=le.hovermode||me.hovermode;if(qe&&!Oe&&(qe="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(qe)||!ne.calcdata||ne.querySelector(".zoombox")||ne._dragging)return s.unhoverRaw(ne,le);var Xe=me.hoverdistance;-1===Xe&&(Xe=1/0);var lt=me.spikedistance;-1===lt&&(lt=1/0);var He,$e,et,nt,ct,bt,kt,Bt,Et,ht,at,Ft,en,Qt=[],tn=[],dn={hLinePoint:null,vLinePoint:null},Mn=!1;if(Array.isArray(le))for(qe="array",et=0;et<le.length;et++)(ct=ne.calcdata[le[et].curveNumber||0])&&(bt=ct[0].trace,"skip"!==ct[0].trace.hoverinfo&&(tn.push(ct),"h"===bt.orientation&&(Mn=!0)));else{for(nt=0;nt<ne.calcdata.length;nt++)"skip"!==(bt=(ct=ne.calcdata[nt])[0].trace).hoverinfo&&f.isTraceInSubplots(bt,_e)&&(tn.push(ct),"h"===bt.orientation&&(Mn=!0));var sn,ke;if(de){if(!1===a.triggerHandler(ne,"plotly_beforehover",le))return;var Se=de.getBoundingClientRect();sn=le.clientX-Se.left,ke=le.clientY-Se.top,me._calcInverseTransform(ne);var Ce=_.apply3DTransform(me._invTransform)(sn,ke);if(ke=Ce[1],(sn=Ce[0])<0||sn>ye[0]._length||ke<0||ke>Me[0]._length)return s.unhoverRaw(ne,le)}else sn="xpx"in le?le.xpx:ye[0]._length/2,ke="ypx"in le?le.ypx:Me[0]._length/2;if(le.pointerX=sn+ye[0]._offset,le.pointerY=ke+Me[0]._offset,He="xval"in le?f.flat(_e,le.xval):f.p2c(ye,sn),$e="yval"in le?f.flat(_e,le.yval):f.p2c(Me,ke),!x(He[0])||!x($e[0]))return _.warn("Fx.hover failed",le,ne),s.unhoverRaw(ne,le)}var Ve=1/0;function Ge(Jn,br){for(nt=0;nt<tn.length;nt++)if((ct=tn[nt])&&ct[0]&&ct[0].trace&&!0===(bt=ct[0].trace).visible&&0!==bt._length&&-1===["carpet","contourcarpet"].indexOf(bt._module.name)){if("splom"===bt.type?kt=_e[Bt=0]:(kt=f.getSubplot(bt),Bt=_e.indexOf(kt)),f.isUnifiedHover(Et=qe)&&(Et=Et.charAt(0)),Ft={cd:ct,trace:bt,xa:ye[Bt],ya:Me[Bt],maxHoverDistance:Xe,maxSpikeDistance:lt,index:!1,distance:Math.min(Ve,Xe),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:h.defaultLine,name:bt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},me[kt]&&(Ft.subplot=me[kt]._subplot),me._splomScenes&&me._splomScenes[bt.uid]&&(Ft.scene=me._splomScenes[bt.uid]),en=Qt.length,"array"===Et){var Fr=le[nt];"pointNumber"in Fr?(Ft.index=Fr.pointNumber,Et="closest"):(Et="","xval"in Fr&&(ht=Fr.xval,Et="x"),"yval"in Fr&&(at=Fr.yval,Et=Et?"closest":"y"))}else void 0!==Jn&&void 0!==br?(ht=Jn,at=br):(ht=He[Bt],at=$e[Bt]);if(0!==Xe)if(bt._module&&bt._module.hoverPoints){var cr=bt._module.hoverPoints(Ft,ht,at,Et,{finiteRange:!0,hoverLayer:me._hoverlayer});if(cr)for(var Qr,ui=0;ui<cr.length;ui++)x((Qr=cr[ui]).x0)&&x(Qr.y0)&&Qt.push(Z(Qr,qe))}else _.log("Unrecognized trace type in hover:",bt);if("closest"===qe&&Qt.length>en&&(Qt.splice(0,en),Ve=Qt[0].distance),Le&&0!==lt&&0===Qt.length){Ft.distance=lt,Ft.index=!1;var Nr=bt._module.hoverPoints(Ft,ht,at,"closest",{hoverLayer:me._hoverlayer});if(Nr&&(Nr=Nr.filter(function(vn){return vn.spikeDistance<=lt})),Nr&&Nr.length){var Hr,wr=Nr.filter(function(vn){return vn.xa.showspikes&&"hovered data"!==vn.xa.spikesnap});if(wr.length){var un=wr[0];x(un.x0)&&x(un.y0)&&(Hr=ot(un),(!dn.vLinePoint||dn.vLinePoint.spikeDistance>Hr.spikeDistance)&&(dn.vLinePoint=Hr))}var er=Nr.filter(function(vn){return vn.ya.showspikes&&"hovered data"!==vn.ya.spikesnap});if(er.length){var Ut=er[0];x(Ut.x0)&&x(Ut.y0)&&(Hr=ot(Ut),(!dn.hLinePoint||dn.hLinePoint.spikeDistance>Hr.spikeDistance)&&(dn.hLinePoint=Hr))}}}}}function Qe(Jn,br,Fr){for(var cr,Qr=null,ui=1/0,Nr=0;Nr<Jn.length;Nr++)cr=Jn[Nr].spikeDistance,Fr&&0===Nr&&(cr=-1/0),cr<=ui&&cr<=br&&(Qr=Jn[Nr],ui=cr);return Qr}function ot(Jn){return Jn?{xa:Jn.xa,ya:Jn.ya,x:void 0!==Jn.xSpike?Jn.xSpike:(Jn.x0+Jn.x1)/2,y:void 0!==Jn.ySpike?Jn.ySpike:(Jn.y0+Jn.y1)/2,distance:Jn.distance,spikeDistance:Jn.spikeDistance,curveNumber:Jn.trace.index,color:Jn.color,pointNumber:Jn.index}:null}Ge();var it={fullLayout:me,container:me._hoverlayer,event:le},mt=ne._spikepoints;ne._spikepoints={vLinePoint:dn.vLinePoint,hLinePoint:dn.hLinePoint};var Vt=function(){Qt.sort(function(Jn,br){return Jn.distance-br.distance}),Qt=function(Jn,br){for(var Fr=br.charAt(0),cr=[],Qr=[],ui=[],Nr=0;Nr<Jn.length;Nr++){var Hr=Jn[Nr];p.traceIs(Hr.trace,"bar-like")||p.traceIs(Hr.trace,"box-violin")?ui.push(Hr):Hr.trace[Fr+"period"]?Qr.push(Hr):cr.push(Hr)}return cr.concat(Qr).concat(ui)}(Qt,qe)};Vt();var $t=qe.charAt(0),pt=("x"===$t||"y"===$t)&&Qt[0]&&N[Qt[0].trace.type];if(Le&&0!==lt&&0!==Qt.length){var At=Qe(Qt.filter(function(Jn){return Jn.ya.showspikes}),lt,pt);dn.hLinePoint=ot(At);var Xt=Qe(Qt.filter(function(Jn){return Jn.xa.showspikes}),lt,pt);dn.vLinePoint=ot(Xt)}if(0===Qt.length){var Ct=s.unhoverRaw(ne,le);return!Le||null===dn.hLinePoint&&null===dn.vLinePoint||ee(mt)&&Y(ne,dn,it),Ct}if(Le&&ee(mt)&&Y(ne,dn,it),f.isXYhover(Et)&&0!==Qt[0].length&&"splom"!==Qt[0].trace.type){var Pt=Qt[0],Be=(Qt=D[Pt.trace.type]?Qt.filter(function(Jn){return Jn.trace.index===Pt.trace.index}):[Pt]).length;Ge(X("x",Pt,me),X("y",Pt,me));var Dt,Nt=[],Yt={},fn=0,nn=function(Jn){var br=D[Jn.trace.type]?F(Jn):Jn.trace.index;if(Yt[br]){var Fr=Yt[br]-1,cr=Nt[Fr];Fr>0&&Math.abs(Jn.distance)<Math.abs(cr.distance)&&(Nt[Fr]=Jn)}else fn++,Yt[br]=fn,Nt.push(Jn)};for(Dt=0;Dt<Be;Dt++)nn(Qt[Dt]);for(Dt=Qt.length-1;Dt>Be-1;Dt--)nn(Qt[Dt]);Qt=Nt,Vt()}var In=ne._hoverdata,Dn=[],kn=K(ne),rn=ie(ne);for(et=0;et<Qt.length;et++){var pn=Qt[et],gn=f.makeEventData(pn,pn.trace,pn.cd);if(!1!==pn.hovertemplate){var Pn=!1;pn.cd[pn.index]&&pn.cd[pn.index].ht&&(Pn=pn.cd[pn.index].ht),pn.hovertemplate=Pn||pn.trace.hovertemplate||!1}if(pn.xa&&pn.ya){var jn=pn.x0+pn.xa._offset,Kn=pn.x1+pn.xa._offset,rr=pn.y0+pn.ya._offset,lr=pn.y1+pn.ya._offset,kr=Math.min(jn,Kn),Xr=Math.max(jn,Kn),sr=Math.min(rr,lr),oi=Math.max(rr,lr);gn.bbox={x0:kr+rn,x1:Xr+rn,y0:sr+kn,y1:oi+kn}}pn.eventData=[gn],Dn.push(gn)}ne._hoverdata=Dn;var Gr="y"===qe&&(tn.length>1||Qt.length>1)||"closest"===qe&&Mn&&Qt.length>1,Lr=h.combine(me.plot_bgcolor||h.background,me.paper_bgcolor),Jr=P(Qt,{gd:ne,hovermode:qe,rotateLabels:Gr,bgColor:Lr,container:me._hoverlayer,outerContainer:me._paper.node(),commonLabelOpts:me.hoverlabel,hoverdistance:me.hoverdistance});if(f.isUnifiedHover(qe)||(function(Jn,br,Fr){var cr,Qr,ui,Nr,Hr,wr,un,er=0,Ut=1,vn=Jn.size(),Tn=new Array(vn),Qn=0;function Zn(hr){var _r=hr[0],Tr=hr[hr.length-1];if(ui=Tr.pos+Tr.dp+Tr.size-_r.pmax,(Qr=_r.pmin-_r.pos-_r.dp+_r.size)>.01){for(Hr=hr.length-1;Hr>=0;Hr--)hr[Hr].dp+=Qr;cr=!1}if(!(ui<.01)){if(Qr<-.01){for(Hr=hr.length-1;Hr>=0;Hr--)hr[Hr].dp-=ui;cr=!1}if(cr){var jr=0;for(Nr=0;Nr<hr.length;Nr++)(wr=hr[Nr]).pos+wr.dp+wr.size>_r.pmax&&jr++;for(Nr=hr.length-1;Nr>=0&&!(jr<=0);Nr--)(wr=hr[Nr]).pos>_r.pmax-1&&(wr.del=!0,jr--);for(Nr=0;Nr<hr.length&&!(jr<=0);Nr++)if((wr=hr[Nr]).pos<_r.pmin+1)for(wr.del=!0,jr--,ui=2*wr.size,Hr=hr.length-1;Hr>=0;Hr--)hr[Hr].dp-=ui;for(Nr=hr.length-1;Nr>=0&&!(jr<=0);Nr--)(wr=hr[Nr]).pos+wr.dp+wr.size>_r.pmax&&(wr.del=!0,jr--)}}}for(Jn.each(function(hr){var _r=hr[br],Tr="x"===_r._id.charAt(0),jr=_r.range;0===Qn&&jr&&jr[0]>jr[1]!==Tr&&(Ut=-1),Tn[Qn++]=[{datum:hr,traceIndex:hr.trace.index,dp:0,pos:hr.pos,posref:hr.posref,size:hr.by*(Tr?A:1)/2,pmin:0,pmax:Tr?Fr.width:Fr.height}]}),Tn.sort(function(hr,_r){return hr[0].posref-_r[0].posref||Ut*(_r[0].traceIndex-hr[0].traceIndex)});!cr&&er<=vn;){for(er++,cr=!0,Nr=0;Nr<Tn.length-1;){var $n=Tn[Nr],Hn=Tn[Nr+1],Rn=$n[$n.length-1],Fn=Hn[0];if((Qr=Rn.pos+Rn.dp+Rn.size-Fn.pos-Fn.dp+Fn.size)>.01&&Rn.pmin===Fn.pmin&&Rn.pmax===Fn.pmax){for(Hr=Hn.length-1;Hr>=0;Hr--)Hn[Hr].dp+=Qr;for($n.push.apply($n,Hn),Tn.splice(Nr+1,1),un=0,Hr=$n.length-1;Hr>=0;Hr--)un+=$n[Hr].dp;for(ui=un/$n.length,Hr=$n.length-1;Hr>=0;Hr--)$n[Hr].dp-=ui;cr=!1}else Nr++}Tn.forEach(Zn)}for(Nr=Tn.length-1;Nr>=0;Nr--){var zn=Tn[Nr];for(Hr=zn.length-1;Hr>=0;Hr--){var Yn=zn[Hr],nr=Yn.datum;nr.offset=Yn.dp,nr.del=Yn.del}}}(Jr,Gr?"xa":"ya",me),V(Jr,Gr,me._invScaleX,me._invScaleY)),de&&de.tagName){var Mi=p.getComponentMethod("annotations","hasClickToShow")(ne,Dn);i(y.select(de),Mi?"pointer":"")}!de||pe||!function(Jn,br,Fr){if(!Fr||Fr.length!==Jn._hoverdata.length)return!0;for(var cr=Fr.length-1;cr>=0;cr--){var Qr=Fr[cr],ui=Jn._hoverdata[cr];if(Qr.curveNumber!==ui.curveNumber||String(Qr.pointNumber)!==String(ui.pointNumber)||String(Qr.pointNumbers)!==String(ui.pointNumbers))return!0}return!1}(ne,0,In)||(In&&ne.emit("plotly_unhover",{event:le,points:In}),ne.emit("plotly_hover",{event:le,points:ne._hoverdata,xaxes:ye,yaxes:Me,xvals:He,yvals:$e}))}(U,W,ae,G,te)})},se.loneHover=function(U,W){var ae=!0;Array.isArray(U)||(ae=!1,U=[U]);var G=W.gd,te=K(G),ne=ie(G),le=P(U.map(function(de){var _e=de._x0||de.x0||de.x||0,me=de._x1||de.x1||de.x||0,we=de._y0||de.y0||de.y||0,De=de._y1||de.y1||de.y||0,Le=de.eventData;if(Le){var Ie=Math.min(_e,me),je=Math.max(_e,me),ye=Math.min(we,De),Me=Math.max(we,De),Oe=de.trace;if(p.traceIs(Oe,"gl3d")){var Pe=G._fullLayout[Oe.scene]._scene.container,Re=Pe.offsetLeft,Ue=Pe.offsetTop;Ie+=Re,je+=Re,ye+=Ue,Me+=Ue}Le.bbox={x0:Ie+ne,x1:je+ne,y0:ye+te,y1:Me+te},W.inOut_bbox&&W.inOut_bbox.push(Le.bbox)}else Le=!1;return{color:de.color||h.defaultLine,x0:de.x0||de.x||0,x1:de.x1||de.x||0,y0:de.y0||de.y||0,y1:de.y1||de.y||0,xLabel:de.xLabel,yLabel:de.yLabel,zLabel:de.zLabel,text:de.text,name:de.name,idealAlign:de.idealAlign,borderColor:de.borderColor,fontFamily:de.fontFamily,fontSize:de.fontSize,fontColor:de.fontColor,nameLength:de.nameLength,textAlign:de.textAlign,trace:de.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:de.hovertemplate||!1,hovertemplateLabels:de.hovertemplateLabels||!1,eventData:Le}}),{gd:G,hovermode:"closest",rotateLabels:!1,bgColor:W.bgColor||h.background,container:y.select(W.container),outerContainer:W.outerContainer||W.container}),ue=0,pe=0;return le.sort(function(de,_e){return de.y0-_e.y0}).each(function(de,_e){var me=de.y0-de.by/2;de.offset=me-5<ue?ue-me+5:0,ue=me+de.by+de.offset,_e===W.anchorIndex&&(pe=de.offset)}).each(function(de){de.offset-=pe}),V(le,!1,G._fullLayout._invScaleX,G._fullLayout._invScaleY),ae?le:le.node()};var I=/<extra>([\s\S]*)<\/extra>/;function P(U,W){var ae=W.gd,G=ae._fullLayout,te=W.hovermode,ne=W.rotateLabels,le=W.bgColor,ue=W.container,pe=W.outerContainer,de=W.commonLabelOpts||{};if(0===U.length)return[[]];var _e=W.fontFamily||g.HOVERFONT,me=W.fontSize||g.HOVERFONTSIZE,we=U[0],De=we.xa,Le=we.ya,Ie=te.charAt(0),je=we[Ie+"Label"],ye=q(ae,pe),Me=ye.top,Oe=ye.width,Pe=ye.height,Re=void 0!==je&&we.distance<=W.hoverdistance&&("x"===te||"y"===te);if(Re){var Ue,qe,Xe=!0;for(Ue=0;Ue<U.length;Ue++)if(Xe&&void 0===U[Ue].zLabel&&(Xe=!1),qe=U[Ue].hoverinfo||U[Ue].trace.hoverinfo){var lt=Array.isArray(qe)?qe:qe.split("+");if(-1===lt.indexOf("all")&&-1===lt.indexOf(te)){Re=!1;break}}Xe&&(Re=!1)}var He=ue.selectAll("g.axistext").data(Re?[0]:[]);if(He.enter().append("g").classed("axistext",!0),He.exit().remove(),He.each(function(){var pt=y.select(this),At=_.ensureSingle(pt,"path","",function(Kn){Kn.style({"stroke-width":"1px"})}),Xt=_.ensureSingle(pt,"text","",function(Kn){Kn.attr("data-notex",1)}),Ct=de.bgcolor||h.defaultLine,Pt=de.bordercolor||h.contrast(Ct),Be=h.contrast(Ct),tt={family:de.font.family||_e,size:de.font.size||me,color:de.font.color||Be};At.style({fill:Ct,stroke:Pt}),Xt.text(je).call(v.font,tt).call(l.positionText,0,0).call(l.convertToTspans,ae),pt.attr("transform","");var dt,Dt,Nt=q(ae,Xt.node());if("x"===te){var Yt="top"===De.side?"-":"";Xt.attr("text-anchor","middle").call(l.positionText,0,"top"===De.side?Me-Nt.bottom-E-L:Me-Nt.top+E+L),Dt=Le._offset+("top"===De.side?0:Le._length);var fn=Nt.width/2+L;(dt=De._offset+(we.x0+we.x1)/2)<fn?(dt=fn,At.attr("d","M-"+(fn-E)+",0L-"+(fn-2*E)+","+Yt+E+"H"+(L+Nt.width/2)+"v"+Yt+(2*L+Nt.height)+"H-"+fn+"V"+Yt+E+"Z")):dt>G.width-fn?(dt=G.width-fn,At.attr("d","M"+(fn-E)+",0L"+fn+","+Yt+E+"v"+Yt+(2*L+Nt.height)+"H-"+fn+"V"+Yt+E+"H"+(fn-2*E)+"Z")):At.attr("d","M0,0L"+E+","+Yt+E+"H"+(L+Nt.width/2)+"v"+Yt+(2*L+Nt.height)+"H-"+(L+Nt.width/2)+"V"+Yt+E+"H-"+E+"Z")}else{var nn,In,Dn;"right"===Le.side?(nn="start",In=1,Dn="",dt=De._offset+De._length):(nn="end",In=-1,Dn="-",dt=De._offset),Dt=Le._offset+(we.y0+we.y1)/2,Xt.attr("text-anchor",nn),At.attr("d","M0,0L"+Dn+E+","+E+"V"+(L+Nt.height/2)+"h"+Dn+(2*L+Nt.width)+"V-"+(L+Nt.height/2)+"H"+Dn+E+"V-"+E+"Z");var kn,rn=Nt.height/2,pn=Me-Nt.top-rn,gn="clip"+G._uid+"commonlabel"+Le._id;if(dt<Nt.width+2*L+E){kn="M-"+(E+L)+"-"+rn+"h-"+(Nt.width-L)+"V"+rn+"h"+(Nt.width-L)+"Z";var Pn=Nt.width-dt+L;l.positionText(Xt,Pn,pn),"end"===nn&&Xt.selectAll("tspan").each(function(){var Kn=y.select(this),rr=v.tester.append("text").text(Kn.text()).call(v.font,tt),lr=q(ae,rr.node());Math.round(lr.width)<Math.round(Nt.width)&&Kn.attr("x",Pn-lr.width),rr.remove()})}else l.positionText(Xt,In*(L+E),pn),kn=null;var jn=G._topclips.selectAll("#"+gn).data(kn?[0]:[]);jn.enter().append("clipPath").attr("id",gn).append("path"),jn.exit().remove(),jn.select("path").attr("d",kn),v.setClipUrl(Xt,kn?gn:null,ae)}pt.attr("transform",e(dt,Dt))}),f.isUnifiedHover(te)){ue.selectAll("g.hovertext").remove();var $e=U.filter(function(pt){return"none"!==pt.hoverinfo});if(0===$e.length)return;var et=G.hoverlabel,nt=et.font,bt={font:nt};m({showlegend:!0,legend:{title:{text:je,font:nt},font:nt,bgcolor:et.bgcolor,bordercolor:et.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:G.legend?G.legend.traceorder:void 0,orientation:"v"}},bt,ae._fullData);var kt=bt.legend;kt.entries=[];for(var Bt=0;Bt<$e.length;Bt++){var Et=$e[Bt];if("none"!==Et.hoverinfo){var ht=j(Et,!0,te,G,je),at=ht[0],Ft=ht[1];Et.name=Ft,Et.text=""!==Ft?Ft+" : "+at:at;var en=Et.cd[Et.index];en&&(en.mc&&(Et.mc=en.mc),en.mcc&&(Et.mc=en.mcc),en.mlc&&(Et.mlc=en.mlc),en.mlcc&&(Et.mlc=en.mlcc),en.mlw&&(Et.mlw=en.mlw),en.mrc&&(Et.mrc=en.mrc),en.dir&&(Et.dir=en.dir)),Et._distinct=!0,kt.entries.push([Et])}}kt.entries.sort(function(pt,At){return pt[0].trace.index-At[0].trace.index}),kt.layer=ue,kt._inHover=!0,kt._groupTitleFont=et.grouptitlefont,u(ae,kt);var Qt,tn,dn,Mn,sn=ue.select("g.legend"),ke=q(ae,sn.node()),Se=ke.width+2*L,Ce=ke.height+2*L,Ve=$e[0],Ge=(Ve.x0+Ve.x1)/2,Qe=(Ve.y0+Ve.y1)/2,ot=!(p.traceIs(Ve.trace,"bar-like")||p.traceIs(Ve.trace,"box-violin"));"y"===Ie?ot?(tn=Qe-L,Qt=Qe+L):(tn=Math.min.apply(null,$e.map(function(pt){return Math.min(pt.y0,pt.y1)})),Qt=Math.max.apply(null,$e.map(function(pt){return Math.max(pt.y0,pt.y1)}))):tn=Qt=_.mean($e.map(function(pt){return(pt.y0+pt.y1)/2}))-Ce/2,"x"===Ie?ot?(dn=Ge+L,Mn=Ge-L):(dn=Math.max.apply(null,$e.map(function(pt){return Math.max(pt.x0,pt.x1)})),Mn=Math.min.apply(null,$e.map(function(pt){return Math.min(pt.x0,pt.x1)}))):dn=Mn=_.mean($e.map(function(pt){return(pt.x0+pt.x1)/2}))-Se/2;var it,mt,xt=De._offset,Vt=Le._offset;return Mn+=xt-Se,tn+=Vt-Ce,it=(dn+=xt)+Se<Oe&&dn>=0?dn:Mn+Se<Oe&&Mn>=0?Mn:xt+Se<Oe?xt:dn-Ge<Ge-Mn+Se?Oe-Se:0,mt=(Qt+=Vt)+Ce<Pe&&Qt>=0?Qt:tn+Ce<Pe&&tn>=0?tn:Vt+Ce<Pe?Vt:Qt-Qe<Qe-tn+Ce?Pe-Ce:0,sn.attr("transform",e((it+=L)-1,(mt+=L)-1)),sn}var $t=ue.selectAll("g.hovertext").data(U,function(pt){return F(pt)});return $t.enter().append("g").classed("hovertext",!0).each(function(){var pt=y.select(this);pt.append("rect").call(h.fill,h.addOpacity(le,.8)),pt.append("text").classed("name",!0),pt.append("path").style("stroke-width","1px"),pt.append("text").classed("nums",!0).call(v.font,_e,me)}),$t.exit().remove(),$t.each(function(pt){var At=y.select(this).attr("transform",""),Xt=pt.color;Array.isArray(Xt)&&(Xt=Xt[pt.eventData[0].pointNumber]);var Ct=pt.bgcolor||Xt,Pt=h.combine(h.opacity(Ct)?Ct:h.defaultLine,le),Be=h.combine(h.opacity(Xt)?Xt:h.defaultLine,le),tt=pt.borderColor||h.contrast(Pt),dt=j(pt,Re,te,G,je,At),Dt=dt[0],Nt=dt[1],Yt=At.select("text.nums").call(v.font,pt.fontFamily||_e,pt.fontSize||me,pt.fontColor||tt).text(Dt).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,ae),fn=At.select("text.name"),nn=0,In=0;if(Nt&&Nt!==Dt){fn.call(v.font,pt.fontFamily||_e,pt.fontSize||me,Be).text(Nt).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,ae);var Dn=q(ae,fn.node());nn=Dn.width+2*L,In=Dn.height+2*L}else fn.remove(),At.select("rect").remove();At.select("path").style({fill:Pt,stroke:tt});var kn=pt.xa._offset+(pt.x0+pt.x1)/2,rn=pt.ya._offset+(pt.y0+pt.y1)/2,pn=Math.abs(pt.x1-pt.x0),gn=Math.abs(pt.y1-pt.y0),Pn=q(ae,Yt.node()),jn=Pn.width/G._invScaleX,Kn=Pn.height/G._invScaleY;pt.ty0=(Me-Pn.top)/G._invScaleY,pt.bx=jn+2*L,pt.by=Math.max(Kn+2*L,In),pt.anchor="start",pt.txwidth=jn,pt.tx2width=nn,pt.offset=0;var rr,lr,kr=(jn+E+L+nn)*G._invScaleX;if(ne)pt.pos=kn,rr=rn+gn/2+kr<=Pe,lr=rn-gn/2-kr>=0,"top"!==pt.idealAlign&&rr||!lr?rr?(rn+=gn/2,pt.anchor="start"):pt.anchor="middle":(rn-=gn/2,pt.anchor="end");else if(pt.pos=rn,rr=kn+pn/2+kr<=Oe,lr=kn-pn/2-kr>=0,"left"!==pt.idealAlign&&rr||!lr)if(rr)kn+=pn/2,pt.anchor="start";else{pt.anchor="middle";var Xr=kr/2,sr=kn+Xr-Oe,oi=kn-Xr;sr>0&&(kn-=sr),oi<0&&(kn+=-oi)}else kn-=pn/2,pt.anchor="end";Yt.attr("text-anchor",pt.anchor),nn&&fn.attr("text-anchor",pt.anchor),At.attr("transform",e(kn,rn)+(ne?o(w):""))}),$t}function j(U,W,ae,G,te,ne){var le="",ue="";void 0!==U.nameOverride&&(U.name=U.nameOverride),U.name&&(U.trace._meta&&(U.name=_.templateString(U.name,U.trace._meta)),le=re(U.name,U.nameLength));var pe=ae.charAt(0);void 0!==U.zLabel?(void 0!==U.xLabel&&(ue+="x: "+U.xLabel+"<br>"),void 0!==U.yLabel&&(ue+="y: "+U.yLabel+"<br>"),"choropleth"!==U.trace.type&&"choroplethmapbox"!==U.trace.type&&(ue+=(ue?"z: ":"")+U.zLabel)):W&&U[pe+"Label"]===te?ue=U[("x"===pe?"y":"x")+"Label"]||"":void 0===U.xLabel?void 0!==U.yLabel&&"scattercarpet"!==U.trace.type&&(ue=U.yLabel):ue=void 0===U.yLabel?U.xLabel:"("+U.xLabel+", "+U.yLabel+")",!U.text&&0!==U.text||Array.isArray(U.text)||(ue+=(ue?"<br>":"")+U.text),void 0!==U.extraText&&(ue+=(ue?"<br>":"")+U.extraText),ne&&""===ue&&!U.hovertemplate&&(""===le&&ne.remove(),ue=le);var _e=U.hovertemplate||!1;if(_e){var me=U.hovertemplateLabels||U;U[pe+"Label"]!==te&&(me[pe+"other"]=me[pe+"Val"],me[pe+"otherLabel"]=me[pe+"Label"]),ue=(ue=_.hovertemplateString(_e,me,G._d3locale,U.eventData[0]||{},U.trace._meta)).replace(I,function(we,De){return le=re(De,U.nameLength),""})}return[ue,le]}function V(U,W,ae,G){var te=function(le){return le*ae},ne=function(le){return le*G};U.each(function(le){var ue=y.select(this);if(le.del)return ue.remove();var pe=ue.select("text.nums"),de=le.anchor,_e="end"===de?-1:1,me={start:1,end:-1,middle:0}[de],we=me*(E+L),De=we+me*(le.txwidth+L),Le=0,Ie=le.offset,je="middle"===de;je&&(we-=le.tx2width/2,De+=le.txwidth/2+L),W&&(Ie*=-C,Le=le.offset*k),ue.select("path").attr("d",je?"M-"+te(le.bx/2+le.tx2width/2)+","+ne(Ie-le.by/2)+"h"+te(le.bx)+"v"+ne(le.by)+"h-"+te(le.bx)+"Z":"M0,0L"+te(_e*E+Le)+","+ne(E+Ie)+"v"+ne(le.by/2-E)+"h"+te(_e*le.bx)+"v-"+ne(le.by)+"H"+te(_e*E+Le)+"V"+ne(Ie-E)+"Z");var ye=Le+we,Me=Ie+le.ty0-le.by/2+L,Oe=le.textAlign||"auto";"auto"!==Oe&&("left"===Oe&&"start"!==de?(pe.attr("text-anchor","start"),ye=je?-le.bx/2-le.tx2width/2+L:-le.bx-L):"right"===Oe&&"end"!==de&&(pe.attr("text-anchor","end"),ye=je?le.bx/2-le.tx2width/2-L:le.bx+L)),pe.call(l.positionText,te(ye),ne(Me)),le.tx2width&&(ue.select("text.name").call(l.positionText,te(De+me*L+Le),ne(Ie+le.ty0-le.by/2+L)),ue.select("rect").call(v.setRect,te(De+(me-1)*le.tx2width/2+Le),ne(Ie-le.by/2-1),te(le.tx2width),ne(le.by+2)))})}function Z(U,W){var ae=U.index,G=U.trace||{},te=U.cd[0],ne=U.cd[ae]||{};function le(we){return we||x(we)&&0===we}var ue=Array.isArray(ae)?function(we,De){var Le=_.castOption(te,ae,we);return le(Le)?Le:_.extractOption({},G,"",De)}:function(we,De){return _.extractOption(ne,G,we,De)};function pe(we,De,Le){var Ie=ue(De,Le);le(Ie)&&(U[we]=Ie)}if(pe("hoverinfo","hi","hoverinfo"),pe("bgcolor","hbg","hoverlabel.bgcolor"),pe("borderColor","hbc","hoverlabel.bordercolor"),pe("fontFamily","htf","hoverlabel.font.family"),pe("fontSize","hts","hoverlabel.font.size"),pe("fontColor","htc","hoverlabel.font.color"),pe("nameLength","hnl","hoverlabel.namelength"),pe("textAlign","hta","hoverlabel.align"),U.posref="y"===W||"closest"===W&&"h"===G.orientation?U.xa._offset+(U.x0+U.x1)/2:U.ya._offset+(U.y0+U.y1)/2,U.x0=_.constrain(U.x0,0,U.xa._length),U.x1=_.constrain(U.x1,0,U.xa._length),U.y0=_.constrain(U.y0,0,U.ya._length),U.y1=_.constrain(U.y1,0,U.ya._length),void 0!==U.xLabelVal&&(U.xLabel="xLabel"in U?U.xLabel:d.hoverLabelText(U.xa,U.xLabelVal,G.xhoverformat),U.xVal=U.xa.c2d(U.xLabelVal)),void 0!==U.yLabelVal&&(U.yLabel="yLabel"in U?U.yLabel:d.hoverLabelText(U.ya,U.yLabelVal,G.yhoverformat),U.yVal=U.ya.c2d(U.yLabelVal)),void 0!==U.zLabelVal&&void 0===U.zLabel&&(U.zLabel=String(U.zLabelVal)),!(isNaN(U.xerr)||"log"===U.xa.type&&U.xerr<=0)){var de=d.tickText(U.xa,U.xa.c2l(U.xerr),"hover").text;U.xLabel+=void 0!==U.xerrneg?" +"+de+" / -"+d.tickText(U.xa,U.xa.c2l(U.xerrneg),"hover").text:" \xb1 "+de,"x"===W&&(U.distance+=1)}if(!(isNaN(U.yerr)||"log"===U.ya.type&&U.yerr<=0)){var _e=d.tickText(U.ya,U.ya.c2l(U.yerr),"hover").text;U.yLabel+=void 0!==U.yerrneg?" +"+_e+" / -"+d.tickText(U.ya,U.ya.c2l(U.yerrneg),"hover").text:" \xb1 "+_e,"y"===W&&(U.distance+=1)}var me=U.hoverinfo||U.trace.hoverinfo;return me&&"all"!==me&&(-1===(me=Array.isArray(me)?me:me.split("+")).indexOf("x")&&(U.xLabel=void 0),-1===me.indexOf("y")&&(U.yLabel=void 0),-1===me.indexOf("z")&&(U.zLabel=void 0),-1===me.indexOf("text")&&(U.text=void 0),-1===me.indexOf("name")&&(U.name=void 0)),U}function Y(U,W,ae){var G,te,ne=ae.container,le=ae.fullLayout,ue=le._size,pe=ae.event,de=!!W.hLinePoint,_e=!!W.vLinePoint;if(ne.selectAll(".spikeline").remove(),_e||de){var me=h.combine(le.plot_bgcolor,le.paper_bgcolor);if(de){var we,De,Le=W.hLinePoint;G=Le&&Le.xa,"cursor"===(te=Le&&Le.ya).spikesnap?(we=pe.pointerX,De=pe.pointerY):(we=G._offset+Le.x,De=te._offset+Le.y);var Ie,je,ye=M.readability(Le.color,me)<1.5?h.contrast(me):Le.color,Me=te.spikemode,Oe=te.spikethickness,Pe=te.spikecolor||ye,Re=d.getPxPosition(U,te);if(-1!==Me.indexOf("toaxis")||-1!==Me.indexOf("across")){if(-1!==Me.indexOf("toaxis")&&(Ie=Re,je=we),-1!==Me.indexOf("across")){var Ue=te._counterDomainMin,qe=te._counterDomainMax;"free"===te.anchor&&(Ue=Math.min(Ue,te.position),qe=Math.max(qe,te.position)),Ie=ue.l+Ue*ue.w,je=ue.l+qe*ue.w}ne.insert("line",":first-child").attr({x1:Ie,x2:je,y1:De,y2:De,"stroke-width":Oe,stroke:Pe,"stroke-dasharray":v.dashStyle(te.spikedash,Oe)}).classed("spikeline",!0).classed("crisp",!0),ne.insert("line",":first-child").attr({x1:Ie,x2:je,y1:De,y2:De,"stroke-width":Oe+2,stroke:me}).classed("spikeline",!0).classed("crisp",!0)}-1!==Me.indexOf("marker")&&ne.insert("circle",":first-child").attr({cx:Re+("right"!==te.side?Oe:-Oe),cy:De,r:Oe,fill:Pe}).classed("spikeline",!0)}if(_e){var Xe,lt,He=W.vLinePoint;te=He&&He.ya,"cursor"===(G=He&&He.xa).spikesnap?(Xe=pe.pointerX,lt=pe.pointerY):(Xe=G._offset+He.x,lt=te._offset+He.y);var $e,et,nt=M.readability(He.color,me)<1.5?h.contrast(me):He.color,ct=G.spikemode,bt=G.spikethickness,kt=G.spikecolor||nt,Bt=d.getPxPosition(U,G);if(-1!==ct.indexOf("toaxis")||-1!==ct.indexOf("across")){if(-1!==ct.indexOf("toaxis")&&($e=Bt,et=lt),-1!==ct.indexOf("across")){var Et=G._counterDomainMin,ht=G._counterDomainMax;"free"===G.anchor&&(Et=Math.min(Et,G.position),ht=Math.max(ht,G.position)),$e=ue.t+(1-ht)*ue.h,et=ue.t+(1-Et)*ue.h}ne.insert("line",":first-child").attr({x1:Xe,x2:Xe,y1:$e,y2:et,"stroke-width":bt,stroke:kt,"stroke-dasharray":v.dashStyle(G.spikedash,bt)}).classed("spikeline",!0).classed("crisp",!0),ne.insert("line",":first-child").attr({x1:Xe,x2:Xe,y1:$e,y2:et,"stroke-width":bt+2,stroke:me}).classed("spikeline",!0).classed("crisp",!0)}-1!==ct.indexOf("marker")&&ne.insert("circle",":first-child").attr({cx:Xe,cy:Bt-("top"!==G.side?bt:-bt),r:bt,fill:kt}).classed("spikeline",!0)}}}function ee(U,W){return!W||W.vLinePoint!==U._spikepoints.vLinePoint||W.hLinePoint!==U._spikepoints.hLinePoint}function re(U,W){return l.plainText(U||"",{len:W,allowedTags:["br","sub","sup","b","i","em"]})}function X(U,W,ae){var G=W[U+"a"],te=W[U+"Val"],ne=W.cd[0];if("category"===G.type)te=G._categoriesMap[te];else if("date"===G.type){var le=W.trace[U+"periodalignment"];if(le){var ue=W.cd[W.index],pe=ue[U+"Start"];void 0===pe&&(pe=ue[U]);var de=ue[U+"End"];void 0===de&&(de=ue[U]);var _e=de-pe;"end"===le?te+=_e:"middle"===le&&(te+=_e/2)}te=G.d2c(te)}return ne&&ne.t&&ne.t.posLetter===G._id&&("group"!==ae.boxmode&&"group"!==ae.violinmode||(te+=ne.t.dPos)),te}function K(U){return U.offsetTop+U.clientTop}function ie(U){return U.offsetLeft+U.clientLeft}function q(U,W){var ae=U._fullLayout,G=W.getBoundingClientRect(),te=G.x,ne=G.y,le=te+G.width,ue=ne+G.height,pe=_.apply3DTransform(ae._invTransform)(te,ne),de=_.apply3DTransform(ae._invTransform)(le,ue),_e=pe[0],me=pe[1],we=de[0],De=de[1];return{x:_e,y:me,width:we-_e,height:De-me,top:Math.min(me,De),left:Math.min(_e,we),right:Math.max(_e,we),bottom:Math.max(me,De)}}},{"../../lib":503,"../../lib/events":492,"../../lib/override_cursor":514,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../legend/defaults":418,"../legend/draw":419,"./constants":400,"./helpers":402,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],404:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../color"),M=b("./helpers").isUnifiedHover;oe.exports=function(_,e,o,a){a=a||{};var l=e.legend;function i(v){a.font[v]||(a.font[v]=l?e.legend.font[v]:e.font[v])}e&&M(e.hovermode)&&(a.font||(a.font={}),i("size"),i("family"),i("color"),l?(a.bgcolor||(a.bgcolor=x.combine(e.legend.bgcolor,e.paper_bgcolor)),a.bordercolor||(a.bordercolor=e.legend.bordercolor)):a.bgcolor||(a.bgcolor=e.paper_bgcolor)),o("hoverlabel.bgcolor",a.bgcolor),o("hoverlabel.bordercolor",a.bordercolor),o("hoverlabel.namelength",a.namelength),y.coerceFont(o,"hoverlabel.font",a.font),o("hoverlabel.align",a.align)}},{"../../lib":503,"../color":366,"./helpers":402}],405:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./layout_attributes");oe.exports=function(M,_){function e(o,a){return void 0!==_[o]?_[o]:y.coerce(M,_,x,o,a)}return e("clickmode"),e("hovermode")}},{"../../lib":503,"./layout_attributes":407}],406:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../lib"),M=b("../dragelement"),_=b("./helpers"),e=b("./layout_attributes"),o=b("./hover");oe.exports={moduleType:"component",name:"fx",constants:b("./constants"),schema:{layout:e},attributes:b("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:b("./layout_global_defaults"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),getDistanceFunction:_.getDistanceFunction,getClosest:_.getClosest,inbox:_.inbox,quadrature:_.quadrature,appendArrayPointValue:_.appendArrayPointValue,castHoverOption:function(a,l,i){return x.castOption(a,l,"hoverlabel."+i)},castHoverinfo:function(a,l,i){return x.castOption(a,i,"hoverinfo",function(v){return x.coerceHoverinfo({hoverinfo:v},{_module:a._module},l)})},hover:o.hover,unhover:M.unhover,loneHover:o.loneHover,loneUnhover:function(a){var l=x.isD3Selection(a)?a:y.select(a);l.selectAll("g.hovertext").remove(),l.selectAll(".spikeline").remove()},click:b("./click")}},{"../../lib":503,"../dragelement":385,"./attributes":397,"./calc":398,"./click":399,"./constants":400,"./defaults":401,"./helpers":402,"./hover":403,"./layout_attributes":407,"./layout_defaults":408,"./layout_global_defaults":409,"@plotly/d3":58}],407:[function(b,oe,se){"use strict";var y=b("./constants"),x=b("../../plots/font_attributes"),M=x({editType:"none"});M.family.dflt=y.HOVERFONT,M.size.dflt=y.HOVERFONTSIZE,oe.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:M,grouptitlefont:x({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":585,"./constants":400}],408:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./layout_attributes"),M=b("./hovermode_defaults"),_=b("./hoverlabel_defaults");oe.exports=function(e,o){function a(h,s){return y.coerce(e,o,x,h,s)}M(e,o)&&(a("hoverdistance"),a("spikedistance")),"select"===a("dragmode")&&a("selectdirection");var l=o._has("mapbox"),i=o._has("geo"),v=o._basePlotModules.length;"zoom"===o.dragmode&&((l||i)&&1===v||l&&i&&2===v)&&(o.dragmode="pan"),_(e,o,a),y.coerceFont(a,"hoverlabel.grouptitlefont",o.hoverlabel.font)}},{"../../lib":503,"./hoverlabel_defaults":404,"./hovermode_defaults":405,"./layout_attributes":407}],409:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./hoverlabel_defaults"),M=b("./layout_attributes");oe.exports=function(_,e){x(_,e,function(o,a){return y.coerce(_,e,M,o,a)})}},{"../../lib":503,"./hoverlabel_defaults":404,"./layout_attributes":407}],410:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../lib/regex").counter,M=b("../../plots/domain").attributes,_=b("../../plots/cartesian/constants").idRegex,e=b("../../plot_api/plot_template"),o={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[x("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[_.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[_.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:M({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function a(v,h,s){var d=h[s+"axes"],p=Object.keys((v._splomAxes||{})[s]||{});return Array.isArray(d)?d:p.length?p:void 0}function l(v,h,s,d,p,f){var g=h(v+"gap",s),m=h("domain."+v);h(v+"side",d);for(var u=new Array(p),w=m[0],c=(m[1]-w)/(p-g),A=c*(1-g),k=0;k<p;k++){var C=w+c*k;u[f?p-1-k:k]=[C,C+A]}return u}function i(v,h,s,d,p){var f,g=new Array(s);function m(u,w){-1!==h.indexOf(w)&&void 0===d[w]?(g[u]=w,d[w]=u):g[u]=""}if(Array.isArray(v))for(f=0;f<s;f++)m(f,v[f]);else for(m(0,p),f=1;f<s;f++)m(f,p+(f+1));return g}oe.exports={moduleType:"component",name:"grid",schema:{layout:{grid:o}},layoutAttributes:o,sizeDefaults:function(v,h){var s=v.grid||{},d=a(h,s,"x"),p=a(h,s,"y");if(v.grid||d||p){var f,g,m=Array.isArray(s.subplots)&&Array.isArray(s.subplots[0]),u=Array.isArray(d),w=Array.isArray(p),c=u&&d!==s.xaxes&&w&&p!==s.yaxes;m?(f=s.subplots.length,g=s.subplots[0].length):(w&&(f=p.length),u&&(g=d.length));var A=e.newContainer(h,"grid"),k=I("rows",f),C=I("columns",g);if(k*C>1){!m&&!u&&!w&&"independent"===I("pattern")&&(m=!0),A._hasSubplotGrid=m;var E,L,D="top to bottom"===I("roworder"),F=m?.3:.1;c&&h._splomGridDflt&&(E=h._splomGridDflt.xside,L=h._splomGridDflt.yside),A._domains={x:l("x",I,m?.2:.1,E,C),y:l("y",I,F,L,k,D)}}else delete h.grid}function I(P,j){return y.coerce(s,A,o,P,j)}},contentDefaults:function(v,h){var s=h.grid;if(s&&s._domains){var d,p,f,g,m,u,w,c=v.grid||{},A=h._subplots,k=s._hasSubplotGrid,C=s.rows,E=s.columns,L="independent"===s.pattern,D=s._axisMap={};if(k){var N=c.subplots||[];u=s.subplots=new Array(C);var F=1;for(d=0;d<C;d++){var I=u[d]=new Array(E),P=N[d]||[];for(p=0;p<E;p++)if(L?(m=1===F?"xy":"x"+F+"y"+F,F++):m=P[p],I[p]="",-1!==A.cartesian.indexOf(m)){if(w=m.indexOf("y"),f=m.slice(0,w),g=m.slice(w),void 0!==D[f]&&D[f]!==p||void 0!==D[g]&&D[g]!==d)continue;I[p]=m,D[f]=p,D[g]=d}}}else{var j=a(h,c,"x"),V=a(h,c,"y");s.xaxes=i(j,A.xaxis,E,D,"x"),s.yaxes=i(V,A.yaxis,C,D,"y")}var Z=s._anchors={},Y="top to bottom"===s.roworder;for(var ee in D){var re,X,K,ie=ee.charAt(0),q=s[ie+"side"];if(q.length<8)Z[ee]="free";else if("x"===ie){if("t"===q.charAt(0)===Y?(re=0,X=1,K=C):(re=C-1,X=-1,K=-1),k){var U=D[ee];for(d=re;d!==K;d+=X)if((m=u[d][U])&&(w=m.indexOf("y"),m.slice(0,w)===ee)){Z[ee]=m.slice(w);break}}else for(d=re;d!==K;d+=X)if(-1!==A.cartesian.indexOf(ee+(g=s.yaxes[d]))){Z[ee]=g;break}}else if("l"===q.charAt(0)?(re=0,X=1,K=E):(re=E-1,X=-1,K=-1),k){var W=D[ee];for(d=re;d!==K;d+=X)if((m=u[W][d])&&(w=m.indexOf("y"),m.slice(w)===ee)){Z[ee]=m.slice(0,w);break}}else for(d=re;d!==K;d+=X)if(-1!==A.cartesian.indexOf((f=s.xaxes[d])+ee)){Z[ee]=f;break}}}}}},{"../../lib":503,"../../lib/regex":520,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/domain":584}],411:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/constants"),x=b("../../plot_api/plot_template").templatedArray;b("../../constants/axis_placeable_objects"),oe.exports=x("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",y.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",y.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561}],412:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../lib/to_log_range");oe.exports=function(M,_,e,o){_=_||{};var a="log"===e&&"linear"===_.type;if(a||"linear"===e&&"log"===_.type)for(var i,v,h=M._fullLayout.images,s=_._id.charAt(0),d=0;d<h.length;d++)if(v="images["+d+"].",(i=h[d])[s+"ref"]===_._id){var p=i[s],f=i["size"+s],g=null,m=null;if(a){g=x(p,_.range);var u=f/Math.pow(10,g)/2;m=2*Math.log(u+Math.sqrt(1+u*u))/Math.LN10}else m=(g=Math.pow(10,p))*(Math.pow(10,f/2)-Math.pow(10,-f/2));y(g)?y(m)||(m=null):(g=null,m=null),o(v+s,g),o(v+"size"+s,m)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],413:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plots/cartesian/axes"),M=b("../../plots/array_container_defaults"),_=b("./attributes");function e(o,a,l){function i(g,m){return y.coerce(o,a,_,g,m)}var v=i("source");if(!i("visible",!!v))return a;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var h={_fullLayout:l},s=["x","y"],d=0;d<2;d++){var p=s[d],f=x.coerceRef(o,a,h,p,"paper",void 0);"paper"!==f&&x.getFromId(h,f)._imgIndices.push(a._index),x.coercePosition(a,h,i,f,p,0)}return a}oe.exports=function(o,a){M(o,a,{name:"images",handleItemDefaults:e})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":411}],414:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../drawing"),M=b("../../plots/cartesian/axes"),_=b("../../plots/cartesian/axis_ids"),e=b("../../constants/xmlns_namespaces");oe.exports=function(o){var a,l,i=o._fullLayout,v=[],h={},s=[];for(l=0;l<i.images.length;l++){var d=i.images[l];if(d.visible)if("below"===d.layer&&"paper"!==d.xref&&"paper"!==d.yref){a=_.ref2id(d.xref)+_.ref2id(d.yref);var p=i._plots[a];if(!p){s.push(d);continue}p.mainplot&&(a=p.mainplot.id),h[a]||(h[a]=[]),h[a].push(d)}else"above"===d.layer?v.push(d):s.push(d)}var f={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},g={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function m(E){var L=y.select(this);if(this._imgSrc!==E.source)if(L.attr("xmlns",e.svg),E.source&&"data:"===E.source.slice(0,5))L.attr("xlink:href",E.source),this._imgSrc=E.source;else{var D=new Promise(function(N){var F=new Image;function I(){L.remove(),N()}this.img=F,F.setAttribute("crossOrigin","anonymous"),F.onerror=I,F.onload=function(){var P=document.createElement("canvas");P.width=this.width,P.height=this.height,P.getContext("2d",{willReadFrequently:!0}).drawImage(this,0,0);var j=P.toDataURL("image/png");L.attr("xlink:href",j),N()},L.on("error",I),F.src=E.source,this._imgSrc=E.source}.bind(this));o._promises.push(D)}}function u(E){var L,D,N=y.select(this),F=M.getFromId(o,E.xref),I=M.getFromId(o,E.yref),P="domain"===M.getRefType(E.xref),j="domain"===M.getRefType(E.yref),V=i._size;L=void 0!==F?"string"==typeof E.xref&&P?F._length*E.sizex:Math.abs(F.l2p(E.sizex)-F.l2p(0)):E.sizex*V.w,D=void 0!==I?"string"==typeof E.yref&&j?I._length*E.sizey:Math.abs(I.l2p(E.sizey)-I.l2p(0)):E.sizey*V.h;var Z,Y,ee=L*f[E.xanchor].offset,re=D*g[E.yanchor].offset,X=f[E.xanchor].sizing+g[E.yanchor].sizing;switch(Z=void 0!==F?"string"==typeof E.xref&&P?F._length*E.x+F._offset:F.r2p(E.x)+F._offset:E.x*V.w+V.l,Z+=ee,Y=void 0!==I?"string"==typeof E.yref&&j?I._length*(1-E.y)+I._offset:I.r2p(E.y)+I._offset:V.h-E.y*V.h+V.t,Y+=re,E.sizing){case"fill":X+=" slice";break;case"stretch":X="none"}N.attr({x:Z,y:Y,width:L,height:D,preserveAspectRatio:X,opacity:E.opacity});var K=(F&&"domain"!==M.getRefType(E.xref)?F._id:"")+(I&&"domain"!==M.getRefType(E.yref)?I._id:"");x.setClipUrl(N,K?"clip"+i._uid+K:null,o)}var w=i._imageLowerLayer.selectAll("image").data(s),c=i._imageUpperLayer.selectAll("image").data(v);w.enter().append("image"),c.enter().append("image"),w.exit().remove(),c.exit().remove(),w.each(function(E){m.bind(this)(E),u.bind(this)(E)}),c.each(function(E){m.bind(this)(E),u.bind(this)(E)});var A=Object.keys(i._plots);for(l=0;l<A.length;l++){var k=i._plots[a=A[l]];if(k.imagelayer){var C=k.imagelayer.selectAll("image").data(h[a]||[]);C.enter().append("image"),C.exit().remove(),C.each(function(E){m.bind(this)(E),u.bind(this)(E)})}}}},{"../../constants/xmlns_namespaces":480,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../drawing":388,"@plotly/d3":58}],415:[function(b,oe,se){"use strict";oe.exports={moduleType:"component",name:"images",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("images"),draw:b("./draw"),convertCoords:b("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":411,"./convert_coords":412,"./defaults":413,"./draw":414}],416:[function(b,oe,se){"use strict";var y=b("../../plots/font_attributes"),x=b("../color/attributes");oe.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:x.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:y({editType:"legend"}),grouptitlefont:y({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:y({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":585,"../color/attributes":365}],417:[function(b,oe,se){"use strict";oe.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],418:[function(b,oe,se){"use strict";var y=b("../../registry"),x=b("../../lib"),M=b("../../plot_api/plot_template"),_=b("../../plots/attributes"),e=b("./attributes"),o=b("../../plots/layout_attributes"),a=b("./helpers");oe.exports=function(l,i,v){var h,s=l.legend||{},d=M.newContainer(i,"legend");function p(I,P){return x.coerce(s,d,e,I,P)}for(var f=function(I,P){return x.coerce(h._input,h,_,I,P)},g=i.font||{},m=x.coerceFont(p,"grouptitlefont",x.extendFlat({},g,{size:Math.round(1.1*g.size)})),u=0,w=!1,c="normal",A=0;A<v.length;A++)(h=v[A]).visible&&((h.showlegend||h._dfltShowLegend&&!(h._module&&h._module.attributes&&h._module.attributes.showlegend&&!1===h._module.attributes.showlegend.dflt))&&(u++,h.showlegend&&(w=!0,(y.traceIs(h,"pie-like")||!0===h._input.showlegend)&&u++),x.coerceFont(f,"legendgrouptitle.font",m)),(y.traceIs(h,"bar")&&"stack"===i.barmode||-1!==["tonextx","tonexty"].indexOf(h.fill))&&(c=a.isGrouped({traceorder:c})?"grouped+reversed":"reversed"),void 0!==h.legendgroup&&""!==h.legendgroup&&(c=a.isReversed({traceorder:c})?"reversed+grouped":"grouped"));var k=x.coerce(l,i,o,"showlegend",w&&u>1);if(!1===k&&(i.legend=void 0),(!1!==k||s.uirevision)&&(p("uirevision",i.uirevision),!1!==k)){p("bgcolor",i.paper_bgcolor),p("bordercolor"),p("borderwidth");var C,E,L,D=x.coerceFont(p,"font",i.font),N="h"===p("orientation");if(N?(C=0,y.getComponentMethod("rangeslider","isVisible")(l.xaxis)?(E=1.1,L="bottom"):(E=-.1,L="top")):(C=1.02,E=1,L="auto"),p("traceorder",c),a.isGrouped(i.legend)&&p("tracegroupgap"),p("itemsizing"),p("itemwidth"),p("itemclick"),p("itemdoubleclick"),p("groupclick"),p("x",C),p("xanchor"),p("y",E),p("yanchor",L),p("valign"),x.noneOrAll(s,d,["x","y"]),p("title.text")){p("title.side",N?"left":"top");var F=x.extendFlat({},D,{size:x.bigFont(D.size)});x.coerceFont(p,"title.font",F)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/layout_attributes":610,"../../registry":638,"./attributes":416,"./helpers":422}],419:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../lib"),M=b("../../plots/plots"),_=b("../../registry"),e=b("../../lib/events"),o=b("../dragelement"),a=b("../drawing"),l=b("../color"),i=b("../../lib/svg_text_utils"),v=b("./handle_click"),h=b("./constants"),s=b("../../constants/alignment"),d=s.LINE_SPACING,p=s.FROM_TL,f=s.FROM_BR,g=b("./get_legend_data"),m=b("./style"),u=b("./helpers");function w(D,N,F,I,P){var j=F.data()[0][0].trace,V={event:P,node:F.node(),curveNumber:j.index,expandedIndex:j._expandedIndex,data:D.data,layout:D.layout,frames:D._transitionData._frames,config:D._context,fullData:D._fullData,fullLayout:D._fullLayout};j._group&&(V.group=j._group),_.traceIs(j,"pie-like")&&(V.label=F.datum()[0].label),!1!==e.triggerHandler(D,"plotly_legendclick",V)&&(1===I?N._clickTimeout=setTimeout(function(){D._fullLayout&&v(F,D,I)},D._context.doubleClickDelay):2===I&&(N._clickTimeout&&clearTimeout(N._clickTimeout),D._legendMouseDownTime=0,!1!==e.triggerHandler(D,"plotly_legenddoubleclick",V)&&v(F,D,I)))}function c(D,N,F){var I,P,j=D.data()[0][0],V=j.trace,Z=_.traceIs(V,"pie-like"),Y=!F._inHover&&N._context.edits.legendText&&!Z,ee=F._maxNameLength;j.groupTitle?(I=j.groupTitle.text,P=j.groupTitle.font):(P=F.font,F.entries?I=j.text:(I=Z?j.label:V.name,V._meta&&(I=x.templateString(I,V._meta))));var re=x.ensureSingle(D,"text","legendtext");re.attr("text-anchor","start").call(a.font,P).text(Y?A(I,ee):I),i.positionText(re,F.itemwidth+2*h.itemGap,0),Y?re.call(i.makeEditable,{gd:N,text:I}).call(C,D,N,F).on("edit",function(K){this.text(A(K,ee)).call(C,D,N,F);var ie=j.trace._fullInput||{},q={};if(_.hasTransform(ie,"groupby")){var U=_.getTransformIndices(ie,"groupby"),ae=x.keyedContainer(ie,"transforms["+U[U.length-1]+"].styles","target","value.name");ae.set(j.trace._group,K),q=ae.constructUpdate()}else q.name=K;return _.call("_guiRestyle",N,q,V.index)}):C(re,D,N,F)}function A(D,N){var F=Math.max(4,N);if(D&&D.trim().length>=F/2)return D;for(var I=F-(D=D||"").length;I>0;I--)D+=" ";return D}function k(D,N){var F,I=N._context.doubleClickDelay,P=1,j=x.ensureSingle(D,"rect","legendtoggle",function(V){N._context.staticPlot||V.style("cursor","pointer").attr("pointer-events","all"),V.call(l.fill,"rgba(0,0,0,0)")});N._context.staticPlot||(j.on("mousedown",function(){(F=(new Date).getTime())-N._legendMouseDownTime<I?P+=1:(P=1,N._legendMouseDownTime=F)}),j.on("mouseup",function(){if(!N._dragged&&!N._editing){var V=N._fullLayout.legend;(new Date).getTime()-N._legendMouseDownTime>I&&(P=Math.max(P-1,1)),w(N,V,D,P,y.event)}}))}function C(D,N,F,I,P){I._inHover&&D.attr("data-notex",!0),i.convertToTspans(D,F,function(){!function(j,V,Z,Y){var ee=j.data()[0][0];if(Z._inHover||!ee||ee.trace.showlegend){var re=j.select("g[class*=math-group]"),X=re.node();Z||(Z=V._fullLayout.legend);var q,U,ie=Z.borderwidth,W=(1===Y?Z.title.font:ee.groupTitle?ee.groupTitle.font:Z.font).size*d;if(X){var ae=a.bBox(X);q=ae.height,U=ae.width,1===Y?a.setTranslate(re,ie,ie+.75*q):a.setTranslate(re,0,.25*q)}else{var G=j.select(1===Y?".legendtitletext":".legendtext"),te=i.lineCount(G),ne=G.node();if(q=W*te,U=ne?a.bBox(ne).width:0,1===Y)"left"===Z.title.side&&(U+=2*h.itemGap),i.positionText(G,ie+h.titlePad,ie+W);else{var le=2*h.itemGap+Z.itemwidth;ee.groupTitle&&(le=h.itemGap,U-=Z.itemwidth),i.positionText(G,le,-W*((te-1)/2-.3))}}1===Y?(Z._titleWidth=U,Z._titleHeight=q):(ee.lineHeight=W,ee.height=Math.max(q,16)+3,ee.width=U)}else j.remove()}(N,F,I,P)})}function E(D){return x.isRightAnchor(D)?"right":x.isCenterAnchor(D)?"center":"left"}function L(D){return x.isBottomAnchor(D)?"bottom":x.isMiddleAnchor(D)?"middle":"top"}oe.exports=function(D,N){return N||(N=D._fullLayout.legend||{}),function(F,I){var P,j,V=F._fullLayout,Z="legend"+V._uid,Y=I._inHover;if(Y?(P=I.layer,Z+="-hover"):P=V._infolayer,P){if(F._legendMouseDownTime||(F._legendMouseDownTime=0),Y){if(!I.entries)return;j=g(I.entries,I)}else{if(!F.calcdata)return;j=V.showlegend&&g(F.calcdata,I)}var ee=V.hiddenlabels||[];if(!(Y||V.showlegend&&j.length))return P.selectAll(".legend").remove(),V._topdefs.select("#"+Z).remove(),M.autoMargin(F,"legend");var re=x.ensureSingle(P,"g","legend",function(te){Y||te.attr("pointer-events","all")}),X=x.ensureSingleById(V._topdefs,"clipPath",Z,function(te){te.append("rect")}),K=x.ensureSingle(re,"rect","bg",function(te){te.attr("shape-rendering","crispEdges")});K.call(l.stroke,I.bordercolor).call(l.fill,I.bgcolor).style("stroke-width",I.borderwidth+"px");var ie=x.ensureSingle(re,"g","scrollbox"),q=I.title;if(I._titleWidth=0,I._titleHeight=0,q.text){var U=x.ensureSingle(ie,"text","legendtitletext");U.attr("text-anchor","start").call(a.font,q.font).text(q.text),C(U,ie,F,I,1)}else ie.selectAll(".legendtitletext").remove();var W=x.ensureSingle(re,"rect","scrollbar",function(te){te.attr(h.scrollBarEnterAttrs).call(l.fill,h.scrollBarColor)}),ae=ie.selectAll("g.groups").data(j);ae.enter().append("g").attr("class","groups"),ae.exit().remove();var G=ae.selectAll("g.traces").data(x.identity);G.enter().append("g").attr("class","traces"),G.exit().remove(),G.style("opacity",function(te){var ne=te[0].trace;return _.traceIs(ne,"pie-like")?-1!==ee.indexOf(te[0].label)?.5:1:"legendonly"===ne.visible?.5:1}).each(function(){y.select(this).call(c,F,I)}).call(m,F,I).each(function(){Y||y.select(this).call(k,F)}),x.syncOrAsync([M.previousPromises,function(){return function(te,ne,le,ue){var pe=te._fullLayout;ue||(ue=pe.legend);var de=pe._size,_e=u.isVertical(ue),me=u.isGrouped(ue),we=ue.borderwidth,De=2*we,Le=h.itemGap,Ie=ue.itemwidth+2*Le,je=2*(we+Le),ye=L(ue),Me=ue.y<0||0===ue.y&&"top"===ye,Oe=ue.y>1||1===ue.y&&"bottom"===ye,Pe=ue.tracegroupgap;ue._maxHeight=Math.max(Me||Oe?pe.height/2:de.h,30);var Re=0;ue._width=0,ue._height=0;var Mn,sn,ke,Se,Ue=(sn=0,ke=0,(Se=(Mn=ue).title.side)&&(-1!==Se.indexOf("left")&&(sn=Mn._titleWidth),-1!==Se.indexOf("top")&&(ke=Mn._titleHeight)),[sn,ke]);if(_e)le.each(function(Mn){var sn=Mn[0].height;a.setTranslate(this,we+Ue[0],we+Ue[1]+ue._height+sn/2+Le),ue._height+=sn,ue._width=Math.max(ue._width,Mn[0].width)}),Re=Ie+ue._width,ue._width+=Le+Ie+De,ue._height+=je,me&&(ne.each(function(Mn,sn){a.setTranslate(this,0,sn*ue.tracegroupgap)}),ue._height+=(ue._lgroupsLength-1)*ue.tracegroupgap);else{var qe=E(ue),He=Oe||Me,$e=pe.width/2;ue._maxWidth=Math.max(ue.x<0||0===ue.x&&"right"===qe?He&&"left"===qe?de.l+de.w:$e:ue.x>1||1===ue.x&&"left"===qe?He&&"right"===qe?de.r+de.w:$e:de.w,2*Ie);var et=0,nt=0;le.each(function(Mn){var sn=Mn[0].width+Ie;et=Math.max(et,sn),nt+=sn}),Re=null;var ct=0;if(me){var bt=0,kt=0,Bt=0;ne.each(function(){var Mn=0,sn=0;y.select(this).selectAll("g.traces").each(function(Se){var Ce=Se[0].width,Ve=Se[0].height;a.setTranslate(this,Ue[0],Ue[1]+we+Le+Ve/2+sn),sn+=Ve,Mn=Math.max(Mn,Ie+Ce)});var ke=Mn+Le;kt>0&&ke+we+kt>ue._maxWidth?(ct=Math.max(ct,kt),kt=0,Bt+=bt+Pe,bt=sn):bt=Math.max(bt,sn),a.setTranslate(this,kt,Bt),kt+=ke}),ue._width=Math.max(ct,kt)+we,ue._height=Bt+bt+je}else{var Et=le.size(),ht=nt+De+(Et-1)*Le<ue._maxWidth,at=0,Ft=0,en=0,Qt=0;le.each(function(Mn){var sn=Mn[0].height,ke=Ie+Mn[0].width,Se=(ht?ke:et)+Le;Se+we+Ft-Le>=ue._maxWidth&&(ct=Math.max(ct,Qt),Ft=0,en+=at,ue._height+=at,at=0),a.setTranslate(this,Ue[0]+we+Ft,Ue[1]+we+en+sn/2+Le),Qt=Ft+ke+Le,Ft+=Se,at=Math.max(at,sn)}),ht?(ue._width=Ft+De,ue._height=at+je):(ue._width=Math.max(ct,Qt)+De,ue._height+=at+je)}}ue._width=Math.ceil(Math.max(ue._width+Ue[0],ue._titleWidth+2*(we+h.titlePad))),ue._height=Math.ceil(Math.max(ue._height+Ue[1],ue._titleHeight+2*(we+h.itemGap))),ue._effHeight=Math.min(ue._height,ue._maxHeight);var tn=te._context.edits,dn=tn.legendText||tn.legendPosition;le.each(function(Mn){var sn=y.select(this).select(".legendtoggle"),ke=Mn[0].height,Se=dn?Ie:Re||Ie+Mn[0].width;_e||(Se+=Le/2),a.setRect(sn,0,-ke/2,Se,ke)})}(F,ae,G,I)},function(){var te,ne,le,ue,He,$e,et,nt,pe=V._size,de=I.borderwidth;if(!Y){if(et=E($e=(He=F)._fullLayout.legend),nt=L($e),M.autoMargin(He,"legend",{x:$e.x,y:$e.y,l:$e._width*p[et],r:$e._width*f[et],b:$e._effHeight*f[nt],t:$e._effHeight*p[nt]}))return;var _e=pe.l+pe.w*I.x-p[E(I)]*I._width,me=pe.t+pe.h*(1-I.y)-p[L(I)]*I._effHeight;if(V.margin.autoexpand){var we=_e,De=me;_e=x.constrain(_e,0,V.width-I._width),me=x.constrain(me,0,V.height-I._effHeight),_e!==we&&x.log("Constrain legend.x to make legend fit inside graph"),me!==De&&x.log("Constrain legend.y to make legend fit inside graph")}a.setTranslate(re,_e,me)}if(W.on(".drag",null),re.on("wheel",null),Y||I._height<=I._maxHeight||F._context.staticPlot){var Le=I._effHeight;Y&&(Le=I._height),K.attr({width:I._width-de,height:Le-de,x:de/2,y:de/2}),a.setTranslate(ie,0,0),X.select("rect").attr({width:I._width-2*de,height:Le-2*de,x:de,y:de}),a.setClipUrl(ie,Z,F),a.setRect(W,0,0,0,0),delete I._scrollY}else{var Ie,ye,Me=Math.max(h.scrollBarMinHeight,I._effHeight*I._effHeight/I._height),Oe=I._effHeight-Me-2*h.scrollBarMargin,Pe=I._height-I._effHeight,Re=Oe/Pe,Ue=Math.min(I._scrollY||0,Pe);K.attr({width:I._width-2*de+h.scrollBarWidth+h.scrollBarMargin,height:I._effHeight-de,x:de/2,y:de/2}),X.select("rect").attr({width:I._width-2*de+h.scrollBarWidth+h.scrollBarMargin,height:I._effHeight-2*de,x:de,y:de+Ue}),a.setClipUrl(ie,Z,F),lt(Ue,Me,Re),re.on("wheel",function(){lt(Ue=x.constrain(I._scrollY+y.event.deltaY/Oe*Pe,0,Pe),Me,Re),0!==Ue&&Ue!==Pe&&y.event.preventDefault()});var qe=y.behavior.drag().on("dragstart",function(){var He=y.event.sourceEvent;Ie="touchstart"===He.type?He.changedTouches[0].clientY:He.clientY,ye=Ue}).on("drag",function(){var He=y.event.sourceEvent;2===He.buttons||He.ctrlKey||lt(Ue=function($e,et,nt){return x.constrain((nt-et)/Re+$e,0,Pe)}(ye,Ie,"touchmove"===He.type?He.changedTouches[0].clientY:He.clientY),Me,Re)});W.call(qe);var Xe=y.behavior.drag().on("dragstart",function(){var He=y.event.sourceEvent;"touchstart"===He.type&&(Ie=He.changedTouches[0].clientY,ye=Ue)}).on("drag",function(){var He=y.event.sourceEvent;"touchmove"===He.type&&lt(Ue=function($e,et,nt){return x.constrain((et-nt)/Re+$e,0,Pe)}(ye,Ie,He.changedTouches[0].clientY),Me,Re)});ie.call(Xe)}function lt(He,$e,et){I._scrollY=F._fullLayout.legend._scrollY=He,a.setTranslate(ie,0,-He),a.setRect(W,I._width,h.scrollBarMargin+He*et,h.scrollBarWidth,$e),X.select("rect").attr("y",de+He)}F._context.edits.legendPosition&&(re.classed("cursor-move",!0),o.init({element:re.node(),gd:F,prepFn:function(){var He=a.getTranslate(re);le=He.x,ue=He.y},moveFn:function(He,$e){var et=le+He,nt=ue+$e;a.setTranslate(re,et,nt),te=o.align(et,0,pe.l,pe.l+pe.w,I.xanchor),ne=o.align(nt,0,pe.t+pe.h,pe.t,I.yanchor)},doneFn:function(){void 0!==te&&void 0!==ne&&_.call("_guiRelayout",F,{"legend.x":te,"legend.y":ne})},clickFn:function(He,$e){var et=P.selectAll("g.traces").filter(function(){var nt=this.getBoundingClientRect();return $e.clientX>=nt.left&&$e.clientX<=nt.right&&$e.clientY>=nt.top&&$e.clientY<=nt.bottom});et.size()>0&&w(F,re,et,He,$e)}}))}],F)}}(D,N)}},{"../../constants/alignment":471,"../../lib":503,"../../lib/events":492,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":417,"./get_legend_data":420,"./handle_click":421,"./helpers":422,"./style":424,"@plotly/d3":58}],420:[function(b,oe,se){"use strict";var y=b("../../registry"),x=b("./helpers");oe.exports=function(M,_){var e,o,a=_._inHover,l=x.isGrouped(_),i=x.isReversed(_),v={},h=[],s=!1,d={},p=0,f=0;function g(V,Z){if(""!==V&&x.isGrouped(_))-1===h.indexOf(V)?(h.push(V),s=!0,v[V]=[Z]):v[V].push(Z);else{var Y="~~i"+p;h.push(Y),v[Y]=[Z],p++}}for(e=0;e<M.length;e++){var m=M[e],u=m[0],w=u.trace,c=w.legendgroup;if(a||w.visible&&w.showlegend)if(y.traceIs(w,"pie-like"))for(d[c]||(d[c]={}),o=0;o<m.length;o++){var A=m[o].label;d[c][A]||(g(c,{label:A,color:m[o].color,i:m[o].i,trace:w,pts:m[o].pts}),d[c][A]=!0,f=Math.max(f,(A||"").length))}else g(c,u),f=Math.max(f,(w.name||"").length)}if(!h.length)return[];var k=!s||!l,C=[];for(e=0;e<h.length;e++){var E=v[h[e]];C.push(k?E[0]:E)}for(k&&(C=[C]),e=0;e<C.length;e++){var L=1/0;for(o=0;o<C[e].length;o++){var D=C[e][o].trace.legendrank;L>D&&(L=D)}C[e][0]._groupMinRank=L,C[e][0]._preGroupSort=e}var N=function(V,Z){return V.trace.legendrank-Z.trace.legendrank||V._preSort-Z._preSort};for(C.forEach(function(V,Z){V[0]._preGroupSort=Z}),C.sort(function(V,Z){return V[0]._groupMinRank-Z[0]._groupMinRank||V[0]._preGroupSort-Z[0]._preGroupSort}),e=0;e<C.length;e++){C[e].forEach(function(V,Z){V._preSort=Z}),C[e].sort(N);var F=C[e][0].trace,I=null;for(o=0;o<C[e].length;o++){var P=C[e][o].trace.legendgrouptitle;if(P&&P.text){I=P,a&&(P.font=_._groupTitleFont);break}}if(i&&C[e].reverse(),I){var j=!1;for(o=0;o<C[e].length;o++)if(y.traceIs(C[e][o].trace,"pie-like")){j=!0;break}C[e].unshift({i:-1,groupTitle:I,noClick:j,trace:{showlegend:F.showlegend,legendgroup:F.legendgroup,visible:"toggleitem"===_.groupclick||F.visible}})}for(o=0;o<C[e].length;o++)C[e][o]=[C[e][o]]}return _._lgroupsLength=C.length,_._maxNameLength=f,C}},{"../../registry":638,"./helpers":422}],421:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../registry"),M=!0;oe.exports=function(_,e,o){var a=e._fullLayout;if(!e._dragged&&!e._editing){var l,i=a.legend.itemclick,v=a.legend.itemdoubleclick,h=a.legend.groupclick;if(1===o&&"toggle"===i&&"toggleothers"===v&&M&&e.data&&e._context.showTips&&y.notifier(y._(e,"Double-click on legend to isolate one trace"),"long"),M=!1,1===o?l=i:2===o&&(l=v),l){var s="togglegroup"===h,d=a.hiddenlabels?a.hiddenlabels.slice():[],p=_.data()[0][0];if(!p.groupTitle||!p.noClick){var f,g,m,u,w,c=e._fullData,A=p.trace,k=A.legendgroup,C={},E=[],L=[],D=[];if(x.traceIs(A,"pie-like")){var N=p.label,F=d.indexOf(N);"toggle"===l?-1===F?d.push(N):d.splice(F,1):"toggleothers"===l&&(d=[],e.calcdata[0].forEach(function(W){N!==W.label&&d.push(W.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===d.length&&-1===F&&(d=[])),x.call("_guiRelayout",e,"hiddenlabels",d)}else{var I,P=k&&k.length,j=[];if(P)for(f=0;f<c.length;f++)(I=c[f]).visible&&I.legendgroup===k&&j.push(f);if("toggle"===l){var V;switch(A.visible){case!0:V="legendonly";break;case!1:V=!1;break;case"legendonly":V=!0}if(P)if(s)for(f=0;f<c.length;f++)!1!==c[f].visible&&c[f].legendgroup===k&&U(c[f],V);else U(A,V);else U(A,V)}else if("toggleothers"===l){var ee,X=!0;for(f=0;f<c.length;f++)if(ee=!0!==c[f].showlegend,!(c[f]===A||ee||P&&c[f].legendgroup===k||!0!==c[f].visible||x.traceIs(c[f],"notLegendIsolatable"))){X=!1;break}for(f=0;f<c.length;f++)if(!1!==c[f].visible&&!x.traceIs(c[f],"notLegendIsolatable"))switch(A.visible){case"legendonly":U(c[f],!0);break;case!0:ee=!0!==c[f].showlegend&&!c[f].legendgroup,U(c[f],!!(c[f]===A||P&&c[f].legendgroup===k||ee)||!!X||"legendonly")}}for(f=0;f<L.length;f++)if(m=L[f]){var K=m.constructUpdate(),ie=Object.keys(K);for(g=0;g<ie.length;g++)(C[u=ie[g]]=C[u]||[])[D[f]]=K[u]}for(w=Object.keys(C),f=0;f<w.length;f++)for(u=w[f],g=0;g<E.length;g++)C[u].hasOwnProperty(g)||(C[u][g]=void 0);x.call("_guiRestyle",e,C,E)}}}}function q(W,ae,G){var te=E.indexOf(W),ne=C[ae];return ne||(ne=C[ae]=[]),-1===E.indexOf(W)&&(E.push(W),te=E.length-1),ne[te]=G,te}function U(W,ae){if(!p.groupTitle||s){var G=W._fullInput;if(x.hasTransform(G,"groupby")){var te=L[G.index];if(!te){var ne=x.getTransformIndices(G,"groupby");te=y.keyedContainer(G,"transforms["+ne[ne.length-1]+"].styles","target","value.visible"),L[G.index]=te}var ue=te.get(W._group);void 0===ue&&(ue=!0),!1!==ue&&te.set(W._group,ae),D[G.index]=q(G.index,"visible",!1!==G.visible)}else q(G.index,"visible",!1!==G.visible&&ae)}}}},{"../../lib":503,"../../registry":638}],422:[function(b,oe,se){"use strict";se.isGrouped=function(y){return-1!==(y.traceorder||"").indexOf("grouped")},se.isVertical=function(y){return"h"!==y.orientation},se.isReversed=function(y){return-1!==(y.traceorder||"").indexOf("reversed")}},{}],423:[function(b,oe,se){"use strict";oe.exports={moduleType:"component",name:"legend",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),draw:b("./draw"),style:b("./style")}},{"./attributes":416,"./defaults":418,"./draw":419,"./style":424}],424:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../registry"),M=b("../../lib"),_=M.strTranslate,e=b("../drawing"),o=b("../color"),a=b("../colorscale/helpers").extractOpts,l=b("../../traces/scatter/subtypes"),i=b("../../traces/pie/style_one"),v=b("../../traces/pie/helpers").castOption,h=b("./constants");function s(f,g){return(g?"radial":"horizontal")+(f?"":"reversed")}function d(f){var g=f[0].trace,m=g.contours,u=l.hasLines(g),w=l.hasMarkers(g),c=g.visible&&g.fill&&"none"!==g.fill,A=!1,k=!1;if(m){var C=m.coloring;"lines"===C?A=!0:u="none"===C||"heatmap"===C||m.showlines,"constraint"===m.type?c="="!==m._operation:"fill"!==C&&"heatmap"!==C||(k=!0)}return{showMarker:w,showLine:u,showFill:c,showGradientLine:A,showGradientFill:k,anyLine:u||A,anyFill:c||k}}function p(f,g,m){return f&&M.isArrayOrTypedArray(f)?g:f>m?m:f}oe.exports=function(f,g,m){m||(m=g._fullLayout.legend);var w="constant"===m.itemsizing,c=m.itemwidth,k=_((c+2*h.itemGap)/2,0),C=function(D,N,F,I){var P;if(D+1)P=D;else{if(!(N&&N.width>0))return 0;P=N.width}return w?I:Math.min(P,F)};function E(D,N,F){var I=D[0].trace,P=I.marker||{},j=P.line||{},V=F?I.visible&&I.type===F:x.traceIs(I,"bar"),Z=y.select(N).select("g.legendpoints").selectAll("path.legend"+F).data(V?[D]:[]);Z.enter().append("path").classed("legend"+F,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),Z.exit().remove(),Z.each(function(Y){var ee=y.select(this),re=Y[0],X=C(re.mlw,P.line,5,2);ee.style("stroke-width",X+"px");var K=re.mcc;if(!m._inHover&&"mc"in re){var ie=a(P),q=ie.mid;void 0===q&&(q=(ie.max+ie.min)/2),K=e.tryColorscale(P,"")(q)}var U=K||re.mc||P.color,W=P.pattern,ae=W&&e.getPatternAttr(W.shape,0,"");if(ae){var G=e.getPatternAttr(W.bgcolor,0,null),te=e.getPatternAttr(W.fgcolor,0,null),ne=W.fgopacity,le=p(W.size,8,10),ue=p(W.solidity,.5,1);ee.call(e.pattern,"legend",g,"legend-"+I.uid,ae,le,ue,K,W.fillmode,G,te,ne)}else ee.call(o.fill,U);X&&o.stroke(ee,re.mlc||j.color)})}function L(D,N,F){var I=D[0],P=I.trace,j=F?P.visible&&P.type===F:x.traceIs(P,F),V=y.select(N).select("g.legendpoints").selectAll("path.legend"+F).data(j?[D]:[]);if(V.enter().append("path").classed("legend"+F,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),V.exit().remove(),V.size()){var Z=(P.marker||{}).line,Y=C(v(Z.width,I.pts),Z,5,2),ee=M.minExtend(P,{marker:{line:{width:Y}}});ee.marker.line.color=Z.color;var re=M.minExtend(I,{trace:ee});i(V,re,ee)}}f.each(function(D){var N=y.select(this),F=M.ensureSingle(N,"g","layers");F.style("opacity",D[0].trace.opacity);var I=m.valign,P=D[0].lineHeight,j=D[0].height;F.attr("transform","middle"!==I&&P&&j?_(0,{top:1,bottom:-1}[I]*(.5*(P-j+3))):null),F.selectAll("g.legendfill").data([D]).enter().append("g").classed("legendfill",!0),F.selectAll("g.legendlines").data([D]).enter().append("g").classed("legendlines",!0);var Z=F.selectAll("g.legendsymbols").data([D]);Z.enter().append("g").classed("legendsymbols",!0),Z.selectAll("g.legendpoints").data([D]).enter().append("g").classed("legendpoints",!0)}).each(function(D){var N,F=D[0].trace,I=[];if(F.visible)switch(F.type){case"histogram2d":case"heatmap":I=[["M-15,-2V4H15V-2Z"]],N=!0;break;case"choropleth":case"choroplethmapbox":I=[["M-6,-6V6H6V-6Z"]],N=!0;break;case"densitymapbox":I=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],N="radial";break;case"cone":I=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],N=!1;break;case"streamtube":I=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],N=!1;break;case"surface":I=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],N=!0;break;case"mesh3d":I=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],N=!1;break;case"volume":I=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],N=!0;break;case"isosurface":I=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],N=!1}var P=y.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(I);P.enter().append("path").classed("legend3dandfriends",!0).attr("transform",k).style("stroke-miterlimit",1),P.exit().remove(),P.each(function(j,V){var Z,Y=y.select(this),ee=a(F),re=ee.colorscale,X=ee.reversescale;if(re){if(!N){var K=re.length;Z=0===V?re[X?K-1:0][1]:1===V?re[X?0:K-1][1]:re[Math.floor((K-1)/2)][1]}}else{var ie=F.vertexcolor||F.facecolor||F.color;Z=M.isArrayOrTypedArray(ie)?ie[V]||ie[0]:ie}Y.attr("d",j[0]),Z?Y.call(o.fill,Z):Y.call(function(q){q.size()&&e.gradient(q,g,"legendfill-"+F.uid,s(X,"radial"===N),re,"fill")})})}).each(function(D){var N=D[0].trace,F="waterfall"===N.type;if(D[0]._distinct&&F){var I=D[0].trace[D[0].dir].marker;return D[0].mc=I.color,D[0].mlw=I.line.width,D[0].mlc=I.line.color,E(D,this,"waterfall")}var P=[];N.visible&&F&&(P=D[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var j=y.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(P);j.enter().append("path").classed("legendwaterfall",!0).attr("transform",k).style("stroke-miterlimit",1),j.exit().remove(),j.each(function(V){var Z=y.select(this),Y=N[V[0]].marker,ee=C(void 0,Y.line,5,2);Z.attr("d",V[1]).style("stroke-width",ee+"px").call(o.fill,Y.color),ee&&Z.call(o.stroke,Y.line.color)})}).each(function(D){E(D,this,"funnel")}).each(function(D){E(D,this)}).each(function(D){var N=D[0].trace,F=y.select(this).select("g.legendpoints").selectAll("path.legendbox").data(N.visible&&x.traceIs(N,"box-violin")?[D]:[]);F.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),F.exit().remove(),F.each(function(){var I=y.select(this);if("all"!==N.boxpoints&&"all"!==N.points||0!==o.opacity(N.fillcolor)||0!==o.opacity((N.line||{}).color)){var P=C(void 0,N.line,5,2);I.style("stroke-width",P+"px").call(o.fill,N.fillcolor),P&&o.stroke(I,N.line.color)}else{var j=M.minExtend(N,{marker:{size:w?12:M.constrain(N.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});F.call(e.pointStyle,j,g)}})}).each(function(D){L(D,this,"funnelarea")}).each(function(D){L(D,this,"pie")}).each(function(D){var N,F,I=d(D),P=I.showFill,j=I.showLine,V=I.showGradientLine,Z=I.showGradientFill,Y=I.anyFill,ee=I.anyLine,re=D[0],X=re.trace,K=a(X),ie=K.colorscale,q=K.reversescale,U=l.hasMarkers(X)||!Y?"M5,0":ee?"M5,-2":"M5,-3",W=y.select(this),ae=W.select(".legendfill").selectAll("path").data(P||Z?[D]:[]);if(ae.enter().append("path").classed("js-fill",!0),ae.exit().remove(),ae.attr("d",U+"h"+c+"v6h-"+c+"z").call(function(ne){ne.size()&&(P?e.fillGroupStyle(ne,g):e.gradient(ne,g,"legendfill-"+X.uid,s(q),ie,"fill"))}),j||V){var G=C(void 0,X.line,10,5);F=M.minExtend(X,{line:{width:G}}),N=[M.minExtend(re,{trace:F})]}var te=W.select(".legendlines").selectAll("path").data(j||V?[N]:[]);te.enter().append("path").classed("js-line",!0),te.exit().remove(),te.attr("d",U+(V?"l"+c+",0.0001":"h"+c)).call(j?e.lineGroupStyle:function(ne){if(ne.size()){var le="legendline-"+X.uid;e.lineGroupStyle(ne),e.gradient(ne,g,le,s(q),ie,"stroke")}})}).each(function(D){var N,F,I=d(D),V=I.showLine,Z=I.showMarker,Y=D[0],ee=Y.trace,re=!Z&&!I.anyLine&&!I.anyFill&&l.hasText(ee);function X(te,ne,le,ue){var pe=M.nestedProperty(ee,te).get(),de=M.isArrayOrTypedArray(pe)&&ne?ne(pe):pe;if(w&&de&&void 0!==ue&&(de=ue),le){if(de<le[0])return le[0];if(de>le[1])return le[1]}return de}function K(te){return Y._distinct&&Y.index&&te[Y.index]?te[Y.index]:te[0]}if(Z||re||V){var ie={},q={};if(Z){ie.mc=X("marker.color",K),ie.mx=X("marker.symbol",K),ie.mo=X("marker.opacity",M.mean,[.2,1]),ie.mlc=X("marker.line.color",K),ie.mlw=X("marker.line.width",M.mean,[0,5],2),q.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var U=X("marker.size",M.mean,[2,16],12);ie.ms=U,q.marker.size=U}V&&(q.line={width:X("line.width",K,[0,10],5)}),re&&(ie.tx="Aa",ie.tp=X("textposition",K),ie.ts=10,ie.tc=X("textfont.color",K),ie.tf=X("textfont.family",K)),N=[M.minExtend(Y,ie)],(F=M.minExtend(ee,q)).selectedpoints=null,F.texttemplate=null}var W=y.select(this).select("g.legendpoints"),ae=W.selectAll("path.scatterpts").data(Z?N:[]);ae.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",k),ae.exit().remove(),ae.call(e.pointStyle,F,g),Z&&(N[0].mrc=3);var G=W.selectAll("g.pointtext").data(re?N:[]);G.enter().append("g").classed("pointtext",!0).append("text").attr("transform",k),G.exit().remove(),G.selectAll("text").call(e.textPointStyle,F,g)}).each(function(D){var N=D[0].trace,F=y.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(N.visible&&"candlestick"===N.type?[D,D]:[]);F.enter().append("path").classed("legendcandle",!0).attr("d",function(I,P){return P?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",k).style("stroke-miterlimit",1),F.exit().remove(),F.each(function(I,P){var j=y.select(this),V=N[P?"increasing":"decreasing"],Z=C(void 0,V.line,5,2);j.style("stroke-width",Z+"px").call(o.fill,V.fillcolor),Z&&o.stroke(j,V.line.color)})}).each(function(D){var N=D[0].trace,F=y.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(N.visible&&"ohlc"===N.type?[D,D]:[]);F.enter().append("path").classed("legendohlc",!0).attr("d",function(I,P){return P?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",k).style("stroke-miterlimit",1),F.exit().remove(),F.each(function(I,P){var j=y.select(this),V=N[P?"increasing":"decreasing"],Z=C(void 0,V.line,5,2);j.style("fill","none").call(e.dashLine,V.line.dash,Z),Z&&o.stroke(j,V.line.color)})})}},{"../../lib":503,"../../registry":638,"../../traces/pie/helpers":906,"../../traces/pie/style_one":912,"../../traces/scatter/subtypes":952,"../color":366,"../colorscale/helpers":377,"../drawing":388,"./constants":417,"@plotly/d3":58}],425:[function(b,oe,se){"use strict";b("./constants"),oe.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":427}],426:[function(b,oe,se){"use strict";var y=b("../../registry"),x=b("../../plots/plots"),M=b("../../plots/cartesian/axis_ids"),_=b("../../fonts/ploticon"),e=b("../shapes/draw").eraseActiveShape,o=b("../../lib"),a=o._,l=oe.exports={};function i(u,w){var c,A,k=w.currentTarget,C=k.getAttribute("data-attr"),E=k.getAttribute("data-val")||!0,L=u._fullLayout,D={},N=M.list(u,null,!0),F=L._cartesianSpikesEnabled;if("zoom"===C){var I,P="in"===E?.5:2,j=(1+P)/2,V=(1-P)/2;for(A=0;A<N.length;A++)if(!(c=N[A]).fixedrange)if(I=c._name,"auto"===E)D[I+".autorange"]=!0;else if("reset"===E){if(void 0===c._rangeInitial)D[I+".autorange"]=!0;else{var Z=c._rangeInitial.slice();D[I+".range[0]"]=Z[0],D[I+".range[1]"]=Z[1]}void 0!==c._showSpikeInitial&&(D[I+".showspikes"]=c._showSpikeInitial,"on"!==F||c._showSpikeInitial||(F="off"))}else{var Y=[c.r2l(c.range[0]),c.r2l(c.range[1])],ee=[j*Y[0]+V*Y[1],j*Y[1]+V*Y[0]];D[I+".range[0]"]=c.l2r(ee[0]),D[I+".range[1]"]=c.l2r(ee[1])}}else"hovermode"!==C||"x"!==E&&"y"!==E||k.setAttribute("data-val",E=L._isHoriz?"y":"x"),D[C]=E;L._cartesianSpikesEnabled=F,y.call("_guiRelayout",u,D)}function v(u,w){for(var c=w.currentTarget,A=c.getAttribute("data-attr"),k=c.getAttribute("data-val")||!0,C=u._fullLayout._subplots.gl3d||[],E={},L=A.split("."),D=0;D<C.length;D++)E[C[D]+"."+L[1]]=k;E.dragmode="pan"===k?k:"zoom",y.call("_guiRelayout",u,E)}function h(u,w){for(var c=w.currentTarget.getAttribute("data-attr"),A="resetLastSave"===c,k="resetDefault"===c,C=u._fullLayout,E=C._subplots.gl3d||[],L={},D=0;D<E.length;D++){var N,F=E[D],I=F+".camera",P=F+".aspectratio",j=F+".aspectmode",V=C[F]._scene;A?(L[I+".up"]=V.viewInitial.up,L[I+".eye"]=V.viewInitial.eye,L[I+".center"]=V.viewInitial.center,N=!0):k&&(L[I+".up"]=null,L[I+".eye"]=null,L[I+".center"]=null,N=!0),N&&(L[P+".x"]=V.viewInitial.aspectratio.x,L[P+".y"]=V.viewInitial.aspectratio.y,L[P+".z"]=V.viewInitial.aspectratio.z,L[j]=V.viewInitial.aspectmode)}y.call("_guiRelayout",u,L)}function s(u,w){var c=w.currentTarget,A=c._previousVal,k=u._fullLayout,C=k._subplots.gl3d||[],E=["xaxis","yaxis","zaxis"],L={},D={};if(A)D=A,c._previousVal=null;else{for(var N=0;N<C.length;N++){var F=C[N],I=k[F],P=F+".hovermode";L[P]=I.hovermode,D[P]=!1;for(var j=0;j<3;j++){var V=E[j],Z=F+"."+V+".showspikes";D[Z]=!1,L[Z]=I[V].showspikes}}c._previousVal=L}return D}function d(u,w){for(var c=w.currentTarget,A=c.getAttribute("data-attr"),k=c.getAttribute("data-val")||!0,C=u._fullLayout,E=C._subplots.geo||[],L=0;L<E.length;L++){var D=E[L];if("zoom"===A){var F=C[D].projection.scale;y.call("_guiRelayout",u,D+".projection.scale","in"===k?2*F:.5*F)}}"reset"===A&&m(u,"geo")}function p(u){var w=u._fullLayout;return!w.hovermode&&(w._has("cartesian")?w._isHoriz?"y":"x":"closest")}function f(u){var w=p(u);y.call("_guiRelayout",u,"hovermode",w)}function g(u,w){for(var c=w.currentTarget.getAttribute("data-val"),A=u._fullLayout,k=A._subplots.mapbox||[],C={},E=0;E<k.length;E++){var L=k[E],D=A[L].zoom;C[L+".zoom"]="in"===c?1.05*D:D/1.05}y.call("_guiRelayout",u,C)}function m(u,w){for(var c=u._fullLayout,A=c._subplots[w]||[],k={},C=0;C<A.length;C++)for(var E=A[C],L=c[E]._subplot.viewInitial,D=Object.keys(L),N=0;N<D.length;N++){var F=D[N];k[E+"."+F]=L[F]}y.call("_guiRelayout",u,k)}l.toImage={name:"toImage",title:function(u){return a(u,"png"===((u._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:_.camera,click:function(u){var w=u._context.toImageButtonOptions,c={format:w.format||"png"};o.notifier(a(u,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==c.format&&o.isIE()&&(o.notifier(a(u,"IE only supports svg.  Changing format to svg."),"long"),c.format="svg"),["filename","width","height","scale"].forEach(function(A){A in w&&(c[A]=w[A])}),y.call("downloadImage",u,c).then(function(A){o.notifier(a(u,"Snapshot succeeded")+" - "+A,"long")}).catch(function(){o.notifier(a(u,"Sorry, there was a problem downloading your snapshot!"),"long")})}},l.sendDataToCloud={name:"sendDataToCloud",title:function(u){return a(u,"Edit in Chart Studio")},icon:_.disk,click:function(u){x.sendDataToCloud(u)}},l.editInChartStudio={name:"editInChartStudio",title:function(u){return a(u,"Edit in Chart Studio")},icon:_.pencil,click:function(u){x.sendDataToCloud(u)}},l.zoom2d={name:"zoom2d",_cat:"zoom",title:function(u){return a(u,"Zoom")},attr:"dragmode",val:"zoom",icon:_.zoombox,click:i},l.pan2d={name:"pan2d",_cat:"pan",title:function(u){return a(u,"Pan")},attr:"dragmode",val:"pan",icon:_.pan,click:i},l.select2d={name:"select2d",_cat:"select",title:function(u){return a(u,"Box Select")},attr:"dragmode",val:"select",icon:_.selectbox,click:i},l.lasso2d={name:"lasso2d",_cat:"lasso",title:function(u){return a(u,"Lasso Select")},attr:"dragmode",val:"lasso",icon:_.lasso,click:i},l.drawclosedpath={name:"drawclosedpath",title:function(u){return a(u,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:_.drawclosedpath,click:i},l.drawopenpath={name:"drawopenpath",title:function(u){return a(u,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:_.drawopenpath,click:i},l.drawline={name:"drawline",title:function(u){return a(u,"Draw line")},attr:"dragmode",val:"drawline",icon:_.drawline,click:i},l.drawrect={name:"drawrect",title:function(u){return a(u,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:_.drawrect,click:i},l.drawcircle={name:"drawcircle",title:function(u){return a(u,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:_.drawcircle,click:i},l.eraseshape={name:"eraseshape",title:function(u){return a(u,"Erase active shape")},icon:_.eraseshape,click:e},l.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(u){return a(u,"Zoom in")},attr:"zoom",val:"in",icon:_.zoom_plus,click:i},l.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(u){return a(u,"Zoom out")},attr:"zoom",val:"out",icon:_.zoom_minus,click:i},l.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(u){return a(u,"Autoscale")},attr:"zoom",val:"auto",icon:_.autoscale,click:i},l.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(u){return a(u,"Reset axes")},attr:"zoom",val:"reset",icon:_.home,click:i},l.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(u){return a(u,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:_.tooltip_basic,gravity:"ne",click:i},l.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(u){return a(u,"Compare data on hover")},attr:"hovermode",val:function(u){return u._fullLayout._isHoriz?"y":"x"},icon:_.tooltip_compare,gravity:"ne",click:i},l.zoom3d={name:"zoom3d",_cat:"zoom",title:function(u){return a(u,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:_.zoombox,click:v},l.pan3d={name:"pan3d",_cat:"pan",title:function(u){return a(u,"Pan")},attr:"scene.dragmode",val:"pan",icon:_.pan,click:v},l.orbitRotation={name:"orbitRotation",title:function(u){return a(u,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:_["3d_rotate"],click:v},l.tableRotation={name:"tableRotation",title:function(u){return a(u,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:_["z-axis"],click:v},l.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(u){return a(u,"Reset camera to default")},attr:"resetDefault",icon:_.home,click:h},l.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(u){return a(u,"Reset camera to last save")},attr:"resetLastSave",icon:_.movie,click:h},l.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(u){return a(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:function(u,w){var c=s(u,w);y.call("_guiRelayout",u,c)}},l.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(u){return a(u,"Zoom in")},attr:"zoom",val:"in",icon:_.zoom_plus,click:d},l.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(u){return a(u,"Zoom out")},attr:"zoom",val:"out",icon:_.zoom_minus,click:d},l.resetGeo={name:"resetGeo",_cat:"reset",title:function(u){return a(u,"Reset")},attr:"reset",val:null,icon:_.autoscale,click:d},l.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(u){return a(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:f},l.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(u){return a(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:f},l.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(u){return a(u,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:_.tooltip_basic,gravity:"ne",click:f},l.resetViewSankey={name:"resetSankeyGroup",title:function(u){return a(u,"Reset view")},icon:_.home,click:function(u){for(var w={"node.groups":[],"node.x":[],"node.y":[]},c=0;c<u._fullData.length;c++){var A=u._fullData[c]._viewInitial;w["node.groups"].push(A.node.groups.slice()),w["node.x"].push(A.node.x.slice()),w["node.y"].push(A.node.y.slice())}y.call("restyle",u,w)}},l.toggleHover={name:"toggleHover",title:function(u){return a(u,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:_.tooltip_basic,gravity:"ne",click:function(u,w){var c=s(u,w);c.hovermode=p(u),y.call("_guiRelayout",u,c)}},l.resetViews={name:"resetViews",title:function(u){return a(u,"Reset views")},icon:_.home,click:function(u,w){var c=w.currentTarget;c.setAttribute("data-attr","zoom"),c.setAttribute("data-val","reset"),i(u,w),c.setAttribute("data-attr","resetLastSave"),h(u,w),m(u,"geo"),m(u,"mapbox")}},l.toggleSpikelines={name:"toggleSpikelines",title:function(u){return a(u,"Toggle Spike Lines")},icon:_.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(u){var w=u._fullLayout;w._cartesianSpikesEnabled="on"===w._cartesianSpikesEnabled?"off":"on",y.call("_guiRelayout",u,function(A){for(var k="on"===A._fullLayout._cartesianSpikesEnabled,C=M.list(A,null,!0),E={},L=0;L<C.length;L++){var D=C[L];E[D._name+".showspikes"]=!!k||D._showSpikeInitial}return E}(u))}},l.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(u){return a(u,"Reset view")},attr:"reset",icon:_.home,click:function(u){m(u,"mapbox")}},l.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(u){return a(u,"Zoom in")},attr:"zoom",val:"in",icon:_.zoom_plus,click:g},l.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(u){return a(u,"Zoom out")},attr:"zoom",val:"out",icon:_.zoom_minus,click:g}},{"../../fonts/ploticon":482,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../shapes/draw":450}],427:[function(b,oe,se){"use strict";var y=b("./buttons"),x=Object.keys(y),M=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],_=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(M),e=[];x.forEach(function(o){!function(a){if(-1===_.indexOf(a._cat||a.name)){var l=a.name,i=(a._cat||a.name).toLowerCase();-1===e.indexOf(l)&&e.push(l),-1===e.indexOf(i)&&e.push(i)}}(y[o])}),e.sort(),oe.exports={DRAW_MODES:M,backButtons:_,foreButtons:e}},{"./buttons":426}],428:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../color"),M=b("../../plot_api/plot_template"),_=b("./attributes");oe.exports=function(e,o){var a=e.modebar||{},l=M.newContainer(o,"modebar");function i(h,s){return y.coerce(a,l,_,h,s)}i("orientation"),i("bgcolor",x.addOpacity(o.paper_bgcolor,.5));var v=x.contrast(x.rgb(o.modebar.bgcolor));i("color",x.addOpacity(v,.3)),i("activecolor",x.addOpacity(v,.7)),i("uirevision",o.uirevision),i("add"),i("remove")}},{"../../lib":503,"../../plot_api/plot_template":543,"../color":366,"./attributes":425}],429:[function(b,oe,se){"use strict";oe.exports={moduleType:"component",name:"modebar",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),manage:b("./manage")}},{"./attributes":425,"./defaults":428,"./manage":430}],430:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axis_ids"),x=b("../../traces/scatter/subtypes"),M=b("../../registry"),_=b("../fx/helpers").isUnifiedHover,e=b("./modebar"),o=b("./buttons"),a=b("./constants").DRAW_MODES;oe.exports=function(l){var i=l._fullLayout,v=l._context,h=i._modeBar;if(v.displayModeBar||v.watermark){if(!Array.isArray(v.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(v.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var s,d=v.modeBarButtons;s=Array.isArray(d)&&d.length?function(p){for(var f=0;f<p.length;f++)for(var g=p[f],m=0;m<g.length;m++){var u=g[m];if("string"==typeof u){if(void 0===o[u])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));p[f][m]=o[u]}}return p}(d):!v.displayModeBar&&v.watermark?[]:function(p){var f=p._fullLayout,g=p._fullData,m=p._context;function u(ue,pe){if("string"==typeof pe){if(pe.toLowerCase()===ue.toLowerCase())return!0}else if(pe.name===ue||(pe._cat||pe.name)===ue.toLowerCase())return!0;return!1}var w=f.modebar.add;"string"==typeof w&&(w=[w]);var c=f.modebar.remove;"string"==typeof c&&(c=[c]);var A=m.modeBarButtonsToAdd.concat(w.filter(function(ue){for(var pe=0;pe<m.modeBarButtonsToRemove.length;pe++)if(u(ue,m.modeBarButtonsToRemove[pe]))return!1;return!0})),k=m.modeBarButtonsToRemove.concat(c.filter(function(ue){for(var pe=0;pe<m.modeBarButtonsToAdd.length;pe++)if(u(ue,m.modeBarButtonsToAdd[pe]))return!1;return!0})),C=f._has("cartesian"),E=f._has("gl3d"),L=f._has("geo"),D=f._has("pie"),N=f._has("funnelarea"),F=f._has("gl2d"),I=f._has("ternary"),P=f._has("mapbox"),j=f._has("polar"),V=f._has("smith"),Z=f._has("sankey"),Y=function(ue){for(var pe=y.list({_fullLayout:ue},null,!0),de=0;de<pe.length;de++)if(!pe[de].fixedrange)return!1;return!0}(f),ee=_(f.hovermode),re=[];function X(ue){if(ue.length){for(var pe=[],de=0;de<ue.length;de++){for(var _e=ue[de],me=o[_e],we=me.name.toLowerCase(),De=(me._cat||me.name).toLowerCase(),Le=!1,Ie=0;Ie<k.length;Ie++){var je=k[Ie].toLowerCase();if(je===we||je===De){Le=!0;break}}Le||pe.push(o[_e])}re.push(pe)}}var K=["toImage"];m.showEditInChartStudio?K.push("editInChartStudio"):m.showSendToCloud&&K.push("sendDataToCloud"),X(K);var ie=[],q=[],U=[],W=[];(C||F||D||N||I)+L+E+P+j+V>1?(q=["toggleHover"],U=["resetViews"]):L?(ie=["zoomInGeo","zoomOutGeo"],q=["hoverClosestGeo"],U=["resetGeo"]):E?(q=["hoverClosest3d"],U=["resetCameraDefault3d","resetCameraLastSave3d"]):P?(ie=["zoomInMapbox","zoomOutMapbox"],q=["toggleHover"],U=["resetViewMapbox"]):F?q=["hoverClosestGl2d"]:D?q=["hoverClosestPie"]:Z?(q=["hoverClosestCartesian","hoverCompareCartesian"],U=["resetViewSankey"]):q=["toggleHover"],C&&(q=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(ue){for(var pe=0;pe<ue.length;pe++)if(!M.traceIs(ue[pe],"noHover"))return!1;return!0}(g)||ee)&&(q=[]),!C&&!F||Y||(ie=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==U[0]&&(U=["resetScale2d"])),E?W=["zoom3d","pan3d","orbitRotation","tableRotation"]:(C||F)&&!Y||I?W=["zoom2d","pan2d"]:P||L?W=["pan2d"]:j&&(W=["zoom2d"]),function(ue){for(var pe=!1,de=0;de<ue.length&&!pe;de++){var _e=ue[de];_e._module&&_e._module.selectPoints&&(M.traceIs(_e,"scatter-like")?(x.hasMarkers(_e)||x.hasText(_e))&&(pe=!0):M.traceIs(_e,"box-violin")&&"all"!==_e.boxpoints&&"all"!==_e.points||(pe=!0))}return pe}(g)&&W.push("select2d","lasso2d");var ae=[],G=function(ue){-1===ae.indexOf(ue)&&-1!==q.indexOf(ue)&&ae.push(ue)};if(Array.isArray(A)){for(var te=[],ne=0;ne<A.length;ne++){var le=A[ne];"string"==typeof le?(le=le.toLowerCase(),-1!==a.indexOf(le)?(f._has("mapbox")||f._has("cartesian"))&&W.push(le):"togglespikelines"===le?G("toggleSpikelines"):"togglehover"===le?G("toggleHover"):"hovercompare"===le?G("hoverCompareCartesian"):"hoverclosest"===le?(G("hoverClosestCartesian"),G("hoverClosestGeo"),G("hoverClosest3d"),G("hoverClosestGl2d"),G("hoverClosestPie")):"v1hovermode"===le&&(G("toggleHover"),G("hoverClosestCartesian"),G("hoverCompareCartesian"),G("hoverClosestGeo"),G("hoverClosest3d"),G("hoverClosestGl2d"),G("hoverClosestPie"))):te.push(le)}A=te}return X(W),X(ie.concat(U)),X(ae),function(ue,pe){if(pe.length)if(Array.isArray(pe[0]))for(var de=0;de<pe.length;de++)ue.push(pe[de]);else ue.push(pe);return ue}(re,A)}(l),h?h.update(l,s):i._modeBar=e(l,s)}else h&&(h.destroy(),delete i._modeBar)}},{"../../plots/cartesian/axis_ids":558,"../../registry":638,"../../traces/scatter/subtypes":952,"../fx/helpers":402,"./buttons":426,"./constants":427,"./modebar":431}],431:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("fast-isnumeric"),M=b("../../lib"),_=b("../../fonts/ploticon"),e=b("../../version").version,o=new DOMParser;function a(i){this.container=i.container,this.element=document.createElement("div"),this.update(i.graphInfo,i.buttons),this.container.appendChild(this.element)}var l=a.prototype;l.update=function(i,v){this.graphInfo=i;var h=this.graphInfo._context,s=this.graphInfo._fullLayout,d="modebar-"+s._uid;this.element.setAttribute("id",d),this._uid=d,this.element.className="modebar","hover"===h.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===s.modebar.orientation&&(this.element.className+=" vertical",v=v.reverse());var p=s.modebar,f="hover"===h.displayModeBar?".js-plotly-plot .plotly:hover ":"";M.deleteRelatedStyleRule(d),M.addRelatedStyleRule(d,f+"#"+d+" .modebar-group","background-color: "+p.bgcolor),M.addRelatedStyleRule(d,"#"+d+" .modebar-btn .icon path","fill: "+p.color),M.addRelatedStyleRule(d,"#"+d+" .modebar-btn:hover .icon path","fill: "+p.activecolor),M.addRelatedStyleRule(d,"#"+d+" .modebar-btn.active .icon path","fill: "+p.activecolor);var g=!this.hasButtons(v),m=this.hasLogo!==h.displaylogo,u=this.locale!==h.locale;if(this.locale=h.locale,(g||m||u)&&(this.removeAllButtons(),this.updateButtons(v),h.watermark||h.displaylogo)){var w=this.getLogo();h.watermark&&(w.className=w.className+" watermark"),"v"===s.modebar.orientation?this.element.insertBefore(w,this.element.childNodes[0]):this.element.appendChild(w),this.hasLogo=!0}this.updateActiveButton()},l.updateButtons=function(i){var v=this;this.buttons=i,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(h){var s=v.createGroup();h.forEach(function(d){var p=d.name;if(!p)throw new Error("must provide button 'name' in button config");if(-1!==v.buttonsNames.indexOf(p))throw new Error("button name '"+p+"' is taken");v.buttonsNames.push(p);var f=v.createButton(d);v.buttonElements.push(f),s.appendChild(f)}),v.element.appendChild(s)})},l.createGroup=function(){var i=document.createElement("div");return i.className="modebar-group",i},l.createButton=function(i){var v=this,h=document.createElement("a");h.setAttribute("rel","tooltip"),h.className="modebar-btn";var s=i.title;void 0===s?s=i.name:"function"==typeof s&&(s=s(this.graphInfo)),(s||0===s)&&h.setAttribute("data-title",s),void 0!==i.attr&&h.setAttribute("data-attr",i.attr);var d=i.val;if(void 0!==d&&("function"==typeof d&&(d=d(this.graphInfo)),h.setAttribute("data-val",d)),"function"!=typeof i.click)throw new Error("must provide button 'click' function in button config");h.addEventListener("click",function(f){i.click(v.graphInfo,f),v.updateActiveButton(f.currentTarget)}),h.setAttribute("data-toggle",i.toggle||!1),i.toggle&&y.select(h).classed("active",!0);var p=i.icon;return h.appendChild("function"==typeof p?p():this.createIcon(p||_.question)),h.setAttribute("data-gravity",i.gravity||"n"),h},l.createIcon=function(i){var v,h=x(i.height)?Number(i.height):i.ascent-i.descent,s="http://www.w3.org/2000/svg";if(i.path){(v=document.createElementNS(s,"svg")).setAttribute("viewBox",[0,0,i.width,h].join(" ")),v.setAttribute("class","icon");var d=document.createElementNS(s,"path");d.setAttribute("d",i.path),i.transform?d.setAttribute("transform",i.transform):void 0!==i.ascent&&d.setAttribute("transform","matrix(1 0 0 -1 0 "+i.ascent+")"),v.appendChild(d)}return i.svg&&(v=o.parseFromString(i.svg,"application/xml").childNodes[0]),v.setAttribute("height","1em"),v.setAttribute("width","1em"),v},l.updateActiveButton=function(i){var v=this.graphInfo._fullLayout,h=void 0!==i?i.getAttribute("data-attr"):null;this.buttonElements.forEach(function(s){var d=s.getAttribute("data-val")||!0,p=s.getAttribute("data-attr"),f="true"===s.getAttribute("data-toggle"),g=y.select(s);if(f)p===h&&g.classed("active",!g.classed("active"));else{var m=null===p?p:M.nestedProperty(v,p).get();g.classed("active",m===d)}})},l.hasButtons=function(i){var v=this.buttons;if(!v||i.length!==v.length)return!1;for(var h=0;h<i.length;++h){if(i[h].length!==v[h].length)return!1;for(var s=0;s<i[h].length;s++)if(i[h][s].name!==v[h][s].name)return!1}return!0},l.getLogo=function(){var i=this.createGroup(),v=document.createElement("a");return v.href="https://plotly.com/",v.target="_blank",v.setAttribute("data-title",M._(this.graphInfo,"Produced with Plotly.js")+" (v"+e+")"),v.className="modebar-btn plotlyjsicon modebar-btn--logo",v.appendChild(this.createIcon(_.newplotlylogo)),i.appendChild(v),i},l.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},l.destroy=function(){M.removeElement(this.container.querySelector(".modebar")),M.deleteRelatedStyleRule(this._uid)},oe.exports=function(i,v){var h=i._fullLayout,s=new a({graphInfo:i,container:h._modebardiv.node(),buttons:v});return h._privateplot&&y.select(s.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),s}},{"../../fonts/ploticon":482,"../../lib":503,"../../version":1123,"@plotly/d3":58,"fast-isnumeric":190}],432:[function(b,oe,se){"use strict";var y=b("../../plots/font_attributes"),x=b("../color/attributes"),M=(0,b("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});oe.exports={visible:{valType:"boolean",editType:"plot"},buttons:M,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:y({editType:"plot"}),bgcolor:{valType:"color",dflt:x.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:x.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../color/attributes":365}],433:[function(b,oe,se){"use strict";oe.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],434:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../color"),M=b("../../plot_api/plot_template"),_=b("../../plots/array_container_defaults"),e=b("./attributes"),o=b("./constants");function a(l,i,v,h){var s=h.calendar;function d(f,g){return y.coerce(l,i,e.buttons,f,g)}if(d("visible")){var p=d("step");"all"!==p&&(!s||"gregorian"===s||"month"!==p&&"year"!==p?d("stepmode"):i.stepmode="backward",d("count")),d("label")}}oe.exports=function(l,i,v,h,s){var d=l.rangeselector||{},p=M.newContainer(i,"rangeselector");function f(u,w){return y.coerce(d,p,e,u,w)}if(f("visible",_(d,p,{name:"buttons",handleItemDefaults:a,calendar:s}).length>0)){var g=function(u,w,c){for(var A=c.filter(function(L){return w[L].anchor===u._id}),k=0,C=0;C<A.length;C++){var E=w[A[C]].domain;E&&(k=Math.max(E[1],k))}return[u.domain[0],k+o.yPad]}(i,v,h);f("x",g[0]),f("y",g[1]),y.noneOrAll(l,i,["x","y"]),f("xanchor"),f("yanchor"),y.coerceFont(f,"font",v.font);var m=f("bgcolor");f("activecolor",x.contrast(m,o.lightAmount,o.darkAmount)),f("bordercolor"),f("borderwidth")}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../color":366,"./attributes":432,"./constants":433}],435:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../registry"),M=b("../../plots/plots"),_=b("../color"),e=b("../drawing"),o=b("../../lib"),a=o.strTranslate,l=b("../../lib/svg_text_utils"),i=b("../../plots/cartesian/axis_ids"),v=b("../../constants/alignment"),h=v.LINE_SPACING,s=v.FROM_TL,d=v.FROM_BR,p=b("./constants"),f=b("./get_update_object");function g(w){return w._id}function m(w,c,A){var C,E,k=o.ensureSingle(w,"rect","selector-rect",function(C){C.attr("shape-rendering","crispEdges")});k.attr({rx:p.rx,ry:p.ry}),k.call(_.stroke,c.bordercolor).call(_.fill,(C=c,E=A,E._isActive||E._isHovered?C.activecolor:C.bgcolor)).style("stroke-width",c.borderwidth+"px")}function u(w,c,A,k){var C,E;o.ensureSingle(w,"text","selector-text",function(C){C.attr("text-anchor","middle")}).call(e.font,c.font).text((C=A,E=k._fullLayout._meta,C.label?E?o.templateString(C.label,E):C.label:"all"===C.step?"all":C.count+C.step.charAt(0))).call(function(C){l.convertToTspans(C,k)})}oe.exports=function(w){var c=w._fullLayout._infolayer.selectAll(".rangeselector").data(function(A){for(var k=i.list(A,"x",!0),C=[],E=0;E<k.length;E++){var L=k[E];L.rangeselector&&L.rangeselector.visible&&C.push(L)}return C}(w),g);c.enter().append("g").classed("rangeselector",!0),c.exit().remove(),c.style({cursor:"pointer","pointer-events":"all"}),c.each(function(A){var k=y.select(this),C=A,E=C.rangeselector,L=k.selectAll("g.button").data(o.filterVisible(E.buttons));L.enter().append("g").classed("button",!0),L.exit().remove(),L.each(function(D){var N=y.select(this),F=f(C,D);D._isActive=function(I,P,j){if("all"===P.step)return!0===I.autorange;var V=Object.keys(j);return I.range[0]===j[V[0]]&&I.range[1]===j[V[1]]}(C,D,F),N.call(m,E,D),N.call(u,E,D,w),N.on("click",function(){w._dragged||x.call("_guiRelayout",w,F)}),N.on("mouseover",function(){D._isHovered=!0,N.call(m,E,D)}),N.on("mouseout",function(){D._isHovered=!1,N.call(m,E,D)})}),function(D,N,F,I,P){var j=0,V=0,Z=F.borderwidth;N.each(function(){var ie=y.select(this).select(".selector-text"),U=Math.max(F.font.size*h*l.lineCount(ie),16)+3;V=Math.max(V,U)}),N.each(function(){var ie=y.select(this),q=ie.select(".selector-rect"),U=ie.select(".selector-text"),W=U.node()&&e.bBox(U.node()).width,ae=F.font.size*h,G=l.lineCount(U),te=Math.max(W+10,p.minButtonWidth);ie.attr("transform",a(Z+j,Z)),q.attr({x:0,y:0,width:te,height:V}),l.positionText(U,te/2,V/2-(G-1)*ae/2+3),j+=te+5});var Y=D._fullLayout._size,ee=Y.l+Y.w*F.x,re=Y.t+Y.h*(1-F.y),X="left";o.isRightAnchor(F)&&(ee-=j,X="right"),o.isCenterAnchor(F)&&(ee-=j/2,X="center");var K="top";o.isBottomAnchor(F)&&(re-=V,K="bottom"),o.isMiddleAnchor(F)&&(re-=V/2,K="middle"),j=Math.ceil(j),V=Math.ceil(V),ee=Math.round(ee),re=Math.round(re),M.autoMargin(D,I+"-range-selector",{x:F.x,y:F.y,l:j*s[X],r:j*d[X],b:V*d[K],t:V*s[K]}),P.attr("transform",a(ee,re))}(w,L,E,C._name,k)})}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"./constants":433,"./get_update_object":436,"@plotly/d3":58}],436:[function(b,oe,se){"use strict";var y=b("d3-time"),x=b("../../lib").titleCase;oe.exports=function(M,_){var e=M._name,o={};if("all"===_.step)o[e+".autorange"]=!0;else{var a=function(l,i){var v,h=l.range,s=new Date(l.r2l(h[1])),p=y["utc"+x(i.step)],f=i.count;switch(i.stepmode){case"backward":v=l.l2r(+p.offset(s,-f));break;case"todate":var g=p.offset(s,-f);v=l.l2r(+p.ceil(g))}return[v,h[1]]}(M,_);o[e+".range[0]"]=a[0],o[e+".range[1]"]=a[1]}return o}},{"../../lib":503,"d3-time":122}],437:[function(b,oe,se){"use strict";oe.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:b("./attributes")}}},layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),draw:b("./draw")}},{"./attributes":432,"./defaults":434,"./draw":435}],438:[function(b,oe,se){"use strict";var y=b("../color/attributes");oe.exports={bgcolor:{valType:"color",dflt:y.background,editType:"plot"},bordercolor:{valType:"color",dflt:y.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":365}],439:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axis_ids").list,x=b("../../plots/cartesian/autorange").getAutoRange,M=b("./constants");oe.exports=function(_){for(var e=y(_,"x",!0),o=0;o<e.length;o++){var a=e[o],l=a[M.name];l&&l.visible&&l.autorange&&(l._input.autorange=!0,l._input.range=l.range=x(_,a))}}},{"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"./constants":440}],440:[function(b,oe,se){"use strict";oe.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],441:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plot_api/plot_template"),M=b("../../plots/cartesian/axis_ids"),_=b("./attributes"),e=b("./oppaxis_attributes");oe.exports=function(o,a,l){var i=o[l],v=a[l];if(i.rangeslider||a._requestRangeslider[v._id]){y.isPlainObject(i.rangeslider)||(i.rangeslider={});var h,s,d=i.rangeslider,p=x.newContainer(v,"rangeslider");if(k("visible")){k("bgcolor",a.plot_bgcolor),k("bordercolor"),k("borderwidth"),k("thickness"),k("autorange",!v.isValidRange(d.range)),k("range");var f=a._subplots;if(f)for(var g=f.cartesian.filter(function(E){return E.substr(0,E.indexOf("y"))===M.name2id(l)}).map(function(E){return E.substr(E.indexOf("y"),E.length)}),m=y.simpleMap(g,M.id2name),u=0;u<m.length;u++){var w=m[u];h=d[w]||{},s=x.newContainer(p,w,"yaxis");var c,A=a[w];h.range&&A.isValidRange(h.range)&&(c="fixed"),"match"!==C("rangemode",c)&&C("range",A.range.slice())}p._input=d}}function k(E,L){return y.coerce(d,p,_,E,L)}function C(E,L){return y.coerce(h,s,e,E,L)}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_ids":558,"./attributes":438,"./oppaxis_attributes":445}],442:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../registry"),M=b("../../plots/plots"),_=b("../../lib"),e=_.strTranslate,o=b("../drawing"),a=b("../color"),l=b("../titles"),i=b("../../plots/cartesian"),v=b("../../plots/cartesian/axis_ids"),h=b("../dragelement"),s=b("../../lib/setcursor"),d=b("./constants");function p(c,A,k,C){var E=_.ensureSingle(c,"rect",d.bgClassName,function(F){F.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),L=C.borderwidth%2==0?C.borderwidth:C.borderwidth-1,D=-C._offsetShift,N=o.crispRound(A,C.borderwidth);E.attr({width:C._width+L,height:C._height+L,transform:e(D,D),fill:C.bgcolor,stroke:C.bordercolor,"stroke-width":N})}function f(c,A,k,C){_.ensureSingleById(A._fullLayout._topdefs,"clipPath",C._clipId,function(L){L.append("rect").attr({x:0,y:0})}).select("rect").attr({width:C._width,height:C._height})}function g(c,A,k,C){var E,L=A.calcdata,D=c.selectAll("g."+d.rangePlotClassName).data(k._subplotsWith,_.identity);D.enter().append("g").attr("class",function(N){return d.rangePlotClassName+" "+N}).call(o.setClipUrl,C._clipId,A),D.order(),D.exit().remove(),D.each(function(N,F){var I=y.select(this),P=0===F,j=v.getFromId(A,N,"y"),V=j._name,Z=C[V],Y={data:[],layout:{xaxis:{type:k.type,domain:[0,1],range:C.range.slice(),calendar:k.calendar},width:C._width,height:C._height,margin:{t:0,b:0,l:0,r:0}},_context:A._context};k.rangebreaks&&(Y.layout.xaxis.rangebreaks=k.rangebreaks),Y.layout[V]={type:j.type,domain:[0,1],range:"match"!==Z.rangemode?Z.range.slice():j.range.slice(),calendar:j.calendar},j.rangebreaks&&(Y.layout[V].rangebreaks=j.rangebreaks),M.supplyDefaults(Y);var ee=Y._fullLayout.xaxis,re=Y._fullLayout[V];ee.clearCalc(),ee.setScale(),re.clearCalc(),re.setScale();var X={id:N,plotgroup:I,xaxis:ee,yaxis:re,isRangePlot:!0};P?E=X:(X.mainplot="xy",X.mainplotinfo=E),i.rangePlot(A,X,function(K,ie){for(var q=[],U=0;U<K.length;U++){var W=K[U],ae=W[0].trace;ae.xaxis+ae.yaxis===ie&&q.push(W)}return q}(L,N))})}function m(c,A,k,C,E){_.ensureSingle(c,"rect",d.maskMinClassName,function(L){L.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",C._height).call(a.fill,d.maskColor),_.ensureSingle(c,"rect",d.maskMaxClassName,function(L){L.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",C._height).call(a.fill,d.maskColor),"match"!==E.rangemode&&(_.ensureSingle(c,"rect",d.maskMinOppAxisClassName,function(L){L.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",C._width).call(a.fill,d.maskOppAxisColor),_.ensureSingle(c,"rect",d.maskMaxOppAxisClassName,function(L){L.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",C._width).style("border-top",d.maskOppBorder).call(a.fill,d.maskOppAxisColor))}function u(c,A,k,C){A._context.staticPlot||_.ensureSingle(c,"rect",d.slideBoxClassName,function(E){E.attr({y:0,cursor:d.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:C._height,fill:d.slideBoxFill})}function w(c,A,k,C){var E=_.ensureSingle(c,"g",d.grabberMinClassName),L=_.ensureSingle(c,"g",d.grabberMaxClassName),D={x:0,width:d.handleWidth,rx:d.handleRadius,fill:a.background,stroke:a.defaultLine,"stroke-width":d.handleStrokeWidth,"shape-rendering":"crispEdges"},N={y:Math.round(C._height/4),height:Math.round(C._height/2)};_.ensureSingle(E,"rect",d.handleMinClassName,function(I){I.attr(D)}).attr(N),_.ensureSingle(L,"rect",d.handleMaxClassName,function(I){I.attr(D)}).attr(N);var F={width:d.grabAreaWidth,x:0,y:0,fill:d.grabAreaFill,cursor:A._context.staticPlot?void 0:d.grabAreaCursor};_.ensureSingle(E,"rect",d.grabAreaMinClassName,function(I){I.attr(F)}).attr("height",C._height),_.ensureSingle(L,"rect",d.grabAreaMaxClassName,function(I){I.attr(F)}).attr("height",C._height)}oe.exports=function(c){for(var A=c._fullLayout,k=A._rangeSliderData,C=0;C<k.length;C++){var E=k[C][d.name];E._clipId=E._id+"-"+A._uid}var L=A._infolayer.selectAll("g."+d.containerClassName).data(k,function(D){return D._name});L.exit().each(function(D){A._topdefs.select("#"+D[d.name]._clipId).remove()}).remove(),0!==k.length&&(L.enter().append("g").classed(d.containerClassName,!0).attr("pointer-events","all"),L.each(function(D){var N=y.select(this),F=D[d.name],I=A[v.id2name(D.anchor)],P=F[v.id2name(D.anchor)];if(F.range){var j,V=_.simpleMap(F.range,D.r2l),Z=_.simpleMap(D.range,D.r2l);j=Z[0]<Z[1]?[Math.min(V[0],Z[0]),Math.max(V[1],Z[1])]:[Math.max(V[0],Z[0]),Math.min(V[1],Z[1])],F.range=F._input.range=_.simpleMap(j,D.l2r)}D.cleanRange("rangeslider.range");var Y=A._size,ee=D.domain;F._width=Y.w*(ee[1]-ee[0]);var re=Math.round(Y.l+Y.w*ee[0]),X=Math.round(Y.t+Y.h*(1-D._counterDomainMin)+("bottom"===D.side?D._depth:0)+F._offsetShift+d.extraPad);N.attr("transform",e(re,X)),F._rl=_.simpleMap(F.range,D.r2l);var K=F._rl[0],ie=F._rl[1],q=ie-K;if(F.p2d=function(pe){return pe/F._width*q+K},F.d2p=function(pe){return(pe-K)/q*F._width},D.rangebreaks){var U=D.locateBreaks(K,ie);if(U.length){var W,ae,G=0;for(W=0;W<U.length;W++)G+=(ae=U[W]).max-ae.min;var te=F._width/(ie-K-G),ne=[-te*K];for(W=0;W<U.length;W++)ne.push(ne[ne.length-1]-te*((ae=U[W]).max-ae.min));for(F.d2p=function(pe){for(var de=ne[0],_e=0;_e<U.length;_e++){var me=U[_e];if(pe>=me.max)de=ne[_e+1];else if(pe<me.min)break}return de+te*pe},W=0;W<U.length;W++)(ae=U[W]).pmin=F.d2p(ae.min),ae.pmax=F.d2p(ae.max);F.p2d=function(pe){for(var de=ne[0],_e=0;_e<U.length;_e++){var me=U[_e];if(pe>=me.pmax)de=ne[_e+1];else if(pe<me.pmin)break}return(pe-de)/te}}}if("match"!==P.rangemode){var le=I.r2l(P.range[0]),ue=I.r2l(P.range[1])-le;F.d2pOppAxis=function(pe){return(pe-le)/ue*F._height}}N.call(p,c,D,F).call(f,c,D,F).call(g,c,D,F).call(m,c,D,F,P).call(u,c,D,F).call(w,c,D,F),function(pe,de,_e,me){if(!de._context.staticPlot){var we=pe.select("rect."+d.slideBoxClassName).node(),De=pe.select("rect."+d.grabAreaMinClassName).node(),Le=pe.select("rect."+d.grabAreaMaxClassName).node();pe.on("mousedown",Ie),pe.on("touchstart",Ie)}function Ie(){var je=y.event,ye=je.target,Me=je.clientX||je.touches[0].clientX,Oe=Me-pe.node().getBoundingClientRect().left,Pe=me.d2p(_e._rl[0]),Re=me.d2p(_e._rl[1]),Ue=h.coverSlip();function qe(lt){var He,$e,et,nt=+(lt.clientX||lt.touches[0].clientX)-Me;switch(ye){case we:et="ew-resize",He=Pe+nt,$e=Re+nt;break;case De:et="col-resize",He=Pe+nt,$e=Re;break;case Le:et="col-resize",He=Pe,$e=Re+nt;break;default:et="ew-resize",He=Oe,$e=Oe+nt}if($e<He){var ct=$e;$e=He,He=ct}me._pixelMin=He,me._pixelMax=$e,s(y.select(Ue),et),function(bt,kt,Bt,Et){function ht(en){return Bt.l2r(_.constrain(en,Et._rl[0],Et._rl[1]))}var at=ht(Et.p2d(Et._pixelMin)),Ft=ht(Et.p2d(Et._pixelMax));window.requestAnimationFrame(function(){x.call("_guiRelayout",kt,Bt._name+".range",[at,Ft])})}(0,de,_e,me)}function Xe(){Ue.removeEventListener("mousemove",qe),Ue.removeEventListener("mouseup",Xe),this.removeEventListener("touchmove",qe),this.removeEventListener("touchend",Xe),_.removeElement(Ue)}this.addEventListener("touchmove",qe),this.addEventListener("touchend",Xe),Ue.addEventListener("mousemove",qe),Ue.addEventListener("mouseup",Xe)}}(N,c,D,F),function(pe,de,_e,me,we,De){var Le=d.handleWidth/2;function Ie(Xe){return _.constrain(Xe,0,me._width)}function je(Xe){return _.constrain(Xe,0,me._height)}function ye(Xe){return _.constrain(Xe,-Le,me._width+Le)}var Me=Ie(me.d2p(_e._rl[0])),Oe=Ie(me.d2p(_e._rl[1]));if(pe.select("rect."+d.slideBoxClassName).attr("x",Me).attr("width",Oe-Me),pe.select("rect."+d.maskMinClassName).attr("width",Me),pe.select("rect."+d.maskMaxClassName).attr("x",Oe).attr("width",me._width-Oe),"match"!==De.rangemode){var Pe=me._height-je(me.d2pOppAxis(we._rl[1])),Re=me._height-je(me.d2pOppAxis(we._rl[0]));pe.select("rect."+d.maskMinOppAxisClassName).attr("x",Me).attr("height",Pe).attr("width",Oe-Me),pe.select("rect."+d.maskMaxOppAxisClassName).attr("x",Me).attr("y",Re).attr("height",me._height-Re).attr("width",Oe-Me),pe.select("rect."+d.slideBoxClassName).attr("y",Pe).attr("height",Re-Pe)}var Ue=Math.round(ye(Me-Le))-.5,qe=Math.round(ye(Oe-Le))+.5;pe.select("g."+d.grabberMinClassName).attr("transform",e(Ue,.5)),pe.select("g."+d.grabberMaxClassName).attr("transform",e(qe,.5))}(N,0,D,F,I,P),"bottom"===D.side&&l.draw(c,D._id+"title",{propContainer:D,propName:D._name+".title",placeholder:A._dfltTitle.x,attributes:{x:D._offset+D._length/2,y:X+F._height+F._offsetShift+10+1.5*D.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":503,"../../lib/setcursor":524,"../../plots/cartesian":568,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":440,"@plotly/d3":58}],443:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axis_ids"),x=b("../../lib/svg_text_utils"),M=b("./constants"),_=b("../../constants/alignment").LINE_SPACING,e=M.name;function o(a){var l=a&&a[e];return l&&l.visible}se.isVisible=o,se.makeData=function(a){var l=y.list({_fullLayout:a},"x",!0),i=a.margin,v=[];if(!a._has("gl2d"))for(var h=0;h<l.length;h++){var s=l[h];if(o(s)){v.push(s);var d=s[e];d._id=e+s._id,d._height=(a.height-i.b-i.t)*d.thickness,d._offsetShift=Math.floor(d.borderwidth/2)}}a._rangeSliderData=v},se.autoMarginOpts=function(a,l){var i=a._fullLayout,v=l[e],h=l._id.charAt(0),s=0,d=0;return"bottom"===l.side&&(s=l._depth,l.title.text!==i._dfltTitle[h]&&(d=1.5*l.title.font.size+10+v._offsetShift,d+=(l.title.text.match(x.BR_TAG_ALL)||[]).length*l.title.font.size*_)),{x:0,y:l._counterDomainMin,l:0,r:0,t:0,b:v._height+s+Math.max(i.margin.b,d),pad:M.extraPad+2*v._offsetShift}}},{"../../constants/alignment":471,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"./constants":440}],444:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./attributes"),M=b("./oppaxis_attributes"),_=b("./helpers");oe.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:y.extendFlat({},x,{yaxis:M})}}},layoutAttributes:b("./attributes"),handleDefaults:b("./defaults"),calcAutorange:b("./calc_autorange"),draw:b("./draw"),isVisible:_.isVisible,makeData:_.makeData,autoMarginOpts:_.autoMarginOpts}},{"../../lib":503,"./attributes":438,"./calc_autorange":439,"./defaults":441,"./draw":442,"./helpers":443,"./oppaxis_attributes":445}],445:[function(b,oe,se){"use strict";oe.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],446:[function(b,oe,se){"use strict";var y=b("../annotations/attributes"),x=b("../../traces/scatter/attributes").line,M=b("../drawing/attributes").dash,_=b("../../lib/extend").extendFlat,e=b("../../plot_api/plot_template").templatedArray;b("../../constants/axis_placeable_objects"),oe.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:_({},y.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:_({},y.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:_({},x.color,{editType:"arraydraw"}),width:_({},x.width,{editType:"calc+arraydraw"}),dash:_({},M,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":927,"../annotations/attributes":349,"../drawing/attributes":387}],447:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plots/cartesian/axes"),M=b("./constants"),_=b("./helpers");function e(i){return a(i.line.width,i.xsizemode,i.x0,i.x1,i.path,!1)}function o(i){return a(i.line.width,i.ysizemode,i.y0,i.y1,i.path,!0)}function a(i,v,h,s,d,p){var f=i/2,g=p;if("pixel"===v){var m=d?_.extractPathCoords(d,p?M.paramIsY:M.paramIsX):[h,s],u=y.aggNums(Math.max,null,m),w=y.aggNums(Math.min,null,m),c=w<0?Math.abs(w)+f:f,A=u>0?u+f:f;return{ppad:f,ppadplus:g?c:A,ppadminus:g?A:c}}return{ppad:f}}function l(i,v,h,s,d){var p="category"===i.type||"multicategory"===i.type?i.r2c:i.d2c;if(void 0!==v)return[p(v),p(h)];if(s){var f,g,m,u,w=1/0,c=-1/0,A=s.match(M.segmentRE);for("date"===i.type&&(p=_.decodeDate(p)),f=0;f<A.length;f++)void 0!==(g=d[A[f].charAt(0)].drawn)&&(!(m=A[f].substr(1).match(M.paramRE))||m.length<g||((u=p(m[g]))<w&&(w=u),u>c&&(c=u)));return c>=w?[w,c]:void 0}}oe.exports=function(i){var h=y.filterVisible(i._fullLayout.shapes);if(h.length&&i._fullData.length)for(var s=0;s<h.length;s++){var d,p,f=h[s];f._extremes={};var g=x.getRefType(f.xref),m=x.getRefType(f.yref);if("paper"!==f.xref&&"domain"!==g){var u="pixel"===f.xsizemode?f.xanchor:f.x0,w="pixel"===f.xsizemode?f.xanchor:f.x1;(p=l(d=x.getFromId(i,f.xref),u,w,f.path,M.paramIsX))&&(f._extremes[d._id]=x.findExtremes(d,p,e(f)))}if("paper"!==f.yref&&"domain"!==m){var c="pixel"===f.ysizemode?f.yanchor:f.y0,A="pixel"===f.ysizemode?f.yanchor:f.y1;(p=l(d=x.getFromId(i,f.yref),c,A,f.path,M.paramIsY))&&(f._extremes[d._id]=x.findExtremes(d,p,o(f)))}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":448,"./helpers":457}],448:[function(b,oe,se){"use strict";oe.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],449:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plots/cartesian/axes"),M=b("../../plots/array_container_defaults"),_=b("./attributes"),e=b("./helpers");function o(a,l,i){function v(P,j){return y.coerce(a,l,_,P,j)}if(v("visible")){var h=v("path"),s=v("type",h?"path":"rect");"path"!==l.type&&delete l.path,v("editable"),v("layer"),v("opacity"),v("fillcolor"),v("fillrule"),v("line.width")&&(v("line.color"),v("line.dash"));for(var d=v("xsizemode"),p=v("ysizemode"),f=["x","y"],g=0;g<2;g++){var m,u,w,c=f[g],A=c+"anchor",k="x"===c?d:p,C={_fullLayout:i},E=x.coerceRef(a,l,C,c,void 0,"paper");if("range"===x.getRefType(E)?((m=x.getFromId(C,E))._shapeIndices.push(l._index),w=e.rangeToShapePosition(m),u=e.shapePositionToRange(m)):u=w=y.identity,"path"!==s){var L=c+"0",D=c+"1",N=a[L],F=a[D];a[L]=u(a[L],!0),a[D]=u(a[D],!0),"pixel"===k?(v(L,0),v(D,10)):(x.coercePosition(l,C,v,E,L,.25),x.coercePosition(l,C,v,E,D,.75)),l[L]=w(l[L]),l[D]=w(l[D]),a[L]=N,a[D]=F}if("pixel"===k){var I=a[A];a[A]=u(a[A],!0),x.coercePosition(l,C,v,E,A,.25),l[A]=w(l[A]),a[A]=I}}"path"===s?v("path"):y.noneOrAll(a,l,["x0","x1","y0","y1"])}}oe.exports=function(a,l){M(a,l,{name:"shapes",handleItemDefaults:o})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":446,"./helpers":457}],450:[function(b,oe,se){"use strict";var y=b("../../registry"),x=b("../../lib"),M=b("../../plots/cartesian/axes"),_=b("./draw_newshape/helpers").readPaths,e=b("./draw_newshape/display_outlines"),o=b("../../plots/cartesian/handle_outline").clearOutlineControllers,a=b("../color"),l=b("../drawing"),i=b("../../plot_api/plot_template").arrayEditor,v=b("../dragelement"),h=b("../../lib/setcursor"),s=b("./constants"),d=b("./helpers");function p(k){var C=k._fullLayout;for(var E in C._shapeUpperLayer.selectAll("path").remove(),C._shapeLowerLayer.selectAll("path").remove(),C._plots){var L=C._plots[E].shapelayer;L&&L.selectAll("path").remove()}for(var D=0;D<C.shapes.length;D++)C.shapes[D].visible&&m(k,D)}function f(k){return!!k._fullLayout._drawing}function g(k){return!k._context.edits.shapePosition}function m(k,C){k._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+C+'"]').remove();var E=d.makeOptionsAndPlotinfo(k,C),L=E.options,D=E.plotinfo;L._input&&!1!==L.visible&&function(F){var I=w(k,L),P={"data-index":C,"fill-rule":L.fillrule,d:I},j=L.opacity,V=L.fillcolor,Z=L.line.width?L.line.color:"rgba(0,0,0,0)",Y=L.line.width,ee=L.line.dash;Y||!0!==L.editable||(Y=5,ee="solid");var re="Z"!==I[I.length-1],X=g(k)&&L.editable&&k._fullLayout._activeShapeIndex===C;X&&(V=re?"rgba(0,0,0,0)":k._fullLayout.activeshape.fillcolor,j=k._fullLayout.activeshape.opacity);var K,ie=F.append("path").attr(P).style("opacity",j).call(a.stroke,Z).call(a.fill,V).call(l.dashLine,ee,Y);if(u(ie,k,L),(X||k._context.edits.shapePosition)&&(K=i(k.layout,"shapes",L)),X){ie.style({cursor:"move"});var q={element:ie.node(),plotinfo:D,gd:k,editHelpers:K,isActiveShape:!0},U=_(I,k);e(U,ie,q)}else k._context.edits.shapePosition?function(W,ae,G,te,ne,le){var ue,pe,de,_e,me,we,De,Le,Ie,je,ye,Me,Oe,Pe,Re,Ue,qe="pixel"===G.xsizemode,Xe="pixel"===G.ysizemode,lt="line"===G.type,He="path"===G.type,$e=le.modifyItem,et=M.getFromId(W,G.xref),nt=M.getRefType(G.xref),ct=M.getFromId(W,G.yref),bt=M.getRefType(G.yref),kt=d.getDataToPixel(W,et,!1,nt),Bt=d.getDataToPixel(W,ct,!0,bt),Et=d.getPixelToData(W,et,!1,nt),ht=d.getPixelToData(W,ct,!0,bt),at=lt?function(){var sn=Math.max(G.line.width,10),ke=ne.append("g").attr("data-index",te);ke.append("path").attr("d",ae.attr("d")).style({cursor:"move","stroke-width":sn,"stroke-opacity":"0"});var Se={"fill-opacity":"0"},Ce=Math.max(sn/2,10);return ke.append("circle").attr({"data-line-point":"start-point",cx:qe?kt(G.xanchor)+G.x0:kt(G.x0),cy:Xe?Bt(G.yanchor)-G.y0:Bt(G.y0),r:Ce}).style(Se).classed("cursor-grab",!0),ke.append("circle").attr({"data-line-point":"end-point",cx:qe?kt(G.xanchor)+G.x1:kt(G.x1),cy:Xe?Bt(G.yanchor)-G.y1:Bt(G.y1),r:Ce}).style(Se).classed("cursor-grab",!0),ke}():ae,Ft={element:at.node(),gd:W,prepFn:function(sn){var ke,Se,Ce,Ve,Ge,Qe,ot,it;f(W)||(qe&&(me=kt(G.xanchor)),Xe&&(we=Bt(G.yanchor)),"path"===G.type?Re=G.path:(ue=qe?G.x0:kt(G.x0),pe=Xe?G.y0:Bt(G.y0),de=qe?G.x1:kt(G.x1),_e=Xe?G.y1:Bt(G.y1)),ue<de?(Ie=ue,Oe="x0",je=de,Pe="x1"):(Ie=de,Oe="x1",je=ue,Pe="x0"),!Xe&&pe<_e||Xe&&pe>_e?(De=pe,ye="y0",Le=_e,Me="y1"):(De=_e,ye="y1",Le=pe,Me="y0"),en(sn),dn(ne,G),ke=ae,Ge=(Se=G).yref,Qe=M.getFromId(Ce=W,Ve=Se.xref),ot=M.getFromId(Ce,Ge),it="","paper"===Ve||Qe.autorange||(it+=Ve),"paper"===Ge||ot.autorange||(it+=Ge),l.setClipUrl(ke,it?"clip"+Ce._fullLayout._uid+it:null,Ce),Ft.moveFn="move"===Ue?Qt:tn,Ft.altKey=sn.altKey)},doneFn:function(){f(W)||(h(ae),Mn(ne),u(ae,W,G),y.call("_guiRelayout",W,le.getUpdateObj()))},clickFn:function(){f(W)||Mn(ne)}};function en(sn){if(f(W))Ue=null;else if(lt)Ue="path"===sn.target.tagName?"move":"start-point"===sn.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var ke=Ft.element.getBoundingClientRect(),Se=ke.right-ke.left,Ce=ke.bottom-ke.top,Qe=!He&&Se>10&&Ce>10&&!sn.shiftKey?v.getCursor((sn.clientX-ke.left)/Se,1-(sn.clientY-ke.top)/Ce):"move";h(ae,Qe),Ue=Qe.split("-")[0]}}function Qt(sn,ke){if("path"===G.type){var Se=function(Ge){return Ge},Ce=Se,Ve=Se;qe?$e("xanchor",G.xanchor=Et(me+sn)):(Ce=function(Ge){return Et(kt(Ge)+sn)},et&&"date"===et.type&&(Ce=d.encodeDate(Ce))),Xe?$e("yanchor",G.yanchor=ht(we+ke)):(Ve=function(Ge){return ht(Bt(Ge)+ke)},ct&&"date"===ct.type&&(Ve=d.encodeDate(Ve))),$e("path",G.path=c(Re,Ce,Ve))}else qe?$e("xanchor",G.xanchor=Et(me+sn)):($e("x0",G.x0=Et(ue+sn)),$e("x1",G.x1=Et(de+sn))),Xe?$e("yanchor",G.yanchor=ht(we+ke)):($e("y0",G.y0=ht(pe+ke)),$e("y1",G.y1=ht(_e+ke)));ae.attr("d",w(W,G)),dn(ne,G)}function tn(sn,ke){if(He){var Se=function(Be){return Be},Ce=Se,Ve=Se;qe?$e("xanchor",G.xanchor=Et(me+sn)):(Ce=function(Be){return Et(kt(Be)+sn)},et&&"date"===et.type&&(Ce=d.encodeDate(Ce))),Xe?$e("yanchor",G.yanchor=ht(we+ke)):(Ve=function(Be){return ht(Bt(Be)+ke)},ct&&"date"===ct.type&&(Ve=d.encodeDate(Ve))),$e("path",G.path=c(Re,Ce,Ve))}else if(lt){if("resize-over-start-point"===Ue){var Ge=ue+sn,Qe=Xe?pe-ke:pe+ke;$e("x0",G.x0=qe?Ge:Et(Ge)),$e("y0",G.y0=Xe?Qe:ht(Qe))}else if("resize-over-end-point"===Ue){var ot=de+sn,it=Xe?_e-ke:_e+ke;$e("x1",G.x1=qe?ot:Et(ot)),$e("y1",G.y1=Xe?it:ht(it))}}else{var mt=function(Be){return-1!==Ue.indexOf(Be)},xt=mt("n"),Vt=mt("s"),$t=mt("w"),pt=mt("e"),At=xt?De+ke:De,Xt=Vt?Le+ke:Le,Ct=$t?Ie+sn:Ie,Pt=pt?je+sn:je;Xe&&(xt&&(At=De-ke),Vt&&(Xt=Le-ke)),(!Xe&&Xt-At>10||Xe&&At-Xt>10)&&($e(ye,G[ye]=Xe?At:ht(At)),$e(Me,G[Me]=Xe?Xt:ht(Xt))),Pt-Ct>10&&($e(Oe,G[Oe]=qe?Ct:Et(Ct)),$e(Pe,G[Pe]=qe?Pt:Et(Pt)))}ae.attr("d",w(W,G)),dn(ne,G)}function dn(sn,ke){(qe||Xe)&&function(){var Se="path"!==ke.type,Ce=sn.selectAll(".visual-cue").data([0]);Ce.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Ve=kt(qe?ke.xanchor:x.midRange(Se?[ke.x0,ke.x1]:d.extractPathCoords(ke.path,s.paramIsX))),Ge=Bt(Xe?ke.yanchor:x.midRange(Se?[ke.y0,ke.y1]:d.extractPathCoords(ke.path,s.paramIsY)));Ve=d.roundPositionForSharpStrokeRendering(Ve,1),Ge=d.roundPositionForSharpStrokeRendering(Ge,1),Ce.attr("d",qe&&Xe?"M"+(Ve-1-1)+","+(Ge-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":qe?"M"+(Ve-1-1)+","+(Ge-9-1)+"v18 h2 v-18 Z":"M"+(Ve-9-1)+","+(Ge-1-1)+"h18 v2 h-18 Z")}()}function Mn(sn){sn.selectAll(".visual-cue").remove()}v.init(Ft),at.node().onmousemove=en}(k,ie,L,C,F,K):!0===L.editable&&ie.style("pointer-events",re||a.opacity(V)*j<=.5?"stroke":"all");ie.node().addEventListener("click",function(){return function(W,ae){if(g(W)){var G=+ae.node().getAttribute("data-index");if(G>=0){if(G===W._fullLayout._activeShapeIndex)return void A(W);W._fullLayout._activeShapeIndex=G,W._fullLayout._deactivateShape=A,p(W)}}}(k,ie)})}("below"!==L.layer?k._fullLayout._shapeUpperLayer:"paper"===L.xref||"paper"===L.yref?k._fullLayout._shapeLowerLayer:D._hadPlotinfo?(D.mainplotinfo||D).shapelayer:k._fullLayout._shapeLowerLayer)}function u(k,C,E){var L=(E.xref+E.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");l.setClipUrl(k,L?"clip"+C._fullLayout._uid+L:null,C)}function w(k,C){var E,L,D,N,F,I,P,j,ne,le,ue,de,_e,me,we,V=C.type,Z=M.getRefType(C.xref),Y=M.getRefType(C.yref),ee=M.getFromId(k,C.xref),re=M.getFromId(k,C.yref),X=k._fullLayout._size;if(ee?"domain"===Z?L=function(ne){return ee._offset+ee._length*ne}:(E=d.shapePositionToRange(ee),L=function(ne){return ee._offset+ee.r2p(E(ne,!0))}):L=function(ne){return X.l+X.w*ne},re?"domain"===Y?N=function(ne){return re._offset+re._length*(1-ne)}:(D=d.shapePositionToRange(re),N=function(ne){return re._offset+re.r2p(D(ne,!0))}):N=function(ne){return X.t+X.h*(1-ne)},"path"===V)return ee&&"date"===ee.type&&(L=d.decodeDate(L)),re&&"date"===re.type&&(N=d.decodeDate(N)),le=L,ue=N,de=(ne=C).xsizemode,_e=ne.ysizemode,me=ne.xanchor,we=ne.yanchor,ne.path.replace(s.segmentRE,function(De){var Le=0,Ie=De.charAt(0),je=s.paramIsX[Ie],ye=s.paramIsY[Ie],Me=s.numParams[Ie],Oe=De.substr(1).replace(s.paramRE,function(Pe){return je[Le]?Pe="pixel"===de?le(me)+Number(Pe):le(Pe):ye[Le]&&(Pe="pixel"===_e?ue(we)-Number(Pe):ue(Pe)),++Le>Me&&(Pe="X"),Pe});return Le>Me&&(Oe=Oe.replace(/[\s,]*X.*/,""),x.log("Ignoring extra params in segment "+De)),Ie+Oe});if("pixel"===C.xsizemode){var K=L(C.xanchor);F=K+C.x0,I=K+C.x1}else F=L(C.x0),I=L(C.x1);if("pixel"===C.ysizemode){var ie=N(C.yanchor);P=ie-C.y0,j=ie-C.y1}else P=N(C.y0),j=N(C.y1);if("line"===V)return"M"+F+","+P+"L"+I+","+j;if("rect"===V)return"M"+F+","+P+"H"+I+"V"+j+"H"+F+"Z";var q=(F+I)/2,U=(P+j)/2,W=Math.abs(q-F),ae=Math.abs(U-P),G="A"+W+","+ae,te=q+W+","+U;return"M"+te+G+" 0 1,1 "+q+","+(U-ae)+G+" 0 0,1 "+te+"Z"}function c(k,C,E){return k.replace(s.segmentRE,function(L){var D=0,N=L.charAt(0),F=s.paramIsX[N],I=s.paramIsY[N],P=s.numParams[N];return N+L.substr(1).replace(s.paramRE,function(j){return D>=P||(F[D]?j=C(j):I[D]&&(j=E(j)),D++),j})})}function A(k){g(k)&&k._fullLayout._activeShapeIndex>=0&&(o(k),delete k._fullLayout._activeShapeIndex,p(k))}oe.exports={draw:p,drawOne:m,eraseActiveShape:function(k){if(g(k)){o(k);var C=k._fullLayout._activeShapeIndex,E=(k.layout||{}).shapes||[];if(C<E.length){for(var L=[],D=0;D<E.length;D++)D!==C&&L.push(E[D]);delete k._fullLayout._activeShapeIndex,y.call("_guiRelayout",k,{shapes:L})}}}}},{"../../lib":503,"../../lib/setcursor":524,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/cartesian/handle_outline":565,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":448,"./draw_newshape/display_outlines":454,"./draw_newshape/helpers":455,"./helpers":457}],451:[function(b,oe,se){"use strict";var y=b("../../drawing/attributes").dash,x=b("../../../lib/extend").extendFlat;oe.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:x({},y,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":493,"../../drawing/attributes":387}],452:[function(b,oe,se){"use strict";oe.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],453:[function(b,oe,se){"use strict";var y=b("../../color");oe.exports=function(x,M,_){_("newshape.drawdirection"),_("newshape.layer"),_("newshape.fillcolor"),_("newshape.fillrule"),_("newshape.opacity"),_("newshape.line.width")&&(_("newshape.line.color",y.contrast((x||{}).plot_bgcolor||"#FFF")),_("newshape.line.dash")),_("activeshape.fillcolor"),_("activeshape.opacity")}},{"../../color":366}],454:[function(b,oe,se){"use strict";var y=b("../../dragelement"),x=b("../../dragelement/helpers").drawMode,M=b("../../../registry"),_=b("./constants"),e=_.i000,o=_.i090,a=_.i180,l=_.i270,i=b("../../../plots/cartesian/handle_outline").clearOutlineControllers,v=b("./helpers"),h=v.pointsShapeRectangle,s=v.pointsShapeEllipse,d=v.writePaths,p=b("./newshapes");oe.exports=function f(g,m,u,w){w||(w=0);var c=u.gd;function A(){f(g,m,u,w++),s(g[0])&&k({redrawing:!0})}function k(K){u.isActiveShape=!1;var ie=p(m,u);Object.keys(ie).length&&M.call((K||{}).redrawing?"relayout":"_guiRelayout",c,ie)}var C,E,L,D,N,F=u.isActiveShape,I=c._fullLayout._zoomlayer;function j(K){L=+K.srcElement.getAttribute("data-i"),D=+K.srcElement.getAttribute("data-j"),C[L][D].moveFn=V}function V(K,ie){if(g.length){var q=N[L][D][1],U=N[L][D][2],W=g[L],ae=W.length;if(h(W)){for(var G=0;G<ae;G++)if(G!==D){var te=W[G];te[1]===W[D][1]&&(te[1]=q+K),te[2]===W[D][2]&&(te[2]=U+ie)}if(W[D][1]=q+K,W[D][2]=U+ie,!h(W))for(var ne=0;ne<ae;ne++)for(var le=0;le<W[ne].length;le++)W[ne][le]=N[L][ne][le]}else W[D][1]=q+K,W[D][2]=U+ie;A()}}function Z(){k()}function Y(K,ie){if(2===K){L=+ie.srcElement.getAttribute("data-i"),D=+ie.srcElement.getAttribute("data-j");var q=g[L];h(q)||s(q)||function(){if(g.length&&g[L]&&g[L].length){for(var U=[],W=0;W<g[L].length;W++)W!==D&&U.push(g[L][W]);U.length>1&&(2!==U.length||"Z"!==U[1][0])&&(0===D&&(U[0][0]="M"),g[L]=U,A(),k())}}()}}function ee(K,ie){(function(q,U){if(g.length)for(var W=0;W<g.length;W++)for(var ae=0;ae<g[W].length;ae++)for(var G=0;G+2<g[W][ae].length;G+=2)g[W][ae][G+1]=N[W][ae][G+1]+q,g[W][ae][G+2]=N[W][ae][G+2]+U})(K,ie),A()}x(u.dragmode)?c._fullLayout._drawing=!0:c._fullLayout._activeShapeIndex>=0&&i(c),m.attr("d",d(g)),F&&!w&&(N=function(K,ie){for(var q=0;q<ie.length;q++){var U=ie[q];K[q]=[];for(var W=0;W<U.length;W++){K[q][W]=[];for(var ae=0;ae<U[W].length;ae++)K[q][W][ae]=U[W][ae]}}return K}([],g),function(K){C=[];for(var ie=0;ie<g.length;ie++){var q=g[ie],U=!h(q)&&s(q);C[ie]=[];for(var W=0;W<q.length;W++)if("Z"!==q[W][0]&&(!U||W===e||W===o||W===a||W===l)){var ae=q[W][1],G=q[W][2],te=K.append("circle").classed("cursor-grab",!0).attr("data-i",ie).attr("data-j",W).attr("cx",ae).attr("cy",G).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});C[ie][W]={element:te.node(),gd:c,prepFn:j,doneFn:Z,clickFn:Y},y.init(C[ie][W])}}}(I.append("g").attr("class","outline-controllers")),E=[],g.length&&(E[0]={element:m[0][0],gd:c,prepFn:function(K){(L=+K.srcElement.getAttribute("data-i"))||(L=0),E[L].moveFn=ee},doneFn:function(){k()}},y.init(E[0])))}},{"../../../plots/cartesian/handle_outline":565,"../../../registry":638,"../../dragelement":385,"../../dragelement/helpers":384,"./constants":452,"./helpers":455,"./newshapes":456}],455:[function(b,oe,se){"use strict";var y=b("parse-svg-path"),x=b("./constants"),M=x.CIRCLE_SIDES,_=x.SQRT2,e=b("../../../plots/cartesian/helpers"),o=e.p2r,a=e.r2p,l=[0,3,4,5,6,1,2],i=[0,3,4,1,2];function v(s,d){return Math.abs(s-d)<=1e-6}function h(s,d){var p=d[1]-s[1],f=d[2]-s[2];return Math.sqrt(p*p+f*f)}se.writePaths=function(s){var d=s.length;if(!d)return"M0,0Z";for(var p="",f=0;f<d;f++)for(var g=s[f].length,m=0;m<g;m++){var u=s[f][m][0];if("Z"===u)p+="Z";else for(var w=s[f][m].length,c=0;c<w;c++){var A=c;"Q"===u||"S"===u?A=i[c]:"C"===u&&(A=l[c]),p+=s[f][m][A],c>0&&c<w-1&&(p+=",")}}return p},se.readPaths=function(s,d,p,f){var g,m,u,w=y(s),c=[],A=-1,k=0,C=0,E=function(){m=k,u=C};E();for(var L=0;L<w.length;L++){var P=[],j=w[L][0],V=j;switch(j){case"M":c[++A]=[],P.push([V,k=+w[L][1],C=+w[L][2]]),E();break;case"Q":case"S":P.push([V,k=+w[L][3],C=+w[L][4],+w[L][1],+w[L][2]]);break;case"C":P.push([V,k=+w[L][5],C=+w[L][6],+w[L][1],+w[L][2],+w[L][3],+w[L][4]]);break;case"T":case"L":P.push([V,k=+w[L][1],C=+w[L][2]]);break;case"H":P.push([V="L",k=+w[L][1],C]);break;case"V":P.push([V="L",k,C=+w[L][1]]);break;case"A":V="L";var Z=+w[L][1],Y=+w[L][2];+w[L][4]||(Z=-Z,Y=-Y);var ee=k-Z,re=C;for(g=1;g<=M/2;g++){var X=2*Math.PI*g/M;P.push([V,ee+Z*Math.cos(X),re+Y*Math.sin(X)])}break;case"Z":k===m&&C===u||P.push([V,k=m,C=u])}for(var K=(p||{}).domain,ie=d._fullLayout._size,q=p&&"pixel"===p.xsizemode,U=p&&"pixel"===p.ysizemode,W=!1===f,ae=0;ae<P.length;ae++){for(g=0;g+2<7;g+=2){var G=P[ae][g+1],te=P[ae][g+2];void 0!==G&&void 0!==te&&(k=G,C=te,p&&(p.xaxis&&p.xaxis.p2r?(W&&(G-=p.xaxis._offset),G=q?a(p.xaxis,p.xanchor)+G:o(p.xaxis,G)):(W&&(G-=ie.l),K?G=K.x[0]+G/ie.w:G/=ie.w),p.yaxis&&p.yaxis.p2r?(W&&(te-=p.yaxis._offset),te=U?a(p.yaxis,p.yanchor)-te:o(p.yaxis,te)):(W&&(te-=ie.t),te=K?K.y[1]-te/ie.h:1-te/ie.h)),P[ae][g+1]=G,P[ae][g+2]=te)}c[A].push(P[ae].slice())}}return c},se.pointsShapeRectangle=function(s){if(5!==s.length)return!1;for(var d=1;d<3;d++)if(!v(s[0][d]-s[1][d],s[3][d]-s[2][d])||!v(s[0][d]-s[3][d],s[1][d]-s[2][d]))return!1;return!(!v(s[0][1],s[1][1])&&!v(s[0][1],s[3][1])||!(h(s[0],s[1])*h(s[0],s[3])))},se.pointsShapeEllipse=function(s){var d=s.length;if(d!==M+1)return!1;d=M;for(var p=0;p<d;p++){var f=(2*d-p)%d,g=(d/2+f)%d;if(!v(h(s[p],s[(d/2+p)%d]),h(s[f],s[g])))return!1}return!0},se.handleEllipse=function(s,d,p){if(!s)return[d,p];var f=se.ellipseOver({x0:d[0],y0:d[1],x1:p[0],y1:p[1]}),g=(f.x1+f.x0)/2,m=(f.y1+f.y0)/2,u=(f.x1-f.x0)/2,w=(f.y1-f.y0)/2;u||(u=w/=_),w||(w=u/=_);for(var c=[],A=0;A<M;A++){var k=2*A*Math.PI/M;c.push([g+u*Math.cos(k),m+w*Math.sin(k)])}return c},se.ellipseOver=function(s){var d=s.x0,p=s.y0,f=s.x1,g=s.y1,m=f-d,u=g-p,w=((d-=m)+f)/2,c=((p-=u)+g)/2;return{x0:w-(m*=_),y0:c-(u*=_),x1:w+m,y1:c+u}}},{"../../../plots/cartesian/helpers":566,"./constants":452,"parse-svg-path":250}],456:[function(b,oe,se){"use strict";var y=b("../../dragelement/helpers"),x=y.drawMode,M=y.openMode,_=b("./constants"),e=_.i000,o=_.i090,a=_.i180,l=_.i270,i=_.cos45,v=_.sin45,h=b("../../../plots/cartesian/helpers"),s=h.p2r,d=h.r2p,p=b("../../../plots/cartesian/handle_outline").clearSelect,f=b("./helpers"),g=f.readPaths,m=f.writePaths,u=f.ellipseOver;oe.exports=function(w,c){if(w.length){var A=w[0][0];if(A){var k=A.getAttribute("d"),C=c.gd,E=C._fullLayout.newshape,L=c.plotinfo,D=L.xaxis,N=L.yaxis,F=!!L.domain||!L.xaxis,I=!!L.domain||!L.yaxis,P=c.isActiveShape,j=c.dragmode,V=(C.layout||{}).shapes||[];if(!x(j)&&void 0!==P){var Z=C._fullLayout._activeShapeIndex;if(Z<V.length)switch(C._fullLayout.shapes[Z].type){case"rect":j="drawrect";break;case"circle":j="drawcircle";break;case"line":j="drawline";break;case"path":var Y=V[Z].path||"";j="Z"===Y[Y.length-1]?"drawclosedpath":"drawopenpath"}}var ee,re=M(j),X=g(k,C,L,P),K={editable:!0,xref:F?"paper":D._id,yref:I?"paper":N._id,layer:E.layer,opacity:E.opacity,line:{color:E.line.color,width:E.line.width,dash:E.line.dash}};if(re||(K.fillcolor=E.fillcolor,K.fillrule=E.fillrule),1===X.length&&(ee=X[0]),ee&&"drawrect"===j)K.type="rect",K.x0=ee[0][1],K.y0=ee[0][2],K.x1=ee[2][1],K.y1=ee[2][2];else if(ee&&"drawline"===j)K.type="line",K.x0=ee[0][1],K.y0=ee[0][2],K.x1=ee[1][1],K.y1=ee[1][2];else if(ee&&"drawcircle"===j){K.type="circle";var ie=ee[e][1],q=ee[o][1],U=ee[a][1],W=ee[l][1],ae=ee[e][2],G=ee[o][2],te=ee[a][2],ne=ee[l][2],le=L.xaxis&&("date"===L.xaxis.type||"log"===L.xaxis.type),ue=L.yaxis&&("date"===L.yaxis.type||"log"===L.yaxis.type);le&&(ie=d(L.xaxis,ie),q=d(L.xaxis,q),U=d(L.xaxis,U),W=d(L.xaxis,W)),ue&&(ae=d(L.yaxis,ae),G=d(L.yaxis,G),te=d(L.yaxis,te),ne=d(L.yaxis,ne));var pe=(q+W)/2,de=(ae+te)/2,_e=u({x0:pe,y0:de,x1:pe+(W-q+U-ie)/2*i,y1:de+(ne-G+te-ae)/2*v});le&&(_e.x0=s(L.xaxis,_e.x0),_e.x1=s(L.xaxis,_e.x1)),ue&&(_e.y0=s(L.yaxis,_e.y0),_e.y1=s(L.yaxis,_e.y1)),K.x0=_e.x0,K.y0=_e.y0,K.x1=_e.x1,K.y1=_e.y1}else K.type="path",D&&N&&function(ye,Me,Oe){var Pe="date"===Me.type,Re="date"===Oe.type;if(!Pe&&!Re)return ye;for(var Ue=0;Ue<ye.length;Ue++)for(var qe=0;qe<ye[Ue].length;qe++)for(var Xe=0;Xe+2<ye[Ue][qe].length;Xe+=2)Pe&&(ye[Ue][qe][Xe+1]=ye[Ue][qe][Xe+1].replace(" ","_")),Re&&(ye[Ue][qe][Xe+2]=ye[Ue][qe][Xe+2].replace(" ","_"))}(X,D,N),K.path=m(X),ee=null;p(C);for(var me=c.editHelpers,we=(me||{}).modifyItem,De=[],Le=0;Le<V.length;Le++){var Ie=C._fullLayout.shapes[Le];if(De[Le]=Ie._input,void 0!==P&&Le===C._fullLayout._activeShapeIndex){var je=K;switch(Ie.type){case"line":case"rect":case"circle":we("x0",je.x0),we("x1",je.x1),we("y0",je.y0),we("y1",je.y1);break;case"path":we("path",je.path)}}}return void 0===P?(De.push(K),De):me?me.getUpdateObj():{}}}}},{"../../../plots/cartesian/handle_outline":565,"../../../plots/cartesian/helpers":566,"../../dragelement/helpers":384,"./constants":452,"./helpers":455}],457:[function(b,oe,se){"use strict";var y=b("./constants"),x=b("../../lib");se.rangeToShapePosition=function(M){return"log"===M.type?M.r2d:function(_){return _}},se.shapePositionToRange=function(M){return"log"===M.type?M.d2r:function(_){return _}},se.decodeDate=function(M){return function(_){return _.replace&&(_=_.replace("_"," ")),M(_)}},se.encodeDate=function(M){return function(_){return M(_).replace(" ","_")}},se.extractPathCoords=function(M,_){var e=[];return M.match(y.segmentRE).forEach(function(o){var a=_[o.charAt(0)].drawn;if(void 0!==a){var l=o.substr(1).match(y.paramRE);!l||l.length<a||e.push(x.cleanNumber(l[a]))}}),e},se.getDataToPixel=function(M,_,e,o){var a,l=M._fullLayout._size;if(_)if("domain"===o)a=function(v){return _._length*(e?1-v:v)+_._offset};else{var i=se.shapePositionToRange(_);a=function(v){return _._offset+_.r2p(i(v,!0))},"date"===_.type&&(a=se.decodeDate(a))}else a=e?function(v){return l.t+l.h*(1-v)}:function(v){return l.l+l.w*v};return a},se.getPixelToData=function(M,_,e,o){var a,l=M._fullLayout._size;if(_)if("domain"===o)a=function(v){var h=(v-_._offset)/_._length;return e?1-h:h};else{var i=se.rangeToShapePosition(_);a=function(v){return i(_.p2r(v-_._offset))}}else a=e?function(v){return 1-(v-l.t)/l.h}:function(v){return(v-l.l)/l.w};return a},se.roundPositionForSharpStrokeRendering=function(M,_){var e=1===Math.round(_%2),o=Math.round(M);return e?o+.5:o},se.makeOptionsAndPlotinfo=function(M,_){var e=M._fullLayout.shapes[_]||{},o=M._fullLayout._plots[e.xref+e.yref];return o?o._hadPlotinfo=!0:(o={},e.xref&&"paper"!==e.xref&&(o.xaxis=M._fullLayout[e.xref+"axis"]),e.yref&&"paper"!==e.yref&&(o.yaxis=M._fullLayout[e.yref+"axis"])),o.xsizemode=e.xsizemode,o.ysizemode=e.ysizemode,o.xanchor=e.xanchor,o.yanchor=e.yanchor,{options:e,plotinfo:o}}},{"../../lib":503,"./constants":448}],458:[function(b,oe,se){"use strict";var y=b("./draw");oe.exports={moduleType:"component",name:"shapes",layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),supplyDrawNewShapeDefaults:b("./draw_newshape/defaults"),includeBasePlot:b("../../plots/cartesian/include_components")("shapes"),calcAutorange:b("./calc_autorange"),draw:y.draw,drawOne:y.drawOne}},{"../../plots/cartesian/include_components":567,"./attributes":446,"./calc_autorange":447,"./defaults":449,"./draw":450,"./draw_newshape/defaults":453}],459:[function(b,oe,se){"use strict";var y=b("../../plots/font_attributes"),x=b("../../plots/pad_attributes"),M=b("../../lib/extend").extendDeepAll,_=b("../../plot_api/edit_types").overrideAll,e=b("../../plots/animation_attributes"),o=b("../../plot_api/plot_template").templatedArray,a=b("./constants"),l=o("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});oe.exports=_(o("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:l,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:M(x({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:y({})},font:y({}),activebgcolor:{valType:"color",dflt:a.gripBgActiveColor},bgcolor:{valType:"color",dflt:a.railBgColor},bordercolor:{valType:"color",dflt:a.railBorderColor},borderwidth:{valType:"number",min:0,dflt:a.railBorderWidth},ticklen:{valType:"number",min:0,dflt:a.tickLength},tickcolor:{valType:"color",dflt:a.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:a.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/animation_attributes":548,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"./constants":460}],460:[function(b,oe,se){"use strict";oe.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],461:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plots/array_container_defaults"),M=b("./attributes"),_=b("./constants").name,e=M.steps;function o(l,i,v){function h(g,m){return y.coerce(l,i,M,g,m)}for(var s=x(l,i,{name:"steps",handleItemDefaults:a}),d=0,p=0;p<s.length;p++)s[p].visible&&d++;if(d<2?i.visible=!1:h("visible")){i._stepCount=d;var f=i._visibleSteps=y.filterVisible(s);(s[h("active")]||{}).visible||(i.active=f[0]._index),h("x"),h("y"),y.noneOrAll(l,i,["x","y"]),h("xanchor"),h("yanchor"),h("len"),h("lenmode"),h("pad.t"),h("pad.r"),h("pad.b"),h("pad.l"),y.coerceFont(h,"font",v.font),h("currentvalue.visible")&&(h("currentvalue.xanchor"),h("currentvalue.prefix"),h("currentvalue.suffix"),h("currentvalue.offset"),y.coerceFont(h,"currentvalue.font",i.font)),h("transition.duration"),h("transition.easing"),h("bgcolor"),h("activebgcolor"),h("bordercolor"),h("borderwidth"),h("ticklen"),h("tickwidth"),h("tickcolor"),h("minorticklen")}}function a(l,i){function v(s,d){return y.coerce(l,i,e,s,d)}if("skip"===l.method||Array.isArray(l.args)?v("visible"):i.visible=!1){v("method"),v("args");var h=v("label","step-"+i._index);v("value",h),v("execute")}}oe.exports=function(l,i){x(l,i,{name:_,handleItemDefaults:o})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":459,"./constants":460}],462:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../plots/plots"),M=b("../color"),_=b("../drawing"),e=b("../../lib"),o=e.strTranslate,a=b("../../lib/svg_text_utils"),l=b("../../plot_api/plot_template").arrayEditor,i=b("./constants"),v=b("../../constants/alignment"),h=v.LINE_SPACING,s=v.FROM_TL,d=v.FROM_BR;function p(P){return i.autoMarginIdRoot+P._index}function f(P){return P._index}function g(P,j){var V=_.tester.selectAll("g."+i.labelGroupClass).data(j._visibleSteps);V.enter().append("g").classed(i.labelGroupClass,!0);var Z=0,Y=0;V.each(function(ae){var G=w(y.select(this),{step:ae},j).node();if(G){var te=_.bBox(G);Y=Math.max(Y,te.height),Z=Math.max(Z,te.width)}}),V.remove();var ee=j._dims={};ee.inputAreaWidth=Math.max(i.railWidth,i.gripHeight);var re=P._fullLayout._size;if(ee.lx=re.l+re.w*j.x,ee.ly=re.t+re.h*(1-j.y),ee.outerLength="fraction"===j.lenmode?Math.round(re.w*j.len):j.len,ee.inputAreaStart=0,ee.inputAreaLength=Math.round(ee.outerLength-j.pad.l-j.pad.r),ee.labelStride=Math.max(1,Math.ceil((Z+i.labelPadding)/((ee.inputAreaLength-2*i.stepInset)/(j._stepCount-1)))),ee.labelHeight=Y,ee.currentValueMaxWidth=0,ee.currentValueHeight=0,ee.currentValueTotalHeight=0,ee.currentValueMaxLines=1,j.currentvalue.visible){var ie=_.tester.append("g");V.each(function(ae){var G=m(ie,j,ae.label),te=G.node()&&_.bBox(G.node())||{width:0,height:0},ne=a.lineCount(G);ee.currentValueMaxWidth=Math.max(ee.currentValueMaxWidth,Math.ceil(te.width)),ee.currentValueHeight=Math.max(ee.currentValueHeight,Math.ceil(te.height)),ee.currentValueMaxLines=Math.max(ee.currentValueMaxLines,ne)}),ee.currentValueTotalHeight=ee.currentValueHeight+j.currentvalue.offset,ie.remove()}ee.height=ee.currentValueTotalHeight+i.tickOffset+j.ticklen+i.labelOffset+ee.labelHeight+j.pad.t+j.pad.b;var q="left";e.isRightAnchor(j)&&(ee.lx-=ee.outerLength,q="right"),e.isCenterAnchor(j)&&(ee.lx-=ee.outerLength/2,q="center");var U="top";e.isBottomAnchor(j)&&(ee.ly-=ee.height,U="bottom"),e.isMiddleAnchor(j)&&(ee.ly-=ee.height/2,U="middle"),ee.outerLength=Math.ceil(ee.outerLength),ee.height=Math.ceil(ee.height),ee.lx=Math.round(ee.lx),ee.ly=Math.round(ee.ly);var W={y:j.y,b:ee.height*d[U],t:ee.height*s[U]};"fraction"===j.lenmode?(W.l=0,W.xl=j.x-j.len*s[q],W.r=0,W.xr=j.x+j.len*d[q]):(W.x=j.x,W.l=ee.outerLength*s[q],W.r=ee.outerLength*d[q]),x.autoMargin(P,p(j),W)}function m(P,j,V){if(j.currentvalue.visible){var Z,Y,ee=j._dims;switch(j.currentvalue.xanchor){case"right":Z=ee.inputAreaLength-i.currentValueInset-ee.currentValueMaxWidth,Y="left";break;case"center":Z=.5*ee.inputAreaLength,Y="middle";break;default:Z=i.currentValueInset,Y="left"}var re=e.ensureSingle(P,"text",i.labelClass,function(W){W.attr({"text-anchor":Y,"data-notex":1})}),X=j.currentvalue.prefix?j.currentvalue.prefix:"";if("string"==typeof V)X+=V;else{var K=j.steps[j.active].label,ie=j._gd._fullLayout._meta;ie&&(K=e.templateString(K,ie)),X+=K}j.currentvalue.suffix&&(X+=j.currentvalue.suffix),re.call(_.font,j.currentvalue.font).text(X).call(a.convertToTspans,j._gd);var q=a.lineCount(re);return a.positionText(re,Z,(ee.currentValueMaxLines+1-q)*j.currentvalue.font.size*h),re}}function u(P,j,V){e.ensureSingle(P,"rect",i.gripRectClass,function(Z){Z.call(C,j,P,V).style("pointer-events","all")}).attr({width:i.gripWidth,height:i.gripHeight,rx:i.gripRadius,ry:i.gripRadius}).call(M.stroke,V.bordercolor).call(M.fill,V.bgcolor).style("stroke-width",V.borderwidth+"px")}function w(P,j,V){var Z=e.ensureSingle(P,"text",i.labelClass,function(re){re.attr({"text-anchor":"middle","data-notex":1})}),Y=j.step.label,ee=V._gd._fullLayout._meta;return ee&&(Y=e.templateString(Y,ee)),Z.call(_.font,V.font).text(Y).call(a.convertToTspans,V._gd),Z}function c(P,j){var V=e.ensureSingle(P,"g",i.labelsClass),Z=j._dims,Y=V.selectAll("g."+i.labelGroupClass).data(Z.labelSteps);Y.enter().append("g").classed(i.labelGroupClass,!0),Y.exit().remove(),Y.each(function(ee){var re=y.select(this);re.call(w,ee,j),_.setTranslate(re,D(j,ee.fraction),i.tickOffset+j.ticklen+j.font.size*h+i.labelOffset+Z.currentValueTotalHeight)})}function A(P,j,V,Z,Y){var ee=Math.round(Z*(V._stepCount-1)),re=V._visibleSteps[ee]._index;re!==V.active&&k(P,j,V,re,!0,Y)}function k(P,j,V,Z,Y,ee){var re=V.active;V.active=Z,l(P.layout,i.name,V).applyUpdate("active",Z);var X=V.steps[V.active];j.call(L,V,ee),j.call(m,V),P.emit("plotly_sliderchange",{slider:V,step:V.steps[V.active],interaction:Y,previousActive:re}),X&&X.method&&Y&&(j._nextMethod?(j._nextMethod.step=X,j._nextMethod.doCallback=Y,j._nextMethod.doTransition=ee):(j._nextMethod={step:X,doCallback:Y,doTransition:ee},j._nextMethodRaf=window.requestAnimationFrame(function(){var K=j._nextMethod.step;K.method&&(K.execute&&x.executeAPICommand(P,K.method,K.args),j._nextMethod=null,j._nextMethodRaf=null)})))}function C(P,j,V){var Z=V.node(),Y=y.select(j);function ee(){return V.data()[0]}function re(){var X=ee();j.emit("plotly_sliderstart",{slider:X});var K=V.select("."+i.gripRectClass);y.event.stopPropagation(),y.event.preventDefault(),K.call(M.fill,X.activebgcolor);var ie=N(X,y.mouse(Z)[0]);function q(){var W=ee(),ae=N(W,y.mouse(Z)[0]);A(j,V,W,ae,!1)}function U(){var W=ee();W._dragging=!1,K.call(M.fill,W.bgcolor),Y.on("mouseup",null),Y.on("mousemove",null),Y.on("touchend",null),Y.on("touchmove",null),j.emit("plotly_sliderend",{slider:W,step:W.steps[W.active]})}A(j,V,X,ie,!0),X._dragging=!0,Y.on("mousemove",q),Y.on("touchmove",q),Y.on("mouseup",U),Y.on("touchend",U)}P.on("mousedown",re),P.on("touchstart",re)}function E(P,j){var V=P.selectAll("rect."+i.tickRectClass).data(j._visibleSteps),Z=j._dims;V.enter().append("rect").classed(i.tickRectClass,!0),V.exit().remove(),V.attr({width:j.tickwidth+"px","shape-rendering":"crispEdges"}),V.each(function(Y,ee){var re=ee%Z.labelStride==0,X=y.select(this);X.attr({height:re?j.ticklen:j.minorticklen}).call(M.fill,j.tickcolor),_.setTranslate(X,D(j,ee/(j._stepCount-1))-.5*j.tickwidth,(re?i.tickOffset:i.minorTickOffset)+Z.currentValueTotalHeight)})}function L(P,j,V){for(var Z=P.select("rect."+i.gripRectClass),Y=0,ee=0;ee<j._stepCount;ee++)if(j._visibleSteps[ee]._index===j.active){Y=ee;break}var re=D(j,Y/(j._stepCount-1));if(!j._invokingCommand){var X=Z;V&&j.transition.duration>0&&(X=X.transition().duration(j.transition.duration).ease(j.transition.easing)),X.attr("transform",o(re-.5*i.gripWidth,j._dims.currentValueTotalHeight))}}function D(P,j){var V=P._dims;return V.inputAreaStart+i.stepInset+(V.inputAreaLength-2*i.stepInset)*Math.min(1,Math.max(0,j))}function N(P,j){var V=P._dims;return Math.min(1,Math.max(0,(j-i.stepInset-V.inputAreaStart)/(V.inputAreaLength-2*i.stepInset-2*V.inputAreaStart)))}function F(P,j,V){var Z=V._dims,Y=e.ensureSingle(P,"rect",i.railTouchRectClass,function(ee){ee.call(C,j,P,V).style("pointer-events","all")});Y.attr({width:Z.inputAreaLength,height:Math.max(Z.inputAreaWidth,i.tickOffset+V.ticklen+Z.labelHeight)}).call(M.fill,V.bgcolor).attr("opacity",0),_.setTranslate(Y,0,Z.currentValueTotalHeight)}function I(P,j){var V=j._dims,Z=V.inputAreaLength-2*i.railInset,Y=e.ensureSingle(P,"rect",i.railRectClass);Y.attr({width:Z,height:i.railWidth,rx:i.railRadius,ry:i.railRadius,"shape-rendering":"crispEdges"}).call(M.stroke,j.bordercolor).call(M.fill,j.bgcolor).style("stroke-width",j.borderwidth+"px"),_.setTranslate(Y,i.railInset,.5*(V.inputAreaWidth-i.railWidth)+V.currentValueTotalHeight)}oe.exports=function(P){var j=P._fullLayout,V=function(K,ie){for(var q=K[i.name],U=[],W=0;W<q.length;W++){var ae=q[W];ae.visible&&(ae._gd=ie,U.push(ae))}return U}(j,P),Z=j._infolayer.selectAll("g."+i.containerClassName).data(V.length>0?[0]:[]);function Y(K){K._commandObserver&&(K._commandObserver.remove(),delete K._commandObserver),x.autoMargin(P,p(K))}if(Z.enter().append("g").classed(i.containerClassName,!0).style("cursor","ew-resize"),Z.exit().each(function(){y.select(this).selectAll("g."+i.groupClassName).each(Y)}).remove(),0!==V.length){var ee=Z.selectAll("g."+i.groupClassName).data(V,f);ee.enter().append("g").classed(i.groupClassName,!0),ee.exit().each(Y).remove();for(var re=0;re<V.length;re++)g(P,V[re]);ee.each(function(K){var ie=y.select(this);(function(q){var U=q._dims;U.labelSteps=[];for(var W=q._stepCount,ae=0;ae<W;ae+=U.labelStride)U.labelSteps.push({fraction:ae/(W-1),step:q._visibleSteps[ae]})})(K),x.manageCommandObserver(P,K,K._visibleSteps,function(q){var U=ie.data()[0];U.active!==q.index&&(U._dragging||k(P,ie,U,q.index,!1,!0))}),function(q,U,W){(W.steps[W.active]||{}).visible||(W.active=W._visibleSteps[0]._index),U.call(m,W).call(I,W).call(c,W).call(E,W).call(F,q,W).call(u,q,W);var ae=W._dims;_.setTranslate(U,ae.lx+W.pad.l,ae.ly+W.pad.t),U.call(L,W,!1),U.call(m,W)}(P,y.select(this),K)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":460,"@plotly/d3":58}],463:[function(b,oe,se){"use strict";var y=b("./constants");oe.exports={moduleType:"component",name:y.name,layoutAttributes:b("./attributes"),supplyLayoutDefaults:b("./defaults"),draw:b("./draw")}},{"./attributes":459,"./constants":460,"./defaults":461,"./draw":462}],464:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("fast-isnumeric"),M=b("../../plots/plots"),_=b("../../registry"),e=b("../../lib"),o=e.strTranslate,a=b("../drawing"),l=b("../color"),i=b("../../lib/svg_text_utils"),v=b("../../constants/interactions"),h=b("../../constants/alignment").OPPOSITE_SIDE,s=/ [XY][0-9]* /;oe.exports={draw:function(d,p,f){var g,u=f.propName,w=f.placeholder,c=f.traceIndex,A=f.avoid||{},k=f.attributes,C=f.transform,E=f.containerGroup,L=d._fullLayout,D=1,N=!1,F=f.propContainer.title,I=(F&&F.text?F.text:"").trim(),P=F&&F.font?F.font:{},j=P.family,V=P.size,Z=P.color;"title.text"===u?g="titleText":-1!==u.indexOf("axis")?g="axisTitleText":u.indexOf(!0)&&(g="colorbarTitleText");var Y=d._context.edits[g];""===I?D=0:I.replace(s," % ")===w.replace(s," % ")&&(D=.2,N=!0,Y||(I="")),f._meta?I=e.templateString(I,f._meta):L._meta&&(I=e.templateString(I,L._meta));var ee,re=I||Y;E||(E=e.ensureSingle(L._infolayer,"g","g-"+p),ee=L._hColorbarMoveTitle);var X=E.selectAll("text").data(re?[0]:[]);if(X.enter().append("text"),X.text(I).attr("class",p),X.exit().remove(),!re)return E;function K(U){e.syncOrAsync([ie,q],U)}function ie(U){var W;return!C&&ee&&(C={}),C?(W="",C.rotate&&(W+="rotate("+[C.rotate,k.x,k.y]+")"),(C.offset||ee)&&(W+=o(0,(C.offset||0)-(ee||0)))):W=null,U.attr("transform",W),U.style({"font-family":j,"font-size":y.round(V,2)+"px",fill:l.rgb(Z),opacity:D*l.opacity(Z),"font-weight":M.fontWeight}).attr(k).call(i.convertToTspans,d),M.previousPromises(d)}function q(U){var W=y.select(U.node().parentNode);if(A&&A.selection&&A.side&&I){W.attr("transform",null);var ae=h[A.side],G="left"===A.side||"top"===A.side?-1:1,te=x(A.pad)?A.pad:2,ne=a.bBox(W.node()),ue=A.maxShift||G*({left:0,top:0,right:L.width,bottom:L.height}[A.side]-ne[A.side]),pe=0;if(ue<0)pe=ue;else{var de=A.offsetLeft||0,_e=A.offsetTop||0;ne.left-=de,ne.right-=de,ne.top-=_e,ne.bottom-=_e,A.selection.each(function(){var we=a.bBox(this);e.bBoxIntersect(ne,we,te)&&(pe=Math.max(pe,G*(we[A.side]-ne[ae])+te))}),pe=Math.min(ue,pe)}if(pe>0||ue<0){var me={left:[-pe,0],right:[pe,0],top:[0,-pe],bottom:[0,pe]}[A.side];W.attr("transform",o(me[0],me[1]))}}}return X.call(K),Y&&(I?X.on(".opacity",null):(D=0,N=!0,X.text(w).on("mouseover.opacity",function(){y.select(this).transition().duration(v.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){y.select(this).transition().duration(v.HIDE_PLACEHOLDER).style("opacity",0)})),X.call(i.makeEditable,{gd:d}).on("edit",function(U){void 0!==c?_.call("_guiRestyle",d,u,U,c):_.call("_guiRelayout",d,u,U)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(K)}).on("input",function(U){this.text(U||" ").call(i.positionText,k.x,k.y)})),X.classed("js-placeholder",N),E}}},{"../../constants/alignment":471,"../../constants/interactions":478,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],465:[function(b,oe,se){"use strict";var y=b("../../plots/font_attributes"),x=b("../color/attributes"),M=b("../../lib/extend").extendFlat,_=b("../../plot_api/edit_types").overrideAll,e=b("../../plots/pad_attributes"),o=b("../../plot_api/plot_template").templatedArray,a=o("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});oe.exports=_(o("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:a,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:M(e({editType:"arraydraw"}),{}),font:y({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:x.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"../color/attributes":365}],466:[function(b,oe,se){"use strict";oe.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],467:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plots/array_container_defaults"),M=b("./attributes"),_=b("./constants").name,e=M.buttons;function o(l,i,v){function h(s,d){return y.coerce(l,i,M,s,d)}h("visible",x(l,i,{name:"buttons",handleItemDefaults:a}).length>0)&&(h("active"),h("direction"),h("type"),h("showactive"),h("x"),h("y"),y.noneOrAll(l,i,["x","y"]),h("xanchor"),h("yanchor"),h("pad.t"),h("pad.r"),h("pad.b"),h("pad.l"),y.coerceFont(h,"font",v.font),h("bgcolor",v.paper_bgcolor),h("bordercolor"),h("borderwidth"))}function a(l,i){function v(h,s){return y.coerce(l,i,e,h,s)}v("visible","skip"===l.method||Array.isArray(l.args))&&(v("method"),v("args"),v("args2"),v("label"),v("execute"))}oe.exports=function(l,i){x(l,i,{name:_,handleItemDefaults:o})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":465,"./constants":466}],468:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../plots/plots"),M=b("../color"),_=b("../drawing"),e=b("../../lib"),o=b("../../lib/svg_text_utils"),a=b("../../plot_api/plot_template").arrayEditor,l=b("../../constants/alignment").LINE_SPACING,i=b("./constants"),v=b("./scrollbox");function h(D){return D._index}function s(D,N){return+D.attr(i.menuIndexAttrName)===N._index}function d(D,N,F,I,P,j,V,Z){N.active=V,a(D.layout,i.name,N).applyUpdate("active",V),"buttons"===N.type?f(D,I,null,null,N):"dropdown"===N.type&&(P.attr(i.menuIndexAttrName,"-1"),p(D,I,P,j,N),Z||f(D,I,P,j,N))}function p(D,N,F,I,P){var j=e.ensureSingle(N,"g",i.headerClassName,function(X){X.style("pointer-events","all")}),V=P._dims,ee={y:P.pad.t,yPad:0,x:P.pad.l,xPad:0,index:0},re={width:V.headerWidth,height:V.headerHeight};j.call(g,P,P.buttons[P.active]||i.blankHeaderOpts,D).call(E,P,ee,re),e.ensureSingle(N,"text",i.headerArrowClassName,function(X){X.attr("text-anchor","end").call(_.font,P.font).text(i.arrowSymbol[P.direction])}).attr({x:V.headerWidth-i.arrowOffsetX+P.pad.l,y:V.headerHeight/2+i.textOffsetY+P.pad.t}),j.on("click",function(){F.call(L,String(s(F,P)?-1:P._index)),f(D,N,F,I,P)}),j.on("mouseover",function(){j.call(c)}),j.on("mouseout",function(){j.call(A,P)}),_.setTranslate(N,V.lx,V.ly)}function f(D,N,F,I,P){F||(F=N).attr("pointer-events","all");var j=-1==+F.attr(i.menuIndexAttrName)&&"buttons"!==P.type?[]:P.buttons,V="dropdown"===P.type?i.dropdownButtonClassName:i.buttonClassName,Z=F.selectAll("g."+V).data(e.filterVisible(j)),Y=Z.enter().append("g").classed(V,!0),ee=Z.exit();"dropdown"===P.type?(Y.attr("opacity","0").transition().attr("opacity","1"),ee.transition().attr("opacity","0").remove()):ee.remove();var re=0,X=0,K=P._dims,ie=-1!==["up","down"].indexOf(P.direction);"dropdown"===P.type&&(ie?X=K.headerHeight+i.gapButtonHeader:re=K.headerWidth+i.gapButtonHeader),"dropdown"===P.type&&"up"===P.direction&&(X=-i.gapButtonHeader+i.gapButton-K.openHeight),"dropdown"===P.type&&"left"===P.direction&&(re=-i.gapButtonHeader+i.gapButton-K.openWidth);var W,ae,G,q={x:K.lx+re+P.pad.l,y:K.ly+X+P.pad.t,yPad:i.gapButton,xPad:i.gapButton,index:0},U={l:q.x+P.borderwidth,t:q.y+P.borderwidth};Z.each(function(W,ae){var G=y.select(this);G.call(g,P,W,D).call(E,P,q),G.on("click",function(){y.event.defaultPrevented||(W.execute&&(W.args2&&P.active===ae?(d(D,P,0,N,F,I,-1),x.executeAPICommand(D,W.method,W.args2)):(d(D,P,0,N,F,I,ae),x.executeAPICommand(D,W.method,W.args))),D.emit("plotly_buttonclicked",{menu:P,button:W,active:P.active}))}),G.on("mouseover",function(){G.call(c)}),G.on("mouseout",function(){G.call(A,P),Z.call(w,P)})}),Z.call(w,P),ie?(U.w=Math.max(K.openWidth,K.headerWidth),U.h=q.y-U.t):(U.w=q.x-U.l,U.h=Math.max(K.openHeight,K.headerHeight)),U.direction=P.direction,I&&(Z.size()?function(W,ae,G,te,ne,le){var ue,pe,de,_e=ne.direction,we=ne._dims,De=ne.active;if("up"===_e||"down"===_e)for(pe=0,de=0;de<De;de++)pe+=we.heights[de]+i.gapButton;else for(ue=0,de=0;de<De;de++)ue+=we.widths[de]+i.gapButton;te.enable(le,ue,pe),te.hbar&&te.hbar.attr("opacity","0").transition().attr("opacity","1"),te.vbar&&te.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,I,P,U):(G=!!(W=I).vbar,(ae=!!W.hbar)&&W.hbar.transition().attr("opacity","0").each("end",function(){ae=!1,G||W.disable()}),G&&W.vbar.transition().attr("opacity","0").each("end",function(){G=!1,ae||W.disable()})))}function g(D,N,F,I){D.call(m,N).call(u,N,F,I)}function m(D,N){e.ensureSingle(D,"rect",i.itemRectClassName,function(F){F.attr({rx:i.rx,ry:i.ry,"shape-rendering":"crispEdges"})}).call(M.stroke,N.bordercolor).call(M.fill,N.bgcolor).style("stroke-width",N.borderwidth+"px")}function u(D,N,F,I){var P=e.ensureSingle(D,"text",i.itemTextClassName,function(Z){Z.attr({"text-anchor":"start","data-notex":1})}),j=F.label,V=I._fullLayout._meta;V&&(j=e.templateString(j,V)),P.call(_.font,N.font).text(j).call(o.convertToTspans,I)}function w(D,N){var F=N.active;D.each(function(I,P){var j=y.select(this);P===F&&N.showactive&&j.select("rect."+i.itemRectClassName).call(M.fill,i.activeColor)})}function c(D){D.select("rect."+i.itemRectClassName).call(M.fill,i.hoverColor)}function A(D,N){D.select("rect."+i.itemRectClassName).call(M.fill,N.bgcolor)}function k(D,N){var F=N._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},I=_.tester.selectAll("g."+i.dropdownButtonClassName).data(e.filterVisible(N.buttons));I.enter().append("g").classed(i.dropdownButtonClassName,!0);var P=-1!==["up","down"].indexOf(N.direction);I.each(function(re,X){var K=y.select(this);K.call(g,N,re,D);var ie=K.select("."+i.itemTextClassName),q=ie.node()&&_.bBox(ie.node()).width,U=Math.max(q+i.textPadX,i.minWidth),W=N.font.size*l,ae=o.lineCount(ie),G=Math.max(W*ae,i.minHeight)+i.textOffsetY;G=Math.ceil(G),U=Math.ceil(U),F.widths[X]=U,F.heights[X]=G,F.height1=Math.max(F.height1,G),F.width1=Math.max(F.width1,U),P?(F.totalWidth=Math.max(F.totalWidth,U),F.openWidth=F.totalWidth,F.totalHeight+=G+i.gapButton,F.openHeight+=G+i.gapButton):(F.totalWidth+=U+i.gapButton,F.openWidth+=U+i.gapButton,F.totalHeight=Math.max(F.totalHeight,G),F.openHeight=F.totalHeight)}),P?F.totalHeight-=i.gapButton:F.totalWidth-=i.gapButton,F.headerWidth=F.width1+i.arrowPadX,F.headerHeight=F.height1,"dropdown"===N.type&&(P?(F.width1+=i.arrowPadX,F.totalHeight=F.height1):F.totalWidth=F.width1,F.totalWidth+=i.arrowPadX),I.remove();var j=F.totalWidth+N.pad.l+N.pad.r,V=F.totalHeight+N.pad.t+N.pad.b,Z=D._fullLayout._size;F.lx=Z.l+Z.w*N.x,F.ly=Z.t+Z.h*(1-N.y);var Y="left";e.isRightAnchor(N)&&(F.lx-=j,Y="right"),e.isCenterAnchor(N)&&(F.lx-=j/2,Y="center");var ee="top";e.isBottomAnchor(N)&&(F.ly-=V,ee="bottom"),e.isMiddleAnchor(N)&&(F.ly-=V/2,ee="middle"),F.totalWidth=Math.ceil(F.totalWidth),F.totalHeight=Math.ceil(F.totalHeight),F.lx=Math.round(F.lx),F.ly=Math.round(F.ly),x.autoMargin(D,C(N),{x:N.x,y:N.y,l:j*({right:1,center:.5}[Y]||0),r:j*({left:1,center:.5}[Y]||0),b:V*({top:1,middle:.5}[ee]||0),t:V*({bottom:1,middle:.5}[ee]||0)})}function C(D){return i.autoMarginIdRoot+D._index}function E(D,N,F,I){I=I||{};var P=D.select("."+i.itemRectClassName),j=D.select("."+i.itemTextClassName),V=N.borderwidth,Z=F.index,Y=N._dims;_.setTranslate(D,V+F.x,V+F.y);var ee=-1!==["up","down"].indexOf(N.direction),re=I.height||(ee?Y.heights[Z]:Y.height1);P.attr({x:0,y:0,width:I.width||(ee?Y.width1:Y.widths[Z]),height:re});var X=N.font.size*l,K=(o.lineCount(j)-1)*X/2;o.positionText(j,i.textOffsetX,re/2-K+i.textOffsetY),ee?F.y+=Y.heights[Z]+F.yPad:F.x+=Y.widths[Z]+F.xPad,F.index++}function L(D,N){D.attr(i.menuIndexAttrName,N||"-1").selectAll("g."+i.dropdownButtonClassName).remove()}oe.exports=function(D){var N=D._fullLayout,F=e.filterVisible(N[i.name]);function I(X){x.autoMargin(D,C(X))}var P=N._menulayer.selectAll("g."+i.containerClassName).data(F.length>0?[0]:[]);if(P.enter().append("g").classed(i.containerClassName,!0).style("cursor","pointer"),P.exit().each(function(){y.select(this).selectAll("g."+i.headerGroupClassName).each(I)}).remove(),0!==F.length){var j=P.selectAll("g."+i.headerGroupClassName).data(F,h);j.enter().append("g").classed(i.headerGroupClassName,!0);for(var V=e.ensureSingle(P,"g",i.dropdownButtonGroupClassName,function(X){X.style("pointer-events","all")}),Z=0;Z<F.length;Z++)k(D,F[Z]);var re=new v(D,V,"updatemenus"+N._uid);j.enter().size()&&(V.node().parentNode.appendChild(V.node()),V.call(L)),j.exit().each(function(X){V.call(L),I(X)}).remove(),j.each(function(X){var K=y.select(this),ie="dropdown"===X.type?V:null;x.manageCommandObserver(D,X,X.buttons,function(q){d(D,X,0,K,ie,re,q.index,!0)}),"dropdown"===X.type?(p(D,K,V,re,X),s(V,X)&&f(D,K,V,re,X)):f(D,K,null,null,X)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":466,"./scrollbox":470,"@plotly/d3":58}],469:[function(b,oe,se){arguments[4][463][0].apply(se,arguments)},{"./attributes":465,"./constants":466,"./defaults":467,"./draw":468,dup:463}],470:[function(b,oe,se){"use strict";oe.exports=e;var y=b("@plotly/d3"),x=b("../color"),M=b("../drawing"),_=b("../../lib");function e(o,a,l){this.gd=o,this.container=a,this.id=l,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(o,a,l){var i=this.gd._fullLayout,v=i.width,h=i.height;this.position=o;var s,d,p,f,g=this.position.l,m=this.position.w,u=this.position.t,w=this.position.h,c=this.position.direction,A="down"===c,k="left"===c,C="up"===c,E=m,L=w;A||k||"right"===c||C||(this.position.direction="down",A=!0),A||C?(d=(s=g)+E,A?(p=u,L=(f=Math.min(p+L,h))-p):L=(f=u+L)-(p=Math.max(f-L,0))):(f=(p=u)+L,k?E=(d=g+E)-(s=Math.max(d-E,0)):(s=g,E=(d=Math.min(s+E,v))-s)),this._box={l:s,t:p,w:E,h:L};var D=m>E,N=e.barLength+2*e.barPad,F=e.barWidth+2*e.barPad,I=g,P=u+w;P+F>h&&(P=h-F);var j=this.container.selectAll("rect.scrollbar-horizontal").data(D?[0]:[]);j.exit().on(".drag",null).remove(),j.enter().append("rect").classed("scrollbar-horizontal",!0).call(x.fill,e.barColor),D?(this.hbar=j.attr({rx:e.barRadius,ry:e.barRadius,x:I,y:P,width:N,height:F}),this._hbarXMin=I+N/2,this._hbarTranslateMax=E-N):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var V=w>L,Z=e.barWidth+2*e.barPad,Y=e.barLength+2*e.barPad,ee=g+m,re=u;ee+Z>v&&(ee=v-Z);var X=this.container.selectAll("rect.scrollbar-vertical").data(V?[0]:[]);X.exit().on(".drag",null).remove(),X.enter().append("rect").classed("scrollbar-vertical",!0).call(x.fill,e.barColor),V?(this.vbar=X.attr({rx:e.barRadius,ry:e.barRadius,x:ee,y:re,width:Z,height:Y}),this._vbarYMin=re+Y/2,this._vbarTranslateMax=L-Y):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var K=this.id,ie=s-.5,q=V?d+Z+.5:d+.5,U=p-.5,W=D?f+F+.5:f+.5,ae=i._topdefs.selectAll("#"+K).data(D||V?[0]:[]);if(ae.exit().remove(),ae.enter().append("clipPath").attr("id",K).append("rect"),D||V?(this._clipRect=ae.select("rect").attr({x:Math.floor(ie),y:Math.floor(U),width:Math.ceil(q)-Math.floor(ie),height:Math.ceil(W)-Math.floor(U)}),this.container.call(M.setClipUrl,K,this.gd),this.bg.attr({x:g,y:u,width:m,height:w})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(M.setClipUrl,null),delete this._clipRect),D||V){var G=y.behavior.drag().on("dragstart",function(){y.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(G);var te=y.behavior.drag().on("dragstart",function(){y.event.sourceEvent.preventDefault(),y.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));D&&this.hbar.on(".drag",null).call(te),V&&this.vbar.on(".drag",null).call(te)}this.setTranslate(a,l)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(M.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var o=this.translateX,a=this.translateY;this.hbar&&(o-=y.event.dx),this.vbar&&(a-=y.event.dy),this.setTranslate(o,a)},e.prototype._onBoxWheel=function(){var o=this.translateX,a=this.translateY;this.hbar&&(o+=y.event.deltaY),this.vbar&&(a+=y.event.deltaY),this.setTranslate(o,a)},e.prototype._onBarDrag=function(){var o=this.translateX,a=this.translateY;if(this.hbar){var l=o+this._hbarXMin,i=l+this._hbarTranslateMax;o=(_.constrain(y.event.x,l,i)-l)/(i-l)*(this.position.w-this._box.w)}if(this.vbar){var v=a+this._vbarYMin,h=v+this._vbarTranslateMax;a=(_.constrain(y.event.y,v,h)-v)/(h-v)*(this.position.h-this._box.h)}this.setTranslate(o,a)},e.prototype.setTranslate=function(o,a){var l=this.position.w-this._box.w,i=this.position.h-this._box.h;o=_.constrain(o||0,0,l),a=_.constrain(a||0,0,i),this.translateX=o,this.translateY=a,this.container.call(M.setTranslate,this._box.l-this.position.l-o,this._box.t-this.position.t-a),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+o-.5),y:Math.floor(this.position.t+a-.5)}),this.hbar&&this.hbar.call(M.setTranslate,o+o/l*this._hbarTranslateMax,a),this.vbar&&this.vbar.call(M.setTranslate,o,a+a/i*this._vbarTranslateMax)}},{"../../lib":503,"../color":366,"../drawing":388,"@plotly/d3":58}],471:[function(b,oe,se){"use strict";oe.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],472:[function(b,oe,se){"use strict";oe.exports={axisRefDescription:function(y,x,M){return["If set to a",y,"axis id (e.g. *"+y+"* or","*"+y+"2*), the `"+y+"` position refers to a",y,"coordinate. If set to *paper*, the `"+y+"`","position refers to the distance from the",x,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",x,"("+M+"). If set to a",y,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",x,"of the domain of that axis: e.g.,","*"+y+"2 domain* refers to the domain of the second",y," axis and a",y,"position of 0.5 refers to the","point between the",x,"and the",M,"of the domain of the","second",y,"axis."].join(" ")}}},{}],473:[function(b,oe,se){"use strict";oe.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},{}],474:[function(b,oe,se){"use strict";oe.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],475:[function(b,oe,se){"use strict";oe.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],476:[function(b,oe,se){"use strict";oe.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],477:[function(b,oe,se){"use strict";oe.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},{}],478:[function(b,oe,se){"use strict";oe.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],479:[function(b,oe,se){"use strict";oe.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],480:[function(b,oe,se){"use strict";se.xmlns="http://www.w3.org/2000/xmlns/",se.svg="http://www.w3.org/2000/svg",se.xlink="http://www.w3.org/1999/xlink",se.svgAttrs={xmlns:se.svg,"xmlns:xlink":se.xlink}},{}],481:[function(b,oe,se){"use strict";se.version=b("./version").version,b("native-promise-only"),b("../build/plotcss");for(var y=b("./registry"),x=se.register=y.register,M=b("./plot_api"),_=Object.keys(M),e=0;e<_.length;e++){var o=_[e];"_"!==o.charAt(0)&&(se[o]=M[o]),x({moduleType:"apiMethod",name:o,fn:M[o]})}x(b("./traces/scatter")),x([b("./components/legend"),b("./components/fx"),b("./components/annotations"),b("./components/annotations3d"),b("./components/shapes"),b("./components/images"),b("./components/updatemenus"),b("./components/sliders"),b("./components/rangeslider"),b("./components/rangeselector"),b("./components/grid"),b("./components/errorbars"),b("./components/colorscale"),b("./components/colorbar"),b("./components/modebar")]),x([b("./locale-en"),b("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(x(window.PlotlyLocales),delete window.PlotlyLocales),se.Icons=b("./fonts/ploticon");var a=b("./components/fx"),l=b("./plots/plots");se.Plots={resize:l.resize,graphJson:l.graphJson,sendDataToCloud:l.sendDataToCloud},se.Fx={hover:a.hover,unhover:a.unhover,loneHover:a.loneHover,loneUnhover:a.loneUnhover},se.Snapshot=b("./snapshot"),se.PlotSchema=b("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":357,"./components/annotations3d":362,"./components/colorbar":372,"./components/colorscale":378,"./components/errorbars":394,"./components/fx":406,"./components/grid":410,"./components/images":415,"./components/legend":423,"./components/modebar":429,"./components/rangeselector":437,"./components/rangeslider":444,"./components/shapes":458,"./components/sliders":463,"./components/updatemenus":469,"./fonts/ploticon":482,"./locale-en":534,"./locale-en-us":533,"./plot_api":538,"./plot_api/plot_schema":542,"./plots/plots":619,"./registry":638,"./snapshot":643,"./traces/scatter":939,"./version":1123,"native-promise-only":245}],482:[function(b,oe,se){"use strict";oe.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],483:[function(b,oe,se){"use strict";se.isLeftAnchor=function(y){return"left"===y.xanchor||"auto"===y.xanchor&&y.x<=1/3},se.isCenterAnchor=function(y){return"center"===y.xanchor||"auto"===y.xanchor&&y.x>1/3&&y.x<2/3},se.isRightAnchor=function(y){return"right"===y.xanchor||"auto"===y.xanchor&&y.x>=2/3},se.isTopAnchor=function(y){return"top"===y.yanchor||"auto"===y.yanchor&&y.y>=2/3},se.isMiddleAnchor=function(y){return"middle"===y.yanchor||"auto"===y.yanchor&&y.y>1/3&&y.y<2/3},se.isBottomAnchor=function(y){return"bottom"===y.yanchor||"auto"===y.yanchor&&y.y<=1/3}},{}],484:[function(b,oe,se){"use strict";var y=b("./mod"),x=y.mod,M=y.modHalf,_=Math.PI,e=2*_;function o(v){return Math.abs(v[1]-v[0])>e-1e-14}function a(v,h){return M(h-v,e)}function l(v,h){if(o(h))return!0;var s,d;h[0]<h[1]?(s=h[0],d=h[1]):(s=h[1],d=h[0]),(s=x(s,e))>(d=x(d,e))&&(d+=e);var p=x(v,e),f=p+e;return p>=s&&p<=d||f>=s&&f<=d}function i(v,h,s,d,p,f,g){p=p||0,f=f||0;var m,u,w,c,A,k=o([s,d]);function C(N,F){return[N*Math.cos(F)+p,f-N*Math.sin(F)]}k?(m=0,u=_,w=e):s<d?(m=s,w=d):(m=d,w=s),v<h?(c=v,A=h):(c=h,A=v);var E,L=Math.abs(w-m)<=_?0:1;function D(N,F,I){return"A"+[N,N]+" "+[0,L,I]+" "+C(N,F)}return k?E=null===c?"M"+C(A,m)+D(A,u,0)+D(A,w,0)+"Z":"M"+C(c,m)+D(c,u,0)+D(c,w,0)+"ZM"+C(A,m)+D(A,u,1)+D(A,w,1)+"Z":null===c?(E="M"+C(A,m)+D(A,w,0),g&&(E+="L0,0Z")):E="M"+C(c,m)+"L"+C(A,m)+D(A,w,0)+"L"+C(c,w)+D(c,m,1)+"Z",E}oe.exports={deg2rad:function(v){return v/180*_},rad2deg:function(v){return v/_*180},angleDelta:a,angleDist:function(v,h){return Math.abs(a(v,h))},isFullCircle:o,isAngleInsideSector:l,isPtInsideSector:function(v,h,s,d){return!!l(h,d)&&(s[0]<s[1]?(p=s[0],f=s[1]):(p=s[1],f=s[0]),v>=p&&v<=f);var p,f},pathArc:function(v,h,s,d,p){return i(null,v,h,s,d,p,0)},pathSector:function(v,h,s,d,p){return i(null,v,h,s,d,p,1)},pathAnnulus:function(v,h,s,d,p,f){return i(v,h,s,d,p,f,1)}}},{"./mod":510}],485:[function(b,oe,se){"use strict";var y=Array.isArray,x=ArrayBuffer,M=DataView;function _(a){return x.isView(a)&&!(a instanceof M)}function e(a){return y(a)||_(a)}function o(a,l,i){if(e(a)){if(e(a[0])){for(var v=i,h=0;h<a.length;h++)v=l(v,a[h].length);return v}return a.length}return 0}se.isTypedArray=_,se.isArrayOrTypedArray=e,se.isArray1D=function(a){return!e(a[0])},se.ensureArray=function(a,l){return y(a)||(a=[]),a.length=l,a},se.concat=function(){var a,l,i,v,h,s,d,p,f=[],g=!0,m=0;for(i=0;i<arguments.length;i++)(s=(v=arguments[i]).length)&&(l?f.push(v):(l=v,h=s),y(v)?a=!1:(g=!1,m?a!==v.constructor&&(a=!1):a=v.constructor),m+=s);if(!m)return[];if(!f.length)return l;if(g)return l.concat.apply(l,f);if(a){for((d=new a(m)).set(l),i=0;i<f.length;i++)d.set(v=f[i],h),h+=v.length;return d}for(d=new Array(m),p=0;p<l.length;p++)d[p]=l[p];for(i=0;i<f.length;i++){for(v=f[i],p=0;p<v.length;p++)d[h+p]=v[p];h+=p}return d},se.maxRowLength=function(a){return o(a,Math.max,0)},se.minRowLength=function(a){return o(a,Math.min,1/0)}},{}],486:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../constants/numerical").BADNUM,M=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;oe.exports=function(_){return"string"==typeof _&&(_=_.replace(M,"")),y(_)?Number(_):x}},{"../constants/numerical":479,"fast-isnumeric":190}],487:[function(b,oe,se){"use strict";oe.exports=function(y){var x=y._fullLayout;x._glcanvas&&x._glcanvas.size()&&x._glcanvas.each(function(M){M.regl&&M.regl.clear({color:!0,depth:!0})})}},{}],488:[function(b,oe,se){"use strict";oe.exports=function(y){y._responsiveChartHandler&&(window.removeEventListener("resize",y._responsiveChartHandler),delete y._responsiveChartHandler)}},{}],489:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("tinycolor2"),M=b("../plots/attributes"),_=b("../components/colorscale/scales"),e=b("../components/color"),o=b("../constants/interactions").DESELECTDIM,a=b("./nested_property"),l=b("./regex").counter,i=b("./mod").modHalf,v=b("./array").isArrayOrTypedArray;function h(s,d){var p=se.valObjectMeta[d.valType];if(d.arrayOk&&v(s))return!0;if(p.validateFunction)return p.validateFunction(s,d);var f={},g=f;return p.coerceFunction(s,{set:function(u){g=u}},f,d),g!==f}se.valObjectMeta={data_array:{coerceFunction:function(s,d,p){v(s)?d.set(s):void 0!==p&&d.set(p)}},enumerated:{coerceFunction:function(s,d,p,f){f.coerceNumber&&(s=+s),-1===f.values.indexOf(s)?d.set(p):d.set(s)},validateFunction:function(s,d){d.coerceNumber&&(s=+s);for(var p=d.values,f=0;f<p.length;f++){var g=String(p[f]);if("/"===g.charAt(0)&&"/"===g.charAt(g.length-1)){if(new RegExp(g.substr(1,g.length-2)).test(s))return!0}else if(s===p[f])return!0}return!1}},boolean:{coerceFunction:function(s,d,p){d.set(!0===s||!1===s?s:p)}},number:{coerceFunction:function(s,d,p,f){!y(s)||void 0!==f.min&&s<f.min||void 0!==f.max&&s>f.max?d.set(p):d.set(+s)}},integer:{coerceFunction:function(s,d,p,f){s%1||!y(s)||void 0!==f.min&&s<f.min||void 0!==f.max&&s>f.max?d.set(p):d.set(+s)}},string:{coerceFunction:function(s,d,p,f){d.set("string"!=typeof s?!0!==f.strict&&"number"==typeof s?String(s):p:f.noBlank&&!s?p:s)}},color:{coerceFunction:function(s,d,p){x(s).isValid()?d.set(s):d.set(p)}},colorlist:{coerceFunction:function(s,d,p){Array.isArray(s)&&s.length&&s.every(function(f){return x(f).isValid()})?d.set(s):d.set(p)}},colorscale:{coerceFunction:function(s,d,p){d.set(_.get(s,p))}},angle:{coerceFunction:function(s,d,p){"auto"===s?d.set("auto"):y(s)?d.set(i(+s,360)):d.set(p)}},subplotid:{coerceFunction:function(s,d,p,f){var g=f.regex||l(p);"string"==typeof s&&g.test(s)?d.set(s):d.set(p)},validateFunction:function(s,d){var p=d.dflt;return s===p||"string"==typeof s&&!!l(p).test(s)}},flaglist:{coerceFunction:function(s,d,p,f){if("string"==typeof s)if(-1===(f.extras||[]).indexOf(s)){for(var g=s.split("+"),m=0;m<g.length;){var u=g[m];-1===f.flags.indexOf(u)||g.indexOf(u)<m?g.splice(m,1):m++}d.set(g.length?g.join("+"):p)}else d.set(s);else d.set(p)}},any:{coerceFunction:function(s,d,p){d.set(void 0===s?p:s)}},info_array:{coerceFunction:function(s,d,p,f){function g(P,j,V){var Z;return void 0===V&&(V=j.dflt),se.valObjectMeta[j.valType].coerceFunction(P,{set:function(ee){Z=ee}},V,j),Z}var m=2===f.dimensions||"1-2"===f.dimensions&&Array.isArray(s)&&Array.isArray(s[0]);if(Array.isArray(s)){var u,w,c,k,C,E=f.items,L=[],D=Array.isArray(E),N=D&&m&&Array.isArray(E[0]),F=m&&D&&!N,I=D&&!F?E.length:s.length;if(p=Array.isArray(p)?p:[],m)for(u=0;u<I;u++)for(L[u]=[],c=Array.isArray(s[u])?s[u]:[],k=F?E.length:D?E[u].length:c.length,w=0;w<k;w++)void 0!==(C=g(c[w],F?E[w]:D?E[u][w]:E,(p[u]||[])[w]))&&(L[u][w]=C);else for(u=0;u<I;u++)void 0!==(C=g(s[u],D?E[u]:E,p[u]))&&(L[u]=C);d.set(L)}else d.set(p)},validateFunction:function(s,d){if(!Array.isArray(s))return!1;var p=d.items,f=Array.isArray(p),g=2===d.dimensions;if(!d.freeLength&&s.length!==p.length)return!1;for(var m=0;m<s.length;m++)if(g){if(!Array.isArray(s[m])||!d.freeLength&&s[m].length!==p[m].length)return!1;for(var u=0;u<s[m].length;u++)if(!h(s[m][u],f?p[m][u]:p))return!1}else if(!h(s[m],f?p[m]:p))return!1;return!0}}},se.coerce=function(s,d,p,f,g){var m=a(p,f).get(),u=a(s,f),w=a(d,f),c=u.get(),A=d._template;if(void 0===c&&A&&(c=a(A,f).get(),A=0),void 0===g&&(g=m.dflt),m.arrayOk&&v(c))return w.set(c),c;var k=se.valObjectMeta[m.valType].coerceFunction;k(c,w,g,m);var C=w.get();return A&&C===g&&!h(c,m)&&(k(c=a(A,f).get(),w,g,m),C=w.get()),C},se.coerce2=function(s,d,p,f,g){var m=a(s,f),u=se.coerce(s,d,p,f,g);return null!=m.get()&&u},se.coerceFont=function(s,d,p){var f={};return f.family=s(d+".family",(p=p||{}).family),f.size=s(d+".size",p.size),f.color=s(d+".color",p.color),f},se.coercePattern=function(s,d,p,f){if(s(d+".shape")){s(d+".solidity"),s(d+".size");var g="overlay"===s(d+".fillmode");if(!f){var m=s(d+".bgcolor",g?p:void 0);s(d+".fgcolor",g?e.contrast(m):p)}s(d+".fgopacity",g?.5:1)}},se.coerceHoverinfo=function(s,d,p){var f,g=d._module.attributes,m=g.hoverinfo?g:M,u=m.hoverinfo;if(1===p._dataLength){var w="all"===u.dflt?u.flags.slice():u.dflt.split("+");w.splice(w.indexOf("name"),1),f=w.join("+")}return se.coerce(s,d,m,"hoverinfo",f)},se.coerceSelectionMarkerOpacity=function(s,d){if(s.marker){var p,f,g=s.marker.opacity;void 0!==g&&(v(g)||s.selected||s.unselected||(p=g,f=o*g),d("selected.marker.opacity",p),d("unselected.marker.opacity",f))}},se.validate=h},{"../components/color":366,"../components/colorscale/scales":381,"../constants/interactions":478,"../plots/attributes":550,"./array":485,"./mod":510,"./nested_property":511,"./regex":520,"fast-isnumeric":190,tinycolor2:312}],490:[function(b,oe,se){"use strict";var y,x,M=b("d3-time-format").timeFormat,_=b("fast-isnumeric"),e=b("./loggers"),o=b("./mod").mod,a=b("../constants/numerical"),l=a.BADNUM,i=a.ONEDAY,v=a.ONEHOUR,h=a.ONEMIN,s=a.ONESEC,d=a.EPOCHJD,p=b("../registry"),f=b("d3-time-format").utcFormat,g=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,m=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,u=(new Date).getFullYear()-70;function w(j){return j&&p.componentsRegistry.calendars&&"string"==typeof j&&"gregorian"!==j}function c(j,V){return String(j+Math.pow(10,V)).substr(1)}se.dateTick0=function(j,V){var ee,re,Z=(re=!!V,w(ee=j)?re?p.getComponentMethod("calendars","CANONICAL_SUNDAY")[ee]:p.getComponentMethod("calendars","CANONICAL_TICK")[ee]:re?"2000-01-02":"2000-01-01");if(V<2)return Z;var Y=se.dateTime2ms(Z,j);return se.ms2DateTime(Y+=i*(V-1),0,j)},se.dfltRange=function(j){return w(j)?p.getComponentMethod("calendars","DFLTRANGE")[j]:["2000-01-01","2001-01-01"]},se.isJSDate=function(j){return"object"==typeof j&&null!==j&&"function"==typeof j.getTime},se.dateTime2ms=function(j,V){if(se.isJSDate(j)){var Z=j.getTimezoneOffset()*h,Y=(j.getUTCMinutes()-j.getMinutes())*h+(j.getUTCSeconds()-j.getSeconds())*s+(j.getUTCMilliseconds()-j.getMilliseconds());if(Y){var ee=3*h;Z=Z-ee/2+o(Y-Z+ee/2,ee)}return(j=Number(j)-Z)>=y&&j<=x?j:l}if("string"!=typeof j&&"number"!=typeof j)return l;j=String(j);var re=w(V),X=j.charAt(0);!re||"G"!==X&&"g"!==X||(j=j.substr(1),V="");var K=re&&"chinese"===V.substr(0,7),ie=j.match(K?m:g);if(!ie)return l;var q=ie[1],U=ie[3]||"1",W=Number(ie[5]||1),ae=Number(ie[7]||0),G=Number(ie[9]||0),te=Number(ie[11]||0);if(re){if(2===q.length)return l;var ne;q=Number(q);try{var le=p.getComponentMethod("calendars","getCal")(V);if(K){var ue="i"===U.charAt(U.length-1);U=parseInt(U,10),ne=le.newDate(q,le.toMonthIndex(q,U,ue),W)}else ne=le.newDate(q,Number(U),W)}catch(de){return l}return ne?(ne.toJD()-d)*i+ae*v+G*h+te*s:l}q=2===q.length?(Number(q)+2e3-u)%100+u:Number(q),U-=1;var pe=new Date(Date.UTC(2e3,U,W,ae,G));return pe.setUTCFullYear(q),pe.getUTCMonth()!==U||pe.getUTCDate()!==W?l:pe.getTime()+te*s},y=se.MIN_MS=se.dateTime2ms("-9999"),x=se.MAX_MS=se.dateTime2ms("9999-12-31 23:59:59.9999"),se.isDateTime=function(j,V){return se.dateTime2ms(j,V)!==l};var A=90*i,k=3*v,C=5*h;function E(j,V,Z,Y,ee){if((V||Z||Y||ee)&&(j+=" "+c(V,2)+":"+c(Z,2),(Y||ee)&&(j+=":"+c(Y,2),ee))){for(var re=4;ee%10==0;)re-=1,ee/=10;j+="."+c(ee,re)}return j}se.ms2DateTime=function(j,V,Z){if("number"!=typeof j||!(j>=y&&j<=x))return l;V||(V=0);var Y,ee,re,X,K,ie,q=Math.floor(10*o(j+.05,1)),U=Math.round(j-q/10);if(w(Z)){var W=Math.floor(U/i)+d,ae=Math.floor(o(j,i));try{Y=p.getComponentMethod("calendars","getCal")(Z).fromJD(W).formatDate("yyyy-mm-dd")}catch(G){Y=f("G%Y-%m-%d")(new Date(U))}if("-"===Y.charAt(0))for(;Y.length<11;)Y="-0"+Y.substr(1);else for(;Y.length<10;)Y="0"+Y;ee=V<A?Math.floor(ae/v):0,re=V<A?Math.floor(ae%v/h):0,X=V<k?Math.floor(ae%h/s):0,K=V<C?ae%s*10+q:0}else ie=new Date(U),Y=f("%Y-%m-%d")(ie),ee=V<A?ie.getUTCHours():0,re=V<A?ie.getUTCMinutes():0,X=V<k?ie.getUTCSeconds():0,K=V<C?10*ie.getUTCMilliseconds()+q:0;return E(Y,ee,re,X,K)},se.ms2DateTimeLocal=function(j){if(!(j>=y+i&&j<=x-i))return l;var V=Math.floor(10*o(j+.05,1)),Z=new Date(Math.round(j-V/10));return E(M("%Y-%m-%d")(Z),Z.getHours(),Z.getMinutes(),Z.getSeconds(),10*Z.getUTCMilliseconds()+V)},se.cleanDate=function(j,V,Z){if(j===l)return V;if(se.isJSDate(j)||"number"==typeof j&&isFinite(j)){if(w(Z))return e.error("JS Dates and milliseconds are incompatible with world calendars",j),V;if(!(j=se.ms2DateTimeLocal(+j))&&void 0!==V)return V}else if(!se.isDateTime(j,Z))return e.error("unrecognized date",j),V;return j};var L=/%\d?f/g,D=/%h/g,N={1:"1",2:"1",3:"2",4:"2"};function F(j,V,Z,Y){j=j.replace(L,function(re){var X=Math.min(+re.charAt(1)||6,6);return(V/1e3%1+2).toFixed(X).substr(2).replace(/0+$/,"")||"0"});var ee=new Date(Math.floor(V+.05));if(j=j.replace(D,function(){return N[Z("%q")(ee)]}),w(Y))try{j=p.getComponentMethod("calendars","worldCalFmt")(j,V,Y)}catch(re){return"Invalid"}return Z(j)(ee)}var I=[59,59.9,59.99,59.999,59.9999];se.formatDate=function(j,V,Z,Y,ee,re){if(ee=w(ee)&&ee,!V)if("y"===Z)V=re.year;else if("m"===Z)V=re.month;else{if("d"!==Z)return function(X,K){var ie=o(X+.05,i),q=c(Math.floor(ie/v),2)+":"+c(o(Math.floor(ie/h),60),2);if("M"!==K){_(K)||(K=0);var U=(100+Math.min(o(X/s,60),I[K])).toFixed(K).substr(1);K>0&&(U=U.replace(/0+$/,"").replace(/[\.]$/,"")),q+=":"+U}return q}(j,Z)+"\n"+F(re.dayMonthYear,j,Y,ee);V=re.dayMonth+"\n"+re.year}return F(V,j,Y,ee)};var P=3*i;se.incrementMonth=function(j,V,Z){Z=w(Z)&&Z;var Y=o(j,i);if(j=Math.round(j-Y),Z)try{var ee=Math.round(j/i)+d,re=p.getComponentMethod("calendars","getCal")(Z),X=re.fromJD(ee);return V%12?re.add(X,V,"m"):re.add(X,V/12,"y"),(X.toJD()-d)*i+Y}catch(ie){e.error("invalid ms "+j+" in calendar "+Z)}var K=new Date(j+P);return K.setUTCMonth(K.getUTCMonth()+V)+Y-P},se.findExactDates=function(j,V){for(var Z,Y,ee=0,re=0,X=0,K=0,ie=w(V)&&p.getComponentMethod("calendars","getCal")(V),q=0;q<j.length;q++)if(_(Y=j[q])){if(!(Y%i))if(ie)try{1===(Z=ie.fromJD(Y/i+d)).day()?1===Z.month()?ee++:re++:X++}catch(W){}else 1===(Z=new Date(Y)).getUTCDate()?0===Z.getUTCMonth()?ee++:re++:X++}else K++;X+=re+=ee;var U=j.length-K;return{exactYears:ee/U,exactMonths:re/U,exactDays:X/U}}},{"../constants/numerical":479,"../registry":638,"./loggers":507,"./mod":510,"d3-time-format":120,"fast-isnumeric":190}],491:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("./loggers"),M=b("./matrix"),_=b("gl-mat4");function e(v){var h=v&&v.parentNode;h&&h.removeChild(v)}function o(v,h,s){var d="plotly.js-style-"+v,p=document.getElementById(d);p||((p=document.createElement("style")).setAttribute("id",d),p.appendChild(document.createTextNode("")),document.head.appendChild(p));var f=p.sheet;f.insertRule?f.insertRule(h+"{"+s+"}",0):f.addRule?f.addRule(h,s,0):x.warn("addStyleRule failed")}function a(v){var h=window.getComputedStyle(v,null),s=h.getPropertyValue("-webkit-transform")||h.getPropertyValue("-moz-transform")||h.getPropertyValue("-ms-transform")||h.getPropertyValue("-o-transform")||h.getPropertyValue("transform");return"none"===s?null:s.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(d){return+d})}function l(v){for(var h=[];i(v);)h.push(v),v=v.parentNode;return h}function i(v){return v&&(v instanceof Element||v instanceof HTMLElement)}oe.exports={getGraphDiv:function(v){var h;if("string"==typeof v){if(null===(h=document.getElementById(v)))throw new Error("No DOM element with id '"+v+"' exists on the page.");return h}if(null==v)throw new Error("DOM element provided is null or undefined");return v},isPlotDiv:function(v){var h=y.select(v);return h.node()instanceof HTMLElement&&h.size()&&h.classed("js-plotly-plot")},removeElement:e,addStyleRule:function(v,h){o("global",v,h)},addRelatedStyleRule:o,deleteRelatedStyleRule:function(v){var s=document.getElementById("plotly.js-style-"+v);s&&e(s)},getFullTransformMatrix:function(v){var h=l(v),s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return h.forEach(function(d){var p=a(d);if(p){var f=M.convertCssMatrix(p);s=_.multiply(s,s,f)}}),s},getElementTransformMatrix:a,getElementAndAncestors:l,equalDomRects:function(v,h){return v&&h&&v.x===h.x&&v.y===h.y&&v.top===h.top&&v.left===h.left&&v.right===h.right&&v.bottom===h.bottom}}},{"./loggers":507,"./matrix":509,"@plotly/d3":58,"gl-mat4":210}],492:[function(b,oe,se){"use strict";var y=b("events").EventEmitter;oe.exports={init:function(M){if(M._ev instanceof y)return M;var _=new y,e=new y;return M._ev=_,M._internalEv=e,M.on=_.on.bind(_),M.once=_.once.bind(_),M.removeListener=_.removeListener.bind(_),M.removeAllListeners=_.removeAllListeners.bind(_),M._internalOn=e.on.bind(e),M._internalOnce=e.once.bind(e),M._removeInternalListener=e.removeListener.bind(e),M._removeAllInternalListeners=e.removeAllListeners.bind(e),M.emit=function(o,a){"undefined"!=typeof jQuery&&jQuery(M).trigger(o,a),_.emit(o,a),e.emit(o,a)},M},triggerHandler:function(M,_,e){var o,a;"undefined"!=typeof jQuery&&(o=jQuery(M).triggerHandler(_,e));var l=M._ev;if(!l)return o;var i,v=l._events[_];if(!v)return o;function h(s){return s.listener?(l.removeListener(_,s.listener),s.fired?void 0:(s.fired=!0,s.listener.apply(l,[e]))):s.apply(l,[e])}for(v=Array.isArray(v)?v:[v],i=0;i<v.length-1;i++)h(v[i]);return a=h(v[i]),void 0!==o?o:a},purge:function(M){return delete M._ev,delete M.on,delete M.once,delete M.removeListener,delete M.removeAllListeners,delete M.emit,delete M._ev,delete M._internalEv,delete M._internalOn,delete M._internalOnce,delete M._removeInternalListener,delete M._removeAllInternalListeners,M}}},{events:84}],493:[function(b,oe,se){"use strict";var y=b("./is_plain_object.js"),x=Array.isArray;function M(_,e,o,a){var l,i,v,h,s,d,p=_[0],f=_.length;if(2===f&&x(p)&&x(_[1])&&0===p.length){if(function(m,u){var w,c;for(w=0;w<m.length;w++){if(null!==(c=m[w])&&"object"==typeof c)return!1;void 0!==c&&(u[w]=c)}return!0}(_[1],p))return p;p.splice(0,p.length)}for(var g=1;g<f;g++)for(i in l=_[g])v=p[i],h=l[i],a&&x(h)?p[i]=h:e&&h&&(y(h)||(s=x(h)))?(s?(s=!1,d=v&&x(v)?v:[]):d=v&&y(v)?v:{},p[i]=M([d,h],e,o,a)):(void 0!==h||o)&&(p[i]=h);return p}se.extendFlat=function(){return M(arguments,!1,!1,!1)},se.extendDeep=function(){return M(arguments,!0,!1,!1)},se.extendDeepAll=function(){return M(arguments,!0,!0,!1)},se.extendDeepNoArrays=function(){return M(arguments,!0,!1,!0)}},{"./is_plain_object.js":504}],494:[function(b,oe,se){"use strict";oe.exports=function(y){for(var x={},M=[],_=0,e=0;e<y.length;e++){var o=y[e];1!==x[o]&&(x[o]=1,M[_++]=o)}return M}},{}],495:[function(b,oe,se){"use strict";function y(M){return!0===M.visible}function x(M){var _=M[0].trace;return!0===_.visible&&0!==_._length}oe.exports=function(M){for(var _,e=(_=M,Array.isArray(_)&&Array.isArray(_[0])&&_[0][0]&&_[0][0].trace?x:y),o=[],a=0;a<M.length;a++){var l=M[a];e(l)&&o.push(l)}return o}},{}],496:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("country-regex"),M=b("@turf/area"),_=b("@turf/centroid"),e=b("@turf/bbox"),o=b("./identity"),a=b("./loggers"),l=b("./is_plain_object"),i=b("./nested_property"),v=b("./polygon"),h=Object.keys(x),s={"ISO-3":o,"USA-states":o,"country names":function(p){for(var f=0;f<h.length;f++){var g=h[f];if(new RegExp(x[g]).test(p.trim().toLowerCase()))return g}return a.log("Unrecognized country name: "+p+"."),!1}};function d(p){var f=p.geojson,g=window.PlotlyGeoAssets||{},m="string"==typeof f?g[f]:f;return l(m)?m:(a.error("Oops ... something went wrong when fetching "+f),!1)}oe.exports={locationToFeature:function(p,f,g){if(!f||"string"!=typeof f)return!1;var m,u,w,c=s[p](f);if(c){if("USA-states"===p)for(m=[],w=0;w<g.length;w++)(u=g[w]).properties&&u.properties.gu&&"USA"===u.properties.gu&&m.push(u);else m=g;for(w=0;w<m.length;w++)if((u=m[w]).id===c)return u;a.log(["Location with id",c,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(p){var f,g,m,u,w=p.geometry,c=w.coordinates,A=p.id,k=[];function C(E){for(var L=0;L<E.length-1;L++)if(E[L][0]>0&&E[L+1][0]<0)return L;return null}switch(f="RUS"===A||"FJI"===A?function(E){var L;if(null===C(E))L=E;else for(L=new Array(E.length),u=0;u<E.length;u++)L[u]=[E[u][0]<0?E[u][0]+360:E[u][0],E[u][1]];k.push(v.tester(L))}:"ATA"===A?function(E){var L=C(E);if(null===L)return k.push(v.tester(E));var D=new Array(E.length+1),N=0;for(u=0;u<E.length;u++)u>L?D[N++]=[E[u][0]+360,E[u][1]]:u===L?(D[N++]=E[u],D[N++]=[E[u][0],-90]):D[N++]=E[u];var F=v.tester(D);F.pts.pop(),k.push(F)}:function(E){k.push(v.tester(E))},w.type){case"MultiPolygon":for(g=0;g<c.length;g++)for(m=0;m<c[g].length;m++)f(c[g][m]);break;case"Polygon":for(g=0;g<c.length;g++)f(c[g])}return k},getTraceGeojson:d,extractTraceFeature:function(p){var f=p[0].trace,g=d(f);if(!g)return!1;var m,u={},w=[];for(m=0;m<f._length;m++){var c=p[m];(c.loc||0===c.loc)&&(u[c.loc]=c)}function A(E){var L=i(E,f.featureidkey||"id").get(),D=u[L];if(D){var N=E.geometry;if("Polygon"===N.type||"MultiPolygon"===N.type){var F={type:"Feature",id:L,geometry:N,properties:{}};F.properties.ct=function(I){var P,j=I.geometry;if("MultiPolygon"===j.type)for(var V=j.coordinates,Z=0,Y=0;Y<V.length;Y++){var ee={type:"Polygon",coordinates:V[Y]},re=M.default(ee);re>Z&&(Z=re,P=ee)}else P=j;return _.default(P).geometry.coordinates}(F),D.fIn=E,D.fOut=F,w.push(F)}else a.log(["Location",D.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete u[L]}switch(g.type){case"FeatureCollection":var k=g.features;for(m=0;m<k.length;m++)A(k[m]);break;case"Feature":A(g);break;default:return a.warn(["Invalid GeoJSON type",(g.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var C in u)a.log(["Location *"+C+"*","does not have a matching feature with id-key","*"+f.featureidkey+"*."].join(" "));return w},fetchTraceGeoData:function(p){var f=window.PlotlyGeoAssets||{},g=[];function m(A){return new Promise(function(k,C){y.json(A,function(E,L){return E?(delete f[A],C(new Error(404===E.status?'GeoJSON at URL "'+A+'" does not exist.':"Unexpected error while fetching from "+A))):(f[A]=L,k(L))})})}function u(A){return new Promise(function(k,C){var E=0,L=setInterval(function(){return f[A]&&"pending"!==f[A]?(clearInterval(L),k(f[A])):E>100?(clearInterval(L),C("Unexpected error while fetching from "+A)):void E++},50)})}for(var w=0;w<p.length;w++){var c=p[w][0].trace.geojson;"string"==typeof c&&(f[c]?"pending"===f[c]&&g.push(u(c)):(f[c]="pending",g.push(m(c))))}return g},computeBbox:function(p){return e.default(p)}}},{"./identity":501,"./is_plain_object":504,"./loggers":507,"./nested_property":511,"./polygon":515,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],497:[function(b,oe,se){"use strict";var y=b("../constants/numerical").BADNUM;se.calcTraceToLineCoords=function(x){for(var M=x[0].trace.connectgaps,_=[],e=[],o=0;o<x.length;o++){var a=x[o].lonlat;a[0]!==y?e.push(a):!M&&e.length>0&&(_.push(e),e=[])}return e.length>0&&_.push(e),_},se.makeLine=function(x){return 1===x.length?{type:"LineString",coordinates:x[0]}:{type:"MultiLineString",coordinates:x}},se.makePolygon=function(x){if(1===x.length)return{type:"Polygon",coordinates:x};for(var M=new Array(x.length),_=0;_<x.length;_++)M[_]=[x[_]];return{type:"MultiPolygon",coordinates:M}},se.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":479}],498:[function(b,oe,se){"use strict";var y,x,M,_=b("./mod").mod;function e(a,l,i,v,h,s,d,p){var f=i-a,g=h-a,m=d-h,u=v-l,w=s-l,c=p-s,A=f*c-m*u;if(0===A)return null;var k=(g*c-m*w)/A,C=(g*u-f*w)/A;return C<0||C>1||k<0||k>1?null:{x:a+f*k,y:l+u*k}}function o(a,l,i,v,h){var s=v*a+h*l;if(s<0)return v*v+h*h;if(s>i){var d=v-a,p=h-l;return d*d+p*p}var f=v*l-h*a;return f*f/i}se.segmentsIntersect=e,se.segmentDistance=function(a,l,i,v,h,s,d,p){if(e(a,l,i,v,h,s,d,p))return 0;var f=i-a,g=v-l,m=d-h,u=p-s,w=f*f+g*g,c=m*m+u*u,A=Math.min(o(f,g,w,h-a,s-l),o(f,g,w,d-a,p-l),o(m,u,c,a-h,l-s),o(m,u,c,i-h,v-s));return Math.sqrt(A)},se.getTextLocation=function(a,l,i,v){if(a===x&&v===M||(y={},x=a,M=v),y[i])return y[i];var h=a.getPointAtLength(_(i-v/2,l)),s=a.getPointAtLength(_(i+v/2,l)),d=Math.atan((s.y-h.y)/(s.x-h.x)),p=a.getPointAtLength(_(i,l)),f={x:(4*p.x+h.x+s.x)/6,y:(4*p.y+h.y+s.y)/6,theta:d};return y[i]=f,f},se.clearLocationCache=function(){x=null},se.getVisibleSegment=function(a,l,i){var v,h,s=l.left,d=l.right,p=l.top,f=l.bottom,g=0,m=a.getTotalLength(),u=m;function w(A){var k=a.getPointAtLength(A);0===A?v=k:A===m&&(h=k);var C=k.x<s?s-k.x:k.x>d?k.x-d:0,E=k.y<p?p-k.y:k.y>f?k.y-f:0;return Math.sqrt(C*C+E*E)}for(var c=w(g);c;){if((g+=c+i)>u)return;c=w(g)}for(c=w(u);c;){if(g>(u-=c+i))return;c=w(u)}return{min:g,max:u,len:u-g,total:m,isClosed:0===g&&u===m&&Math.abs(v.x-h.x)<.1&&Math.abs(v.y-h.y)<.1}},se.findPointOnPath=function(a,l,i,v){for(var h,s,d,p=(v=v||{}).pathLength||a.getTotalLength(),f=v.tolerance||.001,g=v.iterationLimit||30,m=a.getPointAtLength(0)[i]>a.getPointAtLength(p)[i]?-1:1,u=0,w=0,c=p;u<g;){if(d=(s=a.getPointAtLength(h=(w+c)/2))[i]-l,Math.abs(d)<f)return s;m*d>0?c=h:w=h,u++}return s}},{"./mod":510}],499:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("tinycolor2"),M=b("color-normalize"),_=b("../components/colorscale"),e=b("../components/color/attributes").defaultLine,o=b("./array").isArrayOrTypedArray,a=M(e);function l(h,s){var d=h;return d[3]*=s,d}function i(h){if(y(h))return a;var s=M(h);return s.length?s:a}function v(h){return y(h)?h:1}oe.exports={formatColor:function(h,s,d){var p,f,g,m,u,w=h.color,c=o(w),A=o(s),k=_.extractOpts(h),C=[];if(p=void 0!==k.colorscale?_.makeColorScaleFuncFromTrace(h):i,f=c?function(L,D){return void 0===L[D]?a:M(p(L[D]))}:i,g=A?function(L,D){return void 0===L[D]?1:v(L[D])}:v,c||A)for(var E=0;E<d;E++)m=f(w,E),u=g(s,E),C[E]=l(m,u);else C=l(M(w),s);return C},parseColorScale:function(h){var s=_.extractOpts(h),d=s.colorscale;return s.reversescale&&(d=_.flipScale(s.colorscale)),d.map(function(p){var f=p[0],g=x(p[1]).toRgb();return{index:f,rgb:[g.r,g.g,g.b,g.a]}})}}},{"../components/color/attributes":365,"../components/colorscale":378,"./array":485,"color-normalize":89,"fast-isnumeric":190,tinycolor2:312}],500:[function(b,oe,se){"use strict";var y=b("./identity");function x(M){return[M]}oe.exports={keyFun:function(M){return M.key},repeat:x,descend:y,wrap:x,unwrap:function(M){return M[0]}}},{"./identity":501}],501:[function(b,oe,se){"use strict";oe.exports=function(y){return y}},{}],502:[function(b,oe,se){"use strict";oe.exports=function(y,x){if(!x)return y;var M=1/Math.abs(x),_=M>1?(M*y+M*x)/M:y+x,e=String(_).length;if(e>16){var o=String(x).length;if(e>=String(y).length+o){var a=parseFloat(_).toPrecision(12);-1===a.indexOf("e+")&&(_=+a)}}return _}},{}],503:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("d3-time-format").utcFormat,M=b("d3-format").format,_=b("fast-isnumeric"),e=b("../constants/numerical"),o=e.FP_SAFE,a=-o,l=e.BADNUM,i=oe.exports={};i.adjustFormat=function(q){return!q||/^\d[.]\df/.test(q)||/[.]\d%/.test(q)?q:"0.f"===q?"~f":/^\d%/.test(q)?"~%":/^\ds/.test(q)?"~s":!/^[~,.0$]/.test(q)&&/[&fps]/.test(q)?"~"+q:q};var v={};i.warnBadFormat=function(q){var U=String(q);v[U]||(v[U]=1,i.warn('encountered bad format: "'+U+'"'))},i.noFormat=function(q){return String(q)},i.numberFormat=function(q){var U;try{U=M(i.adjustFormat(q))}catch(W){return i.warnBadFormat(q),i.noFormat}return U},i.nestedProperty=b("./nested_property"),i.keyedContainer=b("./keyed_container"),i.relativeAttr=b("./relative_attr"),i.isPlainObject=b("./is_plain_object"),i.toLogRange=b("./to_log_range"),i.relinkPrivateKeys=b("./relink_private");var h=b("./array");i.isTypedArray=h.isTypedArray,i.isArrayOrTypedArray=h.isArrayOrTypedArray,i.isArray1D=h.isArray1D,i.ensureArray=h.ensureArray,i.concat=h.concat,i.maxRowLength=h.maxRowLength,i.minRowLength=h.minRowLength;var s=b("./mod");i.mod=s.mod,i.modHalf=s.modHalf;var d=b("./coerce");i.valObjectMeta=d.valObjectMeta,i.coerce=d.coerce,i.coerce2=d.coerce2,i.coerceFont=d.coerceFont,i.coercePattern=d.coercePattern,i.coerceHoverinfo=d.coerceHoverinfo,i.coerceSelectionMarkerOpacity=d.coerceSelectionMarkerOpacity,i.validate=d.validate;var p=b("./dates");i.dateTime2ms=p.dateTime2ms,i.isDateTime=p.isDateTime,i.ms2DateTime=p.ms2DateTime,i.ms2DateTimeLocal=p.ms2DateTimeLocal,i.cleanDate=p.cleanDate,i.isJSDate=p.isJSDate,i.formatDate=p.formatDate,i.incrementMonth=p.incrementMonth,i.dateTick0=p.dateTick0,i.dfltRange=p.dfltRange,i.findExactDates=p.findExactDates,i.MIN_MS=p.MIN_MS,i.MAX_MS=p.MAX_MS;var f=b("./search");i.findBin=f.findBin,i.sorterAsc=f.sorterAsc,i.sorterDes=f.sorterDes,i.distinctVals=f.distinctVals,i.roundUp=f.roundUp,i.sort=f.sort,i.findIndexOfMin=f.findIndexOfMin,i.sortObjectKeys=b("./sort_object_keys");var g=b("./stats");i.aggNums=g.aggNums,i.len=g.len,i.mean=g.mean,i.median=g.median,i.midRange=g.midRange,i.variance=g.variance,i.stdev=g.stdev,i.interp=g.interp;var m=b("./matrix");i.init2dArray=m.init2dArray,i.transposeRagged=m.transposeRagged,i.dot=m.dot,i.translationMatrix=m.translationMatrix,i.rotationMatrix=m.rotationMatrix,i.rotationXYMatrix=m.rotationXYMatrix,i.apply3DTransform=m.apply3DTransform,i.apply2DTransform=m.apply2DTransform,i.apply2DTransform2=m.apply2DTransform2,i.convertCssMatrix=m.convertCssMatrix,i.inverseTransformMatrix=m.inverseTransformMatrix;var u=b("./angles");i.deg2rad=u.deg2rad,i.rad2deg=u.rad2deg,i.angleDelta=u.angleDelta,i.angleDist=u.angleDist,i.isFullCircle=u.isFullCircle,i.isAngleInsideSector=u.isAngleInsideSector,i.isPtInsideSector=u.isPtInsideSector,i.pathArc=u.pathArc,i.pathSector=u.pathSector,i.pathAnnulus=u.pathAnnulus;var w=b("./anchor_utils");i.isLeftAnchor=w.isLeftAnchor,i.isCenterAnchor=w.isCenterAnchor,i.isRightAnchor=w.isRightAnchor,i.isTopAnchor=w.isTopAnchor,i.isMiddleAnchor=w.isMiddleAnchor,i.isBottomAnchor=w.isBottomAnchor;var c=b("./geometry2d");i.segmentsIntersect=c.segmentsIntersect,i.segmentDistance=c.segmentDistance,i.getTextLocation=c.getTextLocation,i.clearLocationCache=c.clearLocationCache,i.getVisibleSegment=c.getVisibleSegment,i.findPointOnPath=c.findPointOnPath;var A=b("./extend");i.extendFlat=A.extendFlat,i.extendDeep=A.extendDeep,i.extendDeepAll=A.extendDeepAll,i.extendDeepNoArrays=A.extendDeepNoArrays;var k=b("./loggers");i.log=k.log,i.warn=k.warn,i.error=k.error;var C=b("./regex");i.counterRegex=C.counter;var E=b("./throttle");i.throttle=E.throttle,i.throttleDone=E.done,i.clearThrottle=E.clear;var L=b("./dom");function D(q){var U={};for(var W in q)for(var ae=q[W],G=0;G<ae.length;G++)U[ae[G]]=+W;return U}i.getGraphDiv=L.getGraphDiv,i.isPlotDiv=L.isPlotDiv,i.removeElement=L.removeElement,i.addStyleRule=L.addStyleRule,i.addRelatedStyleRule=L.addRelatedStyleRule,i.deleteRelatedStyleRule=L.deleteRelatedStyleRule,i.getFullTransformMatrix=L.getFullTransformMatrix,i.getElementTransformMatrix=L.getElementTransformMatrix,i.getElementAndAncestors=L.getElementAndAncestors,i.equalDomRects=L.equalDomRects,i.clearResponsive=b("./clear_responsive"),i.preserveDrawingBuffer=b("./preserve_drawing_buffer"),i.makeTraceGroups=b("./make_trace_groups"),i._=b("./localize"),i.notifier=b("./notifier"),i.filterUnique=b("./filter_unique"),i.filterVisible=b("./filter_visible"),i.pushUnique=b("./push_unique"),i.increment=b("./increment"),i.cleanNumber=b("./clean_number"),i.ensureNumber=function(q){return _(q)?(q=Number(q))>o||q<a?l:q:l},i.isIndex=function(q,U){return!(void 0!==U&&q>=U)&&_(q)&&q>=0&&q%1==0},i.noop=b("./noop"),i.identity=b("./identity"),i.repeat=function(q,U){for(var W=new Array(U),ae=0;ae<U;ae++)W[ae]=q;return W},i.swapAttrs=function(q,U,W,ae){W||(W="x"),ae||(ae="y");for(var G=0;G<U.length;G++){var te=U[G],ne=i.nestedProperty(q,te.replace("?",W)),le=i.nestedProperty(q,te.replace("?",ae)),ue=ne.get();ne.set(le.get()),le.set(ue)}},i.raiseToTop=function(q){q.parentNode.appendChild(q)},i.cancelTransition=function(q){return q.transition().duration(0)},i.constrain=function(q,U,W){return U>W?Math.max(W,Math.min(U,q)):Math.max(U,Math.min(W,q))},i.bBoxIntersect=function(q,U,W){return q.left<=U.right+(W=W||0)&&U.left<=q.right+W&&q.top<=U.bottom+W&&U.top<=q.bottom+W},i.simpleMap=function(q,U,W,ae,G){for(var te=q.length,ne=new Array(te),le=0;le<te;le++)ne[le]=U(q[le],W,ae,G);return ne},i.randstr=function q(U,W,ae,G){if(ae||(ae=16),void 0===W&&(W=24),W<=0)return"0";var te,ne,le=Math.log(Math.pow(2,W))/Math.log(ae),ue="";for(te=2;le===1/0;te*=2)le=Math.log(Math.pow(2,W/te))/Math.log(ae)*te;var pe=le-Math.floor(le);for(te=0;te<Math.floor(le);te++)ue=Math.floor(Math.random()*ae).toString(ae)+ue;pe&&(ne=Math.pow(ae,pe),ue=Math.floor(Math.random()*ne).toString(ae)+ue);var de=parseInt(ue,ae);return U&&U[ue]||de!==1/0&&de>=Math.pow(2,W)?G>10?(i.warn("randstr failed uniqueness"),ue):q(U,W,ae,(G||0)+1):ue},i.OptionControl=function(q,U){q||(q={}),U||(U="opt");var W={optionList:[],_newoption:function(ae){ae[U]=q,W[ae.name]=ae,W.optionList.push(ae)}};return W["_"+U]=q,W},i.smooth=function(q,U){if((U=Math.round(U)||0)<2)return q;var W,ae,G,te,ne=q.length,le=2*ne,ue=2*U-1,pe=new Array(ue),de=new Array(ne);for(W=0;W<ue;W++)pe[W]=(1-Math.cos(Math.PI*(W+1)/U))/(2*U);for(W=0;W<ne;W++){for(te=0,ae=0;ae<ue;ae++)(G=W+ae+1-U)<-ne?G-=le*Math.round(G/le):G>=le&&(G-=le*Math.floor(G/le)),G<0?G=-1-G:G>=ne&&(G=le-1-G),te+=q[G]*pe[ae];de[W]=te}return de},i.syncOrAsync=function(q,U,W){var ae;function G(){return i.syncOrAsync(q,U,W)}for(;q.length;)if((ae=(0,q.splice(0,1)[0])(U))&&ae.then)return ae.then(G);return W&&W(U)},i.stripTrailingSlash=function(q){return"/"===q.substr(-1)?q.substr(0,q.length-1):q},i.noneOrAll=function(q,U,W){if(q){var ae,G=!1,te=!0;for(ae=0;ae<W.length;ae++)null!=q[W[ae]]?G=!0:te=!1;if(G&&!te)for(ae=0;ae<W.length;ae++)q[W[ae]]=U[W[ae]]}},i.mergeArray=function(q,U,W,ae){var G="function"==typeof ae;if(i.isArrayOrTypedArray(q))for(var te=Math.min(q.length,U.length),ne=0;ne<te;ne++){var le=q[ne];U[ne][W]=G?ae(le):le}},i.mergeArrayCastPositive=function(q,U,W){return i.mergeArray(q,U,W,function(ae){var G=+ae;return isFinite(G)&&G>0?G:0})},i.fillArray=function(q,U,W,ae){if(ae=ae||i.identity,i.isArrayOrTypedArray(q))for(var G=0;G<U.length;G++)U[G][W]=ae(q[G])},i.castOption=function(q,U,W,ae){ae=ae||i.identity;var G=i.nestedProperty(q,W).get();return i.isArrayOrTypedArray(G)?Array.isArray(U)&&i.isArrayOrTypedArray(G[U[0]])?ae(G[U[0]][U[1]]):ae(G[U]):G},i.extractOption=function(q,U,W,ae){if(W in q)return q[W];var G=i.nestedProperty(U,ae).get();return Array.isArray(G)?void 0:G},i.tagSelected=function(q,U,W){var ae,G,te=U.selectedpoints,ne=U._indexToPoints;ne&&(ae=D(ne));for(var le=0;le<te.length;le++){var ue=te[le];if(i.isIndex(ue)||i.isArrayOrTypedArray(ue)&&i.isIndex(ue[0])&&i.isIndex(ue[1])){var pe=ae?ae[ue]:ue,de=W?W[pe]:pe;void 0!==(G=de)&&G<q.length&&(q[de].selected=1)}}},i.selIndices2selPoints=function(q){var U=q.selectedpoints,W=q._indexToPoints;if(W){for(var ae=D(W),G=[],te=0;te<U.length;te++){var ne=U[te];if(i.isIndex(ne)){var le=ae[ne];i.isIndex(le)&&G.push(le)}}return G}return U},i.getTargetArray=function(q,U){var W=U.target;if("string"==typeof W&&W){var ae=i.nestedProperty(q,W).get();return!!Array.isArray(ae)&&ae}return!!Array.isArray(W)&&W},i.minExtend=function(q,U){var W={};"object"!=typeof U&&(U={});var ae,G,te,ne=Object.keys(q);for(ae=0;ae<ne.length;ae++)te=q[G=ne[ae]],"_"!==G.charAt(0)&&"function"!=typeof te&&(W[G]="module"===G?te:Array.isArray(te)?"colorscale"===G?te.slice():te.slice(0,3):i.isTypedArray(te)?te.subarray(0,3):te&&"object"==typeof te?i.minExtend(q[G],U[G]):te);for(ne=Object.keys(U),ae=0;ae<ne.length;ae++)"object"==typeof(te=U[G=ne[ae]])&&G in W&&"object"==typeof W[G]||(W[G]=te);return W},i.titleCase=function(q){return q.charAt(0).toUpperCase()+q.substr(1)},i.containsAny=function(q,U){for(var W=0;W<U.length;W++)if(-1!==q.indexOf(U[W]))return!0;return!1},i.isIE=function(){return void 0!==window.navigator.msSaveBlob};var N=/Version\/[\d\.]+.*Safari/;i.isSafari=function(){return N.test(window.navigator.userAgent)};var F=/iPad|iPhone|iPod/;i.isIOS=function(){return F.test(window.navigator.userAgent)};var I=/Firefox\/(\d+)\.\d+/;i.getFirefoxVersion=function(){var q=I.exec(window.navigator.userAgent);if(q&&2===q.length){var U=parseInt(q[1]);if(!isNaN(U))return U}return null},i.isD3Selection=function(q){return q instanceof y.selection},i.ensureSingle=function(q,U,W,ae){var G=q.select(U+(W?"."+W:""));if(G.size())return G;var te=q.append(U);return W&&te.classed(W,!0),ae&&te.call(ae),te},i.ensureSingleById=function(q,U,W,ae){var G=q.select(U+"#"+W);if(G.size())return G;var te=q.append(U).attr("id",W);return ae&&te.call(ae),te},i.objectFromPath=function(q,U){for(var W,ae=q.split("."),G=W={},te=0;te<ae.length;te++){var ne=ae[te],le=null,ue=ae[te].match(/(.*)\[([0-9]+)\]/);ue?(le=ue[2],(W=W[ne=ue[1]]=[])[le]=te===ae.length-1?U:{},W=W[le]):(W[ne]=te===ae.length-1?U:{},W=W[ne])}return G};var P=/^([^\[\.]+)\.(.+)?/,j=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;i.expandObjectPaths=function(q){var U,W,ae,G,te,ne,le;if("object"==typeof q&&!Array.isArray(q))for(W in q)q.hasOwnProperty(W)&&((U=W.match(P))?(G=q[W],ae=U[1],delete q[W],q[ae]=i.extendDeepNoArrays(q[ae]||{},i.objectFromPath(W,i.expandObjectPaths(G))[ae])):(U=W.match(j))?(G=q[W],ae=U[1],te=parseInt(U[2]),delete q[W],q[ae]=q[ae]||[],"."===U[3]?(le=U[4],ne=q[ae][te]=q[ae][te]||{},i.extendDeepNoArrays(ne,i.objectFromPath(le,i.expandObjectPaths(G)))):q[ae][te]=i.expandObjectPaths(G)):q[W]=i.expandObjectPaths(q[W]));return q},i.numSeparate=function(q,U,W){if(W||(W=!1),"string"!=typeof U||0===U.length)throw new Error("Separator string required for formatting!");"number"==typeof q&&(q=String(q));var ae=/(\d+)(\d{3})/,G=U.charAt(0),te=U.charAt(1),ne=q.split("."),le=ne[0],ue=ne.length>1?G+ne[1]:"";if(te&&(ne.length>1||le.length>4||W))for(;ae.test(le);)le=le.replace(ae,"$1"+te+"$2");return le+ue},i.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var V=/^\w*$/;i.templateString=function(q,U){var W={};return q.replace(i.TEMPLATE_STRING_REGEX,function(ae,G){var te;return V.test(G)?te=U[G]:(W[G]=W[G]||i.nestedProperty(U,G).get,te=W[G]()),i.isValidTextValue(te)?te:""})};var Z={max:10,count:0,name:"hovertemplate"};i.hovertemplateString=function(){return re.apply(Z,arguments)};var Y={max:10,count:0,name:"texttemplate"};i.texttemplateString=function(){return re.apply(Y,arguments)};var ee=/^[:|\|]/;function re(q,U,W){var ae=this,G=arguments;U||(U={});var te={};return q.replace(i.TEMPLATE_STRING_REGEX,function(ne,le,ue){var pe,de,_e,me="_xother"===le||"_yother"===le,we="_xother_"===le||"_yother_"===le,De="xother_"===le||"yother_"===le,Le="xother"===le||"yother"===le||me||De||we,Ie=le;if((me||we)&&(Ie=Ie.substring(1)),(De||we)&&(Ie=Ie.substring(0,Ie.length-1)),Le){if(void 0===(pe=U[Ie]))return""}else for(_e=3;_e<G.length;_e++)if(de=G[_e]){if(de.hasOwnProperty(Ie)){pe=de[Ie];break}if(V.test(Ie)||(pe=i.nestedProperty(de,Ie).get(),(pe=te[Ie]||i.nestedProperty(de,Ie).get())&&(te[Ie]=pe)),void 0!==pe)break}if(void 0===pe&&ae)return ae.count<ae.max&&(i.warn("Variable '"+Ie+"' in "+ae.name+" could not be found!"),pe=ne),ae.count===ae.max&&i.warn("Too many "+ae.name+" warnings - additional warnings will be suppressed"),ae.count++,ne;if(ue){var je;if(":"===ue[0]&&(pe=(je=W?W.numberFormat:i.numberFormat)(ue.replace(ee,""))(pe)),"|"===ue[0]){je=W?W.timeFormat:x;var ye=i.dateTime2ms(pe);pe=i.formatDate(ye,ue.replace(ee,""),!1,je)}}else{var Me=Ie+"Label";U.hasOwnProperty(Me)&&(pe=U[Me])}return Le&&(pe="("+pe+")",(me||we)&&(pe=" "+pe),(De||we)&&(pe+=" ")),pe})}i.subplotSort=function(q,U){for(var W=Math.min(q.length,U.length)+1,ae=0,G=0,te=0;te<W;te++){var ne=q.charCodeAt(te)||0,le=U.charCodeAt(te)||0,ue=ne>=48&&ne<=57,pe=le>=48&&le<=57;if(ue&&(ae=10*ae+ne-48),pe&&(G=10*G+le-48),!ue||!pe){if(ae!==G)return ae-G;if(ne!==le)return ne-le}}return G-ae};var X=2e9;i.seedPseudoRandom=function(){X=2e9},i.pseudoRandom=function(){var q=X;return X=(69069*X+1)%4294967296,Math.abs(X-q)<429496729?i.pseudoRandom():X/4294967296},i.fillText=function(q,U,W){var ae=Array.isArray(W)?function(ne){W.push(ne)}:function(ne){W.text=ne},G=i.extractOption(q,U,"htx","hovertext");if(i.isValidTextValue(G))return ae(G);var te=i.extractOption(q,U,"tx","text");return i.isValidTextValue(te)?ae(te):void 0},i.isValidTextValue=function(q){return q||0===q},i.formatPercent=function(q,U){U=U||0;for(var W=(Math.round(100*q*Math.pow(10,U))*Math.pow(.1,U)).toFixed(U)+"%",ae=0;ae<U;ae++)-1!==W.indexOf(".")&&(W=(W=W.replace("0%","%")).replace(".%","%"));return W},i.isHidden=function(q){var U=window.getComputedStyle(q).display;return!U||"none"===U},i.strTranslate=function(q,U){return q||U?"translate("+q+","+U+")":""},i.strRotate=function(q){return q?"rotate("+q+")":""},i.strScale=function(q){return 1!==q?"scale("+q+")":""},i.getTextTransform=function(q){var U=q.noCenter,W=q.textX,ae=q.textY,ue=q.rotate,pe=q.scale;return pe?pe>1&&(pe=1):pe=0,i.strTranslate(q.targetX-pe*(W+(q.anchorX||0)),q.targetY-pe*(ae+(q.anchorY||0)))+i.strScale(pe)+(ue?"rotate("+ue+(U?"":" "+W+" "+ae)+")":"")},i.ensureUniformFontSize=function(q,U){var W=i.extendFlat({},U);return W.size=Math.max(U.size,q._fullLayout.uniformtext.minsize||0),W},i.join2=function(q,U,W){var ae=q.length;return ae>1?q.slice(0,-1).join(U)+W+q[ae-1]:q.join(U)},i.bigFont=function(q){return Math.round(1.2*q)};var K=i.getFirefoxVersion(),ie=null!==K&&K<86;i.getPositionFromD3Event=function(){return ie?[y.event.layerX,y.event.layerY]:[y.event.offsetX,y.event.offsetY]}},{"../constants/numerical":479,"./anchor_utils":483,"./angles":484,"./array":485,"./clean_number":486,"./clear_responsive":488,"./coerce":489,"./dates":490,"./dom":491,"./extend":493,"./filter_unique":494,"./filter_visible":495,"./geometry2d":498,"./identity":501,"./increment":502,"./is_plain_object":504,"./keyed_container":505,"./localize":506,"./loggers":507,"./make_trace_groups":508,"./matrix":509,"./mod":510,"./nested_property":511,"./noop":512,"./notifier":513,"./preserve_drawing_buffer":517,"./push_unique":518,"./regex":520,"./relative_attr":521,"./relink_private":522,"./search":523,"./sort_object_keys":526,"./stats":527,"./throttle":530,"./to_log_range":531,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],504:[function(b,oe,se){"use strict";oe.exports=function(y){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(y):"[object Object]"===Object.prototype.toString.call(y)&&Object.getPrototypeOf(y).hasOwnProperty("hasOwnProperty")}},{}],505:[function(b,oe,se){"use strict";var y=b("./nested_property"),x=/^\w*$/;oe.exports=function(M,_,e,o){var a,l,i;e=e||"name",o=o||"value";var v={};_&&_.length?(i=y(M,_),l=i.get()):l=M,_=_||"";var h={};if(l)for(a=0;a<l.length;a++)h[l[a][e]]=a;var s=x.test(o),d={set:function(p,f){var g=null===f?4:0;if(!l){if(!i||4===g)return;i.set(l=[])}var m=h[p];if(void 0===m){if(4===g)return;g|=3,h[p]=m=l.length}else f!==(s?l[m][o]:y(l[m],o).get())&&(g|=2);var u=l[m]=l[m]||{};return u[e]=p,s?u[o]=f:y(u,o).set(f),null!==f&&(g&=-5),v[m]=v[m]|g,d},get:function(p){if(l){var f=h[p];return void 0===f?void 0:s?l[f][o]:y(l[f],o).get()}},rename:function(p,f){var g=h[p];return void 0===g||(v[g]=1|v[g],h[f]=g,delete h[p],l[g][e]=f),d},remove:function(p){var f=h[p];if(void 0===f)return d;var g=l[f];if(Object.keys(g).length>2)return v[f]=2|v[f],d.set(p,null);if(s){for(a=f;a<l.length;a++)v[a]=3|v[a];for(a=f;a<l.length;a++)h[l[a][e]]--;l.splice(f,1),delete h[p]}else y(g,o).set(null),v[f]=6|v[f];return d},constructUpdate:function(){for(var p,f,g={},m=Object.keys(v),u=0;u<m.length;u++)p=_+"["+(f=m[u])+"]",l[f]?(1&v[f]&&(g[p+"."+e]=l[f][e]),2&v[f]&&(g[p+"."+o]=s?4&v[f]?null:l[f][o]:4&v[f]?null:y(l[f],o).get())):g[p]=null;return g}};return d}},{"./nested_property":511}],506:[function(b,oe,se){"use strict";var y=b("../registry");oe.exports=function(x,M){for(var _=x._context.locale,e=0;e<2;e++){for(var o=x._context.locales,a=0;a<2;a++){var l=(o[_]||{}).dictionary;if(l){var i=l[M];if(i)return i}o=y.localeRegistry}var v=_.split("-")[0];if(v===_)break;_=v}return M}},{"../registry":638}],507:[function(b,oe,se){"use strict";var y=b("../plot_api/plot_config").dfltConfig,x=b("./notifier"),M=oe.exports={};M.log=function(){var _;if(y.logging>1){var e=["LOG:"];for(_=0;_<arguments.length;_++)e.push(arguments[_]);console.trace.apply(console,e)}if(y.notifyOnLogging>1){var o=[];for(_=0;_<arguments.length;_++)o.push(arguments[_]);x(o.join("<br>"),"long")}},M.warn=function(){var _;if(y.logging>0){var e=["WARN:"];for(_=0;_<arguments.length;_++)e.push(arguments[_]);console.trace.apply(console,e)}if(y.notifyOnLogging>0){var o=[];for(_=0;_<arguments.length;_++)o.push(arguments[_]);x(o.join("<br>"),"stick")}},M.error=function(){var _;if(y.logging>0){var e=["ERROR:"];for(_=0;_<arguments.length;_++)e.push(arguments[_]);console.error.apply(console,e)}if(y.notifyOnLogging>0){var o=[];for(_=0;_<arguments.length;_++)o.push(arguments[_]);x(o.join("<br>"),"stick")}}},{"../plot_api/plot_config":541,"./notifier":513}],508:[function(b,oe,se){"use strict";var y=b("@plotly/d3");oe.exports=function(x,M,_){var e=x.selectAll("g."+_.replace(/\s/g,".")).data(M,function(a){return a[0].trace.uid});e.exit().remove(),e.enter().append("g").attr("class",_),e.order();var o=x.classed("rangeplot")?"nodeRangePlot3":"node3";return e.each(function(a){a[0][o]=y.select(this)}),e}},{"@plotly/d3":58}],509:[function(b,oe,se){"use strict";var y=b("gl-mat4");se.init2dArray=function(x,M){for(var _=new Array(x),e=0;e<x;e++)_[e]=new Array(M);return _},se.transposeRagged=function(x){var M,_,e=0,o=x.length;for(M=0;M<o;M++)e=Math.max(e,x[M].length);var a=new Array(e);for(M=0;M<e;M++)for(a[M]=new Array(o),_=0;_<o;_++)a[M][_]=x[_][M];return a},se.dot=function(x,M){if(!x.length||!M.length||x.length!==M.length)return null;var _,e,o=x.length;if(x[0].length)for(_=new Array(o),e=0;e<o;e++)_[e]=se.dot(x[e],M);else if(M[0].length){var a=se.transposeRagged(M);for(_=new Array(a.length),e=0;e<a.length;e++)_[e]=se.dot(x,a[e])}else for(_=0,e=0;e<o;e++)_+=x[e]*M[e];return _},se.translationMatrix=function(x,M){return[[1,0,x],[0,1,M],[0,0,1]]},se.rotationMatrix=function(x){var M=x*Math.PI/180;return[[Math.cos(M),-Math.sin(M),0],[Math.sin(M),Math.cos(M),0],[0,0,1]]},se.rotationXYMatrix=function(x,M,_){return se.dot(se.dot(se.translationMatrix(M,_),se.rotationMatrix(x)),se.translationMatrix(-M,-_))},se.apply3DTransform=function(x){return function(){var M=arguments,_=1===arguments.length?M[0]:[M[0],M[1],M[2]||0];return se.dot(x,[_[0],_[1],_[2],1]).slice(0,3)}},se.apply2DTransform=function(x){return function(){var M=arguments;3===M.length&&(M=M[0]);var _=1===arguments.length?M[0]:[M[0],M[1]];return se.dot(x,[_[0],_[1],1]).slice(0,2)}},se.apply2DTransform2=function(x){var M=se.apply2DTransform(x);return function(_){return M(_.slice(0,2)).concat(M(_.slice(2,4)))}},se.convertCssMatrix=function(x){if(x){var M=x.length;if(16===M)return x;if(6===M)return[x[0],x[1],0,0,x[2],x[3],0,0,0,0,1,0,x[4],x[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},se.inverseTransformMatrix=function(x){var M=[];return y.invert(M,x),[[M[0],M[1],M[2],M[3]],[M[4],M[5],M[6],M[7]],[M[8],M[9],M[10],M[11]],[M[12],M[13],M[14],M[15]]]}},{"gl-mat4":210}],510:[function(b,oe,se){"use strict";oe.exports={mod:function(y,x){var M=y%x;return M<0?M+x:M},modHalf:function(y,x){return Math.abs(y)>x/2?y-Math.round(y/x)*x:y}}},{}],511:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("./array").isArrayOrTypedArray;function M(v,h){return function(){var s,d,p,f,g,m=v;for(f=0;f<h.length-1;f++){if(-1===(s=h[f])){for(d=!0,p=[],g=0;g<m.length;g++)p[g]=M(m[g],h.slice(f+1))(),p[g]!==p[0]&&(d=!1);return d?p[0]:p}if("number"==typeof s&&!x(m)||"object"!=typeof(m=m[s])||null===m)return}if("object"==typeof m&&null!==m&&null!==(p=m[h[f]]))return p}}oe.exports=function(v,h){if(y(h))h=String(h);else if("string"!=typeof h||"[-1]"===h.substr(h.length-4))throw"bad property string";for(var s,d,p,f=0,g=h.split(".");f<g.length;){if(s=String(g[f]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(s[1])g[f]=s[1];else{if(0!==f)throw"bad property string";g.splice(0,1)}for(d=s[2].substr(1,s[2].length-2).split("]["),p=0;p<d.length;p++)f++,g.splice(f,0,Number(d[p]))}f++}return"object"!=typeof v?{set:function(){throw"bad container"},get:function(){},astr:h,parts:g,obj:v}:{set:o(v,g,h),get:M(v,g),astr:h,parts:g,obj:v}};var _=/(^|\.)args\[/;function e(v,h){return void 0===v||null===v&&!h.match(_)}function o(v,h,s){return function(d){var p,f,g=v,m="",u=[[v,m]],w=e(d,s);for(f=0;f<h.length-1;f++){if("number"==typeof(p=h[f])&&!x(g))throw"array index but container is not an array";if(-1===p){if(w=!l(g,h.slice(f+1),d,s))break;return}if(!i(g,p,h[f+1],w))break;if("object"!=typeof(g=g[p])||null===g)throw"container is not an object";m=a(m,p),u.push([g,m])}if(w){if(f===h.length-1&&(delete g[h[f]],Array.isArray(g)&&+h[f]==g.length-1))for(;g.length&&void 0===g[g.length-1];)g.pop()}else g[h[f]]=d}}function a(v,h){var s=h;return y(h)?s="["+h+"]":v&&(s="."+h),v+s}function l(v,h,s,d){var p,f=x(s),g=!0,m=s,u=d.replace("-1",0),w=!f&&e(s,u),c=h[0];for(p=0;p<v.length;p++)u=d.replace("-1",p),f&&(w=e(m=s[p%s.length],u)),w&&(g=!1),i(v,p,c,w)&&o(v[p],h,d.replace("-1",p))(m);return g}function i(v,h,s,d){if(void 0===v[h]){if(d)return!1;v[h]="number"==typeof s?[]:{}}return!0}},{"./array":485,"fast-isnumeric":190}],512:[function(b,oe,se){"use strict";oe.exports=function(){}},{}],513:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("fast-isnumeric"),M=[];oe.exports=function(_,e){if(-1===M.indexOf(_)){M.push(_);var o=1e3;x(e)?o=e:"long"===e&&(o=3e3);var a=y.select("body").selectAll(".plotly-notifier").data([0]);a.enter().append("div").classed("plotly-notifier",!0),a.selectAll(".notifier-note").data(M).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(i){var v=y.select(this);v.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){v.transition().call(l)});for(var h=v.append("p"),s=i.split(/<br\s*\/?>/g),d=0;d<s.length;d++)d&&h.append("br"),h.append("span").text(s[d]);"stick"===e?v.transition().duration(350).style("opacity",1):v.transition().duration(700).style("opacity",1).transition().delay(o).call(l)})}function l(i){i.duration(700).style("opacity",0).each("end",function(v){var h=M.indexOf(v);-1!==h&&M.splice(h,1),y.select(this).remove()})}}},{"@plotly/d3":58,"fast-isnumeric":190}],514:[function(b,oe,se){"use strict";var y=b("./setcursor"),x="data-savedcursor";oe.exports=function(M,_){var e=M.attr(x);if(_){if(!e){for(var o=(M.attr("class")||"").split(" "),a=0;a<o.length;a++){var l=o[a];0===l.indexOf("cursor-")&&M.attr(x,l.substr(7)).classed(l,!1)}M.attr(x)||M.attr(x,"!!")}y(M,_)}else e&&(M.attr(x,null),"!!"===e?y(M):y(M,e))}},{"./setcursor":524}],515:[function(b,oe,se){"use strict";var y=b("./matrix").dot,x=b("../constants/numerical").BADNUM,M=oe.exports={};M.tester=function(_){var e,o=_.slice(),a=o[0][0],l=a,i=o[0][1],v=i;for(o.push(o[0]),e=1;e<o.length;e++)a=Math.min(a,o[e][0]),l=Math.max(l,o[e][0]),i=Math.min(i,o[e][1]),v=Math.max(v,o[e][1]);var h,s=!1;5===o.length&&(o[0][0]===o[1][0]?o[2][0]===o[3][0]&&o[0][1]===o[3][1]&&o[1][1]===o[2][1]&&(s=!0,h=function(f){return f[0]===o[0][0]}):o[0][1]===o[1][1]&&o[2][1]===o[3][1]&&o[0][0]===o[3][0]&&o[1][0]===o[2][0]&&(s=!0,h=function(f){return f[1]===o[0][1]}));var d=!0,p=o[0];for(e=1;e<o.length;e++)if(p[0]!==o[e][0]||p[1]!==o[e][1]){d=!1;break}return{xmin:a,xmax:l,ymin:i,ymax:v,pts:o,contains:s?function(f,g){var m=f[0],u=f[1];return!(m===x||m<a||m>l||u===x||u<i||u>v||g&&h(f))}:function(f,g){var m=f[0],u=f[1];if(m===x||m<a||m>l||u===x||u<i||u>v)return!1;var w,c,A,k,C,E=o.length,L=o[0][0],D=o[0][1],N=0;for(w=1;w<E;w++)if(c=L,A=D,L=o[w][0],D=o[w][1],!(m<(k=Math.min(c,L))||m>Math.max(c,L)||u>Math.max(A,D)))if(u<Math.min(A,D))m!==k&&N++;else{if(u===(C=L===c?u:A+(m-c)*(D-A)/(L-c)))return 1!==w||!g;u<=C&&m!==k&&N++}return N%2==1},isRect:s,degenerate:d}},M.isSegmentBent=function(_,e,o,a){var l,i,v,h=_[e],s=[_[o][0]-h[0],_[o][1]-h[1]],d=y(s,s),p=Math.sqrt(d),f=[-s[1]/p,s[0]/p];for(l=e+1;l<o;l++)if((v=y(i=[_[l][0]-h[0],_[l][1]-h[1]],s))<0||v>d||Math.abs(y(i,f))>a)return!0;return!1},M.filter=function(_,e){var o=[_[0]],a=0,l=0;function i(v){_.push(v);var h=o.length,s=a;o.splice(l+1);for(var d=s+1;d<_.length;d++)(d===_.length-1||M.isSegmentBent(_,s,d+1,e))&&(o.push(_[d]),o.length<h-2&&(a=d,l=o.length-1),s=d)}return _.length>1&&i(_.pop()),{addPt:i,raw:_,filtered:o}}},{"../constants/numerical":479,"./matrix":509}],516:[function(b,oe,se){(function(y){(function(){"use strict";var x=b("./show_no_webgl_msg"),M=b("regl");oe.exports=function(_,e,o){var a=_._fullLayout,l=!0;return a._glcanvas.each(function(i){if(i.regl)i.regl.preloadCachedCode(o);else if(!i.pick||a._has("parcoords")){try{i.regl=M({canvas:this,attributes:{antialias:!i.pick,preserveDrawingBuffer:!0},pixelRatio:_._context.plotGlPixelRatio||y.devicePixelRatio,extensions:e||[],cachedCode:o||{}})}catch(v){l=!1}i.regl||(l=!1),l&&this.addEventListener("webglcontextlost",function(v){_&&_.emit&&_.emit("plotly_webglcontextlost",{event:v,layer:i.key})},!1)}}),l||x({container:a._glcontainer.node()}),l}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./show_no_webgl_msg":525,regl:283}],517:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("is-mobile");oe.exports=function(M){var _,h;if("string"!=typeof(_=M&&M.hasOwnProperty("userAgent")?M.userAgent:("undefined"!=typeof navigator&&(h=navigator.userAgent),h&&h.headers&&"string"==typeof h.headers["user-agent"]&&(h=h.headers["user-agent"]),h)))return!0;var e=x({ua:{headers:{"user-agent":_}},tablet:!0,featureDetect:!1});if(!e)for(var o=_.split(" "),a=1;a<o.length;a++)if(-1!==o[a].indexOf("Safari"))for(var l=a-1;l>-1;l--){var i=o[l];if("Version/"===i.substr(0,8)){var v=i.substr(8).split(".")[0];if(y(v)&&(v=+v),v>=13)return!0}}return e}},{"fast-isnumeric":190,"is-mobile":234}],518:[function(b,oe,se){"use strict";oe.exports=function(y,x){if(x instanceof RegExp){for(var M=x.toString(),_=0;_<y.length;_++)if(y[_]instanceof RegExp&&y[_].toString()===M)return y;y.push(x)}else!x&&0!==x||-1!==y.indexOf(x)||y.push(x);return y}},{}],519:[function(b,oe,se){"use strict";var y=b("../lib"),x=b("../plot_api/plot_config").dfltConfig,M={add:function(_,e,o,a,l){var i,v;_.undoQueue=_.undoQueue||{index:0,queue:[],sequence:!1},v=_.undoQueue.index,_.autoplay?_.undoQueue.inSequence||(_.autoplay=!1):(!_.undoQueue.sequence||_.undoQueue.beginSequence?(_.undoQueue.queue.splice(v,_.undoQueue.queue.length-v,i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),_.undoQueue.index+=1):i=_.undoQueue.queue[v-1],_.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(e),i.undo.args.unshift(o),i.redo.calls.push(a),i.redo.args.push(l)),_.undoQueue.queue.length>x.queueLength&&(_.undoQueue.queue.shift(),_.undoQueue.index--))},startSequence:function(_){_.undoQueue=_.undoQueue||{index:0,queue:[],sequence:!1},_.undoQueue.sequence=!0,_.undoQueue.beginSequence=!0},stopSequence:function(_){_.undoQueue=_.undoQueue||{index:0,queue:[],sequence:!1},_.undoQueue.sequence=!1,_.undoQueue.beginSequence=!1},undo:function(_){var e,o;if(!(void 0===_.undoQueue||isNaN(_.undoQueue.index)||_.undoQueue.index<=0)){for(_.undoQueue.index--,e=_.undoQueue.queue[_.undoQueue.index],_.undoQueue.inSequence=!0,o=0;o<e.undo.calls.length;o++)M.plotDo(_,e.undo.calls[o],e.undo.args[o]);_.undoQueue.inSequence=!1,_.autoplay=!1}},redo:function(_){var e,o;if(!(void 0===_.undoQueue||isNaN(_.undoQueue.index)||_.undoQueue.index>=_.undoQueue.queue.length)){for(e=_.undoQueue.queue[_.undoQueue.index],_.undoQueue.inSequence=!0,o=0;o<e.redo.calls.length;o++)M.plotDo(_,e.redo.calls[o],e.redo.args[o]);_.undoQueue.inSequence=!1,_.autoplay=!1,_.undoQueue.index++}},plotDo:function(_,e,o){_.autoplay=!0,o=function(a,l){for(var i,v=[],h=0;h<l.length;h++)v[h]=(i=l[h])===a?i:"object"==typeof i?Array.isArray(i)?y.extendDeep([],i):y.extendDeepAll({},i):i;return v}(_,o),e.apply(null,o)}};oe.exports=M},{"../lib":503,"../plot_api/plot_config":541}],520:[function(b,oe,se){"use strict";se.counter=function(y,x,M,_){var e=(x||"")+(M?"":"$"),o=!1===_?"":"^";return"xy"===y?new RegExp(o+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(o+y+"([2-9]|[1-9][0-9]+)?"+e)}},{}],521:[function(b,oe,se){"use strict";var y=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,x=/^[^\.\[\]]+$/;oe.exports=function(M,_){for(;_;){var e=M.match(y);if(e)M=e[1];else{if(!M.match(x))throw new Error("bad relativeAttr call:"+[M,_]);M=""}if("^"!==_.charAt(0))break;_=_.slice(1)}return M&&"["!==_.charAt(0)?M+"."+_:M+_}},{}],522:[function(b,oe,se){"use strict";var y=b("./array").isArrayOrTypedArray,x=b("./is_plain_object");oe.exports=function M(_,e){for(var o in e){var a=e[o],l=_[o];if(l!==a)if("_"===o.charAt(0)||"function"==typeof a){if(o in _)continue;_[o]=a}else if(y(a)&&y(l)&&x(a[0])){if("customdata"===o||"ids"===o)continue;for(var i=Math.min(a.length,l.length),v=0;v<i;v++)l[v]!==a[v]&&x(a[v])&&x(l[v])&&M(l[v],a[v])}else x(a)&&x(l)&&(M(l,a),Object.keys(l).length||delete _[o])}}},{"./array":485,"./is_plain_object":504}],523:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("./loggers"),M=b("./identity"),_=b("../constants/numerical").BADNUM;function e(i,v){return i<v}function o(i,v){return i<=v}function a(i,v){return i>v}function l(i,v){return i>=v}se.findBin=function(i,v,h){if(y(v.start))return h?Math.ceil((i-v.start)/v.size-1e-9)-1:Math.floor((i-v.start)/v.size+1e-9);var s,d,p=0,f=v.length,g=0,m=f>1?(v[f-1]-v[0])/(f-1):1;for(d=m>=0?h?e:o:h?l:a,i+=1e-9*m*(h?-1:1)*(m>=0?1:-1);p<f&&g++<100;)d(v[s=Math.floor((p+f)/2)],i)?p=s+1:f=s;return g>90&&x.log("Long binary search..."),p-1},se.sorterAsc=function(i,v){return i-v},se.sorterDes=function(i,v){return v-i},se.distinctVals=function(i){var v,h=i.slice();for(h.sort(se.sorterAsc),v=h.length-1;v>-1&&h[v]===_;v--);for(var s,d=h[v]-h[0]||1,p=d/(v||1)/1e4,f=[],g=0;g<=v;g++){var m=h[g],u=m-s;void 0===s?(f.push(m),s=m):u>p&&(d=Math.min(d,u),f.push(m),s=m)}return{vals:f,minDiff:d}},se.roundUp=function(i,v,h){for(var s,d=0,p=v.length-1,f=0,g=h?0:1,m=h?1:0,u=h?Math.ceil:Math.floor;d<p&&f++<100;)v[s=u((d+p)/2)]<=i?d=s+g:p=s-m;return v[d]},se.sort=function(i,v){for(var h=0,s=0,d=1;d<i.length;d++){var p=v(i[d],i[d-1]);if(p<0?h=1:p>0&&(s=1),h&&s)return i.sort(v)}return s?i:i.reverse()},se.findIndexOfMin=function(i,v){v=v||M;for(var h,s=1/0,d=0;d<i.length;d++){var p=v(i[d]);p<s&&(s=p,h=d)}return h}},{"../constants/numerical":479,"./identity":501,"./loggers":507,"fast-isnumeric":190}],524:[function(b,oe,se){"use strict";oe.exports=function(y,x){(y.attr("class")||"").split(" ").forEach(function(M){0===M.indexOf("cursor-")&&y.classed(M,!1)}),x&&y.classed("cursor-"+x,!0)}},{}],525:[function(b,oe,se){"use strict";var y=b("../components/color"),x=function(){};oe.exports=function(M){for(var _ in M)"function"==typeof M[_]&&(M[_]=x);M.destroy=function(){M.container.parentNode.removeChild(M.container)};var e=document.createElement("div");e.className="no-webgl",e.style.cursor="pointer",e.style.fontSize="24px",e.style.color=y.defaults[0],e.style.position="absolute",e.style.left=e.style.top="0px",e.style.width=e.style.height="100%",e.style["background-color"]=y.lightLine,e.style["z-index"]=30;var o=document.createElement("p");return o.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",o.style.position="relative",o.style.top="50%",o.style.left="50%",o.style.height="30%",o.style.width="50%",o.style.margin="-15% 0 0 -25%",e.appendChild(o),M.container.appendChild(e),M.container.style.background="#FFFFFF",M.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":366}],526:[function(b,oe,se){"use strict";oe.exports=function(y){return Object.keys(y).sort()}},{}],527:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("./array").isArrayOrTypedArray;se.aggNums=function(M,_,e,o){var a,l;if((!o||o>e.length)&&(o=e.length),y(_)||(_=!1),x(e[0])){for(l=new Array(o),a=0;a<o;a++)l[a]=se.aggNums(M,_,e[a]);e=l}for(a=0;a<o;a++)y(_)?y(e[a])&&(_=M(+_,+e[a])):_=e[a];return _},se.len=function(M){return se.aggNums(function(_){return _+1},0,M)},se.mean=function(M,_){return _||(_=se.len(M)),se.aggNums(function(e,o){return e+o},0,M)/_},se.midRange=function(M){if(void 0!==M&&0!==M.length)return(se.aggNums(Math.max,null,M)+se.aggNums(Math.min,null,M))/2},se.variance=function(M,_,e){return _||(_=se.len(M)),y(e)||(e=se.mean(M,_)),se.aggNums(function(o,a){return o+Math.pow(a-e,2)},0,M)/_},se.stdev=function(M,_,e){return Math.sqrt(se.variance(M,_,e))},se.median=function(M){var _=M.slice().sort();return se.interp(_,.5)},se.interp=function(M,_){if(!y(_))throw"n should be a finite number";if((_=_*M.length-.5)<0)return M[0];if(_>M.length-1)return M[M.length-1];var e=_%1;return e*M[Math.ceil(_)]+(1-e)*M[Math.floor(_)]}},{"./array":485,"fast-isnumeric":190}],528:[function(b,oe,se){"use strict";var y=b("color-normalize");oe.exports=function(x){return x?y(x):[0,0,0,1]}},{"color-normalize":89}],529:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../lib"),M=x.strTranslate,_=b("../constants/xmlns_namespaces"),e=b("../constants/alignment").LINE_SPACING,o=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;se.convertToTspans=function(I,P,j){var V=I.text(),Z=!I.attr("data-notex")&&P&&P._context.typesetMath&&"undefined"!=typeof MathJax&&V.match(o),Y=y.select(I.node().parentNode);if(!Y.empty()){var ee=I.attr("class")?I.attr("class").split(" ")[0]:"text";return Y.selectAll("svg."+(ee+="-math")).remove(),Y.selectAll("g."+ee+"-group").remove(),I.style("display",null).attr({"data-unformatted":V,"data-math":"N"}),Z?(P&&P._promises||[]).push(new Promise(function(X){I.style("display","none");var K=parseInt(I.node().style.fontSize,10);!function(q,U,W){var ae,G,te,ne,le=parseInt((MathJax.version||"").split(".")[0]);if(2===le||3===le){var ue=function(){var de="math-output-"+x.randstr({},64),_e=(ne=y.select("body").append("div").attr({id:de}).style({visibility:"hidden",position:"absolute","font-size":U.fontSize+"px"}).text(q.replace(a,"\\lt ").replace(l,"\\gt "))).node();return 2===le?MathJax.Hub.Typeset(_e):MathJax.typeset([_e])},pe=function(){var de=ne.select(2===le?".MathJax_SVG":".MathJax"),_e=!de.empty()&&ne.select("svg").node();if(_e){var me,we=_e.getBoundingClientRect();me=2===le?y.select("body").select("#MathJax_SVG_glyphs"):de.select("defs"),W(de,me,we)}else x.log("There was an error in the tex syntax.",q),W();ne.remove()};2===le?MathJax.Hub.Queue(function(){return G=x.extendDeepAll({},MathJax.Hub.config),te=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:i},displayAlign:"left"})},function(){if("SVG"!==(ae=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},ue,pe,function(){if("SVG"!==ae)return MathJax.Hub.setRenderer(ae)},function(){return void 0!==te&&(MathJax.Hub.processSectionDelay=te),MathJax.Hub.Config(G)}):3===le&&(G=x.extendDeepAll({},MathJax.config),MathJax.config.tex||(MathJax.config.tex={}),MathJax.config.tex.inlineMath=i,"svg"!==(ae=MathJax.config.startup.output)&&(MathJax.config.startup.output="svg"),MathJax.startup.defaultReady(),MathJax.startup.promise.then(function(){ue(),pe(),"svg"!==ae&&(MathJax.config.startup.output=ae),MathJax.config=G}))}else x.warn("No MathJax version:",MathJax.version)}(Z[2],{fontSize:K},function(q,U,W){Y.selectAll("svg."+ee).remove(),Y.selectAll("g."+ee+"-group").remove();var ae=q&&q.select("svg");if(!ae||!ae.node())return re(),void X();var G=Y.append("g").classed(ee+"-group",!0).attr({"pointer-events":"none","data-unformatted":V,"data-math":"Y"});G.node().appendChild(ae.node()),U&&U.node()&&ae.node().insertBefore(U.node().cloneNode(!0),ae.node().firstChild);var te=W.width,ne=W.height;ae.attr({class:ee,height:ne,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var le=I.node().style.fill||"black",ue=ae.select("g");ue.attr({fill:le,stroke:le});var pe=ue.node().getBoundingClientRect(),de=pe.width,_e=pe.height;(de>te||_e>ne)&&(ae.style("overflow","hidden"),de=(pe=ae.node().getBoundingClientRect()).width,_e=pe.height);var me=+I.attr("x"),we=+I.attr("y"),De=-(K||I.node().getBoundingClientRect().height)/4;if("y"===ee[0])G.attr({transform:"rotate("+[-90,me,we]+")"+M(-de/2,De-_e/2)});else if("l"===ee[0])we=De-_e/2;else if("a"===ee[0]&&0!==ee.indexOf("atitle"))me=0,we=De;else{var Le=I.attr("text-anchor");me-=de*("middle"===Le?.5:"end"===Le?1:0),we=we+De-_e/2}ae.attr({x:me,y:we}),j&&j.call(I,G),X(G)})})):re(),I}function re(){Y.empty()||(ee=I.attr("class")+"-math",Y.select("svg."+ee).remove()),I.text("").style("white-space","pre"),function(X,K){K=K.replace(p," ");var ie,q=!1,U=[],W=-1;function ae(){W++;var ye=document.createElementNS(_.svg,"tspan");y.select(ye).attr({class:"line",dy:W*e+"em"}),X.appendChild(ye),ie=ye;var Me=U;if(U=[{node:ye}],Me.length>1)for(var Oe=1;Oe<Me.length;Oe++)G(Me[Oe])}function G(ye){var Me,Oe=ye.type,Pe={};if("a"===Oe){Me="a";var Re=ye.target,Ue=ye.href,qe=ye.popup;Ue&&(Pe={"xlink:xlink:show":"_blank"===Re||"_"!==Re.charAt(0)?"new":"replace",target:Re,"xlink:xlink:href":Ue},qe&&(Pe.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+qe+'");return false;'))}else Me="tspan";ye.style&&(Pe.style=ye.style);var Xe=document.createElementNS(_.svg,Me);if("sup"===Oe||"sub"===Oe){te(ie,"\u200b"),ie.appendChild(Xe);var lt=document.createElementNS(_.svg,"tspan");te(lt,"\u200b"),y.select(lt).attr("dy",s[Oe]),Pe.dy=h[Oe],ie.appendChild(Xe),ie.appendChild(lt)}else ie.appendChild(Xe);y.select(Xe).attr(Pe),ie=ye.node=Xe,U.push(ye)}function te(ye,Me){ye.appendChild(document.createTextNode(Me))}function ne(ye){if(1!==U.length){var Me=U.pop();ye!==Me.type&&x.log("Start tag <"+Me.type+"> doesnt match end tag <"+ye+">. Pretending it did match.",K),ie=U[U.length-1].node}else x.log("Ignoring unexpected end tag </"+ye+">.",K)}m.test(K)?ae():(ie=X,U=[{node:X}]);for(var le=K.split(f),ue=0;ue<le.length;ue++){var pe=le[ue],de=pe.match(g),_e=de&&de[2].toLowerCase(),me=v[_e];if("br"===_e)ae();else if(void 0===me)te(ie,D(pe));else if(de[1])ne(_e);else{var we=de[4],De={type:_e},Le=k(we,u);if(Le?(Le=Le.replace(C,"$1 fill:"),me&&(Le+=";"+me)):me&&(Le=me),Le&&(De.style=Le),"a"===_e){q=!0;var Ie=k(we,w);if(Ie){var je=N(Ie);je&&(De.href=je,De.target=k(we,c)||"_blank",De.popup=k(we,A))}}G(De)}}return q}(I.node(),V)&&I.style("pointer-events","all"),se.positionText(I),j&&j.call(I)}};var a=/(<|&lt;|&#60;)/g,l=/(>|&gt;|&#62;)/g,i=[["$","$"],["\\(","\\)"]],v={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},h={sub:"0.3em",sup:"-0.6em"},s={sub:"-0.21em",sup:"0.42em"},d=["http:","https:","mailto:","",void 0,":"],p=se.NEWLINES=/(\r\n?|\n)/g,f=/(<[^<>]*>)/,g=/<(\/?)([^ >]*)(\s+(.*))?>/i,m=/<br(\s+.*)?>/i;se.BR_TAG_ALL=/<br(\s+.*)?>/gi;var u=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,w=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,c=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,A=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function k(I,P){if(!I)return null;var j=I.match(P),V=j&&(j[3]||j[4]);return V&&D(V)}var C=/(^|;)\s*color:/;se.plainText=function(I,P){for(var j=void 0!==(P=P||{}).len&&-1!==P.len?P.len:1/0,V=void 0!==P.allowedTags?P.allowedTags:["br"],Z="...".length,Y=I.split(f),ee=[],re="",X=0,K=0;K<Y.length;K++){var ie=Y[K],q=ie.match(g),U=q&&q[2].toLowerCase();if(U)-1!==V.indexOf(U)&&(ee.push(ie),re=U);else{var W=ie.length;if(X+W<j)ee.push(ie),X+=W;else if(X<j){var ae=j-X;re&&("br"!==re||ae<=Z||W<=Z)&&ee.pop(),ee.push(j>Z?ie.substr(0,ae-Z)+"...":ie.substr(0,ae));break}re=""}}return ee.join("")};var E={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},L=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function D(I){return I.replace(L,function(P,j){return("#"===j.charAt(0)?function(V){if(!(V>1114111)){var Z=String.fromCodePoint;if(Z)return Z(V);var Y=String.fromCharCode;return V<=65535?Y(V):Y(55232+(V>>10),V%1024+56320)}}("x"===j.charAt(1)?parseInt(j.substr(2),16):parseInt(j.substr(1),10)):E[j])||P})}function N(I){var P=encodeURI(decodeURI(I)),j=document.createElement("a"),V=document.createElement("a");j.href=I,V.href=P;var Y=V.protocol;return-1!==d.indexOf(j.protocol)&&-1!==d.indexOf(Y)?P:""}function F(I,P,j){var V,Z,Y,ee=j.horizontalAlign,re=j.verticalAlign||"top",X=I.node().getBoundingClientRect(),K=P.node().getBoundingClientRect();return Z="bottom"===re?function(){return X.bottom-V.height}:"middle"===re?function(){return X.top+(X.height-V.height)/2}:function(){return X.top},Y="right"===ee?function(){return X.right-V.width}:"center"===ee?function(){return X.left+(X.width-V.width)/2}:function(){return X.left},function(){V=this.node().getBoundingClientRect();var ie=Y()-K.left,q=Z()-K.top,U=j.gd||{};if(j.gd){U._fullLayout._calcInverseTransform(U);var W=x.apply3DTransform(U._fullLayout._invTransform)(ie,q);ie=W[0],q=W[1]}return this.style({top:q+"px",left:ie+"px","z-index":1e3}),this}}se.convertEntities=D,se.sanitizeHTML=function(I){I=I.replace(p," ");for(var P=document.createElement("p"),j=P,V=[],Z=I.split(f),Y=0;Y<Z.length;Y++){var ee=Z[Y],re=ee.match(g),X=re&&re[2].toLowerCase();if(X in v)if(re[1])V.length&&(j=V.pop());else{var K=re[4],ie=k(K,u),q=ie?{style:ie}:{};if("a"===X){var U=k(K,w);if(U){var W=N(U);if(W){q.href=W;var ae=k(K,c);ae&&(q.target=ae)}}}var G=document.createElement(X);j.appendChild(G),y.select(G).attr(q),j=G,V.push(G)}else j.appendChild(document.createTextNode(D(ee)))}return P.innerHTML},se.lineCount=function(I){return I.selectAll("tspan.line").size()||1},se.positionText=function(I,P,j){return I.each(function(){var V=y.select(this);function Z(re,X){return void 0===X?null===(X=V.attr(re))&&(V.attr(re,0),X=0):V.attr(re,X),X}var Y=Z("x",P),ee=Z("y",j);"text"===this.nodeName&&V.selectAll("tspan.line").attr({x:Y,y:ee})})},se.makeTextShadow=function(I){var P="1px ",j="1px ",V="1px ";return P+j+V+I+", -"+P+"-"+j+V+I+", "+P+"-"+j+V+I+", -"+P+j+V+I},se.makeEditable=function(I,P){var j=P.gd,V=P.delegate,Z=y.dispatch("edit","input","cancel"),Y=V||I;if(I.style({"pointer-events":V?"none":"all"}),1!==I.size())throw new Error("boo");function ee(){var ie,q,U,W,ae;ie=y.select(j).select(".svg-container"),q=ie.append("div"),U=I.node().style,W=parseFloat(U.fontSize||12),void 0===(ae=P.text)&&(ae=I.attr("data-unformatted")),q.classed("plugin-editable editable",!0).style({position:"absolute","font-family":U.fontFamily||"Arial","font-size":W,color:P.fill||U.fill||"black",opacity:1,"background-color":P.background||"transparent",outline:"#ffffff33 1px solid",margin:[-W/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(ae).call(F(I,ie,P)).on("blur",function(){j._editing=!1,I.text(this.textContent).style({opacity:1});var G,te=y.select(this).attr("class");(G=te?"."+te.split(" ")[0]+"-math-group":"[class*=-math-group]")&&y.select(I.node().parentNode).select(G).style({opacity:0});var ne=this.textContent;y.select(this).transition().duration(0).remove(),y.select(document).on("mouseup",null),Z.edit.call(I,ne)}).on("focus",function(){var G=this;j._editing=!0,y.select(document).on("mouseup",function(){if(y.event.target===G)return!1;document.activeElement===q.node()&&q.node().blur()})}).on("keyup",function(){27===y.event.which?(j._editing=!1,I.style({opacity:1}),y.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),Z.cancel.call(I,this.textContent)):(Z.input.call(I,this.textContent),y.select(this).call(F(I,ie,P)))}).on("keydown",function(){13===y.event.which&&this.blur()}).call(re),I.style({opacity:0});var X,K=Y.attr("class");(X=K?"."+K.split(" ")[0]+"-math-group":"[class*=-math-group]")&&y.select(I.node().parentNode).select(X).style({opacity:0})}function re(X){var K=X.node(),ie=document.createRange();ie.selectNodeContents(K);var q=window.getSelection();q.removeAllRanges(),q.addRange(ie),K.focus()}return P.immediate?ee():Y.on("click",ee),y.rebind(I,Z,"on")}},{"../constants/alignment":471,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],530:[function(b,oe,se){"use strict";var y={};function x(M){M&&null!==M.timer&&(clearTimeout(M.timer),M.timer=null)}se.throttle=function(M,_,e){var o=y[M],a=Date.now();if(!o){for(var l in y)y[l].ts<a-6e4&&delete y[l];o=y[M]={ts:0,timer:null}}function i(){e(),o.ts=Date.now(),o.onDone&&(o.onDone(),o.onDone=null)}x(o),a>o.ts+_?i():o.timer=setTimeout(function(){i(),o.timer=null},_)},se.done=function(M){var _=y[M];return _&&_.timer?new Promise(function(e){var o=_.onDone;_.onDone=function(){o&&o(),e(),_.onDone=null}}):Promise.resolve()},se.clear=function(M){if(M)x(y[M]),delete y[M];else for(var _ in y)se.clear(_)}},{}],531:[function(b,oe,se){"use strict";var y=b("fast-isnumeric");oe.exports=function(x,M){if(x>0)return Math.log(x)/Math.LN10;var _=Math.log(Math.min(M[0],M[1]))/Math.LN10;return y(_)||(_=Math.log(Math.max(M[0],M[1]))/Math.LN10-6),_}},{"fast-isnumeric":190}],532:[function(b,oe,se){"use strict";var y=oe.exports={},x=b("../plots/geo/constants").locationmodeToLayer,M=b("topojson-client").feature;y.getTopojsonName=function(_){return[_.scope.replace(/ /g,"-"),"_",_.resolution.toString(),"m"].join("")},y.getTopojsonPath=function(_,e){return _+e+".json"},y.getTopojsonFeatures=function(_,e){return M(e,e.objects[x[_.locationmode]]).features}},{"../plots/geo/constants":587,"topojson-client":315}],533:[function(b,oe,se){"use strict";oe.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],534:[function(b,oe,se){"use strict";oe.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],535:[function(b,oe,se){"use strict";var y=b("../registry");oe.exports=function(x){for(var M,_,e=y.layoutArrayContainers,o=y.layoutArrayRegexes,a=x.split("[")[0],l=0;l<o.length;l++)if((_=x.match(o[l]))&&0===_.index){M=_[0];break}if(M||(M=e[e.indexOf(a)]),!M)return!1;var i=x.substr(M.length);return i?!!(_=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:M,index:Number(_[1]),property:_[3]||""}:{array:M,index:"",property:""}}},{"../registry":638}],536:[function(b,oe,se){"use strict";var y=b("../lib"),x=y.extendFlat,M=y.isPlainObject,_={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},o=_.flags.slice().concat(["fullReplot"]),a=e.flags.slice().concat("layoutReplot");function l(h){for(var s={},d=0;d<h.length;d++)s[h[d]]=!1;return s}function i(h,s,d){var p=x({},h);for(var f in p){var g=p[f];M(g)&&(p[f]=v(g,s,0,f))}return"from-root"===d&&(p.editType=s),p}function v(h,s,d,p){if(h.valType){var f=x({},h);if(f.editType=s,Array.isArray(h.items)){f.items=new Array(h.items.length);for(var g=0;g<h.items.length;g++)f.items[g]=v(h.items[g],s)}return f}return i(h,s,"_"===p.charAt(0)?"nested":"from-root")}oe.exports={traces:_,layout:e,traceFlags:function(){return l(o)},layoutFlags:function(){return l(a)},update:function(h,s){var d=s.editType;if(d&&"none"!==d)for(var p=d.split("+"),f=0;f<p.length;f++)h[p[f]]=!0},overrideAll:i}},{"../lib":503}],537:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("gl-mat4/fromQuat"),M=b("../registry"),_=b("../lib"),e=b("../plots/plots"),o=b("../plots/cartesian/axis_ids"),a=b("../components/color"),l=o.cleanId,i=o.getFromTrace,v=M.traceIs;function h(c,A){var k=c[A],C=A.charAt(0);k&&"paper"!==k&&(c[A]=l(k,C,!0))}function s(c){function A(k,C){c[k]&&(!c.title||!c.title[C])&&(c.title||(c.title={}),c.title[C]=c[k],delete c[k])}c&&("string"!=typeof c.title&&"number"!=typeof c.title||(c.title={text:c.title}),A("titlefont","font"),A("titleposition","position"),A("titleside","side"),A("titleoffset","offset"))}function d(c){if(!_.isPlainObject(c))return!1;var A=c.name;return delete c.name,delete c.showlegend,("string"==typeof A||"number"==typeof A)&&String(A)}function p(c,A,k,C){if(k&&!C)return c;if(C&&!k||!c.trim())return A;if(!A.trim())return c;var E,L=Math.min(c.length,A.length);for(E=0;E<L&&c.charAt(E)===A.charAt(E);E++);return c.substr(0,E).trim()}function f(c){var A="middle",k="center";return"string"==typeof c&&(-1!==c.indexOf("top")?A="top":-1!==c.indexOf("bottom")&&(A="bottom"),-1!==c.indexOf("left")?k="left":-1!==c.indexOf("right")&&(k="right")),A+" "+k}function g(c,A){return A in c&&"object"==typeof c[A]&&0===Object.keys(c[A]).length}se.clearPromiseQueue=function(c){Array.isArray(c._promises)&&c._promises.length>0&&_.log("Clearing previous rejected promises from queue."),c._promises=[]},se.cleanLayout=function(c){var A,k;c||(c={}),c.xaxis1&&(c.xaxis||(c.xaxis=c.xaxis1),delete c.xaxis1),c.yaxis1&&(c.yaxis||(c.yaxis=c.yaxis1),delete c.yaxis1),c.scene1&&(c.scene||(c.scene=c.scene1),delete c.scene1);var C=(e.subplotsRegistry.cartesian||{}).attrRegex,E=(e.subplotsRegistry.polar||{}).attrRegex,L=(e.subplotsRegistry.ternary||{}).attrRegex,D=(e.subplotsRegistry.gl3d||{}).attrRegex,N=Object.keys(c);for(A=0;A<N.length;A++){var F=N[A];if(C&&C.test(F)){var I=c[F];I.anchor&&"free"!==I.anchor&&(I.anchor=l(I.anchor)),I.overlaying&&(I.overlaying=l(I.overlaying)),I.type||(I.isdate?I.type="date":I.islog?I.type="log":!1===I.isdate&&!1===I.islog&&(I.type="linear")),"withzero"!==I.autorange&&"tozero"!==I.autorange||(I.autorange=!0,I.rangemode="tozero"),delete I.islog,delete I.isdate,delete I.categories,g(I,"domain")&&delete I.domain,void 0!==I.autotick&&(void 0===I.tickmode&&(I.tickmode=I.autotick?"auto":"linear"),delete I.autotick),s(I)}else if(E&&E.test(F))s(c[F].radialaxis);else if(L&&L.test(F)){var P=c[F];s(P.aaxis),s(P.baxis),s(P.caxis)}else if(D&&D.test(F)){var j=c[F],V=j.cameraposition;if(Array.isArray(V)&&4===V[0].length){var Y=V[1],ee=V[2],re=x([],V[0]),X=[];for(k=0;k<3;++k)X[k]=Y[k]+ee*re[2+4*k];j.camera={eye:{x:X[0],y:X[1],z:X[2]},center:{x:Y[0],y:Y[1],z:Y[2]},up:{x:0,y:0,z:1}},delete j.cameraposition}s(j.xaxis),s(j.yaxis),s(j.zaxis)}}var K=Array.isArray(c.annotations)?c.annotations.length:0;for(A=0;A<K;A++){var ie=c.annotations[A];_.isPlainObject(ie)&&(ie.ref&&("paper"===ie.ref?(ie.xref="paper",ie.yref="paper"):"data"===ie.ref&&(ie.xref="x",ie.yref="y"),delete ie.ref),h(ie,"xref"),h(ie,"yref"))}var q=Array.isArray(c.shapes)?c.shapes.length:0;for(A=0;A<q;A++){var U=c.shapes[A];_.isPlainObject(U)&&(h(U,"xref"),h(U,"yref"))}var W=Array.isArray(c.images)?c.images.length:0;for(A=0;A<W;A++){var ae=c.images[A];_.isPlainObject(ae)&&(h(ae,"xref"),h(ae,"yref"))}var G=c.legend;return G&&(G.x>3?(G.x=1.02,G.xanchor="left"):G.x<-2&&(G.x=-.02,G.xanchor="right"),G.y>3?(G.y=1.02,G.yanchor="bottom"):G.y<-2&&(G.y=-.02,G.yanchor="top")),s(c),"rotate"===c.dragmode&&(c.dragmode="orbit"),a.clean(c),c.template&&c.template.layout&&se.cleanLayout(c.template.layout),c},se.cleanData=function(c){for(var A=0;A<c.length;A++){var k,C=c[A];if("histogramy"===C.type&&"xbins"in C&&!("ybins"in C)&&(C.ybins=C.xbins,delete C.xbins),C.error_y&&"opacity"in C.error_y){var E=a.defaults,L=C.error_y.color||(v(C,"bar")?a.defaultLine:E[A%E.length]);C.error_y.color=a.addOpacity(a.rgb(L),a.opacity(L)*C.error_y.opacity),delete C.error_y.opacity}if("bardir"in C&&("h"!==C.bardir||!v(C,"bar")&&"histogram"!==C.type.substr(0,9)||(C.orientation="h",se.swapXYData(C)),delete C.bardir),"histogramy"===C.type&&se.swapXYData(C),"histogramx"!==C.type&&"histogramy"!==C.type||(C.type="histogram"),"scl"in C&&!("colorscale"in C)&&(C.colorscale=C.scl,delete C.scl),"reversescl"in C&&!("reversescale"in C)&&(C.reversescale=C.reversescl,delete C.reversescl),C.xaxis&&(C.xaxis=l(C.xaxis,"x")),C.yaxis&&(C.yaxis=l(C.yaxis,"y")),v(C,"gl3d")&&C.scene&&(C.scene=e.subplotsRegistry.gl3d.cleanId(C.scene)),!v(C,"pie-like")&&!v(C,"bar-like"))if(Array.isArray(C.textposition))for(k=0;k<C.textposition.length;k++)C.textposition[k]=f(C.textposition[k]);else C.textposition&&(C.textposition=f(C.textposition));var D=M.getModule(C);if(D&&D.colorbar){var N=D.colorbar.container,F=N?C[N]:C;F&&F.colorscale&&("YIGnBu"===F.colorscale&&(F.colorscale="YlGnBu"),"YIOrRd"===F.colorscale&&(F.colorscale="YlOrRd"))}if("surface"===C.type&&_.isPlainObject(C.contours)){var I=["x","y","z"];for(k=0;k<I.length;k++){var P=C.contours[I[k]];_.isPlainObject(P)&&(P.highlightColor&&(P.highlightcolor=P.highlightColor,delete P.highlightColor),P.highlightWidth&&(P.highlightwidth=P.highlightWidth,delete P.highlightWidth))}}if("candlestick"===C.type||"ohlc"===C.type){var j=!1!==(C.increasing||{}).showlegend,V=!1!==(C.decreasing||{}).showlegend,Z=d(C.increasing),Y=d(C.decreasing);if(!1!==Z&&!1!==Y){var ee=p(Z,Y,j,V);ee&&(C.name=ee)}else!Z&&!Y||C.name||(C.name=Z||Y)}if(Array.isArray(C.transforms)){var re=C.transforms;for(k=0;k<re.length;k++){var X=re[k];if(_.isPlainObject(X))switch(X.type){case"filter":X.filtersrc&&(X.target=X.filtersrc,delete X.filtersrc),X.calendar&&(X.valuecalendar||(X.valuecalendar=X.calendar),delete X.calendar);break;case"groupby":if(X.styles=X.styles||X.style,X.styles&&!Array.isArray(X.styles)){var K=X.styles,ie=Object.keys(K);X.styles=[];for(var q=0;q<ie.length;q++)X.styles.push({target:ie[q],value:K[ie[q]]})}}}}g(C,"line")&&delete C.line,"marker"in C&&(g(C.marker,"line")&&delete C.marker.line,g(C,"marker")&&delete C.marker),a.clean(C),C.autobinx&&(delete C.autobinx,delete C.xbins),C.autobiny&&(delete C.autobiny,delete C.ybins),s(C),C.colorbar&&s(C.colorbar),C.marker&&C.marker.colorbar&&s(C.marker.colorbar),C.line&&C.line.colorbar&&s(C.line.colorbar),C.aaxis&&s(C.aaxis),C.baxis&&s(C.baxis)}},se.swapXYData=function(c){var A;if(_.swapAttrs(c,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(c.z)&&Array.isArray(c.z[0])&&(c.transpose?delete c.transpose:c.transpose=!0),c.error_x&&c.error_y){var k=c.error_y,C="copy_ystyle"in k?k.copy_ystyle:!(k.color||k.thickness||k.width);_.swapAttrs(c,["error_?.copy_ystyle"]),C&&_.swapAttrs(c,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof c.hoverinfo){var E=c.hoverinfo.split("+");for(A=0;A<E.length;A++)"x"===E[A]?E[A]="y":"y"===E[A]&&(E[A]="x");c.hoverinfo=E.join("+")}},se.coerceTraceIndices=function(c,A){if(y(A))return[A];if(!Array.isArray(A)||!A.length)return c.data.map(function(E,L){return L});if(Array.isArray(A)){for(var k=[],C=0;C<A.length;C++)_.isIndex(A[C],c.data.length)?k.push(A[C]):_.warn("trace index (",A[C],") is not a number or is out of bounds");return k}return A},se.manageArrayContainers=function(c,A,k){var C=c.obj,E=c.parts,L=E.length,D=E[L-1],N=y(D);if(N&&null===A){var F=E.slice(0,L-1).join(".");_.nestedProperty(C,F).get().splice(D,1)}else N&&void 0===c.get()&&void 0===c.get()&&(k[c.astr]=null),c.set(A)};var m=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function u(c){var A=c.search(m);if(A>0)return c.substr(0,A)}se.hasParent=function(c,A){for(var k=u(A);k;){if(k in c)return!0;k=u(k)}return!1};var w=["x","y","z"];se.clearAxisTypes=function(c,A,k){for(var C=0;C<A.length;C++)for(var E=c._fullData[C],L=0;L<3;L++){var D=i(c,E,w[L]);if(D&&"log"!==D.type){var N=D._name,F=D._id.substr(1);if("scene"===F.substr(0,5)){if(void 0!==k[F])continue;N=F+"."+N}var I=N+".type";void 0===k[N]&&void 0===k[I]&&_.nestedProperty(c.layout,I).set(null)}}}},{"../components/color":366,"../lib":503,"../plots/cartesian/axis_ids":558,"../plots/plots":619,"../registry":638,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],538:[function(b,oe,se){"use strict";var y=b("./plot_api");se._doPlot=y._doPlot,se.newPlot=y.newPlot,se.restyle=y.restyle,se.relayout=y.relayout,se.redraw=y.redraw,se.update=y.update,se._guiRestyle=y._guiRestyle,se._guiRelayout=y._guiRelayout,se._guiUpdate=y._guiUpdate,se._storeDirectGUIEdit=y._storeDirectGUIEdit,se.react=y.react,se.extendTraces=y.extendTraces,se.prependTraces=y.prependTraces,se.addTraces=y.addTraces,se.deleteTraces=y.deleteTraces,se.moveTraces=y.moveTraces,se.purge=y.purge,se.addFrames=y.addFrames,se.deleteFrames=y.deleteFrames,se.animate=y.animate,se.setPlotConfig=y.setPlotConfig,se.toImage=b("./to_image"),se.validate=b("./validate"),se.downloadImage=b("../snapshot/download");var x=b("./template_api");se.makeTemplate=x.makeTemplate,se.validateTemplate=x.validateTemplate},{"../snapshot/download":640,"./plot_api":540,"./template_api":545,"./to_image":546,"./validate":547}],539:[function(b,oe,se){"use strict";var y=b("../lib/is_plain_object"),x=b("../lib/noop"),M=b("../lib/loggers"),_=b("../lib/search").sorterAsc,e=b("../registry");se.containerArrayMatch=b("./container_array_match");var o=se.isAddVal=function(l){return"add"===l||y(l)},a=se.isRemoveVal=function(l){return null===l||"remove"===l};se.applyContainerArrayChanges=function(l,i,v,h,s){var d=i.astr,p=e.getComponentMethod(d,"supplyLayoutDefaults"),f=e.getComponentMethod(d,"draw"),g=e.getComponentMethod(d,"drawOne"),m=h.replot||h.recalc||p===x||f===x,u=l.layout,w=l._fullLayout;if(v[""]){Object.keys(v).length>1&&M.warn("Full array edits are incompatible with other edits",d);var c=v[""][""];if(a(c))i.set(null);else{if(!Array.isArray(c))return M.warn("Unrecognized full array edit value",d,c),!0;i.set(c)}return!m&&(p(u,w),f(l),!0)}var A,k,C,E,L,D,N,I=Object.keys(v).map(Number).sort(_),P=i.get(),j=P||[],V=s(w,d).get(),Z=[],Y=-1,ee=j.length;for(A=0;A<I.length;A++)if(E=v[C=I[A]],L=Object.keys(E),N=o(D=E[""]),C<0||C>j.length-(N?0:1))M.warn("index out of range",d,C);else if(void 0!==D)L.length>1&&M.warn("Insertion & removal are incompatible with edits to the same index.",d,C),a(D)?Z.push(C):N?("add"===D&&(D={}),j.splice(C,0,D),V&&V.splice(C,0,{})):M.warn("Unrecognized full object edit value",d,C,D),-1===Y&&(Y=C);else for(k=0;k<L.length;k++)s(j[C],L[k],d+"["+C+"].").set(E[L[k]]);for(A=Z.length-1;A>=0;A--)j.splice(Z[A],1),V&&V.splice(Z[A],1);if(j.length?P||i.set(j):i.set(null),m)return!1;if(p(u,w),g!==x){var re;if(-1===Y)re=I;else{for(ee=Math.max(j.length,ee),re=[],A=0;A<I.length&&!((C=I[A])>=Y);A++)re.push(C);for(A=Y;A<ee;A++)re.push(A)}for(A=0;A<re.length;A++)g(l,re[A])}else f(l);return!0}},{"../lib/is_plain_object":504,"../lib/loggers":507,"../lib/noop":512,"../lib/search":523,"../registry":638,"./container_array_match":535}],540:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("fast-isnumeric"),M=b("has-hover"),_=b("../lib"),e=_.nestedProperty,o=b("../lib/events"),a=b("../lib/queue"),l=b("../registry"),i=b("./plot_schema"),v=b("../plots/plots"),h=b("../plots/cartesian/axes"),s=b("../components/drawing"),d=b("../components/color"),p=b("../plots/cartesian/graph_interact").initInteractions,f=b("../constants/xmlns_namespaces"),g=b("../plots/cartesian/select").clearSelect,m=b("./plot_config").dfltConfig,u=b("./manage_arrays"),w=b("./helpers"),c=b("./subroutines"),A=b("./edit_types"),k=b("../plots/cartesian/constants").AX_NAME_PATTERN,C=0;function E(ye){var Me=ye._fullLayout;Me._redrawFromAutoMarginCount?Me._redrawFromAutoMarginCount--:ye.emit("plotly_afterplot")}function L(ye,Me){try{ye._fullLayout._paper.style("background",Me)}catch(Oe){_.error(Oe)}}function D(ye,Me){L(ye,d.combine(Me,"white"))}function N(ye,Me){if(!ye._context){ye._context=_.extendDeep({},m);var Oe=y.select("base");ye._context._baseUrl=Oe.size()&&Oe.attr("href")?window.location.href.split("#")[0]:""}var Pe,Re,Ue,qe=ye._context;if(Me){for(Re=Object.keys(Me),Pe=0;Pe<Re.length;Pe++)"editable"!==(Ue=Re[Pe])&&"edits"!==Ue&&Ue in qe&&(qe[Ue]="setBackground"===Ue&&"opaque"===Me[Ue]?D:Me[Ue]);Me.plot3dPixelRatio&&!qe.plotGlPixelRatio&&(qe.plotGlPixelRatio=qe.plot3dPixelRatio);var Xe=Me.editable;if(void 0!==Xe)for(qe.editable=Xe,Re=Object.keys(qe.edits),Pe=0;Pe<Re.length;Pe++)qe.edits[Re[Pe]]=Xe;if(Me.edits)for(Re=Object.keys(Me.edits),Pe=0;Pe<Re.length;Pe++)(Ue=Re[Pe])in qe.edits&&(qe.edits[Ue]=Me.edits[Ue]);qe._exportedPlot=Me._exportedPlot}qe.staticPlot&&(qe.editable=!1,qe.edits={},qe.autosizable=!1,qe.scrollZoom=!1,qe.doubleClick=!1,qe.showTips=!1,qe.showLink=!1,qe.displayModeBar=!1),"hover"!==qe.displayModeBar||M||(qe.displayModeBar=!0),"transparent"!==qe.setBackground&&"function"==typeof qe.setBackground||(qe.setBackground=L),qe._hasZeroHeight=qe._hasZeroHeight||0===ye.clientHeight,qe._hasZeroWidth=qe._hasZeroWidth||0===ye.clientWidth;var lt=qe.scrollZoom,He=qe._scrollZoom={};if(!0===lt)He.cartesian=1,He.gl3d=1,He.geo=1,He.mapbox=1;else if("string"==typeof lt){var $e=lt.split("+");for(Pe=0;Pe<$e.length;Pe++)He[$e[Pe]]=1}else!1!==lt&&(He.gl3d=1,He.geo=1,He.mapbox=1)}function F(ye,Me){var Oe,Pe,Re=Me+1,Ue=[];for(Oe=0;Oe<ye.length;Oe++)(Pe=ye[Oe])<0?Ue.push(Re+Pe):Ue.push(Pe);return Ue}function I(ye,Me,Oe){var Pe,Re;for(Pe=0;Pe<Me.length;Pe++){if((Re=Me[Pe])!==parseInt(Re,10))throw new Error("all values in "+Oe+" must be integers");if(Re>=ye.data.length||Re<-ye.data.length)throw new Error(Oe+" must be valid indices for gd.data.");if(Me.indexOf(Re,Pe+1)>-1||Re>=0&&Me.indexOf(-ye.data.length+Re)>-1||Re<0&&Me.indexOf(ye.data.length+Re)>-1)throw new Error("each index in "+Oe+" must be unique.")}}function P(ye,Me,Oe){if(!Array.isArray(ye.data))throw new Error("gd.data must be an array.");if(void 0===Me)throw new Error("currentIndices is a required argument.");if(Array.isArray(Me)||(Me=[Me]),I(ye,Me,"currentIndices"),void 0===Oe||Array.isArray(Oe)||(Oe=[Oe]),void 0!==Oe&&I(ye,Oe,"newIndices"),void 0!==Oe&&Me.length!==Oe.length)throw new Error("current and new indices must be of equal length.")}function j(ye,Me,Oe,Pe,Re){!function(nt,ct,bt,kt){var Bt=_.isPlainObject(kt);if(!Array.isArray(nt.data))throw new Error("gd.data must be an array");if(!_.isPlainObject(ct))throw new Error("update must be a key:value object");if(void 0===bt)throw new Error("indices must be an integer or array of integers");for(var Et in I(nt,bt,"indices"),ct){if(!Array.isArray(ct[Et])||ct[Et].length!==bt.length)throw new Error("attribute "+Et+" must be an array of length equal to indices array length");if(Bt&&(!(Et in kt)||!Array.isArray(kt[Et])||kt[Et].length!==ct[Et].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(ye,Me,Oe,Pe);for(var Ue=function(nt,ct,bt,kt){var Et,ht,at,Ft,en=_.isPlainObject(kt),Qt=[];for(var tn in Array.isArray(bt)||(bt=[bt]),bt=F(bt,nt.data.length-1),ct)for(var dn=0;dn<bt.length;dn++){if(Et=(ht=e(nt.data[bt[dn]],tn)).get(),!_.isArrayOrTypedArray(at=ct[tn][dn]))throw new Error("attribute: "+tn+" index: "+dn+" must be an array");if(!_.isArrayOrTypedArray(Et))throw new Error("cannot extend missing or non-array attribute: "+tn);if(Et.constructor!==at.constructor)throw new Error("cannot extend array with an array of a different type: "+tn);x(Ft=en?kt[tn][dn]:kt)||(Ft=-1),Qt.push({prop:ht,target:Et,insert:at,maxp:Math.floor(Ft)})}return Qt}(ye,Me,Oe,Pe),qe={},Xe={},lt=0;lt<Ue.length;lt++){var He=Ue[lt].prop,et=Re(Ue[lt].target,Ue[lt].insert,Ue[lt].maxp);He.set(et[0]),Array.isArray(qe[He.astr])||(qe[He.astr]=[]),qe[He.astr].push(et[1]),Array.isArray(Xe[He.astr])||(Xe[He.astr]=[]),Xe[He.astr].push(Ue[lt].target.length)}return{update:qe,maxPoints:Xe}}function V(ye,Me){var Oe=new ye.constructor(ye.length+Me.length);return Oe.set(ye),Oe.set(Me,ye.length),Oe}function Z(ye,Me,Oe,Pe){ye=_.getGraphDiv(ye),w.clearPromiseQueue(ye);var Re={};if("string"==typeof Me)Re[Me]=Oe;else{if(!_.isPlainObject(Me))return _.warn("Restyle fail.",Me,Oe,Pe),Promise.reject();Re=_.extendFlat({},Me),void 0===Pe&&(Pe=Oe)}Object.keys(Re).length&&(ye.changed=!0);var Ue=w.coerceTraceIndices(ye,Pe),qe=X(ye,Re,Ue),Xe=qe.flags;Xe.calc&&(ye.calcdata=void 0),Xe.clearAxisTypes&&w.clearAxisTypes(ye,Ue,{});var lt=[];Xe.fullReplot?lt.push(se._doPlot):(lt.push(v.previousPromises),v.supplyDefaults(ye),Xe.markerSize&&(v.doCalcdata(ye),U(lt)),Xe.style&&lt.push(c.doTraceStyle),Xe.colorbars&&lt.push(c.doColorBars),lt.push(E)),lt.push(v.rehover,v.redrag),a.add(ye,Z,[ye,qe.undoit,qe.traces],Z,[ye,qe.redoit,qe.traces]);var He=_.syncOrAsync(lt,ye);return He&&He.then||(He=Promise.resolve()),He.then(function(){return ye.emit("plotly_restyle",qe.eventData),ye})}function Y(ye){return void 0===ye?null:ye}function ee(ye,Me){return Me?function(Oe,Pe,Re){var Ue=e(Oe,Pe),qe=Ue.set;return Ue.set=function(Xe){re((Re||"")+Pe,Ue.get(),Xe,ye),qe(Xe)},Ue}:e}function re(ye,Me,Oe,Pe){if(Array.isArray(Me)||Array.isArray(Oe))for(var Re=Array.isArray(Me)?Me:[],Ue=Array.isArray(Oe)?Oe:[],qe=Math.max(Re.length,Ue.length),Xe=0;Xe<qe;Xe++)re(ye+"["+Xe+"]",Re[Xe],Ue[Xe],Pe);else if(_.isPlainObject(Me)||_.isPlainObject(Oe)){var lt=_.isPlainObject(Me)?Me:{},He=_.isPlainObject(Oe)?Oe:{},$e=_.extendFlat({},lt,He);for(var et in $e)re(ye+"."+et,lt[et],He[et],Pe)}else void 0===Pe[ye]&&(Pe[ye]=Y(Me))}function X(ye,Me,Oe){var Pe,Re=ye._fullLayout,Ue=ye._fullData,qe=ye.data,Xe=Re._guiEditing,lt=ee(Re._preGUI,Xe),He=_.extendDeepAll({},Me);K(Me);var $e,et=A.traceFlags(),nt={},ct={};function bt(){return Oe.map(function(){})}function kt(dt){var Dt=h.id2name(dt);-1===$e.indexOf(Dt)&&$e.push(Dt)}function Bt(dt){return"LAYOUT"+dt+".autorange"}function Et(dt){return"LAYOUT"+dt+".range"}function ht(dt){for(var Dt=dt;Dt<Ue.length;Dt++)if(Ue[Dt]._input===qe[dt])return Ue[Dt]}function at(dt,Dt,Nt){if(Array.isArray(dt))dt.forEach(function(nn){at(nn,Dt,Nt)});else if(!(dt in Me)&&!w.hasParent(Me,dt)){var Yt;if("LAYOUT"===dt.substr(0,6))Yt=lt(ye.layout,dt.replace("LAYOUT",""));else{var fn=Oe[Nt];Yt=ee(Re._tracePreGUI[ht(fn)._fullInput.uid],Xe)(qe[fn],dt)}dt in ct||(ct[dt]=bt()),void 0===ct[dt][Nt]&&(ct[dt][Nt]=Y(Yt.get())),void 0!==Dt&&Yt.set(Dt)}}function Ft(dt){return function(Dt){return Ue[Dt][dt]}}function en(dt){return function(Dt,Nt){return!1===Dt?Ue[Oe[Nt]][dt]:null}}for(var Qt in Me){if(w.hasParent(Me,Qt))throw new Error("cannot set "+Qt+" and a parent attribute simultaneously");var tn,dn,Mn,sn,ke,Se,Ce=Me[Qt];if("autobinx"!==Qt&&"autobiny"!==Qt||(Qt=Qt.charAt(Qt.length-1)+"bins",Ce=Array.isArray(Ce)?Ce.map(en(Qt)):!1===Ce?Oe.map(Ft(Qt)):null),nt[Qt]=Ce,"LAYOUT"!==Qt.substr(0,6)){for(ct[Qt]=bt(),Pe=0;Pe<Oe.length;Pe++)if(tn=qe[Oe[Pe]],dn=ht(Oe[Pe]),sn=(Mn=ee(Re._tracePreGUI[dn._fullInput.uid],Xe)(tn,Qt)).get(),void 0!==(ke=Array.isArray(Ce)?Ce[Pe%Ce.length]:Ce)){var Ve=Mn.parts[Mn.parts.length-1],Ge=Qt.substr(0,Qt.length-Ve.length-1),Qe=Ge?Ge+".":"",ot=Ge?e(dn,Ge).get():dn;if((Se=i.getTraceValObject(dn,Mn.parts))&&Se.impliedEdits&&null!==ke)for(var it in Se.impliedEdits)at(_.relativeAttr(Qt,it),Se.impliedEdits[it],Pe);else if("thicknessmode"!==Ve&&"lenmode"!==Ve||sn===ke||"fraction"!==ke&&"pixels"!==ke||!ot){if("type"===Qt&&("pie"===ke!=("pie"===sn)||"funnelarea"===ke!=("funnelarea"===sn))){var mt="x",xt="y";"bar"!==ke&&"bar"!==sn||"h"!==tn.orientation||(mt="y",xt="x"),_.swapAttrs(tn,["?","?src"],"labels",mt),_.swapAttrs(tn,["d?","?0"],"label",mt),_.swapAttrs(tn,["?","?src"],"values",xt),"pie"===sn||"funnelarea"===sn?(e(tn,"marker.color").set(e(tn,"marker.colors").get()),Re._pielayer.selectAll("g.trace").remove()):l.traceIs(tn,"cartesian")&&e(tn,"marker.colors").set(e(tn,"marker.color").get())}}else{var Vt=Re._size,$t=ot.orient,pt="top"===$t||"bottom"===$t;if("thicknessmode"===Ve){var At=pt?Vt.h:Vt.w;at(Qe+"thickness",ot.thickness*("fraction"===ke?1/At:At),Pe)}else{var Xt=pt?Vt.w:Vt.h;at(Qe+"len",ot.len*("fraction"===ke?1/Xt:Xt),Pe)}}if(ct[Qt][Pe]=Y(sn),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(Qt)){if("orientation"===Qt){Mn.set(ke);var Ct=tn.x&&!tn.y?"h":"v";if((Mn.get()||Ct)===dn.orientation)continue}else"orientationaxes"===Qt&&(tn.orientation={v:"h",h:"v"}[dn.orientation]);w.swapXYData(tn),et.calc=et.clearAxisTypes=!0}else-1!==v.dataArrayContainers.indexOf(Mn.parts[0])?(w.manageArrayContainers(Mn,ke,ct),et.calc=!0):(Se?Se.arrayOk&&!l.traceIs(dn,"regl")&&(_.isArrayOrTypedArray(ke)||_.isArrayOrTypedArray(sn))?et.calc=!0:A.update(et,Se):et.calc=!0,Mn.set(ke))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(Qt)&&h.swap(ye,Oe),"orientationaxes"===Qt){var Pt=e(ye.layout,"hovermode"),Be=Pt.get();"x"===Be?Pt.set("y"):"y"===Be?Pt.set("x"):"x unified"===Be?Pt.set("y unified"):"y unified"===Be&&Pt.set("x unified")}if(-1!==["orientation","type"].indexOf(Qt)){for($e=[],Pe=0;Pe<Oe.length;Pe++){var tt=qe[Oe[Pe]];l.traceIs(tt,"cartesian")&&(kt(tt.xaxis||"x"),kt(tt.yaxis||"y"))}at($e.map(Bt),!0,0),at($e.map(Et),[0,1],0)}}else Mn=lt(ye.layout,Qt.replace("LAYOUT","")),ct[Qt]=[Y(Mn.get())],Mn.set(Array.isArray(Ce)?Ce[0]:Ce),et.calc=!0}return(et.calc||et.plot)&&(et.fullReplot=!0),{flags:et,undoit:ct,redoit:nt,traces:Oe,eventData:_.extendDeepNoArrays([],[He,Oe])}}function K(ye){var Me,Oe,Pe,Re=_.counterRegex("axis",".title",!1,!1),Ue=/colorbar\.title$/,qe=Object.keys(ye);for(Me=0;Me<qe.length;Me++)Pe=ye[Oe=qe[Me]],"title"!==Oe&&!Re.test(Oe)&&!Ue.test(Oe)||"string"!=typeof Pe&&"number"!=typeof Pe?Oe.indexOf("titlefont")>-1&&-1===Oe.indexOf("grouptitlefont")?Xe(Oe,Oe.replace("titlefont","title.font")):Oe.indexOf("titleposition")>-1?Xe(Oe,Oe.replace("titleposition","title.position")):Oe.indexOf("titleside")>-1?Xe(Oe,Oe.replace("titleside","title.side")):Oe.indexOf("titleoffset")>-1&&Xe(Oe,Oe.replace("titleoffset","title.offset")):Xe(Oe,Oe.replace("title","title.text"));function Xe(lt,He){ye[He]=ye[lt],delete ye[lt]}}function ie(ye,Me,Oe){ye=_.getGraphDiv(ye),w.clearPromiseQueue(ye);var Pe={};if("string"==typeof Me)Pe[Me]=Oe;else{if(!_.isPlainObject(Me))return _.warn("Relayout fail.",Me,Oe),Promise.reject();Pe=_.extendFlat({},Me)}Object.keys(Pe).length&&(ye.changed=!0);var Re=te(ye,Pe),Ue=Re.flags;Ue.calc&&(ye.calcdata=void 0);var qe=[v.previousPromises];Ue.layoutReplot?qe.push(c.layoutReplot):Object.keys(Pe).length&&(q(ye,Ue,Re)||v.supplyDefaults(ye),Ue.legend&&qe.push(c.doLegend),Ue.layoutstyle&&qe.push(c.layoutStyles),Ue.axrange&&U(qe,Re.rangesAltered),Ue.ticks&&qe.push(c.doTicksRelayout),Ue.modebar&&qe.push(c.doModeBar),Ue.camera&&qe.push(c.doCamera),Ue.colorbars&&qe.push(c.doColorBars),qe.push(E)),qe.push(v.rehover,v.redrag),a.add(ye,ie,[ye,Re.undoit],ie,[ye,Re.redoit]);var Xe=_.syncOrAsync(qe,ye);return Xe&&Xe.then||(Xe=Promise.resolve(ye)),Xe.then(function(){return ye.emit("plotly_relayout",Re.eventData),ye})}function q(ye,Me,Oe){var Pe=ye._fullLayout;if(!Me.axrange)return!1;for(var Re in Me)if("axrange"!==Re&&Me[Re])return!1;for(var Ue in Oe.rangesAltered){var qe=h.id2name(Ue),Xe=ye.layout[qe],lt=Pe[qe];if(lt.autorange=Xe.autorange,Xe.range&&(lt.range=Xe.range.slice()),lt.cleanRange(),lt._matchGroup)for(var He in lt._matchGroup)if(He!==Ue){var $e=Pe[h.id2name(He)];$e.autorange=lt.autorange,$e.range=lt.range.slice(),$e._input.range=lt.range.slice()}}return!0}function U(ye,Me){ye.push(g,c.doAutoRangeAndConstraints,Me?function(Pe){var Re=[],Ue=!0;for(var qe in Me){var Xe=h.getFromId(Pe,qe);if(Re.push(qe),-1!==(Xe.ticklabelposition||"").indexOf("inside")&&Xe._anchorAxis&&Re.push(Xe._anchorAxis._id),Xe._matchGroup)for(var lt in Xe._matchGroup)Me[lt]||Re.push(lt);Xe.automargin&&(Ue=!1)}return h.draw(Pe,Re,{skipTitle:Ue})}:function(Pe){return h.draw(Pe,"redraw")},c.drawData,c.finalDraw)}var W=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ae=/^[xyz]axis[0-9]*\.autorange$/,G=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function te(ye,Me){var Oe,Pe,Re,Ue=ye.layout,qe=ye._fullLayout,lt=ee(qe._preGUI,qe._guiEditing),He=Object.keys(Me),$e=h.list(ye),et=_.extendDeepAll({},Me),nt={};for(K(Me),He=Object.keys(Me),Pe=0;Pe<He.length;Pe++)if(0===He[Pe].indexOf("allaxes")){for(Re=0;Re<$e.length;Re++){var ct=$e[Re]._id.substr(1),bt=-1!==ct.indexOf("scene")?ct+".":"",kt=He[Pe].replace("allaxes",bt+$e[Re]._name);Me[kt]||(Me[kt]=Me[He[Pe]])}delete Me[He[Pe]]}var Bt=A.layoutFlags(),Et={},ht={};function at(fn,nn){if(Array.isArray(fn))fn.forEach(function(Dn){at(Dn,nn)});else if(!(fn in Me)&&!w.hasParent(Me,fn)){var In=lt(Ue,fn);fn in ht||(ht[fn]=Y(In.get())),void 0!==nn&&In.set(nn)}}var Ft,en={};function Qt(fn){var nn=h.name2id(fn.split(".")[0]);return en[nn]=1,nn}for(var tn in Me){if(w.hasParent(Me,tn))throw new Error("cannot set "+tn+" and a parent attribute simultaneously");for(var dn=lt(Ue,tn),Mn=Me[tn],sn=dn.parts.length-1;sn>0&&"string"!=typeof dn.parts[sn];)sn--;var ke=dn.parts[sn],Se=dn.parts[sn-1]+"."+ke,Ce=dn.parts.slice(0,sn).join("."),Ve=e(ye.layout,Ce).get(),Ge=e(qe,Ce).get(),Qe=dn.get();if(void 0!==Mn){Et[tn]=Mn,ht[tn]="reverse"===ke?Mn:Y(Qe);var ot=i.getLayoutValObject(qe,dn.parts);if(ot&&ot.impliedEdits&&null!==Mn)for(var it in ot.impliedEdits)at(_.relativeAttr(tn,it),ot.impliedEdits[it]);if(-1!==["width","height"].indexOf(tn))if(Mn){at("autosize",null);var mt="height"===tn?"width":"height";at(mt,qe[mt])}else qe[tn]=ye._initialAutoSize[tn];else if("autosize"===tn)at("width",Mn?null:qe.width),at("height",Mn?null:qe.height);else if(Se.match(W))Qt(Se),e(qe,Ce+"._inputRange").set(null);else if(Se.match(ae)){Qt(Se),e(qe,Ce+"._inputRange").set(null);var xt=e(qe,Ce).get();xt._inputDomain&&(xt._input.domain=xt._inputDomain.slice())}else Se.match(G)&&e(qe,Ce+"._inputDomain").set(null);if("type"===ke){Ft=Ve;var Vt="linear"===Ge.type&&"log"===Mn;if(Vt||"log"===Ge.type&&"linear"===Mn){if(Ft&&Ft.range)if(Ge.autorange)Vt&&(Ft.range=Ft.range[1]>Ft.range[0]?[1,2]:[2,1]);else{var pt=Ft.range[0],At=Ft.range[1];Vt?(pt<=0&&At<=0&&at(Ce+".autorange",!0),pt<=0?pt=At/1e6:At<=0&&(At=pt/1e6),at(Ce+".range[0]",Math.log(pt)/Math.LN10),at(Ce+".range[1]",Math.log(At)/Math.LN10)):(at(Ce+".range[0]",Math.pow(10,pt)),at(Ce+".range[1]",Math.pow(10,At)))}else at(Ce+".autorange",!0);Array.isArray(qe._subplots.polar)&&qe._subplots.polar.length&&qe[dn.parts[0]]&&"radialaxis"===dn.parts[1]&&delete qe[dn.parts[0]]._subplot.viewInitial["radialaxis.range"],l.getComponentMethod("annotations","convertCoords")(ye,Ge,Mn,at),l.getComponentMethod("images","convertCoords")(ye,Ge,Mn,at)}else at(Ce+".autorange",!0),at(Ce+".range",null);e(qe,Ce+"._inputRange").set(null)}else if(ke.match(k)){var Xt=e(qe,tn).get(),Ct=(Mn||{}).type;Ct&&"-"!==Ct||(Ct="linear"),l.getComponentMethod("annotations","convertCoords")(ye,Xt,Ct,at),l.getComponentMethod("images","convertCoords")(ye,Xt,Ct,at)}var Pt=u.containerArrayMatch(tn);if(Pt){Oe=Pt.array;var Be=Pt.property,tt=ot||{editType:"calc"};""!==(Pe=Pt.index)&&""===Be&&(u.isAddVal(Mn)?ht[tn]=null:u.isRemoveVal(Mn)?ht[tn]=(e(Ue,Oe).get()||[])[Pe]:_.warn("unrecognized full object value",Me)),A.update(Bt,tt),nt[Oe]||(nt[Oe]={});var dt=nt[Oe][Pe];dt||(dt=nt[Oe][Pe]={}),dt[Be]=Mn,delete Me[tn]}else"reverse"===ke?(Ve.range?Ve.range.reverse():(at(Ce+".autorange",!0),Ve.range=[1,0]),Ge.autorange?Bt.calc=!0:Bt.plot=!0):(qe._has("scatter-like")&&qe._has("regl")&&"dragmode"===tn&&("lasso"===Mn||"select"===Mn)&&"lasso"!==Qe&&"select"!==Qe||qe._has("gl2d")?Bt.plot=!0:ot?A.update(Bt,ot):Bt.calc=!0,dn.set(Mn))}}for(Oe in nt)u.applyContainerArrayChanges(ye,lt(Ue,Oe),nt[Oe],Bt,lt)||(Bt.plot=!0);for(var Dt in en){var Nt=(Ft=h.getFromId(ye,Dt))&&Ft._constraintGroup;if(Nt)for(var Yt in Bt.calc=!0,Nt)en[Yt]||(h.getFromId(ye,Yt)._constraintShrinkable=!0)}return(ne(ye)||Me.height||Me.width)&&(Bt.plot=!0),(Bt.plot||Bt.calc)&&(Bt.layoutReplot=!0),{flags:Bt,rangesAltered:en,undoit:ht,redoit:Et,eventData:et}}function ne(ye){var Me=ye._fullLayout,Oe=Me.width,Pe=Me.height;return ye.layout.autosize&&v.plotAutoSize(ye,ye.layout,Me),Me.width!==Oe||Me.height!==Pe}function le(ye,Me,Oe,Pe){ye=_.getGraphDiv(ye),w.clearPromiseQueue(ye),_.isPlainObject(Me)||(Me={}),_.isPlainObject(Oe)||(Oe={}),Object.keys(Me).length&&(ye.changed=!0),Object.keys(Oe).length&&(ye.changed=!0);var Re=w.coerceTraceIndices(ye,Pe),Ue=X(ye,_.extendFlat({},Me),Re),qe=Ue.flags,Xe=te(ye,_.extendFlat({},Oe)),lt=Xe.flags;(qe.calc||lt.calc)&&(ye.calcdata=void 0),qe.clearAxisTypes&&w.clearAxisTypes(ye,Re,Oe);var He=[];lt.layoutReplot?He.push(c.layoutReplot):qe.fullReplot?He.push(se._doPlot):(He.push(v.previousPromises),q(ye,lt,Xe)||v.supplyDefaults(ye),qe.style&&He.push(c.doTraceStyle),(qe.colorbars||lt.colorbars)&&He.push(c.doColorBars),lt.legend&&He.push(c.doLegend),lt.layoutstyle&&He.push(c.layoutStyles),lt.axrange&&U(He,Xe.rangesAltered),lt.ticks&&He.push(c.doTicksRelayout),lt.modebar&&He.push(c.doModeBar),lt.camera&&He.push(c.doCamera),He.push(E)),He.push(v.rehover,v.redrag),a.add(ye,le,[ye,Ue.undoit,Xe.undoit,Ue.traces],le,[ye,Ue.redoit,Xe.redoit,Ue.traces]);var $e=_.syncOrAsync(He,ye);return $e&&$e.then||($e=Promise.resolve(ye)),$e.then(function(){return ye.emit("plotly_update",{data:Ue.eventData,layout:Xe.eventData}),ye})}function ue(ye){return function(Me){Me._fullLayout._guiEditing=!0;var Oe=ye.apply(null,arguments);return Me._fullLayout._guiEditing=!1,Oe}}var pe=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],de=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function _e(ye,Me){for(var Oe=0;Oe<Me.length;Oe++){var Pe=Me[Oe],Re=ye.match(Pe.pattern);if(Re){var Ue=Re[1]||"";return{head:Ue,tail:ye.substr(Ue.length+1),attr:Pe.attr}}}}function me(ye,Me){var Oe=e(Me,ye).get();if(void 0!==Oe)return Oe;var Pe=ye.split(".");for(Pe.pop();Pe.length>1;)if(Pe.pop(),void 0!==(Oe=e(Me,Pe.join(".")+".uirevision").get()))return Oe;return Me.uirevision}function we(ye,Me){for(var Oe=0;Oe<Me.length;Oe++)if(Me[Oe]._fullInput.uid===ye)return Oe;return-1}function De(ye,Me,Oe){for(var Pe=0;Pe<Me.length;Pe++)if(Me[Pe].uid===ye)return Pe;return!Me[Oe]||Me[Oe].uid?-1:Oe}function Le(ye,Me){var Oe=_.isPlainObject(ye),Pe=Array.isArray(ye);return Oe||Pe?(Oe&&_.isPlainObject(Me)||Pe&&Array.isArray(Me))&&JSON.stringify(ye)===JSON.stringify(Me):ye===Me}function Ie(ye,Me,Oe,Pe){var Re,Ue,qe,Xe=Pe.getValObject,lt=Pe.flags,He=Pe.immutable,$e=Pe.inArray,et=Pe.arrayIndex;function nt(){var Ve=Re.editType;$e&&-1!==Ve.indexOf("arraydraw")?_.pushUnique(lt.arrays[$e],et):(A.update(lt,Re),"none"!==Ve&&lt.nChanges++,Pe.transition&&Re.anim&&lt.nChangesAnim++,(W.test(qe)||ae.test(qe))&&(lt.rangesAltered[Oe[0]]=1),G.test(qe)&&e(Me,"_inputDomain").set(null),"datarevision"===Ue&&(lt.newDataRevision=1))}function ct(Ve){return"data_array"===Ve.valType||Ve.arrayOk}for(Ue in ye){if(lt.calc&&!Pe.transition)return;var bt=ye[Ue],kt=Me[Ue],Bt=Oe.concat(Ue);if(qe=Bt.join("."),"_"!==Ue.charAt(0)&&"function"!=typeof bt&&bt!==kt){if(("tick0"===Ue||"dtick"===Ue)&&"geo"!==Oe[0]){var Et=Me.tickmode;if("auto"===Et||"array"===Et||!Et)continue}if(("range"!==Ue||!Me.autorange)&&("zmin"!==Ue&&"zmax"!==Ue||"contourcarpet"!==Me.type)&&(Re=Xe(Bt))&&(!Re._compareAsJSON||JSON.stringify(bt)!==JSON.stringify(kt))){var ht,at=Re.valType,Ft=ct(Re),en=Array.isArray(bt),Qt=Array.isArray(kt);if(en&&Qt){var tn="_input_"+Ue,dn=ye[tn],Mn=Me[tn];if(Array.isArray(dn)&&dn===Mn)continue}if(void 0===kt)Ft&&en?lt.calc=!0:nt();else if(Re._isLinkedToArray){var sn=[],ke=!1;$e||(lt.arrays[Ue]=sn);var Se=Math.min(bt.length,kt.length),Ce=Math.max(bt.length,kt.length);if(Se!==Ce){if("arraydraw"!==Re.editType){nt();continue}ke=!0}for(ht=0;ht<Se;ht++)Ie(bt[ht],kt[ht],Bt.concat(ht),_.extendFlat({inArray:Ue,arrayIndex:ht},Pe));if(ke)for(ht=Se;ht<Ce;ht++)sn.push(ht)}else!at&&_.isPlainObject(bt)?Ie(bt,kt,Bt,Pe):Ft?en&&Qt?(He&&(lt.calc=!0),(He||Pe.newDataRevision)&&nt()):en!==Qt?lt.calc=!0:nt():en&&Qt&&bt.length===kt.length&&String(bt)===String(kt)||nt()}}}for(Ue in Me)if(!(Ue in ye)&&"_"!==Ue.charAt(0)&&"function"!=typeof Me[Ue]){if(ct(Re=Xe(Oe.concat(Ue)))&&Array.isArray(Me[Ue]))return void(lt.calc=!0);nt()}}function je(ye){var Me=ye._fullLayout,Oe=ye.getBoundingClientRect();if(!_.equalDomRects(Oe,Me._lastBBox)){var Pe=Me._invTransform=_.inverseTransformMatrix(_.getFullTransformMatrix(ye));Me._invScaleX=Math.sqrt(Pe[0][0]*Pe[0][0]+Pe[0][1]*Pe[0][1]+Pe[0][2]*Pe[0][2]),Me._invScaleY=Math.sqrt(Pe[1][0]*Pe[1][0]+Pe[1][1]*Pe[1][1]+Pe[1][2]*Pe[1][2]),Me._lastBBox=Oe}}se.animate=function(ye,Me,Oe){if(ye=_.getGraphDiv(ye),!_.isPlotDiv(ye))throw new Error("This element is not a Plotly plot: "+ye+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Pe=ye._transitionData;Pe._frameQueue||(Pe._frameQueue=[]);var Re=(Oe=v.supplyAnimationDefaults(Oe)).transition,Ue=Oe.frame;function qe(He){return Array.isArray(Re)?He>=Re.length?Re[0]:Re[He]:Re}function Xe(He){return Array.isArray(Ue)?He>=Ue.length?Ue[0]:Ue[He]:Ue}function lt(He,$e){var et=0;return function(){if(He&&++et===$e)return He()}}return void 0===Pe._frameWaitingCnt&&(Pe._frameWaitingCnt=0),new Promise(function(He,$e){function nt(){ye.emit("plotly_animating"),Pe._lastFrameAt=-1/0,Pe._timeToNext=0,Pe._runningTransitions=0,Pe._currentFrame=null;var dn=function(){Pe._animationRaf=window.requestAnimationFrame(dn),Date.now()-Pe._lastFrameAt>Pe._timeToNext&&function(){Pe._currentFrame&&Pe._currentFrame.onComplete&&Pe._currentFrame.onComplete();var dn=Pe._currentFrame=Pe._frameQueue.shift();if(dn){var Mn=dn.name?dn.name.toString():null;ye._fullLayout._currentFrame=Mn,Pe._lastFrameAt=Date.now(),Pe._timeToNext=dn.frameOpts.duration,v.transition(ye,dn.frame.data,dn.frame.layout,w.coerceTraceIndices(ye,dn.frame.traces),dn.frameOpts,dn.transitionOpts).then(function(){dn.onComplete&&dn.onComplete()}),ye.emit("plotly_animatingframe",{name:Mn,frame:dn.frame,animation:{frame:dn.frameOpts,transition:dn.transitionOpts}})}else ye.emit("plotly_animated"),window.cancelAnimationFrame(Pe._animationRaf),Pe._animationRaf=null}()};dn()}var ct,bt,kt=0;function Bt(dn){return dn.transitionOpts=Array.isArray(Re)?kt>=Re.length?Re[kt]:Re[0]:Re,kt++,dn}var Et=[],ht=null==Me,at=Array.isArray(Me);if(ht||at||!_.isPlainObject(Me)){if(ht||-1!==["string","number"].indexOf(typeof Me))for(ct=0;ct<Pe._frames.length;ct++)(bt=Pe._frames[ct])&&(ht||String(bt.group)===String(Me))&&Et.push({type:"byname",name:String(bt.name),data:Bt({name:bt.name})});else if(at)for(ct=0;ct<Me.length;ct++){var Ft=Me[ct];-1!==["number","string"].indexOf(typeof Ft)?(Ft=String(Ft),Et.push({type:"byname",name:Ft,data:Bt({name:Ft})})):_.isPlainObject(Ft)&&Et.push({type:"object",data:Bt(_.extendFlat({},Ft))})}}else Et.push({type:"object",data:Bt(_.extendFlat({},Me))});for(ct=0;ct<Et.length;ct++)if("byname"===(bt=Et[ct]).type&&!Pe._frameHash[bt.data.name])return _.warn('animate failure: frame not found: "'+bt.data.name+'"'),void $e();-1!==["next","immediate"].indexOf(Oe.mode)&&function(){if(0!==Pe._frameQueue.length){for(;Pe._frameQueue.length;){var dn=Pe._frameQueue.pop();dn.onInterrupt&&dn.onInterrupt()}ye.emit("plotly_animationinterrupted",[])}}(),"reverse"===Oe.direction&&Et.reverse();var en=ye._fullLayout._currentFrame;if(en&&Oe.fromcurrent){var Qt=-1;for(ct=0;ct<Et.length;ct++)if("byname"===(bt=Et[ct]).type&&bt.name===en){Qt=ct;break}if(Qt>0&&Qt<Et.length-1){var tn=[];for(ct=0;ct<Et.length;ct++)bt=Et[ct],("byname"!==Et[ct].type||ct>Qt)&&tn.push(bt);Et=tn}}Et.length>0?function(dn){if(0!==dn.length){for(var Mn=0;Mn<dn.length;Mn++){var sn;sn="byname"===dn[Mn].type?v.computeFrame(ye,dn[Mn].name):dn[Mn].data;var ke=Xe(Mn),Se=qe(Mn);Se.duration=Math.min(Se.duration,ke.duration);var Ce={frame:sn,name:dn[Mn].name,frameOpts:ke,transitionOpts:Se};Mn===dn.length-1&&(Ce.onComplete=lt(He,2),Ce.onInterrupt=$e),Pe._frameQueue.push(Ce)}"immediate"===Oe.mode&&(Pe._lastFrameAt=-1/0),Pe._animationRaf||nt()}}(Et):(ye.emit("plotly_animated"),He())})},se.addFrames=function(ye,Me,Oe){if(ye=_.getGraphDiv(ye),null==Me)return Promise.resolve();if(!_.isPlotDiv(ye))throw new Error("This element is not a Plotly plot: "+ye+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Pe,Re,Ue,qe,Xe=ye._transitionData._frames,lt=ye._transitionData._frameHash;if(!Array.isArray(Me))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Me);var He=Xe.length+2*Me.length,$e=[],et={};for(Pe=Me.length-1;Pe>=0;Pe--)if(_.isPlainObject(Me[Pe])){var nt=Me[Pe].name,ct=(lt[nt]||et[nt]||{}).name,bt=Me[Pe].name;ct&&bt&&"number"==typeof bt&&(lt[ct]||et[ct])&&C<5&&(C++,_.warn('addFrames: overwriting frame "'+(lt[ct]||et[ct]).name+'" with a frame whose name of type "number" also equates to "'+ct+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===C&&_.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),et[nt]={name:nt},$e.push({frame:v.supplyFrameDefaults(Me[Pe]),index:Oe&&null!=Oe[Pe]?Oe[Pe]:He+Pe})}$e.sort(function(tn,dn){return tn.index>dn.index?-1:tn.index<dn.index?1:0});var Bt=[],Et=[],ht=Xe.length;for(Pe=$e.length-1;Pe>=0;Pe--){if("number"==typeof(Re=$e[Pe].frame).name&&_.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Re.name)for(;lt[Re.name="frame "+ye._transitionData._counter++];);if(lt[Re.name]){for(Ue=0;Ue<Xe.length&&(Xe[Ue]||{}).name!==Re.name;Ue++);Bt.push({type:"replace",index:Ue,value:Re}),Et.unshift({type:"replace",index:Ue,value:Xe[Ue]})}else qe=Math.max(0,Math.min($e[Pe].index,ht)),Bt.push({type:"insert",index:qe,value:Re}),Et.unshift({type:"delete",index:qe}),ht++}return a&&a.add(ye,v.modifyFrames,[ye,Et],v.modifyFrames,[ye,Bt]),v.modifyFrames(ye,Bt)},se.deleteFrames=function(ye,Me){if(ye=_.getGraphDiv(ye),!_.isPlotDiv(ye))throw new Error("This element is not a Plotly plot: "+ye);var Oe,Pe,Re=ye._transitionData._frames,Ue=[],qe=[];if(!Me)for(Me=[],Oe=0;Oe<Re.length;Oe++)Me.push(Oe);for((Me=Me.slice()).sort(),Oe=Me.length-1;Oe>=0;Oe--)Ue.push({type:"delete",index:Pe=Me[Oe]}),qe.unshift({type:"insert",index:Pe,value:Re[Pe]});return a&&a.add(ye,v.modifyFrames,[ye,qe],v.modifyFrames,[ye,Ue]),v.modifyFrames(ye,Ue)},se.addTraces=function ye(Me,Oe,Pe){Me=_.getGraphDiv(Me);var Re,Ue,qe=[],Xe=se.deleteTraces,lt=ye,He=[Me,qe],$e=[Me,Oe];for(function(et,nt,ct){var bt,kt;if(!Array.isArray(et.data))throw new Error("gd.data must be an array.");if(void 0===nt)throw new Error("traces must be defined.");for(Array.isArray(nt)||(nt=[nt]),bt=0;bt<nt.length;bt++)if("object"!=typeof(kt=nt[bt])||Array.isArray(kt)||null===kt)throw new Error("all values in traces array must be non-array objects");if(void 0===ct||Array.isArray(ct)||(ct=[ct]),void 0!==ct&&ct.length!==nt.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(Me,Oe,Pe),Array.isArray(Oe)||(Oe=[Oe]),Oe=Oe.map(function(et){return _.extendFlat({},et)}),w.cleanData(Oe),Re=0;Re<Oe.length;Re++)Me.data.push(Oe[Re]);for(Re=0;Re<Oe.length;Re++)qe.push(-Oe.length+Re);if(void 0===Pe)return Ue=se.redraw(Me),a.add(Me,Xe,He,lt,$e),Ue;Array.isArray(Pe)||(Pe=[Pe]);try{P(Me,qe,Pe)}catch(et){throw Me.data.splice(Me.data.length-Oe.length,Oe.length),et}return a.startSequence(Me),a.add(Me,Xe,He,lt,$e),Ue=se.moveTraces(Me,qe,Pe),a.stopSequence(Me),Ue},se.deleteTraces=function ye(Me,Oe){Me=_.getGraphDiv(Me);var Pe,Re,Ue=[],qe=se.addTraces,Xe=ye,lt=[Me,Ue,Oe],He=[Me,Oe];if(void 0===Oe)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Oe)||(Oe=[Oe]),I(Me,Oe,"indices"),(Oe=F(Oe,Me.data.length-1)).sort(_.sorterDes),Pe=0;Pe<Oe.length;Pe+=1)Re=Me.data.splice(Oe[Pe],1)[0],Ue.push(Re);var $e=se.redraw(Me);return a.add(Me,qe,lt,Xe,He),$e},se.extendTraces=function ye(Me,Oe,Pe,Re){function Ue(He,$e,et){var nt,ct;if(_.isTypedArray(He))if(et<0){var bt=new He.constructor(0),kt=V(He,$e);et<0?(nt=kt,ct=bt):(nt=bt,ct=kt)}else if(nt=new He.constructor(et),ct=new He.constructor(He.length+$e.length-et),et===$e.length)nt.set($e),ct.set(He);else if(et<$e.length){var Bt=$e.length-et;nt.set($e.subarray(Bt)),ct.set(He),ct.set($e.subarray(0,Bt),He.length)}else{var Et=et-$e.length,ht=He.length-Et;nt.set(He.subarray(ht)),nt.set($e,Et),ct.set(He.subarray(0,ht))}else nt=He.concat($e),ct=et>=0&&et<nt.length?nt.splice(0,nt.length-et):[];return[nt,ct]}var qe=j(Me=_.getGraphDiv(Me),Oe,Pe,Re,Ue),Xe=se.redraw(Me);return a.add(Me,se.prependTraces,[Me,qe.update,Pe,qe.maxPoints],ye,arguments),Xe},se.moveTraces=function ye(Me,Oe,Pe){var Re,Ue=[],qe=[],Xe=ye,lt=ye,He=[Me=_.getGraphDiv(Me),Pe,Oe],$e=[Me,Oe,Pe];if(P(Me,Oe,Pe),Oe=Array.isArray(Oe)?Oe:[Oe],void 0===Pe)for(Pe=[],Re=0;Re<Oe.length;Re++)Pe.push(-Oe.length+Re);for(Pe=Array.isArray(Pe)?Pe:[Pe],Oe=F(Oe,Me.data.length-1),Pe=F(Pe,Me.data.length-1),Re=0;Re<Me.data.length;Re++)-1===Oe.indexOf(Re)&&Ue.push(Me.data[Re]);for(Re=0;Re<Oe.length;Re++)qe.push({newIndex:Pe[Re],trace:Me.data[Oe[Re]]});for(qe.sort(function(nt,ct){return nt.newIndex-ct.newIndex}),Re=0;Re<qe.length;Re+=1)Ue.splice(qe[Re].newIndex,0,qe[Re].trace);Me.data=Ue;var et=se.redraw(Me);return a.add(Me,Xe,He,lt,$e),et},se.prependTraces=function ye(Me,Oe,Pe,Re){function Ue(He,$e,et){var nt,ct;if(_.isTypedArray(He))if(et<=0){var bt=new He.constructor(0),kt=V($e,He);et<0?(nt=kt,ct=bt):(nt=bt,ct=kt)}else if(nt=new He.constructor(et),ct=new He.constructor(He.length+$e.length-et),et===$e.length)nt.set($e),ct.set(He);else if(et<$e.length){var Bt=$e.length-et;nt.set($e.subarray(0,Bt)),ct.set($e.subarray(Bt)),ct.set(He,Bt)}else{var Et=et-$e.length;nt.set($e),nt.set(He.subarray(0,Et),$e.length),ct.set(He.subarray(Et))}else nt=$e.concat(He),ct=et>=0&&et<nt.length?nt.splice(et,nt.length):[];return[nt,ct]}var qe=j(Me=_.getGraphDiv(Me),Oe,Pe,Re,Ue),Xe=se.redraw(Me);return a.add(Me,se.extendTraces,[Me,qe.update,Pe,qe.maxPoints],ye,arguments),Xe},se.newPlot=function(ye,Me,Oe,Pe){return ye=_.getGraphDiv(ye),v.cleanPlot([],{},ye._fullData||[],ye._fullLayout||{}),v.purge(ye),se._doPlot(ye,Me,Oe,Pe)},se._doPlot=function(ye,Me,Oe,Pe){var Re;if(ye=_.getGraphDiv(ye),o.init(ye),_.isPlainObject(Me)){var Ue=Me;Me=Ue.data,Oe=Ue.layout,Pe=Ue.config,Re=Ue.frames}if(!1===o.triggerHandler(ye,"plotly_beforeplot",[Me,Oe,Pe]))return Promise.reject();Me||Oe||_.isPlotDiv(ye)||_.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ye),N(ye,Pe),Oe||(Oe={}),y.select(ye).classed("js-plotly-plot",!0),s.makeTester(),Array.isArray(ye._promises)||(ye._promises=[]);var qe=0===(ye.data||[]).length&&Array.isArray(Me);Array.isArray(Me)&&(w.cleanData(Me),qe?ye.data=Me:ye.data.push.apply(ye.data,Me),ye.empty=!1),ye.layout&&!qe||(ye.layout=w.cleanLayout(Oe)),v.supplyDefaults(ye);var Xe=ye._fullLayout,lt=Xe._has("cartesian");Xe._replotting=!0,(qe||Xe._shouldCreateBgLayer)&&(function(Et){var ht=y.select(Et),at=Et._fullLayout;if(at._calcInverseTransform=je,at._calcInverseTransform(Et),at._container=ht.selectAll(".plot-container").data([0]),at._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),at._paperdiv=at._container.selectAll(".svg-container").data([0]),at._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),at._glcontainer=at._paperdiv.selectAll(".gl-container").data([{}]),at._glcontainer.enter().append("div").classed("gl-container",!0),at._paperdiv.selectAll(".main-svg").remove(),at._paperdiv.select(".modebar-container").remove(),at._paper=at._paperdiv.insert("svg",":first-child").classed("main-svg",!0),at._toppaper=at._paperdiv.append("svg").classed("main-svg",!0),at._modebardiv=at._paperdiv.append("div"),delete at._modeBar,at._hoverpaper=at._paperdiv.append("svg").classed("main-svg",!0),!at._uid){var Ft={};y.selectAll("defs").each(function(){this.id&&(Ft[this.id.split("-")[1]]=1)}),at._uid=_.randstr(Ft)}at._paperdiv.selectAll(".main-svg").attr(f.svgAttrs),at._defs=at._paper.append("defs").attr("id","defs-"+at._uid),at._clips=at._defs.append("g").classed("clips",!0),at._topdefs=at._toppaper.append("defs").attr("id","topdefs-"+at._uid),at._topclips=at._topdefs.append("g").classed("clips",!0),at._bgLayer=at._paper.append("g").classed("bglayer",!0),at._draggers=at._paper.append("g").classed("draglayer",!0);var en=at._paper.append("g").classed("layer-below",!0);at._imageLowerLayer=en.append("g").classed("imagelayer",!0),at._shapeLowerLayer=en.append("g").classed("shapelayer",!0),at._cartesianlayer=at._paper.append("g").classed("cartesianlayer",!0),at._polarlayer=at._paper.append("g").classed("polarlayer",!0),at._smithlayer=at._paper.append("g").classed("smithlayer",!0),at._ternarylayer=at._paper.append("g").classed("ternarylayer",!0),at._geolayer=at._paper.append("g").classed("geolayer",!0),at._funnelarealayer=at._paper.append("g").classed("funnelarealayer",!0),at._pielayer=at._paper.append("g").classed("pielayer",!0),at._iciclelayer=at._paper.append("g").classed("iciclelayer",!0),at._treemaplayer=at._paper.append("g").classed("treemaplayer",!0),at._sunburstlayer=at._paper.append("g").classed("sunburstlayer",!0),at._indicatorlayer=at._toppaper.append("g").classed("indicatorlayer",!0),at._glimages=at._paper.append("g").classed("glimages",!0);var Qt=at._toppaper.append("g").classed("layer-above",!0);at._imageUpperLayer=Qt.append("g").classed("imagelayer",!0),at._shapeUpperLayer=Qt.append("g").classed("shapelayer",!0),at._infolayer=at._toppaper.append("g").classed("infolayer",!0),at._menulayer=at._toppaper.append("g").classed("menulayer",!0),at._zoomlayer=at._toppaper.append("g").classed("zoomlayer",!0),at._hoverlayer=at._hoverpaper.append("g").classed("hoverlayer",!0),at._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Et.emit("plotly_framework")}(ye),Xe._shouldCreateBgLayer&&delete Xe._shouldCreateBgLayer),s.initGradients(ye),s.initPatterns(ye),qe&&h.saveShowSpikeInitial(ye);var He=!ye.calcdata||ye.calcdata.length!==(ye._fullData||[]).length;He&&v.doCalcdata(ye);for(var $e=0;$e<ye.calcdata.length;$e++)ye.calcdata[$e][0].trace=ye._fullData[$e];ye._context.responsive?ye._responsiveChartHandler||(ye._responsiveChartHandler=function(){_.isHidden(ye)||v.resize(ye)},window.addEventListener("resize",ye._responsiveChartHandler)):_.clearResponsive(ye);var et=_.extendFlat({},Xe._size),nt=0;function ct(){if(v.clearAutoMarginIds(ye),c.drawMarginPushers(ye),h.allowAutoMargin(ye),Xe._has("pie"))for(var Et=ye._fullData,ht=0;ht<Et.length;ht++){var at=Et[ht];"pie"===at.type&&at.automargin&&v.allowAutoMargin(ye,"pie."+at.uid+".automargin")}return v.doAutoMargin(ye),v.previousPromises(ye)}function bt(){ye._transitioning||(c.doAutoRangeAndConstraints(ye),qe&&h.saveRangeInitial(ye),l.getComponentMethod("rangeslider","calcAutorange")(ye))}var kt=[v.previousPromises,function(){if(Re)return se.addFrames(ye,Re)},function Et(){for(var ht=Xe._basePlotModules,at=0;at<ht.length;at++)ht[at].drawFramework&&ht[at].drawFramework(ye);!Xe._glcanvas&&Xe._has("gl")&&(Xe._glcanvas=Xe._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(tn){return tn.key}),Xe._glcanvas.enter().append("canvas").attr("class",function(tn){return"gl-canvas gl-canvas-"+tn.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Ft=ye._context.plotGlPixelRatio;if(Xe._glcanvas){Xe._glcanvas.attr("width",Xe.width*Ft).attr("height",Xe.height*Ft).style("width",Xe.width+"px").style("height",Xe.height+"px");var en=Xe._glcanvas.data()[0].regl;if(en&&(Math.floor(Xe.width*Ft)!==en._gl.drawingBufferWidth||Math.floor(Xe.height*Ft)!==en._gl.drawingBufferHeight)){var Qt="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!nt)return _.log(Qt+" Clearing graph and plotting again."),v.cleanPlot([],{},ye._fullData,Xe),v.supplyDefaults(ye),Xe=ye._fullLayout,v.doCalcdata(ye),nt++,Et();_.error(Qt)}}return"h"===Xe.modebar.orientation?Xe._modebardiv.style("height",null).style("width","100%"):Xe._modebardiv.style("width",null).style("height",Xe.height+"px"),v.previousPromises(ye)},ct,function(){if(v.didMarginChange(et,Xe._size))return _.syncOrAsync([ct,c.layoutStyles],ye)}];lt&&kt.push(function(){if(He)return _.syncOrAsync([l.getComponentMethod("shapes","calcAutorange"),l.getComponentMethod("annotations","calcAutorange"),bt],ye);bt()}),kt.push(c.layoutStyles),lt&&kt.push(function(){return h.draw(ye,qe?"":"redraw")},function(Et){Et._fullLayout._insideTickLabelsAutorange&&ie(Et,Et._fullLayout._insideTickLabelsAutorange).then(function(){Et._fullLayout._insideTickLabelsAutorange=void 0})}),kt.push(c.drawData,c.finalDraw,p,v.addLinks,v.rehover,v.redrag,v.doAutoMargin,function(Et){Et._fullLayout._insideTickLabelsAutorange&&qe&&h.saveRangeInitial(Et,!0)},v.previousPromises);var Bt=_.syncOrAsync(kt,ye);return Bt&&Bt.then||(Bt=Promise.resolve()),Bt.then(function(){return E(ye),ye})},se.purge=function(ye){var Me=(ye=_.getGraphDiv(ye))._fullLayout||{};return v.cleanPlot([],{},ye._fullData||[],Me),v.purge(ye),o.purge(ye),Me._container&&Me._container.remove(),delete ye._context,ye},se.react=function(ye,Me,Oe,Pe){var Re,Ue;ye=_.getGraphDiv(ye),w.clearPromiseQueue(ye);var Ce,Ve,Ge,Qe,ot,it,qe=ye._fullData,Xe=ye._fullLayout;if(_.isPlotDiv(ye)&&qe&&Xe){if(_.isPlainObject(Me)){var lt=Me;Me=lt.data,Oe=lt.layout,Pe=lt.config,Re=lt.frames}var He=!1;if(Pe){var $e=_.extendDeep({},ye._context);ye._context=void 0,N(ye,Pe),He=function Ce(Ve,Ge){var Qe;for(Qe in Ve)if("_"!==Qe.charAt(0)){var ot=Ve[Qe],it=Ge[Qe];if(ot!==it)if(_.isPlainObject(ot)&&_.isPlainObject(it)){if(Ce(ot,it))return!0}else{if(!Array.isArray(ot)||!Array.isArray(it)||ot.length!==it.length)return!0;for(var mt=0;mt<ot.length;mt++)if(ot[mt]!==it[mt]&&(!_.isPlainObject(ot[mt])||!_.isPlainObject(it[mt])||Ce(ot[mt],it[mt])))return!0}}}($e,ye._context)}ye.data=Me||[],w.cleanData(ye.data),ye.layout=Oe||{},w.cleanLayout(ye.layout),function(Ce,Ve,Ge,Qe){var ot,it,mt,xt,Vt,$t,pt,At,Xt,Ct,Pt=Qe._preGUI,Be=[],tt={},dt={};for(ot in Pt){if(Vt=_e(ot,pe)){if(Xt=Vt.head,Ct=Vt.tail,(xt=(mt=e(Qe,it=Vt.attr||Xt+".uirevision").get())&&me(it,Ve))&&xt===mt){if(null===($t=Pt[ot])&&($t=void 0),Le(At=(pt=e(Ve,ot)).get(),$t)){void 0===At&&"autorange"===Ct&&Be.push(Xt),pt.set(Y(e(Qe,ot).get()));continue}if("autorange"===Ct||"range["===Ct.substr(0,6)){var Yt=Pt[Xt+".autorange"];if(Yt||null===Yt&&null===Pt[Xt+".range[0]"]&&null===Pt[Xt+".range[1]"]){if(!(Xt in tt)){var fn=e(Ve,Xt).get();tt[Xt]=fn&&(fn.autorange||!1!==fn.autorange&&(!fn.range||2!==fn.range.length))}if(tt[Xt]){pt.set(Y(e(Qe,ot).get()));continue}}}}}else _.warn("unrecognized GUI edit: "+ot);delete Pt[ot],Vt&&"range["===Vt.tail.substr(0,6)&&(dt[Vt.head]=1)}for(var nn=0;nn<Be.length;nn++){var In=Be[nn];if(dt[In]){var Dn=e(Ve,In).get();Dn&&delete Dn.autorange}}var kn=Qe._tracePreGUI;for(var rn in kn){var pn,gn=kn[rn],Pn=null;for(ot in gn){if(!Pn){var jn=we(rn,Ge);if(jn<0){delete kn[rn];break}var Kn=De(rn,Ce,(pn=Ge[jn]._fullInput).index);if(Kn<0){delete kn[rn];break}Pn=Ce[Kn]}if(Vt=_e(ot,de)){if(Vt.attr?xt=(mt=e(Qe,Vt.attr).get())&&me(Vt.attr,Ve):(mt=pn.uirevision,void 0===(xt=Pn.uirevision)&&(xt=Ve.uirevision)),xt&&xt===mt&&(null===($t=gn[ot])&&($t=void 0),Le(At=(pt=e(Pn,ot)).get(),$t))){pt.set(Y(e(pn,ot).get()));continue}}else _.warn("unrecognized GUI edit: "+ot+" in trace uid "+rn);delete gn[ot]}}}(ye.data,ye.layout,qe,Xe),v.supplyDefaults(ye,{skipUpdateCalc:!0});var et=ye._fullData,nt=ye._fullLayout,ct=void 0===nt.datarevision,bt=nt.transition,kt=(Ce=ye,Ve=Xe,Ge=nt,Qe=ct,ot=bt,(it=A.layoutFlags()).arrays={},it.rangesAltered={},it.nChanges=0,it.nChangesAnim=0,Ie(Ve,Ge,[],{getValObject:function(xt){return i.getLayoutValObject(Ge,xt)},flags:it,immutable:Qe,transition:ot,gd:Ce}),(it.plot||it.calc)&&(it.layoutReplot=!0),ot&&it.nChanges&&it.nChangesAnim&&(it.anim=it.nChanges===it.nChangesAnim?"all":"some"),it),Et=function(Ce,Ve,Ge,Qe,ot,it){var mt=Ve.length===Ge.length;if(!ot&&!mt)return{fullReplot:!0,calc:!0};var xt,Vt,$t=A.traceFlags();$t.arrays={},$t.nChanges=0,$t.nChangesAnim=0;var pt={getValObject:function(Xt){var Ct=i.getTraceValObject(Vt,Xt);return!Vt._module.animatable&&Ct.anim&&(Ct.anim=!1),Ct},flags:$t,immutable:Qe,transition:ot,newDataRevision:it,gd:Ce},At={};for(xt=0;xt<Ve.length;xt++)if(Ge[xt]){if(v.hasMakesDataTransform(Vt=Ge[xt]._fullInput)&&(Vt=Ge[xt]),At[Vt.uid])continue;At[Vt.uid]=1,Ie(Ve[xt]._fullInput,Vt,[],pt)}return($t.calc||$t.plot)&&($t.fullReplot=!0),ot&&$t.nChanges&&$t.nChangesAnim&&($t.anim=$t.nChanges===$t.nChangesAnim&&mt?"all":"some"),$t}(ye,qe,et,ct,bt,kt.newDataRevision);if(ne(ye)&&(kt.layoutReplot=!0),Et.calc||kt.calc){ye.calcdata=void 0;for(var ht=Object.getOwnPropertyNames(nt),at=0;at<ht.length;at++){var Ft=ht[at],en=Ft.substring(0,5);if("xaxis"===en||"yaxis"===en){var Qt=nt[Ft]._emptyCategories;Qt&&Qt()}}}else v.supplyDefaultsUpdateCalc(ye.calcdata,et);var tn=[];if(Re&&(ye._transitionData={},v.createTransitionData(ye),tn.push(function(){return se.addFrames(ye,Re)})),nt.transition&&!He&&(Et.anim||kt.anim))kt.ticks&&tn.push(c.doTicksRelayout),v.doCalcdata(ye),c.doAutoRangeAndConstraints(ye),tn.push(function(){return v.transitionFromReact(ye,Et,kt,Xe)});else if(Et.fullReplot||kt.layoutReplot||He)ye._fullLayout._skipDefaults=!0,tn.push(se._doPlot);else{for(var dn in kt.arrays){var Mn=kt.arrays[dn];if(Mn.length){var sn=l.getComponentMethod(dn,"drawOne");if(sn!==_.noop)for(var ke=0;ke<Mn.length;ke++)sn(ye,Mn[ke]);else{var Se=l.getComponentMethod(dn,"draw");if(Se===_.noop)throw new Error("cannot draw components: "+dn);Se(ye)}}}tn.push(v.previousPromises),Et.style&&tn.push(c.doTraceStyle),(Et.colorbars||kt.colorbars)&&tn.push(c.doColorBars),kt.legend&&tn.push(c.doLegend),kt.layoutstyle&&tn.push(c.layoutStyles),kt.axrange&&U(tn),kt.ticks&&tn.push(c.doTicksRelayout),kt.modebar&&tn.push(c.doModeBar),kt.camera&&tn.push(c.doCamera),tn.push(E)}tn.push(v.rehover,v.redrag),(Ue=_.syncOrAsync(tn,ye))&&Ue.then||(Ue=Promise.resolve(ye))}else Ue=se.newPlot(ye,Me,Oe,Pe);return Ue.then(function(){return ye.emit("plotly_react",{data:Me,layout:Oe}),ye})},se.redraw=function(ye){if(ye=_.getGraphDiv(ye),!_.isPlotDiv(ye))throw new Error("This element is not a Plotly plot: "+ye);return w.cleanData(ye.data),w.cleanLayout(ye.layout),ye.calcdata=void 0,se._doPlot(ye).then(function(){return ye.emit("plotly_redraw"),ye})},se.relayout=ie,se.restyle=Z,se.setPlotConfig=function(ye){return _.extendFlat(m,ye)},se.update=le,se._guiRelayout=ue(ie),se._guiRestyle=ue(Z),se._guiUpdate=ue(le),se._storeDirectGUIEdit=function(ye,Me,Oe){for(var Pe in Oe)re(Pe,e(ye,Pe).get(),Oe[Pe],Me)}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"../lib/events":492,"../lib/queue":519,"../plots/cartesian/axes":554,"../plots/cartesian/constants":561,"../plots/cartesian/graph_interact":564,"../plots/cartesian/select":575,"../plots/plots":619,"../registry":638,"./edit_types":536,"./helpers":537,"./manage_arrays":539,"./plot_config":541,"./plot_schema":542,"./subroutines":544,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],541:[function(b,oe,se){"use strict";var y={staticPlot:{valType:"boolean",dflt:!1},typesetMath:{valType:"boolean",dflt:!0},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},x={};(function M(_,e){for(var o in _){var a=_[o];a.valType?e[o]=a.dflt:(e[o]||(e[o]={}),M(a,e[o]))}})(y,x),oe.exports={configAttributes:y,dfltConfig:x}},{}],542:[function(b,oe,se){"use strict";var y=b("../registry"),x=b("../lib"),M=b("../plots/attributes"),_=b("../plots/layout_attributes"),e=b("../plots/frame_attributes"),o=b("../plots/animation_attributes"),a=b("./plot_config").configAttributes,l=b("./edit_types"),i=x.extendDeepAll,v=x.isPlainObject,h=x.isArrayOrTypedArray,s=x.nestedProperty,d=x.valObjectMeta,p=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];function f(k,C,E){if(!k)return!1;if(k._isLinkedToArray)if(g(C[E]))E++;else if(E<C.length)return!1;for(;E<C.length;E++){var L=k[C[E]];if(!v(L)||(k=L,E===C.length-1))break;if(k._isLinkedToArray){if(!g(C[++E]))return!1}else if("info_array"===k.valType){var D=C[++E];if(!g(D))return!1;var N=k.items;if(Array.isArray(N)){if(D>=N.length)return!1;if(2===k.dimensions){if(E++,C.length===E)return k;var F=C[E];if(!g(F))return!1;k=N[D][F]}else k=N[D]}else k=N}}return k}function g(k){return k===Math.round(k)&&k>=0}function m(){var k,C,E={};for(k in i(E,_),y.subplotsRegistry)if((C=y.subplotsRegistry[k]).layoutAttributes)if(Array.isArray(C.attr))for(var L=0;L<C.attr.length;L++)c(E,C,C.attr[L]);else c(E,C,"subplot"===C.attr?C.name:C.attr);for(k in y.componentsRegistry){var D=(C=y.componentsRegistry[k]).schema;if(D&&(D.subplots||D.layout)){var N=D.subplots;if(N&&N.xaxis&&!N.yaxis)for(var F in N.xaxis)delete E.yaxis[F]}else"colorscale"===C.name?i(E,C.layoutAttributes):C.layoutAttributes&&A(E,C.layoutAttributes,C.name)}return{layoutAttributes:w(E)}}function u(){var k={frames:i({},e)};return w(k),k.frames}function w(k){return se.crawl(k,function(E,L,D){se.isValObject(E)?!0!==E.arrayOk&&"data_array"!==E.valType||(D[L+"src"]={valType:"string",editType:"none"}):v(E)&&(E.role="object")}),se.crawl(k,function(E,L,D){if(E){var N=E._isLinkedToArray;N&&(delete E._isLinkedToArray,D[L]={items:{}},D[L].items[N]=E,D[L].role="object")}}),function(C){!function E(L){for(var D in L)if(v(L[D]))E(L[D]);else if(Array.isArray(L[D]))for(var N=0;N<L[D].length;N++)E(L[D][N]);else L[D]instanceof RegExp&&(L[D]=L[D].toString())}(C)}(k),k}function c(k,C,E){var L=s(k,E),D=i({},C.layoutAttributes);D._isSubplotObj=!0,L.set(D)}function A(k,C,E){var L=s(k,E);L.set(i(L.get()||{},C))}se.IS_SUBPLOT_OBJ="_isSubplotObj",se.IS_LINKED_TO_ARRAY="_isLinkedToArray",se.DEPRECATED="_deprecated",se.UNDERSCORE_ATTRS=p,se.get=function(){var k={};y.allTypes.forEach(function(E){k[E]=function(L){var D,N;N=(D=y.modules[L]._module).basePlotModule;var F={type:null},I=i({},M),P=i({},D.attributes);se.crawl(P,function(Z,Y,ee,re,X){s(I,X).set(void 0),void 0===Z&&s(P,X).set(void 0)}),i(F,I),y.traceIs(L,"noOpacity")&&delete F.opacity,y.traceIs(L,"showLegend")||(delete F.showlegend,delete F.legendgroup),y.traceIs(L,"noHover")&&(delete F.hoverinfo,delete F.hoverlabel),D.selectPoints||delete F.selectedpoints,i(F,P),N.attributes&&i(F,N.attributes),F.type=L;var j={meta:D.meta||{},categories:D.categories||{},animatable:Boolean(D.animatable),type:L,attributes:w(F)};if(D.layoutAttributes){var V={};i(V,D.layoutAttributes),j.layoutAttributes=w(V)}return D.animatable||se.crawl(j,function(Z){se.isValObject(Z)&&"anim"in Z&&delete Z.anim}),j}(E)});var C={};return Object.keys(y.transformsRegistry).forEach(function(E){var L,N;C[E]=(N=i({},y.transformsRegistry[L=E].attributes),Object.keys(y.componentsRegistry).forEach(function(F){var I=y.componentsRegistry[F];I.schema&&I.schema.transforms&&I.schema.transforms[L]&&Object.keys(I.schema.transforms[L]).forEach(function(P){A(N,I.schema.transforms[L][P],P)})}),{attributes:w(N)})}),{defs:{valObjects:d,metaKeys:p.concat(["description","role","editType","impliedEdits"]),editType:{traces:l.traces,layout:l.layout},impliedEdits:{}},traces:k,layout:m(),transforms:C,frames:u(),animation:w(o),config:w(a)}},se.crawl=function(k,C,E,L){var D=E||0;L=L||"",Object.keys(k).forEach(function(N){var F=k[N];if(-1===p.indexOf(N)){var I=(L?L+".":"")+N;C(F,N,k,D,I),se.isValObject(F)||v(F)&&"impliedEdits"!==N&&se.crawl(F,C,D+1,I)}})},se.isValObject=function(k){return k&&void 0!==k.valType},se.findArrayAttributes=function(k){var C,E,L=[],D=[],N=[];function F(Z,Y,ee,re){D=D.slice(0,re).concat([Y]),N=N.slice(0,re).concat([Z&&Z._isLinkedToArray]),Z&&("data_array"===Z.valType||!0===Z.arrayOk)&&("colorbar"!==D[re-1]||"ticktext"!==Y&&"tickvals"!==Y)&&function X(K,ie,q){var U=K[D[ie]],W=q+D[ie];if(ie===D.length-1)h(U)&&L.push(E+W);else if(N[ie]){if(Array.isArray(U))for(var ae=0;ae<U.length;ae++)v(U[ae])&&X(U[ae],ie+1,W+"["+ae+"].")}else v(U)&&X(U,ie+1,W+".")}(C,0,"")}C=k,E="",se.crawl(M,F),k._module&&k._module.attributes&&se.crawl(k._module.attributes,F);var I=k.transforms;if(I)for(var P=0;P<I.length;P++){var j=I[P],V=j._module;V&&(E="transforms["+P+"].",C=j,se.crawl(V.attributes,F))}return L},se.getTraceValObject=function(k,C){var E,L,D=C[0],N=1;if("transforms"===D){if(1===C.length)return M.transforms;var F=k.transforms;if(!Array.isArray(F)||!F.length)return!1;var I=C[1];if(!g(I)||I>=F.length)return!1;L=(E=(y.transformsRegistry[F[I].type]||{}).attributes)&&E[C[2]],N=3}else{var P=k._module;if(P||(P=(y.modules[k.type||M.type.dflt]||{})._module),!P)return!1;if(!(L=(E=P.attributes)&&E[D])){var j=P.basePlotModule;j&&j.attributes&&(L=j.attributes[D])}L||(L=M[D])}return f(L,C,N)},se.getLayoutValObject=function(k,C){return f(function(E,L){var D,N,F,I,P=E._basePlotModules;if(P){var j;for(D=0;D<P.length;D++){if((F=P[D]).attrRegex&&F.attrRegex.test(L)){if(F.layoutAttrOverrides)return F.layoutAttrOverrides;!j&&F.layoutAttributes&&(j=F.layoutAttributes)}var V=F.baseLayoutAttrOverrides;if(V&&L in V)return V[L]}if(j)return j}var Z=E._modules;if(Z)for(D=0;D<Z.length;D++)if((I=Z[D].layoutAttributes)&&L in I)return I[L];for(N in y.componentsRegistry){if("colorscale"===(F=y.componentsRegistry[N]).name&&0===L.indexOf("coloraxis"))return F.layoutAttributes[L];if(!F.schema&&L===F.name)return F.layoutAttributes}return L in _&&_[L]}(k,C[0]),C,1)}},{"../lib":503,"../plots/animation_attributes":548,"../plots/attributes":550,"../plots/frame_attributes":586,"../plots/layout_attributes":610,"../registry":638,"./edit_types":536,"./plot_config":541}],543:[function(b,oe,se){"use strict";var y=b("../lib"),x=b("../plots/attributes"),M={name:{valType:"string",editType:"none"}};function _(o){return o&&"string"==typeof o}function e(o){return"s"!==o.charAt(o.length-1)&&y.warn("bad argument to arrayDefaultKey: "+o),o.substr(0,o.length-1)+"defaults"}M.templateitemname={valType:"string",editType:"calc"},se.templatedArray=function(o,a){return a._isLinkedToArray=o,a.name=M.name,a.templateitemname=M.templateitemname,a},se.traceTemplater=function(o){var a,l,i={};for(a in o)l=o[a],Array.isArray(l)&&l.length&&(i[a]=0);return{newTrace:function(v){var h={type:a=y.coerce(v,{},x,"type"),_template:null};if(a in i){var s=i[a]%(l=o[a]).length;i[a]++,h._template=l[s]}return h}}},se.newContainer=function(o,a,l){var i=o._template,v=i&&(i[a]||l&&i[l]);return y.isPlainObject(v)||(v=null),o[a]={_template:v}},se.arrayTemplater=function(o,a,l){var i=o._template,v=i&&i[e(a)],h=i&&i[a];Array.isArray(h)&&h.length||(h=[]);var s={};return{newItem:function(d){var p={name:d.name,_input:d},f=p.templateitemname=d.templateitemname;if(!_(f))return p._template=v,p;for(var g=0;g<h.length;g++){var m=h[g];if(m.name===f)return s[f]=1,p._template=m,p}return p[l]=d[l]||!1,p._template=!1,p},defaultItems:function(){for(var d=[],p=0;p<h.length;p++){var f=h[p],g=f.name;if(_(g)&&!s[g]){var m={_template:f,name:g,_input:{_templateitemname:g}};m.templateitemname=f.templateitemname,d.push(m),s[g]=1}}return d}}},se.arrayDefaultKey=e,se.arrayEditor=function(o,a,l){var i=(y.nestedProperty(o,a).get()||[]).length,v=l._index,h=v>=i&&(l._input||{})._templateitemname;h&&(v=i);var s,d=a+"["+v+"]";function p(){s={},h&&(s[d]={},s[d].templateitemname=h)}function f(m,u){h?y.nestedProperty(s[d],m).set(u):s[d+"."+m]=u}function g(){var m=s;return p(),m}return p(),{modifyBase:function(m,u){s[m]=u},modifyItem:f,getUpdateObj:g,applyUpdate:function(m,u){m&&f(m,u);var w=g();for(var c in w)y.nestedProperty(o,c).set(w[c])}}}},{"../lib":503,"../plots/attributes":550}],544:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../registry"),M=b("../plots/plots"),_=b("../lib"),e=b("../lib/clear_gl_canvases"),o=b("../components/color"),a=b("../components/drawing"),l=b("../components/titles"),i=b("../components/modebar"),v=b("../plots/cartesian/axes"),h=b("../constants/alignment"),s=b("../plots/cartesian/constraints"),d=s.enforce,p=s.clean,f=b("../plots/cartesian/autorange").doAutoRange;function g(C,E,L){for(var D=0;D<L.length;D++){var N=L[D][0],F=L[D][1];if(!(N[0]>=C[1]||N[1]<=C[0])&&F[0]<E[1]&&F[1]>E[0])return!0}return!1}function m(C){var E,L,D,N,F,I,P=C._fullLayout,j=P._size,V=j.p,Z=v.list(C,"",!0);if(P._paperdiv.style({width:C._context.responsive&&P.autosize&&!C._context._hasZeroWidth&&!C.layout.width?"100%":P.width+"px",height:C._context.responsive&&P.autosize&&!C._context._hasZeroHeight&&!C.layout.height?"100%":P.height+"px"}).selectAll(".main-svg").call(a.setSize,P.width,P.height),C._context.setBackground(C,P.paper_bgcolor),se.drawMainTitle(C),i.manage(C),!P._has("cartesian"))return M.previousPromises(C);function Y(nt,ct,bt){var kt=nt._lw/2;return"x"===nt._id.charAt(0)?ct?"top"===bt?ct._offset-V-kt:ct._offset+ct._length+V+kt:j.t+j.h*(1-(nt.position||0))+kt%1:ct?"right"===bt?ct._offset+ct._length+V+kt:ct._offset-V-kt:j.l+j.w*(nt.position||0)+kt%1}for(E=0;E<Z.length;E++){var ee=(N=Z[E])._anchorAxis;N._linepositions={},N._lw=a.crispRound(C,N.linewidth,1),N._mainLinePosition=Y(N,ee,N.side),N._mainMirrorPosition=N.mirror&&ee?Y(N,ee,h.OPPOSITE_SIDE[N.side]):null}var re=[],X=[],K=[],ie=1===o.opacity(P.paper_bgcolor)&&1===o.opacity(P.plot_bgcolor)&&P.paper_bgcolor===P.plot_bgcolor;for(L in P._plots)if((D=P._plots[L]).mainplot)D.bg&&D.bg.remove(),D.bg=void 0;else{var q=D.xaxis.domain,U=D.yaxis.domain,W=D.plotgroup;if(g(q,U,K)){var ae=W.node(),G=D.bg=_.ensureSingle(W,"rect","bg");ae.insertBefore(G.node(),ae.childNodes[0]),X.push(L)}else W.select("rect.bg").remove(),K.push([q,U]),ie||(re.push(L),X.push(L))}var te,ne,le,ue,pe,de,_e,me,we,De,Le,Ie,je,ye=P._bgLayer.selectAll(".bg").data(re);for(ye.enter().append("rect").classed("bg",!0),ye.exit().remove(),ye.each(function(nt){P._plots[nt].bg=y.select(this)}),E=0;E<X.length;E++)F=(D=P._plots[X[E]]).xaxis,I=D.yaxis,D.bg&&void 0!==F._offset&&void 0!==I._offset&&D.bg.call(a.setRect,F._offset-V,I._offset-V,F._length+2*V,I._length+2*V).call(o.fill,P.plot_bgcolor).style("stroke-width",0);if(!P._hasOnlyLargeSploms)for(L in P._plots){F=(D=P._plots[L]).xaxis,I=D.yaxis;var Me,Oe,Pe=D.clipId="clip"+P._uid+L+"plot",Re=_.ensureSingleById(P._clips,"clipPath",Pe,function(nt){nt.classed("plotclip",!0).append("rect")});D.clipRect=Re.select("rect").attr({width:F._length,height:I._length}),a.setTranslate(D.plot,F._offset,I._offset),D._hasClipOnAxisFalse?(Me=null,Oe=Pe):(Me=Pe,Oe=null),a.setClipUrl(D.plot,Me,C),D.layerClipId=Oe}function Ue(nt){return"M"+te+","+nt+"H"+ne}function qe(nt){return"M"+F._offset+","+nt+"h"+F._length}function Xe(nt){return"M"+nt+","+me+"V"+_e}function lt(nt){return"M"+nt+","+I._offset+"v"+I._length}function He(nt,ct,bt){if(!nt.showline||L!==nt._mainSubplot)return"";if(!nt._anchorAxis)return bt(nt._mainLinePosition);var kt=ct(nt._mainLinePosition);return nt.mirror&&(kt+=ct(nt._mainMirrorPosition)),kt}for(L in P._plots){I=(D=P._plots[L]).yaxis;var $e="M0,0";u(F=D.xaxis,L)&&(pe=c(F,"left",I,Z),te=F._offset-(pe?V+pe:0),de=c(F,"right",I,Z),ne=F._offset+F._length+(de?V+de:0),le=Y(F,I,"bottom"),ue=Y(F,I,"top"),!(je=!F._anchorAxis||L!==F._mainSubplot)||"allticks"!==F.mirror&&"all"!==F.mirror||(F._linepositions[L]=[le,ue]),$e=He(F,Ue,qe),je&&F.showline&&("all"===F.mirror||"allticks"===F.mirror)&&($e+=Ue(le)+Ue(ue)),D.xlines.style("stroke-width",F._lw+"px").call(o.stroke,F.showline?F.linecolor:"rgba(0,0,0,0)")),D.xlines.attr("d",$e);var et="M0,0";u(I,L)&&(Le=c(I,"bottom",F,Z),_e=I._offset+I._length+(Le?V:0),Ie=c(I,"top",F,Z),me=I._offset-(Ie?V:0),we=Y(I,F,"left"),De=Y(I,F,"right"),!(je=!I._anchorAxis||L!==I._mainSubplot)||"allticks"!==I.mirror&&"all"!==I.mirror||(I._linepositions[L]=[we,De]),et=He(I,Xe,lt),je&&I.showline&&("all"===I.mirror||"allticks"===I.mirror)&&(et+=Xe(we)+Xe(De)),D.ylines.style("stroke-width",I._lw+"px").call(o.stroke,I.showline?I.linecolor:"rgba(0,0,0,0)")),D.ylines.attr("d",et)}return v.makeClipPaths(C),M.previousPromises(C)}function u(C,E){return(C.ticks||C.showline)&&(E===C._mainSubplot||"all"===C.mirror||"allticks"===C.mirror)}function w(C,E,L){if(!L.showline||!L._lw)return!1;if("all"===L.mirror||"allticks"===L.mirror)return!0;var D=L._anchorAxis;if(!D)return!1;var N=h.FROM_BL[E];return L.side===E?D.domain[N]===C.domain[N]:L.mirror&&D.domain[1-N]===C.domain[1-N]}function c(C,E,L,D){if(w(C,E,L))return L._lw;for(var N=0;N<D.length;N++){var F=D[N];if(F._mainAxis===L._mainAxis&&w(C,E,F))return F._lw}return 0}function A(C,E){var L=C.title,D=C._size,N=0;switch("start"===E?N=L.pad.l:"end"===E&&(N=-L.pad.r),L.xref){case"paper":return D.l+D.w*L.x+N;case"container":default:return C.width*L.x+N}}function k(C,E){var L=C.title,D=C._size,N=0;if("0em"!==E&&E?E===h.CAP_SHIFT+"em"&&(N=L.pad.t):N=-L.pad.b,"auto"===L.y)return D.t/2;switch(L.yref){case"paper":return D.t+D.h-D.h*L.y+N;case"container":default:return C.height-C.height*L.y+N}}se.layoutStyles=function(C){return _.syncOrAsync([M.doAutoMargin,m],C)},se.drawMainTitle=function(C){var F,I,E=C._fullLayout,L=(I="middle",_.isRightAnchor(F=E.title)?I="end":_.isLeftAnchor(F)&&(I="start"),I),D=function(N){var F=N.title,I="0em";return _.isTopAnchor(F)?I=h.CAP_SHIFT+"em":_.isMiddleAnchor(F)&&(I=h.MID_SHIFT+"em"),I}(E);l.draw(C,"gtitle",{propContainer:E,propName:"title.text",placeholder:E._dfltTitle.plot,attributes:{x:A(E,L),y:k(E,D),"text-anchor":L,dy:D}})},se.doTraceStyle=function(C){var E,L=C.calcdata,D=[];for(E=0;E<L.length;E++){var N=L[E],F=N[0]||{},I=F.trace||{},P=I._module||{},j=P.arraysToCalcdata;j&&j(N,I);var V=P.editStyle;V&&D.push({fn:V,cd0:F})}if(D.length){for(E=0;E<D.length;E++){var Z=D[E];Z.fn(C,Z.cd0)}e(C),se.redrawReglTraces(C)}return M.style(C),x.getComponentMethod("legend","draw")(C),M.previousPromises(C)},se.doColorBars=function(C){return x.getComponentMethod("colorbar","draw")(C),M.previousPromises(C)},se.layoutReplot=function(C){var E=C.layout;return C.layout=void 0,x.call("_doPlot",C,"",E)},se.doLegend=function(C){return x.getComponentMethod("legend","draw")(C),M.previousPromises(C)},se.doTicksRelayout=function(C){return v.draw(C,"redraw"),C._fullLayout._hasOnlyLargeSploms&&(x.subplotsRegistry.splom.updateGrid(C),e(C),se.redrawReglTraces(C)),se.drawMainTitle(C),M.previousPromises(C)},se.doModeBar=function(C){var E=C._fullLayout;i.manage(C);for(var L=0;L<E._basePlotModules.length;L++){var D=E._basePlotModules[L].updateFx;D&&D(C)}return M.previousPromises(C)},se.doCamera=function(C){for(var E=C._fullLayout,L=E._subplots.gl3d,D=0;D<L.length;D++){var N=E[L[D]];N._scene.setViewport(N)}},se.drawData=function(C){var E=C._fullLayout;e(C);for(var L=E._basePlotModules,D=0;D<L.length;D++)L[D].plot(C);return se.redrawReglTraces(C),M.style(C),x.getComponentMethod("shapes","draw")(C),x.getComponentMethod("annotations","draw")(C),x.getComponentMethod("images","draw")(C),E._replotting=!1,M.previousPromises(C)},se.redrawReglTraces=function(C){var E=C._fullLayout;if(E._has("regl")){var L,D,N=C._fullData,F=[],I=[];for(E._hasOnlyLargeSploms&&E._splomGrid.draw(),L=0;L<N.length;L++){var P=N[L];!0===P.visible&&0!==P._length&&("splom"===P.type?E._splomScenes[P.uid].draw():"scattergl"===P.type?_.pushUnique(F,P.xaxis+P.yaxis):"scatterpolargl"===P.type&&_.pushUnique(I,P.subplot))}for(L=0;L<F.length;L++)(D=E._plots[F[L]])._scene&&D._scene.draw();for(L=0;L<I.length;L++)(D=E[I[L]]._subplot)._scene&&D._scene.draw()}},se.doAutoRangeAndConstraints=function(C){for(var E,L=v.list(C,"",!0),D={},N=0;N<L.length;N++)if(!D[(E=L[N])._id]){D[E._id]=1,p(C,E),f(C,E);var F=E._matchGroup;if(F)for(var I in F){var P=v.getFromId(C,I);f(C,P,E.range),D[I]=1}}d(C)},se.finalDraw=function(C){x.getComponentMethod("rangeslider","draw")(C),x.getComponentMethod("rangeselector","draw")(C)},se.drawMarginPushers=function(C){x.getComponentMethod("legend","draw")(C),x.getComponentMethod("rangeselector","draw")(C),x.getComponentMethod("sliders","draw")(C),x.getComponentMethod("updatemenus","draw")(C),x.getComponentMethod("colorbar","draw")(C)}},{"../components/color":366,"../components/drawing":388,"../components/modebar":429,"../components/titles":464,"../constants/alignment":471,"../lib":503,"../lib/clear_gl_canvases":487,"../plots/cartesian/autorange":553,"../plots/cartesian/axes":554,"../plots/cartesian/constraints":562,"../plots/plots":619,"../registry":638,"@plotly/d3":58}],545:[function(b,oe,se){"use strict";var y=b("../lib"),x=y.isPlainObject,M=b("./plot_schema"),_=b("../plots/plots"),e=b("../plots/attributes"),o=b("./plot_template"),a=b("./plot_config").dfltConfig;function l(g,m){g=y.extendDeep({},g);var u,w,c=Object.keys(g).sort();function A(D,N,F){if(x(N)&&x(D))l(D,N);else if(Array.isArray(N)&&Array.isArray(D)){var I=o.arrayTemplater({_template:g},F);for(w=0;w<N.length;w++){var P=N[w],j=I.newItem(P)._template;j&&l(j,P)}var V=I.defaultItems();for(w=0;w<V.length;w++)N.push(V[w]._template);for(w=0;w<N.length;w++)delete N[w].templateitemname}}for(u=0;u<c.length;u++){var k=c[u],C=g[k];if(k in m?A(C,m[k],k):m[k]=C,i(k)===k)for(var E in m){var L=i(E);E===L||L!==k||E in g||A(C,m[E],k)}}}function i(g){return g.replace(/[0-9]+$/,"")}function v(g,m,u,w,c){var A=c&&u(c);for(var k in g){var C=g[k],E=d(g,k,w),L=d(g,k,c),D=u(L);if(!D){var N=i(k);N!==k&&(D=u(L=d(g,N,c)))}if(!(A&&A===D||!D||D._noTemplating||"data_array"===D.valType||D.arrayOk&&Array.isArray(C)))if(!D.valType&&x(C))v(C,m,u,E,L);else if(D._isLinkedToArray&&Array.isArray(C))for(var F=!1,I=0,P={},j=0;j<C.length;j++){var V=C[j];if(x(V)){var Z=V.name;if(Z)P[Z]||(v(V,m,u,d(C,I,E),d(C,I,L)),I++,P[Z]=1);else if(!F){var Y=d(g,o.arrayDefaultKey(k),w),ee=d(C,I,E);v(V,m,u,ee,d(C,I,L));var re=y.nestedProperty(m,ee);y.nestedProperty(m,Y).set(re.get()),re.set(null),F=!0}}}else y.nestedProperty(m,E).set(C)}}function h(g,m){return M.getLayoutValObject(g,y.nestedProperty({},m).parts)}function s(g,m){return M.getTraceValObject(g,y.nestedProperty({},m).parts)}function d(g,m,u){return u?Array.isArray(g)?u+"["+m+"]":u+"."+m:m}function p(g){for(var m=0;m<g.length;m++)if(x(g[m]))return!0}function f(g){var m;switch(g.code){case"data":m="The template has no key data.";break;case"layout":m="The template has no key layout.";break;case"missing":m=g.path?"There are no templates for item "+g.path+" with name "+g.templateitemname:"There are no templates for trace "+g.index+", of type "+g.traceType+".";break;case"unused":m=g.path?"The template item at "+g.path+" was not used in constructing the plot.":g.dataCount?"Some of the templates of type "+g.traceType+" were not used. The template has "+g.templateCount+" traces, the data only has "+g.dataCount+" of this type.":"The template has "+g.templateCount+" traces of type "+g.traceType+" but there are none in the data.";break;case"reused":m="Some of the templates of type "+g.traceType+" were used more than once. The template has "+g.templateCount+" traces, the data has "+g.dataCount+" of this type."}return g.msg=m,g}se.makeTemplate=function(g){g=y.isPlainObject(g)?g:y.getGraphDiv(g),g=y.extendDeep({_context:a},{data:g.data,layout:g.layout}),_.supplyDefaults(g);var m=g.data||[],u=g.layout||{};u._basePlotModules=g._fullLayout._basePlotModules,u._modules=g._fullLayout._modules;var w={data:{},layout:{}};m.forEach(function(I){var P={};v(I,P,s.bind(null,I));var j=y.coerce(I,{},e,"type"),V=w.data[j];V||(V=w.data[j]=[]),V.push(P)}),v(u,w.layout,h.bind(null,u)),delete w.layout.template;var c=u.template;if(x(c)){var A,k,C,E,L,D,N=c.layout;x(N)&&l(N,w.layout);var F=c.data;if(x(F)){for(k in w.data)if(C=F[k],Array.isArray(C)){for(D=(L=w.data[k]).length,E=C.length,A=0;A<D;A++)l(C[A%E],L[A]);for(A=D;A<E;A++)L.push(y.extendDeep({},C[A]))}for(k in F)k in w.data||(w.data[k]=y.extendDeep([],F[k]))}}return w},se.validateTemplate=function(g,m){var u=y.extendDeep({},{_context:a,data:g.data,layout:g.layout}),w=u.layout||{};x(m)||(m=w.template||{});var c=m.layout,A=m.data,k=[];u.layout=w,u.layout.template=m,_.supplyDefaults(u);var C=u._fullLayout,E=u._fullData,L={};if(x(c)?(function V(Z,Y){for(var ee in Z)if("_"!==ee.charAt(0)&&x(Z[ee])){var re,X=i(ee),K=[];for(re=0;re<Y.length;re++)K.push(d(Z,ee,Y[re])),X!==ee&&K.push(d(Z,X,Y[re]));for(re=0;re<K.length;re++)L[K[re]]=1;V(Z[ee],K)}}(C,["layout"]),function V(Z,Y){for(var ee in Z)if(-1===ee.indexOf("defaults")&&x(Z[ee])){var re=d(Z,ee,Y);L[re]?V(Z[ee],re):k.push({code:"unused",path:re})}}(c,"layout")):k.push({code:"layout"}),x(A)){for(var D,N={},F=0;F<E.length;F++){var I=E[F];N[D=I.type]=(N[D]||0)+1,I._fullInput._template||k.push({code:"missing",index:I._fullInput.index,traceType:D})}for(D in A){var P=A[D].length,j=N[D]||0;P>j?k.push({code:"unused",traceType:D,templateCount:P,dataCount:j}):j>P&&k.push({code:"reused",traceType:D,templateCount:P,dataCount:j})}}else k.push({code:"data"});if(function V(Z,Y){for(var ee in Z)if("_"!==ee.charAt(0)){var re=Z[ee],X=d(Z,ee,Y);x(re)?(Array.isArray(Z)&&!1===re._template&&re.templateitemname&&k.push({code:"missing",path:X,templateitemname:re.templateitemname}),V(re,X)):Array.isArray(re)&&p(re)&&V(re,X)}}({data:E,layout:C},""),k.length)return k.map(f)}},{"../lib":503,"../plots/attributes":550,"../plots/plots":619,"./plot_config":541,"./plot_schema":542,"./plot_template":543}],546:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("./plot_api"),M=b("../plots/plots"),_=b("../lib"),e=b("../snapshot/helpers"),o=b("../snapshot/tosvg"),a=b("../snapshot/svgtoimg"),l=b("../version").version,i={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};oe.exports=function(v,h){var s,d,p,f;function g(j){return!(j in h)||_.validate(h[j],i[j])}if(h=h||{},_.isPlainObject(v)?(s=v.data||[],d=v.layout||{},p=v.config||{},f={}):(v=_.getGraphDiv(v),s=_.extendDeep([],v.data),d=_.extendDeep({},v.layout),p=v._context,f=v._fullLayout||{}),!g("width")&&null!==h.width||!g("height")&&null!==h.height)throw new Error("Height and width should be pixel values.");if(!g("format"))throw new Error("Export format is not "+_.join2(i.format.values,", "," or ")+".");var m={};function u(j,V){return _.coerce(h,m,i,j,V)}var w=u("format"),c=u("width"),A=u("height"),k=u("scale"),C=u("setBackground"),E=u("imageDataOnly"),L=document.createElement("div");L.style.position="absolute",L.style.left="-5000px",document.body.appendChild(L);var D=_.extendFlat({},d);c?D.width=c:null===h.width&&y(f.width)&&(D.width=f.width),A?D.height=A:null===h.height&&y(f.height)&&(D.height=f.height);var N=_.extendFlat({},p,{_exportedPlot:!0,staticPlot:!0,setBackground:C}),F=e.getRedrawFunc(L);function I(){return new Promise(function(j){setTimeout(j,e.getDelay(L._fullLayout))})}function P(){return new Promise(function(j,V){var Z=o(L,w,k),Y=L._fullLayout.width,ee=L._fullLayout.height;function re(){x.purge(L),document.body.removeChild(L)}if("full-json"===w){var X=M.graphJson(L,!1,"keepdata","object",!0,!0);return X.version=l,X=JSON.stringify(X),re(),j(E?X:e.encodeJSON(X))}if(re(),"svg"===w)return j(E?Z:e.encodeSVG(Z));var K=document.createElement("canvas");K.id=_.randstr(),a({format:w,width:Y,height:ee,scale:k,canvas:K,svg:Z,promise:!0}).then(j).catch(V)})}return new Promise(function(j,V){x.newPlot(L,s,D,N).then(F).then(I).then(P).then(function(Z){var Y;j((Y=Z,E?Y.replace(e.IMAGE_URL_PREFIX,""):Y))}).catch(function(Z){V(Z)})})}},{"../lib":503,"../plots/plots":619,"../snapshot/helpers":642,"../snapshot/svgtoimg":644,"../snapshot/tosvg":646,"../version":1123,"./plot_api":540,"fast-isnumeric":190}],547:[function(b,oe,se){"use strict";var y=b("../lib"),x=b("../plots/plots"),M=b("./plot_schema"),_=b("./plot_config").dfltConfig,e=y.isPlainObject,o=Array.isArray,a=y.isArrayOrTypedArray;function l(m,u,w,c,A,k){k=k||[];for(var C=Object.keys(m),E=0;E<C.length;E++){var L=C[E];if("transforms"!==L){var D=k.slice();D.push(L);var N=m[L],F=u[L],I=p(w,L),P=(I||{}).valType,j="info_array"===P,V="colorscale"===P,Z=(I||{}).items;if(d(w,L))if(e(N)&&e(F)&&"any"!==P)l(N,F,I,c,A,D);else if(j&&o(N)){N.length>F.length&&c.push(s("unused",A,D.concat(F.length)));var Y,ee,X,K,ie=F.length,q=Array.isArray(Z);if(q&&(ie=Math.min(ie,Z.length)),2===I.dimensions)for(ee=0;ee<ie;ee++)if(o(N[ee])){N[ee].length>F[ee].length&&c.push(s("unused",A,D.concat(ee,F[ee].length)));var U=F[ee].length;for(Y=0;Y<(q?Math.min(U,Z[ee].length):U);Y++)K=F[ee][Y],y.validate(X=N[ee][Y],q?Z[ee][Y]:Z)?K!==X&&K!==+X&&c.push(s("dynamic",A,D.concat(ee,Y),X,K)):c.push(s("value",A,D.concat(ee,Y),X))}else c.push(s("array",A,D.concat(ee),N[ee]));else for(ee=0;ee<ie;ee++)K=F[ee],y.validate(X=N[ee],q?Z[ee]:Z)?K!==X&&K!==+X&&c.push(s("dynamic",A,D.concat(ee),X,K)):c.push(s("value",A,D.concat(ee),X))}else if(I.items&&!j&&o(N)){var W,ae,G=Z[Object.keys(Z)[0]],te=[];for(W=0;W<F.length;W++){var ne=F[W]._index||W;if((ae=D.slice()).push(ne),e(N[ne])&&e(F[W])){te.push(ne);var le=N[ne],ue=F[W];e(le)&&!1!==le.visible&&!1===ue.visible?c.push(s("invisible",A,ae)):l(le,ue,G,c,A,ae)}}for(W=0;W<N.length;W++)(ae=D.slice()).push(W),e(N[W])?-1===te.indexOf(W)&&c.push(s("unused",A,ae)):c.push(s("object",A,ae,N[W]))}else!e(N)&&e(F)?c.push(s("object",A,D,N)):a(N)||!a(F)||j||V?L in u?y.validate(N,I)?"enumerated"===I.valType&&(I.coerceNumber&&N!==+F||N!==F)&&c.push(s("dynamic",A,D,N,F)):c.push(s("value",A,D,N)):c.push(s("unused",A,D,N)):c.push(s("array",A,D,N));else c.push(s("schema",A,D))}}return c}function i(m,u){for(var w=m.layout.layoutAttributes,c=0;c<u.length;c++){var A=u[c],k=m.traces[A.type],C=k.layoutAttributes;C&&y.extendFlat(A.subplot?w[k.attributes.subplot.dflt]:w,C)}return w}oe.exports=function(m,u){void 0===m&&(m=[]),void 0===u&&(u={});var w,c,A=M.get(),k=[],C={_context:y.extendFlat({},_)};o(m)?(C.data=y.extendDeep([],m),w=m):(C.data=[],w=[],k.push(s("array","data"))),e(u)?(C.layout=y.extendDeep({},u),c=u):(C.layout={},c={},arguments.length>1&&k.push(s("object","layout"))),x.supplyDefaults(C);for(var E=C._fullData,L=w.length,D=0;D<L;D++){var N=w[D],F=["data",D];if(e(N)){var I=E[D],P=I.type,j=A.traces[P].attributes;j.type={valType:"enumerated",values:[P]},!1===I.visible&&!1!==N.visible&&k.push(s("invisible",F)),l(N,I,j,k,F);var V=N.transforms,Z=I.transforms;if(V){o(V)||k.push(s("array",F,["transforms"])),F.push("transforms");for(var Y=0;Y<V.length;Y++){var ee=["transforms",Y],re=V[Y].type;if(e(V[Y])){var X=A.transforms[re]?A.transforms[re].attributes:{};X.type={valType:"enumerated",values:Object.keys(A.transforms)},l(V[Y],Z[Y],X,k,F,ee)}else k.push(s("object",F,ee))}}}else k.push(s("object",F))}return l(c,C._fullLayout,i(A,E),k,"layout"),0===k.length?void 0:k};var v={object:function(m,u){return("layout"===m&&""===u?"The layout argument":"data"===m[0]&&""===u?"Trace "+m[1]+" in the data argument":h(m)+"key "+u)+" must be linked to an object container"},array:function(m,u){return("data"===m?"The data argument":h(m)+"key "+u)+" must be linked to an array container"},schema:function(m,u){return h(m)+"key "+u+" is not part of the schema"},unused:function(m,u,w){var c=e(w)?"container":"key";return h(m)+c+" "+u+" did not get coerced"},dynamic:function(m,u,w,c){return[h(m)+"key",u,"(set to '"+w+"')","got reset to","'"+c+"'","during defaults."].join(" ")},invisible:function(m,u){return(u?h(m)+"item "+u:"Trace "+m[1])+" got defaulted to be not visible"},value:function(m,u,w){return[h(m)+"key "+u,"is set to an invalid value ("+w+")"].join(" ")}};function h(m){return o(m)?"In data trace "+m[1]+", ":"In "+m+", "}function s(m,u,w,c,A){var k,C;w=w||"",o(u)?(k=u[0],C=u[1]):(k=u,C=null);var E=function(D){if(!o(D))return String(D);for(var N="",F=0;F<D.length;F++){var I=D[F];"number"==typeof I?N=N.substr(0,N.length-1)+"["+I+"]":N+=I,F<D.length-1&&(N+=".")}return N}(w),L=v[m](u,E,c,A);return y.log(L),{code:m,container:k,trace:C,path:w,astr:E,msg:L}}function d(m,u){var w=g(u),c=w.keyMinusId;return!!(c in m&&m[c]._isSubplotObj&&w.id)||u in m}function p(m,u){return u in m?m[u]:m[g(u).keyMinusId]}var f=y.counterRegex("([a-z]+)");function g(m){var u=m.match(f);return{keyMinusId:u&&u[1],id:u&&u[2]}}},{"../lib":503,"../plots/plots":619,"./plot_config":541,"./plot_schema":542}],548:[function(b,oe,se){"use strict";oe.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],549:[function(b,oe,se){"use strict";var y=b("../lib"),x=b("../plot_api/plot_template");oe.exports=function(M,_,e){var o,a,l=e.name,i=e.inclusionAttr||"visible",v=_[l],h=y.isArrayOrTypedArray(M[l])?M[l]:[],s=_[l]=[],d=x.arrayTemplater(_,l,i);for(o=0;o<h.length;o++){var p=h[o];y.isPlainObject(p)?a=d.newItem(p):(a=d.newItem({}))[i]=!1,a._index=o,!1!==a[i]&&e.handleItemDefaults(p,a,_,e),s.push(a)}var f=d.defaultItems();for(o=0;o<f.length;o++)(a=f[o])._index=s.length,e.handleItemDefaults({},a,_,e,{}),s.push(a);if(y.isArrayOrTypedArray(v)){var g=Math.min(v.length,s.length);for(o=0;o<g;o++)y.relinkPrivateKeys(s[o],v[o])}return s}},{"../lib":503,"../plot_api/plot_template":543}],550:[function(b,oe,se){"use strict";var y=b("./font_attributes"),x=b("../components/fx/attributes");oe.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:y({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:x.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":397,"./font_attributes":585}],551:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../lib"),M=x.dateTime2ms,_=x.incrementMonth,e=b("../../constants/numerical").ONEAVGMONTH;oe.exports=function(o,a,l,i){if("date"!==a.type)return{vals:i};var v=o[l+"periodalignment"];if(!v)return{vals:i};var h,s=o[l+"period"];if(y(s)){if((s=+s)<=0)return{vals:i}}else if("string"==typeof s&&"M"===s.charAt(0)){var d=+s.substring(1);if(!(d>0&&Math.round(d)===d))return{vals:i};h=d}for(var p=a.calendar,f="start"===v,g="end"===v,u=M(o[l+"period0"],p)||0,w=[],c=[],A=[],k=i.length,C=0;C<k;C++){var E,L,D,N=i[C];if(h){for(E=Math.round((N-u)/(h*e)),D=_(u,h*E,p);D>N;)D=_(D,-h,p);for(;D<=N;)D=_(D,h,p);L=_(D,-h,p)}else{for(D=u+(E=Math.round((N-u)/s))*s;D>N;)D-=s;for(;D<=N;)D+=s;L=D-s}w[C]=f?L:g?D:(L+D)/2,c[C]=L,A[C]=D}return{vals:w,starts:c,ends:A}}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],552:[function(b,oe,se){"use strict";oe.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],553:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("fast-isnumeric"),M=b("../../lib"),_=b("../../constants/numerical").FP_SAFE,e=b("../../registry"),o=b("../../components/drawing"),a=b("./axis_ids"),l=a.getFromId,i=a.isLinked;function v(c,A){var k,C,E=[],L=c._fullLayout,D=s(L,A,0),N=s(L,A,1),F=d(c,A),I=F.min,P=F.max;if(0===I.length||0===P.length)return M.simpleMap(A.range,A.r2l);var j=I[0].val,V=P[0].val;for(k=1;k<I.length&&j===V;k++)j=Math.min(j,I[k].val);for(k=1;k<P.length&&j===V;k++)V=Math.max(V,P[k].val);var Z=!1;if(A.range){var Y=M.simpleMap(A.range,A.r2l);Z=Y[1]<Y[0]}"reversed"===A.autorange&&(Z=!0,A.autorange=!0);var ee,re,X,K,ie,q,U=A.rangemode,W="tozero"===U,ae="nonnegative"===U,G=A._length,te=G/10,ne=0;for(k=0;k<I.length;k++)for(ee=I[k],C=0;C<P.length;C++)(q=(re=P[C]).val-ee.val-h(A,ee.val,re.val))>0&&((ie=G-D(ee)-N(re))>te?q/ie>ne&&(X=ee,K=re,ne=q/ie):q/G>ne&&(X={val:ee.val,nopad:1},K={val:re.val,nopad:1},ne=q/G));if(j===V){var le=j-1,ue=j+1;if(W)if(0===j)E=[0,1];else{var pe=(j>0?P:I).reduce(function(_e,me){return Math.max(_e,N(me))},0),de=j/(1-Math.min(.5,pe/G));E=j>0?[0,de]:[de,0]}else E=ae?[Math.max(0,le),Math.max(1,ue)]:[le,ue]}else W?(X.val>=0&&(X={val:0,nopad:1}),K.val<=0&&(K={val:0,nopad:1})):ae&&(X.val-ne*D(X)<0&&(X={val:0,nopad:1}),K.val<=0&&(K={val:1,nopad:1})),ne=(K.val-X.val-h(A,ee.val,re.val))/(G-D(X)-N(K)),E=[X.val-ne*D(X),K.val+ne*N(K)];return Z&&E.reverse(),M.simpleMap(E,A.l2r||Number)}function h(c,A,k){var C=0;if(c.rangebreaks)for(var E=c.locateBreaks(A,k),L=0;L<E.length;L++){var D=E[L];C+=D.max-D.min}return C}function s(c,A,k){var C=.05*A._length,E=A._anchorAxis||{};if(-1!==(A.ticklabelposition||"").indexOf("inside")||-1!==(E.ticklabelposition||"").indexOf("inside")){var L="reversed"===A.autorange;if(!L){var D=M.simpleMap(A.range,A.r2l);L=D[1]<D[0]}L&&(k=!k)}var N=0;return i(c,A._id)||(N=function(F,I,P){var j=0,V="x"===I._id.charAt(0);for(var Z in F._plots){var Y=F._plots[Z];if(I._id===Y.xaxis._id||I._id===Y.yaxis._id){var ee=(V?Y.yaxis:Y.xaxis)||{};if(-1!==(ee.ticklabelposition||"").indexOf("inside")&&(!P&&("left"===ee.side||"bottom"===ee.side)||P&&("top"===ee.side||"right"===ee.side))){if(ee._vals){var re=M.deg2rad(ee._tickAngles[ee._id+"tick"]||0),X=Math.abs(Math.cos(re)),K=Math.abs(Math.sin(re));ee._vals[0].bb||ee._selections[ee._id+"tick"].each(function(G){var te=y.select(this);te.select(".text-math-group").empty()&&(G.bb=o.bBox(te.node()))});for(var q=0;q<ee._vals.length;q++){var U=ee._vals[q].bb;if(U){var W=6+U.width,ae=6+U.height;j=Math.max(j,V?Math.max(W*X,ae*K):Math.max(ae*X,W*K))}}}"inside"===ee.ticks&&"inside"===ee.ticklabelposition&&(j+=ee.ticklen||0)}}}return j}(c,A,k)),C=Math.max(N,C),"domain"===A.constrain&&A._inputDomain&&(C*=(A._inputDomain[1]-A._inputDomain[0])/(A.domain[1]-A.domain[0])),function(F){return F.nopad?0:F.pad+(F.extrapad?C:N)}}function d(c,A,k){var C,E,L,D=A._id,F=c._fullLayout,I=[],P=[];function j(re,X){for(C=0;C<X.length;C++){var K=re[X[C]],ie=(K._extremes||{})[D];if(!0===K.visible&&ie){for(E=0;E<ie.min.length;E++)p(I,(L=ie.min[E]).val,L.pad,{extrapad:L.extrapad});for(E=0;E<ie.max.length;E++)f(P,(L=ie.max[E]).val,L.pad,{extrapad:L.extrapad})}}}if(j(c._fullData,A._traceIndices),j(F.annotations||[],A._annIndices||[]),j(F.shapes||[],A._shapeIndices||[]),A._matchGroup&&!k)for(var V in A._matchGroup)if(V!==A._id){var Z=l(c,V),Y=d(c,Z,!0),ee=A._length/Z._length;for(E=0;E<Y.min.length;E++)p(I,(L=Y.min[E]).val,L.pad*ee,{extrapad:L.extrapad});for(E=0;E<Y.max.length;E++)f(P,(L=Y.max[E]).val,L.pad*ee,{extrapad:L.extrapad})}return{min:I,max:P}}function p(c,A,k,C){g(c,A,k,C,u)}function f(c,A,k,C){g(c,A,k,C,w)}function g(c,A,k,C,E){for(var L=C.tozero,D=C.extrapad,N=!0,F=0;F<c.length&&N;F++){var I=c[F];if(E(I.val,A)&&I.pad>=k&&(I.extrapad||!D)){N=!1;break}E(A,I.val)&&I.pad<=k&&(D||!I.extrapad)&&(c.splice(F,1),F--)}if(N){var P=L&&0===A;c.push({val:A,pad:P?0:k,extrapad:!P&&D})}}function m(c){return x(c)&&Math.abs(c)<_}function u(c,A){return c<=A}function w(c,A){return c>=A}oe.exports={getAutoRange:v,makePadFn:s,doAutoRange:function(c,A,k){if(A.setScale(),A.autorange){A.range=k?k.slice():v(c,A),A._r=A.range.slice(),A._rl=M.simpleMap(A._r,A.r2l);var C=A._input,E={};E[A._attr+".range"]=A.range,E[A._attr+".autorange"]=A.autorange,e.call("_storeDirectGUIEdit",c.layout,c._fullLayout._preGUI,E),C.range=A.range.slice(),C.autorange=A.autorange}var L=A._anchorAxis;if(L&&L.rangeslider){var D=L.rangeslider[A._name];D&&"auto"===D.rangemode&&(D.range=v(c,A)),L._input.rangeslider[A._name]=M.extendFlat({},D)}},findExtremes:function(c,A,k){k||(k={}),c._m||c.setScale();var C,E,L,D,N,F,I,P,j,V=[],Z=[],Y=A.length,ee=k.padded||!1,re=k.tozero&&("linear"===c.type||"-"===c.type),X="log"===c.type,K=!1,ie=k.vpadLinearized||!1;function q(ue){if(Array.isArray(ue))return K=!0,function(de){return Math.max(Number(ue[de]||0),0)};var pe=Math.max(Number(ue||0),0);return function(){return pe}}var U=q((c._m>0?k.ppadplus:k.ppadminus)||k.ppad||0),W=q((c._m>0?k.ppadminus:k.ppadplus)||k.ppad||0),ae=q(k.vpadplus||k.vpad),G=q(k.vpadminus||k.vpad);if(!K){if(P=1/0,j=-1/0,X)for(C=0;C<Y;C++)(E=A[C])<P&&E>0&&(P=E),E>j&&E<_&&(j=E);else for(C=0;C<Y;C++)(E=A[C])<P&&E>-_&&(P=E),E>j&&E<_&&(j=E);A=[P,j],Y=2}var te={tozero:re,extrapad:ee};function ne(ue){x(L=A[ue])&&(F=U(ue),I=W(ue),ie?(D=c.c2l(L)-G(ue),N=c.c2l(L)+ae(ue)):(P=L-G(ue),j=L+ae(ue),X&&P<j/10&&(P=j/10),D=c.c2l(P),N=c.c2l(j)),re&&(D=Math.min(0,D),N=Math.max(0,N)),m(D)&&p(V,D,I,te),m(N)&&f(Z,N,F,te))}var le=Math.min(6,Y);for(C=0;C<le;C++)ne(C);for(C=Y-1;C>=le;C--)ne(C);return{min:V,max:Z,opts:k}},concatExtremes:d}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../../registry":638,"./axis_ids":558,"@plotly/d3":58,"fast-isnumeric":190}],554:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("fast-isnumeric"),M=b("../../plots/plots"),_=b("../../registry"),e=b("../../lib"),o=e.strTranslate,a=b("../../lib/svg_text_utils"),l=b("../../components/titles"),i=b("../../components/color"),v=b("../../components/drawing"),h=b("./layout_attributes"),s=b("./clean_ticks"),d=b("../../constants/numerical"),p=d.ONEMAXYEAR,f=d.ONEAVGYEAR,g=d.ONEMINYEAR,m=d.ONEMAXQUARTER,u=d.ONEAVGQUARTER,w=d.ONEMINQUARTER,c=d.ONEMAXMONTH,A=d.ONEAVGMONTH,k=d.ONEMINMONTH,C=d.ONEWEEK,E=d.ONEDAY,L=E/2,D=d.ONEHOUR,N=d.ONEMIN,F=d.ONESEC,I=d.MINUS_SIGN,P=d.BADNUM,j={K:"zeroline"},V={K:"gridline",L:"path"},Z={K:"minor-gridline",L:"path"},Y={K:"tick",L:"path"},ee={K:"tick",L:"text"},re=b("../../constants/alignment"),X=re.MID_SHIFT,K=re.CAP_SHIFT,ie=re.LINE_SPACING,q=re.OPPOSITE_SIDE,U=oe.exports={};U.setConvert=b("./set_convert");var W=b("./axis_autotype"),ae=b("./axis_ids"),G=ae.idSort,te=ae.isLinked;U.id2name=ae.id2name,U.name2id=ae.name2id,U.cleanId=ae.cleanId,U.list=ae.list,U.listIds=ae.listIds,U.getFromId=ae.getFromId,U.getFromTrace=ae.getFromTrace;var ne=b("./autorange");function le(ke){var Se=1e-4*(ke[1]-ke[0]);return[ke[0]-Se,ke[1]+Se]}U.getAutoRange=ne.getAutoRange,U.findExtremes=ne.findExtremes,U.coerceRef=function(ke,Se,Ce,Ve,Ge,Qe){var ot=Ve.charAt(Ve.length-1),it=Ce._fullLayout._subplots[ot+"axis"],mt=Ve+"ref",xt={};return Ge||(Ge=it[0]||("string"==typeof Qe?Qe:Qe[0])),Qe||(Qe=Ge),it=it.concat(it.map(function(Vt){return Vt+" domain"})),xt[mt]={valType:"enumerated",values:it.concat(Qe?"string"==typeof Qe?[Qe]:Qe:[]),dflt:Ge},e.coerce(ke,Se,xt,mt)},U.getRefType=function(ke){return void 0===ke?ke:"paper"===ke?"paper":"pixel"===ke?"pixel":/( domain)$/.test(ke)?"domain":"range"},U.coercePosition=function(ke,Se,Ce,Ve,Ge,Qe){var ot,it;if("range"!==U.getRefType(Ve))ot=e.ensureNumber,it=Ce(Ge,Qe);else{var mt=U.getFromId(Se,Ve);it=Ce(Ge,Qe=mt.fraction2r(Qe)),ot=mt.cleanPos}ke[Ge]=ot(it)},U.cleanPosition=function(ke,Se,Ce){return("paper"===Ce||"pixel"===Ce?e.ensureNumber:U.getFromId(Se,Ce).cleanPos)(ke)},U.redrawComponents=function(ke,Se){Se=Se||U.listIds(ke);var Ce=ke._fullLayout;function Ve(Ge,Qe,ot,it){for(var mt=_.getComponentMethod(Ge,Qe),xt={},Vt=0;Vt<Se.length;Vt++)for(var $t=Ce[U.id2name(Se[Vt])][ot],pt=0;pt<$t.length;pt++){var At=$t[pt];if(!xt[At]&&(mt(ke,At),xt[At]=1,it))return}}Ve("annotations","drawOne","_annIndices"),Ve("shapes","drawOne","_shapeIndices"),Ve("images","draw","_imgIndices",!0)};var ue=U.getDataConversions=function(ke,Se,Ce,Ve){var Ge,Qe="x"===Ce||"y"===Ce||"z"===Ce?Ce:Ve;if(Array.isArray(Qe)){if(Ge={type:W(Ve,void 0,{autotypenumbers:ke._fullLayout.autotypenumbers}),_categories:[]},U.setConvert(Ge),"category"===Ge.type)for(var ot=0;ot<Ve.length;ot++)Ge.d2c(Ve[ot])}else Ge=U.getFromTrace(ke,Se,Qe);return Ge?{d2c:Ge.d2c,c2d:Ge.c2d}:"ids"===Qe?{d2c:de,c2d:de}:{d2c:pe,c2d:pe}};function pe(ke){return+ke}function de(ke){return String(ke)}function _e(ke,Se){return Math.abs((ke/Se+.5)%1-.5)<.001}function me(ke,Se){return Math.abs(ke/Se-1)<.001}function we(ke){return+ke.substring(1)}function De(ke){var Se=le(e.simpleMap(ke.range,ke.r2l)),Ce=Math.min(Se[0],Se[1]),Ve=Math.max(Se[0],Se[1]),Ge="category"===ke.type?ke.d2l_noadd:ke.d2l;"log"===ke.type&&"L"!==String(ke.dtick).charAt(0)&&(ke.dtick="L"+Math.pow(10,Math.floor(Math.min(ke.range[0],ke.range[1]))-1));for(var Qe=[],ot=0;ot<=1;ot++)if(!ot||ke.minor){var it=ot?ke.minor.tickvals:ke.tickvals,mt=ot?[]:ke.ticktext;if(it){Array.isArray(mt)||(mt=[]);for(var xt=0;xt<it.length;xt++){var Vt=Ge(it[xt]);if(Vt>Ce&&Vt<Ve){var $t=void 0===mt[xt]?U.tickText(ke,Vt):qe(ke,Vt,String(mt[xt]));ot&&($t.minor=!0,$t.text=""),Qe.push($t)}}}}return ke.rangebreaks&&(Qe=Qe.filter(function(pt){return ke.maskBreaks(pt.x)!==P})),Qe}U.getDataToCoordFunc=function(ke,Se,Ce,Ve){return ue(ke,Se,Ce,Ve).d2c},U.counterLetter=function(ke){var Se=ke.charAt(0);return"x"===Se?"y":"y"===Se?"x":void 0},U.minDtick=function(ke,Se,Ce,Ve){-1===["log","category","multicategory"].indexOf(ke.type)&&Ve?void 0===ke._minDtick?(ke._minDtick=Se,ke._forceTick0=Ce):ke._minDtick&&((ke._minDtick/Se+1e-6)%1<2e-6&&((Ce-ke._forceTick0)/Se%1+1.000001)%1<2e-6?(ke._minDtick=Se,ke._forceTick0=Ce):((Se/ke._minDtick+1e-6)%1>2e-6||((Ce-ke._forceTick0)/ke._minDtick%1+1.000001)%1>2e-6)&&(ke._minDtick=0)):ke._minDtick=0},U.saveRangeInitial=function(ke,Se){for(var Ce=U.list(ke,"",!0),Ve=!1,Ge=0;Ge<Ce.length;Ge++){var Qe=Ce[Ge],ot=void 0===Qe._rangeInitial;(ot&&!1===Qe.autorange||Se&&(ot||Qe.range[0]!==Qe._rangeInitial[0]||Qe.range[1]!==Qe._rangeInitial[1]))&&(Qe._rangeInitial=Qe.range.slice(),Ve=!0)}return Ve},U.saveShowSpikeInitial=function(ke,Se){for(var Ce=U.list(ke,"",!0),Ve=!1,Ge="on",Qe=0;Qe<Ce.length;Qe++){var ot=Ce[Qe],it=void 0===ot._showSpikeInitial;(it||Se&&(it||ot.showspikes!==ot._showspikes))&&(ot._showSpikeInitial=ot.showspikes,Ve=!0),"on"!==Ge||ot.showspikes||(Ge="off")}return ke._fullLayout._cartesianSpikesEnabled=Ge,Ve},U.autoBin=function(ke,Se,Ce,Ve,Ge,Qe){var ot,it=e.aggNums(Math.min,null,ke),mt=e.aggNums(Math.max,null,ke);if("category"===Se.type||"multicategory"===Se.type)return{start:it-.5,end:mt+.5,size:Math.max(1,Math.round(Qe)||1),_dataSpan:mt-it};if(Ge||(Ge=Se.calendar),ot="log"===Se.type?{type:"linear",range:[it,mt]}:{type:Se.type,range:e.simpleMap([it,mt],Se.c2r,0,Ge),calendar:Ge},U.setConvert(ot),Qe=Qe&&s.dtick(Qe,ot.type))ot.dtick=Qe,ot.tick0=s.tick0(void 0,ot.type,Ge);else{var xt;if(Ce)xt=(mt-it)/Ce;else{var Vt=e.distinctVals(ke),$t=Math.pow(10,Math.floor(Math.log(Vt.minDiff)/Math.LN10)),pt=$t*e.roundUp(Vt.minDiff/$t,[.9,1.9,4.9,9.9],!0);xt=Math.max(pt,2*e.stdev(ke)/Math.pow(ke.length,Ve?.25:.4)),x(xt)||(xt=1)}U.autoTicks(ot,xt)}var At,Xt=ot.dtick,Ct=U.tickIncrement(U.tickFirst(ot),Xt,"reverse",Ge);if("number"==typeof Xt)At=(Ct=function(Pt,Be,tt,dt,Dt){var Nt=0,Yt=0,fn=0,nn=0;function In(pn){return(1+100*(pn-Pt)/tt.dtick)%100<2}for(var Dn=0;Dn<Be.length;Dn++)Be[Dn]%1==0?fn++:x(Be[Dn])||nn++,In(Be[Dn])&&Nt++,In(Be[Dn]+tt.dtick/2)&&Yt++;var kn=Be.length-nn;if(fn===kn&&"date"!==tt.type)tt.dtick<1?Pt=dt-.5*tt.dtick:(Pt-=.5)+tt.dtick<dt&&(Pt+=tt.dtick);else if(Yt<.1*kn&&(Nt>.3*kn||In(dt)||In(Dt))){var rn=tt.dtick/2;Pt+=Pt+rn<dt?rn:-rn}return Pt}(Ct,ke,ot,it,mt))+(1+Math.floor((mt-Ct)/Xt))*Xt;else for("M"===ot.dtick.charAt(0)&&(Ct=function(Pt,Be,tt,dt,Dt){var Nt=e.findExactDates(Be,Dt);if(Nt.exactDays>.8){var Yt=Number(tt.substr(1));Nt.exactYears>.8&&Yt%12==0?Pt=U.tickIncrement(Pt,"M6","reverse")+1.5*E:Nt.exactMonths>.8?Pt=U.tickIncrement(Pt,"M1","reverse")+15.5*E:Pt-=L;var fn=U.tickIncrement(Pt,tt);if(fn<=dt)return fn}return Pt}(Ct,ke,Xt,it,Ge)),At=Ct;At<=mt;)At=U.tickIncrement(At,Xt,!1,Ge);return{start:Se.c2r(Ct,0,Ge),end:Se.c2r(At,0,Ge),size:Xt,_dataSpan:mt-it}},U.prepMinorTicks=function(ke,Se,Ce){if(!Se.minor.dtick){delete ke.dtick;var Ve,Ge=Se.dtick&&x(Se._tmin);if(Ge){var Qe=U.tickIncrement(Se._tmin,Se.dtick,!0);Ve=[Se._tmin,.99*Qe+.01*Se._tmin]}else{var ot=e.simpleMap(Se.range,Se.r2l);Ve=[ot[0],.8*ot[0]+.2*ot[1]]}if(ke.range=e.simpleMap(Ve,Se.l2r),ke._isMinor=!0,U.prepTicks(ke,Ce),Ge){var it=x(Se.dtick),mt=x(ke.dtick),xt=it?Se.dtick:+Se.dtick.substring(1),Vt=mt?ke.dtick:+ke.dtick.substring(1);it&&mt?_e(xt,Vt)?xt===2*C&&Vt===2*E&&(ke.dtick=C):ke.dtick=xt===2*C&&Vt===3*E?C:xt!==C||(Se._input.minor||{}).nticks?me(xt/Vt,2.5)?xt/2:xt:E:"M"===String(Se.dtick).charAt(0)?mt?ke.dtick="M1":_e(xt,Vt)?xt>=12&&2===Vt&&(ke.dtick="M3"):ke.dtick=Se.dtick:"L"===String(ke.dtick).charAt(0)?"L"===String(Se.dtick).charAt(0)?_e(xt,Vt)||(ke.dtick=me(xt/Vt,2.5)?Se.dtick/2:Se.dtick):ke.dtick="D1":"D2"===ke.dtick&&+Se.dtick>1&&(ke.dtick=1)}ke.range=Se.range}void 0===Se.minor._tick0Init&&(ke.tick0=Se.tick0)},U.prepTicks=function(ke,Se){var Ce=e.simpleMap(ke.range,ke.r2l,void 0,void 0,Se);if("auto"===ke.tickmode||!ke.dtick){var Ve,Ge=ke.nticks;Ge||("category"===ke.type||"multicategory"===ke.type?(Ve=ke.tickfont?e.bigFont(ke.tickfont.size||12):15,Ge=ke._length/Ve):(Ve="y"===ke._id.charAt(0)?40:80,Ge=e.constrain(ke._length/Ve,4,9)+1),"radialaxis"===ke._name&&(Ge*=2)),ke.minor&&"array"!==ke.minor.tickmode||"array"===ke.tickmode&&(Ge*=100),ke._roughDTick=Math.abs(Ce[1]-Ce[0])/Ge,U.autoTicks(ke,ke._roughDTick),ke._minDtick>0&&ke.dtick<2*ke._minDtick&&(ke.dtick=ke._minDtick,ke.tick0=ke.l2r(ke._forceTick0))}"period"===ke.ticklabelmode&&function(Qe){var ot;function it(){return!(x(Qe.dtick)||"M"!==Qe.dtick.charAt(0))}var mt=it(),xt=U.getTickFormat(Qe);if(xt){var Vt=Qe._dtickInit!==Qe.dtick;/%[fLQsSMX]/.test(xt)||(/%[HI]/.test(xt)?(ot=D,Vt&&!mt&&Qe.dtick<D&&(Qe.dtick=D)):/%p/.test(xt)?(ot=L,Vt&&!mt&&Qe.dtick<L&&(Qe.dtick=L)):/%[Aadejuwx]/.test(xt)?(ot=E,Vt&&!mt&&Qe.dtick<E&&(Qe.dtick=E)):/%[UVW]/.test(xt)?(ot=C,Vt&&!mt&&Qe.dtick<C&&(Qe.dtick=C)):/%[Bbm]/.test(xt)?(ot=A,Vt&&(mt?we(Qe.dtick)<1:Qe.dtick<k)&&(Qe.dtick="M1")):/%[q]/.test(xt)?(ot=u,Vt&&(mt?we(Qe.dtick)<3:Qe.dtick<w)&&(Qe.dtick="M3")):/%[Yy]/.test(xt)&&(ot=f,Vt&&(mt?we(Qe.dtick)<12:Qe.dtick<g)&&(Qe.dtick="M12")))}(mt=it())&&Qe.tick0===Qe._dowTick0&&(Qe.tick0=Qe._rawTick0),Qe._definedDelta=ot}(ke),ke.tick0||(ke.tick0="date"===ke.type?"2000-01-01":0),"date"===ke.type&&ke.dtick<.1&&(ke.dtick=.1),Ue(ke)},U.calcTicks=function(ke,Se){for(var Ce,Ve,Ge=ke.type,Qe=ke.calendar,ot=ke.ticklabelstep,it="period"===ke.ticklabelmode,mt=e.simpleMap(ke.range,ke.r2l,void 0,void 0,Se),xt=mt[1]<mt[0],Vt=Math.min(mt[0],mt[1]),$t=Math.max(mt[0],mt[1]),pt=Math.max(1e3,ke._length||0),At=[],Xt=[],Ct=[],Pt=[],Be=ke.minor&&(ke.minor.ticks||ke.minor.showgrid),tt=1;tt>=(Be?0:1);tt--){var dt=!tt;tt?(ke._dtickInit=ke.dtick,ke._tick0Init=ke.tick0):(ke.minor._dtickInit=ke.minor.dtick,ke.minor._tick0Init=ke.minor.tick0);var Dt=tt?ke:e.extendFlat({},ke,ke.minor);if(dt?U.prepMinorTicks(Dt,ke,Se):U.prepTicks(Dt,Se),"array"!==Dt.tickmode){var Nt=le(mt),Yt=Nt[0],fn=Nt[1],nn=x(Dt.dtick),In="log"===Ge&&!(nn||"L"===Dt.dtick.charAt(0)),Dn=U.tickFirst(Dt,Se);if(tt){if(ke._tmin=Dn,Dn<Yt!==xt)break;"category"!==Ge&&"multicategory"!==Ge||(fn=xt?Math.max(-.5,fn):Math.min(ke._categories.length-.5,fn))}var kn,rn,pn=null,gn=Dn;tt&&(nn?rn=ke.dtick:"date"===Ge?"string"==typeof ke.dtick&&"M"===ke.dtick.charAt(0)&&(rn=A*ke.dtick.substring(1)):rn=ke._roughDTick,kn=Math.round((ke.r2l(gn)-ke.r2l(ke.tick0))/rn)-1);var Pn=Dt.dtick;for(Dt.rangebreaks&&Dt._tick0Init!==Dt.tick0&&(gn=dn(gn,ke),xt||(gn=U.tickIncrement(gn,Pn,!xt,Qe))),tt&&it&&(gn=U.tickIncrement(gn,Pn,!xt,Qe),kn--);xt?gn>=fn:gn<=fn;gn=U.tickIncrement(gn,Pn,xt,Qe)){if(tt&&kn++,Dt.rangebreaks&&!xt){if(gn<Yt)continue;if(Dt.maskBreaks(gn)===P&&dn(gn,Dt)>=$t)break}if(Ct.length>pt||gn===pn)break;pn=gn;var jn={value:gn};tt?(In&&gn!==(0|gn)&&(jn.simpleLabel=!0),ot>1&&kn%ot&&(jn.skipLabel=!0),Ct.push(jn)):(jn.minor=!0,Pt.push(jn))}}else tt?(Ct=[],At=De(ke)):(Pt=[],Xt=De(ke))}if(Be&&!("inside"===ke.minor.ticks&&"outside"===ke.ticks||"outside"===ke.minor.ticks&&"inside"===ke.ticks)){for(var Kn=Ct.map(function(ui){return ui.value}),rr=[],lr=0;lr<Pt.length;lr++){var kr=Pt[lr],Xr=kr.value;if(-1===Kn.indexOf(Xr)){for(var sr=!1,oi=0;!sr&&oi<Ct.length;oi++)1e7+Ct[oi].value===1e7+Xr&&(sr=!0);sr||rr.push(kr)}}Pt=rr}if(it&&function(ui,Nr,Hr){for(var wr=0;wr<ui.length;wr++){var un=ui[wr].value,er=wr,Ut=wr+1;wr<ui.length-1?(er=wr,Ut=wr+1):wr>0?(er=wr-1,Ut=wr):(er=wr,Ut=wr);var vn,Zn=Math.abs(ui[Ut].value-ui[er].value),$n=Hr||Zn,Hn=0;$n>=g?Hn=Zn>=g&&Zn<=p?Zn:f:Hr===u&&$n>=w?Hn=Zn>=w&&Zn<=m?Zn:u:$n>=k?Hn=Zn>=k&&Zn<=c?Zn:A:Hr===C&&$n>=C?Hn=C:$n>=E?Hn=E:Hr===L&&$n>=L?Hn=L:Hr===D&&$n>=D&&(Hn=D),Hn>=Zn&&(Hn=Zn,vn=!0);var Rn=un+Hn;if(Nr.rangebreaks&&Hn>0){for(var Fn=0,zn=0;zn<84;zn++){var Yn=(zn+.5)/84;Nr.maskBreaks(un*(1-Yn)+Yn*Rn)!==P&&Fn++}(Hn*=Fn/84)||(ui[wr].drop=!0),vn&&Zn>C&&(Hn=Zn)}(Hn>0||0===wr)&&(ui[wr].periodX=un+Hn/2)}}(Ct,ke,ke._definedDelta),ke.rangebreaks){var Gr="y"===ke._id.charAt(0),Lr=1;"auto"===ke.tickmode&&(Lr=ke.tickfont?ke.tickfont.size:12);var Jr=NaN;for(Ce=Ct.length-1;Ce>-1;Ce--)if(Ct[Ce].drop)Ct.splice(Ce,1);else{Ct[Ce].value=dn(Ct[Ce].value,ke);var Mi=ke.c2p(Ct[Ce].value);(Gr?Jr>Mi-Lr:Jr<Mi+Lr)?Ct.splice(xt?Ce+1:Ce,1):Jr=Mi}}tn(ke)&&360===Math.abs(mt[1]-mt[0])&&Ct.pop(),ke._tmax=(Ct[Ct.length-1]||{}).value,ke._prevDateHead="",ke._inCalcTicks=!0;var Jn,br,Fr=function(ui){ui.text="",ke._prevDateHead=Ve};for(Ct=Ct.concat(Pt),Ce=0;Ce<Ct.length;Ce++){var Qr=Ct[Ce].value;Ct[Ce].minor?Xt.push({x:Qr,minor:!0}):(Ve=ke._prevDateHead,Jn=U.tickText(ke,Qr,!1,Ct[Ce].simpleLabel),void 0!==(br=Ct[Ce].periodX)&&(Jn.periodX=br,(br>$t||br<Vt)&&(br>$t&&(Jn.periodX=$t),br<Vt&&(Jn.periodX=Vt),Fr(Jn))),Ct[Ce].skipLabel&&Fr(Jn),At.push(Jn))}return At=At.concat(Xt),ke._inCalcTicks=!1,it&&At.length&&(At[0].noTick=!0),At};var Le=[2,5,10],Ie=[1,2,3,6,12],je=[1,2,5,10,15,30],ye=[1,2,3,7,14],Me=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Oe=[-.301,0,.301,.699,1],Pe=[15,30,45,90,180];function Re(ke,Se,Ce){return Se*e.roundUp(ke/Se,Ce)}function Ue(ke){var Se=ke.dtick;if(ke._tickexponent=0,x(Se)||"string"==typeof Se||(Se=1),"category"!==ke.type&&"multicategory"!==ke.type||(ke._tickround=null),"date"===ke.type){var Ce=ke.r2l(ke.tick0),Ve=ke.l2r(Ce).replace(/(^-|i)/g,""),Ge=Ve.length;if("M"===String(Se).charAt(0))ke._tickround=Ge>10||"01-01"!==Ve.substr(5)?"d":+Se.substr(1)%12==0?"y":"m";else if(Se>=E&&Ge<=10||Se>=15*E)ke._tickround="d";else if(Se>=N&&Ge<=16||Se>=D)ke._tickround="M";else if(Se>=F&&Ge<=19||Se>=N)ke._tickround="S";else{var Qe=ke.l2r(Ce+Se).replace(/^-/,"").length;ke._tickround=Math.max(Ge,Qe)-20,ke._tickround<0&&(ke._tickround=4)}}else if(x(Se)||"L"===Se.charAt(0)){var ot=ke.range.map(ke.r2d||Number);x(Se)||(Se=Number(Se.substr(1))),ke._tickround=2-Math.floor(Math.log(Se)/Math.LN10+.01);var it=Math.max(Math.abs(ot[0]),Math.abs(ot[1])),mt=Math.floor(Math.log(it)/Math.LN10+.01),xt=void 0===ke.minexponent?3:ke.minexponent;Math.abs(mt)>xt&&(ke._tickexponent=lt(ke.exponentformat)&&!He(mt)?3*Math.round((mt-1)/3):mt)}else ke._tickround=null}function qe(ke,Se,Ce){var Ve=ke.tickfont||{};return{x:Se,dx:0,dy:0,text:Ce||"",fontSize:Ve.size,font:Ve.family,fontColor:Ve.color}}U.autoTicks=function(ke,Se,Ce){var Ve;function Ge($t){return Math.pow($t,Math.floor(Math.log(Se)/Math.LN10))}if("date"===ke.type){ke.tick0=e.dateTick0(ke.calendar,0);var Qe=2*Se;if(Qe>f)Se/=f,Ve=Ge(10),ke.dtick="M"+12*Re(Se,Ve,Le);else if(Qe>A)ke.dtick="M"+Re(Se/=A,1,Ie);else if(Qe>E){if(ke.dtick=Re(Se,E,ke._hasDayOfWeekBreaks?[1,2,7,14]:ye),!Ce){var ot=U.getTickFormat(ke),it="period"===ke.ticklabelmode;it&&(ke._rawTick0=ke.tick0),ke.tick0=/%[uVW]/.test(ot)?e.dateTick0(ke.calendar,2):e.dateTick0(ke.calendar,1),it&&(ke._dowTick0=ke.tick0)}}else Qe>D?ke.dtick=Re(Se,D,Ie):Qe>N?ke.dtick=Re(Se,N,je):Qe>F?ke.dtick=Re(Se,F,je):(Ve=Ge(10),ke.dtick=Re(Se,Ve,Le))}else if("log"===ke.type){ke.tick0=0;var mt=e.simpleMap(ke.range,ke.r2l);if(ke._isMinor&&(Se*=1.5),Se>.7)ke.dtick=Math.ceil(Se);else if(Math.abs(mt[1]-mt[0])<1){var xt=1.5*Math.abs((mt[1]-mt[0])/Se);Se=Math.abs(Math.pow(10,mt[1])-Math.pow(10,mt[0]))/xt,Ve=Ge(10),ke.dtick="L"+Re(Se,Ve,Le)}else ke.dtick=Se>.3?"D2":"D1"}else"category"===ke.type||"multicategory"===ke.type?(ke.tick0=0,ke.dtick=Math.ceil(Math.max(Se,1))):tn(ke)?(ke.tick0=0,ke.dtick=Re(Se,Ve=1,Pe)):(ke.tick0=0,Ve=Ge(10),ke.dtick=Re(Se,Ve,Le));if(0===ke.dtick&&(ke.dtick=1),!x(ke.dtick)&&"string"!=typeof ke.dtick){var Vt=ke.dtick;throw ke.dtick=1,"ax.dtick error: "+String(Vt)}},U.tickIncrement=function(ke,Se,Ce,Ve){var Ge=Ce?-1:1;if(x(Se))return e.increment(ke,Ge*Se);var Qe=Se.charAt(0),ot=Ge*Number(Se.substr(1));if("M"===Qe)return e.incrementMonth(ke,ot,Ve);if("L"===Qe)return Math.log(Math.pow(10,ke)+ot)/Math.LN10;if("D"===Qe){var it="D2"===Se?Oe:Me,mt=ke+.01*Ge,xt=e.roundUp(e.mod(mt,1),it,Ce);return Math.floor(mt)+Math.log(y.round(Math.pow(10,xt),1))/Math.LN10}throw"unrecognized dtick "+String(Se)},U.tickFirst=function(ke,Se){var Ce=ke.r2l||Number,Ve=e.simpleMap(ke.range,Ce,void 0,void 0,Se),Ge=Ve[1]<Ve[0],Qe=Ge?Math.floor:Math.ceil,ot=le(Ve)[0],it=ke.dtick,mt=Ce(ke.tick0);if(x(it)){var xt=Qe((ot-mt)/it)*it+mt;return"category"!==ke.type&&"multicategory"!==ke.type||(xt=e.constrain(xt,0,ke._categories.length-1)),xt}var Vt=it.charAt(0),$t=Number(it.substr(1));if("M"===Vt){for(var pt,At,Xt,Ct=0,Pt=mt;Ct<10;){if(((pt=U.tickIncrement(Pt,it,Ge,ke.calendar))-ot)*(Pt-ot)<=0)return Ge?Math.min(Pt,pt):Math.max(Pt,pt);At=(ot-(Pt+pt)/2)/(pt-Pt),Xt=Vt+(Math.abs(Math.round(At))||1)*$t,Pt=U.tickIncrement(Pt,Xt,At<0?!Ge:Ge,ke.calendar),Ct++}return e.error("tickFirst did not converge",ke),Pt}if("L"===Vt)return Math.log(Qe((Math.pow(10,ot)-mt)/$t)*$t+mt)/Math.LN10;if("D"===Vt){var Be="D2"===it?Oe:Me,tt=e.roundUp(e.mod(ot,1),Be,Ge);return Math.floor(ot)+Math.log(y.round(Math.pow(10,tt),1))/Math.LN10}throw"unrecognized dtick "+String(it)},U.tickText=function(ke,Se,Ce,Ve){var Ge,Qe=qe(ke,Se),ot="array"===ke.tickmode,it=Ce||ot,mt=ke.type,xt="category"===mt?ke.d2l_noadd:ke.d2l;if(ot&&Array.isArray(ke.ticktext)){var Vt=e.simpleMap(ke.range,ke.r2l),$t=(Math.abs(Vt[1]-Vt[0])-(ke._lBreaks||0))/1e4;for(Ge=0;Ge<ke.ticktext.length&&!(Math.abs(Se-xt(ke.tickvals[Ge]))<$t);Ge++);if(Ge<ke.ticktext.length)return Qe.text=String(ke.ticktext[Ge]),Qe}function pt(Ct){return void 0===Ct||(Ce?"none"===Ct:"all"!==Ct&&Se!=={first:ke._tmin,last:ke._tmax}[Ct])}var Pt,Be,At=Ce?"never":"none"!==ke.exponentformat&&pt(ke.showexponent)?"hide":"";if("date"===mt?function(Ct,Pt,Be,tt){var dt=Ct._tickround,Dt=Be&&Ct.hoverformat||U.getTickFormat(Ct);tt&&(dt=x(dt)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[dt]);var Nt,Yt=e.formatDate(Pt.x,Dt,dt,Ct._dateFormat,Ct.calendar,Ct._extraFormat),fn=Yt.indexOf("\n");if(-1!==fn&&(Nt=Yt.substr(fn+1),Yt=Yt.substr(0,fn)),tt&&("00:00:00"===Yt||"00:00"===Yt?(Yt=Nt,Nt=""):8===Yt.length&&(Yt=Yt.replace(/:00$/,""))),Nt)if(Be)"d"===dt?Yt+=", "+Nt:Yt=Nt+(Yt?", "+Yt:"");else if(Ct._inCalcTicks&&Ct._prevDateHead===Nt){var nn=Mn(Ct),In=Ct._trueSide||Ct.side;(!nn&&"top"===In||nn&&"bottom"===In)&&(Yt+="<br> ")}else Ct._prevDateHead=Nt,Yt+="<br>"+Nt;Pt.text=Yt}(ke,Qe,Ce,it):"log"===mt?function(Ct,Pt,Be,tt,dt){var Dt=Ct.dtick,Nt=Pt.x,Yt=Ct.tickformat,fn="string"==typeof Dt&&Dt.charAt(0);if("never"===dt&&(dt=""),tt&&"L"!==fn&&(Dt="L3",fn="L"),Yt||"L"===fn)Pt.text=$e(Math.pow(10,Nt),Ct,dt,tt);else if(x(Dt)||"D"===fn&&e.mod(Nt+.01,1)<.1){var nn=Math.round(Nt),In=Math.abs(nn),Dn=Ct.exponentformat;"power"===Dn||lt(Dn)&&He(nn)?(Pt.text=0===nn?1:1===nn?"10":"10<sup>"+(nn>1?"":I)+In+"</sup>",Pt.fontSize*=1.25):("e"===Dn||"E"===Dn)&&In>2?Pt.text="1"+Dn+(nn>0?"+":I)+In:(Pt.text=$e(Math.pow(10,Nt),Ct,"","fakehover"),"D1"===Dt&&"y"===Ct._id.charAt(0)&&(Pt.dy-=Pt.fontSize/6))}else{if("D"!==fn)throw"unrecognized dtick "+String(Dt);Pt.text=String(Math.round(Math.pow(10,e.mod(Nt,1)))),Pt.fontSize*=.75}if("D1"===Ct.dtick){var kn=String(Pt.text).charAt(0);"0"!==kn&&"1"!==kn||("y"===Ct._id.charAt(0)?Pt.dx-=Pt.fontSize/4:(Pt.dy+=Pt.fontSize/2,Pt.dx+=(Ct.range[1]>Ct.range[0]?1:-1)*Pt.fontSize*(Nt<0?.5:.25)))}}(ke,Qe,0,it,At):"category"===mt?(Pt=Qe,void 0===(Be=ke._categories[Math.round(Pt.x)])&&(Be=""),Pt.text=String(Be)):"multicategory"===mt?function(Ct,Pt,Be){var tt=Math.round(Pt.x),dt=Ct._categories[tt]||[],Dt=void 0===dt[1]?"":String(dt[1]),Nt=void 0===dt[0]?"":String(dt[0]);Be?Pt.text=Nt+" - "+Dt:(Pt.text=Dt,Pt.text2=Nt)}(ke,Qe,Ce):tn(ke)?function(Ct,Pt,Be,tt,dt){if("radians"!==Ct.thetaunit||Be)Pt.text=$e(Pt.x,Ct,dt,tt);else{var Dt=Pt.x/180;if(0===Dt)Pt.text="0";else{var Nt=function(fn){function nn(rn,pn){return Math.abs(rn-pn)<=1e-6}var In=function(rn){for(var pn=1;!nn(Math.round(rn*pn)/pn,rn);)pn*=10;return pn}(fn),Dn=fn*In,kn=Math.abs(function rn(pn,gn){return nn(gn,0)?pn:rn(gn,pn%gn)}(Dn,In));return[Math.round(Dn/kn),Math.round(In/kn)]}(Dt);if(Nt[1]>=100)Pt.text=$e(e.deg2rad(Pt.x),Ct,dt,tt);else{var Yt=Pt.x<0;Pt.text=1===Nt[1]?1===Nt[0]?"\u03c0":Nt[0]+"\u03c0":["<sup>",Nt[0],"</sup>","\u2044","<sub>",Nt[1],"</sub>","\u03c0"].join(""),Yt&&(Pt.text=I+Pt.text)}}}}(ke,Qe,Ce,it,At):function(Ct,Pt,Be,tt,dt){"never"===dt?dt="":"all"===Ct.showexponent&&Math.abs(Pt.x/Ct.dtick)<1e-6&&(dt="hide"),Pt.text=$e(Pt.x,Ct,dt,tt)}(ke,Qe,0,it,At),Ve||(ke.tickprefix&&!pt(ke.showtickprefix)&&(Qe.text=ke.tickprefix+Qe.text),ke.ticksuffix&&!pt(ke.showticksuffix)&&(Qe.text+=ke.ticksuffix)),"boundaries"===ke.tickson||ke.showdividers){var Xt=function(Ct){var Pt=ke.l2p(Ct);return Pt>=0&&Pt<=ke._length?Ct:null};Qe.xbnd=[Xt(Qe.x-.5),Xt(Qe.x+ke.dtick-.5)]}return Qe},U.hoverLabelText=function(ke,Se,Ce){Ce&&(ke=e.extendFlat({},ke,{hoverformat:Ce}));var Ve=Array.isArray(Se)?Se[0]:Se,Ge=Array.isArray(Se)?Se[1]:void 0;if(void 0!==Ge&&Ge!==Ve)return U.hoverLabelText(ke,Ve,Ce)+" - "+U.hoverLabelText(ke,Ge,Ce);var Qe="log"===ke.type&&Ve<=0,ot=U.tickText(ke,ke.c2l(Qe?-Ve:Ve),"hover").text;return Qe?0===Ve?"0":I+ot:ot};var Xe=["f","p","n","\u03bc","m","","k","M","G","T"];function lt(ke){return"SI"===ke||"B"===ke}function He(ke){return ke>14||ke<-15}function $e(ke,Se,Ce,Ve){var Ge=ke<0,Qe=Se._tickround,ot=Ce||Se.exponentformat||"B",it=Se._tickexponent,mt=U.getTickFormat(Se),xt=Se.separatethousands;if(Ve){var Vt={exponentformat:ot,minexponent:Se.minexponent,dtick:"none"===Se.showexponent?Se.dtick:x(ke)&&Math.abs(ke)||1,range:"none"===Se.showexponent?Se.range.map(Se.r2d):[0,ke||1]};Ue(Vt),Qe=(Number(Vt._tickround)||0)+4,it=Vt._tickexponent,Se.hoverformat&&(mt=Se.hoverformat)}if(mt)return Se._numFormat(mt)(ke).replace(/-/g,I);var $t,pt=Math.pow(10,-Qe)/2;if("none"===ot&&(it=0),(ke=Math.abs(ke))<pt)ke="0",Ge=!1;else{if(ke+=pt,it&&(ke*=Math.pow(10,-it),Qe+=it),0===Qe)ke=String(Math.floor(ke));else if(Qe<0){ke=(ke=String(Math.round(ke))).substr(0,ke.length+Qe);for(var At=Qe;At<0;At++)ke+="0"}else{var Xt=(ke=String(ke)).indexOf(".")+1;Xt&&(ke=ke.substr(0,Xt+Qe).replace(/\.?0+$/,""))}ke=e.numSeparate(ke,Se._separators,xt)}return it&&"hide"!==ot&&(lt(ot)&&He(it)&&(ot="power"),$t=it<0?I+-it:"power"!==ot?"+"+it:String(it),"e"===ot||"E"===ot?ke+=ot+$t:"power"===ot?ke+="\xd710<sup>"+$t+"</sup>":"B"===ot&&9===it?ke+="B":lt(ot)&&(ke+=Xe[it/3+5])),Ge?I+ke:ke}function et(ke,Se){for(var Ce=[],Ve={},Ge=0;Ge<Se.length;Ge++){var Qe=Se[Ge];Ve[Qe.text2]?Ve[Qe.text2].push(Qe.x):Ve[Qe.text2]=[Qe.x]}for(var ot in Ve)Ce.push(qe(ke,e.interp(Ve[ot],.5),ot));return Ce}function nt(ke){return void 0!==ke.periodX?ke.periodX:ke.x}function ct(ke){return[ke.text,ke.x,ke.axInfo,ke.font,ke.fontSize,ke.fontColor].join("_")}function bt(ke){var Se=ke.title.font.size,Ce=(ke.title.text.match(a.BR_TAG_ALL)||[]).length;return ke.title.hasOwnProperty("standoff")?Ce?Se*(K+Ce*ie):Se*K:Ce?Se*(Ce+1)*ie:Se}function kt(ke,Se){var Ce=ke.l2p(Se);return Ce>1&&Ce<ke._length-1}function Bt(ke){var Se=y.select(ke),Ce=Se.select(".text-math-group");return Ce.empty()?Se.select("text"):Ce}function Et(ke){return ke._id+".automargin"}function ht(ke){return Et(ke)+".mirror"}function at(ke){return ke._id+".rangeslider"}function Ft(ke,Se){for(var Ce=0;Ce<Se.length;Ce++)-1===ke.indexOf(Se[Ce])&&ke.push(Se[Ce])}function en(ke,Se,Ce){var Ve,Ge,Qe=[],ot=[],it=ke.layout;for(Ve=0;Ve<Se.length;Ve++)Qe.push(U.getFromId(ke,Se[Ve]));for(Ve=0;Ve<Ce.length;Ve++)ot.push(U.getFromId(ke,Ce[Ve]));var mt=Object.keys(h),xt=["anchor","domain","overlaying","position","side","tickangle","editType"],Vt=["linear","log"];for(Ve=0;Ve<mt.length;Ve++){var $t=mt[Ve],pt=Qe[0][$t],At=ot[0][$t],Xt=!0,Ct=!1,Pt=!1;if("_"!==$t.charAt(0)&&"function"!=typeof pt&&-1===xt.indexOf($t)){for(Ge=1;Ge<Qe.length&&Xt;Ge++){var Be=Qe[Ge][$t];"type"===$t&&-1!==Vt.indexOf(pt)&&-1!==Vt.indexOf(Be)&&pt!==Be?Ct=!0:Be!==pt&&(Xt=!1)}for(Ge=1;Ge<ot.length&&Xt;Ge++){var tt=ot[Ge][$t];"type"===$t&&-1!==Vt.indexOf(At)&&-1!==Vt.indexOf(tt)&&At!==tt?Pt=!0:ot[Ge][$t]!==At&&(Xt=!1)}Xt&&(Ct&&(it[Qe[0]._name].type="linear"),Pt&&(it[ot[0]._name].type="linear"),Qt(it,$t,Qe,ot,ke._fullLayout._dfltTitle))}}for(Ve=0;Ve<ke._fullLayout.annotations.length;Ve++){var dt=ke._fullLayout.annotations[Ve];-1!==Se.indexOf(dt.xref)&&-1!==Ce.indexOf(dt.yref)&&e.swapAttrs(it.annotations[Ve],["?"])}}function Qt(ke,Se,Ce,Ve,Ge){var Qe,ot=e.nestedProperty,it=ot(ke[Ce[0]._name],Se).get(),mt=ot(ke[Ve[0]._name],Se).get();for("title"===Se&&(it&&it.text===Ge.x&&(it.text=Ge.y),mt&&mt.text===Ge.y&&(mt.text=Ge.x)),Qe=0;Qe<Ce.length;Qe++)ot(ke,Ce[Qe]._name+"."+Se).set(mt);for(Qe=0;Qe<Ve.length;Qe++)ot(ke,Ve[Qe]._name+"."+Se).set(it)}function tn(ke){return"angularaxis"===ke._id}function dn(ke,Se){for(var Ce=Se._rangebreaks.length,Ve=0;Ve<Ce;Ve++){var Ge=Se._rangebreaks[Ve];if(ke>=Ge.min&&ke<Ge.max)return Ge.max}return ke}function Mn(ke){return-1!==(ke.ticklabelposition||"").indexOf("inside")}function sn(ke,Se){Mn(ke._anchorAxis||{})&&ke._hideCounterAxisInsideTickLabels&&ke._hideCounterAxisInsideTickLabels(Se)}U.getTickFormat=function(ke){var Se,Ce,Ve,Ge,Qe,ot,it,mt,pt,At,Xt,Ct,Pt,Be;function xt(pt){return"string"!=typeof pt?pt:Number(pt.replace("M",""))*A}function Vt(pt,At){var Xt=["L","D"];if(typeof pt==typeof At){if("number"==typeof pt)return pt-At;var Ct=Xt.indexOf(pt.charAt(0)),Pt=Xt.indexOf(At.charAt(0));return Ct===Pt?Number(pt.replace(/(L|D)/g,""))-Number(At.replace(/(L|D)/g,"")):Ct-Pt}return"number"==typeof pt?1:-1}if(ke.tickformatstops&&ke.tickformatstops.length>0)switch(ke.type){case"date":case"linear":for(Se=0;Se<ke.tickformatstops.length;Se++)if((Ve=ke.tickformatstops[Se]).enabled&&(Ge=ke.dtick,ot=void 0,void 0,void 0,ot=xt||function(pt){return pt},mt=(Qe=Ve.dtickrange)[1],(!(it=Qe[0])&&"number"!=typeof it||ot(it)<=ot(Ge))&&(!mt&&"number"!=typeof mt||ot(mt)>=ot(Ge)))){Ce=Ve;break}break;case"log":for(Se=0;Se<ke.tickformatstops.length;Se++)if((Ve=ke.tickformatstops[Se]).enabled&&(Xt=void 0,Ct=void 0,Pt=void 0,Be=void 0,Xt=null===(At=Ve.dtickrange)[0],Ct=null===At[1],Pt=Vt(pt=ke.dtick,At[0])>=0,Be=Vt(pt,At[1])<=0,(Xt||Pt)&&(Ct||Be))){Ce=Ve;break}}return Ce?Ce.value:ke.tickformat},U.getSubplots=function(ke,Se){var Ce=ke._fullLayout._subplots,Ve=Ce.cartesian.concat(Ce.gl2d||[]),Ge=Se?U.findSubplotsWithAxis(Ve,Se):Ve;return Ge.sort(function(Qe,ot){var it=Qe.substr(1).split("y"),mt=ot.substr(1).split("y");return it[0]===mt[0]?+it[1]-+mt[1]:+it[0]-+mt[0]}),Ge},U.findSubplotsWithAxis=function(ke,Se){for(var Ce=new RegExp("x"===Se._id.charAt(0)?"^"+Se._id+"y":Se._id+"$"),Ve=[],Ge=0;Ge<ke.length;Ge++){var Qe=ke[Ge];Ce.test(Qe)&&Ve.push(Qe)}return Ve},U.makeClipPaths=function(ke){var Se=ke._fullLayout;if(!Se._hasOnlyLargeSploms){var Ce,Ve,Ge={_offset:0,_length:Se.width,_id:""},Qe={_offset:0,_length:Se.height,_id:""},ot=U.list(ke,"x",!0),it=U.list(ke,"y",!0),mt=[];for(Ce=0;Ce<ot.length;Ce++)for(mt.push({x:ot[Ce],y:Qe}),Ve=0;Ve<it.length;Ve++)0===Ce&&mt.push({x:Ge,y:it[Ve]}),mt.push({x:ot[Ce],y:it[Ve]});var xt=Se._clips.selectAll(".axesclip").data(mt,function(Vt){return Vt.x._id+Vt.y._id});xt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(Vt){return"clip"+Se._uid+Vt.x._id+Vt.y._id}).append("rect"),xt.exit().remove(),xt.each(function(Vt){y.select(this).select("rect").attr({x:Vt.x._offset||0,y:Vt.y._offset||0,width:Vt.x._length||1,height:Vt.y._length||1})})}},U.draw=function(ke,Se,Ce){var Ve=ke._fullLayout;"redraw"===Se&&Ve._paper.selectAll("g.subplot").each(function(Qe){var it=Ve._plots[Qe[0]];if(it){var mt=it.xaxis,xt=it.yaxis;it.xaxislayer.selectAll("."+mt._id+"tick").remove(),it.yaxislayer.selectAll("."+xt._id+"tick").remove(),it.xaxislayer.selectAll("."+mt._id+"tick2").remove(),it.yaxislayer.selectAll("."+xt._id+"tick2").remove(),it.xaxislayer.selectAll("."+mt._id+"divider").remove(),it.yaxislayer.selectAll("."+xt._id+"divider").remove(),it.minorGridlayer&&it.minorGridlayer.selectAll("path").remove(),it.gridlayer&&it.gridlayer.selectAll("path").remove(),it.zerolinelayer&&it.zerolinelayer.selectAll("path").remove(),Ve._infolayer.select(".g-"+mt._id+"title").remove(),Ve._infolayer.select(".g-"+xt._id+"title").remove()}});var Ge=Se&&"redraw"!==Se?Se:U.listIds(ke);return e.syncOrAsync(Ge.map(function(Qe){return function(){if(Qe){var ot=U.getFromId(ke,Qe),it=U.drawOne(ke,ot,Ce);return ot._r=ot.range.slice(),ot._rl=e.simpleMap(ot._r,ot.r2l),it}}}))},U.drawOne=function(ke,Se,Ce){var Ve,Ge,Qe;Ce=Ce||{},Se.setScale();var ot=ke._fullLayout,it=Se._id,mt=it.charAt(0),xt=U.counterLetter(it),Vt=ot._plots[Se._mainSubplot];if(Vt){var $t=Vt[mt+"axislayer"],pt=Se._mainLinePosition,At=Se._mainMirrorPosition,Xt=Se._vals=U.calcTicks(Se),Ct=[Se.mirror,pt,At].join("_");for(Ve=0;Ve<Xt.length;Ve++)Xt[Ve].axInfo=Ct;Se._selections={},Se._tickAngles&&(Se._prevTickAngles=Se._tickAngles),Se._tickAngles={},Se._depth=null;var Pt={};if(Se.visible){var Be,tt,dt=U.makeTransTickFn(Se),Dt=U.makeTransTickLabelFn(Se),Nt="inside"===Se.ticks,Yt="outside"===Se.ticks;if("boundaries"===Se.tickson){var fn=function(Hr,wr){var un,er=[],Ut=function(vn,Tn){var Qn=vn.xbnd[Tn];null!==Qn&&er.push(e.extendFlat({},vn,{x:Qn}))};if(wr.length){for(un=0;un<wr.length;un++)Ut(wr[un],0);Ut(wr[un-1],1)}return er}(0,Xt);tt=U.clipEnds(Se,fn),Be=Nt?tt:fn}else tt=U.clipEnds(Se,Xt),Be=Nt&&"period"!==Se.ticklabelmode?tt:Xt;var nn,In=Se._gridVals=tt,Dn=function(Hr,wr){var un,er,Ut=[],vn=wr.length&&wr[wr.length-1].x<wr[0].x,Tn=function(Zn,$n){var Hn=Zn.xbnd[$n];null!==Hn&&Ut.push(e.extendFlat({},Zn,{x:Hn}))};if(Hr.showdividers&&wr.length){for(un=0;un<wr.length;un++){var Qn=wr[un];Qn.text2!==er&&Tn(Qn,vn?1:0),er=Qn.text2}Tn(wr[un-1],vn?0:1)}return Ut}(Se,Xt);if(!ot._hasOnlyLargeSploms){var kn=Se._subplotsWith,rn={};for(Ve=0;Ve<kn.length;Ve++){var pn=(Qe=ot._plots[Ge=kn[Ve]])[xt+"axis"],gn=pn._mainAxis._id;if(!rn[gn]){rn[gn]=1;var Pn="x"===mt?"M0,"+pn._offset+"v"+pn._length:"M"+pn._offset+",0h"+pn._length;U.drawGrid(ke,Se,{vals:In,counterAxis:pn,layer:Qe.gridlayer.select("."+it),minorLayer:Qe.minorGridlayer.select("."+it),path:Pn,transFn:dt}),U.drawZeroLine(ke,Se,{counterAxis:pn,layer:Qe.zerolinelayer,path:Pn,transFn:dt})}}}var jn=U.getTickSigns(Se),Kn=U.getTickSigns(Se,"minor");if(Se.ticks||Se.minor&&Se.minor.ticks){var rr,lr,kr,Xr,sr=U.makeTickPath(Se,pt,jn[2]),oi=U.makeTickPath(Se,pt,Kn[2],{minor:!0});if(Se._anchorAxis&&Se.mirror&&!0!==Se.mirror?(rr=U.makeTickPath(Se,At,jn[3]),lr=U.makeTickPath(Se,At,Kn[3],{minor:!0}),kr=sr+rr,Xr=oi+lr):(rr="",lr="",kr=sr,Xr=oi),Se.showdividers&&Yt&&"boundaries"===Se.tickson){var Gr={};for(Ve=0;Ve<Dn.length;Ve++)Gr[Dn[Ve].x]=1;nn=function(Hr){return Gr[Hr.x]?rr:kr}}else nn=function(Hr){return Hr.minor?Xr:kr}}if(U.drawTicks(ke,Se,{vals:Be,layer:$t,path:nn,transFn:dt}),"allticks"===Se.mirror){var Lr=Object.keys(Se._linepositions||{});for(Ve=0;Ve<Lr.length;Ve++){Qe=ot._plots[Ge=Lr[Ve]];var Jr=Se._linepositions[Ge]||[],Jn=Jr[1],br=Jr[2],Fr=U.makeTickPath(Se,Jr[0],br?jn[0]:Kn[0],{minor:br})+U.makeTickPath(Se,Jn,br?jn[1]:Kn[1],{minor:br});U.drawTicks(ke,Se,{vals:Be,layer:Qe[mt+"axislayer"],path:Fr,transFn:dt})}}var cr=[];if(cr.push(function(){return U.drawLabels(ke,Se,{vals:Xt,layer:$t,plotinfo:Qe,transFn:Dt,labelFns:U.makeLabelFns(Se,pt)})}),"multicategory"===Se.type){var Qr={x:2,y:10}[mt];cr.push(function(){var Hr={x:"height",y:"width"}[mt],wr=Nr()[Hr]+Qr+(Se._tickAngles[it+"tick"]?Se.tickfont.size*ie:0);return U.drawLabels(ke,Se,{vals:et(Se,Xt),layer:$t,cls:it+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:dt,labelFns:U.makeLabelFns(Se,pt+wr*jn[4])})}),cr.push(function(){return Se._depth=jn[4]*(Nr("tick2")[Se.side]-pt),Hr=ke,wr=Se,Ut=(un={vals:Dn,layer:$t,path:U.makeTickPath(Se,pt,jn[4],{len:Se._depth}),transFn:dt}).vals,(vn=un.layer.selectAll("path."+(er=wr._id+"divider")).data(Ut,ct)).exit().remove(),vn.enter().insert("path",":first-child").classed(er,1).classed("crisp",1).call(i.stroke,wr.dividercolor).style("stroke-width",v.crispRound(Hr,wr.dividerwidth,1)+"px"),void vn.attr("transform",un.transFn).attr("d",un.path);var Hr,wr,un,er,Ut,vn})}else Se.title.hasOwnProperty("standoff")&&cr.push(function(){Se._depth=jn[4]*(Nr()[Se.side]-pt)});var ui=_.getComponentMethod("rangeslider","isVisible")(Se);return cr.push(function(){var Hr,wr,un,er,Ut=Se.side.charAt(0),vn=q[Se.side].charAt(0),Tn=U.getPxPosition(ke,Se),Qn=Yt?Se.ticklen:0;if((Se.automargin||ui)&&("multicategory"===Se.type?Hr=Nr("tick2"):(Hr=Nr(),"x"===mt&&"b"===Ut&&(Se._depth=Math.max(Hr.width>0?Hr.bottom-Tn:0,Qn)))),Se.automargin){wr={x:0,y:0,r:0,l:0,t:0,b:0};var Zn=[0,1];if("x"===mt){if("b"===Ut?wr[Ut]=Se._depth:(wr[Ut]=Se._depth=Math.max(Hr.width>0?Tn-Hr.top:0,Qn),Zn.reverse()),Hr.width>0){var $n=Hr.right-(Se._offset+Se._length);$n>0&&(wr.xr=1,wr.r=$n);var Hn=Se._offset-Hr.left;Hn>0&&(wr.xl=0,wr.l=Hn)}}else if("l"===Ut?wr[Ut]=Se._depth=Math.max(Hr.height>0?Tn-Hr.left:0,Qn):(wr[Ut]=Se._depth=Math.max(Hr.height>0?Hr.right-Tn:0,Qn),Zn.reverse()),Hr.height>0){var Rn=Hr.bottom-(Se._offset+Se._length);Rn>0&&(wr.yb=0,wr.b=Rn);var Fn=Se._offset-Hr.top;Fn>0&&(wr.yt=1,wr.t=Fn)}wr[xt]="free"===Se.anchor?Se.position:Se._anchorAxis.domain[Zn[0]],Se.title.text!==ot._dfltTitle[mt]&&(wr[Ut]+=bt(Se)+(Se.title.standoff||0)),Se.mirror&&"free"!==Se.anchor&&((un={x:0,y:0,r:0,l:0,t:0,b:0})[vn]=Se.linewidth,Se.mirror&&!0!==Se.mirror&&(un[vn]+=Qn),!0===Se.mirror||"ticks"===Se.mirror?un[xt]=Se._anchorAxis.domain[Zn[1]]:"all"!==Se.mirror&&"allticks"!==Se.mirror||(un[xt]=[Se._counterDomainMin,Se._counterDomainMax][Zn[1]]))}ui&&(er=_.getComponentMethod("rangeslider","autoMarginOpts")(ke,Se)),M.autoMargin(ke,Et(Se),wr),M.autoMargin(ke,ht(Se),un),M.autoMargin(ke,at(Se),er)}),Ce.skipTitle||ui&&"bottom"===Se.side||cr.push(function(){return function(Hr,wr){var un,er=Hr._fullLayout,Ut=wr._id,vn=Ut.charAt(0),Tn=wr.title.font.size;if(wr.title.hasOwnProperty("standoff"))un=wr._depth+wr.title.standoff+bt(wr);else{var Qn=Mn(wr);if("multicategory"===wr.type)un=wr._depth;else{var Zn=1.5*Tn;Qn&&(Zn=.5*Tn,"outside"===wr.ticks&&(Zn+=wr.ticklen)),un=10+Zn+(wr.linewidth?wr.linewidth-1:0)}Qn||(un+="x"===vn?"top"===wr.side?Tn*(wr.showticklabels?1:0):Tn*(wr.showticklabels?1.5:.5):"right"===wr.side?Tn*(wr.showticklabels?1:.5):Tn*(wr.showticklabels?.5:0))}var $n,Hn,Rn,Fn,zn=U.getPxPosition(Hr,wr);if("x"===vn?(Hn=wr._offset+wr._length/2,Rn="top"===wr.side?zn-un:zn+un):(Rn=wr._offset+wr._length/2,Hn="right"===wr.side?zn+un:zn-un,$n={rotate:"-90",offset:0}),"multicategory"!==wr.type){var Yn=wr._selections[wr._id+"tick"];if(Fn={selection:Yn,side:wr.side},Yn&&Yn.node()&&Yn.node().parentNode){var nr=v.getTranslate(Yn.node().parentNode);Fn.offsetLeft=nr.x,Fn.offsetTop=nr.y}wr.title.hasOwnProperty("standoff")&&(Fn.pad=0)}return l.draw(Hr,Ut+"title",{propContainer:wr,propName:wr._name+".title.text",placeholder:er._dfltTitle[vn],avoid:Fn,transform:$n,attributes:{x:Hn,y:Rn,"text-anchor":"middle"}})}(ke,Se)}),e.syncOrAsync(cr)}}function Nr(Hr){var un,er,Ut,vn,Tn,Qn,wr=it+(Hr||"tick");return Pt[wr]||(Pt[wr]=((un=Se)._selections[er=wr].size()?(Ut=1/0,vn=-1/0,Tn=1/0,Qn=-1/0,un._selections[er].each(function(){var Zn=Bt(this),$n=v.bBox(Zn.node().parentNode);Ut=Math.min(Ut,$n.top),vn=Math.max(vn,$n.bottom),Tn=Math.min(Tn,$n.left),Qn=Math.max(Qn,$n.right)})):(Ut=0,vn=0,Tn=0,Qn=0),{top:Ut,bottom:vn,left:Tn,right:Qn,height:vn-Ut,width:Qn-Tn})),Pt[wr]}},U.getTickSigns=function(ke,Se){var Ce=ke._id.charAt(0),Ge=ke.side==={x:"top",y:"right"}[Ce]?1:-1,Qe=[-1,1,Ge,-Ge];return"inside"!==(Se?(ke.minor||{}).ticks:ke.ticks)==("x"===Ce)&&(Qe=Qe.map(function(ot){return-ot})),ke.side&&Qe.push({l:-1,t:-1,r:1,b:1}[ke.side.charAt(0)]),Qe},U.makeTransTickFn=function(ke){return"x"===ke._id.charAt(0)?function(Se){return o(ke._offset+ke.l2p(Se.x),0)}:function(Se){return o(0,ke._offset+ke.l2p(Se.x))}},U.makeTransTickLabelFn=function(ke){var Se=function(Ge){var Qe=Ge.ticklabelposition||"",ot=function(Be){return-1!==Qe.indexOf(Be)},it=ot("top"),mt=ot("left"),xt=ot("right"),Vt=ot("bottom"),$t=ot("inside"),pt=Vt||mt||it||xt;if(!pt&&!$t)return[0,0];var At=Ge.side,Xt=pt?(Ge.tickwidth||0)/2:0,Ct=3,Pt=Ge.tickfont?Ge.tickfont.size:12;return(Vt||it)&&(Xt+=Pt*K,Ct+=(Ge.linewidth||0)/2),(mt||xt)&&(Xt+=(Ge.linewidth||0)/2,Ct+=3),$t&&"top"===At&&(Ct-=Pt*(1-K)),(mt||it)&&(Xt=-Xt),"bottom"!==At&&"right"!==At||(Ct=-Ct),[pt?Xt:0,$t?Ct:0]}(ke),Ce=Se[0],Ve=Se[1];return"x"===ke._id.charAt(0)?function(Ge){return o(Ce+ke._offset+ke.l2p(nt(Ge)),Ve)}:function(Ge){return o(Ve,Ce+ke._offset+ke.l2p(nt(Ge)))}},U.makeTickPath=function(ke,Se,Ce,Ve){Ve||(Ve={});var Ge=Ve.minor;if(Ge&&!ke.minor)return"";var Qe=void 0!==Ve.len?Ve.len:Ge?ke.minor.ticklen:ke.ticklen,ot=ke._id.charAt(0),it=(ke.linewidth||1)/2;return"x"===ot?"M0,"+(Se+it*Ce)+"v"+Qe*Ce:"M"+(Se+it*Ce)+",0h"+Qe*Ce},U.makeLabelFns=function(ke,Se,Ce){var Ve=ke.ticklabelposition||"",Ge=function(kn){return-1!==Ve.indexOf(kn)},Qe=Ge("top"),ot=Ge("left"),it=Ge("right"),mt=Ge("bottom")||ot||Qe||it,xt=Ge("inside"),Vt="inside"===Ve&&"inside"===ke.ticks||!xt&&"outside"===ke.ticks&&"boundaries"!==ke.tickson,$t=0,pt=0,At=Vt?ke.ticklen:0;if(xt?At*=-1:mt&&(At=0),Vt&&($t+=At,Ce)){var Xt=e.deg2rad(Ce);$t=At*Math.cos(Xt)+1,pt=At*Math.sin(Xt)}ke.showticklabels&&(Vt||ke.showline)&&($t+=.2*ke.tickfont.size);var Ct,Pt,Be,tt,dt,Dt={labelStandoff:$t+=(ke.linewidth||1)/2*(xt?-1:1),labelShift:pt},Nt=0,Yt=ke.side,fn=ke._id.charAt(0),nn=ke.tickangle;if("x"===fn)tt=(dt=!xt&&"bottom"===Yt||xt&&"top"===Yt)?1:-1,xt&&(tt*=-1),Ct=pt*tt,Pt=Se+$t*tt,Be=dt?1:-.2,90===Math.abs(nn)&&(xt?Be+=X:Be=-90===nn&&"bottom"===Yt?K:90===nn&&"top"===Yt?X:.5,Nt=X/2*(nn/90)),Dt.xFn=function(kn){return kn.dx+Ct+Nt*kn.fontSize},Dt.yFn=function(kn){return kn.dy+Pt+kn.fontSize*Be},Dt.anchorFn=function(kn,rn){if(mt){if(ot)return"end";if(it)return"start"}return x(rn)&&0!==rn&&180!==rn?rn*tt<0!==xt?"end":"start":"middle"},Dt.heightFn=function(kn,rn,pn){return rn<-60||rn>60?-.5*pn:"top"===ke.side!==xt?-pn:0};else if("y"===fn){if(tt=(dt=!xt&&"left"===Yt||xt&&"right"===Yt)?1:-1,xt&&(tt*=-1),Ct=$t,Pt=pt*tt,Be=0,xt||90!==Math.abs(nn)||(Be=-90===nn&&"left"===Yt||90===nn&&"right"===Yt?K:.5),xt){var In=x(nn)?+nn:0;if(0!==In){var Dn=e.deg2rad(In);Nt=Math.abs(Math.sin(Dn))*K*tt,Be=0}}Dt.xFn=function(kn){return kn.dx+Se-(Ct+kn.fontSize*Be)*tt+Nt*kn.fontSize},Dt.yFn=function(kn){return kn.dy+Pt+kn.fontSize*X},Dt.anchorFn=function(kn,rn){return x(rn)&&90===Math.abs(rn)?"middle":dt?"end":"start"},Dt.heightFn=function(kn,rn,pn){return"right"===ke.side&&(rn*=-1),rn<-30?-pn:rn<30?-.5*pn:0}}return Dt},U.drawTicks=function(ke,Se,Ce){Ce=Ce||{};var Ve=Se._id+"tick",Ge=[].concat(Se.minor&&Se.minor.ticks?Ce.vals.filter(function(ot){return ot.minor&&!ot.noTick}):[]).concat(Se.ticks?Ce.vals.filter(function(ot){return!ot.minor&&!ot.noTick}):[]),Qe=Ce.layer.selectAll("path."+Ve).data(Ge,ct);Qe.exit().remove(),Qe.enter().append("path").classed(Ve,1).classed("ticks",1).classed("crisp",!1!==Ce.crisp).each(function(ot){return i.stroke(y.select(this),ot.minor?Se.minor.tickcolor:Se.tickcolor)}).style("stroke-width",function(ot){return v.crispRound(ke,ot.minor?Se.minor.tickwidth:Se.tickwidth,1)+"px"}).attr("d",Ce.path).style("display",null),sn(Se,[Y]),Qe.attr("transform",Ce.transFn)},U.drawGrid=function(ke,Se,Ce){Ce=Ce||{};var Ve=Se._id+"grid",Ge=Se.minor&&Se.minor.showgrid,Qe=Ge?Ce.vals.filter(function(Be){return Be.minor}):[],ot=Se.showgrid?Ce.vals.filter(function(Be){return!Be.minor}):[],it=Ce.counterAxis;if(it&&U.shouldShowZeroLine(ke,Se,it))for(var mt="array"===Se.tickmode,xt=0;xt<ot.length;xt++){var Vt=ot[xt].x;if(mt?!Vt:Math.abs(Vt)<Se.dtick/100){if(ot=ot.slice(0,xt).concat(ot.slice(xt+1)),!mt)break;xt--}}Se._gw=v.crispRound(ke,Se.gridwidth,1);for(var $t=Ge?v.crispRound(ke,Se.minor.gridwidth,1):0,pt=Ce.layer,At=Ce.minorLayer,Xt=1;Xt>=0;Xt--){var Ct=Xt?pt:At;if(Ct){var Pt=Ct.selectAll("path."+Ve).data(Xt?ot:Qe,ct);Pt.exit().remove(),Pt.enter().append("path").classed(Ve,1).classed("crisp",!1!==Ce.crisp),Pt.attr("transform",Ce.transFn).attr("d",Ce.path).each(function(Be){return i.stroke(y.select(this),Be.minor?Se.minor.gridcolor:Se.gridcolor||"#ddd")}).style("stroke-dasharray",function(Be){return v.dashStyle(Be.minor?Se.minor.griddash:Se.griddash,Be.minor?Se.minor.gridwidth:Se.gridwidth)}).style("stroke-width",function(Be){return(Be.minor?$t:Se._gw)+"px"}).style("display",null),"function"==typeof Ce.path&&Pt.attr("d",Ce.path)}}sn(Se,[V,Z])},U.drawZeroLine=function(ke,Se,Ce){var Ve=Se._id+"zl",Ge=U.shouldShowZeroLine(ke,Se,(Ce=Ce||Ce).counterAxis),Qe=Ce.layer.selectAll("path."+Ve).data(Ge?[{x:0,id:Se._id}]:[]);Qe.exit().remove(),Qe.enter().append("path").classed(Ve,1).classed("zl",1).classed("crisp",!1!==Ce.crisp).each(function(){Ce.layer.selectAll("path").sort(function(ot,it){return G(ot.id,it.id)})}),Qe.attr("transform",Ce.transFn).attr("d",Ce.path).call(i.stroke,Se.zerolinecolor||i.defaultLine).style("stroke-width",v.crispRound(ke,Se.zerolinewidth,Se._gw||1)+"px").style("display",null),sn(Se,[j])},U.drawLabels=function(ke,Se,Ce){Ce=Ce||{};var Ve=ke._fullLayout,Ge=Se._id,Qe=Ge.charAt(0),ot=Ce.cls||Ge+"tick",it=Ce.vals.filter(function(tt){return tt.text}),mt=Ce.labelFns,xt=Ce.secondary?0:Se.tickangle,Vt=(Se._prevTickAngles||{})[ot],$t=Ce.layer.selectAll("g."+ot).data(Se.showticklabels?it:[],ct),pt=[];function At(tt,dt){tt.each(function(Dt){var Nt=y.select(this),Yt=Nt.select(".text-math-group"),fn=mt.anchorFn(Dt,dt),nn=Ce.transFn.call(Nt.node(),Dt)+(x(dt)&&0!=+dt?" rotate("+dt+","+mt.xFn(Dt)+","+(mt.yFn(Dt)-Dt.fontSize/2)+")":""),In=a.lineCount(Nt),Dn=ie*Dt.fontSize,kn=mt.heightFn(Dt,x(dt)?+dt:0,(In-1)*Dn);if(kn&&(nn+=o(0,kn)),Yt.empty()){var rn=Nt.select("text");rn.attr({transform:nn,"text-anchor":fn}),rn.style("opacity",1),Se._adjustTickLabelsOverflow&&Se._adjustTickLabelsOverflow()}else{var pn=v.bBox(Yt.node()).width*{end:-.5,start:.5}[fn];Yt.attr("transform",nn+o(pn,0))}})}$t.enter().append("g").classed(ot,1).append("text").attr("text-anchor","middle").each(function(tt){var dt=y.select(this),Dt=ke._promises.length;dt.call(a.positionText,mt.xFn(tt),mt.yFn(tt)).call(v.font,tt.font,tt.fontSize,tt.fontColor).text(tt.text).call(a.convertToTspans,ke),ke._promises[Dt]?pt.push(ke._promises.pop().then(function(){At(dt,xt)})):At(dt,xt)}),sn(Se,[ee]),$t.exit().remove(),Ce.repositionOnUpdate&&$t.each(function(tt){y.select(this).select("text").call(a.positionText,mt.xFn(tt),mt.yFn(tt))}),Se._adjustTickLabelsOverflow=function(){var tt=Se.ticklabeloverflow;if(tt&&"allow"!==tt){var dt=-1!==tt.indexOf("hide"),Dt="x"===Se._id.charAt(0),Nt=0,Yt=Dt?ke._fullLayout.width:ke._fullLayout.height;if(-1!==tt.indexOf("domain")){var fn=e.simpleMap(Se.range,Se.r2l);Nt=Se.l2p(fn[0])+Se._offset,Yt=Se.l2p(fn[1])+Se._offset}var nn=Math.min(Nt,Yt),In=Math.max(Nt,Yt),Dn=Se.side,kn=1/0,rn=-1/0;for(var pn in $t.each(function(jn){var Kn=y.select(this);if(Kn.select(".text-math-group").empty()){var rr=v.bBox(Kn.node()),lr=0;Dt?(rr.right>In||rr.left<nn)&&(lr=1):(rr.bottom>In||rr.top+(Se.tickangle?0:jn.fontSize/4)<nn)&&(lr=1);var kr=Kn.select("text");lr?dt&&kr.style("opacity",0):(kr.style("opacity",1),kn="bottom"===Dn||"right"===Dn?Math.min(kn,Dt?rr.top:rr.left):-1/0,rn="top"===Dn||"left"===Dn?Math.max(rn,Dt?rr.bottom:rr.right):1/0)}}),Ve._plots){var gn=Ve._plots[pn];if(Se._id===gn.xaxis._id||Se._id===gn.yaxis._id){var Pn=Dt?gn.yaxis:gn.xaxis;Pn&&(Pn["_visibleLabelMin_"+Se._id]=kn,Pn["_visibleLabelMax_"+Se._id]=rn)}}}},Se._hideCounterAxisInsideTickLabels=function(tt){var dt="x"===Se._id.charAt(0),Dt=[];for(var Nt in Ve._plots){var Yt=Ve._plots[Nt];Se._id!==Yt.xaxis._id&&Se._id!==Yt.yaxis._id||Dt.push(dt?Yt.yaxis:Yt.xaxis)}Dt.forEach(function(fn,nn){fn&&Mn(fn)&&(tt||[j,Z,V,Y,ee]).forEach(function(In){var Dn="tick"===In.K&&"text"===In.L&&"period"===Se.ticklabelmode,kn=Ve._plots[Se._mainSubplot];(In.K===j.K?kn.zerolinelayer.selectAll("."+Se._id+"zl"):In.K===Z.K?kn.minorGridlayer.selectAll("."+Se._id):In.K===V.K?kn.gridlayer.selectAll("."+Se._id):kn[Se._id.charAt(0)+"axislayer"]).each(function(){var rn=y.select(this);In.L&&(rn=rn.selectAll(In.L)),rn.each(function(pn){var gn=Se.l2p(Dn?nt(pn):pn.x)+Se._offset,Pn=y.select(this);gn<Se["_visibleLabelMax_"+fn._id]&&gn>Se["_visibleLabelMin_"+fn._id]?Pn.style("display","none"):"tick"!==In.K||nn||Pn.style("display",null)})})})})},At($t,Vt+1?Vt:xt);var Xt=null;Se._selections&&(Se._selections[ot]=$t);var Ct=[function(){return pt.length&&Promise.all(pt)}];Se.automargin&&Ve._redrawFromAutoMarginCount&&90===Vt?(Xt=90,Ct.push(function(){At($t,Vt)})):Ct.push(function(){if(At($t,xt),it.length&&"x"===Qe&&!x(xt)&&("log"!==Se.type||"D"!==String(Se.dtick).charAt(0))){Xt=0;var tt,dt=0,Dt=[];if($t.each(function(Kn){dt=Math.max(dt,Kn.fontSize);var rr=Se.l2p(Kn.x),lr=Bt(this),kr=v.bBox(lr.node());Dt.push({top:0,bottom:10,height:10,left:rr-kr.width/2,right:rr+kr.width/2+2,width:kr.width+2})}),"boundaries"!==Se.tickson&&!Se.showdividers||Ce.secondary){var Nt=it.length,Yt=Math.abs((it[Nt-1].x-it[0].x)*Se._m)/(Nt-1),fn=Se.ticklabelposition||"",nn=function(Kn){return-1!==fn.indexOf(Kn)},In=nn("top"),Dn=nn("left"),kn=nn("right"),rn=nn("bottom")||Dn||In||kn?(Se.tickwidth||0)+6:0,pn=Yt<2.5*dt||"multicategory"===Se.type||"realaxis"===Se._name;for(tt=0;tt<Dt.length-1;tt++)if(e.bBoxIntersect(Dt[tt],Dt[tt+1],rn)){Xt=pn?90:30;break}}else{var gn=2;for(Se.ticks&&(gn+=Se.tickwidth/2),tt=0;tt<Dt.length;tt++){var Pn=it[tt].xbnd,jn=Dt[tt];if(null!==Pn[0]&&jn.left-Se.l2p(Pn[0])<gn||null!==Pn[1]&&Se.l2p(Pn[1])-jn.right<gn){Xt=90;break}}}Xt&&At($t,Xt)}}),Se._tickAngles&&Ct.push(function(){Se._tickAngles[ot]=null===Xt?x(xt)?xt:0:Xt});var Pt=Se._anchorAxis;Pt&&Pt.autorange&&Mn(Se)&&!te(Ve,Se._id)&&(Ve._insideTickLabelsAutorange||(Ve._insideTickLabelsAutorange={}),Ve._insideTickLabelsAutorange[Pt._name+".autorange"]=Pt.autorange,Ct.push(function(){$t.each(function(tt,dt){var Dt=Bt(this);Dt.select(".text-math-group").empty()&&(Se._vals[dt].bb=v.bBox(Dt.node()))})}));var Be=e.syncOrAsync(Ct);return Be&&Be.then&&ke._promises.push(Be),Be},U.getPxPosition=function(ke,Se){var Ce,Ve=ke._fullLayout._size,Ge=Se._id.charAt(0),Qe=Se.side;return"free"!==Se.anchor?Ce=Se._anchorAxis:"x"===Ge?Ce={_offset:Ve.t+(1-(Se.position||0))*Ve.h,_length:0}:"y"===Ge&&(Ce={_offset:Ve.l+(Se.position||0)*Ve.w,_length:0}),"top"===Qe||"left"===Qe?Ce._offset:"bottom"===Qe||"right"===Qe?Ce._offset+Ce._length:void 0},U.shouldShowZeroLine=function(ke,Se,Ce){var Ve=e.simpleMap(Se.range,Se.r2l);return Ve[0]*Ve[1]<=0&&Se.zeroline&&("linear"===Se.type||"-"===Se.type)&&!(Se.rangebreaks&&Se.maskBreaks(0)===P)&&(kt(Se,0)||!function(Ge,Qe,ot,it){var mt=ot._mainAxis;if(mt){var xt=Ge._fullLayout,Vt=Qe._id.charAt(0),$t=U.counterLetter(Qe._id),pt=Qe._offset+(Math.abs(it[0])<Math.abs(it[1])==("x"===Vt)?0:Qe._length),Xt=xt._plots[ot._mainSubplot];if(!(Xt.mainplotinfo||Xt).overlays.length)return At(ot);for(var Ct=U.list(Ge,$t),Pt=0;Pt<Ct.length;Pt++){var Be=Ct[Pt];if(Be._mainAxis===mt&&At(Be))return!0}}function At(tt){if(!tt.showline||!tt.linewidth)return!1;var dt=Math.max((tt.linewidth+Qe.zerolinewidth)/2,1);function Dt(fn){return"number"==typeof fn&&Math.abs(fn-pt)<dt}if(Dt(tt._mainLinePosition)||Dt(tt._mainMirrorPosition))return!0;var Nt=tt._linepositions||{};for(var Yt in Nt)if(Dt(Nt[Yt][0])||Dt(Nt[Yt][1]))return!0}}(ke,Se,Ce,Ve)||function(Ge,Qe){for(var ot=Ge._fullData,it=Qe._mainSubplot,mt=Qe._id.charAt(0),xt=0;xt<ot.length;xt++){var Vt=ot[xt];if(!0===Vt.visible&&Vt.xaxis+Vt.yaxis===it&&(_.traceIs(Vt,"bar-like")&&Vt.orientation==={x:"h",y:"v"}[mt]||Vt.fill&&Vt.fill.charAt(Vt.fill.length-1)===mt))return!0}return!1}(ke,Se))},U.clipEnds=function(ke,Se){return Se.filter(function(Ce){return kt(ke,Ce.x)})},U.allowAutoMargin=function(ke){for(var Se=U.list(ke,"",!0),Ce=0;Ce<Se.length;Ce++){var Ve=Se[Ce];Ve.automargin&&(M.allowAutoMargin(ke,Et(Ve)),Ve.mirror&&M.allowAutoMargin(ke,ht(Ve))),_.getComponentMethod("rangeslider","isVisible")(Ve)&&M.allowAutoMargin(ke,at(Ve))}},U.swap=function(ke,Se){for(var Ce=function(Ge,Qe){var ot,it,mt=[];for(ot=0;ot<Qe.length;ot++){var xt=[],Vt=Ge._fullData[Qe[ot]].xaxis,$t=Ge._fullData[Qe[ot]].yaxis;if(Vt&&$t){for(it=0;it<mt.length;it++)-1===mt[it].x.indexOf(Vt)&&-1===mt[it].y.indexOf($t)||xt.push(it);if(xt.length){var pt,At=mt[xt[0]];if(xt.length>1)for(it=1;it<xt.length;it++)Ft(At.x,(pt=mt[xt[it]]).x),Ft(At.y,pt.y);Ft(At.x,[Vt]),Ft(At.y,[$t])}else mt.push({x:[Vt],y:[$t]})}}return mt}(ke,Se),Ve=0;Ve<Ce.length;Ve++)en(ke,Ce[Ve].x,Ce[Ve].y)}},{"../../components/color":366,"../../components/drawing":388,"../../components/titles":464,"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"./autorange":553,"./axis_autotype":555,"./axis_ids":558,"./clean_ticks":560,"./layout_attributes":569,"./set_convert":576,"@plotly/d3":58,"fast-isnumeric":190}],555:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../lib"),M=b("../../constants/numerical").BADNUM,_=x.isArrayOrTypedArray,e=x.isDateTime,o=x.cleanNumber,a=Math.round;function l(v,h){return h?y(v):"number"==typeof v}function i(v){return Math.max(1,(v-1)/1e3)}oe.exports=function(v,h,s){var w,d=v,p=s.noMultiCategory;if(_(d)&&!d.length)return"-";if(!p&&_((w=d)[0])&&_(w[1]))return"multicategory";if(p&&Array.isArray(d[0])){for(var f=[],g=0;g<d.length;g++)if(_(d[g]))for(var m=0;m<d[g].length;m++)f.push(d[g][m]);d=f}if(function(w,c){for(var A=w.length,k=i(A),C=0,E=0,L={},D=0;D<A;D+=k){var F=w[a(D)],I=String(F);L[I]||(L[I]=1,e(F,c)&&C++,y(F)&&E++)}return C>2*E}(d,h))return"date";var u="strict"!==s.autotypenumbers;return function(w,c){for(var A=w.length,k=i(A),C=0,E=0,L={},D=0;D<A;D+=k){var F=w[a(D)],I=String(F);if(!L[I]){L[I]=1;var P=typeof F;"boolean"===P?E++:(c?o(F)!==M:"number"===P)?C++:"string"===P&&E++}}return E>2*C}(d,u)?"category":function(w,c){for(var A=w.length,k=0;k<A;k++)if(l(w[k],c))return!0;return!1}(d,u)?"linear":"-"}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],556:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../registry"),M=b("../../lib"),_=b("../../plot_api/plot_template"),e=b("../array_container_defaults"),o=b("./layout_attributes"),a=b("./tick_value_defaults"),l=b("./tick_mark_defaults"),i=b("./tick_label_defaults"),v=b("./prefix_suffix_defaults"),h=b("./category_order_defaults"),s=b("./line_grid_defaults"),d=b("./set_convert"),p=b("./constants").WEEKDAY_PATTERN,f=b("./constants").HOUR_PATTERN;function g(w,c,A){function k(P,j){return M.coerce(w,c,o.rangebreaks,P,j)}if(k("enabled")){var C=k("bounds");if(C&&C.length>=2){var E,L,D="";if(2===C.length)for(E=0;E<2;E++)if(L=u(C[E])){D=p;break}var N=k("pattern",D);if(N===p)for(E=0;E<2;E++)(L=u(C[E]))&&(c.bounds[E]=C[E]=L-1);if(N)for(E=0;E<2;E++)switch(L=C[E],N){case p:if(!y(L)||(L=+L)!==Math.floor(L)||L<0||L>=7)return void(c.enabled=!1);c.bounds[E]=C[E]=L;break;case f:if(!y(L)||(L=+L)<0||L>24)return void(c.enabled=!1);c.bounds[E]=C[E]=L}if(!1===A.autorange){var F=A.range;if(F[0]<F[1]){if(C[0]<F[0]&&C[1]>F[1])return void(c.enabled=!1)}else if(C[0]>F[0]&&C[1]<F[1])return void(c.enabled=!1)}}else{var I=k("values");if(!I||!I.length)return void(c.enabled=!1);k("dvalue")}}}oe.exports=function(w,c,A,k,C){var E,L=k.letter,D=k.font||{},N=k.splomStash||{},F=A("visible",!k.visibleDflt),P=c.type||(c._template||{}).type||"-";"date"===P&&(x.getComponentMethod("calendars","handleDefaults")(w,c,"calendar",k.calendar),k.noTicklabelmode||(E=A("ticklabelmode")));var j="";k.noTicklabelposition&&"multicategory"!==P||(j=M.coerce(w,c,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===E?["outside","inside"]:"x"===L?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),k.noTicklabeloverflow||A("ticklabeloverflow",-1!==j.indexOf("inside")?"hide past domain":"category"===P||"multicategory"===P?"allow":"hide past div"),d(c,C);var V=!c.isValidRange(w.range);V&&k.reverseDflt&&(V="reversed"),!A("autorange",V)||"linear"!==P&&"-"!==P||A("rangemode"),A("range"),c.cleanRange(),h(w,c,A,k),"category"===P||k.noHover||A("hoverformat");var Z=A("color"),Y=Z!==o.color.dflt?Z:D.color,ee=N.label||C._dfltTitle[L];if(v(w,c,A,P,k),!F)return c;A("title.text",ee),M.coerceFont(A,"title.font",{family:D.family,size:M.bigFont(D.size),color:Y}),a(w,c,A,P);var re=k.hasMinor;if(re&&(_.newContainer(c,"minor"),a(w,c,A,P,{isMinor:!0})),i(w,c,A,P,k),l(w,c,A,k),re){var X=k.isMinor;k.isMinor=!0,l(w,c,A,k),k.isMinor=X}s(w,c,A,{dfltColor:Z,bgColor:k.bgColor,showGrid:k.showGrid,hasMinor:re,attributes:o}),!re||c.minor.ticks||c.minor.showgrid||delete c.minor,(c.showline||c.ticks)&&A("mirror"),k.automargin&&A("automargin");var K,ie="multicategory"===P;if(k.noTickson||"category"!==P&&!ie||!c.ticks&&!c.showgrid||(ie&&(K="boundaries"),"boundaries"===A("tickson",K)&&delete c.ticklabelposition),ie&&A("showdividers")&&(A("dividercolor"),A("dividerwidth")),"date"===P)if(e(w,c,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:g}),c.rangebreaks.length){for(var q=0;q<c.rangebreaks.length;q++)if(c.rangebreaks[q].pattern===p){c._hasDayOfWeekBreaks=!0;break}if(d(c,C),C._has("scattergl")||C._has("splom"))for(var U=0;U<k.data.length;U++){var W=k.data[U];"scattergl"!==W.type&&"splom"!==W.type||(W.visible=!1,M.warn(W.type+" traces do not work on axes with rangebreaks. Setting trace "+W.index+" to `visible: false`."))}}else delete c.rangebreaks;return c};var m={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function u(w){if("string"==typeof w)return m[w.substr(0,3).toLowerCase()]}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../array_container_defaults":549,"./category_order_defaults":559,"./constants":561,"./layout_attributes":569,"./line_grid_defaults":571,"./prefix_suffix_defaults":573,"./set_convert":576,"./tick_label_defaults":578,"./tick_mark_defaults":579,"./tick_value_defaults":580,"fast-isnumeric":190}],557:[function(b,oe,se){"use strict";var y=b("../../constants/docs"),x=y.FORMAT_LINK,M=y.DATE_FORMAT_LINK;function _(o,a){return["Sets the "+o+" formatting rule"+(a?"for `"+a+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+x+"."].join(" ")}function e(o,a){return _(o,a)+[" And for dates see: "+M+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}oe.exports={axisHoverFormat:function(o,a){return{valType:"string",dflt:"",editType:"none",description:(a?_:e)("hover text",o)+["By default the values are formatted using "+(a?"generic number format":"`"+o+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:_,descriptionWithDates:e}},{"../../constants/docs":474}],558:[function(b,oe,se){"use strict";var y=b("../../registry"),x=b("./constants");function M(_,e){if(e&&e.length)for(var o=0;o<e.length;o++)if(e[o][_])return!0;return!1}se.id2name=function(_){if("string"==typeof _&&_.match(x.AX_ID_PATTERN)){var e=_.split(" ")[0].substr(1);return"1"===e&&(e=""),_.charAt(0)+"axis"+e}},se.name2id=function(_){if(_.match(x.AX_NAME_PATTERN)){var e=_.substr(5);return"1"===e&&(e=""),_.charAt(0)+e}},se.cleanId=function(_,e,o){var a=/( domain)$/.test(_);if("string"==typeof _&&_.match(x.AX_ID_PATTERN)&&(!e||_.charAt(0)===e)&&(!a||o)){var l=_.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===l&&(l=""),_.charAt(0)+l+(a&&o?" domain":"")}},se.list=function(_,e,o){var a=_._fullLayout;if(!a)return[];var l,i=se.listIds(_,e),v=new Array(i.length);for(l=0;l<i.length;l++){var h=i[l];v[l]=a[h.charAt(0)+"axis"+h.substr(1)]}if(!o){var s=a._subplots.gl3d||[];for(l=0;l<s.length;l++){var d=a[s[l]];e?v.push(d[e+"axis"]):v.push(d.xaxis,d.yaxis,d.zaxis)}}return v},se.listIds=function(_,e){var o=_._fullLayout;if(!o)return[];var a=o._subplots;return e?a[e+"axis"]:a.xaxis.concat(a.yaxis)},se.getFromId=function(_,e,o){var a=_._fullLayout;return e=void 0===e||"string"!=typeof e?e:e.replace(" domain",""),"x"===o?e=e.replace(/y[0-9]*/,""):"y"===o&&(e=e.replace(/x[0-9]*/,"")),a[se.id2name(e)]},se.getFromTrace=function(_,e,o){var a=_._fullLayout,l=null;if(y.traceIs(e,"gl3d")){var i=e.scene;"scene"===i.substr(0,5)&&(l=a[i][o+"axis"])}else l=se.getFromId(_,e[o+"axis"]||o);return l},se.idSort=function(_,e){var o=_.charAt(0),a=e.charAt(0);return o!==a?o>a?1:-1:+(_.substr(1)||1)-+(e.substr(1)||1)},se.ref2id=function(_){return!!/^[xyz]/.test(_)&&_.split(" ")[0]},se.isLinked=function(_,e){return M(e,_._axisMatchGroups)||M(e,_._axisConstraintGroups)}},{"../../registry":638,"./constants":561}],559:[function(b,oe,se){"use strict";oe.exports=function(y,x,M,_){if("category"===x.type){var e,o=y.categoryarray,a=Array.isArray(o)&&o.length>0;a&&(e="array");var l,i=M("categoryorder",e);"array"===i&&(l=M("categoryarray")),a||"array"!==i||(i=x.categoryorder="trace"),"trace"===i?x._initialCategories=[]:"array"===i?x._initialCategories=l.slice():(l=function(v,h){var s,d,p,f=h.dataAttr||v._id.charAt(0),g={};if(h.axData)s=h.axData;else for(s=[],d=0;d<h.data.length;d++){var m=h.data[d];m[f+"axis"]===v._id&&s.push(m)}for(d=0;d<s.length;d++){var u=s[d][f];for(p=0;p<u.length;p++){var w=u[p];null!=w&&(g[w]=1)}}return Object.keys(g)}(x,_).sort(),"category ascending"===i?x._initialCategories=l:"category descending"===i&&(x._initialCategories=l.reverse()))}}},{}],560:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../lib"),M=b("../../constants/numerical"),_=M.ONEDAY,e=M.ONEWEEK;se.dtick=function(o,a){var l="log"===a,i="date"===a,v="category"===a,h=i?_:1;if(!o)return h;if(y(o))return(o=Number(o))<=0?h:v?Math.max(1,Math.round(o)):i?Math.max(.1,o):o;if("string"!=typeof o||!i&&!l)return h;var s=o.charAt(0),d=o.substr(1);return(d=y(d)?Number(d):0)<=0||!(i&&"M"===s&&d===Math.round(d)||l&&"L"===s||l&&"D"===s&&(1===d||2===d))?h:o},se.tick0=function(o,a,l,i){return"date"===a?x.cleanDate(o,x.dateTick0(l,i%e==0?1:0)):"D1"!==i&&"D2"!==i?y(o)?Number(o):0:void 0}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],561:[function(b,oe,se){"use strict";var y=b("../../lib/regex").counter;oe.exports={idRegex:{x:y("x","( domain)?"),y:y("y","( domain)?")},attrRegex:y("[xy]axis"),xAxisMatch:y("xaxis"),yAxisMatch:y("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":520}],562:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./autorange"),M=b("./axis_ids").id2name,_=b("./layout_attributes"),e=b("./scale_zoom"),o=b("./set_convert"),a=b("../../constants/numerical").ALMOST_EQUAL,l=b("../../constants/alignment").FROM_BL;function i(g,m,u){var w=u.axIds,c=u.layoutOut,A=u.hasImage,k=c._axisConstraintGroups,C=c._axisMatchGroups,E=m._id,L=E.charAt(0),D=((c._splomAxes||{})[L]||{})[E]||{},N=m._id,F="x"===N.charAt(0);function I(ae,G){return y.coerce(g,m,_,ae,G)}m._matchGroup=null,m._constraintGroup=null,I("constrain",A?"domain":"range"),y.coerce(g,m,{constraintoward:{valType:"enumerated",values:F?["left","center","right"]:["bottom","middle","top"],dflt:F?"center":"middle"}},"constraintoward");var P,j,V=m.type,Z=[];for(P=0;P<w.length;P++)(j=w[P])!==N&&c[M(j)].type===V&&Z.push(j);var Y=h(k,N);if(Y){var ee=[];for(P=0;P<Z.length;P++)Y[j=Z[P]]||ee.push(j);Z=ee}var re,X,K=Z.length;K&&(g.matches||D.matches)&&(re=y.coerce(g,m,{matches:{valType:"enumerated",values:Z,dflt:-1!==Z.indexOf(D.matches)?D.matches:void 0}},"matches"));var ie=A&&!F?m.anchor:void 0;if(K&&!re&&(g.scaleanchor||ie)&&(X=y.coerce(g,m,{scaleanchor:{valType:"enumerated",values:Z}},"scaleanchor",ie)),re){m._matchGroup=s(C,N,re,1);var q=c[M(re)],U=v(c,m)/v(c,q);F!==("x"===re.charAt(0))&&(U=(F?"x":"y")+U),s(k,N,re,U)}else g.matches&&-1!==w.indexOf(g.matches)&&y.warn("ignored "+m._name+'.matches: "'+g.matches+'" to avoid an infinite loop');if(X){var W=I("scaleratio");W||(W=m.scaleratio=1),s(k,N,X,W)}else g.scaleanchor&&-1!==w.indexOf(g.scaleanchor)&&y.warn("ignored "+m._name+'.scaleanchor: "'+g.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function v(g,m){var u=m.domain;return u||(u=g[M(m.overlaying)].domain),u[1]-u[0]}function h(g,m){for(var u=0;u<g.length;u++)if(g[u][m])return g[u];return null}function s(g,m,u,w){var c,A,k,C,E,L=h(g,m);null===L?((L={})[m]=1,E=g.length,g.push(L)):E=g.indexOf(L);var D=Object.keys(L);for(c=0;c<g.length;c++)if(k=g[c],c!==E&&k[u]){var N=k[u];for(A=0;A<D.length;A++)k[C=D[A]]=d(N,d(w,L[C]));return void g.splice(E,1)}if(1!==w)for(A=0;A<D.length;A++){var F=D[A];L[F]=d(w,L[F])}L[u]=1}function d(g,m){var u,w,c="",A="";"string"==typeof g&&(u=(c=g.match(/^[xy]*/)[0]).length,g=+g.substr(u)),"string"==typeof m&&(w=(A=m.match(/^[xy]*/)[0]).length,m=+m.substr(w));var k=g*m;return u||w?u&&w&&c.charAt(0)!==A.charAt(0)?u===w?k:(u>w?c.substr(w):A.substr(u))+k:c+A+g*m:k}function p(g,m){for(var u=m._size,w=u.h/u.w,c={},A=Object.keys(g),k=0;k<A.length;k++){var C=A[k],E=g[C];if("string"==typeof E){var L=E.match(/^[xy]*/)[0],D=L.length;E=+E.substr(D);for(var N="y"===L.charAt(0)?w:1/w,F=0;F<D;F++)E*=N}c[C]=E}return c}function f(g,m){var u=g._inputDomain,c=u[0]+(u[1]-u[0])*l[g.constraintoward];g.domain=g._input.domain=[c+(u[0]-c)/m,c+(u[1]-c)/m],g.setScale()}se.handleDefaults=function(g,m,u){var w,c,A,k,C,E,L,D,N=u.axIds,F=u.axHasImage,I=m._axisConstraintGroups=[],P=m._axisMatchGroups=[];for(w=0;w<N.length;w++)i(C=g[k=M(N[w])],E=m[k],{axIds:N,layoutOut:m,hasImage:F[k]});function j(q,U){for(w=0;w<q.length;w++)for(A in c=q[w])m[M(A)][U]=c}for(j(P,"_matchGroup"),w=0;w<I.length;w++)for(A in c=I[w])if((E=m[M(A)]).fixedrange){for(var V in c){var Z=M(V);!1===(g[Z]||{}).fixedrange&&y.warn("fixedrange was specified as false for axis "+Z+" but was overridden because another axis in its constraint group has fixedrange true"),m[Z].fixedrange=!0}break}for(w=0;w<I.length;){for(A in c=I[w]){(E=m[M(A)])._matchGroup&&Object.keys(E._matchGroup).length===Object.keys(c).length&&(I.splice(w,1),w--);break}w++}j(I,"_constraintGroup");var Y=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],ee=!1,re=!1;function X(){D=E[L],"rangebreaks"===L&&(re=E._hasDayOfWeekBreaks)}for(w=0;w<P.length;w++){c=P[w];for(var K=0;K<Y.length;K++){var ie;for(A in L=Y[K],D=null,c)if(C=g[k=M(A)],L in(E=m[k])){if(!E.matches&&(ie=E,L in C)){X();break}null===D&&L in C&&X()}if("range"===L&&D&&(ee=!0),"autorange"===L&&null===D&&ee&&(D=!1),null===D&&L in ie&&(D=ie[L]),null!==D)for(A in c)(E=m[M(A)])[L]="range"===L?D.slice():D,"rangebreaks"===L&&(E._hasDayOfWeekBreaks=re,o(E,m))}}},se.enforce=function(g){var m,u,w,c,A,k,C,E,L=g._fullLayout,D=L._axisConstraintGroups||[];for(m=0;m<D.length;m++){w=p(D[m],L);var N=Object.keys(w),F=1/0,I=0,P=1/0,j={},V={},Z=!1;for(u=0;u<N.length;u++)V[c=N[u]]=A=L[M(c)],A._inputDomain?A.domain=A._inputDomain.slice():A._inputDomain=A.domain.slice(),A._inputRange||(A._inputRange=A.range.slice()),A.setScale(),j[c]=k=Math.abs(A._m)/w[c],F=Math.min(F,k),"domain"!==A.constrain&&A._constraintShrinkable||(P=Math.min(P,k)),delete A._constraintShrinkable,I=Math.max(I,k),"domain"===A.constrain&&(Z=!0);if(!(F>a*I)||Z)for(u=0;u<N.length;u++)if(k=j[c=N[u]],C=(A=V[c]).constrain,k!==P||"domain"===C)if(E=k/P,"range"===C)e(A,E);else{var Y=A._inputDomain,ee=(A.domain[1]-A.domain[0])/(Y[1]-Y[0]),re=(A.r2l(A.range[1])-A.r2l(A.range[0]))/(A.r2l(A._inputRange[1])-A.r2l(A._inputRange[0]));if((E/=ee)*re<1){A.domain=A._input.domain=Y.slice(),e(A,E);continue}if(re<1&&(A.range=A._input.range=A._inputRange.slice(),E*=re),A.autorange){var X=A.r2l(A.range[0]),K=A.r2l(A.range[1]),ie=(X+K)/2,q=ie,U=ie,W=Math.abs(K-ie),ae=ie-W*E*1.0001,G=ie+W*E*1.0001,te=x.makePadFn(L,A,0),ne=x.makePadFn(L,A,1);f(A,E);var le,ue,pe=Math.abs(A._m),de=x.concatExtremes(g,A),_e=de.min,me=de.max;for(ue=0;ue<_e.length;ue++)(le=_e[ue].val-te(_e[ue])/pe)>ae&&le<q&&(q=le);for(ue=0;ue<me.length;ue++)(le=me[ue].val+ne(me[ue])/pe)<G&&le>U&&(U=le);E/=(U-q)/(2*W),q=A.l2r(q),U=A.l2r(U),A.range=A._input.range=X<K?[q,U]:[U,q]}f(A,E)}}},se.getAxisGroup=function(g,m){for(var u=g._axisMatchGroups,w=0;w<u.length;w++)if(u[w][m])return"g"+w;return m},se.clean=function(g,m){if(m._inputDomain){for(var u=!1,w=m._id,c=g._fullLayout._axisConstraintGroups,A=0;A<c.length;A++)if(c[A][w]){u=!0;break}u&&"domain"===m.constrain||(m._input.domain=m.domain=m._inputDomain,delete m._inputDomain)}}},{"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"./autorange":553,"./axis_ids":558,"./layout_attributes":569,"./scale_zoom":574,"./set_convert":576}],563:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../lib"),M=x.numberFormat,_=b("tinycolor2"),e=b("has-passive-events"),o=b("../../registry"),a=x.strTranslate,l=b("../../lib/svg_text_utils"),i=b("../../components/color"),v=b("../../components/drawing"),h=b("../../components/fx"),s=b("./axes"),d=b("../../lib/setcursor"),p=b("../../components/dragelement"),f=b("../../components/dragelement/helpers"),g=f.selectingOrDrawing,m=f.freeMode,u=b("../../constants/alignment").FROM_TL,w=b("../../lib/clear_gl_canvases"),c=b("../../plot_api/subroutines").redrawReglTraces,A=b("../plots"),k=b("./axis_ids").getFromId,C=b("./select").prepSelect,E=b("./select").clearSelect,L=b("./select").selectOnClick,D=b("./scale_zoom"),N=b("./constants"),F=N.MINDRAG,I=N.MINZOOM,P=!0;function j(le,ue,pe,de){var _e=x.ensureSingle(le.draglayer,ue,pe,function(me){me.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",le.id)});return _e.call(d,de),_e.node()}function V(le,ue,pe,de,_e,me,we){var De=j(le,"rect",ue,pe);return y.select(De).call(v.setRect,de,_e,me,we),De}function Z(le,ue){for(var pe=0;pe<le.length;pe++)if(!le[pe].fixedrange)return ue;return""}function Y(le,ue,pe,de,_e){for(var me=0;me<le.length;me++){var we=le[me];if(!we.fixedrange)if(we.rangebreaks){var De="y"===we._id.charAt(0),Ie=De?1-pe:pe;de[we._name+".range[0]"]=we.l2r(we.p2l((De?1-ue:ue)*we._length)),de[we._name+".range[1]"]=we.l2r(we.p2l(Ie*we._length))}else{var je=we._rl[0],ye=we._rl[1]-je;de[we._name+".range[0]"]=we.l2r(je+ye*ue),de[we._name+".range[1]"]=we.l2r(je+ye*pe)}}if(_e&&_e.length){var Me=(ue+(1-pe))/2;Y(_e,Me,1-Me,de,[])}}function ee(le,ue){for(var pe=0;pe<le.length;pe++){var de=le[pe];if(!de.fixedrange)if(de.rangebreaks){var _e=de._length,me=(de.p2l(0+ue)-de.p2l(0)+(de.p2l(_e+ue)-de.p2l(_e)))/2;de.range=[de.l2r(de._rl[0]-me),de.l2r(de._rl[1]-me)]}else de.range=[de.l2r(de._rl[0]-ue/de._m),de.l2r(de._rl[1]-ue/de._m)]}}function re(le){return 1-(le>=0?Math.min(le,.9):1/(1/Math.max(le,-.3)+3.222))}function X(le,ue,pe,de,_e){return le.append("path").attr("class","zoombox").style({fill:ue>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",a(pe,de)).attr("d",_e+"Z")}function K(le,ue,pe){return le.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("transform",a(ue,pe)).attr("d","M0,0Z")}function ie(le,ue,pe,de,_e,me){le.attr("d",de+"M"+pe.l+","+pe.t+"v"+pe.h+"h"+pe.w+"v-"+pe.h+"h-"+pe.w+"Z"),q(le,ue,_e,me)}function q(le,ue,pe,de){pe||(le.transition().style("fill",de>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ue.transition().style("opacity",1).duration(200))}function U(le){y.select(le).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function W(le){P&&le.data&&le._context.showTips&&(x.notifier(x._(le,"Double-click to zoom back out"),"long"),P=!1)}function ae(le){var ue=Math.floor(Math.min(le.b-le.t,le.r-le.l,I)/2);return"M"+(le.l-3.5)+","+(le.t-.5+ue)+"h3v"+-ue+"h"+ue+"v-3h-"+(ue+3)+"ZM"+(le.r+3.5)+","+(le.t-.5+ue)+"h-3v"+-ue+"h"+-ue+"v-3h"+(ue+3)+"ZM"+(le.r+3.5)+","+(le.b+.5-ue)+"h-3v"+ue+"h"+-ue+"v3h"+(ue+3)+"ZM"+(le.l-3.5)+","+(le.b+.5-ue)+"h3v"+ue+"h"+ue+"v3h-"+(ue+3)+"Z"}function G(le,ue,pe,de,_e){for(var me,we,De,Le,Ie=!1,je={},ye={},Me=(_e||{}).xaHash,Oe=(_e||{}).yaHash,Pe=0;Pe<ue.length;Pe++){var Re=ue[Pe];for(me in pe)if(Re[me]){for(De in Re)_e&&(Me[De]||Oe[De])||("x"===De.charAt(0)?pe:de)[De]||(je[De]=me);for(we in de)_e&&(Me[we]||Oe[we])||!Re[we]||(Ie=!0)}for(we in de)if(Re[we])for(Le in Re)_e&&(Me[Le]||Oe[Le])||("x"===Le.charAt(0)?pe:de)[Le]||(ye[Le]=we)}Ie&&(x.extendFlat(je,ye),ye={});var Ue={},qe=[];for(De in je){var Xe=k(le,De);qe.push(Xe),Ue[Xe._id]=Xe}var lt={},He=[];for(Le in ye){var $e=k(le,Le);He.push($e),lt[$e._id]=$e}return{xaHash:Ue,yaHash:lt,xaxes:qe,yaxes:He,xLinks:je,yLinks:ye,isSubplotConstrained:Ie}}function te(le,ue){if(e){var pe=void 0!==le.onwheel?"wheel":"mousewheel";le._onwheel&&le.removeEventListener(pe,le._onwheel),le._onwheel=ue,le.addEventListener(pe,ue,{passive:!1})}else void 0!==le.onwheel?le.onwheel=ue:void 0!==le.onmousewheel?le.onmousewheel=ue:le.isAddedWheelEvent||(le.isAddedWheelEvent=!0,le.addEventListener("wheel",ue,{passive:!1}))}function ne(le){var ue=[];for(var pe in le)ue.push(le[pe]);return ue}oe.exports={makeDragBox:function(le,ue,pe,de,_e,me,we,De){var Le,Ie,je,ye,Me,Oe,Pe,Re,Ue,qe,Xe,lt,He,$e,et,nt,ct,bt,kt,Bt,Et,ht,at,Ft=le._fullLayout._zoomlayer,en=we+De==="nsew",Qt=1===(we+De).length;function tn(){if(Ue=(Le=ue.xaxis)._length,qe=(Ie=ue.yaxis)._length,Pe=Le._offset,Re=Ie._offset,(je={})[Le._id]=Le,(ye={})[Ie._id]=Ie,we&&De)for(var rn=ue.overlays,pn=0;pn<rn.length;pn++){var gn=rn[pn].xaxis;je[gn._id]=gn;var Pn=rn[pn].yaxis;ye[Pn._id]=Pn}Me=ne(je),Oe=ne(ye),He=Z(Me,De),$e=Z(Oe,we),et=!$e&&!He,lt=G(le,le._fullLayout._axisMatchGroups,je,ye);var jn=(Xe=G(le,le._fullLayout._axisConstraintGroups,je,ye,lt)).isSubplotConstrained||lt.isSubplotConstrained;nt=De||jn,ct=we||jn;var Kn=le._fullLayout;bt=Kn._has("scattergl"),kt=Kn._has("splom"),Bt=Kn._has("svg")}tn();var rn,dn=(rn=$e+He)?"nsew"===rn?en?"":"pan"===le._fullLayout.dragmode?"move":"crosshair":rn.toLowerCase()+"-resize":"pointer",Mn=V(ue,we+De+"drag",dn,pe,de,_e,me);if(et&&!en)return Mn.onmousedown=null,Mn.style.pointerEvents="none",Mn;var sn,ke,Se,Ce,Ve,Ge,Qe,ot,it,mt,xt={element:Mn,gd:le,plotinfo:ue};function Vt(){xt.plotinfo.selection=!1,E(le)}function $t(rn,pn){var sr,oi,Gr,Lr,Jr,gn=xt.gd;if(gn._fullLayout._activeShapeIndex>=0)gn._fullLayout._deactivateShape(gn);else{var Pn=gn._fullLayout.clickmode;if(U(gn),2!==rn||Qt||function(){if(!le._transitioningWithDuration){var rn=le._context.doubleClick,pn=[];He&&(pn=pn.concat(Me)),$e&&(pn=pn.concat(Oe)),lt.xaxes&&(pn=pn.concat(lt.xaxes)),lt.yaxes&&(pn=pn.concat(lt.yaxes));var gn,Pn,jn,Kn={};if("reset+autosize"===rn)for(rn="autosize",Pn=0;Pn<pn.length;Pn++)if((gn=pn[Pn])._rangeInitial&&(gn.range[0]!==gn._rangeInitial[0]||gn.range[1]!==gn._rangeInitial[1])||!gn._rangeInitial&&!gn.autorange){rn="reset";break}if("autosize"===rn)for(Pn=0;Pn<pn.length;Pn++)(gn=pn[Pn]).fixedrange||(Kn[gn._name+".autorange"]=!0);else if("reset"===rn)for((He||Xe.isSubplotConstrained)&&(pn=pn.concat(Xe.xaxes)),$e&&!Xe.isSubplotConstrained&&(pn=pn.concat(Xe.yaxes)),Xe.isSubplotConstrained&&(He?$e||(pn=pn.concat(Oe)):pn=pn.concat(Me)),Pn=0;Pn<pn.length;Pn++)(gn=pn[Pn]).fixedrange||(gn._rangeInitial?(Kn[gn._name+".range[0]"]=(jn=gn._rangeInitial)[0],Kn[gn._name+".range[1]"]=jn[1]):Kn[gn._name+".autorange"]=!0);le.emit("plotly_doubleclick",null),o.call("_guiRelayout",le,Kn)}}(),en)Pn.indexOf("select")>-1&&L(pn,gn,Me,Oe,ue.id,xt),Pn.indexOf("event")>-1&&h.click(gn,pn,ue.id);else if(1===rn&&Qt){var jn=we?Ie:Le,Kn="s"===we||"w"===De?0:1,rr=jn._name+".range["+Kn+"]",lr=(Lr=(sr=jn).range[oi=Kn],Jr=Math.abs(Lr-sr.range[1-oi]),"date"===sr.type?Lr:"log"===sr.type?(Gr=Math.ceil(Math.max(0,-Math.log(Jr)/Math.LN10))+3,M("."+Gr+"g")(Math.pow(10,Lr))):(Gr=Math.floor(Math.log(Math.abs(Lr))/Math.LN10)-Math.floor(Math.log(Jr)/Math.LN10)+4,M("."+String(Gr)+"g")(Lr))),kr="left",Xr="middle";if(jn.fixedrange)return;we?(Xr="n"===we?"top":"bottom","right"===jn.side&&(kr="right")):"e"===De&&(kr="right"),gn._context.showAxisRangeEntryBoxes&&y.select(Mn).call(l.makeEditable,{gd:gn,immediate:!0,background:gn._fullLayout.paper_bgcolor,text:String(lr),fill:jn.tickfont?jn.tickfont.color:"#444",horizontalAlign:kr,verticalAlign:Xr}).on("edit",function(sr){var oi=jn.d2r(sr);void 0!==oi&&o.call("_guiRelayout",gn,rr,oi)})}}}function pt(rn,pn){if(le._transitioningWithDuration)return!1;var Xr,sr,gn=Math.max(0,Math.min(Ue,ht*rn+sn)),Pn=Math.max(0,Math.min(qe,at*pn+ke)),jn=Math.abs(gn-sn),Kn=Math.abs(Pn-ke);function rr(){Qe="",Se.r=Se.l,Se.t=Se.b,it.attr("d","M0,0Z")}if(Se.l=Math.min(sn,gn),Se.r=Math.max(sn,gn),Se.t=Math.min(ke,Pn),Se.b=Math.max(ke,Pn),Xe.isSubplotConstrained)jn>I||Kn>I?(Qe="xy",jn/Ue>Kn/qe?(Kn=jn*qe/Ue,ke>Pn?Se.t=ke-Kn:Se.b=ke+Kn):(jn=Kn*Ue/qe,sn>gn?Se.l=sn-jn:Se.r=sn+jn),it.attr("d",ae(Se))):rr();else if(lt.isSubplotConstrained)if(jn>I||Kn>I){Qe="xy";var lr=Math.min(Se.l/Ue,(qe-Se.b)/qe),kr=Math.max(Se.r/Ue,(qe-Se.t)/qe);Se.l=lr*Ue,Se.r=kr*Ue,Se.b=(1-lr)*qe,Se.t=(1-kr)*qe,it.attr("d",ae(Se))}else rr();else!$e||Kn<Math.min(Math.max(.6*jn,F),I)?jn<F||!He?rr():(Se.t=0,Se.b=qe,Qe="x",it.attr("d","M"+((Xr=Se).l-.5)+","+((sr=ke)-I-.5)+"h-3v"+(2*I+1)+"h3ZM"+(Xr.r+.5)+","+(sr-I-.5)+"h3v"+(2*I+1)+"h-3Z")):!He||jn<Math.min(.6*Kn,I)?(Se.l=0,Se.r=Ue,Qe="y",it.attr("d",function(Xr,sr){return"M"+(sr-I-.5)+","+(Xr.t-.5)+"v-3h"+(2*I+1)+"v3ZM"+(sr-I-.5)+","+(Xr.b+.5)+"v3h"+(2*I+1)+"v-3Z"}(Se,sn))):(Qe="xy",it.attr("d",ae(Se)));Se.w=Se.r-Se.l,Se.h=Se.b-Se.t,Qe&&(mt=!0),le._dragged=mt,ie(ot,it,Se,Ve,Ge,Ce),At(),le.emit("plotly_relayouting",Et),Ge=!0}function At(){Et={},"xy"!==Qe&&"x"!==Qe||(Y(Me,Se.l/Ue,Se.r/Ue,Et,Xe.xaxes),Dt("x",Et)),"xy"!==Qe&&"y"!==Qe||(Y(Oe,(qe-Se.b)/qe,(qe-Se.t)/qe,Et,Xe.yaxes),Dt("y",Et))}function Xt(){At(),U(le),fn(),W(le)}xt.prepFn=function(rn,pn,gn){var Pn=xt.dragmode,jn=le._fullLayout.dragmode;jn!==Pn&&(xt.dragmode=jn),tn(),ht=le._fullLayout._invScaleX,at=le._fullLayout._invScaleY,et||(en?rn.shiftKey?"pan"===jn?jn="zoom":g(jn)||(jn="pan"):rn.ctrlKey&&(jn="pan"):jn="pan"),xt.minDrag=m(jn)?1:void 0,g(jn)?(xt.xaxes=Me,xt.yaxes=Oe,C(rn,pn,gn,xt,jn)):(xt.clickFn=$t,g(Pn)&&Vt(),et||("zoom"===jn?(xt.moveFn=pt,xt.doneFn=Xt,xt.minDrag=1,function(Kn,rr,lr){var kr=Mn.getBoundingClientRect();sn=rr-kr.left,ke=lr-kr.top,le._fullLayout._calcInverseTransform(le);var Xr=x.apply3DTransform(le._fullLayout._invTransform)(sn,ke);Se={l:sn=Xr[0],r:sn,w:0,t:ke=Xr[1],b:ke,h:0},Ce=le._hmpixcount?le._hmlumcount/le._hmpixcount:_(le._fullLayout.plot_bgcolor).getLuminance(),Ge=!1,Qe="xy",mt=!1,ot=X(Ft,Ce,Pe,Re,Ve="M0,0H"+Ue+"V"+qe+"H0V0"),it=K(Ft,Pe,Re)}(0,pn,gn)):"pan"===jn&&(xt.moveFn=dt,xt.doneFn=fn))),le._fullLayout._redrag=function(){var Kn=le._dragdata;Kn&&Kn.element===Mn&&(g(le._fullLayout.dragmode)||(tn(),nn([0,0,Ue,qe]),xt.moveFn(Kn.dx,Kn.dy)))}},p.init(xt);var Ct=[0,0,Ue,qe],Pt=null,Be=N.REDRAWDELAY,tt=ue.mainplot?le._fullLayout._plots[ue.mainplot]:ue;function dt(rn,pn){if(rn*=ht,pn*=at,!le._transitioningWithDuration){if(le._fullLayout._replotting=!0,"ew"===He||"ns"===$e){var gn=He?-rn:0,Pn=$e?-pn:0;if(lt.isSubplotConstrained){if(He&&$e){var jn=(rn/Ue-pn/qe)/2;gn=-(rn=jn*Ue),Pn=-(pn=-jn*qe)}$e?gn=-Pn*Ue/qe:Pn=-gn*qe/Ue}return He&&(ee(Me,rn),Dt("x")),$e&&(ee(Oe,pn),Dt("y")),nn([gn,Pn,Ue,qe]),Nt(),void le.emit("plotly_relayouting",Et)}var Kn,rr,lr="w"===He==("n"===$e)?1:-1;if(He&&$e&&(Xe.isSubplotConstrained||lt.isSubplotConstrained)){var kr=(rn/Ue+lr*pn/qe)/2;rn=kr*Ue,pn=lr*kr*qe}if("w"===He?rn=Gr(Me,0,rn):"e"===He?rn=Gr(Me,1,-rn):He||(rn=0),"n"===$e?pn=Gr(Oe,1,pn):"s"===$e?pn=Gr(Oe,0,-pn):$e||(pn=0),Kn="w"===He?rn:0,rr="n"===$e?pn:0,Xe.isSubplotConstrained&&!lt.isSubplotConstrained||lt.isSubplotConstrained&&He&&$e&&lr>0){var Xr;if(lt.isSubplotConstrained||!He&&1===$e.length){for(Xr=0;Xr<Me.length;Xr++)Me[Xr].range=Me[Xr]._r.slice(),D(Me[Xr],1-pn/qe);Kn=(rn=pn*Ue/qe)/2}if(lt.isSubplotConstrained||!$e&&1===He.length){for(Xr=0;Xr<Oe.length;Xr++)Oe[Xr].range=Oe[Xr]._r.slice(),D(Oe[Xr],1-rn/Ue);rr=(pn=rn*qe/Ue)/2}}lt.isSubplotConstrained&&$e||Dt("x"),lt.isSubplotConstrained&&He||Dt("y");var sr=Ue-rn,oi=qe-pn;!lt.isSubplotConstrained||He&&$e||(He?(rr=Kn?0:rn*qe/Ue,oi=sr*qe/Ue):(Kn=rr?0:pn*Ue/qe,sr=oi*Ue/qe)),nn([Kn,rr,sr,oi]),Nt(),le.emit("plotly_relayouting",Et)}function Gr(Lr,Jr,Mi){for(var Jn,br,Fr=1-Jr,cr=0;cr<Lr.length;cr++){var Qr=Lr[cr];if(!Qr.fixedrange){Jn=Qr,br=Qr._rl[Fr]+(Qr._rl[Jr]-Qr._rl[Fr])/re(Mi/Qr._length);var ui=Qr.l2r(br);!1!==ui&&void 0!==ui&&(Qr.range[Jr]=ui)}}return Jn._length*(Jn._rl[Jr]-br)/(Jn._rl[Jr]-Jn._rl[Fr])}}function Dt(rn,pn){for(var gn=lt.isSubplotConstrained?{x:Oe,y:Me}[rn]:lt[rn+"axes"],Pn=lt.isSubplotConstrained?{x:Me,y:Oe}[rn]:[],jn=0;jn<gn.length;jn++){var Kn=gn[jn],rr=Kn._id,lr=lt.xLinks[rr]||lt.yLinks[rr],kr=Pn[0]||je[lr]||ye[lr];kr&&(pn?(pn[Kn._name+".range[0]"]=pn[kr._name+".range[0]"],pn[Kn._name+".range[1]"]=pn[kr._name+".range[1]"]):Kn.range=kr.range.slice())}}function Nt(){var rn,pn=[];function gn(Kn){for(rn=0;rn<Kn.length;rn++)Kn[rn].fixedrange||pn.push(Kn[rn]._id)}for(nt&&(gn(Me),gn(Xe.xaxes),gn(lt.xaxes)),ct&&(gn(Oe),gn(Xe.yaxes),gn(lt.yaxes)),Et={},rn=0;rn<pn.length;rn++){var jn=k(le,pn[rn]);s.drawOne(le,jn,{skipTitle:!0}),Et[jn._name+".range[0]"]=jn.range[0],Et[jn._name+".range[1]"]=jn.range[1]}s.redrawComponents(le,pn)}function fn(){nn([0,0,Ue,qe]),x.syncOrAsync([A.previousPromises,function(){le._fullLayout._replotting=!1,o.call("_guiRelayout",le,Et)}],le)}function nn(rn){var pn,gn,Pn,jn,Kn=le._fullLayout,rr=Kn._plots,lr=Kn._subplots.cartesian;if(kt&&o.subplotsRegistry.splom.drag(le),bt)for(pn=0;pn<lr.length;pn++)if(Pn=(gn=rr[lr[pn]]).xaxis,jn=gn.yaxis,gn._scene){var kr=x.simpleMap(Pn.range,Pn.r2l),Xr=x.simpleMap(jn.range,jn.r2l);gn._scene.update({range:[kr[0],Xr[0],kr[1],Xr[1]]})}if((kt||bt)&&(w(le),c(le)),Bt){var sr=rn[2]/Le._length,oi=rn[3]/Ie._length;for(pn=0;pn<lr.length;pn++){Pn=(gn=rr[lr[pn]]).xaxis,jn=gn.yaxis;var Gr,Lr,Jr,Mi,br=(ct||lt.isSubplotConstrained)&&!jn.fixedrange&&ye[jn._id];if((nt||lt.isSubplotConstrained)&&!Pn.fixedrange&&je[Pn._id]?(Gr=sr,Jr=De||lt.isSubplotConstrained?rn[0]:kn(Pn,Gr)):lt.xaHash[Pn._id]?(Gr=sr,Jr=rn[0]*Pn._length/Le._length):lt.yaHash[Pn._id]?(Gr=oi,Jr="ns"===$e?-rn[1]*Pn._length/Ie._length:kn(Pn,Gr,{n:"top",s:"bottom"}[$e])):Jr=Dn(Pn,Gr=In(Pn,sr,oi)),br?(Lr=oi,Mi=we||lt.isSubplotConstrained?rn[1]:kn(jn,Lr)):lt.yaHash[jn._id]?(Lr=oi,Mi=rn[1]*jn._length/Ie._length):lt.xaHash[jn._id]?(Lr=sr,Mi="ew"===He?-rn[0]*jn._length/Le._length:kn(jn,Lr,{e:"right",w:"left"}[He])):Mi=Dn(jn,Lr=In(jn,sr,oi)),Gr||Lr){Gr||(Gr=1),Lr||(Lr=1);var Fr=Pn._offset-Jr/Gr,cr=jn._offset-Mi/Lr;gn.clipRect.call(v.setTranslate,Jr,Mi).call(v.setScale,Gr,Lr),gn.plot.call(v.setTranslate,Fr,cr).call(v.setScale,1/Gr,1/Lr),Gr===gn.xScaleFactor&&Lr===gn.yScaleFactor||(v.setPointGroupScale(gn.zoomScalePts,Gr,Lr),v.setTextPointsScale(gn.zoomScaleTxt,Gr,Lr)),v.hideOutsideRangePoints(gn.clipOnAxisFalseTraces,gn),gn.xScaleFactor=Gr,gn.yScaleFactor=Lr}}}}function In(rn,pn,gn){return rn.fixedrange?0:nt&&Xe.xaHash[rn._id]?pn:ct&&(Xe.isSubplotConstrained?Xe.xaHash:Xe.yaHash)[rn._id]?gn:0}function Dn(rn,pn){return pn?(rn.range=rn._r.slice(),D(rn,pn),kn(rn,pn)):0}function kn(rn,pn,gn){return rn._length*(1-pn)*u[gn||rn.constraintoward||"middle"]}return we.length*De.length!=1&&te(Mn,function(rn){if(le._context._scrollZoom.cartesian||le._fullLayout._enablescrollzoom){if(Vt(),le._transitioningWithDuration)return rn.preventDefault(),void rn.stopPropagation();tn(),clearTimeout(Pt);var pn=-rn.deltaY;if(isFinite(pn)||(pn=rn.wheelDelta/10),isFinite(pn)){var gn,Pn=Math.exp(-Math.min(Math.max(pn,-20),20)/200),jn=tt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Kn=(rn.clientX-jn.left)/jn.width,rr=(jn.bottom-rn.clientY)/jn.height;if(nt){for(De||(Kn=.5),gn=0;gn<Me.length;gn++)lr(Me[gn],Kn,Pn);Dt("x"),Ct[2]*=Pn,Ct[0]+=Ct[2]*Kn*(1/Pn-1)}if(ct){for(we||(rr=.5),gn=0;gn<Oe.length;gn++)lr(Oe[gn],rr,Pn);Dt("y"),Ct[3]*=Pn,Ct[1]+=Ct[3]*(1-rr)*(1/Pn-1)}nn(Ct),Nt(),le.emit("plotly_relayouting",Et),Pt=setTimeout(function(){le._fullLayout&&(Ct=[0,0,Ue,qe],fn())},Be),rn.preventDefault()}else x.log("Did not find wheel motion attributes: ",rn)}function lr(kr,Xr,sr){if(!kr.fixedrange){var oi=x.simpleMap(kr.range,kr.r2l),Gr=oi[0]+(oi[1]-oi[0])*Xr;kr.range=oi.map(function(Lr){return kr.l2r(Gr+(Lr-Gr)*sr)})}}}),Mn},makeDragger:j,makeRectDragger:V,makeZoombox:X,makeCorners:K,updateZoombox:ie,xyCorners:ae,transitionZoombox:q,removeZoombox:U,showDoubleClickNotifier:W,attachWheelEventHandler:te}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/subroutines":544,"../../registry":638,"../plots":619,"./axes":554,"./axis_ids":558,"./constants":561,"./scale_zoom":574,"./select":575,"@plotly/d3":58,"has-passive-events":229,tinycolor2:312}],564:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../components/fx"),M=b("../../components/dragelement"),_=b("../../lib/setcursor"),e=b("./dragbox").makeDragBox,o=b("./constants").DRAGGERSIZE;se.initInteractions=function(a){var l=a._fullLayout;if(a._context.staticPlot)y.select(a).selectAll(".drag").remove();else if(l._has("cartesian")||l._has("splom")){Object.keys(l._plots||{}).sort(function(v,h){if((l._plots[v].mainplot&&!0)===(l._plots[h].mainplot&&!0)){var s=v.split("y"),d=h.split("y");return s[0]===d[0]?Number(s[1]||1)-Number(d[1]||1):Number(s[0]||1)-Number(d[0]||1)}return l._plots[v].mainplot?1:-1}).forEach(function(v){var h=l._plots[v],s=h.xaxis,d=h.yaxis;if(!h.mainplot){var p=e(a,h,s._offset,d._offset,s._length,d._length,"ns","ew");p.onmousemove=function(m){a._fullLayout._rehover=function(){a._fullLayout._hoversubplot===v&&a._fullLayout._plots[v]&&x.hover(a,m,v)},x.hover(a,m,v),a._fullLayout._lasthover=p,a._fullLayout._hoversubplot=v},p.onmouseout=function(m){a._dragging||(a._fullLayout._hoversubplot=null,M.unhover(a,m))},a._context.showAxisDragHandles&&(e(a,h,s._offset-o,d._offset-o,o,o,"n","w"),e(a,h,s._offset+s._length,d._offset-o,o,o,"n","e"),e(a,h,s._offset-o,d._offset+d._length,o,o,"s","w"),e(a,h,s._offset+s._length,d._offset+d._length,o,o,"s","e"))}if(a._context.showAxisDragHandles){if(v===s._mainSubplot){var f=s._mainLinePosition;"top"===s.side&&(f-=o),e(a,h,s._offset+.1*s._length,f,.8*s._length,o,"","ew"),e(a,h,s._offset,f,.1*s._length,o,"","w"),e(a,h,s._offset+.9*s._length,f,.1*s._length,o,"","e")}if(v===d._mainSubplot){var g=d._mainLinePosition;"right"!==d.side&&(g-=o),e(a,h,g,d._offset+.1*d._length,o,.8*d._length,"ns",""),e(a,h,g,d._offset+.9*d._length,o,.1*d._length,"s",""),e(a,h,g,d._offset,o,.1*d._length,"n","")}}});var i=l._hoverlayer.node();i.onmousemove=function(v){v.target=a._fullLayout._lasthover,x.hover(a,v,l._hoversubplot)},i.onclick=function(v){v.target=a._fullLayout._lasthover,x.click(a,v)},i.onmousedown=function(v){a._fullLayout._lasthover.onmousedown(v)},se.updateFx(a)}},se.updateFx=function(a){var l=a._fullLayout;_(l._draggers,"pan"===l.dragmode?"move":"crosshair")}},{"../../components/dragelement":385,"../../components/fx":406,"../../lib/setcursor":524,"./constants":561,"./dragbox":563,"@plotly/d3":58}],565:[function(b,oe,se){"use strict";oe.exports={clearOutlineControllers:function(y){var x=y._fullLayout._zoomlayer;x&&x.selectAll(".outline-controllers").remove()},clearSelect:function(y){var x=y._fullLayout._zoomlayer;x&&x.selectAll(".select-outline").remove(),y._fullLayout._drawing=!1}}},{}],566:[function(b,oe,se){"use strict";var y=b("../../lib").strTranslate;function x(M,_){switch(M.type){case"log":return M.p2d(_);case"date":return M.p2r(_,0,M.calendar);default:return M.p2r(_)}}oe.exports={p2r:x,r2p:function(M,_){switch(M.type){case"log":return M.d2p(_);case"date":return M.r2p(_,0,M.calendar);default:return M.r2p(_)}},axValue:function(M){var _="y"===M._id.charAt(0)?1:0;return function(e){return x(M,e[_])}},getTransform:function(M){return y(M.xaxis._offset,M.yaxis._offset)}}},{"../../lib":503}],567:[function(b,oe,se){"use strict";var y=b("../../registry"),x=b("../../lib"),M=b("./axis_ids");oe.exports=function(_){return function(e,o){var a=e[_];if(Array.isArray(a))for(var l=y.subplotsRegistry.cartesian,i=l.idRegex,v=o._subplots,h=v.xaxis,s=v.yaxis,d=v.cartesian,p=o._has("cartesian")||o._has("gl2d"),f=0;f<a.length;f++){var g=a[f];if(x.isPlainObject(g)){var m=M.cleanId(g.xref,"x",!1),u=M.cleanId(g.yref,"y",!1),w=i.x.test(m),c=i.y.test(u);if(w||c){p||x.pushUnique(o._basePlotModules,l);var A=!1;w&&-1===h.indexOf(m)&&(h.push(m),A=!0),c&&-1===s.indexOf(u)&&(s.push(u),A=!0),A&&w&&c&&d.push(m+u)}}}}}},{"../../lib":503,"../../registry":638,"./axis_ids":558}],568:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../registry"),M=b("../../lib"),_=b("../plots"),e=b("../../components/drawing"),o=b("../get_data").getModuleCalcData,a=b("./axis_ids"),l=b("./constants"),i=b("../../constants/xmlns_namespaces"),v=M.ensureSingle;function h(g,m,u){return M.ensureSingle(g,m,u,function(w){w.datum(u)})}function s(g,m,u,w,c){for(var A,k,C,E=l.traceLayerClasses,L=g._fullLayout,D=L._modules,N=[],F=[],I=0;I<D.length;I++){var P=(A=D[I]).name,j=x.modules[P].categories;if(j.svg){var V=A.layerName||P+"layer",Z=A.plot;C=(k=o(u,Z))[0],u=k[1],C.length&&N.push({i:E.indexOf(V),className:V,plotMethod:Z,cdModule:C}),j.zoomScale&&F.push("."+V)}}N.sort(function(re,X){return re.i-X.i});var Y=m.plot.selectAll("g.mlayer").data(N,function(re){return re.className});if(Y.enter().append("g").attr("class",function(re){return re.className}).classed("mlayer",!0).classed("rangeplot",m.isRangePlot),Y.exit().remove(),Y.order(),Y.each(function(re){var X=y.select(this),K=re.className;re.plotMethod(g,m,re.cdModule,X,w,c),-1===l.clipOnAxisFalseQuery.indexOf("."+K)&&e.setClipUrl(X,m.layerClipId,g)}),L._has("scattergl")&&(A=x.getModule("scattergl"),C=o(u,A)[0],A.plot(g,m,C)),!g._context.staticPlot&&(m._hasClipOnAxisFalse&&(m.clipOnAxisFalseTraces=m.plot.selectAll(l.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),F.length)){var ee=m.plot.selectAll(F.join(",")).selectAll(".trace");m.zoomScalePts=ee.selectAll("path.point"),m.zoomScaleTxt=ee.selectAll(".textpoint")}}function d(g,m){var u=m.plotgroup,w=m.id,c=l.layerValue2layerClass[m.xaxis.layer],A=l.layerValue2layerClass[m.yaxis.layer],k=g._fullLayout._hasOnlyLargeSploms;if(m.mainplot){var C=m.mainplotinfo,E=C.plotgroup,L=w+"-x",D=w+"-y";m.minorGridlayer=C.minorGridlayer,m.gridlayer=C.gridlayer,m.zerolinelayer=C.zerolinelayer,v(C.overlinesBelow,"path",L),v(C.overlinesBelow,"path",D),v(C.overaxesBelow,"g",L),v(C.overaxesBelow,"g",D),m.plot=v(C.overplot,"g",w),v(C.overlinesAbove,"path",L),v(C.overlinesAbove,"path",D),v(C.overaxesAbove,"g",L),v(C.overaxesAbove,"g",D),m.xlines=E.select(".overlines-"+c).select("."+L),m.ylines=E.select(".overlines-"+A).select("."+D),m.xaxislayer=E.select(".overaxes-"+c).select("."+L),m.yaxislayer=E.select(".overaxes-"+A).select("."+D)}else if(k)m.xlines=v(u,"path","xlines-above"),m.ylines=v(u,"path","ylines-above"),m.xaxislayer=v(u,"g","xaxislayer-above"),m.yaxislayer=v(u,"g","yaxislayer-above");else{var N=v(u,"g","layer-subplot");m.shapelayer=v(N,"g","shapelayer"),m.imagelayer=v(N,"g","imagelayer"),m.minorGridlayer=v(u,"g","minor-gridlayer"),m.gridlayer=v(u,"g","gridlayer"),m.zerolinelayer=v(u,"g","zerolinelayer"),v(u,"path","xlines-below"),v(u,"path","ylines-below"),m.overlinesBelow=v(u,"g","overlines-below"),v(u,"g","xaxislayer-below"),v(u,"g","yaxislayer-below"),m.overaxesBelow=v(u,"g","overaxes-below"),m.plot=v(u,"g","plot"),m.overplot=v(u,"g","overplot"),m.xlines=v(u,"path","xlines-above"),m.ylines=v(u,"path","ylines-above"),m.overlinesAbove=v(u,"g","overlines-above"),v(u,"g","xaxislayer-above"),v(u,"g","yaxislayer-above"),m.overaxesAbove=v(u,"g","overaxes-above"),m.xlines=u.select(".xlines-"+c),m.ylines=u.select(".ylines-"+A),m.xaxislayer=u.select(".xaxislayer-"+c),m.yaxislayer=u.select(".yaxislayer-"+A)}k||(h(m.minorGridlayer,"g",m.xaxis._id),h(m.minorGridlayer,"g",m.yaxis._id),m.minorGridlayer.selectAll("g").map(function(F){return F[0]}).sort(a.idSort),h(m.gridlayer,"g",m.xaxis._id),h(m.gridlayer,"g",m.yaxis._id),m.gridlayer.selectAll("g").map(function(F){return F[0]}).sort(a.idSort)),m.xlines.style("fill","none").classed("crisp",!0),m.ylines.style("fill","none").classed("crisp",!0)}function p(g,m){if(g){var u={};for(var w in g.each(function(C){var E=C[0];y.select(this).remove(),f(E,m),u[E]=!0}),m._plots)for(var c=m._plots[w].overlays||[],A=0;A<c.length;A++){var k=c[A];u[k.id]&&k.plot.selectAll(".trace").remove()}}}function f(g,m){m._draggers.selectAll("g."+g).remove(),m._defs.select("#clip"+m._uid+g+"plot").remove()}se.name="cartesian",se.attr=["xaxis","yaxis"],se.idRoot=["x","y"],se.idRegex=l.idRegex,se.attrRegex=l.attrRegex,se.attributes=b("./attributes"),se.layoutAttributes=b("./layout_attributes"),se.supplyLayoutDefaults=b("./layout_defaults"),se.transitionAxes=b("./transition_axes"),se.finalizeSubplots=function(g,m){var u,w,c,A=m._subplots,k=A.xaxis,C=A.yaxis,E=A.cartesian,L=E.concat(A.gl2d||[]),D={},N={};for(u=0;u<L.length;u++){var F=L[u].split("y");D[F[0]]=1,N["y"+F[1]]=1}for(u=0;u<k.length;u++)D[w=k[u]]||(c=(g[a.id2name(w)]||{}).anchor,l.idRegex.y.test(c)||(c="y"),E.push(w+c),L.push(w+c),N[c]||(N[c]=1,M.pushUnique(C,c)));for(u=0;u<C.length;u++)N[c=C[u]]||(w=(g[a.id2name(c)]||{}).anchor,l.idRegex.x.test(w)||(w="x"),E.push(w+c),L.push(w+c),D[w]||(D[w]=1,M.pushUnique(k,w)));if(!L.length){for(var I in w="",c="",g)l.attrRegex.test(I)&&("x"===I.charAt(0)?(!w||+I.substr(5)<+w.substr(5))&&(w=I):(!c||+I.substr(5)<+c.substr(5))&&(c=I));w=w?a.name2id(w):"x",c=c?a.name2id(c):"y",k.push(w),C.push(c),E.push(w+c)}},se.plot=function(g,m,u,w){var c,A=g._fullLayout,k=A._subplots.cartesian,C=g.calcdata;if(!Array.isArray(m))for(m=[],c=0;c<C.length;c++)m.push(c);for(c=0;c<k.length;c++){for(var E,L=k[c],D=A._plots[L],N=[],F=0;F<C.length;F++){var I=C[F],P=I[0].trace;P.xaxis+P.yaxis===L&&((-1!==m.indexOf(P.index)||P.carpet)&&(E&&E[0].trace.xaxis+E[0].trace.yaxis===L&&-1!==["tonextx","tonexty","tonext"].indexOf(P.fill)&&-1===N.indexOf(E)&&N.push(E),N.push(I)),E=I)}s(g,D,N,u,w)}},se.clean=function(g,m,u,w){var c,A,k,C=w._plots||{},E=m._plots||{},L=w._subplots||{};if(w._hasOnlyLargeSploms&&!m._hasOnlyLargeSploms)for(k in C)(c=C[k]).plotgroup&&c.plotgroup.remove();var D=w._has&&w._has("gl"),N=m._has&&m._has("gl");if(D&&!N)for(k in C)(c=C[k])._scene&&c._scene.destroy();if(L.xaxis&&L.yaxis){var F=a.listIds({_fullLayout:w});for(A=0;A<F.length;A++){var I=F[A];m[a.id2name(I)]||w._infolayer.selectAll(".g-"+I+"title").remove()}}var P=w._has&&w._has("cartesian"),j=m._has&&m._has("cartesian");if(P&&!j)p(w._cartesianlayer.selectAll(".subplot"),w),w._defs.selectAll(".axesclip").remove(),delete w._axisConstraintGroups,delete w._axisMatchGroups;else if(L.cartesian)for(A=0;A<L.cartesian.length;A++){var V=L.cartesian[A];E[V]||(w._cartesianlayer.selectAll("."+V+",."+V+"-x,."+V+"-y").remove(),f(V,w))}},se.drawFramework=function(g){var m=g._fullLayout,u=function(c){var A,k,C,E,L,D,N=c._fullLayout,F=N._subplots.cartesian,I=F.length,P=[],j=[];for(A=0;A<I;A++){var Y=(L=(E=N._plots[C=F[A]]).xaxis)._mainAxis._id+(D=E.yaxis)._mainAxis._id,ee=N._plots[Y];E.overlays=[],Y!==C&&ee?(E.mainplot=Y,E.mainplotinfo=ee,j.push(C)):(E.mainplot=void 0,E.mainplotinfo=void 0,P.push(C))}for(A=0;A<j.length;A++)(E=N._plots[C=j[A]]).mainplotinfo.overlays.push(E);var re=P.concat(j),X=new Array(I);for(A=0;A<I;A++){var K=[C=re[A],(L=(E=N._plots[C]).xaxis).layer,(D=E.yaxis).layer,L.overlaying||"",D.overlaying||""];for(k=0;k<E.overlays.length;k++)K.push(E.overlays[k].id);X[A]=K}return X}(g),w=m._cartesianlayer.selectAll(".subplot").data(u,String);w.enter().append("g").attr("class",function(c){return"subplot "+c[0]}),w.order(),w.exit().call(p,m),w.each(function(c){var A=c[0],k=m._plots[A];k.plotgroup=y.select(this),d(g,k),k.draglayer=v(m._draggers,"g",A)})},se.rangePlot=function(g,m,u){d(g,m),s(g,m,u),_.style(g)},se.toSVG=function(g){var m=g._fullLayout._glimages,u=y.select(g).selectAll(".svg-container");u.filter(function(w,c){return c===u.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var w=this.toDataURL("image/png");m.append("svg:image").attr({xmlns:i.svg,"xlink:href":w,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},se.updateFx=b("./graph_interact").updateFx},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"../get_data":593,"../plots":619,"./attributes":552,"./axis_ids":558,"./constants":561,"./graph_interact":564,"./layout_attributes":569,"./layout_defaults":570,"./transition_axes":581,"@plotly/d3":58}],569:[function(b,oe,se){"use strict";var y=b("../font_attributes"),x=b("../../components/color/attributes"),M=b("../../components/drawing/attributes").dash,_=b("../../lib/extend").extendFlat,e=b("../../plot_api/plot_template").templatedArray,o=b("../../plots/cartesian/axis_format_attributes").descriptionWithDates,a=b("../../constants/numerical").ONEDAY,l=b("./constants"),i=l.HOUR_PATTERN,v=l.WEEKDAY_PATTERN,h={valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}};function s(E){return{valType:"integer",min:0,dflt:E?5:0,editType:"ticks"}}var d={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},p={valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},f={valType:"data_array",editType:"ticks"},g={valType:"enumerated",values:["outside","inside",""],editType:"ticks"};function m(E){var L={valType:"number",min:0,editType:"ticks"};return E||(L.dflt=5),L}function u(E){var L={valType:"number",min:0,editType:"ticks"};return E||(L.dflt=1),L}var w={valType:"color",dflt:x.defaultLine,editType:"ticks"},c={valType:"color",dflt:x.lightLine,editType:"ticks"};function A(E){var L={valType:"number",min:0,editType:"ticks"};return E||(L.dflt=1),L}var k=_({},M,{editType:"ticks"}),C={valType:"boolean",editType:"ticks"};oe.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:x.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:y({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[v,i,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:a},editType:"calc"}),tickmode:h,nticks:s(),tick0:d,dtick:p,ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:f,ticktext:{valType:"data_array",editType:"ticks"},ticks:g,tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:m(),tickwidth:u(),tickcolor:w,showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:_({},M,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:y({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:o("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:o("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:x.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:C,gridcolor:c,gridwidth:A(),griddash:k,zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:x.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:x.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},minor:{tickmode:h,nticks:s("minor"),tick0:d,dtick:p,tickvals:f,ticks:g,ticklen:m("minor"),tickwidth:u("minor"),tickcolor:w,gridcolor:c,gridwidth:A("minor"),griddash:k,showgrid:C,editType:"ticks"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:y({editType:"ticks"})}}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../constants/numerical":479,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../font_attributes":585,"./constants":561}],570:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../components/color"),M=b("../../components/fx/helpers").isUnifiedHover,_=b("../../components/fx/hovermode_defaults"),e=b("../../plot_api/plot_template"),o=b("../layout_attributes"),a=b("./layout_attributes"),l=b("./type_defaults"),i=b("./axis_defaults"),v=b("./constraints"),h=b("./position_defaults"),s=b("./axis_ids"),d=s.id2name,p=s.name2id,f=b("./constants").AX_ID_PATTERN,g=b("../../registry"),m=g.traceIs,u=g.getComponentMethod;function w(c,A,k){Array.isArray(c[A])?c[A].push(k):c[A]=[k]}oe.exports=function(c,A,k){var C,E,L=A.autotypenumbers,D={},N={},F={},I={},P={},j={},V={},Z={},Y={},ee={};for(C=0;C<k.length;C++){var re=k[C];if(m(re,"cartesian")||m(re,"gl2d")){var X,K;if(re.xaxis)X=d(re.xaxis),w(D,X,re);else if(re.xaxes)for(E=0;E<re.xaxes.length;E++)w(D,d(re.xaxes[E]),re);if(re.yaxis)K=d(re.yaxis),w(D,K,re);else if(re.yaxes)for(E=0;E<re.yaxes.length;E++)w(D,d(re.yaxes[E]),re);"funnel"===re.type?"h"===re.orientation?(X&&(N[X]=!0),K&&(V[K]=!0)):K&&(F[K]=!0):"image"===re.type?(K&&(Z[K]=!0),X&&(Z[X]=!0)):(K&&(P[K]=!0,j[K]=!0),m(re,"carpet")&&("carpet"!==re.type||re._cheater)||X&&(I[X]=!0)),"carpet"===re.type&&re._cheater&&X&&(N[X]=!0),m(re,"2dMap")&&(Y[X]=!0,Y[K]=!0),m(re,"oriented")&&(ee["h"===re.orientation?K:X]=!0)}}var ie=A._subplots,q=ie.xaxis,U=ie.yaxis,W=y.simpleMap(q,d),ae=y.simpleMap(U,d),G=W.concat(ae),te=x.background;q.length&&U.length&&(te=y.coerce(c,A,o,"plot_bgcolor"));var ne,le,ue,pe,de,_e=x.combine(te,A.paper_bgcolor);function me(){de._traceIndices=(D[ne]||[]).map(function(Ft){return Ft._expandedIndex}),de._annIndices=[],de._shapeIndices=[],de._imgIndices=[],de._subplotsWith=[],de._counterAxes=[],de._name=de._attr=ne,de._id=le}function we(at,Ft){return y.coerce(pe,de,a,at,Ft)}function De(at,Ft){return y.coerce2(pe,de,a,at,Ft)}function Le(at){return"x"===at?U:q}function Ie(at,Ft){for(var en="x"===at?W:ae,Qt=[],tn=0;tn<en.length;tn++){var dn=en[tn];dn===Ft||(c[dn]||{}).overlaying||Qt.push(p(dn))}return Qt}var je={x:Le("x"),y:Le("y")},ye=je.x.concat(je.y),Me={},Oe=[];function Pe(){var at=pe.matches;f.test(at)&&-1===ye.indexOf(at)&&(Me[at]=pe.type,Oe=Object.keys(Me))}var Re=_(c,A),Ue=M(Re);for(C=0;C<G.length;C++){le=p(ne=G[C]),ue=ne.charAt(0),y.isPlainObject(c[ne])||(c[ne]={}),pe=c[ne],de=e.newContainer(A,ne,ue+"axis"),me();var lt={hasMinor:!0,letter:ue,font:A.font,outerTicks:Y[ne],showGrid:!ee[ne],data:D[ne]||[],bgColor:_e,calendar:A.calendar,automargin:!0,visibleDflt:"x"===ue&&!I[ne]&&N[ne]||"y"===ue&&!P[ne]&&F[ne],reverseDflt:"y"===ue&&(!j[ne]&&V[ne]||Z[ne]),autotypenumbersDflt:L,splomStash:((A._splomAxes||{})[ue]||{})[le]};we("uirevision",A.uirevision),l(pe,de,we,lt),i(pe,de,we,lt,A);var He=Ue&&ue===Re.charAt(0),$e=De("spikecolor",Ue?de.color:void 0),et=De("spikethickness",Ue?1.5:void 0),nt=De("spikedash",Ue?"dot":void 0),ct=De("spikemode",Ue?"across":void 0),bt=De("spikesnap");we("showspikes",!!(He||$e||et||nt||ct||bt))||(delete de.spikecolor,delete de.spikethickness,delete de.spikedash,delete de.spikemode,delete de.spikesnap),h(pe,de,we,{letter:ue,counterAxes:je[ue],overlayableAxes:Ie(ue,ne),grid:A.grid}),we("title.standoff"),Pe(),de._input=pe}for(C=0;C<Oe.length;){le=Oe[C++],ue=(ne=d(le)).charAt(0),y.isPlainObject(c[ne])||(c[ne]={}),pe=c[ne],de=e.newContainer(A,ne,ue+"axis"),me();var kt={letter:ue,font:A.font,outerTicks:Y[ne],showGrid:!ee[ne],data:[],bgColor:_e,calendar:A.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:L,splomStash:((A._splomAxes||{})[ue]||{})[le]};we("uirevision",A.uirevision),de.type=Me[le]||"linear",i(pe,de,we,kt,A),h(pe,de,we,{letter:ue,counterAxes:je[ue],overlayableAxes:Ie(ue,ne),grid:A.grid}),we("fixedrange"),Pe(),de._input=pe}var Bt=u("rangeslider","handleDefaults"),Et=u("rangeselector","handleDefaults");for(C=0;C<W.length;C++)pe=c[ne=W[C]],de=A[ne],Bt(c,A,ne),"date"===de.type&&Et(pe,de,A,ae,de.calendar),we("fixedrange");for(C=0;C<ae.length;C++){pe=c[ne=ae[C]];var ht=A[d((de=A[ne]).anchor)];we("fixedrange",u("rangeslider","isVisible")(ht))}v.handleDefaults(c,A,{axIds:ye.concat(Oe).sort(s.idSort),axHasImage:Z})}},{"../../components/color":366,"../../components/fx/helpers":402,"../../components/fx/hovermode_defaults":405,"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../layout_attributes":610,"./axis_defaults":556,"./axis_ids":558,"./constants":561,"./constraints":562,"./layout_attributes":569,"./position_defaults":572,"./type_defaults":582}],571:[function(b,oe,se){"use strict";var y=b("tinycolor2").mix,x=b("../../components/color/attributes"),M=b("../../lib");oe.exports=function(_,e,o,a){var l=(a=a||{}).dfltColor;function i(c,A){return M.coerce2(_,e,a.attributes,c,A)}var v=i("linecolor",l),h=i("linewidth");o("showline",a.showLine||!!v||!!h)||(delete e.linecolor,delete e.linewidth);var s=i("gridcolor",y(l,a.bgColor,a.blend||x.lightFraction).toRgbString()),d=i("gridwidth"),p=i("griddash");if(o("showgrid",a.showGrid||!!s||!!d||!!p)||(delete e.gridcolor,delete e.gridwidth,delete e.griddash),a.hasMinor){var f=i("minor.gridcolor",y(e.gridcolor,a.bgColor,67).toRgbString()),g=i("minor.gridwidth",e.gridwidth||1),m=i("minor.griddash",e.griddash||"solid");o("minor.showgrid",!!f||!!g||!!m)||(delete e.minor.gridcolor,delete e.minor.gridwidth,delete e.minor.griddash)}if(!a.noZeroLine){var u=i("zerolinecolor",l),w=i("zerolinewidth");o("zeroline",a.showGrid||!!u||!!w)||(delete e.zerolinecolor,delete e.zerolinewidth)}}},{"../../components/color/attributes":365,"../../lib":503,tinycolor2:312}],572:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../lib");oe.exports=function(M,_,e,o){var a,l,i,v,h=o.counterAxes||[],s=o.overlayableAxes||[],d=o.letter,p=o.grid;p&&(a=p._anchors[_._id],(l=p._domains[d][p._axisMap[_._id]])&&(i=p[d+"side"].split(" ")[0],v=p.domain[d]["right"===i||"top"===i?1:0])),l=l||[0,1],a=a||(y(M.position)?"free":h[0]||"free"),i=i||("x"===d?"bottom":"left"),v=v||0,"free"===x.coerce(M,_,{anchor:{valType:"enumerated",values:["free"].concat(h),dflt:a}},"anchor")&&e("position",v),x.coerce(M,_,{side:{valType:"enumerated",values:"x"===d?["bottom","top"]:["left","right"],dflt:i}},"side");var f=!1;if(s.length&&(f=x.coerce(M,_,{overlaying:{valType:"enumerated",values:[!1].concat(s),dflt:!1}},"overlaying")),!f){var g=e("domain",l);g[0]>g[1]-1/4096&&(_.domain=l),x.noneOrAll(M.domain,_.domain,l)}return e("layer"),_}},{"../../lib":503,"fast-isnumeric":190}],573:[function(b,oe,se){"use strict";var y=b("./show_dflt");oe.exports=function(x,M,_,e,o){o||(o={});var a=o.tickSuffixDflt,l=y(x);_("tickprefix")&&_("showtickprefix",l),_("ticksuffix",a)&&_("showticksuffix",l)}},{"./show_dflt":577}],574:[function(b,oe,se){"use strict";var y=b("../../constants/alignment").FROM_BL;oe.exports=function(x,M,_){void 0===_&&(_=y[x.constraintoward||"center"]);var e=[x.r2l(x.range[0]),x.r2l(x.range[1])],o=e[0]+(e[1]-e[0])*_;x.range=x._input.range=[x.l2r(o+(e[0]-o)*M),x.l2r(o+(e[1]-o)*M)],x.setScale()}},{"../../constants/alignment":471}],575:[function(b,oe,se){"use strict";var y=b("polybooljs"),x=b("../../registry"),M=b("../../components/drawing").dashStyle,_=b("../../components/color"),e=b("../../components/fx"),o=b("../../components/fx/helpers").makeEventData,a=b("../../components/dragelement/helpers"),l=a.freeMode,i=a.rectMode,v=a.drawMode,h=a.openMode,s=a.selectMode,d=b("../../components/shapes/draw_newshape/display_outlines"),p=b("../../components/shapes/draw_newshape/helpers").handleEllipse,f=b("../../components/shapes/draw_newshape/newshapes"),g=b("../../lib"),m=b("../../lib/polygon"),u=b("../../lib/throttle"),w=b("./axis_ids").getFromId,c=b("../../lib/clear_gl_canvases"),A=b("../../plot_api/subroutines").redrawReglTraces,k=b("./constants"),C=k.MINSELECT,E=m.filter,L=m.tester,D=b("./handle_outline").clearSelect,N=b("./helpers"),F=N.p2r,I=N.axValue,P=N.getTransform;function j(W,ae,G,te,ne,le,ue){var pe,de,_e,me,we,De,Le,Ie,je,Xe,ye=ae._hoverdata,Me=ae._fullLayout.clickmode.indexOf("event")>-1,Oe=[];if((Xe=ye)&&Array.isArray(Xe)&&!0!==Xe[0].hoverOnBox){ee(W,ae,le);var Pe=function(Xe,lt){var He,$e,et=Xe[0],nt=-1,ct=[];for($e=0;$e<lt.length;$e++)if(et.fullData._expandedIndex===(He=lt[$e]).cd[0].trace._expandedIndex){if(!0===et.hoverOnBox)break;void 0!==et.pointNumber?nt=et.pointNumber:void 0!==et.binNumber&&(nt=et.binNumber,ct=et.pointNumbers);break}return{pointNumber:nt,pointNumbers:ct,searchInfo:He}}(ye,pe=X(ae,G,te,ne));if(Pe.pointNumbers.length>0?function(Xe,lt){var He,$e,et,nt=[];for(et=0;et<Xe.length;et++)(He=Xe[et]).cd[0].trace.selectedpoints&&He.cd[0].trace.selectedpoints.length>0&&nt.push(He);if(1===nt.length&&nt[0]===lt.searchInfo&&($e=lt.searchInfo.cd[0].trace).selectedpoints.length===lt.pointNumbers.length){for(et=0;et<lt.pointNumbers.length;et++)if($e.selectedpoints.indexOf(lt.pointNumbers[et])<0)return!1;return!0}return!1}(pe,Pe):function(Xe){var He,$e,et=0;for($e=0;$e<Xe.length;$e++)if((He=Xe[$e].cd[0].trace).selectedpoints&&(He.selectedpoints.length>1||(et+=He.selectedpoints.length)>1))return!1;return 1===et}(pe)&&(De=K(Pe))){for(ue&&ue.remove(),je=0;je<pe.length;je++)(de=pe[je])._module.selectPoints(de,!1);ie(ae,pe),re(le),Me&&ae.emit("plotly_deselect",null)}else{for(Le=W.shiftKey&&(void 0!==De?De:K(Pe)),_e=function(Xe,lt,He){return{pointNumber:Xe,searchInfo:lt,subtract:He}}(Pe.pointNumber,Pe.searchInfo,Le),me=Y(le.selectionDefs.concat([_e])),je=0;je<pe.length;je++)if(we=q(pe[je]._module.selectPoints(pe[je],me),pe[je]),Oe.length)for(var Re=0;Re<we.length;Re++)Oe.push(we[Re]);else Oe=we;if(ie(ae,pe,Ie={points:Oe}),_e&&le&&le.selectionDefs.push(_e),ue){var Ue=le.mergedPolygons,qe=h(le.dragmode);d(U(Ue,qe),ue,le)}Me&&ae.emit("plotly_selected",Ie)}}}function V(W){return"pointNumber"in W&&"searchInfo"in W}function Z(W){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(ae,G,te,ne){return ne.cd[0].trace._expandedIndex===W.searchInfo.cd[0].trace._expandedIndex&&te===W.pointNumber},isRect:!1,degenerate:!1,subtract:W.subtract}}function Y(W){for(var ae=[],G=V(W[0])?0:W[0][0][0],te=G,ne=V(W[0])?0:W[0][0][1],le=ne,ue=0;ue<W.length;ue++)if(V(W[ue]))ae.push(Z(W[ue]));else{var pe=m.tester(W[ue]);pe.subtract=W[ue].subtract,ae.push(pe),G=Math.min(G,pe.xmin),te=Math.max(te,pe.xmax),ne=Math.min(ne,pe.ymin),le=Math.max(le,pe.ymax)}return{xmin:G,xmax:te,ymin:ne,ymax:le,pts:[],contains:function(de,_e,me,we){for(var De=!1,Le=0;Le<ae.length;Le++)ae[Le].contains(de,_e,me,we)&&(De=!1===ae[Le].subtract);return De},isRect:!1,degenerate:!1}}function ee(W,ae,G){ae._fullLayout._drawing=!1;var te=ae._fullLayout,ne=G.plotinfo,le=G.dragmode,ue=te._lastSelectedSubplot&&te._lastSelectedSubplot===ne.id,pe=(W.shiftKey||W.altKey)&&!(v(le)&&h(le));ue&&pe&&ne.selection&&ne.selection.selectionDefs&&!G.selectionDefs?(G.selectionDefs=ne.selection.selectionDefs,G.mergedPolygons=ne.selection.mergedPolygons):pe&&ne.selection||re(G),ue||(D(ae),te._lastSelectedSubplot=ne.id)}function re(W){var ae=W.dragmode,G=W.plotinfo,te=W.gd;if(te._fullLayout._activeShapeIndex>=0&&te._fullLayout._deactivateShape(te),v(ae)){var ne=te._fullLayout._zoomlayer.selectAll(".select-outline-"+G.id);if(ne&&te._fullLayout._drawing){var le=f(ne,W);le&&x.call("_guiRelayout",te,{shapes:le}),te._fullLayout._drawing=!1}}G.selection={},G.selection.selectionDefs=W.selectionDefs=[],G.selection.mergedPolygons=W.mergedPolygons=[]}function X(W,ae,G,te){var ne,le,ue,pe=[],de=ae.map(function(Le){return Le._id}),_e=G.map(function(Le){return Le._id});for(ue=0;ue<W.calcdata.length;ue++)if(!0===(le=(ne=W.calcdata[ue])[0].trace).visible&&le._module&&le._module.selectPoints)if(!te||le.subplot!==te&&le.geo!==te)if("splom"===le.type&&le._xaxes[de[0]]&&le._yaxes[_e[0]]){var me=De(le._module,ne,ae[0],G[0]);me.scene=W._fullLayout._splomScenes[le.uid],pe.push(me)}else if("sankey"===le.type){var we=De(le._module,ne,ae[0],G[0]);pe.push(we)}else{if(-1===de.indexOf(le.xaxis)||-1===_e.indexOf(le.yaxis))continue;pe.push(De(le._module,ne,w(W,le.xaxis),w(W,le.yaxis)))}else pe.push(De(le._module,ne,ae[0],G[0]));return pe;function De(Le,Ie,je,ye){return{_module:Le,cd:Ie,xaxis:je,yaxis:ye}}}function K(W){var ae=W.searchInfo.cd[0].trace,te=W.pointNumbers;return!!ae.selectedpoints&&ae.selectedpoints.indexOf(te.length>0?te[0]:W.pointNumber)>-1}function ie(W,ae,G){var te,ne,le,ue;for(te=0;te<ae.length;te++){var pe=ae[te].cd[0].trace._fullInput,de=W._fullLayout._tracePreGUI[pe.uid]||{};void 0===de.selectedpoints&&(de.selectedpoints=pe._input.selectedpoints||null)}if(G){var _e=G.points||[];for(te=0;te<ae.length;te++)(ue=ae[te].cd[0].trace)._input.selectedpoints=ue._fullInput.selectedpoints=[],ue._fullInput!==ue&&(ue.selectedpoints=[]);for(te=0;te<_e.length;te++){var me=_e[te],we=me.data,De=me.fullData;me.pointIndices?([].push.apply(we.selectedpoints,me.pointIndices),ue._fullInput!==ue&&[].push.apply(De.selectedpoints,me.pointIndices)):(we.selectedpoints.push(me.pointIndex),ue._fullInput!==ue&&De.selectedpoints.push(me.pointIndex))}}else for(te=0;te<ae.length;te++)delete(ue=ae[te].cd[0].trace).selectedpoints,delete ue._input.selectedpoints,ue._fullInput!==ue&&delete ue._fullInput.selectedpoints;var Le=!1;for(te=0;te<ae.length;te++){ue=(le=(ne=ae[te]).cd)[0].trace,x.traceIs(ue,"regl")&&(Le=!0);var Ie=ne._module,je=Ie.styleOnSelect||Ie.style;je&&(je(W,le,le[0].node3),le[0].nodeRangePlot3&&je(W,le,le[0].nodeRangePlot3))}Le&&(c(W),A(W))}function q(W,ae){if(Array.isArray(W))for(var G=ae.cd,te=ae.cd[0].trace,ne=0;ne<W.length;ne++)W[ne]=o(W[ne],te,G);return W}function U(W,ae){for(var G=[],te=0;te<W.length;te++){G[te]=[];for(var ne=0;ne<W[te].length;ne++){G[te][ne]=[],G[te][ne][0]=ne?"L":"M";for(var le=0;le<W[te][ne].length;le++)G[te][ne].push(W[te][ne][le])}ae||G[te].push(["Z",G[te][0][1],G[te][0][2]])}return G}oe.exports={prepSelect:function(W,ae,G,te,ne){var le=l(ne),ue=i(ne),pe=h(ne),de=v(ne),_e=s(ne),me="drawcircle"===ne,we="drawline"===ne||me,De=te.gd,Le=De._fullLayout,Ie=Le._zoomlayer,je=te.element.getBoundingClientRect(),ye=te.plotinfo,Me=P(ye),Oe=ae-je.left,Pe=G-je.top;Le._calcInverseTransform(De);var Ue,qe,Xe,lt,He,$e,et,Re=g.apply3DTransform(Le._invTransform)(Oe,Pe),nt=Le._invScaleX,ct=Le._invScaleY,bt=Oe=Re[0],kt=Pe=Re[1],Bt="M"+Oe+","+Pe,Et=te.xaxes[0]._length,ht=te.yaxes[0]._length,at=te.xaxes.concat(te.yaxes),Ft=W.altKey&&!(v(ne)&&pe);ee(W,De,te),le&&(Ue=E([[Oe,Pe]],k.BENDPX));var en=Ie.selectAll("path.select-outline-"+ye.id).data(de?[0]:[1,2]),Qt=Le.newshape;en.enter().append("path").attr("class",function(Ce){return"select-outline select-outline-"+Ce+" select-outline-"+ye.id}).style(de?{opacity:Qt.opacity/2,fill:pe?void 0:Qt.fillcolor,stroke:Qt.line.color,"stroke-dasharray":M(Qt.line.dash,Qt.line.width),"stroke-width":Qt.line.width+"px"}:{}).attr("fill-rule",Qt.fillrule).classed("cursor-move",!!de).attr("transform",Me).attr("d",Bt+"Z");var tn,dn=Ie.append("path").attr("class","zoombox-corners").style({fill:_.background,stroke:_.defaultLine,"stroke-width":1}).attr("transform",Me).attr("d","M0,0Z"),Mn=Le._uid+k.SELECTID,sn=[],ke=X(De,te.xaxes,te.yaxes,te.subplot);function Se(Ce,Ve){return Ce-Ve}tn=ye.fillRangeItems?ye.fillRangeItems:ue?function(Ce,Ve){var Ge=Ce.range={};for(He=0;He<at.length;He++){var Qe=at[He],ot=Qe._id.charAt(0);Ge[Qe._id]=[F(Qe,Ve[ot+"min"]),F(Qe,Ve[ot+"max"])].sort(Se)}}:function(Ce,Ve,Ge){var Qe=Ce.lassoPoints={};for(He=0;He<at.length;He++){var ot=at[He];Qe[ot._id]=Ge.filtered.map(I(ot))}},te.moveFn=function(Ce,Ve){bt=Math.max(0,Math.min(Et,nt*Ce+Oe)),kt=Math.max(0,Math.min(ht,ct*Ve+Pe));var Vt,$t,Ge=Math.abs(bt-Oe),Qe=Math.abs(kt-Pe);if(ue){var ot,it,mt;if(_e){var xt=Le.selectdirection;switch(ot="any"===xt?Qe<Math.min(.6*Ge,C)?"h":Ge<Math.min(.6*Qe,C)?"v":"d":xt){case"h":it=me?ht/2:0,mt=ht;break;case"v":it=me?Et/2:0,mt=Et}}if(de)switch(Le.newshape.drawdirection){case"vertical":ot="h",it=me?ht/2:0,mt=ht;break;case"horizontal":ot="v",it=me?Et/2:0,mt=Et;break;case"ortho":Ge<Qe?(ot="h",it=Pe,mt=kt):(ot="v",it=Oe,mt=bt);break;default:ot="d"}"h"===ot?((lt=we?p(me,[bt,it],[bt,mt]):[[Oe,it],[Oe,mt],[bt,mt],[bt,it]]).xmin=we?bt:Math.min(Oe,bt),lt.xmax=we?bt:Math.max(Oe,bt),lt.ymin=Math.min(it,mt),lt.ymax=Math.max(it,mt),dn.attr("d","M"+lt.xmin+","+(Pe-C)+"h-4v"+2*C+"h4ZM"+(lt.xmax-1)+","+(Pe-C)+"h4v"+2*C+"h-4Z")):"v"===ot?((lt=we?p(me,[it,kt],[mt,kt]):[[it,Pe],[it,kt],[mt,kt],[mt,Pe]]).xmin=Math.min(it,mt),lt.xmax=Math.max(it,mt),lt.ymin=we?kt:Math.min(Pe,kt),lt.ymax=we?kt:Math.max(Pe,kt),dn.attr("d","M"+(Oe-C)+","+lt.ymin+"v-4h"+2*C+"v4ZM"+(Oe-C)+","+(lt.ymax-1)+"v4h"+2*C+"v-4Z")):"d"===ot&&((lt=we?p(me,[Oe,Pe],[bt,kt]):[[Oe,Pe],[Oe,kt],[bt,kt],[bt,Pe]]).xmin=Math.min(Oe,bt),lt.xmax=Math.max(Oe,bt),lt.ymin=Math.min(Pe,kt),lt.ymax=Math.max(Pe,kt),dn.attr("d","M0,0Z"))}else le&&(Ue.addPt([bt,kt]),lt=Ue.filtered);te.selectionDefs&&te.selectionDefs.length?(Vt=te.mergedPolygons,$t=lt,Xe=Ft?y.difference({regions:Vt,inverted:!1},{regions:[$t],inverted:!1}).regions:y.union({regions:Vt,inverted:!1},{regions:[$t],inverted:!1}).regions,lt.subtract=Ft,qe=Y(te.selectionDefs.concat([lt]))):(Xe=[lt],qe=L(lt)),d(U(Xe,pe),en,te),_e&&u.throttle(Mn,k.SELECTDELAY,function(){var Vt;sn=[];var $t,pt=[];for(He=0;He<ke.length;He++)if($t=($e=ke[He])._module.selectPoints($e,qe),pt.push($t),Vt=q($t,$e),sn.length)for(var At=0;At<Vt.length;At++)sn.push(Vt[At]);else sn=Vt;ie(De,ke,et={points:sn}),tn(et,lt,Ue),te.gd.emit("plotly_selecting",et)})},te.clickFn=function(Ce,Ve){if(dn.remove(),De._fullLayout._activeShapeIndex>=0)De._fullLayout._deactivateShape(De);else if(!de){var Ge=Le.clickmode;u.done(Mn).then(function(){if(u.clear(Mn),2===Ce){for(en.remove(),He=0;He<ke.length;He++)($e=ke[He])._module.selectPoints($e,!1);ie(De,ke),re(te),De.emit("plotly_deselect",null)}else Ge.indexOf("select")>-1&&j(Ve,De,te.xaxes,te.yaxes,te.subplot,te,en),"event"===Ge&&De.emit("plotly_selected",void 0);e.click(De,Ve)}).catch(g.error)}},te.doneFn=function(){dn.remove(),u.done(Mn).then(function(){u.clear(Mn),te.gd.emit("plotly_selected",et),lt&&te.selectionDefs&&(lt.subtract=Ft,te.selectionDefs.push(lt),te.mergedPolygons.length=0,[].push.apply(te.mergedPolygons,Xe)),te.doneFnCompleted&&te.doneFnCompleted(sn)}).catch(g.error),de&&re(te)}},clearSelect:D,clearSelectionsCache:re,selectOnClick:j}},{"../../components/color":366,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/fx/helpers":402,"../../components/shapes/draw_newshape/display_outlines":454,"../../components/shapes/draw_newshape/helpers":455,"../../components/shapes/draw_newshape/newshapes":456,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/polygon":515,"../../lib/throttle":530,"../../plot_api/subroutines":544,"../../registry":638,"./axis_ids":558,"./constants":561,"./handle_outline":565,"./helpers":566,polybooljs:254}],576:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("d3-time-format").utcFormat,M=b("../../lib"),_=M.numberFormat,e=b("fast-isnumeric"),o=M.cleanNumber,a=M.ms2DateTime,l=M.dateTime2ms,i=M.ensureNumber,v=M.isArrayOrTypedArray,h=b("../../constants/numerical"),s=h.FP_SAFE,d=h.BADNUM,p=h.LOG_CLIP,f=h.ONEWEEK,g=h.ONEDAY,m=h.ONEHOUR,u=h.ONEMIN,w=h.ONESEC,c=b("./axis_ids"),A=b("./constants"),k=A.HOUR_PATTERN,C=A.WEEKDAY_PATTERN;function E(D){return Math.pow(10,D)}function L(D){return null!=D}oe.exports=function(D,N){N=N||{};var F=D._id||"x",I=F.charAt(0);function P(G,te){if(G>0)return Math.log(G)/Math.LN10;if(G<=0&&te&&D.range&&2===D.range.length){var ne=D.range[0],le=D.range[1];return.5*(ne+le-2*p*Math.abs(ne-le))}return d}function j(G,te,ne,le){if((le||{}).msUTC&&e(G))return+G;var ue=l(G,ne||D.calendar);if(ue===d){if(!e(G))return d;G=+G;var pe=Math.floor(10*M.mod(G+.05,1)),de=Math.round(G-pe/10);ue=l(new Date(de))+pe/10}return ue}function V(G,te,ne){return a(G,te,ne||D.calendar)}function Z(G){return D._categories[Math.round(G)]}function Y(G){if(L(G)){if(void 0===D._categoriesMap&&(D._categoriesMap={}),void 0!==D._categoriesMap[G])return D._categoriesMap[G];D._categories.push("number"==typeof G?String(G):G);var te=D._categories.length-1;return D._categoriesMap[G]=te,te}return d}function ee(G){if(D._categoriesMap)return D._categoriesMap[G]}function re(G){var te=ee(G);return void 0!==te?te:e(G)?+G:void 0}function X(G){return e(G)?+G:ee(G)}function K(G,te,ne){return y.round(ne+te*G,2)}function ie(G,te,ne){return(G-ne)/te}var q=function(G){return e(G)?K(G,D._m,D._b):d},U=function(G){return ie(G,D._m,D._b)};if(D.rangebreaks){var W="y"===I;q=function(G){if(!e(G))return d;var te=D._rangebreaks.length;if(!te)return K(G,D._m,D._b);var ne=W;D.range[0]>D.range[1]&&(ne=!ne);for(var le=ne?-1:1,ue=le*G,pe=0,de=0;de<te;de++){var _e=le*D._rangebreaks[de].min,me=le*D._rangebreaks[de].max;if(ue<_e)break;if(!(ue>me)){pe=ue<(_e+me)/2?de:de+1;break}pe=de+1}var we=D._B[pe]||0;return isFinite(we)?K(G,D._m2,we):0},U=function(G){var te=D._rangebreaks.length;if(!te)return ie(G,D._m,D._b);for(var ne=0,le=0;le<te&&!(G<D._rangebreaks[le].pmin);le++)G>D._rangebreaks[le].pmax&&(ne=le+1);return ie(G,D._m2,D._B[ne])}}D.c2l="log"===D.type?P:i,D.l2c="log"===D.type?E:i,D.l2p=q,D.p2l=U,D.c2p="log"===D.type?function(G,te){return q(P(G,te))}:q,D.p2c="log"===D.type?function(G){return E(U(G))}:U,-1!==["linear","-"].indexOf(D.type)?(D.d2r=D.r2d=D.d2c=D.r2c=D.d2l=D.r2l=o,D.c2d=D.c2r=D.l2d=D.l2r=i,D.d2p=D.r2p=function(G){return D.l2p(o(G))},D.p2d=D.p2r=U,D.cleanPos=i):"log"===D.type?(D.d2r=D.d2l=function(G,te){return P(o(G),te)},D.r2d=D.r2c=function(G){return E(o(G))},D.d2c=D.r2l=o,D.c2d=D.l2r=i,D.c2r=P,D.l2d=E,D.d2p=function(G,te){return D.l2p(D.d2r(G,te))},D.p2d=function(G){return E(U(G))},D.r2p=function(G){return D.l2p(o(G))},D.p2r=U,D.cleanPos=i):"date"===D.type?(D.d2r=D.r2d=M.identity,D.d2c=D.r2c=D.d2l=D.r2l=j,D.c2d=D.c2r=D.l2d=D.l2r=V,D.d2p=D.r2p=function(G,te,ne){return D.l2p(j(G,0,ne))},D.p2d=D.p2r=function(G,te,ne){return V(U(G),te,ne)},D.cleanPos=function(G){return M.cleanDate(G,d,D.calendar)}):"category"===D.type?(D.d2c=D.d2l=Y,D.r2d=D.c2d=D.l2d=Z,D.d2r=D.d2l_noadd=re,D.r2c=function(G){var te=X(G);return void 0!==te?te:D.fraction2r(.5)},D.l2r=D.c2r=i,D.r2l=X,D.d2p=function(G){return D.l2p(D.r2c(G))},D.p2d=function(G){return Z(U(G))},D.r2p=D.d2p,D.p2r=U,D.cleanPos=function(G){return"string"==typeof G&&""!==G?G:i(G)}):"multicategory"===D.type&&(D.r2d=D.c2d=D.l2d=Z,D.d2r=D.d2l_noadd=re,D.r2c=function(G){var te=re(G);return void 0!==te?te:D.fraction2r(.5)},D.r2c_just_indices=ee,D.l2r=D.c2r=i,D.r2l=re,D.d2p=function(G){return D.l2p(D.r2c(G))},D.p2d=function(G){return Z(U(G))},D.r2p=D.d2p,D.p2r=U,D.cleanPos=function(G){return Array.isArray(G)||"string"==typeof G&&""!==G?G:i(G)},D.setupMultiCategory=function(G){var te,ne,le=D._traceIndices,ue=D._matchGroup;if(ue&&0===D._categories.length)for(var pe in ue)if(pe!==F){var de=N[c.id2name(pe)];le=le.concat(de._traceIndices)}var _e=[[0,{}],[0,{}]],me=[];for(te=0;te<le.length;te++){var we=G[le[te]];if(I in we){var De=we[I],Le=we._length||M.minRowLength(De);if(v(De[0])&&v(De[1]))for(ne=0;ne<Le;ne++){var Ie=De[0][ne],je=De[1][ne];L(Ie)&&L(je)&&(me.push([Ie,je]),Ie in _e[0][1]||(_e[0][1][Ie]=_e[0][0]++),je in _e[1][1]||(_e[1][1][je]=_e[1][0]++))}}}for(me.sort(function(ye,Me){var Oe=_e[0][1],Pe=Oe[ye[0]]-Oe[Me[0]];if(Pe)return Pe;var Re=_e[1][1];return Re[ye[1]]-Re[Me[1]]}),te=0;te<me.length;te++)Y(me[te])}),D.fraction2r=function(G){var te=D.r2l(D.range[0]),ne=D.r2l(D.range[1]);return D.l2r(te+G*(ne-te))},D.r2fraction=function(G){var te=D.r2l(D.range[0]),ne=D.r2l(D.range[1]);return(D.r2l(G)-te)/(ne-te)},D.cleanRange=function(G,te){te||(te={}),G||(G="range");var ne,le,ue=M.nestedProperty(D,G).get();if(le=(le="date"===D.type?M.dfltRange(D.calendar):"y"===I?A.DFLTRANGEY:"realaxis"===D._name?[0,1]:te.dfltRange||A.DFLTRANGEX).slice(),"tozero"!==D.rangemode&&"nonnegative"!==D.rangemode||(le[0]=0),ue&&2===ue.length)for("date"!==D.type||D.autorange||(ue[0]=M.cleanDate(ue[0],d,D.calendar),ue[1]=M.cleanDate(ue[1],d,D.calendar)),ne=0;ne<2;ne++)if("date"===D.type){if(!M.isDateTime(ue[ne],D.calendar)){D[G]=le;break}if(D.r2l(ue[0])===D.r2l(ue[1])){var pe=M.constrain(D.r2l(ue[0]),M.MIN_MS+1e3,M.MAX_MS-1e3);ue[0]=D.l2r(pe-1e3),ue[1]=D.l2r(pe+1e3);break}}else{if(!e(ue[ne])){if(!e(ue[1-ne])){D[G]=le;break}ue[ne]=ue[1-ne]*(ne?10:.1)}if(ue[ne]<-s?ue[ne]=-s:ue[ne]>s&&(ue[ne]=s),ue[0]===ue[1]){var de=Math.max(1,Math.abs(1e-6*ue[0]));ue[0]-=de,ue[1]+=de}}else M.nestedProperty(D,G).set(le)},D.setScale=function(G){var te=N._size;if(D.overlaying){var ne=c.getFromId({_fullLayout:N},D.overlaying);D.domain=ne.domain}var le=G&&D._r?"_r":"range",ue=D.calendar;D.cleanRange(le);var pe,de,_e=D.r2l(D[le][0],ue),me=D.r2l(D[le][1],ue),we="y"===I;if(we?(D._offset=te.t+(1-D.domain[1])*te.h,D._length=te.h*(D.domain[1]-D.domain[0]),D._m=D._length/(_e-me),D._b=-D._m*me):(D._offset=te.l+D.domain[0]*te.w,D._length=te.w*(D.domain[1]-D.domain[0]),D._m=D._length/(me-_e),D._b=-D._m*_e),D._rangebreaks=[],D._lBreaks=0,D._m2=0,D._B=[],D.rangebreaks&&(D._rangebreaks=D.locateBreaks(Math.min(_e,me),Math.max(_e,me)),D._rangebreaks.length)){for(pe=0;pe<D._rangebreaks.length;pe++)de=D._rangebreaks[pe],D._lBreaks+=Math.abs(de.max-de.min);var De=we;_e>me&&(De=!De),De&&D._rangebreaks.reverse();var Le=De?-1:1;for(D._m2=Le*D._length/(Math.abs(me-_e)-D._lBreaks),D._B.push(-D._m2*(we?me:_e)),pe=0;pe<D._rangebreaks.length;pe++)D._B.push(D._B[D._B.length-1]-Le*D._m2*((de=D._rangebreaks[pe]).max-de.min));for(pe=0;pe<D._rangebreaks.length;pe++)(de=D._rangebreaks[pe]).pmin=q(de.min),de.pmax=q(de.max)}if(!isFinite(D._m)||!isFinite(D._b)||D._length<0)throw N._replotting=!1,new Error("Something went wrong with axis scaling")},D.maskBreaks=function(G){var te,ne,le,ue,pe,de=D.rangebreaks||[];de._cachedPatterns||(de._cachedPatterns=de.map(function(Ie){return Ie.enabled&&Ie.bounds?M.simpleMap(Ie.bounds,Ie.pattern?o:D.d2c):null})),de._cachedValues||(de._cachedValues=de.map(function(Ie){return Ie.enabled&&Ie.values?M.simpleMap(Ie.values,D.d2c).sort(M.sorterAsc):null}));for(var _e=0;_e<de.length;_e++){var me=de[_e];if(me.enabled)if(me.bounds){switch(ne=(te=de._cachedPatterns[_e])[0],le=te[1],me.pattern){case C:ue=(pe=new Date(G)).getUTCDay(),ne>le&&(le+=7,ue<ne&&(ue+=7));break;case k:ue=(pe=new Date(G)).getUTCHours()+(pe.getUTCMinutes()/60+pe.getUTCSeconds()/3600+pe.getUTCMilliseconds()/36e5),ne>le&&(le+=24,ue<ne&&(ue+=24));break;case"":ue=G}if(ue>=ne&&ue<le)return d}else for(var De=de._cachedValues[_e],Le=0;Le<De.length;Le++)if(le=(ne=De[Le])+me.dvalue,G>=ne&&G<le)return d}return G},D.locateBreaks=function(G,te){var ne,le,ue,pe,de=[];if(!D.rangebreaks)return de;var _e=D.rangebreaks.slice().sort(function(Re,Ue){return Re.pattern===C&&Ue.pattern===k?-1:Ue.pattern===C&&Re.pattern===k?1:0}),me=function(Re,Ue){if((Re=M.constrain(Re,G,te))!==(Ue=M.constrain(Ue,G,te))){for(var qe=!0,Xe=0;Xe<de.length;Xe++){var lt=de[Xe];Re<lt.max&&Ue>=lt.min&&(Re<lt.min&&(lt.min=Re),Ue>lt.max&&(lt.max=Ue),qe=!1)}qe&&de.push({min:Re,max:Ue})}};for(ne=0;ne<_e.length;ne++){var we=_e[ne];if(we.enabled)if(we.bounds){var De=G,Le=te;we.pattern&&(De=Math.floor(De)),ue=(le=M.simpleMap(we.bounds,we.pattern?o:D.r2l))[0],pe=le[1];var Ie,je,ye=new Date(De);switch(we.pattern){case C:je=f,Ie=(pe-ue+(pe<ue?7:0))*g,De+=ue*g-(ye.getUTCDay()*g+ye.getUTCHours()*m+ye.getUTCMinutes()*u+ye.getUTCSeconds()*w+ye.getUTCMilliseconds());break;case k:je=g,Ie=(pe-ue+(pe<ue?24:0))*m,De+=ue*m-(ye.getUTCHours()*m+ye.getUTCMinutes()*u+ye.getUTCSeconds()*w+ye.getUTCMilliseconds());break;default:De=Math.min(le[0],le[1]),Ie=je=(Le=Math.max(le[0],le[1]))-De}for(var Me=De;Me<Le;Me+=je)me(Me,Me+Ie)}else for(var Oe=M.simpleMap(we.values,D.d2c),Pe=0;Pe<Oe.length;Pe++)me(ue=Oe[Pe],pe=ue+we.dvalue)}return de.sort(function(Re,Ue){return Re.min-Ue.min}),de},D.makeCalcdata=function(G,te,ne){var le,ue,pe,de,_e=D.type,me="date"===_e&&G[te+"calendar"];if(te in G){if(le=G[te],de=G._length||M.minRowLength(le),M.isTypedArray(le)&&("linear"===_e||"log"===_e)){if(de===le.length)return le;if(le.subarray)return le.subarray(0,de)}if("multicategory"===_e)return function(Le,Ie){for(var je=new Array(Ie),ye=0;ye<Ie;ye++)je[ye]=ee([(Le[0]||[])[ye],(Le[1]||[])[ye]]);return je}(le,de);for(ue=new Array(de),pe=0;pe<de;pe++)ue[pe]=D.d2c(le[pe],0,me,ne)}else{var we=te+"0"in G?D.d2c(G[te+"0"],0,me):0,De=G["d"+te]?Number(G["d"+te]):1;for(le=G[{x:"y",y:"x"}[te]],de=G._length||le.length,ue=new Array(de),pe=0;pe<de;pe++)ue[pe]=we+pe*De}if(D.rangebreaks)for(pe=0;pe<de;pe++)ue[pe]=D.maskBreaks(ue[pe]);return ue},D.isValidRange=function(G){return Array.isArray(G)&&2===G.length&&e(D.r2l(G[0]))&&e(D.r2l(G[1]))},D.isPtWithinRange=function(G,te){var ne=D.c2l(G[I],null,te),le=D.r2l(D.range[0]),ue=D.r2l(D.range[1]);return le<ue?le<=ne&&ne<=ue:ue<=ne&&ne<=le},D._emptyCategories=function(){D._categories=[],D._categoriesMap={}},D.clearCalc=function(){var G=D._matchGroup;if(G){var te=null,ne=null;for(var le in G){var ue=N[c.id2name(le)];if(ue._categories){te=ue._categories,ne=ue._categoriesMap;break}}te&&ne?(D._categories=te,D._categoriesMap=ne):D._emptyCategories()}else D._emptyCategories();if(D._initialCategories)for(var pe=0;pe<D._initialCategories.length;pe++)Y(D._initialCategories[pe])},D.sortByInitialCategories=function(){var G=[];if(D._emptyCategories(),D._initialCategories)for(var te=0;te<D._initialCategories.length;te++)Y(D._initialCategories[te]);G=G.concat(D._traceIndices);var ne=D._matchGroup;for(var le in ne)if(F!==le){var ue=N[c.id2name(le)];ue._categories=D._categories,ue._categoriesMap=D._categoriesMap,G=G.concat(ue._traceIndices)}return G};var ae=N._d3locale;"date"===D.type&&(D._dateFormat=ae?ae.timeFormat:x,D._extraFormat=N._extraFormat),D._separators=N.separators,D._numFormat=ae?ae.numberFormat:_,delete D._minDtick,delete D._forceTick0}},{"../../constants/numerical":479,"../../lib":503,"./axis_ids":558,"./constants":561,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],577:[function(b,oe,se){"use strict";oe.exports=function(y){var x=["showexponent","showtickprefix","showticksuffix"].filter(function(M){return void 0!==y[M]});if(x.every(function(M){return y[M]===y[x[0]]})||1===x.length)return y[x[0]]}},{}],578:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../components/color").contrast,M=b("./layout_attributes"),_=b("./show_dflt"),e=b("../array_container_defaults");function o(a,l){function i(v,h){return y.coerce(a,l,M.tickformatstops,v,h)}i("enabled")&&(i("dtickrange"),i("value"))}oe.exports=function(a,l,i,v,h){h||(h={});var s=_(a);if(i("showticklabels")){var d=h.font||{},p=l.color,f=-1!==(l.ticklabelposition||"").indexOf("inside")?x(h.bgColor):p&&p!==M.color.dflt?p:d.color;if(y.coerceFont(i,"tickfont",{family:d.family,size:d.size,color:f}),h.noTicklabelstep||"multicategory"===v||"log"===v||i("ticklabelstep"),h.noAng||i("tickangle"),"category"!==v){var g=i("tickformat");e(a,l,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:o}),l.tickformatstops.length||delete l.tickformatstops,h.noExp||g||"date"===v||(i("showexponent",s),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}},{"../../components/color":366,"../../lib":503,"../array_container_defaults":549,"./layout_attributes":569,"./show_dflt":577}],579:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./layout_attributes");oe.exports=function(M,_,e,o){var a=o.isMinor,l=a?M.minor||{}:M,i=a?_.minor:_,v=a?x.minor:x,h=a?"minor.":"",s=y.coerce2(l,i,v,"ticklen",a?.6*(_.ticklen||5):void 0),d=y.coerce2(l,i,v,"tickwidth",a?_.tickwidth||1:void 0),p=y.coerce2(l,i,v,"tickcolor",(a?_.tickcolor:void 0)||i.color);e(h+"ticks",!a&&o.outerTicks||s||d||p?"outside":"")||(delete i.ticklen,delete i.tickwidth,delete i.tickcolor)}},{"../../lib":503,"./layout_attributes":569}],580:[function(b,oe,se){"use strict";var y=b("./clean_ticks"),x=b("../../lib").isArrayOrTypedArray;oe.exports=function(M,_,e,o,a){a||(a={});var l=a.isMinor,i=l?M.minor||{}:M,v=l?_.minor:_,h=l?"minor.":"";function s(u){var w=i[u];return void 0!==w?w:(v._template||{})[u]}var d=s("tick0"),p=s("dtick"),f=s("tickvals"),g=e(h+"tickmode",x(f)?"array":p?"linear":"auto");if("auto"===g)e(h+"nticks");else if("linear"===g){var m=v.dtick=y.dtick(p,o);v.tick0=y.tick0(d,o,_.calendar,m)}else"multicategory"!==o&&(void 0===e(h+"tickvals")?v.tickmode="auto":l||e("ticktext"))}},{"../../lib":503,"./clean_ticks":560}],581:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../registry"),M=b("../../lib"),_=b("../../components/drawing"),e=b("./axes");oe.exports=function(o,a,l,i){var v=o._fullLayout;if(0!==a.length){var h,s,d,p;i&&(h=i());var f=y.ease(l.easing);return o._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(p),p=null,function(){for(var u={},w=0;w<a.length;w++){var c=a[w],k=c.plotinfo.yaxis;c.xr0&&(u[c.plotinfo.xaxis._name+".range"]=c.xr0.slice()),c.yr0&&(u[k._name+".range"]=c.yr0.slice())}return x.call("relayout",o,u).then(function(){for(var C=0;C<a.length;C++)g(a[C].plotinfo)})}()}),s=Date.now(),p=window.requestAnimationFrame(function u(){d=Date.now();for(var w=Math.min(1,(d-s)/l.duration),c=f(w),A=0;A<a.length;A++)m(a[A],c);d-s>l.duration?(function(){for(var k={},C=0;C<a.length;C++){var E=a[C],D=E.plotinfo.yaxis;E.xr1&&(k[E.plotinfo.xaxis._name+".range"]=E.xr1.slice()),E.yr1&&(k[D._name+".range"]=E.yr1.slice())}h&&h(),x.call("relayout",o,k).then(function(){for(var N=0;N<a.length;N++)g(a[N].plotinfo)})}(),p=window.cancelAnimationFrame(u)):p=window.requestAnimationFrame(u)}),Promise.resolve()}function g(u){var w=u.xaxis,c=u.yaxis;v._defs.select("#"+u.clipId+"> rect").call(_.setTranslate,0,0).call(_.setScale,1,1),u.plot.call(_.setTranslate,w._offset,c._offset).call(_.setScale,1,1);var A=u.plot.selectAll(".scatterlayer .trace");A.selectAll(".point").call(_.setPointGroupScale,1,1),A.selectAll(".textpoint").call(_.setTextPointsScale,1,1),A.call(_.hideOutsideRangePoints,u)}function m(u,w){var c=u.plotinfo,A=c.xaxis,k=c.yaxis,C=A._length,E=k._length,L=!!u.xr1,D=!!u.yr1,N=[];if(L){var F=M.simpleMap(u.xr0,A.r2l),I=M.simpleMap(u.xr1,A.r2l),P=F[1]-F[0],j=I[1]-I[0];N[0]=(F[0]*(1-w)+w*I[0]-F[0])/(F[1]-F[0])*C,N[2]=C*(1-w+w*j/P),A.range[0]=A.l2r(F[0]*(1-w)+w*I[0]),A.range[1]=A.l2r(F[1]*(1-w)+w*I[1])}else N[0]=0,N[2]=C;if(D){var V=M.simpleMap(u.yr0,k.r2l),Z=M.simpleMap(u.yr1,k.r2l),Y=V[1]-V[0],ee=Z[1]-Z[0];N[1]=(V[1]*(1-w)+w*Z[1]-V[1])/(V[0]-V[1])*E,N[3]=E*(1-w+w*ee/Y),k.range[0]=A.l2r(V[0]*(1-w)+w*Z[0]),k.range[1]=k.l2r(V[1]*(1-w)+w*Z[1])}else N[1]=0,N[3]=E;e.drawOne(o,A,{skipTitle:!0}),e.drawOne(o,k,{skipTitle:!0}),e.redrawComponents(o,[A._id,k._id]);var re=L?C/N[2]:1,X=D?E/N[3]:1,W=A._offset-(L?N[0]/N[2]*C:0),ae=k._offset-(D?N[1]/N[3]*E:0);c.clipRect.call(_.setTranslate,L?N[0]:0,D?N[1]:0).call(_.setScale,1/re,1/X),c.plot.call(_.setTranslate,W,ae).call(_.setScale,re,X),_.setPointGroupScale(c.zoomScalePts,1/re,1/X),_.setTextPointsScale(c.zoomScaleTxt,1/re,1/X)}e.redrawComponents(o)}},{"../../components/drawing":388,"../../lib":503,"../../registry":638,"./axes":554,"@plotly/d3":58}],582:[function(b,oe,se){"use strict";var y=b("../../registry").traceIs,x=b("./axis_autotype");function M(e){return{v:"x",h:"y"}[e.orientation||"v"]}function _(e,o){var a=M(e),l=y(e,"box-violin"),i=y(e._fullInput||{},"candlestick");return l&&!i&&o===a&&void 0===e[a]&&void 0===e[a+"0"]}oe.exports=function(e,o,a,l){a("autotypenumbers",l.autotypenumbersDflt),"-"===a("type",(l.splomStash||{}).type)&&(function(i,v){if("-"===i.type){var h,s=i._id,d=s.charAt(0);-1!==s.indexOf("scene")&&(s=d);var p=function(k,C,E){for(var L=0;L<k.length;L++){var D=k[L];if("splom"===D.type&&D._length>0&&(D["_"+E+"axes"]||{})[C]||(D[E+"axis"]||E)===C&&(_(D,E)||(D[E]||[]).length||D[E+"0"]))return D}}(v,s,d);if(p){if("histogram"===p.type&&d==={v:"y",h:"x"}[p.orientation||"v"])return void(i.type="linear");var f=d+"calendar",g=p[f],m={noMultiCategory:!y(p,"cartesian")||y(p,"noMultiCategory")};if("box"===p.type&&p._hasPreCompStats&&d==={h:"x",v:"y"}[p.orientation||"v"]&&(m.noMultiCategory=!0),m.autotypenumbers=i.autotypenumbers,_(p,d)){var u=M(p),w=[];for(h=0;h<v.length;h++){var c=v[h];y(c,"box-violin")&&(c[d+"axis"]||d)===s&&(w.push(void 0!==c[u]?c[u][0]:void 0!==c.name?c.name:"text"),c[f]!==g&&(g=void 0))}i.type=x(w,g,m)}else if("splom"===p.type){var A=p.dimensions[p._axesDim[s]];A.visible&&(i.type=x(A.values,g,m))}else i.type=x(p[d]||[p[d+"0"]],g,m)}}}(o,l.data),"-"===o.type?o.type="linear":e.type=o.type)}},{"../../registry":638,"./axis_autotype":555}],583:[function(b,oe,se){"use strict";var y=b("../registry"),x=b("../lib");function M(a,l,i){var v,h,s,d=!1;if("data"===l.type)v=a._fullData[null!==l.traces?l.traces[0]:0];else{if("layout"!==l.type)return!1;v=a._fullLayout}return h=x.nestedProperty(v,l.prop).get(),(s=i[l.type]=i[l.type]||{}).hasOwnProperty(l.prop)&&s[l.prop]!==h&&(d=!0),s[l.prop]=h,{changed:d,value:h}}function _(a,l){var i=[],v=l[0],h={};if("string"==typeof v)h[v]=l[1];else{if(!x.isPlainObject(v))return i;h=v}return o(h,function(s,d,p){i.push({type:"layout",prop:s,value:p})},"",0),i}function e(a,l){var i,v,h,s,d=[];if(h=l[1],i=l[2],s={},"string"==typeof(v=l[0]))s[v]=h;else{if(!x.isPlainObject(v))return d;s=v,void 0===i&&(i=h)}return void 0===i&&(i=null),o(s,function(p,f,g){var m,u;if(Array.isArray(g)){u=g.slice();var w=Math.min(u.length,a.data.length);i&&(w=Math.min(w,i.length)),m=[];for(var c=0;c<w;c++)m[c]=i?i[c]:c}else u=g,m=i?i.slice():null;if(null===m)Array.isArray(u)&&(u=u[0]);else if(Array.isArray(m)){if(!Array.isArray(u)){var A=u;u=[];for(var k=0;k<m.length;k++)u[k]=A}u.length=Math.min(m.length,u.length)}d.push({type:"data",prop:p,traces:m,value:u})},"",0),d}function o(a,l,i,v){Object.keys(a).forEach(function(h){var s=a[h];if("_"!==h[0]){var d=i+(v>0?".":"")+h;x.isPlainObject(s)?o(s,l,d,v+1):l(d,h,s)}})}se.manageCommandObserver=function(a,l,i,v){var h={},s=!0;l&&l._commandObserver&&(h=l._commandObserver),h.cache||(h.cache={}),h.lookupTable={};var d=se.hasSimpleAPICommandBindings(a,i,h.lookupTable);if(l&&l._commandObserver){if(d)return h;if(l._commandObserver.remove)return l._commandObserver.remove(),l._commandObserver=null,h}if(d){M(a,d,h.cache),h.check=function(){if(s){var g=M(a,d,h.cache);return g.changed&&v&&void 0!==h.lookupTable[g.value]&&(h.disable(),Promise.resolve(v({value:g.value,type:d.type,prop:d.prop,traces:d.traces,index:h.lookupTable[g.value]})).then(h.enable,h.enable)),g.changed}};for(var p=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],f=0;f<p.length;f++)a._internalOn(p[f],h.check);h.remove=function(){for(var g=0;g<p.length;g++)a._removeInternalListener(p[g],h.check)}}else x.log("Unable to automatically bind plot updates to API command"),h.lookupTable={},h.remove=function(){};return h.disable=function(){s=!1},h.enable=function(){s=!0},l&&(l._commandObserver=h),h},se.hasSimpleAPICommandBindings=function(a,l,i){var v,h,s=l.length;for(v=0;v<s;v++){var d,p=l[v],f=p.method,g=p.args;if(Array.isArray(g)||(g=[]),!f)return!1;var m=se.computeAPICommandBindings(a,f,g);if(1!==m.length)return!1;if(h){if((d=m[0]).type!==h.type||d.prop!==h.prop)return!1;if(Array.isArray(h.traces)){if(!Array.isArray(d.traces))return!1;d.traces.sort();for(var u=0;u<h.traces.length;u++)if(h.traces[u]!==d.traces[u])return!1}else if(d.prop!==h.prop)return!1}else h=m[0],Array.isArray(h.traces)&&h.traces.sort();var w=(d=m[0]).value;if(Array.isArray(w)){if(1!==w.length)return!1;w=w[0]}i&&(i[w]=v)}return h},se.executeAPICommand=function(a,l,i){if("skip"===l)return Promise.resolve();var v=y.apiMethodRegistry[l],h=[a];Array.isArray(i)||(i=[]);for(var s=0;s<i.length;s++)h.push(i[s]);return v.apply(null,h).catch(function(d){return x.warn("API call to Plotly."+l+" rejected.",d),Promise.reject(d)})},se.computeAPICommandBindings=function(a,l,i){var v,s;switch(Array.isArray(i)||(i=[]),l){case"restyle":v=e(a,i);break;case"relayout":v=_(0,i);break;case"update":v=e(a,[i[0],i[2]]).concat(_(0,[i[1]]));break;case"animate":s=i,v=Array.isArray(s[0])&&1===s[0].length&&-1!==["string","number"].indexOf(typeof s[0][0])?[{type:"layout",prop:"_currentFrame",value:s[0][0].toString()}]:[];break;default:v=[]}return v}},{"../lib":503,"../registry":638}],584:[function(b,oe,se){"use strict";var y=b("../lib/extend").extendFlat;se.attributes=function(x,M){M=M||{};var _={valType:"info_array",editType:(x=x||{}).editType,items:[{valType:"number",min:0,max:1,editType:x.editType},{valType:"number",min:0,max:1,editType:x.editType}],dflt:[0,1]},e={x:y({},_,{}),y:y({},_,{}),editType:x.editType};return x.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:x.editType},e.column={valType:"integer",min:0,dflt:0,editType:x.editType}),e},se.defaults=function(x,M,_,e){var o=e&&e.x||[0,1],a=e&&e.y||[0,1],l=M.grid;if(l){var i=_("domain.column");void 0!==i&&(i<l.columns?o=l._domains.x[i]:delete x.domain.column);var v=_("domain.row");void 0!==v&&(v<l.rows?a=l._domains.y[v]:delete x.domain.row)}var h=_("domain.x",o),s=_("domain.y",a);h[0]<h[1]||(x.domain.x=o.slice()),s[0]<s[1]||(x.domain.y=a.slice())}},{"../lib/extend":493}],585:[function(b,oe,se){"use strict";oe.exports=function(y){var x=y.editType,M=y.colorEditType;void 0===M&&(M=x);var _={family:{valType:"string",noBlank:!0,strict:!0,editType:x},size:{valType:"number",min:1,editType:x},color:{valType:"color",editType:M},editType:x};return y.autoSize&&(_.size.dflt="auto"),y.autoColor&&(_.color.dflt="auto"),y.arrayOk&&(_.family.arrayOk=!0,_.size.arrayOk=!0,_.color.arrayOk=!0),_}},{}],586:[function(b,oe,se){"use strict";oe.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],587:[function(b,oe,se){"use strict";se.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},se.axesNames=["lonaxis","lataxis"],se.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},se.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},se.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},se.clipPad=.001,se.precision=.1,se.landColor="#F0DC82",se.waterColor="#3399FF",se.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},se.sphereSVG={type:"Sphere"},se.fillLayers={ocean:1,land:1,lakes:1},se.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},se.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],se.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],se.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],588:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("d3-geo"),M=x.geoPath,_=x.geoDistance,e=b("d3-geo-projection"),o=b("../../registry"),a=b("../../lib"),l=a.strTranslate,i=b("../../components/color"),v=b("../../components/drawing"),h=b("../../components/fx"),s=b("../plots"),d=b("../cartesian/axes"),p=b("../cartesian/autorange").getAutoRange,f=b("../../components/dragelement"),g=b("../cartesian/select").prepSelect,m=b("../cartesian/select").clearSelect,u=b("../cartesian/select").selectOnClick,w=b("./zoom"),c=b("./constants"),A=b("../../lib/geo_location_utils"),k=b("../../lib/topojson_utils"),C=b("topojson-client").feature;function E(N){this.id=N.id,this.graphDiv=N.graphDiv,this.container=N.container,this.topojsonURL=N.topojsonURL,this.isStatic=N.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var L=E.prototype;function D(N,F){var I=c.clipPad,P=N[0]+I,j=N[1]-I,V=F[0]+I,Z=F[1]-I;P>0&&j<0&&(j+=360);var Y=(j-P)/4;return{type:"Polygon",coordinates:[[[P,V],[P,Z],[P+Y,Z],[P+2*Y,Z],[P+3*Y,Z],[j,Z],[j,V],[j-Y,V],[j-2*Y,V],[j-3*Y,V],[P,V]]]}}oe.exports=function(N){return new E(N)},L.plot=function(N,F,I){var P=this,j=F[this.id],V=[],Z=!1;for(var Y in c.layerNameToAdjective)if("frame"!==Y&&j["show"+Y]){Z=!0;break}for(var ee=0;ee<N.length;ee++)if(N[0][0].trace.locationmode){Z=!0;break}if(Z){var re=k.getTopojsonName(j);null!==P.topojson&&re===P.topojsonName||(P.topojsonName=re,void 0===PlotlyGeoAssets.topojson[P.topojsonName]&&V.push(P.fetchTopojson()))}V=V.concat(A.fetchTraceGeoData(N)),I.push(new Promise(function(X,K){Promise.all(V).then(function(){P.topojson=PlotlyGeoAssets.topojson[P.topojsonName],P.update(N,F),X()}).catch(K)}))},L.fetchTopojson=function(){var N=this,F=k.getTopojsonPath(N.topojsonURL,N.topojsonName);return new Promise(function(I,P){y.json(F,function(j,V){if(j)return P(404===j.status?new Error(["plotly.js could not find topojson file at",F,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",F].join(" ")));PlotlyGeoAssets.topojson[N.topojsonName]=V,I()})})},L.update=function(N,F){var I=F[this.id];this.hasChoropleth=!1;for(var P=0;P<N.length;P++){var j=N[P],V=j[0].trace;"choropleth"===V.type&&(this.hasChoropleth=!0),!0===V.visible&&V._length>0&&V._module.calcGeoJSON(j,F)}if(!this.updateProjection(N,F)){this.viewInitial&&this.scope===I.scope||this.saveViewInitial(I),this.scope=I.scope,this.updateBaseLayers(F,I),this.updateDims(F,I),this.updateFx(F,I),s.generalUpdatePerTraceModule(this.graphDiv,this,N,I);var Z=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=Z.selectAll(".point"),this.dataPoints.text=Z.selectAll("text"),this.dataPaths.line=Z.selectAll(".js-line");var Y=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=Y.selectAll("path"),this.render()}},L.updateProjection=function(N,F){var I=this.graphDiv,P=F[this.id],j=F._size,V=P.domain,Z=P.projection,Y=P.lonaxis,ee=P.lataxis,re=Y._ax,X=ee._ax,K=this.projection=function(ye){var Me=ye.projection,Oe=Me.type,Pe=c.projNames[Oe];Pe="geo"+a.titleCase(Pe);for(var Re=(x[Pe]||e[Pe])(),Ue=ye._isSatellite?180*Math.acos(1/Me.distance)/Math.PI:ye._isClipped?c.lonaxisSpan[Oe]/2:null,qe=["center","rotate","parallels","clipExtent"],Xe=function($e){return $e?Re:[]},lt=0;lt<qe.length;lt++){var He=qe[lt];"function"!=typeof Re[He]&&(Re[He]=Xe)}return Re.isLonLatOverEdges=function($e){if(null===Re($e))return!0;if(Ue){var et=Re.rotate();return _($e,[-et[0],-et[1]])>Ue*Math.PI/180}return!1},Re.getPath=function(){return M().projection(Re)},Re.getBounds=function($e){return Re.getPath().bounds($e)},Re.precision(c.precision),ye._isSatellite&&Re.tilt(Me.tilt).distance(Me.distance),Ue&&Re.clipAngle(Ue-c.clipPad),Re}(P),ie=[[j.l+j.w*V.x[0],j.t+j.h*(1-V.y[1])],[j.l+j.w*V.x[1],j.t+j.h*(1-V.y[0])]],q=P.center||{},U=Z.rotation||{},W=Y.range||[],ae=ee.range||[];if(P.fitbounds){re._length=ie[1][0]-ie[0][0],X._length=ie[1][1]-ie[0][1],re.range=p(I,re),X.range=p(I,X);var G=(re.range[0]+re.range[1])/2,te=(X.range[0]+X.range[1])/2;if(P._isScoped)q={lon:G,lat:te};else if(P._isClipped){q={lon:G,lat:te},U={lon:G,lat:te,roll:U.roll};var ne=Z.type,le=c.lonaxisSpan[ne]/2||180,ue=c.lataxisSpan[ne]/2||90;W=[G-le,G+le],ae=[te-ue,te+ue]}else q={lon:G,lat:te},U={lon:G,lat:U.lat,roll:U.roll}}K.center([q.lon-U.lon,q.lat-U.lat]).rotate([-U.lon,-U.lat,U.roll]).parallels(Z.parallels);var pe=D(W,ae);K.fitExtent(ie,pe);var de=this.bounds=K.getBounds(pe),_e=this.fitScale=K.scale(),me=K.translate();if(P.fitbounds){var we=K.getBounds(D(re.range,X.range)),De=Math.min((de[1][0]-de[0][0])/(we[1][0]-we[0][0]),(de[1][1]-de[0][1])/(we[1][1]-we[0][1]));isFinite(De)?K.scale(De*_e):a.warn("Something went wrong during"+this.id+"fitbounds computations.")}else K.scale(Z.scale*_e);var Le=this.midPt=[(de[0][0]+de[1][0])/2,(de[0][1]+de[1][1])/2];if(K.translate([me[0]+(Le[0]-me[0]),me[1]+(Le[1]-me[1])]).clipExtent(de),P._isAlbersUsa){var Ie=K([q.lon,q.lat]),je=K.translate();K.translate([je[0]-(Ie[0]-je[0]),je[1]-(Ie[1]-je[1])])}},L.updateBaseLayers=function(N,F){var I=this,P=I.topojson,j=I.layers,V=I.basePaths;function Z(K){return"lonaxis"===K||"lataxis"===K}function Y(K){return Boolean(c.lineLayers[K])}function ee(K){return Boolean(c.fillLayers[K])}var re=(this.hasChoropleth?c.layersForChoropleth:c.layers).filter(function(K){return Y(K)||ee(K)?F["show"+K]:!Z(K)||F[K].showgrid}),X=I.framework.selectAll(".layer").data(re,String);X.exit().each(function(K){delete j[K],delete V[K],y.select(this).remove()}),X.enter().append("g").attr("class",function(K){return"layer "+K}).each(function(K){var ie=j[K]=y.select(this);"bg"===K?I.bgRect=ie.append("rect").style("pointer-events","all"):Z(K)?V[K]=ie.append("path").style("fill","none"):"backplot"===K?ie.append("g").classed("choroplethlayer",!0):"frontplot"===K?ie.append("g").classed("scatterlayer",!0):Y(K)?V[K]=ie.append("path").style("fill","none").style("stroke-miterlimit",2):ee(K)&&(V[K]=ie.append("path").style("stroke","none"))}),X.order(),X.each(function(K){var ie=V[K],q=c.layerNameToAdjective[K];"frame"===K?ie.datum(c.sphereSVG):Y(K)||ee(K)?ie.datum(C(P,P.objects[K])):Z(K)&&ie.datum(function(U,W,ae){var G,te,ne,le=W[U],ue=c.scopeDefaults[W.scope];"lonaxis"===U?(G=ue.lonaxisRange,te=ue.lataxisRange,ne=function(je,ye){return[je,ye]}):"lataxis"===U&&(G=ue.lataxisRange,te=ue.lonaxisRange,ne=function(je,ye){return[ye,je]});var pe={type:"linear",range:[G[0],G[1]-1e-6],tick0:le.tick0,dtick:le.dtick};d.setConvert(pe,ae);var de=d.calcTicks(pe);W.isScoped||"lonaxis"!==U||de.pop();for(var _e=de.length,me=new Array(_e),we=0;we<_e;we++)for(var De=de[we].x,Le=me[we]=[],Ie=te[0];Ie<te[1]+2.5;Ie+=2.5)Le.push(ne(De,Ie));return{type:"MultiLineString",coordinates:me}}(K,F,N)).call(i.stroke,F[K].gridcolor).call(v.dashLine,F[K].griddash,F[K].gridwidth),Y(K)?ie.call(i.stroke,F[q+"color"]).call(v.dashLine,"",F[q+"width"]):ee(K)&&ie.call(i.fill,F[q+"color"])})},L.updateDims=function(N,F){var I=this.bounds,P=(F.framewidth||0)/2,j=I[0][0]-P,V=I[0][1]-P,Z=I[1][0]-j+P,Y=I[1][1]-V+P;v.setRect(this.clipRect,j,V,Z,Y),this.bgRect.call(v.setRect,j,V,Z,Y).call(i.fill,F.bgcolor),this.xaxis._offset=j,this.xaxis._length=Z,this.yaxis._offset=V,this.yaxis._length=Y},L.updateFx=function(N,F){var I=this,P=I.graphDiv,j=I.bgRect,V=N.dragmode,Z=N.clickmode;if(!I.isStatic){var Y;"select"===V?Y=function(X,K){(X.range={})[I.id]=[re([K.xmin,K.ymin]),re([K.xmax,K.ymax])]}:"lasso"===V&&(Y=function(X,K,ie){(X.lassoPoints={})[I.id]=ie.filtered.map(re)});var ee={element:I.bgRect.node(),gd:P,plotinfo:{id:I.id,xaxis:I.xaxis,yaxis:I.yaxis,fillRangeItems:Y},xaxes:[I.xaxis],yaxes:[I.yaxis],subplot:I.id,clickFn:function(X){2===X&&m(P)}};"pan"===V?(j.node().onmousedown=null,j.call(w(I,F)),j.on("dblclick.zoom",function(){var X=I.viewInitial,K={};for(var ie in X)K[I.id+"."+ie]=X[ie];o.call("_guiRelayout",P,K),P.emit("plotly_doubleclick",null)}),P._context._scrollZoom.geo||j.on("wheel.zoom",null)):"select"!==V&&"lasso"!==V||(j.on(".zoom",null),ee.prepFn=function(X,K,ie){g(X,K,ie,ee,V)},f.init(ee)),j.on("mousemove",function(){var X=I.projection.invert(a.getPositionFromD3Event());if(!X)return f.unhover(P,y.event);I.xaxis.p2c=function(){return X[0]},I.yaxis.p2c=function(){return X[1]},h.hover(P,y.event,I.id)}),j.on("mouseout",function(){P._dragging||f.unhover(P,y.event)}),j.on("click",function(){"select"!==V&&"lasso"!==V&&(Z.indexOf("select")>-1&&u(y.event,P,[I.xaxis],[I.yaxis],I.id,ee),Z.indexOf("event")>-1&&h.click(P,y.event))})}function re(X){return I.projection.invert([X[0]+I.xaxis._offset,X[1]+I.yaxis._offset])}},L.makeFramework=function(){var N=this,F=N.graphDiv,I=F._fullLayout,P="clip"+I._uid+N.id;N.clipDef=I._clips.append("clipPath").attr("id",P),N.clipRect=N.clipDef.append("rect"),N.framework=y.select(N.container).append("g").attr("class","geo "+N.id).call(v.setClipUrl,P,F),N.project=function(j){var V=N.projection(j);return V?[V[0]-N.xaxis._offset,V[1]-N.yaxis._offset]:[null,null]},N.xaxis={_id:"x",c2p:function(j){return N.project(j)[0]}},N.yaxis={_id:"y",c2p:function(j){return N.project(j)[1]}},N.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},d.setConvert(N.mockAxis,I)},L.saveViewInitial=function(N){var I=N.center||{},P=N.projection,j=P.rotation||{};this.viewInitial={fitbounds:N.fitbounds,"projection.scale":P.scale},a.extendFlat(this.viewInitial,N._isScoped?{"center.lon":I.lon,"center.lat":I.lat}:N._isClipped?{"projection.rotation.lon":j.lon,"projection.rotation.lat":j.lat}:{"center.lon":I.lon,"center.lat":I.lat,"projection.rotation.lon":j.lon})},L.render=function(){var N,F=this.projection,I=F.getPath();function P(V){var Z=F(V.lonlat);return Z?l(Z[0],Z[1]):null}function j(V){return F.isLonLatOverEdges(V.lonlat)?"none":null}for(N in this.basePaths)this.basePaths[N].attr("d",I);for(N in this.dataPaths)this.dataPaths[N].attr("d",function(V){return I(V.geojson)});for(N in this.dataPoints)this.dataPoints[N].attr("display",j).attr("transform",P)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../registry":638,"../cartesian/autorange":553,"../cartesian/axes":554,"../cartesian/select":575,"../plots":619,"./constants":587,"./zoom":592,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":315}],589:[function(b,oe,se){"use strict";var y=b("../../plots/get_data").getSubplotCalcData,x=b("../../lib").counterRegex,M=b("./geo"),_="geo",e=x(_),o={};o.geo={valType:"subplotid",dflt:_,editType:"calc"},oe.exports={attr:_,name:_,idRoot:_,idRegex:e,attrRegex:e,attributes:o,layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),plot:function(a){for(var l=a._fullLayout,i=a.calcdata,v=l._subplots.geo,h=0;h<v.length;h++){var s=v[h],d=y(i,_,s),p=l[s]._subplot;p||(p=M({id:s,graphDiv:a,container:l._geolayer.node(),topojsonURL:a._context.topojsonURL,staticPlot:a._context.staticPlot}),l[s]._subplot=p),p.plot(d,l,a._promises)}},updateFx:function(a){for(var l=a._fullLayout,i=l._subplots.geo,v=0;v<i.length;v++){var h=l[i[v]];h._subplot.updateFx(l,h)}},clean:function(a,l,i,v){for(var h=v._subplots.geo||[],s=0;s<h.length;s++){var d=h[s],p=v[d]._subplot;!l[d]&&p&&(p.framework.remove(),p.clipDef.remove())}}}},{"../../lib":503,"../../plots/get_data":593,"./geo":588,"./layout_attributes":590,"./layout_defaults":591}],590:[function(b,oe,se){"use strict";var y=b("../../components/color/attributes"),x=b("../domain").attributes,M=b("../../components/drawing/attributes").dash,_=b("./constants"),e=b("../../plot_api/edit_types").overrideAll,o=b("../../lib/sort_object_keys"),a={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:y.lightLine},gridwidth:{valType:"number",min:0,dflt:1},griddash:M};(oe.exports=e({domain:x({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:o(_.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:o(_.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:y.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:_.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:_.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:_.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:_.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:y.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:y.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:y.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:y.background},lonaxis:a,lataxis:a},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../domain":584,"./constants":587}],591:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../subplot_defaults"),M=b("../get_data").getSubplotData,_=b("./constants"),e=b("./layout_attributes"),o=_.axesNames;function a(l,i,v,h){var s=M(h.fullData,"geo",h.id).map(function(U){return U._expandedIndex}),d=v("resolution"),p=v("scope"),f=_.scopeDefaults[p],g=v("projection.type",f.projType),m=i._isAlbersUsa="albers usa"===g;m&&(p=i.scope="usa");var u=i._isScoped="world"!==p,w=i._isSatellite="satellite"===g,c=i._isConic=-1!==g.indexOf("conic")||"albers"===g,A=i._isClipped=!!_.lonaxisSpan[g];if(!1===l.visible){var k=y.extendDeep({},i._template);k.showcoastlines=!1,k.showcountries=!1,k.showframe=!1,k.showlakes=!1,k.showland=!1,k.showocean=!1,k.showrivers=!1,k.showsubunits=!1,k.lonaxis&&(k.lonaxis.showgrid=!1),k.lataxis&&(k.lataxis.showgrid=!1),i._template=k}for(var C=v("visible"),E=0;E<o.length;E++){var L,D=o[E],N=[30,10][E];if(u)L=f[D+"Range"];else{var F=_[D+"Span"],I=(F[g]||F["*"])/2,P=v("projection.rotation."+D.substr(0,3),f.projRotate[E]);L=[P-I,P+I]}var j=v(D+".range",L);v(D+".tick0"),v(D+".dtick",N),v(D+".showgrid",!!C&&void 0)&&(v(D+".gridcolor"),v(D+".gridwidth"),v(D+".griddash")),i[D]._ax={type:"linear",_id:D.slice(0,3),_traceIndices:s,setScale:y.identity,c2l:y.identity,r2l:y.identity,autorange:!0,range:j.slice(),_m:1,_input:{}}}var V=i.lonaxis.range,Z=i.lataxis.range,Y=V[0],ee=V[1];Y>0&&ee<0&&(ee+=360);var re,X,K,ie=(Y+ee)/2;if(!m){var q=u?f.projRotate:[ie,0,0];re=v("projection.rotation.lon",q[0]),v("projection.rotation.lat",q[1]),v("projection.rotation.roll",q[2]),v("showcoastlines",!u&&C)&&(v("coastlinecolor"),v("coastlinewidth")),v("showocean",!!C&&void 0)&&v("oceancolor")}m?(X=-96.6,K=38.7):(X=u?ie:re,K=(Z[0]+Z[1])/2),v("center.lon",X),v("center.lat",K),w&&(v("projection.tilt"),v("projection.distance")),c&&v("projection.parallels",f.projParallels||[0,60]),v("projection.scale"),v("showland",!!C&&void 0)&&v("landcolor"),v("showlakes",!!C&&void 0)&&v("lakecolor"),v("showrivers",!!C&&void 0)&&(v("rivercolor"),v("riverwidth")),v("showcountries",u&&"usa"!==p&&C)&&(v("countrycolor"),v("countrywidth")),("usa"===p||"north america"===p&&50===d)&&(v("showsubunits",C),v("subunitcolor"),v("subunitwidth")),u||v("showframe",C)&&(v("framecolor"),v("framewidth")),v("bgcolor"),v("fitbounds")&&(delete i.projection.scale,u?(delete i.center.lon,delete i.center.lat):A?(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon,delete i.projection.rotation.lat,delete i.lonaxis.range,delete i.lataxis.range):(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon))}oe.exports=function(l,i,v){x(l,i,v,{type:"geo",attributes:e,handleDefaults:a,fullData:v,partition:"y"})}},{"../../lib":503,"../get_data":593,"../subplot_defaults":632,"./constants":587,"./layout_attributes":590}],592:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../lib"),M=b("../../registry"),_=Math.PI/180,e=180/Math.PI,o={cursor:"pointer"},a={cursor:"auto"};function l(C,E){return y.behavior.zoom().translate(E.translate()).scale(E.scale())}function i(C,E,L){var D=C.id,N=C.graphDiv,F=N.layout,I=F[D],P=N._fullLayout,j=P[D],V={},Z={};function Y(ee,re){V[D+"."+ee]=x.nestedProperty(I,ee).get(),M.call("_storeDirectGUIEdit",F,P._preGUI,V);var X=x.nestedProperty(j,ee);X.get()!==re&&(X.set(re),x.nestedProperty(I,ee).set(re),Z[D+"."+ee]=re)}L(Y),Y("projection.scale",E.scale()/C.fitScale),Y("fitbounds",!1),N.emit("plotly_relayout",Z)}function v(C,E){var L=l(0,E);function D(N){var F=E.invert(C.midPt);N("center.lon",F[0]),N("center.lat",F[1])}return L.on("zoomstart",function(){y.select(this).style(o)}).on("zoom",function(){E.scale(y.event.scale).translate(y.event.translate),C.render();var N=E.invert(C.midPt);C.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/C.fitScale,"geo.center.lon":N[0],"geo.center.lat":N[1]})}).on("zoomend",function(){y.select(this).style(a),i(C,E,D)}),L}function h(C,E){var L,D,N,F,I,P,j,V,Z,Y=l(0,E);function ee(X){return E.invert(X)}function re(X){var K=E.rotate(),ie=E.invert(C.midPt);X("projection.rotation.lon",-K[0]),X("center.lon",ie[0]),X("center.lat",ie[1])}return Y.on("zoomstart",function(){y.select(this).style(o),L=y.mouse(this),D=E.rotate(),N=E.translate(),F=D,I=ee(L)}).on("zoom",function(){if(P=y.mouse(this),function(ie){var q=ee(ie);if(!q)return!0;var U=E(q);return Math.abs(U[0]-ie[0])>2||Math.abs(U[1]-ie[1])>2}(L))return Y.scale(E.scale()),void Y.translate(E.translate());E.scale(y.event.scale),E.translate([N[0],y.event.translate[1]]),I?ee(P)&&(V=ee(P),E.rotate(j=[F[0]+(V[0]-I[0]),D[1],D[2]]),F=j):I=ee(L=P),Z=!0,C.render();var X=E.rotate(),K=E.invert(C.midPt);C.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/C.fitScale,"geo.center.lon":K[0],"geo.center.lat":K[1],"geo.projection.rotation.lon":-X[0]})}).on("zoomend",function(){y.select(this).style(a),Z&&i(C,E,re)}),Y}function s(C,E){var L,D={r:E.rotate(),k:E.scale()},N=l(0,E),F=function(ee){for(var re=0,X=arguments.length,K=[];++re<X;)K.push(arguments[re]);var ie=y.dispatch.apply(null,K);return ie.of=function(q,U){return function(W){var ae;try{ae=W.sourceEvent=y.event,W.target=ee,y.event=W,ie[W.type].apply(q,U)}finally{y.event=ae}}},ie}(N,"zoomstart","zoom","zoomend"),I=0,P=N.on;function j(ee){I++||ee({type:"zoomstart"})}function V(ee){ee({type:"zoom"})}function Z(ee){--I||ee({type:"zoomend"})}function Y(ee){var re=E.rotate();ee("projection.rotation.lon",-re[0]),ee("projection.rotation.lat",-re[1])}return N.on("zoomstart",function(){y.select(this).style(o);var ee=y.mouse(this),re=E.rotate(),X=re,K=E.translate(),ie=p(re);L=d(E,ee),P.call(N,"zoom",function(){var q=y.mouse(this);if(E.scale(D.k=y.event.scale),L){if(d(E,q)){E.rotate(re).translate(K);var U=d(E,q),W=g(L,U),ae=A(f(ie,W)),G=D.r=m(ae,L,X);isFinite(G[0])&&isFinite(G[1])&&isFinite(G[2])||(G=X),E.rotate(G),X=G}}else L=d(E,ee=q);V(F.of(this,arguments))}),j(F.of(this,arguments))}).on("zoomend",function(){y.select(this).style(a),P.call(N,"zoom",null),Z(F.of(this,arguments)),i(C,E,Y)}).on("zoom.redraw",function(){C.render();var ee=E.rotate();C.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":E.scale()/C.fitScale,"geo.projection.rotation.lon":-ee[0],"geo.projection.rotation.lat":-ee[1]})}),y.rebind(N,F,"on")}function d(C,E){var D,N,F,I,L=C.invert(E);return L&&isFinite(L[0])&&isFinite(L[1])&&(N=(D=L)[0]*_,F=D[1]*_,[(I=Math.cos(F))*Math.cos(N),I*Math.sin(N),Math.sin(F)])}function p(C){var E=.5*C[0]*_,L=.5*C[1]*_,D=.5*C[2]*_,N=Math.sin(E),F=Math.cos(E),I=Math.sin(L),P=Math.cos(L),j=Math.sin(D),V=Math.cos(D);return[F*P*V+N*I*j,N*P*V-F*I*j,F*I*V+N*P*j,F*P*j-N*I*V]}function f(C,E){var L=C[0],D=C[1],N=C[2],F=C[3],I=E[0],P=E[1],j=E[2],V=E[3];return[L*I-D*P-N*j-F*V,L*P+D*I+N*V-F*j,L*j-D*V+N*I+F*P,L*V+D*j-N*P+F*I]}function g(C,E){if(C&&E){var L=[(I=C)[1]*(P=E)[2]-I[2]*P[1],I[2]*P[0]-I[0]*P[2],I[0]*P[1]-I[1]*P[0]],D=Math.sqrt(k(L,L)),N=.5*Math.acos(Math.max(-1,Math.min(1,k(C,E)))),F=Math.sin(N)/D;return D&&[Math.cos(N),L[2]*F,-L[1]*F,L[0]*F]}var I,P}function m(C,E,L){var D=c(E,2,C[0]);D=c(D,1,C[1]),D=c(D,0,C[2]-L[2]);var N,F,I=E[0],P=E[1],j=E[2],V=D[0],Z=D[1],Y=D[2],ee=Math.atan2(P,I)*e,re=Math.sqrt(I*I+P*P);Math.abs(Z)>re?(F=(Z>0?90:-90)-ee,N=0):(F=Math.asin(Z/re)*e-ee,N=Math.sqrt(re*re-Z*Z));var X=180-F-2*ee,K=(Math.atan2(Y,V)-Math.atan2(j,N))*e,ie=(Math.atan2(Y,V)-Math.atan2(j,-N))*e;return u(L[0],L[1],F,K)<=u(L[0],L[1],X,ie)?[F,K,L[2]]:[X,ie,L[2]]}function u(C,E,L,D){var N=w(L-C),F=w(D-E);return Math.sqrt(N*N+F*F)}function w(C){return(C%360+540)%360-180}function c(C,E,L){var D=L*_,N=C.slice(),F=0===E?1:0,I=2===E?1:2,P=Math.cos(D),j=Math.sin(D);return N[F]=C[F]*P-C[I]*j,N[I]=C[I]*P+C[F]*j,N}function A(C){return[Math.atan2(2*(C[0]*C[1]+C[2]*C[3]),1-2*(C[1]*C[1]+C[2]*C[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(C[0]*C[2]-C[3]*C[1]))))*e,Math.atan2(2*(C[0]*C[3]+C[1]*C[2]),1-2*(C[2]*C[2]+C[3]*C[3]))*e]}function k(C,E){for(var L=0,D=0,N=C.length;D<N;++D)L+=C[D]*E[D];return L}oe.exports=function(C,E){return(E._isScoped?v:E._isClipped?s:h)(C,C.projection)}},{"../../lib":503,"../../registry":638,"@plotly/d3":58}],593:[function(b,oe,se){"use strict";var y=b("../registry"),x=b("./cartesian/constants").SUBPLOT_PATTERN;se.getSubplotCalcData=function(M,_,e){var o=y.subplotsRegistry[_];if(!o)return[];for(var a=o.attr,l=[],i=0;i<M.length;i++){var v=M[i];v[0].trace[a]===e&&l.push(v)}return l},se.getModuleCalcData=function(M,_){var e,o=[],a=[];if(!(e="string"==typeof _?y.getModule(_).plot:"function"==typeof _?_:_.plot))return[o,M];for(var l=0;l<M.length;l++){var i=M[l],v=i[0].trace;!0===v.visible&&0!==v._length&&(v._module.plot===e?o.push(i):a.push(i))}return[o,a]},se.getSubplotData=function(M,_,e){if(!y.subplotsRegistry[_])return[];var o,a,l,i=y.subplotsRegistry[_].attr,v=[];if("gl2d"===_){var h=e.match(x);a="x"+h[1],l="y"+h[2]}for(var s=0;s<M.length;s++)o=M[s],"gl2d"===_&&y.traceIs(o,"gl2d")?o[i[0]]===a&&o[i[1]]===l&&v.push(o):o[i]===e&&v.push(o);return v}},{"../registry":638,"./cartesian/constants":561}],594:[function(b,oe,se){"use strict";var y=b("mouse-change"),x=b("mouse-wheel"),M=b("mouse-event-offset"),_=b("../cartesian/constants"),e=b("has-passive-events");function o(a,l){this.element=a,this.plot=l,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}oe.exports=function(a){var l=a.mouseContainer,i=a.glplot,v=new o(l,i);function h(){a.xaxis.autorange=!1,a.yaxis.autorange=!1}function s(d,p,f){var g,m,u=a.calcDataBox(),w=i.viewBox,c=v.lastPos[0],A=v.lastPos[1],k=_.MINDRAG*i.pixelRatio,C=_.MINZOOM*i.pixelRatio;function E(P,j,V){var Z=Math.min(j,V),Y=Math.max(j,V);Z!==Y?(u[P]=Z,u[P+2]=Y,v.dataBox=u,a.setRanges(u)):(a.selectBox.selectBox=[0,0,1,1],a.glplot.setDirty())}switch(p*=i.pixelRatio,f=w[3]-w[1]-(f*=i.pixelRatio),a.fullLayout.dragmode){case"zoom":if(d){var L=p/(w[2]-w[0])*(u[2]-u[0])+u[0],D=f/(w[3]-w[1])*(u[3]-u[1])+u[1];v.boxInited||(v.boxStart[0]=L,v.boxStart[1]=D,v.dragStart[0]=p,v.dragStart[1]=f),v.boxEnd[0]=L,v.boxEnd[1]=D,v.boxInited=!0,v.boxEnabled||v.boxStart[0]===v.boxEnd[0]&&v.boxStart[1]===v.boxEnd[1]||(v.boxEnabled=!0);var N=Math.abs(v.dragStart[0]-p)<C,F=Math.abs(v.dragStart[1]-f)<C;if(!function(){for(var P=a.graphDiv._fullLayout._axisConstraintGroups,j=a.xaxis._id,V=a.yaxis._id,Z=0;Z<P.length;Z++)if(-1!==P[Z][j]){if(-1!==P[Z][V])return!0;break}return!1}()||N&&F)N&&(v.boxEnd[0]=v.boxStart[0]),F&&(v.boxEnd[1]=v.boxStart[1]);else{g=v.boxEnd[0]-v.boxStart[0],m=v.boxEnd[1]-v.boxStart[1];var I=(u[3]-u[1])/(u[2]-u[0]);Math.abs(g*I)>Math.abs(m)?(v.boxEnd[1]=v.boxStart[1]+Math.abs(g)*I*(m>=0?1:-1),v.boxEnd[1]<u[1]?(v.boxEnd[1]=u[1],v.boxEnd[0]=v.boxStart[0]+(u[1]-v.boxStart[1])/Math.abs(I)):v.boxEnd[1]>u[3]&&(v.boxEnd[1]=u[3],v.boxEnd[0]=v.boxStart[0]+(u[3]-v.boxStart[1])/Math.abs(I))):(v.boxEnd[0]=v.boxStart[0]+Math.abs(m)/I*(g>=0?1:-1),v.boxEnd[0]<u[0]?(v.boxEnd[0]=u[0],v.boxEnd[1]=v.boxStart[1]+(u[0]-v.boxStart[0])*Math.abs(I)):v.boxEnd[0]>u[2]&&(v.boxEnd[0]=u[2],v.boxEnd[1]=v.boxStart[1]+(u[2]-v.boxStart[0])*Math.abs(I)))}}else v.boxEnabled?(m=v.boxStart[1]!==v.boxEnd[1],(g=v.boxStart[0]!==v.boxEnd[0])||m?(g&&(E(0,v.boxStart[0],v.boxEnd[0]),a.xaxis.autorange=!1),m&&(E(1,v.boxStart[1],v.boxEnd[1]),a.yaxis.autorange=!1),a.relayoutCallback()):a.glplot.setDirty(),v.boxEnabled=!1,v.boxInited=!1):v.boxInited&&(v.boxInited=!1);break;case"pan":v.boxEnabled=!1,v.boxInited=!1,d?(v.panning||(v.dragStart[0]=p,v.dragStart[1]=f),Math.abs(v.dragStart[0]-p)<k&&(p=v.dragStart[0]),Math.abs(v.dragStart[1]-f)<k&&(f=v.dragStart[1]),m=(A-f)*(u[3]-u[1])/(i.viewBox[3]-i.viewBox[1]),u[0]+=g=(c-p)*(u[2]-u[0])/(i.viewBox[2]-i.viewBox[0]),u[2]+=g,u[1]+=m,u[3]+=m,a.setRanges(u),v.panning=!0,v.lastInputTime=Date.now(),h(),a.cameraChanged(),a.handleAnnotations()):v.panning&&(v.panning=!1,a.relayoutCallback())}v.lastPos[0]=p,v.lastPos[1]=f}return v.mouseListener=y(l,s),l.addEventListener("touchstart",function(d){var p=M(d.changedTouches[0],l);s(0,p[0],p[1]),s(1,p[0],p[1]),d.preventDefault()},!!e&&{passive:!1}),l.addEventListener("touchmove",function(d){d.preventDefault();var p=M(d.changedTouches[0],l);s(1,p[0],p[1]),d.preventDefault()},!!e&&{passive:!1}),l.addEventListener("touchend",function(d){s(0,v.lastPos[0],v.lastPos[1]),d.preventDefault()},!!e&&{passive:!1}),v.wheelListener=x(l,function(d,p){if(!a.scrollZoom)return!1;var f=a.calcDataBox(),g=i.viewBox,m=v.lastPos[0],u=v.lastPos[1],w=Math.exp(5*p/(g[3]-g[1])),c=m/(g[2]-g[0])*(f[2]-f[0])+f[0],A=u/(g[3]-g[1])*(f[3]-f[1])+f[1];return f[0]=(f[0]-c)*w+c,f[2]=(f[2]-c)*w+c,f[1]=(f[1]-A)*w+A,f[3]=(f[3]-A)*w+A,a.setRanges(f),v.lastInputTime=Date.now(),h(),a.cameraChanged(),a.handleAnnotations(),a.relayoutCallback(),!0},!0),v}},{"../cartesian/constants":561,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],595:[function(b,oe,se){"use strict";var y=b("../cartesian/axes"),x=b("../../lib/str2rgbarray");function M(o){this.scene=o,this.gl=o.gl,this.pixelRatio=o.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var _=M.prototype,e=["xaxis","yaxis"];_.merge=function(o){var a,l,i,v,h,s,d,p,f,g,m;for(this.titleEnable=!1,this.backgroundColor=x(o.plot_bgcolor),g=0;g<2;++g){var u=(a=e[g]).charAt(0);for(i=(l=o[this.scene[a]._name]).title.text===this.scene.fullLayout._dfltTitle[u]?"":l.title.text,m=0;m<=2;m+=2)this.labelEnable[g+m]=!1,this.labels[g+m]=i,this.labelColor[g+m]=x(l.title.font.color),this.labelFont[g+m]=l.title.font.family,this.labelSize[g+m]=l.title.font.size,this.labelPad[g+m]=this.getLabelPad(a,l),this.tickEnable[g+m]=!1,this.tickColor[g+m]=x((l.tickfont||{}).color),this.tickAngle[g+m]="auto"===l.tickangle?0:Math.PI*-l.tickangle/180,this.tickPad[g+m]=this.getTickPad(l),this.tickMarkLength[g+m]=0,this.tickMarkWidth[g+m]=l.tickwidth||0,this.tickMarkColor[g+m]=x(l.tickcolor),this.borderLineEnable[g+m]=!1,this.borderLineColor[g+m]=x(l.linecolor),this.borderLineWidth[g+m]=l.linewidth||0;d=this.hasSharedAxis(l),h=this.hasAxisInDfltPos(a,l)&&!d,s=this.hasAxisInAltrPos(a,l)&&!d,v=l.mirror||!1,p=d?-1!==String(v).indexOf("all"):!!v,f=d?"allticks"===v:-1!==String(v).indexOf("ticks"),h?this.labelEnable[g]=!0:s&&(this.labelEnable[g+2]=!0),h?this.tickEnable[g]=l.showticklabels:s&&(this.tickEnable[g+2]=l.showticklabels),(h||p)&&(this.borderLineEnable[g]=l.showline),(s||p)&&(this.borderLineEnable[g+2]=l.showline),(h||f)&&(this.tickMarkLength[g]=this.getTickMarkLength(l)),(s||f)&&(this.tickMarkLength[g+2]=this.getTickMarkLength(l)),this.gridLineEnable[g]=l.showgrid,this.gridLineColor[g]=x(l.gridcolor),this.gridLineWidth[g]=l.gridwidth,this.zeroLineEnable[g]=l.zeroline,this.zeroLineColor[g]=x(l.zerolinecolor),this.zeroLineWidth[g]=l.zerolinewidth}},_.hasSharedAxis=function(o){var a=this.scene;return 0!==y.findSubplotsWithAxis(a.fullLayout._subplots.gl2d,o).indexOf(a.id)},_.hasAxisInDfltPos=function(o,a){var l=a.side;return"xaxis"===o?"bottom"===l:"yaxis"===o?"left"===l:void 0},_.hasAxisInAltrPos=function(o,a){var l=a.side;return"xaxis"===o?"top"===l:"yaxis"===o?"right"===l:void 0},_.getLabelPad=function(o,a){var l=a.title.font.size,i=a.showticklabels;return"xaxis"===o?"top"===a.side?l*(1.5+(i?1:0))-10:l*(1.5+(i?.5:0))-10:"yaxis"===o?"right"===a.side?10+l*(1.5+(i?1:.5)):10+l*(1.5+(i?.5:0)):void 0},_.getTickPad=function(o){return"outside"===o.ticks?10+o.ticklen:15},_.getTickMarkLength=function(o){if(!o.ticks)return 0;var a=o.ticklen;return"inside"===o.ticks?-a:a},oe.exports=function(o){return new M(o)}},{"../../lib/str2rgbarray":528,"../cartesian/axes":554}],596:[function(b,oe,se){"use strict";var y=b("../../plot_api/edit_types").overrideAll,x=b("./scene2d"),M=b("../layout_attributes"),_=b("../../constants/xmlns_namespaces"),e=b("../cartesian/constants"),o=b("../cartesian"),a=b("../../components/fx/layout_attributes"),l=b("../get_data").getSubplotData;se.name="gl2d",se.attr=["xaxis","yaxis"],se.idRoot=["x","y"],se.idRegex=e.idRegex,se.attrRegex=e.attrRegex,se.attributes=b("../cartesian/attributes"),se.supplyLayoutDefaults=function(i,v,h){v._has("cartesian")||o.supplyLayoutDefaults(i,v,h)},se.layoutAttrOverrides=y(o.layoutAttributes,"plot","from-root"),se.baseLayoutAttrOverrides=y({plot_bgcolor:M.plot_bgcolor,hoverlabel:a.hoverlabel},"plot","nested"),se.plot=function(i){for(var v=i._fullLayout,h=i._fullData,s=v._subplots.gl2d,d=0;d<s.length;d++){var p=s[d],f=v._plots[p],g=l(h,"gl2d",p),m=f._scene2d;void 0===m&&(m=new x({id:p,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio},v),f._scene2d=m),m.plot(g,i.calcdata,v,i.layout)}},se.clean=function(i,v,h,s){for(var d=s._subplots.gl2d||[],p=0;p<d.length;p++){var f=d[p],g=s._plots[f];g._scene2d&&0===l(i,"gl2d",f).length&&(g._scene2d.destroy(),delete s._plots[f])}o.clean.apply(this,arguments)},se.drawFramework=function(i){i._context.staticPlot||o.drawFramework(i)},se.toSVG=function(i){for(var v=i._fullLayout,h=v._subplots.gl2d,s=0;s<h.length;s++){var d=v._plots[h[s]]._scene2d,p=d.toImage("png");v._glimages.append("svg:image").attr({xmlns:_.svg,"xlink:href":p,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),d.destroy()}},se.updateFx=function(i){for(var v=i._fullLayout,h=v._subplots.gl2d,s=0;s<h.length;s++)v._plots[h[s]]._scene2d.updateFx(v.dragmode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../plot_api/edit_types":536,"../cartesian":568,"../cartesian/attributes":552,"../cartesian/constants":561,"../get_data":593,"../layout_attributes":610,"./scene2d":597}],597:[function(b,oe,se){"use strict";var y,x,M=b("../../registry"),_=b("../../plots/cartesian/axes"),e=b("../../components/fx"),o=b("../../../stackgl_modules").gl_plot2d,a=b("../../../stackgl_modules").gl_spikes2d,l=b("../../../stackgl_modules").gl_select_box,i=b("webgl-context"),v=b("./convert"),h=b("./camera"),s=b("../../lib/show_no_webgl_msg"),d=b("../cartesian/constraints"),p=d.enforce,f=d.clean,g=b("../cartesian/autorange").doAutoRange,m=b("../../components/dragelement/helpers"),u=m.drawMode,w=m.selectMode,c=["xaxis","yaxis"],A=b("../cartesian/constants").SUBPLOT_PATTERN;function k(E,L){this.container=E.container,this.graphDiv=E.graphDiv,this.pixelRatio=E.plotGlPixelRatio||window.devicePixelRatio,this.id=E.id,this.staticPlot=!!E.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(L),this.makeFramework(),this.stopped||(this.glplotOptions=v(this),this.glplotOptions.merge(L),this.glplot=o(this.glplotOptions),this.camera=h(this),this.traces={},this.spikes=a(this.glplot),this.selectBox=l(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}oe.exports=k;var C=k.prototype;C.makeFramework=function(){if(this.staticPlot){if(!(x||(y=document.createElement("canvas"),x=i({canvas:y,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=y,this.gl=x}else{var E=this.container.querySelector(".gl-canvas-focus"),L=i({canvas:E,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!L)return s(this),void(this.stopped=!0);this.canvas=E,this.gl=L}var D=this.canvas;D.style.width="100%",D.style.height="100%",D.style.position="absolute",D.style.top="0px",D.style.left="0px",D.style["pointer-events"]="none",this.updateSize(D);var N=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");N.style.position="absolute",N.style.top=N.style.left="0px",N.style.width=N.style.height="100%",N.style["z-index"]=20,N.style["pointer-events"]="none";var F=this.mouseContainer=document.createElement("div");F.style.position="absolute",F.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var I=this.container;I.appendChild(N),I.appendChild(F);var P=this;F.addEventListener("mouseout",function(){P.isMouseOver=!1,P.unhover()}),F.addEventListener("mouseover",function(){P.isMouseOver=!0})},C.toImage=function(E){E||(E="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(y),this.updateSize(this.canvas);var L=this.glplot.gl,D=L.drawingBufferWidth,N=L.drawingBufferHeight;L.clearColor(1,1,1,0),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),L.bindFramebuffer(L.FRAMEBUFFER,null);var F=new Uint8Array(D*N*4);L.readPixels(0,0,D,N,L.RGBA,L.UNSIGNED_BYTE,F);for(var I=0,P=N-1;I<P;++I,--P)for(var j=0;j<D;++j)for(var V=0;V<4;++V){var Z=F[4*(D*I+j)+V];F[4*(D*I+j)+V]=F[4*(D*P+j)+V],F[4*(D*P+j)+V]=Z}var Y=document.createElement("canvas");Y.width=D,Y.height=N;var ee,re=Y.getContext("2d",{willReadFrequently:!0}),X=re.createImageData(D,N);switch(X.data.set(F),re.putImageData(X,0,0),E){case"jpeg":ee=Y.toDataURL("image/jpeg");break;case"webp":ee=Y.toDataURL("image/webp");break;default:ee=Y.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(y),ee},C.updateSize=function(E){E||(E=this.canvas);var L=this.pixelRatio,D=this.fullLayout,F=D.height,I=0|Math.ceil(L*D.width),P=0|Math.ceil(L*F);return E.width===I&&E.height===P||(E.width=I,E.height=P),E},C.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var E=[_.calcTicks(this.xaxis),_.calcTicks(this.yaxis)],L=0;L<2;++L)for(var D=0;D<E[L].length;++D)E[L][D].text=E[L][D].text+"";return E},C.updateRefs=function(E){this.fullLayout=E;var L=this.id.match(A),N="yaxis"+L[2];this.xaxis=this.fullLayout["xaxis"+L[1]],this.yaxis=this.fullLayout[N]},C.relayoutCallback=function(){var E=this.graphDiv,L=this.xaxis,D=this.yaxis,N=E.layout,F={},I=F[L._name+".range"]=L.range.slice(),P=F[D._name+".range"]=D.range.slice();F[L._name+".autorange"]=L.autorange,F[D._name+".autorange"]=D.autorange,M.call("_storeDirectGUIEdit",E.layout,E._fullLayout._preGUI,F);var j=N[L._name];j.range=I,j.autorange=L.autorange;var V=N[D._name];V.range=P,V.autorange=D.autorange,F.lastInputTime=this.camera.lastInputTime,E.emit("plotly_relayout",F)},C.cameraChanged=function(){var E=this.camera;this.glplot.setDataBox(this.calcDataBox());var L=this.computeTickMarks();(function(D,N){for(var F=0;F<2;++F){var I=D[F],P=N[F];if(I.length!==P.length)return!0;for(var j=0;j<I.length;++j)if(I[j].x!==P[j].x)return!0}return!1})(L,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=L,this.glplotOptions.dataBox=E.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},C.handleAnnotations=function(){for(var E=this.graphDiv,L=this.fullLayout.annotations,D=0;D<L.length;D++){var N=L[D];N.xref===this.xaxis._id&&N.yref===this.yaxis._id&&M.getComponentMethod("annotations","drawOne")(E,D)}},C.destroy=function(){if(this.glplot){var E=this.traces;E&&Object.keys(E).map(function(L){E[L].dispose(),delete E[L]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},C.plot=function(E,L,D){var N=this.glplot;this.updateRefs(D),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(E,L),this.updateFx(D.dragmode);var F=D.width,I=D.height;this.updateSize(this.canvas);var P=this.glplotOptions;P.merge(D),P.screenBox=[0,0,F,I];var j={_fullLayout:{_axisConstraintGroups:D._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:D._size}};f(j,this.xaxis),f(j,this.yaxis);var V,Z,Y=D._size,ee=this.xaxis.domain,re=this.yaxis.domain;for(P.viewBox=[Y.l+ee[0]*Y.w,Y.b+re[0]*Y.h,F-Y.r-(1-ee[1])*Y.w,I-Y.t-(1-re[1])*Y.h],this.mouseContainer.style.width=Y.w*(ee[1]-ee[0])+"px",this.mouseContainer.style.height=Y.h*(re[1]-re[0])+"px",this.mouseContainer.height=Y.h*(re[1]-re[0]),this.mouseContainer.style.left=Y.l+ee[0]*Y.w+"px",this.mouseContainer.style.top=Y.t+(1-re[1])*Y.h+"px",Z=0;Z<2;++Z)(V=this[c[Z]])._length=P.viewBox[Z+2]-P.viewBox[Z],g(this.graphDiv,V),V.setScale();p(j),P.ticks=this.computeTickMarks(),P.dataBox=this.calcDataBox(),P.merge(D),N.update(P),this.glplot.draw()},C.calcDataBox=function(){var E=this.xaxis,L=this.yaxis,D=E.range,N=L.range,F=E.r2l,I=L.r2l;return[F(D[0]),I(N[0]),F(D[1]),I(N[1])]},C.setRanges=function(E){var L=this.xaxis,D=this.yaxis,N=L.l2r,F=D.l2r;L.range=[N(E[0]),N(E[2])],D.range=[F(E[1]),F(E[3])]},C.updateTraces=function(E,L){var D,N,F,I=Object.keys(this.traces);this.fullData=E;e:for(D=0;D<I.length;D++){var P=I[D],j=this.traces[P];for(N=0;N<E.length;N++)if((F=E[N]).uid===P&&F.type===j.type)continue e;j.dispose(),delete this.traces[P]}for(D=0;D<E.length;D++){var V=L[D],Z=this.traces[(F=E[D]).uid];Z?Z.update(F,V):(Z=F._module.plot(this,F,V),this.traces[F.uid]=Z)}this.glplot.objects.sort(function(Y,ee){return Y._trace.index-ee._trace.index})},C.updateFx=function(E){w(E)||u(E)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===E?"move":"zoom"===E?"crosshair":null},C.emitPointAction=function(E,L){for(var D,N=E.trace.uid,F=E.pointIndex,I=0;I<this.fullData.length;I++)this.fullData[I].uid===N&&(D=this.fullData[I]);var P={x:E.traceCoord[0],y:E.traceCoord[1],curveNumber:D.index,pointNumber:F,data:D._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};e.appendArrayPointValue(P,D,F),this.graphDiv.emit(L,{points:[P]})},C.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var E=this.glplot,L=this.camera,D=L.mouseListener,N=1===this.lastButtonState&&0===D.buttons,F=this.fullLayout;this.lastButtonState=D.buttons,this.cameraChanged();var I,P=D.x*E.pixelRatio,j=this.canvas.height-E.pixelRatio*D.y;if(L.boxEnabled&&"zoom"===F.dragmode){this.selectBox.enabled=!0;for(var V=this.selectBox.selectBox=[Math.min(L.boxStart[0],L.boxEnd[0]),Math.min(L.boxStart[1],L.boxEnd[1]),Math.max(L.boxStart[0],L.boxEnd[0]),Math.max(L.boxStart[1],L.boxEnd[1])],Z=0;Z<2;Z++)L.boxStart[Z]===L.boxEnd[Z]&&(V[Z]=E.dataBox[Z],V[Z+2]=E.dataBox[Z+2]);E.setDirty()}else if(!L.panning&&this.isMouseOver){this.selectBox.enabled=!1;var Y=F._size,X=(I=E.pick(P/E.pixelRatio+Y.l+this.xaxis.domain[0]*Y.w,j/E.pixelRatio-(Y.t+(1-this.yaxis.domain[1])*Y.h)))&&I.object._trace.handlePick(I);if(X&&N&&this.emitPointAction(X,"plotly_click"),I&&"skip"!==I.object._trace.hoverinfo&&F.hovermode&&X&&(!this.lastPickResult||this.lastPickResult.traceUid!==X.trace.uid||this.lastPickResult.dataCoord[0]!==X.dataCoord[0]||this.lastPickResult.dataCoord[1]!==X.dataCoord[1])){var K=X;this.lastPickResult={traceUid:X.trace?X.trace.uid:null,dataCoord:X.dataCoord.slice()},this.spikes.update({center:I.dataCoord}),K.screenCoord=[((E.viewBox[2]-E.viewBox[0])*(I.dataCoord[0]-E.dataBox[0])/(E.dataBox[2]-E.dataBox[0])+E.viewBox[0])/E.pixelRatio,(this.canvas.height-(E.viewBox[3]-E.viewBox[1])*(I.dataCoord[1]-E.dataBox[1])/(E.dataBox[3]-E.dataBox[1])-E.viewBox[1])/E.pixelRatio],this.emitPointAction(X,"plotly_hover");var ie=this.fullData[K.trace.index]||{},q=K.pointIndex,U=e.castHoverinfo(ie,F,q);if(U&&"all"!==U){var W=U.split("+");-1===W.indexOf("x")&&(K.traceCoord[0]=void 0),-1===W.indexOf("y")&&(K.traceCoord[1]=void 0),-1===W.indexOf("z")&&(K.traceCoord[2]=void 0),-1===W.indexOf("text")&&(K.textLabel=void 0),-1===W.indexOf("name")&&(K.name=void 0)}e.loneHover({x:K.screenCoord[0],y:K.screenCoord[1],xLabel:this.hoverFormatter("xaxis",K.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",K.traceCoord[1]),zLabel:K.traceCoord[2],text:K.textLabel,name:K.name,color:e.castHoverOption(ie,q,"bgcolor")||K.color,borderColor:e.castHoverOption(ie,q,"bordercolor"),fontFamily:e.castHoverOption(ie,q,"font.family"),fontSize:e.castHoverOption(ie,q,"font.size"),fontColor:e.castHoverOption(ie,q,"font.color"),nameLength:e.castHoverOption(ie,q,"namelength"),textAlign:e.castHoverOption(ie,q,"align")},{container:this.svgContainer,gd:this.graphDiv})}}I||this.unhover(),E.draw()}},C.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),e.loneUnhover(this.svgContainer))},C.hoverFormatter=function(E,L){if(void 0!==L){var D=this[E];return _.tickText(D,D.c2l(L),"hover").text}}},{"../../../stackgl_modules":1124,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib/show_no_webgl_msg":525,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/constants":561,"../cartesian/constraints":562,"./camera":594,"./convert":595,"webgl-context":331}],598:[function(b,oe,se){"use strict";var y=b("../../plot_api/edit_types").overrideAll,x=b("../../components/fx/layout_attributes"),M=b("./scene"),_=b("../get_data").getSubplotData,e=b("../../lib"),o=b("../../constants/xmlns_namespaces");se.name="gl3d",se.attr="scene",se.idRoot="scene",se.idRegex=se.attrRegex=e.counterRegex("scene"),se.attributes=b("./layout/attributes"),se.layoutAttributes=b("./layout/layout_attributes"),se.baseLayoutAttrOverrides=y({hoverlabel:x.hoverlabel},"plot","nested"),se.supplyLayoutDefaults=b("./layout/defaults"),se.plot=function(a){for(var l=a._fullLayout,i=a._fullData,v=l._subplots.gl3d,h=0;h<v.length;h++){var s=v[h],d=_(i,"gl3d",s),p=l[s],f=p.camera,g=p._scene;g||(g=new M({id:s,graphDiv:a,container:a.querySelector(".gl-container"),staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio,camera:f},l),p._scene=g),g.viewInitial||(g.viewInitial={up:{x:f.up.x,y:f.up.y,z:f.up.z},eye:{x:f.eye.x,y:f.eye.y,z:f.eye.z},center:{x:f.center.x,y:f.center.y,z:f.center.z}}),g.plot(d,l,a.layout)}},se.clean=function(a,l,i,v){for(var h=v._subplots.gl3d||[],s=0;s<h.length;s++){var d=h[s];!l[d]&&v[d]._scene&&(v[d]._scene.destroy(),v._infolayer&&v._infolayer.selectAll(".annotation-"+d).remove())}},se.toSVG=function(a){for(var l=a._fullLayout,i=l._subplots.gl3d,v=l._size,h=0;h<i.length;h++){var s=l[i[h]],d=s.domain,p=s._scene,f=p.toImage("png");l._glimages.append("svg:image").attr({xmlns:o.svg,"xlink:href":f,x:v.l+v.w*d.x[0],y:v.t+v.h*(1-d.y[1]),width:v.w*(d.x[1]-d.x[0]),height:v.h*(d.y[1]-d.y[0]),preserveAspectRatio:"none"}),p.destroy()}},se.cleanId=function(a){if(a.match(/^scene[0-9]*$/)){var l=a.substr(5);return"1"===l&&(l=""),"scene"+l}},se.updateFx=function(a){for(var l=a._fullLayout,i=l._subplots.gl3d,v=0;v<i.length;v++)l[i[v]]._scene.updateFx(l.dragmode,l.hovermode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../plot_api/edit_types":536,"../get_data":593,"./layout/attributes":599,"./layout/defaults":603,"./layout/layout_attributes":604,"./scene":608}],599:[function(b,oe,se){"use strict";oe.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],600:[function(b,oe,se){"use strict";var y=b("../../../components/color"),x=b("../../cartesian/layout_attributes"),M=b("../../../lib/extend").extendFlat,_=b("../../../plot_api/edit_types").overrideAll;oe.exports=_({visible:x.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:y.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:x.color,categoryorder:x.categoryorder,categoryarray:x.categoryarray,title:{text:x.title.text,font:x.title.font},type:M({},x.type,{values:["-","linear","log","date","category"]}),autotypenumbers:x.autotypenumbers,autorange:x.autorange,rangemode:x.rangemode,range:M({},x.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:x.tickmode,nticks:x.nticks,tick0:x.tick0,dtick:x.dtick,tickvals:x.tickvals,ticktext:x.ticktext,ticks:x.ticks,mirror:x.mirror,ticklen:x.ticklen,tickwidth:x.tickwidth,tickcolor:x.tickcolor,showticklabels:x.showticklabels,tickfont:x.tickfont,tickangle:x.tickangle,tickprefix:x.tickprefix,showtickprefix:x.showtickprefix,ticksuffix:x.ticksuffix,showticksuffix:x.showticksuffix,showexponent:x.showexponent,exponentformat:x.exponentformat,minexponent:x.minexponent,separatethousands:x.separatethousands,tickformat:x.tickformat,tickformatstops:x.tickformatstops,hoverformat:x.hoverformat,showline:x.showline,linecolor:x.linecolor,linewidth:x.linewidth,showgrid:x.showgrid,gridcolor:M({},x.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:x.gridwidth,zeroline:x.zeroline,zerolinecolor:x.zerolinecolor,zerolinewidth:x.zerolinewidth,_deprecated:{title:x._deprecated.title,titlefont:x._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":366,"../../../lib/extend":493,"../../../plot_api/edit_types":536,"../../cartesian/layout_attributes":569}],601:[function(b,oe,se){"use strict";var y=b("tinycolor2").mix,x=b("../../../lib"),M=b("../../../plot_api/plot_template"),_=b("./axis_attributes"),e=b("../../cartesian/type_defaults"),o=b("../../cartesian/axis_defaults"),a=["xaxis","yaxis","zaxis"];oe.exports=function(l,i,v){var h,s;function d(g,m){return x.coerce(h,s,_,g,m)}for(var p=0;p<a.length;p++){var f=a[p];h=l[f]||{},(s=M.newContainer(i,f))._id=f[0]+v.scene,s._name=f,e(h,s,d,v),o(h,s,d,{font:v.font,letter:f[0],data:v.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:v.bgColor,calendar:v.calendar},v.fullLayout),d("gridcolor",y(s.color,v.bgColor,13600/187).toRgbString()),d("title.text",f[0]),s.setScale=x.noop,d("showspikes")&&(d("spikesides"),d("spikethickness"),d("spikecolor",s.color)),d("showaxeslabels"),d("showbackground")&&d("backgroundcolor")}}},{"../../../lib":503,"../../../plot_api/plot_template":543,"../../cartesian/axis_defaults":556,"../../cartesian/type_defaults":582,"./axis_attributes":600,tinycolor2:312}],602:[function(b,oe,se){"use strict";var y=b("../../../lib/str2rgbarray"),x=b("../../../lib"),M=["xaxis","yaxis","zaxis"];function _(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}_.prototype.merge=function(e,o){for(var a=0;a<3;++a){var l=o[M[a]];l.visible?(this.labels[a]=e._meta?x.templateString(l.title.text,e._meta):l.title.text,"font"in l.title&&(l.title.font.color&&(this.labelColor[a]=y(l.title.font.color)),l.title.font.family&&(this.labelFont[a]=l.title.font.family),l.title.font.size&&(this.labelSize[a]=l.title.font.size)),"showline"in l&&(this.lineEnable[a]=l.showline),"linecolor"in l&&(this.lineColor[a]=y(l.linecolor)),"linewidth"in l&&(this.lineWidth[a]=l.linewidth),"showgrid"in l&&(this.gridEnable[a]=l.showgrid),"gridcolor"in l&&(this.gridColor[a]=y(l.gridcolor)),"gridwidth"in l&&(this.gridWidth[a]=l.gridwidth),"log"===l.type?this.zeroEnable[a]=!1:"zeroline"in l&&(this.zeroEnable[a]=l.zeroline),"zerolinecolor"in l&&(this.zeroLineColor[a]=y(l.zerolinecolor)),"zerolinewidth"in l&&(this.zeroLineWidth[a]=l.zerolinewidth),this.lineTickEnable[a]=!(!("ticks"in l)||!l.ticks),"ticklen"in l&&(this.lineTickLength[a]=this._defaultLineTickLength[a]=l.ticklen),"tickcolor"in l&&(this.lineTickColor[a]=y(l.tickcolor)),"tickwidth"in l&&(this.lineTickWidth[a]=l.tickwidth),"tickangle"in l&&(this.tickAngle[a]="auto"===l.tickangle?-3600:Math.PI*-l.tickangle/180),"showticklabels"in l&&(this.tickEnable[a]=l.showticklabels),"tickfont"in l&&(l.tickfont.color&&(this.tickColor[a]=y(l.tickfont.color)),l.tickfont.family&&(this.tickFont[a]=l.tickfont.family),l.tickfont.size&&(this.tickSize[a]=l.tickfont.size)),"mirror"in l?-1!==["ticks","all","allticks"].indexOf(l.mirror)?(this.lineTickMirror[a]=!0,this.lineMirror[a]=!0):!0===l.mirror?(this.lineTickMirror[a]=!1,this.lineMirror[a]=!0):(this.lineTickMirror[a]=!1,this.lineMirror[a]=!1):this.lineMirror[a]=!1,"showbackground"in l&&!1!==l.showbackground?(this.backgroundEnable[a]=!0,this.backgroundColor[a]=y(l.backgroundcolor)):this.backgroundEnable[a]=!1):(this.tickEnable[a]=!1,this.labelEnable[a]=!1,this.lineEnable[a]=!1,this.lineTickEnable[a]=!1,this.gridEnable[a]=!1,this.zeroEnable[a]=!1,this.backgroundEnable[a]=!1)}},oe.exports=function(e,o){var a=new _;return a.merge(e,o),a}},{"../../../lib":503,"../../../lib/str2rgbarray":528}],603:[function(b,oe,se){"use strict";var y=b("../../../lib"),x=b("../../../components/color"),M=b("../../../registry"),_=b("../../subplot_defaults"),e=b("./axis_defaults"),o=b("./layout_attributes"),a=b("../../get_data").getSubplotData;function l(i,v,h,s){for(var d=h("bgcolor"),p=x.combine(d,s.paper_bgcolor),f=["up","center","eye"],g=0;g<f.length;g++)h("camera."+f[g]+".x"),h("camera."+f[g]+".y"),h("camera."+f[g]+".z");h("camera.projection.type");var m=!!h("aspectratio.x")&&!!h("aspectratio.y")&&!!h("aspectratio.z"),u=h("aspectmode",m?"manual":"auto");m||(i.aspectratio=v.aspectratio={x:1,y:1,z:1},"manual"===u&&(v.aspectmode="auto"),i.aspectmode=v.aspectmode);var w=a(s.fullData,"gl3d",s.id);e(i,v,{font:s.font,scene:s.id,data:w,bgColor:p,calendar:s.calendar,autotypenumbersDflt:s.autotypenumbersDflt,fullLayout:s.fullLayout}),M.getComponentMethod("annotations3d","handleDefaults")(i,v,s);var c=s.getDfltFromLayout("dragmode");if(!1!==c&&!c)if(c="orbit",i.camera&&i.camera.up){var A=i.camera.up.x,k=i.camera.up.y,C=i.camera.up.z;0!==C&&(A&&k&&C?C/Math.sqrt(A*A+k*k+C*C)>.999&&(c="turntable"):c="turntable")}else c="turntable";h("dragmode",c),h("hovermode",s.getDfltFromLayout("hovermode"))}oe.exports=function(i,v,h){var s=v._basePlotModules.length>1;_(i,v,h,{type:"gl3d",attributes:o,handleDefaults:l,fullLayout:v,font:v.font,fullData:h,getDfltFromLayout:function(d){if(!s)return y.validate(i[d],o[d])?i[d]:void 0},autotypenumbersDflt:v.autotypenumbers,paper_bgcolor:v.paper_bgcolor,calendar:v.calendar})}},{"../../../components/color":366,"../../../lib":503,"../../../registry":638,"../../get_data":593,"../../subplot_defaults":632,"./axis_defaults":601,"./layout_attributes":604}],604:[function(b,oe,se){"use strict";var y=b("./axis_attributes"),x=b("../../domain").attributes,M=b("../../../lib/extend").extendFlat,_=b("../../../lib").counterRegex;function e(o,a,l){return{x:{valType:"number",dflt:o,editType:"camera"},y:{valType:"number",dflt:a,editType:"camera"},z:{valType:"number",dflt:l,editType:"camera"},editType:"camera"}}oe.exports={_arrayAttrRegexps:[_("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:M(e(0,0,1),{}),center:M(e(0,0,0),{}),eye:M(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:x({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:y,yaxis:y,zaxis:y,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":503,"../../../lib/extend":493,"../../domain":584,"./axis_attributes":600}],605:[function(b,oe,se){"use strict";var y=b("../../../lib/str2rgbarray"),x=["xaxis","yaxis","zaxis"];function M(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}M.prototype.merge=function(_){for(var e=0;e<3;++e){var o=_[x[e]];o.visible?(this.enabled[e]=o.showspikes,this.colors[e]=y(o.spikecolor),this.drawSides[e]=o.spikesides,this.lineWidth[e]=o.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}},oe.exports=function(_){var e=new M;return e.merge(_),e}},{"../../../lib/str2rgbarray":528}],606:[function(b,oe,se){"use strict";oe.exports=function(e){for(var o=e.axesOptions,a=e.glplot.axesPixels,l=e.fullSceneLayout,i=[[],[],[]],v=0;v<3;++v){var h=l[M[v]];if(h._length=(a[v].hi-a[v].lo)*a[v].pixelsPerDataUnit/e.dataScale[v],Math.abs(h._length)===1/0||isNaN(h._length))i[v]=[];else{h._input_range=h.range.slice(),h.range[0]=a[v].lo/e.dataScale[v],h.range[1]=a[v].hi/e.dataScale[v],h._m=1/(e.dataScale[v]*a[v].pixelsPerDataUnit),h.range[0]===h.range[1]&&(h.range[0]-=1,h.range[1]+=1);var s=h.tickmode;if("auto"===h.tickmode){h.tickmode="linear";var d=h.nticks||x.constrain(h._length/40,4,9);y.autoTicks(h,Math.abs(h.range[1]-h.range[0])/d)}for(var p=y.calcTicks(h,{msUTC:!0}),f=0;f<p.length;++f)p[f].x=p[f].x*e.dataScale[v],"date"===h.type&&(p[f].text=p[f].text.replace(/\<br\>/g," "));i[v]=p,h.tickmode=s}}for(o.ticks=i,v=0;v<3;++v)for(_[v]=.5*(e.glplot.bounds[0][v]+e.glplot.bounds[1][v]),f=0;f<2;++f)o.bounds[f][v]=e.glplot.bounds[f][v];e.contourLevels=function(g){for(var m=new Array(3),u=0;u<3;++u){for(var w=g[u],c=new Array(w.length),A=0;A<w.length;++A)c[A]=w[A].x;m[u]=c}return m}(i)};var y=b("../../cartesian/axes"),x=b("../../../lib"),M=["xaxis","yaxis","zaxis"],_=[0,0,0]},{"../../../lib":503,"../../cartesian/axes":554}],607:[function(b,oe,se){"use strict";function y(x,M){var _,e,o=[0,0,0,0];for(_=0;_<4;++_)for(e=0;e<4;++e)o[e]+=x[4*_+e]*M[_];return o}oe.exports=function(x,M){return y(x.projection,y(x.view,y(x.model,[M[0],M[1],M[2],1])))}},{}],608:[function(b,oe,se){"use strict";var y,x,M=b("../../../stackgl_modules").gl_plot3d,_=M.createCamera,e=M.createScene,o=b("webgl-context"),a=b("has-passive-events"),l=b("../../registry"),i=b("../../lib"),v=i.preserveDrawingBuffer(),h=b("../../plots/cartesian/axes"),s=b("../../components/fx"),d=b("../../lib/str2rgbarray"),p=b("../../lib/show_no_webgl_msg"),f=b("./project"),g=b("./layout/convert"),m=b("./layout/spikes"),u=b("./layout/tick_marks");function w(E,L){var D=document.createElement("div"),N=E.container;this.graphDiv=E.graphDiv;var F=document.createElementNS("http://www.w3.org/2000/svg","svg");F.style.position="absolute",F.style.top=F.style.left="0px",F.style.width=F.style.height="100%",F.style["z-index"]=20,F.style["pointer-events"]="none",D.appendChild(F),this.svgContainer=F,D.id=E.id,D.style.position="absolute",D.style.top=D.style.left="0px",D.style.width=D.style.height="100%",N.appendChild(D),this.fullLayout=L,this.id=E.id||"scene",this.fullSceneLayout=L[this.id],this.plotArgs=[[],{},{}],this.axesOptions=g(L,L[this.id]),this.spikeOptions=m(L[this.id]),this.container=D,this.staticMode=!!E.staticPlot,this.pixelRatio=this.pixelRatio||E.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=l.getComponentMethod("annotations3d","convert"),this.drawAnnotations=l.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var c=w.prototype;c.prepareOptions=function(){var E={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:v,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(x||(y=document.createElement("canvas"),x=o({canvas:y,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");E.gl=x,E.canvas=y}return E};var A=!0;c.tryCreatePlot=function(){var E=this.prepareOptions(),L=!0;try{this.glplot=e(E)}catch(D){if(this.staticMode||!A||v)L=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{v=E.glOptions.preserveDrawingBuffer=!0,this.glplot=e(E)}catch(N){v=E.glOptions.preserveDrawingBuffer=!1,L=!1}}}return A=!1,L},c.initializeGLCamera=function(){var E=this.fullSceneLayout.camera;this.camera=_(this.container,{center:[E.center.x,E.center.y,E.center.z],eye:[E.eye.x,E.eye.y,E.eye.z],up:[E.up.x,E.up.y,E.up.z],_ortho:"orthographic"===E.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},c.initializeGLPlot=function(){var E=this;if(E.initializeGLCamera(),!E.tryCreatePlot())return p(E);E.traces={},E.make4thDimension();var L=E.graphDiv,D=L.layout,N=function(){var I={};return E.isCameraChanged(D)&&(I[E.id+".camera"]=E.getCamera()),E.isAspectChanged(D)&&(I[E.id+".aspectratio"]=E.glplot.getAspectratio(),"manual"!==D[E.id].aspectmode&&(E.fullSceneLayout.aspectmode=D[E.id].aspectmode=I[E.id+".aspectmode"]="manual")),I},F=function(I){if(!1!==I.fullSceneLayout.dragmode){var P=N();I.saveLayout(D),I.graphDiv.emit("plotly_relayout",P)}};return E.glplot.canvas&&(E.glplot.canvas.addEventListener("mouseup",function(){F(E)}),E.glplot.canvas.addEventListener("wheel",function(I){if(L._context._scrollZoom.gl3d){if(E.camera._ortho){var P=I.deltaX>I.deltaY?1.1:1/1.1,j=E.glplot.getAspectratio();E.glplot.setAspectratio({x:P*j.x,y:P*j.y,z:P*j.z})}F(E)}},!!a&&{passive:!1}),E.glplot.canvas.addEventListener("mousemove",function(){if(!1!==E.fullSceneLayout.dragmode&&0!==E.camera.mouseListener.buttons){var I=N();E.graphDiv.emit("plotly_relayouting",I)}}),E.staticMode||E.glplot.canvas.addEventListener("webglcontextlost",function(I){L&&L.emit&&L.emit("plotly_webglcontextlost",{event:I,layer:E.id})},!1)),E.glplot.oncontextloss=function(){E.recoverContext()},E.glplot.onrender=function(){E.render()},!0},c.render=function(){var E,L=this,D=L.graphDiv,N=L.svgContainer,F=L.container.getBoundingClientRect();D._fullLayout._calcInverseTransform(D);var j=F.width*D._fullLayout._invScaleX,V=F.height*D._fullLayout._invScaleY;N.setAttributeNS(null,"viewBox","0 0 "+j+" "+V),N.setAttributeNS(null,"width",j),N.setAttributeNS(null,"height",V),u(L),L.glplot.axes.update(L.axesOptions);for(var Z=Object.keys(L.traces),Y=null,ee=L.glplot.selection,re=0;re<Z.length;++re)"skip"!==(E=L.traces[Z[re]]).data.hoverinfo&&E.handlePick(ee)&&(Y=E),E.setContourLevels&&E.setContourLevels();function X(de,_e,me){var we=L.fullSceneLayout[de+"axis"];return"log"!==we.type&&(_e=we.d2l(_e)),h.hoverLabelText(we,_e,me)}if(null!==Y){var ie,K=f(L.glplot.cameraParams,ee.dataCoordinate),q=D._fullData[(E=Y.data).index],U=ee.index,W={xLabel:X("x",ee.traceCoordinate[0],E.xhoverformat),yLabel:X("y",ee.traceCoordinate[1],E.yhoverformat),zLabel:X("z",ee.traceCoordinate[2],E.zhoverformat)},ae=s.castHoverinfo(q,L.fullLayout,U),G=(ae||"").split("+"),te=ae&&"all"===ae;q.hovertemplate||te||(-1===G.indexOf("x")&&(W.xLabel=void 0),-1===G.indexOf("y")&&(W.yLabel=void 0),-1===G.indexOf("z")&&(W.zLabel=void 0),-1===G.indexOf("text")&&(ee.textLabel=void 0),-1===G.indexOf("name")&&(Y.name=void 0));var ne=[];"cone"===E.type||"streamtube"===E.type?(W.uLabel=X("x",ee.traceCoordinate[3],E.uhoverformat),(te||-1!==G.indexOf("u"))&&ne.push("u: "+W.uLabel),W.vLabel=X("y",ee.traceCoordinate[4],E.vhoverformat),(te||-1!==G.indexOf("v"))&&ne.push("v: "+W.vLabel),W.wLabel=X("z",ee.traceCoordinate[5],E.whoverformat),(te||-1!==G.indexOf("w"))&&ne.push("w: "+W.wLabel),W.normLabel=ee.traceCoordinate[6].toPrecision(3),(te||-1!==G.indexOf("norm"))&&ne.push("norm: "+W.normLabel),"streamtube"===E.type&&(W.divergenceLabel=ee.traceCoordinate[7].toPrecision(3),(te||-1!==G.indexOf("divergence"))&&ne.push("divergence: "+W.divergenceLabel)),ee.textLabel&&ne.push(ee.textLabel),ie=ne.join("<br>")):"isosurface"===E.type||"volume"===E.type?(W.valueLabel=h.hoverLabelText(L._mockAxis,L._mockAxis.d2l(ee.traceCoordinate[3]),E.valuehoverformat),ne.push("value: "+W.valueLabel),ee.textLabel&&ne.push(ee.textLabel),ie=ne.join("<br>")):ie=ee.textLabel;var le={x:ee.traceCoordinate[0],y:ee.traceCoordinate[1],z:ee.traceCoordinate[2],data:q._input,fullData:q,curveNumber:q.index,pointNumber:U};s.appendArrayPointValue(le,q,U),E._module.eventData&&(le=q._module.eventData(le,ee,q,{},U));var ue={points:[le]};if(L.fullSceneLayout.hovermode){var pe=[];s.loneHover({trace:q,x:(.5+.5*K[0]/K[3])*j,y:(.5-.5*K[1]/K[3])*V,xLabel:W.xLabel,yLabel:W.yLabel,zLabel:W.zLabel,text:ie,name:Y.name,color:s.castHoverOption(q,U,"bgcolor")||Y.color,borderColor:s.castHoverOption(q,U,"bordercolor"),fontFamily:s.castHoverOption(q,U,"font.family"),fontSize:s.castHoverOption(q,U,"font.size"),fontColor:s.castHoverOption(q,U,"font.color"),nameLength:s.castHoverOption(q,U,"namelength"),textAlign:s.castHoverOption(q,U,"align"),hovertemplate:i.castOption(q,U,"hovertemplate"),hovertemplateLabels:i.extendFlat({},le,W),eventData:[le]},{container:N,gd:D,inOut_bbox:pe}),le.bbox=pe[0]}D.emit(ee.buttons&&ee.distance<5?"plotly_click":"plotly_hover",ue),this.oldEventData=ue}else s.loneUnhover(N),this.oldEventData&&D.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;L.drawAnnotations(L)},c.recoverContext=function(){var E=this;E.glplot.dispose();var L=function(){E.glplot.gl.isContextLost()?requestAnimationFrame(L):E.initializeGLPlot()?E.plot.apply(E,E.plotArgs):i.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(L)};var k=["xaxis","yaxis","zaxis"];function C(E,L,D){for(var N=E.fullSceneLayout,F=0;F<3;F++){var I=k[F],P=I.charAt(0),j=N[I],V=L[P],Z=L[P+"calendar"],Y=L["_"+P+"length"];if(i.isArrayOrTypedArray(V))for(var ee,re=0;re<(Y||V.length);re++)if(i.isArrayOrTypedArray(V[re]))for(var X=0;X<V[re].length;++X)ee=j.d2l(V[re][X],0,Z),!isNaN(ee)&&isFinite(ee)&&(D[0][F]=Math.min(D[0][F],ee),D[1][F]=Math.max(D[1][F],ee));else ee=j.d2l(V[re],0,Z),!isNaN(ee)&&isFinite(ee)&&(D[0][F]=Math.min(D[0][F],ee),D[1][F]=Math.max(D[1][F],ee));else D[0][F]=Math.min(D[0][F],0),D[1][F]=Math.max(D[1][F],Y-1)}}c.plot=function(E,L,D){if(this.plotArgs=[E,L,D],!this.glplot.contextLost){var N,F,I,P,j,V,Z=L[this.id],Y=D[this.id];this.fullLayout=L,this.fullSceneLayout=Z,this.axesOptions.merge(L,Z),this.spikeOptions.merge(Z),this.setViewport(Z),this.updateFx(Z.dragmode,Z.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(d(Z.bgcolor)),this.setConvert(j),E?Array.isArray(E)||(E=[E]):E=[];var ee=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(I=0;I<E.length;++I)!0===(N=E[I]).visible&&0!==N._length&&C(this,N,ee);!function(Oe,Pe){for(var Re=Oe.fullSceneLayout,Ue=Re.annotations||[],qe=0;qe<3;qe++)for(var Xe=k[qe],lt=Xe.charAt(0),He=Re[Xe],$e=0;$e<Ue.length;$e++){var et=Ue[$e];if(et.visible){var nt=He.r2l(et[lt]);!isNaN(nt)&&isFinite(nt)&&(Pe[0][qe]=Math.min(Pe[0][qe],nt),Pe[1][qe]=Math.max(Pe[1][qe],nt))}}}(this,ee);var re=[1,1,1];for(P=0;P<3;++P)re[P]=ee[1][P]===ee[0][P]?1:1/(ee[1][P]-ee[0][P]);for(this.dataScale=re,this.convertAnnotations(this),I=0;I<E.length;++I)!0===(N=E[I]).visible&&0!==N._length&&((F=this.traces[N.uid])?F.data.type===N.type?F.update(N):(F.dispose(),F=N._module.plot(this,N),this.traces[N.uid]=F):(F=N._module.plot(this,N),this.traces[N.uid]=F),F.name=N.name);var X=Object.keys(this.traces);e:for(I=0;I<X.length;++I){for(P=0;P<E.length;++P)if(E[P].uid===X[I]&&!0===E[P].visible&&0!==E[P]._length)continue e;(F=this.traces[X[I]]).dispose(),delete this.traces[X[I]]}this.glplot.objects.sort(function(Oe,Pe){return Oe._trace.data.index-Pe._trace.data.index});var K,ie=[[0,0,0],[0,0,0]],q=[],U={};for(I=0;I<3;++I){if((V=(j=Z[k[I]]).type)in U?(U[V].acc*=re[I],U[V].count+=1):U[V]={acc:re[I],count:1},j.autorange){ie[0][I]=1/0,ie[1][I]=-1/0;var W=this.glplot.objects,ae=this.fullSceneLayout.annotations||[],G=j._name.charAt(0);for(P=0;P<W.length;P++){var te=W[P],ne=te.bounds,le=te._trace.data._pad||0;ie[0][I]="ErrorBars"===te.constructor.name&&j._lowerLogErrorBound?Math.min(ie[0][I],j._lowerLogErrorBound):Math.min(ie[0][I],ne[0][I]/re[I]-le),ie[1][I]=Math.max(ie[1][I],ne[1][I]/re[I]+le)}for(P=0;P<ae.length;P++){var ue=ae[P];if(ue.visible){var pe=j.r2l(ue[G]);ie[0][I]=Math.min(ie[0][I],pe),ie[1][I]=Math.max(ie[1][I],pe)}}if("rangemode"in j&&"tozero"===j.rangemode&&(ie[0][I]=Math.min(ie[0][I],0),ie[1][I]=Math.max(ie[1][I],0)),ie[0][I]>ie[1][I])ie[0][I]=-1,ie[1][I]=1;else{var de=ie[1][I]-ie[0][I];ie[0][I]-=de/32,ie[1][I]+=de/32}if("reversed"===j.autorange){var _e=ie[0][I];ie[0][I]=ie[1][I],ie[1][I]=_e}}else{var me=j.range;ie[0][I]=j.r2l(me[0]),ie[1][I]=j.r2l(me[1])}ie[0][I]===ie[1][I]&&(ie[0][I]-=1,ie[1][I]+=1),q[I]=ie[1][I]-ie[0][I],this.glplot.setBounds(I,{min:ie[0][I]*re[I],max:ie[1][I]*re[I]})}var we=Z.aspectmode;if("cube"===we)K=[1,1,1];else if("manual"===we){var De=Z.aspectratio;K=[De.x,De.y,De.z]}else{if("auto"!==we&&"data"!==we)throw new Error("scene.js aspectRatio was not one of the enumerated types");var Le=[1,1,1];for(I=0;I<3;++I){var Ie=U[V=(j=Z[k[I]]).type];Le[I]=Math.pow(Ie.acc,1/Ie.count)/re[I]}K="data"===we||Math.max.apply(null,Le)/Math.min.apply(null,Le)<=4?Le:[1,1,1]}Z.aspectratio.x=Y.aspectratio.x=K[0],Z.aspectratio.y=Y.aspectratio.y=K[1],Z.aspectratio.z=Y.aspectratio.z=K[2],this.glplot.setAspectratio(Z.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:Z.aspectratio.x,y:Z.aspectratio.y,z:Z.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=Z.aspectmode);var je=Z.domain||null,ye=L._size||null;if(je&&ye){var Me=this.container.style;Me.position="absolute",Me.left=ye.l+je.x[0]*ye.w+"px",Me.top=ye.t+(1-je.y[1])*ye.h+"px",Me.width=ye.w*(je.x[1]-je.x[0])+"px",Me.height=ye.h*(je.y[1]-je.y[0])+"px"}this.glplot.redraw()}},c.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},c.getCamera=function(){var E;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(E=this.camera).up[0],y:E.up[1],z:E.up[2]},center:{x:E.center[0],y:E.center[1],z:E.center[2]},eye:{x:E.eye[0],y:E.eye[1],z:E.eye[2]},projection:{type:!0===E._ortho?"orthographic":"perspective"}}},c.setViewport=function(E){var L,D=E.camera;this.camera.lookAt.apply(this,[[(L=D).eye.x,L.eye.y,L.eye.z],[L.center.x,L.center.y,L.center.z],[L.up.x,L.up.y,L.up.z]]),this.glplot.setAspectratio(E.aspectratio),"orthographic"===D.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},c.isCameraChanged=function(E){var L=this.getCamera(),D=i.nestedProperty(E,this.id+".camera").get();var j,V,Z,Y,ee,re,F=!1;if(void 0===D)F=!0;else{for(var I=0;I<3;I++)for(var P=0;P<3;P++)if(j=L,Y=P,ee=void 0,re=void 0,re=["x","y","z"],!(V=D)[(ee=["up","center","eye"])[Z=I]]||j[ee[Z]][re[Y]]!==V[ee[Z]][re[Y]]){F=!0;break}(!D.projection||L.projection&&L.projection.type!==D.projection.type)&&(F=!0)}return F},c.isAspectChanged=function(E){var L=this.glplot.getAspectratio(),D=i.nestedProperty(E,this.id+".aspectratio").get();return void 0===D||D.x!==L.x||D.y!==L.y||D.z!==L.z},c.saveLayout=function(E){var L,D,N,F,I,P,j=this.fullLayout,V=this.isCameraChanged(E),Z=this.isAspectChanged(E),Y=V||Z;if(Y){var ee={};V&&(L=this.getCamera(),N=(D=i.nestedProperty(E,this.id+".camera")).get(),ee[this.id+".camera"]=N),Z&&(F=this.glplot.getAspectratio(),P=(I=i.nestedProperty(E,this.id+".aspectratio")).get(),ee[this.id+".aspectratio"]=P),l.call("_storeDirectGUIEdit",E,j._preGUI,ee),V&&(D.set(L),i.nestedProperty(j,this.id+".camera").set(L)),Z&&(I.set(F),i.nestedProperty(j,this.id+".aspectratio").set(F),this.glplot.redraw())}return Y},c.updateFx=function(E,L){var D=this.camera;if(D)if("orbit"===E)D.mode="orbit",D.keyBindingMode="rotate";else if("turntable"===E){D.up=[0,0,1],D.mode="turntable",D.keyBindingMode="rotate";var N=this.graphDiv,F=N._fullLayout,I=this.fullSceneLayout.camera,P=I.up.x,j=I.up.y,V=I.up.z;if(V/Math.sqrt(P*P+j*j+V*V)<.999){var Z=this.id+".camera.up",Y={x:0,y:0,z:1},ee={};ee[Z]=Y;var re=N.layout;l.call("_storeDirectGUIEdit",re,F._preGUI,ee),I.up=Y,i.nestedProperty(re,Z).set(Y)}}else D.keyBindingMode=E;this.fullSceneLayout.hovermode=L},c.toImage=function(E){E||(E="png"),this.staticMode&&this.container.appendChild(y),this.glplot.redraw();var L=this.glplot.gl,D=L.drawingBufferWidth,N=L.drawingBufferHeight;L.bindFramebuffer(L.FRAMEBUFFER,null);var F=new Uint8Array(D*N*4);L.readPixels(0,0,D,N,L.RGBA,L.UNSIGNED_BYTE,F),function(Z,Y,ee){for(var re=0,X=ee-1;re<X;++re,--X)for(var K=0;K<Y;++K)for(var ie=0;ie<4;++ie){var q=4*(Y*re+K)+ie,U=4*(Y*X+K)+ie,W=Z[q];Z[q]=Z[U],Z[U]=W}}(F,D,N),function(Z,Y,ee){for(var re=0;re<ee;++re)for(var X=0;X<Y;++X){var K=4*(Y*re+X),ie=Z[K+3];if(ie>0)for(var q=255/ie,U=0;U<3;++U)Z[K+U]=Math.min(q*Z[K+U],255)}}(F,D,N);var I=document.createElement("canvas");I.width=D,I.height=N;var P,j=I.getContext("2d",{willReadFrequently:!0}),V=j.createImageData(D,N);switch(V.data.set(F),j.putImageData(V,0,0),E){case"jpeg":P=I.toDataURL("image/jpeg");break;case"webp":P=I.toDataURL("image/webp");break;default:P=I.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(y),P},c.setConvert=function(){for(var E=0;E<3;E++){var L=this.fullSceneLayout[k[E]];h.setConvert(L,this.fullLayout),L.setScale=i.noop}},c.make4thDimension=function(){var E=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},h.setConvert(this._mockAxis,E)},oe.exports=w},{"../../../stackgl_modules":1124,"../../components/fx":406,"../../lib":503,"../../lib/show_no_webgl_msg":525,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../../registry":638,"./layout/convert":602,"./layout/spikes":605,"./layout/tick_marks":606,"./project":607,"has-passive-events":229,"webgl-context":331}],609:[function(b,oe,se){"use strict";oe.exports=function(y,x,M,_){_=_||y.length;for(var e=new Array(_),o=0;o<_;o++)e[o]=[y[o],x[o],M[o]];return e}},{}],610:[function(b,oe,se){"use strict";var y=b("./font_attributes"),x=b("./animation_attributes"),M=b("../components/color/attributes"),_=b("../components/shapes/draw_newshape/attributes"),e=b("./pad_attributes"),o=b("../lib/extend").extendFlat,a=y({editType:"calc"});a.family.dflt='"Open Sans", verdana, arial, sans-serif',a.size.dflt=12,a.color.dflt=M.defaultLine,oe.exports={font:a,title:{text:{valType:"string",editType:"layoutstyle"},font:y({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:o(e({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:M.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:M.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:M.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:_.newshape,activeshape:_.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:o({},x.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:y({editType:"layoutstyle"})}}},{"../components/color/attributes":365,"../components/shapes/draw_newshape/attributes":451,"../lib/extend":493,"./animation_attributes":548,"./font_attributes":585,"./pad_attributes":618}],611:[function(b,oe,se){"use strict";var y=b("../../lib/sort_object_keys"),x='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',M=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',x].join(" "),_=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),e={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:x,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:M,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:M,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:_,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:_,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},o=y(e);oe.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:e,styleValuesNonMapbox:o,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",o.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},{"../../lib/sort_object_keys":526}],612:[function(b,oe,se){"use strict";var y=b("../../lib");oe.exports=function(x,M){var _=x.split(" "),e=_[0],o=_[1],a=y.isArrayOrTypedArray(M)?y.mean(M):M,l=.5+a/100,i=1.5+a/100,v=["",""],h=[0,0];switch(e){case"top":v[0]="top",h[1]=-i;break;case"bottom":v[0]="bottom",h[1]=i}switch(o){case"left":v[1]="right",h[0]=-l;break;case"right":v[1]="left",h[0]=l}return{anchor:v[0]&&v[1]?v.join("-"):v[0]?v[0]:v[1]?v[1]:"center",offset:h}}},{"../../lib":503}],613:[function(b,oe,se){"use strict";var y=b("mapbox-gl/dist/mapbox-gl-unminified"),x=b("../../lib"),M=x.strTranslate,_=x.strScale,e=b("../../plots/get_data").getSubplotCalcData,o=b("../../constants/xmlns_namespaces"),a=b("@plotly/d3"),l=b("../../components/drawing"),i=b("../../lib/svg_text_utils"),v=b("./mapbox"),h=se.constants=b("./constants");function s(d){return"string"==typeof d&&(-1!==h.styleValuesMapbox.indexOf(d)||0===d.indexOf("mapbox://"))}se.name="mapbox",se.attr="subplot",se.idRoot="mapbox",se.idRegex=se.attrRegex=x.counterRegex("mapbox"),se.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},se.layoutAttributes=b("./layout_attributes"),se.supplyLayoutDefaults=b("./layout_defaults"),se.plot=function(d){var p=d._fullLayout,f=d.calcdata,g=p._subplots.mapbox;if(y.version!==h.requiredVersion)throw new Error(h.wrongVersionErrorMsg);var m=function(C,E){var L=C._fullLayout;if(""===C._context.mapboxAccessToken)return"";for(var D=[],N=[],F=!1,I=!1,P=0;P<E.length;P++){var j=L[E[P]],V=j.accesstoken;s(j.style)&&(V?x.pushUnique(D,V):(s(j._input.style)&&(x.error("Uses Mapbox map style, but did not set an access token."),F=!0),I=!0)),V&&x.pushUnique(N,V)}if(I){var Z=F?h.noAccessTokenErrorMsg:h.missingStyleErrorMsg;throw x.error(Z),new Error(Z)}return D.length?(D.length>1&&x.warn(h.multipleTokensErrorMsg),D[0]):(N.length&&x.log(["Listed mapbox access token(s)",N.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(d,g);y.accessToken=m;for(var u=0;u<g.length;u++){var w=g[u],c=e(f,"mapbox",w),A=p[w],k=A._subplot;k||(k=new v(d,w),p[w]._subplot=k),k.viewInitial||(k.viewInitial={center:x.extendFlat({},A.center),zoom:A.zoom,bearing:A.bearing,pitch:A.pitch}),k.plot(c,p,d._promises)}},se.clean=function(d,p,f,g){for(var m=g._subplots.mapbox||[],u=0;u<m.length;u++){var w=m[u];!p[w]&&g[w]._subplot&&g[w]._subplot.destroy()}},se.toSVG=function(d){for(var p=d._fullLayout,f=p._subplots.mapbox,g=p._size,m=0;m<f.length;m++){var u=p[f[m]],w=u.domain,c=u._subplot.toImage("png");p._glimages.append("svg:image").attr({xmlns:o.svg,"xlink:href":c,x:g.l+g.w*w.x[0],y:g.t+g.h*(1-w.y[1]),width:g.w*(w.x[1]-w.x[0]),height:g.h*(w.y[1]-w.y[0]),preserveAspectRatio:"none"});var A=a.select(u._subplot.div);if(null!==A.select(".mapboxgl-ctrl-logo").node().offsetParent){var k=p._glimages.append("g");k.attr("transform",M(g.l+g.w*w.x[0]+10,g.t+g.h*(1-w.y[0])-31)),k.append("path").attr("d",h.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),k.append("path").attr("d",h.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),k.append("path").attr("d",h.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),k.append("polygon").attr("points",h.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var C=A.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),E=p._glimages.append("g"),L=E.append("text");L.text(C).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":C});var D=l.bBox(L.node()),N=g.w*(w.x[1]-w.x[0]);if(D.width>N/2){var F=C.split("|").join("<br>");L.text(F).attr("data-unformatted",F).call(i.convertToTspans,d),D=l.bBox(L.node())}L.attr("transform",M(-3,8-D.height)),E.insert("rect",".static-attribution").attr({x:-D.width-6,y:-D.height-3,width:D.width+6,height:D.height+3,fill:"rgba(255, 255, 255, 0.75)"});var I=1;D.width+6>N&&(I=N/(D.width+6));var P=[g.l+g.w*w.x[1],g.t+g.h*(1-w.y[0])];E.attr("transform",M(P[0],P[1])+_(I))}},se.updateFx=function(d){for(var p=d._fullLayout,f=p._subplots.mapbox,g=0;g<f.length;g++)p[f[g]]._subplot.updateFx(p)}},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/get_data":593,"./constants":611,"./layout_attributes":615,"./layout_defaults":616,"./mapbox":617,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],614:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../lib/svg_text_utils").sanitizeHTML,M=b("./convert_text_opts"),_=b("./constants");function e(i,v){this.subplot=i,this.uid=i.uid+"-"+v,this.index=v,this.idSource="source-"+this.uid,this.idLayer=_.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var o=e.prototype;function a(i){if(!i.visible)return!1;var v=i.source;if(Array.isArray(v)&&v.length>0){for(var h=0;h<v.length;h++)if("string"!=typeof v[h]||0===v[h].length)return!1;return!0}return y.isPlainObject(v)||"string"==typeof v&&v.length>0}function l(i){var v={},h={};switch(i.type){case"circle":y.extendFlat(h,{"circle-radius":i.circle.radius,"circle-color":i.color,"circle-opacity":i.opacity});break;case"line":y.extendFlat(h,{"line-width":i.line.width,"line-color":i.color,"line-opacity":i.opacity,"line-dasharray":i.line.dash});break;case"fill":y.extendFlat(h,{"fill-color":i.color,"fill-outline-color":i.fill.outlinecolor,"fill-opacity":i.opacity});break;case"symbol":var s=i.symbol,d=M(s.textposition,s.iconsize);y.extendFlat(v,{"icon-image":s.icon+"-15","icon-size":s.iconsize/10,"text-field":s.text,"text-size":s.textfont.size,"text-anchor":d.anchor,"text-offset":d.offset,"symbol-placement":s.placement}),y.extendFlat(h,{"icon-color":i.color,"text-color":s.textfont.color,"text-opacity":i.opacity});break;case"raster":y.extendFlat(h,{"raster-fade-duration":0,"raster-opacity":i.opacity})}return{layout:v,paint:h}}o.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=a(i)},o.needsNewImage=function(i){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===i.sourcetype&&(this.source!==i.source||JSON.stringify(this.coordinates)!==JSON.stringify(i.coordinates))},o.needsNewSource=function(i){return this.sourceType!==i.sourcetype||JSON.stringify(this.source)!==JSON.stringify(i.source)||this.layerType!==i.type},o.needsNewLayer=function(i){return this.layerType!==i.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},o.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},o.updateImage=function(i){this.subplot.map.getSource(this.idSource).updateImage({url:i.source,coordinates:i.coordinates});var v=this.findFollowingMapboxLayerId(this.lookupBelow());null!==v&&this.subplot.map.moveLayer(this.idLayer,v)},o.updateSource=function(i){var s,d,p,f,g,v=this.subplot.map;if(v.getSource(this.idSource)&&v.removeSource(this.idSource),this.sourceType=i.sourcetype,this.source=i.source,a(i)){var h=(f=(s=i).source,g={type:p=s.sourcetype},"geojson"===p?d="data":"vector"===p?d="string"==typeof f?"url":"tiles":"raster"===p?(d="tiles",g.tileSize=256):"image"===p&&(d="url",g.coordinates=s.coordinates),g[d]=f,s.sourceattribution&&(g.attribution=x(s.sourceattribution)),g);v.addSource(this.idSource,h)}},o.findFollowingMapboxLayerId=function(i){if("traces"===i)for(var v=this.subplot.getMapLayers(),h=0;h<v.length;h++){var s=v[h].id;if("string"==typeof s&&0===s.indexOf(_.traceLayerPrefix)){i=s;break}}return i},o.updateLayer=function(i){var v=this.subplot,h=l(i),s=this.lookupBelow(),d=this.findFollowingMapboxLayerId(s);this.removeLayer(),a(i)&&v.addLayer({id:this.idLayer,source:this.idSource,"source-layer":i.sourcelayer||"",type:i.type,minzoom:i.minzoom,maxzoom:i.maxzoom,layout:h.layout,paint:h.paint},d),this.layerType=i.type,this.below=s},o.updateStyle=function(i){if(a(i)){var v=l(i);this.subplot.setOptions(this.idLayer,"setLayoutProperty",v.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",v.paint)}},o.removeLayer=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer)},o.dispose=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer),i.getSource(this.idSource)&&i.removeSource(this.idSource)},oe.exports=function(i,v,h){var s=new e(i,v);return s.update(h),s}},{"../../lib":503,"../../lib/svg_text_utils":529,"./constants":611,"./convert_text_opts":612}],615:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../components/color").defaultLine,M=b("../domain").attributes,_=b("../font_attributes"),e=b("../../traces/scatter/attributes").textposition,o=b("../../plot_api/edit_types").overrideAll,a=b("../../plot_api/plot_template").templatedArray,l=b("./constants"),i=_({});i.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(oe.exports=o({_arrayAttrRegexps:[y.counterRegex("mapbox",".layers",!0)],domain:M({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:l.styleValuesMapbox.concat(l.styleValuesNonMapbox),dflt:l.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:a("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:x},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:x}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:i,textposition:y.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":366,"../../lib":503,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":927,"../domain":584,"../font_attributes":585,"./constants":611}],616:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../subplot_defaults"),M=b("../array_container_defaults"),_=b("./layout_attributes");function e(a,l,i,v){i("accesstoken",v.accessToken),i("style"),i("center.lon"),i("center.lat"),i("zoom"),i("bearing"),i("pitch"),M(a,l,{name:"layers",handleItemDefaults:o}),l._input=a}function o(a,l){function i(p,f){return y.coerce(a,l,_.layers,p,f)}if(i("visible")){var v,h=i("sourcetype"),s="raster"===h||"image"===h;i("source"),i("sourceattribution"),"vector"===h&&i("sourcelayer"),"image"===h&&i("coordinates"),s&&(v="raster");var d=i("type",v);s&&"raster"!==d&&(d=l.type="raster",y.log("Source types *raster* and *image* must drawn *raster* layer type.")),i("below"),i("color"),i("opacity"),i("minzoom"),i("maxzoom"),"circle"===d&&i("circle.radius"),"line"===d&&(i("line.width"),i("line.dash")),"fill"===d&&i("fill.outlinecolor"),"symbol"===d&&(i("symbol.icon"),i("symbol.iconsize"),i("symbol.text"),y.coerceFont(i,"symbol.textfont"),i("symbol.textposition"),i("symbol.placement"))}}oe.exports=function(a,l,i){x(a,l,i,{type:"mapbox",attributes:_,handleDefaults:e,partition:"y",accessToken:l._mapboxAccessToken})}},{"../../lib":503,"../array_container_defaults":549,"../subplot_defaults":632,"./layout_attributes":615}],617:[function(b,oe,se){"use strict";var y=b("mapbox-gl/dist/mapbox-gl-unminified"),x=b("../../lib"),M=b("../../lib/geo_location_utils"),_=b("../../registry"),e=b("../cartesian/axes"),o=b("../../components/dragelement"),a=b("../../components/fx"),l=b("../../components/dragelement/helpers"),i=l.rectMode,v=l.drawMode,h=l.selectMode,s=b("../cartesian/select").prepSelect,d=b("../cartesian/select").clearSelect,p=b("../cartesian/select").clearSelectionsCache,f=b("../cartesian/select").selectOnClick,g=b("./constants"),m=b("./layers");function u(E,L){this.id=L,this.gd=E;var D=E._fullLayout,N=E._context;this.container=D._glcontainer.node(),this.isStatic=N.staticPlot,this.uid=D._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(D),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var w=u.prototype;w.plot=function(E,L,D){var N,F=this;F.map&&L[F.id].accesstoken!==F.accessToken&&(F.map.remove(),F.map=null,F.styleObj=null,F.traceHash={},F.layerList=[]),N=new Promise(F.map?function(P,j){F.updateMap(E,L,P,j)}:function(P,j){F.createMap(E,L,P,j)}),D.push(N)},w.createMap=function(E,L,D,N){var F=this,I=L[F.id],P=F.styleObj=A(I.style);F.accessToken=I.accesstoken;var j=F.map=new y.Map({container:F.div,style:P.style,center:C(I.center),zoom:I.zoom,bearing:I.bearing,pitch:I.pitch,interactive:!F.isStatic,preserveDrawingBuffer:F.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new y.AttributionControl({compact:!0}));j._canvas.style.left="0px",j._canvas.style.top="0px",F.rejectOnError(N),F.isStatic||F.initFx(E,L);var V=[];V.push(new Promise(function(Z){j.once("load",Z)})),V=V.concat(M.fetchTraceGeoData(E)),Promise.all(V).then(function(){F.fillBelowLookup(E,L),F.updateData(E),F.updateLayout(L),F.resolveOnRender(D)}).catch(N)},w.updateMap=function(E,L,D,N){var F=this,I=F.map,P=L[this.id];F.rejectOnError(N);var j=[],V=A(P.style);JSON.stringify(F.styleObj)!==JSON.stringify(V)&&(F.styleObj=V,I.setStyle(V.style),F.traceHash={},j.push(new Promise(function(Z){I.once("styledata",Z)}))),j=j.concat(M.fetchTraceGeoData(E)),Promise.all(j).then(function(){F.fillBelowLookup(E,L),F.updateData(E),F.updateLayout(L),F.resolveOnRender(D)}).catch(N)},w.fillBelowLookup=function(E,L){var D,N,F=L[this.id].layers,I=this.belowLookup={},P=!1;for(D=0;D<E.length;D++){var j=E[D][0].trace,V=j._module;"string"==typeof j.below?N=j.below:V.getBelow&&(N=V.getBelow(j,this)),""===N&&(P=!0),I["trace-"+j.uid]=N||""}for(D=0;D<F.length;D++){var Z=F[D];I["layout-"+D]=N="string"==typeof Z.below?Z.below:P?"traces":""}var Y,ee,re={};for(Y in I)re[N=I[Y]]?re[N].push(Y):re[N]=[Y];for(N in re){var X=re[N];if(X.length>1)for(D=0;D<X.length;D++)0===(Y=X[D]).indexOf("trace-")?(ee=Y.split("trace-")[1],this.traceHash[ee]&&(this.traceHash[ee].below=null)):0===Y.indexOf("layout-")&&(ee=Y.split("layout-")[1],this.layerList[ee]&&(this.layerList[ee].below=null))}};var c={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function A(E){var L={};return x.isPlainObject(E)?(L.id=E.id,L.style=E):"string"==typeof E?(L.id=E,L.style=-1!==g.styleValuesMapbox.indexOf(E)?k(E):g.stylesNonMapbox[E]?g.stylesNonMapbox[E]:E):(L.id=g.styleValueDflt,L.style=k(g.styleValueDflt)),L.transition={duration:0,delay:0},L}function k(E){return g.styleUrlPrefix+E+"-"+g.styleUrlSuffix}function C(E){return[E.lon,E.lat]}w.updateData=function(E){var L,D,N,F,I=this.traceHash,P=E.slice().sort(function(ee,re){return c[ee[0].trace.type]-c[re[0].trace.type]});for(N=0;N<P.length;N++){var j=P[N],V=!1;(L=I[(D=j[0].trace).uid])&&(L.type===D.type?(L.update(j),V=!0):L.dispose()),!V&&D._module&&(I[D.uid]=D._module.plot(this,j))}var Z=Object.keys(I);e:for(N=0;N<Z.length;N++){var Y=Z[N];for(F=0;F<E.length;F++)if(Y===(D=E[F][0].trace).uid)continue e;(L=I[Y]).dispose(),delete I[Y]}},w.updateLayout=function(E){var L=this.map,D=E[this.id];this.dragging||this.wheeling||(L.setCenter(C(D.center)),L.setZoom(D.zoom),L.setBearing(D.bearing),L.setPitch(D.pitch)),this.updateLayers(E),this.updateFramework(E),this.updateFx(E),this.map.resize(),this.gd._context._scrollZoom.mapbox?L.scrollZoom.enable():L.scrollZoom.disable()},w.resolveOnRender=function(E){var L=this.map;L.on("render",function D(){L.loaded()&&(L.off("render",D),setTimeout(E,10))})},w.rejectOnError=function(E){var L=this.map;function D(){E(new Error(g.mapOnErrorMsg))}L.once("error",D),L.once("style.error",D),L.once("source.error",D),L.once("tile.error",D),L.once("layer.error",D)},w.createFramework=function(E){var L=this,D=L.div=document.createElement("div");D.id=L.uid,D.style.position="absolute",L.container.appendChild(D),L.xaxis={_id:"x",c2p:function(N){return L.project(N).x}},L.yaxis={_id:"y",c2p:function(N){return L.project(N).y}},L.updateFramework(E),L.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(L.mockAxis,E)},w.initFx=function(E,L){var D=this,N=D.gd,F=D.map;function I(){a.loneUnhover(L._hoverlayer)}function P(){var j=D.getView();N.emit("plotly_relayouting",D.getViewEditsWithDerived(j))}F.on("moveend",function(j){if(D.map){var V=N._fullLayout;if(j.originalEvent||D.wheeling){var Z=V[D.id];_.call("_storeDirectGUIEdit",N.layout,V._preGUI,D.getViewEdits(Z));var Y=D.getView();Z._input.center=Z.center=Y.center,Z._input.zoom=Z.zoom=Y.zoom,Z._input.bearing=Z.bearing=Y.bearing,Z._input.pitch=Z.pitch=Y.pitch,N.emit("plotly_relayout",D.getViewEditsWithDerived(Y))}j.originalEvent&&"mouseup"===j.originalEvent.type?D.dragging=!1:D.wheeling&&(D.wheeling=!1),V._rehover&&V._rehover()}}),F.on("wheel",function(){D.wheeling=!0}),F.on("mousemove",function(j){var V=D.div.getBoundingClientRect(),Z=[j.originalEvent.offsetX,j.originalEvent.offsetY];j.target.getBoundingClientRect=function(){return V},D.xaxis.p2c=function(){return F.unproject(Z).lng},D.yaxis.p2c=function(){return F.unproject(Z).lat},N._fullLayout._rehover=function(){N._fullLayout._hoversubplot===D.id&&N._fullLayout[D.id]&&a.hover(N,j,D.id)},a.hover(N,j,D.id),N._fullLayout._hoversubplot=D.id}),F.on("dragstart",function(){D.dragging=!0,I()}),F.on("zoomstart",I),F.on("mouseout",function(){N._fullLayout._hoversubplot=null}),F.on("drag",P),F.on("zoom",P),F.on("dblclick",function(){var j=N._fullLayout[D.id];_.call("_storeDirectGUIEdit",N.layout,N._fullLayout._preGUI,D.getViewEdits(j));var V=D.viewInitial;F.setCenter(C(V.center)),F.setZoom(V.zoom),F.setBearing(V.bearing),F.setPitch(V.pitch);var Z=D.getView();j._input.center=j.center=Z.center,j._input.zoom=j.zoom=Z.zoom,j._input.bearing=j.bearing=Z.bearing,j._input.pitch=j.pitch=Z.pitch,N.emit("plotly_doubleclick",null),N.emit("plotly_relayout",D.getViewEditsWithDerived(Z))}),D.clearSelect=function(){p(D.dragOptions),d(D.dragOptions.gd)},D.onClickInPanFn=function(j){return function(V){var Z=N._fullLayout.clickmode;Z.indexOf("select")>-1&&f(V.originalEvent,N,[D.xaxis],[D.yaxis],D.id,j),Z.indexOf("event")>-1&&a.click(N,V.originalEvent)}}},w.updateFx=function(E){var L=this,D=L.map,N=L.gd;if(!L.isStatic){var F,I=E.dragmode;F=i(I)?function(V,Z){(V.range={})[L.id]=[j([Z.xmin,Z.ymin]),j([Z.xmax,Z.ymax])]}:function(V,Z,Y){(V.lassoPoints={})[L.id]=Y.filtered.map(j)},L.dragOptions=x.extendDeep(L.dragOptions||{},{dragmode:E.dragmode,element:L.div,gd:N,plotinfo:{id:L.id,domain:E[L.id].domain,xaxis:L.xaxis,yaxis:L.yaxis,fillRangeItems:F},xaxes:[L.xaxis],yaxes:[L.yaxis],subplot:L.id}),D.off("click",L.onClickInPanHandler),h(I)||v(I)?(D.dragPan.disable(),D.on("zoomstart",L.clearSelect),L.dragOptions.prepFn=function(V,Z,Y){s(V,Z,Y,L.dragOptions,I)},o.init(L.dragOptions)):(D.dragPan.enable(),D.off("zoomstart",L.clearSelect),L.div.onmousedown=null,L.onClickInPanHandler=L.onClickInPanFn(L.dragOptions),D.on("click",L.onClickInPanHandler))}function j(V){var Z=L.map.unproject(V);return[Z.lng,Z.lat]}},w.updateFramework=function(E){var L=E[this.id].domain,D=E._size,N=this.div.style;N.width=D.w*(L.x[1]-L.x[0])+"px",N.height=D.h*(L.y[1]-L.y[0])+"px",N.left=D.l+L.x[0]*D.w+"px",N.top=D.t+(1-L.y[1])*D.h+"px",this.xaxis._offset=D.l+L.x[0]*D.w,this.xaxis._length=D.w*(L.x[1]-L.x[0]),this.yaxis._offset=D.t+(1-L.y[1])*D.h,this.yaxis._length=D.h*(L.y[1]-L.y[0])},w.updateLayers=function(E){var L,D=E[this.id].layers,N=this.layerList;if(D.length!==N.length){for(L=0;L<N.length;L++)N[L].dispose();for(N=this.layerList=[],L=0;L<D.length;L++)N.push(m(this,L,D[L]))}else for(L=0;L<D.length;L++)N[L].update(D[L])},w.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},w.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},w.setOptions=function(E,L,D){for(var N in D)this.map[L](E,N,D[N])},w.getMapLayers=function(){return this.map.getStyle().layers},w.addLayer=function(E,L){var D=this.map;if("string"==typeof L){if(""===L)return void D.addLayer(E,L);for(var N=this.getMapLayers(),F=0;F<N.length;F++)if(L===N[F].id)return void D.addLayer(E,L);x.warn(["Trying to add layer with *below* value",L,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}D.addLayer(E)},w.project=function(E){return this.map.project(new y.LngLat(E[0],E[1]))},w.getView=function(){var E=this.map,L=E.getCenter(),D={lon:L.lng,lat:L.lat},N=E.getCanvas(),F=parseInt(N.style.width),I=parseInt(N.style.height);return{center:D,zoom:E.getZoom(),bearing:E.getBearing(),pitch:E.getPitch(),_derived:{coordinates:[E.unproject([0,0]).toArray(),E.unproject([F,0]).toArray(),E.unproject([F,I]).toArray(),E.unproject([0,I]).toArray()]}}},w.getViewEdits=function(E){for(var L=this.id,D=["center","zoom","bearing","pitch"],N={},F=0;F<D.length;F++){var I=D[F];N[L+"."+I]=E[I]}return N},w.getViewEditsWithDerived=function(E){var L=this.id,D=this.getViewEdits(E);return D[L+"._derived"]=E._derived,D},oe.exports=u},{"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../registry":638,"../cartesian/axes":554,"../cartesian/select":575,"./constants":611,"./layers":614,"mapbox-gl/dist/mapbox-gl-unminified":239}],618:[function(b,oe,se){"use strict";oe.exports=function(y){var x=y.editType;return{t:{valType:"number",dflt:0,editType:x},r:{valType:"number",dflt:0,editType:x},b:{valType:"number",dflt:0,editType:x},l:{valType:"number",dflt:0,editType:x},editType:x}}},{}],619:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("d3-time-format").timeFormatLocale,M=b("d3-format").formatLocale,_=b("fast-isnumeric"),e=b("../registry"),o=b("../plot_api/plot_schema"),a=b("../plot_api/plot_template"),l=b("../lib"),i=b("../components/color"),v=b("../constants/numerical").BADNUM,h=b("./cartesian/axis_ids"),s=b("./cartesian/handle_outline").clearSelect,d=b("./animation_attributes"),p=b("./frame_attributes"),f=b("../plots/get_data").getModuleCalcData,g=l.relinkPrivateKeys,m=l._,u=oe.exports={};l.extendFlat(u,e),u.attributes=b("./attributes"),u.attributes.type.values=u.allTypes,u.fontAttrs=b("./font_attributes"),u.layoutAttributes=b("./layout_attributes"),u.fontWeight="normal";var w=u.transformsRegistry,c=b("./command");u.executeAPICommand=c.executeAPICommand,u.computeAPICommandBindings=c.computeAPICommandBindings,u.manageCommandObserver=c.manageCommandObserver,u.hasSimpleAPICommandBindings=c.hasSimpleAPICommandBindings,u.redrawText=function(Y){return Y=l.getGraphDiv(Y),new Promise(function(ee){setTimeout(function(){Y._fullLayout&&(e.getComponentMethod("annotations","draw")(Y),e.getComponentMethod("legend","draw")(Y),e.getComponentMethod("colorbar","draw")(Y),ee(u.previousPromises(Y)))},300)})},u.resize=function(Y){var ee;Y=l.getGraphDiv(Y);var re=new Promise(function(X,K){Y&&!l.isHidden(Y)||K(new Error("Resize must be passed a displayed plot div element.")),Y._redrawTimer&&clearTimeout(Y._redrawTimer),Y._resolveResize&&(ee=Y._resolveResize),Y._resolveResize=X,Y._redrawTimer=setTimeout(function(){if(!Y.layout||Y.layout.width&&Y.layout.height||l.isHidden(Y))X(Y);else{delete Y.layout.width,delete Y.layout.height;var ie=Y.changed;Y.autoplay=!0,e.call("relayout",Y,{autosize:!0}).then(function(){Y.changed=ie,Y._resolveResize===X&&(delete Y._resolveResize,X(Y))})}},100)});return ee&&ee(re),re},u.previousPromises=function(Y){if((Y._promises||[]).length)return Promise.all(Y._promises).then(function(){Y._promises=[]})},u.addLinks=function(Y){if(Y._context.showLink||Y._context.showSources){var ee=Y._fullLayout,re=l.ensureSingle(ee._paper,"text","js-plot-link-container",function(W){W.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:i.defaultLine,"pointer-events":"all"}).each(function(){var ae=y.select(this);ae.append("tspan").classed("js-link-to-tool",!0),ae.append("tspan").classed("js-link-spacer",!0),ae.append("tspan").classed("js-sourcelinks",!0)})}),X=re.node(),K={y:ee._paper.attr("height")-9};document.body.contains(X)&&X.getComputedTextLength()>=ee.width-20?(K["text-anchor"]="start",K.x=5):(K["text-anchor"]="end",K.x=ee._paper.attr("width")-7),re.attr(K);var ie=re.select(".js-link-to-tool"),q=re.select(".js-link-spacer"),U=re.select(".js-sourcelinks");Y._context.showSources&&Y._context.showSources(Y),Y._context.showLink&&function(W,ae){ae.text("");var G=ae.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(W._context.linkText+" "+String.fromCharCode(187));if(W._context.sendData)G.on("click",function(){u.sendDataToCloud(W)});else{var te=window.location.pathname.split("/"),ne=window.location.search;G.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+te[2].split(".")[0]+"/"+te[1]+ne})}}(Y,ie),q.text(ie.text()&&U.text()?" - ":"")}},u.sendDataToCloud=function(Y){var ee=(window.PLOTLYENV||{}).BASE_URL||Y._context.plotlyServerURL;if(ee){Y.emit("plotly_beforeexport");var re=y.select(Y).append("div").attr("id","hiddenform").style("display","none"),X=re.append("form").attr({action:ee+"/external",method:"post",target:"_blank"});return X.append("input").attr({type:"text",name:"data"}).node().value=u.graphJson(Y,!1,"keepdata"),X.node().submit(),re.remove(),Y.emit("plotly_afterexport"),!1}};var A=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],k=["year","month","dayMonth","dayMonthYear"];function C(Y,ee){var re=Y._context.locale;re||(re="en-US");var X=!1,K={};function ie(te){for(var ne=!0,le=0;le<ee.length;le++){var ue=ee[le];K[ue]||(te[ue]?K[ue]=te[ue]:ne=!1)}ne&&(X=!0)}for(var q=0;q<2;q++){for(var U=Y._context.locales,W=0;W<2;W++){var ae=(U[re]||{}).format;if(ae&&(ie(ae),X))break;U=e.localeRegistry}var G=re.split("-")[0];if(X||G===re)break;re=G}return X||ie(e.localeRegistry.en.format),K}function E(Y,ee){var re={_fullLayout:ee},X="x"===Y._id.charAt(0),K=Y._mainAxis._anchorAxis,ie="",q="",U="";if(K&&(U=K._mainAxis._id,ie=X?Y._id+U:U+Y._id),!ie||!ee._plots[ie]){ie="";for(var W=Y._counterAxes,ae=0;ae<W.length;ae++){var G=W[ae],te=X?Y._id+G:G+Y._id;q||(q=te);var ne=h.getFromId(re,G);if(U&&ne.overlaying===U){ie=te;break}}}return ie||q}function L(Y){var ee=Y.transforms;if(Array.isArray(ee)&&ee.length)for(var re=0;re<ee.length;re++){var X=ee[re],K=X._module||w[X.type];if(K&&K.makesData)return!0}return!1}function D(Y,ee,re,X){for(var K=Y.transforms,ie=[Y],q=0;q<K.length;q++){var U=K[q],W=w[U.type];W&&W.transform&&(ie=W.transform(ie,{transform:U,fullTrace:Y,fullData:ee,layout:re,fullLayout:X,transformIndex:q}))}return ie}function N(Y){return"string"==typeof Y&&"px"===Y.substr(Y.length-2)&&parseFloat(Y)}function F(Y){var ee=Y.margin;if(!Y._size){var re=Y._size={l:Math.round(ee.l),r:Math.round(ee.r),t:Math.round(ee.t),b:Math.round(ee.b),p:Math.round(ee.pad)};re.w=Math.round(Y.width)-re.l-re.r,re.h=Math.round(Y.height)-re.t-re.b}Y._pushmargin||(Y._pushmargin={}),Y._pushmarginIds||(Y._pushmarginIds={})}u.supplyDefaults=function(Y,ee){var $e,et,re=ee&&ee.skipUpdateCalc,X=Y._fullLayout||{};if(X._skipDefaults)delete X._skipDefaults;else{var K,ie=Y._fullLayout={},q=Y.layout||{},U=Y._fullData||[],W=Y._fullData=[],ae=Y.data||[],G=Y.calcdata||[],te=Y._context||{};Y._transitionData||u.createTransitionData(Y),ie._dfltTitle={plot:m(Y,"Click to enter Plot title"),x:m(Y,"Click to enter X axis title"),y:m(Y,"Click to enter Y axis title"),colorbar:m(Y,"Click to enter Colorscale title"),annotation:m(Y,"new text")},ie._traceWord=m(Y,"trace");var ne=C(Y,A);if(ie._mapboxAccessToken=te.mapboxAccessToken,X._initialAutoSizeIsDone){var le=X.width,ue=X.height;u.supplyLayoutGlobalDefaults(q,ie,ne),q.width||(ie.width=le),q.height||(ie.height=ue),u.sanitizeMargins(ie)}else{u.supplyLayoutGlobalDefaults(q,ie,ne);var pe=!q.width||!q.height,de=ie.autosize;pe&&(de||te.autosizable)?u.plotAutoSize(Y,q,ie):pe&&u.sanitizeMargins(ie),!de&&pe&&(q.width=ie.width,q.height=ie.height)}ie._d3locale=(($e=ne).decimal=(et=ie.separators).charAt(0),$e.thousands=et.charAt(1),{numberFormat:function(nt){try{nt=M($e).format(l.adjustFormat(nt))}catch(ct){return l.warnBadFormat(nt),l.noFormat}return nt},timeFormat:x($e).utcFormat}),ie._extraFormat=C(Y,k),ie._initialAutoSizeIsDone=!0,ie._dataLength=ae.length,ie._modules=[],ie._visibleModules=[],ie._basePlotModules=[];var me=ie._subplots=function(){var $e,et,nt=e.collectableSubplotTypes,ct={};if(!nt){nt=[];var bt=e.subplotsRegistry;for(var kt in bt){var Bt=bt[kt].attr;if(Bt&&(nt.push(kt),Array.isArray(Bt)))for(et=0;et<Bt.length;et++)l.pushUnique(nt,Bt[et])}}for($e=0;$e<nt.length;$e++)ct[nt[$e]]=[];return ct}(),we=ie._splomAxes={x:{},y:{}},De=ie._splomSubplots={};ie._splomGridDflt={},ie._scatterStackOpts={},ie._firstScatter={},ie._alignmentOpts={},ie._colorAxes={},ie._requestRangeslider={},ie._traceUids=function($e,et){var nt,ct,bt=et.length,kt=[];for(nt=0;nt<$e.length;nt++){var Bt=$e[nt]._fullInput;Bt!==ct&&kt.push(Bt),ct=Bt}var Et=kt.length,ht=new Array(bt),at={};function Ft(tn,dn){ht[dn]=tn,at[tn]=1}function en(tn,dn){if(tn&&"string"==typeof tn&&!at[tn])return Ft(tn,dn),!0}for(nt=0;nt<bt;nt++){var Qt=et[nt].uid;"number"==typeof Qt&&(Qt=String(Qt)),en(Qt,nt)||nt<Et&&en(kt[nt].uid,nt)||Ft(l.randstr(at),nt)}return ht}(U,ae),ie._globalTransforms=(Y._context||{}).globalTransforms,u.supplyDataDefaults(ae,W,q,ie);var Le=Object.keys(we.x),Ie=Object.keys(we.y);if(Le.length>1&&Ie.length>1){for(e.getComponentMethod("grid","sizeDefaults")(q,ie),K=0;K<Le.length;K++)l.pushUnique(me.xaxis,Le[K]);for(K=0;K<Ie.length;K++)l.pushUnique(me.yaxis,Ie[K]);for(var je in De)l.pushUnique(me.cartesian,je)}if(ie._has=u._hasPlotType.bind(ie),U.length===W.length)for(K=0;K<W.length;K++)g(W[K],U[K]);u.supplyLayoutModuleDefaults(q,ie,W,Y._transitionData);var ye=ie._visibleModules,Me=[];for(K=0;K<ye.length;K++){var Oe=ye[K].crossTraceDefaults;Oe&&l.pushUnique(Me,Oe)}for(K=0;K<Me.length;K++)Me[K](W,ie);ie._hasOnlyLargeSploms=1===ie._basePlotModules.length&&"splom"===ie._basePlotModules[0].name&&Le.length>15&&Ie.length>15&&0===ie.shapes.length&&0===ie.images.length,u.linkSubplots(W,ie,U,X),u.cleanPlot(W,ie,U,X);var Pe=!(!X._has||!X._has("gl2d")),Re=!(!ie._has||!ie._has("gl2d")),Ue=!(!X._has||!X._has("cartesian"))||Pe,qe=!(!ie._has||!ie._has("cartesian"))||Re;Ue&&!qe?X._bgLayer.remove():qe&&!Ue&&(ie._shouldCreateBgLayer=!0),X._zoomlayer&&!Y._dragging&&s({_fullLayout:X}),function($e,et){var nt,ct=[];et.meta&&(nt=et._meta={meta:et.meta,layout:{meta:et.meta}});for(var bt=0;bt<$e.length;bt++){var kt=$e[bt];kt.meta?ct[kt.index]=kt._meta={meta:kt.meta}:et.meta&&(kt._meta={meta:et.meta}),et.meta&&(kt._meta.layout={meta:et.meta})}ct.length&&(nt||(nt=et._meta={}),nt.data=ct)}(W,ie),g(ie,X),e.getComponentMethod("colorscale","crossTraceDefaults")(W,ie),ie._preGUI||(ie._preGUI={}),ie._tracePreGUI||(ie._tracePreGUI={});var Xe,lt=ie._tracePreGUI,He={};for(Xe in lt)He[Xe]="old";for(K=0;K<W.length;K++)He[Xe=W[K]._fullInput.uid]||(lt[Xe]={}),He[Xe]="new";for(Xe in He)"old"===He[Xe]&&delete lt[Xe];F(ie),e.getComponentMethod("rangeslider","makeData")(ie),re||G.length!==W.length||u.supplyDefaultsUpdateCalc(G,W)}},u.supplyDefaultsUpdateCalc=function(Y,ee){for(var re=0;re<ee.length;re++){var X=ee[re],K=(Y[re]||[])[0];if(K&&K.trace){var ie=K.trace;if(ie._hasCalcTransform){var q,U,W,ae=ie._arrayAttrs;for(q=0;q<ae.length;q++)W=l.nestedProperty(ie,U=ae[q]).get().slice(),l.nestedProperty(X,U).set(W)}K.trace=X}}},u.createTransitionData=function(Y){Y._transitionData||(Y._transitionData={}),Y._transitionData._frames||(Y._transitionData._frames=[]),Y._transitionData._frameHash||(Y._transitionData._frameHash={}),Y._transitionData._counter||(Y._transitionData._counter=0),Y._transitionData._interruptCallbacks||(Y._transitionData._interruptCallbacks=[])},u._hasPlotType=function(Y){var ee,re=this._basePlotModules||[];for(ee=0;ee<re.length;ee++)if(re[ee].name===Y)return!0;var X=this._modules||[];for(ee=0;ee<X.length;ee++){var K=X[ee].name;if(K===Y)return!0;var ie=e.modules[K];if(ie&&ie.categories[Y])return!0}return!1},u.cleanPlot=function(Y,ee,re,X){var K,ie,q=X._basePlotModules||[];for(K=0;K<q.length;K++){var U=q[K];U.clean&&U.clean(Y,ee,re,X)}var W=X._has&&X._has("gl"),ae=ee._has&&ee._has("gl");W&&!ae&&void 0!==X._glcontainer&&(X._glcontainer.selectAll(".gl-canvas").remove(),X._glcontainer.selectAll(".no-webgl").remove(),X._glcanvas=null);var G=!!X._infolayer;e:for(K=0;K<re.length;K++){var te=re[K].uid;for(ie=0;ie<Y.length;ie++)if(te===Y[ie].uid)continue e;G&&X._infolayer.select(".cb"+te).remove()}},u.linkSubplots=function(Y,ee,re,X){var K,ie,q=X._plots||{},U=ee._plots={},W=ee._subplots,ae={_fullData:Y,_fullLayout:ee},G=W.cartesian.concat(W.gl2d||[]);for(K=0;K<G.length;K++){var te,ne=G[K],le=q[ne],ue=h.getFromId(ae,ne,"x"),pe=h.getFromId(ae,ne,"y");for(le?te=U[ne]=le:(te=U[ne]={}).id=ne,ue._counterAxes.push(pe._id),pe._counterAxes.push(ue._id),ue._subplotsWith.push(ne),pe._subplotsWith.push(ne),te.xaxis=ue,te.yaxis=pe,te._hasClipOnAxisFalse=!1,ie=0;ie<Y.length;ie++){var de=Y[ie];if(de.xaxis===te.xaxis._id&&de.yaxis===te.yaxis._id&&!1===de.cliponaxis){te._hasClipOnAxisFalse=!0;break}}}var _e,me=h.list(ae,null,!0);for(K=0;K<me.length;K++){var we=null;(_e=me[K]).overlaying&&(we=h.getFromId(ae,_e.overlaying))&&we.overlaying&&(_e.overlaying=!1,we=null),_e._mainAxis=we||_e,we&&(_e.domain=we.domain.slice()),_e._anchorAxis="free"===_e.anchor?null:h.getFromId(ae,_e.anchor)}for(K=0;K<me.length;K++)if((_e=me[K])._counterAxes.sort(h.idSort),_e._subplotsWith.sort(l.subplotSort),_e._mainSubplot=E(_e,ee),_e._counterAxes.length&&(_e.spikemode&&-1!==_e.spikemode.indexOf("across")||_e.automargin&&_e.mirror&&"free"!==_e.anchor||e.getComponentMethod("rangeslider","isVisible")(_e))){var De=1,Le=0;for(ie=0;ie<_e._counterAxes.length;ie++){var Ie=h.getFromId(ae,_e._counterAxes[ie]);De=Math.min(De,Ie.domain[0]),Le=Math.max(Le,Ie.domain[1])}De<Le&&(_e._counterDomainMin=De,_e._counterDomainMax=Le)}},u.clearExpandedTraceDefaultColors=function(Y){var ee,re,X;for(re=[],(ee=Y._module._colorAttrs)||(Y._module._colorAttrs=ee=[],o.crawl(Y._module.attributes,function(K,ie,q,U){re[U]=ie,re.length=U+1,"color"===K.valType&&void 0===K.dflt&&ee.push(re.join("."))})),X=0;X<ee.length;X++)l.nestedProperty(Y,"_input."+ee[X]).get()||l.nestedProperty(Y,ee[X]).set(null)},u.supplyDataDefaults=function(Y,ee,re,X){var K,ie,q,U=X._modules,W=X._visibleModules,ae=X._basePlotModules,G=0,te=0;function ne(je){ee.push(je);var ye=je._module;ye&&(l.pushUnique(U,ye),!0===je.visible&&l.pushUnique(W,ye),l.pushUnique(ae,je._module.basePlotModule),G++,!1!==je._input.visible&&te++)}X._transformModules=[];var le={},ue=[],de=a.traceTemplater((re.template||{}).data||{});for(K=0;K<Y.length;K++){if((ie=de.newTrace(q=Y[K])).uid=X._traceUids[K],u.supplyTraceDefaults(q,ie,te,X,K),ie.index=K,ie._input=q,ie._expandedIndex=G,ie.transforms&&ie.transforms.length)for(var _e=!1!==q.visible&&!1===ie.visible,me=D(ie,ee,re,X),we=0;we<me.length;we++){var De=me[we],Le={_template:ie._template,type:ie.type,uid:ie.uid+we};_e&&!1===De.visible&&delete De.visible,u.supplyTraceDefaults(De,Le,G,X,K),g(Le,De),Le.index=K,Le._input=q,Le._fullInput=ie,Le._expandedIndex=G,Le._expandedInput=De,ne(Le)}else ie._fullInput=ie,ie._expandedInput=ie,ne(ie);e.traceIs(ie,"carpetAxis")&&(le[ie.carpet]=ie),e.traceIs(ie,"carpetDependent")&&ue.push(K)}for(K=0;K<ue.length;K++)if((ie=ee[ue[K]]).visible){var Ie=le[ie.carpet];ie._carpet=Ie,Ie&&Ie.visible?(ie.xaxis=Ie.xaxis,ie.yaxis=Ie.yaxis):ie.visible=!1}},u.supplyAnimationDefaults=function(Y){var ee;Y=Y||{};var re={};function X(K,ie){return l.coerce(Y||{},re,d,K,ie)}if(X("mode"),X("direction"),X("fromcurrent"),Array.isArray(Y.frame))for(re.frame=[],ee=0;ee<Y.frame.length;ee++)re.frame[ee]=u.supplyAnimationFrameDefaults(Y.frame[ee]||{});else re.frame=u.supplyAnimationFrameDefaults(Y.frame||{});if(Array.isArray(Y.transition))for(re.transition=[],ee=0;ee<Y.transition.length;ee++)re.transition[ee]=u.supplyAnimationTransitionDefaults(Y.transition[ee]||{});else re.transition=u.supplyAnimationTransitionDefaults(Y.transition||{});return re},u.supplyAnimationFrameDefaults=function(Y){var ee={};function re(X,K){return l.coerce(Y||{},ee,d.frame,X,K)}return re("duration"),re("redraw"),ee},u.supplyAnimationTransitionDefaults=function(Y){var ee={};function re(X,K){return l.coerce(Y||{},ee,d.transition,X,K)}return re("duration"),re("easing"),ee},u.supplyFrameDefaults=function(Y){var ee={};function re(X,K){return l.coerce(Y,ee,p,X,K)}return re("group"),re("name"),re("traces"),re("baseframe"),re("data"),re("layout"),ee},u.supplyTraceDefaults=function(Y,ee,re,X,K){var ie,q=X.colorway||i.defaults,U=q[re%q.length];function W(me,we){return l.coerce(Y,ee,u.attributes,me,we)}var ae=W("visible");W("type"),W("name",X._traceWord+" "+K),W("uirevision",X.uirevision);var G=u.getModule(ee);if(ee._module=G,G){var te=G.basePlotModule,ne=te.attr,le=te.attributes;if(ne&&le){var ue=X._subplots,pe="";if(ae||"gl2d"!==te.name){if(Array.isArray(ne))for(ie=0;ie<ne.length;ie++){var de=ne[ie],_e=l.coerce(Y,ee,le,de);ue[de]&&l.pushUnique(ue[de],_e),pe+=_e}else pe=l.coerce(Y,ee,le,ne);ue[te.name]&&l.pushUnique(ue[te.name],pe)}}}return ae&&(W("customdata"),W("ids"),W("meta"),e.traceIs(ee,"showLegend")?(l.coerce(Y,ee,G.attributes.showlegend?G.attributes:u.attributes,"showlegend"),W("legendgroup"),W("legendgrouptitle.text"),W("legendrank"),ee._dfltShowLegend=!0):ee._dfltShowLegend=!1,G&&G.supplyDefaults(Y,ee,U,X),e.traceIs(ee,"noOpacity")||W("opacity"),e.traceIs(ee,"notLegendIsolatable")&&(ee.visible=!!ee.visible),e.traceIs(ee,"noHover")||(ee.hovertemplate||l.coerceHoverinfo(Y,ee,X),"parcats"!==ee.type&&e.getComponentMethod("fx","supplyDefaults")(Y,ee,U,X)),G&&G.selectPoints&&W("selectedpoints"),u.supplyTransformDefaults(Y,ee,X)),ee},u.hasMakesDataTransform=L,u.supplyTransformDefaults=function(Y,ee,re){if(ee._length||L(Y)){var X=re._globalTransforms||[],K=re._transformModules||[];if(Array.isArray(Y.transforms)||0!==X.length)for(var q=X.concat(Y.transforms||[]),U=ee.transforms=[],W=0;W<q.length;W++){var ae,G=q[W],te=G.type,ne=w[te],le=!(G._module&&G._module===ne),ue=ne&&"function"==typeof ne.transform;ne||l.warn("Unrecognized transform type "+te+"."),ne&&ne.supplyDefaults&&(le||ue)?((ae=ne.supplyDefaults(G,ee,re,Y)).type=te,ae._module=ne,l.pushUnique(K,ne)):ae=l.extendFlat({},G),U.push(ae)}}},u.supplyLayoutGlobalDefaults=function(Y,ee,re){function X(W,ae){return l.coerce(Y,ee,u.layoutAttributes,W,ae)}var K=Y.template;l.isPlainObject(K)&&(ee.template=K,ee._template=K.layout,ee._dataTemplate=K.data),X("autotypenumbers");var ie=l.coerceFont(X,"font");l.coerceFont(X,"title.font",l.extendFlat({},ie,{size:Math.round(1.4*ie.size)})),X("title.text",ee._dfltTitle.plot),X("title.xref"),X("title.yref"),X("title.x"),X("title.y"),X("title.xanchor"),X("title.yanchor"),X("title.pad.t"),X("title.pad.r"),X("title.pad.b"),X("title.pad.l"),X("uniformtext.mode")&&X("uniformtext.minsize"),X("autosize",!(Y.width&&Y.height)),X("width"),X("height"),X("margin.l"),X("margin.r"),X("margin.t"),X("margin.b"),X("margin.pad"),X("margin.autoexpand"),Y.width&&Y.height&&u.sanitizeMargins(ee),e.getComponentMethod("grid","sizeDefaults")(Y,ee),X("paper_bgcolor"),X("separators",re.decimal+re.thousands),X("hidesources"),X("colorway"),X("datarevision");var U=X("uirevision");X("editrevision",U),X("selectionrevision",U),e.getComponentMethod("modebar","supplyLayoutDefaults")(Y,ee),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(Y,ee,X),X("meta"),l.isPlainObject(Y.transition)&&(X("transition.duration"),X("transition.easing"),X("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(Y,ee,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(Y,ee,X)},u.plotAutoSize=function(Y,ee,re){var X,K,ie=Y._context||{},q=ie.frameMargins,U=l.isPlotDiv(Y);if(U&&Y.emit("plotly_autosize"),ie.fillFrame)X=window.innerWidth,K=window.innerHeight,document.body.style.overflow="hidden";else{var W=U?window.getComputedStyle(Y):{};if(X=N(W.width)||N(W.maxWidth)||re.width,K=N(W.height)||N(W.maxHeight)||re.height,_(q)&&q>0){var ae=1-2*q;X=Math.round(ae*X),K=Math.round(ae*K)}}var G=u.layoutAttributes.width.min,te=u.layoutAttributes.height.min;X<G&&(X=G),K<te&&(K=te);var ne=!ee.width&&Math.abs(re.width-X)>1,le=!ee.height&&Math.abs(re.height-K)>1;(le||ne)&&(ne&&(re.width=X),le&&(re.height=K)),Y._initialAutoSize||(Y._initialAutoSize={width:X,height:K}),u.sanitizeMargins(re)},u.supplyLayoutModuleDefaults=function(Y,ee,re,X){var K,ie,q,U=e.componentsRegistry,W=ee._basePlotModules,ae=e.subplotsRegistry.cartesian;for(K in U)(q=U[K]).includeBasePlot&&q.includeBasePlot(Y,ee);for(var G in W.length||W.push(ae),ee._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(Y,ee),ae.finalizeSubplots(Y,ee)),ee._subplots)ee._subplots[G].sort(l.subplotSort);for(ie=0;ie<W.length;ie++)(q=W[ie]).supplyLayoutDefaults&&q.supplyLayoutDefaults(Y,ee,re);var te=ee._modules;for(ie=0;ie<te.length;ie++)(q=te[ie]).supplyLayoutDefaults&&q.supplyLayoutDefaults(Y,ee,re);var ne=ee._transformModules;for(ie=0;ie<ne.length;ie++)(q=ne[ie]).supplyLayoutDefaults&&q.supplyLayoutDefaults(Y,ee,re,X);for(K in U)(q=U[K]).supplyLayoutDefaults&&q.supplyLayoutDefaults(Y,ee,re)},u.purge=function(Y){var ee=Y._fullLayout||{};void 0!==ee._glcontainer&&(ee._glcontainer.selectAll(".gl-canvas").remove(),ee._glcontainer.remove(),ee._glcanvas=null),ee._modeBar&&ee._modeBar.destroy(),Y._transitionData&&(Y._transitionData._interruptCallbacks&&(Y._transitionData._interruptCallbacks.length=0),Y._transitionData._animationRaf&&window.cancelAnimationFrame(Y._transitionData._animationRaf)),l.clearThrottle(),l.clearResponsive(Y),delete Y.data,delete Y.layout,delete Y._fullData,delete Y._fullLayout,delete Y.calcdata,delete Y.empty,delete Y.fid,delete Y.undoqueue,delete Y.undonum,delete Y.autoplay,delete Y.changed,delete Y._promises,delete Y._redrawTimer,delete Y._hmlumcount,delete Y._hmpixcount,delete Y._transitionData,delete Y._transitioning,delete Y._initialAutoSize,delete Y._transitioningWithDuration,delete Y._dragging,delete Y._dragged,delete Y._dragdata,delete Y._hoverdata,delete Y._snapshotInProgress,delete Y._editing,delete Y._mouseDownTime,delete Y._legendMouseDownTime,Y.removeAllListeners&&Y.removeAllListeners()},u.style=function(Y){var ee,re=Y._fullLayout._visibleModules,X=[];for(ee=0;ee<re.length;ee++){var K=re[ee];K.style&&l.pushUnique(X,K.style)}for(ee=0;ee<X.length;ee++)X[ee](Y)},u.sanitizeMargins=function(Y){if(Y&&Y.margin){var ee,re=Y.width,X=Y.height,K=Y.margin,q=X-(K.t+K.b);re-(K.l+K.r)<0&&(ee=(re-1)/(K.l+K.r),K.l=Math.floor(ee*K.l),K.r=Math.floor(ee*K.r)),q<0&&(ee=(X-1)/(K.t+K.b),K.t=Math.floor(ee*K.t),K.b=Math.floor(ee*K.b))}},u.clearAutoMarginIds=function(Y){Y._fullLayout._pushmarginIds={}},u.allowAutoMargin=function(Y,ee){Y._fullLayout._pushmarginIds[ee]=1},u.autoMargin=function(Y,ee,re){var X=Y._fullLayout,K=X.width,ie=X.height,q=X.margin,U=l.constrain(K-q.l-q.r,2,64),W=l.constrain(ie-q.t-q.b,2,64),ae=Math.max(0,K-U),G=Math.max(0,ie-W),te=X._pushmargin,ne=X._pushmarginIds;if(!1!==q.autoexpand){if(re){var le=re.pad;if(void 0===le&&(le=Math.min(12,q.l,q.r,q.t,q.b)),ae){var ue=(re.l+re.r)/ae;ue>1&&(re.l/=ue,re.r/=ue)}if(G){var pe=(re.t+re.b)/G;pe>1&&(re.t/=pe,re.b/=pe)}te[ee]={l:{val:void 0!==re.xl?re.xl:re.x,size:re.l+le},r:{val:void 0!==re.xr?re.xr:re.x,size:re.r+le},b:{val:void 0!==re.yb?re.yb:re.y,size:re.b+le},t:{val:void 0!==re.yt?re.yt:re.y,size:re.t+le}},ne[ee]=1}else delete te[ee],delete ne[ee];if(!X._replotting)return u.doAutoMargin(Y)}},u.doAutoMargin=function(Y){var ee=Y._fullLayout,re=ee.width,X=ee.height;ee._size||(ee._size={}),F(ee);var K=ee._size,ie=ee.margin,q=l.extendFlat({},K),U=ie.l,W=ie.r,ae=ie.t,G=ie.b,te=ee._pushmargin,ne=ee._pushmarginIds;if(!1!==ee.margin.autoexpand){for(var le in te)ne[le]||delete te[le];for(var ue in te.base={l:{val:0,size:U},r:{val:1,size:W},t:{val:1,size:ae},b:{val:0,size:G}},te){var pe=te[ue].l||{},de=te[ue].b||{},_e=pe.val,me=pe.size,we=de.val,De=de.size;for(var Le in te){if(_(me)&&te[Le].r){var Ie=te[Le].r.val,je=te[Le].r.size;if(Ie>_e){var ye=(me*Ie+(je-re)*_e)/(Ie-_e),Me=(je*(1-_e)+(me-re)*(1-Ie))/(Ie-_e);ye+Me>U+W&&(U=ye,W=Me)}}if(_(De)&&te[Le].t){var Oe=te[Le].t.val,Pe=te[Le].t.size;if(Oe>we){var Re=(De*Oe+(Pe-X)*we)/(Oe-we),Ue=(Pe*(1-we)+(De-X)*(1-Oe))/(Oe-we);Re+Ue>G+ae&&(G=Re,ae=Ue)}}}}}var bt,qe=l.constrain(re-ie.l-ie.r,2,64),Xe=l.constrain(X-ie.t-ie.b,2,64),lt=Math.max(0,re-qe),He=Math.max(0,X-Xe);if(lt){var $e=(U+W)/lt;$e>1&&(U/=$e,W/=$e)}if(He){var et=(G+ae)/He;et>1&&(G/=et,ae/=et)}if(K.l=Math.round(U),K.r=Math.round(W),K.t=Math.round(ae),K.b=Math.round(G),K.p=Math.round(ie.pad),K.w=Math.round(re)-K.l-K.r,K.h=Math.round(X)-K.t-K.b,!ee._replotting&&u.didMarginChange(q,K)){"_redrawFromAutoMarginCount"in ee?ee._redrawFromAutoMarginCount++:ee._redrawFromAutoMarginCount=1;var nt=3*(1+Object.keys(ne).length);if(ee._redrawFromAutoMarginCount<nt)return e.call("_doPlot",Y);ee._size=q,l.warn("Too many auto-margin redraws.")}bt=h.list(Y,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(kt){for(var Bt=0;Bt<bt.length;Bt++){var Et=bt[Bt][kt];Et&&Et()}})};var I=["l","r","t","b","p","w","h"];function P(Y,ee,re){var X=!1,ie=l.syncOrAsync([u.previousPromises,function(){if(Y._transitionData)return Y._transitioning=!1,function(q){var U=Promise.resolve();if(!q)return U;for(;q.length;)U=U.then(q.shift());return U}(Y._transitionData._interruptCallbacks)},re.prepareFn,u.rehover,function(){return Y.emit("plotly_transitioning",[]),new Promise(function(q){Y._transitioning=!0,ee.duration>0&&(Y._transitioningWithDuration=!0),Y._transitionData._interruptCallbacks.push(function(){X=!0}),re.redraw&&Y._transitionData._interruptCallbacks.push(function(){return e.call("redraw",Y)}),Y._transitionData._interruptCallbacks.push(function(){Y.emit("plotly_transitioninterrupted",[])});var U=0,W=0;function ae(){return U++,function(){var G;W++,X||W!==U||(G=q,!Y._transitionData||(function(te){if(te)for(;te.length;)te.shift()}(Y._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(re.redraw)return e.call("redraw",Y)}).then(function(){Y._transitioning=!1,Y._transitioningWithDuration=!1,Y.emit("plotly_transitioned",[])}).then(G)))}}re.runFn(ae),setTimeout(ae())})}],Y);return ie&&ie.then||(ie=Promise.resolve()),ie.then(function(){return Y})}u.didMarginChange=function(Y,ee){for(var re=0;re<I.length;re++){var X=I[re],K=Y[X],ie=ee[X];if(!_(K)||Math.abs(ie-K)>1)return!0}return!1},u.graphJson=function(Y,ee,re,X,K,ie){(K&&ee&&!Y._fullData||K&&!ee&&!Y._fullLayout)&&u.supplyDefaults(Y);var U=K?Y._fullLayout:Y.layout,W=(Y._transitionData||{})._frames;function ae(ne,le){if("function"==typeof ne)return le?"_function_":null;if(l.isPlainObject(ne)){var ue,pe={};return Object.keys(ne).sort().forEach(function(de){if(-1===["_","["].indexOf(de.charAt(0)))if("function"!=typeof ne[de]){if("keepdata"===re){if("src"===de.substr(de.length-3))return}else if("keepstream"===re){if("string"==typeof(ue=ne[de+"src"])&&ue.indexOf(":")>0&&!l.isPlainObject(ne.stream))return}else if("keepall"!==re&&"string"==typeof(ue=ne[de+"src"])&&ue.indexOf(":")>0)return;pe[de]=ae(ne[de],le)}else le&&(pe[de]="_function")}),pe}return Array.isArray(ne)?ne.map(function(de){return ae(de,le)}):l.isTypedArray(ne)?l.simpleMap(ne,l.identity):l.isJSDate(ne)?l.ms2DateTimeLocal(+ne):ne}var G={data:((K?Y._fullData:Y.data)||[]).map(function(ne){var le=ae(ne);return ee&&delete le.fit,le})};if(!ee&&(G.layout=ae(U),K)){var te=U._size;G.layout.computed={margin:{b:te.b,l:te.l,r:te.r,t:te.t}}}return W&&(G.frames=ae(W)),ie&&(G.config=ae(Y._context,!0)),"object"===X?G:JSON.stringify(G)},u.modifyFrames=function(Y,ee){var re,X,K,ie=Y._transitionData._frames,q=Y._transitionData._frameHash;for(re=0;re<ee.length;re++)switch((X=ee[re]).type){case"replace":var U=(ie[X.index]||{}).name,W=(K=X.value).name;ie[X.index]=q[W]=K,W!==U&&(delete q[U],q[W]=K);break;case"insert":q[(K=X.value).name]=K,ie.splice(X.index,0,K);break;case"delete":delete q[(K=ie[X.index]).name],ie.splice(X.index,1)}return Promise.resolve()},u.computeFrame=function(Y,ee){var re,X,K,ie,q=Y._transitionData._frameHash;if(!ee)throw new Error("computeFrame must be given a string frame name");var U=q[ee.toString()];if(!U)return!1;for(var W=[U],ae=[U.name];U.baseframe&&(U=q[U.baseframe.toString()])&&-1===ae.indexOf(U.name);)W.push(U),ae.push(U.name);for(var G={};U=W.pop();)if(U.layout&&(G.layout=u.extendLayout(G.layout,U.layout)),U.data){if(G.data||(G.data=[]),!(X=U.traces))for(X=[],re=0;re<U.data.length;re++)X[re]=re;for(G.traces||(G.traces=[]),re=0;re<U.data.length;re++)null!=(K=X[re])&&(-1===(ie=G.traces.indexOf(K))&&(G.traces[ie=G.data.length]=K),G.data[ie]=u.extendTrace(G.data[ie],U.data[re]))}return G},u.recomputeFrameHash=function(Y){for(var ee=Y._transitionData._frameHash={},re=Y._transitionData._frames,X=0;X<re.length;X++){var K=re[X];K&&K.name&&(ee[K.name]=K)}},u.extendObjectWithContainers=function(Y,ee,re){var X,K,ie,q,U,W,ae,G=l.extendDeepNoArrays({},ee||{}),te=l.expandObjectPaths(G),ne={};if(re&&re.length)for(ie=0;ie<re.length;ie++)void 0===(K=(X=l.nestedProperty(te,re[ie])).get())?l.nestedProperty(ne,re[ie]).set(null):(X.set(null),l.nestedProperty(ne,re[ie]).set(K));if(Y=l.extendDeepNoArrays(Y||{},te),re&&re.length)for(ie=0;ie<re.length;ie++)if(W=l.nestedProperty(ne,re[ie]).get()){for(ae=(U=l.nestedProperty(Y,re[ie])).get(),Array.isArray(ae)||U.set(ae=[]),q=0;q<W.length;q++){var le=W[q];ae[q]=null===le?null:u.extendObjectWithContainers(ae[q],le)}U.set(ae)}return Y},u.dataArrayContainers=["transforms","dimensions"],u.layoutArrayContainers=e.layoutArrayContainers,u.extendTrace=function(Y,ee){return u.extendObjectWithContainers(Y,ee,u.dataArrayContainers)},u.extendLayout=function(Y,ee){return u.extendObjectWithContainers(Y,ee,u.layoutArrayContainers)},u.transition=function(Y,ee,re,X,K,ie){var q={redraw:K.redraw},U={},W=[];return q.prepareFn=function(){for(var ae=Array.isArray(ee)?ee.length:0,G=X.slice(0,ae),te=0;te<G.length;te++){var ne=G[te],le=Y._fullData[ne]._module;if(le){if(le.animatable){var ue=le.basePlotModule.name;U[ue]||(U[ue]=[]),U[ue].push(ne)}Y.data[G[te]]=u.extendTrace(Y.data[G[te]],ee[te])}}var pe=l.expandObjectPaths(l.extendDeepNoArrays({},re)),de=/^[xy]axis[0-9]*$/;for(var _e in pe)de.test(_e)&&delete pe[_e].range;u.extendLayout(Y.layout,pe),delete Y.calcdata,u.supplyDefaults(Y),u.doCalcdata(Y);var me=l.expandObjectPaths(re);if(me){var we=Y._fullLayout._plots;for(var De in we){var Le=we[De],Ie=Le.xaxis,je=Le.yaxis,ye=Ie.range.slice(),Me=je.range.slice(),Oe=null,Pe=null,Re=null,Ue=null;Array.isArray(me[Ie._name+".range"])?Oe=me[Ie._name+".range"].slice():Array.isArray((me[Ie._name]||{}).range)&&(Oe=me[Ie._name].range.slice()),Array.isArray(me[je._name+".range"])?Pe=me[je._name+".range"].slice():Array.isArray((me[je._name]||{}).range)&&(Pe=me[je._name].range.slice()),ye&&Oe&&(Ie.r2l(ye[0])!==Ie.r2l(Oe[0])||Ie.r2l(ye[1])!==Ie.r2l(Oe[1]))&&(Re={xr0:ye,xr1:Oe}),Me&&Pe&&(je.r2l(Me[0])!==je.r2l(Pe[0])||je.r2l(Me[1])!==je.r2l(Pe[1]))&&(Ue={yr0:Me,yr1:Pe}),(Re||Ue)&&W.push(l.extendFlat({plotinfo:Le},Re,Ue))}}return Promise.resolve()},q.runFn=function(ae){var G,te,ne=Y._fullLayout._basePlotModules,le=W.length;if(re)for(te=0;te<ne.length;te++)ne[te].transitionAxes&&ne[te].transitionAxes(Y,W,ie,ae);for(var ue in le?((G=l.extendFlat({},ie)).duration=0,delete U.cartesian):G=ie,U){var pe=U[ue];Y._fullData[pe[0]]._module.basePlotModule.plot(Y,pe,G,ae)}},P(Y,ie,q)},u.transitionFromReact=function(Y,ee,re,X){var K=Y._fullLayout,ie=K.transition,q={},U=[];return q.prepareFn=function(){var W=K._plots;for(var ae in q.redraw=!1,"some"===ee.anim&&(q.redraw=!0),"some"===re.anim&&(q.redraw=!0),W){var G=W[ae],te=G.xaxis,ne=G.yaxis,le=X[te._name].range.slice(),ue=X[ne._name].range.slice(),pe=te.range.slice(),de=ne.range.slice();te.setScale(),ne.setScale();var _e=null,me=null;te.r2l(le[0])===te.r2l(pe[0])&&te.r2l(le[1])===te.r2l(pe[1])||(_e={xr0:le,xr1:pe}),ne.r2l(ue[0])===ne.r2l(de[0])&&ne.r2l(ue[1])===ne.r2l(de[1])||(me={yr0:ue,yr1:de}),(_e||me)&&U.push(l.extendFlat({plotinfo:G},_e,me))}return Promise.resolve()},q.runFn=function(W){for(var ae,G,te,ne=Y._fullData,le=Y._fullLayout._basePlotModules,ue=[],pe=0;pe<ne.length;pe++)ue.push(pe);function de(){if(Y._fullLayout)for(var me=0;me<le.length;me++)le[me].transitionAxes&&le[me].transitionAxes(Y,U,ae,W)}function _e(){if(Y._fullLayout)for(var me=0;me<le.length;me++)le[me].plot(Y,te,G,W)}U.length&&ee.anim?"traces first"===ie.ordering?(ae=l.extendFlat({},ie,{duration:0}),te=ue,G=ie,setTimeout(de,ie.duration),_e()):(ae=ie,te=null,G=l.extendFlat({},ie,{duration:0}),setTimeout(_e,ae.duration),de()):U.length?(ae=ie,de()):ee.anim&&(te=ue,G=ie,_e())},P(Y,ie,q)},u.doCalcdata=function(Y,ee){var re,X,K,ie,q=h.list(Y),U=Y._fullData,W=Y._fullLayout,ae=new Array(U.length),G=(Y.calcdata||[]).slice();for(Y.calcdata=ae,W._numBoxes=0,W._numViolins=0,W._violinScaleGroupStats={},Y._hmpixcount=0,Y._hmlumcount=0,W._piecolormap={},W._sunburstcolormap={},W._treemapcolormap={},W._iciclecolormap={},W._funnelareacolormap={},K=0;K<U.length;K++)Array.isArray(ee)&&-1===ee.indexOf(K)&&(ae[K]=G[K]);for(K=0;K<U.length;K++)(re=U[K])._arrayAttrs=o.findArrayAttributes(re),re._extremes={};var te=W._subplots.polar||[];for(K=0;K<te.length;K++)q.push(W[te[K]].radialaxis,W[te[K]].angularaxis);for(var ne in W._colorAxes){var le=W[ne];!1!==le.cauto&&(delete le.cmin,delete le.cmax)}var ue=!1;function pe(me){if(X=(re=U[me])._module,!0===re.visible&&re.transforms){if(X&&X.calc){var we=X.calc(Y,re);we[0]&&we[0].t&&we[0].t._scene&&delete we[0].t._scene.dirty}for(ie=0;ie<re.transforms.length;ie++){var De=re.transforms[ie];(X=w[De.type])&&X.calcTransform&&(re._hasCalcTransform=!0,ue=!0,X.calcTransform(Y,re,De))}}}function de(me,we){if(!!(X=(re=U[me])._module).isContainer===we){var De=[];if(!0===re.visible&&0!==re._length){delete re._indexToPoints;var Le=re.transforms||[];for(ie=Le.length-1;ie>=0;ie--)if(Le[ie].enabled){re._indexToPoints=Le[ie]._indexToPoints;break}X&&X.calc&&(De=X.calc(Y,re))}Array.isArray(De)&&De[0]||(De=[{x:v,y:v}]),De[0].t||(De[0].t={}),De[0].trace=re,ae[me]=De}}for(V(q,U,W),K=0;K<U.length;K++)de(K,!0);for(K=0;K<U.length;K++)pe(K);for(ue&&V(q,U,W),K=0;K<U.length;K++)de(K,!0);for(K=0;K<U.length;K++)de(K,!1);Z(Y);var _e=function(me,we){var De,Le,Ie,je,ye,Me=[];function Oe(sn,ke,Se){var Ce=ke._id.charAt(0);if("histogram2dcontour"===sn){var Ve=ke._counterAxes[0],Ge=h.getFromId(we,Ve),Qe="x"===Ce||"x"===Ve&&"category"===Ge.type,ot="y"===Ce||"y"===Ve&&"category"===Ge.type;return function(it,mt){return 0===it||0===mt||Qe&&it===Se[mt].length-1||ot&&mt===Se.length-1?-1:("y"===Ce?mt:it)-1}}return function(it,mt){return"y"===Ce?mt:it}}var Pe={min:function(sn){return l.aggNums(Math.min,null,sn)},max:function(sn){return l.aggNums(Math.max,null,sn)},sum:function(sn){return l.aggNums(function(ke,Se){return ke+Se},null,sn)},total:function(sn){return l.aggNums(function(ke,Se){return ke+Se},null,sn)},mean:function(sn){return l.mean(sn)},median:function(sn){return l.median(sn)}};for(De=0;De<me.length;De++){var Re=me[De];if("category"===Re.type){var Ue=Re.categoryorder.match(j);if(Ue){var qe=Ue[1],Xe=Ue[2],lt=Re._id.charAt(0),He="x"===lt,$e=[];for(Le=0;Le<Re._categories.length;Le++)$e.push([Re._categories[Le],[]]);for(Le=0;Le<Re._traceIndices.length;Le++){var et=Re._traceIndices[Le],nt=we._fullData[et];if(!0===nt.visible){var ct=nt.type;e.traceIs(nt,"histogram")&&(delete nt._xautoBinFinished,delete nt._yautoBinFinished);var bt="splom"===ct,kt="scattergl"===ct,Bt=we.calcdata[et];for(Ie=0;Ie<Bt.length;Ie++){var Et,ht,at=Bt[Ie];if(bt){var Ft=nt._axesDim[Re._id];if(!He){var en=nt._diag[Ft][0];en&&(Re=we._fullLayout[h.id2name(en)])}var Qt=at.trace.dimensions[Ft].values;for(je=0;je<Qt.length;je++)for(Et=Re._categoriesMap[Qt[je]],ye=0;ye<at.trace.dimensions.length;ye++)ye!==Ft&&$e[Et][1].push(at.trace.dimensions[ye].values[je])}else if(kt){for(je=0;je<at.t.x.length;je++)He?(Et=at.t.x[je],ht=at.t.y[je]):(Et=at.t.y[je],ht=at.t.x[je]),$e[Et][1].push(ht);at.t&&at.t._scene&&delete at.t._scene.dirty}else if(at.hasOwnProperty("z")){var dn=Oe(nt.type,Re,ht=at.z);for(je=0;je<ht.length;je++)for(ye=0;ye<ht[je].length;ye++)(Et=dn(ye,je))+1&&$e[Et][1].push(ht[je][ye])}else for(void 0===(Et=at.p)&&(Et=at[lt]),void 0===(ht=at.s)&&(ht=at.v),void 0===ht&&(ht=He?at.y:at.x),Array.isArray(ht)||(ht=void 0===ht?[]:[ht]),je=0;je<ht.length;je++)$e[Et][1].push(ht[je])}}}Re._categoriesValue=$e;var Mn=[];for(Le=0;Le<$e.length;Le++)Mn.push([$e[Le][0],Pe[qe]($e[Le][1])]);Mn.sort(function(sn,ke){return sn[1]-ke[1]}),Re._categoriesAggregatedValue=Mn,Re._initialCategories=Mn.map(function(sn){return sn[0]}),"descending"===Xe&&Re._initialCategories.reverse(),Me=Me.concat(Re.sortByInitialCategories())}}}return Me}(q,Y);if(_e.length){for(W._numBoxes=0,W._numViolins=0,K=0;K<_e.length;K++)de(_e[K],!0);for(K=0;K<_e.length;K++)de(_e[K],!1);Z(Y)}e.getComponentMethod("fx","calc")(Y),e.getComponentMethod("errorbars","calc")(Y)};var j=/(total|sum|min|max|mean|median) (ascending|descending)/;function V(Y,ee,re){var X={};function K(W){W.clearCalc(),"multicategory"===W.type&&W.setupMultiCategory(ee),X[W._id]=1}l.simpleMap(Y,K);for(var ie=re._axisMatchGroups||[],q=0;q<ie.length;q++)for(var U in ie[q])X[U]||K(re[h.id2name(U)])}function Z(Y){var ee,re,X,K=Y._fullLayout,ie=K._visibleModules,q={};for(re=0;re<ie.length;re++){var U=ie[re],W=U.crossTraceCalc;if(W){var ae=U.basePlotModule.name;q[ae]?l.pushUnique(q[ae],W):q[ae]=[W]}}for(X in q){var G=q[X],te=K._subplots[X];if(Array.isArray(te))for(ee=0;ee<te.length;ee++){var ne=te[ee],le="cartesian"===X?K._plots[ne]:K[ne];for(re=0;re<G.length;re++)G[re](Y,le,ne)}else for(re=0;re<G.length;re++)G[re](Y)}}u.rehover=function(Y){Y._fullLayout._rehover&&Y._fullLayout._rehover()},u.redrag=function(Y){Y._fullLayout._redrag&&Y._fullLayout._redrag()},u.generalUpdatePerTraceModule=function(Y,ee,re,X){var K,ie=ee.traceHash,q={};for(K=0;K<re.length;K++){var U=re[K],W=U[0].trace;W.visible&&(q[W.type]=q[W.type]||[],q[W.type].push(U))}for(var ae in ie)if(!q[ae]){var G=ie[ae][0];G[0].trace.visible=!1,q[ae]=[G]}for(var te in q){var ne=q[te];ne[0][0].trace._module.plot(Y,ee,l.filterVisible(ne),X)}ee.traceHash=q},u.plotBasePlot=function(Y,ee,re,X,K){var ie=e.getModule(Y),q=f(ee.calcdata,ie)[0];ie.plot(ee,q,X,K)},u.cleanBasePlot=function(Y,ee,re,X,K){var ie=K._has&&K._has(Y),q=re._has&&re._has(Y);ie&&!q&&K["_"+Y+"layer"].selectAll("g.trace").remove()}},{"../components/color":366,"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plot_api/plot_template":543,"../plots/get_data":593,"../registry":638,"./animation_attributes":548,"./attributes":550,"./cartesian/axis_ids":558,"./cartesian/handle_outline":565,"./command":583,"./font_attributes":585,"./frame_attributes":586,"./layout_attributes":610,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],620:[function(b,oe,se){"use strict";oe.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],621:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../lib/polygon").tester,M=y.findIndexOfMin,_=y.isAngleInsideSector,e=y.angleDelta,o=y.angleDist;function a(h,s,d,p){var f,g,m=p[0],u=p[1],w=i(Math.sin(s)-Math.sin(h)),c=i(Math.cos(s)-Math.cos(h)),A=Math.tan(d),k=i(1/A),C=w/c,E=u-C*m;return k?w&&c?g=A*(f=E/(A-C)):c?(f=u*k,g=u):(f=m,g=m*A):w&&c?(f=0,g=E):c?(f=0,g=u):f=g=NaN,[f,g]}function l(h,s,d,p){return y.isFullCircle([s,d])?function(f,g){var m,u=g.length,w=new Array(u+1);for(m=0;m<u;m++){var c=g[m];w[m]=[f*Math.cos(c),f*Math.sin(c)]}return w[m]=w[0].slice(),w}(h,p):function(f,g,m,u){var w,c,A=u.length,k=[];function C(V){return[f*Math.cos(V),f*Math.sin(V)]}function E(V,Z,Y){return a(V,Z,Y,C(V))}function L(V){return y.mod(V,A)}function D(V){return _(V,[g,m])}var N=M(u,function(V){return D(V)?o(V,g):1/0}),F=E(u[N],u[L(N-1)],g);for(k.push(F),w=N,c=0;c<A;w++,c++){var I=u[L(w)];if(!D(I))break;k.push(C(I))}var P=M(u,function(V){return D(V)?o(V,m):1/0}),j=E(u[P],u[L(P+1)],m);return k.push(j),k.push([0,0]),k.push(k[0].slice()),k}(h,s,d,p)}function i(h){return Math.abs(h)>1e-10?h:0}function v(h,s,d){s=s||0,d=d||0;for(var p=h.length,f=new Array(p),g=0;g<p;g++){var m=h[g];f[g]=[s+m[0],d-m[1]]}return f}oe.exports={isPtInsidePolygon:function(h,s,d,p,f){if(!_(s,p))return!1;var g,m;d[0]<d[1]?(g=d[0],m=d[1]):(g=d[1],m=d[0]);var u=x(l(g,p[0],p[1],f)),w=x(l(m,p[0],p[1],f)),c=[h*Math.cos(s),h*Math.sin(s)];return w.contains(c)&&!u.contains(c)},findPolygonOffset:function(h,s,d,p){for(var f=1/0,g=1/0,m=l(h,s,d,p),u=0;u<m.length;u++){var w=m[u];f=Math.min(f,w[0]),g=Math.min(g,-w[1])}return[f,g]},findEnclosingVertexAngles:function(h,s){var d=M(s,function(f){var g=e(f,h);return g>0?g:1/0}),p=y.mod(d+1,s.length);return[s[d],s[p]]},findIntersectionXY:a,findXYatLength:function(h,s,d,p){var f=-s*d,g=s*s+1,m=2*(s*f-d),w=Math.sqrt(m*m-4*g*(f*f+d*d-h*h)),c=(-m+w)/(2*g),A=(-m-w)/(2*g);return[[c,s*c+f+p],[A,s*A+f+p]]},clampTiny:i,pathPolygon:function(h,s,d,p,f,g){return"M"+v(l(h,s,d,p),f,g).join("L")},pathPolygonAnnulus:function(h,s,d,p,f,g,m){var u,w;h<s?(u=h,w=s):(u=s,w=h);var c=v(l(u,d,p,f),g,m);return"M"+v(l(w,d,p,f),g,m).reverse().join("L")+"M"+c.join("L")}}},{"../../lib":503,"../../lib/polygon":515}],622:[function(b,oe,se){"use strict";var y=b("../get_data").getSubplotCalcData,x=b("../../lib").counterRegex,M=b("./polar"),_=b("./constants"),e=_.attr,o=_.name,a=x(o),l={};l[e]={valType:"subplotid",dflt:o,editType:"calc"},oe.exports={attr:e,name:o,idRoot:o,idRegex:a,attrRegex:a,attributes:l,layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),plot:function(i){for(var v=i._fullLayout,h=i.calcdata,s=v._subplots[o],d=0;d<s.length;d++){var p=s[d],f=y(h,o,p),g=v[p]._subplot;g||(g=M(i,p),v[p]._subplot=g),g.plot(f,v,i._promises)}},clean:function(i,v,h,s){for(var d=s._subplots[o]||[],p=s._has&&s._has("gl"),f=v._has&&v._has("gl"),g=p&&!f,m=0;m<d.length;m++){var u=d[m],w=s[u]._subplot;if(!v[u]&&w)for(var c in w.framework.remove(),w.layers["radial-axis-title"].remove(),w.clipPaths)w.clipPaths[c].remove();g&&w._scene&&(w._scene.destroy(),w._scene=null)}},toSVG:b("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"./constants":620,"./layout_attributes":623,"./layout_defaults":624,"./polar":625}],623:[function(b,oe,se){"use strict";var y=b("../../components/color/attributes"),x=b("../cartesian/layout_attributes"),M=b("../domain").attributes,_=b("../../lib").extendFlat,e=b("../../plot_api/edit_types").overrideAll,o=e({color:x.color,showline:_({},x.showline,{dflt:!0}),linecolor:x.linecolor,linewidth:x.linewidth,showgrid:_({},x.showgrid,{dflt:!0}),gridcolor:x.gridcolor,gridwidth:x.gridwidth,griddash:x.griddash},"plot","from-root"),a=e({tickmode:x.tickmode,nticks:x.nticks,tick0:x.tick0,dtick:x.dtick,tickvals:x.tickvals,ticktext:x.ticktext,ticks:x.ticks,ticklen:x.ticklen,tickwidth:x.tickwidth,tickcolor:x.tickcolor,ticklabelstep:x.ticklabelstep,showticklabels:x.showticklabels,showtickprefix:x.showtickprefix,tickprefix:x.tickprefix,showticksuffix:x.showticksuffix,ticksuffix:x.ticksuffix,showexponent:x.showexponent,exponentformat:x.exponentformat,minexponent:x.minexponent,separatethousands:x.separatethousands,tickfont:x.tickfont,tickangle:x.tickangle,tickformat:x.tickformat,tickformatstops:x.tickformatstops,layer:x.layer},"plot","from-root"),l={visible:_({},x.visible,{dflt:!0}),type:_({},x.type,{values:["-","linear","log","date","category"]}),autotypenumbers:x.autotypenumbers,autorange:_({},x.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:_({},x.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:x.categoryorder,categoryarray:x.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:_({},x.title.text,{editType:"plot",dflt:""}),font:_({},x.title.font,{editType:"plot"}),editType:"plot"},hoverformat:x.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:x._deprecated.title,titlefont:x._deprecated.titlefont}};_(l,o,a);var i={visible:_({},x.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:x.autotypenumbers,categoryorder:x.categoryorder,categoryarray:x.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:x.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};_(i,o,a),oe.exports={domain:M({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:y.background},radialaxis:l,angularaxis:i,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],624:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../components/color"),M=b("../../plot_api/plot_template"),_=b("../subplot_defaults"),e=b("../get_data").getSubplotData,o=b("../cartesian/tick_value_defaults"),a=b("../cartesian/tick_mark_defaults"),l=b("../cartesian/tick_label_defaults"),i=b("../cartesian/prefix_suffix_defaults"),v=b("../cartesian/category_order_defaults"),h=b("../cartesian/line_grid_defaults"),s=b("../cartesian/axis_autotype"),d=b("./layout_attributes"),p=b("./set_convert"),f=b("./constants"),g=f.axisNames;function m(w,c,A,k){var C=A("bgcolor");k.bgColor=x.combine(C,k.paper_bgcolor);var E=A("sector");A("hole");var L,D=e(k.fullData,f.name,k.id),N=k.layoutOut;function F(ae,G){return A(L+"."+ae,G)}for(var I=0;I<g.length;I++){y.isPlainObject(w[L=g[I]])||(w[L]={});var P=w[L],j=M.newContainer(c,L);j._id=j._name=L,j._attr=k.id+"."+L,j._traceIndices=D.map(function(ae){return ae._expandedIndex});var V=f.axisName2dataArray[L],Z=u(P,j,F,D,V,k);v(P,j,F,{axData:D,dataAttr:V});var Y=F("visible");switch(p(j,c,N),F("uirevision",c.uirevision),j._m=1,L){case"radialaxis":var ee=F("autorange",!j.isValidRange(P.range));P.autorange=ee,!ee||"linear"!==Z&&"-"!==Z||F("rangemode"),"reversed"===ee&&(j._m=-1),F("range"),j.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===Z){y.log("Polar plots do not support date angular axes yet.");for(var re=0;re<D.length;re++)D[re].visible=!1;Z=P.type=j.type="linear"}F("linear"===Z?"thetaunit":"period");var X=F("direction");F("rotation",{counterclockwise:0,clockwise:90}[X])}if(i(P,j,F,j.type,{tickSuffixDflt:"degrees"===j.thetaunit?"\xb0":void 0}),Y){var K,ie,q,U,W=k.font||{};ie=(K=F("color"))===P.color?K:W.color,q=W.size,U=W.family,o(P,j,F,j.type),l(P,j,F,j.type,{font:{color:ie,size:q,family:U}}),a(P,j,F,{outerTicks:!0}),h(P,j,F,{dfltColor:K,bgColor:k.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:d[L]}),F("layer"),"radialaxis"===L&&(F("side"),F("angle",E[0]),F("title.text"),y.coerceFont(F,"title.font",{color:ie,size:y.bigFont(q),family:U}))}"category"!==Z&&F("hoverformat"),j._input=P}"category"===c.angularaxis.type&&A("gridshape")}function u(w,c,A,k,C,E){var L=A("autotypenumbers",E.autotypenumbersDflt);if("-"===A("type")){for(var D,N=0;N<k.length;N++)if(k[N].visible){D=k[N];break}D&&D[C]&&(c.type=s(D[C],"gregorian",{noMultiCategory:!0,autotypenumbers:L})),"-"===c.type?c.type="linear":w.type=c.type}return c.type}oe.exports=function(w,c,A){_(w,c,A,{type:f.name,attributes:d,handleDefaults:m,font:c.font,autotypenumbersDflt:c.autotypenumbers,paper_bgcolor:c.paper_bgcolor,fullData:A,layoutOut:c})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/axis_autotype":555,"../cartesian/category_order_defaults":559,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../get_data":593,"../subplot_defaults":632,"./constants":620,"./layout_attributes":623,"./set_convert":626}],625:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("tinycolor2"),M=b("../../registry"),_=b("../../lib"),e=_.strRotate,o=_.strTranslate,a=b("../../components/color"),l=b("../../components/drawing"),i=b("../plots"),v=b("../../plots/cartesian/axes"),h=b("../cartesian/set_convert"),s=b("./set_convert"),d=b("../cartesian/autorange").doAutoRange,p=b("../cartesian/dragbox"),f=b("../../components/dragelement"),g=b("../../components/fx"),m=b("../../components/titles"),u=b("../cartesian/select").prepSelect,w=b("../cartesian/select").selectOnClick,c=b("../cartesian/select").clearSelect,A=b("../../lib/setcursor"),k=b("../../lib/clear_gl_canvases"),C=b("../../plot_api/subroutines").redrawReglTraces,E=b("../../constants/alignment").MID_SHIFT,L=b("./constants"),D=b("./helpers"),N=b("../smith/helpers"),F=N.smith,I=N.reactanceArc,P=N.resistanceArc,j=N.smithTransform,V=_._,Z=_.mod,Y=_.deg2rad,ee=_.rad2deg;function re(U,W,ae){this.isSmith=ae||!1,this.id=W,this.gd=U,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var G=U._fullLayout;this.clipIds.forTraces="clip"+G._uid+W+"-for-traces",this.clipPaths.forTraces=G._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=G["_"+(ae?"smith":"polar")+"layer"].append("g").attr("class",W),this.getHole=function(ne){return this.isSmith?0:ne.hole},this.getSector=function(ne){return this.isSmith?[0,360]:ne.sector},this.getRadial=function(ne){return this.isSmith?ne.realaxis:ne.radialaxis},this.getAngular=function(ne){return this.isSmith?ne.imaginaryaxis:ne.angularaxis},ae||(this.radialTickLayout=null,this.angularTickLayout=null)}var X=re.prototype;function K(U){var W=U.ticks+String(U.ticklen)+String(U.showticklabels);return"side"in U&&(W+=U.side),W}function ie(U,W){return W[_.findIndexOfMin(W,function(ae){return _.angleDist(U,ae)})]}function q(U,W,ae){return W?(U.attr("display",null),U.attr(ae)):U&&U.attr("display","none"),U}oe.exports=function(U,W,ae){return new re(U,W,ae)},X.plot=function(U,W){for(var ae=W[this.id],G=!1,te=0;te<U.length;te++)if(!1===U[te][0].trace.cliponaxis){G=!0;break}this._hasClipOnAxisFalse=G,this.updateLayers(W,ae),this.updateLayout(W,ae),i.generalUpdatePerTraceModule(this.gd,this,U,ae),this.updateFx(W,ae),this.isSmith&&(delete ae.realaxis.range,delete ae.imaginaryaxis.range)},X.updateLayers=function(U,W){var ae=this.isSmith,G=this.layers,te=this.getRadial(W),ne=this.getAngular(W),le=L.layerNames,ue=le.indexOf("frontplot"),pe=le.slice(0,ue),de="below traces"===ne.layer,_e="below traces"===te.layer;de&&pe.push("angular-line"),_e&&pe.push("radial-line"),de&&pe.push("angular-axis"),_e&&pe.push("radial-axis"),pe.push("frontplot"),de||pe.push("angular-line"),_e||pe.push("radial-line"),de||pe.push("angular-axis"),_e||pe.push("radial-axis");var me=(ae?"smith":"polar")+"sublayer",we=this.framework.selectAll("."+me).data(pe,String);we.enter().append("g").attr("class",function(De){return me+" "+De}).each(function(De){var Le=G[De]=y.select(this);switch(De){case"frontplot":ae||Le.append("g").classed("barlayer",!0),Le.append("g").classed("scatterlayer",!0);break;case"backplot":Le.append("g").classed("maplayer",!0);break;case"plotbg":G.bg=Le.append("path");break;case"radial-grid":case"angular-grid":Le.style("fill","none");break;case"radial-line":Le.append("line").style("fill","none");break;case"angular-line":Le.append("path").style("fill","none")}}),we.order()},X.updateLayout=function(U,W){var ae=this.layers,G=U._size,te=this.getRadial(W),ne=this.getAngular(W),le=W.domain.x,ue=W.domain.y;this.xOffset=G.l+G.w*le[0],this.yOffset=G.t+G.h*(1-ue[1]);var pe=this.xLength=G.w*(le[1]-le[0]),de=this.yLength=G.h*(ue[1]-ue[0]),_e=this.getSector(W);this.sectorInRad=_e.map(Y);var me,we,De,Le,Ie,kt,at,Ft,en,Qt,tn,dn,Mn,sn,ke,je=this.sectorBBox=(en=(kt=_e)[1]-(Ft=kt[0]),tn=(Qt=Z(Ft,360))+en,dn=Math.cos(Y(Qt)),Mn=Math.sin(Y(Qt)),sn=Math.cos(Y(tn)),ke=Math.sin(Y(tn)),at=Qt<=90&&tn>=90||Qt>90&&tn>=450?1:Mn<=0&&ke<=0?0:Math.max(Mn,ke),[Qt<=180&&tn>=180||Qt>180&&tn>=540?-1:dn>=0&&sn>=0?0:Math.min(dn,sn),Qt<=270&&tn>=270||Qt>270&&tn>=630?-1:Mn>=0&&ke>=0?0:Math.min(Mn,ke),tn>=360?1:dn<=0&&sn<=0?0:Math.max(dn,sn),at]),ye=je[2]-je[0],Oe=de/pe,Pe=Math.abs((je[3]-je[1])/ye);Oe>Pe?(me=pe,Ie=(de-(we=pe*Pe))/G.h/2,De=[le[0],le[1]],Le=[ue[0]+Ie,ue[1]-Ie]):(we=de,Ie=(pe-(me=de/Pe))/G.w/2,De=[le[0]+Ie,le[1]-Ie],Le=[ue[0],ue[1]]),this.xLength2=me,this.yLength2=we,this.xDomain2=De,this.yDomain2=Le;var Re,Ue=this.xOffset2=G.l+G.w*De[0],qe=this.yOffset2=G.t+G.h*(1-Le[1]),Xe=this.radius=me/ye,lt=this.innerRadius=this.getHole(W)*Xe,He=this.cx=Ue-Xe*je[0],$e=this.cy=qe+Xe*je[3],et=this.cxx=He-Ue,nt=this.cyy=$e-qe,ct=te.side;"counterclockwise"===ct?(Re=ct,ct="top"):"clockwise"===ct&&(Re=ct,ct="bottom"),this.radialAxis=this.mockAxis(U,W,te,{_id:"x",side:ct,_trueSide:Re,domain:[lt/G.w,Xe/G.w]}),this.angularAxis=this.mockAxis(U,W,ne,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(U,W),this.updateAngularAxis(U,W),this.updateRadialAxis(U,W),this.updateRadialAxisTitle(U,W),this.xaxis=this.mockCartesianAxis(U,W,{_id:"x",domain:De}),this.yaxis=this.mockCartesianAxis(U,W,{_id:"y",domain:Le});var bt=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",bt).attr("transform",o(et,nt)),ae.frontplot.attr("transform",o(Ue,qe)).call(l.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),ae.bg.attr("d",bt).attr("transform",o(He,$e)).call(a.fill,W.bgcolor)},X.mockAxis=function(U,W,ae,G){var te=_.extendFlat({},ae,G);return s(te,W,U),te},X.mockCartesianAxis=function(U,W,ae){var G=this,te=G.isSmith,ne=ae._id,le=_.extendFlat({type:"linear"},ae);h(le,U);var ue={x:[0,2],y:[1,3]};return le.setRange=function(){var pe=G.sectorBBox,de=ue[ne],_e=G.radialAxis._rl,me=(_e[1]-_e[0])/(1-G.getHole(W));le.range=[pe[de[0]]*me,pe[de[1]]*me]},le.isPtWithinRange="x"!==ne||te?function(){return!0}:function(pe){return G.isPtInside(pe)},le.setRange(),le.setScale(),le},X.doAutoRange=function(U,W){var ae=this.gd,G=this.radialAxis,te=this.getRadial(W);d(ae,G);var ne=G.range;te.range=ne.slice(),te._input.range=ne.slice(),G._rl=[G.r2l(ne[0],null,"gregorian"),G.r2l(ne[1],null,"gregorian")]},X.updateRadialAxis=function(U,W){var ae=this,G=ae.gd,te=ae.layers,ne=ae.radius,le=ae.innerRadius,ue=ae.cx,pe=ae.cy,de=ae.getRadial(W),_e=Z(ae.getSector(W)[0],360),me=ae.radialAxis,we=le<ne,De=ae.isSmith;De||(ae.fillViewInitialKey("radialaxis.angle",de.angle),ae.fillViewInitialKey("radialaxis.range",me.range.slice()),me.setGeometry()),"auto"===me.tickangle&&_e>90&&_e<=270&&(me.tickangle=180);var Le=De?function(Xe){var lt=j(ae,F([Xe.x,0]));return o(lt[0]-ue,lt[1]-pe)}:function(Xe){return o(me.l2p(Xe.x)+le,0)},Ie=De?function(Xe){return P(ae,Xe.x,-1/0,1/0)}:function(Xe){return ae.pathArc(me.r2p(Xe.x)+le)},je=K(de);if(ae.radialTickLayout!==je&&(te["radial-axis"].selectAll(".xtick").remove(),ae.radialTickLayout=je),we){me.setScale();var ye=0,Me=De?(me.tickvals||[]).filter(function(Xe){return Xe>=0}).map(function(Xe){return v.tickText(me,Xe,!0,!1)}):v.calcTicks(me),Oe=De?Me:v.clipEnds(me,Me),Pe=v.getTickSigns(me)[2];De&&(("top"===me.ticks&&"bottom"===me.side||"bottom"===me.ticks&&"top"===me.side)&&(Pe=-Pe),"top"===me.ticks&&"top"===me.side&&(ye=-me.ticklen),"bottom"===me.ticks&&"bottom"===me.side&&(ye=me.ticklen)),v.drawTicks(G,me,{vals:Me,layer:te["radial-axis"],path:v.makeTickPath(me,0,Pe),transFn:Le,crisp:!1}),v.drawGrid(G,me,{vals:Oe,layer:te["radial-grid"],path:Ie,transFn:_.noop,crisp:!1}),v.drawLabels(G,me,{vals:Me,layer:te["radial-axis"],transFn:Le,labelFns:v.makeLabelFns(me,ye)})}var Re=ae.radialAxisAngle=ae.vangles?ee(ie(Y(de.angle),ae.vangles)):de.angle,Ue=o(ue,pe),qe=Ue+e(-Re);q(te["radial-axis"],we&&(de.showticklabels||de.ticks),{transform:qe}),q(te["radial-grid"],we&&de.showgrid,{transform:De?"":Ue}),q(te["radial-line"].select("line"),we&&de.showline,{x1:De?-ne:le,y1:0,x2:ne,y2:0,transform:qe}).attr("stroke-width",de.linewidth).call(a.stroke,de.linecolor)},X.updateRadialAxisTitle=function(U,W,ae){if(!this.isSmith){var G=this.gd,te=this.radius,ne=this.cx,le=this.cy,ue=this.getRadial(W),pe=this.id+"title",de=0;if(ue.title){var _e=l.bBox(this.layers["radial-axis"].node()).height,me=ue.title.font.size,we=ue.side;de="top"===we?me:"counterclockwise"===we?-(_e+.4*me):_e+.8*me}var De=void 0!==ae?ae:this.radialAxisAngle,Le=Y(De),Ie=Math.cos(Le),je=Math.sin(Le),ye=ne+te/2*Ie+de*je,Me=le-te/2*je+de*Ie;this.layers["radial-axis-title"]=m.draw(G,pe,{propContainer:ue,propName:this.id+".radialaxis.title",placeholder:V(G,"Click to enter radial axis title"),attributes:{x:ye,y:Me,"text-anchor":"middle"},transform:{rotate:-De}})}},X.updateAngularAxis=function(U,W){var ae=this,G=ae.gd,te=ae.layers,ne=ae.radius,le=ae.innerRadius,ue=ae.cx,pe=ae.cy,de=ae.getAngular(W),_e=ae.angularAxis,me=ae.isSmith;me||(ae.fillViewInitialKey("angularaxis.rotation",de.rotation),_e.setGeometry(),_e.setScale());var we=me?function(Xe){var lt=j(ae,F([0,Xe.x]));return Math.atan2(lt[0]-ue,lt[1]-pe)-Math.PI/2}:function(Xe){return _e.t2g(Xe.x)};"linear"===_e.type&&"radians"===_e.thetaunit&&(_e.tick0=ee(_e.tick0),_e.dtick=ee(_e.dtick));var De=function(Xe){return o(ue+ne*Math.cos(Xe),pe-ne*Math.sin(Xe))},Le=me?function(Xe){var lt=j(ae,F([0,Xe.x]));return o(lt[0],lt[1])}:function(Xe){return De(we(Xe))},Ie=me?function(Xe){var lt=j(ae,F([0,Xe.x])),He=Math.atan2(lt[0]-ue,lt[1]-pe)-Math.PI/2;return o(lt[0],lt[1])+e(-ee(He))}:function(Xe){var lt=we(Xe);return De(lt)+e(-ee(lt))},je=me?function(Xe){return I(ae,Xe.x,0,1/0)}:function(Xe){var lt=we(Xe),He=Math.cos(lt),$e=Math.sin(lt);return"M"+[ue+le*He,pe-le*$e]+"L"+[ue+ne*He,pe-ne*$e]},ye=v.makeLabelFns(_e,0).labelStandoff,Me={xFn:function(Xe){var lt=we(Xe);return Math.cos(lt)*ye},yFn:function(Xe){var lt=we(Xe),He=Math.sin(lt)>0?.2:1;return-Math.sin(lt)*(ye+Xe.fontSize*He)+Math.abs(Math.cos(lt))*(Xe.fontSize*E)},anchorFn:function(Xe){var lt=we(Xe),He=Math.cos(lt);return Math.abs(He)<.1?"middle":He>0?"start":"end"},heightFn:function(Xe,lt,He){var $e=we(Xe);return-.5*(1+Math.sin($e))*He}},Oe=K(de);ae.angularTickLayout!==Oe&&(te["angular-axis"].selectAll("."+_e._id+"tick").remove(),ae.angularTickLayout=Oe);var Pe,Re=me?[1/0].concat(_e.tickvals||[]).map(function(Xe){return v.tickText(_e,Xe,!0,!1)}):v.calcTicks(_e);if(me&&(Re[0].text="\u221e",Re[0].fontSize*=1.75),"linear"===W.gridshape?(Pe=Re.map(we),_.angleDelta(Pe[0],Pe[1])<0&&(Pe=Pe.slice().reverse())):Pe=null,ae.vangles=Pe,"category"===_e.type&&(Re=Re.filter(function(Xe){return _.isAngleInsideSector(we(Xe),ae.sectorInRad)})),_e.visible){var Ue="inside"===_e.ticks?-1:1;v.drawTicks(G,_e,{vals:Re,layer:te["angular-axis"],path:"M"+Ue*((_e.linewidth||1)/2)+",0h"+Ue*_e.ticklen,transFn:Ie,crisp:!1}),v.drawGrid(G,_e,{vals:Re,layer:te["angular-grid"],path:je,transFn:_.noop,crisp:!1}),v.drawLabels(G,_e,{vals:Re,layer:te["angular-axis"],repositionOnUpdate:!0,transFn:Le,labelFns:Me})}q(te["angular-line"].select("path"),de.showline,{d:ae.pathSubplot(),transform:o(ue,pe)}).attr("stroke-width",de.linewidth).call(a.stroke,de.linecolor)},X.updateFx=function(U,W){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(U),this.updateRadialDrag(U,W,0),this.updateRadialDrag(U,W,1)),this.updateHoverAndMainDrag(U))},X.updateHoverAndMainDrag=function(U){var W,ae,G=this,te=G.isSmith,ne=G.gd,ue=U._zoomlayer,pe=L.MINZOOM,de=L.OFFEDGE,_e=G.radius,me=G.innerRadius,we=G.cx,De=G.cy,Le=G.cxx,Ie=G.cyy,je=G.sectorInRad,ye=G.vangles,Me=G.radialAxis,Oe=D.clampTiny,Pe=D.findXYatLength,Re=D.findEnclosingVertexAngles,Ue=L.cornerHalfWidth,qe=L.cornerLen/2,Xe=p.makeDragger(G.layers,"path","maindrag","crosshair");y.select(Xe).attr("d",G.pathSubplot()).attr("transform",o(we,De)),Xe.onmousemove=function(Qe){g.hover(ne,Qe,G.id),ne._fullLayout._lasthover=Xe,ne._fullLayout._hoversubplot=G.id},Xe.onmouseout=function(Qe){ne._dragging||f.unhover(ne,Qe)};var lt,He,$e,et,nt,ct,bt,kt,Bt,Et={element:Xe,gd:ne,subplot:G.id,plotinfo:{id:G.id,xaxis:G.xaxis,yaxis:G.yaxis},xaxes:[G.xaxis],yaxes:[G.yaxis]};function ht(Qe,ot){return Math.sqrt(Qe*Qe+ot*ot)}function at(Qe,ot){return ht(Qe-Le,ot-Ie)}function Ft(Qe,ot){return Math.atan2(Ie-ot,Qe-Le)}function en(Qe,ot){return[Qe*Math.cos(ot),Qe*Math.sin(-ot)]}function Qt(Qe,ot){if(0===Qe)return G.pathSector(2*Ue);var it=qe/Qe,mt=ot-it,xt=ot+it,Vt=Math.max(0,Math.min(Qe,_e)),$t=Vt-Ue,pt=Vt+Ue;return"M"+en($t,mt)+"A"+[$t,$t]+" 0,0,0 "+en($t,xt)+"L"+en(pt,xt)+"A"+[pt,pt]+" 0,0,1 "+en(pt,mt)+"Z"}function tn(Qe,ot,it){if(0===Qe)return G.pathSector(2*Ue);var mt,xt,Vt=en(Qe,ot),$t=en(Qe,it),pt=Oe((Vt[0]+$t[0])/2),At=Oe((Vt[1]+$t[1])/2);if(pt&&At){var Xt=At/pt,Ct=-1/Xt,Pt=Pe(Ue,Xt,pt,At);mt=Pe(qe,Ct,Pt[0][0],Pt[0][1]),xt=Pe(qe,Ct,Pt[1][0],Pt[1][1])}else{var Be,tt;At?(Be=qe,tt=Ue):(Be=Ue,tt=qe),mt=[[pt-Be,At-tt],[pt+Be,At-tt]],xt=[[pt-Be,At+tt],[pt+Be,At+tt]]}return"M"+mt.join("L")+"L"+xt.reverse().join("L")+"Z"}function dn(Qe,ot){return ot=Math.max(Math.min(ot,_e),me),Qe<de?Qe=0:_e-Qe<de?Qe=_e:ot<de?ot=0:_e-ot<de&&(ot=_e),Math.abs(ot-Qe)>pe?(Qe<ot?($e=Qe,et=ot):($e=ot,et=Qe),!0):($e=null,et=null,!1)}function Mn(Qe,ot){ot=ot||"M0,0Z",kt.attr("d",Qe=Qe||nt),Bt.attr("d",ot),p.transitionZoombox(kt,Bt,ct,bt),ct=!0;var it={};Ve(it),ne.emit("plotly_relayouting",it)}function sn(Qe,ot){var it,mt,xt=lt+(Qe*=W),Vt=He+(ot*=ae),$t=at(lt,He),pt=Math.min(at(xt,Vt),_e),At=Ft(lt,He);dn($t,pt)&&(it=nt+G.pathSector(et),$e&&(it+=G.pathSector($e)),mt=Qt($e,At)+Qt(et,At)),Mn(it,mt)}function ke(Qe,ot,it,mt){var xt=D.findIntersectionXY(it,mt,it,[Qe-Le,Ie-ot]);return ht(xt[0],xt[1])}function Se(Qe,ot){var it,mt,xt=lt+Qe,Vt=He+ot,$t=Ft(lt,He),pt=Ft(xt,Vt),At=Re($t,ye),Xt=Re(pt,ye);dn(ke(lt,He,At[0],At[1]),Math.min(ke(xt,Vt,Xt[0],Xt[1]),_e))&&(it=nt+G.pathSector(et),$e&&(it+=G.pathSector($e)),mt=[tn($e,At[0],At[1]),tn(et,At[0],At[1])].join(" ")),Mn(it,mt)}function Ce(){if(p.removeZoombox(ne),null!==$e&&null!==et){var Qe={};Ve(Qe),p.showDoubleClickNotifier(ne),M.call("_guiRelayout",ne,Qe)}}function Ve(Qe){var ot=Me._rl,it=(ot[1]-ot[0])/(1-me/_e)/_e;Qe[G.id+".radialaxis.range"]=[ot[0]+($e-me)*it,ot[0]+(et-me)*it]}function Ge(Qe,ot){var it=ne._fullLayout.clickmode;if(p.removeZoombox(ne),2===Qe){var mt={};for(var xt in G.viewInitial)mt[G.id+"."+xt]=G.viewInitial[xt];ne.emit("plotly_doubleclick",null),M.call("_guiRelayout",ne,mt)}it.indexOf("select")>-1&&1===Qe&&w(ot,ne,[G.xaxis],[G.yaxis],G.id,Et),it.indexOf("event")>-1&&g.click(ne,ot,G.id)}Et.prepFn=function(Qe,ot,it){var mt=ne._fullLayout.dragmode,xt=Xe.getBoundingClientRect();ne._fullLayout._calcInverseTransform(ne),W=ne._fullLayout._invScaleX,ae=ne._fullLayout._invScaleY;var $t=_.apply3DTransform(ne._fullLayout._invTransform)(ot-xt.left,it-xt.top);if(lt=$t[0],He=$t[1],ye){var pt=D.findPolygonOffset(_e,je[0],je[1],ye);lt+=Le+pt[0],He+=Ie+pt[1]}switch(mt){case"zoom":Et.clickFn=Ge,te||(Et.moveFn=ye?Se:sn,Et.doneFn=Ce,$e=null,et=null,nt=G.pathSubplot(),ct=!1,bt=x(ne._fullLayout[G.id].bgcolor).getLuminance(),(kt=p.makeZoombox(ue,bt,we,De,nt)).attr("fill-rule","evenodd"),Bt=p.makeCorners(ue,we,De),c(ne));break;case"select":case"lasso":u(Qe,ot,it,Et,mt)}},f.init(Et)},X.updateRadialDrag=function(U,W,ae){var G=this,te=G.gd,ne=G.layers,le=G.radius,ue=G.innerRadius,pe=G.cx,de=G.cy,_e=G.radialAxis,me=L.radialDragBoxSize,we=me/2;if(_e.visible){var De,Le,Ie,je=Y(G.radialAxisAngle),ye=_e._rl,Me=ye[0],Oe=ye[1],Pe=ye[ae],Re=.75*(ye[1]-ye[0])/(1-G.getHole(W))/le;ae?(De=pe+(le+we)*Math.cos(je),Le=de-(le+we)*Math.sin(je),Ie="radialdrag"):(De=pe+(ue-we)*Math.cos(je),Le=de-(ue-we)*Math.sin(je),Ie="radialdrag-inner");var Ue,qe,Xe,lt=p.makeRectDragger(ne,Ie,"crosshair",-we,-we,me,me),He={element:lt,gd:te};q(y.select(lt),_e.visible&&ue<le,{transform:o(De,Le)}),He.prepFn=function(){Ue=null,qe=null,Xe=null,He.moveFn=$e,He.doneFn=et,c(te)},He.clampFn=function(bt,kt){return Math.sqrt(bt*bt+kt*kt)<L.MINDRAG&&(bt=0,kt=0),[bt,kt]},f.init(He)}function $e(bt,kt){if(Ue)Ue(bt,kt);else{var Bt=[bt,-kt],Et=[Math.cos(je),Math.sin(je)],ht=Math.abs(_.dot(Bt,Et)/Math.sqrt(_.dot(Bt,Bt)));isNaN(ht)||(Ue=ht<.5?nt:ct)}var Ft,at={};Ft=at,null!==qe?Ft[G.id+".radialaxis.angle"]=qe:null!==Xe&&(Ft[G.id+".radialaxis.range["+ae+"]"]=Xe),te.emit("plotly_relayouting",at)}function et(){null!==qe?M.call("_guiRelayout",te,G.id+".radialaxis.angle",qe):null!==Xe&&M.call("_guiRelayout",te,G.id+".radialaxis.range["+ae+"]",Xe)}function nt(bt,kt){if(0!==ae){qe=Math.atan2(de-(Le+kt),De+bt-pe),G.vangles&&(qe=ie(qe,G.vangles)),qe=ee(qe);var ht=o(pe,de)+e(-qe);ne["radial-axis"].attr("transform",ht),ne["radial-line"].select("line").attr("transform",ht);var at=G.gd._fullLayout;G.updateRadialAxisTitle(at,at[G.id],qe)}}function ct(bt,kt){var Bt=_.dot([bt,-kt],[Math.cos(je),Math.sin(je)]);if(Xe=Pe-Re*Bt,Re>0==(ae?Xe>Me:Xe<Oe)){var Et=te._fullLayout,ht=Et[G.id];_e.range[ae]=Xe,_e._rl[ae]=Xe,G.updateRadialAxis(Et,ht),G.xaxis.setRange(),G.xaxis.setScale(),G.yaxis.setRange(),G.yaxis.setScale();var at=!1;for(var Ft in G.traceHash){var en=G.traceHash[Ft],Qt=_.filterVisible(en);en[0][0].trace._module.plot(te,G,Qt,ht),M.traceIs(Ft,"gl")&&Qt.length&&(at=!0)}at&&(k(te),C(te))}else Xe=null}},X.updateAngularDrag=function(U){var W=this,ae=W.gd,G=W.layers,te=W.radius,ne=W.angularAxis,le=W.cx,ue=W.cy,pe=W.cxx,de=W.cyy,_e=L.angularDragBoxSize,me=p.makeDragger(G,"path","angulardrag","move"),we={element:me,gd:ae};function De(He,$e){return Math.atan2(de+_e-$e,He-pe-_e)}y.select(me).attr("d",W.pathAnnulus(te,te+_e)).attr("transform",o(le,ue)).call(A,"move");var Le,Ie,je,ye,Me,Oe,Pe=G.frontplot.select(".scatterlayer").selectAll(".trace"),Re=Pe.selectAll(".point"),Ue=Pe.selectAll(".textpoint");function qe(He,$e){var et=W.gd._fullLayout,nt=et[W.id],ct=De(Le+He*U._invScaleX,Ie+$e*U._invScaleY),bt=ee(ct-Oe);if(ye=je+bt,G.frontplot.attr("transform",o(W.xOffset2,W.yOffset2)+e([-bt,pe,de])),W.vangles){Me=W.radialAxisAngle+bt;var kt=o(le,ue)+e(-bt),Bt=o(le,ue)+e(-Me);G.bg.attr("transform",kt),G["radial-grid"].attr("transform",kt),G["radial-axis"].attr("transform",Bt),G["radial-line"].select("line").attr("transform",Bt),W.updateRadialAxisTitle(et,nt,Me)}else W.clipPaths.forTraces.select("path").attr("transform",o(pe,de)+e(bt));Re.each(function(){var Qt=y.select(this),tn=l.getTranslate(Qt);Qt.attr("transform",o(tn.x,tn.y)+e([bt]))}),Ue.each(function(){var Qt=y.select(this),tn=Qt.select("text"),dn=l.getTranslate(Qt);Qt.attr("transform",e([bt,tn.attr("x"),tn.attr("y")])+o(dn.x,dn.y))}),ne.rotation=_.modHalf(ye,360),W.updateAngularAxis(et,nt),W._hasClipOnAxisFalse&&!_.isFullCircle(W.sectorInRad)&&Pe.call(l.hideOutsideRangePoints,W);var Et=!1;for(var ht in W.traceHash)if(M.traceIs(ht,"gl")){var at=W.traceHash[ht],Ft=_.filterVisible(at);at[0][0].trace._module.plot(ae,W,Ft,nt),Ft.length&&(Et=!0)}Et&&(k(ae),C(ae));var en={};Xe(en),ae.emit("plotly_relayouting",en)}function Xe(He){He[W.id+".angularaxis.rotation"]=ye,W.vangles&&(He[W.id+".radialaxis.angle"]=Me)}function lt(){Ue.select("text").attr("transform",null);var He={};Xe(He),M.call("_guiRelayout",ae,He)}we.prepFn=function(He,$e,et){je=U[W.id].angularaxis.rotation;var ct=me.getBoundingClientRect();Le=$e-ct.left,Ie=et-ct.top,ae._fullLayout._calcInverseTransform(ae);var bt=_.apply3DTransform(U._invTransform)(Le,Ie);Oe=De(Le=bt[0],Ie=bt[1]),we.moveFn=qe,we.doneFn=lt,c(ae)},W.vangles&&!_.isFullCircle(W.sectorInRad)&&(we.prepFn=_.noop,A(y.select(me),null)),f.init(we)},X.isPtInside=function(U){if(this.isSmith)return!0;var W=this.sectorInRad,ae=this.vangles,G=this.angularAxis.c2g(U.theta),te=this.radialAxis,ne=te.c2l(U.r);return(ae?D.isPtInsidePolygon:_.isPtInsideSector)(ne,G,te._rl,W,ae)},X.pathArc=function(U){var W=this.sectorInRad,ae=this.vangles;return(ae?D.pathPolygon:_.pathArc)(U,W[0],W[1],ae)},X.pathSector=function(U){var W=this.sectorInRad,ae=this.vangles;return(ae?D.pathPolygon:_.pathSector)(U,W[0],W[1],ae)},X.pathAnnulus=function(U,W){var ae=this.sectorInRad,G=this.vangles;return(G?D.pathPolygonAnnulus:_.pathAnnulus)(U,W,ae[0],ae[1],G)},X.pathSubplot=function(){var U=this.innerRadius,W=this.radius;return U?this.pathAnnulus(U,W):this.pathSector(W)},X.fillViewInitialKey=function(U,W){U in this.viewInitial||(this.viewInitial[U]=W)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../plot_api/subroutines":544,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/dragbox":563,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"../smith/helpers":628,"./constants":620,"./helpers":621,"./set_convert":626,"@plotly/d3":58,tinycolor2:312}],626:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../cartesian/set_convert"),M=y.deg2rad,_=y.rad2deg;oe.exports=function(e,o,a){switch(x(e,a),e._id){case"x":case"radialaxis":v=o._subplot,(l=e).setGeometry=function(){var h=l._rl[0],s=l._rl[1],d=v.innerRadius,p=(v.radius-d)/(s-h),f=d/p,g=h>s?function(m){return m<=0}:function(m){return m>=0};l.c2g=function(m){var u=l.c2l(m)-h;return(g(u)?u:0)+f},l.g2c=function(m){return l.l2c(m+h-f)},l.g2p=function(m){return m*p},l.c2p=function(m){return l.g2p(l.c2g(m))}};break;case"angularaxis":!function(l,i){var v=l.type;if("linear"===v){var h=l.d2c,s=l.c2d;l.d2c=function(d,p){return f=h(d),"degrees"===p?M(f):f;var f},l.c2d=function(d,p){return s((f=d,"degrees"===p?_(f):f));var f}}l.makeCalcdata=function(d,p){var f,g,m=d[p],u=d._length,w=function(E){return l.d2c(E,d.thetaunit)};if(m){if(y.isTypedArray(m)&&"linear"===v){if(u===m.length)return m;if(m.subarray)return m.subarray(0,u)}for(f=new Array(u),g=0;g<u;g++)f[g]=w(m[g])}else{var c=p+"0",A="d"+p,k=c in d?w(d[c]):0,C=d[A]?w(d[A]):(l.period||2*Math.PI)/u;for(f=new Array(u),g=0;g<u;g++)f[g]=k+g*C}return f},l.setGeometry=function(){var d,p,f,g,m=i.sector,u=m.map(M),w={clockwise:-1,counterclockwise:1}[l.direction],c=M(l.rotation),A=function(L){return w*L+c},k=function(L){return(L-c)/w};switch(v){case"linear":p=d=y.identity,g=M,f=_,l.range=y.isFullCircle(u)?[m[0],m[0]+360]:u.map(k).map(_);break;case"category":var C=l._categories.length,E=l.period?Math.max(l.period,C):C;0===E&&(E=1),p=g=function(L){return 2*L*Math.PI/E},d=f=function(L){return L*E/Math.PI/2},l.range=[0,E]}l.c2g=function(L){return A(p(L))},l.g2c=function(L){return d(k(L))},l.t2g=function(L){return A(g(L))},l.g2t=function(L){return f(k(L))}}}(e,o)}var l,v}},{"../../lib":503,"../cartesian/set_convert":576}],627:[function(b,oe,se){"use strict";oe.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],628:[function(b,oe,se){"use strict";function y(e){return e<0?-1:e>0?1:0}function x(e){var o=e[0],a=e[1];if(!isFinite(o)||!isFinite(a))return[1,0];var l=(o+1)*(o+1)+a*a;return[(o*o+a*a-1)/l,2*a/l]}function M(e,o){return[o[0]*e.radius+e.cx,-o[1]*e.radius+e.cy]}function _(e,o){return o*e.radius}oe.exports={smith:x,reactanceArc:function(e,o,a,l){var i=M(e,x([a,o])),v=i[0],h=i[1],s=M(e,x([l,o])),d=s[0],p=s[1];if(0===o)return["M"+v+","+h,"L"+d+","+p].join(" ");var f=_(e,1/Math.abs(o));return["M"+v+","+h,"A"+f+","+f+" 0 0,"+(o<0?1:0)+" "+d+","+p].join(" ")},resistanceArc:function(e,o,a,l){var i=_(e,1/(o+1)),v=M(e,x([o,a])),h=v[0],s=v[1],d=M(e,x([o,l])),p=d[0],f=d[1];if(y(a)!==y(l)){var g=M(e,x([o,0]));return["M"+h+","+s,"A"+i+","+i+" 0 0,"+(0<a?0:1)+" "+g[0]+","+g[1],"A"+i+","+i+" 0 0,"+(l<0?0:1)+p+","+f].join(" ")}return["M"+h+","+s,"A"+i+","+i+" 0 0,"+(l<a?0:1)+" "+p+","+f].join(" ")},smithTransform:M}},{}],629:[function(b,oe,se){"use strict";var y=b("../get_data").getSubplotCalcData,x=b("../../lib").counterRegex,M=b("../polar/polar"),_=b("./constants"),e=_.attr,o=_.name,a=x(o),l={};l[e]={valType:"subplotid",dflt:o,editType:"calc"},oe.exports={attr:e,name:o,idRoot:o,idRegex:a,attrRegex:a,attributes:l,layoutAttributes:b("./layout_attributes"),supplyLayoutDefaults:b("./layout_defaults"),plot:function(i){for(var v=i._fullLayout,h=i.calcdata,s=v._subplots[o],d=0;d<s.length;d++){var p=s[d],f=y(h,o,p),g=v[p]._subplot;g||(g=M(i,p,!0),v[p]._subplot=g),g.plot(f,v,i._promises)}},clean:function(i,v,h,s){for(var d=s._subplots[o]||[],p=0;p<d.length;p++){var f=d[p],g=s[f]._subplot;if(!v[f]&&g)for(var m in g.framework.remove(),g.clipPaths)g.clipPaths[m].remove()}},toSVG:b("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"../polar/polar":625,"./constants":627,"./layout_attributes":630,"./layout_defaults":631}],630:[function(b,oe,se){"use strict";var y=b("../../components/color/attributes"),x=b("../cartesian/layout_attributes"),M=b("../domain").attributes,_=b("../../lib").extendFlat,e=b("../../plot_api/edit_types").overrideAll,o=e({color:x.color,showline:_({},x.showline,{dflt:!0}),linecolor:x.linecolor,linewidth:x.linewidth,showgrid:_({},x.showgrid,{dflt:!0}),gridcolor:x.gridcolor,gridwidth:x.gridwidth,griddash:x.griddash},"plot","from-root"),a=e({ticklen:x.ticklen,tickwidth:_({},x.tickwidth,{dflt:2}),tickcolor:x.tickcolor,showticklabels:x.showticklabels,showtickprefix:x.showtickprefix,tickprefix:x.tickprefix,showticksuffix:x.showticksuffix,ticksuffix:x.ticksuffix,tickfont:x.tickfont,tickformat:x.tickformat,hoverformat:x.hoverformat,layer:x.layer},"plot","from-root"),l=_({visible:_({},x.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:_({},x.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},o,a),i=_({visible:_({},x.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:x.ticks,editType:"calc"},o,a);oe.exports={domain:M({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:y.background},realaxis:l,imaginaryaxis:i,editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],631:[function(b,oe,se){"use strict";var y,x,M,_=b("../../lib"),e=b("../../components/color"),o=b("../../plot_api/plot_template"),a=b("../subplot_defaults"),l=b("../get_data").getSubplotData,i=b("../cartesian/prefix_suffix_defaults"),v=b("../cartesian/tick_label_defaults"),h=b("../cartesian/line_grid_defaults"),s=b("../cartesian/set_convert"),d=b("./layout_attributes"),p=b("./constants"),f=p.axisNames,g=(y=function(u){return u.slice().reverse().map(function(w){return-w}).concat([0]).concat(u)},x=String,M={},function(u){var w=x?x(u):u;if(w in M)return M[w];var c=y(u);return M[w]=c,c});function m(u,w,c,A){var k=c("bgcolor");A.bgColor=e.combine(k,A.paper_bgcolor);var C,E=l(A.fullData,p.name,A.id),L=A.layoutOut;function D(X,K){return c(C+"."+X,K)}for(var N=0;N<f.length;N++){_.isPlainObject(u[C=f[N]])||(u[C]={});var F=u[C],I=o.newContainer(w,C);I._id=I._name=C,I._attr=A.id+"."+C,I._traceIndices=E.map(function(X){return X._expandedIndex});var P=D("visible");if(I.type="linear",s(I,L),i(F,I,D,I.type),P){var j,V,Z,Y,ee="realaxis"===C;ee&&D("side"),ee?D("tickvals"):D("tickvals",g(w.realaxis.tickvals||d.realaxis.tickvals.dflt));var re=A.font||{};P&&(V=(j=D("color"))===F.color?j:re.color,Z=re.size,Y=re.family),v(F,I,D,I.type,{noTicklabelstep:!0,noAng:!ee,noExp:!0,font:{color:V,size:Z,family:Y}}),_.coerce2(u,w,d,C+".ticklen"),_.coerce2(u,w,d,C+".tickwidth"),_.coerce2(u,w,d,C+".tickcolor",w.color),D("ticks")||(delete w[C].ticklen,delete w[C].tickwidth,delete w[C].tickcolor),h(F,I,D,{dfltColor:j,bgColor:A.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:d[C]}),D("layer")}D("hoverformat"),delete I.type,I._input=F}}oe.exports=function(u,w,c){a(u,w,c,{noUirevision:!0,type:p.name,attributes:d,handleDefaults:m,font:w.font,paper_bgcolor:w.paper_bgcolor,fullData:c,layoutOut:w})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/set_convert":576,"../cartesian/tick_label_defaults":578,"../get_data":593,"../subplot_defaults":632,"./constants":627,"./layout_attributes":630}],632:[function(b,oe,se){"use strict";var y=b("../lib"),x=b("../plot_api/plot_template"),M=b("./domain").defaults;oe.exports=function(_,e,o,a){var l,i,h=a.attributes,s=a.handleDefaults,d=a.partition||"x",p=e._subplots[a.type],f=p.length,g=f&&p[0].replace(/\d+$/,"");function m(A,k){return y.coerce(l,i,h,A,k)}for(var u=0;u<f;u++){var w=p[u];l=_[w]?_[w]:_[w]={},i=x.newContainer(e,w,g),a.noUirevision||m("uirevision",e.uirevision);var c={};c[d]=[u/f,(u+1)/f],M(i,e,m,c),a.id=w,s(l,i,m,a)}}},{"../lib":503,"../plot_api/plot_template":543,"./domain":584}],633:[function(b,oe,se){"use strict";function x(M){var _=M.description?" "+M.description:"",e=M.keys||[];if(e.length>0){for(var o=[],a=0;a<e.length;a++)o[a]="`"+e[a]+"`";_+="Finally, the template string has access to ",_=1===e.length?"variable "+o[0]:"variables "+o.slice(0,-1).join(", ")+" and "+o.slice(-1)+"."}return _}b("../constants/docs"),se.hovertemplateAttrs=function(M,_){M=M||{},x(_=_||{});var e={valType:"string",dflt:"",editType:M.editType||"none"};return!1!==M.arrayOk&&(e.arrayOk=!0),e},se.texttemplateAttrs=function(M,_){M=M||{},x(_=_||{});var e={valType:"string",dflt:"",editType:M.editType||"calc"};return!1!==M.arrayOk&&(e.arrayOk=!0),e}},{"../constants/docs":474}],634:[function(b,oe,se){"use strict";var y=b("./ternary"),x=b("../../plots/get_data").getSubplotCalcData,M=b("../../lib").counterRegex;se.name="ternary";var _=se.attr="subplot";se.idRoot="ternary",se.idRegex=se.attrRegex=M("ternary"),(se.attributes={})[_]={valType:"subplotid",dflt:"ternary",editType:"calc"},se.layoutAttributes=b("./layout_attributes"),se.supplyLayoutDefaults=b("./layout_defaults"),se.plot=function(e){for(var o=e._fullLayout,a=e.calcdata,l=o._subplots.ternary,i=0;i<l.length;i++){var v=l[i],h=x(a,"ternary",v),s=o[v]._subplot;s||(s=new y({id:v,graphDiv:e,container:o._ternarylayer.node()},o),o[v]._subplot=s),s.plot(h,o,e._promises)}},se.clean=function(e,o,a,l){for(var i=l._subplots.ternary||[],v=0;v<i.length;v++){var h=i[v],s=l[h]._subplot;!o[h]&&s&&(s.plotContainer.remove(),s.clipDef.remove(),s.clipDefRelative.remove(),s.layers["a-title"].remove(),s.layers["b-title"].remove(),s.layers["c-title"].remove())}}},{"../../lib":503,"../../plots/get_data":593,"./layout_attributes":635,"./layout_defaults":636,"./ternary":637}],635:[function(b,oe,se){"use strict";var y=b("../../components/color/attributes"),x=b("../domain").attributes,M=b("../cartesian/layout_attributes"),_=b("../../plot_api/edit_types").overrideAll,e=b("../../lib/extend").extendFlat,o={title:{text:M.title.text,font:M.title.font},color:M.color,tickmode:M.tickmode,nticks:e({},M.nticks,{dflt:6,min:1}),tick0:M.tick0,dtick:M.dtick,tickvals:M.tickvals,ticktext:M.ticktext,ticks:M.ticks,ticklen:M.ticklen,tickwidth:M.tickwidth,tickcolor:M.tickcolor,ticklabelstep:M.ticklabelstep,showticklabels:M.showticklabels,showtickprefix:M.showtickprefix,tickprefix:M.tickprefix,showticksuffix:M.showticksuffix,ticksuffix:M.ticksuffix,showexponent:M.showexponent,exponentformat:M.exponentformat,minexponent:M.minexponent,separatethousands:M.separatethousands,tickfont:M.tickfont,tickangle:M.tickangle,tickformat:M.tickformat,tickformatstops:M.tickformatstops,hoverformat:M.hoverformat,showline:e({},M.showline,{dflt:!0}),linecolor:M.linecolor,linewidth:M.linewidth,showgrid:e({},M.showgrid,{dflt:!0}),gridcolor:M.gridcolor,gridwidth:M.gridwidth,griddash:M.griddash,layer:M.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:M._deprecated.title,titlefont:M._deprecated.titlefont}},a=oe.exports=_({domain:x({name:"ternary"}),bgcolor:{valType:"color",dflt:y.background},sum:{valType:"number",dflt:1,min:0},aaxis:o,baxis:o,caxis:o},"plot","from-root");a.uirevision={valType:"any",editType:"none"},a.aaxis.uirevision=a.baxis.uirevision=a.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],636:[function(b,oe,se){"use strict";var y=b("../../components/color"),x=b("../../plot_api/plot_template"),M=b("../../lib"),_=b("../subplot_defaults"),e=b("../cartesian/tick_label_defaults"),o=b("../cartesian/prefix_suffix_defaults"),a=b("../cartesian/tick_mark_defaults"),l=b("../cartesian/tick_value_defaults"),i=b("../cartesian/line_grid_defaults"),v=b("./layout_attributes"),h=["aaxis","baxis","caxis"];function s(p,f,g,m){var u,w,c,A=g("bgcolor"),k=g("sum");m.bgColor=y.combine(A,m.paper_bgcolor);for(var C=0;C<h.length;C++)w=p[u=h[C]]||{},(c=x.newContainer(f,u))._name=u,d(w,c,m,f);var E=f.aaxis,L=f.baxis,D=f.caxis;E.min+L.min+D.min>=k&&(E.min=0,L.min=0,D.min=0,p.aaxis&&delete p.aaxis.min,p.baxis&&delete p.baxis.min,p.caxis&&delete p.caxis.min)}function d(p,f,g,m){var u=v[f._name];function w(L,D){return M.coerce(p,f,u,L,D)}w("uirevision",m.uirevision),f.type="linear";var c=w("color"),A=c!==u.color.dflt?c:g.font.color,k=f._name.charAt(0).toUpperCase(),C="Component "+k,E=w("title.text",C);f._hovertitle=E===C?E:k,M.coerceFont(w,"title.font",{family:g.font.family,size:M.bigFont(g.font.size),color:A}),w("min"),l(p,f,w,"linear"),o(p,f,w,"linear"),e(p,f,w,"linear"),a(p,f,w,{outerTicks:!0}),w("showticklabels")&&(M.coerceFont(w,"tickfont",{family:g.font.family,size:g.font.size,color:A}),w("tickangle"),w("tickformat")),i(p,f,w,{dfltColor:c,bgColor:g.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:u}),w("hoverformat"),w("layer")}oe.exports=function(p,f,g){_(p,f,g,{type:"ternary",attributes:v,handleDefaults:s,font:f.font,paper_bgcolor:f.paper_bgcolor})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../subplot_defaults":632,"./layout_attributes":635}],637:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("tinycolor2"),M=b("../../registry"),_=b("../../lib"),e=_.strTranslate,o=_._,a=b("../../components/color"),l=b("../../components/drawing"),i=b("../cartesian/set_convert"),v=b("../../lib/extend").extendFlat,h=b("../plots"),s=b("../cartesian/axes"),d=b("../../components/dragelement"),p=b("../../components/fx"),f=b("../../components/dragelement/helpers"),g=f.freeMode,m=f.rectMode,u=b("../../components/titles"),w=b("../cartesian/select").prepSelect,c=b("../cartesian/select").selectOnClick,A=b("../cartesian/select").clearSelect,k=b("../cartesian/select").clearSelectionsCache,C=b("../cartesian/constants");function E(Z,Y){this.id=Z.id,this.graphDiv=Z.graphDiv,this.init(Y),this.makeFramework(Y),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}oe.exports=E;var L=E.prototype;L.init=function(Z){this.container=Z._ternarylayer,this.defs=Z._defs,this.layoutId=Z._uid,this.traceHash={},this.layers={}},L.plot=function(Z,Y){var ee=Y[this.id],re=Y._size;this._hasClipOnAxisFalse=!1;for(var X=0;X<Z.length;X++)if(!1===Z[X][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(ee),this.adjustLayout(ee,re),h.generalUpdatePerTraceModule(this.graphDiv,this,Z,ee),this.layers.plotbg.select("path").call(a.fill,ee.bgcolor)},L.makeFramework=function(Z){var Y=this.graphDiv,ee=Z[this.id],re=this.clipId="clip"+this.layoutId+this.id,X=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=_.ensureSingleById(Z._clips,"clipPath",re,function(K){K.append("path").attr("d","M0,0Z")}),this.clipDefRelative=_.ensureSingleById(Z._clips,"clipPath",X,function(K){K.append("path").attr("d","M0,0Z")}),this.plotContainer=_.ensureSingle(this.container,"g",this.id),this.updateLayers(ee),l.setClipUrl(this.layers.backplot,re,Y),l.setClipUrl(this.layers.grids,re,Y)},L.updateLayers=function(Z){var Y=this.layers,ee=["draglayer","plotbg","backplot","grids"];"below traces"===Z.aaxis.layer&&ee.push("aaxis","aline"),"below traces"===Z.baxis.layer&&ee.push("baxis","bline"),"below traces"===Z.caxis.layer&&ee.push("caxis","cline"),ee.push("frontplot"),"above traces"===Z.aaxis.layer&&ee.push("aaxis","aline"),"above traces"===Z.baxis.layer&&ee.push("baxis","bline"),"above traces"===Z.caxis.layer&&ee.push("caxis","cline");var re=this.plotContainer.selectAll("g.toplevel").data(ee,String),X=["agrid","bgrid","cgrid"];re.enter().append("g").attr("class",function(K){return"toplevel "+K}).each(function(K){var ie=y.select(this);Y[K]=ie,"frontplot"===K?ie.append("g").classed("scatterlayer",!0):"backplot"===K?ie.append("g").classed("maplayer",!0):"plotbg"===K?ie.append("path").attr("d","M0,0Z"):"aline"===K||"bline"===K||"cline"===K?ie.append("path"):"grids"===K&&X.forEach(function(q){Y[q]=ie.append("g").classed("grid "+q,!0)})}),re.order()};var D=Math.sqrt(4/3);L.adjustLayout=function(Z,Y){var ee,re,X,K,ie,q,U=this,W=Z.domain,ae=(W.x[0]+W.x[1])/2,G=(W.y[0]+W.y[1])/2,te=W.x[1]-W.x[0],ne=W.y[1]-W.y[0],le=te*Y.w,ue=ne*Y.h,pe=Z.sum,de=Z.aaxis.min,_e=Z.baxis.min,me=Z.caxis.min;le>D*ue?X=(K=ue)*D:K=(X=le)/D,ie=te*X/le,q=ne*K/ue,re=Y.t+Y.h*(1-G)-K/2,U.x0=ee=Y.l+Y.w*ae-X/2,U.y0=re,U.w=X,U.h=K,U.sum=pe,U.xaxis={type:"linear",range:[de+2*me-pe,pe-de-2*_e],domain:[ae-ie/2,ae+ie/2],_id:"x"},i(U.xaxis,U.graphDiv._fullLayout),U.xaxis.setScale(),U.xaxis.isPtWithinRange=function(Ue){return Ue.a>=U.aaxis.range[0]&&Ue.a<=U.aaxis.range[1]&&Ue.b>=U.baxis.range[1]&&Ue.b<=U.baxis.range[0]&&Ue.c>=U.caxis.range[1]&&Ue.c<=U.caxis.range[0]},U.yaxis={type:"linear",range:[de,pe-_e-me],domain:[G-q/2,G+q/2],_id:"y"},i(U.yaxis,U.graphDiv._fullLayout),U.yaxis.setScale(),U.yaxis.isPtWithinRange=function(){return!0};var we=U.yaxis.domain[0],De=U.aaxis=v({},Z.aaxis,{range:[de,pe-_e-me],side:"left",tickangle:(+Z.aaxis.tickangle||0)-30,domain:[we,we+q*D],anchor:"free",position:0,_id:"y",_length:X});i(De,U.graphDiv._fullLayout),De.setScale();var Le=U.baxis=v({},Z.baxis,{range:[pe-de-me,_e],side:"bottom",domain:U.xaxis.domain,anchor:"free",position:0,_id:"x",_length:X});i(Le,U.graphDiv._fullLayout),Le.setScale();var Ie=U.caxis=v({},Z.caxis,{range:[pe-de-_e,me],side:"right",tickangle:(+Z.caxis.tickangle||0)+30,domain:[we,we+q*D],anchor:"free",position:0,_id:"y",_length:X});i(Ie,U.graphDiv._fullLayout),Ie.setScale();var je="M"+ee+","+(re+K)+"h"+X+"l-"+X/2+",-"+K+"Z";U.clipDef.select("path").attr("d",je),U.layers.plotbg.select("path").attr("d",je);var ye="M0,"+K+"h"+X+"l-"+X/2+",-"+K+"Z";U.clipDefRelative.select("path").attr("d",ye);var Me=e(ee,re);U.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Me),U.clipDefRelative.select("path").attr("transform",null);var Oe=e(ee-Le._offset,re+K);U.layers.baxis.attr("transform",Oe),U.layers.bgrid.attr("transform",Oe);var Pe=e(ee+X/2,re)+"rotate(30)"+e(0,-De._offset);U.layers.aaxis.attr("transform",Pe),U.layers.agrid.attr("transform",Pe);var Re=e(ee+X/2,re)+"rotate(-30)"+e(0,-Ie._offset);U.layers.caxis.attr("transform",Re),U.layers.cgrid.attr("transform",Re),U.drawAxes(!0),U.layers.aline.select("path").attr("d",De.showline?"M"+ee+","+(re+K)+"l"+X/2+",-"+K:"M0,0").call(a.stroke,De.linecolor||"#000").style("stroke-width",(De.linewidth||0)+"px"),U.layers.bline.select("path").attr("d",Le.showline?"M"+ee+","+(re+K)+"h"+X:"M0,0").call(a.stroke,Le.linecolor||"#000").style("stroke-width",(Le.linewidth||0)+"px"),U.layers.cline.select("path").attr("d",Ie.showline?"M"+(ee+X/2)+","+re+"l"+X/2+","+K:"M0,0").call(a.stroke,Ie.linecolor||"#000").style("stroke-width",(Ie.linewidth||0)+"px"),U.graphDiv._context.staticPlot||U.initInteractions(),l.setClipUrl(U.layers.frontplot,U._hasClipOnAxisFalse?null:U.clipId,U.graphDiv)},L.drawAxes=function(Z){var Y=this.graphDiv,ee=this.id.substr(7)+"title",re=this.layers,X=this.aaxis,K=this.baxis,ie=this.caxis;if(this.drawAx(X),this.drawAx(K),this.drawAx(ie),Z){var q=Math.max(X.showticklabels?X.tickfont.size/2:0,(ie.showticklabels?.75*ie.tickfont.size:0)+("outside"===ie.ticks?.87*ie.ticklen:0)),U=(K.showticklabels?K.tickfont.size:0)+("outside"===K.ticks?K.ticklen:0)+3;re["a-title"]=u.draw(Y,"a"+ee,{propContainer:X,propName:this.id+".aaxis.title",placeholder:o(Y,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-X.title.font.size/3-q,"text-anchor":"middle"}}),re["b-title"]=u.draw(Y,"b"+ee,{propContainer:K,propName:this.id+".baxis.title",placeholder:o(Y,"Click to enter Component B title"),attributes:{x:this.x0-U,y:this.y0+this.h+.83*K.title.font.size+U,"text-anchor":"middle"}}),re["c-title"]=u.draw(Y,"c"+ee,{propContainer:ie,propName:this.id+".caxis.title",placeholder:o(Y,"Click to enter Component C title"),attributes:{x:this.x0+this.w+U,y:this.y0+this.h+.83*ie.title.font.size+U,"text-anchor":"middle"}})}},L.drawAx=function(Z){var Y,ee=this.graphDiv,re=Z._name,X=re.charAt(0),K=Z._id,ie=this.layers[re],q=X+"tickLayout",U=(Y=Z).ticks+String(Y.ticklen)+String(Y.showticklabels);this[q]!==U&&(ie.selectAll("."+K+"tick").remove(),this[q]=U),Z.setScale();var W=s.calcTicks(Z),ae=s.clipEnds(Z,W),G=s.makeTransTickFn(Z),te=s.getTickSigns(Z)[2],ne=_.deg2rad(30),le=te*(Z.linewidth||1)/2,ue=te*Z.ticklen,pe=this.w,de=this.h,_e="b"===X?"M0,"+le+"l"+Math.sin(ne)*ue+","+Math.cos(ne)*ue:"M"+le+",0l"+Math.cos(ne)*ue+","+-Math.sin(ne)*ue,me={a:"M0,0l"+de+",-"+pe/2,b:"M0,0l-"+pe/2+",-"+de,c:"M0,0l-"+de+","+pe/2}[X];s.drawTicks(ee,Z,{vals:"inside"===Z.ticks?ae:W,layer:ie,path:_e,transFn:G,crisp:!1}),s.drawGrid(ee,Z,{vals:ae,layer:this.layers[X+"grid"],path:me,transFn:G,crisp:!1}),s.drawLabels(ee,Z,{vals:W,layer:ie,transFn:G,labelFns:s.makeLabelFns(Z,0,30)})};var N=C.MINZOOM/2+.87,F="m-0.87,.5h"+N+"v3h-"+(N+5.2)+"l"+(N/2+2.6)+",-"+(.87*N+4.5)+"l2.6,1.5l-"+N/2+","+.87*N+"Z",I="m0.87,.5h-"+N+"v3h"+(N+5.2)+"l-"+(N/2+2.6)+",-"+(.87*N+4.5)+"l-2.6,1.5l"+N/2+","+.87*N+"Z",P="m0,1l"+N/2+","+.87*N+"l2.6,-1.5l-"+(N/2+2.6)+",-"+(.87*N+4.5)+"l-"+(N/2+2.6)+","+(.87*N+4.5)+"l2.6,1.5l"+N/2+",-"+.87*N+"Z",j=!0;function V(Z){y.select(Z).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}L.clearSelect=function(){k(this.dragOptions),A(this.dragOptions.gd)},L.initInteractions=function(){var Z,Y,ee,re,X,K,ie,q,U,W,ae,G,te=this,ne=te.layers.plotbg.select("path").node(),le=te.graphDiv,ue=le._fullLayout._zoomlayer;function pe(ye){var Me={};return Me[te.id+".aaxis.min"]=ye.a,Me[te.id+".baxis.min"]=ye.b,Me[te.id+".caxis.min"]=ye.c,Me}function de(ye,Me){var Oe=le._fullLayout.clickmode;V(le),2===ye&&(le.emit("plotly_doubleclick",null),M.call("_guiRelayout",le,pe({a:0,b:0,c:0}))),Oe.indexOf("select")>-1&&1===ye&&c(Me,le,[te.xaxis],[te.yaxis],te.id,te.dragOptions),Oe.indexOf("event")>-1&&p.click(le,Me,te.id)}function _e(ye,Me){return 1-Me/te.h}function me(ye,Me){return 1-(ye+(te.h-Me)/Math.sqrt(3))/te.w}function we(ye,Me){return(ye-(te.h-Me)/Math.sqrt(3))/te.w}function De(ye,Me){var Oe=ee+ye*Z,Pe=re+Me*Y,Re=Math.max(0,Math.min(1,_e(0,re),_e(0,Pe))),Ue=Math.max(0,Math.min(1,me(ee,re),me(Oe,Pe))),qe=Math.max(0,Math.min(1,we(ee,re),we(Oe,Pe))),Xe=(Re/2+qe)*te.w,lt=(1-Re/2-Ue)*te.w,He=(Xe+lt)/2,$e=lt-Xe,et=(1-Re)*te.h,nt=et-$e/D;$e<C.MINZOOM?(ie=X,ae.attr("d",U),G.attr("d","M0,0Z")):(ie={a:X.a+Re*K,b:X.b+Ue*K,c:X.c+qe*K},ae.attr("d",U+"M"+Xe+","+et+"H"+lt+"L"+He+","+nt+"L"+Xe+","+et+"Z"),G.attr("d","M"+ee+","+re+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Xe+","+et+F+"M"+lt+","+et+I+"M"+He+","+nt+P)),W||(ae.transition().style("fill",q>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),G.transition().style("opacity",1).duration(200),W=!0),le.emit("plotly_relayouting",pe(ie))}function Le(){V(le),ie!==X&&(M.call("_guiRelayout",le,pe(ie)),j&&le.data&&le._context.showTips&&(_.notifier(o(le,"Double-click to zoom back out"),"long"),j=!1))}function Ie(ye,Me){var Oe=ye/te.xaxis._m,Pe=Me/te.yaxis._m,Re=[(ie={a:X.a-Pe,b:X.b+(Oe+Pe)/2,c:X.c-(Oe-Pe)/2}).a,ie.b,ie.c].sort(_.sorterAsc),Ue=Re.indexOf(ie.a),qe=Re.indexOf(ie.b),Xe=Re.indexOf(ie.c);Re[0]<0&&(Re[1]+Re[0]/2<0?(Re[2]+=Re[0]+Re[1],Re[0]=Re[1]=0):(Re[2]+=Re[0]/2,Re[1]+=Re[0]/2,Re[0]=0),Me=(X.a-(ie={a:Re[Ue],b:Re[qe],c:Re[Xe]}).a)*te.yaxis._m,ye=(X.c-ie.c-X.b+ie.b)*te.xaxis._m);var lt=e(te.x0+ye,te.y0+Me);te.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",lt);var He=e(-ye,-Me);te.clipDefRelative.select("path").attr("transform",He),te.aaxis.range=[ie.a,te.sum-ie.b-ie.c],te.baxis.range=[te.sum-ie.a-ie.c,ie.b],te.caxis.range=[te.sum-ie.a-ie.b,ie.c],te.drawAxes(!1),te._hasClipOnAxisFalse&&te.plotContainer.select(".scatterlayer").selectAll(".trace").call(l.hideOutsideRangePoints,te),le.emit("plotly_relayouting",pe(ie))}function je(){M.call("_guiRelayout",le,pe(ie))}this.dragOptions={element:ne,gd:le,plotinfo:{id:te.id,domain:le._fullLayout[te.id].domain,xaxis:te.xaxis,yaxis:te.yaxis},subplot:te.id,prepFn:function(ye,Me,Oe){te.dragOptions.xaxes=[te.xaxis],te.dragOptions.yaxes=[te.yaxis],Z=le._fullLayout._invScaleX,Y=le._fullLayout._invScaleY;var Pe=te.dragOptions.dragmode=le._fullLayout.dragmode;te.dragOptions.minDrag=g(Pe)?1:void 0,"zoom"===Pe?(te.dragOptions.moveFn=De,te.dragOptions.clickFn=de,te.dragOptions.doneFn=Le,function(Re,Ue,qe){var Xe=ne.getBoundingClientRect();ee=Ue-Xe.left,re=qe-Xe.top,le._fullLayout._calcInverseTransform(le);var He=_.apply3DTransform(le._fullLayout._invTransform)(ee,re);ee=He[0],re=He[1],ie=X={a:te.aaxis.range[0],b:te.baxis.range[1],c:te.caxis.range[1]},K=te.aaxis.range[1]-X.a,q=x(te.graphDiv._fullLayout[te.id].bgcolor).getLuminance(),U="M0,"+te.h+"L"+te.w/2+", 0L"+te.w+","+te.h+"Z",W=!1,ae=ue.append("path").attr("class","zoombox").attr("transform",e(te.x0,te.y0)).style({fill:q>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",U),G=ue.append("path").attr("class","zoombox-corners").attr("transform",e(te.x0,te.y0)).style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),te.clearSelect(le)}(0,Me,Oe)):"pan"===Pe?(te.dragOptions.moveFn=Ie,te.dragOptions.clickFn=de,te.dragOptions.doneFn=je,ie=X={a:te.aaxis.range[0],b:te.baxis.range[1],c:te.caxis.range[1]},te.clearSelect(le)):(m(Pe)||g(Pe))&&w(ye,Me,Oe,te.dragOptions,Pe)}},ne.onmousemove=function(ye){p.hover(le,ye,te.id),le._fullLayout._lasthover=ne,le._fullLayout._hoversubplot=te.id},ne.onmouseout=function(ye){le._dragging||d.unhover(le,ye)},d.init(this.dragOptions)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../lib":503,"../../lib/extend":493,"../../registry":638,"../cartesian/axes":554,"../cartesian/constants":561,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"@plotly/d3":58,tinycolor2:312}],638:[function(b,oe,se){"use strict";var y=b("./lib/loggers"),x=b("./lib/noop"),M=b("./lib/push_unique"),_=b("./lib/is_plain_object"),e=b("./lib/dom").addStyleRule,o=b("./lib/extend"),a=b("./plots/attributes"),l=b("./plots/layout_attributes"),i=o.extendFlat,v=o.extendDeepAll;function h(c){var A=c.name,k=c.categories,C=c.meta;if(se.modules[A])y.log("Type "+A+" already registered");else{se.subplotsRegistry[c.basePlotModule.name]||function(j){var V=j.name;if(se.subplotsRegistry[V])y.log("Plot type "+V+" already registered.");else for(var Z in f(j),se.subplotsRegistry[V]=j,se.componentsRegistry)u(Z,j.name)}(c.basePlotModule);for(var E={},L=0;L<k.length;L++)E[k[L]]=!0,se.allCategories[k[L]]=!0;for(var D in se.modules[A]={_module:c,categories:E},C&&Object.keys(C).length&&(se.modules[A].meta=C),se.allTypes.push(A),se.componentsRegistry)g(D,A);c.layoutAttributes&&i(se.traceLayoutAttributes,c.layoutAttributes);var N=c.basePlotModule,F=N.name;if("mapbox"===F){var I=N.constants.styleRules;for(var P in I)e(".js-plotly-plot .plotly .mapboxgl-"+P,I[P])}"geo"!==F&&"mapbox"!==F||void 0===typeof window||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function s(c){if("string"!=typeof c.name)throw new Error("Component module *name* must be a string.");var A=c.name;for(var k in se.componentsRegistry[A]=c,c.layoutAttributes&&(c.layoutAttributes._isLinkedToArray&&M(se.layoutArrayContainers,A),f(c)),se.modules)g(A,k);for(var C in se.subplotsRegistry)u(A,C);for(var E in se.transformsRegistry)m(A,E);c.schema&&c.schema.layout&&v(l,c.schema.layout)}function d(c){if("string"!=typeof c.name)throw new Error("Transform module *name* must be a string.");var A="Transform module "+c.name,k="function"==typeof c.transform,C="function"==typeof c.calcTransform;if(!k&&!C)throw new Error(A+" is missing a *transform* or *calcTransform* method.");for(var E in k&&C&&y.log([A+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),_(c.attributes)||y.log(A+" registered without an *attributes* object."),"function"!=typeof c.supplyDefaults&&y.log(A+" registered without a *supplyDefaults* method."),se.transformsRegistry[c.name]=c,se.componentsRegistry)m(E,c.name)}function p(c){var A=c.name,k=A.split("-")[0],C=c.dictionary,E=c.format,L=C&&Object.keys(C).length,D=E&&Object.keys(E).length,N=se.localeRegistry,F=N[A];if(F||(N[A]=F={}),k!==A){var I=N[k];I||(N[k]=I={}),L&&I.dictionary===F.dictionary&&(I.dictionary=C),D&&I.format===F.format&&(I.format=E)}L&&(F.dictionary=C),D&&(F.format=E)}function f(c){if(c.layoutAttributes){var A=c.layoutAttributes._arrayAttrRegexps;if(A)for(var k=0;k<A.length;k++)M(se.layoutArrayRegexes,A[k])}}function g(c,A){var k=se.componentsRegistry[c].schema;if(k&&k.traces){var C=k.traces[A];C&&v(se.modules[A]._module.attributes,C)}}function m(c,A){var k=se.componentsRegistry[c].schema;if(k&&k.transforms){var C=k.transforms[A];C&&v(se.transformsRegistry[A].attributes,C)}}function u(c,A){var k=se.componentsRegistry[c].schema;if(k&&k.subplots){var C=se.subplotsRegistry[A],E=C.layoutAttributes,L="subplot"===C.attr?C.name:C.attr;Array.isArray(L)&&(L=L[0]);var D=k.subplots[L];E&&D&&v(E,D)}}function w(c){return"object"==typeof c&&(c=c.type),c}se.modules={},se.allCategories={},se.allTypes=[],se.subplotsRegistry={},se.transformsRegistry={},se.componentsRegistry={},se.layoutArrayContainers=[],se.layoutArrayRegexes=[],se.traceLayoutAttributes={},se.localeRegistry={},se.apiMethodRegistry={},se.collectableSubplotTypes=null,se.register=function(c){if(se.collectableSubplotTypes=null,!c)throw new Error("No argument passed to Plotly.register.");c&&!Array.isArray(c)&&(c=[c]);for(var A=0;A<c.length;A++){var k=c[A];if(!k)throw new Error("Invalid module was attempted to be registered!");switch(k.moduleType){case"trace":h(k);break;case"transform":d(k);break;case"component":s(k);break;case"locale":p(k);break;case"apiMethod":se.apiMethodRegistry[k.name]=k.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},se.getModule=function(c){var A=se.modules[w(c)];return!!A&&A._module},se.traceIs=function(c,A){if("various"===(c=w(c)))return!1;var k=se.modules[c];return k||(c&&y.log("Unrecognized trace type "+c+"."),k=se.modules[a.type.dflt]),!!k.categories[A]},se.getTransformIndices=function(c,A){for(var k=[],C=c.transforms||[],E=0;E<C.length;E++)C[E].type===A&&k.push(E);return k},se.hasTransform=function(c,A){for(var k=c.transforms||[],C=0;C<k.length;C++)if(k[C].type===A)return!0;return!1},se.getComponentMethod=function(c,A){var k=se.componentsRegistry[c];return k&&k[A]||x},se.call=function(){var c=arguments[0],A=[].slice.call(arguments,1);return se.apiMethodRegistry[c].apply(null,A)}},{"./lib/dom":491,"./lib/extend":493,"./lib/is_plain_object":504,"./lib/loggers":507,"./lib/noop":512,"./lib/push_unique":518,"./plots/attributes":550,"./plots/layout_attributes":610}],639:[function(b,oe,se){"use strict";var y=b("../registry"),x=b("../lib"),M=x.extendFlat,_=x.extendDeep;function e(o){var a;switch(o){case"themes__thumb":a={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":a={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:a={}}return a}oe.exports=function(o,a){var l,h=o.layout,s=_([],o.data),d=_({},h,e(a.tileClass)),p=o._context||{};if(a.width&&(d.width=a.width),a.height&&(d.height=a.height),"thumbnail"===a.tileClass||"themes__thumb"===a.tileClass){d.annotations=[];var f=Object.keys(d);for(l=0;l<f.length;l++)["xaxis","yaxis","zaxis"].indexOf(f[l].slice(0,5))>-1&&(d[f[l]].title={text:""});for(l=0;l<s.length;l++){var g=s[l];g.showscale=!1,g.marker&&(g.marker.showscale=!1),y.traceIs(g,"pie-like")&&(g.textposition="none")}}if(Array.isArray(a.annotations))for(l=0;l<a.annotations.length;l++)d.annotations.push(a.annotations[l]);var m=Object.keys(d).filter(function(k){return k.match(/^scene\d*$/)});if(m.length){var u={};for("thumbnail"===a.tileClass&&(u={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),l=0;l<m.length;l++){var w=d[m[l]];w.xaxis||(w.xaxis={}),w.yaxis||(w.yaxis={}),w.zaxis||(w.zaxis={}),M(w.xaxis,u),M(w.yaxis,u),M(w.zaxis,u),w._scene=null}}var c=document.createElement("div");a.tileClass&&(c.className=a.tileClass);var A={gd:c,td:c,layout:d,data:s,config:{staticPlot:void 0===a.staticPlot||a.staticPlot,plotGlPixelRatio:void 0===a.plotGlPixelRatio?2:a.plotGlPixelRatio,displaylogo:a.displaylogo||!1,showLink:a.showLink||!1,showTips:a.showTips||!1,mapboxAccessToken:p.mapboxAccessToken}};return"transparent"!==a.setBackground&&(A.config.setBackground=a.setBackground||"opaque"),A.gd.defaultLayout=e(a.tileClass),A}},{"../lib":503,"../registry":638}],640:[function(b,oe,se){"use strict";var y=b("../lib"),x=b("../plot_api/to_image"),M=b("./filesaver"),_=b("./helpers");oe.exports=function(e,o){var a;return y.isPlainObject(e)||(a=y.getGraphDiv(e)),(o=o||{}).format=o.format||"png",o.width=o.width||null,o.height=o.height||null,o.imageDataOnly=!0,new Promise(function(l,i){a&&a._snapshotInProgress&&i(new Error("Snapshotting already in progress.")),y.isIE()&&"svg"!==o.format&&i(new Error(_.MSG_IE_BAD_FORMAT)),a&&(a._snapshotInProgress=!0);var v=x(e,o),h=o.filename||e.fn||"newplot";h+="."+o.format.replace("-","."),v.then(function(s){return a&&(a._snapshotInProgress=!1),M(s,h,o.format)}).then(function(s){l(s)}).catch(function(s){a&&(a._snapshotInProgress=!1),i(s)})})}},{"../lib":503,"../plot_api/to_image":546,"./filesaver":641,"./helpers":642}],641:[function(b,oe,se){"use strict";var y=b("../lib"),x=b("./helpers");oe.exports=function(M,_,e){var o=document.createElement("a"),a="download"in o;return new Promise(function(l,i){var v,h;return y.isIE()?(v=x.createBlob(M,"svg"),window.navigator.msSaveBlob(v,_),v=null,l(_)):a?(v=x.createBlob(M,e),h=x.createObjectURL(v),o.href=h,o.download=_,document.body.appendChild(o),o.click(),document.body.removeChild(o),x.revokeObjectURL(h),v=null,l(_)):y.isSafari()?(x.octetStream(("svg"===e?",":";base64,")+encodeURIComponent(M)),l(_)):void i(new Error("download error"))})}},{"../lib":503,"./helpers":642}],642:[function(b,oe,se){"use strict";var y=b("../registry");se.getDelay=function(M){return M._has&&(M._has("gl3d")||M._has("gl2d")||M._has("mapbox"))?500:0},se.getRedrawFunc=function(M){return function(){y.getComponentMethod("colorbar","draw")(M)}},se.encodeSVG=function(M){return"data:image/svg+xml,"+encodeURIComponent(M)},se.encodeJSON=function(M){return"data:application/json,"+encodeURIComponent(M)};var x=window.URL||window.webkitURL;se.createObjectURL=function(M){return x.createObjectURL(M)},se.revokeObjectURL=function(M){return x.revokeObjectURL(M)},se.createBlob=function(M,_){if("svg"===_)return new window.Blob([M],{type:"image/svg+xml;charset=utf-8"});if("full-json"===_)return new window.Blob([M],{type:"application/json;charset=utf-8"});var e=function(o){for(var a=o.length,l=new ArrayBuffer(a),i=new Uint8Array(l),v=0;v<a;v++)i[v]=o.charCodeAt(v);return l}(window.atob(M));return new window.Blob([e],{type:"image/"+_})},se.octetStream=function(M){document.location.href="data:application/octet-stream"+M},se.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,se.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":638}],643:[function(b,oe,se){"use strict";var y=b("./helpers"),x={getDelay:y.getDelay,getRedrawFunc:y.getRedrawFunc,clone:b("./cloneplot"),toSVG:b("./tosvg"),svgToImg:b("./svgtoimg"),toImage:b("./toimage"),downloadImage:b("./download")};oe.exports=x},{"./cloneplot":639,"./download":640,"./helpers":642,"./svgtoimg":644,"./toimage":645,"./tosvg":646}],644:[function(b,oe,se){"use strict";var y=b("../lib"),x=b("events").EventEmitter,M=b("./helpers");oe.exports=function(_){var e=_.emitter||new x,o=new Promise(function(a,l){var i=window.Image,v=_.svg,h=_.format||"png";if(y.isIE()&&"svg"!==h){var s=new Error(M.MSG_IE_BAD_FORMAT);return l(s),_.promise?o:e.emit("error",s)}var d,p,f=_.canvas,g=_.scale||1,w=g*(_.width||300),c=g*(_.height||150),A=f.getContext("2d",{willReadFrequently:!0}),k=new i;"svg"===h||y.isSafari()?p=M.encodeSVG(v):(d=M.createBlob(v,"svg"),p=M.createObjectURL(d)),f.width=w,f.height=c,k.onload=function(){var C;switch(d=null,M.revokeObjectURL(p),"svg"!==h&&A.drawImage(k,0,0,w,c),h){case"jpeg":C=f.toDataURL("image/jpeg");break;case"png":C=f.toDataURL("image/png");break;case"webp":C=f.toDataURL("image/webp");break;case"svg":C=p;break;default:var E="Image format is not jpeg, png, svg or webp.";if(l(new Error(E)),!_.promise)return e.emit("error",E)}a(C),_.promise||e.emit("success",C)},k.onerror=function(C){if(d=null,M.revokeObjectURL(p),l(C),!_.promise)return e.emit("error",C)},k.src=p});return _.promise?o:e}},{"../lib":503,"./helpers":642,events:84}],645:[function(b,oe,se){"use strict";var y=b("events").EventEmitter,x=b("../registry"),M=b("../lib"),_=b("./helpers"),e=b("./cloneplot"),o=b("./tosvg"),a=b("./svgtoimg");oe.exports=function(l,i){var v=new y,h=e(l,{format:"png"}),s=h.gd;s.style.position="absolute",s.style.left="-5000px",document.body.appendChild(s);var d=_.getRedrawFunc(s);return x.call("_doPlot",s,h.data,h.layout,h.config).then(d).then(function(){var p=_.getDelay(s._fullLayout);setTimeout(function(){var f=o(s),g=document.createElement("canvas");g.id=M.randstr(),(v=a({format:i.format,width:s._fullLayout.width,height:s._fullLayout.height,canvas:g,emitter:v,svg:f})).clean=function(){s&&document.body.removeChild(s)}},p)}).catch(function(p){v.emit("error",p)}),v}},{"../lib":503,"../registry":638,"./cloneplot":639,"./helpers":642,"./svgtoimg":644,"./tosvg":646,events:84}],646:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../lib"),M=b("../components/drawing"),_=b("../components/color"),e=b("../constants/xmlns_namespaces"),o=/"/g,a=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");oe.exports=function(l,i,v){var h,s=l._fullLayout,d=s._paper,p=s._toppaper,f=s.width,g=s.height;d.insert("rect",":first-child").call(M.setRect,0,0,f,g).call(_.fill,s.paper_bgcolor);var m=s._basePlotModules||[];for(h=0;h<m.length;h++){var u=m[h];u.toSVG&&u.toSVG(l)}if(p){var w=p.node().childNodes,c=Array.prototype.slice.call(w);for(h=0;h<c.length;h++){var A=c[h];A.childNodes.length&&d.node().appendChild(A)}}s._draggers&&s._draggers.remove(),d.node().style.background="",d.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var C=y.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){C.style({visibility:null,display:null});var E=this.style.fontFamily;E&&-1!==E.indexOf('"')&&C.style("font-family",E.replace(o,"TOBESTRIPPED"))}else C.remove()}),d.selectAll(".gradient_filled,.pattern_filled").each(function(){var C=y.select(this),E=this.style.fill;E&&-1!==E.indexOf("url(")&&C.style("fill",E.replace(o,"TOBESTRIPPED"));var L=this.style.stroke;L&&-1!==L.indexOf("url(")&&C.style("stroke",L.replace(o,"TOBESTRIPPED"))}),"pdf"!==i&&"eps"!==i||d.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),d.node().setAttributeNS(e.xmlns,"xmlns",e.svg),d.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),"svg"===i&&v&&(d.attr("width",v*f),d.attr("height",v*g),d.attr("viewBox","0 0 "+f+" "+g));var C,E,L,k=(new window.XMLSerializer).serializeToString(d.node());return C=k,E=y.select("body").append("div").style({display:"none"}).html(""),L=C.replace(/(&[^;]*;)/gi,function(D){return"&lt;"===D?"&#60;":"&rt;"===D?"&#62;":-1!==D.indexOf("<")||-1!==D.indexOf(">")?"":E.html(D).text()}),E.remove(),k=(k=(k=L).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(a,"'"),x.isIE()&&(k=(k=(k=k.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),k}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],647:[function(b,oe,se){"use strict";var y=b("../../lib");oe.exports=function(x,M){for(var _=0;_<x.length;_++)x[_].i=_;y.mergeArray(M.text,x,"tx"),y.mergeArray(M.hovertext,x,"htx");var e=M.marker;if(e){y.mergeArray(e.opacity,x,"mo",!0),y.mergeArray(e.color,x,"mc");var o=e.line;o&&(y.mergeArray(o.color,x,"mlc"),y.mergeArrayCastPositive(o.width,x,"mlw"))}}},{"../../lib":503}],648:[function(b,oe,se){"use strict";var y=b("../scatter/attributes"),x=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=b("../../plots/template_attributes").hovertemplateAttrs,_=b("../../plots/template_attributes").texttemplateAttrs,e=b("../../components/colorscale/attributes"),o=b("../../plots/font_attributes"),a=b("./constants"),l=b("../../components/drawing/attributes").pattern,i=b("../../lib/extend").extendFlat,v=o({editType:"calc",arrayOk:!0,colorEditType:"style"}),h=i({},y.marker.line.width,{dflt:0}),s=i({width:h,editType:"calc"},e("marker.line")),d=i({line:s,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:l});oe.exports={x:y.x,x0:y.x0,dx:y.dx,y:y.y,y0:y.y0,dy:y.dy,xperiod:y.xperiod,yperiod:y.yperiod,xperiod0:y.xperiod0,yperiod0:y.yperiod0,xperiodalignment:y.xperiodalignment,yperiodalignment:y.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),text:y.text,texttemplate:_({editType:"plot"},{keys:a.eventDataKeys}),hovertext:y.hovertext,hovertemplate:M({},{keys:a.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:i({},v,{}),insidetextfont:i({},v,{}),outsidetextfont:i({},v,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:i({},y.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:d,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:y.selected.marker.opacity,color:y.selected.marker.color,editType:"style"},textfont:y.selected.textfont,editType:"style"},unselected:{marker:{opacity:y.unselected.marker.opacity,color:y.unselected.marker.color,editType:"style"},textfont:y.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":927,"./constants":650}],649:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axes"),x=b("../../plots/cartesian/align_period"),M=b("../../components/colorscale/helpers").hasColorscale,_=b("../../components/colorscale/calc"),e=b("./arrays_to_calcdata"),o=b("../scatter/calc_selection");oe.exports=function(a,l){var i,v,h,s,d,p,f=y.getFromId(a,l.xaxis||"x"),g=y.getFromId(a,l.yaxis||"y"),m={msUTC:!(!l.base&&0!==l.base)};"h"===l.orientation?(i=f.makeCalcdata(l,"x",m),h=g.makeCalcdata(l,"y"),s=x(l,g,"y",h),d=!!l.yperiodalignment,p="y"):(i=g.makeCalcdata(l,"y",m),h=f.makeCalcdata(l,"x"),s=x(l,f,"x",h),d=!!l.xperiodalignment,p="x"),v=s.vals;for(var u=Math.min(v.length,i.length),w=new Array(u),c=0;c<u;c++)w[c]={p:v[c],s:i[c]},d&&(w[c].orig_p=h[c],w[c][p+"End"]=s.ends[c],w[c][p+"Start"]=s.starts[c]),l.ids&&(w[c].id=String(l.ids[c]));return M(l,"marker")&&_(a,l,{vals:l.marker.color,containerStr:"marker",cLetter:"c"}),M(l,"marker.line")&&_(a,l,{vals:l.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(w,l),o(w,l),w}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929,"./arrays_to_calcdata":647}],650:[function(b,oe,se){"use strict";oe.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],651:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../lib").isArrayOrTypedArray,M=b("../../constants/numerical").BADNUM,_=b("../../registry"),e=b("../../plots/cartesian/axes"),o=b("../../plots/cartesian/constraints").getAxisGroup,a=b("./sieve.js");function l(u,w,c,A,k){if(A.length){var C,E,L,D;switch(function(N,F){var I,P;for(I=0;I<F.length;I++){var j,V=F[I],Z=V[0].trace,Y="funnel"===Z.type?Z._base:Z.base,ee="h"===Z.orientation?Z.xcalendar:Z.ycalendar,re="category"===N.type||"multicategory"===N.type?function(){return null}:N.d2c;if(x(Y)){for(P=0;P<Math.min(Y.length,V.length);P++)j=re(Y[P],0,ee),y(j)?(V[P].b=+j,V[P].hasB=1):V[P].b=0;for(;P<V.length;P++)V[P].b=0}else{j=re(Y,0,ee);var X=y(j);for(j=X?j:0,P=0;P<V.length;P++)V[P].b=j,X&&(V[P].hasB=1)}}}(c,A),k.mode){case"overlay":i(w,c,A,k);break;case"group":for(C=[],E=[],L=0;L<A.length;L++)void 0===(D=A[L])[0].trace.offset?E.push(D):C.push(D);E.length&&(N=u,I=c,V=new a(E,{posAxis:F=w,sepNegVal:!1,overlapNoMerge:!(j=k).norm}),function(Z,Y,ee,re){for(var X=Z._fullLayout,q=ee.minDiff,U=ee.traces,W=U.length,ae=ee.positions.length!==ee.distinctPositions.length,G=q*(1-re.gap),te=o(X,Y._id)+U[0][0].trace.orientation,ne=X._alignmentOpts[te]||{},le=0;le<W;le++){var ue,pe,de=U[le],_e=de[0].trace,we=Object.keys((ne[_e.alignmentgroup]||{}).offsetGroups||{}).length,De=(ue=we?G/we:ae?G/W:G)*(1-(re.groupgap||0));pe=we?((2*_e._offsetIndex+1-we)*ue-De)/2:ae?((2*le+1-W)*ue-De)/2:-De/2;var Le=de[0].t;Le.barwidth=De,Le.poffset=pe,Le.bargroupwidth=G,Le.bardelta=q}ee.binWidth=U[0][0].t.barwidth/100,h(ee),s(Y,ee),d(Y,ee,ae)}(N,F,V,j),function(Z,Y){for(var ee=Z.traces,re=0;re<ee.length;re++){var X=ee[re];if(void 0===X[0].trace.base)for(var K=new a([X],{posAxis:Y,sepNegVal:!0,overlapNoMerge:!0}),ie=0;ie<X.length;ie++){var q=X[ie];if(q.p!==M){var U=K.put(q.p,q.b+q.s);U&&(q.b=U)}}}}(V,F),j.norm?(f(V),g(I,V,j)):p(I,V)),C.length&&i(w,c,C,k);break;case"stack":case"relative":for(C=[],E=[],L=0;L<A.length;L++)void 0===(D=A[L])[0].trace.base?E.push(D):C.push(D);E.length&&function(N,F,I,P,j){var V=new a(P,{posAxis:F,sepNegVal:"relative"===j.mode,overlapNoMerge:!(j.norm||"stack"===j.mode||"relative"===j.mode)});v(F,V,j),function(X,K,ie){var q,U,W,ae,G,te,ne=m(X),le=K.traces;for(ae=0;ae<le.length;ae++)if("funnel"===(U=(q=le[ae])[0].trace).type)for(G=0;G<q.length;G++)(te=q[G]).s!==M&&K.put(te.p,-.5*te.s);for(ae=0;ae<le.length;ae++){W="funnel"===(U=(q=le[ae])[0].trace).type;var ue=[];for(G=0;G<q.length;G++)if((te=q[G]).s!==M){var pe,de=K.put(te.p,pe=W?te.s:te.s+te.b),_e=de+pe;te.b=de,te[ne]=_e,ie.norm||(ue.push(_e),te.hasB&&ue.push(de))}ie.norm||(U._extremes[X._id]=e.findExtremes(X,ue,{tozero:!0,padded:!0}))}}(I,V,j);for(var Z=0;Z<P.length;Z++)for(var Y=P[Z],ee=0;ee<Y.length;ee++){var re=Y[ee];re.s!==M&&re.b+re.s===V.get(re.p,re.s)&&(re._outmost=!0)}j.norm&&g(I,V,j)}(0,w,c,E,k),C.length&&i(w,c,C,k)}!function(N,F){var I,P,j,V=m(F),Z={},Y=1/0,ee=-1/0;for(I=0;I<N.length;I++)for(j=N[I],P=0;P<j.length;P++){var re=j[P].p;y(re)&&(Y=Math.min(Y,re),ee=Math.max(ee,re))}var X=1e4/(ee-Y),K=Z.round=function(te){return String(Math.round(X*(te-Y)))};for(I=0;I<N.length;I++){(j=N[I])[0].t.extents=Z;var ie=j[0].t.poffset,q=Array.isArray(ie);for(P=0;P<j.length;P++){var U=j[P],W=U[V]-U.w/2;if(y(W)){var ae=U[V]+U.w/2,G=K(U.p);Z[G]=Z[G]?[Math.min(W,Z[G][0]),Math.max(ae,Z[G][1])]:[W,ae]}U.p0=U.p+(q?ie[P]:ie),U.p1=U.p0+U.w,U.s0=U.b,U.s1=U.s0+U.s}}}(A,w)}var N,F,I,j,V}function i(u,w,c,A){for(var k=0;k<c.length;k++){var E=new a([c[k]],{posAxis:u,sepNegVal:!1,overlapNoMerge:!A.norm});v(u,E,A),A.norm?(f(E),g(w,E,A)):p(w,E)}}function v(u,w,c){for(var A=w.minDiff,k=w.traces,C=A*(1-c.gap),E=C*(1-(c.groupgap||0)),L=-E/2,D=0;D<k.length;D++){var N=k[D][0].t;N.barwidth=E,N.poffset=L,N.bargroupwidth=C,N.bardelta=A}w.binWidth=k[0][0].t.barwidth/100,h(w),s(u,w),d(u,w)}function h(u){var w,c,A=u.traces;for(w=0;w<A.length;w++){var k,C=A[w],E=C[0],L=E.trace,D=E.t,N=L._offset||L.offset,F=D.poffset;if(x(N)){for(k=Array.prototype.slice.call(N,0,C.length),c=0;c<k.length;c++)y(k[c])||(k[c]=F);for(c=k.length;c<C.length;c++)k.push(F);D.poffset=k}else void 0!==N&&(D.poffset=N);var I=L._width||L.width,P=D.barwidth;if(x(I)){var j=Array.prototype.slice.call(I,0,C.length);for(c=0;c<j.length;c++)y(j[c])||(j[c]=P);for(c=j.length;c<C.length;c++)j.push(P);if(D.barwidth=j,void 0===N){for(k=[],c=0;c<C.length;c++)k.push(F+(P-j[c])/2);D.poffset=k}}else void 0!==I&&(D.barwidth=I,void 0===N&&(D.poffset=F+(P-I)/2))}}function s(u,w){for(var c=w.traces,A=m(u),k=0;k<c.length;k++)for(var C=c[k],E=C[0].t,L=E.poffset,D=Array.isArray(L),N=E.barwidth,F=Array.isArray(N),I=0;I<C.length;I++){var P=C[I],j=P.w=F?N[I]:N;P[A]=P.p+(D?L[I]:L)+j/2}}function d(u,w,c){var A=w.traces,k=w.minDiff/2;e.minDtick(u,w.minDiff,w.distinctPositions[0],c);for(var C=0;C<A.length;C++){var E,L,D,N,F=A[C],I=F[0],P=I.trace,j=[];for(N=0;N<F.length;N++)L=(E=F[N]).p-k,j.push(L,D=E.p+k);if(P.width||P.offset){var V=I.t,Z=V.poffset,Y=V.barwidth,ee=Array.isArray(Z),re=Array.isArray(Y);for(N=0;N<F.length;N++)D=(L=(E=F[N]).p+(ee?Z[N]:Z))+(re?Y[N]:Y),j.push(L,D)}P._extremes[u._id]=e.findExtremes(u,j,{padded:!1})}}function p(u,w){for(var c=w.traces,A=m(u),k=0;k<c.length;k++){for(var C=c[k],E=C[0].trace,L=[],D=!1,N=0;N<C.length;N++){var F=C[N],I=F.b,P=I+F.s;F[A]=P,L.push(P),F.hasB&&L.push(I),F.hasB&&F.b||(D=!0)}E._extremes[u._id]=e.findExtremes(u,L,{tozero:D,padded:!0})}}function f(u){for(var w=u.traces,c=0;c<w.length;c++)for(var A=w[c],k=0;k<A.length;k++){var C=A[k];C.s!==M&&u.put(C.p,C.b+C.s)}}function g(u,w,c){var A=w.traces,k=m(u),C="fraction"===c.norm?1:100,E=C/1e9,L=u.l2c(u.c2l(0)),D="stack"===c.mode?C:L;function N(ie){return y(u.c2l(ie))&&(ie<L-E||ie>D+E||!y(L))}for(var F=0;F<A.length;F++){for(var I=A[F],P=I[0].trace,j=[],V=!1,Z=!1,Y=0;Y<I.length;Y++){var ee=I[Y];if(ee.s!==M){var re=Math.abs(C/w.get(ee.p,ee.s));ee.b*=re,ee.s*=re;var X=ee.b,K=X+ee.s;ee[k]=K,j.push(K),Z=Z||N(K),ee.hasB&&(j.push(X),Z=Z||N(X)),ee.hasB&&ee.b||(V=!0)}}P._extremes[u._id]=e.findExtremes(u,j,{tozero:V,padded:Z})}}function m(u){return u._id.charAt(0)}oe.exports={crossTraceCalc:function(u,w){for(var c=w.xaxis,A=w.yaxis,k=u._fullLayout,C=u._fullData,E=u.calcdata,L=[],D=[],N=0;N<C.length;N++){var F=C[N];if(!0===F.visible&&_.traceIs(F,"bar")&&F.xaxis===c._id&&F.yaxis===A._id&&("h"===F.orientation?L.push(E[N]):D.push(E[N]),F._computePh))for(var I=u.calcdata[N],P=0;P<I.length;P++)"function"==typeof I[P].ph0&&(I[P].ph0=I[P].ph0()),"function"==typeof I[P].ph1&&(I[P].ph1=I[P].ph1())}var j={xCat:"category"===c.type||"multicategory"===c.type,yCat:"category"===A.type||"multicategory"===A.type,mode:k.barmode,norm:k.barnorm,gap:k.bargap,groupgap:k.bargroupgap};l(u,c,A,D,j),l(u,A,c,L,j)},setGroupPositions:l}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562,"../../registry":638,"./sieve.js":661,"fast-isnumeric":190}],652:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../components/color"),M=b("../../registry"),_=b("../scatter/xy_defaults"),e=b("../scatter/period_defaults"),o=b("./style_defaults"),a=b("../../plots/cartesian/constraints").getAxisGroup,l=b("./attributes"),i=y.coerceFont;function v(s,d,p,f){var g=d.orientation,u=a(p,d[{v:"x",h:"y"}[g]+"axis"])+g,w=p._alignmentOpts||{},c=f("alignmentgroup"),A=w[u];A||(A=w[u]={});var k=A[c];k?k.traces.push(d):k=A[c]={traces:[d],alignmentIndex:Object.keys(A).length,offsetGroups:{}};var C=f("offsetgroup"),E=k.offsetGroups,L=E[C];C&&(L||(L=E[C]={offsetIndex:Object.keys(E).length}),d._offsetIndex=L.offsetIndex)}function h(s,d,p,f,g,m){var u=!1!==(m=m||{}).moduleHasSelected,w=!1!==m.moduleHasUnselected,c=!1!==m.moduleHasConstrain,A=!1!==m.moduleHasCliponaxis,k=!1!==m.moduleHasTextangle,C=!1!==m.moduleHasInsideanchor,E=!!m.hasPathbar,L=Array.isArray(g)||"auto"===g,D=L||"inside"===g,N=L||"outside"===g;if(D||N){var F=i(f,"textfont",p.font),I=y.extendFlat({},F),P=!(s.textfont&&s.textfont.color);if(P&&delete I.color,i(f,"insidetextfont",I),E){var j=y.extendFlat({},F);P&&delete j.color,i(f,"pathbar.textfont",j)}N&&i(f,"outsidetextfont",F),u&&f("selected.textfont.color"),w&&f("unselected.textfont.color"),c&&f("constraintext"),A&&f("cliponaxis"),k&&f("textangle"),f("texttemplate")}D&&C&&f("insidetextanchor")}oe.exports={supplyDefaults:function(s,d,p,f){function g(c,A){return y.coerce(s,d,l,c,A)}if(_(s,d,f,g)){e(s,d,f,g),g("xhoverformat"),g("yhoverformat"),g("orientation",d.x&&!d.y?"h":"v"),g("base"),g("offset"),g("width"),g("text"),g("hovertext"),g("hovertemplate");var m=g("textposition");h(s,0,f,g,m,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o(s,d,g,p,f);var u=(d.marker.line||{}).color,w=M.getComponentMethod("errorbars","supplyDefaults");w(s,d,u||x.defaultLine,{axis:"y"}),w(s,d,u||x.defaultLine,{axis:"x",inherit:"y"}),y.coerceSelectionMarkerOpacity(d,g)}else d.visible=!1},crossTraceDefaults:function(s,d){var p;function f(m){return y.coerce(p._input,p,l,m)}if("group"===d.barmode)for(var g=0;g<s.length;g++)"bar"===(p=s[g]).type&&v(0,p,d,f)},handleGroupingDefaults:v,handleText:h}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/constraints":562,"../../registry":638,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":648,"./style_defaults":663}],653:[function(b,oe,se){"use strict";oe.exports=function(y,x,M){return y.x="xVal"in x?x.xVal:x.x,y.y="yVal"in x?x.yVal:x.y,x.xa&&(y.xaxis=x.xa),x.ya&&(y.yaxis=x.ya),"h"===M.orientation?(y.label=y.y,y.value=y.x):(y.label=y.x,y.value=y.y),y}},{}],654:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("tinycolor2"),M=b("../../lib").isArrayOrTypedArray;se.coerceString=function(_,e,o){if("string"==typeof e){if(e||!_.noBlank)return e}else if(("number"==typeof e||!0===e)&&!_.strict)return String(e);return void 0!==o?o:_.dflt},se.coerceNumber=function(_,e,o){if(y(e)){e=+e;var a=_.min,l=_.max;if(!(void 0!==a&&e<a||void 0!==l&&e>l))return e}return void 0!==o?o:_.dflt},se.coerceColor=function(_,e,o){return x(e).isValid()?e:void 0!==o?o:_.dflt},se.coerceEnumerated=function(_,e,o){return _.coerceNumber&&(e=+e),-1!==_.values.indexOf(e)?e:void 0!==o?o:_.dflt},se.getValue=function(_,e){var o;return Array.isArray(_)?e<_.length&&(o=_[e]):o=_,o},se.getLineWidth=function(_,e){return 0<e.mlw?e.mlw:M(_.marker.line.width)?0:_.marker.line.width}},{"../../lib":503,"fast-isnumeric":190,tinycolor2:312}],655:[function(b,oe,se){"use strict";var y=b("../../components/fx"),x=b("../../registry"),M=b("../../components/color"),_=b("../../lib").fillText,e=b("./helpers").getLineWidth,o=b("../../plots/cartesian/axes").hoverLabelText,a=b("../../constants/numerical").BADNUM;function l(v,h,s,d,p){var f,g,m,u,w,c,A,k=v.cd,C=k[0].trace,E=k[0].t,L="closest"===d,D="waterfall"===C.type,N=v.maxHoverDistance,F=v.maxSpikeDistance;"h"===C.orientation?(f=s,g=h,m="y",u="x",w=q,c=K):(f=h,g=s,m="x",u="y",c=q,w=K);var I=C[m+"period"],P=L||I;function j(ue){return Z(ue,-1)}function V(ue){return Z(ue,1)}function Z(ue,pe){return ue[m]+pe*ue.w/2}function Y(ue){return ue[m+"End"]-ue[m+"Start"]}var ee=L?j:I?function(ue){return ue.p-Y(ue)/2}:function(ue){return Math.min(j(ue),ue.p-E.bardelta/2)},re=L?V:I?function(ue){return ue.p+Y(ue)/2}:function(ue){return Math.max(V(ue),ue.p+E.bardelta/2)};function X(ue,pe,de){return p.finiteRange&&(de=0),y.inbox(ue-f,pe-f,de+Math.min(1,Math.abs(pe-ue)/A)-1)}function K(ue){return X(ee(ue),re(ue),N)}function ie(ue){var pe=ue[u];if(D){var de=Math.abs(ue.rawS)||0;g>0?pe+=de:g<0&&(pe-=de)}return pe}function q(ue){var pe=g,de=ue.b,_e=ie(ue);return y.inbox(de-pe,_e-pe,N+(_e-pe)/(_e-de)-1)}var U=v[m+"a"],W=v[u+"a"];A=Math.abs(U.r2c(U.range[1])-U.r2c(U.range[0]));var ue,pe,de,_e,ae=y.getDistanceFunction(d,w,c,function(ue){return(w(ue)+c(ue))/2});if(y.getClosest(k,ae,v),!1!==v.index&&k[v.index].p!==a){P||(ee=function(ue){return Math.min(j(ue),ue.p-E.bargroupwidth/2)},re=function(ue){return Math.max(V(ue),ue.p+E.bargroupwidth/2)});var G=k[v.index],te=C.base?G.b+G.s:G.s;v[u+"0"]=v[u+"1"]=W.c2p(G[u],!0),v[u+"LabelVal"]=te;var ne=E.extents[E.extents.round(G.p)];return v[m+"0"]=U.c2p(L?ee(G):ne[0],!0),v[m+"1"]=U.c2p(L?re(G):ne[1],!0),v[m+"LabelVal"]=void 0!==G.orig_p?G.orig_p:G.p,v.labelLabel=o(U,v[m+"LabelVal"],C[m+"hoverformat"]),v.valueLabel=o(W,v[u+"LabelVal"],C[u+"hoverformat"]),v.baseLabel=o(W,G.b,C[u+"hoverformat"]),v.spikeDistance=(pe=g,de=(ue=G).b,_e=ie(ue),(y.inbox(de-pe,_e-pe,F+(_e-pe)/(_e-de)-1)+function(ue){return X(j(ue),V(ue),F)}(G))/2),v[m+"Spike"]=U.c2p(G.p,!0),_(G,C,v),v.hovertemplate=C.hovertemplate,v}}function i(v,h){var s=h.mcc||v.marker.color,d=h.mlcc||v.marker.line.color,p=e(v,h);return M.opacity(s)?s:M.opacity(d)&&p?d:void 0}oe.exports={hoverPoints:function(v,h,s,d,p){var f=l(v,h,s,d,p);if(f){var g=f.cd,m=g[0].trace,u=g[f.index];return f.color=i(m,u),x.getComponentMethod("errorbars","hoverInfo")(u,m,f),[f]}},hoverOnBars:l,getTraceColor:i}},{"../../components/color":366,"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./helpers":654}],656:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc").crossTraceCalc,colorbar:b("../scatter/marker_colorbar"),arraysToCalcdata:b("./arrays_to_calcdata"),plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"bar",basePlotModule:b("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":945,"./arrays_to_calcdata":647,"./attributes":648,"./calc":649,"./cross_trace_calc":651,"./defaults":652,"./event_data":653,"./hover":655,"./layout_attributes":657,"./layout_defaults":658,"./plot":659,"./select":660,"./style":662}],657:[function(b,oe,se){"use strict";oe.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],658:[function(b,oe,se){"use strict";var y=b("../../registry"),x=b("../../plots/cartesian/axes"),M=b("../../lib"),_=b("./layout_attributes");oe.exports=function(e,o,a){function l(m,u){return M.coerce(e,o,_,m,u)}for(var i=!1,v=!1,h=!1,s={},d=l("barmode"),p=0;p<a.length;p++){var f=a[p];if(y.traceIs(f,"bar")&&f.visible){if(i=!0,"group"===d){var g=f.xaxis+f.yaxis;s[g]&&(h=!0),s[g]=!0}f.visible&&"histogram"===f.type&&"category"!==x.getFromId({_fullLayout:o},f["v"===f.orientation?"xaxis":"yaxis"]).type&&(v=!0)}}i?("overlay"!==d&&l("barnorm"),l("bargap",v&&!h?0:.2),l("bargroupgap")):delete o.barmode}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./layout_attributes":657}],659:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("fast-isnumeric"),M=b("../../lib"),_=b("../../lib/svg_text_utils"),e=b("../../components/color"),o=b("../../components/drawing"),a=b("../../registry"),l=b("../../plots/cartesian/axes").tickText,i=b("./uniform_text"),v=i.recordMinTextSize,h=i.clearMinTextSize,s=b("./style"),d=b("./helpers"),p=b("./constants"),f=b("./attributes"),g=f.text,m=f.textposition,u=b("../../components/fx/helpers").appendArrayPointValue,w=p.TEXTPAD;function c(F){return F.id}function k(F,I){return F<I?1:-1}function C(F,I,P,j){var V;return!I.uniformtext.mode&&E(P)?(j&&(V=j()),F.transition().duration(P.duration).ease(P.easing).each("end",function(){V&&V()}).each("interrupt",function(){V&&V()})):F}function E(F){return F&&F.duration>0}function L(F){return"auto"===F?0:F}function D(F,I){var P=Math.PI/180*I,j=Math.abs(Math.sin(P)),V=Math.abs(Math.cos(P));return{x:F.width*V+F.height*j,y:F.width*j+F.height*V}}function N(F,I,P,j,V,Z){var Y=!!Z.isHorizontal,ee=!!Z.constrained,re=Z.angle||0,X=Z.anchor||"end",K="end"===X,ie="start"===X,q=((Z.leftToRight||0)+1)/2,U=1-q,W=V.width,ae=V.height,G=Math.abs(I-F),te=Math.abs(j-P),ne=G>2*w&&te>2*w?w:0;G-=2*ne,te-=2*ne;var le=L(re);"auto"!==re||W<=G&&ae<=te||!(W>G||ae>te)||(W>te||ae>G)&&W<ae==G<te||(le+=90);var ue=D(V,le),pe=1;ee&&(pe=Math.min(1,G/ue.x,te/ue.y));var de=V.left*U+V.right*q,_e=(V.top+V.bottom)/2,me=(F+w)*U+(I-w)*q,we=(P+j)/2,De=0,Le=0;if(ie||K){var Ie=(Y?ue.x:ue.y)/2,je=Y?k(F,I):k(P,j);Y?ie?(me=F+je*ne,De=-je*Ie):(me=I-je*ne,De=je*Ie):ie?(we=P+je*ne,Le=-je*Ie):(we=j-je*ne,Le=je*Ie)}return{textX:de,textY:_e,targetX:me,targetY:we,anchorX:De,anchorY:Le,scale:pe,rotate:le}}oe.exports={plot:function(F,I,P,j,V,Z){var Y=I.xaxis,ee=I.yaxis,re=F._fullLayout;V||(V={mode:re.barmode,norm:re.barmode,gap:re.bargap,groupgap:re.bargroupgap},h("bar",re));var X=M.makeTraceGroups(j,P,"trace bars").each(function(K){var ie=y.select(this),q=K[0].trace,ae="bar"===q.type||"funnel"===q.type,G=0;"waterfall"===q.type&&q.connector.visible&&"between"===q.connector.mode&&(G=q.connector.line.width/2);var te="h"===q.orientation,ne=E(V),le=M.ensureSingle(ie,"g","points"),ue=function(F){if(F.ids)return c}(q),pe=le.selectAll("g.point").data(M.identity,ue);pe.enter().append("g").classed("point",!0),pe.exit().remove(),pe.each(function(_e,me){var we,De,He,$e,et,nt,ct,bt,kt,Bt,Le=y.select(this),Ie=($e=Y,et=ee,bt=[],Bt=(nt=te)?et:$e,(ct=[])[0]=(kt=nt?$e:et).c2p((He=_e).s0,!0),bt[0]=Bt.c2p(He.p0,!0),ct[1]=kt.c2p(He.s1,!0),bt[1]=Bt.c2p(He.p1,!0),nt?[ct,bt]:[bt,ct]),je=Ie[0][0],ye=Ie[0][1],Me=Ie[1][0],Oe=Ie[1][1],Pe=0==(te?ye-je:Oe-Me);if(Pe&&ae&&d.getLineWidth(q,_e)&&(Pe=!1),Pe||(Pe=!(x(je)&&x(ye)&&x(Me)&&x(Oe))),_e.isBlank=Pe,Pe&&(te?ye=je:Oe=Me),G&&!Pe&&(te?(je-=k(je,ye)*G,ye+=k(je,ye)*G):(Me-=k(Me,Oe)*G,Oe+=k(Me,Oe)*G)),"waterfall"===q.type){if(!Pe){var Re=q[_e.dir].marker;we=Re.line.width,De=Re.color}}else we=d.getLineWidth(q,_e),De=_e.mc||q.marker.color;function Ue(He){var $e=y.round(we/2%1,2);return 0===V.gap&&0===V.groupgap?y.round(Math.round(He)-$e,2):He}if(!F._context.staticPlot){var qe=e.opacity(De)<1||we>.01?Ue:function(He,$e,et){return et&&He===$e?He:Math.abs(He-$e)>=2?Ue(He):He>$e?Math.ceil(He):Math.floor(He)};je=qe(je,ye,te),ye=qe(ye,je,te),Me=qe(Me,Oe,!te),Oe=qe(Oe,Me,!te)}var Xe=C(M.ensureSingle(Le,"path"),re,V,Z);if(Xe.style("vector-effect","non-scaling-stroke").attr("d",isNaN((ye-je)*(Oe-Me))||Pe&&F._context.staticPlot?"M0,0Z":"M"+je+","+Me+"V"+Oe+"H"+ye+"V"+Me+"Z").call(o.setClipUrl,I.layerClipId,F),!re.uniformtext.mode&&ne){var lt=o.makePointStyleFns(q);o.singlePointStyle(_e,Xe,q,lt,F)}(function(He,$e,et,nt,ct,bt,kt,Bt,Et,ht,at){var Ft,en=$e.xaxis,Qt=$e.yaxis,tn=He._fullLayout;function dn(fn,nn,In){return M.ensureSingle(fn,"text").text(nn).attr({class:"bartext bartext-"+Ft,"text-anchor":"middle","data-notex":1}).call(o.font,In).call(_.convertToTspans,He)}var nn,In,Dn,kn,rn,pn,Mn=nt[0].trace,sn="h"===Mn.orientation,ke=(In=ct,Dn=en,kn=Qt,rn=(pn=(nn=nt)[0].trace).texttemplate?function(gn,Pn,jn,Kn,rr){var lr=Pn[0].trace,kr=M.castOption(lr,jn,"texttemplate");if(!kr)return"";var Xr,sr,oi,Gr,Lr="histogram"===lr.type,Jr="waterfall"===lr.type,Mi="funnel"===lr.type,Jn="h"===lr.orientation;function br(wr){return l(Gr,Gr.c2l(wr),!0).text}Jn?(Xr="y",sr=rr,oi="x",Gr=Kn):(Xr="x",sr=Kn,oi="y",Gr=rr);var Fr=Pn[jn],cr={};cr.label=Fr.p,cr.labelLabel=cr[Xr+"Label"]=l(sr,sr.c2l(Fr.p),!0).text;var ui=M.castOption(lr,Fr.i,"text");(0===ui||ui)&&(cr.text=ui),cr.value=Fr.s,cr.valueLabel=cr[oi+"Label"]=br(Fr.s);var Nr={};u(Nr,lr,Fr.i),(Lr||void 0===Nr.x)&&(Nr.x=Jn?cr.value:cr.label),(Lr||void 0===Nr.y)&&(Nr.y=Jn?cr.label:cr.value),(Lr||void 0===Nr.xLabel)&&(Nr.xLabel=Jn?cr.valueLabel:cr.labelLabel),(Lr||void 0===Nr.yLabel)&&(Nr.yLabel=Jn?cr.labelLabel:cr.valueLabel),Jr&&(cr.delta=+Fr.rawS||Fr.s,cr.deltaLabel=br(cr.delta),cr.final=Fr.v,cr.finalLabel=br(cr.final),cr.initial=cr.final-cr.delta,cr.initialLabel=br(cr.initial)),Mi&&(cr.value=Fr.s,cr.valueLabel=br(cr.value),cr.percentInitial=Fr.begR,cr.percentInitialLabel=M.formatPercent(Fr.begR),cr.percentPrevious=Fr.difR,cr.percentPreviousLabel=M.formatPercent(Fr.difR),cr.percentTotal=Fr.sumR,cr.percenTotalLabel=M.formatPercent(Fr.sumR));var Hr=M.castOption(lr,Fr.i,"customdata");return Hr&&(cr.customdata=Hr),M.texttemplateString(kr,cr,gn._d3locale,Nr,cr,lr._meta||{})}(tn,nn,In,Dn,kn):pn.textinfo?function(gn,Pn,jn,Kn){var rr=gn[0].trace,lr="h"===rr.orientation,kr="waterfall"===rr.type,Xr="funnel"===rr.type;function sr(Hr){return l(lr?jn:Kn,+Hr,!0).text}var oi,Lr=gn[Pn],Jr=rr.textinfo.split("+"),Mi=[],Jn=function(Hr){return-1!==Jr.indexOf(Hr)};if(Jn("label")&&Mi.push(l(lr?Kn:jn,gn[Pn].p,!0).text),Jn("text")&&(0===(oi=M.castOption(rr,Lr.i,"text"))||oi)&&Mi.push(oi),kr){var Fr=+Lr.rawS||Lr.s,cr=Lr.v,Qr=cr-Fr;Jn("initial")&&Mi.push(sr(Qr)),Jn("delta")&&Mi.push(sr(Fr)),Jn("final")&&Mi.push(sr(cr))}if(Xr){Jn("value")&&Mi.push(sr(Lr.s));var ui=0;Jn("percent initial")&&ui++,Jn("percent previous")&&ui++,Jn("percent total")&&ui++;var Nr=ui>1;Jn("percent initial")&&(oi=M.formatPercent(Lr.begR),Nr&&(oi+=" of initial"),Mi.push(oi)),Jn("percent previous")&&(oi=M.formatPercent(Lr.difR),Nr&&(oi+=" of previous"),Mi.push(oi)),Jn("percent total")&&(oi=M.formatPercent(Lr.sumR),Nr&&(oi+=" of total"),Mi.push(oi))}return Mi.join("<br>")}(nn,In,Dn,kn):d.getValue(pn.text,In),d.coerceString(g,rn));Ft=function(fn,nn){var In=d.getValue(fn.textposition,nn);return d.coerceEnumerated(m,In)}(Mn,ct);var Ce=nt[ct],Ve=!("stack"===ht.mode||"relative"===ht.mode)||Ce._outmost;if(ke&&"none"!==Ft&&(!Ce.isBlank&&bt!==kt&&Bt!==Et||"auto"!==Ft&&"inside"!==Ft)){var Ge=tn.font,Qe=s.getBarColor(nt[ct],Mn),ot=s.getInsideTextFont(Mn,ct,Ge,Qe),it=s.getOutsideTextFont(Mn,ct,Ge),mt=et.datum();sn?"log"===en.type&&mt.s0<=0&&(bt=en.range[0]<en.range[1]?0:en._length):"log"===Qt.type&&mt.s0<=0&&(Bt=Qt.range[0]<Qt.range[1]?Qt._length:0);var xt,Vt,$t,pt,At,Xt=Math.abs(kt-bt)-2*w,Ct=Math.abs(Et-Bt)-2*w;if("outside"===Ft&&(Ve||Ce.hasB||(Ft="inside")),"auto"===Ft&&(Ve?(Ft="inside",xt=dn(et,ke,At=M.ensureUniformFontSize(He,ot)),pt=(Vt=o.bBox(xt.node())).height,($t=Vt.width)>0&&pt>0&&($t<=Xt&&pt<=Ct||$t<=Ct&&pt<=Xt||(sn?Xt>=$t*(Ct/pt):Ct>=pt*(Xt/$t)))?Ft="inside":(Ft="outside",xt.remove(),xt=null)):Ft="inside"),!xt){var dt=(xt=dn(et,ke,At=M.ensureUniformFontSize(He,"outside"===Ft?it:ot))).attr("transform");if(xt.attr("transform",""),$t=(Vt=o.bBox(xt.node())).width,pt=Vt.height,xt.attr("transform",dt),$t<=0||pt<=0)return void xt.remove()}var Dt,Yt=Mn.textangle;(Dt="outside"===Ft?function(fn,nn,In,Dn,kn,rn){var pn,gn=!!rn.isHorizontal,Pn=!!rn.constrained,jn=rn.angle||0,Kn=kn.width,rr=kn.height,lr=Math.abs(nn-fn),kr=Math.abs(Dn-In);pn=gn?kr>2*w?w:0:lr>2*w?w:0;var Xr=1;Pn&&(Xr=gn?Math.min(1,kr/rr):Math.min(1,lr/Kn));var sr=L(jn),oi=D(kn,sr),Gr=(gn?oi.x:oi.y)/2,Lr=(kn.left+kn.right)/2,Jr=(kn.top+kn.bottom)/2,Mi=(fn+nn)/2,Jn=(In+Dn)/2,br=0,Fr=0,cr=gn?k(nn,fn):k(In,Dn);return gn?(Mi=nn-cr*pn,br=cr*Gr):(Jn=Dn+cr*pn,Fr=-cr*Gr),{textX:Lr,textY:Jr,targetX:Mi,targetY:Jn,anchorX:br,anchorY:Fr,scale:Xr,rotate:sr}}(bt,kt,Bt,Et,Vt,{isHorizontal:sn,constrained:"both"===Mn.constraintext||"outside"===Mn.constraintext,angle:Yt}):N(bt,kt,Bt,Et,Vt,{isHorizontal:sn,constrained:"both"===Mn.constraintext||"inside"===Mn.constraintext,angle:Yt,anchor:Mn.insidetextanchor})).fontSize=At.size,v("histogram"===Mn.type?"bar":Mn.type,Dt,tn),Ce.transform=Dt,C(xt,tn,ht,at).attr("transform",M.getTextTransform(Dt))}else et.select("text").remove()})(F,I,Le,K,me,je,ye,Me,Oe,V,Z),I.layerClipId&&o.hideOutsideRangePoint(_e,Le.select("text"),Y,ee,q.xcalendar,q.ycalendar)}),o.setClipUrl(ie,!1===q.cliponaxis?null:I.layerClipId,F)});a.getComponentMethod("errorbars","plot")(F,X,I,V)},toMoveInsideBar:N}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx/helpers":402,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"./attributes":648,"./constants":650,"./helpers":654,"./style":662,"./uniform_text":664,"@plotly/d3":58,"fast-isnumeric":190}],660:[function(b,oe,se){"use strict";function y(x,M,_,e,o){var a=M.c2p(e?x.s0:x.p0,!0),l=M.c2p(e?x.s1:x.p1,!0),i=_.c2p(e?x.p0:x.s0,!0),v=_.c2p(e?x.p1:x.s1,!0);return o?[(a+l)/2,(i+v)/2]:e?[l,(i+v)/2]:[(a+l)/2,v]}oe.exports=function(x,M){var _,e=x.cd,o=x.xaxis,a=x.yaxis,l=e[0].trace,i="funnel"===l.type,v="h"===l.orientation,h=[];if(!1===M)for(_=0;_<e.length;_++)e[_].selected=0;else for(_=0;_<e.length;_++){var s=e[_],d="ct"in s?s.ct:y(s,o,a,v,i);M.contains(d,!1,_,x)?(h.push({pointNumber:_,x:o.c2d(s.x),y:a.c2d(s.y)}),s.selected=1):s.selected=0}return h}},{}],661:[function(b,oe,se){"use strict";oe.exports=M;var y=b("../../lib").distinctVals,x=b("../../constants/numerical").BADNUM;function M(_,e){this.traces=_,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var o=1/0,a=[],l=0;l<_.length;l++){for(var i=_[l],v=0;v<i.length;v++){var h=i[v];h.p!==x&&a.push(h.p)}i[0]&&i[0].width1&&(o=Math.min(i[0].width1,o))}this.positions=a;var s=y(a);this.distinctPositions=s.vals,this.minDiff=1===s.vals.length&&o!==1/0?o:Math.min(s.minDiff,o);var d=(e.posAxis||{}).type;"category"!==d&&"multicategory"!==d||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}M.prototype.put=function(_,e){var o=this.getLabel(_,e),a=this.bins[o]||0;return this.bins[o]=a+e,a},M.prototype.get=function(_,e){var o=this.getLabel(_,e);return this.bins[o]||0},M.prototype.getLabel=function(_,e){return(e<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?_:Math.round(_/this.binWidth))}},{"../../constants/numerical":479,"../../lib":503}],662:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../components/color"),M=b("../../components/drawing"),_=b("../../lib"),e=b("../../registry"),o=b("./uniform_text").resizeText,a=b("./attributes"),l=a.textfont,i=a.insidetextfont,v=a.outsidetextfont,h=b("./helpers");function s(c,A,k){M.pointStyle(c.selectAll("path"),A,k),d(c,A,k)}function d(c,A,k){c.selectAll("text").each(function(C){var E=y.select(this),L=_.ensureUniformFontSize(k,p(E,C,A,k));M.font(E,L)})}function p(c,A,k,C){var E=C._fullLayout.font,L=k.textfont;if(c.classed("bartext-inside")){var D=w(A,k);L=g(k,A.i,E,D)}else c.classed("bartext-outside")&&(L=m(k,A.i,E));return L}function f(c,A,k){return u(l,c.textfont,A,k)}function g(c,A,k,C){var E=f(c,A,k);return(void 0===c._input.textfont||void 0===c._input.textfont.color||Array.isArray(c.textfont.color)&&void 0===c.textfont.color[A])&&(E={color:x.contrast(C),family:E.family,size:E.size}),u(i,c.insidetextfont,A,E)}function m(c,A,k){var C=f(c,A,k);return u(v,c.outsidetextfont,A,C)}function u(c,A,k,C){var E=h.getValue((A=A||{}).family,k),L=h.getValue(A.size,k),D=h.getValue(A.color,k);return{family:h.coerceString(c.family,E,C.family),size:h.coerceNumber(c.size,L,C.size),color:h.coerceColor(c.color,D,C.color)}}function w(c,A){return"waterfall"===A.type?A[c.dir].marker.color:c.mcc||c.mc||A.marker.color}oe.exports={style:function(c){var A=y.select(c).selectAll("g.barlayer").selectAll("g.trace");o(c,A,"bar");var k=A.size(),C=c._fullLayout;A.style("opacity",function(E){return E[0].trace.opacity}).each(function(E){("stack"===C.barmode&&k>1||0===C.bargap&&0===C.bargroupgap&&!E[0].trace.marker.line.width)&&y.select(this).attr("shape-rendering","crispEdges")}),A.selectAll("g.points").each(function(E){s(y.select(this),E[0].trace,c)}),e.getComponentMethod("errorbars","style")(A)},styleTextPoints:d,styleOnSelect:function(c,A,k){var E,L,D,N,F,I,C=A[0].trace;C.selectedpoints?(L=C,D=c,M.selectedPointStyle((E=k).selectAll("path"),L),N=E.selectAll("text"),F=L,I=D,N.each(function(P){var j,V=y.select(this);if(P.selected){j=_.ensureUniformFontSize(I,p(V,P,F,I));var Z=F.selected.textfont&&F.selected.textfont.color;Z&&(j.color=Z),M.font(V,j)}else M.selectedTextStyle(V,F)})):(s(k,C,c),e.getComponentMethod("errorbars","style")(k))},getInsideTextFont:g,getOutsideTextFont:m,getBarColor:w,resizeText:o}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../registry":638,"./attributes":648,"./helpers":654,"./uniform_text":664,"@plotly/d3":58}],663:[function(b,oe,se){"use strict";var y=b("../../components/color"),x=b("../../components/colorscale/helpers").hasColorscale,M=b("../../components/colorscale/defaults"),_=b("../../lib").coercePattern;oe.exports=function(e,o,a,l,i){var v=a("marker.color",l),h=x(e,"marker");h&&M(e,o,i,a,{prefix:"marker.",cLetter:"c"}),a("marker.line.color",y.defaultLine),x(e,"marker.line")&&M(e,o,i,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width"),a("marker.opacity"),_(a,"marker.pattern",v,h),a("selected.marker.color"),a("unselected.marker.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],664:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../lib");function M(_){return"_"+_+"Text_minsize"}oe.exports={recordMinTextSize:function(_,e,o){if(o.uniformtext.mode){var a=M(_),l=o.uniformtext.minsize,i=e.scale*e.fontSize;e.hide=i<l,o[a]=o[a]||1/0,e.hide||(o[a]=Math.min(o[a],Math.max(i,l)))}},clearMinTextSize:function(_,e){e[M(_)]=void 0},resizeText:function(_,e,o){var a=_._fullLayout,l=a["_"+o+"Text_minsize"];if(l){var i,v="hide"===a.uniformtext.mode;switch(o){case"funnelarea":case"pie":case"sunburst":i="g.slice";break;case"treemap":case"icicle":i="g.slice, g.pathbar";break;default:i="g.points > g.point"}e.selectAll(i).each(function(h){var s=h.transform;s&&(s.scale=v&&s.hide?0:l/s.fontSize,y.select(this).select("text").attr("transform",x.getTextTransform(s)))})}}}},{"../../lib":503,"@plotly/d3":58}],665:[function(b,oe,se){"use strict";var y=b("../../plots/template_attributes").hovertemplateAttrs,x=b("../../lib/extend").extendFlat,M=b("../scatterpolar/attributes"),_=b("../bar/attributes");oe.exports={r:M.r,theta:M.theta,r0:M.r0,dr:M.dr,theta0:M.theta0,dtheta:M.dtheta,thetaunit:M.thetaunit,base:x({},_.base,{}),offset:x({},_.offset,{}),width:x({},_.width,{}),text:x({},_.text,{}),hovertext:x({},_.hovertext,{}),marker:_.marker,hoverinfo:M.hoverinfo,hovertemplate:y(),selected:_.selected,unselected:_.unselected}},{"../../lib/extend":493,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatterpolar/attributes":1002}],666:[function(b,oe,se){"use strict";var y=b("../../components/colorscale/helpers").hasColorscale,x=b("../../components/colorscale/calc"),M=b("../bar/arrays_to_calcdata"),_=b("../bar/cross_trace_calc").setGroupPositions,e=b("../scatter/calc_selection"),o=b("../../registry").traceIs,a=b("../../lib").extendFlat;oe.exports={calc:function(l,i){for(var v=l._fullLayout,h=i.subplot,d=v[h].angularaxis,p=v[h].radialaxis.makeCalcdata(i,"r"),f=d.makeCalcdata(i,"theta"),g=i._length,m=new Array(g),u=p,w=f,c=0;c<g;c++)m[c]={p:w[c],s:u[c]};function A(k){var C=i[k];void 0!==C&&(i["_"+k]=Array.isArray(C)?d.makeCalcdata(i,k):d.d2c(C,i.thetaunit))}return"linear"===d.type&&(A("width"),A("offset")),y(i,"marker")&&x(l,i,{vals:i.marker.color,containerStr:"marker",cLetter:"c"}),y(i,"marker.line")&&x(l,i,{vals:i.marker.line.color,containerStr:"marker.line",cLetter:"c"}),M(m,i),e(m,i),m},crossTraceCalc:function(l,i,v){for(var h=l.calcdata,s=[],d=0;d<h.length;d++){var p=h[d],f=p[0].trace;!0===f.visible&&o(f,"bar")&&f.subplot===v&&s.push(p)}var g=a({},i.radialaxis,{_id:"x"});_(l,i.angularaxis,g,s,{mode:i.barmode,norm:i.barnorm,gap:i.bargap,groupgap:i.bargroupgap})}}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../lib":503,"../../registry":638,"../bar/arrays_to_calcdata":647,"../bar/cross_trace_calc":651,"../scatter/calc_selection":929}],667:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../scatterpolar/defaults").handleRThetaDefaults,M=b("../bar/style_defaults"),_=b("./attributes");oe.exports=function(e,o,a,l){function i(v,h){return y.coerce(e,o,_,v,h)}x(e,o,l,i)?(i("thetaunit"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),M(e,o,i,a,l),y.coerceSelectionMarkerOpacity(o,i)):o.visible=!1}},{"../../lib":503,"../bar/style_defaults":663,"../scatterpolar/defaults":1004,"./attributes":665}],668:[function(b,oe,se){"use strict";var y=b("../../components/fx"),x=b("../../lib"),M=b("../bar/hover").getTraceColor,_=x.fillText,e=b("../scatterpolar/hover").makeHoverPointText,o=b("../../plots/polar/helpers").isPtInsidePolygon;oe.exports=function(a,l,i){var v=a.cd,h=v[0].trace,s=a.subplot,d=s.radialAxis,f=s.vangles,g=f?o:x.isPtInsideSector,m=a.maxHoverDistance,u=s.angularAxis._period||2*Math.PI,w=Math.abs(d.g2p(Math.sqrt(l*l+i*i))),c=Math.atan2(i,l);if(d.range[0]>d.range[1]&&(c+=Math.PI),y.getClosest(v,function(C){return g(w,c,[C.rp0,C.rp1],[C.thetag0,C.thetag1],f)?m+Math.min(1,Math.abs(C.thetag1-C.thetag0)/u)-1+(C.rp1-w)/(C.rp1-C.rp0)-1:1/0},a),!1!==a.index){var A=v[a.index];a.x0=a.x1=A.ct[0],a.y0=a.y1=A.ct[1];var k=x.extendFlat({},A,{r:A.s,theta:A.p});return _(A,h,a),e(k,h,s,a),a.hovertemplate=h.hovertemplate,a.color=M(h,A),a.xLabelVal=a.yLabelVal=void 0,A.s<0&&(a.idealAlign="left"),[a]}}},{"../../components/fx":406,"../../lib":503,"../../plots/polar/helpers":621,"../bar/hover":655,"../scatterpolar/hover":1006}],669:[function(b,oe,se){"use strict";oe.exports={moduleType:"trace",name:"barpolar",basePlotModule:b("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("../scatterpolar/format_labels"),style:b("../bar/style").style,styleOnSelect:b("../bar/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../bar/select"),meta:{}}},{"../../plots/polar":622,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":945,"../scatterpolar/format_labels":1005,"./attributes":665,"./calc":666,"./defaults":667,"./hover":668,"./layout_attributes":670,"./layout_defaults":671,"./plot":672}],670:[function(b,oe,se){"use strict";oe.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],671:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./layout_attributes");oe.exports=function(M,_,e){var o,a={};function l(h,s){return y.coerce(M[o]||{},_[o],x,h,s)}for(var i=0;i<e.length;i++){var v=e[i];"barpolar"===v.type&&!0===v.visible&&(a[o=v.subplot]||(l("barmode"),l("bargap"),a[o]=1))}}},{"../../lib":503,"./layout_attributes":670}],672:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("fast-isnumeric"),M=b("../../lib"),_=b("../../components/drawing"),e=b("../../plots/polar/helpers");oe.exports=function(o,a,l){var f,g,m,i=a.xaxis,v=a.yaxis,h=a.radialAxis,s=a.angularAxis,d=(g=(f=a).cxx,m=f.cyy,f.vangles?function(u,w,c,A){var k,C;M.angleDelta(c,A)>0?(k=c,C=A):(k=A,C=c);var E=[e.findEnclosingVertexAngles(k,f.vangles)[0],(k+C)/2,e.findEnclosingVertexAngles(C,f.vangles)[1]];return e.pathPolygonAnnulus(u,w,k,C,E,g,m)}:function(u,w,c,A){return M.pathAnnulus(u,w,c,A,g,m)}),p=a.layers.frontplot.select("g.barlayer");M.makeTraceGroups(p,l,"trace bars").each(function(){var f=y.select(this),g=M.ensureSingle(f,"g","points").selectAll("g.point").data(M.identity);g.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),g.exit().remove(),g.each(function(m){var u,w=y.select(this),c=m.rp0=h.c2p(m.s0),A=m.rp1=h.c2p(m.s1),k=m.thetag0=s.c2g(m.p0),C=m.thetag1=s.c2g(m.p1);if(x(c)&&x(A)&&x(k)&&x(C)&&c!==A&&k!==C){var E=h.c2g(m.s1),L=(k+C)/2;m.ct=[i.c2p(E*Math.cos(L)),v.c2p(E*Math.sin(L))],u=d(c,A,k,C)}else u="M0,0Z";M.ensureSingle(w,"path").attr("d",u)}),_.setClipUrl(f,a._hasClipOnAxisFalse?a.clipIds.forTraces:null,o)})}},{"../../components/drawing":388,"../../lib":503,"../../plots/polar/helpers":621,"@plotly/d3":58,"fast-isnumeric":190}],673:[function(b,oe,se){"use strict";var y=b("../scatter/attributes"),x=b("../bar/attributes"),M=b("../../components/color/attributes"),_=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=b("../../plots/template_attributes").hovertemplateAttrs,o=b("../../lib/extend").extendFlat,a=y.marker,l=a.line;oe.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:y.xperiod,yperiod:y.yperiod,xperiod0:y.xperiod0,yperiod0:y.yperiod0,xperiodalignment:y.xperiodalignment,yperiodalignment:y.yperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:o({},a.symbol,{arrayOk:!1,editType:"plot"}),opacity:o({},a.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:o({},a.size,{arrayOk:!1,editType:"calc"}),color:o({},a.color,{arrayOk:!1,editType:"style"}),line:{color:o({},l.color,{arrayOk:!1,dflt:M.defaultLine,editType:"style"}),width:o({},l.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:y.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:x.offsetgroup,alignmentgroup:x.alignmentgroup,selected:{marker:y.selected.marker,editType:"style"},unselected:{marker:y.unselected.marker,editType:"style"},text:o({},y.text,{}),hovertext:o({},y.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927}],674:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../plots/cartesian/axes"),M=b("../../plots/cartesian/align_period"),_=b("../../lib"),e=b("../../constants/numerical").BADNUM,o=_._;oe.exports=function(g,m){var u,w,c,A,k,C,E,L=g._fullLayout,D=x.getFromId(g,m.xaxis||"x"),N=x.getFromId(g,m.yaxis||"y"),F=[],I="violin"===m.type?"_numViolins":"_numBoxes";"h"===m.orientation?(c=D,A="x",k=N,C="y",E=!!m.yperiodalignment):(c=N,A="y",k=D,C="x",E=!!m.xperiodalignment);var P,j,V,Z,Y,ee,re=function(et,nt,ct,bt){var kt,Bt=nt+"0"in et;if(nt in et||Bt&&"d"+nt in et){var ht=ct.makeCalcdata(et,nt);return[M(et,ct,nt,ht).vals,ht]}kt=Bt?et[nt+"0"]:"name"in et&&("category"===ct.type||y(et.name)&&-1!==["linear","log"].indexOf(ct.type)||_.isDateTime(et.name)&&"date"===ct.type)?et.name:bt;for(var at="multicategory"===ct.type?ct.r2c_just_indices(kt):ct.d2c(kt,0,et[nt+"calendar"]),Ft=et._length,en=new Array(Ft),Qt=0;Qt<Ft;Qt++)en[Qt]=at;return[en]}(m,C,k,L[I]),X=re[0],K=re[1],ie=_.distinctVals(X,k),q=ie.vals,U=ie.minDiff/2,W="all"===(m.boxpoints||m.points)?_.identity:function(et){return et.v<P.lf||et.v>P.uf};if(m._hasPreCompStats){var ae=m[A],G=function(et){return c.d2c((m[et]||[])[u])},te=1/0,ne=-1/0;for(u=0;u<m._length;u++){var le=X[u];if(y(le)){if((P={}).pos=P[C]=le,E&&K&&(P.orig_p=K[u]),P.q1=G("q1"),P.med=G("median"),P.q3=G("q3"),j=[],ae&&_.isArrayOrTypedArray(ae[u]))for(w=0;w<ae[u].length;w++)(ee=c.d2c(ae[u][w]))!==e&&(l(Y={v:ee,i:[u,w]},m,[u,w]),j.push(Y));if(P.pts=j.sort(i),Z=(V=P[A]=j.map(v)).length,P.med!==e&&P.q1!==e&&P.q3!==e&&P.med>=P.q1&&P.q3>=P.med){var ue=G("lowerfence");P.lf=ue!==e&&ue<=P.q1?ue:h(P,V,Z);var pe=G("upperfence");P.uf=pe!==e&&pe>=P.q3?pe:s(P,V,Z);var de=G("mean");P.mean=de!==e?de:Z?_.mean(V,Z):(P.q1+P.q3)/2;var _e=G("sd");P.sd=de!==e&&_e>=0?_e:Z?_.stdev(V,Z,P.mean):P.q3-P.q1,P.lo=d(P),P.uo=p(P);var me=G("notchspan");me=me!==e&&me>0?me:f(P,Z),P.ln=P.med-me,P.un=P.med+me;var we=P.lf,De=P.uf;m.boxpoints&&V.length&&(we=Math.min(we,V[0]),De=Math.max(De,V[Z-1])),m.notched&&(we=Math.min(we,P.ln),De=Math.max(De,P.un)),P.min=we,P.max=De}else{var Le;_.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+P.q1,"median = "+P.med,"q3 = "+P.q3].join("\n")),P.med=Le=P.med!==e?P.med:P.q1!==e?P.q3!==e?(P.q1+P.q3)/2:P.q1:P.q3!==e?P.q3:0,P.q1=P.q3=Le,P.lf=P.uf=Le,P.mean=P.sd=Le,P.ln=P.un=Le,P.min=P.max=Le}te=Math.min(te,P.min),ne=Math.max(ne,P.max),P.pts2=j.filter(W),F.push(P)}}m._extremes[c._id]=x.findExtremes(c,[te,ne],{padded:!0})}else{var Ie=c.makeCalcdata(m,A),je=function(et,nt){for(var ct=et.length,bt=new Array(ct+1),kt=0;kt<ct;kt++)bt[kt]=et[kt]-nt;return bt[ct]=et[ct-1]+nt,bt}(q,U),ye=q.length,Me=function(et){for(var nt=new Array(et),ct=0;ct<et;ct++)nt[ct]=[];return nt}(ye);for(u=0;u<m._length;u++)if(y(ee=Ie[u])){var Oe=_.findBin(X[u],je);Oe>=0&&Oe<ye&&(l(Y={v:ee,i:u},m,u),Me[Oe].push(Y))}var Pe=1/0,Re=-1/0,Ue=m.quartilemethod,qe="exclusive"===Ue,Xe="inclusive"===Ue;for(u=0;u<ye;u++)if(Me[u].length>0){var lt,He;(P={}).pos=P[C]=q[u],j=P.pts=Me[u].sort(i),Z=(V=P[A]=j.map(v)).length,P.min=V[0],P.max=V[Z-1],P.mean=_.mean(V,Z),P.sd=_.stdev(V,Z,P.mean),P.med=_.interp(V,.5),Z%2&&(qe||Xe)?(qe?(lt=V.slice(0,Z/2),He=V.slice(Z/2+1)):Xe&&(lt=V.slice(0,Z/2+1),He=V.slice(Z/2)),P.q1=_.interp(lt,.5),P.q3=_.interp(He,.5)):(P.q1=_.interp(V,.25),P.q3=_.interp(V,.75)),P.lf=h(P,V,Z),P.uf=s(P,V,Z),P.lo=d(P),P.uo=p(P);var $e=f(P,Z);P.ln=P.med-$e,P.un=P.med+$e,Pe=Math.min(Pe,P.ln),Re=Math.max(Re,P.un),P.pts2=j.filter(W),F.push(P)}m._extremes[c._id]=x.findExtremes(c,m.notched?Ie.concat([Pe,Re]):Ie,{padded:!0})}return function(et,nt){if(_.isArrayOrTypedArray(nt.selectedpoints))for(var ct=0;ct<et.length;ct++){for(var bt=et[ct].pts||[],kt={},Bt=0;Bt<bt.length;Bt++)kt[bt[Bt].i]=Bt;_.tagSelected(bt,nt,kt)}}(F,m),F.length>0?(F[0].t={num:L[I],dPos:U,posLetter:C,valLetter:A,labels:{med:o(g,"median:"),min:o(g,"min:"),q1:o(g,"q1:"),q3:o(g,"q3:"),max:o(g,"max:"),mean:o(g,"sd"===m.boxmean?"mean \xb1 \u03c3:":"mean:"),lf:o(g,"lower fence:"),uf:o(g,"upper fence:")}},L[I]++,F):[{t:{empty:!0}}]};var a={text:"tx",hovertext:"htx"};function l(g,m,u){for(var w in a)_.isArrayOrTypedArray(m[w])&&(Array.isArray(u)?_.isArrayOrTypedArray(m[w][u[0]])&&(g[a[w]]=m[w][u[0]][u[1]]):g[a[w]]=m[w][u])}function i(g,m){return g.v-m.v}function v(g){return g.v}function h(g,m,u){return 0===u?g.q1:Math.min(g.q1,m[Math.min(_.findBin(2.5*g.q1-1.5*g.q3,m,!0)+1,u-1)])}function s(g,m,u){return 0===u?g.q3:Math.max(g.q3,m[Math.max(_.findBin(2.5*g.q3-1.5*g.q1,m),0)])}function d(g){return 4*g.q1-3*g.q3}function p(g){return 4*g.q3-3*g.q1}function f(g,m){return 0===m?0:1.57*(g.q3-g.q1)/Math.sqrt(m)}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"fast-isnumeric":190}],675:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axes"),x=b("../../lib"),M=b("../../plots/cartesian/constraints").getAxisGroup,_=["v","h"];function e(o,a,l,i){var v,h,s,d=a.calcdata,p=a._fullLayout,f=i._id,g=f.charAt(0),m=[],u=0;for(v=0;v<l.length;v++)for(s=d[l[v]],h=0;h<s.length;h++)m.push(i.c2l(s[h].pos,!0)),u+=(s[h].pts2||[]).length;if(m.length){var w=x.distinctVals(m);"category"!==i.type&&"multicategory"!==i.type||(w.minDiff=1);var c=w.minDiff/2;y.minDtick(i,w.minDiff,w.vals[0],!0);var A=p["violin"===o?"_numViolins":"_numBoxes"],k="group"===p[o+"mode"]&&A>1,C=1-p[o+"gap"],E=1-p[o+"groupgap"];for(v=0;v<l.length;v++){var L,D,N,F,I,P,j=(s=d[l[v]])[0].trace,V=s[0].t,Z=j.width,Y=j.side;if(Z)L=D=F=Z/2,N=0;else if(L=c,k){var ee=M(p,i._id)+j.orientation,X=Object.keys(((p._alignmentOpts[ee]||{})[j.alignmentgroup]||{}).offsetGroups||{}).length,K=X||A;D=L*C*E/K,N=2*L*(((X?j._offsetIndex:V.num)+.5)/K-.5)*C,F=L*C/K}else D=L*C*E,N=0,F=L;V.dPos=L,V.bPos=N,V.bdPos=D,V.wHover=F;var ie,q,U,W,ae,G,te=N+D,ne=Boolean(Z);if("positive"===Y?(I=L*(Z?1:.5),ie=te,P=ie=N):"negative"===Y?(I=ie=N,P=L*(Z?1:.5),q=te):(I=P=L,ie=q=te),(j.boxpoints||j.points)&&u>0){var le=j.pointpos,ue=j.jitter,pe=j.marker.size/2,de=0;le+ue>=0&&((de=te*(le+ue))>I?(ne=!0,ae=pe,U=de):de>ie&&(ae=pe,U=I)),de<=I&&(U=I);var _e=0;le-ue<=0&&((_e=-te*(le-ue))>P?(ne=!0,G=pe,W=_e):_e>q&&(G=pe,W=P)),_e<=P&&(W=P)}else U=I,W=P;var me=new Array(s.length);for(h=0;h<s.length;h++)me[h]=s[h].pos;j._extremes[f]=y.findExtremes(i,me,{padded:ne,vpadminus:W,vpadplus:U,vpadLinearized:!0,ppadminus:{x:G,y:ae}[g],ppadplus:{x:ae,y:G}[g]})}}}oe.exports={crossTraceCalc:function(o,a){for(var l=o.calcdata,i=a.xaxis,v=a.yaxis,h=0;h<_.length;h++){for(var s=_[h],d="h"===s?v:i,p=[],f=0;f<l.length;f++){var g=l[f],u=g[0].trace;!0!==u.visible||"box"!==u.type&&"candlestick"!==u.type||g[0].t.empty||(u.orientation||"v")!==s||u.xaxis!==i._id||u.yaxis!==v._id||p.push(f)}e("box",o,p,d)}},setPositionOffset:e}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562}],676:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../registry"),M=b("../../components/color"),_=b("../scatter/period_defaults"),e=b("../bar/defaults").handleGroupingDefaults,o=b("../../plots/cartesian/axis_autotype"),a=b("./attributes");function l(v,h,s,d){function p(Y){var ee=0;return Y&&Y.length&&(ee+=1,y.isArrayOrTypedArray(Y[0])&&Y[0].length&&(ee+=1)),ee}function f(Y){return y.validate(v[Y],a[Y])}var g,m=s("y"),u=s("x");if("box"===h.type){var w=s("q1"),c=s("median"),A=s("q3");h._hasPreCompStats=w&&w.length&&c&&c.length&&A&&A.length,g=Math.min(y.minRowLength(w),y.minRowLength(c),y.minRowLength(A))}var k,C,E=p(m),L=p(u),D=E&&y.minRowLength(m),N=L&&y.minRowLength(u),F=d.calendar,I={autotypenumbers:d.autotypenumbers};if(h._hasPreCompStats)switch(String(L)+String(E)){case"00":var P=f("x0")||f("dx");k=!f("y0")&&!f("dy")||P?"v":"h",C=g;break;case"10":k="v",C=Math.min(g,N);break;case"20":k="h",C=Math.min(g,u.length);break;case"01":k="h",C=Math.min(g,D);break;case"02":k="v",C=Math.min(g,m.length);break;case"12":k="v",C=Math.min(g,N,m.length);break;case"21":k="h",C=Math.min(g,u.length,D);break;case"11":C=0;break;case"22":var j,V=!1;for(j=0;j<u.length;j++)if("category"===o(u[j],F,I)){V=!0;break}if(V)k="v",C=Math.min(g,N,m.length);else{for(j=0;j<m.length;j++)if("category"===o(m[j],F,I)){V=!0;break}V?(k="h",C=Math.min(g,u.length,D)):(k="v",C=Math.min(g,N,m.length))}}else E>0?(k="v",C=L>0?Math.min(N,D):Math.min(D)):L>0?(k="h",C=Math.min(N)):C=0;if(C){h._length=C;var Z=s("orientation",k);h._hasPreCompStats?"v"===Z&&0===L?(s("x0",0),s("dx",1)):"h"===Z&&0===E&&(s("y0",0),s("dy",1)):"v"===Z&&0===L?s("x0"):"h"===Z&&0===E&&s("y0"),x.getComponentMethod("calendars","handleTraceDefaults")(v,h,["x","y"],d)}else h.visible=!1}function i(v,h,s,d){var p=d.prefix,f=y.coerce2(v,h,a,"marker.outliercolor"),g=s("marker.line.outliercolor"),m="outliers";h._hasPreCompStats?m="all":(f||g)&&(m="suspectedoutliers");var u=s(p+"points",m);u?(s("jitter","all"===u?.3:0),s("pointpos","all"===u?-1.5:0),s("marker.symbol"),s("marker.opacity"),s("marker.size"),s("marker.color",h.line.color),s("marker.line.color"),s("marker.line.width"),"suspectedoutliers"===u&&(s("marker.line.outliercolor",h.marker.color),s("marker.line.outlierwidth")),s("selected.marker.color"),s("unselected.marker.color"),s("selected.marker.size"),s("unselected.marker.size"),s("text"),s("hovertext")):delete h.marker;var w=s("hoveron");"all"!==w&&-1===w.indexOf("points")||s("hovertemplate"),y.coerceSelectionMarkerOpacity(h,s)}oe.exports={supplyDefaults:function(v,h,s,d){function p(A,k){return y.coerce(v,h,a,A,k)}if(l(v,h,p,d),!1!==h.visible){_(v,h,d,p),p("xhoverformat"),p("yhoverformat");var f=h._hasPreCompStats;f&&(p("lowerfence"),p("upperfence")),p("line.color",(v.marker||{}).color||s),p("line.width"),p("fillcolor",M.addOpacity(h.line.color,.5));var g=!1;if(f){var m=p("mean"),u=p("sd");m&&m.length&&(g=!0,u&&u.length&&(g="sd"))}p("boxmean",g),p("whiskerwidth"),p("width"),p("quartilemethod");var w=!1;if(f){var c=p("notchspan");c&&c.length&&(w=!0)}else y.validate(v.notchwidth,a.notchwidth)&&(w=!0);p("notched",w)&&p("notchwidth"),i(v,h,p,{prefix:"box"})}},crossTraceDefaults:function(v,h){var d;function p(m){return y.coerce(d._input,d,a,m)}for(var f=0;f<v.length;f++){var g=(d=v[f]).type;"box"!==g&&"violin"!==g||"group"===h[g+"mode"]&&e(d._input,d,h,p)}},handleSampleDefaults:l,handlePointsDefaults:i}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../registry":638,"../bar/defaults":652,"../scatter/period_defaults":947,"./attributes":673}],677:[function(b,oe,se){"use strict";oe.exports=function(y,x){return x.hoverOnBox&&(y.hoverOnBox=x.hoverOnBox),"xVal"in x&&(y.x=x.xVal),"yVal"in x&&(y.y=x.yVal),x.xa&&(y.xaxis=x.xa),x.ya&&(y.yaxis=x.ya),y}},{}],678:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axes"),x=b("../../lib"),M=b("../../components/fx"),_=b("../../components/color"),e=x.fillText;function o(l,i,v,h){var s,d,p,f,g,m,u,w,c,A,k,C,E,L,D=l.cd,N=l.xa,F=l.ya,I=D[0].trace,P=D[0].t,j="violin"===I.type,V=[],Z=P.bdPos,Y=P.wHover,ee=function(de){return p.c2l(de.pos)+P.bPos-p.c2l(m)};j&&"both"!==I.side?("positive"===I.side&&(c=function(de){var _e=ee(de);return M.inbox(_e,_e+Y,A)},C=Z,E=0),"negative"===I.side&&(c=function(de){var _e=ee(de);return M.inbox(_e-Y,_e,A)},C=0,E=Z)):(c=function(de){var _e=ee(de);return M.inbox(_e-Y,_e+Y,A)},C=E=Z),L=j?function(de){return M.inbox(de.span[0]-g,de.span[1]-g,A)}:function(de){return M.inbox(de.min-g,de.max-g,A)},"h"===I.orientation?(g=i,m=v,u=L,w=c,s="y",p=F,d="x",f=N):(g=v,m=i,u=c,w=L,s="x",p=N,d="y",f=F);var re=Math.min(1,Z/Math.abs(p.r2c(p.range[1])-p.r2c(p.range[0])));function X(de){return(u(de)+w(de))/2}A=l.maxHoverDistance-re,k=l.maxSpikeDistance-re;var K=M.getDistanceFunction(h,u,w,X);if(M.getClosest(D,K,l),!1===l.index)return[];var ie=D[l.index],q=I.line.color,U=(I.marker||{}).color;l.color=_.opacity(q)&&I.line.width?q:_.opacity(U)&&I.boxpoints?U:I.fillcolor,l[s+"0"]=p.c2p(ie.pos+P.bPos-E,!0),l[s+"1"]=p.c2p(ie.pos+P.bPos+C,!0),l[s+"LabelVal"]=void 0!==ie.orig_p?ie.orig_p:ie.pos;var W=s+"Spike";l.spikeDistance=X(ie)*k/A,l[W]=p.c2p(ie.pos,!0);var ae={},G=["med","q1","q3","min","max"];(I.boxmean||(I.meanline||{}).visible)&&G.push("mean"),(I.boxpoints||I.points)&&G.push("lf","uf");for(var te=0;te<G.length;te++){var ne=G[te];if(ne in ie&&!(ie[ne]in ae)){ae[ie[ne]]=!0;var le=ie[ne],ue=f.c2p(le,!0),pe=x.extendFlat({},l);pe.attr=ne,pe[d+"0"]=pe[d+"1"]=ue,pe[d+"LabelVal"]=le,pe[d+"Label"]=(P.labels?P.labels[ne]+" ":"")+y.hoverLabelText(f,le,I[d+"hoverformat"]),pe.hoverOnBox=!0,"mean"===ne&&"sd"in ie&&"sd"===I.boxmean&&(pe[d+"err"]=ie.sd),l.name="",l.spikeDistance=void 0,l[W]=void 0,pe.hovertemplate=!1,V.push(pe)}}return V}function a(l,i,v){for(var h,s,d,p=l.cd,f=l.xa,g=l.ya,m=p[0].trace,u=f.c2p(i),w=g.c2p(v),c=M.quadrature(function(j){var V=Math.max(3,j.mrc||0);return Math.max(Math.abs(f.c2p(j.x)-u)-V,1-3/V)},function(j){var V=Math.max(3,j.mrc||0);return Math.max(Math.abs(g.c2p(j.y)-w)-V,1-3/V)}),A=!1,k=0;k<p.length;k++){s=p[k];for(var C=0;C<(s.pts||[]).length;C++){var E=c(d=s.pts[C]);E<=l.distance&&(l.distance=E,A=[k,C])}}if(!A)return!1;d=(s=p[A[0]]).pts[A[1]];var L=f.c2p(d.x,!0),D=g.c2p(d.y,!0),N=d.mrc||1;h=x.extendFlat({},l,{index:d.i,color:(m.marker||{}).color,name:m.name,x0:L-N,x1:L+N,y0:D-N,y1:D+N,spikeDistance:l.distance,hovertemplate:m.hovertemplate});var F,I=s.orig_p,P=void 0!==I?I:s.pos;return"h"===m.orientation?(F=g,h.xLabelVal=d.x,h.yLabelVal=P):(F=f,h.xLabelVal=P,h.yLabelVal=d.y),h[F._id.charAt(0)+"Spike"]=F.c2p(s.pos,!0),e(d,m,h),h}oe.exports={hoverPoints:function(l,i,v,h){var s,d=l.cd[0].trace.hoveron,p=[];return-1!==d.indexOf("boxes")&&(p=p.concat(o(l,i,v,h))),-1!==d.indexOf("points")&&(s=a(l,i,v)),"closest"===h?s?[s]:p:(s&&p.push(s),p)},hoverOnBoxes:o,hoverOnPoints:a}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],679:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults").supplyLayoutDefaults,calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"box",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./attributes":673,"./calc":674,"./cross_trace_calc":675,"./defaults":676,"./event_data":677,"./hover":678,"./layout_attributes":680,"./layout_defaults":681,"./plot":682,"./select":683,"./style":684}],680:[function(b,oe,se){"use strict";oe.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],681:[function(b,oe,se){"use strict";var y=b("../../registry"),x=b("../../lib"),M=b("./layout_attributes");function _(e,o,a,l,i){for(var v=i+"Layout",h=!1,s=0;s<a.length;s++)if(y.traceIs(a[s],v)){h=!0;break}h&&(l(i+"mode"),l(i+"gap"),l(i+"groupgap"))}oe.exports={supplyLayoutDefaults:function(e,o,a){_(0,0,a,function(l,i){return x.coerce(e,o,M,l,i)},"box")},_supply:_}},{"../../lib":503,"../../registry":638,"./layout_attributes":680}],682:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../lib"),M=b("../../components/drawing");function _(a,l,i,v){var h,s,d="h"===i.orientation,p=l.val,f=l.pos,g=!!f.rangebreaks,m=v.bPos,u=v.wdPos||0,w=v.bPosPxOffset||0,c=i.whiskerwidth||0,A=i.notched||!1,k=A?1-2*i.notchwidth:1;Array.isArray(v.bdPos)?(h=v.bdPos[0],s=v.bdPos[1]):(h=v.bdPos,s=v.bdPos);var C=a.selectAll("path.box").data("violin"!==i.type||i.box.visible?x.identity:[]);C.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),C.exit().remove(),C.each(function(E){if(E.empty)return"M0,0Z";var L=f.c2l(E.pos+m,!0),D=f.l2p(L-h)+w,N=f.l2p(L+s)+w,F=g?(D+N)/2:f.l2p(L)+w,I=i.whiskerwidth,P=g?D*I+(1-I)*F:f.l2p(L-u)+w,j=g?N*I+(1-I)*F:f.l2p(L+u)+w,V=f.l2p(L-h*k)+w,Z=f.l2p(L+s*k)+w,Y=p.c2p(E.q1,!0),ee=p.c2p(E.q3,!0),re=x.constrain(p.c2p(E.med,!0),Math.min(Y,ee)+1,Math.max(Y,ee)-1),X=void 0===E.lf||!1===i.boxpoints,K=p.c2p(X?E.min:E.lf,!0),ie=p.c2p(X?E.max:E.uf,!0),q=p.c2p(E.ln,!0),U=p.c2p(E.un,!0);d?y.select(this).attr("d","M"+re+","+V+"V"+Z+"M"+Y+","+D+"V"+N+(A?"H"+q+"L"+re+","+Z+"L"+U+","+N:"")+"H"+ee+"V"+D+(A?"H"+U+"L"+re+","+V+"L"+q+","+D:"")+"ZM"+Y+","+F+"H"+K+"M"+ee+","+F+"H"+ie+(0===c?"":"M"+K+","+P+"V"+j+"M"+ie+","+P+"V"+j)):y.select(this).attr("d","M"+V+","+re+"H"+Z+"M"+D+","+Y+"H"+N+(A?"V"+q+"L"+Z+","+re+"L"+N+","+U:"")+"V"+ee+"H"+D+(A?"V"+U+"L"+V+","+re+"L"+D+","+q:"")+"ZM"+F+","+Y+"V"+K+"M"+F+","+ee+"V"+ie+(0===c?"":"M"+P+","+K+"H"+j+"M"+P+","+ie+"H"+j))})}function e(a,l,i,v){var h=l.x,s=l.y,d=v.bdPos,p=v.bPos,f=i.boxpoints||i.points;x.seedPseudoRandom();var g=a.selectAll("g.points").data(f?function(u){return u.forEach(function(w){w.t=v,w.trace=i}),u}:[]);g.enter().append("g").attr("class","points"),g.exit().remove();var m=g.selectAll("path").data(function(u){var w,c,A=u.pts2,k=Math.max((u.max-u.min)/10,u.q3-u.q1),C=1e-9*k,E=.01*k,L=[],D=0;if(i.jitter){if(0===k)for(D=1,L=new Array(A.length),w=0;w<A.length;w++)L[w]=1;else for(w=0;w<A.length;w++){var N=Math.max(0,w-5),F=A[N].v,I=Math.min(A.length-1,w+5),P=A[I].v;"all"!==f&&(A[w].v<u.lf?P=Math.min(P,u.lf):F=Math.max(F,u.uf));var j=Math.sqrt(E*(I-N)/(P-F+C))||0;j=x.constrain(Math.abs(j),0,1),L.push(j),D=Math.max(j,D)}c=2*i.jitter/(D||1)}for(w=0;w<A.length;w++){var V=A[w],Z=V.v,Y=i.jitter?c*L[w]*(x.pseudoRandom()-.5):0,ee=u.pos+p+d*(i.pointpos+Y);"h"===i.orientation?(V.y=ee,V.x=Z):(V.x=ee,V.y=Z),"suspectedoutliers"===f&&Z<u.uo&&Z>u.lo&&(V.so=!0)}return A});m.enter().append("path").classed("point",!0),m.exit().remove(),m.call(M.translatePoints,h,s)}function o(a,l,i,v){var h,s,d=l.val,p=l.pos,f=!!p.rangebreaks,g=v.bPos,m=v.bPosPxOffset||0,u=i.boxmean||(i.meanline||{}).visible;Array.isArray(v.bdPos)?(h=v.bdPos[0],s=v.bdPos[1]):(h=v.bdPos,s=v.bdPos);var w=a.selectAll("path.mean").data("box"===i.type&&i.boxmean||"violin"===i.type&&i.box.visible&&i.meanline.visible?x.identity:[]);w.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),w.exit().remove(),w.each(function(c){var A=p.c2l(c.pos+g,!0),k=p.l2p(A-h)+m,C=p.l2p(A+s)+m,E=f?(k+C)/2:p.l2p(A)+m,L=d.c2p(c.mean,!0),D=d.c2p(c.mean-c.sd,!0),N=d.c2p(c.mean+c.sd,!0);"h"===i.orientation?y.select(this).attr("d","M"+L+","+k+"V"+C+("sd"===u?"m0,0L"+D+","+E+"L"+L+","+k+"L"+N+","+E+"Z":"")):y.select(this).attr("d","M"+k+","+L+"H"+C+("sd"===u?"m0,0L"+E+","+D+"L"+k+","+L+"L"+E+","+N+"Z":""))})}oe.exports={plot:function(a,l,i,v){var h=l.xaxis,s=l.yaxis;x.makeTraceGroups(v,i,"trace boxes").each(function(d){var p,f,g=y.select(this),m=d[0],u=m.t,w=m.trace;u.wdPos=u.bdPos*w.whiskerwidth,!0!==w.visible||u.empty?g.remove():("h"===w.orientation?(p=s,f=h):(p=h,f=s),_(g,{pos:p,val:f},w,u),e(g,{x:h,y:s},w,u),o(g,{pos:p,val:f},w,u))})},plotBoxAndWhiskers:_,plotPoints:e,plotBoxMean:o}},{"../../components/drawing":388,"../../lib":503,"@plotly/d3":58}],683:[function(b,oe,se){"use strict";oe.exports=function(y,x){var M,_,e=y.cd,o=y.xaxis,a=y.yaxis,l=[];if(!1===x)for(M=0;M<e.length;M++)for(_=0;_<(e[M].pts||[]).length;_++)e[M].pts[_].selected=0;else for(M=0;M<e.length;M++)for(_=0;_<(e[M].pts||[]).length;_++){var i=e[M].pts[_],v=o.c2p(i.x),h=a.c2p(i.y);x.contains([v,h],null,i.i,y)?(l.push({pointNumber:i.i,x:o.c2d(i.x),y:a.c2d(i.y)}),i.selected=1):i.selected=0}return l}},{}],684:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../components/color"),M=b("../../components/drawing");oe.exports={style:function(_,e,o){var a=o||y.select(_).selectAll("g.trace.boxes");a.style("opacity",function(l){return l[0].trace.opacity}),a.each(function(l){var i=y.select(this),v=l[0].trace,h=v.line.width;function s(f,g,m,u){f.style("stroke-width",g+"px").call(x.stroke,m).call(x.fill,u)}var d=i.selectAll("path.box");if("candlestick"===v.type)d.each(function(f){if(!f.empty){var g=y.select(this),m=v[f.dir];s(g,m.line.width,m.line.color,m.fillcolor),g.style("opacity",v.selectedpoints&&!f.selected?.3:1)}});else{s(d,h,v.line.color,v.fillcolor),i.selectAll("path.mean").style({"stroke-width":h,"stroke-dasharray":2*h+"px,"+h+"px"}).call(x.stroke,v.line.color);var p=i.selectAll("path.point");M.pointStyle(p,v,_)}})},styleOnSelect:function(_,e,o){var a=e[0].trace,l=o.selectAll("path.point");a.selectedpoints?M.selectedPointStyle(l,a):M.pointStyle(l,a,_)}}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],685:[function(b,oe,se){"use strict";var y=b("../../lib").extendFlat,x=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=b("../ohlc/attributes"),_=b("../box/attributes");function e(o){return{line:{color:y({},_.line.color,{dflt:o}),width:_.line.width,editType:"style"},fillcolor:_.fillcolor,editType:"style"}}oe.exports={xperiod:M.xperiod,xperiod0:M.xperiod0,xperiodalignment:M.xperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),x:M.x,open:M.open,high:M.high,low:M.low,close:M.close,line:{width:y({},_.line.width,{}),editType:"style"},increasing:e(M.increasing.line.color.dflt),decreasing:e(M.decreasing.line.color.dflt),text:M.text,hovertext:M.hovertext,whiskerwidth:y({},_.whiskerwidth,{dflt:0}),hoverlabel:M.hoverlabel}},{"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673,"../ohlc/attributes":872}],686:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plots/cartesian/axes"),M=b("../../plots/cartesian/align_period"),_=b("../ohlc/calc").calcCommon;function e(o,a,l,i){return{min:l,q1:Math.min(o,i),med:i,q3:Math.max(o,i),max:a}}oe.exports=function(o,a){var l=o._fullLayout,i=x.getFromId(o,a.xaxis),v=x.getFromId(o,a.yaxis),h=i.makeCalcdata(a,"x"),s=M(a,i,"x",h).vals,d=_(o,a,h,s,v,e);return d.length?(y.extendFlat(d[0].t,{num:l._numBoxes,dPos:y.distinctVals(s).minDiff/2,posLetter:"x",valLetter:"y"}),l._numBoxes++,d):[{t:{empty:!0}}]}},{"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../ohlc/calc":873}],687:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../components/color"),M=b("../ohlc/ohlc_defaults"),_=b("../scatter/period_defaults"),e=b("./attributes");function o(a,l,i,v){var h=i(v+".line.color");i(v+".line.width",l.line.width),i(v+".fillcolor",x.addOpacity(h,.5))}oe.exports=function(a,l,i,v){function h(s,d){return y.coerce(a,l,e,s,d)}M(a,l,h,v)?(_(a,l,v,h,{x:!0}),h("xhoverformat"),h("yhoverformat"),h("line.width"),o(0,l,h,"increasing"),o(0,l,h,"decreasing"),h("text"),h("hovertext"),h("whiskerwidth"),v._requestRangeslider[l.xaxis]=!0):l.visible=!1}},{"../../components/color":366,"../../lib":503,"../ohlc/ohlc_defaults":877,"../scatter/period_defaults":947,"./attributes":685}],688:[function(b,oe,se){"use strict";oe.exports={moduleType:"trace",name:"candlestick",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:b("./attributes"),layoutAttributes:b("../box/layout_attributes"),supplyLayoutDefaults:b("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:b("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("../box/plot").plot,layerName:"boxlayer",style:b("../box/style").style,hoverPoints:b("../ohlc/hover").hoverPoints,selectPoints:b("../ohlc/select")}},{"../../plots/cartesian":568,"../box/cross_trace_calc":675,"../box/layout_attributes":680,"../box/layout_defaults":681,"../box/plot":682,"../box/style":684,"../ohlc/hover":875,"../ohlc/select":879,"./attributes":685,"./calc":686,"./defaults":687}],689:[function(b,oe,se){"use strict";var y=b("./axis_defaults"),x=b("../../plot_api/plot_template");oe.exports=function(M,_,e,o,a){var l,i,v,h;o("a")||(o("da"),o("a0")),o("b")||(o("db"),o("b0")),l=M,i=_,v=e,h=a,["aaxis","baxis"].forEach(function(s){var d=s.charAt(0),p=l[s]||{},f=x.newContainer(i,s);y(p,f,{noTicklabelstep:!0,tickfont:"x",id:d+"axis",letter:d,font:i.font,name:s,data:l[d],calendar:i.calendar,dfltColor:h,bgColor:v.paper_bgcolor,autotypenumbersDflt:v.autotypenumbers,fullLayout:v}),f._categories=f._categories||[],l[s]||"-"===p.type||(l[s]={type:p.type})})}},{"../../plot_api/plot_template":543,"./axis_defaults":694}],690:[function(b,oe,se){"use strict";var y=b("../../lib").isArrayOrTypedArray;oe.exports=function(x){return function M(_,e){if(!y(_)||e>=10)return null;for(var o=1/0,a=-1/0,l=_.length,i=0;i<l;i++){var v=_[i];if(y(v)){var h=M(v,e+1);h&&(o=Math.min(h[0],o),a=Math.max(h[1],a))}else o=Math.min(v,o),a=Math.max(v,a)}return[o,a]}(x,0)}},{"../../lib":503}],691:[function(b,oe,se){"use strict";var y=b("../../plots/font_attributes"),x=b("./axis_attributes"),M=b("../../components/color/attributes"),_=y({editType:"calc"});_.family.dflt='"Open Sans", verdana, arial, sans-serif',_.size.dflt=12,_.color.dflt=M.defaultLine,oe.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:x,baxis:x,font:_,color:{valType:"color",dflt:M.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":365,"../../plots/font_attributes":585,"./axis_attributes":693}],692:[function(b,oe,se){"use strict";var y=b("../../lib").isArrayOrTypedArray;oe.exports=function(x,M,_,e){var o,a,l,i,v,h,s,d,p,f,g,m,u,w=y(_)?"a":"b",c=("a"===w?x.aaxis:x.baxis).smoothing,A="a"===w?x.a2i:x.b2j,k="a"===w?_:e,C="a"===w?e:_,E="a"===w?M.a.length:M.b.length,L="a"===w?M.b.length:M.a.length,D=Math.floor("a"===w?x.b2j(C):x.a2i(C)),N="a"===w?function(ie){return x.evalxy([],ie,D)}:function(ie){return x.evalxy([],D,ie)};c&&(l=Math.max(0,Math.min(L-2,D)),i=D-l,a="a"===w?function(ie,q){return x.dxydi([],ie,l,q,i)}:function(ie,q){return x.dxydj([],l,ie,i,q)});var F=A(k[0]),I=A(k[1]),P=F<I?1:-1,j=1e-8*(I-F),V=P>0?Math.floor:Math.ceil,Z=P>0?Math.ceil:Math.floor,Y=P>0?Math.min:Math.max,ee=P>0?Math.max:Math.min,re=V(F+j),X=Z(I-j),K=[[s=N(F)]];for(o=re;o*P<X*P;o+=P)v=[],g=ee(F,o),u=(m=Y(I,o+P))-g,h=Math.max(0,Math.min(E-2,Math.floor(.5*(g+m)))),d=N(m),c&&(p=a(h,g-h),f=a(h,m-h),v.push([s[0]+p[0]/3*u,s[1]+p[1]/3*u]),v.push([d[0]-f[0]/3*u,d[1]-f[1]/3*u])),v.push(d),K.push(v),s=d;return K}},{"../../lib":503}],693:[function(b,oe,se){"use strict";var y=b("../../plots/font_attributes"),x=b("../../components/color/attributes"),M=b("../../plots/cartesian/layout_attributes"),_=b("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=b("../../plot_api/edit_types").overrideAll,o=b("../../components/drawing/attributes").dash,a=b("../../lib/extend").extendFlat;oe.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:y({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:M.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:y({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:_("tick label")},tickformatstops:e(M.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:x.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},griddash:a({},o,{editType:"calc"}),showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgriddash:a({},o,{editType:"calc"}),minorgridcolor:{valType:"color",dflt:x.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:y({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],694:[function(b,oe,se){"use strict";var y=b("./attributes"),x=b("../../components/color").addOpacity,M=b("../../registry"),_=b("../../lib"),e=b("../../plots/cartesian/tick_value_defaults"),o=b("../../plots/cartesian/tick_label_defaults"),a=b("../../plots/cartesian/prefix_suffix_defaults"),l=b("../../plots/cartesian/category_order_defaults"),i=b("../../plots/cartesian/set_convert"),v=b("../../plots/cartesian/axis_autotype");oe.exports=function(h,s,d){var p=d.letter,f=d.font||{},g=y[p+"axis"];function m(P,j){return _.coerce(h,s,g,P,j)}function u(P,j){return _.coerce2(h,s,g,P,j)}d.name&&(s._name=d.name,s._id=d.name),m("autotypenumbers",d.autotypenumbersDflt);var w=m("type");"-"===w&&(d.data&&function(P,j){if("-"===P.type){var V=P._id.charAt(0);P.type=v(j,P[V+"calendar"],{autotypenumbers:P.autotypenumbers})}}(s,d.data),"-"===s.type?s.type="linear":w=h.type=s.type),m("smoothing"),m("cheatertype"),m("showticklabels"),m("labelprefix",p+" = "),m("labelsuffix"),m("showtickprefix"),m("showticksuffix"),m("separatethousands"),m("tickformat"),m("exponentformat"),m("minexponent"),m("showexponent"),m("categoryorder"),m("tickmode"),m("tickvals"),m("ticktext"),m("tick0"),m("dtick"),"array"===s.tickmode&&(m("arraytick0"),m("arraydtick")),m("labelpadding"),s._hovertitle=p,"date"===w&&M.getComponentMethod("calendars","handleDefaults")(h,s,"calendar",d.calendar),i(s,d.fullLayout),s.c2p=_.identity;var c=m("color",d.dfltColor),A=c===h.color?c:f.color;m("title.text")&&(_.coerceFont(m,"title.font",{family:f.family,size:_.bigFont(f.size),color:A}),m("title.offset")),m("tickangle"),m("autorange",!s.isValidRange(h.range))&&m("rangemode"),m("range"),s.cleanRange(),m("fixedrange"),e(h,s,m,w),a(h,s,m,w,d),o(h,s,m,w,d),l(h,s,m,{data:d.data,dataAttr:p});var k=u("gridcolor",x(c,.3)),C=u("gridwidth"),E=u("griddash"),L=m("showgrid");L||(delete s.gridcolor,delete s.gridwidth,delete s.griddash);var D=u("startlinecolor",c),N=u("startlinewidth",C);m("startline",s.showgrid||!!D||!!N)||(delete s.startlinecolor,delete s.startlinewidth);var F=u("endlinecolor",c),I=u("endlinewidth",C);return m("endline",s.showgrid||!!F||!!I)||(delete s.endlinecolor,delete s.endlinewidth),L?(m("minorgridcount"),m("minorgridwidth",C),m("minorgriddash",E),m("minorgridcolor",x(k,.06)),s.minorgridcount||(delete s.minorgridwidth,delete s.minorgriddash,delete s.minorgridcolor)):(delete s.gridcolor,delete s.gridwidth,delete s.griddash),"none"===s.showticklabels&&(delete s.tickfont,delete s.tickangle,delete s.showexponent,delete s.exponentformat,delete s.minexponent,delete s.tickformat,delete s.showticksuffix,delete s.showtickprefix),s.showticksuffix||delete s.ticksuffix,s.showtickprefix||delete s.tickprefix,m("tickmode"),s}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../plots/cartesian/category_order_defaults":559,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/set_convert":576,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_value_defaults":580,"../../registry":638,"./attributes":691}],695:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axes"),x=b("../../lib").isArray1D,M=b("./cheater_basis"),_=b("./array_minmax"),e=b("./calc_gridlines"),o=b("./calc_labels"),a=b("./calc_clippath"),l=b("../heatmap/clean_2d_array"),i=b("./smooth_fill_2d_array"),v=b("../heatmap/convert_column_xyz"),h=b("./set_convert");oe.exports=function(s,d){var p=y.getFromId(s,d.xaxis),f=y.getFromId(s,d.yaxis),g=d.aaxis,m=d.baxis,u=d.x,w=d.y,c=[];u&&x(u)&&c.push("x"),w&&x(w)&&c.push("y"),c.length&&v(d,g,m,"a","b",c);var A=d._a=d._a||d.a,k=d._b=d._b||d.b;u=d._x||d.x,w=d._y||d.y;var C={};d._cheater&&(u=M("index"===g.cheatertype?A.length:A,"index"===m.cheatertype?k.length:k,d.cheaterslope)),d._x=u=l(u),d._y=w=l(w),i(u,A,k),i(w,A,k),h(d),d.setScale();var D=_(u),N=_(w),F=.5*(D[1]-D[0]),I=.5*(D[1]+D[0]),P=.5*(N[1]-N[0]),j=.5*(N[1]+N[0]);return N=[j-1.3*P,j+1.3*P],d._extremes[p._id]=y.findExtremes(p,D=[I-1.3*F,I+1.3*F],{padded:!0}),d._extremes[f._id]=y.findExtremes(f,N,{padded:!0}),e(d,"a","b"),e(d,"b","a"),o(d,g),o(d,m),C.clipsegments=a(d._xctrl,d._yctrl,g,m),C.x=u,C.y=w,C.a=A,C.b=k,[C]}},{"../../lib":503,"../../plots/cartesian/axes":554,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"./array_minmax":690,"./calc_clippath":696,"./calc_gridlines":697,"./calc_labels":698,"./cheater_basis":700,"./set_convert":713,"./smooth_fill_2d_array":714}],696:[function(b,oe,se){"use strict";oe.exports=function(y,x,M,_){var e,o,a,l=[],i=!!M.smoothing,v=!!_.smoothing,h=y[0].length-1,s=y.length-1;for(e=0,o=[],a=[];e<=h;e++)o[e]=y[0][e],a[e]=x[0][e];for(l.push({x:o,y:a,bicubic:i}),e=0,o=[],a=[];e<=s;e++)o[e]=y[e][h],a[e]=x[e][h];for(l.push({x:o,y:a,bicubic:v}),e=h,o=[],a=[];e>=0;e--)o[h-e]=y[s][e],a[h-e]=x[s][e];for(l.push({x:o,y:a,bicubic:i}),e=s,o=[],a=[];e>=0;e--)o[s-e]=y[e][0],a[s-e]=x[e][0];return l.push({x:o,y:a,bicubic:v}),l}},{}],697:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axes"),x=b("../../lib/extend").extendFlat;oe.exports=function(M,_,e){var o,a,l,i,v,h,s,d,p,f,g,m,u,w,c=M["_"+_],A=M[_+"axis"],k=A._gridlines=[],C=A._minorgridlines=[],E=A._boundarylines=[],L=M["_"+e],D=M[e+"axis"];"array"===A.tickmode&&(A.tickvals=c.slice());var N=M._xctrl,F=M._yctrl,I=N[0].length,P=N.length,j=M._a.length,V=M._b.length;y.prepTicks(A),"array"===A.tickmode&&delete A.tickvals;var Z=A.smoothing?3:1;function Y(re){var X,K,ie,q,U,W,ae,G,te,ne,le,ue,pe=[],de=[],_e={};if("b"===_)for(K=M.b2j(re),ie=Math.floor(Math.max(0,Math.min(V-2,K))),q=K-ie,_e.length=V,_e.crossLength=j,_e.xy=function(me){return M.evalxy([],me,K)},_e.dxy=function(me,we){return M.dxydi([],me,ie,we,q)},X=0;X<j;X++)W=Math.min(j-2,X),ae=X-W,G=M.evalxy([],X,K),D.smoothing&&X>0&&(te=M.dxydi([],X-1,ie,0,q),pe.push(U[0]+te[0]/3),de.push(U[1]+te[1]/3),ne=M.dxydi([],X-1,ie,1,q),pe.push(G[0]-ne[0]/3),de.push(G[1]-ne[1]/3)),pe.push(G[0]),de.push(G[1]),U=G;else for(X=M.a2i(re),W=Math.floor(Math.max(0,Math.min(j-2,X))),ae=X-W,_e.length=j,_e.crossLength=V,_e.xy=function(me){return M.evalxy([],X,me)},_e.dxy=function(me,we){return M.dxydj([],W,me,ae,we)},K=0;K<V;K++)ie=Math.min(V-2,K),q=K-ie,G=M.evalxy([],X,K),D.smoothing&&K>0&&(le=M.dxydj([],W,K-1,ae,0),pe.push(U[0]+le[0]/3),de.push(U[1]+le[1]/3),ue=M.dxydj([],W,K-1,ae,1),pe.push(G[0]-ue[0]/3),de.push(G[1]-ue[1]/3)),pe.push(G[0]),de.push(G[1]),U=G;return _e.axisLetter=_,_e.axis=A,_e.crossAxis=D,_e.value=re,_e.constvar=e,_e.index=d,_e.x=pe,_e.y=de,_e.smoothing=D.smoothing,_e}function ee(re){var X,K,ie,q,U,W=[],ae=[],G={};if(G.length=c.length,G.crossLength=L.length,"b"===_)for(ie=Math.max(0,Math.min(V-2,re)),U=Math.min(1,Math.max(0,re-ie)),G.xy=function(te){return M.evalxy([],te,re)},G.dxy=function(te,ne){return M.dxydi([],te,ie,ne,U)},X=0;X<I;X++)W[X]=N[re*Z][X],ae[X]=F[re*Z][X];else for(K=Math.max(0,Math.min(j-2,re)),q=Math.min(1,Math.max(0,re-K)),G.xy=function(te){return M.evalxy([],re,te)},G.dxy=function(te,ne){return M.dxydj([],K,te,q,ne)},X=0;X<P;X++)W[X]=N[X][re*Z],ae[X]=F[X][re*Z];return G.axisLetter=_,G.axis=A,G.crossAxis=D,G.value=c[re],G.constvar=e,G.index=re,G.x=W,G.y=ae,G.smoothing=D.smoothing,G}if("array"===A.tickmode){for(i=5e-15,h=(v=[Math.floor((c.length-1-A.arraytick0)/A.arraydtick*(1+i)),Math.ceil(-A.arraytick0/A.arraydtick/(1+i))].sort(function(re,X){return re-X}))[0]-1,s=v[1]+1,d=h;d<s;d++)(a=A.arraytick0+A.arraydtick*d)<0||a>c.length-1||k.push(x(ee(a),{color:A.gridcolor,width:A.gridwidth,dash:A.griddash}));for(d=h;d<s;d++)if(l=A.arraytick0+A.arraydtick*d,g=Math.min(l+A.arraydtick,c.length-1),!(l<0||l>c.length-1||g<0||g>c.length-1))for(m=c[l],u=c[g],o=0;o<A.minorgridcount;o++)(w=g-l)<=0||(f=m+(u-m)*(o+1)/(A.minorgridcount+1)*(A.arraydtick/w))<c[0]||f>c[c.length-1]||C.push(x(Y(f),{color:A.minorgridcolor,width:A.minorgridwidth,dash:A.minorgriddash}));A.startline&&E.push(x(ee(0),{color:A.startlinecolor,width:A.startlinewidth})),A.endline&&E.push(x(ee(c.length-1),{color:A.endlinecolor,width:A.endlinewidth}))}else{for(i=5e-15,h=(v=[Math.floor((c[c.length-1]-A.tick0)/A.dtick*(1+i)),Math.ceil((c[0]-A.tick0)/A.dtick/(1+i))].sort(function(re,X){return re-X}))[0],s=v[1],d=h;d<=s;d++)k.push(x(Y(p=A.tick0+A.dtick*d),{color:A.gridcolor,width:A.gridwidth,dash:A.griddash}));for(d=h-1;d<s+1;d++)for(p=A.tick0+A.dtick*d,o=0;o<A.minorgridcount;o++)(f=p+A.dtick*(o+1)/(A.minorgridcount+1))<c[0]||f>c[c.length-1]||C.push(x(Y(f),{color:A.minorgridcolor,width:A.minorgridwidth,dash:A.minorgriddash}));A.startline&&E.push(x(Y(c[0]),{color:A.startlinecolor,width:A.startlinewidth})),A.endline&&E.push(x(Y(c[c.length-1]),{color:A.endlinecolor,width:A.endlinewidth}))}}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],698:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axes"),x=b("../../lib/extend").extendFlat;oe.exports=function(M,_){var e,o,a,l=_._labels=[],i=_._gridlines;for(e=0;e<i.length;e++)a=i[e],-1!==["start","both"].indexOf(_.showticklabels)&&(o=y.tickText(_,a.value),x(o,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:a.xy(0),dxy:a.dxy(0,0),axis:a.axis,length:a.crossAxis.length,font:a.axis.tickfont,isFirst:0===e,isLast:e===i.length-1}),l.push(o)),-1!==["end","both"].indexOf(_.showticklabels)&&(o=y.tickText(_,a.value),x(o,{endAnchor:!1,xy:a.xy(a.crossLength-1),dxy:a.dxy(a.crossLength-2,1),axis:a.axis,length:a.crossAxis.length,font:a.axis.tickfont,isFirst:0===e,isLast:e===i.length-1}),l.push(o))}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],699:[function(b,oe,se){"use strict";oe.exports=function(y,x,M,_){var e=y[0]-x[0],o=y[1]-x[1],a=M[0]-x[0],l=M[1]-x[1],i=Math.pow(e*e+o*o,.25),v=Math.pow(a*a+l*l,.25),h=(v*v*e-i*i*a)*_,s=(v*v*o-i*i*l)*_,d=v*(i+v)*3,p=i*(i+v)*3;return[[x[0]+(d&&h/d),x[1]+(d&&s/d)],[x[0]-(p&&h/p),x[1]-(p&&s/p)]]}},{}],700:[function(b,oe,se){"use strict";var y=b("../../lib").isArrayOrTypedArray;oe.exports=function(x,M,_){var e,o,a,l,i,v,h=[],s=y(x)?x.length:x,d=y(M)?M.length:M,p=y(x)?x:null,f=y(M)?M:null;p&&(a=(p.length-1)/(p[p.length-1]-p[0])/(s-1)),f&&(l=(f.length-1)/(f[f.length-1]-f[0])/(d-1));var g=1/0,m=-1/0;for(o=0;o<d;o++)for(h[o]=[],i=f?(f[o]-f[0])*l:o/(d-1),e=0;e<s;e++)v=(p?(p[e]-p[0])*a:e/(s-1))-i*_,g=Math.min(v,g),m=Math.max(v,m),h[o][e]=v;var u=1/(m-g),w=-g*u;for(o=0;o<d;o++)for(e=0;e<s;e++)h[o][e]=u*h[o][e]+w;return h}},{"../../lib":503}],701:[function(b,oe,se){"use strict";var y=b("./catmull_rom"),x=b("../../lib").ensureArray;function M(_,e,o){return[(2*(-.5*o[0]+1.5*e[0])+_[0])/3,(2*(-.5*o[1]+1.5*e[1])+_[1])/3]}oe.exports=function(_,e,o,a,l,i){var v,h,s,d,p,f,g,m,u,w,c=o[0].length,A=o.length,k=l?3*c-2:c,C=i?3*A-2:A;for(_=x(_,C),e=x(e,C),s=0;s<C;s++)_[s]=x(_[s],k),e[s]=x(e[s],k);for(h=0,d=0;h<A;h++,d+=i?3:1)for(p=_[d],f=e[d],g=o[h],m=a[h],v=0,s=0;v<c;v++,s+=l?3:1)p[s]=g[v],f[s]=m[v];if(l)for(h=0,d=0;h<A;h++,d+=i?3:1){for(v=1,s=3;v<c-1;v++,s+=3)u=y([o[h][v-1],a[h][v-1]],[o[h][v],a[h][v]],[o[h][v+1],a[h][v+1]],l),_[d][s-1]=u[0][0],e[d][s-1]=u[0][1],_[d][s+1]=u[1][0],e[d][s+1]=u[1][1];w=M([_[d][0],e[d][0]],[_[d][2],e[d][2]],[_[d][3],e[d][3]]),_[d][1]=w[0],e[d][1]=w[1],w=M([_[d][k-1],e[d][k-1]],[_[d][k-3],e[d][k-3]],[_[d][k-4],e[d][k-4]]),_[d][k-2]=w[0],e[d][k-2]=w[1]}if(i)for(s=0;s<k;s++){for(d=3;d<C-3;d+=3)u=y([_[d-3][s],e[d-3][s]],[_[d][s],e[d][s]],[_[d+3][s],e[d+3][s]],i),_[d-1][s]=u[0][0],e[d-1][s]=u[0][1],_[d+1][s]=u[1][0],e[d+1][s]=u[1][1];w=M([_[0][s],e[0][s]],[_[2][s],e[2][s]],[_[3][s],e[3][s]]),_[1][s]=w[0],e[1][s]=w[1],w=M([_[C-1][s],e[C-1][s]],[_[C-3][s],e[C-3][s]],[_[C-4][s],e[C-4][s]]),_[C-2][s]=w[0],e[C-2][s]=w[1]}if(l&&i)for(d=1;d<C;d+=(d+1)%3==0?2:1){for(s=3;s<k-3;s+=3)u=y([_[d][s-3],e[d][s-3]],[_[d][s],e[d][s]],[_[d][s+3],e[d][s+3]],l),_[d][s-1]=.5*(_[d][s-1]+u[0][0]),e[d][s-1]=.5*(e[d][s-1]+u[0][1]),_[d][s+1]=.5*(_[d][s+1]+u[1][0]),e[d][s+1]=.5*(e[d][s+1]+u[1][1]);w=M([_[d][0],e[d][0]],[_[d][2],e[d][2]],[_[d][3],e[d][3]]),_[d][1]=.5*(_[d][1]+w[0]),e[d][1]=.5*(e[d][1]+w[1]),w=M([_[d][k-1],e[d][k-1]],[_[d][k-3],e[d][k-3]],[_[d][k-4],e[d][k-4]]),_[d][k-2]=.5*(_[d][k-2]+w[0]),e[d][k-2]=.5*(e[d][k-2]+w[1])}return[_,e]}},{"../../lib":503,"./catmull_rom":699}],702:[function(b,oe,se){"use strict";oe.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],703:[function(b,oe,se){"use strict";oe.exports=function(y,x,M){return x&&M?function(_,e,o,a,l){var i,d,p;_||(_=[]),e*=3,o*=3;var f=a*a,g=1-a,m=g*g,u=g*a*2,w=-3*m,c=3*(m-u),A=3*(u-f),k=3*f,C=l*l,E=C*l,L=1-l,D=L*L,N=D*L;for(p=0;p<y.length;p++)i=w*(d=y[p])[o][e]+c*d[o][e+1]+A*d[o][e+2]+k*d[o][e+3],_[p]=N*i+3*(D*l*(w*d[o+1][e]+c*d[o+1][e+1]+A*d[o+1][e+2]+k*d[o+1][e+3])+L*C*(w*d[o+2][e]+c*d[o+2][e+1]+A*d[o+2][e+2]+k*d[o+2][e+3]))+E*(w*d[o+3][e]+c*d[o+3][e+1]+A*d[o+3][e+2]+k*d[o+3][e+3]);return _}:x?function(_,e,o,a,l){var i,h,s;_||(_=[]),e*=3;var d=a*a,p=1-a,f=p*p,g=p*a*2,m=-3*f,u=3*(f-g),w=3*(g-d),c=3*d,A=1-l;for(h=0;h<y.length;h++)i=m*(s=y[h])[o][e]+u*s[o][e+1]+w*s[o][e+2]+c*s[o][e+3],_[h]=A*i+l*(m*s[o+1][e]+u*s[o+1][e+1]+w*s[o+1][e+2]+c*s[o+1][e+3]);return _}:M?function(_,e,o,a,l){var i,d,p;_||(_=[]),o*=3;var f=l*l,g=f*l,m=1-l,u=m*m,w=u*m;for(d=0;d<y.length;d++)i=(p=y[d])[o][e+1]-p[o][e],_[d]=w*i+3*(u*l*(p[o+1][e+1]-p[o+1][e])+m*f*(p[o+2][e+1]-p[o+2][e]))+g*(p[o+3][e+1]-p[o+3][e]);return _}:function(_,e,o,a,l){var i,h,s;_||(_=[]);var d=1-l;for(h=0;h<y.length;h++)i=(s=y[h])[o][e+1]-s[o][e],_[h]=d*i+l*(s[o+1][e+1]-s[o+1][e]);return _}}},{}],704:[function(b,oe,se){"use strict";oe.exports=function(y,x,M){return x&&M?function(_,e,o,a,l){var i,d,p;_||(_=[]),e*=3,o*=3;var f=a*a,g=f*a,m=1-a,u=m*m,w=u*m,c=l*l,A=1-l,k=A*A,C=A*l*2,E=-3*k,L=3*(k-C),D=3*(C-c),N=3*c;for(p=0;p<y.length;p++)i=E*(d=y[p])[o][e]+L*d[o+1][e]+D*d[o+2][e]+N*d[o+3][e],_[p]=w*i+3*(u*a*(E*d[o][e+1]+L*d[o+1][e+1]+D*d[o+2][e+1]+N*d[o+3][e+1])+m*f*(E*d[o][e+2]+L*d[o+1][e+2]+D*d[o+2][e+2]+N*d[o+3][e+2]))+g*(E*d[o][e+3]+L*d[o+1][e+3]+D*d[o+2][e+3]+N*d[o+3][e+3]);return _}:x?function(_,e,o,a,l){var i,d,p;_||(_=[]),e*=3;var f=l*l,g=f*l,m=1-l,u=m*m,w=u*m;for(d=0;d<y.length;d++)i=(p=y[d])[o+1][e]-p[o][e],_[d]=w*i+3*(u*l*(p[o+1][e+1]-p[o][e+1])+m*f*(p[o+1][e+2]-p[o][e+2]))+g*(p[o+1][e+3]-p[o][e+3]);return _}:M?function(_,e,o,a,l){var i,h,s;_||(_=[]),o*=3;var d=1-a,p=l*l,f=1-l,g=f*f,m=f*l*2,u=-3*g,w=3*(g-m),c=3*(m-p),A=3*p;for(h=0;h<y.length;h++)i=u*(s=y[h])[o][e]+w*s[o+1][e]+c*s[o+2][e]+A*s[o+3][e],_[h]=d*i+a*(u*s[o][e+1]+w*s[o+1][e+1]+c*s[o+2][e+1]+A*s[o+3][e+1]);return _}:function(_,e,o,a,l){var i,h,s;_||(_=[]);var d=1-a;for(h=0;h<y.length;h++)i=(s=y[h])[o+1][e]-s[o][e],_[h]=d*i+a*(s[o+1][e+1]-s[o][e+1]);return _}}},{}],705:[function(b,oe,se){"use strict";oe.exports=function(y,x,M,_,e){var o=x-2,a=M-2;return _&&e?function(l,i,v){var h,f,g;l||(l=[]);var m=Math.max(0,Math.min(Math.floor(i),o)),u=Math.max(0,Math.min(Math.floor(v),a)),w=Math.max(0,Math.min(1,i-m)),c=Math.max(0,Math.min(1,v-u));m*=3,u*=3;var A=w*w,k=A*w,C=1-w,E=C*C,L=E*C,D=c*c,N=D*c,F=1-c,I=F*F,P=I*F;for(g=0;g<y.length;g++)h=L*(f=y[g])[u][m]+3*(E*w*f[u][m+1]+C*A*f[u][m+2])+k*f[u][m+3],l[g]=P*h+3*(I*c*(L*f[u+1][m]+3*(E*w*f[u+1][m+1]+C*A*f[u+1][m+2])+k*f[u+1][m+3])+F*D*(L*f[u+2][m]+3*(E*w*f[u+2][m+1]+C*A*f[u+2][m+2])+k*f[u+2][m+3]))+N*(L*f[u+3][m]+3*(E*w*f[u+3][m+1]+C*A*f[u+3][m+2])+k*f[u+3][m+3]);return l}:_?function(l,i,v){l||(l=[]);var h,f,g,m=Math.max(0,Math.min(Math.floor(i),o)),u=Math.max(0,Math.min(Math.floor(v),a)),w=Math.max(0,Math.min(1,i-m)),c=Math.max(0,Math.min(1,v-u));m*=3;var A=w*w,k=A*w,C=1-w,E=C*C,L=E*C,D=1-c;for(f=0;f<y.length;f++)h=D*(g=y[f])[u][m]+c*g[u+1][m],l[f]=L*h+3*(E*w*(D*g[u][m+1]+c*g[u+1][m+1])+C*A*(D*g[u][m+2]+c*g[u+1][m+1]))+k*(D*g[u][m+3]+c*g[u+1][m+1]);return l}:e?function(l,i,v){l||(l=[]);var h,f,g,m=Math.max(0,Math.min(Math.floor(i),o)),u=Math.max(0,Math.min(Math.floor(v),a)),w=Math.max(0,Math.min(1,i-m)),c=Math.max(0,Math.min(1,v-u));u*=3;var A=c*c,k=A*c,C=1-c,E=C*C,L=E*C,D=1-w;for(f=0;f<y.length;f++)h=D*(g=y[f])[u][m]+w*g[u][m+1],l[f]=L*h+3*(E*c*(D*g[u+1][m]+w*g[u+1][m+1])+C*A*(D*g[u+2][m]+w*g[u+2][m+1]))+k*(D*g[u+3][m]+w*g[u+3][m+1]);return l}:function(l,i,v){l||(l=[]);var h,d,p,f=Math.max(0,Math.min(Math.floor(i),o)),g=Math.max(0,Math.min(Math.floor(v),a)),m=Math.max(0,Math.min(1,i-f)),u=Math.max(0,Math.min(1,v-g)),w=1-u,c=1-m;for(d=0;d<y.length;d++)h=c*(p=y[d])[g][f]+m*p[g][f+1],l[d]=w*h+u*(c*p[g+1][f]+m*p[g+1][f+1]);return l}}},{}],706:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./xy_defaults"),M=b("./ab_defaults"),_=b("./attributes"),e=b("../../components/color/attributes");oe.exports=function(o,a,l,i){function v(s,d){return y.coerce(o,a,_,s,d)}a._clipPathId="clip"+a.uid+"carpet";var h=v("color",e.defaultLine);y.coerceFont(v,"font"),v("carpet"),M(o,a,i,v,h),a.a&&a.b?(a.a.length<3&&(a.aaxis.smoothing=0),a.b.length<3&&(a.baxis.smoothing=0),x(o,a,v)||(a.visible=!1),a._cheater&&v("cheaterslope")):a.visible=!1}},{"../../components/color/attributes":365,"../../lib":503,"./ab_defaults":689,"./attributes":691,"./xy_defaults":715}],707:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),plot:b("./plot"),calc:b("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"./attributes":691,"./calc":695,"./defaults":706,"./plot":712}],708:[function(b,oe,se){"use strict";oe.exports=function(y,x){for(var M,_=y._fullData.length,e=0;e<_;e++){var o=y._fullData[e];if(o.index!==x.index&&"carpet"===o.type&&(M||(M=o),o.carpet===x.carpet))return o}return M}},{}],709:[function(b,oe,se){"use strict";oe.exports=function(y,x,M){if(0===y.length)return"";var _,e=[],o=M?3:1;for(_=0;_<y.length;_+=o)e.push(y[_]+","+x[_]),M&&_<y.length-o&&(e.push("C"),e.push([y[_+1]+","+x[_+1],y[_+2]+","+x[_+2]+" "].join(" ")));return e.join(M?"":"L")}},{}],710:[function(b,oe,se){"use strict";var y=b("../../lib").isArrayOrTypedArray;oe.exports=function(x,M,_){var e;for(y(x)?x.length>M.length&&(x=x.slice(0,M.length)):x=[],e=0;e<M.length;e++)x[e]=_(M[e]);return x}},{"../../lib":503}],711:[function(b,oe,se){"use strict";oe.exports=function(y,x,M,_,e,o){var a=e[0]*y.dpdx(x),l=e[1]*y.dpdy(M),i=1,v=1;if(o){var h=Math.sqrt(e[0]*e[0]+e[1]*e[1]),s=Math.sqrt(o[0]*o[0]+o[1]*o[1]);v=Math.max(0,(e[0]*o[0]+e[1]*o[1])/h/s)}var p=180*Math.atan2(l,a)/Math.PI;return p<-90?(p+=180,i=-i):p>90&&(p-=180,i=-i),{angle:p,flip:i,p:y.c2p(_,x,M),offsetMultplier:v}}},{}],712:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../components/drawing"),M=b("./map_1d_array"),_=b("./makepath"),e=b("./orient_text"),o=b("../../lib/svg_text_utils"),a=b("../../lib"),l=a.strRotate,i=a.strTranslate,v=b("../../constants/alignment");function h(g,m,u,w,c,A){var k="const-"+c+"-lines",C=u.selectAll("."+k).data(A);C.enter().append("path").classed(k,!0).style("vector-effect","non-scaling-stroke"),C.each(function(E){var L=E,N=L.y,F=M([],L.x,g.c2p),I=M([],N,m.c2p),P="M"+_(F,I,L.smoothing);y.select(this).attr("d",P).style("stroke-width",L.width).style("stroke",L.color).style("stroke-dasharray",x.dashStyle(L.dash,L.width)).style("fill","none")}),C.exit().remove()}function s(g,m,u,w,c,A,k,C){var E=A.selectAll("text."+C).data(k);E.enter().append("text").classed(C,!0);var L=0,D={};return E.each(function(N,F){var I;if("auto"===N.axis.tickangle)I=e(w,m,u,N.xy,N.dxy);else{var P=(N.axis.tickangle+180)*Math.PI/180;I=e(w,m,u,N.xy,[Math.cos(P),Math.sin(P)])}F||(D={angle:I.angle,flip:I.flip});var j=(N.endAnchor?-1:1)*I.flip,V=y.select(this).attr({"text-anchor":j>0?"start":"end","data-notex":1}).call(x.font,N.font).text(N.text).call(o.convertToTspans,g),Z=x.bBox(this);V.attr("transform",i(I.p[0],I.p[1])+l(I.angle)+i(N.axis.labelpadding*j,.3*Z.height)),L=Math.max(L,Z.width+N.axis.labelpadding)}),E.exit().remove(),D.maxExtent=L,D}oe.exports=function(g,m,u,w){var c=m.xaxis,A=m.yaxis,k=g._fullLayout._clips;a.makeTraceGroups(w,u,"trace").each(function(C){var E=y.select(this),L=C[0],D=L.trace,N=D.aaxis,F=D.baxis,I=a.ensureSingle(E,"g","minorlayer"),P=a.ensureSingle(E,"g","majorlayer"),j=a.ensureSingle(E,"g","boundarylayer"),V=a.ensureSingle(E,"g","labellayer");E.style("opacity",D.opacity),h(c,A,P,0,"a",N._gridlines),h(c,A,P,0,"b",F._gridlines),h(c,A,I,0,"a",N._minorgridlines),h(c,A,I,0,"b",F._minorgridlines),h(c,A,j,0,"a-boundary",N._boundarylines),h(c,A,j,0,"b-boundary",F._boundarylines);var ee,re,X,ie,q,U,W,ae,G,te,ne,le,ue,pe,de,Z=s(g,c,A,D,0,V,N._labels,"a-label"),Y=s(g,c,A,D,0,V,F._labels,"b-label");ee=g,re=V,X=D,ie=c,q=A,U=Z,W=Y,le=a.aggNums(Math.min,null,X.a),ue=a.aggNums(Math.max,null,X.a),pe=a.aggNums(Math.min,null,X.b),de=a.aggNums(Math.max,null,X.b),te=X.ab2xy(ae=.5*(le+ue),G=pe,!0),ne=X.dxyda_rough(ae,G),void 0===U.angle&&a.extendFlat(U,e(X,ie,q,te,X.dxydb_rough(ae,G))),f(ee,re,X,0,te,ne,X.aaxis,ie,q,U,"a-title"),te=X.ab2xy(ae=le,G=.5*(pe+de),!0),ne=X.dxydb_rough(ae,G),void 0===W.angle&&a.extendFlat(W,e(X,ie,q,te,X.dxyda_rough(ae,G))),f(ee,re,X,0,te,ne,X.baxis,ie,q,W,"b-title"),function(ee,re,X,K,ie){var q,U,W,ae,G=X.select("#"+ee._clipPathId);G.size()||(G=X.append("clipPath").classed("carpetclip",!0));var te=a.ensureSingle(G,"path","carpetboundary"),ne=re.clipsegments,le=[];for(ae=0;ae<ne.length;ae++)U=M([],(q=ne[ae]).x,K.c2p),W=M([],q.y,ie.c2p),le.push(_(U,W,q.bicubic));var ue="M"+le.join("L")+"Z";G.attr("id",ee._clipPathId),te.attr("d",ue)}(D,L,k,c,A)})};var d=v.LINE_SPACING,p=(1-v.MID_SHIFT)/d+1;function f(g,m,u,w,c,A,k,C,E,L,D){var N=[];k.title.text&&N.push(k.title.text);var F=m.selectAll("text."+D).data(N),I=L.maxExtent;F.enter().append("text").classed(D,!0),F.each(function(){var P=e(u,C,E,c,A);-1===["start","both"].indexOf(k.showticklabels)&&(I=0);var j=k.title.font.size;I+=j+k.title.offset;var V=(L.angle+(L.flip<0?180:0)-P.angle+450)%360,Z=V>90&&V<270,Y=y.select(this);Y.text(k.title.text).call(o.convertToTspans,g),Z&&(I=(-o.lineCount(Y)+p)*d*j-I),Y.attr("transform",i(P.p[0],P.p[1])+l(P.angle)+i(0,I)).attr("text-anchor","middle").call(x.font,k.title.font)}),F.exit().remove()}},{"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"./makepath":709,"./map_1d_array":710,"./orient_text":711,"@plotly/d3":58}],713:[function(b,oe,se){"use strict";var y=b("./constants"),x=b("../../lib/search").findBin,M=b("./compute_control_points"),_=b("./create_spline_evaluator"),e=b("./create_i_derivative_evaluator"),o=b("./create_j_derivative_evaluator");oe.exports=function(a){var l=a._a,i=a._b,v=l.length,h=i.length,s=a.aaxis,d=a.baxis,p=l[0],f=l[v-1],g=i[0],m=i[h-1],u=l[l.length-1]-l[0],w=i[i.length-1]-i[0],c=u*y.RELATIVE_CULL_TOLERANCE,A=w*y.RELATIVE_CULL_TOLERANCE;p-=c,f+=c,g-=A,m+=A,a.isVisible=function(k,C){return k>p&&k<f&&C>g&&C<m},a.isOccluded=function(k,C){return k<p||k>f||C<g||C>m},a.setScale=function(){var E=M(a._xctrl,a._yctrl,a._x,a._y,s.smoothing,d.smoothing);a._xctrl=E[0],a._yctrl=E[1],a.evalxy=_([a._xctrl,a._yctrl],v,h,s.smoothing,d.smoothing),a.dxydi=e([a._xctrl,a._yctrl],s.smoothing,d.smoothing),a.dxydj=o([a._xctrl,a._yctrl],s.smoothing,d.smoothing)},a.i2a=function(k){var C=Math.max(0,Math.floor(k[0]),v-2),E=k[0]-C;return(1-E)*l[C]+E*l[C+1]},a.j2b=function(k){var C=Math.max(0,Math.floor(k[1]),v-2),E=k[1]-C;return(1-E)*i[C]+E*i[C+1]},a.ij2ab=function(k){return[a.i2a(k[0]),a.j2b(k[1])]},a.a2i=function(k){var C=Math.max(0,Math.min(x(k,l),v-2)),E=l[C];return Math.max(0,Math.min(v-1,C+(k-E)/(l[C+1]-E)))},a.b2j=function(k){var C=Math.max(0,Math.min(x(k,i),h-2)),E=i[C];return Math.max(0,Math.min(h-1,C+(k-E)/(i[C+1]-E)))},a.ab2ij=function(k){return[a.a2i(k[0]),a.b2j(k[1])]},a.i2c=function(k,C){return a.evalxy([],k,C)},a.ab2xy=function(k,C,E){if(!E&&(k<l[0]||k>l[v-1]|C<i[0]||C>i[h-1]))return[!1,!1];var L=a.a2i(k),D=a.b2j(C),N=a.evalxy([],L,D);if(E){var F,I,P,j,V=0,Z=0,Y=[];k<l[0]?(F=0,I=0,V=(k-l[0])/(l[1]-l[0])):k>l[v-1]?(F=v-2,I=1,V=(k-l[v-1])/(l[v-1]-l[v-2])):I=L-(F=Math.max(0,Math.min(v-2,Math.floor(L)))),C<i[0]?(P=0,j=0,Z=(C-i[0])/(i[1]-i[0])):C>i[h-1]?(P=h-2,j=1,Z=(C-i[h-1])/(i[h-1]-i[h-2])):j=D-(P=Math.max(0,Math.min(h-2,Math.floor(D)))),V&&(a.dxydi(Y,F,P,I,j),N[0]+=Y[0]*V,N[1]+=Y[1]*V),Z&&(a.dxydj(Y,F,P,I,j),N[0]+=Y[0]*Z,N[1]+=Y[1]*Z)}return N},a.c2p=function(k,C,E){return[C.c2p(k[0]),E.c2p(k[1])]},a.p2x=function(k,C,E){return[C.p2c(k[0]),E.p2c(k[1])]},a.dadi=function(k){var C=Math.max(0,Math.min(l.length-2,k));return l[C+1]-l[C]},a.dbdj=function(k){var C=Math.max(0,Math.min(i.length-2,k));return i[C+1]-i[C]},a.dxyda=function(k,C,E,L){var D=a.dxydi(null,k,C,E,L),N=a.dadi(k,E);return[D[0]/N,D[1]/N]},a.dxydb=function(k,C,E,L){var D=a.dxydj(null,k,C,E,L),N=a.dbdj(C,L);return[D[0]/N,D[1]/N]},a.dxyda_rough=function(k,C,E){var L=u*(E||.1),D=a.ab2xy(k+L,C,!0),N=a.ab2xy(k-L,C,!0);return[.5*(D[0]-N[0])/L,.5*(D[1]-N[1])/L]},a.dxydb_rough=function(k,C,E){var L=w*(E||.1),D=a.ab2xy(k,C+L,!0),N=a.ab2xy(k,C-L,!0);return[.5*(D[0]-N[0])/L,.5*(D[1]-N[1])/L]},a.dpdx=function(k){return k._m},a.dpdy=function(k){return k._m}}},{"../../lib/search":523,"./compute_control_points":701,"./constants":702,"./create_i_derivative_evaluator":703,"./create_j_derivative_evaluator":704,"./create_spline_evaluator":705}],714:[function(b,oe,se){"use strict";var y=b("../../lib");oe.exports=function(x,M,_){var e,o,a,l=[],i=[],v=x[0].length,h=x.length;var d,p,f,g,m,u,w,c,A,k,re,X,K,ie,q,E=0;for(e=0;e<v;e++)for(o=0;o<h;o++)void 0===x[o][e]&&(l.push(e),i.push(o),x[o][e]=(X=o,K=void 0,ie=void 0,q=void 0,ie=0,q=0,(re=e)>0&&void 0!==(K=x[X][re-1])&&(q++,ie+=K),re<v-1&&void 0!==(K=x[X][re+1])&&(q++,ie+=K),X>0&&void 0!==(K=x[X-1][re])&&(q++,ie+=K),X<h-1&&void 0!==(K=x[X+1][re])&&(q++,ie+=K),ie/Math.max(1,q))),E=Math.max(E,Math.abs(x[o][e]));if(!l.length)return x;var L=0,D=0,N=l.length;do{for(L=0,a=0;a<N;a++){o=i[a];var I,P,j,V,Z,Y=0,ee=0;0===(e=l[a])?(P=M[V=Math.min(v-1,2)],ee+=(I=x[o][1])+(I-x[o][V])*(M[0]-(j=M[1]))/(j-P),Y++):e===v-1&&(P=M[V=Math.max(0,v-3)],ee+=(I=x[o][v-2])+(I-x[o][V])*(M[v-1]-(j=M[v-2]))/(j-P),Y++),(0===e||e===v-1)&&o>0&&o<h-1&&(ee+=((p=_[o]-_[o-1])*x[o+1][e]+(d=_[o+1]-_[o])*x[o-1][e])/(p+d),Y++),0===o?(P=_[Z=Math.min(h-1,2)],ee+=(I=x[1][e])+(I-x[Z][e])*(_[0]-(j=_[1]))/(j-P),Y++):o===h-1&&(P=_[Z=Math.max(0,h-3)],ee+=(I=x[h-2][e])+(I-x[Z][e])*(_[h-1]-(j=_[h-2]))/(j-P),Y++),(0===o||o===h-1)&&e>0&&e<v-1&&(ee+=((p=M[e]-M[e-1])*x[o][e+1]+(d=M[e+1]-M[e])*x[o][e-1])/(p+d),Y++),Y?ee/=Y:(c=(m=_[o+1]-_[o])*(u=_[o]-_[o-1])*(m+u),ee=((w=(f=M[e+1]-M[e])*(g=M[e]-M[e-1])*(f+g))*(u*x[o+1][e]+m*x[o-1][e])+c*(g*x[o][e+1]+f*x[o][e-1]))/(c*(g+f)+w*(u+m))),L+=(k=(A=ee-x[o][e])/E)*k,x[o][e]+=A*(1+(Y?0:.85))}L=Math.sqrt(L)}while(D++<100&&L>1e-5);return y.log("Smoother converged to",L,"after",D,"iterations"),x}},{"../../lib":503}],715:[function(b,oe,se){"use strict";var y=b("../../lib").isArray1D;oe.exports=function(x,M,_){var e=_("x"),o=e&&e.length,a=_("y"),l=a&&a.length;if(!o&&!l)return!1;if(M._cheater=!e,o&&!y(e)||l&&!y(a))M._length=null;else{var i=o?e.length:1/0;l&&(i=Math.min(i,a.length)),M.a&&M.a.length&&(i=Math.min(i,M.a.length)),M.b&&M.b.length&&(i=Math.min(i,M.b.length)),M._length=i}return!0}},{"../../lib":503}],716:[function(b,oe,se){"use strict";var y=b("../../plots/template_attributes").hovertemplateAttrs,x=b("../scattergeo/attributes"),M=b("../../components/colorscale/attributes"),_=b("../../plots/attributes"),e=b("../../components/color/attributes").defaultLine,o=b("../../lib/extend").extendFlat,a=x.marker.line;oe.exports=o({locations:{valType:"data_array",editType:"calc"},locationmode:x.locationmode,z:{valType:"data_array",editType:"calc"},geojson:o({},x.geojson,{}),featureidkey:x.featureidkey,text:o({},x.text,{}),hovertext:o({},x.hovertext,{}),marker:{line:{color:o({},a.color,{dflt:e}),width:o({},a.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:x.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:x.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:o({},_.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:y(),showlegend:o({},_.showlegend,{dflt:!1})},M("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattergeo/attributes":969}],717:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../constants/numerical").BADNUM,M=b("../../components/colorscale/calc"),_=b("../scatter/arrays_to_calcdata"),e=b("../scatter/calc_selection");function o(a){return a&&"string"==typeof a}oe.exports=function(a,l){var i,v=l._length,h=new Array(v);i=l.geojson?function(g){return o(g)||y(g)}:o;for(var s=0;s<v;s++){var d=h[s]={},p=l.locations[s],f=l.z[s];i(p)&&y(f)?(d.loc=p,d.z=f):(d.loc=null,d.z=x),d.index=s}return _(h,l),M(a,l,{vals:l.z,containerStr:"",cLetter:"z"}),e(h,l),h}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../scatter/arrays_to_calcdata":926,"../scatter/calc_selection":929,"fast-isnumeric":190}],718:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../components/colorscale/defaults"),M=b("./attributes");oe.exports=function(_,e,o,a){function l(d,p){return y.coerce(_,e,M,d,p)}var i=l("locations"),v=l("z");if(i&&i.length&&y.isArrayOrTypedArray(v)&&v.length){e._length=Math.min(i.length,v.length);var h,s=l("geojson");("string"==typeof s&&""!==s||y.isPlainObject(s))&&(h="geojson-id"),"geojson-id"===l("locationmode",h)&&l("featureidkey"),l("text"),l("hovertext"),l("hovertemplate"),l("marker.line.width")&&l("marker.line.color"),l("marker.opacity"),x(_,e,a,l,{prefix:"",cLetter:"z"}),y.coerceSelectionMarkerOpacity(e,l)}else e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":716}],719:[function(b,oe,se){"use strict";oe.exports=function(y,x,M,_,e){y.location=x.location,y.z=x.z;var o=_[e];return o.fIn&&o.fIn.properties&&(y.properties=o.fIn.properties),y.ct=o.ct,y}},{}],720:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axes"),x=b("./attributes"),M=b("../../lib").fillText;oe.exports=function(_,e,o){var a,l,i,v,h=_.cd,s=h[0].trace,d=_.subplot,p=[e,o],f=[e+360,o];for(l=0;l<h.length;l++)if(v=!1,(a=h[l])._polygons){for(i=0;i<a._polygons.length;i++)a._polygons[i].contains(p)&&(v=!v),a._polygons[i].contains(f)&&(v=!v);if(v)break}if(v&&a)return _.x0=_.x1=_.xa.c2p(a.ct),_.y0=_.y1=_.ya.c2p(a.ct),_.index=a.index,_.location=a.loc,_.z=a.z,_.zLabel=y.tickText(d.mockAxis,d.mockAxis.c2l(a.z),"hover").text,_.hovertemplate=a.hovertemplate,function(g,m,u){if(!m.hovertemplate){var w=u.hi||m.hoverinfo,c=String(u.loc),A="all"===w?x.hoverinfo.flags:w.split("+"),k=-1!==A.indexOf("name"),C=-1!==A.indexOf("location"),E=-1!==A.indexOf("z"),L=-1!==A.indexOf("text"),D=[];!k&&C?g.nameOverride=c:(k&&(g.nameOverride=m.name),C&&D.push(c)),E&&D.push(g.zLabel),L&&M(u,m,D),g.extraText=D.join("<br>")}}(_,s,a),[_]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./attributes":716}],721:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("./calc"),calcGeoJSON:b("./plot").calcGeoJSON,plot:b("./plot").plot,style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"choropleth",basePlotModule:b("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":589,"../heatmap/colorbar":795,"./attributes":716,"./calc":717,"./defaults":718,"./event_data":719,"./hover":720,"./plot":722,"./select":723,"./style":724}],722:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../lib"),M=b("../../lib/geo_location_utils"),_=b("../../lib/topojson_utils").getTopojsonFeatures,e=b("../../plots/cartesian/autorange").findExtremes,o=b("./style").style;oe.exports={calcGeoJSON:function(a,l){for(var i=a[0].trace,v=l[i.geo],h=v._subplot,s=i.locationmode,d=i._length,p="geojson-id"===s?M.extractTraceFeature(a):_(i,h.topojson),f=[],g=[],m=0;m<d;m++){var u=a[m],w="geojson-id"===s?u.fOut:M.locationToFeature(s,u.loc,p);if(w){u.geojson=w,u.ct=w.properties.ct,u._polygons=M.feature2polygons(w);var c=M.computeBbox(w);f.push(c[0],c[2]),g.push(c[1],c[3])}else u.geojson=null}if("geojson"===v.fitbounds&&"geojson-id"===s){var A=M.computeBbox(M.getTraceGeojson(i));f=[A[0],A[2]],g=[A[1],A[3]]}var k={padded:!0};i._extremes.lon=e(v.lonaxis._ax,f,k),i._extremes.lat=e(v.lataxis._ax,g,k)},plot:function(a,l,i){var v=l.layers.backplot.select(".choroplethlayer");x.makeTraceGroups(v,i,"trace choropleth").each(function(h){var s=y.select(this).selectAll("path.choroplethlocation").data(x.identity);s.enter().append("path").classed("choroplethlocation",!0),s.exit().remove(),o(a,h)})}}},{"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"./style":724,"@plotly/d3":58}],723:[function(b,oe,se){"use strict";oe.exports=function(y,x){var M,_,e,o,a,l=y.cd,i=y.xaxis,v=y.yaxis,h=[];if(!1===x)for(M=0;M<l.length;M++)l[M].selected=0;else for(M=0;M<l.length;M++)(e=(_=l[M]).ct)&&(o=i.c2p(e),a=v.c2p(e),x.contains([o,a],null,M,y)?(h.push({pointNumber:M,lon:e[0],lat:e[1]}),_.selected=1):_.selected=0);return h}},{}],724:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../components/color"),M=b("../../components/drawing"),_=b("../../components/colorscale");function e(o,a){var l=a[0].trace,i=a[0].node3.selectAll(".choroplethlocation"),v=l.marker||{},h=v.line||{},s=_.makeColorScaleFuncFromTrace(l);i.each(function(d){y.select(this).attr("fill",s(d.z)).call(x.stroke,d.mlc||h.color).call(M.dashLine,"",d.mlw||h.width||0).style("opacity",v.opacity)}),M.selectedPointStyle(i,l,o)}oe.exports={style:function(o,a){a&&e(o,a)},styleOnSelect:function(o,a){var i=a[0].trace;i.selectedpoints?M.selectedPointStyle(a[0].node3.selectAll(".choroplethlocation"),i,o):e(o,a)}}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"@plotly/d3":58}],725:[function(b,oe,se){"use strict";var y=b("../choropleth/attributes"),x=b("../../components/colorscale/attributes"),M=b("../../plots/template_attributes").hovertemplateAttrs,_=b("../../plots/attributes"),e=b("../../lib/extend").extendFlat;oe.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},y.featureidkey,{}),below:{valType:"string",editType:"plot"},text:y.text,hovertext:y.hovertext,marker:{line:{color:e({},y.marker.line.color,{editType:"plot"}),width:e({},y.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},y.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},y.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},y.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:y.hoverinfo,hovertemplate:M({},{keys:["properties"]}),showlegend:e({},_.showlegend,{dflt:!1})},x("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../choropleth/attributes":716}],726:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../lib"),M=b("../../components/colorscale"),_=b("../../components/drawing"),e=b("../../lib/geojson_utils").makeBlank,o=b("../../lib/geo_location_utils");function a(l){var i,v=l[0].trace,h=v._opts;if(v.selectedpoints){for(var s=_.makeSelectedPointStyleFns(v),d=0;d<l.length;d++){var p=l[d];p.fOut&&(p.fOut.properties.mo2=s.selectedOpacityFn(p))}i={type:"identity",property:"mo2"}}else i=x.isArrayOrTypedArray(v.marker.opacity)?{type:"identity",property:"mo"}:v.marker.opacity;return x.extendFlat(h.fill.paint,{"fill-opacity":i}),x.extendFlat(h.line.paint,{"line-opacity":i}),h}oe.exports={convert:function(l){var i=l[0].trace,v=!0===i.visible&&0!==i._length,h={layout:{visibility:"none"},paint:{}},s={layout:{visibility:"none"},paint:{}},d=i._opts={fill:h,line:s,geojson:e()};if(!v)return d;var p=o.extractTraceFeature(l);if(!p)return d;var f,g,m,u=M.makeColorScaleFuncFromTrace(i),w=i.marker,c=w.line||{};x.isArrayOrTypedArray(w.opacity)&&(f=function(D){var N=D.mo;return y(N)?+x.constrain(N,0,1):0}),x.isArrayOrTypedArray(c.color)&&(g=function(D){return D.mlc}),x.isArrayOrTypedArray(c.width)&&(m=function(D){return D.mlw});for(var A=0;A<l.length;A++){var k=l[A],C=k.fOut;if(C){var E=C.properties;E.fc=u(k.z),f&&(E.mo=f(k)),g&&(E.mlc=g(k)),m&&(E.mlw=m(k)),k.ct=E.ct,k._polygons=o.feature2polygons(C)}}var L=f?{type:"identity",property:"mo"}:w.opacity;return x.extendFlat(h.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":L}),x.extendFlat(s.paint,{"line-color":g?{type:"identity",property:"mlc"}:c.color,"line-width":m?{type:"identity",property:"mlw"}:c.width,"line-opacity":L}),h.layout.visibility="visible",s.layout.visibility="visible",d.geojson={type:"FeatureCollection",features:p},a(l),d},convertOnSelect:a}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"fast-isnumeric":190}],727:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../components/colorscale/defaults"),M=b("./attributes");oe.exports=function(_,e,o,a){function l(s,d){return y.coerce(_,e,M,s,d)}var i=l("locations"),v=l("z"),h=l("geojson");y.isArrayOrTypedArray(i)&&i.length&&y.isArrayOrTypedArray(v)&&v.length&&("string"==typeof h&&""!==h||y.isPlainObject(h))?(l("featureidkey"),e._length=Math.min(i.length,v.length),l("below"),l("text"),l("hovertext"),l("hovertemplate"),l("marker.line.width")&&l("marker.line.color"),l("marker.opacity"),x(_,e,a,l,{prefix:"",cLetter:"z"}),y.coerceSelectionMarkerOpacity(e,l)):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":725}],728:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("../choropleth/calc"),plot:b("./plot"),hoverPoints:b("../choropleth/hover"),eventData:b("../choropleth/event_data"),selectPoints:b("../choropleth/select"),styleOnSelect:function(y,x){x&&x[0].trace._glTrace.updateOnSelect(x)},getBelow:function(y,x){for(var M=x.getMapLayers(),_=M.length-2;_>=0;_--){var e=M[_].id;if("string"==typeof e&&0===e.indexOf("water"))for(var o=_+1;o<M.length;o++)if("string"==typeof(e=M[o].id)&&-1===e.indexOf("plotly-"))return e}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":613,"../choropleth/calc":717,"../choropleth/event_data":719,"../choropleth/hover":720,"../choropleth/select":723,"../heatmap/colorbar":795,"./attributes":725,"./defaults":727,"./plot":729}],729:[function(b,oe,se){"use strict";var y=b("./convert").convert,x=b("./convert").convertOnSelect,M=b("../../plots/mapbox/constants").traceLayerPrefix;function _(o,a){this.type="choroplethmapbox",this.subplot=o,this.uid=a,this.sourceId="source-"+a,this.layerList=[["fill",M+a+"-fill"],["line",M+a+"-line"]],this.below=null}var e=_.prototype;e.update=function(o){this._update(y(o))},e.updateOnSelect=function(o){this._update(x(o))},e._update=function(o){var a=this.subplot,l=this.layerList,i=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(o.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(o,i),this.below=i);for(var v=0;v<l.length;v++){var h=l[v],d=h[1],p=o[h[0]];a.setOptions(d,"setLayoutProperty",p.layout),"visible"===p.layout.visibility&&a.setOptions(d,"setPaintProperty",p.paint)}},e._addLayers=function(o,a){for(var l=this.subplot,i=this.layerList,v=this.sourceId,h=0;h<i.length;h++){var s=i[h],d=s[0],p=o[d];l.addLayer({type:d,id:s[1],source:v,layout:p.layout,paint:p.paint},a)}},e._removeLayers=function(){for(var o=this.subplot.map,a=this.layerList,l=a.length-1;l>=0;l--)o.removeLayer(a[l][1])},e.dispose=function(){var o=this.subplot.map;this._removeLayers(),o.removeSource(this.sourceId)},oe.exports=function(o,a){var l=a[0].trace,i=new _(o,l.uid),v=i.sourceId,h=y(a),s=i.below=o.belowLookup["trace-"+l.uid];return o.map.addSource(v,{type:"geojson",data:h.geojson}),i._addLayers(h,s),a[0].trace._glTrace=i,i}},{"../../plots/mapbox/constants":611,"./convert":726}],730:[function(b,oe,se){"use strict";var y=b("../../components/colorscale/attributes"),x=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=b("../../plots/template_attributes").hovertemplateAttrs,_=b("../mesh3d/attributes"),e=b("../../plots/attributes"),o=b("../../lib/extend").extendFlat,a={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:M({editType:"calc"},{keys:["norm"]}),uhoverformat:x("u",1),vhoverformat:x("v",1),whoverformat:x("w",1),xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z"),showlegend:o({},e.showlegend,{dflt:!1})};o(a,y("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(l){a[l]=_[l]}),a.hoverinfo=o({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),a.transforms=void 0,oe.exports=a},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],731:[function(b,oe,se){"use strict";var y=b("../../components/colorscale/calc");oe.exports=function(x,M){for(var _=M.u,e=M.v,o=M.w,a=Math.min(M.x.length,M.y.length,M.z.length,_.length,e.length,o.length),l=-1/0,i=1/0,v=0;v<a;v++){var h=_[v],s=e[v],d=o[v],p=Math.sqrt(h*h+s*s+d*d);l=Math.max(l,p),i=Math.min(i,p)}M._len=a,M._normMax=l,y(x,M,{vals:[i,l],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],732:[function(b,oe,se){"use strict";var y=b("../../../stackgl_modules").gl_cone3d,x=b("../../../stackgl_modules").gl_cone3d.createConeMesh,M=b("../../lib").simpleMap,_=b("../../lib/gl_format_color").parseColorScale,e=b("../../components/colorscale").extractOpts,o=b("../../plots/gl3d/zip3");function a(d,p){this.scene=d,this.uid=p,this.mesh=null,this.data=null}var l=a.prototype;l.handlePick=function(d){if(d.object===this.mesh){var p=d.index=d.data.index,u=this.data.u[p],w=this.data.v[p],c=this.data.w[p];d.traceCoordinate=[this.data.x[p],this.data.y[p],this.data.z[p],u,w,c,Math.sqrt(u*u+w*w+c*c)];var A=this.data.hovertext||this.data.text;return Array.isArray(A)&&void 0!==A[p]?d.textLabel=A[p]:A&&(d.textLabel=A),!0}};var i={xaxis:0,yaxis:1,zaxis:2},v={tip:1,tail:0,cm:.25,center:.5},h={tip:1,tail:1,cm:.75,center:.5};function s(d,p){var f=d.fullSceneLayout,g=d.dataScale,m={};function u(k,C){var E=f[C],L=g[i[C]];return M(k,function(D){return E.d2l(D)*L})}m.vectors=o(u(p.u,"xaxis"),u(p.v,"yaxis"),u(p.w,"zaxis"),p._len),m.positions=o(u(p.x,"xaxis"),u(p.y,"yaxis"),u(p.z,"zaxis"),p._len);var w=e(p);m.colormap=_(p),m.vertexIntensityBounds=[w.min/p._normMax,w.max/p._normMax],m.coneOffset=v[p.anchor],m.coneSize="scaled"===p.sizemode?p.sizeref||.5:p.sizeref&&p._normMax?p.sizeref/p._normMax:.5;var c=y(m),A=p.lightposition;return c.lightPosition=[A.x,A.y,A.z],c.ambient=p.lighting.ambient,c.diffuse=p.lighting.diffuse,c.specular=p.lighting.specular,c.roughness=p.lighting.roughness,c.fresnel=p.lighting.fresnel,c.opacity=p.opacity,p._pad=h[p.anchor]*c.vectorScale*c.coneScale*p._normMax,c}l.update=function(d){this.data=d;var p=s(this.scene,d);this.mesh.update(p)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},oe.exports=function(d,p){var f=d.glplot.gl,g=s(d,p),m=x(f,g),u=new a(d,p.uid);return u.mesh=m,u.data=p,m._trace=u,d.glplot.add(m),u}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],733:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../components/colorscale/defaults"),M=b("./attributes");oe.exports=function(_,e,o,a){function l(f,g){return y.coerce(_,e,M,f,g)}var i=l("u"),v=l("v"),h=l("w"),s=l("x"),d=l("y"),p=l("z");i&&i.length&&v&&v.length&&h&&h.length&&s&&s.length&&d&&d.length&&p&&p.length?(l("sizeref"),l("sizemode"),l("anchor"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),x(_,e,a,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),l("uhoverformat"),l("vhoverformat"),l("whoverformat"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":730}],734:[function(b,oe,se){"use strict";oe.exports={moduleType:"trace",name:"cone",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:b("./calc"),plot:b("./convert"),eventData:function(y,x){return y.norm=x.traceCoordinate[6],y},meta:{}}},{"../../plots/gl3d":598,"./attributes":730,"./calc":731,"./convert":732,"./defaults":733}],735:[function(b,oe,se){"use strict";var y=b("../heatmap/attributes"),x=b("../scatter/attributes"),M=b("../../plots/cartesian/axis_format_attributes"),_=M.axisHoverFormat,e=M.descriptionOnlyNumbers,o=b("../../components/colorscale/attributes"),a=b("../../components/drawing/attributes").dash,l=b("../../plots/font_attributes"),i=b("../../lib/extend").extendFlat,v=b("../../constants/filter_ops"),h=v.COMPARISON_OPS2,s=v.INTERVAL_OPS,d=x.line;oe.exports=i({z:y.z,x:y.x,x0:y.x0,dx:y.dx,y:y.y,y0:y.y0,dy:y.dy,xperiod:y.xperiod,yperiod:y.yperiod,xperiod0:x.xperiod0,yperiod0:x.yperiod0,xperiodalignment:y.xperiodalignment,yperiodalignment:y.yperiodalignment,text:y.text,hovertext:y.hovertext,transpose:y.transpose,xtype:y.xtype,ytype:y.ytype,xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z",1),hovertemplate:y.hovertemplate,texttemplate:i({},y.texttemplate,{}),textfont:i({},y.textfont,{}),hoverongaps:y.hoverongaps,connectgaps:i({},y.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:l({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(h).concat(s),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:i({},d.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:a,smoothing:i({},d.smoothing,{}),editType:"plot"}},o("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../constants/filter_ops":475,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../heatmap/attributes":792,"../scatter/attributes":927}],736:[function(b,oe,se){"use strict";var y=b("../../components/colorscale"),x=b("../heatmap/calc"),M=b("./set_contours"),_=b("./end_plus");oe.exports=function(e,o){var a=x(e,o),l=a[0].z;M(o,l);var i,v=o.contours,h=y.extractOpts(o);if("heatmap"===v.coloring&&h.auto&&!1===o.autocontour){var s=v.start,d=_(v),p=v.size||1,f=Math.floor((d-s)/p)+1;isFinite(p)||(p=1,f=1);var g=s-p/2;i=[g,g+f*p]}else i=l;return y.calc(e,o,{vals:i,cLetter:"z"}),a}},{"../../components/colorscale":378,"../heatmap/calc":793,"./end_plus":746,"./set_contours":754}],737:[function(b,oe,se){"use strict";oe.exports=function(y,x){var M,_=y[0],e=_.z;switch(x.type){case"levels":var o=Math.min(e[0][0],e[0][1]);for(M=0;M<y.length;M++){var a=y[M];a.prefixBoundary=!a.edgepaths.length&&(o>a.level||a.starts.length&&o===a.level)}break;case"constraint":if(_.prefixBoundary=!1,_.edgepaths.length)return;var l=_.x.length,i=_.y.length,v=-1/0,h=1/0;for(M=0;M<i;M++)h=Math.min(h,e[M][0]),h=Math.min(h,e[M][l-1]),v=Math.max(v,e[M][0]),v=Math.max(v,e[M][l-1]);for(M=1;M<l-1;M++)h=Math.min(h,e[0][M]),h=Math.min(h,e[i-1][M]),v=Math.max(v,e[0][M]),v=Math.max(v,e[i-1][M]);var s,d,p=x.value;switch(x._operation){case">":p>v&&(_.prefixBoundary=!0);break;case"<":(p<h||_.starts.length&&p===h)&&(_.prefixBoundary=!0);break;case"[]":s=Math.min(p[0],p[1]),((d=Math.max(p[0],p[1]))<h||s>v||_.starts.length&&d===h)&&(_.prefixBoundary=!0);break;case"][":s=Math.min(p[0],p[1]),d=Math.max(p[0],p[1]),s<h&&d>v&&(_.prefixBoundary=!0)}}}},{}],738:[function(b,oe,se){"use strict";var y=b("../../components/colorscale"),x=b("./make_color_map"),M=b("./end_plus");oe.exports={min:"zmin",max:"zmax",calc:function(_,e,o){var a=e.contours,l=e.line,i=a.size||1,v=a.coloring,h=x(e,{isColorbar:!0});if("heatmap"===v){var s=y.extractOpts(e);o._fillgradient=s.reversescale?y.flipScale(s.colorscale):s.colorscale,o._zrange=[s.min,s.max]}else"fill"===v&&(o._fillcolor=h);o._line={color:"lines"===v?h:l.color,width:!1!==a.showlines?l.width:0,dash:l.dash},o._levels={start:a.start,end:M(a),size:i}}}},{"../../components/colorscale":378,"./end_plus":746,"./make_color_map":751}],739:[function(b,oe,se){"use strict";oe.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],740:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("./label_defaults"),M=b("../../components/color"),_=M.addOpacity,e=M.opacity,o=b("../../constants/filter_ops"),a=o.CONSTRAINT_REDUCTION,l=o.COMPARISON_OPS2;oe.exports=function(i,v,h,s,d,p){var f,g,m,c,A,k,u=v.contours,w=h("contours.operation");u._operation=a[w],c=h,-1===l.indexOf((A=u).operation)?(c("contours.value",[0,1]),Array.isArray(A.value)?A.value.length>2?A.value=A.value.slice(2):0===A.length?A.value=[0,1]:A.length<2?(k=parseFloat(A.value[0]),A.value=[k,k+1]):A.value=[parseFloat(A.value[0]),parseFloat(A.value[1])]:y(A.value)&&(k=parseFloat(A.value),A.value=[k,k+1])):(c("contours.value",0),y(A.value)||(A.value=Array.isArray(A.value)?parseFloat(A.value[0]):0)),"="===w?f=u.showlines=!0:(f=h("contours.showlines"),m=h("fillcolor",_((i.line||{}).color||d,.5))),f&&(g=h("line.color",m&&e(m)?_(v.fillcolor,1):d),h("line.width",2),h("line.dash")),h("line.smoothing"),x(h,s,g,p)}},{"../../components/color":366,"../../constants/filter_ops":475,"./label_defaults":750,"fast-isnumeric":190}],741:[function(b,oe,se){"use strict";var y=b("../../constants/filter_ops"),x=b("fast-isnumeric");function M(o,a){var l,i=Array.isArray(a);function v(h){return x(h)?+h:null}return-1!==y.COMPARISON_OPS2.indexOf(o)?l=v(i?a[0]:a):-1!==y.INTERVAL_OPS.indexOf(o)?l=i?[v(a[0]),v(a[1])]:[v(a),v(a)]:-1!==y.SET_OPS.indexOf(o)&&(l=i?a.map(v):[v(a)]),l}function _(o){return function(a){a=M(o,a);var l=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return{start:l,end:i,size:i-l}}}function e(o){return function(a){return{start:a=M(o,a),end:1/0,size:1/0}}}oe.exports={"[]":_("[]"),"][":_("]["),">":e(">"),"<":e("<"),"=":e("=")}},{"../../constants/filter_ops":475,"fast-isnumeric":190}],742:[function(b,oe,se){"use strict";oe.exports=function(y,x,M,_){var e=_("contours.start"),o=_("contours.end"),a=!1===e||!1===o,l=M("contours.size");!(a?x.autocontour=!0:M("autocontour",!1))&&l||M("ncontours")}},{}],743:[function(b,oe,se){"use strict";var y=b("../../lib");function x(M){return y.extendFlat({},M,{edgepaths:y.extendDeep([],M.edgepaths),paths:y.extendDeep([],M.paths),starts:y.extendDeep([],M.starts)})}oe.exports=function(M,_){var e,o,a,l=function(h){return h.reverse()},i=function(h){return h};switch(_){case"=":case"<":return M;case">":for(1!==M.length&&y.warn("Contour data invalid for the specified inequality operation."),o=M[0],e=0;e<o.edgepaths.length;e++)o.edgepaths[e]=l(o.edgepaths[e]);for(e=0;e<o.paths.length;e++)o.paths[e]=l(o.paths[e]);for(e=0;e<o.starts.length;e++)o.starts[e]=l(o.starts[e]);return M;case"][":var v=l;l=i,i=v;case"[]":for(2!==M.length&&y.warn("Contour data invalid for the specified inequality range operation."),o=x(M[0]),a=x(M[1]),e=0;e<o.edgepaths.length;e++)o.edgepaths[e]=l(o.edgepaths[e]);for(e=0;e<o.paths.length;e++)o.paths[e]=l(o.paths[e]);for(e=0;e<o.starts.length;e++)o.starts[e]=l(o.starts[e]);for(;a.edgepaths.length;)o.edgepaths.push(i(a.edgepaths.shift()));for(;a.paths.length;)o.paths.push(i(a.paths.shift()));for(;a.starts.length;)o.starts.push(i(a.starts.shift()));return[o]}}},{"../../lib":503}],744:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../heatmap/xyz_defaults"),M=b("../scatter/period_defaults"),_=b("./constraint_defaults"),e=b("./contours_defaults"),o=b("./style_defaults"),a=b("../heatmap/label_defaults"),l=b("./attributes");oe.exports=function(i,v,h,s){function d(f,g){return y.coerce(i,v,l,f,g)}if(x(i,v,d,s)){M(i,v,s,d),d("xhoverformat"),d("yhoverformat"),d("text"),d("hovertext"),d("hoverongaps"),d("hovertemplate");var p="constraint"===d("contours.type");d("connectgaps",y.isArray1D(v.z)),p?_(i,v,d,s,h):(e(i,v,d,function(f){return y.coerce2(i,v,l,f)}),o(i,v,d,s)),v.contours&&"heatmap"===v.contours.coloring&&a(d,s)}else v.visible=!1}},{"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/xyz_defaults":807,"../scatter/period_defaults":947,"./attributes":735,"./constraint_defaults":740,"./contours_defaults":742,"./style_defaults":756}],745:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./constraint_mapping"),M=b("./end_plus");oe.exports=function(_,e,o){for(var a="constraint"===_.type?x[_._operation](_.value):_,l=a.size,i=[],v=M(a),h=o.trace._carpetTrace,s=h?{xaxis:h.aaxis,yaxis:h.baxis,x:o.a,y:o.b}:{xaxis:e.xaxis,yaxis:e.yaxis,x:o.x,y:o.y},d=a.start;d<v;d+=l)if(i.push(y.extendFlat({level:d,crossings:{},starts:[],edgepaths:[],paths:[],z:o.z,smoothing:o.trace.line.smoothing},s)),i.length>1e3){y.warn("Too many contours, clipping at 1000",_);break}return i}},{"../../lib":503,"./constraint_mapping":741,"./end_plus":746}],746:[function(b,oe,se){"use strict";oe.exports=function(y){return y.end+y.size/1e6}},{}],747:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./constants");function M(o,a,l,i){return Math.abs(o[0]-a[0])<l&&Math.abs(o[1]-a[1])<i}function _(o,a,l,i,v){var h,te,le,ue,pe,s=a.join(","),d=o.crossings[s],p=(le=a,ue=0,pe=0,(te=d)>20&&l?208===te||1114===te?ue=0===le[0]?1:-1:pe=0===le[1]?1:-1:-1!==x.BOTTOMSTART.indexOf(te)?pe=1:-1!==x.LEFTSTART.indexOf(te)?ue=1:-1!==x.TOPSTART.indexOf(te)?pe=-1:ue=-1,[ue,pe]),f=[e(o,a,[-p[0],-p[1]])],g=o.z.length,m=o.z[0].length,u=a.slice(),w=p.slice();for(h=0;h<1e4;h++){if(d>20?o.crossings[s]=x.SADDLEREMAINDER[d=x.CHOOSESADDLE[d][(p[0]||p[1])<0?0:1]]:delete o.crossings[s],!(p=x.NEWDELTA[d])){y.log("Found bad marching index:",d,a,o.level);break}if(f.push(e(o,a,p)),a[0]+=p[0],a[1]+=p[1],s=a.join(","),M(f[f.length-1],f[f.length-2],i,v)&&f.pop(),a[0]===u[0]&&a[1]===u[1]&&p[0]===w[0]&&p[1]===w[1]||l&&(p[0]&&(a[0]<0||a[0]>m-2)||p[1]&&(a[1]<0||a[1]>g-2)))break;d=o.crossings[s]}1e4===h&&y.log("Infinite loop in contour?");var A,k,C,E,L,D,N,F,I,P,j,V,Z,Y,ee,re=M(f[0],f[f.length-1],i,v),X=0,K=.2*o.smoothing,ie=[],q=0;for(h=1;h<f.length;h++)void 0,void 0,Y=(V=f[h])[2]-(Z=f[h-1])[2],ee=V[3]-Z[3],X+=N=Math.sqrt(Y*Y+ee*ee),ie.push(N);var U=X/ie.length*K;function W(te){return f[te%f.length]}for(h=f.length-2;h>=q;h--)if((A=ie[h])<U){for(C=0,k=h-1;k>=q&&A+ie[k]<U;k--)A+=ie[k];if(re&&h===f.length-2)for(C=0;C<k&&A+ie[C]<U;C++)A+=ie[C];L=h-k+C+1,D=Math.floor((h+k+C+2)/2),E=re||h!==f.length-2?re||-1!==k?L%2?W(D):[(W(D)[0]+W(D+1)[0])/2,(W(D)[1]+W(D+1)[1])/2]:f[0]:f[f.length-1],f.splice(k+1,h-k+1,E),h=k+1,C&&(q=C),re&&(h===f.length-2?f[C]=f[f.length-1]:0===h&&(f[f.length-1]=f[0]))}for(f.splice(0,q),h=0;h<f.length;h++)f[h].length=2;if(!(f.length<2))if(re)f.pop(),o.paths.push(f);else{l||y.log("Unclosed interior contour?",o.level,u.join(","),f.join("L"));var ae=!1;for(F=0;F<o.edgepaths.length;F++)if(P=o.edgepaths[F],!ae&&M(P[0],f[f.length-1],i,v)){f.pop(),ae=!0;var G=!1;for(I=0;I<o.edgepaths.length;I++)if(M((j=o.edgepaths[I])[j.length-1],f[0],i,v)){G=!0,f.shift(),o.edgepaths.splice(F,1),I===F?o.paths.push(f.concat(j)):(I>F&&I--,o.edgepaths[I]=j.concat(f,P));break}G||(o.edgepaths[F]=f.concat(P))}for(F=0;F<o.edgepaths.length&&!ae;F++)M((P=o.edgepaths[F])[P.length-1],f[0],i,v)&&(f.shift(),o.edgepaths[F]=P.concat(f),ae=!0);ae||o.edgepaths.push(f)}}function e(o,a,l){var i=a[0]+Math.max(l[0],0),v=a[1]+Math.max(l[1],0),h=o.z[v][i],s=o.xaxis,d=o.yaxis;if(l[1]){var p=(o.level-h)/(o.z[v][i+1]-h),f=(1!==p?(1-p)*s.c2l(o.x[i]):0)+(0!==p?p*s.c2l(o.x[i+1]):0);return[s.c2p(s.l2c(f),!0),d.c2p(o.y[v],!0),i+p,v]}var g=(o.level-h)/(o.z[v+1][i]-h),m=(1!==g?(1-g)*d.c2l(o.y[v]):0)+(0!==g?g*d.c2l(o.y[v+1]):0);return[s.c2p(o.x[i],!0),d.c2p(d.l2c(m),!0),i,v+g]}oe.exports=function(o,a,l){var i,v,h,s;for(a=a||.01,l=l||.01,v=0;v<o.length;v++){for(h=o[v],s=0;s<h.starts.length;s++)_(h,h.starts[s],"edge",a,l);for(i=0;Object.keys(h.crossings).length&&i<1e4;)i++,_(h,Object.keys(h.crossings)[0].split(",").map(Number),void 0,a,l);1e4===i&&y.log("Infinite loop in contour?")}}},{"../../lib":503,"./constants":739}],748:[function(b,oe,se){"use strict";var y=b("../../components/color"),x=b("../heatmap/hover");oe.exports=function(M,_,e,o,a){a||(a={}),a.isContour=!0;var l=x(M,_,e,o,a);return l&&l.forEach(function(i){var v=i.trace;"constraint"===v.contours.type&&(v.fillcolor&&y.opacity(v.fillcolor)?i.color=y.addOpacity(v.fillcolor,1):v.contours.showlines&&y.opacity(v.line.color)&&(i.color=y.addOpacity(v.line.color,1)))}),l}},{"../../components/color":366,"../heatmap/hover":799}],749:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot").plot,style:b("./style"),colorbar:b("./colorbar"),hoverPoints:b("./hover"),moduleType:"trace",name:"contour",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":735,"./calc":736,"./colorbar":738,"./defaults":744,"./hover":748,"./plot":753,"./style":755}],750:[function(b,oe,se){"use strict";var y=b("../../lib");oe.exports=function(x,M,_,e){if(e||(e={}),x("contours.showlabels")){var o=M.font;y.coerceFont(x,"contours.labelfont",{family:o.family,size:o.size,color:_}),x("contours.labelformat")}!1!==e.hasHover&&x("zhoverformat")}},{"../../lib":503}],751:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../components/colorscale"),M=b("./end_plus");oe.exports=function(_){var e=_.contours,o=e.start,a=M(e),l=e.size||1,i=Math.floor((a-o)/l)+1,v="lines"===e.coloring?0:1,h=x.extractOpts(_);isFinite(l)||(l=1,i=1);var s,d,p=h.reversescale?x.flipScale(h.colorscale):h.colorscale,f=p.length,g=new Array(f),m=new Array(f);if("heatmap"===e.coloring){var u=h.min,w=h.max;for(d=0;d<f;d++)g[d]=(s=p[d])[0]*(w-u)+u,m[d]=s[1];var c=y.extent([u,w,e.start,e.start+l*(i-1)]),A=c[u<w?0:1],k=c[u<w?1:0];A!==u&&(g.splice(0,0,A),m.splice(0,0,m[0])),k!==w&&(g.push(k),m.push(m[m.length-1]))}else for(d=0;d<f;d++)g[d]=((s=p[d])[0]*(i+v-1)-v/2)*l+o,m[d]=s[1];return x.makeColorScaleFunc({domain:g,range:m},{noNumericCheck:!0})}},{"../../components/colorscale":378,"./end_plus":746,"@plotly/d3":58}],752:[function(b,oe,se){"use strict";var y=b("./constants");function x(M,_){var e=(_[0][0]>M?0:1)+(_[0][1]>M?0:2)+(_[1][1]>M?0:4)+(_[1][0]>M?0:8);return 5===e||10===e?M>(_[0][0]+_[0][1]+_[1][0]+_[1][1])/4?5===e?713:1114:5===e?104:208:15===e?0:e}oe.exports=function(M){var _,e,o,a,l,i,v,h,s,d=M[0].z,p=d.length,f=d[0].length,g=2===p||2===f;for(e=0;e<p-1;e++)for(a=[],0===e&&(a=a.concat(y.BOTTOMSTART)),e===p-2&&(a=a.concat(y.TOPSTART)),_=0;_<f-1;_++)for(o=a.slice(),0===_&&(o=o.concat(y.LEFTSTART)),_===f-2&&(o=o.concat(y.RIGHTSTART)),l=_+","+e,i=[[d[e][_],d[e][_+1]],[d[e+1][_],d[e+1][_+1]]],s=0;s<M.length;s++)(v=x((h=M[s]).level,i))&&(h.crossings[l]=v,-1!==o.indexOf(v)&&(h.starts.push([_,e]),g&&-1!==o.indexOf(v,o.indexOf(v)+1)&&h.starts.push([_,e])))}},{"./constants":739}],753:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../lib"),M=b("../../components/drawing"),_=b("../../components/colorscale"),e=b("../../lib/svg_text_utils"),o=b("../../plots/cartesian/axes"),a=b("../../plots/cartesian/set_convert"),l=b("../heatmap/plot"),i=b("./make_crossings"),v=b("./find_all_paths"),h=b("./empty_pathinfo"),s=b("./convert_to_constraints"),d=b("./close_boundaries"),p=b("./constants"),f=p.LABELOPTIMIZER;function g(w,c){var A,k,C,E,L,D,F="",I=0,P=w.edgepaths.map(function(re,X){return X}),j=!0;function V(re){return Math.abs(re[1]-c[2][1])<.01}function Y(re){return Math.abs(re[0]-c[2][0])<.01}for(;P.length;){for(D=M.smoothopen(w.edgepaths[I],w.smoothing),F+=j?D:D.replace(/^M/,"L"),P.splice(P.indexOf(I),1),A=w.edgepaths[I][w.edgepaths[I].length-1],E=-1,C=0;C<4;C++){if(!A){x.log("Missing end?",I,w);break}for(Math.abs(A[1]-c[0][1])<.01&&!Y(A)?k=c[1]:Math.abs(A[0]-c[0][0])<.01?k=c[0]:V(A)?k=c[3]:Y(A)&&(k=c[2]),L=0;L<w.edgepaths.length;L++){var ee=w.edgepaths[L][0];Math.abs(A[0]-k[0])<.01?Math.abs(A[0]-ee[0])<.01&&(ee[1]-A[1])*(k[1]-ee[1])>=0&&(k=ee,E=L):Math.abs(A[1]-k[1])<.01?Math.abs(A[1]-ee[1])<.01&&(ee[0]-A[0])*(k[0]-ee[0])>=0&&(k=ee,E=L):x.log("endpt to newendpt is not vert. or horz.",A,k,ee)}if(A=k,E>=0)break;F+="L"+k}if(E===w.edgepaths.length){x.log("unclosed perimeter path");break}(j=-1===P.indexOf(I=E))&&(I=P[0],F+="Z")}for(I=0;I<w.paths.length;I++)F+=M.smoothclosed(w.paths[I],w.smoothing);return F}function m(w,c,A,k){var C=c.width/2,E=c.height/2,L=w.x,D=w.y,N=w.theta,F=Math.cos(N)*C,I=Math.sin(N)*C,P=(L>k.center?k.right-L:L-k.left)/(F+Math.abs(Math.sin(N)*E)),j=(D>k.middle?k.bottom-D:D-k.top)/(Math.abs(I)+Math.cos(N)*E);if(P<1||j<1)return 1/0;var V=f.EDGECOST*(1/(P-1)+1/(j-1));V+=f.ANGLECOST*N*N;for(var Z=L-F,Y=D-I,ee=L+F,re=D+I,X=0;X<A.length;X++){var K=A[X],ie=Math.cos(K.theta)*K.width/2,q=Math.sin(K.theta)*K.width/2,U=2*x.segmentDistance(Z,Y,ee,re,K.x-ie,K.y-q,K.x+ie,K.y+q)/(c.height+K.height),W=K.level===c.level,ae=W?f.SAMELEVELDISTANCE:1;if(U<=ae)return 1/0;V+=f.NEIGHBORCOST*(W?f.SAMELEVELFACTOR:1)/(U-ae)}return V}function u(w){var c,A,k=w.trace._emptypoints,C=[],E=w.z.length,L=w.z[0].length,D=[];for(c=0;c<L;c++)D.push(1);for(c=0;c<E;c++)C.push(D.slice());for(c=0;c<k.length;c++)C[(A=k[c])[0]][A[1]]=0;return w.zmask=C,C}se.plot=function(w,c,A,k){var C=c.xaxis,E=c.yaxis;x.makeTraceGroups(k,A,"contour").each(function(L){var D=y.select(this),N=L[0],I=N.x,P=N.y,j=N.trace.contours,V=h(j,c,N),Z=x.ensureSingle(D,"g","heatmapcoloring"),Y=[];"heatmap"===j.coloring&&(Y=[L]),l(w,c,Y,Z),i(V),v(V);var W,ae,G,ee=C.c2p(I[0],!0),re=C.c2p(I[I.length-1],!0),X=E.c2p(P[0],!0),K=E.c2p(P[P.length-1],!0),ie=[[ee,K],[re,K],[re,X],[ee,X]],q=V;"constraint"===j.type&&(q=s(V,j._operation)),W=ie,ae=j,(G=x.ensureSingle(D,"g","contourbg").selectAll("path").data("fill"===ae.coloring?[0]:[])).enter().append("path"),G.exit().remove(),G.attr("d","M"+W.join("L")+"Z").style("stroke","none"),function(U,W,ae,G){var te="fill"===G.coloring||"constraint"===G.type&&"="!==G._operation,ne="M"+ae.join("L")+"Z";te&&d(W,G);var le=x.ensureSingle(U,"g","contourfill").selectAll("path").data(te?W:[]);le.enter().append("path"),le.exit().remove(),le.each(function(ue){var pe=(ue.prefixBoundary?ne:"")+g(ue,ae);pe?y.select(this).attr("d",pe).style("stroke","none"):y.select(this).remove()})}(D,q,ie,j),function(U,W,ae,G,te){var ne=x.ensureSingle(U,"g","contourlines"),le=!1!==te.showlines,ue=te.showlabels,pe=le&&ue,de=se.createLines(ne,le||ue,W),_e=se.createLineClip(ne,pe,ae,G.trace.uid),me=U.selectAll("g.contourlabels").data(ue?[0]:[]);if(me.exit().remove(),me.enter().append("g").classed("contourlabels",!0),ue){var we=[],De=[];x.clearLocationCache();var Le=se.labelFormatter(ae,G),Ie=M.tester.append("text").attr("data-notex",1).call(M.font,te.labelfont),je=W[0].xaxis,ye=W[0].yaxis,Me=je._length,Oe=ye._length,Pe=je.range,Re=ye.range,Ue=x.aggNums(Math.min,null,G.x),qe=x.aggNums(Math.max,null,G.x),Xe=x.aggNums(Math.min,null,G.y),lt=x.aggNums(Math.max,null,G.y),He=Math.max(je.c2p(Ue,!0),0),$e=Math.min(je.c2p(qe,!0),Me),et=Math.max(ye.c2p(lt,!0),0),nt=Math.min(ye.c2p(Xe,!0),Oe),ct={};Pe[0]<Pe[1]?(ct.left=He,ct.right=$e):(ct.left=$e,ct.right=He),Re[0]<Re[1]?(ct.top=et,ct.bottom=nt):(ct.top=nt,ct.bottom=et),ct.middle=(ct.top+ct.bottom)/2,ct.center=(ct.left+ct.right)/2,we.push([[ct.left,ct.top],[ct.right,ct.top],[ct.right,ct.bottom],[ct.left,ct.bottom]]);var bt=Math.sqrt(Me*Me+Oe*Oe),kt=p.LABELDISTANCE*bt/Math.max(1,W.length/p.LABELINCREASE);de.each(function(Bt){var Et=se.calcTextOpts(Bt.level,Le,Ie,ae);y.select(this).selectAll("path").each(function(){var ht=x.getVisibleSegment(this,ct,Et.height/2);if(ht&&!(ht.len<(Et.width+Et.height)*p.LABELMIN))for(var at=Math.min(Math.ceil(ht.len/kt),p.LABELMAX),Ft=0;Ft<at;Ft++){var en=se.findBestTextLocation(this,ht,Et,De,ct);if(!en)break;se.addLabelData(en,Et,De,we)}})}),Ie.remove(),se.drawLabels(me,De,ae,_e,pe?we:null)}ue&&!le&&de.remove()}(D,V,w,N,j),function(U,W,ae,G,te){var ne=G.trace,ue="clip"+ne.uid,pe=ae._fullLayout._clips.selectAll("#"+ue).data(ne.connectgaps?[]:[0]);if(pe.enter().append("clipPath").classed("contourclip",!0).attr("id",ue),pe.exit().remove(),!1===ne.connectgaps){var de={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:W.xaxis,yaxis:W.yaxis,x:G.x,y:G.y,z:u(G),smoothing:0};i([de]),v([de]),d([de],{type:"levels"}),x.ensureSingle(pe,"path","").attr("d",(de.prefixBoundary?"M"+te.join("L")+"Z":"")+g(de,te))}else ue=null;M.setClipUrl(U,ue,ae)}(D,c,w,N,ie)})},se.createLines=function(w,c,A){var k=A[0].smoothing,C=w.selectAll("g.contourlevel").data(c?A:[]);if(C.exit().remove(),C.enter().append("g").classed("contourlevel",!0),c){var E=C.selectAll("path.openline").data(function(D){return D.pedgepaths||D.edgepaths});E.exit().remove(),E.enter().append("path").classed("openline",!0),E.attr("d",function(D){return M.smoothopen(D,k)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var L=C.selectAll("path.closedline").data(function(D){return D.ppaths||D.paths});L.exit().remove(),L.enter().append("path").classed("closedline",!0),L.attr("d",function(D){return M.smoothclosed(D,k)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return C},se.createLineClip=function(w,c,A,k){var C=c?"clipline"+k:null,E=A._fullLayout._clips.selectAll("#"+C).data(c?[0]:[]);return E.exit().remove(),E.enter().append("clipPath").classed("contourlineclip",!0).attr("id",C),M.setClipUrl(w,C,A),E},se.labelFormatter=function(w,c){var A=w._fullLayout,k=c.trace,C=k.contours,E={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(C.labelformat)E.tickformat=C.labelformat,a(E,A);else{var L=_.extractOpts(k);if(L&&L.colorbar&&L.colorbar._axis)E=L.colorbar._axis;else{if("constraint"===C.type){var D=C.value;E.range=Array.isArray(D)?[D[0],D[D.length-1]]:[D,D]}else E.range=[C.start,C.end],E.nticks=(C.end-C.start)/C.size;E.range[0]===E.range[1]&&(E.range[1]+=E.range[0]||1),E.nticks||(E.nticks=1e3),a(E,A),o.prepTicks(E),E._tmin=null,E._tmax=null}}return function(N){return o.tickText(E,N).text}},se.calcTextOpts=function(w,c,A,k){var C=c(w);A.text(C).call(e.convertToTspans,k);var E=A.node(),L=M.bBox(E,!0);return{text:C,width:L.width,height:L.height,fontSize:+E.style["font-size"].replace("px",""),level:w,dy:(L.top+L.bottom)/2}},se.findBestTextLocation=function(w,c,A,k,C){var E,L,D,N,F,I=A.width;c.isClosed?(E=c.min+(L=c.len/f.INITIALSEARCHPOINTS)/2,D=c.max):(E=c.min+(L=(c.len-I)/(f.INITIALSEARCHPOINTS+1))+I/2,D=c.max-(L+I)/2);for(var P=1/0,j=0;j<f.ITERATIONS;j++){for(var V=E;V<D;V+=L){var Z=x.getTextLocation(w,c.total,V,I),Y=m(Z,A,k,C);Y<P&&(P=Y,F=Z,N=V)}if(P>2*f.MAXCOST)break;j&&(L/=2),D=(E=N-L/2)+1.5*L}if(P<=f.MAXCOST)return F},se.addLabelData=function(w,c,A,k){var C=c.fontSize,E=c.width+C/3,L=Math.max(0,c.height-C/3),D=w.x,N=w.y,F=w.theta,I=Math.sin(F),P=Math.cos(F),j=function(Z,Y){return[D+Z*P-Y*I,N+Z*I+Y*P]},V=[j(-E/2,-L/2),j(-E/2,L/2),j(E/2,L/2),j(E/2,-L/2)];A.push({text:c.text,x:D,y:N,dy:c.dy,theta:F,level:c.level,width:E,height:L}),k.push(V)},se.drawLabels=function(w,c,A,k,C){var E=w.selectAll("text").data(c,function(N){return N.text+","+N.x+","+N.y+","+N.theta});if(E.exit().remove(),E.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(N){var F=N.x+Math.sin(N.theta)*N.dy,I=N.y-Math.cos(N.theta)*N.dy;y.select(this).text(N.text).attr({x:F,y:I,transform:"rotate("+180*N.theta/Math.PI+" "+F+" "+I+")"}).call(e.convertToTspans,A)}),C){for(var L="",D=0;D<C.length;D++)L+="M"+C[D].join("L")+"Z";x.ensureSingle(k,"path","").attr("d",L)}}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/set_convert":576,"../heatmap/plot":804,"./close_boundaries":737,"./constants":739,"./convert_to_constraints":743,"./empty_pathinfo":745,"./find_all_paths":747,"./make_crossings":752,"@plotly/d3":58}],754:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axes"),x=b("../../lib");function M(_,e,o){var a={type:"linear",range:[_,e]};return y.autoTicks(a,(e-_)/(o||15)),a}oe.exports=function(_,e){var o=_.contours;if(_.autocontour){var a=_.zmin,l=_.zmax;(_.zauto||void 0===a)&&(a=x.aggNums(Math.min,null,e)),(_.zauto||void 0===l)&&(l=x.aggNums(Math.max,null,e));var i=M(a,l,_.ncontours);o.size=i.dtick,o.start=y.tickFirst(i),i.range.reverse(),o.end=y.tickFirst(i),o.start===a&&(o.start+=o.size),o.end===l&&(o.end-=o.size),o.start>o.end&&(o.start=o.end=(o.start+o.end)/2),_._input.contours||(_._input.contours={}),x.extendFlat(_._input.contours,{start:o.start,end:o.end,size:o.size}),_._input.autocontour=!0}else if("constraint"!==o.type){var v,h=o.start,s=o.end,d=_._input.contours;h>s&&(o.start=d.start=s,s=o.end=d.end=h,h=o.start),!(o.size>0)&&(v=h===s?1:M(h,s,_.ncontours).dtick,d.size=o.size=v)}}},{"../../lib":503,"../../plots/cartesian/axes":554}],755:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../components/drawing"),M=b("../heatmap/style"),_=b("./make_color_map");oe.exports=function(e){var o=y.select(e).selectAll("g.contour");o.style("opacity",function(a){return a[0].trace.opacity}),o.each(function(a){var l=y.select(this),i=a[0].trace,v=i.contours,h=i.line,s=v.size||1,d=v.start,p="constraint"===v.type,f=!p&&"lines"===v.coloring,g=!p&&"fill"===v.coloring,m=f||g?_(i):null;l.selectAll("g.contourlevel").each(function(c){y.select(this).selectAll("path").call(x.lineGroupStyle,h.width,f?m(c.level):h.color,h.dash)});var u=v.labelfont;if(l.selectAll("g.contourlabels text").each(function(c){x.font(y.select(this),{family:u.family,size:u.size,color:u.color||(f?m(c.level):h.color)})}),p)l.selectAll("g.contourfill path").style("fill",i.fillcolor);else if(g){var w;l.selectAll("g.contourfill path").style("fill",function(c){return void 0===w&&(w=c.level),m(c.level+.5*s)}),void 0===w&&(w=d),l.selectAll("g.contourbg path").style("fill",m(w-.5*s))}}),M(e)}},{"../../components/drawing":388,"../heatmap/style":805,"./make_color_map":751,"@plotly/d3":58}],756:[function(b,oe,se){"use strict";var y=b("../../components/colorscale/defaults"),x=b("./label_defaults");oe.exports=function(M,_,e,o,a){var l,i=e("contours.coloring"),v="";"fill"===i&&(l=e("contours.showlines")),!1!==l&&("lines"!==i&&(v=e("line.color","#000")),e("line.width",.5),e("line.dash")),"none"!==i&&(!0!==M.showlegend&&(_.showlegend=!1),_._dfltShowLegend=!1,y(M,_,o,e,{prefix:"",cLetter:"z"})),e("line.smoothing"),x(e,o,v,a)}},{"../../components/colorscale/defaults":376,"./label_defaults":750}],757:[function(b,oe,se){"use strict";var y=b("../heatmap/attributes"),x=b("../contour/attributes"),M=b("../../components/colorscale/attributes"),_=b("../../lib/extend").extendFlat,e=x.contours;oe.exports=_({carpet:{valType:"string",editType:"calc"},z:y.z,a:y.x,a0:y.x0,da:y.dx,b:y.y,b0:y.y0,db:y.dy,text:y.text,hovertext:y.hovertext,transpose:y.transpose,atype:y.xtype,btype:y.ytype,fillcolor:x.fillcolor,autocontour:x.autocontour,ncontours:x.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:x.line.color,width:x.line.width,dash:x.line.dash,smoothing:x.line.smoothing,editType:"plot"},transforms:void 0},M("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../contour/attributes":735,"../heatmap/attributes":792}],758:[function(b,oe,se){"use strict";var y=b("../../components/colorscale/calc"),x=b("../../lib"),M=b("../heatmap/convert_column_xyz"),_=b("../heatmap/clean_2d_array"),e=b("../heatmap/interp2d"),o=b("../heatmap/find_empties"),a=b("../heatmap/make_bound_array"),l=b("./defaults"),i=b("../carpet/lookup_carpetid"),v=b("../contour/set_contours");oe.exports=function(h,s){var d=s._carpetTrace=i(h,s);if(d&&d.visible&&"legendonly"!==d.visible){if(!s.a||!s.b){var p=h.data[d.index],f=h.data[s.index];f.a||(f.a=p.a),f.b||(f.b=p.b),l(f,s,s._defaultColor,h._fullLayout)}var g=function(m,u){var w,c,A,k,C,E,L,D=u._carpetTrace,N=D.aaxis,F=D.baxis;N._minDtick=0,F._minDtick=0,x.isArray1D(u.z)&&M(u,N,F,"a","b",["z"]),w=u._a=u._a||u.a,k=u._b=u._b||u.b,w=w?N.makeCalcdata(u,"_a"):[],k=k?F.makeCalcdata(u,"_b"):[],c=u.a0||0,A=u.da||1,C=u.b0||0,E=u.db||1,L=u._z=_(u._z||u.z,u.transpose),u._emptypoints=o(L),e(L,u._emptypoints);var I=x.maxRowLength(L),Y={a:a(u,"scaled"===u.xtype?"":w,c,A,I,N),b:a(u,"scaled"===u.ytype?"":k,C,E,L.length,F),z:L};return"levels"===u.contours.type&&"none"!==u.contours.coloring&&y(m,u,{vals:L,containerStr:"",cLetter:"z"}),[Y]}(h,s);return v(s,s._z),g}}},{"../../components/colorscale/calc":374,"../../lib":503,"../carpet/lookup_carpetid":708,"../contour/set_contours":754,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"../heatmap/find_empties":798,"../heatmap/interp2d":801,"../heatmap/make_bound_array":803,"./defaults":759}],759:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../heatmap/xyz_defaults"),M=b("./attributes"),_=b("../contour/constraint_defaults"),e=b("../contour/contours_defaults"),o=b("../contour/style_defaults");oe.exports=function(a,l,i,v){function h(s,d){return y.coerce(a,l,M,s,d)}if(h("carpet"),a.a&&a.b){if(!x(a,l,h,v,"a","b"))return void(l.visible=!1);h("text"),"constraint"===h("contours.type")?_(a,l,h,v,i,{hasHover:!1}):(e(a,l,h,function(s){return y.coerce2(a,l,M,s)}),o(a,l,h,v,{hasHover:!1}))}else l._defaultColor=i,l._length=null}},{"../../lib":503,"../contour/constraint_defaults":740,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/xyz_defaults":807,"./attributes":757}],760:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../contour/colorbar"),calc:b("./calc"),plot:b("./plot"),style:b("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"../contour/colorbar":738,"../contour/style":755,"./attributes":757,"./calc":758,"./defaults":759,"./plot":761}],761:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../carpet/map_1d_array"),M=b("../carpet/makepath"),_=b("../../components/drawing"),e=b("../../lib"),o=b("../contour/make_crossings"),a=b("../contour/find_all_paths"),l=b("../contour/plot"),i=b("../contour/constants"),v=b("../contour/convert_to_constraints"),h=b("../contour/empty_pathinfo"),s=b("../contour/close_boundaries"),d=b("../carpet/lookup_carpetid"),p=b("../carpet/axis_aligned_line");function f(u,w,c){var A=u.getPointAtLength(w),k=u.getPointAtLength(c),C=k.x-A.x,E=k.y-A.y,L=Math.sqrt(C*C+E*E);return[C/L,E/L]}function g(u){var w=Math.sqrt(u[0]*u[0]+u[1]*u[1]);return[u[0]/w,u[1]/w]}function m(u,w){var c=Math.abs(u[0]*w[0]+u[1]*w[1]);return Math.sqrt(1-c*c)/c}oe.exports=function(u,w,c,A){var k=w.xaxis,C=w.yaxis;e.makeTraceGroups(A,c,"contour").each(function(E){var L=y.select(this),D=E[0],N=D.trace,F=N._carpetTrace=d(u,N),I=u.calcdata[F.index][0];if(F.visible&&"legendonly"!==F.visible){var P=D.a,j=D.b,V=N.contours,Z=h(V,w,D),Y="constraint"===V.type,ee=V._operation,re=Y?"="===ee?"lines":"fill":V.coloring,X=[[P[0],j[j.length-1]],[P[P.length-1],j[j.length-1]],[P[P.length-1],j[0]],[P[0],j[0]]];o(Z),a(Z,1e-8*(P[P.length-1]-P[0]),1e-8*(j[j.length-1]-j[0]));var q,U,W,ae,G=Z;"constraint"===V.type&&(G=v(Z,ee)),function(ue,pe){var de,_e,me,we,De,Le,Ie,je,ye;for(de=0;de<ue.length;de++){for(De=(we=ue[de]).pedgepaths=[],Le=we.ppaths=[],_e=0;_e<we.edgepaths.length;_e++){for(ye=we.edgepaths[_e],Ie=[],me=0;me<ye.length;me++)Ie[me]=pe(ye[me]);De.push(Ie)}for(_e=0;_e<we.paths.length;_e++){for(ye=we.paths[_e],je=[],me=0;me<ye.length;me++)je[me]=pe(ye[me]);Le.push(je)}}}(Z,le);var te=[];for(ae=I.clipsegments.length-1;ae>=0;ae--)U=x([],(q=I.clipsegments[ae]).x,k.c2p),W=x([],q.y,C.c2p),U.reverse(),W.reverse(),te.push(M(U,W,q.bicubic));var ne="M"+te.join("L")+"Z";(function(ue,pe,de,_e,me,we){var De,Le,Ie,je,ye=e.ensureSingle(ue,"g","contourbg").selectAll("path").data("fill"!==we||me?[]:[0]);ye.enter().append("path"),ye.exit().remove();var Me=[];for(je=0;je<pe.length;je++)Le=x([],(De=pe[je]).x,de.c2p),Ie=x([],De.y,_e.c2p),Me.push(M(Le,Ie,De.bicubic));ye.attr("d","M"+Me.join("L")+"Z").style("stroke","none")})(L,I.clipsegments,k,C,Y,re),function(ue,pe,de,_e,me,we,De,Le,Ie,je,ye){var Me="fill"===je;Me&&s(me,ue.contours);var Oe=e.ensureSingle(pe,"g","contourfill").selectAll("path").data(Me?me:[]);Oe.enter().append("path"),Oe.exit().remove(),Oe.each(function(Pe){var Re=(Pe.prefixBoundary?ye:"")+function(Ue,qe,Xe,lt,He,$e,et,nt){var ct,bt,kt,Bt,Et,ht,at,Ft="",en=qe.edgepaths.map(function(Qe,ot){return ot}),Qt=!0,tn=1e-4*Math.abs(Xe[0][0]-Xe[2][0]),dn=1e-4*Math.abs(Xe[0][1]-Xe[2][1]);function Mn(Qe){return Math.abs(Qe[1]-Xe[0][1])<dn}function sn(Qe){return Math.abs(Qe[1]-Xe[2][1])<dn}function ke(Qe){return Math.abs(Qe[0]-Xe[0][0])<tn}function Se(Qe){return Math.abs(Qe[0]-Xe[2][0])<tn}function Ce(Qe,ot){var it,mt,xt,Vt,$t="";for(Mn(Qe)&&!Se(Qe)||sn(Qe)&&!ke(Qe)?(Vt=He.aaxis,xt=p(He,$e,[Qe[0],ot[0]],.5*(Qe[1]+ot[1]))):(Vt=He.baxis,xt=p(He,$e,.5*(Qe[0]+ot[0]),[Qe[1],ot[1]])),it=1;it<xt.length;it++)for($t+=Vt.smoothing?"C":"L",mt=0;mt<xt[it].length;mt++){var pt=xt[it][mt];$t+=[et.c2p(pt[0]),nt.c2p(pt[1])]+" "}return $t}for(ct=0,bt=null;en.length;){for(bt&&(Ft+=Ce(bt,qe.edgepaths[ct][0])),at=_.smoothopen(qe.edgepaths[ct].map(lt),qe.smoothing),Ft+=Qt?at:at.replace(/^M/,"L"),en.splice(en.indexOf(ct),1),bt=qe.edgepaths[ct][qe.edgepaths[ct].length-1],Et=-1,Bt=0;Bt<4;Bt++){if(!bt){e.log("Missing end?",ct,qe);break}for(Mn(bt)&&!Se(bt)?kt=Xe[1]:ke(bt)?kt=Xe[0]:sn(bt)?kt=Xe[3]:Se(bt)&&(kt=Xe[2]),ht=0;ht<qe.edgepaths.length;ht++){var Ge=qe.edgepaths[ht][0];Math.abs(bt[0]-kt[0])<tn?Math.abs(bt[0]-Ge[0])<tn&&(Ge[1]-bt[1])*(kt[1]-Ge[1])>=0&&(kt=Ge,Et=ht):Math.abs(bt[1]-kt[1])<dn?Math.abs(bt[1]-Ge[1])<dn&&(Ge[0]-bt[0])*(kt[0]-Ge[0])>=0&&(kt=Ge,Et=ht):e.log("endpt to newendpt is not vert. or horz.",bt,kt,Ge)}if(Et>=0)break;Ft+=Ce(bt,kt),bt=kt}if(Et===qe.edgepaths.length){e.log("unclosed perimeter path");break}(Qt=-1===en.indexOf(ct=Et))&&(ct=en[0],Ft+=Ce(bt,kt)+"Z",bt=null)}for(ct=0;ct<qe.paths.length;ct++)Ft+=_.smoothclosed(qe.paths[ct].map(lt),qe.smoothing);return Ft}(0,Pe,we,De,Le,Ie,de,_e);Re?y.select(this).attr("d",Re).style("stroke","none"):y.select(this).remove()})}(N,L,k,C,G,X,le,F,I,re,ne),function(ue,pe,de,_e,me,we,De){var Le=e.ensureSingle(ue,"g","contourlines"),Ie=!1!==me.showlines,je=me.showlabels,ye=Ie&&je,Me=l.createLines(Le,Ie||je,pe),Oe=l.createLineClip(Le,ye,de,_e.trace.uid),Pe=ue.selectAll("g.contourlabels").data(je?[0]:[]);if(Pe.exit().remove(),Pe.enter().append("g").classed("contourlabels",!0),je){var qe=we.xaxis._length,Xe=we.yaxis._length,lt=[[[0,0],[qe,0],[qe,Xe],[0,Xe]]],He=[];e.clearLocationCache();var $e=l.labelFormatter(de,_e),et=_.tester.append("text").attr("data-notex",1).call(_.font,me.labelfont),nt={left:0,right:qe,center:qe/2,top:0,bottom:Xe,middle:Xe/2},ct=Math.sqrt(qe*qe+Xe*Xe),bt=i.LABELDISTANCE*ct/Math.max(1,pe.length/i.LABELINCREASE);Me.each(function(kt){var Bt=l.calcTextOpts(kt.level,$e,et,de);y.select(this).selectAll("path").each(function(Et){var ht=e.getVisibleSegment(this,nt,Bt.height/2);if(ht&&(function(Qt,tn,dn,Mn,sn,ke){for(var Se,Ce=0;Ce<dn.pedgepaths.length;Ce++)tn===dn.pedgepaths[Ce]&&(Se=dn.edgepaths[Ce]);if(Se){var Ve=sn.a[0],Ge=sn.a[sn.a.length-1],Qe=sn.b[0],ot=sn.b[sn.b.length-1],mt=f(Qt,0,1),xt=f(Qt,Mn.total,Mn.total-1),Vt=it(Se[0],mt),$t=Mn.total-it(Se[Se.length-1],xt);Mn.min<Vt&&(Mn.min=Vt),Mn.max>$t&&(Mn.max=$t),Mn.len=Mn.max-Mn.min}function it(pt,At){var Xt,Ct=0;return(Math.abs(pt[0]-Ve)<.1||Math.abs(pt[0]-Ge)<.1)&&(Xt=g(sn.dxydb_rough(pt[0],pt[1],.1)),Ct=Math.max(Ct,ke*m(At,Xt)/2)),(Math.abs(pt[1]-Qe)<.1||Math.abs(pt[1]-ot)<.1)&&(Xt=g(sn.dxyda_rough(pt[0],pt[1],.1)),Ct=Math.max(Ct,ke*m(At,Xt)/2)),Ct}}(this,Et,kt,ht,De,Bt.height),!(ht.len<(Bt.width+Bt.height)*i.LABELMIN)))for(var at=Math.min(Math.ceil(ht.len/bt),i.LABELMAX),Ft=0;Ft<at;Ft++){var en=l.findBestTextLocation(this,ht,Bt,He,nt);if(!en)break;l.addLabelData(en,Bt,He,lt)}})}),et.remove(),l.drawLabels(Pe,He,de,Oe,ye?lt:null)}je&&!Ie&&Me.remove()}(L,Z,u,D,V,w,F),_.setClipUrl(L,F._clipPathId,u)}function le(ue){var pe=F.ab2xy(ue[0],ue[1],!0);return[k.c2p(pe[0]),C.c2p(pe[1])]}})}},{"../../components/drawing":388,"../../lib":503,"../carpet/axis_aligned_line":692,"../carpet/lookup_carpetid":708,"../carpet/makepath":709,"../carpet/map_1d_array":710,"../contour/close_boundaries":737,"../contour/constants":739,"../contour/convert_to_constraints":743,"../contour/empty_pathinfo":745,"../contour/find_all_paths":747,"../contour/make_crossings":752,"../contour/plot":753,"@plotly/d3":58}],762:[function(b,oe,se){"use strict";var y=b("../../components/colorscale/attributes"),x=b("../../plots/template_attributes").hovertemplateAttrs,M=b("../../plots/attributes"),_=b("../scattermapbox/attributes"),e=b("../../lib/extend").extendFlat;oe.exports=e({lon:_.lon,lat:_.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:_.text,hovertext:_.hovertext,hoverinfo:e({},M.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:x(),showlegend:e({},M.showlegend,{dflt:!1})},y("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattermapbox/attributes":993}],763:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../lib").isArrayOrTypedArray,M=b("../../constants/numerical").BADNUM,_=b("../../components/colorscale/calc"),e=b("../../lib")._;oe.exports=function(o,a){for(var l=a._length,i=new Array(l),v=a.z,h=x(v)&&v.length,s=0;s<l;s++){var d=i[s]={},p=a.lon[s],f=a.lat[s];if(d.lonlat=y(p)&&y(f)?[+p,+f]:[M,M],h){var g=v[s];d.z=y(g)?g:M}}return _(o,a,{vals:h?v:[0,1],containerStr:"",cLetter:"z"}),l&&(i[0].t={labels:{lat:e(o,"lat:")+" ",lon:e(o,"lon:")+" "}}),i}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],764:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../lib"),M=b("../../components/color"),_=b("../../components/colorscale"),e=b("../../constants/numerical").BADNUM,o=b("../../lib/geojson_utils").makeBlank;oe.exports=function(a){var l=a[0].trace,i=!0===l.visible&&0!==l._length,v=l._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:o()};if(!i)return v;var h,s=[],d=l.z,p=l.radius,f=x.isArrayOrTypedArray(d)&&d.length,g=x.isArrayOrTypedArray(p);for(h=0;h<a.length;h++){var m=a[h],u=m.lonlat;if(u[0]!==e){var w={};if(f){var c=m.z;w.z=c!==e?c:0}g&&(w.r=y(p[h])&&p[h]>0?+p[h]:0),s.push({type:"Feature",geometry:{type:"Point",coordinates:u},properties:w})}}var A=_.extractOpts(l),k=A.reversescale?_.flipScale(A.colorscale):A.colorscale,C=k[0][1],E=["interpolate",["linear"],["heatmap-density"],0,M.opacity(C)<1?C:M.addOpacity(C,0)];for(h=1;h<k.length;h++)E.push(k[h][0],k[h][1]);return x.extendFlat(v.heatmap.paint,{"heatmap-weight":f?["interpolate",["linear"],["get","z"],A.min,0,A.max,1]:1/(A.max-A.min),"heatmap-color":E,"heatmap-radius":g?{type:"identity",property:"r"}:l.radius,"heatmap-opacity":l.opacity}),v.geojson={type:"FeatureCollection",features:s},v.heatmap.layout.visibility="visible",v}},{"../../components/color":366,"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"fast-isnumeric":190}],765:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../components/colorscale/defaults"),M=b("./attributes");oe.exports=function(_,e,o,a){function l(s,d){return y.coerce(_,e,M,s,d)}var i=l("lon")||[],v=l("lat")||[],h=Math.min(i.length,v.length);h?(e._length=h,l("z"),l("radius"),l("below"),l("text"),l("hovertext"),l("hovertemplate"),x(_,e,a,l,{prefix:"",cLetter:"z"})):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":762}],766:[function(b,oe,se){"use strict";oe.exports=function(y,x){return y.lon=x.lon,y.lat=x.lat,y.z=x.z,y}},{}],767:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axes"),x=b("../scattermapbox/hover").hoverPoints,M=b("../scattermapbox/hover").getExtraText;oe.exports=function(_,e,o){var a=x(_,e,o);if(a){var l=a[0],i=l.cd,v=i[0].trace,h=i[l.index];if(delete l.color,"z"in h){var s=l.subplot.mockAxis;l.z=h.z,l.zLabel=y.tickText(s,s.c2l(h.z),"hover").text}return l.extraText=M(v,h,i[0].t.labels),[l]}}},{"../../plots/cartesian/axes":554,"../scattermapbox/hover":998}],768:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),formatLabels:b("../scattermapbox/format_labels"),calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover"),eventData:b("./event_data"),getBelow:function(y,x){for(var M=x.getMapLayers(),_=0;_<M.length;_++){var e=M[_],o=e.id;if("symbol"===e.type&&"string"==typeof o&&-1===o.indexOf("plotly-"))return o}},moduleType:"trace",name:"densitymapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":613,"../heatmap/colorbar":795,"../scattermapbox/format_labels":997,"./attributes":762,"./calc":763,"./defaults":765,"./event_data":766,"./hover":767,"./plot":769}],769:[function(b,oe,se){"use strict";var y=b("./convert"),x=b("../../plots/mapbox/constants").traceLayerPrefix;function M(e,o){this.type="densitymapbox",this.subplot=e,this.uid=o,this.sourceId="source-"+o,this.layerList=[["heatmap",x+o+"-heatmap"]],this.below=null}var _=M.prototype;_.update=function(e){var o=this.subplot,a=this.layerList,l=y(e),i=o.belowLookup["trace-"+this.uid];o.map.getSource(this.sourceId).setData(l.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(l,i),this.below=i);for(var v=0;v<a.length;v++){var h=a[v],d=h[1],p=l[h[0]];o.setOptions(d,"setLayoutProperty",p.layout),"visible"===p.layout.visibility&&o.setOptions(d,"setPaintProperty",p.paint)}},_._addLayers=function(e,o){for(var a=this.subplot,l=this.layerList,i=this.sourceId,v=0;v<l.length;v++){var h=l[v],s=h[0],d=e[s];a.addLayer({type:s,id:h[1],source:i,layout:d.layout,paint:d.paint},o)}},_._removeLayers=function(){for(var e=this.subplot.map,o=this.layerList,a=o.length-1;a>=0;a--)e.removeLayer(o[a][1])},_.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},oe.exports=function(e,o){var a=o[0].trace,l=new M(e,a.uid),i=l.sourceId,v=y(o),h=l.below=e.belowLookup["trace-"+a.uid];return e.map.addSource(i,{type:"geojson",data:v.geojson}),l._addLayers(v,h),l}},{"../../plots/mapbox/constants":611,"./convert":764}],770:[function(b,oe,se){"use strict";var y=b("../../lib");oe.exports=function(x,M){for(var _=0;_<x.length;_++)x[_].i=_;y.mergeArray(M.text,x,"tx"),y.mergeArray(M.hovertext,x,"htx");var e=M.marker;if(e){y.mergeArray(e.opacity,x,"mo"),y.mergeArray(e.color,x,"mc");var o=e.line;o&&(y.mergeArray(o.color,x,"mlc"),y.mergeArrayCastPositive(o.width,x,"mlw"))}}},{"../../lib":503}],771:[function(b,oe,se){"use strict";var y,x=b("../bar/attributes"),M=b("../scatter/attributes").line,_=b("../../plots/attributes"),e=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,o=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/template_attributes").texttemplateAttrs,l=b("./constants"),i=b("../../lib/extend").extendFlat,v=b("../../components/color");oe.exports={x:x.x,x0:x.x0,dx:x.dx,y:x.y,y0:x.y0,dy:x.dy,xperiod:x.xperiod,yperiod:x.yperiod,xperiod0:x.xperiod0,yperiod0:x.yperiod0,xperiodalignment:x.xperiodalignment,yperiodalignment:x.yperiodalignment,xhoverformat:e("x"),yhoverformat:e("y"),hovertext:x.hovertext,hovertemplate:o({},{keys:l.eventDataKeys}),hoverinfo:i({},_.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),text:x.text,textposition:x.textposition,insidetextanchor:i({},x.insidetextanchor,{dflt:"middle"}),textangle:i({},x.textangle,{dflt:0}),textfont:x.textfont,insidetextfont:x.insidetextfont,outsidetextfont:x.outsidetextfont,constraintext:x.constraintext,cliponaxis:x.cliponaxis,orientation:i({},x.orientation,{}),offset:i({},x.offset,{arrayOk:!1}),width:i({},x.width,{arrayOk:!1}),marker:(y=i({},x.marker),delete y.pattern,y),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:i({},M.color,{dflt:v.defaultLine}),width:i({},M.width,{dflt:0,editType:"plot"}),dash:M.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:x.offsetgroup,alignmentgroup:x.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927,"./constants":773}],772:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axes"),x=b("../../plots/cartesian/align_period"),M=b("./arrays_to_calcdata"),_=b("../scatter/calc_selection"),e=b("../../constants/numerical").BADNUM;function o(a){return a===e?0:a}oe.exports=function(a,l){var i,v,h,s,d,p,f,g,m=y.getFromId(a,l.xaxis||"x"),u=y.getFromId(a,l.yaxis||"y");"h"===l.orientation?(i=m.makeCalcdata(l,"x"),h=u.makeCalcdata(l,"y"),s=x(l,u,"y",h),d=!!l.yperiodalignment,p="y"):(i=u.makeCalcdata(l,"y"),h=m.makeCalcdata(l,"x"),s=x(l,m,"x",h),d=!!l.xperiodalignment,p="x"),v=s.vals;var w,c=Math.min(v.length,i.length),A=new Array(c);for(l._base=[],f=0;f<c;f++){i[f]<0&&(i[f]=e);var k=!1;i[f]!==e&&f+1<c&&i[f+1]!==e&&(k=!0),g=A[f]={p:v[f],s:i[f],cNext:k},l._base[f]=-.5*g.s,d&&(A[f].orig_p=h[f],A[f][p+"End"]=s.ends[f],A[f][p+"Start"]=s.starts[f]),l.ids&&(g.id=String(l.ids[f])),0===f&&(A[0].vTotal=0),A[0].vTotal+=o(g.s),g.begR=o(g.s)/o(A[0].s)}for(f=0;f<c;f++)(g=A[f]).s!==e&&(g.sumR=g.s/A[0].vTotal,g.difR=void 0!==w?g.s/w:1,w=g.s);return M(A,l),_(A,l),A}},{"../../constants/numerical":479,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929,"./arrays_to_calcdata":770}],773:[function(b,oe,se){"use strict";oe.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],774:[function(b,oe,se){"use strict";var y=b("../bar/cross_trace_calc").setGroupPositions;oe.exports=function(x,M){var _,e,o=x._fullLayout,a=x._fullData,l=x.calcdata,i=M.xaxis,v=M.yaxis,h=[],s=[],d=[];for(e=0;e<a.length;e++){var p=a[e];!0===p.visible&&p.xaxis===i._id&&p.yaxis===v._id&&"funnel"===p.type&&(_=l[e],"h"===p.orientation?d.push(_):s.push(_),h.push(_))}var g={mode:o.funnelmode,norm:o.funnelnorm,gap:o.funnelgap,groupgap:o.funnelgroupgap};for(y(x,i,v,s,g),y(x,v,i,d,g),e=0;e<h.length;e++){_=h[e];for(var m=0;m<_.length;m++)m+1<_.length&&(_[m].nextP0=_[m+1].p0,_[m].nextS0=_[m+1].s0,_[m].nextP1=_[m+1].p1,_[m].nextS1=_[m+1].s1)}}},{"../bar/cross_trace_calc":651}],775:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../bar/defaults").handleGroupingDefaults,M=b("../bar/defaults").handleText,_=b("../scatter/xy_defaults"),e=b("../scatter/period_defaults"),o=b("./attributes"),a=b("../../components/color");oe.exports={supplyDefaults:function(l,i,v,h){function s(g,m){return y.coerce(l,i,o,g,m)}if(_(l,i,h,s)){e(l,i,h,s),s("xhoverformat"),s("yhoverformat"),s("orientation",i.y&&!i.x?"v":"h"),s("offset"),s("width");var d=s("text");s("hovertext"),s("hovertemplate");var p=s("textposition");M(l,i,h,s,p,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===i.textposition||i.texttemplate||s("textinfo",Array.isArray(d)?"text+value":"value");var f=s("marker.color",v);s("marker.line.color",a.defaultLine),s("marker.line.width"),s("connector.visible")&&(s("connector.fillcolor",(m=y.isArrayOrTypedArray(g=f)?"#000":g,a.addOpacity(m,.5*a.opacity(m)))),s("connector.line.width")&&(s("connector.line.color"),s("connector.line.dash")))}else i.visible=!1;var g,m},crossTraceDefaults:function(l,i){var v,h;function s(p){return y.coerce(h._input,h,o,p)}if("group"===i.funnelmode)for(var d=0;d<l.length;d++)v=(h=l[d])._input,x(v,h,i,s)}}},{"../../components/color":366,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":771}],776:[function(b,oe,se){"use strict";oe.exports=function(y,x){return y.x="xVal"in x?x.xVal:x.x,y.y="yVal"in x?x.yVal:x.y,"percentInitial"in x&&(y.percentInitial=x.percentInitial),"percentPrevious"in x&&(y.percentPrevious=x.percentPrevious),"percentTotal"in x&&(y.percentTotal=x.percentTotal),x.xa&&(y.xaxis=x.xa),x.ya&&(y.yaxis=x.ya),y}},{}],777:[function(b,oe,se){"use strict";var y=b("../../components/color").opacity,x=b("../bar/hover").hoverOnBars,M=b("../../lib").formatPercent;oe.exports=function(_,e,o,a,l){var c,A,k,C,E,i=x(_,e,o,a,l);if(i){var v=i.cd,h=v[0].trace,d=v[i.index];i[("h"===h.orientation?"x":"y")+"LabelVal"]=d.s,i.percentInitial=d.begR,i.percentInitialLabel=M(d.begR,1),i.percentPrevious=d.difR,i.percentPreviousLabel=M(d.difR,1),i.percentTotal=d.sumR,i.percentTotalLabel=M(d.sumR,1);var p=d.hi||h.hoverinfo,f=[];if(p&&"none"!==p&&"skip"!==p){var g="all"===p,m=p.split("+"),u=function(w){return g||-1!==m.indexOf(w)};u("percent initial")&&f.push(i.percentInitialLabel+" of initial"),u("percent previous")&&f.push(i.percentPreviousLabel+" of previous"),u("percent total")&&f.push(i.percentTotalLabel+" of total")}return i.extraText=f.join("<br>"),i.color=(A=h.marker,C=(c=d).mlc||A.line.color,E=c.mlw||A.line.width,y(k=c.mc||A.color)?k:y(C)&&E?C:void 0),[i]}}},{"../../components/color":366,"../../lib":503,"../bar/hover":655}],778:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style").style,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:b("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":771,"./calc":772,"./cross_trace_calc":774,"./defaults":775,"./event_data":776,"./hover":777,"./layout_attributes":779,"./layout_defaults":780,"./plot":781,"./style":782}],779:[function(b,oe,se){"use strict";oe.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],780:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./layout_attributes");oe.exports=function(M,_,e){var o=!1;function a(v,h){return y.coerce(M,_,x,v,h)}for(var l=0;l<e.length;l++){var i=e[l];if(i.visible&&"funnel"===i.type){o=!0;break}}o&&(a("funnelmode"),a("funnelgap",.2),a("funnelgroupgap"))}},{"../../lib":503,"./layout_attributes":779}],781:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../lib"),M=b("../../components/drawing"),_=b("../../constants/numerical").BADNUM,e=b("../bar/plot"),o=b("../bar/uniform_text").clearMinTextSize;function a(l,i,v,h){var s=[],d=[],p=h?i:v,f=h?v:i;return s[0]=p.c2p(l.s0,!0),d[0]=f.c2p(l.p0,!0),s[1]=p.c2p(l.s1,!0),d[1]=f.c2p(l.p1,!0),s[2]=p.c2p(l.nextS0,!0),d[2]=f.c2p(l.nextP0,!0),s[3]=p.c2p(l.nextS1,!0),d[3]=f.c2p(l.nextP1,!0),h?[s,d]:[d,s]}oe.exports=function(l,i,v,h){var d,p,m,u,s=l._fullLayout;o("funnel",s),d=l,m=(p=i).xaxis,u=p.yaxis,x.makeTraceGroups(h,v,"trace bars").each(function(w){var c=y.select(this),A=w[0].trace,k=x.ensureSingle(c,"g","regions");if(A.connector&&A.connector.visible){var C="h"===A.orientation,E=k.selectAll("g.region").data(x.identity);E.enter().append("g").classed("region",!0),E.exit().remove();var L=E.size();E.each(function(D,N){if(N===L-1||D.cNext){var F=a(D,m,u,C),I=F[0],P=F[1],j="";I[0]!==_&&P[0]!==_&&I[1]!==_&&P[1]!==_&&I[2]!==_&&P[2]!==_&&I[3]!==_&&P[3]!==_&&(j+=C?"M"+I[0]+","+P[1]+"L"+I[2]+","+P[2]+"H"+I[3]+"L"+I[1]+","+P[1]+"Z":"M"+I[1]+","+P[1]+"L"+I[2]+","+P[3]+"V"+P[2]+"L"+I[1]+","+P[0]+"Z"),""===j&&(j="M0,0Z"),x.ensureSingle(y.select(this),"path").attr("d",j).call(M.setClipUrl,p.layerClipId,d)}})}else k.remove()}),function(d,p,f,g){var m=p.xaxis,u=p.yaxis;x.makeTraceGroups(g,f,"trace bars").each(function(w){var c=y.select(this),A=w[0].trace,k=x.ensureSingle(c,"g","lines");if(A.connector&&A.connector.visible&&A.connector.line.width){var C="h"===A.orientation,E=k.selectAll("g.line").data(x.identity);E.enter().append("g").classed("line",!0),E.exit().remove();var L=E.size();E.each(function(D,N){if(N===L-1||D.cNext){var F=a(D,m,u,C),I=F[0],P=F[1],j="";void 0!==I[3]&&void 0!==P[3]&&(C?(j+="M"+I[0]+","+P[1]+"L"+I[2]+","+P[2],j+="M"+I[1]+","+P[1]+"L"+I[3]+","+P[2]):(j+="M"+I[1]+","+P[1]+"L"+I[2]+","+P[3],j+="M"+I[1]+","+P[0]+"L"+I[2]+","+P[2])),""===j&&(j="M0,0Z"),x.ensureSingle(y.select(this),"path").attr("d",j).call(M.setClipUrl,p.layerClipId,d)}})}else k.remove()})}(l,i,v,h),e.plot(l,i,v,h,{mode:s.funnelmode,norm:s.funnelmode,gap:s.funnelgap,groupgap:s.funnelgroupgap})}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],782:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../components/drawing"),M=b("../../components/color"),_=b("../../constants/interactions").DESELECTDIM,e=b("../bar/style"),o=b("../bar/uniform_text").resizeText,a=e.styleTextPoints;oe.exports={style:function(l,i,v){var h=v||y.select(l).selectAll("g.funnellayer").selectAll("g.trace");o(l,h,"funnel"),h.style("opacity",function(s){return s[0].trace.opacity}),h.each(function(s){var d=y.select(this),p=s[0].trace;d.selectAll(".point > path").each(function(f){if(!f.isBlank){var g=p.marker;y.select(this).call(M.fill,f.mc||g.color).call(M.stroke,f.mlc||g.line.color).call(x.dashLine,g.line.dash,f.mlw||g.line.width).style("opacity",p.selectedpoints&&!f.selected?_:1)}}),a(d,p,l),d.selectAll(".regions").each(function(){y.select(this).selectAll("path").style("stroke-width",0).call(M.fill,p.connector.fillcolor)}),d.selectAll(".lines").each(function(){var f=p.connector.line;x.lineGroupStyle(y.select(this).selectAll("path"),f.width,f.color,f.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],783:[function(b,oe,se){"use strict";var y=b("../pie/attributes"),x=b("../../plots/attributes"),M=b("../../plots/domain").attributes,_=b("../../plots/template_attributes").hovertemplateAttrs,e=b("../../plots/template_attributes").texttemplateAttrs,o=b("../../lib/extend").extendFlat;oe.exports={labels:y.labels,label0:y.label0,dlabel:y.dlabel,values:y.values,marker:{colors:y.marker.colors,line:{color:o({},y.marker.line.color,{dflt:null}),width:o({},y.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:y.text,hovertext:y.hovertext,scalegroup:o({},y.scalegroup,{}),textinfo:o({},y.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:o({},x.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:_({},{keys:["label","color","value","text","percent"]}),textposition:o({},y.textposition,{values:["inside","none"],dflt:"inside"}),textfont:y.textfont,insidetextfont:y.insidetextfont,title:{text:y.title.text,font:y.title.font,position:o({},y.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:M({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901}],784:[function(b,oe,se){"use strict";var y=b("../../plots/plots");se.name="funnelarea",se.plot=function(x,M,_,e){y.plotBasePlot(se.name,x,M,_,e)},se.clean=function(x,M,_,e){y.cleanBasePlot(se.name,x,M,_,e)}},{"../../plots/plots":619}],785:[function(b,oe,se){"use strict";var y=b("../pie/calc");oe.exports={calc:function(x,M){return y.calc(x,M)},crossTraceCalc:function(x){y.crossTraceCalc(x,{type:"funnelarea"})}}},{"../pie/calc":903}],786:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./attributes"),M=b("../../plots/domain").defaults,_=b("../bar/defaults").handleText,e=b("../pie/defaults").handleLabelsAndValues;oe.exports=function(o,a,l,i){function v(w,c){return y.coerce(o,a,x,w,c)}var h=v("labels"),s=v("values"),d=e(h,s),p=d.len;if(a._hasLabels=d.hasLabels,a._hasValues=d.hasValues,!a._hasLabels&&a._hasValues&&(v("label0"),v("dlabel")),p){a._length=p,v("marker.line.width")&&v("marker.line.color",i.paper_bgcolor),v("marker.colors"),v("scalegroup");var f,g=v("text"),m=v("texttemplate");if(m||(f=v("textinfo",Array.isArray(g)?"text+percent":"percent")),v("hovertext"),v("hovertemplate"),m||f&&"none"!==f){var u=v("textposition");_(o,a,i,v,u,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}M(a,i,v),v("title.text")&&(v("title.position"),y.coerceFont(v,"title.font",i.font)),v("aspectratio"),v("baseratio")}else a.visible=!1}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"../pie/defaults":904,"./attributes":783}],787:[function(b,oe,se){"use strict";oe.exports={moduleType:"trace",name:"funnelarea",basePlotModule:b("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style"),styleOne:b("../pie/style_one"),meta:{}}},{"../pie/style_one":912,"./attributes":783,"./base_plot":784,"./calc":785,"./defaults":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(b,oe,se){"use strict";var y=b("../pie/layout_attributes").hiddenlabels;oe.exports={hiddenlabels:y,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":908}],789:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./layout_attributes");oe.exports=function(M,_){function e(o,a){return y.coerce(M,_,x,o,a)}e("hiddenlabels"),e("funnelareacolorway",_.colorway),e("extendfunnelareacolors")}},{"../../lib":503,"./layout_attributes":788}],790:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../components/drawing"),M=b("../../lib"),_=M.strScale,e=M.strTranslate,o=b("../../lib/svg_text_utils"),a=b("../bar/plot").toMoveInsideBar,l=b("../bar/uniform_text"),i=l.recordMinTextSize,v=l.clearMinTextSize,h=b("../pie/helpers"),s=b("../pie/plot"),d=s.attachFxHandlers,p=s.determineInsideTextFont,f=s.layoutAreas,g=s.prerenderTitles,m=s.positionTitleOutside,u=s.formatSliceLabel;function w(c,A){return"l"+(A[0]-c[0])+","+(A[1]-c[1])}oe.exports=function(c,A){var k=c._fullLayout;v("funnelarea",k),g(A,c),f(A,k._size),M.makeTraceGroups(k._funnelarealayer,A,"trace").each(function(C){var E=y.select(this),L=C[0],D=L.trace;(function(N){if(N.length){var F=N[0],I=F.trace,P=I.aspectratio,j=I.baseratio;j>.999&&(j=.999);var V,K,ie,Z=Math.pow(j,2),Y=F.vTotal,ee=Y,re=Y*Z/(1-Z)/Y,q=[];for(q.push(X()),K=N.length-1;K>-1;K--)(ie=N[K]).hidden||(re+=ie.v/ee,q.push(X()));var W=1/0,ae=-1/0;for(K=0;K<q.length;K++)V=q[K],W=Math.min(W,V[1]),ae=Math.max(ae,V[1]);for(K=0;K<q.length;K++)q[K][1]-=(ae+W)/2;var te=F.r,ne=(ae-W)/2,le=te/q[q.length-1][0],ue=te/ne*P;for(F.r=ue*ne,K=0;K<q.length;K++)q[K][0]*=le,q[K][1]*=ue;var De,Le,pe=[-(V=q[0])[0],V[1]],de=[V[0],V[1]],_e=0;for(K=N.length-1;K>-1;K--)if(!(ie=N[K]).hidden){var me=q[_e+=1][0],we=q[_e][1];ie.TL=[-me,we],ie.TR=[me,we],ie.BL=pe,ie.BR=de,ie.pxmid=[.5*((De=ie.TR)[0]+(Le=ie.BR)[0]),.5*(De[1]+Le[1])],pe=ie.TL,de=ie.TR}}function X(){var Ie,je={x:Ie=Math.sqrt(re),y:-Ie};return[je.x,je.y]}})(C),E.each(function(){var N=y.select(this).selectAll("g.slice").data(C);N.enter().append("g").classed("slice",!0),N.exit().remove(),N.each(function(I,P){if(I.hidden)y.select(this).selectAll("path,g").remove();else{I.pointNumber=I.i,I.curveNumber=D.index;var j=L.cx,V=L.cy,Z=y.select(this),Y=Z.selectAll("path.surface").data([I]);Y.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),Z.call(d,c,C);var ee="M"+(j+I.TR[0])+","+(V+I.TR[1])+w(I.TR,I.BR)+w(I.BR,I.BL)+w(I.BL,I.TL)+"Z";Y.attr("d",ee),u(c,I,L);var re=h.castOption(D.textposition,I.pts),X=Z.selectAll("g.slicetext").data(I.text&&"none"!==re?[0]:[]);X.enter().append("g").classed("slicetext",!0),X.exit().remove(),X.each(function(){var K=M.ensureSingle(y.select(this),"text","",function(ne){ne.attr("data-notex",1)}),ie=M.ensureUniformFontSize(c,p(D,I,k.font));K.text(I.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(x.font,ie).call(o.convertToTspans,c);var q,U,W,ae=x.bBox(K.node()),G=Math.min(I.BL[1],I.BR[1])+V,te=Math.max(I.TL[1],I.TR[1])+V;U=Math.max(I.TL[0],I.BL[0])+j,W=Math.min(I.TR[0],I.BR[0])+j,(q=a(U,W,G,te,ae,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=ie.size,i(D.type,q,k),C[P].transform=q,K.attr("transform",M.getTextTransform(q))})}});var F=y.select(this).selectAll("g.titletext").data(D.title.text?[0]:[]);F.enter().append("g").classed("titletext",!0),F.exit().remove(),F.each(function(){var I=M.ensureSingle(y.select(this),"text","",function(V){V.attr("data-notex",1)}),P=D.title.text;D._meta&&(P=M.templateString(P,D._meta)),I.text(P).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(x.font,D.title.font).call(o.convertToTspans,c);var j=m(L,k._size);I.attr("transform",e(j.x,j.y)+_(Math.min(1,j.scale))+e(j.tx,j.ty))})})})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/plot":659,"../bar/uniform_text":664,"../pie/helpers":906,"../pie/plot":910,"@plotly/d3":58}],791:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../pie/style_one"),M=b("../bar/uniform_text").resizeText;oe.exports=function(_){var e=_._fullLayout._funnelarealayer.selectAll(".trace");M(_,e,"funnelarea"),e.each(function(o){var a=o[0].trace,l=y.select(this);l.style({opacity:a.opacity}),l.selectAll("path.surface").each(function(i){y.select(this).call(x,i,a)})})}},{"../bar/uniform_text":664,"../pie/style_one":912,"@plotly/d3":58}],792:[function(b,oe,se){"use strict";var y=b("../scatter/attributes"),x=b("../../plots/attributes"),M=b("../../plots/font_attributes"),_=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=b("../../plots/template_attributes").hovertemplateAttrs,o=b("../../plots/template_attributes").texttemplateAttrs,a=b("../../components/colorscale/attributes"),l=b("../../lib/extend").extendFlat;oe.exports=l({z:{valType:"data_array",editType:"calc"},x:l({},y.x,{impliedEdits:{xtype:"array"}}),x0:l({},y.x0,{impliedEdits:{xtype:"scaled"}}),dx:l({},y.dx,{impliedEdits:{xtype:"scaled"}}),y:l({},y.y,{impliedEdits:{ytype:"array"}}),y0:l({},y.y0,{impliedEdits:{ytype:"scaled"}}),dy:l({},y.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:l({},y.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:l({},y.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:l({},y.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:l({},y.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:l({},y.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:l({},y.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z",1),hovertemplate:e(),texttemplate:o({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:M({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:l({},x.showlegend,{dflt:!1})},{transforms:void 0},a("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":927}],793:[function(b,oe,se){"use strict";var y=b("../../registry"),x=b("../../lib"),M=b("../../plots/cartesian/axes"),_=b("../../plots/cartesian/align_period"),e=b("../histogram2d/calc"),o=b("../../components/colorscale/calc"),a=b("./convert_column_xyz"),l=b("./clean_2d_array"),i=b("./interp2d"),v=b("./find_empties"),h=b("./make_bound_array"),s=b("../../constants/numerical").BADNUM;function d(p){for(var f=[],g=p.length,m=0;m<g;m++){var u=p[m];u!==s&&f.push(u)}return f}oe.exports=function(p,f){var g,m,u,w,c,A,k,C,E,L,D,N=M.getFromId(p,f.xaxis||"x"),F=M.getFromId(p,f.yaxis||"y"),I=y.traceIs(f,"contour"),P=y.traceIs(f,"histogram"),j=y.traceIs(f,"gl2d"),V=I?"best":f.zsmooth;if(N._minDtick=0,F._minDtick=0,P)w=(D=e(p,f)).orig_x,g=D.x,m=D.x0,u=D.dx,C=D.orig_y,c=D.y,A=D.y0,k=D.dy,E=D.z;else{var Z=f.z;x.isArray1D(Z)?(a(f,N,F,"x","y",["z"]),g=f._x,c=f._y,Z=f._z):(w=f.x?N.makeCalcdata(f,"x"):[],C=f.y?F.makeCalcdata(f,"y"):[],g=_(f,N,"x",w).vals,c=_(f,F,"y",C).vals,f._x=g,f._y=c),m=f.x0,u=f.dx,A=f.y0,k=f.dy,E=l(Z,f,N,F)}function Y(ne){V=f._input.zsmooth=f.zsmooth=!1,x.warn('cannot use zsmooth: "fast": '+ne)}if((N.rangebreaks||F.rangebreaks)&&(E=function(ne,le,ue){for(var pe=[],de=-1,_e=0;_e<ue.length;_e++)if(le[_e]!==s){pe[++de]=[];for(var me=0;me<ue[_e].length;me++)ne[me]!==s&&pe[de].push(ue[_e][me])}return pe}(g,c,E),P||(g=d(g),c=d(c),f._x=g,f._y=c)),P||!I&&!f.connectgaps||(f._emptypoints=v(E),i(E,f._emptypoints)),"fast"===V)if("log"===N.type||"log"===F.type)Y("log axis found");else if(!P){if(g.length){var ee=(g[g.length-1]-g[0])/(g.length-1),re=Math.abs(ee/100);for(L=0;L<g.length-1;L++)if(Math.abs(g[L+1]-g[L]-ee)>re){Y("x scale is not linear");break}}if(c.length&&"fast"===V){var X=(c[c.length-1]-c[0])/(c.length-1),K=Math.abs(X/100);for(L=0;L<c.length-1;L++)if(Math.abs(c[L+1]-c[L]-X)>K){Y("y scale is not linear");break}}}var ie=x.maxRowLength(E),q="scaled"===f.xtype?"":g,U=h(f,q,m,u,ie,N),W="scaled"===f.ytype?"":c,ae=h(f,W,A,k,E.length,F);j||(f._extremes[N._id]=M.findExtremes(N,U),f._extremes[F._id]=M.findExtremes(F,ae));var G={x:U,y:ae,z:E,text:f._text||f.text,hovertext:f._hovertext||f.hovertext};if(f.xperiodalignment&&w&&(G.orig_x=w),f.yperiodalignment&&C&&(G.orig_y=C),q&&q.length===U.length-1&&(G.xCenter=q),W&&W.length===ae.length-1&&(G.yCenter=W),P&&(G.xRanges=D.xRanges,G.yRanges=D.yRanges,G.pts=D.pts),I||o(p,f,{vals:E,cLetter:"z"}),I&&f.contours&&"heatmap"===f.contours.coloring){var te={type:"contour"===f.type?"heatmap":"histogram2d",xcalendar:f.xcalendar,ycalendar:f.ycalendar};G.xfill=h(te,q,m,u,ie,N),G.yfill=h(te,W,A,k,E.length,F)}return[G]}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../../registry":638,"../histogram2d/calc":826,"./clean_2d_array":794,"./convert_column_xyz":796,"./find_empties":798,"./interp2d":801,"./make_bound_array":803}],794:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../lib"),M=b("../../constants/numerical").BADNUM;oe.exports=function(_,e,o,a){var l,i,v,h,s,d;function p(c){if(y(c))return+c}if(e&&e.transpose){for(l=0,s=0;s<_.length;s++)l=Math.max(l,_[s].length);if(0===l)return!1;v=function(c){return c.length},h=function(c,A,k){return(c[k]||[])[A]}}else l=_.length,v=function(c,A){return c[A].length},h=function(c,A,k){return(c[A]||[])[k]};function g(c){if(e&&"carpet"!==e.type&&"contourcarpet"!==e.type&&c&&"category"===c.type&&e["_"+c._id.charAt(0)].length){var A=c._id.charAt(0),k={},C=e["_"+A+"CategoryMap"]||e[A];for(s=0;s<C.length;s++)k[C[s]]=s;return function(E){var L=k[c._categories[E]];return L+1?L:M}}return x.identity}var m=g(o),u=g(a);a&&"category"===a.type&&(l=a._categories.length);var c,A,k,w=new Array(l);for(s=0;s<l;s++)for(i=o&&"category"===o.type?o._categories.length:v(_,s),w[s]=new Array(i),d=0;d<i;d++)w[s][d]=p((c=_,A=u(s),k=m(d),A===M||k===M?M:h(c,A,k)));return w}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],795:[function(b,oe,se){"use strict";oe.exports={min:"zmin",max:"zmax"}},{}],796:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../constants/numerical").BADNUM,M=b("../../plots/cartesian/align_period");oe.exports=function(_,e,o,a,l,i){var v=_._length,h=e.makeCalcdata(_,a),s=o.makeCalcdata(_,l);h=M(_,e,a,h).vals,s=M(_,o,l,s).vals;var d,p,f,g,m=_.text,u=void 0!==m&&y.isArray1D(m),w=_.hovertext,c=void 0!==w&&y.isArray1D(w),A=y.distinctVals(h),k=A.vals,C=y.distinctVals(s),E=C.vals,L=[],D=E.length,N=k.length;for(d=0;d<i.length;d++)L[d]=y.init2dArray(D,N);u&&(f=y.init2dArray(D,N)),c&&(g=y.init2dArray(D,N));var F=y.init2dArray(D,N);for(d=0;d<v;d++)if(h[d]!==x&&s[d]!==x){var I=y.findBin(h[d]+A.minDiff/2,k),P=y.findBin(s[d]+C.minDiff/2,E);for(p=0;p<i.length;p++)L[p][P][I]=_[i[p]][d],F[P][I]=d;u&&(f[P][I]=m[d]),c&&(g[P][I]=w[d])}for(_["_"+a]=k,_["_"+l]=E,p=0;p<i.length;p++)_["_"+i[p]]=L[p];u&&(_._text=f),c&&(_._hovertext=g),e&&"category"===e.type&&(_["_"+a+"CategoryMap"]=k.map(function(V){return e._categories[V]})),o&&"category"===o.type&&(_["_"+l+"CategoryMap"]=E.map(function(V){return o._categories[V]})),_._after2before=F}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551}],797:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./xyz_defaults"),M=b("./label_defaults"),_=b("../scatter/period_defaults"),e=b("./style_defaults"),o=b("../../components/colorscale/defaults"),a=b("./attributes");oe.exports=function(l,i,v,h){function s(d,p){return y.coerce(l,i,a,d,p)}x(l,i,s,h)?(_(l,i,h,s),s("xhoverformat"),s("yhoverformat"),s("text"),s("hovertext"),s("hovertemplate"),M(s,h),e(l,i,s,h),s("hoverongaps"),s("connectgaps",y.isArray1D(i.z)&&!1!==i.zsmooth),o(l,i,h,s,{prefix:"",cLetter:"z"})):i.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../scatter/period_defaults":947,"./attributes":792,"./label_defaults":802,"./style_defaults":806,"./xyz_defaults":807}],798:[function(b,oe,se){"use strict";var y=b("../../lib").maxRowLength;oe.exports=function(x){var M,_,e,o,a,l,i,v,h=[],s={},d=[],p=x[0],f=[],g=[0,0,0],m=y(x);for(_=0;_<x.length;_++)for(M=f,f=p,p=x[_+1]||[],e=0;e<m;e++)void 0===f[e]&&((l=(void 0!==f[e-1]?1:0)+(void 0!==f[e+1]?1:0)+(void 0!==M[e]?1:0)+(void 0!==p[e]?1:0))?(0===_&&l++,0===e&&l++,_===x.length-1&&l++,e===f.length-1&&l++,l<4&&(s[[_,e]]=[_,e,l]),h.push([_,e,l])):d.push([_,e]));for(;d.length;){for(i={},v=!1,a=d.length-1;a>=0;a--)(l=((s[[(_=(o=d[a])[0])-1,e=o[1]]]||g)[2]+(s[[_+1,e]]||g)[2]+(s[[_,e-1]]||g)[2]+(s[[_,e+1]]||g)[2])/20)&&(i[o]=[_,e,l],d.splice(a,1),v=!0);if(!v)throw"findEmpties iterated with no new neighbors";for(o in i)s[o]=i[o],h.push(i[o])}return h.sort(function(u,w){return w[2]-u[2]})}},{"../../lib":503}],799:[function(b,oe,se){"use strict";var y=b("../../components/fx"),x=b("../../lib"),M=b("../../plots/cartesian/axes"),_=b("../../components/colorscale").extractOpts;oe.exports=function(e,o,a,l,i){i||(i={});var v,h,s,d,p=i.isContour,f=e.cd[0],g=f.trace,m=e.xa,u=e.ya,w=f.x,c=f.y,A=f.z,k=f.xCenter,C=f.yCenter,E=f.zmask,L=g.zhoverformat,D=w,N=c;if(!1!==e.index){try{s=Math.round(e.index[1]),d=Math.round(e.index[0])}catch(q){return void x.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(s<0||s>=A[0].length||d<0||d>A.length)return}else{if(y.inbox(o-w[0],o-w[w.length-1],0)>0||y.inbox(a-c[0],a-c[c.length-1],0)>0)return;if(p){var F;for(D=[2*w[0]-w[1]],F=1;F<w.length;F++)D.push((w[F]+w[F-1])/2);for(D.push([2*w[w.length-1]-w[w.length-2]]),N=[2*c[0]-c[1]],F=1;F<c.length;F++)N.push((c[F]+c[F-1])/2);N.push([2*c[c.length-1]-c[c.length-2]])}s=Math.max(0,Math.min(D.length-2,x.findBin(o,D))),d=Math.max(0,Math.min(N.length-2,x.findBin(a,N)))}var I,P,j=m.c2p(w[s]),V=m.c2p(w[s+1]),Z=u.c2p(c[d]),Y=u.c2p(c[d+1]);p?(V=j,v=(I=f.orig_x||w)[s],Y=Z,h=(P=f.orig_y||c)[d]):(I=f.orig_x||k||w,P=f.orig_y||C||c,v=k?I[s]:(I[s]+I[s+1])/2,h=C?P[d]:(P[d]+P[d+1])/2,m&&"category"===m.type&&(v=w[s]),u&&"category"===u.type&&(h=c[d]),g.zsmooth&&(j=V=m.c2p(v),Z=Y=u.c2p(h)));var ee=A[d][s];if(E&&!E[d][s]&&(ee=void 0),void 0!==ee||g.hoverongaps){var re;Array.isArray(f.hovertext)&&Array.isArray(f.hovertext[d])?re=f.hovertext[d][s]:Array.isArray(f.text)&&Array.isArray(f.text[d])&&(re=f.text[d][s]);var X=_(g),ie=M.tickText({type:"linear",range:[X.min,X.max],hoverformat:L,_separators:m._separators,_numFormat:m._numFormat},ee,"hover").text;return[x.extendFlat(e,{index:g._after2before?g._after2before[d][s]:[d,s],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:j,x1:V,y0:Z,y1:Y,xLabelVal:v,yLabelVal:h,zLabelVal:ee,zLabel:ie,text:re})]}}},{"../../components/colorscale":378,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],800:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:b("./colorbar"),style:b("./style"),hoverPoints:b("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":792,"./calc":793,"./colorbar":795,"./defaults":797,"./hover":799,"./plot":804,"./style":805}],801:[function(b,oe,se){"use strict";var y=b("../../lib"),x=[[-1,0],[1,0],[0,-1],[0,1]];function M(e){return.5-.25*Math.min(1,.5*e)}function _(e,o,a){var l,i,v,h,s,d,p,f,g,m,u,w,c,A=0;for(h=0;h<o.length;h++){for(u=e[i=(l=o[h])[0]][v=l[1]],m=0,g=0,s=0;s<4;s++)(p=e[i+(d=x[s])[0]])&&void 0!==(f=p[v+d[1]])&&(0===m?w=c=f:(w=Math.min(w,f),c=Math.max(c,f)),g++,m+=f);if(0===g)throw"iterateInterp2d order is wrong: no defined neighbors";e[i][v]=m/g,void 0===u?g<4&&(A=1):(e[i][v]=(1+a)*e[i][v]-a*u,c>w&&(A=Math.max(A,Math.abs(e[i][v]-u)/(c-w))))}return A}oe.exports=function(e,o){var a,l=1;for(_(e,o),a=0;a<o.length&&!(o[a][2]<4);a++);for(o=o.slice(a),a=0;a<100&&l>.01;a++)l=_(e,o,M(l));return l>.01&&y.log("interp2d didn't converge quickly",l),e}},{"../../lib":503}],802:[function(b,oe,se){"use strict";var y=b("../../lib");oe.exports=function(x,M){x("texttemplate");var _=y.extendFlat({},M.font,{color:"auto",size:"auto"});y.coerceFont(x,"textfont",_)}},{"../../lib":503}],803:[function(b,oe,se){"use strict";var y=b("../../registry"),x=b("../../lib").isArrayOrTypedArray;oe.exports=function(M,_,e,o,a,l){var i,v,h,s=[],d=y.traceIs(M,"contour"),p=y.traceIs(M,"histogram"),f=y.traceIs(M,"gl2d");if(x(_)&&_.length>1&&!p&&"category"!==l.type){var g=_.length;if(!(g<=a))return _.slice(0,d?a:a+1);if(d||f)s=_.slice(0,a);else if(1===a)s=[_[0]-.5,_[0]+.5];else{for(s=[1.5*_[0]-.5*_[1]],h=1;h<g;h++)s.push(.5*(_[h-1]+_[h]));s.push(1.5*_[g-1]-.5*_[g-2])}if(g<a){var m=s[s.length-1],u=m-s[s.length-2];for(h=g;h<a;h++)s.push(m+=u)}}else{var w=M[l._id.charAt(0)+"calendar"];for(i=p?l.r2c(e,0,w):x(_)&&1===_.length?_[0]:void 0===e?0:("log"===l.type?l.d2c:l.r2c)(e,0,w),v=o||1,h=d||f?0:-.5;h<a;h++)s.push(i+v*h)}return s}},{"../../lib":503,"../../registry":638}],804:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("tinycolor2"),M=b("../../registry"),_=b("../../components/drawing"),e=b("../../plots/cartesian/axes"),o=b("../../lib"),a=b("../../lib/svg_text_utils"),l=b("../scatter/format_labels"),i=b("../../components/color"),v=b("../../components/colorscale").extractOpts,h=b("../../components/colorscale").makeColorScaleFuncFromTrace,s=b("../../constants/xmlns_namespaces"),d=b("../../constants/alignment").LINE_SPACING;function p(w){return w.selectAll("g.heatmap-label")}function f(w){p(w).remove()}function g(w,c){var A=c.length-2,k=o.constrain(o.findBin(w,c),0,A),C=c[k],L=o.constrain(k+(w-C)/(c[k+1]-C)-.5,0,A),D=Math.round(L),N=Math.abs(L-D);return L&&L!==A&&N?{bin0:D,frac:N,bin1:Math.round(D+N/(L-D))}:{bin0:D,bin1:D,frac:0}}function m(w,c){var A=c.length-1,k=o.constrain(o.findBin(w,c),0,A),C=c[k],E=(w-C)/(c[k+1]-C)||0;return E<=0?{bin0:k,bin1:k,frac:0}:E<.5?{bin0:k,bin1:k+1,frac:E}:{bin0:k+1,bin1:k,frac:1-E}}function u(w,c,A){w[c]=A[0],w[c+1]=A[1],w[c+2]=A[2],w[c+3]=Math.round(255*A[3])}oe.exports=function(w,c,A,k){var C=c.xaxis,E=c.yaxis;o.makeTraceGroups(k,A,"hm").each(function(L){var D,N,F,I,P,j,V,Z,Y=y.select(this),ee=L[0],re=ee.trace,X=re.xgap||0,K=re.ygap||0,ie=ee.z,q=ee.x,U=ee.y,W=ee.xCenter,ae=ee.yCenter,G=M.traceIs(re,"contour"),te=G?"best":re.zsmooth,ne=ie.length,le=o.maxRowLength(ie),ue=!1,pe=!1;for(j=0;void 0===D&&j<q.length-1;)D=C.c2p(q[j]),j++;for(j=q.length-1;void 0===N&&j>0;)N=C.c2p(q[j]),j--;for(N<D&&(F=N,N=D,D=F,ue=!0),j=0;void 0===I&&j<U.length-1;)I=E.c2p(U[j]),j++;for(j=U.length-1;void 0===P&&j>0;)P=E.c2p(U[j]),j--;if(P<I&&(F=I,I=P,P=F,pe=!0),G&&(W=q,ae=U,q=ee.xfill,U=ee.yfill),"fast"!==te){var de="best"===te?0:.5;D=Math.max(-de*C._length,D),N=Math.min((1+de)*C._length,N),I=Math.max(-de*E._length,I),P=Math.min((1+de)*E._length,P)}var _e,me,we=Math.round(N-D),De=Math.round(P-I);if(we<=0||De<=0)return Y.selectAll("image").data([]).exit().remove(),void f(Y);"fast"===te?(_e=le,me=ne):(_e=we,me=De);var Le=document.createElement("canvas");Le.width=_e,Le.height=me;var Ie,je,ye=Le.getContext("2d"),Me=h(re,{noNumericCheck:!0,returnArray:!0});"fast"===te?(Ie=ue?function(Gr){return le-1-Gr}:o.identity,je=pe?function(Gr){return ne-1-Gr}:o.identity):(Ie=function(Gr){return o.constrain(Math.round(C.c2p(q[Gr])-D),0,we)},je=function(Gr){return o.constrain(Math.round(E.c2p(U[Gr])-I),0,De)});var Oe,Pe,Re,Ue,qe=je(0),Xe=[qe,qe],lt=ue?0:1,He=pe?0:1,$e=0,et=0,nt=0,ct=0;function bt(Gr,Lr){if(void 0!==Gr){var Jr=Me(Gr);return Jr[0]=Math.round(Jr[0]),Jr[1]=Math.round(Jr[1]),Jr[2]=Math.round(Jr[2]),$e+=Lr,et+=Jr[0]*Lr,nt+=Jr[1]*Lr,ct+=Jr[2]*Lr,Jr}return[0,0,0,0]}function kt(Gr,Lr,Jr,Mi){var Jn=Gr[Jr.bin0];if(void 0===Jn)return bt(void 0,1);var Fr=Gr[Jr.bin1],cr=Lr[Jr.bin0],Qr=Lr[Jr.bin1];return bt(Jn+Jr.frac*(Fr-Jn||0)+Mi.frac*((cr-Jn||0)+Jr.frac*(void 0===Fr?void 0===Qr?0:void 0===cr?2*(Qr-Jn):2*(2*Qr-cr-Jn)/3:void 0===Qr?void 0===cr?0:2*(2*Jn-Fr-cr)/3:void 0===cr?2*(2*Qr-Fr-Jn)/3:Qr+Jn-Fr-cr)))}if(te){var Bt,Et=0;try{Bt=new Uint8Array(we*De*4)}catch(Gr){Bt=new Array(we*De*4)}if("best"===te){var ht,at,Ft,en=W||q,Qt=ae||U,tn=new Array(en.length),dn=new Array(Qt.length),Mn=new Array(we),sn=W?m:g,ke=ae?m:g;for(j=0;j<en.length;j++)tn[j]=Math.round(C.c2p(en[j])-D);for(j=0;j<Qt.length;j++)dn[j]=Math.round(E.c2p(Qt[j])-I);for(j=0;j<we;j++)Mn[j]=sn(j,tn);for(V=0;V<De;V++)for(at=ie[(ht=ke(V,dn)).bin0],Ft=ie[ht.bin1],j=0;j<we;j++,Et+=4)u(Bt,Et,Ue=kt(at,Ft,Mn[j],ht))}else for(V=0;V<ne;V++)for(Re=ie[V],Xe=je(V),j=0;j<we;j++)Ue=bt(Re[j],1),u(Bt,Et=4*(Xe*we+Ie(j)),Ue);var Se=ye.createImageData(we,De);try{Se.data.set(Bt)}catch(Gr){var Ce=Se.data,Ve=Ce.length;for(V=0;V<Ve;V++)Ce[V]=Bt[V]}ye.putImageData(Se,0,0)}else{var Ge=Math.floor(X/2),Qe=Math.floor(K/2);for(V=0;V<ne;V++)if(Re=ie[V],Xe.reverse(),Xe[He]=je(V+1),Xe[0]!==Xe[1]&&void 0!==Xe[0]&&void 0!==Xe[1])for(Oe=[Pe=Ie(0),Pe],j=0;j<le;j++)Oe.reverse(),Oe[lt]=Ie(j+1),Oe[0]!==Oe[1]&&void 0!==Oe[0]&&void 0!==Oe[1]&&(Ue=bt(Re[j],(Oe[1]-Oe[0])*(Xe[1]-Xe[0])),ye.fillStyle="rgba("+Ue.join(",")+")",ye.fillRect(Oe[0]+Ge,Xe[0]+Qe,Oe[1]-Oe[0]-X,Xe[1]-Xe[0]-K))}et=Math.round(et/$e),nt=Math.round(nt/$e),ct=Math.round(ct/$e);var ot=x("rgb("+et+","+nt+","+ct+")");w._hmpixcount=(w._hmpixcount||0)+$e,w._hmlumcount=(w._hmlumcount||0)+$e*ot.getLuminance();var it=Y.selectAll("image").data(L);it.enter().append("svg:image").attr({xmlns:s.svg,preserveAspectRatio:"none"}),it.attr({height:De,width:we,x:D,y:I,"xlink:href":Le.toDataURL("image/png")}),f(Y);var mt=re.texttemplate;if(mt){var xt=v(re),Vt={type:"linear",range:[xt.min,xt.max],_separators:C._separators,_numFormat:C._numFormat},$t="histogram2dcontour"===re.type,pt="contour"===re.type,At=pt?ne-1:ne,Xt=pt?1:0,Ct=pt?le-1:le,Pt=[];for(j=pt?1:0;j<At;j++){var Be;if(pt)Be=ee.y[j];else if($t){if(0===j||j===ne-1)continue;Be=ee.y[j]}else if(ee.yCenter)Be=ee.yCenter[j];else{if(j+1===ne&&void 0===ee.y[j+1])continue;Be=(ee.y[j]+ee.y[j+1])/2}var tt=Math.round(E.c2p(Be));if(!(0>tt||tt>E._length))for(V=Xt;V<Ct;V++){var dt;if(pt)dt=ee.x[V];else if($t){if(0===V||V===le-1)continue;dt=ee.x[V]}else if(ee.xCenter)dt=ee.xCenter[V];else{if(V+1===le&&void 0===ee.x[V+1])continue;dt=(ee.x[V]+ee.x[V+1])/2}var Dt=Math.round(C.c2p(dt));if(!(0>Dt||Dt>C._length)){var Nt=l({x:dt,y:Be},re,w._fullLayout);Nt.x=dt,Nt.y=Be;var Yt=ee.z[j][V];void 0===Yt?(Nt.z="",Nt.zLabel=""):(Nt.z=Yt,Nt.zLabel=e.tickText(Vt,Yt,"hover").text);var fn=ee.text&&ee.text[j]&&ee.text[j][V];void 0!==fn&&!1!==fn||(fn=""),Nt.text=fn;var nn=o.texttemplateString(mt,Nt,w._fullLayout._d3locale,Nt,re._meta||{});if(nn){var In=nn.split("<br>"),Dn=In.length,kn=0;for(Z=0;Z<Dn;Z++)kn=Math.max(kn,In[Z].length);Pt.push({l:Dn,c:kn,t:nn,x:Dt,y:tt,z:Yt})}}}}var rn=re.textfont,pn=rn.family,gn=rn.size,Pn=w._fullLayout.font.size;if(!gn||"auto"===gn){var jn=1/0,Kn=1/0,rr=0,lr=0;for(Z=0;Z<Pt.length;Z++){var kr=Pt[Z];if(rr=Math.max(rr,kr.l),lr=Math.max(lr,kr.c),Z<Pt.length-1){var Xr=Pt[Z+1],sr=Math.abs(Xr.x-kr.x),oi=Math.abs(Xr.y-kr.y);sr&&(jn=Math.min(jn,sr)),oi&&(Kn=Math.min(Kn,oi))}}isFinite(jn)&&isFinite(Kn)?(jn-=X,Kn-=K,jn/=lr,Kn/=rr,jn/=d/2,Kn/=d,gn=Math.min(Math.floor(jn),Math.floor(Kn),Pn)):gn=Pn}if(gn<=0||!isFinite(gn))return;p(Y).data(Pt).enter().append("g").classed("heatmap-label",1).append("text").attr("text-anchor","middle").each(function(Gr){var Mi,Lr=y.select(this),Jr=rn.color;Jr&&"auto"!==Jr||(Jr=i.contrast("rgba("+Me(Gr.z).join()+")")),Lr.attr("data-notex",1).call(a.positionText,(Mi=Gr,Mi.x),function(Mi){return Mi.y-gn*(Mi.l*d/2-1)}(Gr)).call(_.font,pn,gn,Jr).text(Gr.t).call(a.convertToTspans,w)})}})}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"../../constants/alignment":471,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../scatter/format_labels":936,"@plotly/d3":58,tinycolor2:312}],805:[function(b,oe,se){"use strict";var y=b("@plotly/d3");oe.exports=function(x){y.select(x).selectAll(".hm image").style("opacity",function(M){return M.trace.opacity})}},{"@plotly/d3":58}],806:[function(b,oe,se){"use strict";oe.exports=function(y,x,M){!1===M("zsmooth")&&(M("xgap"),M("ygap")),M("zhoverformat")}},{}],807:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../lib"),M=b("../../registry");function _(e,o){var a=o(e);return"scaled"===(a?o(e+"type","array"):"scaled")&&(o(e+"0"),o("d"+e)),a}oe.exports=function(e,o,a,l,i,v){var h,s,d=a("z");if(i=i||"x",v=v||"y",void 0===d||!d.length)return 0;if(x.isArray1D(e.z)){h=a(i),s=a(v);var p=x.minRowLength(h),f=x.minRowLength(s);if(0===p||0===f)return 0;o._length=Math.min(p,f,d.length)}else{if(h=_(i,a),s=_(v,a),!function(g){for(var m,u=!0,w=!1,c=!1,A=0;A<g.length;A++){if(!x.isArrayOrTypedArray(m=g[A])){u=!1;break}m.length>0&&(w=!0);for(var k=0;k<m.length;k++)if(y(m[k])){c=!0;break}}return u&&w&&c}(d))return 0;a("transpose"),o._length=null}return"heatmapgl"===e.type||M.getComponentMethod("calendars","handleTraceDefaults")(e,o,[i,v],l),!0}},{"../../lib":503,"../../registry":638,"fast-isnumeric":190}],808:[function(b,oe,se){"use strict";for(var y=b("../heatmap/attributes"),x=b("../../components/colorscale/attributes"),M=b("../../lib/extend").extendFlat,_=b("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],o={},a=0;a<e.length;a++){var l=e[a];o[l]=y[l]}o.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},M(o,x("",{cLetter:"z",autoColorDflt:!1})),oe.exports=_(o,"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../heatmap/attributes":792}],809:[function(b,oe,se){"use strict";var y=b("../../../stackgl_modules").gl_heatmap2d,x=b("../../plots/cartesian/axes"),M=b("../../lib/str2rgbarray");function _(o,a){this.scene=o,this.uid=a,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=y(o.glplot,this.options),this.heatmap._trace=this}var e=_.prototype;e.handlePick=function(o){var a=this.options,l=a.shape,i=o.pointId,v=i%l[0],h=Math.floor(i/l[0]);return{trace:this,dataCoord:o.dataCoord,traceCoord:[a.x[v],a.y[h],a.z[i]],textLabel:this.textLabels[i],name:this.name,pointIndex:[h,v],hoverinfo:this.hoverinfo}},e.update=function(o,a){var l=a[0];this.index=o.index,this.name=o.name,this.hoverinfo=o.hoverinfo;var i=l.z;this.options.z=[].concat.apply([],i),this.options.shape=[i[0].length,i.length],this.options.x=l.x,this.options.y=l.y,this.options.zsmooth=o.zsmooth;var s=function(m){for(var u=m.colorscale,w=m.zmin,c=m.zmax,A=u.length,k=new Array(A),C=new Array(4*A),E=0;E<A;E++){var L=u[E],D=M(L[1]);k[E]=w+L[0]*(c-w);for(var N=0;N<4;N++)C[4*E+N]=D[N]}return{colorLevels:k,colorValues:C}}(o);this.options.colorLevels=s.colorLevels,this.options.colorValues=s.colorValues,this.textLabels=[].concat.apply([],o.text),this.heatmap.update(this.options);var d,p,f=this.scene.xaxis,g=this.scene.yaxis;!1===o.zsmooth&&(d={ppad:l.x[1]-l.x[0]},p={ppad:l.y[1]-l.y[0]}),o._extremes[f._id]=x.findExtremes(f,l.x,d),o._extremes[g._id]=x.findExtremes(g,l.y,p)},e.dispose=function(){this.heatmap.dispose()},oe.exports=function(o,a,l){var i=new _(o,a.uid);return i.update(a,l),i}},{"../../../stackgl_modules":1124,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554}],810:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../heatmap/xyz_defaults"),M=b("../../components/colorscale/defaults"),_=b("./attributes");oe.exports=function(e,o,a,l){function i(v,h){return y.coerce(e,o,_,v,h)}x(e,o,i,l)?(i("text"),i("zsmooth"),M(e,o,l,i,{prefix:"",cLetter:"z"})):o.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/xyz_defaults":807,"./attributes":808}],811:[function(b,oe,se){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../heatmap/colorbar"),calc:b("../heatmap/calc"),plot:b("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:b("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":596,"../heatmap/calc":793,"../heatmap/colorbar":795,"./attributes":808,"./convert":809,"./defaults":810}],812:[function(b,oe,se){"use strict";var y=b("../bar/attributes"),x=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=b("../../plots/template_attributes").hovertemplateAttrs,_=b("../../plots/template_attributes").texttemplateAttrs,e=b("../../plots/font_attributes"),o=b("./bin_attributes"),a=b("./constants"),l=b("../../lib/extend").extendFlat;oe.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:x("x"),yhoverformat:x("y"),text:l({},y.text,{}),hovertext:l({},y.hovertext,{}),orientation:y.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:o("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:o("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:M({},{keys:a.eventDataKeys}),texttemplate:_({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:l({},y.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:y.insidetextanchor,textangle:y.textangle,cliponaxis:y.cliponaxis,constraintext:y.constraintext,marker:y.marker,offsetgroup:y.offsetgroup,alignmentgroup:y.alignmentgroup,selected:y.selected,unselected:y.unselected,_deprecated:{bardir:y._deprecated.bardir}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../bar/attributes":648,"./bin_attributes":814,"./constants":818}],813:[function(b,oe,se){"use strict";oe.exports=function(y,x){for(var M=y.length,_=0,e=0;e<M;e++)x[e]?(y[e]/=x[e],_+=y[e]):y[e]=null;return _}},{}],814:[function(b,oe,se){"use strict";oe.exports=function(y,x){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],815:[function(b,oe,se){"use strict";var y=b("fast-isnumeric");oe.exports={count:function(x,M,_){return _[x]++,1},sum:function(x,M,_,e){var o=e[M];return y(o)?(o=Number(o),_[x]+=o,o):0},avg:function(x,M,_,e,o){var a=e[M];return y(a)&&(a=Number(a),_[x]+=a,o[x]++),0},min:function(x,M,_,e){var o=e[M];if(y(o)){if(o=Number(o),!y(_[x]))return _[x]=o,o;if(_[x]>o){var a=o-_[x];return _[x]=o,a}}return 0},max:function(x,M,_,e){var o=e[M];if(y(o)){if(o=Number(o),!y(_[x]))return _[x]=o,o;if(_[x]<o){var a=o-_[x];return _[x]=o,a}}return 0}}},{"fast-isnumeric":190}],816:[function(b,oe,se){"use strict";var y=b("../../constants/numerical"),x=y.ONEAVGYEAR,M=y.ONEAVGMONTH,_=y.ONEDAY,e=y.ONEHOUR,o=y.ONEMIN,a=y.ONESEC,l=b("../../plots/cartesian/axes").tickIncrement;function i(d,p,f,g){if(d*p<=0)return 1/0;for(var m=Math.abs(p-d),u="date"===f.type,w=v(m,u),c=0;c<10;c++){var A=v(80*w,u);if(w===A||!h(A,d,p,u,f,g))break;w=A}return w}function v(d,p){return p&&d>a?d>_?d>1.1*x?x:d>1.1*M?M:_:d>e?e:d>o?o:a:Math.pow(10,Math.floor(Math.log(d)/Math.LN10))}function h(d,p,f,g,m,u){if(g&&d>_){var w=s(p,m,u),c=s(f,m,u),A=d===x?0:1;return w[A]!==c[A]}return Math.floor(f/d)-Math.floor(p/d)>.1}function s(d,p,f){var g=p.c2d(d,x,f).split("-");return""===g[0]&&(g.unshift(),g[0]="-"+g[0]),g}oe.exports=function(d,p,f,g,m){var u,w,c=-1.1*p,A=-.1*p,k=d-A,C=f[0],E=f[1],L=Math.min(i(C+A,C+k,g,m),i(E+A,E+k,g,m)),D=Math.min(i(C+c,C+A,g,m),i(E+c,E+A,g,m));if(L>D&&D<Math.abs(E-C)/4e3?(u=L,w=!1):(u=Math.min(L,D),w=!0),"date"===g.type&&u>_){var N=u===x?1:6,F=u===x?"M12":"M1";return function(I,P){var j=g.c2d(I,x,m),V=j.indexOf("-",N);V>0&&(j=j.substr(0,V));var Z=g.d2c(j,0,m);if(Z<I){var Y=l(Z,F,!1,m);(Z+Y)/2<I+d&&(Z=Y)}return P&&w?l(Z,F,!0,m):Z}}return function(I,P){var j=u*Math.round(I/u);return j+u/10<I&&j+.9*u<I+d&&(j+=u),P&&w&&(j-=u),j}}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554}],817:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../lib"),M=b("../../registry"),_=b("../../plots/cartesian/axes"),e=b("../bar/arrays_to_calcdata"),o=b("./bin_functions"),a=b("./norm_functions"),l=b("./average"),i=b("./bin_label_vals");function v(h,s,d,p,f){var g,m,u,w,c,A,k,C=p+"bins",E=h._fullLayout,D=E._histogramBinOpts[s["_"+p+"bingroup"]],N="overlay"===E.barmode,F=function(me){return d.r2c(me,0,w)},I=function(me){return d.c2r(me,0,w)},P="date"===d.type?function(me){return me||0===me?x.cleanDate(me,null,w):null}:function(me){return y(me)?Number(me):null};function j(me,we,De){we[me+"Found"]?(we[me]=P(we[me]),null===we[me]&&(we[me]=De[me])):(A[me]=we[me]=De[me],x.nestedProperty(m[0],C+"."+me).set(De[me]))}if(s["_"+p+"autoBinFinished"])delete s["_"+p+"autoBinFinished"];else{m=D.traces;var V=[],Z=!0,Y=!1,ee=!1;for(g=0;g<m.length;g++)if((u=m[g]).visible){var re=D.dirs[g];c=u["_"+re+"pos0"]=d.makeCalcdata(u,re),V=x.concat(V,c),delete u["_"+p+"autoBinFinished"],!0===s.visible&&(Z?Z=!1:(delete u._autoBin,u["_"+p+"autoBinFinished"]=1),M.traceIs(u,"2dMap")&&(Y=!0),"histogram2dcontour"===u.type&&(ee=!0))}var X=_.autoBin(V,d,D.nbins,Y,w=m[0][p+"calendar"],D.sizeFound&&D.size),K=m[0]._autoBin={};if(A=K[D.dirs[0]]={},ee&&(D.size||(X.start=I(_.tickIncrement(F(X.start),X.size,!0,w))),void 0===D.end&&(X.end=I(_.tickIncrement(F(X.end),X.size,!1,w)))),N&&!M.traceIs(s,"2dMap")&&0===X._dataSpan&&"category"!==d.type&&"multicategory"!==d.type){if(f)return[X,c,!0];X=function(me,we,De,Le,Ie){var je,ye,Me,Oe=me._fullLayout,Pe=function(kt,Bt){for(var Et=Bt.xaxis,ht=Bt.yaxis,at=Bt.orientation,Ft=[],en=kt._fullData,Qt=0;Qt<en.length;Qt++){var tn=en[Qt];"histogram"===tn.type&&!0===tn.visible&&tn.orientation===at&&tn.xaxis===Et&&tn.yaxis===ht&&Ft.push(tn)}return Ft}(me,we),Re=!1,Ue=1/0,qe=[we];for(je=0;je<Pe.length;je++)if((ye=Pe[je])===we)Re=!0;else if(Re){var Xe=v(me,ye,De,Le,!0),lt=Xe[0],He=Xe[2];ye["_"+Le+"autoBinFinished"]=1,ye["_"+Le+"pos0"]=Xe[1],He?qe.push(ye):Ue=Math.min(Ue,lt.size)}else Me=Oe._histogramBinOpts[ye["_"+Le+"bingroup"]],Ue=Math.min(Ue,Me.size||ye[Ie].size);var $e=new Array(qe.length);for(je=0;je<qe.length;je++)for(var et=qe[je]["_"+Le+"pos0"],nt=0;nt<et.length;nt++)if(void 0!==et[nt]){$e[je]=et[nt];break}for(isFinite(Ue)||(Ue=x.distinctVals($e).minDiff),je=0;je<qe.length;je++){var ct=(ye=qe[je])[Le+"calendar"],bt={start:De.c2r($e[je]-Ue/2,0,ct),end:De.c2r($e[je]+Ue/2,0,ct),size:Ue};ye._input[Ie]=ye[Ie]=bt,(Me=Oe._histogramBinOpts[ye["_"+Le+"bingroup"]])&&x.extendFlat(Me,bt)}return we[Ie]}(h,s,d,p,C)}(k=u.cumulative||{}).enabled&&"include"!==k.currentbin&&("decreasing"===k.direction?X.start=I(_.tickIncrement(F(X.start),X.size,!0,w)):X.end=I(_.tickIncrement(F(X.end),X.size,!1,w))),D.size=X.size,D.sizeFound||(A.size=X.size,x.nestedProperty(m[0],C+".size").set(X.size)),j("start",D,X),j("end",D,X)}c=s["_"+p+"pos0"],delete s["_"+p+"pos0"];var ie=s._input[C]||{},q=x.extendFlat({},D),U=D.start,W=d.r2l(ie.start),ae=void 0!==W;if((D.startFound||ae)&&W!==d.r2l(U)){var G=ae?W:x.aggNums(Math.min,null,c),te={type:"category"===d.type||"multicategory"===d.type?"linear":d.type,r2l:d.r2l,dtick:D.size,tick0:U,calendar:w,range:[G,_.tickIncrement(G,D.size,!1,w)].map(d.l2r)},ne=_.tickFirst(te);ne>d.r2l(G)&&(ne=_.tickIncrement(ne,D.size,!0,w)),q.start=d.l2r(ne),ae||x.nestedProperty(s,C+".start").set(q.start)}var le=D.end,ue=d.r2l(ie.end),pe=void 0!==ue;if((D.endFound||pe)&&ue!==d.r2l(le)){var de=pe?ue:x.aggNums(Math.max,null,c);q.end=d.l2r(de),pe||x.nestedProperty(s,C+".start").set(q.end)}var _e="autobin"+p;return!1===s._input[_e]&&(s._input[C]=x.extendFlat({},s[C]||{}),delete s._input[_e],delete s[_e]),[q,c]}oe.exports={calc:function(h,s){var d,p,f,g,m=[],u=[],w="h"===s.orientation,c=_.getFromId(h,w?s.yaxis:s.xaxis),A=w?"y":"x",k={x:"y",y:"x"}[A],C=s[A+"calendar"],E=s.cumulative,L=v(h,s,c,A),D=L[0],N=L[1],F="string"==typeof D.size,I=[],P=F?I:D,j=[],V=[],Z=[],Y=0,ee=s.histnorm,re=s.histfunc,X=-1!==ee.indexOf("density");E.enabled&&X&&(ee=ee.replace(/ ?density$/,""),X=!1);var K,ie="max"===re||"min"===re?null:0,q=o.count,U=a[ee],W=!1,ae=function(ye){return c.r2c(ye,0,C)};for(x.isArrayOrTypedArray(s[k])&&"count"!==re&&(K=s[k],W="avg"===re,q=o[re]),d=ae(D.start),f=ae(D.end)+(d-_.tickIncrement(d,D.size,!1,C))/1e6;d<f&&m.length<1e6&&(p=_.tickIncrement(d,D.size,!1,C),m.push((d+p)/2),u.push(ie),Z.push([]),I.push(d),X&&j.push(1/(p-d)),W&&V.push(0),!(p<=d));)d=p;I.push(d),F||"date"!==c.type||(P={start:ae(P.start),end:ae(P.end),size:P.size}),h._fullLayout._roundFnOpts||(h._fullLayout._roundFnOpts={});var G=s["_"+A+"bingroup"],te={leftGap:1/0,rightGap:1/0};G&&(h._fullLayout._roundFnOpts[G]||(h._fullLayout._roundFnOpts[G]=te),te=h._fullLayout._roundFnOpts[G]);var ne,le=u.length,ue=!0,pe=te.leftGap,de=te.rightGap,_e={};for(d=0;d<N.length;d++){var me=N[d];(g=x.findBin(me,P))>=0&&g<le&&(Y+=q(g,d,u,K,V),ue&&Z[g].length&&me!==N[Z[g][0]]&&(ue=!1),Z[g].push(d),_e[d]=g,pe=Math.min(pe,me-I[g]),de=Math.min(de,I[g+1]-me))}te.leftGap=pe,te.rightGap=de,ue||(ne=function(ye,Me){return function(){var Oe=h._fullLayout._roundFnOpts[G];return i(Oe.leftGap,Oe.rightGap,I,c,C)(ye,Me)}}),W&&(Y=l(u,V)),U&&U(u,Y,j),E.enabled&&function(ye,Me,Oe){var Pe,Re,Ue;function qe(lt){Ue=ye[lt],ye[lt]/=2}function Xe(lt){ye[lt]=Ue+(Re=ye[lt])/2,Ue+=Re}if("half"===Oe)if("increasing"===Me)for(qe(0),Pe=1;Pe<ye.length;Pe++)Xe(Pe);else for(qe(ye.length-1),Pe=ye.length-2;Pe>=0;Pe--)Xe(Pe);else if("increasing"===Me){for(Pe=1;Pe<ye.length;Pe++)ye[Pe]+=ye[Pe-1];"exclude"===Oe&&(ye.unshift(0),ye.pop())}else{for(Pe=ye.length-2;Pe>=0;Pe--)ye[Pe]+=ye[Pe+1];"exclude"===Oe&&(ye.push(0),ye.shift())}}(u,E.direction,E.currentbin);var we=Math.min(m.length,u.length),De=[],Le=0,Ie=we-1;for(d=0;d<we;d++)if(u[d]){Le=d;break}for(d=we-1;d>=Le;d--)if(u[d]){Ie=d;break}for(d=Le;d<=Ie;d++)if(y(m[d])&&y(u[d])){var je={p:m[d],s:u[d],b:0};E.enabled||(je.pts=Z[d],ue?je.ph0=je.ph1=Z[d].length?N[Z[d][0]]:m[d]:(s._computePh=!0,je.ph0=ne(I[d]),je.ph1=ne(I[d+1],!0))),De.push(je)}return 1===De.length&&(De[0].width1=_.tickIncrement(De[0].p,D.size,!1,C)-De[0].p),e(De,s),x.isArrayOrTypedArray(s.selectedpoints)&&x.tagSelected(De,s,_e),De},calcAllAutoBins:v}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"../bar/arrays_to_calcdata":647,"./average":813,"./bin_functions":815,"./bin_label_vals":816,"./norm_functions":824,"fast-isnumeric":190}],818:[function(b,oe,se){"use strict";oe.exports={eventDataKeys:["binNumber"]}},{}],819:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plots/cartesian/axis_ids"),M=b("../../registry").traceIs,_=b("../bar/defaults").handleGroupingDefaults,e=y.nestedProperty,o=b("../../plots/cartesian/constraints").getAxisGroup,a=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],l=["x","y"];oe.exports=function(i,v){var h,s,d,p,f,g,m,u=v._histogramBinOpts={},w=[],c={},A=[];function k(X,K){return y.coerce(h._input,h,h._module.attributes,X,K)}function C(X){return"v"===X.orientation?"x":"y"}function E(X,K,ie){var q=X.uid+"__"+ie;K||(K=q);var U=x.getFromTrace({_fullLayout:v},X,ie).type,W=X[ie+"calendar"]||"",ae=u[K],G=!0;ae&&(U===ae.axType&&W===ae.calendar?(G=!1,ae.traces.push(X),ae.dirs.push(ie)):(K=q,U!==ae.axType&&y.warn(["Attempted to group the bins of trace",X.index,"set on a","type:"+U,"axis","with bins on","type:"+ae.axType,"axis."].join(" ")),W!==ae.calendar&&y.warn(["Attempted to group the bins of trace",X.index,"set with a",W,"calendar","with bins",ae.calendar?"on a "+ae.calendar+" calendar":"w/o a set calendar"].join(" ")))),G&&(u[K]={traces:[X],dirs:[ie],axType:U,calendar:X[ie+"calendar"]||""}),X["_"+ie+"bingroup"]=K}for(f=0;f<i.length;f++)M(h=i[f],"histogram")&&(w.push(h),delete h._xautoBinFinished,delete h._yautoBinFinished,M(h,"2dMap")||_(h._input,h,v,k));var L=v._alignmentOpts||{};for(f=0;f<w.length;f++){if(d="",!M(h=w[f],"2dMap")){if(p=C(h),"group"===v.barmode&&h.alignmentgroup){var N=o(v,h[p+"axis"])+h.orientation;(L[N]||{})[h.alignmentgroup]&&(d=N)}d||"overlay"===v.barmode||(d=o(v,h.xaxis)+o(v,h.yaxis)+C(h))}d?(c[d]||(c[d]=[]),c[d].push(h)):A.push(h)}for(d in c)if(1!==(s=c[d]).length){var F=!1;for(s.length&&(h=s[0],F=k("bingroup")),d=F||d,f=0;f<s.length;f++){var I=(h=s[f])._input.bingroup;I&&I!==d&&y.warn(["Trace",h.index,"must match","within bingroup",d+".","Ignoring its bingroup:",I,"setting."].join(" ")),h.bingroup=d,E(h,d,C(h))}}else A.push(s[0]);for(f=0;f<A.length;f++){h=A[f];var P=k("bingroup");if(M(h,"2dMap"))for(m=0;m<2;m++){var j=k((p=l[m])+"bingroup",P?P+"__"+p:null);E(h,j,p)}else E(h,P,C(h))}for(d in u){var V=u[d];for(s=V.traces,g=0;g<a.length;g++){var Z,Y,ee=a[g],re=ee.name;if("nbins"!==re||!V.sizeFound){for(f=0;f<s.length;f++){if(void 0!==e((h=s[f])._input,Z=ee.aStr[p=V.dirs[f]]).get()){V[re]=k(Z),V[re+"Found"]=!0;break}(Y=(h._autoBin||{})[p]||{})[re]&&e(h,Z).set(Y[re])}if("start"===re||"end"===re)for(;f<s.length;f++)(h=s[f])["_"+p+"bingroup"]&&k(Z,(Y=(h._autoBin||{})[p]||{})[re]);"nbins"!==re||V.sizeFound||V.nbinsFound||(h=s[0],V[re]=k(Z))}}}}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/cartesian/constraints":562,"../../registry":638,"../bar/defaults":652}],820:[function(b,oe,se){"use strict";var y=b("../../registry"),x=b("../../lib"),M=b("../../components/color"),_=b("../bar/defaults").handleText,e=b("../bar/style_defaults"),o=b("./attributes");oe.exports=function(a,l,i,v){function h(A,k){return x.coerce(a,l,o,A,k)}var s=h("x"),d=h("y");h("cumulative.enabled")&&(h("cumulative.direction"),h("cumulative.currentbin")),h("text");var p=h("textposition");_(a,l,v,h,p,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),h("hovertext"),h("hovertemplate"),h("xhoverformat"),h("yhoverformat");var f=h("orientation",d&&!s?"h":"v"),g="v"===f?"x":"y",m="v"===f?"y":"x",u=s&&d?Math.min(x.minRowLength(s)&&x.minRowLength(d)):x.minRowLength(l[g]||[]);if(u){l._length=u,y.getComponentMethod("calendars","handleTraceDefaults")(a,l,["x","y"],v),l[m]&&h("histfunc"),h("histnorm"),h("autobin"+g),e(a,l,h,i,v),x.coerceSelectionMarkerOpacity(l,h);var w=(l.marker.line||{}).color,c=y.getComponentMethod("errorbars","supplyDefaults");c(a,l,w||M.defaultLine,{axis:"y"}),c(a,l,w||M.defaultLine,{axis:"x",inherit:"y"})}else l.visible=!1}},{"../../components/color":366,"../../lib":503,"../../registry":638,"../bar/defaults":652,"../bar/style_defaults":663,"./attributes":812}],821:[function(b,oe,se){"use strict";oe.exports=function(y,x,M,_,e){if(y.x="xVal"in x?x.xVal:x.x,y.y="yVal"in x?x.yVal:x.y,"zLabelVal"in x&&(y.z=x.zLabelVal),x.xa&&(y.xaxis=x.xa),x.ya&&(y.yaxis=x.ya),!(M.cumulative||{}).enabled){var o,a=Array.isArray(e)?_[0].pts[e[0]][e[1]]:_[e].pts;if(y.pointNumbers=a,y.binNumber=y.pointNumber,delete y.pointNumber,delete y.pointIndex,M._indexToPoints){o=[];for(var l=0;l<a.length;l++)o=o.concat(M._indexToPoints[a[l]])}else o=a;y.pointIndices=o}return y}},{}],822:[function(b,oe,se){"use strict";var y=b("../bar/hover").hoverPoints,x=b("../../plots/cartesian/axes").hoverLabelText;oe.exports=function(M,_,e,o,a){var l=y(M,_,e,o,a);if(l){var i=(M=l[0]).cd[M.index],v=M.cd[0].trace;if(!v.cumulative.enabled){var h="h"===v.orientation?"y":"x";M[h+"Label"]=x(M[h+"a"],[i.ph0,i.ph1],v[h+"hoverformat"])}return l}}},{"../../plots/cartesian/axes":554,"../bar/hover":655}],823:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),layoutAttributes:b("../bar/layout_attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),supplyLayoutDefaults:b("../bar/layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("../bar/cross_trace_calc").crossTraceCalc,plot:b("../bar/plot").plot,layerName:"barlayer",style:b("../bar/style").style,styleOnSelect:b("../bar/style").styleOnSelect,colorbar:b("../scatter/marker_colorbar"),hoverPoints:b("./hover"),selectPoints:b("../bar/select"),eventData:b("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:b("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../bar/cross_trace_calc":651,"../bar/layout_attributes":657,"../bar/layout_defaults":658,"../bar/plot":659,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":945,"./attributes":812,"./calc":817,"./cross_trace_defaults":819,"./defaults":820,"./event_data":821,"./hover":822}],824:[function(b,oe,se){"use strict";oe.exports={percent:function(y,x){for(var M=y.length,_=100/x,e=0;e<M;e++)y[e]*=_},probability:function(y,x){for(var M=y.length,_=0;_<M;_++)y[_]/=x},density:function(y,x,M,_){var e=y.length;_=_||1;for(var o=0;o<e;o++)y[o]*=M[o]*_},"probability density":function(y,x,M,_){var e=y.length;_&&(x/=_);for(var o=0;o<e;o++)y[o]*=M[o]/x}}},{}],825:[function(b,oe,se){"use strict";var y=b("../histogram/attributes"),x=b("../histogram/bin_attributes"),M=b("../heatmap/attributes"),_=b("../../plots/attributes"),e=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,o=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../plots/template_attributes").texttemplateAttrs,l=b("../../components/colorscale/attributes"),i=b("../../lib/extend").extendFlat;oe.exports=i({x:y.x,y:y.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:y.histnorm,histfunc:y.histfunc,nbinsx:y.nbinsx,xbins:x("x"),nbinsy:y.nbinsy,ybins:x("y"),autobinx:y.autobinx,autobiny:y.autobiny,bingroup:i({},y.bingroup,{}),xbingroup:i({},y.bingroup,{}),ybingroup:i({},y.bingroup,{}),xgap:M.xgap,ygap:M.ygap,zsmooth:M.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:o({},{keys:"z"}),texttemplate:a({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:M.textfont,showlegend:i({},_.showlegend,{dflt:!1})},l("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../heatmap/attributes":792,"../histogram/attributes":812,"../histogram/bin_attributes":814}],826:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plots/cartesian/axes"),M=b("../histogram/bin_functions"),_=b("../histogram/norm_functions"),e=b("../histogram/average"),o=b("../histogram/bin_label_vals"),a=b("../histogram/calc").calcAllAutoBins;function l(h,s,d,p){var f,g=new Array(h);if(p)for(f=0;f<h;f++)g[f]=1/(s[f+1]-s[f]);else{var m=1/d;for(f=0;f<h;f++)g[f]=m}return g}function i(h,s){return{start:h(s.start),end:h(s.end),size:s.size}}function v(h,s,d,p,f,g){var m,u=h.length-1,w=new Array(u),c=o(d,p,h,f,g);for(m=0;m<u;m++){var A=(s||[])[m];w[m]=void 0===A?[c(h[m]),c(h[m+1],!0)]:[A,A]}return w}oe.exports=function(h,s){var d,p,f,g,m=x.getFromId(h,s.xaxis),u=x.getFromId(h,s.yaxis),w=s.xcalendar,c=s.ycalendar,A=function(ht){return m.r2c(ht,0,w)},k=function(ht){return u.r2c(ht,0,c)},C=a(h,s,m,"x"),E=C[0],L=C[1],D=a(h,s,u,"y"),N=D[0],F=D[1],I=s._length;L.length>I&&L.splice(I,L.length-I),F.length>I&&F.splice(I,F.length-I);var P=[],j=[],V=[],Z="string"==typeof E.size,Y="string"==typeof N.size,ee=[],re=[],X=Z?ee:E,K=Y?re:N,ie=0,q=[],U=[],W=s.histnorm,ae=s.histfunc,G=-1!==W.indexOf("density"),te="max"===ae||"min"===ae?null:0,ne=M.count,le=_[W],ue=!1,pe=[],de=[],_e="z"in s?s.z:"marker"in s&&Array.isArray(s.marker.color)?s.marker.color:"";_e&&"count"!==ae&&(ue="avg"===ae,ne=M[ae]);var me=E.size,we=A(E.start),De=A(E.end)+(we-x.tickIncrement(we,me,!1,w))/1e6;for(d=we;d<De;d=x.tickIncrement(d,me,!1,w))j.push(te),ee.push(d),ue&&V.push(0);ee.push(d);var Ie=j.length,je=(d-we)/Ie,ye=m.c2r(we+je/2,0,w),Me=N.size,Oe=k(N.start),Pe=k(N.end)+(Oe-x.tickIncrement(Oe,Me,!1,c))/1e6;for(d=Oe;d<Pe;d=x.tickIncrement(d,Me,!1,c)){P.push(j.slice()),re.push(d);var Re=new Array(Ie);for(p=0;p<Ie;p++)Re[p]=[];U.push(Re),ue&&q.push(V.slice())}re.push(d);var Ue=P.length,qe=(d-Oe)/Ue,Xe=u.c2r(Oe+qe/2,0,c);G&&(pe=l(j.length,X,je,Z),de=l(P.length,K,qe,Y)),Z||"date"!==m.type||(X=i(A,X)),Y||"date"!==u.type||(K=i(k,K));var lt=!0,He=!0,$e=new Array(Ie),et=new Array(Ue),nt=1/0,ct=1/0,bt=1/0,kt=1/0;for(d=0;d<I;d++){var Bt=L[d],Et=F[d];f=y.findBin(Bt,X),g=y.findBin(Et,K),f>=0&&f<Ie&&g>=0&&g<Ue&&(ie+=ne(f,d,P[g],_e,q[g]),U[g][f].push(d),lt&&(void 0===$e[f]?$e[f]=Bt:$e[f]!==Bt&&(lt=!1)),He&&(void 0===et[g]?et[g]=Et:et[g]!==Et&&(He=!1)),nt=Math.min(nt,Bt-ee[f]),ct=Math.min(ct,ee[f+1]-Bt),bt=Math.min(bt,Et-re[g]),kt=Math.min(kt,re[g+1]-Et))}if(ue)for(g=0;g<Ue;g++)ie+=e(P[g],q[g]);if(le)for(g=0;g<Ue;g++)le(P[g],ie,pe,de[g]);return{x:L,xRanges:v(ee,lt&&$e,nt,ct,m,w),x0:ye,dx:je,y:F,yRanges:v(re,He&&et,bt,kt,u,c),y0:Xe,dy:qe,z:P,pts:U}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../histogram/average":813,"../histogram/bin_functions":815,"../histogram/bin_label_vals":816,"../histogram/calc":817,"../histogram/norm_functions":824}],827:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./sample_defaults"),M=b("../heatmap/style_defaults"),_=b("../../components/colorscale/defaults"),e=b("../heatmap/label_defaults"),o=b("./attributes");oe.exports=function(a,l,i,v){function h(s,d){return y.coerce(a,l,o,s,d)}x(a,l,h,v),!1!==l.visible&&(M(a,l,h,v),_(a,l,v,h,{prefix:"",cLetter:"z"}),h("hovertemplate"),e(h,v),h("xhoverformat"),h("yhoverformat"))}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/style_defaults":806,"./attributes":825,"./sample_defaults":830}],828:[function(b,oe,se){"use strict";var y=b("../heatmap/hover"),x=b("../../plots/cartesian/axes").hoverLabelText;oe.exports=function(M,_,e,o,a){var l=y(M,_,e,o,a);if(l){var i=(M=l[0]).index,s=M.cd[0],d=s.trace,p=s.xRanges[i[1]],f=s.yRanges[i[0]];return M.xLabel=x(M.xa,[p[0],p[1]],d.xhoverformat),M.yLabel=x(M.ya,[f[0],f[1]],d.yhoverformat),l}}},{"../../plots/cartesian/axes":554,"../heatmap/hover":799}],829:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../histogram/cross_trace_defaults"),calc:b("../heatmap/calc"),plot:b("../heatmap/plot"),layerName:"heatmaplayer",colorbar:b("../heatmap/colorbar"),style:b("../heatmap/style"),hoverPoints:b("./hover"),eventData:b("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../heatmap/calc":793,"../heatmap/colorbar":795,"../heatmap/plot":804,"../heatmap/style":805,"../histogram/cross_trace_defaults":819,"../histogram/event_data":821,"./attributes":825,"./defaults":827,"./hover":828}],830:[function(b,oe,se){"use strict";var y=b("../../registry"),x=b("../../lib");oe.exports=function(M,_,e,o){var a=e("x"),l=e("y"),i=x.minRowLength(a),v=x.minRowLength(l);i&&v?(_._length=Math.min(i,v),y.getComponentMethod("calendars","handleTraceDefaults")(M,_,["x","y"],o),(e("z")||e("marker.color"))&&e("histfunc"),e("histnorm"),e("autobinx"),e("autobiny")):_.visible=!1}},{"../../lib":503,"../../registry":638}],831:[function(b,oe,se){"use strict";var y=b("../histogram2d/attributes"),x=b("../contour/attributes"),M=b("../../components/colorscale/attributes"),_=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=b("../../lib/extend").extendFlat;oe.exports=e({x:y.x,y:y.y,z:y.z,marker:y.marker,histnorm:y.histnorm,histfunc:y.histfunc,nbinsx:y.nbinsx,xbins:y.xbins,nbinsy:y.nbinsy,ybins:y.ybins,autobinx:y.autobinx,autobiny:y.autobiny,bingroup:y.bingroup,xbingroup:y.xbingroup,ybingroup:y.ybingroup,autocontour:x.autocontour,ncontours:x.ncontours,contours:x.contours,line:{color:x.line.color,width:e({},x.line.width,{dflt:.5}),dash:x.line.dash,smoothing:x.line.smoothing,editType:"plot"},xhoverformat:_("x"),yhoverformat:_("y"),zhoverformat:_("z",1),hovertemplate:y.hovertemplate,texttemplate:x.texttemplate,textfont:x.textfont},M("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../contour/attributes":735,"../histogram2d/attributes":825}],832:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../histogram2d/sample_defaults"),M=b("../contour/contours_defaults"),_=b("../contour/style_defaults"),e=b("../heatmap/label_defaults"),o=b("./attributes");oe.exports=function(a,l,i,v){function h(s,d){return y.coerce(a,l,o,s,d)}x(a,l,h,v),!1!==l.visible&&(M(a,l,h,function(s){return y.coerce2(a,l,o,s)}),_(a,l,h,v),h("xhoverformat"),h("yhoverformat"),h("hovertemplate"),l.contours&&"heatmap"===l.contours.coloring&&e(h,v))}},{"../../lib":503,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/label_defaults":802,"../histogram2d/sample_defaults":830,"./attributes":831}],833:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../histogram/cross_trace_defaults"),calc:b("../contour/calc"),plot:b("../contour/plot").plot,layerName:"contourlayer",style:b("../contour/style"),colorbar:b("../contour/colorbar"),hoverPoints:b("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../contour/calc":736,"../contour/colorbar":738,"../contour/hover":748,"../contour/plot":753,"../contour/style":755,"../histogram/cross_trace_defaults":819,"./attributes":831,"./defaults":832}],834:[function(b,oe,se){"use strict";var y=b("../../plots/template_attributes").hovertemplateAttrs,x=b("../../plots/template_attributes").texttemplateAttrs,M=b("../../components/colorscale/attributes"),_=b("../../plots/domain").attributes,e=b("../pie/attributes"),o=b("../sunburst/attributes"),a=b("../treemap/attributes"),l=b("../treemap/constants"),i=b("../../lib/extend").extendFlat;oe.exports={labels:o.labels,parents:o.parents,values:o.values,branchvalues:o.branchvalues,count:o.count,level:o.level,maxdepth:o.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:a.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:i({colors:o.marker.colors,line:o.marker.line,editType:"calc"},M("marker",{colorAttr:"colors",anim:!1})),leaf:o.leaf,pathbar:a.pathbar,text:e.text,textinfo:o.textinfo,texttemplate:x({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:o.hoverinfo,hovertemplate:y({},{keys:l.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:a.outsidetextfont,textposition:a.textposition,sort:e.sort,root:o.root,domain:_({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"../sunburst/attributes":1049,"../treemap/attributes":1075,"../treemap/constants":1078}],835:[function(b,oe,se){"use strict";var y=b("../../plots/plots");se.name="icicle",se.plot=function(x,M,_,e){y.plotBasePlot(se.name,x,M,_,e)},se.clean=function(x,M,_,e){y.cleanBasePlot(se.name,x,M,_,e)}},{"../../plots/plots":619}],836:[function(b,oe,se){"use strict";var y=b("../sunburst/calc");se.calc=function(x,M){return y.calc(x,M)},se.crossTraceCalc=function(x){return y._runCrossTraceCalc("icicle",x)}},{"../sunburst/calc":1051}],837:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./attributes"),M=b("../../components/color"),_=b("../../plots/domain").defaults,e=b("../bar/defaults").handleText,o=b("../bar/constants").TEXTPAD,a=b("../../components/colorscale"),l=a.hasColorscale,i=a.handleDefaults;oe.exports=function(v,h,s,d){function p(A,k){return y.coerce(v,h,x,A,k)}var f=p("labels"),g=p("parents");if(f&&f.length&&g&&g.length){var m=p("values");p(m&&m.length?"branchvalues":"count"),p("level"),p("maxdepth"),p("tiling.orientation"),p("tiling.flip"),p("tiling.pad");var u=p("text");p("texttemplate"),h.texttemplate||p("textinfo",Array.isArray(u)?"text+label":"label"),p("hovertext"),p("hovertemplate");var w=p("pathbar.visible");e(v,h,d,p,"auto",{hasPathbar:w,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition"),p("marker.line.width")&&p("marker.line.color",d.paper_bgcolor),p("marker.colors");var c=h._hasColorscale=l(v,"marker","colors")||(v.marker||{}).coloraxis;c&&i(v,h,d,p,{prefix:"marker.",cLetter:"c"}),p("leaf.opacity",c?1:.7),h._hovered={marker:{line:{width:2,color:M.contrast(d.paper_bgcolor)}}},w&&(p("pathbar.thickness",h.pathbar.textfont.size+2*o),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),_(h,d,p),h._length=null}else h.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":834}],838:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../lib"),M=b("../../components/drawing"),_=b("../../lib/svg_text_utils"),e=b("./partition"),o=b("./style").styleOne,a=b("../treemap/constants"),l=b("../sunburst/helpers"),i=b("../sunburst/fx"),v=b("../sunburst/plot").formatSliceLabel;oe.exports=function(h,s,d,p,f){var g=f.width,m=f.height,u=f.viewX,w=f.viewY,c=f.pathSlice,A=f.toMoveInsideSlice,k=f.strTransform,C=f.hasTransition,E=f.handleSlicesExit,L=f.makeUpdateSliceInterpolator,D=f.makeUpdateTextInterpolator,N=f.prevEntry,F=h._fullLayout,I=s[0].trace,P=-1!==I.textposition.indexOf("left"),j=-1!==I.textposition.indexOf("right"),V=-1!==I.textposition.indexOf("bottom"),Z=e(d,[g,m],{flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1,orientation:I.tiling.orientation,pad:{inner:I.tiling.pad},maxDepth:I._maxDepth}).descendants(),Y=1/0,ee=-1/0;Z.forEach(function(q){var U=q.depth;U>=I._maxDepth?(q.x0=q.x1=(q.x0+q.x1)/2,q.y0=q.y1=(q.y0+q.y1)/2):(Y=Math.min(Y,U),ee=Math.max(ee,U))}),p=p.data(Z,l.getPtId),I._maxVisibleLayers=isFinite(ee)?ee-Y+1:0,p.enter().append("g").classed("slice",!0),E(p,!1,{},[g,m],c),p.order();var re=null;if(C&&N){var X=l.getPtId(N);p.each(function(q){null===re&&l.getPtId(q)===X&&(re={x0:q.x0,x1:q.x1,y0:q.y0,y1:q.y1})})}var K=function(){return re||{x0:0,x1:g,y0:0,y1:m}},ie=p;return C&&(ie=ie.transition().each("end",function(){var q=y.select(this);l.setSliceCursor(q,h,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),ie.each(function(q){q._x0=u(q.x0),q._x1=u(q.x1),q._y0=w(q.y0),q._y1=w(q.y1),q._hoverX=u(q.x1-I.tiling.pad),q._hoverY=w(V?q.y1-I.tiling.pad/2:q.y0+I.tiling.pad/2);var U=y.select(this),W=x.ensureSingle(U,"path","surface",function(ne){ne.style("pointer-events","all")});C?W.transition().attrTween("d",function(ne){var le=L(ne,!1,K(),[g,m],{orientation:I.tiling.orientation,flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1});return function(ue){return c(le(ue))}}):W.attr("d",c),U.call(i,d,h,s,{styleOne:o,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,h,{isTransitioning:h._transitioning}),W.call(o,q,I,{hovered:!1}),q._text=q.x0===q.x1||q.y0===q.y1?"":v(q,d,I,s,F)||"";var ae=x.ensureSingle(U,"g","slicetext"),G=x.ensureSingle(ae,"text","",function(ne){ne.attr("data-notex",1)}),te=x.ensureUniformFontSize(h,l.determineTextFont(I,q,F.font));G.text(q._text||" ").classed("slicetext",!0).attr("text-anchor",j?"end":P?"start":"middle").call(M.font,te).call(_.convertToTspans,h),q.textBB=M.bBox(G.node()),q.transform=A(q,{fontSize:te.size}),q.transform.fontSize=te.size,C?G.transition().attrTween("transform",function(ne){var le=D(ne,!1,K(),[g,m]);return function(ue){return k(le(ue))}}):G.attr("transform",k(q))}),re}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"../sunburst/plot":1059,"../treemap/constants":1078,"./partition":842,"./style":844,"@plotly/d3":58}],839:[function(b,oe,se){"use strict";oe.exports={moduleType:"trace",name:"icicle",basePlotModule:b("./base_plot"),categories:[],animatable:!0,attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style").style,colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":834,"./base_plot":835,"./calc":836,"./defaults":837,"./layout_attributes":840,"./layout_defaults":841,"./plot":843,"./style":844}],840:[function(b,oe,se){"use strict";oe.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],841:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./layout_attributes");oe.exports=function(M,_){function e(o,a){return y.coerce(M,_,x,o,a)}e("iciclecolorway",_.colorway),e("extendiciclecolors")}},{"../../lib":503,"./layout_attributes":840}],842:[function(b,oe,se){"use strict";var y=b("d3-hierarchy"),x=b("../treemap/flip_tree");oe.exports=function(M,_,e){var o=e.flipX,a=e.flipY,l="h"===e.orientation,i=e.maxDepth,v=_[0],h=_[1];i&&(v=(M.height+1)*_[0]/Math.min(M.height+1,i),h=(M.height+1)*_[1]/Math.min(M.height+1,i));var s=y.partition().padding(e.pad.inner).size(l?[_[1],v]:[_[0],h])(M);return(l||o||a)&&x(s,_,{swapXY:l,flipX:o,flipY:a}),s}},{"../treemap/flip_tree":1083,"d3-hierarchy":115}],843:[function(b,oe,se){"use strict";var y=b("../treemap/draw"),x=b("./draw_descendants");oe.exports=function(M,_,e,o){return y(M,_,e,o,{type:"icicle",drawDescendants:x})}},{"../treemap/draw":1080,"./draw_descendants":838}],844:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../components/color"),M=b("../../lib"),_=b("../bar/uniform_text").resizeText;function e(o,a,l){var i=a.data.data,v=!a.children,h=i.i,s=M.castOption(l,h,"marker.line.color")||x.defaultLine,d=M.castOption(l,h,"marker.line.width")||0;o.style("stroke-width",d).call(x.fill,i.color).call(x.stroke,s).style("opacity",v?l.leaf.opacity:null)}oe.exports={style:function(o){var a=o._fullLayout._iciclelayer.selectAll(".trace");_(o,a,"icicle"),a.each(function(l){var i=y.select(this),v=l[0].trace;i.style("opacity",v.opacity),i.selectAll("path.surface").each(function(h){y.select(this).call(e,h,v)})})},styleOne:e}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],845:[function(b,oe,se){"use strict";for(var y=b("../../plots/attributes"),x=b("../../plots/template_attributes").hovertemplateAttrs,M=b("../../lib/extend").extendFlat,_=b("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],o=[],a=[],l=0;l<e.length;l++){var i=_[e[l]];o.push("For the `"+e[l]+"` colormodel, it is ["+(i.zminDflt||i.min).join(", ")+"]."),a.push("For the `"+e[l]+"` colormodel, it is ["+(i.zmaxDflt||i.max).join(", ")+"].")}oe.exports=M({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:M({},y.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:x({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"./constants":847}],846:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./constants"),M=b("fast-isnumeric"),_=b("../../plots/cartesian/axes"),e=b("../../lib").maxRowLength,o=b("./helpers").getImageSize;function a(i,v,h,s){return function(d){return y.constrain((d-i)*v,h,s)}}function l(i,v){return function(h){return y.constrain(h,i,v)}}oe.exports=function(i,v){var h,s;if(v._hasZ)h=v.z.length,s=e(v.z);else if(v._hasSource){var d=o(v.source);h=d.height,s=d.width}var p,f=_.getFromId(i,v.xaxis||"x"),g=_.getFromId(i,v.yaxis||"y"),m=f.d2c(v.x0)-v.dx/2,u=g.d2c(v.y0)-v.dy/2,w=[m,m+s*v.dx],c=[u,u+h*v.dy];if(f&&"log"===f.type)for(p=0;p<s;p++)w.push(m+p*v.dx);if(g&&"log"===g.type)for(p=0;p<h;p++)c.push(u+p*v.dy);return v._extremes[f._id]=_.findExtremes(f,w),v._extremes[g._id]=_.findExtremes(g,c),v._scaler=function(A){var k=x.colormodel[A.colormodel],C=(k.colormodel||A.colormodel).length;A._sArray=[];for(var E=0;E<C;E++)A._sArray.push(k.min[E]!==A.zmin[E]||k.max[E]!==A.zmax[E]?a(A.zmin[E],(k.max[E]-k.min[E])/(A.zmax[E]-A.zmin[E]),k.min[E],k.max[E]):l(k.min[E],k.max[E]));return function(L){for(var D=L.slice(0,C),N=0;N<C;N++){var F=D[N];if(!M(F))return!1;D[N]=A._sArray[N](F)}return D}}(v),[{x0:m,y0:u,z:v.z,w:s,h}]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":847,"./helpers":850,"fast-isnumeric":190}],847:[function(b,oe,se){"use strict";oe.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(y){return y.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(y){return y.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(y){return y.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(y){var x=y.slice(0,3);return x[1]=x[1]+"%",x[2]=x[2]+"%",x},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(y){var x=y.slice(0,4);return x[1]=x[1]+"%",x[2]=x[2]+"%",x},suffix:["\xb0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],848:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./attributes"),M=b("./constants"),_=b("../../snapshot/helpers").IMAGE_URL_PREFIX;oe.exports=function(e,o){function a(v,h){return y.coerce(e,o,x,v,h)}a("source"),o.source&&!o.source.match(_)&&delete o.source,o._hasSource=!!o.source;var l,i=a("z");o._hasZ=!(void 0===i||!i.length||!i[0]||!i[0].length),o._hasZ||o._hasSource?(a("x0"),a("y0"),a("dx"),a("dy"),o._hasZ?(a("colormodel","rgb"),a("zmin",(l=M.colormodel[o.colormodel]).zminDflt||l.min),a("zmax",l.zmaxDflt||l.max)):o._hasSource&&(o.colormodel="rgba256",o.zmin=(l=M.colormodel[o.colormodel]).zminDflt,o.zmax=l.zmaxDflt),a("zsmooth"),a("text"),a("hovertext"),a("hovertemplate"),o._length=null):o.visible=!1}},{"../../lib":503,"../../snapshot/helpers":642,"./attributes":845,"./constants":847}],849:[function(b,oe,se){"use strict";oe.exports=function(y,x){return"xVal"in x&&(y.x=x.xVal),"yVal"in x&&(y.y=x.yVal),x.xa&&(y.xaxis=x.xa),x.ya&&(y.yaxis=x.ya),y.color=x.color,y.colormodel=x.trace.colormodel,y.z||(y.z=x.color),y}},{}],850:[function(b,oe,se){"use strict";var y=b("probe-image-size/sync"),x=b("../../snapshot/helpers").IMAGE_URL_PREFIX,M=b("buffer/").Buffer;se.getImageSize=function(_){var e=_.replace(x,""),o=new M(e,"base64");return y(o)}},{"../../snapshot/helpers":642,"buffer/":85,"probe-image-size/sync":276}],851:[function(b,oe,se){"use strict";var y=b("../../components/fx"),x=b("../../lib"),M=b("./constants");oe.exports=function(_,e,o){var a=_.cd[0],l=a.trace,i=_.xa,v=_.ya;if(!(y.inbox(e-a.x0,e-(a.x0+a.w*l.dx),0)>0||y.inbox(o-a.y0,o-(a.y0+a.h*l.dy),0)>0)){var h,s=Math.floor((e-a.x0)/l.dx),d=Math.floor(Math.abs(o-a.y0)/l.dy);if(l._hasZ?h=a.z[d][s]:l._hasSource&&(h=l._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(s,d,1,1).data),h){var p,f=a.hi||l.hoverinfo;if(f){var g=f.split("+");-1!==g.indexOf("all")&&(g=["color"]),-1!==g.indexOf("color")&&(p=!0)}var m,u=M.colormodel[l.colormodel],w=u.colormodel||l.colormodel,c=w.length,A=l._scaler(h),k=u.suffix,C=[];(l.hovertemplate||p)&&(C.push("["+[A[0]+k[0],A[1]+k[1],A[2]+k[2]].join(", ")),4===c&&C.push(", "+A[3]+k[3]),C.push("]"),C=C.join(""),_.extraText=w.toUpperCase()+": "+C),Array.isArray(l.hovertext)&&Array.isArray(l.hovertext[d])?m=l.hovertext[d][s]:Array.isArray(l.text)&&Array.isArray(l.text[d])&&(m=l.text[d][s]);var E=v.c2p(a.y0+(d+.5)*l.dy),L=a.x0+(s+.5)*l.dx,D=a.y0+(d+.5)*l.dy,N="["+h.slice(0,l.colormodel.length).join(", ")+"]";return[x.extendFlat(_,{index:[d,s],x0:i.c2p(a.x0+s*l.dx),x1:i.c2p(a.x0+(s+1)*l.dx),y0:E,y1:E,color:A,xVal:L,xLabelVal:L,yVal:D,yLabelVal:D,zLabelVal:N,text:m,hovertemplateLabels:{zLabel:N,colorLabel:C,"color[0]Label":A[0]+k[0],"color[1]Label":A[1]+k[1],"color[2]Label":A[2]+k[2],"color[3]Label":A[3]+k[3]}})]}}}},{"../../components/fx":406,"../../lib":503,"./constants":847}],852:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),style:b("./style"),hoverPoints:b("./hover"),eventData:b("./event_data"),moduleType:"trace",name:"image",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":568,"./attributes":845,"./calc":846,"./defaults":848,"./event_data":849,"./hover":851,"./plot":853,"./style":854}],853:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../lib"),M=x.strTranslate,_=b("../../constants/xmlns_namespaces"),e=b("./constants"),o=x.isIOS()||x.isSafari()||x.isIE();oe.exports=function(a,l,i,v){var h=l.xaxis,s=l.yaxis,d=!(o||a._context._exportedPlot);x.makeTraceGroups(v,i,"im").each(function(p){var f=y.select(this),g=p[0],m=g.trace,u=("fast"===m.zsmooth||!1===m.zsmooth&&d)&&!m._hasZ&&m._hasSource&&"linear"===h.type&&"linear"===s.type;m._realImage=u;var w,c,A,k,C,E,L=g.z,D=g.x0,N=g.y0,F=g.w,I=g.h,P=m.dx,j=m.dy;for(E=0;void 0===w&&E<F;)w=h.c2p(D+E*P),E++;for(E=F;void 0===c&&E>0;)c=h.c2p(D+E*P),E--;for(E=0;void 0===k&&E<I;)k=s.c2p(N+E*j),E++;for(E=I;void 0===C&&E>0;)C=s.c2p(N+E*j),E--;c<w&&(A=c,c=w,w=A),C<k&&(A=k,k=C,C=A),!u&&(w=Math.max(-.5*h._length,w),c=Math.min(1.5*h._length,c),k=Math.max(-.5*s._length,k),C=Math.min(1.5*s._length,C));var V=Math.round(c-w),Z=Math.round(C-k);if(V<=0||Z<=0)f.selectAll("image").data([]).exit().remove();else{var Y=f.selectAll("image").data([p]);Y.enter().append("svg:image").attr({xmlns:_.svg,preserveAspectRatio:"none"}),Y.exit().remove();var ee=!1===m.zsmooth?e.pixelatedStyle:"";if(u){var re=x.simpleMap(h.range,h.r2l),X=x.simpleMap(s.range,s.r2l),K=re[1]<re[0],ie=X[1]>X[0];if(K||ie){var q=w+V/2,U=k+Z/2;ee+="transform:"+M(q+"px",U+"px")+"scale("+(K?-1:1)+","+(ie?-1:1)+")"+M(-q+"px",-U+"px")+";"}}Y.attr("style",ee);var W=new Promise(function(G){if(m._hasZ)G();else if(m._hasSource)if(m._canvas&&m._canvas.el.width===F&&m._canvas.el.height===I&&m._canvas.source===m.source)G();else{var te=document.createElement("canvas");te.width=F,te.height=I;var ne=te.getContext("2d",{willReadFrequently:!0});m._image=m._image||new Image;var le=m._image;le.onload=function(){ne.drawImage(le,0,0),m._canvas={el:te,source:m.source},G()},le.setAttribute("src",m.source)}}).then(function(){var G;if(m._hasZ)G=ae(function(ne,le){return L[le][ne]}).toDataURL("image/png");else if(m._hasSource)if(u)G=m.source;else{var te=m._canvas.el.getContext("2d",{willReadFrequently:!0}).getImageData(0,0,F,I).data;G=ae(function(ne,le){var ue=4*(le*F+ne);return[te[ue],te[ue+1],te[ue+2],te[ue+3]]}).toDataURL("image/png")}Y.attr({"xlink:href":G,height:Z,width:V,x:w,y:k})});a._promises.push(W)}function ae(G){var te=document.createElement("canvas");te.width=V,te.height=Z;var ne,le=te.getContext("2d",{willReadFrequently:!0}),ue=function(ye){return x.constrain(Math.round(h.c2p(D+ye*P)-w),0,V)},pe=function(ye){return x.constrain(Math.round(s.c2p(N+ye*j)-k),0,Z)},de=e.colormodel[m.colormodel],_e=de.colormodel||m.colormodel,me=de.fmt;for(E=0;E<g.w;E++){var we=ue(E),De=ue(E+1);if(De!==we&&!isNaN(De)&&!isNaN(we))for(var Le=0;Le<g.h;Le++){var Ie=pe(Le),je=pe(Le+1);je===Ie||isNaN(je)||isNaN(Ie)||!G(E,Le)||(ne=m._scaler(G(E,Le)),le.fillStyle=ne?_e+"("+me(ne).join(",")+")":"rgba(0,0,0,0)",le.fillRect(we,Ie,De-we,je-Ie))}}return te}})}},{"../../constants/xmlns_namespaces":480,"../../lib":503,"./constants":847,"@plotly/d3":58}],854:[function(b,oe,se){"use strict";var y=b("@plotly/d3");oe.exports=function(x){y.select(x).selectAll(".im image").style("opacity",function(M){return M[0].trace.opacity})}},{"@plotly/d3":58}],855:[function(b,oe,se){"use strict";var y=b("../../lib/extend").extendFlat,x=b("../../lib/extend").extendDeep,M=b("../../plot_api/edit_types").overrideAll,_=b("../../plots/font_attributes"),e=b("../../components/color/attributes"),o=b("../../plots/domain").attributes,a=b("../../plots/cartesian/layout_attributes"),l=b("../../plot_api/plot_template").templatedArray,i=b("../../constants/delta.js"),v=b("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,h=_({editType:"plot",colorEditType:"plot"}),s={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},d={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},p=l("step",x({},s,{range:d}));oe.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:o({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:y({},h,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:v("value")},font:y({},h,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:v("value")},increasing:{symbol:{valType:"string",dflt:i.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:i.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:y({},h,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:x({},s,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:M({range:d,visible:y({},a.visible,{dflt:!0}),tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:y({},a.ticks,{dflt:"outside"}),ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,ticklabelstep:a.ticklabelstep,showticklabels:a.showticklabels,tickfont:_({}),tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,tickprefix:a.tickprefix,showtickprefix:a.showtickprefix,ticksuffix:a.ticksuffix,showticksuffix:a.showticksuffix,separatethousands:a.separatethousands,exponentformat:a.exponentformat,minexponent:a.minexponent,showexponent:a.showexponent,editType:"plot"},"plot"),steps:p,threshold:{line:{color:y({},s.line.color,{}),width:y({},s.line.width,{dflt:1}),editType:"plot"},thickness:y({},s.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":365,"../../constants/delta.js":473,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],856:[function(b,oe,se){"use strict";var y=b("../../plots/plots");se.name="indicator",se.plot=function(x,M,_,e){y.plotBasePlot(se.name,x,M,_,e)},se.clean=function(x,M,_,e){y.cleanBasePlot(se.name,x,M,_,e)}},{"../../plots/plots":619}],857:[function(b,oe,se){"use strict";oe.exports={calc:function(y,x){var M=[],_=x.value;"number"!=typeof x._lastValue&&(x._lastValue=x.value);var e=x._lastValue,o=e;return x._hasDelta&&"number"==typeof x.delta.reference&&(o=x.delta.reference),M[0]={y:_,lastY:e,delta:_-o,relativeDelta:(_-o)/o},M}}},{}],858:[function(b,oe,se){"use strict";oe.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],859:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./attributes"),M=b("../../plots/domain").defaults,_=b("../../plot_api/plot_template"),e=b("../../plots/array_container_defaults"),o=b("./constants.js"),a=b("../../plots/cartesian/tick_value_defaults"),l=b("../../plots/cartesian/tick_mark_defaults"),i=b("../../plots/cartesian/tick_label_defaults"),v=b("../../plots/cartesian/prefix_suffix_defaults");function h(s,d){function p(f,g){return y.coerce(s,d,x.gauge.steps,f,g)}p("color"),p("line.color"),p("line.width"),p("range"),p("thickness")}oe.exports={supplyDefaults:function(s,d,p,f){function g(F,I){return y.coerce(s,d,x,F,I)}M(d,f,g),g("mode"),d._hasNumber=-1!==d.mode.indexOf("number"),d._hasDelta=-1!==d.mode.indexOf("delta"),d._hasGauge=-1!==d.mode.indexOf("gauge");var m=g("value");d._range=[0,"number"==typeof m?1.5*m:1];var u,w,c,A,k,C,E=new Array(2);function L(F,I){return y.coerce(c,A,x.gauge,F,I)}function D(F,I){return y.coerce(k,C,x.gauge.axis,F,I)}if(d._hasNumber&&(g("number.valueformat"),g("number.font.color",f.font.color),g("number.font.family",f.font.family),g("number.font.size"),void 0===d.number.font.size&&(d.number.font.size=o.defaultNumberFontSize,E[0]=!0),g("number.prefix"),g("number.suffix"),u=d.number.font.size),d._hasDelta&&(g("delta.font.color",f.font.color),g("delta.font.family",f.font.family),g("delta.font.size"),void 0===d.delta.font.size&&(d.delta.font.size=(d._hasNumber?.5:1)*(u||o.defaultNumberFontSize),E[1]=!0),g("delta.reference",d.value),g("delta.relative"),g("delta.valueformat",d.delta.relative?"2%":""),g("delta.increasing.symbol"),g("delta.increasing.color"),g("delta.decreasing.symbol"),g("delta.decreasing.color"),g("delta.position"),w=d.delta.font.size),d._scaleNumbers=(!d._hasNumber||E[0])&&(!d._hasDelta||E[1])||!1,g("title.font.color",f.font.color),g("title.font.family",f.font.family),g("title.font.size",.25*(u||w||o.defaultNumberFontSize)),g("title.text"),d._hasGauge){(c=s.gauge)||(c={}),A=_.newContainer(d,"gauge"),L("shape"),(d._isBullet="bullet"===d.gauge.shape)||g("title.align","center"),(d._isAngular="angular"===d.gauge.shape)||g("align","center"),L("bgcolor",f.paper_bgcolor),L("borderwidth"),L("bordercolor"),L("bar.color"),L("bar.line.color"),L("bar.line.width"),L("bar.thickness",o.valueThickness*("bullet"===d.gauge.shape?.5:1)),e(c,A,{name:"steps",handleItemDefaults:h}),L("threshold.value"),L("threshold.thickness"),L("threshold.line.width"),L("threshold.line.color"),k={},c&&(k=c.axis||{}),C=_.newContainer(A,"axis"),D("visible"),d._range=D("range",d._range);var N={outerTicks:!0};a(k,C,D,"linear"),v(k,C,D,"linear",N),i(k,C,D,"linear",N),l(k,C,D,N)}else g("title.align","center"),g("align","center"),d._isAngular=d._isBullet=!1;d._length=null}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"../../plots/domain":584,"./attributes":855,"./constants.js":858}],860:[function(b,oe,se){"use strict";oe.exports={moduleType:"trace",name:"indicator",basePlotModule:b("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,calc:b("./calc").calc,plot:b("./plot"),meta:{}}},{"./attributes":855,"./base_plot":856,"./calc":857,"./defaults":859,"./plot":861}],861:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("d3-interpolate").interpolate,M=b("d3-interpolate").interpolateNumber,_=b("../../lib"),e=_.strScale,o=_.strTranslate,a=_.rad2deg,l=b("../../constants/alignment").MID_SHIFT,i=b("../../components/drawing"),v=b("./constants"),h=b("../../lib/svg_text_utils"),s=b("../../plots/cartesian/axes"),d=b("../../plots/cartesian/axis_defaults"),p=b("../../plots/cartesian/position_defaults"),f=b("../../plots/cartesian/layout_attributes"),g=b("../../components/color"),m={left:"start",center:"middle",right:"end"},u={left:0,center:.5,right:1},w=/[yzafpn\xb5mkMGTPEZY]/;function c(D){return D&&D.duration>0}function A(D){D.each(function(N){g.stroke(y.select(this),N.line.color)}).each(function(N){g.fill(y.select(this),N.color)}).style("stroke-width",function(N){return N.line.width})}function k(D,N,F){var I=D._fullLayout,P=_.extendFlat({type:"linear",ticks:"outside",range:F,showline:!0},N),j={type:"linear",_id:"x"+N._id},V={letter:"x",font:I.font,noHover:!0,noTickson:!0};function Z(Y,ee){return _.coerce(P,j,f,Y,ee)}return d(P,j,Z,V,I),p(P,j,Z,V),j}function C(D,N,F){return[Math.min(N/D.width,F/D.height),D,N+"x"+F]}function E(D,N,F,I){var P=document.createElementNS("http://www.w3.org/2000/svg","text"),j=y.select(P);return j.text(D).attr("x",0).attr("y",0).attr("text-anchor",F).attr("data-unformatted",D).call(h.convertToTspans,I).call(i.font,N),i.bBox(j.node())}function L(D,N,F,I,P,j){var V="_cache"+N;D[V]&&D[V].key===P||(D[V]={key:P,value:F});var Z=_.aggNums(j,null,[D[V].value,I],2);return D[V].value=Z,Z}oe.exports=function(D,N,F,I){var P,j=D._fullLayout;c(F)&&I&&(P=I()),_.makeTraceGroups(j._indicatorlayer,N,"trace").each(function(V){var Z,Y,ee,re,X,K=V[0].trace,ie=y.select(this),q=K._hasGauge,U=K._isAngular,W=K._isBullet,ae=K.domain,G={w:j._size.w*(ae.x[1]-ae.x[0]),h:j._size.h*(ae.y[1]-ae.y[0]),l:j._size.l+j._size.w*ae.x[0],r:j._size.r+j._size.w*(1-ae.x[1]),t:j._size.t+j._size.h*(1-ae.y[1]),b:j._size.b+j._size.h*ae.y[0]},te=G.l+G.w/2,ne=G.t+G.h/2,le=Math.min(G.w/2,G.h),ue=v.innerRadius*le,pe=K.align||"center";if(Y=ne,q){if(U&&(Z=te,Y=ne+le/2,ee=function(je){return ye=je,[(Me=.9*ue)/Math.sqrt(ye.width/2*(ye.width/2)+ye.height*ye.height),ye,Me];var ye,Me}),W){var de=v.bulletPadding,_e=1-v.bulletNumberDomainSize+de;Z=G.l+(_e+(1-_e)*u[pe])*G.w,ee=function(je){return C(je,(v.bulletNumberDomainSize-de)*G.w,G.h)}}}else Z=G.l+u[pe]*G.w,ee=function(je){return C(je,G.w,G.h)};(function(je,ye,Me,Oe){var Pe,Re,Ue,qe=Me[0].trace,Xe=Oe.numbersX,lt=Oe.numbersY,He=qe.align||"center",$e=m[He],et=Oe.transitionOpts,nt=Oe.onComplete,ct=_.ensureSingle(ye,"g","numbers"),bt=[];qe._hasNumber&&bt.push("number"),qe._hasDelta&&(bt.push("delta"),"left"===qe.delta.position&&bt.reverse());var kt=ct.selectAll("text").data(bt);function Bt(dn,Mn,sn,ke){if(!dn.match("s")||sn>=0==ke>=0||Mn(sn).slice(-1).match(w)||Mn(ke).slice(-1).match(w))return Mn;var Se=dn.slice().replace("s","f").replace(/\d+/,function(Ve){return parseInt(Ve)-1}),Ce=k(je,{tickformat:Se});return function(Ve){return Math.abs(Ve)<1?s.tickText(Ce,Ve).text:Mn(Ve)}}kt.enter().append("text"),kt.attr("text-anchor",function(){return $e}).attr("class",function(dn){return dn}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),kt.exit().remove();var Et,ht=qe.mode+qe.align;if(qe._hasDelta&&(Et=function(){var dn=k(je,{tickformat:qe.delta.valueformat},qe._range);dn.setScale(),s.prepTicks(dn);var Mn=function(Ge){return s.tickText(dn,Ge).text},sn=function(Ge){return qe.delta.relative?Ge.relativeDelta:Ge.delta},ke=function(Ge,Qe){return 0===Ge||"number"!=typeof Ge||isNaN(Ge)?"-":(Ge>0?qe.delta.increasing.symbol:qe.delta.decreasing.symbol)+Qe(Ge)},Se=function(Ge){return Ge.delta>=0?qe.delta.increasing.color:qe.delta.decreasing.color};void 0===qe._deltaLastValue&&(qe._deltaLastValue=sn(Me[0]));var Ce=ct.select("text.delta");function Ve(){Ce.text(ke(sn(Me[0]),Mn)).call(g.fill,Se(Me[0])).call(h.convertToTspans,je)}return Ce.call(i.font,qe.delta.font).call(g.fill,Se({delta:qe._deltaLastValue})),c(et)?Ce.transition().duration(et.duration).ease(et.easing).tween("text",function(){var Ge=y.select(this),Qe=sn(Me[0]),ot=qe._deltaLastValue,it=Bt(qe.delta.valueformat,Mn,ot,Qe),mt=M(ot,Qe);return qe._deltaLastValue=Qe,function(xt){Ge.text(ke(mt(xt),it)),Ge.call(g.fill,Se({delta:mt(xt)}))}}).each("end",function(){Ve(),nt&&nt()}).each("interrupt",function(){Ve(),nt&&nt()}):Ve(),Re=E(ke(sn(Me[0]),Mn),qe.delta.font,$e,je),Ce}(),ht+=qe.delta.position+qe.delta.font.size+qe.delta.font.family+qe.delta.valueformat,ht+=qe.delta.increasing.symbol+qe.delta.decreasing.symbol,Ue=Re),qe._hasNumber&&(function(){var dn=k(je,{tickformat:qe.number.valueformat},qe._range);dn.setScale(),s.prepTicks(dn);var Mn=function(Ve){return s.tickText(dn,Ve).text},sn=qe.number.suffix,ke=qe.number.prefix,Se=ct.select("text.number");function Ce(){var Ve="number"==typeof Me[0].y?ke+Mn(Me[0].y)+sn:"-";Se.text(Ve).call(i.font,qe.number.font).call(h.convertToTspans,je)}c(et)?Se.transition().duration(et.duration).ease(et.easing).each("end",function(){Ce(),nt&&nt()}).each("interrupt",function(){Ce(),nt&&nt()}).attrTween("text",function(){var Ve=y.select(this),Ge=M(Me[0].lastY,Me[0].y);qe._lastValue=Me[0].y;var Qe=Bt(qe.number.valueformat,Mn,Me[0].lastY,Me[0].y);return function(ot){Ve.text(ke+Qe(Ge(ot))+sn)}}):Ce(),Pe=E(ke+Mn(Me[0].y)+sn,qe.number.font,$e,je)}(),ht+=qe.number.font.size+qe.number.font.family+qe.number.valueformat+qe.number.suffix+qe.number.prefix,Ue=Pe),qe._hasDelta&&qe._hasNumber){var at,Ft,en=[(Pe.left+Pe.right)/2,(Pe.top+Pe.bottom)/2],Qt=[(Re.left+Re.right)/2,(Re.top+Re.bottom)/2],tn=.75*qe.delta.font.size;"left"===qe.delta.position&&(at=L(qe,"deltaPos",0,-1*(Pe.width*u[qe.align]+Re.width*(1-u[qe.align])+tn),ht,Math.min),Ft=en[1]-Qt[1],Ue={width:Pe.width+Re.width+tn,height:Math.max(Pe.height,Re.height),left:Re.left+at,right:Pe.right,top:Math.min(Pe.top,Re.top+Ft),bottom:Math.max(Pe.bottom,Re.bottom+Ft)}),"right"===qe.delta.position&&(at=L(qe,"deltaPos",0,Pe.width*(1-u[qe.align])+Re.width*u[qe.align]+tn,ht,Math.max),Ft=en[1]-Qt[1],Ue={width:Pe.width+Re.width+tn,height:Math.max(Pe.height,Re.height),left:Pe.left,right:Re.right+at,top:Math.min(Pe.top,Re.top+Ft),bottom:Math.max(Pe.bottom,Re.bottom+Ft)}),"bottom"===qe.delta.position&&(at=null,Ft=Re.height,Ue={width:Math.max(Pe.width,Re.width),height:Pe.height+Re.height,left:Math.min(Pe.left,Re.left),right:Math.max(Pe.right,Re.right),top:Pe.bottom-Pe.height,bottom:Pe.bottom+Re.height}),"top"===qe.delta.position&&(at=null,Ft=Pe.top,Ue={width:Math.max(Pe.width,Re.width),height:Pe.height+Re.height,left:Math.min(Pe.left,Re.left),right:Math.max(Pe.right,Re.right),top:Pe.bottom-Pe.height-Re.height,bottom:Pe.bottom}),Et.attr({dx:at,dy:Ft})}(qe._hasNumber||qe._hasDelta)&&ct.attr("transform",function(){var Mn,dn=Oe.numbersScaler(Ue),sn=L(qe,"numbersScale",1,dn[0],ht+=dn[2],Math.min);qe._scaleNumbers||(sn=1),qe._numbersTop=sn*Ue.top+(Mn=qe._isAngular?lt-sn*Ue.bottom:lt-sn*(Ue.top+Ue.bottom)/2);var ke=Ue[He];"center"===He&&(ke=(Ue.left+Ue.right)/2);var Se=Xe-sn*ke;return Se=L(qe,"numbersTranslate",0,Se,ht,Math.max),o(Se,Mn)+e(sn)})})(D,ie,V,{numbersX:Z,numbersY:Y,numbersScaler:ee,transitionOpts:F,onComplete:P}),q&&(re={range:K.gauge.axis.range,color:K.gauge.bgcolor,line:{color:K.gauge.bordercolor,width:0},thickness:1},X={range:K.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:K.gauge.bordercolor,width:K.gauge.borderwidth},thickness:1});var me=ie.selectAll("g.angular").data(U?V:[]);me.exit().remove();var we=ie.selectAll("g.angularaxis").data(U?V:[]);we.exit().remove(),U&&function(je,ye,Me,Oe){var Pe,Re,Ue,qe,Xe=Me[0].trace,lt=Oe.size,He=Oe.radius,$e=Oe.innerRadius,et=Oe.gaugeBg,nt=Oe.gaugeOutline,ct=[lt.l+lt.w/2,lt.t+lt.h/2+He/2],bt=Oe.gauge,kt=Oe.layer,Bt=Oe.transitionOpts,Et=Oe.onComplete,ht=Math.PI/2;function at($t){var pt=Xe.gauge.axis.range[0],At=($t-pt)/(Xe.gauge.axis.range[1]-pt)*Math.PI-ht;return At<-ht?-ht:At>ht?ht:At}function Ft($t){return y.svg.arc().innerRadius(($e+He)/2-$t/2*(He-$e)).outerRadius(($e+He)/2+$t/2*(He-$e)).startAngle(-ht)}function en($t){$t.attr("d",function(pt){return Ft(pt.thickness).startAngle(at(pt.range[0])).endAngle(at(pt.range[1]))()})}bt.enter().append("g").classed("angular",!0),bt.attr("transform",o(ct[0],ct[1])),kt.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),kt.selectAll("g.xangularaxistick,path,text").remove(),(Pe=k(je,Xe.gauge.axis)).type="linear",Pe.range=Xe.gauge.axis.range,Pe._id="xangularaxis",Pe.ticklabeloverflow="allow",Pe.setScale();var Qt=function($t){return(Pe.range[0]-$t.x)/(Pe.range[1]-Pe.range[0])*Math.PI+Math.PI},tn={},dn=s.makeLabelFns(Pe,0).labelStandoff;tn.xFn=function($t){var pt=Qt($t);return Math.cos(pt)*dn},tn.yFn=function($t){var pt=Qt($t),At=Math.sin(pt)>0?.2:1;return-Math.sin(pt)*(dn+$t.fontSize*At)+Math.abs(Math.cos(pt))*($t.fontSize*l)},tn.anchorFn=function($t){var pt=Qt($t),At=Math.cos(pt);return Math.abs(At)<.1?"middle":At>0?"start":"end"},tn.heightFn=function($t,pt,At){var Xt=Qt($t);return-.5*(1+Math.sin(Xt))*At};var Mn=function($t){return o(ct[0]+He*Math.cos($t),ct[1]-He*Math.sin($t))};Ue=function($t){return Mn(Qt($t))},Re=s.calcTicks(Pe),qe=s.getTickSigns(Pe)[2],Pe.visible&&(s.drawTicks(je,Pe,{vals:Re,layer:kt,path:"M"+(qe="inside"===Pe.ticks?-1:1)*((Pe.linewidth||1)/2)+",0h"+qe*Pe.ticklen,transFn:function($t){var pt=Qt($t);return Mn(pt)+"rotate("+-a(pt)+")"}}),s.drawLabels(je,Pe,{vals:Re,layer:kt,transFn:Ue,labelFns:tn}));var ke=[et].concat(Xe.gauge.steps),Se=bt.selectAll("g.bg-arc").data(ke);Se.enter().append("g").classed("bg-arc",!0).append("path"),Se.select("path").call(en).call(A),Se.exit().remove();var Ce=Ft(Xe.gauge.bar.thickness),Ve=bt.selectAll("g.value-arc").data([Xe.gauge.bar]);Ve.enter().append("g").classed("value-arc",!0).append("path");var Qe,ot,it,Ge=Ve.select("path");c(Bt)?(Ge.transition().duration(Bt.duration).ease(Bt.easing).each("end",function(){Et&&Et()}).each("interrupt",function(){Et&&Et()}).attrTween("d",(Qe=Ce,ot=at(Me[0].lastY),it=at(Me[0].y),function(){var $t=x(ot,it);return function(pt){return Qe.endAngle($t(pt))()}})),Xe._lastValue=Me[0].y):Ge.attr("d","number"==typeof Me[0].y?Ce.endAngle(at(Me[0].y)):"M0,0Z"),Ge.call(A),Ve.exit().remove(),ke=[];var mt=Xe.gauge.threshold.value;(mt||0===mt)&&ke.push({range:[mt,mt],color:Xe.gauge.threshold.color,line:{color:Xe.gauge.threshold.line.color,width:Xe.gauge.threshold.line.width},thickness:Xe.gauge.threshold.thickness});var xt=bt.selectAll("g.threshold-arc").data(ke);xt.enter().append("g").classed("threshold-arc",!0).append("path"),xt.select("path").call(en).call(A),xt.exit().remove();var Vt=bt.selectAll("g.gauge-outline").data([nt]);Vt.enter().append("g").classed("gauge-outline",!0).append("path"),Vt.select("path").call(en).call(A),Vt.exit().remove()}(D,0,V,{radius:le,innerRadius:ue,gauge:me,layer:we,size:G,gaugeBg:re,gaugeOutline:X,transitionOpts:F,onComplete:P});var De=ie.selectAll("g.bullet").data(W?V:[]);De.exit().remove();var Le=ie.selectAll("g.bulletaxis").data(W?V:[]);Le.exit().remove(),W&&function(je,ye,Me,Oe){var Pe,Re,Ue,qe,Xe,lt=Me[0].trace,He=Oe.gauge,$e=Oe.layer,et=Oe.gaugeBg,nt=Oe.gaugeOutline,ct=Oe.size,bt=lt.domain,kt=Oe.transitionOpts,Bt=Oe.onComplete;He.enter().append("g").classed("bullet",!0),He.attr("transform",o(ct.l,ct.t)),$e.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),$e.selectAll("g.xbulletaxistick,path,text").remove();var Et=ct.h,ht=lt.gauge.bar.thickness*Et,at=bt.x[0],Ft=bt.x[0]+(bt.x[1]-bt.x[0])*(lt._hasNumber||lt._hasDelta?1-v.bulletNumberDomainSize:1);function en(Se){Se.attr("width",function(Ce){return Math.max(0,Pe.c2p(Ce.range[1])-Pe.c2p(Ce.range[0]))}).attr("x",function(Ce){return Pe.c2p(Ce.range[0])}).attr("y",function(Ce){return.5*(1-Ce.thickness)*Et}).attr("height",function(Ce){return Ce.thickness*Et})}(Pe=k(je,lt.gauge.axis))._id="xbulletaxis",Pe.domain=[at,Ft],Pe.setScale(),Re=s.calcTicks(Pe),Ue=s.makeTransTickFn(Pe),qe=s.getTickSigns(Pe)[2],Xe=ct.t+ct.h,Pe.visible&&(s.drawTicks(je,Pe,{vals:"inside"===Pe.ticks?s.clipEnds(Pe,Re):Re,layer:$e,path:s.makeTickPath(Pe,Xe,qe),transFn:Ue}),s.drawLabels(je,Pe,{vals:Re,layer:$e,transFn:Ue,labelFns:s.makeLabelFns(Pe,Xe)}));var Qt=[et].concat(lt.gauge.steps),tn=He.selectAll("g.bg-bullet").data(Qt);tn.enter().append("g").classed("bg-bullet",!0).append("rect"),tn.select("rect").call(en).call(A),tn.exit().remove();var dn=He.selectAll("g.value-bullet").data([lt.gauge.bar]);dn.enter().append("g").classed("value-bullet",!0).append("rect"),dn.select("rect").attr("height",ht).attr("y",(Et-ht)/2).call(A),c(kt)?dn.select("rect").transition().duration(kt.duration).ease(kt.easing).each("end",function(){Bt&&Bt()}).each("interrupt",function(){Bt&&Bt()}).attr("width",Math.max(0,Pe.c2p(Math.min(lt.gauge.axis.range[1],Me[0].y)))):dn.select("rect").attr("width","number"==typeof Me[0].y?Math.max(0,Pe.c2p(Math.min(lt.gauge.axis.range[1],Me[0].y))):0),dn.exit().remove();var Mn=Me.filter(function(){return lt.gauge.threshold.value||0===lt.gauge.threshold.value}),sn=He.selectAll("g.threshold-bullet").data(Mn);sn.enter().append("g").classed("threshold-bullet",!0).append("line"),sn.select("line").attr("x1",Pe.c2p(lt.gauge.threshold.value)).attr("x2",Pe.c2p(lt.gauge.threshold.value)).attr("y1",(1-lt.gauge.threshold.thickness)/2*Et).attr("y2",(1-(1-lt.gauge.threshold.thickness)/2)*Et).call(g.stroke,lt.gauge.threshold.line.color).style("stroke-width",lt.gauge.threshold.line.width),sn.exit().remove();var ke=He.selectAll("g.gauge-outline").data([nt]);ke.enter().append("g").classed("gauge-outline",!0).append("rect"),ke.select("rect").call(en).call(A),ke.exit().remove()}(D,0,V,{gauge:De,layer:Le,size:G,gaugeBg:re,gaugeOutline:X,transitionOpts:F,onComplete:P});var Ie=ie.selectAll("text.title").data(V);Ie.exit().remove(),Ie.enter().append("text").classed("title",!0),Ie.attr("text-anchor",function(){return W?m.right:m[K.title.align]}).text(K.title.text).call(i.font,K.title.font).call(h.convertToTspans,D),Ie.attr("transform",function(){var je,ye=G.l+G.w*u[K.title.align],Me=v.titlePadding,Oe=i.bBox(Ie.node());return q?(U&&(je=K.gauge.axis.visible?i.bBox(we.node()).top-Me-Oe.bottom:G.t+G.h/2-le/2-Oe.bottom-Me),W&&(je=Y-(Oe.top+Oe.bottom)/2,ye=G.l-v.bulletPadding*G.w)):je=K._numbersTop-Me-Oe.bottom,o(ye,je)})})}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"./constants":858,"@plotly/d3":58,"d3-interpolate":116}],862:[function(b,oe,se){"use strict";var y=b("../../components/colorscale/attributes"),x=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=b("../../plots/template_attributes").hovertemplateAttrs,_=b("../mesh3d/attributes"),e=b("../../plots/attributes"),o=b("../../lib/extend").extendFlat,a=b("../../plot_api/edit_types").overrideAll,l=oe.exports=a(o({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:M(),xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z"),valuehoverformat:x("value",1),showlegend:o({},e.showlegend,{dflt:!1})},y("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:_.opacity,lightposition:_.lightposition,lighting:_.lighting,flatshading:_.flatshading,contour:_.contour,hoverinfo:o({},e.hoverinfo)}),"calc","nested");l.flatshading.dflt=!0,l.lighting.facenormalsepsilon.dflt=0,l.x.editType=l.y.editType=l.z.editType=l.value.editType="calc+clearAxisTypes",l.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],863:[function(b,oe,se){"use strict";var y=b("../../components/colorscale/calc"),x=b("../streamtube/calc").processGrid,M=b("../streamtube/calc").filter;oe.exports=function(_,e){e._len=Math.min(e.x.length,e.y.length,e.z.length,e.value.length),e._x=M(e.x,e._len),e._y=M(e.y,e._len),e._z=M(e.z,e._len),e._value=M(e.value,e._len);var o=x(e);e._gridFill=o.fill,e._Xs=o.Xs,e._Ys=o.Ys,e._Zs=o.Zs,e._len=o.len;for(var a=1/0,l=-1/0,i=0;i<e._len;i++){var v=e._value[i];a=Math.min(a,v),l=Math.max(l,v)}e._minValues=a,e._maxValues=l,e._vMin=null==e.isomin?a:e.isomin,e._vMax=void 0===e.isomax||null===e.isomin?l:e.isomax,y(_,e,{vals:[e._vMin,e._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374,"../streamtube/calc":1045}],864:[function(b,oe,se){"use strict";var y=b("../../../stackgl_modules").gl_mesh3d,x=b("../../lib/gl_format_color").parseColorScale,M=b("../../lib/str2rgbarray"),_=b("../../components/colorscale").extractOpts,e=b("../../plots/gl3d/zip3"),o=function(h,s){for(var d=s.length-1;d>0;d--){var p=Math.min(s[d],s[d-1]),f=Math.max(s[d],s[d-1]);if(f>p&&p<h&&h<=f)return{id:d,distRatio:(f-h)/(f-p)}}return{id:0,distRatio:0}};function a(h,s,d){this.scene=h,this.uid=d,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var l=a.prototype;l.handlePick=function(h){if(h.object===this.mesh){var s=h.data.index,p=this.data._meshY[s],f=this.data._meshZ[s],g=this.data._Ys.length,m=this.data._Zs.length,u=o(this.data._meshX[s],this.data._Xs).id,w=o(p,this.data._Ys).id,c=o(f,this.data._Zs).id,A=h.index=c+m*w+m*g*u;h.traceCoordinate=[this.data._meshX[A],this.data._meshY[A],this.data._meshZ[A],this.data._value[A]];var k=this.data.hovertext||this.data.text;return Array.isArray(k)&&void 0!==k[A]?h.textLabel=k[A]:k&&(h.textLabel=k),!0}},l.update=function(h){var s=this.scene,d=s.fullSceneLayout;function p(m,u,w,c){return u.map(function(A){return m.d2l(A,0,c)*w})}this.data=v(h);var f={positions:e(p(d.xaxis,h._meshX,s.dataScale[0],h.xcalendar),p(d.yaxis,h._meshY,s.dataScale[1],h.ycalendar),p(d.zaxis,h._meshZ,s.dataScale[2],h.zcalendar)),cells:e(h._meshI,h._meshJ,h._meshK),lightPosition:[h.lightposition.x,h.lightposition.y,h.lightposition.z],ambient:h.lighting.ambient,diffuse:h.lighting.diffuse,specular:h.lighting.specular,roughness:h.lighting.roughness,fresnel:h.lighting.fresnel,vertexNormalsEpsilon:h.lighting.vertexnormalsepsilon,faceNormalsEpsilon:h.lighting.facenormalsepsilon,opacity:h.opacity,contourEnable:h.contour.show,contourColor:M(h.contour.color).slice(0,3),contourWidth:h.contour.width,useFacetNormals:h.flatshading},g=_(h);f.vertexIntensity=h._meshIntensity,f.vertexIntensityBounds=[g.min,g.max],f.colormap=x(h),this.mesh.update(f)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var i=["xyz","xzy","yxz","yzx","zxy","zyx"];function v(h){h._meshI=[],h._meshJ=[],h._meshK=[];var s,d,p,f,g,m,u,w=h.surface.show,c=h.spaceframe.show,A=h.surface.fill,k=h.spaceframe.fill,C=!1,E=!1,L=0,D=h._Xs,N=h._Ys,F=h._Zs,I=D.length,P=N.length,j=F.length,V=i.indexOf(h._gridFill.replace(/-/g,"").replace(/\+/g,"")),Z=function(He,$e,et){switch(V){case 5:return et+j*$e+j*P*He;case 4:return et+j*He+j*I*$e;case 3:return $e+P*et+P*j*He;case 2:return $e+P*He+P*I*et;case 1:return He+I*et+I*j*$e;default:return He+I*$e+I*P*et}},Y=h._minValues,ee=h._maxValues,re=h._vMin,X=h._vMax;function K(He,$e,et){for(var nt=m.length,ct=d;ct<nt;ct++)if(He===p[ct]&&$e===f[ct]&&et===g[ct])return ct;return-1}function ie(){d=s}function q(){p=[],f=[],g=[],m=[],s=0,ie()}function U(He,$e,et,nt){return p.push(He),f.push($e),g.push(et),m.push(nt),++s-1}function W(He,$e,et){for(var nt=[],ct=0;ct<He.length;ct++)nt[ct]=He[ct]*(1-et)+et*$e[ct];return nt}function ae(He){u=He}function G(He,$e){return"all"===He||null===He||He.indexOf($e)>-1}function te(He,$e){return null===He?$e:He}function ne(He,$e,et){ie();var ct,bt,sn,ke,Se,Ce,Ve,Ge,Qe,ot,it,mt,xt,Vt,$t,kt=[$e],Bt=[et];if(u>=1)kt=[$e],Bt=[et];else if(u>0){var Et=(ke=et,ot=W(Ge=function(pt,At,Xt){for(var Ct=[],Pt=0;Pt<pt.length;Pt++)Ct[Pt]=(pt[Pt]+At[Pt]+Xt[Pt])/3;return Ct}(Se=(sn=$e)[0],Ce=sn[1],Ve=sn[2]),Se,Qe=Math.sqrt(1-u)),{xyzv:[[Se,Ce,it=W(Ge,Ce,Qe)],[it,ot,Se],[Ce,Ve,mt=W(Ge,Ve,Qe)],[mt,it,Ce],[Ve,Se,ot],[ot,mt,Ve]],abc:[[xt=ke[0],Vt=ke[1],-1],[-1,-1,xt],[Vt,$t=ke[2],-1],[-1,-1,Vt],[$t,xt,-1],[-1,-1,$t]]});kt=Et.xyzv,Bt=Et.abc}for(var ht=0;ht<kt.length;ht++){$e=kt[ht],et=Bt[ht];for(var at=[],Ft=0;Ft<3;Ft++){var en=$e[Ft][0],Qt=$e[Ft][1],tn=$e[Ft][2],dn=$e[Ft][3],Mn=et[Ft]>-1?et[Ft]:K(en,Qt,tn);at[Ft]=Mn>-1?Mn:U(en,Qt,tn,te(He,dn))}ct=at[1],bt=at[2],h._meshI.push(at[0]),h._meshJ.push(ct),h._meshK.push(bt),++L}}function le(He,$e,et,nt){var ct=He[3];ct<et&&(ct=et),ct>nt&&(ct=nt);for(var bt=(He[3]-ct)/(He[3]-$e[3]+1e-9),kt=[],Bt=0;Bt<4;Bt++)kt[Bt]=(1-bt)*He[Bt]+bt*$e[Bt];return kt}function ue(He,$e,et){return He>=$e&&He<=et}function pe(He){var $e=.001*(X-re);return He>=re-$e&&He<=X+$e}function de(He){for(var $e=[],et=0;et<4;et++){var nt=He[et];$e.push([h._x[nt],h._y[nt],h._z[nt],h._value[nt]])}return $e}function _e(He,$e,et,nt,ct,bt){bt||(bt=1),et=[-1,-1,-1];var kt=!1,Bt=[ue($e[0][3],nt,ct),ue($e[1][3],nt,ct),ue($e[2][3],nt,ct)];if(!Bt[0]&&!Bt[1]&&!Bt[2])return!1;var Et=function(at,Ft,en){return pe(Ft[0][3])&&pe(Ft[1][3])&&pe(Ft[2][3])?(ne(at,Ft,en),!0):bt<3&&_e(at,Ft,en,re,X,++bt)};if(Bt[0]&&Bt[1]&&Bt[2])return Et(He,$e,et)||kt;var ht=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(at){if(Bt[at[0]]&&Bt[at[1]]&&!Bt[at[2]]){var Ft=$e[at[0]],en=$e[at[1]],Qt=$e[at[2]],tn=le(Qt,Ft,nt,ct),dn=le(Qt,en,nt,ct);kt=Et(He,[dn,tn,Ft],[-1,-1,et[at[0]]])||kt,kt=Et(He,[Ft,en,dn],[et[at[0]],et[at[1]],-1])||kt,ht=!0}}),ht||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(at){if(Bt[at[0]]&&!Bt[at[1]]&&!Bt[at[2]]){var Ft=$e[at[0]],Qt=$e[at[2]],tn=le($e[at[1]],Ft,nt,ct),dn=le(Qt,Ft,nt,ct);kt=Et(He,[dn,tn,Ft],[-1,-1,et[at[0]]])||kt,ht=!0}}),kt}function me(He,$e,et,nt){var Et,ht,at,Ft,ct=!1,bt=de($e),kt=[ue(bt[0][3],et,nt),ue(bt[1][3],et,nt),ue(bt[2][3],et,nt),ue(bt[3][3],et,nt)];if(!(kt[0]||kt[1]||kt[2]||kt[3]))return ct;if(kt[0]&&kt[1]&&kt[2]&&kt[3])return E&&(Et=He,ht=bt,at=$e,(Ft=function(en,Qt,tn){ne(Et,[ht[en],ht[Qt],ht[tn]],[at[en],at[Qt],at[tn]])})(0,1,2),Ft(3,0,1),Ft(2,3,0),ct=void Ft(1,2,3)||ct),ct;var Bt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(Et){if(kt[Et[0]]&&kt[Et[1]]&&kt[Et[2]]&&!kt[Et[3]]){var ht=bt[Et[0]],at=bt[Et[1]],Ft=bt[Et[2]],en=bt[Et[3]];if(E)ct=ne(He,[ht,at,Ft],[$e[Et[0]],$e[Et[1]],$e[Et[2]]])||ct;else{var Qt=le(en,ht,et,nt),tn=le(en,at,et,nt),dn=le(en,Ft,et,nt);ct=ne(null,[Qt,tn,dn],[-1,-1,-1])||ct}Bt=!0}}),Bt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(Et){if(kt[Et[0]]&&kt[Et[1]]&&!kt[Et[2]]&&!kt[Et[3]]){var ht=bt[Et[0]],at=bt[Et[1]],Ft=bt[Et[2]],en=bt[Et[3]],Qt=le(Ft,ht,et,nt),tn=le(Ft,at,et,nt),dn=le(en,at,et,nt),Mn=le(en,ht,et,nt);E?(ct=ne(He,[ht,Mn,Qt],[$e[Et[0]],-1,-1])||ct,ct=ne(He,[at,tn,dn],[$e[Et[1]],-1,-1])||ct):(null,ke=[Qt,tn,dn,Mn],Se=[-1,-1,-1,-1],(Ce=function(Ve,Ge,Qe){ne(null,[ke[Ve],ke[Ge],ke[Qe]],[Se[Ve],Se[Ge],Se[Qe]])})(0,1,2),ct=void Ce(2,3,0)||ct),Bt=!0}var ke,Se,Ce}),Bt||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(Et){if(kt[Et[0]]&&!kt[Et[1]]&&!kt[Et[2]]&&!kt[Et[3]]){var ht=bt[Et[0]],Ft=bt[Et[2]],en=bt[Et[3]],Qt=le(bt[Et[1]],ht,et,nt),tn=le(Ft,ht,et,nt),dn=le(en,ht,et,nt);E?(ct=ne(He,[ht,Qt,tn],[$e[Et[0]],-1,-1])||ct,ct=ne(He,[ht,tn,dn],[$e[Et[0]],-1,-1])||ct,ct=ne(He,[ht,dn,Qt],[$e[Et[0]],-1,-1])||ct):ct=ne(null,[Qt,tn,dn],[-1,-1,-1])||ct,Bt=!0}})),ct}function we(He,$e,et,nt,ct,bt,kt,Bt,Et,ht,at){var Ft=!1;return C&&(G(He,"A")&&(Ft=me(null,[$e,et,nt,bt],ht,at)||Ft),G(He,"B")&&(Ft=me(null,[et,nt,ct,Et],ht,at)||Ft),G(He,"C")&&(Ft=me(null,[et,bt,kt,Et],ht,at)||Ft),G(He,"D")&&(Ft=me(null,[nt,bt,Bt,Et],ht,at)||Ft),G(He,"E")&&(Ft=me(null,[et,nt,bt,Et],ht,at)||Ft)),E&&(Ft=me(He,[et,nt,bt,Et],ht,at)||Ft),Ft}function De(He,$e,et,nt,ct,bt,kt,Bt){return[!0===Bt[0]||_e(He,de([$e,et,nt]),[$e,et,nt],bt,kt),!0===Bt[1]||_e(He,de([nt,ct,$e]),[nt,ct,$e],bt,kt)]}function Le(He,$e,et,nt,ct,bt,kt,Bt,Et){return Bt?De(He,$e,et,ct,nt,bt,kt,Et):De(He,et,ct,nt,$e,bt,kt,Et)}function Ie(He,$e,et,nt,ct,bt,kt){var Bt,Et,ht,at,Ft=!1,en=function(){Ft=_e(He,[Bt,Et,ht],[-1,-1,-1],ct,bt)||Ft,Ft=_e(He,[ht,at,Bt],[-1,-1,-1],ct,bt)||Ft},Qt=kt[0],tn=kt[1],dn=kt[2];return Qt&&(Bt=W(de([Z($e,et-0,nt-0)])[0],de([Z($e-1,et-0,nt-0)])[0],Qt),Et=W(de([Z($e,et-0,nt-1)])[0],de([Z($e-1,et-0,nt-1)])[0],Qt),ht=W(de([Z($e,et-1,nt-1)])[0],de([Z($e-1,et-1,nt-1)])[0],Qt),at=W(de([Z($e,et-1,nt-0)])[0],de([Z($e-1,et-1,nt-0)])[0],Qt),en()),tn&&(Bt=W(de([Z($e-0,et,nt-0)])[0],de([Z($e-0,et-1,nt-0)])[0],tn),Et=W(de([Z($e-0,et,nt-1)])[0],de([Z($e-0,et-1,nt-1)])[0],tn),ht=W(de([Z($e-1,et,nt-1)])[0],de([Z($e-1,et-1,nt-1)])[0],tn),at=W(de([Z($e-1,et,nt-0)])[0],de([Z($e-1,et-1,nt-0)])[0],tn),en()),dn&&(Bt=W(de([Z($e-0,et-0,nt)])[0],de([Z($e-0,et-0,nt-1)])[0],dn),Et=W(de([Z($e-0,et-1,nt)])[0],de([Z($e-0,et-1,nt-1)])[0],dn),ht=W(de([Z($e-1,et-1,nt)])[0],de([Z($e-1,et-1,nt-1)])[0],dn),at=W(de([Z($e-1,et-0,nt)])[0],de([Z($e-1,et-0,nt-1)])[0],dn),en()),Ft}function je(He,$e,et,nt,ct,bt,kt,Bt,Et,ht,at,Ft){var en=He;return Ft?(C&&"even"===He&&(en=null),we(en,$e,et,nt,ct,bt,kt,Bt,Et,ht,at)):(C&&"odd"===He&&(en=null),we(en,Et,Bt,kt,bt,ct,nt,et,$e,ht,at))}function ye(He,$e,et,nt,ct){for(var bt=[],kt=0,Bt=0;Bt<$e.length;Bt++)for(var Et=$e[Bt],ht=1;ht<j;ht++)for(var at=1;at<P;at++)bt.push(Le(He,Z(Et,at-1,ht-1),Z(Et,at-1,ht),Z(Et,at,ht-1),Z(Et,at,ht),et,nt,(Et+at+ht)%2,ct&&ct[kt]?ct[kt]:[])),kt++;return bt}function Me(He,$e,et,nt,ct){for(var bt=[],kt=0,Bt=0;Bt<$e.length;Bt++)for(var Et=$e[Bt],ht=1;ht<I;ht++)for(var at=1;at<j;at++)bt.push(Le(He,Z(ht-1,Et,at-1),Z(ht,Et,at-1),Z(ht-1,Et,at),Z(ht,Et,at),et,nt,(ht+Et+at)%2,ct&&ct[kt]?ct[kt]:[])),kt++;return bt}function Oe(He,$e,et,nt,ct){for(var bt=[],kt=0,Bt=0;Bt<$e.length;Bt++)for(var Et=$e[Bt],ht=1;ht<P;ht++)for(var at=1;at<I;at++)bt.push(Le(He,Z(at-1,ht-1,Et),Z(at-1,ht,Et),Z(at,ht-1,Et),Z(at,ht,Et),et,nt,(at+ht+Et)%2,ct&&ct[kt]?ct[kt]:[])),kt++;return bt}function Pe(He,$e,et){for(var nt=1;nt<j;nt++)for(var ct=1;ct<P;ct++)for(var bt=1;bt<I;bt++)je(He,Z(bt-1,ct-1,nt-1),Z(bt-1,ct-1,nt),Z(bt-1,ct,nt-1),Z(bt-1,ct,nt),Z(bt,ct-1,nt-1),Z(bt,ct-1,nt),Z(bt,ct,nt-1),Z(bt,ct,nt),$e,et,(bt+ct+nt)%2)}function Re(He,$e,et){C=!0,Pe(He,$e,et),C=!1}function Ue(He,$e,et,nt,ct,bt){for(var kt=[],Et=0;Et<$e.length;Et++)for(var ht=$e[Et],at=1;at<j;at++)for(var Ft=1;Ft<P;Ft++)kt.push(Ie(He,ht,Ft,at,et,nt,ct[Et]));return kt}function qe(He,$e,et,nt,ct,bt){for(var kt=[],Et=0;Et<$e.length;Et++)for(var ht=$e[Et],at=1;at<I;at++)for(var Ft=1;Ft<j;Ft++)kt.push(Ie(He,at,ht,Ft,et,nt,ct[Et]));return kt}function Xe(He,$e,et,nt,ct,bt){for(var kt=[],Et=0;Et<$e.length;Et++)for(var ht=$e[Et],at=1;at<P;at++)for(var Ft=1;Ft<I;Ft++)kt.push(Ie(He,Ft,at,ht,et,nt,ct[Et]));return kt}function lt(He,$e){for(var et=[],nt=He;nt<$e;nt++)et.push(nt);return et}return function(){if(q(),function(){for(var Bt=0;Bt<I;Bt++)for(var Et=0;Et<P;Et++)for(var ht=0;ht<j;ht++){var at=Z(Bt,Et,ht);U(h._x[at],h._y[at],h._z[at],h._value[at])}}(),c&&k&&(ae(k),E=!0,Pe(null,re,X),E=!1),w&&A){ae(A);for(var He=h.surface.pattern,$e=h.surface.count,et=0;et<$e;et++){var nt=1===$e?.5:et/($e-1),ct=(1-nt)*re+nt*X,bt=Math.abs(ct-Y)>Math.abs(ct-ee)?[Y,ct]:[ct,ee];Re(He,bt[0],bt[1])}}var kt=[[Math.min(re,ee),Math.max(re,ee)],[Math.min(Y,X),Math.max(Y,X)]];["x","y","z"].forEach(function(Bt){for(var Et=[],ht=0;ht<kt.length;ht++){var at=0,Ft=kt[ht][0],en=kt[ht][1],Qt=h.slices[Bt];if(Qt.show&&Qt.fill){ae(Qt.fill);var tn=[],dn=[],Mn=[];if(Qt.locations.length)for(var sn=0;sn<Qt.locations.length;sn++){var ke=o(Qt.locations[sn],"x"===Bt?D:"y"===Bt?N:F);0===ke.distRatio?tn.push(ke.id):ke.id>0&&(dn.push(ke.id),Mn.push("x"===Bt?[ke.distRatio,0,0]:"y"===Bt?[0,ke.distRatio,0]:[0,0,ke.distRatio]))}else tn=lt(1,"x"===Bt?I-1:"y"===Bt?P-1:j-1);dn.length>0&&(Et[at]="x"===Bt?Ue(null,dn,Ft,en,Mn):"y"===Bt?qe(null,dn,Ft,en,Mn):Xe(null,dn,Ft,en,Mn),at++),tn.length>0&&(Et[at]="x"===Bt?ye(null,tn,Ft,en,Et[at]):"y"===Bt?Me(null,tn,Ft,en,Et[at]):Oe(null,tn,Ft,en,Et[at]),at++)}var Se=h.caps[Bt];Se.show&&Se.fill&&(ae(Se.fill),Et[at]="x"===Bt?ye(null,[0,I-1],Ft,en,Et[at]):"y"===Bt?Me(null,[0,P-1],Ft,en,Et[at]):Oe(null,[0,j-1],Ft,en,Et[at]),at++)}}),0===L&&q(),h._meshX=p,h._meshY=f,h._meshZ=g,h._meshIntensity=m,h._Xs=D,h._Ys=N,h._Zs=F}(),h}oe.exports={findNearestOnAxis:o,generateIsoMeshes:v,createIsosurfaceTrace:function(h,s){var p=y({gl:h.glplot.gl}),f=new a(h,p,s.uid);return p._trace=f,f.update(s),h.glplot.add(p),f}}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],865:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../registry"),M=b("./attributes"),_=b("../../components/colorscale/defaults");function e(o,a,l,i,v){var h=v("isomin"),s=v("isomax");null!=s&&null!=h&&h>s&&(a.isomin=null,a.isomax=null);var d=v("x"),p=v("y"),f=v("z"),g=v("value");d&&d.length&&p&&p.length&&f&&f.length&&g&&g.length?(x.getComponentMethod("calendars","handleTraceDefaults")(o,a,["x","y","z"],i),v("valuehoverformat"),["x","y","z"].forEach(function(m){v(m+"hoverformat");var u="caps."+m;v(u+".show")&&v(u+".fill");var w="slices."+m;v(w+".show")&&(v(w+".fill"),v(w+".locations"))}),v("spaceframe.show")&&v("spaceframe.fill"),v("surface.show")&&(v("surface.count"),v("surface.fill"),v("surface.pattern")),v("contour.show")&&(v("contour.color"),v("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(m){v(m)}),_(o,a,i,v,{prefix:"",cLetter:"c"}),a._length=null):a.visible=!1}oe.exports={supplyDefaults:function(o,a,l,i){e(o,a,0,i,function(v,h){return y.coerce(o,a,M,v,h)})},supplyIsoDefaults:e}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":862}],866:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,calc:b("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":862,"./calc":863,"./convert":864,"./defaults":865}],867:[function(b,oe,se){"use strict";var y=b("../../components/colorscale/attributes"),x=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=b("../../plots/template_attributes").hovertemplateAttrs,_=b("../surface/attributes"),e=b("../../plots/attributes"),o=b("../../lib/extend").extendFlat;oe.exports=o({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:M({editType:"calc"}),xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},y("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:_.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:o({},_.contours.x.show,{}),color:_.contours.x.color,width:_.contours.x.width,editType:"calc"},lightposition:{x:o({},_.lightposition.x,{dflt:1e5}),y:o({},_.lightposition.y,{dflt:1e5}),z:o({},_.lightposition.z,{dflt:0}),editType:"calc"},lighting:o({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},_.lighting),hoverinfo:o({},e.hoverinfo,{editType:"calc"}),showlegend:o({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../surface/attributes":1061}],868:[function(b,oe,se){"use strict";var y=b("../../components/colorscale/calc");oe.exports=function(x,M){M.intensity&&y(x,M,{vals:M.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],869:[function(b,oe,se){"use strict";var y=b("../../../stackgl_modules").gl_mesh3d,x=b("../../../stackgl_modules").delaunay_triangulate,M=b("../../../stackgl_modules").alpha_shape,_=b("../../../stackgl_modules").convex_hull,e=b("../../lib/gl_format_color").parseColorScale,o=b("../../lib/str2rgbarray"),a=b("../../components/colorscale").extractOpts,l=b("../../plots/gl3d/zip3");function i(f,g,m){this.scene=f,this.uid=m,this.mesh=g,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var v=i.prototype;function h(f){for(var g=[],m=f.length,u=0;u<m;u++)g[u]=o(f[u]);return g}function s(f,g,m,u){for(var w=[],c=g.length,A=0;A<c;A++)w[A]=f.d2l(g[A],0,u)*m;return w}function d(f){for(var g=[],m=f.length,u=0;u<m;u++)g[u]=Math.round(f[u]);return g}function p(f,g){for(var m=f.length,u=0;u<m;u++)if(f[u]<=-.5||f[u]>=g-.5)return!1;return!0}v.handlePick=function(f){if(f.object===this.mesh){var g=f.index=f.data.index;f.traceCoordinate=f.data._cellCenter?f.data.dataCoordinate:[this.data.x[g],this.data.y[g],this.data.z[g]];var m=this.data.hovertext||this.data.text;return Array.isArray(m)&&void 0!==m[g]?f.textLabel=m[g]:m&&(f.textLabel=m),!0}},v.update=function(f){var g=this.scene,m=g.fullSceneLayout;this.data=f;var u,w=f.x.length,c=l(s(m.xaxis,f.x,g.dataScale[0],f.xcalendar),s(m.yaxis,f.y,g.dataScale[1],f.ycalendar),s(m.zaxis,f.z,g.dataScale[2],f.zcalendar));if(f.i&&f.j&&f.k){if(f.i.length!==f.j.length||f.j.length!==f.k.length||!p(f.i,w)||!p(f.j,w)||!p(f.k,w))return;u=l(d(f.i),d(f.j),d(f.k))}else u=0===f.alphahull?_(c):f.alphahull>0?M(f.alphahull,c):function(E,L){for(var D=["x","y","z"].indexOf(E),N=[],F=L.length,I=0;I<F;I++)N[I]=[L[I][(D+1)%3],L[I][(D+2)%3]];return x(N)}(f.delaunayaxis,c);var A={positions:c,cells:u,lightPosition:[f.lightposition.x,f.lightposition.y,f.lightposition.z],ambient:f.lighting.ambient,diffuse:f.lighting.diffuse,specular:f.lighting.specular,roughness:f.lighting.roughness,fresnel:f.lighting.fresnel,vertexNormalsEpsilon:f.lighting.vertexnormalsepsilon,faceNormalsEpsilon:f.lighting.facenormalsepsilon,opacity:f.opacity,contourEnable:f.contour.show,contourColor:o(f.contour.color).slice(0,3),contourWidth:f.contour.width,useFacetNormals:f.flatshading};if(f.intensity){var k=a(f);this.color="#fff";var C=f.intensitymode;A[C+"Intensity"]=f.intensity,A[C+"IntensityBounds"]=[k.min,k.max],A.colormap=e(f)}else f.vertexcolor?(this.color=f.vertexcolor[0],A.vertexColors=h(f.vertexcolor)):f.facecolor?(this.color=f.facecolor[0],A.cellColors=h(f.facecolor)):(this.color=f.color,A.meshColor=o(f.color));this.mesh.update(A)},v.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},oe.exports=function(f,g){var u=y({gl:f.glplot.gl}),w=new i(f,u,g.uid);return u._trace=w,w.update(g),f.glplot.add(u),w}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],870:[function(b,oe,se){"use strict";var y=b("../../registry"),x=b("../../lib"),M=b("../../components/colorscale/defaults"),_=b("./attributes");oe.exports=function(e,o,a,l){function i(h,s){return x.coerce(e,o,_,h,s)}function v(h){var s=h.map(function(d){var p=i(d);return p&&x.isArrayOrTypedArray(p)?p:null});return s.every(function(d){return d&&d.length===s[0].length})&&s}v(["x","y","z"])?(v(["i","j","k"]),(!o.i||o.j&&o.k)&&(!o.j||o.k&&o.i)&&(!o.k||o.i&&o.j)?(y.getComponentMethod("calendars","handleTraceDefaults")(e,o,["x","y","z"],l),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(h){i(h)}),i("contour.show")&&(i("contour.color"),i("contour.width")),"intensity"in e?(i("intensity"),i("intensitymode"),M(e,o,l,i,{prefix:"",cLetter:"c"})):(o.showscale=!1,"facecolor"in e?i("facecolor"):"vertexcolor"in e?i("vertexcolor"):i("color",a)),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),o._length=null):o.visible=!1):o.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":867}],871:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":867,"./calc":868,"./convert":869,"./defaults":870}],872:[function(b,oe,se){"use strict";var y=b("../../lib").extendFlat,x=b("../scatter/attributes"),M=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,_=b("../../components/drawing/attributes").dash,e=b("../../components/fx/attributes"),o=b("../../constants/delta.js"),a=o.INCREASING.COLOR,l=o.DECREASING.COLOR,i=x.line;function v(h){return{line:{color:y({},i.color,{dflt:h}),width:i.width,dash:_,editType:"style"},editType:"style"}}oe.exports={xperiod:x.xperiod,xperiod0:x.xperiod0,xperiodalignment:x.xperiodalignment,xhoverformat:M("x"),yhoverformat:M("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:y({},i.width,{}),dash:y({},_,{}),editType:"style"},increasing:v(a),decreasing:v(l),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:y({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":387,"../../components/fx/attributes":397,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":927}],873:[function(b,oe,se){"use strict";var y=b("../../lib"),x=y._,M=b("../../plots/cartesian/axes"),_=b("../../plots/cartesian/align_period"),e=b("../../constants/numerical").BADNUM;function o(l,i,v,h){return{o:l,h:i,l:v,c:h}}function a(l,i,v,h,s,d){for(var p=s.makeCalcdata(i,"open"),f=s.makeCalcdata(i,"high"),g=s.makeCalcdata(i,"low"),m=s.makeCalcdata(i,"close"),u=Array.isArray(i.text),w=Array.isArray(i.hovertext),c=!0,A=null,k=!!i.xperiodalignment,C=[],E=0;E<h.length;E++){var L=h[E],D=p[E],N=f[E],F=g[E],I=m[E];if(L!==e&&D!==e&&N!==e&&F!==e&&I!==e){I===D?null!==A&&I!==A&&(c=I>A):c=I>D,A=I;var P=d(D,N,F,I);P.pos=L,P.yc=(D+I)/2,P.i=E,P.dir=c?"increasing":"decreasing",P.x=P.pos,P.y=[F,N],k&&(P.orig_p=v[E]),u&&(P.tx=i.text[E]),w&&(P.htx=i.hovertext[E]),C.push(P)}else C.push({pos:L,empty:!0})}return i._extremes[s._id]=M.findExtremes(s,y.concat(g,f),{padded:!0}),C.length&&(C[0].t={labels:{open:x(l,"open:")+" ",high:x(l,"high:")+" ",low:x(l,"low:")+" ",close:x(l,"close:")+" "}}),C}oe.exports={calc:function(l,i){var v=M.getFromId(l,i.xaxis),h=M.getFromId(l,i.yaxis),s=function(m,u,w){var c=w._minDiff;if(!c){var A,k=m._fullData,C=[];for(c=1/0,A=0;A<k.length;A++){var E=k[A];if("ohlc"===E.type&&!0===E.visible&&E.xaxis===u._id){C.push(E);var L=u.makeCalcdata(E,"x");E._origX=L;var D=_(w,u,"x",L).vals;E._xcalc=D;var N=y.distinctVals(D).minDiff;N&&isFinite(N)&&(c=Math.min(c,N))}}for(c===1/0&&(c=1),A=0;A<C.length;A++)C[A]._minDiff=c}return c*w.tickwidth}(l,v,i),d=i._minDiff;i._minDiff=null;var p=i._origX;i._origX=null;var f=i._xcalc;i._xcalc=null;var g=a(l,i,p,f,h,o);return i._extremes[v._id]=M.findExtremes(v,f,{vpad:d/2}),g.length?(y.extendFlat(g[0].t,{wHover:d/2,tickLen:s}),g):[{t:{empty:!0}}]},calcCommon:a}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554}],874:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./ohlc_defaults"),M=b("../scatter/period_defaults"),_=b("./attributes");function e(o,a,l,i){l(i+".line.color"),l(i+".line.width",a.line.width),l(i+".line.dash",a.line.dash)}oe.exports=function(o,a,l,i){function v(h,s){return y.coerce(o,a,_,h,s)}x(o,a,v,i)?(M(o,a,i,v,{x:!0}),v("xhoverformat"),v("yhoverformat"),v("line.width"),v("line.dash"),e(0,a,v,"increasing"),e(0,a,v,"decreasing"),v("text"),v("hovertext"),v("tickwidth"),i._requestRangeslider[a.xaxis]=!0):a.visible=!1}},{"../../lib":503,"../scatter/period_defaults":947,"./attributes":872,"./ohlc_defaults":877}],875:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axes"),x=b("../../lib"),M=b("../../components/fx"),_=b("../../components/color"),e=b("../../lib").fillText,o=b("../../constants/delta.js"),a={increasing:o.INCREASING.SYMBOL,decreasing:o.DECREASING.SYMBOL};function l(h,s,d,p){var f,g,m=h.cd,u=h.xa,w=m[0].trace,c=m[0].t,A=w.type,k="ohlc"===A?"l":"min",C="ohlc"===A?"h":"max",E=c.bPos||0,L=c.bdPos||c.tickLen,D=c.wHover,N=Math.min(1,L/Math.abs(u.r2c(u.range[1])-u.r2c(u.range[0])));function F(ee){var re=ee.pos+E-s;return M.inbox(re-D,re+D,f)}function I(ee){var re=ee[k],X=ee[C];return re===X||M.inbox(re-d,X-d,f)}function P(ee){return(F(ee)+I(ee))/2}f=h.maxHoverDistance-N,g=h.maxSpikeDistance-N;var j=M.getDistanceFunction(p,F,I,P);if(M.getClosest(m,j,h),!1===h.index)return null;var V=m[h.index];if(V.empty)return null;var Z=w[V.dir],Y=Z.line.color;return h.color=_.opacity(Y)&&Z.line.width?Y:Z.fillcolor,h.x0=u.c2p(V.pos+E-L,!0),h.x1=u.c2p(V.pos+E+L,!0),h.xLabelVal=void 0!==V.orig_p?V.orig_p:V.pos,h.spikeDistance=P(V)*g/f,h.xSpike=u.c2p(V.pos,!0),h}function i(h,s,d,p){var f=h.cd,g=h.ya,m=f[0].trace,u=f[0].t,w=[],c=l(h,s,d,p);if(!c)return[];var A=f[c.index].hi||m.hoverinfo,k=A.split("+");if("all"!==A&&-1===k.indexOf("y"))return[];for(var C=["high","open","close","low"],E={},L=0;L<C.length;L++){var D,N=C[L],F=m[N][c.index],I=g.c2p(F,!0);F in E?(D=E[F]).yLabel+="<br>"+u.labels[N]+y.hoverLabelText(g,F,m.yhoverformat):((D=x.extendFlat({},c)).y0=D.y1=I,D.yLabelVal=F,D.yLabel=u.labels[N]+y.hoverLabelText(g,F,m.yhoverformat),D.name="",w.push(D),E[F]=D)}return w}function v(h,s,d,p){var f=h.cd,g=h.ya,m=f[0].trace,u=f[0].t,w=l(h,s,d,p);if(!w)return[];var c=f[w.index],A=w.index=c.i,k=c.dir;function C(P){return u.labels[P]+y.hoverLabelText(g,m[P][A],m.yhoverformat)}var E=c.hi||m.hoverinfo,L=E.split("+"),D="all"===E,N=D||-1!==L.indexOf("y"),F=D||-1!==L.indexOf("text"),I=N?[C("open"),C("high"),C("low"),C("close")+"  "+a[k]]:[];return F&&e(c,m,I),w.extraText=I.join("<br>"),w.y0=w.y1=g.c2p(c.yc,!0),[w]}oe.exports={hoverPoints:function(h,s,d,p){return h.cd[0].trace.hoverlabel.split?i(h,s,d,p):v(h,s,d,p)},hoverSplit:i,hoverOnPoints:v}},{"../../components/color":366,"../../components/fx":406,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axes":554}],876:[function(b,oe,se){"use strict";oe.exports={moduleType:"trace",name:"ohlc",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc").calc,plot:b("./plot"),style:b("./style"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("./select")}},{"../../plots/cartesian":568,"./attributes":872,"./calc":873,"./defaults":874,"./hover":875,"./plot":878,"./select":879,"./style":880}],877:[function(b,oe,se){"use strict";var y=b("../../registry"),x=b("../../lib");oe.exports=function(M,_,e,o){var a=e("x"),l=e("open"),i=e("high"),v=e("low"),h=e("close");if(e("hoverlabel.split"),y.getComponentMethod("calendars","handleTraceDefaults")(M,_,["x"],o),l&&i&&v&&h){var s=Math.min(l.length,i.length,v.length,h.length);return a&&(s=Math.min(s,x.minRowLength(a))),_._length=s,s}}},{"../../lib":503,"../../registry":638}],878:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../lib");oe.exports=function(M,_,e,o){var a=_.yaxis,l=_.xaxis,i=!!l.rangebreaks;x.makeTraceGroups(o,e,"trace ohlc").each(function(v){var h=y.select(this),s=v[0],d=s.t;if(!0!==s.trace.visible||d.empty)h.remove();else{var p=d.tickLen,f=h.selectAll("path").data(x.identity);f.enter().append("path"),f.exit().remove(),f.attr("d",function(g){if(g.empty)return"M0,0Z";var m=l.c2p(g.pos-p,!0),u=l.c2p(g.pos+p,!0),w=i?(m+u)/2:l.c2p(g.pos,!0);return"M"+m+","+a.c2p(g.o,!0)+"H"+w+"M"+w+","+a.c2p(g.h,!0)+"V"+a.c2p(g.l,!0)+"M"+u+","+a.c2p(g.c,!0)+"H"+w})}})}},{"../../lib":503,"@plotly/d3":58}],879:[function(b,oe,se){"use strict";oe.exports=function(y,x){var M,_=y.cd,e=y.xaxis,o=y.yaxis,a=[],l=_[0].t.bPos||0;if(!1===x)for(M=0;M<_.length;M++)_[M].selected=0;else for(M=0;M<_.length;M++){var i=_[M];x.contains([e.c2p(i.pos+l),o.c2p(i.yc)],null,i.i,y)?(a.push({pointNumber:i.i,x:e.c2d(i.pos),y:o.c2d(i.yc)}),i.selected=1):i.selected=0}return a}},{}],880:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../components/drawing"),M=b("../../components/color");oe.exports=function(_,e,o){var a=o||y.select(_).selectAll("g.ohlclayer").selectAll("g.trace");a.style("opacity",function(l){return l[0].trace.opacity}),a.each(function(l){var i=l[0].trace;y.select(this).selectAll("path").each(function(v){if(!v.empty){var h=i[v.dir].line;y.select(this).style("fill","none").call(M.stroke,h.color).call(x.dashLine,h.dash,h.width).style("opacity",i.selectedpoints&&!v.selected?.3:1)}})})}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],881:[function(b,oe,se){"use strict";var y=b("../../lib/extend").extendFlat,x=b("../../plots/attributes"),M=b("../../plots/font_attributes"),_=b("../../components/colorscale/attributes"),e=b("../../plots/template_attributes").hovertemplateAttrs,o=b("../../plots/domain").attributes,a=y({editType:"calc"},_("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});oe.exports={domain:o({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:y({},x.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:M({editType:"calc"}),tickfont:M({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:a,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],882:[function(b,oe,se){"use strict";var y=b("../../plots/get_data").getModuleCalcData,x=b("./plot");se.name="parcats",se.plot=function(M,_,e,o){var a=y(M.calcdata,"parcats");a.length&&x(M,a[0],e,o)},se.clean=function(M,_,e,o){var a=o._has&&o._has("parcats"),l=_._has&&_._has("parcats");a&&!l&&o._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":593,"./plot":887}],883:[function(b,oe,se){"use strict";var y=b("../../lib/gup").wrap,x=b("../../components/colorscale/helpers").hasColorscale,M=b("../../components/colorscale/calc"),_=b("../../lib/filter_unique.js"),e=b("../../components/drawing"),o=b("../../lib"),a=b("fast-isnumeric");function l(h,s,d){h.valueInds.push(s),h.count+=d}function i(h,s,d){return{categoryInds:h,color:s,rawColor:d,valueInds:[],count:0}}function v(h,s,d){h.valueInds.push(s),h.count+=d}oe.exports=function(h,s){var d=o.filterVisible(s.dimensions);if(0===d.length)return[];var p,f,g,m=d.map(function(K){var ie;if("trace"===K.categoryorder)ie=null;else if("array"===K.categoryorder)ie=K.categoryarray;else{ie=_(K.values);for(var q=!0,U=0;U<ie.length;U++)if(!a(ie[U])){q=!1;break}ie.sort(q?o.sorterAsc:void 0),"category descending"===K.categoryorder&&(ie=ie.reverse())}return function(W,ae){ae=null==ae?[]:ae.map(function(_e){return _e});var G={},te={},ne=[];ae.forEach(function(_e,me){G[_e]=0,te[_e]=me});for(var le=0;le<W.length;le++){var ue,pe=W[le];void 0===G[pe]?(G[pe]=1,ue=ae.push(pe)-1,te[pe]=ue):(G[pe]++,ue=te[pe]),ne.push(ue)}var de=ae.map(function(_e){return G[_e]});return{uniqueValues:ae,uniqueCounts:de,inds:ne}}(K.values,ie)});p=o.isArrayOrTypedArray(s.counts)?s.counts:[s.counts],function(K){var ie;if(function(q){for(var U=new Array(q.length),W=0;W<q.length;W++){if(q[W]<0||q[W]>=q.length||void 0!==U[q[W]])return!1;U[q[W]]=!0}return!0}(K.map(function(q){return q.displayindex})))for(ie=0;ie<K.length;ie++)K[ie]._displayindex=K[ie].displayindex;else for(ie=0;ie<K.length;ie++)K[ie]._displayindex=ie}(d),d.forEach(function(K,ie){!function(q,U){q._categoryarray=U.uniqueValues,q._ticktext=null==q.ticktext?[]:q.ticktext.slice();for(var W=q._ticktext.length;W<U.uniqueValues.length;W++)q._ticktext.push(U.uniqueValues[W])}(K,m[ie])});var u,w=s.line;w?(x(s,"line")&&M(h,s,{vals:s.line.color,containerStr:"line",cLetter:"c"}),u=e.tryColorscale(w)):u=o.identity;var c,A,k,C,E,L=d[0].values.length,D={},N=m.map(function(K){return K.inds});for(g=0,c=0;c<L;c++){var F=[];for(A=0;A<N.length;A++)F.push(N[A][c]);g+=f=p[c%p.length];var I=(k=c,C=void 0,E=void 0,o.isArrayOrTypedArray(w.color)?E=C=w.color[k%w.color.length]:C=w.color,{color:u(C),rawColor:E}),P=F+"-"+I.rawColor;void 0===D[P]&&(D[P]=i(F,I.color,I.rawColor)),v(D[P],c,f)}var j,K,ie,q,U,V=d.map(function(K,ie){return{dimensionInd:ie,containerInd:K._index,displayInd:K._displayindex,dimensionLabel:K.label,count:g,categories:[],dragX:null}});for(c=0;c<L;c++)for(f=p[c%p.length],A=0;A<V.length;A++){var Z=V[A].containerInd,Y=m[A].inds[c],ee=V[A].categories;void 0===ee[Y]&&(ee[Y]={dimensionInd:A,categoryInd:j=Y,categoryValue:s.dimensions[Z]._categoryarray[Y],displayInd:j,categoryLabel:s.dimensions[Z]._ticktext[Y],valueInds:[],count:0,dragY:null}),l(ee[Y],c,f)}return y((ie=D,q=g,U=(K=V).map(function(W){return W.categories.length}).reduce(function(W,ae){return Math.max(W,ae)}),{dimensions:K,paths:ie,trace:void 0,maxCats:U,count:q}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../components/drawing":388,"../../lib":503,"../../lib/filter_unique.js":494,"../../lib/gup":500,"fast-isnumeric":190}],884:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../components/colorscale/helpers").hasColorscale,M=b("../../components/colorscale/defaults"),_=b("../../plots/domain").defaults,e=b("../../plots/array_container_defaults"),o=b("./attributes"),a=b("../parcoords/merge_length");function l(i,v){function h(u,w){return y.coerce(i,v,o.dimensions,u,w)}var s=h("values"),d=h("visible");if(s&&s.length||(d=v.visible=!1),d){h("label"),h("displayindex",v._index);var p,f=i.categoryarray,g=Array.isArray(f)&&f.length>0;g&&(p="array");var m=h("categoryorder",p);"array"===m?(h("categoryarray"),h("ticktext")):(delete i.categoryarray,delete i.ticktext),g||"array"!==m||(v.categoryorder="trace")}}oe.exports=function(i,v,h,s){function d(u,w){return y.coerce(i,v,o,u,w)}var p=e(i,v,{name:"dimensions",handleItemDefaults:l}),f=function(u,w,c,A,k){k("line.shape"),k("line.hovertemplate");var C=k("line.color",A.colorway[0]);if(x(u,"line")&&y.isArrayOrTypedArray(C)){if(C.length)return k("line.colorscale"),M(u,w,A,k,{prefix:"line.",cLetter:"c"}),C.length;w.line.color=c}return 1/0}(i,v,h,s,d);_(v,s,d),Array.isArray(p)&&p.length||(v.visible=!1),a(v,p,"values",f),d("hoveron"),d("hovertemplate"),d("arrangement"),d("bundlecolors"),d("sortpaths"),d("counts");var g={family:s.font.family,size:Math.round(s.font.size),color:s.font.color};y.coerceFont(d,"labelfont",g);var m={family:s.font.family,size:Math.round(s.font.size/1.2),color:s.font.color};y.coerceFont(d,"tickfont",m)}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/domain":584,"../parcoords/merge_length":898,"./attributes":881}],885:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:b("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":881,"./base_plot":882,"./calc":883,"./defaults":884,"./plot":887}],886:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("d3-interpolate").interpolateNumber,M=b("../../plot_api/plot_api"),_=b("../../components/fx"),e=b("../../lib"),o=e.strTranslate,a=b("../../components/drawing"),l=b("tinycolor2"),i=b("../../lib/svg_text_utils");function v(q,U,W,ae){var G=q.map(ee.bind(0,U,W)),te=ae.selectAll("g.parcatslayer").data([null]);te.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var ne=te.selectAll("g.trace.parcats").data(G,h),le=ne.enter().append("g").attr("class","trace parcats");ne.attr("transform",function(Ie){return o(Ie.x,Ie.y)}),le.append("g").attr("class","paths");var ue=ne.select("g.paths").selectAll("path.path").data(function(Ie){return Ie.paths},h);ue.attr("fill",function(Ie){return Ie.model.color});var pe=ue.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Ie){return Ie.model.color}).attr("fill-opacity",0);w(pe),ue.attr("d",function(Ie){return Ie.svgD}),pe.empty()||ue.sort(d),ue.exit().remove(),ue.on("mouseover",p).on("mouseout",f).on("click",u),le.append("g").attr("class","dimensions");var de=ne.select("g.dimensions").selectAll("g.dimension").data(function(Ie){return Ie.dimensions},h);de.enter().append("g").attr("class","dimension"),de.attr("transform",function(Ie){return o(Ie.x,0)}),de.exit().remove();var _e=de.selectAll("g.category").data(function(Ie){return Ie.categories},h),me=_e.enter().append("g").attr("class","category");_e.attr("transform",function(Ie){return o(0,Ie.y)}),me.append("rect").attr("class","catrect").attr("pointer-events","none"),_e.select("rect.catrect").attr("fill","none").attr("width",function(Ie){return Ie.width}).attr("height",function(Ie){return Ie.height}),A(me);var we=_e.selectAll("rect.bandrect").data(function(Ie){return Ie.bands},h);we.each(function(){e.raiseToTop(this)}),we.attr("fill",function(Ie){return Ie.color});var De=we.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Ie){return Ie.color}).attr("fill-opacity",0);we.attr("fill",function(Ie){return Ie.color}).attr("width",function(Ie){return Ie.width}).attr("height",function(Ie){return Ie.height}).attr("y",function(Ie){return Ie.y}).attr("cursor",function(Ie){return"fixed"===Ie.parcatsViewModel.arrangement?"default":"perpendicular"===Ie.parcatsViewModel.arrangement?"ns-resize":"move"}),k(De),we.exit().remove(),me.append("text").attr("class","catlabel").attr("pointer-events","none");var Le=U._fullLayout.paper_bgcolor;_e.select("text.catlabel").attr("text-anchor",function(Ie){return s(Ie)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",i.makeTextShadow(Le)).style("fill","rgb(0, 0, 0)").attr("x",function(Ie){return s(Ie)?Ie.width+5:-5}).attr("y",function(Ie){return Ie.height/2}).text(function(Ie){return Ie.model.categoryLabel}).each(function(Ie){a.font(y.select(this),Ie.parcatsViewModel.categorylabelfont),i.convertToTspans(y.select(this),U)}),me.append("text").attr("class","dimlabel"),_e.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Ie){return"fixed"===Ie.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(Ie){return Ie.width/2}).attr("y",-5).text(function(Ie,je){return 0===je?Ie.parcatsViewModel.model.dimensions[Ie.model.dimensionInd].dimensionLabel:null}).each(function(Ie){a.font(y.select(this),Ie.parcatsViewModel.labelfont)}),_e.selectAll("rect.bandrect").on("mouseover",N).on("mouseout",F),_e.exit().remove(),de.call(y.behavior.drag().origin(function(Ie){return{x:Ie.x,y:0}}).on("dragstart",I).on("drag",P).on("dragend",j)),ne.each(function(Ie){Ie.traceSelection=y.select(this),Ie.pathSelection=y.select(this).selectAll("g.paths").selectAll("path.path"),Ie.dimensionSelection=y.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ne.exit().remove()}function h(q){return q.key}function s(q){return q.model.dimensionInd===q.parcatsViewModel.dimensions[q.parcatsViewModel.dimensions.length-1].model.dimensionInd}function d(q,U){return q.model.rawColor>U.model.rawColor?1:q.model.rawColor<U.model.rawColor?-1:0}function p(q){if(!q.parcatsViewModel.dragDimension&&-1===q.parcatsViewModel.hoverinfoItems.indexOf("skip")){e.raiseToTop(this),c(y.select(this));var U=g(q),W=m(q);if(q.parcatsViewModel.graphDiv.emit("plotly_hover",{points:U,event:y.event,constraints:W}),-1===q.parcatsViewModel.hoverinfoItems.indexOf("none")){var ae,G,te,ne=y.mouse(this)[0],le=q.parcatsViewModel.graphDiv,ue=q.parcatsViewModel.trace,pe=le._fullLayout,de=pe._paperdiv.node().getBoundingClientRect(),_e=q.parcatsViewModel.graphDiv.getBoundingClientRect();for(te=0;te<q.leftXs.length-1;te++)if(q.leftXs[te]+q.dimWidths[te]-2<=ne&&ne<=q.leftXs[te+1]+2){var me=q.parcatsViewModel.dimensions[te];ae=(me.x+me.width+q.parcatsViewModel.dimensions[te+1].x)/2,G=(q.topYs[te]+q.topYs[te+1]+q.height)/2;break}var De=q.parcatsViewModel.x+ae,Le=q.parcatsViewModel.y+G,Ie=l.mostReadable(q.model.color,["black","white"]),je=q.model.count,ye=je/q.parcatsViewModel.model.count,Me={countLabel:je,probabilityLabel:ye.toFixed(3)},Oe=[];-1!==q.parcatsViewModel.hoverinfoItems.indexOf("count")&&Oe.push(["Count:",Me.countLabel].join(" ")),-1!==q.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Oe.push(["P:",Me.probabilityLabel].join(" "));var Pe=Oe.join("<br>"),Re=y.mouse(le)[0];_.loneHover({trace:ue,x:De-de.left+_e.left,y:Le-de.top+_e.top,text:Pe,color:q.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Ie,idealAlign:Re<De?"right":"left",hovertemplate:(ue.line||{}).hovertemplate,hovertemplateLabels:Me,eventData:[{data:ue._input,fullData:ue,count:je,probability:ye}]},{container:pe._hoverlayer.node(),outerContainer:pe._paper.node(),gd:le})}}}function f(q){if(!q.parcatsViewModel.dragDimension&&(w(y.select(this)),_.loneUnhover(q.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),q.parcatsViewModel.pathSelection.sort(d),-1===q.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var U=g(q),W=m(q);q.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:U,event:y.event,constraints:W})}}function g(q){for(var U=[],W=V(q.parcatsViewModel),ae=0;ae<q.model.valueInds.length;ae++)U.push({curveNumber:W,pointNumber:q.model.valueInds[ae]});return U}function m(q){for(var U={},W=q.parcatsViewModel.model.dimensions,ae=0;ae<W.length;ae++){var G=W[ae];U[G.containerInd]=G.categories[q.model.categoryInds[ae]].categoryValue}return void 0!==q.model.rawColor&&(U.color=q.model.rawColor),U}function u(q){if(-1===q.parcatsViewModel.hoverinfoItems.indexOf("skip")){var U=g(q),W=m(q);q.parcatsViewModel.graphDiv.emit("plotly_click",{points:U,event:y.event,constraints:W})}}function w(q){q.attr("fill",function(U){return U.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function c(q){q.attr("fill-opacity",.8).attr("stroke",function(U){return l.mostReadable(U.model.color,["black","white"])}).attr("stroke-width",.3)}function A(q){q.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function k(q){q.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function C(q){var W=q.categoryViewModel.model.dimensionInd,ae=q.categoryViewModel.model.categoryInd;return q.parcatsViewModel.pathSelection.filter(function(G){return G.model.categoryInds[W]===ae&&G.model.color===q.color})}function E(q,U,W){var ae=y.select(q).datum(),G=ae.categoryViewModel.model,te=ae.parcatsViewModel.graphDiv,ne=y.select(q.parentNode).selectAll("rect.bandrect"),le=[];ne.each(function(pe){C(pe).each(function(de){Array.prototype.push.apply(le,g(de))})});var ue={};ue[G.dimensionInd]=G.categoryValue,te.emit(U,{points:le,event:W,constraints:ue})}function L(q,U,W){var ae=y.select(q).datum(),G=ae.categoryViewModel.model,te=ae.parcatsViewModel.graphDiv,ne=C(ae),le=[];ne.each(function(pe){Array.prototype.push.apply(le,g(pe))});var ue={};ue[G.dimensionInd]=G.categoryValue,void 0!==ae.rawColor&&(ue.color=ae.rawColor),te.emit(U,{points:le,event:W,constraints:ue})}function D(q,U,W){q._fullLayout._calcInverseTransform(q);var ae,G,te=q._fullLayout._invScaleX,ne=q._fullLayout._invScaleY,le=y.select(W.parentNode).select("rect.catrect"),ue=le.node().getBoundingClientRect(),pe=le.datum(),de=pe.parcatsViewModel,me=de.trace,we=ue.top+ue.height/2;de.dimensions.length>1&&de.model.dimensions[pe.model.dimensionInd].displayInd===de.dimensions.length-1?(ae=ue.left,G="left"):(ae=ue.left+ue.width,G="right");var De=pe.model.count,Le=pe.model.categoryLabel,Ie=De/pe.parcatsViewModel.model.count,je={countLabel:De,categoryLabel:Le,probabilityLabel:Ie.toFixed(3)},ye=[];-1!==pe.parcatsViewModel.hoverinfoItems.indexOf("count")&&ye.push(["Count:",je.countLabel].join(" ")),-1!==pe.parcatsViewModel.hoverinfoItems.indexOf("probability")&&ye.push(["P("+je.categoryLabel+"):",je.probabilityLabel].join(" "));var Me=ye.join("<br>");return{trace:me,x:te*(ae-U.left),y:ne*(we-U.top),text:Me,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:G,hovertemplate:me.hovertemplate,hovertemplateLabels:je,eventData:[{data:me._input,fullData:me,count:De,category:Le,probability:Ie}]}}function N(q){if(!q.parcatsViewModel.dragDimension&&-1===q.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(y.mouse(this)[1]<-1)return;var U,W=q.parcatsViewModel.graphDiv,ae=W._fullLayout,G=ae._paperdiv.node().getBoundingClientRect(),te=q.parcatsViewModel.hoveron;"color"===te?(c(ue=C(le=y.select(this).datum())),ue.each(function(){e.raiseToTop(this)}),y.select(this.parentNode).selectAll("rect.bandrect").filter(function(pe){return pe.color===le.color}).each(function(){e.raiseToTop(this),y.select(this).attr("stroke","black").attr("stroke-width",1.5)}),L(this,"plotly_hover",y.event)):(function(ne){y.select(ne.parentNode).selectAll("rect.bandrect").each(function(le){var ue=C(le);c(ue),ue.each(function(){e.raiseToTop(this)})}),y.select(ne.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(this),E(this,"plotly_hover",y.event)),-1===q.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===te?U=D(W,G,this):"color"===te?U=function(ne,le,ue){ne._fullLayout._calcInverseTransform(ne);var pe,de,_e=ne._fullLayout._invScaleX,me=ne._fullLayout._invScaleY,we=ue.getBoundingClientRect(),De=y.select(ue).datum(),Le=De.categoryViewModel,Ie=Le.parcatsViewModel,ye=Ie.trace,Me=we.y+we.height/2;Ie.dimensions.length>1&&Ie.model.dimensions[Le.model.dimensionInd].displayInd===Ie.dimensions.length-1?(pe=we.left,de="left"):(pe=we.left+we.width,de="right");var Oe=Le.model.categoryLabel,Pe=De.parcatsViewModel.model.count,Re=0;De.categoryViewModel.bands.forEach(function(bt){bt.color===De.color&&(Re+=bt.count)});var Ue=Le.model.count,qe=0;Ie.pathSelection.each(function(bt){bt.model.color===De.color&&(qe+=bt.model.count)});var Xe=Re/Pe,lt=Re/qe,He=Re/Ue,$e={countLabel:Pe,categoryLabel:Oe,probabilityLabel:Xe.toFixed(3)},et=[];-1!==Le.parcatsViewModel.hoverinfoItems.indexOf("count")&&et.push(["Count:",$e.countLabel].join(" ")),-1!==Le.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(et.push("P(color \u2229 "+Oe+"): "+$e.probabilityLabel),et.push("P("+Oe+" | color): "+lt.toFixed(3)),et.push("P(color | "+Oe+"): "+He.toFixed(3)));var nt=et.join("<br>"),ct=l.mostReadable(De.color,["black","white"]);return{trace:ye,x:_e*(pe-le.left),y:me*(Me-le.top),text:nt,color:De.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:ct,fontSize:10,idealAlign:de,hovertemplate:ye.hovertemplate,hovertemplateLabels:$e,eventData:[{data:ye._input,fullData:ye,category:Oe,count:Pe,probability:Xe,categorycount:Ue,colorcount:qe,bandcolorcount:Re}]}}(W,G,this):"dimension"===te&&(U=function(ne,le,ue){var pe=[];return y.select(ue.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){pe.push(D(ne,le,this))}),pe}(W,G,this)),U&&_.loneHover(U,{container:ae._hoverlayer.node(),outerContainer:ae._paper.node(),gd:W}))}var le,ue}function F(q){var U=q.parcatsViewModel;!U.dragDimension&&(w(U.pathSelection),A(U.dimensionSelection.selectAll("g.category")),k(U.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),_.loneUnhover(U.graphDiv._fullLayout._hoverlayer.node()),U.pathSelection.sort(d),-1===U.hoverinfoItems.indexOf("skip"))&&("color"===q.parcatsViewModel.hoveron?L(this,"plotly_unhover",y.event):E(this,"plotly_unhover",y.event))}function I(q){"fixed"!==q.parcatsViewModel.arrangement&&(q.dragDimensionDisplayInd=q.model.displayInd,q.initialDragDimensionDisplayInds=q.parcatsViewModel.model.dimensions.map(function(U){return U.displayInd}),q.dragHasMoved=!1,q.dragCategoryDisplayInd=null,y.select(this).selectAll("g.category").select("rect.catrect").each(function(U){var W=y.mouse(this)[0],ae=y.mouse(this)[1];-2<=W&&W<=U.width+2&&-2<=ae&&ae<=U.height+2&&(q.dragCategoryDisplayInd=U.model.displayInd,q.initialDragCategoryDisplayInds=q.model.categories.map(function(G){return G.displayInd}),U.model.dragY=U.y,e.raiseToTop(this.parentNode),y.select(this.parentNode).selectAll("rect.bandrect").each(function(G){G.y<ae&&ae<=G.y+G.height&&(q.potentialClickBand=this)}))}),q.parcatsViewModel.dragDimension=q,_.loneUnhover(q.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function P(q){if("fixed"!==q.parcatsViewModel.arrangement&&(q.dragHasMoved=!0,null!==q.dragDimensionDisplayInd)){var U=q.dragDimensionDisplayInd,W=U-1,ae=U+1,G=q.parcatsViewModel.dimensions[U];if(null!==q.dragCategoryDisplayInd){var te=G.categories[q.dragCategoryDisplayInd];te.model.dragY+=y.event.dy;var ne=te.model.dragY,le=te.model.displayInd,ue=G.categories,pe=ue[le-1],de=ue[le+1];void 0!==pe&&ne<pe.y+pe.height/2&&(te.model.displayInd=pe.model.displayInd,pe.model.displayInd=le),void 0!==de&&ne+te.height>de.y+de.height/2&&(te.model.displayInd=de.model.displayInd,de.model.displayInd=le),q.dragCategoryDisplayInd=te.model.displayInd}if(null===q.dragCategoryDisplayInd||"freeform"===q.parcatsViewModel.arrangement){G.model.dragX=y.event.x;var _e=q.parcatsViewModel.dimensions[W],me=q.parcatsViewModel.dimensions[ae];void 0!==_e&&G.model.dragX<_e.x+_e.width&&(G.model.displayInd=_e.model.displayInd,_e.model.displayInd=U),void 0!==me&&G.model.dragX+G.width>me.x&&(G.model.displayInd=me.model.displayInd,me.model.displayInd=q.dragDimensionDisplayInd),q.dragDimensionDisplayInd=G.model.displayInd}K(q.parcatsViewModel),X(q.parcatsViewModel),Y(q.parcatsViewModel),Z(q.parcatsViewModel)}}function j(q){if("fixed"!==q.parcatsViewModel.arrangement&&null!==q.dragDimensionDisplayInd){y.select(this).selectAll("text").attr("font-weight","normal");var U={},W=V(q.parcatsViewModel),ae=q.parcatsViewModel.model.dimensions.map(function(de){return de.displayInd}),G=q.initialDragDimensionDisplayInds.some(function(de,_e){return de!==ae[_e]});G&&ae.forEach(function(de,_e){U["dimensions["+q.parcatsViewModel.model.dimensions[_e].containerInd+"].displayindex"]=de});var te=!1;if(null!==q.dragCategoryDisplayInd){var ne=q.model.categories.map(function(de){return de.displayInd});if(te=q.initialDragCategoryDisplayInds.some(function(de,_e){return de!==ne[_e]})){var le=q.model.categories.slice().sort(function(de,_e){return de.displayInd-_e.displayInd}),ue=le.map(function(de){return de.categoryValue}),pe=le.map(function(de){return de.categoryLabel});U["dimensions["+q.model.containerInd+"].categoryarray"]=[ue],U["dimensions["+q.model.containerInd+"].ticktext"]=[pe],U["dimensions["+q.model.containerInd+"].categoryorder"]="array"}}-1===q.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!q.dragHasMoved&&q.potentialClickBand&&("color"===q.parcatsViewModel.hoveron?L(q.potentialClickBand,"plotly_click",y.event.sourceEvent):E(q.potentialClickBand,"plotly_click",y.event.sourceEvent)),q.model.dragX=null,null!==q.dragCategoryDisplayInd&&(q.parcatsViewModel.dimensions[q.dragDimensionDisplayInd].categories[q.dragCategoryDisplayInd].model.dragY=null,q.dragCategoryDisplayInd=null),q.dragDimensionDisplayInd=null,q.parcatsViewModel.dragDimension=null,q.dragHasMoved=null,q.potentialClickBand=null,K(q.parcatsViewModel),X(q.parcatsViewModel),y.transition().duration(300).ease("cubic-in-out").each(function(){Y(q.parcatsViewModel,!0),Z(q.parcatsViewModel,!0)}).each("end",function(){(G||te)&&M.restyle(q.parcatsViewModel.graphDiv,U,[W])})}}function V(q){for(var U,W=q.graphDiv._fullData,ae=0;ae<W.length;ae++)if(q.key===W[ae].uid){U=ae;break}return U}function Z(q,U){var W;void 0===U&&(U=!1),q.pathSelection.data(function(ae){return ae.paths},h),(W=q.pathSelection,U?W.transition():W).attr("d",function(ae){return ae.svgD})}function Y(q,U){function W(ne){return U?ne.transition():ne}void 0===U&&(U=!1),q.dimensionSelection.data(function(ne){return ne.dimensions},h);var ae=q.dimensionSelection.selectAll("g.category").data(function(ne){return ne.categories},h);W(q.dimensionSelection).attr("transform",function(ne){return o(ne.x,0)}),W(ae).attr("transform",function(ne){return o(0,ne.y)}),ae.select(".dimlabel").text(function(ne,le){return 0===le?ne.parcatsViewModel.model.dimensions[ne.model.dimensionInd].dimensionLabel:null}),ae.select(".catlabel").attr("text-anchor",function(ne){return s(ne)?"start":"end"}).attr("x",function(ne){return s(ne)?ne.width+5:-5}).each(function(ne){var le,ue;s(ne)?(le=ne.width+5,ue="start"):(le=-5,ue="end"),y.select(this).selectAll("tspan").attr("x",le).attr("text-anchor",ue)});var G=ae.selectAll("rect.bandrect").data(function(ne){return ne.bands},h),te=G.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(ne){return ne.color}).attr("fill-opacity",0);G.attr("fill",function(ne){return ne.color}).attr("width",function(ne){return ne.width}).attr("height",function(ne){return ne.height}).attr("y",function(ne){return ne.y}),k(te),G.each(function(){e.raiseToTop(this)}),G.exit().remove()}function ee(q,U,W){var ae,G=W[0],te=U.margin||{l:80,r:80,t:100,b:80},ne=G.trace,le=ne.domain,ue=U.width,pe=U.height,de=Math.floor(ue*(le.x[1]-le.x[0])),_e=Math.floor(pe*(le.y[1]-le.y[0])),me=le.x[0]*ue+te.l,we=U.height-le.y[1]*U.height+te.t,De=ne.line.shape;ae="all"===ne.hoverinfo?["count","probability"]:(ne.hoverinfo||"").split("+");var Le={trace:ne,key:ne.uid,model:G,x:me,y:we,width:de,height:_e,hoveron:ne.hoveron,hoverinfoItems:ae,arrangement:ne.arrangement,bundlecolors:ne.bundlecolors,sortpaths:ne.sortpaths,labelfont:ne.labelfont,categorylabelfont:ne.tickfont,pathShape:De,dragDimension:null,margin:te,paths:[],dimensions:[],graphDiv:q,traceSelection:null,pathSelection:null,dimensionSelection:null};return G.dimensions&&(K(Le),X(Le)),Le}function re(q,U,W,ae,G){var te,ne,le=[],ue=[];for(ne=0;ne<W.length-1;ne++)te=x(W[ne]+q[ne],q[ne+1]),le.push(te(G)),ue.push(te(1-G));var pe="M "+q[0]+","+U[0];for(pe+="l"+W[0]+",0 ",ne=1;ne<W.length;ne++)pe+="C"+le[ne-1]+","+U[ne-1]+" "+ue[ne-1]+","+U[ne]+" "+q[ne]+","+U[ne],pe+="l"+W[ne]+",0 ";for(pe+="l0,"+ae+" ",pe+="l -"+W[W.length-1]+",0 ",ne=W.length-2;ne>=0;ne--)pe+="C"+ue[ne]+","+(U[ne+1]+ae)+" "+le[ne]+","+(U[ne]+ae)+" "+(q[ne]+W[ne])+","+(U[ne]+ae),pe+="l-"+W[ne]+",0 ";return pe+"Z"}function X(q){var U=q.dimensions,W=q.model,ae=U.map(function(et){return et.categories.map(function(nt){return nt.y})}),G=q.model.dimensions.map(function(et){return et.categories.map(function(nt){return nt.displayInd})}),te=q.model.dimensions.map(function(et){return et.displayInd}),ne=q.dimensions.map(function(et){return et.model.dimensionInd}),le=U.map(function(et){return et.x}),ue=U.map(function(et){return et.width}),pe=[];for(var de in W.paths)W.paths.hasOwnProperty(de)&&pe.push(W.paths[de]);function _e(et){var nt=et.categoryInds.map(function(ct,bt){return G[bt][ct]});return ne.map(function(ct){return nt[ct]})}pe.sort(function(et,nt){var ct=_e(et),bt=_e(nt);return"backward"===q.sortpaths&&(ct.reverse(),bt.reverse()),ct.push(et.valueInds[0]),bt.push(nt.valueInds[0]),q.bundlecolors&&(ct.unshift(et.rawColor),bt.unshift(nt.rawColor)),ct<bt?-1:ct>bt?1:0});for(var me=new Array(pe.length),we=U[0].model.count,De=U[0].categories.map(function(et){return et.height}).reduce(function(et,nt){return et+nt}),Le=0;Le<pe.length;Le++){var Ie,je=pe[Le];Ie=we>0?De*(je.count/we):0;for(var ye,Me=new Array(ae.length),Oe=0;Oe<je.categoryInds.length;Oe++){var Re=G[Oe][je.categoryInds[Oe]],Ue=te[Oe];Me[Ue]=ae[Ue][Re],ae[Ue][Re]+=Ie;var qe=q.dimensions[Ue].categories[Re],Xe=qe.bands.length,lt=qe.bands[Xe-1];if(void 0===lt||je.rawColor!==lt.rawColor){var He=void 0===lt?0:lt.y+lt.height;qe.bands.push({key:He,color:je.color,rawColor:je.rawColor,height:Ie,width:qe.width,count:je.count,y:He,categoryViewModel:qe,parcatsViewModel:q})}else{var $e=qe.bands[Xe-1];$e.height+=Ie,$e.count+=je.count}}ye=re(le,Me,ue,Ie,"hspline"===q.pathShape?.5:0),me[Le]={key:je.valueInds[0],model:je,height:Ie,leftXs:le,topYs:Me,dimWidths:ue,svgD:ye,parcatsViewModel:q}}q.paths=me}function K(q){var U=q.model.dimensions.map(function(ne){return{displayInd:ne.displayInd,dimensionInd:ne.dimensionInd}});U.sort(function(ne,le){return ne.displayInd-le.displayInd});var W=[];for(var ae in U)W.push(ie(q,q.model.dimensions[U[ae].dimensionInd]));q.dimensions=W}function ie(q,U){var W,ae=q.model.dimensions.length;W=40+(ae>1?(q.width-80-16)/(ae-1):0)*U.displayInd;var te,ne,le,pe,de=[],_e=q.model.maxCats,me=U.categories.length,we=U.count,De=q.height-8*(_e-1),Le=8*(_e-me)/2,Ie=U.categories.map(function(je){return{displayInd:je.displayInd,categoryInd:je.categoryInd}});for(Ie.sort(function(je,ye){return je.displayInd-ye.displayInd}),pe=0;pe<me;pe++)le={key:(ne=U.categories[Ie[pe].categoryInd]).valueInds[0],model:ne,width:16,height:te=we>0?ne.count/we*De:0,y:null!==ne.dragY?ne.dragY:Le,bands:[],parcatsViewModel:q},Le=Le+te+8,de.push(le);return{key:U.dimensionInd,x:null!==U.dragX?U.dragX:W,y:0,width:16,model:U,categories:de,parcatsViewModel:q,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}oe.exports=function(q,U,W,ae){v(W,q,ae,U)}},{"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_api":540,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:312}],887:[function(b,oe,se){"use strict";var y=b("./parcats");oe.exports=function(x,M,_,e){var o=x._fullLayout,l=o._size;y(x,o._paper,M,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},_,e)}},{"./parcats":886}],888:[function(b,oe,se){"use strict";var y=b("../../components/colorscale/attributes"),x=b("../../plots/cartesian/layout_attributes"),M=b("../../plots/font_attributes"),_=b("../../plots/domain").attributes,e=b("../../lib/extend").extendFlat,o=b("../../plot_api/plot_template").templatedArray;oe.exports={domain:_({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:M({editType:"plot"}),tickfont:M({editType:"plot"}),rangefont:M({editType:"plot"}),dimensions:o("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},x.tickvals,{editType:"plot"}),ticktext:e({},x.ticktext,{editType:"plot"}),tickformat:e({},x.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},y("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],889:[function(b,oe,se){"use strict";var y=b("./constants"),x=b("@plotly/d3"),M=b("../../lib/gup").keyFun,_=b("../../lib/gup").repeat,e=b("../../lib").sorterAsc,o=b("../../lib").strTranslate,a=y.bar.snapRatio;function l(D,N){return D*(1-a)+N*a}var i=y.bar.snapClose;function v(D,N){return D*(1-i)+N*i}function h(D,N,F,I){if(function(ie,q){for(var U=0;U<q.length;U++)if(ie>=q[U][0]&&ie<=q[U][1])return!0;return!1}(F,I))return F;var P=D?-1:1,j=0,V=N.length-1;if(P<0){var Z=j;j=V,V=Z}for(var Y=N[j],ee=Y,re=j;P*re<P*V;re+=P){var X=re+P,K=N[X];if(P*F<P*v(Y,K))return l(Y,ee);if(P*F<P*K||X===V)return l(K,Y);ee=Y,Y=K}}function s(D){D.attr("x",-y.bar.captureWidth/2).attr("width",y.bar.captureWidth)}function d(D){D.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function p(D){if(!D.brush.filterSpecified)return"0,"+D.height;for(var N,F,I,P=f(D.brush.filter.getConsolidated(),D.height),j=[0],V=P.length?P[0][0]:null,Z=0;Z<P.length;Z++)F=(N=P[Z])[1]-N[0],j.push(V),j.push(F),(I=Z+1)<P.length&&(V=P[I][0]-N[1]);return j.push(D.height),j}function f(D,N){return D.map(function(F){return F.map(function(I){return Math.max(0,I*N)}).sort(e)})}function g(){x.select(document.body).style("cursor",null)}function m(D){D.attr("stroke-dasharray",p)}function u(D,N){var F=x.select(D).selectAll(".highlight, .highlight-shadow");m(N?F.transition().duration(y.bar.snapDuration).each("end",N):F)}function w(D,N){var F,I=D.brush,P=NaN,j={};if(I.filterSpecified){var V=D.height,Z=I.filter.getConsolidated(),Y=f(Z,V),ee=NaN,re=NaN,X=NaN;for(F=0;F<=Y.length;F++){var K=Y[F];if(K&&K[0]<=N&&N<=K[1]){ee=F;break}if(re=F?F-1:NaN,K&&K[0]>N){X=F;break}}if(P=ee,isNaN(P)&&(P=isNaN(re)||isNaN(X)?isNaN(re)?X:re:N-Y[re][1]<Y[X][0]-N?re:X),!isNaN(P)){var ie=Y[P],q=function(G,te){var ne=y.bar.handleHeight;if(!(te>G[1]+ne||te<G[0]-ne))return te>=.9*G[1]+.1*G[0]?"n":te<=.9*G[0]+.1*G[1]?"s":"ns"}(ie,N);q&&(j.interval=Z[P],j.intervalPix=ie,j.region=q)}}if(D.ordinal&&!j.region){var U=D.unitTickvals,W=D.unitToPaddedPx.invert(N);for(F=0;F<U.length;F++){var ae=[.25*U[Math.max(F-1,0)]+.75*U[F],.25*U[Math.min(F+1,U.length-1)]+.75*U[F]];if(W>=ae[0]&&W<=ae[1]){j.clickableOrdinalRange=ae;break}}}return j}function c(D,N){x.event.sourceEvent.stopPropagation();var F=N.height-x.mouse(D)[1]-2*y.verticalPadding,I=N.brush.svgBrush;I.wasDragged=!0,I._dragging=!0,I.newExtent=I.grabbingBar?[F-I.grabPoint,F+I.barLength-I.grabPoint].map(N.unitToPaddedPx.invert):[I.startExtent,N.unitToPaddedPx.invert(F)].sort(e),N.brush.filterSpecified=!0,I.extent=I.stayingIntervals.concat([I.newExtent]),I.brushCallback(N),u(D.parentNode)}function A(D,N){var F=w(N,N.height-x.mouse(D)[1]-2*y.verticalPadding),I="crosshair";F.clickableOrdinalRange?I="pointer":F.region&&(I=F.region+"-resize"),x.select(document.body).style("cursor",I)}function k(D){D.on("mousemove",function(N){x.event.preventDefault(),N.parent.inBrushDrag||A(this,N)}).on("mouseleave",function(N){N.parent.inBrushDrag||g()}).call(x.behavior.drag().on("dragstart",function(N){!function(F,I){x.event.sourceEvent.stopPropagation();var P=I.height-x.mouse(F)[1]-2*y.verticalPadding,j=I.unitToPaddedPx.invert(P),V=I.brush,Z=w(I,P),Y=Z.interval,ee=V.svgBrush;if(ee.wasDragged=!1,ee.grabbingBar="ns"===Z.region,ee.grabbingBar){var re=Y.map(I.unitToPaddedPx);ee.grabPoint=P-re[0]-y.verticalPadding,ee.barLength=re[1]-re[0]}ee.clickableOrdinalRange=Z.clickableOrdinalRange,ee.stayingIntervals=I.multiselect&&V.filterSpecified?V.filter.getConsolidated():[],Y&&(ee.stayingIntervals=ee.stayingIntervals.filter(function(X){return X[0]!==Y[0]&&X[1]!==Y[1]})),ee.startExtent=Z.region?Y["s"===Z.region?1:0]:j,I.parent.inBrushDrag=!0,ee.brushStartCallback()}(this,N)}).on("drag",function(N){c(this,N)}).on("dragend",function(N){!function(F,I){var P=I.brush,j=P.filter,V=P.svgBrush;V._dragging||(A(F,I),c(F,I),I.brush.svgBrush.wasDragged=!1),V._dragging=!1,x.event.sourceEvent.stopPropagation();var Z=V.grabbingBar;if(V.grabbingBar=!1,V.grabLocation=void 0,I.parent.inBrushDrag=!1,g(),!V.wasDragged)return V.wasDragged=void 0,V.clickableOrdinalRange?P.filterSpecified&&I.multiselect?V.extent.push(V.clickableOrdinalRange):(V.extent=[V.clickableOrdinalRange],P.filterSpecified=!0):Z?(V.extent=V.stayingIntervals,0===V.extent.length&&E(P)):E(P),V.brushCallback(I),u(F.parentNode),void V.brushEndCallback(P.filterSpecified?j.getConsolidated():[]);var Y=function(){j.set(j.getConsolidated())};if(I.ordinal){var ee=I.unitTickvals;ee[ee.length-1]<ee[0]&&ee.reverse(),V.newExtent=[h(0,ee,V.newExtent[0],V.stayingIntervals),h(1,ee,V.newExtent[1],V.stayingIntervals)];var re=V.newExtent[1]>V.newExtent[0];V.extent=V.stayingIntervals.concat(re?[V.newExtent]:[]),V.extent.length||E(P),V.brushCallback(I),re?u(F.parentNode,Y):(Y(),u(F.parentNode))}else Y();V.brushEndCallback(P.filterSpecified?j.getConsolidated():[])}(this,N)}))}function C(D,N){return D[0]-N[0]}function E(D){D.filterSpecified=!1,D.svgBrush.extent=[[-1/0,1/0]]}function L(D){for(var N,F=D.slice(),I=[],P=F.shift();P;){for(N=P.slice();(P=F.shift())&&P[0]<=N[1];)N[1]=Math.max(N[1],P[1]);I.push(N)}return 1===I.length&&I[0][0]>I[0][1]&&(I=[]),I}oe.exports={makeBrush:function(D,N,F,I,P,j){var V,Y,ee,re,Z=(re=[],{set:function(X){1===(re=X.map(function(K){return K.slice().sort(e)}).sort(C)).length&&re[0][0]===-1/0&&re[0][1]===1/0&&(re=[[0,-1]]),Y=L(re),ee=re.reduce(function(K,ie){return[Math.min(K[0],ie[0]),Math.max(K[1],ie[1])]},[1/0,-1/0])},get:function(){return re.slice()},getConsolidated:function(){return Y},getBounds:function(){return ee}});return Z.set(F),{filter:Z,filterSpecified:N,svgBrush:{extent:[],brushStartCallback:I,brushCallback:(V=P,function(Y){var X,ee=Y.brush,re=(X=ee,X.svgBrush.extent.map(function(K){return K.slice()})).slice();ee.filter.set(re),V()}),brushEndCallback:j}}},ensureAxisBrush:function(D,N){var F=D.selectAll("."+y.cn.axisBrush).data(_,M);F.enter().append("g").classed(y.cn.axisBrush,!0),function(I,P){var j=I.selectAll(".background").data(_);j.enter().append("rect").classed("background",!0).call(s).call(d).style("pointer-events","auto").attr("transform",o(0,y.verticalPadding)),j.call(k).attr("height",function(Y){return Y.height-y.verticalPadding});var V=I.selectAll(".highlight-shadow").data(_);V.enter().append("line").classed("highlight-shadow",!0).attr("x",-y.bar.width/2).attr("stroke-width",y.bar.width+y.bar.strokeWidth).attr("stroke",P).attr("opacity",y.bar.strokeOpacity).attr("stroke-linecap","butt"),V.attr("y1",function(Y){return Y.height}).call(m);var Z=I.selectAll(".highlight").data(_);Z.enter().append("line").classed("highlight",!0).attr("x",-y.bar.width/2).attr("stroke-width",y.bar.width-y.bar.strokeWidth).attr("stroke",y.bar.fillColor).attr("opacity",y.bar.fillOpacity).attr("stroke-linecap","butt"),Z.attr("y1",function(Y){return Y.height}).call(m)}(F,N)},cleanRanges:function(D,N){if(Array.isArray(D[0])?(D=D.map(function(I){return I.sort(e)}),D=N.multiselect?L(D.sort(C)):[D[0]]):D=[D.sort(e)],N.tickvals){var F=N.tickvals.slice().sort(e);if(!(D=D.map(function(I){var P=[h(0,F,I[0],[]),h(1,F,I[1],[])];if(P[1]>P[0])return P}).filter(function(I){return I})).length)return}return D.length>1?D:D[0]}}},{"../../lib":503,"../../lib/gup":500,"./constants":893,"@plotly/d3":58}],890:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:b("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":888,"./base_plot":891,"./calc":892,"./defaults":894}],891:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../plots/get_data").getModuleCalcData,M=b("./plot"),_=b("../../constants/xmlns_namespaces");se.name="parcoords",se.plot=function(e){var o=x(e.calcdata,"parcoords")[0];o.length&&M(e,o)},se.clean=function(e,o,a,l){var i=l._has&&l._has("parcoords"),v=o._has&&o._has("parcoords");i&&!v&&(l._paperdiv.selectAll(".parcoords").remove(),l._glimages.selectAll("*").remove())},se.toSVG=function(e){var o=e._fullLayout._glimages,a=y.select(e).selectAll(".svg-container");a.filter(function(l,i){return i===a.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var l=this.toDataURL("image/png");o.append("svg:image").attr({xmlns:_.svg,"xlink:href":l,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}),window.setTimeout(function(){y.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":480,"../../plots/get_data":593,"./plot":900,"@plotly/d3":58}],892:[function(b,oe,se){"use strict";var y=b("../../lib").isArrayOrTypedArray,x=b("../../components/colorscale"),M=b("../../lib/gup").wrap;oe.exports=function(_,e){var o,a;return x.hasColorscale(e,"line")&&y(e.line.color)?(o=e.line.color,a=x.extractOpts(e.line).colorscale,x.calc(_,e,{vals:o,containerStr:"line",cLetter:"c"})):(o=function(l){for(var i=new Array(l),v=0;v<l;v++)i[v]=.5;return i}(e._length),a=[[0,e.line.color],[1,e.line.color]]),M({lineColor:o,cscale:a})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500}],893:[function(b,oe,se){"use strict";oe.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],894:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../components/colorscale/helpers").hasColorscale,M=b("../../components/colorscale/defaults"),_=b("../../plots/domain").defaults,e=b("../../plots/array_container_defaults"),o=b("../../plots/cartesian/axes"),a=b("./attributes"),l=b("./axisbrush"),i=b("./constants").maxDimensionCount,v=b("./merge_length");function h(s,d,p,f){function g(A,k){return y.coerce(s,d,a.dimensions,A,k)}var m=g("values"),u=g("visible");if(m&&m.length||(u=d.visible=!1),u){g("label"),g("tickvals"),g("ticktext"),g("tickformat");var w=g("range");d._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:w},o.setConvert(d._ax,f.layout),g("multiselect");var c=g("constraintrange");c&&(d.constraintrange=l.cleanRanges(c,d))}}oe.exports=function(s,d,p,f){function g(A,k){return y.coerce(s,d,a,A,k)}var m=s.dimensions;Array.isArray(m)&&m.length>i&&(y.log("parcoords traces support up to "+i+" dimensions at the moment"),m.splice(i));var u=e(s,d,{name:"dimensions",layout:f,handleItemDefaults:h}),w=function(A,k,C,E,L){var D=L("line.color",C);if(x(A,"line")&&y.isArrayOrTypedArray(D)){if(D.length)return L("line.colorscale"),M(A,k,E,L,{prefix:"line.",cLetter:"c"}),D.length;k.line.color=C}return 1/0}(s,d,p,f,g);_(d,f,g),Array.isArray(u)&&u.length||(d.visible=!1),v(d,u,"values",w);var c={family:f.font.family,size:Math.round(f.font.size/1.2),color:f.font.color};y.coerceFont(g,"labelfont",c),y.coerceFont(g,"tickfont",c),y.coerceFont(g,"rangefont",c),g("labelangle"),g("labelside")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../../plots/domain":584,"./attributes":888,"./axisbrush":889,"./constants":893,"./merge_length":898}],895:[function(b,oe,se){"use strict";var y=b("../../lib").isTypedArray;se.convertTypedArray=function(x){return y(x)?Array.prototype.slice.call(x):x},se.isOrdinal=function(x){return!!x.tickvals},se.isVisible=function(x){return x.visible||!("visible"in x)}},{"../../lib":503}],896:[function(b,oe,se){"use strict";var y=b("./base_index");y.plot=b("./plot"),oe.exports=y},{"./base_index":890,"./plot":900}],897:[function(b,oe,se){"use strict";var y=b("glslify"),x=y(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),M=y(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),_=b("./constants").maxDimensionCount,e=b("../../lib"),o=new Uint8Array(4),a=new Uint8Array(4),l={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function i(u,w,c,A,k){var C=u._gl;C.enable(C.SCISSOR_TEST),C.scissor(w,c,A,k),u.clear({color:[0,0,0,0],depth:1})}function v(u,w,c,A,k,C){var E=C.key;c.drawCompleted||(u.read({x:0,y:0,width:1,height:1,data:o}),c.drawCompleted=!0),function L(D){var N=Math.min(A,k-D*A);0===D&&(window.cancelAnimationFrame(c.currentRafs[E]),delete c.currentRafs[E],i(u,C.scissorX,C.scissorY,C.scissorWidth,C.viewBoxSize[1])),c.clearOnly||(C.count=2*N,C.offset=2*D*A,w(C),D*A+N<k&&(c.currentRafs[E]=window.requestAnimationFrame(function(){L(D+1)})),c.drawCompleted=!1)}(0)}function h(u,w){for(var c=new Array(256),A=0;A<256;A++)c[A]=u(A/255).concat(w);return c}function s(u,w){return(u>>>8*w)%256/255}function d(u,w,c){for(var A=new Array(8*w),k=0,C=0;C<w;C++)for(var E=0;E<2;E++)for(var L=0;L<4;L++){var D=4*u+L,N=c[64*C+D];63===D&&0===E&&(N*=-1),A[k++]=N}return A}function p(u){var w="0"+u;return w.substr(w.length-2)}function f(u){return u<_?"p"+p(u+1)+"_"+p(u+4):"colors"}function g(u,w,c,A,k,C,E,L,D,N,F,I,P,j){for(var V=[[],[]],Z=0;Z<64;Z++)V[0][Z]=Z===k?1:0,V[1][Z]=Z===C?1:0;var Y=u.lines.canvasOverdrag*j,ee=u.domain,re=u.canvasWidth*j,X=u.canvasHeight*j,K=u.pad.l*j,ie=u.pad.b*j,q=u.layoutHeight*j,U=u.layoutWidth*j,W=u.deselectedLines.color;return e.extendFlat({key:F,resolution:[re,X],viewBoxPos:[(E*=j)+Y,L*=j],viewBoxSize:[D*=j,N*=j],i0:k,i1:C,dim0A:V[0].slice(0,16),dim0B:V[0].slice(16,32),dim0C:V[0].slice(32,48),dim0D:V[0].slice(48,64),dim1A:V[1].slice(0,16),dim1B:V[1].slice(16,32),dim1C:V[1].slice(32,48),dim1D:V[1].slice(48,64),drwLayer:I,contextColor:[W[0]/255,W[1]/255,W[2]/255,W[3]<1?W[3]:Math.max(1/255,Math.pow(1/u.lines.color.length,1/3))],scissorX:(A===w?0:E+Y)+(K-Y)+U*ee.x[0],scissorWidth:(A===c?re-E+Y:D+.5)+(A===w?E+Y:0),scissorY:L+ie+q*ee.y[0],scissorHeight:N,viewportX:K-Y+U*ee.x[0],viewportY:ie+q*ee.y[0],viewportWidth:re,viewportHeight:X},P)}function m(u){var w=Math.max(0,Math.floor(2047*u[0]),0),c=Math.min(2047,Math.ceil(2047*u[1]),2047);return[Math.min(w,c),Math.max(w,c)]}oe.exports=function(u,w){var c,k,C,E,L=w.context,D=w.pick,N=w.regl,F=N._gl,I=F.getParameter(F.ALIASED_LINE_WIDTH_RANGE),P=Math.max(I[0],Math.min(I[1],w.viewModel.plotGlPixelRatio)),j={currentRafs:{},drawCompleted:!0,clearOnly:!1},V=function(X){for(var K={},ie=0;ie<=_;ie+=4)K[f(ie)]=X.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return K}(N),Z=N.texture(l),Y=[];re(w);var ee=N({profile:!1,blend:{enable:L,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!L,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:N.prop("scissorX"),y:N.prop("scissorY"),width:N.prop("scissorWidth"),height:N.prop("scissorHeight")}},viewport:{x:N.prop("viewportX"),y:N.prop("viewportY"),width:N.prop("viewportWidth"),height:N.prop("viewportHeight")},dither:!1,vert:x,frag:M,primitive:"lines",lineWidth:P,attributes:V,uniforms:{resolution:N.prop("resolution"),viewBoxPos:N.prop("viewBoxPos"),viewBoxSize:N.prop("viewBoxSize"),dim0A:N.prop("dim0A"),dim1A:N.prop("dim1A"),dim0B:N.prop("dim0B"),dim1B:N.prop("dim1B"),dim0C:N.prop("dim0C"),dim1C:N.prop("dim1C"),dim0D:N.prop("dim0D"),dim1D:N.prop("dim1D"),loA:N.prop("loA"),hiA:N.prop("hiA"),loB:N.prop("loB"),hiB:N.prop("hiB"),loC:N.prop("loC"),hiC:N.prop("hiC"),loD:N.prop("loD"),hiD:N.prop("hiD"),palette:Z,contextColor:N.prop("contextColor"),maskTexture:N.prop("maskTexture"),drwLayer:N.prop("drwLayer"),maskHeight:N.prop("maskHeight")},offset:N.prop("offset"),count:N.prop("count")});function re(X){c=X.model,k=X.viewModel.dimensions.slice(),C=k[0]?k[0].values.length:0;var K=c.lines,ie=D?K.color.map(function(U,W){return W/K.color.length}):K.color,q=function(U,W,ae){for(var te=new Array(U*(_+4)),ne=0,le=0;le<U;le++){for(var ue=0;ue<_;ue++)te[ne++]=ue<W.length?W[ue].paddedUnitValues[le]:.5;te[ne++]=s(le,2),te[ne++]=s(le,1),te[ne++]=s(le,0),te[ne++]=Math.max(1e-6,Math.min(.999999,ae[le]))}return te}(C,k,ie);(function(U,W,ae){for(var G=0;G<=_;G+=4)U[f(G)](d(G/4,W,ae))})(V,C,q),L||D||(Z=N.texture(e.extendFlat({data:h(c.unitToColor,255)},l)))}return{render:function(X,K,ie){var q,U,W,ae=X.length,G=1/0,te=-1/0;for(q=0;q<ae;q++)X[q].dim0.canvasX<G&&(G=X[q].dim0.canvasX,U=q),X[q].dim1.canvasX>te&&(te=X[q].dim1.canvasX,W=q);0===ae&&i(N,0,0,c.canvasWidth,c.canvasHeight);var ne=function(Ie){var je,ye,Me,Oe=[[],[]];for(Me=0;Me<64;Me++){var Pe=!Ie&&Me<k.length?k[Me].brush.filter.getBounds():[-1/0,1/0];Oe[0][Me]=Pe[0],Oe[1][Me]=Pe[1]}var Re=new Array(16384);for(je=0;je<16384;je++)Re[je]=255;if(!Ie)for(je=0;je<k.length;je++){var Ue=je%8,qe=(je-Ue)/8,Xe=Math.pow(2,Ue),lt=k[je].brush.filter.get();if(!(lt.length<2)){var He=m(lt[0])[1];for(ye=1;ye<lt.length;ye++){var $e=m(lt[ye]);for(Me=He+1;Me<$e[0];Me++)Re[8*Me+qe]&=~Xe;He=Math.max(He,$e[1])}}}var et={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Re};return E?E(et):E=N.texture(et),{maskTexture:E,maskHeight:2048,loA:Oe[0].slice(0,16),loB:Oe[0].slice(16,32),loC:Oe[0].slice(32,48),loD:Oe[0].slice(48,64),hiA:Oe[1].slice(0,16),hiB:Oe[1].slice(16,32),hiC:Oe[1].slice(32,48),hiD:Oe[1].slice(48,64)}}(L);for(q=0;q<ae;q++){var le=X[q],ue=le.dim0.crossfilterDimensionIndex,pe=le.dim1.crossfilterDimensionIndex,de=le.canvasX,_e=le.canvasY,me=de+le.panelSizeX,we=le.plotGlPixelRatio;if(K||!Y[ue]||Y[ue][0]!==de||Y[ue][1]!==me){Y[ue]=[de,me];var De=g(c,U,W,q,ue,pe,de,_e,le.panelSizeX,le.panelSizeY,le.dim0.crossfilterDimensionIndex,L?0:D?2:1,ne,we);j.clearOnly=ie,v(N,ee,j,K?c.lines.blockLineCount:C,C,De)}}},readPixel:function(X,K){return N.read({x:X,y:K,width:1,height:1,data:a}),a},readPixels:function(X,K,ie,q){var U=new Uint8Array(4*ie*q);return N.read({x:X,y:K,width:ie,height:q,data:U}),U},destroy:function(){for(var X in u.style["pointer-events"]="none",Z.destroy(),E&&E.destroy(),V)V[X].destroy()},update:re}}},{"../../lib":503,"./constants":893,glslify:227}],898:[function(b,oe,se){"use strict";oe.exports=function(y,x,M,_){var e,o;for(_||(_=1/0),e=0;e<x.length;e++)(o=x[e]).visible&&(_=Math.min(_,o[M].length));for(_===1/0&&(_=0),y._length=_,e=0;e<x.length;e++)(o=x[e]).visible&&(o._length=_);return _}},{}],899:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../lib"),M=x.numberFormat,_=b("color-rgba"),e=b("../../plots/cartesian/axes"),o=x.strRotate,a=x.strTranslate,l=b("../../lib/svg_text_utils"),i=b("../../components/drawing"),v=b("../../components/colorscale"),h=b("../../lib/gup"),s=h.keyFun,d=h.repeat,p=h.unwrap,f=b("./helpers"),g=b("./constants"),m=b("./axisbrush"),u=b("./lines");function w(Y,ee,re){return x.aggNums(Y,null,ee,re)}function c(Y,ee){return k(w(Math.min,Y,ee),w(Math.max,Y,ee))}function A(Y){var ee=Y.range;return ee?k(ee[0],ee[1]):c(Y.values,Y._length)}function k(Y,ee){return!isNaN(Y)&&isFinite(Y)||(Y=0),!isNaN(ee)&&isFinite(ee)||(ee=0),Y===ee&&(0===Y?(Y-=1,ee+=1):(Y*=.9,ee*=1.1)),[Y,ee]}function C(Y,ee,re,X,K){var ie,q,U=A(re);return X?y.scale.ordinal().domain(X.map((ie=M(re.tickformat),q=K,q?function(W,ae){var G=q[ae];return null==G?ie(W):G}:ie))).range(X.map(function(W){return Y-ee+(W-U[0])/(U[1]-U[0])*(2*ee-Y)})):y.scale.linear().domain(U).range([Y-ee,ee])}function E(Y){if(Y.tickvals){var ee=A(Y);return y.scale.ordinal().domain(Y.tickvals).range(Y.tickvals.map(function(re){return(re-ee[0])/(ee[1]-ee[0])}))}}function L(Y){var ee=Y.map(function(K){return K[0]}),re=Y.map(function(K){var ie=_(K[1]);return y.rgb("rgb("+ie[0]+","+ie[1]+","+ie[2]+")")}),X="rgb".split("").map(function(K){return y.scale.linear().clamp(!0).domain(ee).range(re.map((ie=K,function(q){return q[ie]})));var ie});return function(K){return X.map(function(ie){return ie(K)})}}function D(Y){return Y.dimensions.some(function(ee){return ee.brush.filterSpecified})}function N(Y,ee,re){var X=p(ee),K=X.trace,ie=f.convertTypedArray(X.lineColor),q=K.line,U={color:_(g.deselectedLineColor)},W=v.extractOpts(q),ae=W.reversescale?v.flipScale(X.cscale):X.cscale,G=K.domain,te=K.dimensions,ne=Y.width,le=K.labelangle,ue=K.labelside,pe=K.labelfont,de=K.tickfont,_e=K.rangefont,me=x.extendDeepNoArrays({},q,{color:ie.map(y.scale.linear().domain(A({values:ie,range:[W.min,W.max],_length:K._length}))),blockLineCount:g.blockLineCount,canvasOverdrag:g.overdrag*g.canvasPixelRatio}),we=Math.floor(ne*(G.x[1]-G.x[0])),De=Math.floor(Y.height*(G.y[1]-G.y[0])),Le=Y.margin||{l:80,r:80,t:100,b:80},Ie=we,je=De;return{key:re,colCount:te.filter(f.isVisible).length,dimensions:te,tickDistance:g.tickDistance,unitToColor:L(ae),lines:me,deselectedLines:U,labelAngle:le,labelSide:ue,labelFont:pe,tickFont:de,rangeFont:_e,layoutWidth:ne,layoutHeight:Y.height,domain:G,translateX:G.x[0]*ne,translateY:Y.height-G.y[1]*Y.height,pad:Le,canvasWidth:Ie*g.canvasPixelRatio+2*me.canvasOverdrag,canvasHeight:je*g.canvasPixelRatio,width:Ie,height:je,canvasPixelRatio:g.canvasPixelRatio}}function F(Y,ee,re){var ne,le,X=re.width,K=re.height,ie=re.dimensions,q=re.canvasPixelRatio,U=function(ne){return X*ne/Math.max(1,re.colCount-1)},W=g.verticalPadding/K,ae=(ne=K,le=g.verticalPadding,y.scale.linear().range([le,ne-le])),G={key:re.key,xScale:U,model:re,inBrushDrag:!1},te={};return G.dimensions=ie.filter(f.isVisible).map(function(ne,le){var Re,Ue,ue=(Re=ne,Ue=W,y.scale.linear().domain(A(Re)).range([Ue,1-Ue])),pe=te[ne.label];te[ne.label]=(pe||0)+1;var de=ne.label+(pe?"__"+pe:""),_e=ne.constraintrange,me=_e&&_e.length;me&&!Array.isArray(_e[0])&&(_e=[_e]);var we=me?_e.map(function(Re){return Re.map(ue)}):[[-1/0,1/0]],De=ne.values;De.length>ne._length&&(De=De.slice(0,ne._length));var Le,Ie=ne.tickvals;function je(Re,Ue){return{val:Re,text:Le[Ue]}}function ye(Re,Ue){return Re.val-Ue.val}if(Array.isArray(Ie)&&Ie.length){Le=ne.ticktext,Array.isArray(Le)&&Le.length?Le.length>Ie.length?Le=Le.slice(0,Ie.length):Ie.length>Le.length&&(Ie=Ie.slice(0,Le.length)):Le=Ie.map(M(ne.tickformat));for(var Me=1;Me<Ie.length;Me++)if(Ie[Me]<Ie[Me-1]){for(var Oe=Ie.map(je).sort(ye),Pe=0;Pe<Ie.length;Pe++)Ie[Pe]=Oe[Pe].val,Le[Pe]=Oe[Pe].text;break}}else Ie=void 0;return De=f.convertTypedArray(De),{key:de,label:ne.label,tickFormat:ne.tickformat,tickvals:Ie,ticktext:Le,ordinal:f.isOrdinal(ne),multiselect:ne.multiselect,xIndex:le,crossfilterDimensionIndex:le,visibleIndex:ne._index,height:K,values:De,paddedUnitValues:De.map(ue),unitTickvals:Ie&&Ie.map(ue),xScale:U,x:U(le),canvasX:U(le)*q,unitToPaddedPx:ae,domainScale:C(K,g.verticalPadding,ne,Ie,Le),ordinalScale:E(ne),parent:G,model:re,brush:m.makeBrush(Y,me,we,function(){Y.linePickActive(!1)},function(){var Re=G;Re.focusLayer&&Re.focusLayer.render(Re.panels,!0);var Ue=D(Re);!Y.contextShown()&&Ue?(Re.contextLayer&&Re.contextLayer.render(Re.panels,!0),Y.contextShown(!0)):Y.contextShown()&&!Ue&&(Re.contextLayer&&Re.contextLayer.render(Re.panels,!0,!0),Y.contextShown(!1))},function(Re){if(G.focusLayer.render(G.panels,!0),G.pickLayer&&G.pickLayer.render(G.panels,!0),Y.linePickActive(!0),ee&&ee.filterChanged){var Ue=ue.invert,qe=Re.map(function(Xe){return Xe.map(Ue).sort(x.sorterAsc)}).sort(function(Xe,lt){return Xe[0]-lt[0]});ee.filterChanged(G.key,ne._index,qe)}})}}),G}function I(Y){Y.classed(g.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function P(Y,ee){var X=Y*Math.PI/180;return{dir:"top"===ee?1:-1,dx:Math.sin(X),dy:Math.cos(X),degrees:Y}}function j(Y,ee,re){for(var X=ee.panels||(ee.panels=[]),K=Y.data(),ie=0;ie<K.length-1;ie++){var q=X[ie]||(X[ie]={}),U=K[ie],W=K[ie+1];q.dim0=U,q.dim1=W,q.canvasX=U.canvasX,q.panelSizeX=W.canvasX-U.canvasX,q.panelSizeY=ee.model.canvasHeight,q.y=0,q.canvasY=0,q.plotGlPixelRatio=re}}function V(Y,ee){return e.tickText(Y._ax,ee,!1).text}function Z(Y,ee){if(Y.ordinal)return"";var re=Y.domainScale.domain();return V(Y.model.dimensions[Y.visibleIndex],re[ee?re.length-1:0])}oe.exports=function(Y,ee,re,X){var K=Y._fullLayout,ie=K._toppaper,q=K._glcontainer,U=Y._context.plotGlPixelRatio,W=Y._fullLayout.paper_bgcolor;!function(Pe){for(var Re=0;Re<Pe.length;Re++)for(var Ue=0;Ue<Pe[Re].length;Ue++)for(var qe=Pe[Re][Ue].trace,Xe=qe.dimensions,lt=0;lt<Xe.length;lt++){var He=Xe[lt].values,$e=Xe[lt]._ax;$e&&($e.range=$e.range?k($e.range[0],$e.range[1]):c(He,qe._length),$e.dtick||($e.dtick=.01*(Math.abs($e.range[1]-$e.range[0])||1)),$e.tickformat=Xe[lt].tickformat,e.calcTicks($e),$e.cleanRange())}}(ee);var ae,G,te=(ae=!0,G=!1,{linePickActive:function(Pe){return arguments.length?ae=!!Pe:ae},contextShown:function(Pe){return arguments.length?G=!!Pe:G}}),ne=ee.filter(function(Pe){return p(Pe).trace.visible}).map(N.bind(0,re)).map(F.bind(0,te,X));q.each(function(Pe,Re){return x.extendFlat(Pe,ne[Re])});var le=q.selectAll(".gl-canvas").each(function(Pe){Pe.viewModel=ne[0],Pe.viewModel.plotGlPixelRatio=U,Pe.viewModel.paperColor=W,Pe.model=Pe.viewModel?Pe.viewModel.model:null}),ue=null;le.filter(function(Pe){return Pe.pick}).style("pointer-events","auto").on("mousemove",function(Pe){if(te.linePickActive()&&Pe.lineLayer&&X&&X.hover){var Re=y.event,Ue=this.width,qe=this.height,Xe=y.mouse(this),lt=Xe[0],He=Xe[1];if(lt<0||He<0||lt>=Ue||He>=qe)return;var $e=Pe.lineLayer.readPixel(lt,qe-1-He),et=0!==$e[3],nt=et?$e[2]+256*($e[1]+256*$e[0]):null,ct={x:lt,y:He,clientX:Re.clientX,clientY:Re.clientY,dataIndex:Pe.model.key,curveNumber:nt};nt!==ue&&(et?X.hover(ct):X.unhover&&X.unhover(ct),ue=nt)}}),le.style("opacity",function(Pe){return Pe.pick?0:1}),ie.style("background","rgba(255, 255, 255, 0)");var pe=ie.selectAll("."+g.cn.parcoords).data(ne,s);pe.exit().remove(),pe.enter().append("g").classed(g.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),pe.attr("transform",function(Pe){return a(Pe.model.translateX,Pe.model.translateY)});var de=pe.selectAll("."+g.cn.parcoordsControlView).data(d,s);de.enter().append("g").classed(g.cn.parcoordsControlView,!0),de.attr("transform",function(Pe){return a(Pe.model.pad.l,Pe.model.pad.t)});var _e=de.selectAll("."+g.cn.yAxis).data(function(Pe){return Pe.dimensions},s);_e.enter().append("g").classed(g.cn.yAxis,!0),de.each(function(Pe){j(_e,Pe,U)}),le.each(function(Pe){Pe.viewModel&&(!Pe.lineLayer||X?Pe.lineLayer=u(this,Pe):Pe.lineLayer.update(Pe),(Pe.key||0===Pe.key)&&(Pe.viewModel[Pe.key]=Pe.lineLayer),Pe.lineLayer.render(Pe.viewModel.panels,!Pe.context||X))}),_e.attr("transform",function(Pe){return a(Pe.xScale(Pe.xIndex),0)}),_e.call(y.behavior.drag().origin(function(Pe){return Pe}).on("drag",function(Pe){var Re=Pe.parent;te.linePickActive(!1),Pe.x=Math.max(-g.overdrag,Math.min(Pe.model.width+g.overdrag,y.event.x)),Pe.canvasX=Pe.x*Pe.model.canvasPixelRatio,_e.sort(function(Ue,qe){return Ue.x-qe.x}).each(function(Ue,qe){Ue.xIndex=qe,Ue.x=Pe===Ue?Ue.x:Ue.xScale(Ue.xIndex),Ue.canvasX=Ue.x*Ue.model.canvasPixelRatio}),j(_e,Re,U),_e.filter(function(Ue){return 0!==Math.abs(Pe.xIndex-Ue.xIndex)}).attr("transform",function(Ue){return a(Ue.xScale(Ue.xIndex),0)}),y.select(this).attr("transform",a(Pe.x,0)),_e.each(function(Ue,qe,Xe){Xe===Pe.parent.key&&(Re.dimensions[qe]=Ue)}),Re.contextLayer&&Re.contextLayer.render(Re.panels,!1,!D(Re)),Re.focusLayer.render&&Re.focusLayer.render(Re.panels)}).on("dragend",function(Pe){var Re=Pe.parent;Pe.x=Pe.xScale(Pe.xIndex),Pe.canvasX=Pe.x*Pe.model.canvasPixelRatio,j(_e,Re,U),y.select(this).attr("transform",function(Ue){return a(Ue.x,0)}),Re.contextLayer&&Re.contextLayer.render(Re.panels,!1,!D(Re)),Re.focusLayer&&Re.focusLayer.render(Re.panels),Re.pickLayer&&Re.pickLayer.render(Re.panels,!0),te.linePickActive(!0),X&&X.axesMoved&&X.axesMoved(Re.key,Re.dimensions.map(function(Ue){return Ue.crossfilterDimensionIndex}))})),_e.exit().remove();var me=_e.selectAll("."+g.cn.axisOverlays).data(d,s);me.enter().append("g").classed(g.cn.axisOverlays,!0),me.selectAll("."+g.cn.axis).remove();var we=me.selectAll("."+g.cn.axis).data(d,s);we.enter().append("g").classed(g.cn.axis,!0),we.each(function(Pe){var Re=Pe.model.height/Pe.model.tickDistance,Ue=Pe.domainScale,qe=Ue.domain();y.select(this).call(y.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Re,Pe.tickFormat).tickValues(Pe.ordinal?qe:null).tickFormat(function(Xe){return f.isOrdinal(Pe)?Xe:V(Pe.model.dimensions[Pe.visibleIndex],Xe)}).scale(Ue)),i.font(we.selectAll("text"),Pe.model.tickFont)}),we.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),we.selectAll("text").style("text-shadow",l.makeTextShadow(W)).style("cursor","default");var De=me.selectAll("."+g.cn.axisHeading).data(d,s);De.enter().append("g").classed(g.cn.axisHeading,!0);var Le=De.selectAll("."+g.cn.axisTitle).data(d,s);Le.enter().append("text").classed(g.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),Le.text(function(Pe){return Pe.label}).each(function(Pe){var Re=y.select(this);i.font(Re,Pe.model.labelFont),l.convertToTspans(Re,Y)}).attr("transform",function(Pe){var Re=P(Pe.model.labelAngle,Pe.model.labelSide),Ue=g.axisTitleOffset;return(Re.dir>0?"":a(0,2*Ue+Pe.model.height))+o(Re.degrees)+a(-Ue*Re.dx,-Ue*Re.dy)}).attr("text-anchor",function(Pe){var Re=P(Pe.model.labelAngle,Pe.model.labelSide);return 2*Math.abs(Re.dx)>Math.abs(Re.dy)?Re.dir*Re.dx<0?"start":"end":"middle"});var Ie=me.selectAll("."+g.cn.axisExtent).data(d,s);Ie.enter().append("g").classed(g.cn.axisExtent,!0);var je=Ie.selectAll("."+g.cn.axisExtentTop).data(d,s);je.enter().append("g").classed(g.cn.axisExtentTop,!0),je.attr("transform",a(0,-g.axisExtentOffset));var ye=je.selectAll("."+g.cn.axisExtentTopText).data(d,s);ye.enter().append("text").classed(g.cn.axisExtentTopText,!0).call(I),ye.text(function(Pe){return Z(Pe,!0)}).each(function(Pe){i.font(y.select(this),Pe.model.rangeFont)});var Me=Ie.selectAll("."+g.cn.axisExtentBottom).data(d,s);Me.enter().append("g").classed(g.cn.axisExtentBottom,!0),Me.attr("transform",function(Pe){return a(0,Pe.model.height+g.axisExtentOffset)});var Oe=Me.selectAll("."+g.cn.axisExtentBottomText).data(d,s);Oe.enter().append("text").classed(g.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(I),Oe.text(function(Pe){return Z(Pe,!1)}).each(function(Pe){i.font(y.select(this),Pe.model.rangeFont)}),m.ensureAxisBrush(me,W)}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"./axisbrush":889,"./constants":893,"./helpers":895,"./lines":897,"@plotly/d3":58,"color-rgba":91}],900:[function(b,oe,se){"use strict";var y=b("./parcoords"),x=b("../../lib/prepare_regl"),M=b("./helpers").isVisible,_={};function e(o,a,l){var i=a.indexOf(l),v=o.indexOf(i);return-1===v&&(v+=a.length),v}(oe.exports=function(o,a){var l=o._fullLayout;if(x(o,[],_)){var i={},v={},h={},s={},d=l._size;a.forEach(function(p,f){var g=p[0].trace;h[f]=g.index;var m=s[f]=g._fullInput.index;i[f]=o.data[m].dimensions,v[f]=o.data[m].dimensions.slice()}),y(o,a,{width:d.w,height:d.h,margin:{t:d.t,r:d.r,b:d.b,l:d.l}},{filterChanged:function(p,f,g){var m=v[p][f],u=g.map(function(E){return E.slice()}),w="dimensions["+f+"].constraintrange",c=l._tracePreGUI[o._fullData[h[p]]._fullInput.uid];void 0===c[w]&&(c[w]=m.constraintrange||null);var k=o._fullData[h[p]].dimensions[f];u.length?(1===u.length&&(u=u[0]),m.constraintrange=u,k.constraintrange=u.slice(),u=[u]):(delete m.constraintrange,delete k.constraintrange,u=null);var C={};C[w]=u,o.emit("plotly_restyle",[C,[s[p]]])},hover:function(p){o.emit("plotly_hover",p)},unhover:function(p){o.emit("plotly_unhover",p)},axesMoved:function(p,f){var m,u,g=(m=f,u=v[p].filter(M),function(w,c){return e(m,u,w)-e(m,u,c)});i[p].sort(g),v[p].filter(function(m){return!M(m)}).sort(function(m){return v[p].indexOf(m)}).forEach(function(m){i[p].splice(i[p].indexOf(m),1),i[p].splice(v[p].indexOf(m),0,m)}),o.emit("plotly_restyle",[{dimensions:[i[p]]},[s[p]]])}})}}).reglPrecompiled=_},{"../../lib/prepare_regl":516,"./helpers":895,"./parcoords":899}],901:[function(b,oe,se){"use strict";var y=b("../../plots/attributes"),x=b("../../plots/domain").attributes,M=b("../../plots/font_attributes"),_=b("../../components/color/attributes"),e=b("../../plots/template_attributes").hovertemplateAttrs,o=b("../../plots/template_attributes").texttemplateAttrs,a=b("../../lib/extend").extendFlat,l=M({editType:"plot",arrayOk:!0,colorEditType:"plot"});oe.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:_.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:a({},y.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:o({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:a({},l,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:a({},l,{}),outsidetextfont:a({},l,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:a({},l,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:x({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:a({},l,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],902:[function(b,oe,se){"use strict";var y=b("../../plots/plots");se.name="pie",se.plot=function(x,M,_,e){y.plotBasePlot(se.name,x,M,_,e)},se.clean=function(x,M,_,e){y.cleanBasePlot(se.name,x,M,_,e)}},{"../../plots/plots":619}],903:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("tinycolor2"),M=b("../../components/color"),_={};function e(a){return function(l,i){return!!l&&!!(l=x(l)).isValid()&&(l=M.addOpacity(l,l.getAlpha()),a[i]||(a[i]=l),l)}}function o(a,l){var i,v=JSON.stringify(a),h=l[v];if(!h){for(h=a.slice(),i=0;i<a.length;i++)h.push(x(a[i]).lighten(20).toHexString());for(i=0;i<a.length;i++)h.push(x(a[i]).darken(20).toHexString());l[v]=h}return h}oe.exports={calc:function(a,l){var i,v,h=[],s=a._fullLayout,d=s.hiddenlabels||[],p=l.labels,f=l.marker.colors||[],g=l.values,m=l._length,u=l._hasValues&&m;if(l.dlabel)for(p=new Array(m),i=0;i<m;i++)p[i]=String(l.label0+i*l.dlabel);var w={},c=e(s["_"+l.type+"colormap"]),A=0,k=!1;for(i=0;i<m;i++){var C,E,L;if(u){if(!y(C=g[i]))continue;C=+C}else C=1;void 0!==(E=p[i])&&""!==E||(E=i);var D=w[E=String(E)];void 0===D?(w[E]=h.length,(L=-1!==d.indexOf(E))||(A+=C),h.push({v:C,label:E,color:c(f[i],E),i,pts:[i],hidden:L})):(k=!0,(v=h[D]).v+=C,v.pts.push(i),v.hidden||(A+=C),!1===v.color&&f[i]&&(v.color=c(f[i],E)))}return h=h.filter(function(N){return N.v>=0}),("funnelarea"===l.type?k:l.sort)&&h.sort(function(N,F){return F.v-N.v}),h[0]&&(h[0].vTotal=A),h},crossTraceCalc:function(a,l){var i=(l||{}).type;i||(i="pie");var v=a._fullLayout,h=a.calcdata,s=v[i+"colorway"],d=v["_"+i+"colormap"];v["extend"+i+"colors"]&&(s=o(s,_));for(var p=0,f=0;f<h.length;f++){var g=h[f];if(g[0].trace.type===i)for(var m=0;m<g.length;m++){var u=g[m];!1===u.color&&(d[u.label]?u.color=d[u.label]:(d[u.label]=u.color=s[p%s.length],p++))}}},makePullColorFn:e,generateExtendedColors:o}},{"../../components/color":366,"fast-isnumeric":190,tinycolor2:312}],904:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../lib"),M=b("./attributes"),_=b("../../plots/domain").defaults,e=b("../bar/defaults").handleText;function o(a,l){var i=Array.isArray(a),v=x.isArrayOrTypedArray(l),h=Math.min(i?a.length:1/0,v?l.length:1/0);if(isFinite(h)||(h=0),h&&v){for(var s,d=0;d<h;d++){var p=l[d];if(y(p)&&p>0){s=!0;break}}s||(h=0)}return{hasLabels:i,hasValues:v,len:h}}oe.exports={handleLabelsAndValues:o,supplyDefaults:function(a,l,i,v){function h(c,A){return x.coerce(a,l,M,c,A)}var s=o(h("labels"),h("values")),d=s.len;if(l._hasLabels=s.hasLabels,l._hasValues=s.hasValues,!l._hasLabels&&l._hasValues&&(h("label0"),h("dlabel")),d){l._length=d,h("marker.line.width")&&h("marker.line.color"),h("marker.colors"),h("scalegroup");var p,f=h("text"),g=h("texttemplate");if(g||(p=h("textinfo",Array.isArray(f)?"text+percent":"percent")),h("hovertext"),h("hovertemplate"),g||p&&"none"!==p){var m=h("textposition");e(a,l,v,h,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(m)||"auto"===m||"outside"===m)&&h("automargin"),("inside"===m||"auto"===m||Array.isArray(m))&&h("insidetextorientation")}_(l,v,h);var u=h("hole");if(h("title.text")){var w=h("title.position",u?"middle center":"top center");u||"middle center"!==w||(l.title.position="top center"),x.coerceFont(h,"title.font",v.font)}h("sort"),h("direction"),h("rotation"),h("pull")}else l.visible=!1}}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":901,"fast-isnumeric":190}],905:[function(b,oe,se){"use strict";var y=b("../../components/fx/helpers").appendArrayMultiPointValues;oe.exports=function(x,M){var _={curveNumber:M.index,pointNumbers:x.pts,data:M._input,fullData:M,label:x.label,color:x.color,value:x.v,percent:x.percent,text:x.text,bbox:x.bbox,v:x.v};return 1===x.pts.length&&(_.pointNumber=_.i=x.pts[0]),y(_,M,x.pts),"funnelarea"===M.type&&(delete _.v,delete _.i),_}},{"../../components/fx/helpers":402}],906:[function(b,oe,se){"use strict";var y=b("../../lib");function x(M){return-1!==M.indexOf("e")?M.replace(/[.]?0+e/,"e"):-1!==M.indexOf(".")?M.replace(/[.]?0+$/,""):M}se.formatPiePercent=function(M,_){var e=x((100*M).toPrecision(3));return y.numSeparate(e,_)+"%"},se.formatPieValue=function(M,_){var e=x(M.toPrecision(10));return y.numSeparate(e,_)},se.getFirstFilled=function(M,_){if(Array.isArray(M))for(var e=0;e<_.length;e++){var o=M[_[e]];if(o||0===o||""===o)return o}},se.castOption=function(M,_){return Array.isArray(M)?se.getFirstFilled(M,_):M||void 0},se.getRotationAngle=function(M){return("auto"===M?0:M)*Math.PI/180}},{"../../lib":503}],907:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,supplyLayoutDefaults:b("./layout_defaults"),layoutAttributes:b("./layout_attributes"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style"),styleOne:b("./style_one"),moduleType:"trace",name:"pie",basePlotModule:b("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":901,"./base_plot":902,"./calc":903,"./defaults":904,"./layout_attributes":908,"./layout_defaults":909,"./plot":910,"./style":911,"./style_one":912}],908:[function(b,oe,se){"use strict";oe.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],909:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./layout_attributes");oe.exports=function(M,_){function e(o,a){return y.coerce(M,_,x,o,a)}e("hiddenlabels"),e("piecolorway",_.colorway),e("extendpiecolors")}},{"../../lib":503,"./layout_attributes":908}],910:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../plots/plots"),M=b("../../components/fx"),_=b("../../components/color"),e=b("../../components/drawing"),o=b("../../lib"),a=o.strScale,l=o.strTranslate,i=b("../../lib/svg_text_utils"),v=b("../bar/uniform_text"),h=v.recordMinTextSize,s=v.clearMinTextSize,d=b("../bar/constants").TEXTPAD,p=b("./helpers"),f=b("./event_data"),g=b("../../lib").isValidTextValue;function m(ee,re,X){var K=X[0],ie=K.cx,q=K.cy,U=K.trace,W="funnelarea"===U.type;"_hasHoverLabel"in U||(U._hasHoverLabel=!1),"_hasHoverEvent"in U||(U._hasHoverEvent=!1),ee.on("mouseover",function(ae){var G=re._fullLayout,te=re._fullData[U.index];if(!re._dragging&&!1!==G.hovermode){var ne=te.hoverinfo;if(Array.isArray(ne)&&(ne=M.castHoverinfo({hoverinfo:[p.castOption(ne,ae.pts)],_module:U._module},G,0)),"all"===ne&&(ne="label+text+value+percent+name"),te.hovertemplate||"none"!==ne&&"skip"!==ne&&ne){var le=ae.rInscribed||0,ue=ie+ae.pxmid[0]*(1-le),pe=q+ae.pxmid[1]*(1-le),de=G.separators,_e=[];if(ne&&-1!==ne.indexOf("label")&&_e.push(ae.label),ae.text=p.castOption(te.hovertext||te.text,ae.pts),ne&&-1!==ne.indexOf("text")){var me=ae.text;o.isValidTextValue(me)&&_e.push(me)}ae.value=ae.v,ae.valueLabel=p.formatPieValue(ae.v,de),ne&&-1!==ne.indexOf("value")&&_e.push(ae.valueLabel),ae.percent=ae.v/K.vTotal,ae.percentLabel=p.formatPiePercent(ae.percent,de),ne&&-1!==ne.indexOf("percent")&&_e.push(ae.percentLabel);var we=te.hoverlabel,De=we.font,Le=[];M.loneHover({trace:U,x0:ue-le*K.r,x1:ue+le*K.r,y:pe,_x0:W?ie+ae.TL[0]:ue-le*K.r,_x1:W?ie+ae.TR[0]:ue+le*K.r,_y0:W?q+ae.TL[1]:pe-le*K.r,_y1:W?q+ae.BL[1]:pe+le*K.r,text:_e.join("<br>"),name:te.hovertemplate||-1!==ne.indexOf("name")?te.name:void 0,idealAlign:ae.pxmid[0]<0?"left":"right",color:p.castOption(we.bgcolor,ae.pts)||ae.color,borderColor:p.castOption(we.bordercolor,ae.pts),fontFamily:p.castOption(De.family,ae.pts),fontSize:p.castOption(De.size,ae.pts),fontColor:p.castOption(De.color,ae.pts),nameLength:p.castOption(we.namelength,ae.pts),textAlign:p.castOption(we.align,ae.pts),hovertemplate:p.castOption(te.hovertemplate,ae.pts),hovertemplateLabels:ae,eventData:[f(ae,te)]},{container:G._hoverlayer.node(),outerContainer:G._paper.node(),gd:re,inOut_bbox:Le}),ae.bbox=Le[0],U._hasHoverLabel=!0}U._hasHoverEvent=!0,re.emit("plotly_hover",{points:[f(ae,te)],event:y.event})}}),ee.on("mouseout",function(ae){var G=re._fullLayout,te=re._fullData[U.index],ne=y.select(this).datum();U._hasHoverEvent&&(ae.originalEvent=y.event,re.emit("plotly_unhover",{points:[f(ne,te)],event:y.event}),U._hasHoverEvent=!1),U._hasHoverLabel&&(M.loneUnhover(G._hoverlayer.node()),U._hasHoverLabel=!1)}),ee.on("click",function(ae){re._dragging||!1===re._fullLayout.hovermode||(re._hoverdata=[f(ae,re._fullData[U.index])],M.click(re,y.event))})}function u(ee,re,X){var K=p.castOption(ee.insidetextfont.color,re.pts);!K&&ee._input.textfont&&(K=p.castOption(ee._input.textfont.color,re.pts));var ie=p.castOption(ee.insidetextfont.family,re.pts)||p.castOption(ee.textfont.family,re.pts)||X.family,q=p.castOption(ee.insidetextfont.size,re.pts)||p.castOption(ee.textfont.size,re.pts)||X.size;return{color:K||_.contrast(re.color),family:ie,size:q}}function w(ee,re){for(var X,K,ie=0;ie<ee.length;ie++)if((K=(X=ee[ie][0]).trace).title.text){var q=K.title.text;K._meta&&(q=o.templateString(q,K._meta));var U=e.tester.append("text").attr("data-notex",1).text(q).call(e.font,K.title.font).call(i.convertToTspans,re),W=e.bBox(U.node(),!0);X.titleBox={width:W.width,height:W.height},U.remove()}}function c(ee,re,X){var K=X.r||re.rpx1,ie=re.rInscribed;if(re.startangle===re.stopangle)return{rCenter:1-ie,scale:0,rotate:0,textPosAngle:0};var q,U=re.ring,W=1===U&&Math.abs(re.startangle-re.stopangle)===2*Math.PI,ae=re.halfangle,G=re.midangle,te=X.trace.insidetextorientation,ne="horizontal"===te,le="tangential"===te,ue="radial"===te,pe="auto"===te,de=[];if(!pe){var _e,me=function(ye,Me){if(lt=(Ue=re).stopangle,(Xe=Ue.startangle)>(qe=ye)&&qe>lt||Xe<qe&&qe<lt){var Oe=Math.abs(ye-re.startangle),Pe=Math.abs(ye-re.stopangle),Re=Oe<Pe?Oe:Pe;(q="tan"===Me?k(ee,K,U,Re,0):A(ee,K,U,Re,Math.PI/2)).textPosAngle=ye,de.push(q)}var Ue,qe,Xe,lt};if(ne||le){for(_e=4;_e>=-4;_e-=2)me(Math.PI*_e,"tan");for(_e=4;_e>=-4;_e-=2)me(Math.PI*(_e+1),"tan")}if(ne||ue){for(_e=4;_e>=-4;_e-=2)me(Math.PI*(_e+1.5),"rad");for(_e=4;_e>=-4;_e-=2)me(Math.PI*(_e+.5),"rad")}}if(W||pe||ne){var we=Math.sqrt(ee.width*ee.width+ee.height*ee.height);if((q={scale:ie*K*2/we,rCenter:1-ie,rotate:0}).textPosAngle=(re.startangle+re.stopangle)/2,q.scale>=1)return q;de.push(q)}(pe||ue)&&((q=A(ee,K,U,ae,G)).textPosAngle=(re.startangle+re.stopangle)/2,de.push(q)),(pe||le)&&((q=k(ee,K,U,ae,G)).textPosAngle=(re.startangle+re.stopangle)/2,de.push(q));for(var De=0,Le=0,Ie=0;Ie<de.length;Ie++){var je=de[Ie].scale;if(Le<je&&(Le=je,De=Ie),!pe&&Le>=1)break}return de[De]}function A(ee,re,X,K,ie){re=Math.max(0,re-2*d);var q=ee.width/ee.height,U=L(q,K,re,X);return{scale:2*U/ee.height,rCenter:C(q,U/re),rotate:E(ie)}}function k(ee,re,X,K,ie){re=Math.max(0,re-2*d);var q=ee.height/ee.width,U=L(q,K,re,X);return{scale:2*U/ee.width,rCenter:C(q,U/re),rotate:E(ie+Math.PI/2)}}function C(ee,re){return Math.cos(re)-ee*re}function E(ee){return(180/Math.PI*ee+720)%180-90}function L(ee,re,X,K){var ie=ee+1/(2*Math.tan(re));return X*Math.min(1/(Math.sqrt(ie*ie+.5)+ie),K/(Math.sqrt(ee*ee+K/2)+ee))}function D(ee,re){return ee.v!==re.vTotal||re.trace.hole?Math.min(1/(1+1/Math.sin(ee.halfangle)),ee.ring/2):1}function N(ee,re){var X=re.pxmid[0],K=re.pxmid[1],ie=ee.width/2,q=ee.height/2;return X<0&&(ie*=-1),K<0&&(q*=-1),{scale:1,rCenter:1,rotate:0,x:ie+Math.abs(q)*(ie>0?1:-1)/2,y:q/(1+X*X/(K*K)),outside:!0}}function F(ee,re){var X,K,ie,q=ee.trace,U={x:ee.cx,y:ee.cy},W={tx:0,ty:0};W.ty+=q.title.font.size,ie=P(q),-1!==q.title.position.indexOf("top")?(U.y-=(1+ie)*ee.r,W.ty-=ee.titleBox.height):-1!==q.title.position.indexOf("bottom")&&(U.y+=(1+ie)*ee.r);var G,te=ee.r/(void 0===(G=ee.trace.aspectratio)?1:G),ne=re.w*(q.domain.x[1]-q.domain.x[0])/2;return-1!==q.title.position.indexOf("left")?(ne+=te,U.x-=(1+ie)*te,W.tx+=ee.titleBox.width/2):-1!==q.title.position.indexOf("center")?ne*=2:-1!==q.title.position.indexOf("right")&&(ne+=te,U.x+=(1+ie)*te,W.tx-=ee.titleBox.width/2),X=ne/ee.titleBox.width,K=I(ee,re)/ee.titleBox.height,{x:U.x,y:U.y,scale:Math.min(X,K),tx:W.tx,ty:W.ty}}function I(ee,re){var X=ee.trace;return Math.min(ee.titleBox.height,re.h*(X.domain.y[1]-X.domain.y[0])/2)}function P(ee){var re,X=ee.pull;if(!X)return 0;if(Array.isArray(X))for(X=0,re=0;re<ee.pull.length;re++)ee.pull[re]>X&&(X=ee.pull[re]);return X}function j(ee,re){for(var X=[],K=0;K<ee.length;K++){var ie=ee[K][0],q=ie.trace,U=q.domain,W=re.w*(U.x[1]-U.x[0]),ae=re.h*(U.y[1]-U.y[0]);q.title.text&&"middle center"!==q.title.position&&(ae-=I(ie,re));var te=ae/2;"funnelarea"!==q.type||q.scalegroup||(te/=q.aspectratio),ie.r=Math.min(W/2,te)/(1+P(q)),ie.cx=re.l+re.w*(q.domain.x[1]+q.domain.x[0])/2,ie.cy=re.t+re.h*(1-q.domain.y[0])-ae/2,q.title.text&&-1!==q.title.position.indexOf("bottom")&&(ie.cy-=I(ie,re)),q.scalegroup&&-1===X.indexOf(q.scalegroup)&&X.push(q.scalegroup)}!function(ne,le){for(var ue,pe,de,_e=0;_e<le.length;_e++){var me=1/0,we=le[_e];for(pe=0;pe<ne.length;pe++)if((de=(ue=ne[pe][0]).trace).scalegroup===we){var De;if("pie"===de.type)De=ue.r*ue.r;else if("funnelarea"===de.type){var Le,Ie;de.aspectratio>1?Ie=(Le=ue.r)/de.aspectratio:Le=(Ie=ue.r)*de.aspectratio,De=(Le*=(1+de.baseratio)/2)*Ie}me=Math.min(me,De/ue.vTotal)}for(pe=0;pe<ne.length;pe++)if((de=(ue=ne[pe][0]).trace).scalegroup===we){var je=me*ue.vTotal;"funnelarea"===de.type&&(je/=(1+de.baseratio)/2,je/=de.aspectratio),ue.r=Math.sqrt(je)}}}(ee,X)}function V(ee,re){return[ee*Math.sin(re),-ee*Math.cos(re)]}function Z(ee,re,X){var De,K=ee._fullLayout,ie=X.trace,q=ie.texttemplate,U=ie.textinfo;if(!q&&U&&"none"!==U){var W,ae=U.split("+"),G=function(De){return-1!==ae.indexOf(De)},te=G("label"),ne=G("text"),le=G("value"),ue=G("percent"),pe=K.separators;if(W=te?[re.label]:[],ne){var de=p.getFirstFilled(ie.text,re.pts);g(de)&&W.push(de)}le&&W.push(p.formatPieValue(re.v,pe)),ue&&W.push(p.formatPiePercent(re.v/X.vTotal,pe)),re.text=W.join("<br>")}if(q){var _e=o.castOption(ie,re.i,"texttemplate");if(_e){var me={label:(De=re).label,value:De.v,valueLabel:p.formatPieValue(De.v,K.separators),percent:De.v/X.vTotal,percentLabel:p.formatPiePercent(De.v/X.vTotal,K.separators),color:De.color,text:De.text,customdata:o.castOption(ie,De.i,"customdata")},we=p.getFirstFilled(ie.text,re.pts);(g(we)||""===we)&&(me.text=we),re.text=o.texttemplateString(_e,me,ee._fullLayout._d3locale,me,ie._meta||{})}else re.text=""}}function Y(ee,re){var X=ee.rotate*Math.PI/180,K=Math.cos(X),ie=Math.sin(X),q=(re.left+re.right)/2,U=(re.top+re.bottom)/2;ee.textX=q*K-U*ie,ee.textY=q*ie+U*K,ee.noCenter=!0}oe.exports={plot:function(ee,re){var X=ee._fullLayout,K=X._size;s("pie",X),w(re,ee),j(re,K);var ie=o.makeTraceGroups(X._pielayer,re,"trace").each(function(q){var U=y.select(this),W=q[0],ae=W.trace;(function(G){var te,ne,le,ue=G[0],pe=ue.r,de=ue.trace,_e=p.getRotationAngle(de.rotation),me=2*Math.PI/ue.vTotal,we="px0",De="px1";if("counterclockwise"===de.direction){for(te=0;te<G.length&&G[te].hidden;te++);if(te===G.length)return;_e+=me*G[te].v,me*=-1,we="px1",De="px0"}for(le=V(pe,_e),te=0;te<G.length;te++)(ne=G[te]).hidden||(ne[we]=le,ne.startangle=_e,ne.pxmid=V(pe,_e+=me*ne.v/2),ne.midangle=_e,le=V(pe,_e+=me*ne.v/2),ne.stopangle=_e,ne[De]=le,ne.largeArc=ne.v>ue.vTotal/2?1:0,ne.halfangle=Math.PI*Math.min(ne.v/ue.vTotal,.5),ne.ring=1-de.hole,ne.rInscribed=D(ne,ue))})(q),U.attr("stroke-linejoin","round"),U.each(function(){var G=y.select(this).selectAll("g.slice").data(q);G.enter().append("g").classed("slice",!0),G.exit().remove();var te=[[[],[]],[[],[]]],ne=!1;G.each(function(De,Le){if(De.hidden)y.select(this).selectAll("path,g").remove();else{De.pointNumber=De.i,De.curveNumber=ae.index,te[De.pxmid[1]<0?0:1][De.pxmid[0]<0?0:1].push(De);var Ie=W.cx,je=W.cy,ye=y.select(this),Me=ye.selectAll("path.surface").data([De]);if(Me.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),ye.call(m,ee,q),ae.pull){var Oe=+p.castOption(ae.pull,De.pts)||0;Oe>0&&(Ie+=Oe*De.pxmid[0],je+=Oe*De.pxmid[1])}De.cxFinal=Ie,De.cyFinal=je;var Pe=ae.hole;if(De.v===W.vTotal){var Re="M"+(Ie+De.px0[0])+","+(je+De.px0[1])+He(De.px0,De.pxmid,!0,1)+He(De.pxmid,De.px0,!0,1)+"Z";Me.attr("d",Pe?"M"+(Ie+Pe*De.px0[0])+","+(je+Pe*De.px0[1])+He(De.px0,De.pxmid,!1,Pe)+He(De.pxmid,De.px0,!1,Pe)+"Z"+Re:Re)}else{var Ue=He(De.px0,De.px1,!0,1);if(Pe){var qe=1-Pe;Me.attr("d","M"+(Ie+Pe*De.px1[0])+","+(je+Pe*De.px1[1])+He(De.px1,De.px0,!1,Pe)+"l"+qe*De.px0[0]+","+qe*De.px0[1]+Ue+"Z")}else Me.attr("d","M"+Ie+","+je+"l"+De.px0[0]+","+De.px0[1]+Ue+"Z")}Z(ee,De,W);var Xe=p.castOption(ae.textposition,De.pts),lt=ye.selectAll("g.slicetext").data(De.text&&"none"!==Xe?[0]:[]);lt.enter().append("g").classed("slicetext",!0),lt.exit().remove(),lt.each(function(){var ht,at,Ft,$e=o.ensureSingle(y.select(this),"text","",function(ht){ht.attr("data-notex",1)}),et=o.ensureUniformFontSize(ee,"outside"===Xe?(Ft=X.font,{color:p.castOption((ht=ae).outsidetextfont.color,(at=De).pts)||p.castOption(ht.textfont.color,at.pts)||Ft.color,family:p.castOption(ht.outsidetextfont.family,at.pts)||p.castOption(ht.textfont.family,at.pts)||Ft.family,size:p.castOption(ht.outsidetextfont.size,at.pts)||p.castOption(ht.textfont.size,at.pts)||Ft.size}):u(ae,De,X.font));$e.text(De.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,et).call(i.convertToTspans,ee);var nt,ct=e.bBox($e.node());if("outside"===Xe)nt=N(ct,De);else if(nt=c(ct,De,W),"auto"===Xe&&nt.scale<1){var bt=o.ensureUniformFontSize(ee,ae.outsidetextfont);$e.call(e.font,bt),nt=N(ct=e.bBox($e.node()),De)}var kt=nt.textPosAngle,Bt=void 0===kt?De.pxmid:V(W.r,kt);if(nt.targetX=Ie+Bt[0]*nt.rCenter+(nt.x||0),nt.targetY=je+Bt[1]*nt.rCenter+(nt.y||0),Y(nt,ct),nt.outside){var Et=nt.targetY;De.yLabelMin=Et-ct.height/2,De.yLabelMid=Et,De.yLabelMax=Et+ct.height/2,De.labelExtraX=0,De.labelExtraY=0,ne=!0}nt.fontSize=et.size,h(ae.type,nt,X),q[Le].transform=nt,$e.attr("transform",o.getTextTransform(nt))})}function He($e,et,nt,ct){return"a"+ct*W.r+","+ct*W.r+" 0 "+De.largeArc+(nt?" 1 ":" 0 ")+ct*(et[0]-$e[0])+","+ct*(et[1]-$e[1])}});var Le,le=y.select(this).selectAll("g.titletext").data(ae.title.text?[0]:[]);if(le.enter().append("g").classed("titletext",!0),le.exit().remove(),le.each(function(){var De,je,ye,Le=o.ensureSingle(y.select(this),"text","",function(je){je.attr("data-notex",1)}),Ie=ae.title.text;ae._meta&&(Ie=o.templateString(Ie,ae._meta)),Le.text(Ie).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,ae.title.font).call(i.convertToTspans,ee),De="middle center"===ae.title.position?(je=W,ye=Math.sqrt(je.titleBox.width*je.titleBox.width+je.titleBox.height*je.titleBox.height),{x:je.cx,y:je.cy,scale:je.trace.hole*je.r*2/ye,tx:0,ty:-je.titleBox.height/2+je.trace.title.font.size}):F(W,K),Le.attr("transform",l(De.x,De.y)+a(Math.min(1,De.scale))+l(De.tx,De.ty))}),ne&&function(De,Le){var Ie,je,ye,Me,Oe,Pe,Re,Ue,qe,Xe,lt,He,$e;function et(kt,Bt){return kt.pxmid[1]-Bt.pxmid[1]}function nt(kt,Bt){return Bt.pxmid[1]-kt.pxmid[1]}function ct(kt,Bt){Bt||(Bt={});var Et,ht,at,Ft,en=Bt.labelExtraY+(je?Bt.yLabelMax:Bt.yLabelMin),Qt=je?kt.yLabelMin:kt.yLabelMax,tn=je?kt.yLabelMax:kt.yLabelMin,dn=kt.cyFinal+Oe(kt.px0[1],kt.px1[1]),Mn=en-Qt;if(Mn*Re>0&&(kt.labelExtraY=Mn),Array.isArray(Le.pull))for(ht=0;ht<Xe.length;ht++)(at=Xe[ht])===kt||(p.castOption(Le.pull,kt.pts)||0)>=(p.castOption(Le.pull,at.pts)||0)||((kt.pxmid[1]-at.pxmid[1])*Re>0?(Mn=at.cyFinal+Oe(at.px0[1],at.px1[1])-Qt-kt.labelExtraY)*Re>0&&(kt.labelExtraY+=Mn):(tn+kt.labelExtraY-dn)*Re>0&&(Et=3*Pe*Math.abs(ht-Xe.indexOf(kt)),(Ft=at.cxFinal+Me(at.px0[0],at.px1[0])+Et-(kt.cxFinal+kt.pxmid[0])-kt.labelExtraX)*Pe>0&&(kt.labelExtraX+=Ft)))}for(je=0;je<2;je++)for(ye=je?et:nt,Oe=je?Math.max:Math.min,Re=je?1:-1,Ie=0;Ie<2;Ie++){for(Me=Ie?Math.max:Math.min,Pe=Ie?1:-1,(Ue=De[je][Ie]).sort(ye),Xe=(qe=De[1-je][Ie]).concat(Ue),He=[],lt=0;lt<Ue.length;lt++)void 0!==Ue[lt].yLabelMid&&He.push(Ue[lt]);for($e=!1,lt=0;je&&lt<qe.length;lt++)if(void 0!==qe[lt].yLabelMid){$e=qe[lt];break}for(lt=0;lt<He.length;lt++){var bt=lt&&He[lt-1];$e&&!lt&&(bt=$e),ct(He[lt],bt)}}}(te,ae),Le=ae,G.each(function(Ie){var je=y.select(this);if(Ie.labelExtraX||Ie.labelExtraY){var ye=je.select("g.slicetext text");Ie.transform.targetX+=Ie.labelExtraX,Ie.transform.targetY+=Ie.labelExtraY,ye.attr("transform",o.getTextTransform(Ie.transform));var Me=Ie.cxFinal+Ie.pxmid[0],Oe="M"+Me+","+(Ie.cyFinal+Ie.pxmid[1]),Pe=(Ie.yLabelMax-Ie.yLabelMin)*(Ie.pxmid[0]<0?-1:1)/4;if(Ie.labelExtraX){var Re=Ie.labelExtraX*Ie.pxmid[1]/Ie.pxmid[0],Ue=Ie.yLabelMid+Ie.labelExtraY-(Ie.cyFinal+Ie.pxmid[1]);Math.abs(Re)>Math.abs(Ue)?Oe+="l"+Ue*Ie.pxmid[0]/Ie.pxmid[1]+","+Ue+"H"+(Me+Ie.labelExtraX+Pe):Oe+="l"+Ie.labelExtraX+","+Re+"v"+(Ue-Re)+"h"+Pe}else Oe+="V"+(Ie.yLabelMid+Ie.labelExtraY)+"h"+Pe;o.ensureSingle(je,"path","textline").call(_.stroke,Le.outsidetextfont.color).attr({"stroke-width":Math.min(2,Le.outsidetextfont.size/8),d:Oe,fill:"none"})}else je.select("path.textline").remove()}),ne&&ae.automargin){var ue=e.bBox(U.node()),pe=ae.domain,me=(K.w*(pe.x[1]-pe.x[0])*.5-W.r)/K.w,we=(K.h*(pe.y[1]-pe.y[0])*.5-W.r)/K.h;x.autoMargin(ee,"pie."+ae.uid+".automargin",{xl:pe.x[0]-me,xr:pe.x[1]+me,yb:pe.y[0]-we,yt:pe.y[1]+we,l:Math.max(W.cx-W.r-ue.left,0),r:Math.max(ue.right-(W.cx+W.r),0),b:Math.max(ue.bottom-(W.cy+W.r),0),t:Math.max(W.cy-W.r-ue.top,0),pad:5})}})});setTimeout(function(){ie.selectAll("tspan").each(function(){var q=y.select(this);q.attr("dy")&&q.attr("dy",q.attr("dy"))})},0)},formatSliceLabel:Z,transformInsideText:c,determineInsideTextFont:u,positionTitleOutside:F,prerenderTitles:w,layoutAreas:j,attachFxHandlers:m,computeTransform:Y}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../bar/constants":650,"../bar/uniform_text":664,"./event_data":905,"./helpers":906,"@plotly/d3":58}],911:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("./style_one"),M=b("../bar/uniform_text").resizeText;oe.exports=function(_){var e=_._fullLayout._pielayer.selectAll(".trace");M(_,e,"pie"),e.each(function(o){var a=o[0].trace,l=y.select(this);l.style({opacity:a.opacity}),l.selectAll("path.surface").each(function(i){y.select(this).call(x,i,a)})})}},{"../bar/uniform_text":664,"./style_one":912,"@plotly/d3":58}],912:[function(b,oe,se){"use strict";var y=b("../../components/color"),x=b("./helpers").castOption;oe.exports=function(M,_,e){var o=e.marker.line,a=x(o.color,_.pts)||y.defaultLine,l=x(o.width,_.pts)||0;M.style("stroke-width",l).call(y.fill,_.color).call(y.stroke,a)}},{"../../components/color":366,"./helpers":906}],913:[function(b,oe,se){"use strict";var y=b("../scatter/attributes");oe.exports={x:y.x,y:y.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:y.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":927}],914:[function(b,oe,se){"use strict";var y=b("../../../stackgl_modules").gl_pointcloud2d,x=b("../../lib/str2rgbarray"),M=b("../../plots/cartesian/autorange").findExtremes,_=b("../scatter/get_trace_color");function e(a,l){this.scene=a,this.uid=l,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=y(a.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var o=e.prototype;o.handlePick=function(a){var l=this.idToIndex[a.pointId];return{trace:this,dataCoord:a.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*l],this.pickXYData[2*l+1]]:[this.pickXData[l],this.pickYData[l]],textLabel:Array.isArray(this.textLabels)?this.textLabels[l]:this.textLabels,color:this.color,name:this.name,pointIndex:l,hoverinfo:this.hoverinfo}},o.update=function(a){this.index=a.index,this.textLabels=a.text,this.name=a.name,this.hoverinfo=a.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(a),this.color=_(a,{})},o.updateFast=function(a){var l,i,v,h,s,d,p=this.xData=this.pickXData=a.x,f=this.yData=this.pickYData=a.y,g=this.pickXYData=a.xy,u=a.indices,w=this.bounds;if(g){if(v=g,l=g.length>>>1,a.xbounds&&a.ybounds)w[0]=a.xbounds[0],w[2]=a.xbounds[1],w[1]=a.ybounds[0],w[3]=a.ybounds[1];else for(d=0;d<l;d++)s=v[2*d+1],(h=v[2*d])<w[0]&&(w[0]=h),h>w[2]&&(w[2]=h),s<w[1]&&(w[1]=s),s>w[3]&&(w[3]=s);if(u)i=u;else for(i=new Int32Array(l),d=0;d<l;d++)i[d]=d}else for(l=p.length,v=new Float32Array(2*l),i=new Int32Array(l),d=0;d<l;d++)h=p[d],s=f[d],i[d]=d,v[2*d]=h,v[2*d+1]=s,h<w[0]&&(w[0]=h),h>w[2]&&(w[2]=h),s<w[1]&&(w[1]=s),s>w[3]&&(w[3]=s);this.idToIndex=i,this.pointcloudOptions.idToIndex=i,this.pointcloudOptions.positions=v;var c=x(a.marker.color),A=x(a.marker.border.color),k=a.opacity*a.marker.opacity;c[3]*=k,this.pointcloudOptions.color=c;var C=a.marker.blend;null===C&&(C=p.length<100||f.length<100),this.pointcloudOptions.blend=C,A[3]*=k,this.pointcloudOptions.borderColor=A;var E=a.marker.sizemin,L=Math.max(a.marker.sizemax,a.marker.sizemin);this.pointcloudOptions.sizeMin=E,this.pointcloudOptions.sizeMax=L,this.pointcloudOptions.areaRatio=a.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var D=this.scene.xaxis,N=this.scene.yaxis,F=L/2||.5;a._extremes[D._id]=M(D,[w[0],w[2]],{ppad:F}),a._extremes[N._id]=M(N,[w[1],w[3]],{ppad:F})},o.dispose=function(){this.pointcloud.dispose()},oe.exports=function(a,l){var i=new e(a,l.uid);return i.update(l),i}},{"../../../stackgl_modules":1124,"../../lib/str2rgbarray":528,"../../plots/cartesian/autorange":553,"../scatter/get_trace_color":937}],915:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./attributes");oe.exports=function(M,_,e){function o(a,l){return y.coerce(M,_,x,a,l)}o("x"),o("y"),o("xbounds"),o("ybounds"),M.xy&&M.xy instanceof Float32Array&&(_.xy=M.xy),M.indices&&M.indices instanceof Int32Array&&(_.indices=M.indices),o("text"),o("marker.color",e),o("marker.opacity"),o("marker.blend"),o("marker.sizemin"),o("marker.sizemax"),o("marker.border.color",e),o("marker.border.arearatio"),_._length=null}},{"../../lib":503,"./attributes":913}],916:[function(b,oe,se){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("../scatter3d/calc"),plot:b("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:b("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":596,"../scatter3d/calc":956,"./attributes":913,"./convert":914,"./defaults":915}],917:[function(b,oe,se){"use strict";var y=b("../../plots/font_attributes"),x=b("../../plots/attributes"),M=b("../../components/color/attributes"),_=b("../../components/fx/attributes"),e=b("../../plots/domain").attributes,o=b("../../plots/template_attributes").hovertemplateAttrs,a=b("../../components/colorscale/attributes"),l=b("../../plot_api/plot_template").templatedArray,i=b("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,v=b("../../lib/extend").extendFlat,h=b("../../plot_api/edit_types").overrideAll;(oe.exports=h({hoverinfo:v({},x.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:_.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:i("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:y({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:M.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:_.hoverlabel,hovertemplate:o({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:M.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:_.hoverlabel,hovertemplate:o({},{keys:["value","label"]}),colorscales:l("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:v(a().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../components/fx/attributes":397,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],918:[function(b,oe,se){"use strict";var y=b("../../plot_api/edit_types").overrideAll,x=b("../../plots/get_data").getModuleCalcData,M=b("./plot"),_=b("../../components/fx/layout_attributes"),e=b("../../lib/setcursor"),o=b("../../components/dragelement"),a=b("../../plots/cartesian/select").prepSelect,l=b("../../lib"),i=b("../../registry");function v(h,s){var d=h._fullData[s],p=h._fullLayout,f=p.dragmode,m=d._bgRect;if("pan"!==f&&"zoom"!==f){e(m,"pan"===p.dragmode?"move":"crosshair");var u={_id:"x",c2p:l.identity,_offset:d._sankey.translateX,_length:d._sankey.width},w={_id:"y",c2p:l.identity,_offset:d._sankey.translateY,_length:d._sankey.height},c={gd:h,element:m.node(),plotinfo:{id:s,xaxis:u,yaxis:w,fillRangeItems:l.noop},subplot:s,xaxes:[u],yaxes:[w],doneFnCompleted:function(A){var k,C=h._fullData[s],E=C.node.groups.slice(),L=[];function D(P){for(var j=C._sankey.graph.nodes,V=0;V<j.length;V++)if(j[V].pointNumber===P)return j[V]}for(var N=0;N<A.length;N++){var F=D(A[N].pointNumber);if(F)if(F.group){for(var I=0;I<F.childrenNodes.length;I++)L.push(F.childrenNodes[I].pointNumber);E[F.pointNumber-C.node._count]=!1}else L.push(F.pointNumber)}k=E.filter(Boolean).concat([L]),i.call("_guiRestyle",h,{"node.groups":[k]},s)},prepFn:function(A,k,C){a(A,k,C,c,f)}};o.init(c)}}se.name="sankey",se.baseLayoutAttrOverrides=y({hoverlabel:_.hoverlabel},"plot","nested"),se.plot=function(h){var s=x(h.calcdata,"sankey")[0];M(h,s),se.updateFx(h)},se.clean=function(h,s,d,p){var f=p._has&&p._has("sankey"),g=s._has&&s._has("sankey");f&&!g&&(p._paperdiv.selectAll(".sankey").remove(),p._paperdiv.selectAll(".bgsankey").remove())},se.updateFx=function(h){for(var s=0;s<h._fullData.length;s++)v(h,s)}},{"../../components/dragelement":385,"../../components/fx/layout_attributes":407,"../../lib":503,"../../lib/setcursor":524,"../../plot_api/edit_types":536,"../../plots/cartesian/select":575,"../../plots/get_data":593,"../../registry":638,"./plot":923}],919:[function(b,oe,se){"use strict";var y=b("strongly-connected-components"),x=b("../../lib"),M=b("../../lib/gup").wrap,_=x.isArrayOrTypedArray,e=x.isIndex,o=b("../../components/colorscale");oe.exports=function(l,i){var v=function(l){var i,v=l.node,h=l.link,s=[],d=_(h.color),p=_(h.customdata),f={},g={},m=h.colorscales.length;for(i=0;i<m;i++){var u=h.colorscales[i],w=o.extractScale(u,{cLetter:"c"}),c=o.makeColorScaleFunc(w);g[u.label]=c}var A=0;for(i=0;i<h.value.length;i++)h.source[i]>A&&(A=h.source[i]),h.target[i]>A&&(A=h.target[i]);var k,C=A+1;l.node._count=C;var E=l.node.groups,L={};for(i=0;i<E.length;i++){var D=E[i];for(k=0;k<D.length;k++){var N=D[k],F=C+i;L.hasOwnProperty(N)?x.warn("Node "+N+" is already part of a group."):L[N]=F}}var I={source:[],target:[]};for(i=0;i<h.value.length;i++){var P=h.value[i],j=h.source[i],V=h.target[i];if(P>0&&e(j,C)&&e(V,C)&&(!L.hasOwnProperty(j)||!L.hasOwnProperty(V)||L[j]!==L[V])){L.hasOwnProperty(V)&&(V=L[V]),L.hasOwnProperty(j)&&(j=L[j]),f[j=+j]=f[V=+V]=!0;var Z="";h.label&&h.label[i]&&(Z=h.label[i]);var Y=null;Z&&g.hasOwnProperty(Z)&&(Y=g[Z]),s.push({pointNumber:i,label:Z,color:d?h.color[i]:h.color,customdata:p?h.customdata[i]:h.customdata,concentrationscale:Y,source:j,target:V,value:+P}),I.source.push(j),I.target.push(V)}}var ee=C+E.length,re=_(v.color),X=_(v.customdata),K=[];for(i=0;i<ee;i++)f[i]&&K.push({group:i>C-1,childrenNodes:[],pointNumber:i,label:v.label[i],color:re?v.color[i]:v.color,customdata:X?v.customdata[i]:v.customdata});var q=!1;return function(U,W,ae){for(var G=x.init2dArray(U,0),te=0;te<Math.min(W.length,ae.length);te++)if(x.isIndex(W[te],U)&&x.isIndex(ae[te],U)){if(W[te]===ae[te])return!0;G[W[te]].push(ae[te])}return y(G).components.some(function(ne){return ne.length>1})}(ee,I.source,I.target)&&(q=!0),{circular:q,links:s,nodes:K,groups:E,groupLookup:L}}(i);return M({circular:v.circular,_nodes:v.nodes,_links:v.links,_groups:v.groups,_groupLookup:v.groupLookup})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500,"strongly-connected-components":306}],920:[function(b,oe,se){"use strict";oe.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],921:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./attributes"),M=b("../../components/color"),_=b("tinycolor2"),e=b("../../plots/domain").defaults,o=b("../../components/fx/hoverlabel_defaults"),a=b("../../plot_api/plot_template"),l=b("../../plots/array_container_defaults");function i(v,h){function s(d,p){return y.coerce(v,h,x.link.colorscales,d,p)}s("label"),s("cmin"),s("cmax"),s("colorscale")}oe.exports=function(v,h,s,d){function p(L,D){return y.coerce(v,h,x,L,D)}var f=y.extendDeep(d.hoverlabel,v.hoverlabel),g=v.node,m=a.newContainer(h,"node");function u(L,D){return y.coerce(g,m,x.node,L,D)}u("label"),u("groups"),u("x"),u("y"),u("pad"),u("thickness"),u("line.color"),u("line.width"),u("hoverinfo",v.hoverinfo),o(g,m,u,f),u("hovertemplate");var w=d.colorway;u("color",m.label.map(function(L,D){return M.addOpacity(w[D%w.length],.8)})),u("customdata");var c=v.link||{},A=a.newContainer(h,"link");function k(L,D){return y.coerce(c,A,x.link,L,D)}k("label"),k("source"),k("target"),k("value"),k("line.color"),k("line.width"),k("hoverinfo",v.hoverinfo),o(c,A,k,f),k("hovertemplate");var C,E=_(d.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";k("color",y.repeat(E,A.value.length)),k("customdata"),l(c,A,{name:"colorscales",handleItemDefaults:i}),e(h,d,p),p("orientation"),p("valueformat"),p("valuesuffix"),m.x.length&&m.y.length&&(C="freeform"),p("arrangement",C),y.coerceFont(p,"textfont",y.extendFlat({},d.font)),h._length=null}},{"../../components/color":366,"../../components/fx/hoverlabel_defaults":404,"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/domain":584,"./attributes":917,tinycolor2:312}],922:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),moduleType:"trace",name:"sankey",basePlotModule:b("./base_plot"),selectPoints:b("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":917,"./base_plot":918,"./calc":919,"./defaults":921,"./plot":923,"./select.js":925}],923:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../lib"),M=x.numberFormat,_=b("./render"),e=b("../../components/fx"),o=b("../../components/color"),a=b("./constants").cn,l=x._;function i(c){return""!==c}function v(c,A){return c.filter(function(k){return k.key===A.traceId})}function h(c,A){y.select(c).select("path").style("fill-opacity",A),y.select(c).select("rect").style("fill-opacity",A)}function s(c){y.select(c).select("text.name").style("fill","black")}function d(c){return function(A){return-1!==c.node.sourceLinks.indexOf(A.link)||-1!==c.node.targetLinks.indexOf(A.link)}}function p(c){return function(A){return-1!==A.node.sourceLinks.indexOf(c.link)||-1!==A.node.targetLinks.indexOf(c.link)}}function f(c,A,k){A&&k&&v(k,A).selectAll("."+a.sankeyLink).filter(d(A)).call(m.bind(0,A,k,!1))}function g(c,A,k){A&&k&&v(k,A).selectAll("."+a.sankeyLink).filter(d(A)).call(u.bind(0,A,k,!1))}function m(c,A,k,C){var E=C.datum().link.label;C.style("fill-opacity",function(L){if(!L.link.concentrationscale)return.4}),E&&v(A,c).selectAll("."+a.sankeyLink).filter(function(L){return L.link.label===E}).style("fill-opacity",function(L){if(!L.link.concentrationscale)return.4}),k&&v(A,c).selectAll("."+a.sankeyNode).filter(p(c)).call(f)}function u(c,A,k,C){var E=C.datum().link.label;C.style("fill-opacity",function(L){return L.tinyColorAlpha}),E&&v(A,c).selectAll("."+a.sankeyLink).filter(function(L){return L.link.label===E}).style("fill-opacity",function(L){return L.tinyColorAlpha}),k&&v(A,c).selectAll(a.sankeyNode).filter(p(c)).call(g)}function w(c,A){var C=x.nestedProperty(c.hoverlabel||{},A).get();return!Array.isArray(C)&&C}oe.exports=function(c,A){for(var k=c._fullLayout,C=k._paper,E=k._size,L=0;L<c._fullData.length;L++)if(c._fullData[L].visible&&c._fullData[L].type===a.sankey&&!c._fullData[L]._viewInitial){var D=c._fullData[L].node;c._fullData[L]._viewInitial={node:{groups:D.groups.slice(),x:D.x.slice(),y:D.y.slice()}}}var N=l(c,"source:")+" ",F=l(c,"target:")+" ",I=l(c,"concentration:")+" ",P=l(c,"incoming flow count:")+" ",j=l(c,"outgoing flow count:")+" ";_(c,C,A,{width:E.w,height:E.h,margin:{t:E.t,r:E.r,b:E.b,l:E.l}},{linkEvents:{hover:function(V,Z,Y){!1!==c._fullLayout.hovermode&&(y.select(V).call(m.bind(0,Z,Y,!0)),"skip"!==Z.link.trace.link.hoverinfo&&(Z.link.fullData=Z.link.trace,c.emit("plotly_hover",{event:y.event,points:[Z.link]})))},follow:function(V,Z){if(!1!==c._fullLayout.hovermode){var Y=Z.link.trace.link;if("none"!==Y.hoverinfo&&"skip"!==Y.hoverinfo){for(var ee=[],re=0,X=0;X<Z.flow.links.length;X++){var K=Z.flow.links[X];if("closest"!==c._fullLayout.hovermode||Z.link.pointNumber===K.pointNumber){Z.link.pointNumber===K.pointNumber&&(re=X),K.fullData=K.trace,Y=Z.link.trace.link;var ie=U(K),q={valueLabel:M(Z.valueFormat)(K.value)+Z.valueSuffix};ee.push({x:ie[0],y:ie[1],name:q.valueLabel,text:[K.label||"",N+K.source.label,F+K.target.label,K.concentrationscale?I+M("%0.2f")(K.flow.labelConcentration):""].filter(i).join("<br>"),color:w(Y,"bgcolor")||o.addOpacity(K.color,1),borderColor:w(Y,"bordercolor"),fontFamily:w(Y,"font.family"),fontSize:w(Y,"font.size"),fontColor:w(Y,"font.color"),nameLength:w(Y,"namelength"),textAlign:w(Y,"align"),idealAlign:y.event.x<ie[0]?"right":"left",hovertemplate:Y.hovertemplate,hovertemplateLabels:q,eventData:[K]})}}e.loneHover(ee,{container:k._hoverlayer.node(),outerContainer:k._paper.node(),gd:c,anchorIndex:re}).each(function(){Z.link.concentrationscale||h(this,.65),s(this)})}}function U(W){var ae,G;W.circular?(ae=(W.circularPathData.leftInnerExtent+W.circularPathData.rightInnerExtent)/2,G=W.circularPathData.verticalFullExtent):(ae=(W.source.x1+W.target.x0)/2,G=(W.y0+W.y1)/2);var te=[ae,G];return"v"===W.trace.orientation&&te.reverse(),te[0]+=Z.parent.translateX,te[1]+=Z.parent.translateY,te}},unhover:function(V,Z,Y){!1!==c._fullLayout.hovermode&&(y.select(V).call(u.bind(0,Z,Y,!0)),"skip"!==Z.link.trace.link.hoverinfo&&(Z.link.fullData=Z.link.trace,c.emit("plotly_unhover",{event:y.event,points:[Z.link]})),e.loneUnhover(k._hoverlayer.node()))},select:function(V,Z){var Y=Z.link;Y.originalEvent=y.event,c._hoverdata=[Y],e.click(c,{target:!0})}},nodeEvents:{hover:function(V,Z,Y){!1!==c._fullLayout.hovermode&&(y.select(V).call(f,Z,Y),"skip"!==Z.node.trace.node.hoverinfo&&(Z.node.fullData=Z.node.trace,c.emit("plotly_hover",{event:y.event,points:[Z.node]})))},follow:function(V,Z){if(!1!==c._fullLayout.hovermode){var Y=Z.node.trace.node;if("none"!==Y.hoverinfo&&"skip"!==Y.hoverinfo){var ee=y.select(V).select("."+a.nodeRect),re=c._fullLayout._paperdiv.node().getBoundingClientRect(),X=ee.node().getBoundingClientRect(),K=X.left-2-re.left,ie=X.right+2-re.left,q=X.top+X.height/4-re.top,U={valueLabel:M(Z.valueFormat)(Z.node.value)+Z.valueSuffix};Z.node.fullData=Z.node.trace,c._fullLayout._calcInverseTransform(c);var W=c._fullLayout._invScaleX,G=e.loneHover({x0:W*K,x1:W*ie,y:c._fullLayout._invScaleY*q,name:M(Z.valueFormat)(Z.node.value)+Z.valueSuffix,text:[Z.node.label,P+Z.node.targetLinks.length,j+Z.node.sourceLinks.length].filter(i).join("<br>"),color:w(Y,"bgcolor")||Z.tinyColorHue,borderColor:w(Y,"bordercolor"),fontFamily:w(Y,"font.family"),fontSize:w(Y,"font.size"),fontColor:w(Y,"font.color"),nameLength:w(Y,"namelength"),textAlign:w(Y,"align"),idealAlign:"left",hovertemplate:Y.hovertemplate,hovertemplateLabels:U,eventData:[Z.node]},{container:k._hoverlayer.node(),outerContainer:k._paper.node(),gd:c});h(G,.85),s(G)}}},unhover:function(V,Z,Y){!1!==c._fullLayout.hovermode&&(y.select(V).call(g,Z,Y),"skip"!==Z.node.trace.node.hoverinfo&&(Z.node.fullData=Z.node.trace,c.emit("plotly_unhover",{event:y.event,points:[Z.node]})),e.loneUnhover(k._hoverlayer.node()))},select:function(V,Z,Y){var ee=Z.node;ee.originalEvent=y.event,c._hoverdata=[ee],y.select(V).call(g,Z,Y),e.click(c,{target:!0})}}})}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"./constants":920,"./render":924,"@plotly/d3":58}],924:[function(b,oe,se){"use strict";var y=b("d3-force"),x=b("d3-interpolate").interpolateNumber,M=b("@plotly/d3"),_=b("@plotly/d3-sankey"),e=b("@plotly/d3-sankey-circular"),o=b("./constants"),a=b("tinycolor2"),l=b("../../components/color"),i=b("../../components/drawing"),v=b("../../lib"),h=v.strTranslate,s=v.strRotate,d=b("../../lib/gup"),p=d.keyFun,f=d.repeat,g=d.unwrap,m=b("../../lib/svg_text_utils"),u=b("../../registry"),w=b("../../constants/alignment"),c=w.CAP_SHIFT,A=w.LINE_SPACING;function k(X,K,ie){var q,U=g(K),W=U.trace,ae=W.domain,G="h"===W.orientation,te=W.node.pad,ne=W.node.thickness,le=X.width*(ae.x[1]-ae.x[0]),ue=X.height*(ae.y[1]-ae.y[0]),pe=U._nodes,de=U._links,_e=U.circular;(q=_e?e.sankeyCircular().circularLinkGap(0):_.sankey()).iterations(o.sankeyIterations).size(G?[le,ue]:[ue,le]).nodeWidth(ne).nodePadding(te).nodeId(function(Re){return Re.pointNumber}).nodes(pe).links(de);var me,we,De,Le=q();for(var Ie in q.nodePadding()<te&&v.warn("node.pad was reduced to ",q.nodePadding()," to fit within the figure."),U._groupLookup){var je,ye=parseInt(U._groupLookup[Ie]);for(me=0;me<Le.nodes.length;me++)if(Le.nodes[me].pointNumber===ye){je=Le.nodes[me];break}if(je){var Me={pointNumber:parseInt(Ie),x0:je.x0,x1:je.x1,y0:je.y0,y1:je.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Le.nodes.unshift(Me),je.childrenNodes.unshift(Me)}}if(function(){for(me=0;me<Le.nodes.length;me++){var Re,Ue,qe=Le.nodes[me],Xe={};for(we=0;we<qe.targetLinks.length;we++)Re=(Ue=qe.targetLinks[we]).source.pointNumber+":"+Ue.target.pointNumber,Xe.hasOwnProperty(Re)||(Xe[Re]=[]),Xe[Re].push(Ue);var lt=Object.keys(Xe);for(we=0;we<lt.length;we++){var He=Xe[Re=lt[we]],$e=0,et={};for(De=0;De<He.length;De++)et[(Ue=He[De]).label]||(et[Ue.label]=0),et[Ue.label]+=Ue.value,$e+=Ue.value;for(De=0;De<He.length;De++)(Ue=He[De]).flow={value:$e,labelConcentration:et[Ue.label]/$e,concentration:Ue.value/$e,links:He},Ue.concentrationscale&&(Ue.color=a(Ue.concentrationscale(Ue.flow.labelConcentration)))}var nt=0;for(we=0;we<qe.sourceLinks.length;we++)nt+=qe.sourceLinks[we].value;for(we=0;we<qe.sourceLinks.length;we++)(Ue=qe.sourceLinks[we]).concentrationOut=Ue.value/nt;var ct=0;for(we=0;we<qe.targetLinks.length;we++)ct+=qe.targetLinks[we].value;for(we=0;we<qe.targetLinks.length;we++)(Ue=qe.targetLinks[we]).concenrationIn=Ue.value/ct}}(),W.node.x.length&&W.node.y.length){for(me=0;me<Math.min(W.node.x.length,W.node.y.length,Le.nodes.length);me++)if(W.node.x[me]&&W.node.y[me]){var Oe=[W.node.x[me]*le,W.node.y[me]*ue];Le.nodes[me].x0=Oe[0]-ne/2,Le.nodes[me].x1=Oe[0]+ne/2;var Pe=Le.nodes[me].y1-Le.nodes[me].y0;Le.nodes[me].y0=Oe[1]-Pe/2,Le.nodes[me].y1=Oe[1]+Pe/2}"snap"===W.arrangement&&function(Re){var Ue,qe,Xe=Re.map(function(nt,ct){return{x0:nt.x0,index:ct}}).sort(function(nt,ct){return nt.x0-ct.x0}),lt=[],He=-1,$e=-1/0;for(me=0;me<Xe.length;me++){var et=Re[Xe[me].index];et.x0>$e+ne&&(He+=1,Ue=et.x0),$e=et.x0,lt[He]||(lt[He]=[]),lt[He].push(et),et.x0+=qe=Ue-et.x0,et.x1+=qe}return lt}(pe=Le.nodes).forEach(function(Ue){var qe,Xe,lt,He=0,$e=Ue.length;for(Ue.sort(function(et,nt){return et.y0-nt.y0}),lt=0;lt<$e;++lt)(qe=Ue[lt]).y0>=He||(Xe=He-qe.y0)>1e-6&&(qe.y0+=Xe,qe.y1+=Xe),He=qe.y1+te}),q.update(Le)}return{circular:_e,key:ie,trace:W,guid:v.randstr(),horizontal:G,width:le,height:ue,nodePad:W.node.pad,nodeLineColor:W.node.line.color,nodeLineWidth:W.node.line.width,linkLineColor:W.link.line.color,linkLineWidth:W.link.line.width,valueFormat:W.valueformat,valueSuffix:W.valuesuffix,textFont:W.textfont,translateX:ae.x[0]*X.width+X.margin.l,translateY:X.height-ae.y[1]*X.height+X.margin.t,dragParallel:G?ue:le,dragPerpendicular:G?le:ue,arrangement:W.arrangement,sankey:q,graph:Le,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function C(X,K,ie){var q=a(K.color),U=K.source.label+"|"+K.target.label+"__"+ie;return K.trace=X.trace,K.curveNumber=X.trace.index,{circular:X.circular,key:U,traceId:X.key,pointNumber:K.pointNumber,link:K,tinyColorHue:l.tinyRGB(q),tinyColorAlpha:q.getAlpha(),linkPath:E,linkLineColor:X.linkLineColor,linkLineWidth:X.linkLineWidth,valueFormat:X.valueFormat,valueSuffix:X.valueSuffix,sankey:X.sankey,parent:X,interactionState:X.interactionState,flow:K.flow}}function E(){return function(X){if(X.link.circular)return ie=(K=X.link).width/2,q=K.circularPathData,"top"===K.circularLinkType?"M "+q.targetX+" "+(q.targetY+ie)+" L"+q.rightInnerExtent+" "+(q.targetY+ie)+"A"+(q.rightLargeArcRadius+ie)+" "+(q.rightSmallArcRadius+ie)+" 0 0 1 "+(q.rightFullExtent-ie)+" "+(q.targetY-q.rightSmallArcRadius)+"L"+(q.rightFullExtent-ie)+" "+q.verticalRightInnerExtent+"A"+(q.rightLargeArcRadius+ie)+" "+(q.rightLargeArcRadius+ie)+" 0 0 1 "+q.rightInnerExtent+" "+(q.verticalFullExtent-ie)+"L"+q.leftInnerExtent+" "+(q.verticalFullExtent-ie)+"A"+(q.leftLargeArcRadius+ie)+" "+(q.leftLargeArcRadius+ie)+" 0 0 1 "+(q.leftFullExtent+ie)+" "+q.verticalLeftInnerExtent+"L"+(q.leftFullExtent+ie)+" "+(q.sourceY-q.leftSmallArcRadius)+"A"+(q.leftLargeArcRadius+ie)+" "+(q.leftSmallArcRadius+ie)+" 0 0 1 "+q.leftInnerExtent+" "+(q.sourceY+ie)+"L"+q.sourceX+" "+(q.sourceY+ie)+"L"+q.sourceX+" "+(q.sourceY-ie)+"L"+q.leftInnerExtent+" "+(q.sourceY-ie)+"A"+(q.leftLargeArcRadius-ie)+" "+(q.leftSmallArcRadius-ie)+" 0 0 0 "+(q.leftFullExtent-ie)+" "+(q.sourceY-q.leftSmallArcRadius)+"L"+(q.leftFullExtent-ie)+" "+q.verticalLeftInnerExtent+"A"+(q.leftLargeArcRadius-ie)+" "+(q.leftLargeArcRadius-ie)+" 0 0 0 "+q.leftInnerExtent+" "+(q.verticalFullExtent+ie)+"L"+q.rightInnerExtent+" "+(q.verticalFullExtent+ie)+"A"+(q.rightLargeArcRadius-ie)+" "+(q.rightLargeArcRadius-ie)+" 0 0 0 "+(q.rightFullExtent+ie)+" "+q.verticalRightInnerExtent+"L"+(q.rightFullExtent+ie)+" "+(q.targetY-q.rightSmallArcRadius)+"A"+(q.rightLargeArcRadius-ie)+" "+(q.rightSmallArcRadius-ie)+" 0 0 0 "+q.rightInnerExtent+" "+(q.targetY-ie)+"L"+q.targetX+" "+(q.targetY-ie)+"Z":"M "+q.targetX+" "+(q.targetY-ie)+" L"+q.rightInnerExtent+" "+(q.targetY-ie)+"A"+(q.rightLargeArcRadius+ie)+" "+(q.rightSmallArcRadius+ie)+" 0 0 0 "+(q.rightFullExtent-ie)+" "+(q.targetY+q.rightSmallArcRadius)+"L"+(q.rightFullExtent-ie)+" "+q.verticalRightInnerExtent+"A"+(q.rightLargeArcRadius+ie)+" "+(q.rightLargeArcRadius+ie)+" 0 0 0 "+q.rightInnerExtent+" "+(q.verticalFullExtent+ie)+"L"+q.leftInnerExtent+" "+(q.verticalFullExtent+ie)+"A"+(q.leftLargeArcRadius+ie)+" "+(q.leftLargeArcRadius+ie)+" 0 0 0 "+(q.leftFullExtent+ie)+" "+q.verticalLeftInnerExtent+"L"+(q.leftFullExtent+ie)+" "+(q.sourceY+q.leftSmallArcRadius)+"A"+(q.leftLargeArcRadius+ie)+" "+(q.leftSmallArcRadius+ie)+" 0 0 0 "+q.leftInnerExtent+" "+(q.sourceY-ie)+"L"+q.sourceX+" "+(q.sourceY-ie)+"L"+q.sourceX+" "+(q.sourceY+ie)+"L"+q.leftInnerExtent+" "+(q.sourceY+ie)+"A"+(q.leftLargeArcRadius-ie)+" "+(q.leftSmallArcRadius-ie)+" 0 0 1 "+(q.leftFullExtent-ie)+" "+(q.sourceY+q.leftSmallArcRadius)+"L"+(q.leftFullExtent-ie)+" "+q.verticalLeftInnerExtent+"A"+(q.leftLargeArcRadius-ie)+" "+(q.leftLargeArcRadius-ie)+" 0 0 1 "+q.leftInnerExtent+" "+(q.verticalFullExtent-ie)+"L"+q.rightInnerExtent+" "+(q.verticalFullExtent-ie)+"A"+(q.rightLargeArcRadius-ie)+" "+(q.rightLargeArcRadius-ie)+" 0 0 1 "+(q.rightFullExtent+ie)+" "+q.verticalRightInnerExtent+"L"+(q.rightFullExtent+ie)+" "+(q.targetY+q.rightSmallArcRadius)+"A"+(q.rightLargeArcRadius-ie)+" "+(q.rightSmallArcRadius-ie)+" 0 0 1 "+q.rightInnerExtent+" "+(q.targetY+ie)+"L"+q.targetX+" "+(q.targetY+ie)+"Z";var K,ie,q,U=X.link.source.x1,W=X.link.target.x0,ae=x(U,W),G=ae(.5),te=ae(.5),ne=X.link.y0-X.link.width/2,le=X.link.y0+X.link.width/2,ue=X.link.y1-X.link.width/2,pe=X.link.y1+X.link.width/2;return"M"+U+","+ne+"C"+G+","+ne+" "+te+","+ue+" "+W+","+ue+"L"+W+","+pe+"C"+te+","+pe+" "+G+","+le+" "+U+","+le+"Z"}}function L(X,K){var ie=a(K.color),q=o.nodePadAcross,U=X.nodePad/2;K.dx=K.x1-K.x0,K.dy=K.y1-K.y0;var W=K.dx,ae=Math.max(.5,K.dy),G="node_"+K.pointNumber;return K.group&&(G=v.randstr()),K.trace=X.trace,K.curveNumber=X.trace.index,{index:K.pointNumber,key:G,partOfGroup:K.partOfGroup||!1,group:K.group,traceId:X.key,trace:X.trace,node:K,nodePad:X.nodePad,nodeLineColor:X.nodeLineColor,nodeLineWidth:X.nodeLineWidth,textFont:X.textFont,size:X.horizontal?X.height:X.width,visibleWidth:Math.ceil(W),visibleHeight:ae,zoneX:-q,zoneY:-U,zoneWidth:W+2*q,zoneHeight:ae+2*U,labelY:X.horizontal?K.dy/2+1:K.dx/2+1,left:1===K.originalLayer,sizeAcross:X.width,forceLayouts:X.forceLayouts,horizontal:X.horizontal,darkBackground:ie.getBrightness()<=128,tinyColorHue:l.tinyRGB(ie),tinyColorAlpha:ie.getAlpha(),valueFormat:X.valueFormat,valueSuffix:X.valueSuffix,sankey:X.sankey,graph:X.graph,arrangement:X.arrangement,uniqueNodeLabelPathId:[X.guid,X.key,G].join("_"),interactionState:X.interactionState,figure:X}}function D(X){X.attr("transform",function(K){return h(K.node.x0.toFixed(3),K.node.y0.toFixed(3))})}function N(X){X.call(D)}function F(X,K){X.call(N),K.attr("d",E())}function I(X){X.attr("width",function(K){return K.node.x1-K.node.x0}).attr("height",function(K){return K.visibleHeight})}function P(X){return X.link.width>1||X.linkLineWidth>0}function j(X){return h(X.translateX,X.translateY)+(X.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function V(X,K,ie){X.on(".basic",null).on("mouseover.basic",function(q){q.interactionState.dragInProgress||q.partOfGroup||(ie.hover(this,q,K),q.interactionState.hovered=[this,q])}).on("mousemove.basic",function(q){q.interactionState.dragInProgress||q.partOfGroup||(ie.follow(this,q),q.interactionState.hovered=[this,q])}).on("mouseout.basic",function(q){q.interactionState.dragInProgress||q.partOfGroup||(ie.unhover(this,q,K),q.interactionState.hovered=!1)}).on("click.basic",function(q){q.interactionState.hovered&&(ie.unhover(this,q,K),q.interactionState.hovered=!1),q.interactionState.dragInProgress||q.partOfGroup||ie.select(this,q,K)})}function Z(X,K,ie,q){var U=M.behavior.drag().origin(function(W){return{x:W.node.x0+W.visibleWidth/2,y:W.node.y0+W.visibleHeight/2}}).on("dragstart",function(W){if("fixed"!==W.arrangement&&(v.ensureSingle(q._fullLayout._infolayer,"g","dragcover",function(G){q._fullLayout._dragCover=G}),v.raiseToTop(this),W.interactionState.dragInProgress=W.node,ee(W.node),W.interactionState.hovered&&(ie.nodeEvents.unhover.apply(0,W.interactionState.hovered),W.interactionState.hovered=!1),"snap"===W.arrangement)){var ae=W.traceId+"|"+W.key;W.forceLayouts[ae]?W.forceLayouts[ae].alpha(1):function(G,te,ne,le){!function(pe){for(var de=0;de<pe.length;de++)pe[de].y=(pe[de].y0+pe[de].y1)/2,pe[de].x=(pe[de].x0+pe[de].x1)/2}(ne.graph.nodes);var de,_e,me,ue=ne.graph.nodes.filter(function(pe){return pe.originalX===ne.node.originalX}).filter(function(pe){return!pe.partOfGroup});ne.forceLayouts[te]=y.forceSimulation(ue).alphaDecay(0).force("collide",y.forceCollide().radius(function(pe){return pe.dy/2+ne.nodePad/2}).strength(1).iterations(o.forceIterations)).force("constrain",(de=te,_e=ue,me=ne,function(){for(var we=0,De=0;De<_e.length;De++){var Le=_e[De];Le===me.interactionState.dragInProgress?(Le.x=Le.lastDraggedX,Le.y=Le.lastDraggedY):(Le.vx=(Le.originalX-Le.x)/o.forceTicksPerFrame,Le.y=Math.min(me.size-Le.dy/2,Math.max(Le.dy/2,Le.y))),we=Math.max(we,Math.abs(Le.vx),Math.abs(Le.vy))}!me.interactionState.dragInProgress&&we<.1&&me.forceLayouts[de].alpha()>0&&me.forceLayouts[de].alpha(0)})).stop()}(0,ae,W),G=X,te=K,ne=W,le=ae,ue=q,window.requestAnimationFrame(function pe(){var de;for(de=0;de<o.forceTicksPerFrame;de++)ne.forceLayouts[le].tick();if(function(me){for(var we=0;we<me.length;we++)me[we].y0=me[we].y-me[we].dy/2,me[we].y1=me[we].y0+me[we].dy,me[we].x0=me[we].x-me[we].dx/2,me[we].x1=me[we].x0+me[we].dx}(ne.graph.nodes),ne.sankey.update(ne.graph),F(G.filter(re(ne)),te),ne.forceLayouts[le].alpha()>0)window.requestAnimationFrame(pe);else{var _e=ne.node.originalX;ne.node.x0=_e-ne.visibleWidth/2,ne.node.x1=_e+ne.visibleWidth/2,Y(ne,ue)}})}var G,te,ne,le,ue}).on("drag",function(W){if("fixed"!==W.arrangement){var ae=M.event.x,G=M.event.y;"snap"===W.arrangement?(W.node.x0=ae-W.visibleWidth/2,W.node.x1=ae+W.visibleWidth/2,W.node.y0=G-W.visibleHeight/2,W.node.y1=G+W.visibleHeight/2):("freeform"===W.arrangement&&(W.node.x0=ae-W.visibleWidth/2,W.node.x1=ae+W.visibleWidth/2),G=Math.max(0,Math.min(W.size-W.visibleHeight/2,G)),W.node.y0=G-W.visibleHeight/2,W.node.y1=G+W.visibleHeight/2),ee(W.node),"snap"!==W.arrangement&&(W.sankey.update(W.graph),F(X.filter(re(W)),K))}}).on("dragend",function(W){if("fixed"!==W.arrangement){W.interactionState.dragInProgress=!1;for(var ae=0;ae<W.node.childrenNodes.length;ae++)W.node.childrenNodes[ae].x=W.node.x,W.node.childrenNodes[ae].y=W.node.y;"snap"!==W.arrangement&&Y(W,q)}});X.on(".drag",null).call(U)}function Y(X,K){for(var ie=[],q=[],U=0;U<X.graph.nodes.length;U++){var ae=(X.graph.nodes[U].y0+X.graph.nodes[U].y1)/2;ie.push((X.graph.nodes[U].x0+X.graph.nodes[U].x1)/2/X.figure.width),q.push(ae/X.figure.height)}u.call("_guiRestyle",K,{"node.x":[ie],"node.y":[q]},X.trace.index).then(function(){K._fullLayout._dragCover&&K._fullLayout._dragCover.remove()})}function ee(X){X.lastDraggedX=X.x0+X.dx/2,X.lastDraggedY=X.y0+X.dy/2}function re(X){return function(K){return K.node.originalX===X.node.originalX}}oe.exports=function(X,K,ie,q,U){var W=!1;v.ensureSingle(X._fullLayout._infolayer,"g","first-render",function(){W=!0});var ae=X._fullLayout._dragCover,G=ie.filter(function(me){return g(me).trace.visible}).map(k.bind(null,q)),te=K.selectAll("."+o.cn.sankey).data(G,p);te.exit().remove(),te.enter().append("g").classed(o.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",j),te.each(function(me,we){X._fullData[we]._sankey=me;var De="bgsankey-"+me.trace.uid+"-"+we;v.ensureSingle(X._fullLayout._draggers,"rect",De),X._fullData[we]._bgRect=M.select("."+De),X._fullData[we]._bgRect.style("pointer-events","all").attr("width",me.width).attr("height",me.height).attr("x",me.translateX).attr("y",me.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),te.transition().ease(o.ease).duration(o.duration).attr("transform",j);var ne=te.selectAll("."+o.cn.sankeyLinks).data(f,p);ne.enter().append("g").classed(o.cn.sankeyLinks,!0).style("fill","none");var le=ne.selectAll("."+o.cn.sankeyLink).data(function(me){return me.graph.links.filter(function(we){return we.value}).map(C.bind(null,me))},p);le.enter().append("path").classed(o.cn.sankeyLink,!0).call(V,te,U.linkEvents),le.style("stroke",function(me){return P(me)?l.tinyRGB(a(me.linkLineColor)):me.tinyColorHue}).style("stroke-opacity",function(me){return P(me)?l.opacity(me.linkLineColor):me.tinyColorAlpha}).style("fill",function(me){return me.tinyColorHue}).style("fill-opacity",function(me){return me.tinyColorAlpha}).style("stroke-width",function(me){return P(me)?me.linkLineWidth:1}).attr("d",E()),le.style("opacity",function(){return X._context.staticPlot||W||ae?1:0}).transition().ease(o.ease).duration(o.duration).style("opacity",1),le.exit().transition().ease(o.ease).duration(o.duration).style("opacity",0).remove();var ue=te.selectAll("."+o.cn.sankeyNodeSet).data(f,p);ue.enter().append("g").classed(o.cn.sankeyNodeSet,!0),ue.style("cursor",function(me){switch(me.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var pe=ue.selectAll("."+o.cn.sankeyNode).data(function(me){var we=me.graph.nodes;return function(De){var Le,Ie=[];for(Le=0;Le<De.length;Le++)De[Le].originalX=(De[Le].x0+De[Le].x1)/2,De[Le].originalY=(De[Le].y0+De[Le].y1)/2,-1===Ie.indexOf(De[Le].originalX)&&Ie.push(De[Le].originalX);for(Ie.sort(function(je,ye){return je-ye}),Le=0;Le<De.length;Le++)De[Le].originalLayerIndex=Ie.indexOf(De[Le].originalX),De[Le].originalLayer=De[Le].originalLayerIndex/(Ie.length-1)}(we),we.map(L.bind(null,me))},p);pe.enter().append("g").classed(o.cn.sankeyNode,!0).call(D).style("opacity",function(me){return!X._context.staticPlot&&!W||me.partOfGroup?0:1}),pe.call(V,te,U.nodeEvents).call(Z,le,U,X),pe.transition().ease(o.ease).duration(o.duration).call(D).style("opacity",function(me){return me.partOfGroup?0:1}),pe.exit().transition().ease(o.ease).duration(o.duration).style("opacity",0).remove();var de=pe.selectAll("."+o.cn.nodeRect).data(f);de.enter().append("rect").classed(o.cn.nodeRect,!0).call(I),de.style("stroke-width",function(me){return me.nodeLineWidth}).style("stroke",function(me){return l.tinyRGB(a(me.nodeLineColor))}).style("stroke-opacity",function(me){return l.opacity(me.nodeLineColor)}).style("fill",function(me){return me.tinyColorHue}).style("fill-opacity",function(me){return me.tinyColorAlpha}),de.transition().ease(o.ease).duration(o.duration).call(I);var _e=pe.selectAll("."+o.cn.nodeLabel).data(f);_e.enter().append("text").classed(o.cn.nodeLabel,!0).style("cursor","default"),_e.attr("data-notex",1).text(function(me){return me.node.label}).each(function(me){var we=M.select(this);i.font(we,me.textFont),m.convertToTspans(we,X)}).style("text-shadow",m.makeTextShadow(X._fullLayout.paper_bgcolor)).attr("text-anchor",function(me){return me.horizontal&&me.left?"end":"start"}).attr("transform",function(me){var we=M.select(this),De=m.lineCount(we),Ie=me.nodeLineWidth/2+3,je=((me.horizontal?me.visibleHeight:me.visibleWidth)-me.textFont.size*((De-1)*A-c))/2;me.horizontal&&(me.left?Ie=-Ie:Ie+=me.visibleWidth);var ye=me.horizontal?"":"scale(-1,1)"+s(90);return h(me.horizontal?Ie:je,me.horizontal?je:Ie)+ye}),_e.transition().ease(o.ease).duration(o.duration)}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../registry":638,"./constants":920,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:312}],925:[function(b,oe,se){"use strict";oe.exports=function(y,x){for(var M=[],_=y.cd[0].trace,e=_._sankey.graph.nodes,o=0;o<e.length;o++){var a=e[o];if(!a.partOfGroup){var l=[(a.x0+a.x1)/2,(a.y0+a.y1)/2];"v"===_.orientation&&l.reverse(),x&&x.contains(l,!1,o,y)&&M.push({pointNumber:a.pointNumber})}}return M}},{}],926:[function(b,oe,se){"use strict";var y=b("../../lib");oe.exports=function(x,M){for(var _=0;_<x.length;_++)x[_].i=_;y.mergeArray(M.text,x,"tx"),y.mergeArray(M.texttemplate,x,"txt"),y.mergeArray(M.hovertext,x,"htx"),y.mergeArray(M.customdata,x,"data"),y.mergeArray(M.textposition,x,"tp"),M.textfont&&(y.mergeArrayCastPositive(M.textfont.size,x,"ts"),y.mergeArray(M.textfont.color,x,"tc"),y.mergeArray(M.textfont.family,x,"tf"));var e=M.marker;if(e){y.mergeArrayCastPositive(e.size,x,"ms"),y.mergeArrayCastPositive(e.opacity,x,"mo"),y.mergeArray(e.symbol,x,"mx"),y.mergeArray(e.color,x,"mc");var o=e.line;e.line&&(y.mergeArray(o.color,x,"mlc"),y.mergeArrayCastPositive(o.width,x,"mlw"));var a=e.gradient;a&&"none"!==a.type&&(y.mergeArray(a.type,x,"mgt"),y.mergeArray(a.color,x,"mgc"))}}},{"../../lib":503}],927:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=b("../../plots/template_attributes").texttemplateAttrs,M=b("../../plots/template_attributes").hovertemplateAttrs,_=b("../../components/colorscale/attributes"),e=b("../../plots/font_attributes"),o=b("../../components/drawing/attributes").dash,a=b("../../components/drawing/attributes").pattern,l=b("../../components/drawing"),i=b("./constants"),v=b("../../lib/extend").extendFlat;oe.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:y("x"),yhoverformat:y("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:x({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:M({},{keys:i.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:v({},o,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},fillpattern:a,marker:v({symbol:{valType:"enumerated",values:l.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:v({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},_("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},_("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":373,"../../components/drawing":388,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"./constants":931}],928:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../lib"),M=b("../../plots/cartesian/axes"),_=b("../../plots/cartesian/align_period"),e=b("../../constants/numerical").BADNUM,o=b("./subtypes"),a=b("./colorscale_calc"),l=b("./arrays_to_calcdata"),i=b("./calc_selection");function v(f,g,m,u,w,c,A){var k=g._length,C=f._fullLayout,E=m._id,L=u._id,D=C._firstScatter[d(g)]===g.uid,N=(p(g,C,m,u)||{}).orientation,F=g.fill;m._minDtick=0,u._minDtick=0;var I={padded:!0},P={padded:!0};A&&(I.ppad=P.ppad=A);var j=k<2||w[0]!==w[k-1]||c[0]!==c[k-1];j&&("tozerox"===F||"tonextx"===F&&(D||"h"===N))?I.tozero=!0:(g.error_y||{}).visible||"tonexty"!==F&&"tozeroy"!==F&&(o.hasMarkers(g)||o.hasText(g))||(I.padded=!1,I.ppad=0),j&&("tozeroy"===F||"tonexty"===F&&(D||"v"===N))?P.tozero=!0:"tonextx"!==F&&"tozerox"!==F||(P.padded=!1),E&&(g._extremes[E]=M.findExtremes(m,w,I)),L&&(g._extremes[L]=M.findExtremes(u,c,P))}function h(f,g){if(o.hasMarkers(f)){var m,u=f.marker,w=1.6*(f.marker.sizeref||1);if(m="area"===f.marker.sizemode?function(E){return Math.max(Math.sqrt((E||0)/w),3)}:function(E){return Math.max((E||0)/w,3)},x.isArrayOrTypedArray(u.size)){var c={type:"linear"};M.setConvert(c);for(var A=c.makeCalcdata(f.marker,"size"),k=new Array(g),C=0;C<g;C++)k[C]=m(A[C]);return k}return m(u.size)}}function s(f,g){var m=d(g),u=f._firstScatter;u[m]||(u[m]=g.uid)}function d(f){var g=f.stackgroup;return f.xaxis+f.yaxis+f.type+(g?"-"+g:"")}function p(f,g,m,u){var w=f.stackgroup;if(w){var c=g._scatterStackOpts[m._id+u._id][w],A="v"===c.orientation?u:m;return"linear"===A.type||"log"===A.type?c:void 0}}oe.exports={calc:function(f,g){var m,u,w,c,A,k,C=f._fullLayout,E=M.getFromId(f,g.xaxis||"x"),L=M.getFromId(f,g.yaxis||"y"),D=E.makeCalcdata(g,"x"),N=L.makeCalcdata(g,"y"),F=_(g,E,"x",D),I=_(g,L,"y",N),P=F.vals,j=I.vals,V=g._length,Z=new Array(V),Y=g.ids,ee=p(g,C,E,L),re=!1;s(C,g);var X,K="x",ie="y";ee?(x.pushUnique(ee.traceIndices,g._expandedIndex),(m="v"===ee.orientation)?(ie="s",X="x"):(K="s",X="y"),A="interpolate"===ee.stackgaps):v(f,g,E,L,P,j,h(g,V));var q=!!g.xperiodalignment,U=!!g.yperiodalignment;for(u=0;u<V;u++){var W=Z[u]={},ae=y(P[u]),G=y(j[u]);ae&&G?(W[K]=P[u],W[ie]=j[u],q&&(W.orig_x=D[u],W.xEnd=F.ends[u],W.xStart=F.starts[u]),U&&(W.orig_y=N[u],W.yEnd=I.ends[u],W.yStart=I.starts[u])):ee&&(m?ae:G)?(W[X]=m?P[u]:j[u],W.gap=!0,A?(W.s=e,re=!0):W.s=0):W[K]=W[ie]=e,Y&&(W.id=String(Y[u]))}if(l(Z,g),a(f,g),i(Z,g),ee){for(u=0;u<Z.length;)Z[u][X]===e?Z.splice(u,1):u++;if(x.sort(Z,function(ue,pe){return ue[X]-pe[X]||ue.i-pe.i}),re){for(u=0;u<Z.length-1&&Z[u].gap;)u++;for((k=Z[u].s)||(k=Z[u].s=0),w=0;w<u;w++)Z[w].s=k;for(c=Z.length-1;c>u&&Z[c].gap;)c--;for(k=Z[c].s,w=Z.length-1;w>c;w--)Z[w].s=k;for(;u<c;)if(Z[++u].gap){for(w=u+1;Z[w].gap;)w++;for(var te=Z[u-1][X],ne=Z[u-1].s,le=(Z[w].s-ne)/(Z[w][X]-te);u<w;)Z[u].s=ne+(Z[u][X]-te)*le,u++}}}return Z},calcMarkerSize:h,calcAxisExpansion:v,setFirstScatter:s,getStackOpts:p}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"./arrays_to_calcdata":926,"./calc_selection":929,"./colorscale_calc":930,"./subtypes":952,"fast-isnumeric":190}],929:[function(b,oe,se){"use strict";var y=b("../../lib");oe.exports=function(x,M){y.isArrayOrTypedArray(M.selectedpoints)&&y.tagSelected(x,M)}},{"../../lib":503}],930:[function(b,oe,se){"use strict";var y=b("../../components/colorscale/helpers").hasColorscale,x=b("../../components/colorscale/calc"),M=b("./subtypes");oe.exports=function(_,e){M.hasLines(e)&&y(e,"line")&&x(_,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),M.hasMarkers(e)&&(y(e,"marker")&&x(_,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),y(e,"marker.line")&&x(_,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"./subtypes":952}],931:[function(b,oe,se){"use strict";oe.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],932:[function(b,oe,se){"use strict";var y=b("./calc");function x(M,_,e,o,a,l,i){a[o]=!0;var s,d,f,g,m,v={i:null,gap:!0,s:0};if(v[i]=e,M.splice(_,0,v),_&&e===M[_-1][i]){var h=M[_-1];v.s=h.s,v.i=h.i,v.gap=h.gap}else l&&(v.s=(f=i,g=(s=M)[(d=_)-1],(m=s[d+1])?g?g.s+(m.s-g.s)*(e-g[f])/(m[f]-g[f]):m.s:g.s));_||(M[0].t=M[1].t,M[0].trace=M[1].trace,delete M[1].t,delete M[1].trace)}oe.exports=function(M,_){var e=_.xaxis,o=_.yaxis,l=M._fullLayout._scatterStackOpts[e._id+o._id];if(l){var i,v,h,s,d,p,f,g,m,u,w,c,A,k,C,E=M.calcdata;for(var L in l){var D=(u=l[L]).traceIndices;if(D.length){for(w="interpolate"===u.stackgaps,c=u.groupnorm,"v"===u.orientation?(A="x",k="y"):(A="y",k="x"),C=new Array(D.length),i=0;i<C.length;i++)C[i]=!1;p=E[D[0]];var N=new Array(p.length);for(i=0;i<p.length;i++)N[i]=p[i][A];for(i=1;i<D.length;i++){for(d=E[D[i]],v=h=0;v<d.length;v++){for(f=d[v][A];f>N[h]&&h<N.length;h++)x(d,v,N[h],i,C,w,A),v++;if(f!==N[h]){for(s=0;s<i;s++)x(E[D[s]],h,f,s,C,w,A);N.splice(h,0,f)}h++}for(;h<N.length;h++)x(d,v,N[h],i,C,w,A),v++}var F=N.length;for(v=0;v<p.length;v++){for(g=p[v][k]=p[v].s,i=1;i<D.length;i++)(d=E[D[i]])[0].trace._rawLength=d[0].trace._length,d[0].trace._length=F,d[v][k]=g+=d[v].s;if(c)for(m=("fraction"===c?g:g/100)||1,i=0;i<D.length;i++){var I=E[D[i]][v];I[k]/=m,I.sNorm=I.s/m}}for(i=0;i<D.length;i++){var P=(d=E[D[i]])[0].trace,j=y.calcMarkerSize(P,P._rawLength),V=Array.isArray(j);if(j&&C[i]||V){var Z=j;for(j=new Array(F),v=0;v<F;v++)j[v]=d[v].gap?0:V?Z[d[v].i]:Z}var Y=new Array(F),ee=new Array(F);for(v=0;v<F;v++)Y[v]=d[v].x,ee[v]=d[v].y;y.calcAxisExpansion(M,P,e,o,Y,ee,j),d[0].t.orientation=u.orientation}}}}}},{"./calc":928}],933:[function(b,oe,se){"use strict";oe.exports=function(y){for(var x=0;x<y.length;x++){var M=y[x];if("scatter"===M.type){var _=M.fill;if("none"!==_&&"toself"!==_&&(M.opacity=void 0,"tonexty"===_||"tonextx"===_))for(var e=x-1;e>=0;e--){var o=y[e];if("scatter"===o.type&&o.xaxis===M.xaxis&&o.yaxis===M.yaxis){o.opacity=void 0;break}}}}}},{}],934:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../registry"),M=b("./attributes"),_=b("./constants"),e=b("./subtypes"),o=b("./xy_defaults"),a=b("./period_defaults"),l=b("./stack_defaults"),i=b("./marker_defaults"),v=b("./line_defaults"),h=b("./line_shape_defaults"),s=b("./text_defaults"),d=b("./fillcolor_defaults"),p=b("../../lib").coercePattern;oe.exports=function(f,g,m,u){function w(N,F){return y.coerce(f,g,M,N,F)}var c=o(f,g,u,w);if(c||(g.visible=!1),g.visible){a(f,g,u,w),w("xhoverformat"),w("yhoverformat");var A=l(f,g,u,w),k=!A&&c<_.PTS_LINESONLY?"lines+markers":"lines";w("text"),w("hovertext"),w("mode",k),e.hasLines(g)&&(v(f,g,m,u,w),h(f,g,w),w("connectgaps"),w("line.simplify")),e.hasMarkers(g)&&i(f,g,m,u,w,{gradient:!0}),e.hasText(g)&&(w("texttemplate"),s(f,g,u,w));var C=[];(e.hasMarkers(g)||e.hasText(g))&&(w("cliponaxis"),w("marker.maxdisplayed"),C.push("points")),w("fill",A?A.fillDflt:"none"),"none"!==g.fill&&(d(f,g,m,w),e.hasLines(g)||h(f,g,w),p(w,"fillpattern",g.fillcolor,!1));var E=(g.line||{}).color,L=(g.marker||{}).color;"tonext"!==g.fill&&"toself"!==g.fill||C.push("fills"),w("hoveron",C.join("+")||"points"),"fills"!==g.hoveron&&w("hovertemplate");var D=x.getComponentMethod("errorbars","supplyDefaults");D(f,g,E||L||m,{axis:"y"}),D(f,g,E||L||m,{axis:"x",inherit:"y"}),y.coerceSelectionMarkerOpacity(g,w)}}},{"../../lib":503,"../../registry":638,"./attributes":927,"./constants":931,"./fillcolor_defaults":935,"./line_defaults":940,"./line_shape_defaults":942,"./marker_defaults":946,"./period_defaults":947,"./stack_defaults":950,"./subtypes":952,"./text_defaults":953,"./xy_defaults":954}],935:[function(b,oe,se){"use strict";var y=b("../../components/color"),x=b("../../lib").isArrayOrTypedArray;oe.exports=function(M,_,e,o){var a=!1;if(_.marker){var l=_.marker.color,i=(_.marker.line||{}).color;l&&!x(l)?a=l:i&&!x(i)&&(a=i)}o("fillcolor",y.addOpacity((_.line||{}).color||a||e,.5))}},{"../../components/color":366,"../../lib":503}],936:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axes");oe.exports=function(x,M,_){var e={},o={_fullLayout:_},a=y.getFromTrace(o,M,"x"),l=y.getFromTrace(o,M,"y");return e.xLabel=y.tickText(a,a.c2l(x.x),!0).text,e.yLabel=y.tickText(l,l.c2l(x.y),!0).text,e}},{"../../plots/cartesian/axes":554}],937:[function(b,oe,se){"use strict";var y=b("../../components/color"),x=b("./subtypes");oe.exports=function(M,_){var e,o;if("lines"===M.mode)return(e=M.line.color)&&y.opacity(e)?e:M.fillcolor;if("none"===M.mode)return M.fill?M.fillcolor:"";var a=_.mcc||(M.marker||{}).color,l=_.mlcc||((M.marker||{}).line||{}).color;return(o=a&&y.opacity(a)?a:l&&y.opacity(l)&&(_.mlw||((M.marker||{}).line||{}).width)?l:"")?y.opacity(o)<.3?y.addOpacity(o,.3):o:(e=(M.line||{}).color)&&y.opacity(e)&&x.hasLines(M)&&M.line.width?e:M.fillcolor}},{"../../components/color":366,"./subtypes":952}],938:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../components/fx"),M=b("../../registry"),_=b("./get_trace_color"),e=b("../../components/color"),o=y.fillText;oe.exports=function(a,l,i,v){var h=a.cd,s=h[0].trace,d=a.xa,p=a.ya,f=d.c2p(l),g=p.c2p(i),m=[f,g],u=s.hoveron||"",w=-1!==s.mode.indexOf("markers")?3:.5,c=!!s.xperiodalignment,A=!!s.yperiodalignment;if(-1!==u.indexOf("points")){var k=function(de){var _e=Math.max(w,de.mrc||0),me=d.c2p(de.x)-f,we=p.c2p(de.y)-g;return Math.max(Math.sqrt(me*me+we*we)-_e,1-w/_e)},C=x.getDistanceFunction(v,function(de){if(c){var _e=d.c2p(de.xStart),me=d.c2p(de.xEnd);return f>=Math.min(_e,me)&&f<=Math.max(_e,me)?0:1/0}var we=Math.max(3,de.mrc||0),De=1-1/we,Le=Math.abs(d.c2p(de.x)-f);return Le<we?De*Le/we:Le-we+De},function(de){if(A){var _e=p.c2p(de.yStart),me=p.c2p(de.yEnd);return g>=Math.min(_e,me)&&g<=Math.max(_e,me)?0:1/0}var we=Math.max(3,de.mrc||0),De=1-1/we,Le=Math.abs(p.c2p(de.y)-g);return Le<we?De*Le/we:Le-we+De},k);if(x.getClosest(h,C,a),!1!==a.index){var E=h[a.index],L=d.c2p(E.x,!0),D=p.c2p(E.y,!0),N=E.mrc||1;a.index=E.i;var F=h[0].t.orientation,I=F&&(E.sNorm||E.s),P="h"===F?I:void 0!==E.orig_x?E.orig_x:E.x,j="v"===F?I:void 0!==E.orig_y?E.orig_y:E.y;return y.extendFlat(a,{color:_(s,E),x0:L-N,x1:L+N,xLabelVal:P,y0:D-N,y1:D+N,yLabelVal:j,spikeDistance:k(E),hovertemplate:s.hovertemplate}),o(E,s,a),M.getComponentMethod("errorbars","hoverInfo")(E,s,a),[a]}}if(-1!==u.indexOf("fills")&&s._polygons){var V,Z,Y,ee,re,X,ie,q,U=s._polygons,W=[],ae=!1,G=1/0,te=-1/0,ne=1/0,le=-1/0;for(V=0;V<U.length;V++)(Y=U[V]).contains(m)&&(ae=!ae,W.push(Y),ne=Math.min(ne,Y.ymin),le=Math.max(le,Y.ymax));if(ae){var ue=((ne=Math.max(ne,0))+(le=Math.min(le,p._length)))/2;for(V=0;V<W.length;V++)for(ee=W[V].pts,Z=1;Z<ee.length;Z++)(ie=ee[Z-1][1])>ue!=(q=ee[Z][1])>=ue&&(X=ee[Z-1][0],q-ie&&(re=X+(ee[Z][0]-X)*(ue-ie)/(q-ie),G=Math.min(G,re),te=Math.max(te,re)));G=Math.max(G,0),te=Math.min(te,d._length);var pe=e.defaultLine;return e.opacity(s.fillcolor)?pe=s.fillcolor:e.opacity((s.line||{}).color)&&(pe=s.line.color),y.extendFlat(a,{distance:a.maxHoverDistance,x0:G,x1:te,y0:ue,y1:ue,color:pe,hovertemplate:!1}),delete a.index,a.text=s.text&&!Array.isArray(s.text)?String(s.text):s.name,[a]}}}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../registry":638,"./get_trace_color":937}],939:[function(b,oe,se){"use strict";var y=b("./subtypes");oe.exports={hasLines:y.hasLines,hasMarkers:y.hasMarkers,hasText:y.hasText,isBubble:y.isBubble,attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("./cross_trace_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./cross_trace_calc"),arraysToCalcdata:b("./arrays_to_calcdata"),plot:b("./plot"),colorbar:b("./marker_colorbar"),formatLabels:b("./format_labels"),style:b("./style").style,styleOnSelect:b("./style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./arrays_to_calcdata":926,"./attributes":927,"./calc":928,"./cross_trace_calc":932,"./cross_trace_defaults":933,"./defaults":934,"./format_labels":936,"./hover":938,"./marker_colorbar":945,"./plot":948,"./select":949,"./style":951,"./subtypes":952}],940:[function(b,oe,se){"use strict";var y=b("../../lib").isArrayOrTypedArray,x=b("../../components/colorscale/helpers").hasColorscale,M=b("../../components/colorscale/defaults");oe.exports=function(_,e,o,a,l,i){var v=(_.marker||{}).color;l("line.color",o),x(_,"line")?M(_,e,a,l,{prefix:"line.",cLetter:"c"}):l("line.color",!y(v)&&v||o),l("line.width"),(i||{}).noDash||l("line.dash")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],941:[function(b,oe,se){"use strict";var y=b("../../constants/numerical"),x=y.BADNUM,M=y.LOG_CLIP,_=M+.5,e=M-.5,o=b("../../lib"),a=o.segmentsIntersect,l=o.constrain,i=b("./constants");oe.exports=function(v,h){var s,d,p,f,g,m,u,w,c,A,k,C,E,L,D,N,F,I,P=h.xaxis,j=h.yaxis,V="log"===P.type,Z="log"===j.type,Y=P._length,ee=j._length,re=h.connectGaps,X=h.baseTolerance,K=h.shape,ie="linear"===K,q=h.fill&&"none"!==h.fill,U=[],W=i.minTolerance,ae=v.length,G=new Array(ae),te=0;function ne(nt){var ct=v[nt];if(!ct)return!1;var bt=h.linearized?P.l2p(ct.x):P.c2p(ct.x),kt=h.linearized?j.l2p(ct.y):j.c2p(ct.y);if(bt===x){if(V&&(bt=P.c2p(ct.x,!0)),bt===x)return!1;Z&&kt===x&&(bt*=Math.abs(P._m*ee*(P._m>0?_:e)/(j._m*Y*(j._m>0?_:e)))),bt*=1e3}if(kt===x){if(Z&&(kt=j.c2p(ct.y,!0)),kt===x)return!1;kt*=1e3}return[bt,kt]}function le(nt,ct,bt,kt){var Bt=bt-nt,Et=kt-ct,ht=.5-nt,at=.5-ct,Ft=Bt*Bt+Et*Et,en=Bt*ht+Et*at;if(en>0&&en<Ft){var Qt=ht*Et-at*Bt;if(Qt*Qt<Ft)return!0}}function ue(nt,ct){var bt=nt[0]/Y,kt=nt[1]/ee,Bt=Math.max(0,-bt,bt-1,-kt,kt-1);return Bt&&void 0!==F&&le(bt,kt,F,I)&&(Bt=0),Bt&&ct&&le(bt,kt,ct[0]/Y,ct[1]/ee)&&(Bt=0),(1+i.toleranceGrowth*Bt)*X}function pe(nt,ct){var bt=nt[0]-ct[0],kt=nt[1]-ct[1];return Math.sqrt(bt*bt+kt*kt)}var de,_e,me,we,De,Le,Ie,je=i.maxScreensAway,ye=-Y*je,Me=Y*(1+je),Oe=-ee*je,Pe=ee*(1+je),Re=[[ye,Oe,Me,Oe],[Me,Oe,Me,Pe],[Me,Pe,ye,Pe],[ye,Pe,ye,Oe]];function Ue(nt){if(nt[0]<ye||nt[0]>Me||nt[1]<Oe||nt[1]>Pe)return[l(nt[0],ye,Me),l(nt[1],Oe,Pe)]}function qe(nt,ct){return nt[0]===ct[0]&&(nt[0]===ye||nt[0]===Me)||nt[1]===ct[1]&&(nt[1]===Oe||nt[1]===Pe)||void 0}function Xe(nt,ct,bt){return function(kt,Bt){var Et=Ue(kt),ht=Ue(Bt),at=[];if(Et&&ht&&qe(Et,ht))return at;Et&&at.push(Et),ht&&at.push(ht);var Ft=2*o.constrain((kt[nt]+Bt[nt])/2,ct,bt)-((Et||kt)[nt]+(ht||Bt)[nt]);return Ft&&((Et&&ht?Ft>0==Et[nt]>ht[nt]?Et:ht:Et||ht)[nt]+=Ft),at}}function lt(nt){var ct=nt[0],bt=nt[1],kt=ct===G[te-1][0],Bt=bt===G[te-1][1];if(!kt||!Bt)if(te>1){var Et=ct===G[te-2][0],ht=bt===G[te-2][1];kt&&(ct===ye||ct===Me)&&Et?ht?te--:G[te-1]=nt:Bt&&(bt===Oe||bt===Pe)&&ht?Et?te--:G[te-1]=nt:G[te++]=nt}else G[te++]=nt}function He(nt){G[te-1][0]!==nt[0]&&G[te-1][1]!==nt[1]&&lt([me,we]),lt(nt),De=null,me=we=0}function $e(nt){if(F=nt[0]/Y,I=nt[1]/ee,_e=nt[1]<Oe?Oe:nt[1]>Pe?Pe:0,(de=nt[0]<ye?ye:nt[0]>Me?Me:0)||_e){if(te)if(De){var ct=Ie(De,nt);ct.length>1&&(He(ct[0]),G[te++]=ct[1])}else Le=Ie(G[te-1],nt)[0],G[te++]=Le;else G[te++]=[de||nt[0],_e||nt[1]];var bt=G[te-1];de&&_e&&(bt[0]!==de||bt[1]!==_e)?(De&&(me!==de&&we!==_e?lt(me&&we?(Et=(Bt=nt)[0]-(kt=De)[0],ht=(Bt[1]-kt[1])/Et,(kt[1]*Bt[0]-Bt[1]*kt[0])/Et>0?[ht>0?ye:Me,Pe]:[ht>0?Me:ye,Oe]):[me||de,we||_e]):me&&we&&lt([me,we])),lt([de,_e])):me-de&&we-_e&&lt([de||me,_e||we]),De=nt,me=de,we=_e}else De&&He(Ie(De,nt)[0]),G[te++]=nt;var kt,Bt,Et,ht}for("linear"===K||"spline"===K?Ie=function(nt,ct){for(var bt=[],kt=0,Bt=0;Bt<4;Bt++){var Et=Re[Bt],ht=a(nt[0],nt[1],ct[0],ct[1],Et[0],Et[1],Et[2],Et[3]);ht&&(!kt||Math.abs(ht.x-bt[0][0])>1||Math.abs(ht.y-bt[0][1])>1)&&(ht=[ht.x,ht.y],kt&&pe(ht,nt)<pe(bt[0],nt)?bt.unshift(ht):bt.push(ht),kt++)}return bt}:"hv"===K||"vh"===K?Ie=function(nt,ct){var bt=[],kt=Ue(nt),Bt=Ue(ct);return kt&&Bt&&qe(kt,Bt)||(kt&&bt.push(kt),Bt&&bt.push(Bt)),bt}:"hvh"===K?Ie=Xe(0,ye,Me):"vhv"===K&&(Ie=Xe(1,Oe,Pe)),s=0;s<ae;s++)if(d=ne(s)){for(te=0,De=null,$e(d),s++;s<ae;s++){if(!(f=ne(s))){if(re)continue;break}if(ie&&h.simplify){var et=ne(s+1);if(A=pe(f,d),q&&(0===te||te===ae-1)||!(A<ue(f,et)*W)){for(w=[(f[0]-d[0])/A,(f[1]-d[1])/A],g=d,k=A,C=L=D=0,u=!1,p=f,s++;s<v.length;s++){if(m=et,et=ne(s+1),!m){if(re)continue;break}if(N=(c=[m[0]-d[0],m[1]-d[1]])[0]*w[1]-c[1]*w[0],L=Math.min(L,N),(D=Math.max(D,N))-L>ue(m,et))break;p=m,(E=c[0]*w[0]+c[1]*w[1])>k?(k=E,f=m,u=!1):E<C&&(C=E,g=m,u=!0)}if(u?($e(f),p!==g&&$e(g)):(g!==d&&$e(g),p!==f&&$e(f)),$e(p),s>=v.length||!m)break;$e(m),d=m}}else $e(f)}De&&lt([me||De[0],we||De[1]]),U.push(G.slice(0,te))}return U}},{"../../constants/numerical":479,"../../lib":503,"./constants":931}],942:[function(b,oe,se){"use strict";oe.exports=function(y,x,M){"spline"===M("line.shape")&&M("line.smoothing")}},{}],943:[function(b,oe,se){"use strict";var y={tonextx:1,tonexty:1,tonext:1};oe.exports=function(x,M,_){var e,o,a,l,i,v={},h=!1,s=-1,d=0,p=-1;for(o=0;o<_.length;o++)(a=(e=_[o][0].trace).stackgroup||"")?a in v?i=v[a]:(i=v[a]=d,d++):e.fill in y&&p>=0?i=p:(i=p=d,d++),i<s&&(h=!0),e._groupIndex=s=i;var f=_.slice();h&&f.sort(function(m,u){var w=m[0].trace,c=u[0].trace;return w._groupIndex-c._groupIndex||w.index-c.index});var g={};for(o=0;o<f.length;o++)a=(e=f[o][0].trace).stackgroup||"",!0===e.visible?(e._nexttrace=null,e.fill in y&&(e._prevtrace=(l=g[a])||null,l&&(l._nexttrace=e)),e._ownfill=e.fill&&("tozero"===e.fill.substr(0,6)||"toself"===e.fill||"to"===e.fill.substr(0,2)&&!e._prevtrace),g[a]=e):e._prevtrace=e._nexttrace=e._ownfill=null;return f}},{}],944:[function(b,oe,se){"use strict";var y=b("fast-isnumeric");oe.exports=function(x,M){M||(M=2);var _=x.marker,e=_.sizeref||1,o=_.sizemin||0,a="area"===_.sizemode?function(l){return Math.sqrt(l/e)}:function(l){return l/e};return function(l){var i=a(l/M);return y(i)&&i>0?Math.max(i,o):0}}},{"fast-isnumeric":190}],945:[function(b,oe,se){"use strict";oe.exports={container:"marker",min:"cmin",max:"cmax"}},{}],946:[function(b,oe,se){"use strict";var y=b("../../components/color"),x=b("../../components/colorscale/helpers").hasColorscale,M=b("../../components/colorscale/defaults"),_=b("./subtypes");oe.exports=function(e,o,a,l,i,v){var h=_.isBubble(e),s=(e.line||{}).color;v=v||{},s&&(a=s),i("marker.symbol"),i("marker.opacity",h?.7:1),i("marker.size"),i("marker.color",a),x(e,"marker")&&M(e,o,l,i,{prefix:"marker.",cLetter:"c"}),v.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),v.noLine||(i("marker.line.color",s&&!Array.isArray(s)&&o.marker.color!==s?s:h?y.background:y.defaultLine),x(e,"marker.line")&&M(e,o,l,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",h?1:0)),h&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),v.gradient&&"none"!==i("marker.gradient.type")&&i("marker.gradient.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"./subtypes":952}],947:[function(b,oe,se){"use strict";var y=b("../../lib").dateTick0,x=b("../../constants/numerical").ONEWEEK;function M(_,e){return y(e,_%x==0?1:0)}oe.exports=function(_,e,o,a,l){if(l||(l={x:!0,y:!0}),l.x){var i=a("xperiod");i&&(a("xperiod0",M(i,e.xcalendar)),a("xperiodalignment"))}if(l.y){var v=a("yperiod");v&&(a("yperiod0",M(v,e.ycalendar)),a("yperiodalignment"))}}},{"../../constants/numerical":479,"../../lib":503}],948:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../registry"),M=b("../../lib"),_=M.ensureSingle,e=M.identity,o=b("../../components/drawing"),a=b("./subtypes"),l=b("./line_points"),i=b("./link_traces"),v=b("../../lib/polygon").tester;function h(s,d,p,f,g,m,u){var w;!function(Me,Oe,Pe,Re,Ue){var qe=Pe.xaxis,Xe=Pe.yaxis,lt=y.extent(M.simpleMap(qe.range,qe.r2c)),He=y.extent(M.simpleMap(Xe.range,Xe.r2c)),$e=Re[0].trace;if(a.hasMarkers($e)){var et=$e.marker.maxdisplayed;if(0!==et){var nt=Re.filter(function(Bt){return Bt.x>=lt[0]&&Bt.x<=lt[1]&&Bt.y>=He[0]&&Bt.y<=He[1]}),ct=Math.ceil(nt.length/et),bt=0;Ue.forEach(function(Bt,Et){var ht=Bt[0].trace;a.hasMarkers(ht)&&ht.marker.maxdisplayed>0&&Et<Oe&&bt++});var kt=Math.round(bt*ct/3+Math.floor(bt/3)*ct/7.1);Re.forEach(function(Bt){delete Bt.vis}),nt.forEach(function(Bt,Et){0===Math.round((Et+kt)%ct)&&(Bt.vis=!0)})}}}(0,d,p,f,g);var c=!!u&&u.duration>0;function A(Me){return c?Me.transition():Me}var k=p.xaxis,C=p.yaxis,E=f[0].trace,L=E.line,D=y.select(m),N=_(D,"g","errorbars"),F=_(D,"g","lines"),I=_(D,"g","points"),P=_(D,"g","text");if(x.getComponentMethod("errorbars","plot")(s,N,p,u),!0===E.visible){var j,V;A(D).style("opacity",E.opacity);var Z=E.fill.charAt(E.fill.length-1);"x"!==Z&&"y"!==Z&&(Z=""),f[0][p.isRangePlot?"nodeRangePlot3":"node3"]=D;var Y,ee,re="",X=[],K=E._prevtrace;K&&(re=K._prevRevpath||"",V=K._nextFill,X=K._polygons);var ie,q,U,W,ae,G,te,ne="",le="",ue=[],pe=M.noop;if(j=E._ownFill,a.hasLines(E)||"none"!==E.fill){for(V&&V.datum(f),-1!==["hv","vh","hvh","vhv"].indexOf(L.shape)?(ie=o.steps(L.shape),q=o.steps(L.shape.split("").reverse().join(""))):ie=q="spline"===L.shape?function(Me){var Oe=Me[Me.length-1];return Me.length>1&&Me[0][0]===Oe[0]&&Me[0][1]===Oe[1]?o.smoothclosed(Me.slice(1),L.smoothing):o.smoothopen(Me,L.smoothing)}:function(Me){return"M"+Me.join("L")},U=function(Me){return q(Me.reverse())},ue=l(f,{xaxis:k,yaxis:C,connectGaps:E.connectgaps,baseTolerance:Math.max(L.width||1,3)/4,shape:L.shape,simplify:L.simplify,fill:E.fill}),te=E._polygons=new Array(ue.length),w=0;w<ue.length;w++)E._polygons[w]=v(ue[w]);ue.length&&(W=ue[0][0],G=(ae=ue[ue.length-1])[ae.length-1]),pe=function(Me){return function(Oe){if(Y=ie(Oe),ee=U(Oe),ne?Z?(ne+="L"+Y.substr(1),le=ee+"L"+le.substr(1)):(ne+="Z"+Y,le=ee+"Z"+le):(ne=Y,le=ee),a.hasLines(E)&&Oe.length>1){var Pe=y.select(this);if(Pe.datum(f),Me)A(Pe.style("opacity",0).attr("d",Y).call(o.lineGroupStyle)).style("opacity",1);else{var Re=A(Pe);Re.attr("d",Y),o.singleLineStyle(f,Re)}}}}}var de=F.selectAll(".js-line").data(ue);A(de.exit()).style("opacity",0).remove(),de.each(pe(!1)),de.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(o.lineGroupStyle).each(pe(!0)),o.setClipUrl(de,p.layerClipId,s),ue.length?(j?(j.datum(f),W&&G&&(Z?("y"===Z?W[1]=G[1]=C.c2p(0,!0):"x"===Z&&(W[0]=G[0]=k.c2p(0,!0)),A(j).attr("d","M"+G+"L"+W+"L"+ne.substr(1)).call(o.singleFillStyle,s)):A(j).attr("d",ne+"Z").call(o.singleFillStyle,s))):V&&("tonext"===E.fill.substr(0,6)&&ne&&re?("tonext"===E.fill?A(V).attr("d",ne+"Z"+re+"Z").call(o.singleFillStyle,s):A(V).attr("d",ne+"L"+re.substr(1)+"Z").call(o.singleFillStyle,s),E._polygons=E._polygons.concat(X)):(me(V),E._polygons=null)),E._prevRevpath=le,E._prevPolygons=te):(j?me(j):V&&me(V),E._polygons=E._prevRevpath=E._prevPolygons=null),I.datum(f),P.datum(f),function(Me,Oe,Pe){var Re,Ue=Pe[0].trace,qe=a.hasMarkers(Ue),Xe=a.hasText(Ue),lt=function(Me){if(Me.ids)return Ie}(Ue),He=ye,$e=ye;if(qe||Xe){var et=e,nt=Ue.stackgroup,ct=nt&&"infer zero"===s._fullLayout._scatterStackOpts[k._id+C._id][nt].stackgaps;Ue.marker.maxdisplayed||Ue._needsCull?et=ct?De:we:nt&&!ct&&(et=Le),qe&&(He=et),Xe&&($e=et)}var bt,kt=(Re=Me.selectAll("path.point").data(He,lt)).enter().append("path").classed("point",!0);c&&kt.call(o.pointStyle,Ue,s).call(o.translatePoints,k,C).style("opacity",0).transition().style("opacity",1),Re.order(),qe&&(bt=o.makePointStyleFns(Ue)),Re.each(function(Bt){var Et=y.select(this),ht=A(Et);o.translatePoint(Bt,ht,k,C)?(o.singlePointStyle(Bt,ht,Ue,bt,s),p.layerClipId&&o.hideOutsideRangePoint(Bt,ht,k,C,Ue.xcalendar,Ue.ycalendar),Ue.customdata&&Et.classed("plotly-customdata",null!=Bt.data)):ht.remove()}),c?Re.exit().transition().style("opacity",0).remove():Re.exit().remove(),(Re=Oe.selectAll("g").data($e,lt)).enter().append("g").classed("textpoint",!0).append("text"),Re.order(),Re.each(function(Bt){var Et=y.select(this),ht=A(Et.select("text"));o.translatePoint(Bt,ht,k,C)?p.layerClipId&&o.hideOutsideRangePoint(Bt,Et,k,C,Ue.xcalendar,Ue.ycalendar):Et.remove()}),Re.selectAll("text").call(o.textPointStyle,Ue,s).each(function(Bt){var Et=k.c2p(Bt.x),ht=C.c2p(Bt.y);y.select(this).selectAll("tspan.line").each(function(){A(y.select(this)).attr({x:Et,y:ht})})}),Re.exit().remove()}(I,P,f);var _e=!1===E.cliponaxis?null:p.layerClipId;o.setClipUrl(I,_e,s),o.setClipUrl(P,_e,s)}function me(Me){A(Me).attr("d","M0,0Z")}function we(Me){return Me.filter(function(Oe){return!Oe.gap&&Oe.vis})}function De(Me){return Me.filter(function(Oe){return Oe.vis})}function Le(Me){return Me.filter(function(Oe){return!Oe.gap})}function Ie(Me){return Me.id}function ye(){return!1}}oe.exports=function(s,d,p,f,g,m){var u,w,C,L,c=!g,A=!!g&&g.duration>0,k=i(s,d,p);(u=f.selectAll("g.trace").data(k,function(C){return C[0].trace.uid})).enter().append("g").attr("class",function(C){return"trace scatter trace"+C[0].trace.uid}).style("stroke-miterlimit",2),u.order(),C=s,L=d,u.each(function(D){var N=_(y.select(this),"g","fills");o.setClipUrl(N,L.layerClipId,C);var F=D[0].trace,I=[];F._ownfill&&I.push("_ownFill"),F._nexttrace&&I.push("_nextFill");var P=N.selectAll("g").data(I,e);P.enter().append("g"),P.exit().each(function(j){F[j]=null}).remove(),P.order().each(function(j){F[j]=_(y.select(this),"path","js-fill")})}),A?(m&&(w=m()),y.transition().duration(g.duration).ease(g.easing).each("end",function(){w&&w()}).each("interrupt",function(){w&&w()}).each(function(){f.selectAll("g.trace").each(function(C,E){h(s,E,d,C,k,this,g)})})):u.each(function(C,E){h(s,E,d,C,k,this,g)}),c&&u.exit().remove(),f.selectAll("path:not([d])").remove()}},{"../../components/drawing":388,"../../lib":503,"../../lib/polygon":515,"../../registry":638,"./line_points":941,"./link_traces":943,"./subtypes":952,"@plotly/d3":58}],949:[function(b,oe,se){"use strict";var y=b("./subtypes");oe.exports=function(x,M){var _,e,o,a,l=x.cd,i=x.xaxis,v=x.yaxis,h=[],s=l[0].trace;if(!y.hasMarkers(s)&&!y.hasText(s))return[];if(!1===M)for(_=0;_<l.length;_++)l[_].selected=0;else for(_=0;_<l.length;_++)o=i.c2p((e=l[_]).x),a=v.c2p(e.y),null!==e.i&&M.contains([o,a],!1,_,x)?(h.push({pointNumber:e.i,x:i.c2d(e.x),y:v.c2d(e.y)}),e.selected=1):e.selected=0;return h}},{"./subtypes":952}],950:[function(b,oe,se){"use strict";var y=["orientation","groupnorm","stackgaps"];oe.exports=function(x,M,_,e){var o=_._scatterStackOpts,a=e("stackgroup");if(a){var l=M.xaxis+M.yaxis,i=o[l];i||(i=o[l]={});var v=i[a],h=!1;v?v.traces.push(M):(v=i[a]={traceIndices:[],traces:[M]},h=!0);for(var s={orientation:M.x&&!M.y?"h":"v"},d=0;d<y.length;d++){var p=y[d],f=p+"Found";if(!v[f]){var g=void 0!==x[p],m="orientation"===p;if((g||h)&&(v[p]=e(p,s[p]),m&&(v.fillDflt="h"===v[p]?"tonextx":"tonexty"),g&&(v[f]=!0,!h&&(delete v.traces[0][p],m))))for(var u=0;u<v.traces.length-1;u++){var w=v.traces[u];w._input.fill!==w.fill&&(w.fill=v.fillDflt)}}}return v}}},{}],951:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../components/drawing"),M=b("../../registry");function _(o,a,l){x.pointStyle(o.selectAll("path.point"),a,l)}function e(o,a,l){x.textPointStyle(o.selectAll("text"),a,l)}oe.exports={style:function(o){var a=y.select(o).selectAll("g.trace.scatter");a.style("opacity",function(l){return l[0].trace.opacity}),a.selectAll("g.points").each(function(l){_(y.select(this),l.trace||l[0].trace,o)}),a.selectAll("g.text").each(function(l){e(y.select(this),l.trace||l[0].trace,o)}),a.selectAll("g.trace path.js-line").call(x.lineGroupStyle),a.selectAll("g.trace path.js-fill").call(x.fillGroupStyle,o),M.getComponentMethod("errorbars","style")(a)},stylePoints:_,styleText:e,styleOnSelect:function(o,a,l){var i=a[0].trace;i.selectedpoints?(x.selectedPointStyle(l.selectAll("path.point"),i),x.selectedTextStyle(l.selectAll("text"),i)):(_(l,i,o),e(l,i,o))}}},{"../../components/drawing":388,"../../registry":638,"@plotly/d3":58}],952:[function(b,oe,se){"use strict";var y=b("../../lib");oe.exports={hasLines:function(x){return x.visible&&x.mode&&-1!==x.mode.indexOf("lines")},hasMarkers:function(x){return x.visible&&(x.mode&&-1!==x.mode.indexOf("markers")||"splom"===x.type)},hasText:function(x){return x.visible&&x.mode&&-1!==x.mode.indexOf("text")},isBubble:function(x){return y.isPlainObject(x.marker)&&y.isArrayOrTypedArray(x.marker.size)}}},{"../../lib":503}],953:[function(b,oe,se){"use strict";var y=b("../../lib");oe.exports=function(x,M,_,e,o){o=o||{},e("textposition"),y.coerceFont(e,"textfont",_.font),o.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":503}],954:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../registry");oe.exports=function(M,_,e,o){var a,l=o("x"),i=o("y");if(x.getComponentMethod("calendars","handleTraceDefaults")(M,_,["x","y"],e),l){var v=y.minRowLength(l);i?a=Math.min(v,y.minRowLength(i)):(a=v,o("y0"),o("dy"))}else{if(!i)return 0;a=y.minRowLength(i),o("x0"),o("dx")}return _._length=a,a}},{"../../lib":503,"../../registry":638}],955:[function(b,oe,se){"use strict";var y=b("../scatter/attributes"),x=b("../../components/colorscale/attributes"),M=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,_=b("../../plots/template_attributes").hovertemplateAttrs,e=b("../../plots/template_attributes").texttemplateAttrs,o=b("../../plots/attributes"),a=b("../../constants/gl3d_dashes"),l=b("../../constants/gl3d_markers"),i=b("../../lib/extend").extendFlat,v=b("../../plot_api/edit_types").overrideAll,h=b("../../lib/sort_object_keys"),d=y.marker,p=d.line,f=i({width:y.line.width,dash:{valType:"enumerated",values:h(a),dflt:"solid"}},x("line")),g=oe.exports=v({x:y.x,y:y.y,z:{valType:"data_array"},text:i({},y.text,{}),texttemplate:e({},{}),hovertext:i({},y.hovertext,{}),hovertemplate:_(),xhoverformat:M("x"),yhoverformat:M("y"),zhoverformat:M("z"),mode:i({},y.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:y.connectgaps,line:f,marker:i({symbol:{valType:"enumerated",values:h(l),dflt:"circle",arrayOk:!0},size:i({},d.size,{dflt:8}),sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,opacity:i({},d.opacity,{arrayOk:!1}),colorbar:d.colorbar,line:i({width:i({},p.width,{arrayOk:!1})},x("marker.line"))},x("marker")),textposition:i({},y.textposition,{dflt:"top center"}),textfont:{color:y.textfont.color,size:y.textfont.size,family:i({},y.textfont.family,{arrayOk:!1})},opacity:o.opacity,hoverinfo:i({},o.hoverinfo)},"calc","nested");g.x.editType=g.y.editType=g.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":373,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":927}],956:[function(b,oe,se){"use strict";var y=b("../scatter/arrays_to_calcdata"),x=b("../scatter/colorscale_calc");oe.exports=function(M,_){var e=[{x:!1,y:!1,trace:_,t:{}}];return y(e,_),x(M,_),e}},{"../scatter/arrays_to_calcdata":926,"../scatter/colorscale_calc":930}],957:[function(b,oe,se){"use strict";var y=b("../../registry");function x(M,_,e,o){if(!_||!_.visible)return null;for(var a=y.getComponentMethod("errorbars","makeComputeError")(_),l=new Array(M.length),i=0;i<M.length;i++){var v=a(+M[i],i);if("log"===o.type){var h=o.c2l(M[i]),s=M[i]-v[0],d=M[i]+v[1];if(l[i]=[(o.c2l(s,!0)-h)*e,(o.c2l(d,!0)-h)*e],s>0){var p=o.c2l(s);o._lowerLogErrorBound||(o._lowerLogErrorBound=p),o._lowerErrorBound=Math.min(o._lowerLogErrorBound,p)}}else l[i]=[-v[0]*e,v[1]*e]}return l}oe.exports=function(M,_,e){var o=[x(M.x,M.error_x,_[0],e.xaxis),x(M.y,M.error_y,_[1],e.yaxis),x(M.z,M.error_z,_[2],e.zaxis)],a=function(d){for(var p=0;p<d.length;p++)if(d[p])return d[p].length;return 0}(o);if(0===a)return null;for(var l=new Array(a),i=0;i<a;i++){for(var v=[[0,0,0],[0,0,0]],h=0;h<3;h++)if(o[h])for(var s=0;s<2;s++)v[s][h]=o[h][i][s];l[i]=v}return l}},{"../../registry":638}],958:[function(b,oe,se){"use strict";var y=b("../../../stackgl_modules").gl_line3d,x=b("../../../stackgl_modules").gl_scatter3d,M=b("../../../stackgl_modules").gl_error3d,_=b("../../../stackgl_modules").gl_mesh3d,e=b("../../../stackgl_modules").delaunay_triangulate,o=b("../../lib"),a=b("../../lib/str2rgbarray"),l=b("../../lib/gl_format_color").formatColor,i=b("../scatter/make_bubble_size_func"),v=b("../../constants/gl3d_dashes"),h=b("../../constants/gl3d_markers"),s=b("../../plots/cartesian/axes"),d=b("../../components/fx/helpers").appendArrayPointValue,p=b("./calc_errors");function f(L,D){this.scene=L,this.uid=D,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var g=f.prototype;function m(L){return null==L?0:L.indexOf("left")>-1?-1:L.indexOf("right")>-1?1:0}function u(L){return null==L?0:L.indexOf("top")>-1?-1:L.indexOf("bottom")>-1?1:0}function w(L,D){return D(4*L)}function c(L){return h[L]}function A(L,D,N,F,I){var P=null;if(o.isArrayOrTypedArray(L)){P=[];for(var j=0;j<D;j++)P[j]=void 0===L[j]?F:N(L[j],I)}else P=N(L,o.identity);return P}function C(L){if(o.isArrayOrTypedArray(L)){var D=L[0];return o.isArrayOrTypedArray(D)&&(L=D),"rgb("+L.slice(0,3).map(function(N){return Math.round(255*N)})+")"}return null}function E(L){return o.isArrayOrTypedArray(L)?4===L.length&&"number"==typeof L[0]?C(L):L.map(C):null}g.handlePick=function(L){if(L.object&&(L.object===this.linePlot||L.object===this.delaunayMesh||L.object===this.textMarkers||L.object===this.scatterPlot)){var D=L.index=L.data.index;return L.object.highlight&&L.object.highlight(null),this.scatterPlot&&(L.object=this.scatterPlot,this.scatterPlot.highlight(L.data)),L.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[D]||0===this.textLabels[D])&&(L.textLabel=this.textLabels[D]):L.textLabel=this.textLabels),L.traceCoordinate=[this.data.x[D],this.data.y[D],this.data.z[D]],!0}},g.update=function(L){var D,N,F,I,P=this.scene.glplot.gl,j=v.solid;this.data=L;var V=function(L,D){var N,F,I,P,j,V,Z=[],Y=L.fullSceneLayout,ee=L.dataScale,re=Y.xaxis,X=Y.yaxis,K=Y.zaxis,ie=D.marker,q=D.line,U=D.x||[],W=D.y||[],ae=D.z||[],G=U.length,te=D.xcalendar,ne=D.ycalendar,le=D.zcalendar;for(j=0;j<G;j++)N=re.d2l(U[j],0,te)*ee[0],F=X.d2l(W[j],0,ne)*ee[1],I=K.d2l(ae[j],0,le)*ee[2],Z[j]=[N,F,I];if(Array.isArray(D.text))V=D.text;else if(void 0!==D.text)for(V=new Array(G),j=0;j<G;j++)V[j]=D.text;function ue(Re,Ue){var qe=Y[Re];return s.tickText(qe,qe.d2l(Ue),!0).text}var pe=D.texttemplate;if(pe){var de=L.fullLayout._d3locale,_e=Array.isArray(pe),me=_e?Math.min(pe.length,G):G,we=_e?function(Re){return pe[Re]}:function(){return pe};for(V=new Array(me),j=0;j<me;j++){var De={x:U[j],y:W[j],z:ae[j]},Le={xLabel:ue("xaxis",U[j]),yLabel:ue("yaxis",W[j]),zLabel:ue("zaxis",ae[j])},Ie={};d(Ie,D,j);var je=D._meta||{};V[j]=o.texttemplateString(we(j),Le,de,Ie,De,je)}}if(P={position:Z,mode:D.mode,text:V},"line"in D&&(P.lineColor=l(q,1,G),P.lineWidth=q.width,P.lineDashes=q.dash),"marker"in D){var ye=i(D);P.scatterColor=l(ie,1,G),P.scatterSize=A(ie.size,G,w,20,ye),P.scatterMarker=A(ie.symbol,G,c,"\u25cf"),P.scatterLineWidth=ie.line.width,P.scatterLineColor=l(ie.line,1,G),P.scatterAngle=0}"textposition"in D&&(P.textOffset=function(Re){var Ue=[0,0];if(Array.isArray(Re))for(var qe=0;qe<Re.length;qe++)Ue[qe]=[0,0],Re[qe]&&(Ue[qe][0]=m(Re[qe]),Ue[qe][1]=u(Re[qe]));else Ue[0]=m(Re),Ue[1]=u(Re);return Ue}(D.textposition),P.textColor=l(D.textfont,1,G),P.textSize=A(D.textfont.size,G,o.identity,12),P.textFont=D.textfont.family,P.textAngle=0);var Me=["x","y","z"];for(P.project=[!1,!1,!1],P.projectScale=[1,1,1],P.projectOpacity=[1,1,1],j=0;j<3;++j){var Oe=D.projection[Me[j]];(P.project[j]=Oe.show)&&(P.projectOpacity[j]=Oe.opacity,P.projectScale[j]=Oe.scale)}P.errorBounds=p(D,ee,Y);var Pe=function(Re){for(var Ue=[0,0,0],qe=[[0,0,0],[0,0,0],[0,0,0]],Xe=[1,1,1],lt=0;lt<3;lt++){var He=Re[lt];He&&!1!==He.copy_zstyle&&!1!==Re[2].visible&&(He=Re[2]),He&&He.visible&&(Ue[lt]=He.width/2,qe[lt]=a(He.color),Xe[lt]=He.thickness)}return{capSize:Ue,color:qe,lineWidth:Xe}}([D.error_x,D.error_y,D.error_z]);return P.errorColor=Pe.color,P.errorLineWidth=Pe.lineWidth,P.errorCapSize=Pe.capSize,P.delaunayAxis=D.surfaceaxis,P.delaunayColor=a(D.surfacecolor),P}(this.scene,L);"mode"in V&&(this.mode=V.mode),"lineDashes"in V&&V.lineDashes in v&&(j=v[V.lineDashes]),this.color=E(V.scatterColor)||E(V.lineColor),this.dataPoints=V.position,D={gl:this.scene.glplot.gl,position:V.position,color:V.lineColor,lineWidth:V.lineWidth||1,dashes:j[0],dashScale:j[1],opacity:L.opacity,connectGaps:L.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(D):(this.linePlot=y(D),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var Z=L.opacity;if(L.marker&&L.marker.opacity&&(Z*=L.marker.opacity),N={gl:this.scene.glplot.gl,position:V.position,color:V.scatterColor,size:V.scatterSize,glyph:V.scatterMarker,opacity:Z,orthographic:!0,lineWidth:V.scatterLineWidth,lineColor:V.scatterLineColor,project:V.project,projectScale:V.projectScale,projectOpacity:V.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(N):(this.scatterPlot=x(N),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),I={gl:this.scene.glplot.gl,position:V.position,glyph:V.text,color:V.textColor,size:V.textSize,angle:V.textAngle,alignment:V.textOffset,font:V.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:L.opacity},this.textLabels=L.hovertext||L.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(I):(this.textMarkers=x(I),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),F={gl:this.scene.glplot.gl,position:V.position,color:V.errorColor,error:V.errorBounds,lineWidth:V.errorLineWidth,capSize:V.errorCapSize,opacity:L.opacity},this.errorBars?V.errorBounds?this.errorBars.update(F):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):V.errorBounds&&(this.errorBars=M(F),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),V.delaunayAxis>=0){var Y=function(ee,re,X){var K,ie=(X+1)%3,q=(X+2)%3,U=[],W=[];for(K=0;K<ee.length;++K){var ae=ee[K];!isNaN(ae[ie])&&isFinite(ae[ie])&&!isNaN(ae[q])&&isFinite(ae[q])&&(U.push([ae[ie],ae[q]]),W.push(K))}var G=e(U);for(K=0;K<G.length;++K)for(var te=G[K],ne=0;ne<te.length;++ne)te[ne]=W[te[ne]];return{positions:ee,cells:G,meshColor:re}}(V.position,V.delaunayColor,V.delaunayAxis);Y.opacity=L.opacity,this.delaunayMesh?this.delaunayMesh.update(Y):(Y.gl=P,this.delaunayMesh=_(Y),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},g.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},oe.exports=function(L,D){var N=new f(L,D.uid);return N.update(D),N}},{"../../../stackgl_modules":1124,"../../components/fx/helpers":402,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../scatter/make_bubble_size_func":944,"./calc_errors":957}],959:[function(b,oe,se){"use strict";var y=b("../../registry"),x=b("../../lib"),M=b("../scatter/subtypes"),_=b("../scatter/marker_defaults"),e=b("../scatter/line_defaults"),o=b("../scatter/text_defaults"),a=b("./attributes");oe.exports=function(l,i,v,h){function s(w,c){return x.coerce(l,i,a,w,c)}if(w=l,c=i,k=h,C=0,E=(A=s)("x"),L=A("y"),D=A("z"),y.getComponentMethod("calendars","handleTraceDefaults")(w,c,["x","y","z"],k),E&&L&&D&&(C=Math.min(E.length,L.length,D.length),c._length=c._xlength=c._ylength=c._zlength=C),C){s("text"),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat"),s("zhoverformat"),s("mode"),M.hasLines(i)&&(s("connectgaps"),e(l,i,v,h,s)),M.hasMarkers(i)&&_(l,i,v,h,s,{noSelect:!0}),M.hasText(i)&&(s("texttemplate"),o(l,i,h,s,{noSelect:!0}));var d=(i.line||{}).color,p=(i.marker||{}).color;s("surfaceaxis")>=0&&s("surfacecolor",d||p);for(var f=["x","y","z"],g=0;g<3;++g){var m="projection."+f[g];s(m+".show")&&(s(m+".opacity"),s(m+".scale"))}var u=y.getComponentMethod("errorbars","supplyDefaults");u(l,i,d||p||v,{axis:"z"}),u(l,i,d||p||v,{axis:"y",inherit:"z"}),u(l,i,d||p||v,{axis:"x",inherit:"z"})}else i.visible=!1;var w,c,A,k,C,E,L,D}},{"../../lib":503,"../../registry":638,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":955}],960:[function(b,oe,se){"use strict";oe.exports={plot:b("./convert"),attributes:b("./attributes"),markerSymbols:b("../../constants/gl3d_markers"),supplyDefaults:b("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:b("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":477,"../../plots/gl3d":598,"./attributes":955,"./calc":956,"./convert":958,"./defaults":959}],961:[function(b,oe,se){"use strict";var y=b("../scatter/attributes"),x=b("../../plots/attributes"),M=b("../../plots/template_attributes").hovertemplateAttrs,_=b("../../plots/template_attributes").texttemplateAttrs,e=b("../../components/colorscale/attributes"),o=b("../../lib/extend").extendFlat,a=y.marker,l=y.line,i=a.line;oe.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:o({},y.mode,{dflt:"markers"}),text:o({},y.text,{}),texttemplate:_({editType:"plot"},{keys:["a","b","text"]}),hovertext:o({},y.hovertext,{}),line:{color:l.color,width:l.width,dash:l.dash,shape:o({},l.shape,{values:["linear","spline"]}),smoothing:l.smoothing,editType:"calc"},connectgaps:y.connectgaps,fill:o({},y.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:y.fillcolor,marker:o({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:o({width:i.width,editType:"calc"},e("marker.line")),gradient:a.gradient,editType:"calc"},e("marker")),textfont:y.textfont,textposition:y.textposition,selected:y.selected,unselected:y.unselected,hoverinfo:o({},x.hoverinfo,{flags:["a","b","text","name"]}),hoveron:y.hoveron,hovertemplate:M()}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],962:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../scatter/colorscale_calc"),M=b("../scatter/arrays_to_calcdata"),_=b("../scatter/calc_selection"),e=b("../scatter/calc").calcMarkerSize,o=b("../carpet/lookup_carpetid");oe.exports=function(a,l){var i=l._carpetTrace=o(a,l);if(i&&i.visible&&"legendonly"!==i.visible){var v;l.xaxis=i.xaxis,l.yaxis=i.yaxis;var h,s,d=l._length,p=new Array(d),f=!1;for(v=0;v<d;v++)if(s=l.b[v],y(h=l.a[v])&&y(s)){var g=i.ab2xy(+h,+s,!0),m=i.isVisible(+h,+s);m||(f=!0),p[v]={x:g[0],y:g[1],a:h,b:s,vis:m}}else p[v]={x:!1,y:!1};return l._needsCull=f,p[0].carpet=i,p[0].trace=l,e(l,d),x(a,l),M(p,l),_(p,l),p}}},{"../carpet/lookup_carpetid":708,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],963:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../scatter/constants"),M=b("../scatter/subtypes"),_=b("../scatter/marker_defaults"),e=b("../scatter/line_defaults"),o=b("../scatter/line_shape_defaults"),a=b("../scatter/text_defaults"),l=b("../scatter/fillcolor_defaults"),i=b("./attributes");oe.exports=function(v,h,s,d){function p(w,c){return y.coerce(v,h,i,w,c)}p("carpet"),h.xaxis="x",h.yaxis="y";var f=p("a"),g=p("b"),m=Math.min(f.length,g.length);if(m){h._length=m,p("text"),p("texttemplate"),p("hovertext"),p("mode",m<x.PTS_LINESONLY?"lines+markers":"lines"),M.hasLines(h)&&(e(v,h,s,d,p),o(v,h,p),p("connectgaps")),M.hasMarkers(h)&&_(v,h,s,d,p,{gradient:!0}),M.hasText(h)&&a(v,h,d,p);var u=[];(M.hasMarkers(h)||M.hasText(h))&&(p("marker.maxdisplayed"),u.push("points")),p("fill"),"none"!==h.fill&&(l(v,h,s,p),M.hasLines(h)||o(v,h,p)),"tonext"!==h.fill&&"toself"!==h.fill||u.push("fills"),"fills"!==p("hoveron",u.join("+")||"points")&&p("hovertemplate"),y.coerceSelectionMarkerOpacity(h,p)}else h.visible=!1}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":961}],964:[function(b,oe,se){"use strict";oe.exports=function(y,x,M,_,e){var o=_[e];return y.a=o.a,y.b=o.b,y.y=o.y,y}},{}],965:[function(b,oe,se){"use strict";oe.exports=function(y,x){var M={},_=x._carpet,e=_.ab2ij([y.a,y.b]),o=Math.floor(e[0]),a=e[0]-o,l=Math.floor(e[1]),v=_.evalxy([],o,l,a,e[1]-l);return M.yLabel=v[1].toFixed(3),M}},{}],966:[function(b,oe,se){"use strict";var y=b("../scatter/hover"),x=b("../../lib").fillText;oe.exports=function(M,_,e,o){var a=y(M,_,e,o);if(a&&!1!==a[0].index){var l=a[0];if(void 0===l.index){var v=M.xa._length,h=v*(1-l.y0/M.ya._length)/2,s=v-h;return l.x0=Math.max(Math.min(l.x0,s),h),l.x1=Math.max(Math.min(l.x1,s),h),a}var d=l.cd[l.index];l.a=d.a,l.b=d.b,l.xLabelVal=void 0,l.yLabelVal=void 0;var p=l.trace,f=p._carpet,g=p._module.formatLabels(d,p);l.yLabel=g.yLabel,delete l.text;var m=[];if(!p.hovertemplate){var u=(d.hi||p.hoverinfo).split("+");-1!==u.indexOf("all")&&(u=["a","b","text"]),-1!==u.indexOf("a")&&w(f.aaxis,d.a),-1!==u.indexOf("b")&&w(f.baxis,d.b),m.push("y: "+l.yLabel),-1!==u.indexOf("text")&&x(d,p,m),l.extraText=m.join("<br>")}return a}function w(c,A){var k;k=c.labelprefix&&c.labelprefix.length>0?c.labelprefix.replace(/ = $/,""):c._hovertitle,m.push(k+": "+A.toFixed(3)+c.labelsuffix)}}},{"../../lib":503,"../scatter/hover":938}],967:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../scatter/select"),eventData:b("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:b("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":961,"./calc":962,"./defaults":963,"./event_data":964,"./format_labels":965,"./hover":966,"./plot":968}],968:[function(b,oe,se){"use strict";var y=b("../scatter/plot"),x=b("../../plots/cartesian/axes"),M=b("../../components/drawing");oe.exports=function(_,e,o,a){var l,v,h=o[0][0].carpet,s={xaxis:x.getFromId(_,h.xaxis||"x"),yaxis:x.getFromId(_,h.yaxis||"y"),plot:e.plot};for(y(_,s,o,a),l=0;l<o.length;l++)v=a.selectAll("g.trace"+o[l][0].trace.uid+" .js-line"),M.setClipUrl(v,o[l][0].carpet._clipPathId,_)}},{"../../components/drawing":388,"../../plots/cartesian/axes":554,"../scatter/plot":948}],969:[function(b,oe,se){"use strict";var y=b("../../plots/template_attributes").hovertemplateAttrs,x=b("../../plots/template_attributes").texttemplateAttrs,M=b("../scatter/attributes"),_=b("../../plots/attributes"),e=b("../../components/colorscale/attributes"),o=b("../../components/drawing/attributes").dash,a=b("../../lib/extend").extendFlat,l=b("../../plot_api/edit_types").overrideAll,i=M.marker,v=M.line,h=i.line;oe.exports=l({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:a({},M.mode,{dflt:"markers"}),text:a({},M.text,{}),texttemplate:x({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:a({},M.hovertext,{}),textfont:M.textfont,textposition:M.textposition,line:{color:v.color,width:v.width,dash:o},connectgaps:M.connectgaps,marker:a({symbol:i.symbol,opacity:i.opacity,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,colorbar:i.colorbar,line:a({width:h.width},e("marker.line")),gradient:i.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:M.fillcolor,selected:M.selected,unselected:M.unselected,hoverinfo:a({},_.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:y()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],970:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../constants/numerical").BADNUM,M=b("../scatter/colorscale_calc"),_=b("../scatter/arrays_to_calcdata"),e=b("../scatter/calc_selection"),o=b("../../lib")._;function a(l){return l&&"string"==typeof l}oe.exports=function(l,i){var v,h=Array.isArray(i.locations),s=h?i.locations.length:i._length,d=new Array(s);v=i.geojson?function(w){return a(w)||y(w)}:a;for(var p=0;p<s;p++){var f=d[p]={};if(h){var g=i.locations[p];f.loc=v(g)?g:null}else{var m=i.lon[p],u=i.lat[p];f.lonlat=y(m)&&y(u)?[+m,+u]:[x,x]}}return _(d,i),M(l,i),e(d,i),s&&(d[0].t={labels:{lat:o(l,"lat:")+" ",lon:o(l,"lon:")+" "}}),d}},{"../../constants/numerical":479,"../../lib":503,"../scatter/arrays_to_calcdata":926,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],971:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../scatter/subtypes"),M=b("../scatter/marker_defaults"),_=b("../scatter/line_defaults"),e=b("../scatter/text_defaults"),o=b("../scatter/fillcolor_defaults"),a=b("./attributes");oe.exports=function(l,i,v,h){function s(w,c){return y.coerce(l,i,a,w,c)}var d,p=s("locations");if(p&&p.length){var f,g=s("geojson");("string"==typeof g&&""!==g||y.isPlainObject(g))&&(f="geojson-id"),"geojson-id"===s("locationmode",f)&&s("featureidkey"),d=p.length}else{var m=s("lon")||[],u=s("lat")||[];d=Math.min(m.length,u.length)}d?(i._length=d,s("text"),s("hovertext"),s("hovertemplate"),s("mode"),x.hasLines(i)&&(_(l,i,v,h,s),s("connectgaps")),x.hasMarkers(i)&&M(l,i,v,h,s,{gradient:!0}),x.hasText(i)&&(s("texttemplate"),e(l,i,h,s)),s("fill"),"none"!==i.fill&&o(l,i,v,s),y.coerceSelectionMarkerOpacity(i,s)):i.visible=!1}},{"../../lib":503,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":969}],972:[function(b,oe,se){"use strict";oe.exports=function(y,x,M,_,e){y.lon=x.lon,y.lat=x.lat,y.location=x.loc?x.loc:null;var o=_[e];return o.fIn&&o.fIn.properties&&(y.properties=o.fIn.properties),y}},{}],973:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axes");oe.exports=function(x,M,_){var e={},o=_[M.geo]._subplot.mockAxis,a=x.lonlat;return e.lonLabel=y.tickText(o,o.c2l(a[0]),!0).text,e.latLabel=y.tickText(o,o.c2l(a[1]),!0).text,e}},{"../../plots/cartesian/axes":554}],974:[function(b,oe,se){"use strict";var y=b("../../components/fx"),x=b("../../constants/numerical").BADNUM,M=b("../scatter/get_trace_color"),_=b("../../lib").fillText,e=b("./attributes");oe.exports=function(o,a,l){var i=o.cd,v=i[0].trace,h=o.xa,s=o.ya,d=o.subplot,p=d.projection.isLonLatOverEdges,f=d.project;if(y.getClosest(i,function(k){var C=k.lonlat;if(C[0]===x||p(C))return 1/0;var E=f(C),L=f([a,l]),D=Math.abs(E[0]-L[0]),N=Math.abs(E[1]-L[1]),F=Math.max(3,k.mrc||0);return Math.max(Math.sqrt(D*D+N*N)-F,1-3/F)},o),!1!==o.index){var g=i[o.index],m=g.lonlat,u=[h.c2p(m),s.c2p(m)],w=g.mrc||1;o.x0=u[0]-w,o.x1=u[0]+w,o.y0=u[1]-w,o.y1=u[1]+w,o.loc=g.loc,o.lon=m[0],o.lat=m[1];var c={};c[v.geo]={_subplot:d};var A=v._module.formatLabels(g,v,c);return o.lonLabel=A.lonLabel,o.latLabel=A.latLabel,o.color=M(v,g),o.extraText=function(k,C,E,L){if(!k.hovertemplate){var D=C.hi||k.hoverinfo,N="all"===D?e.hoverinfo.flags:D.split("+"),F=-1!==N.indexOf("location")&&Array.isArray(k.locations),I=-1!==N.indexOf("lon"),P=-1!==N.indexOf("lat"),j=-1!==N.indexOf("text"),V=[];return F?V.push(C.loc):I&&P?V.push("("+Z(E.latLabel)+", "+Z(E.lonLabel)+")"):I?V.push(L.lon+Z(E.lonLabel)):P&&V.push(L.lat+Z(E.latLabel)),j&&_(C,k,V),V.join("<br>")}function Z(Y){return Y+"\xb0"}}(v,g,o,i[0].t.labels),o.hovertemplate=v.hovertemplate,[o]}}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":937,"./attributes":969}],975:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),calcGeoJSON:b("./plot").calcGeoJSON,plot:b("./plot").plot,style:b("./style"),styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:b("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":589,"../scatter/marker_colorbar":945,"../scatter/style":951,"./attributes":969,"./calc":970,"./defaults":971,"./event_data":972,"./format_labels":973,"./hover":974,"./plot":976,"./select":977,"./style":978}],976:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../lib"),M=b("../../lib/topojson_utils").getTopojsonFeatures,_=b("../../lib/geojson_utils"),e=b("../../lib/geo_location_utils"),o=b("../../plots/cartesian/autorange").findExtremes,a=b("../../constants/numerical").BADNUM,l=b("../scatter/calc").calcMarkerSize,i=b("../scatter/subtypes"),v=b("./style");oe.exports={calcGeoJSON:function(h,s){var d,p,f=h[0].trace,g=s[f.geo],m=g._subplot,u=f._length;if(Array.isArray(f.locations)){var w=f.locationmode,c="geojson-id"===w?e.extractTraceFeature(h):M(f,m.topojson);for(d=0;d<u;d++){p=h[d];var A="geojson-id"===w?p.fOut:e.locationToFeature(w,p.loc,c);p.lonlat=A?A.properties.ct:[a,a]}}var k,C,E={padded:!0};if("geojson"===g.fitbounds&&"geojson-id"===f.locationmode){var L=e.computeBbox(e.getTraceGeojson(f));k=[L[0],L[2]],C=[L[1],L[3]]}else{for(k=new Array(u),C=new Array(u),d=0;d<u;d++)k[d]=(p=h[d]).lonlat[0],C[d]=p.lonlat[1];E.ppad=l(f,u)}f._extremes.lon=o(g.lonaxis._ax,k,E),f._extremes.lat=o(g.lataxis._ax,C,E)},plot:function(h,s,d){var p=s.layers.frontplot.select(".scatterlayer"),f=x.makeTraceGroups(p,d,"trace scattergeo");function g(m,u){m.lonlat[0]===a&&y.select(u).remove()}f.selectAll("*").remove(),f.each(function(m){var u=y.select(this),w=m[0].trace;if(i.hasLines(w)||"none"!==w.fill){var c=_.calcTraceToLineCoords(m),A="none"!==w.fill?_.makePolygon(c):_.makeLine(c);u.selectAll("path.js-line").data([{geojson:A,trace:w}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}i.hasMarkers(w)&&u.selectAll("path.point").data(x.identity).enter().append("path").classed("point",!0).each(function(k){g(k,this)}),i.hasText(w)&&u.selectAll("g").data(x.identity).enter().append("g").append("text").each(function(k){g(k,this)}),v(h,m)})}}},{"../../constants/numerical":479,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"../scatter/calc":928,"../scatter/subtypes":952,"./style":978,"@plotly/d3":58}],977:[function(b,oe,se){"use strict";var y=b("../scatter/subtypes"),x=b("../../constants/numerical").BADNUM;oe.exports=function(M,_){var e,o,a,l,i,v=M.cd,h=M.xaxis,s=M.yaxis,d=[],p=v[0].trace;if(!y.hasMarkers(p)&&!y.hasText(p))return[];if(!1===_)for(i=0;i<v.length;i++)v[i].selected=0;else for(i=0;i<v.length;i++)(o=(e=v[i]).lonlat)[0]!==x&&(a=h.c2p(o),l=s.c2p(o),_.contains([a,l],null,i,M)?(d.push({pointNumber:i,lon:o[0],lat:o[1]}),e.selected=1):e.selected=0);return d}},{"../../constants/numerical":479,"../scatter/subtypes":952}],978:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../components/drawing"),M=b("../../components/color"),_=b("../scatter/style"),e=_.stylePoints,o=_.styleText;oe.exports=function(a,l){var i,v,h,s;l&&(i=a,h=(v=l)[0].trace,(s=v[0].node3).style("opacity",v[0].trace.opacity),e(s,h,i),o(s,h,i),s.selectAll("path.js-line").style("fill","none").each(function(d){var p=y.select(this),f=d.trace,g=f.line||{};p.call(M.stroke,g.color).call(x.dashLine,g.dash||"",g.width||0),"none"!==f.fill&&p.call(M.fill,f.fillcolor)}))}},{"../../components/color":366,"../../components/drawing":388,"../scatter/style":951,"@plotly/d3":58}],979:[function(b,oe,se){"use strict";var y=b("../../plots/attributes"),x=b("../scatter/attributes"),M=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,_=b("../../components/colorscale/attributes"),e=b("../../lib/sort_object_keys"),o=b("../../lib/extend").extendFlat,a=b("../../plot_api/edit_types").overrideAll,l=b("./constants").DASHES,i=x.line,v=x.marker,h=v.line,s=oe.exports=a({x:x.x,x0:x.x0,dx:x.dx,y:x.y,y0:x.y0,dy:x.dy,xperiod:x.xperiod,yperiod:x.yperiod,xperiod0:x.xperiod0,yperiod0:x.yperiod0,xperiodalignment:x.xperiodalignment,yperiodalignment:x.yperiodalignment,xhoverformat:M("x"),yhoverformat:M("y"),text:x.text,hovertext:x.hovertext,textposition:x.textposition,textfont:x.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:i.color,width:i.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(l),dflt:"solid"}},marker:o({},_("marker"),{symbol:v.symbol,size:v.size,sizeref:v.sizeref,sizemin:v.sizemin,sizemode:v.sizemode,opacity:v.opacity,colorbar:v.colorbar,line:o({},_("marker.line"),{width:h.width})}),connectgaps:x.connectgaps,fill:o({},x.fill,{dflt:"none"}),fillcolor:x.fillcolor,selected:{marker:x.selected.marker,textfont:x.selected.textfont},unselected:{marker:x.unselected.marker,textfont:x.unselected.textfont},opacity:y.opacity},"calc","nested");s.x.editType=s.y.editType=s.x0.editType=s.y0.editType="calc+clearAxisTypes",s.hovertemplate=x.hovertemplate,s.texttemplate=x.texttemplate},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":927,"./constants":982}],980:[function(b,oe,se){"use strict";var y=b("./hover");oe.exports={moduleType:"trace",name:"scattergl",basePlotModule:b("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:b("./attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../scatter/cross_trace_defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),hoverPoints:y.hoverPoints,selectPoints:b("./select"),meta:{}}},{"../../plots/cartesian":568,"../scatter/cross_trace_defaults":933,"../scatter/marker_colorbar":945,"./attributes":979,"./calc":981,"./defaults":984,"./format_labels":986,"./hover":988,"./select":992}],981:[function(b,oe,se){"use strict";var y=b("@plotly/point-cluster"),x=b("../../lib"),M=b("../../plots/cartesian/axis_ids"),_=b("../../plots/cartesian/autorange").findExtremes,e=b("../../plots/cartesian/align_period"),o=b("../scatter/calc"),a=o.calcMarkerSize,l=o.calcAxisExpansion,i=o.setFirstScatter,v=b("../scatter/colorscale_calc"),h=b("./convert"),s=b("./scene_update"),d=b("../../constants/numerical").BADNUM,p=b("./constants").TOO_MANY_POINTS;function f(g,m,u){var w=g._extremes[m._id],c=_(m,u._bnds,{padded:!0});w.min=w.min.concat(c.min),w.max=w.max.concat(c.max)}oe.exports=function(g,m){var u,w=g._fullLayout,c=M.getFromId(g,m.xaxis),A=M.getFromId(g,m.yaxis),k=w._plots[m.xaxis+m.yaxis],C=m._length,E=C>=p,L=2*C,D={},N=c.makeCalcdata(m,"x"),F=A.makeCalcdata(m,"y"),I=e(m,c,"x",N),P=e(m,A,"y",F),j=I.vals,V=P.vals;m._x=j,m._y=V,m.xperiodalignment&&(m._origX=N,m._xStarts=I.starts,m._xEnds=I.ends),m.yperiodalignment&&(m._origY=F,m._yStarts=P.starts,m._yEnds=P.ends);var Z=new Array(L),Y=new Array(C);for(u=0;u<C;u++)Z[2*u]=j[u]===d?NaN:j[u],Z[2*u+1]=V[u]===d?NaN:V[u],Y[u]=u;if("log"===c.type)for(u=0;u<L;u+=2)Z[u]=c.c2l(Z[u]);if("log"===A.type)for(u=1;u<L;u+=2)Z[u]=A.c2l(Z[u]);E&&"log"!==c.type&&"log"!==A.type?D.tree=y(Z):D.ids=Y,v(g,m);var ee,re=function(K,ie,q,U,W,ae){var G=h.style(K,q);if(G.marker&&(G.marker.positions=U),G.line&&U.length>1&&x.extendFlat(G.line,h.linePositions(K,q,U)),G.errorX||G.errorY){var te=h.errorBarPositions(K,q,U,W,ae);G.errorX&&x.extendFlat(G.errorX,te.x),G.errorY&&x.extendFlat(G.errorY,te.y)}return G.text&&(x.extendFlat(G.text,{positions:U},h.textPosition(K,q,G.text,G.marker)),x.extendFlat(G.textSel,{positions:U},h.textPosition(K,q,G.text,G.markerSel)),x.extendFlat(G.textUnsel,{positions:U},h.textPosition(K,q,G.text,G.markerUnsel))),G}(g,0,m,Z,j,V),X=s(g,k);return i(w,m),E?re.marker&&(ee=re.marker.sizeAvg||Math.max(re.marker.size,3)):ee=a(m,C),l(g,m,c,A,j,V,ee),re.errorX&&f(m,c,re.errorX),re.errorY&&f(m,A,re.errorY),re.fill&&!X.fill2d&&(X.fill2d=!0),re.marker&&!X.scatter2d&&(X.scatter2d=!0),re.line&&!X.line2d&&(X.line2d=!0),!re.errorX&&!re.errorY||X.error2d||(X.error2d=!0),re.text&&!X.glText&&(X.glText=!0),re.marker&&(re.marker.snap=C),X.lineOptions.push(re.line),X.errorXOptions.push(re.errorX),X.errorYOptions.push(re.errorY),X.fillOptions.push(re.fill),X.markerOptions.push(re.marker),X.markerSelectedOptions.push(re.markerSel),X.markerUnselectedOptions.push(re.markerUnsel),X.textOptions.push(re.text),X.textSelectedOptions.push(re.textSel),X.textUnselectedOptions.push(re.textUnsel),X.selectBatch.push([]),X.unselectBatch.push([]),D._scene=X,D.index=X.count,D.x=j,D.y=V,D.positions=Z,X.count++,[{x:!1,y:!1,t:D,trace:m}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"../scatter/calc":928,"../scatter/colorscale_calc":930,"./constants":982,"./convert":983,"./scene_update":991,"@plotly/point-cluster":59}],982:[function(b,oe,se){"use strict";oe.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],983:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("svg-path-sdf"),M=b("color-normalize"),_=b("../../registry"),e=b("../../lib"),o=b("../../components/drawing"),a=b("../../plots/cartesian/axis_ids"),l=b("../../lib/gl_format_color").formatColor,i=b("../scatter/subtypes"),v=b("../scatter/make_bubble_size_func"),h=b("./helpers"),s=b("./constants"),d=b("../../constants/interactions").DESELECTDIM,p={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},f=b("../../components/fx/helpers").appendArrayPointValue;function g(N,F){var I,P=N._fullLayout,j=F._length,V=F.textfont,Z=F.textposition,Y=Array.isArray(Z)?Z:[Z],ee=V.color,re=V.size,X=V.family,K={},ie=N._context.plotGlPixelRatio,q=F.texttemplate;if(q){K.text=[];var U=P._d3locale,W=Array.isArray(q),ae=W?Math.min(q.length,j):j,G=W?function(_e){return q[_e]}:function(){return q};for(I=0;I<ae;I++){var te={i:I},ne=F._module.formatLabels(te,F,P),le={};f(le,F,I);var ue=F._meta||{};K.text.push(e.texttemplateString(G(I),ne,U,le,te,ue))}}else K.text=Array.isArray(F.text)&&F.text.length<j?F.text.slice():F.text;if(Array.isArray(K.text))for(I=K.text.length;I<j;I++)K.text[I]="";for(K.opacity=F.opacity,K.font={},K.align=[],K.baseline=[],I=0;I<Y.length;I++){var pe=Y[I].split(/\s+/);switch(pe[1]){case"left":K.align.push("right");break;case"right":K.align.push("left");break;default:K.align.push(pe[1])}switch(pe[0]){case"top":K.baseline.push("bottom");break;case"bottom":K.baseline.push("top");break;default:K.baseline.push(pe[0])}}if(Array.isArray(ee))for(K.color=new Array(j),I=0;I<j;I++)K.color[I]=ee[I];else K.color=ee;if(e.isArrayOrTypedArray(re)||Array.isArray(X))for(K.font=new Array(j),I=0;I<j;I++){var de=K.font[I]={};de.size=(e.isTypedArray(re)?re[I]:Array.isArray(re)?y(re[I])?re[I]:0:re)*ie,de.family=Array.isArray(X)?X[I]:X}else K.font={size:re*ie,family:X};return K}function m(N){var F,I,P=N._length,j=N.marker,V={},Z=e.isArrayOrTypedArray(j.symbol),Y=e.isArrayOrTypedArray(j.color),ee=e.isArrayOrTypedArray(j.line.color),re=e.isArrayOrTypedArray(j.opacity),X=e.isArrayOrTypedArray(j.size),K=e.isArrayOrTypedArray(j.line.width);if(Z||(I=h.isOpenSymbol(j.symbol)),Z||Y||ee||re){V.colors=new Array(P),V.borderColors=new Array(P);var ie=l(j,j.opacity,P),q=l(j.line,j.opacity,P);if(!Array.isArray(q[0])){var U=q;for(q=Array(P),F=0;F<P;F++)q[F]=U}if(!Array.isArray(ie[0])){var W=ie;for(ie=Array(P),F=0;F<P;F++)ie[F]=W}for(V.colors=ie,V.borderColors=q,F=0;F<P;F++)Z&&(I=h.isOpenSymbol(j.symbol[F])),I&&(q[F]=ie[F].slice(),ie[F]=ie[F].slice(),ie[F][3]=0);V.opacity=N.opacity}else I?(V.color=M(j.color,"uint8"),V.color[3]=0,V.borderColor=M(j.color,"uint8")):(V.color=M(j.color,"uint8"),V.borderColor=M(j.line.color,"uint8")),V.opacity=N.opacity*j.opacity;if(Z)for(V.markers=new Array(P),F=0;F<P;F++)V.markers[F]=D(j.symbol[F]);else V.marker=D(j.symbol);var G,te=v(N,1);if(X||K){var ne,le=V.sizes=new Array(P),ue=V.borderSizes=new Array(P),pe=0;if(X){for(F=0;F<P;F++)le[F]=te(j.size[F]),pe+=le[F];ne=pe/P}else for(G=te(j.size),F=0;F<P;F++)le[F]=G;if(K)for(F=0;F<P;F++)ue[F]=j.line.width[F];else for(G=j.line.width,F=0;F<P;F++)ue[F]=G;V.sizeAvg=ne}else V.size=te(j&&j.size||10),V.borderSizes=te(j.line.width);return V}function u(N,F){var P={};return F&&(F.marker&&F.marker.symbol?P=m(e.extendFlat({},N.marker,F.marker)):F.marker&&(F.marker.size&&(P.size=F.marker.size),F.marker.color&&(P.colors=F.marker.color),void 0!==F.marker.opacity&&(P.opacity=F.marker.opacity))),P}function w(N,F,I){var P={};if(!I)return P;if(I.textfont){var j={opacity:1,text:F.text,texttemplate:F.texttemplate,textposition:F.textposition,textfont:e.extendFlat({},F.textfont)};I.textfont&&e.extendFlat(j.textfont,I.textfont),P=g(N,j)}return P}function c(N,F,I){var P={capSize:2*F.width*I,lineWidth:F.thickness*I,color:F.color};return F.copy_ystyle&&(P=N.error_y),P}var A=s.SYMBOL_SDF_SIZE,k=s.SYMBOL_SIZE,C=s.SYMBOL_STROKE,E={},L=o.symbolFuncs[0](.05*k);function D(N){if("circle"===N)return null;var F,I,P=o.symbolNumber(N),j=o.symbolFuncs[P%100],V=!!o.symbolNoDot[P%100],Z=!!o.symbolNoFill[P%100],Y=h.isDotSymbol(N);return E[N]?E[N]:(F=Y&&!V?j(1.1*k)+L:j(k),I=x(F,{w:A,h:A,viewBox:[-k,-k,k,k],stroke:Z?C:-C}),E[N]=I,I||null)}oe.exports={style:function(N,F){var I,P={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},j=N._context.plotGlPixelRatio;if(!0!==F.visible)return P;if(i.hasText(F)&&(P.text=g(N,F),P.textSel=w(N,F,F.selected),P.textUnsel=w(N,F,F.unselected)),i.hasMarkers(F)&&(P.marker=m(F),P.markerSel=u(F,F.selected),P.markerUnsel=u(F,F.unselected),!F.unselected&&e.isArrayOrTypedArray(F.marker.opacity))){var V=F.marker.opacity;for(P.markerUnsel.opacity=new Array(V.length),I=0;I<V.length;I++)P.markerUnsel.opacity[I]=d*V[I]}if(i.hasLines(F)){P.line={overlay:!0,thickness:F.line.width*j,color:F.line.color,opacity:F.opacity};var Z=(s.DASHES[F.line.dash]||[1]).slice();for(I=0;I<Z.length;++I)Z[I]*=F.line.width*j;P.line.dashes=Z}return F.error_x&&F.error_x.visible&&(P.errorX=c(F,F.error_x,j)),F.error_y&&F.error_y.visible&&(P.errorY=c(F,F.error_y,j)),F.fill&&"none"!==F.fill&&(P.fill={closed:!0,fill:F.fillcolor,thickness:0}),P},markerStyle:m,markerSelection:u,linePositions:function(N,F,I){var P,j,V=I.length,Z=V/2;if(i.hasLines(F)&&Z)if("hv"===F.line.shape){for(P=[],j=0;j<Z-1;j++)isNaN(I[2*j])||isNaN(I[2*j+1])?P.push(NaN,NaN,NaN,NaN):(P.push(I[2*j],I[2*j+1]),isNaN(I[2*j+2])||isNaN(I[2*j+3])?P.push(NaN,NaN):P.push(I[2*j+2],I[2*j+1]));P.push(I[V-2],I[V-1])}else if("hvh"===F.line.shape){for(P=[],j=0;j<Z-1;j++)if(isNaN(I[2*j])||isNaN(I[2*j+1])||isNaN(I[2*j+2])||isNaN(I[2*j+3]))isNaN(I[2*j])||isNaN(I[2*j+1])?P.push(NaN,NaN):P.push(I[2*j],I[2*j+1]),P.push(NaN,NaN);else{var Y=(I[2*j]+I[2*j+2])/2;P.push(I[2*j],I[2*j+1],Y,I[2*j+1],Y,I[2*j+3])}P.push(I[V-2],I[V-1])}else if("vhv"===F.line.shape){for(P=[],j=0;j<Z-1;j++)if(isNaN(I[2*j])||isNaN(I[2*j+1])||isNaN(I[2*j+2])||isNaN(I[2*j+3]))isNaN(I[2*j])||isNaN(I[2*j+1])?P.push(NaN,NaN):P.push(I[2*j],I[2*j+1]),P.push(NaN,NaN);else{var ee=(I[2*j+1]+I[2*j+3])/2;P.push(I[2*j],I[2*j+1],I[2*j],ee,I[2*j+2],ee)}P.push(I[V-2],I[V-1])}else if("vh"===F.line.shape){for(P=[],j=0;j<Z-1;j++)isNaN(I[2*j])||isNaN(I[2*j+1])?P.push(NaN,NaN,NaN,NaN):(P.push(I[2*j],I[2*j+1]),isNaN(I[2*j+2])||isNaN(I[2*j+3])?P.push(NaN,NaN):P.push(I[2*j],I[2*j+3]));P.push(I[V-2],I[V-1])}else P=I;var re=!1;for(j=0;j<P.length;j++)if(isNaN(P[j])){re=!0;break}var X=re||P.length>s.TOO_MANY_POINTS||i.hasMarkers(F)?"rect":"round";if(re&&F.connectgaps){var K=P[0],ie=P[1];for(j=0;j<P.length;j+=2)isNaN(P[j])||isNaN(P[j+1])?(P[j]=K,P[j+1]=ie):(K=P[j],ie=P[j+1])}return{join:X,positions:P}},errorBarPositions:function(N,F,I,P,j){var V=_.getComponentMethod("errorbars","makeComputeError"),Z=a.getFromId(N,F.xaxis),Y=a.getFromId(N,F.yaxis),ee=I.length/2,re={};function X(K,ie){var q=ie._id.charAt(0),U=F["error_"+q];if(U&&U.visible&&("linear"===ie.type||"log"===ie.type)){for(var W=V(U),ae={x:0,y:1}[q],G={x:[0,1,2,3],y:[2,3,0,1]}[q],te=new Float64Array(4*ee),ne=1/0,le=-1/0,ue=0,pe=0;ue<ee;ue++,pe+=4){var de=K[ue];if(y(de)){var _e=I[2*ue+ae],me=W(de,ue),we=me[0],De=me[1];if(y(we)&&y(De)){var Ie=de+De;te[pe+G[0]]=_e-ie.c2l(de-we),te[pe+G[1]]=ie.c2l(Ie)-_e,te[pe+G[2]]=0,te[pe+G[3]]=0,ne=Math.min(ne,de-we),le=Math.max(le,de+De)}}}re[q]={positions:I,errors:te,_bnds:[ne,le]}}}return X(P,Z),X(j,Y),re},textPosition:function(N,F,I,P){var j,V=F._length,Z={};if(i.hasMarkers(F)){var Y=I.font,ee=I.align,re=I.baseline;for(Z.offset=new Array(V),j=0;j<V;j++){var X=P.sizes?P.sizes[j]:P.size,K=Array.isArray(Y)?Y[j].size:Y.size,ie=Array.isArray(ee)?ee.length>1?ee[j]:ee[0]:ee,q=Array.isArray(re)?re.length>1?re[j]:re[0]:re,W=p[q],ae=X?X/.8+1:0;Z.offset[j]=[p[ie]*ae/K,(-W*ae-.5*W)/K]}}return Z}}},{"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/interactions":478,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../scatter/make_bubble_size_func":944,"../scatter/subtypes":952,"./constants":982,"./helpers":987,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":310}],984:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../registry"),M=b("./helpers"),_=b("./attributes"),e=b("../scatter/constants"),o=b("../scatter/subtypes"),a=b("../scatter/xy_defaults"),l=b("../scatter/period_defaults"),i=b("../scatter/marker_defaults"),v=b("../scatter/line_defaults"),h=b("../scatter/fillcolor_defaults"),s=b("../scatter/text_defaults");oe.exports=function(d,p,f,g){function m(L,D){return y.coerce(d,p,_,L,D)}var u=!!d.marker&&M.isOpenSymbol(d.marker.symbol),w=o.isBubble(d),c=a(d,p,g,m);if(c){l(d,p,g,m),m("xhoverformat"),m("yhoverformat");var A=c<e.PTS_LINESONLY?"lines+markers":"lines";m("text"),m("hovertext"),m("hovertemplate"),m("mode",A),o.hasLines(p)&&(m("connectgaps"),v(d,p,f,g,m),m("line.shape")),o.hasMarkers(p)&&(i(d,p,f,g,m),m("marker.line.width",u||w?1:0)),o.hasText(p)&&(m("texttemplate"),s(d,p,g,m));var k=(p.line||{}).color,C=(p.marker||{}).color;m("fill"),"none"!==p.fill&&h(d,p,f,m);var E=x.getComponentMethod("errorbars","supplyDefaults");E(d,p,k||C||f,{axis:"y"}),E(d,p,k||C||f,{axis:"x",inherit:"y"}),y.coerceSelectionMarkerOpacity(p,m)}else p.visible=!1}},{"../../lib":503,"../../registry":638,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/period_defaults":947,"../scatter/subtypes":952,"../scatter/text_defaults":953,"../scatter/xy_defaults":954,"./attributes":979,"./helpers":987}],985:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../components/color"),M=b("../../constants/interactions").DESELECTDIM;oe.exports={styleTextSelection:function(_){var e,o,a=_[0],l=a.trace,i=a.t,v=i._scene,h=i.index,s=v.selectBatch[h],d=v.unselectBatch[h],p=v.textOptions[h],f=v.textSelectedOptions[h]||{},g=v.textUnselectedOptions[h]||{},m=y.extendFlat({},p);if(s.length||d.length){var u=f.color,w=g.color,c=p.color,A=Array.isArray(c);for(m.color=new Array(l._length),e=0;e<s.length;e++)m.color[o=s[e]]=u||(A?c[o]:c);for(e=0;e<d.length;e++){o=d[e];var k=A?c[o]:c;m.color[o]=w||(u?k:x.addOpacity(k,M))}}v.glText[h].update(m)}}},{"../../components/color":366,"../../constants/interactions":478,"../../lib":503}],986:[function(b,oe,se){"use strict";var y=b("../scatter/format_labels");oe.exports=function(x,M,_){var e=x.i;return"x"in x||(x.x=M._x[e]),"y"in x||(x.y=M._y[e]),y(x,M,_)}},{"../scatter/format_labels":936}],987:[function(b,oe,se){"use strict";var y=b("./constants");se.isOpenSymbol=function(x){return"string"==typeof x?y.OPEN_RE.test(x):x%200>100},se.isDotSymbol=function(x){return"string"==typeof x?y.DOT_RE.test(x):x>200}},{"./constants":982}],988:[function(b,oe,se){"use strict";var y=b("../../registry"),x=b("../../lib"),M=b("../scatter/get_trace_color");function _(e,o,a,l){var i=e.xa,v=e.ya,h=e.distance,s=e.dxy,d=e.index,p={pointNumber:d,x:o[d],y:a[d]};p.tx=Array.isArray(l.text)?l.text[d]:l.text,p.htx=Array.isArray(l.hovertext)?l.hovertext[d]:l.hovertext,p.data=Array.isArray(l.customdata)?l.customdata[d]:l.customdata,p.tp=Array.isArray(l.textposition)?l.textposition[d]:l.textposition;var f=l.textfont;f&&(p.ts=x.isArrayOrTypedArray(f.size)?f.size[d]:f.size,p.tc=Array.isArray(f.color)?f.color[d]:f.color,p.tf=Array.isArray(f.family)?f.family[d]:f.family);var g=l.marker;g&&(p.ms=x.isArrayOrTypedArray(g.size)?g.size[d]:g.size,p.mo=x.isArrayOrTypedArray(g.opacity)?g.opacity[d]:g.opacity,p.mx=x.isArrayOrTypedArray(g.symbol)?g.symbol[d]:g.symbol,p.mc=x.isArrayOrTypedArray(g.color)?g.color[d]:g.color);var m=g&&g.line;m&&(p.mlc=Array.isArray(m.color)?m.color[d]:m.color,p.mlw=x.isArrayOrTypedArray(m.width)?m.width[d]:m.width);var u=g&&g.gradient;u&&"none"!==u.type&&(p.mgt=Array.isArray(u.type)?u.type[d]:u.type,p.mgc=Array.isArray(u.color)?u.color[d]:u.color);var w=i.c2p(p.x,!0),c=v.c2p(p.y,!0),A=p.mrc||1,k=l.hoverlabel;k&&(p.hbg=Array.isArray(k.bgcolor)?k.bgcolor[d]:k.bgcolor,p.hbc=Array.isArray(k.bordercolor)?k.bordercolor[d]:k.bordercolor,p.hts=x.isArrayOrTypedArray(k.font.size)?k.font.size[d]:k.font.size,p.htc=Array.isArray(k.font.color)?k.font.color[d]:k.font.color,p.htf=Array.isArray(k.font.family)?k.font.family[d]:k.font.family,p.hnl=x.isArrayOrTypedArray(k.namelength)?k.namelength[d]:k.namelength);var C=l.hoverinfo;C&&(p.hi=Array.isArray(C)?C[d]:C);var E=l.hovertemplate;E&&(p.ht=Array.isArray(E)?E[d]:E);var L={};L[e.index]=p;var D=l._origX,N=l._origY,F=x.extendFlat({},e,{color:M(l,p),x0:w-A,x1:w+A,xLabelVal:D?D[d]:p.x,y0:c-A,y1:c+A,yLabelVal:N?N[d]:p.y,cd:L,distance:h,spikeDistance:s,hovertemplate:p.ht});return p.htx?F.text=p.htx:p.tx?F.text=p.tx:l.text&&(F.text=l.text),x.fillText(p,l,F),y.getComponentMethod("errorbars","hoverInfo")(p,l,F),F}oe.exports={hoverPoints:function(e,o,a,l){var i,v,h,s,d,p,f,g,m,u,w=e.cd,c=w[0].t,A=w[0].trace,k=e.xa,C=e.ya,E=c.x,L=c.y,D=k.c2p(o),N=C.c2p(a),F=e.distance;if(c.tree){var I=k.p2c(D-F),P=k.p2c(D+F),j=C.p2c(N-F),V=C.p2c(N+F);i="x"===l?c.tree.range(Math.min(I,P),Math.min(C._rl[0],C._rl[1]),Math.max(I,P),Math.max(C._rl[0],C._rl[1])):c.tree.range(Math.min(I,P),Math.min(j,V),Math.max(I,P),Math.max(j,V))}else i=c.ids;var Z=F;if("x"===l){var Y=!!A.xperiodalignment,ee=!!A.yperiodalignment;for(p=0;p<i.length;p++){if(s=E[v=i[p]],f=Math.abs(k.c2p(s)-D),Y){var re=k.c2p(A._xStarts[v]),X=k.c2p(A._xEnds[v]);f=D>=Math.min(re,X)&&D<=Math.max(re,X)?0:1/0}if(f<Z){if(Z=f,g=C.c2p(d=L[v])-N,ee){var K=C.c2p(A._yStarts[v]),ie=C.c2p(A._yEnds[v]);g=N>=Math.min(K,ie)&&N<=Math.max(K,ie)?0:1/0}u=Math.sqrt(f*f+g*g),h=i[p]}}}else for(p=i.length-1;p>-1;p--)s=E[v=i[p]],d=L[v],f=k.c2p(s)-D,g=C.c2p(d)-N,(m=Math.sqrt(f*f+g*g))<Z&&(Z=u=m,h=v);return e.index=h,e.distance=Z,e.dxy=u,void 0===h?[e]:[_(e,E,L,A)]},calcHover:_}},{"../../lib":503,"../../registry":638,"../scatter/get_trace_color":937}],989:[function(b,oe,se){arguments[4][896][0].apply(se,arguments)},{"./base_index":980,"./plot":990,dup:896}],990:[function(b,oe,se){"use strict";var y=b("regl-scatter2d"),x=b("regl-line2d"),M=b("regl-error2d"),_=b("gl-text"),e=b("../../lib"),o=b("../../components/dragelement/helpers").selectMode,a=b("../../lib/prepare_regl"),l=b("../scatter/subtypes"),i=b("../scatter/link_traces"),v=b("./edit_style").styleTextSelection,h={};function s(d,p,f,g){var m=d._size,E=m.w*g,L=m.h*g;return[m.l*g+p.domain[0]*E,m.b*g+f.domain[0]*L,d.width*g-m.r*g-(1-p.domain[1])*E,d.height*g-m.t*g-(1-f.domain[1])*L]}(oe.exports=function(d,p,f){if(f.length){var g,m,u=d._fullLayout,w=p._scene,c=p.xaxis,A=p.yaxis;if(w)if(a(d,["ANGLE_instanced_arrays","OES_element_index_uint"],h)){var k=w.count,C=u._glcanvas.data()[0].regl;if(i(d,p,f),w.dirty){if(!0===w.error2d&&(w.error2d=M(C)),!0===w.line2d&&(w.line2d=x(C)),!0===w.scatter2d&&(w.scatter2d=y(C)),!0===w.fill2d&&(w.fill2d=x(C)),!0===w.glText)for(w.glText=new Array(k),g=0;g<k;g++)w.glText[g]=new _(C);if(w.glText){if(k>w.glText.length){var E=k-w.glText.length;for(g=0;g<E;g++)w.glText.push(new _(C))}else k<w.glText.length&&w.glText.splice(k,w.glText.length-k).forEach(function(te){te.destroy()});for(g=0;g<k;g++)w.glText[g].update(w.textOptions[g])}if(w.line2d&&(w.line2d.update(w.lineOptions),w.lineOptions=w.lineOptions.map(function(te){if(te&&te.positions){for(var ne=te.positions,le=0;le<ne.length&&(isNaN(ne[le])||isNaN(ne[le+1]));)le+=2;for(var ue=ne.length-2;ue>le&&(isNaN(ne[ue])||isNaN(ne[ue+1]));)ue-=2;te.positions=ne.slice(le,ue+2)}return te}),w.line2d.update(w.lineOptions)),w.error2d){var D=(w.errorXOptions||[]).concat(w.errorYOptions||[]);w.error2d.update(D)}w.scatter2d&&w.scatter2d.update(w.markerOptions),w.fillOrder=e.repeat(null,k),w.fill2d&&(w.fillOptions=w.fillOptions.map(function(te,ne){var le=f[ne];if(te&&le&&le[0]&&le[0].trace){var ue,pe,de=le[0],_e=de.trace,me=de.t,we=w.lineOptions[ne],De=[];_e._ownfill&&De.push(ne),_e._nexttrace&&De.push(ne+1),De.length&&(w.fillOrder[ne]=De);var Le,Ie,je=[],ye=we&&we.positions||me.positions;if("tozeroy"===_e.fill){for(Le=0;Le<ye.length&&isNaN(ye[Le+1]);)Le+=2;for(Ie=ye.length-2;Ie>Le&&isNaN(ye[Ie+1]);)Ie-=2;0!==ye[Le+1]&&(je=[ye[Le],0]),je=je.concat(ye.slice(Le,Ie+2)),0!==ye[Ie+1]&&(je=je.concat([ye[Ie],0]))}else if("tozerox"===_e.fill){for(Le=0;Le<ye.length&&isNaN(ye[Le]);)Le+=2;for(Ie=ye.length-2;Ie>Le&&isNaN(ye[Ie]);)Ie-=2;0!==ye[Le]&&(je=[0,ye[Le+1]]),je=je.concat(ye.slice(Le,Ie+2)),0!==ye[Ie]&&(je=je.concat([0,ye[Ie+1]]))}else if("toself"===_e.fill||"tonext"===_e.fill){for(je=[],ue=0,te.splitNull=!0,pe=0;pe<ye.length;pe+=2)(isNaN(ye[pe])||isNaN(ye[pe+1]))&&((je=je.concat(ye.slice(ue,pe))).push(ye[ue],ye[ue+1]),je.push(null,null),ue=pe+2);je=je.concat(ye.slice(ue)),ue&&je.push(ye[ue],ye[ue+1])}else{var Me=_e._nexttrace;if(Me){var Oe=w.lineOptions[ne+1];if(Oe){var Pe=Oe.positions;if("tonexty"===_e.fill){for(je=ye.slice(),ne=Math.floor(Pe.length/2);ne--;){var Re=Pe[2*ne],Ue=Pe[2*ne+1];isNaN(Re)||isNaN(Ue)||je.push(Re,Ue)}te.fill=Me.fillcolor}}}}if(_e._prevtrace&&"tonext"===_e._prevtrace.fill){var qe=w.lineOptions[ne-1].positions,Xe=je.length/2,lt=[ue=Xe];for(pe=0;pe<qe.length;pe+=2)(isNaN(qe[pe])||isNaN(qe[pe+1]))&&(lt.push(pe/2+Xe+1),ue=pe+2);je=je.concat(qe),te.hole=lt}return te.fillmode=_e.fill,te.opacity=_e.opacity,te.positions=je,te}}),w.fill2d.update(w.fillOptions))}var F=o(u.dragmode),I=u.clickmode.indexOf("select")>-1;for(g=0;g<k;g++){var P=f[g][0],j=P.trace,V=P.t,Z=V.index,Y=j._length,ee=V.x,re=V.y;if(j.selectedpoints||F||I){if(F||(F=!0),j.selectedpoints){var X=w.selectBatch[Z]=e.selIndices2selPoints(j),K={};for(m=0;m<X.length;m++)K[X[m]]=1;var ie=[];for(m=0;m<Y;m++)K[m]||ie.push(m);w.unselectBatch[Z]=ie}var q=V.xpx=new Array(Y),U=V.ypx=new Array(Y);for(m=0;m<Y;m++)q[m]=c.c2p(ee[m]),U[m]=A.c2p(re[m])}else V.xpx=V.ypx=null}if(F){if(w.select2d||(w.select2d=y(u._glcanvas.data()[1].regl)),w.scatter2d){var W=new Array(k);for(g=0;g<k;g++)W[g]=w.selectBatch[g].length||w.unselectBatch[g].length?w.markerUnselectedOptions[g]:{};w.scatter2d.update(W)}w.select2d&&(w.select2d.update(w.markerOptions),w.select2d.update(w.markerSelectedOptions)),w.glText&&f.forEach(function(te){l.hasText(((te||[])[0]||{}).trace||{})&&v(te)})}else w.scatter2d&&w.scatter2d.update(w.markerOptions);var ae={viewport:s(u,c,A,d._context.plotGlPixelRatio),range:[(c._rl||c.range)[0],(A._rl||A.range)[0],(c._rl||c.range)[1],(A._rl||A.range)[1]]},G=e.repeat(ae,w.count);w.fill2d&&w.fill2d.update(G),w.line2d&&w.line2d.update(G),w.error2d&&w.error2d.update(G.concat(G)),w.scatter2d&&w.scatter2d.update(G),w.select2d&&w.select2d.update(G),w.glText&&w.glText.forEach(function(te){te.update(ae)})}else w.init()}}).reglPrecompiled=h},{"../../components/dragelement/helpers":384,"../../lib":503,"../../lib/prepare_regl":516,"../scatter/link_traces":943,"../scatter/subtypes":952,"./edit_style":985,"gl-text":225,"regl-error2d":279,"regl-line2d":280,"regl-scatter2d":281}],991:[function(b,oe,se){"use strict";var y=b("../../lib");oe.exports=function(x,M){var _=M._scene,e={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},o={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return M._scene||((_=M._scene={}).init=function(){y.extendFlat(_,o,e)},_.init(),_.update=function(a){var l=y.repeat(a,_.count);if(_.fill2d&&_.fill2d.update(l),_.scatter2d&&_.scatter2d.update(l),_.line2d&&_.line2d.update(l),_.error2d&&_.error2d.update(l.concat(l)),_.select2d&&_.select2d.update(l),_.glText)for(var i=0;i<_.count;i++)_.glText[i].update(a)},_.draw=function(){for(var a=_.count,l=_.fill2d,i=_.error2d,v=_.line2d,h=_.scatter2d,s=_.glText,d=_.select2d,p=_.selectBatch,f=_.unselectBatch,g=0;g<a;g++){if(l&&_.fillOrder[g]&&l.draw(_.fillOrder[g]),v&&_.lineOptions[g]&&v.draw(g),i&&(_.errorXOptions[g]&&i.draw(g),_.errorYOptions[g]&&i.draw(g+a)),h&&_.markerOptions[g])if(f[g].length){var m=y.repeat([],_.count);m[g]=f[g],h.draw(m)}else p[g].length||h.draw(g);s[g]&&_.textOptions[g]&&s[g].render()}d&&d.draw(p),_.dirty=!1},_.destroy=function(){_.fill2d&&_.fill2d.destroy&&_.fill2d.destroy(),_.scatter2d&&_.scatter2d.destroy&&_.scatter2d.destroy(),_.error2d&&_.error2d.destroy&&_.error2d.destroy(),_.line2d&&_.line2d.destroy&&_.line2d.destroy(),_.select2d&&_.select2d.destroy&&_.select2d.destroy(),_.glText&&_.glText.forEach(function(a){a.destroy&&a.destroy()}),_.lineOptions=null,_.fillOptions=null,_.markerOptions=null,_.markerSelectedOptions=null,_.markerUnselectedOptions=null,_.errorXOptions=null,_.errorYOptions=null,_.textOptions=null,_.textSelectedOptions=null,_.textUnselectedOptions=null,_.selectBatch=null,_.unselectBatch=null,M._scene=null}),_.dirty||y.extendFlat(_,e),_}},{"../../lib":503}],992:[function(b,oe,se){"use strict";var y=b("../scatter/subtypes"),x=b("./edit_style").styleTextSelection;oe.exports=function(M,_){var e=M.cd,o=M.xaxis,a=M.yaxis,l=[],i=e[0].trace,v=e[0].t,h=i._length,s=v.x,d=v.y,p=v._scene,f=v.index;if(!p)return l;var g=y.hasText(i),m=y.hasMarkers(i);if(!0!==i.visible||!m&&!g)return l;var w=[],c=[];if(!1!==_&&!_.degenerate)for(var A=0;A<h;A++)_.contains([v.xpx[A],v.ypx[A]],!1,A,M)?(w.push(A),l.push({pointNumber:A,x:o.c2d(s[A]),y:a.c2d(d[A])})):c.push(A);if(m){var k=p.scatter2d;if(w.length||c.length){if(!p.selectBatch[f].length&&!p.unselectBatch[f].length){var C=new Array(p.count);C[f]=p.markerUnselectedOptions[f],k.update.apply(k,C)}}else{var E=new Array(p.count);E[f]=p.markerOptions[f],k.update.apply(k,E)}}return p.selectBatch[f]=w,p.unselectBatch[f]=c,g&&x(e),l}},{"../scatter/subtypes":952,"./edit_style":985}],993:[function(b,oe,se){"use strict";var y=b("../../plots/template_attributes").hovertemplateAttrs,x=b("../../plots/template_attributes").texttemplateAttrs,M=b("../scattergeo/attributes"),_=b("../scatter/attributes"),e=b("../../plots/mapbox/layout_attributes"),o=b("../../plots/attributes"),a=b("../../components/colorscale/attributes"),l=b("../../lib/extend").extendFlat,i=b("../../plot_api/edit_types").overrideAll,v=M.line,h=M.marker;oe.exports=i({lon:M.lon,lat:M.lat,mode:l({},_.mode,{dflt:"markers"}),text:l({},_.text,{}),texttemplate:x({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:l({},_.hovertext,{}),line:{color:v.color,width:v.width},connectgaps:_.connectgaps,marker:l({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:h.opacity,size:h.size,sizeref:h.sizeref,sizemin:h.sizemin,sizemode:h.sizemode},a("marker")),fill:M.fill,fillcolor:_.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:_.selected.marker},unselected:{marker:_.unselected.marker},hoverinfo:l({},o.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:y()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/mapbox/layout_attributes":615,"../../plots/template_attributes":633,"../scatter/attributes":927,"../scattergeo/attributes":969}],994:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../lib"),M=b("../../constants/numerical").BADNUM,_=b("../../lib/geojson_utils"),e=b("../../components/colorscale"),o=b("../../components/drawing"),a=b("../scatter/make_bubble_size_func"),l=b("../scatter/subtypes"),i=b("../../plots/mapbox/convert_text_opts"),v=b("../../components/fx/helpers").appendArrayPointValue,h=b("../../lib/svg_text_utils").NEWLINES,s=b("../../lib/svg_text_utils").BR_TAG_ALL;function d(){return{geojson:_.makeBlank(),layout:{visibility:"none"},paint:{}}}function p(m,u){return x.isArrayOrTypedArray(m)?u?function(w){return y(m[w])?+m[w]:0}:function(w){return m[w]}:m?function(){return m}:f}function f(){return""}function g(m){return m[0]===M}oe.exports=function(m,u){var w,c=u[0].trace,A=!0===c.visible&&0!==c._length,k="none"!==c.fill,C=l.hasLines(c),E=l.hasMarkers(c),L=l.hasText(c),D=E&&"circle"===c.marker.symbol,N=E&&"circle"!==c.marker.symbol,F=d(),I=d(),P=d(),j=d(),V={fill:F,line:I,circle:P,symbol:j};if(!A)return V;if((k||C)&&(w=_.calcTraceToLineCoords(u)),k&&(F.geojson=_.makePolygon(w),F.layout.visibility="visible",x.extendFlat(F.paint,{"fill-color":c.fillcolor})),C&&(I.geojson=_.makeLine(w),I.layout.visibility="visible",x.extendFlat(I.paint,{"line-width":c.line.width,"line-color":c.line.color,"line-opacity":c.opacity})),D){var Z=function(re){var X,K,ie,q,U=re[0].trace,W=U.marker,ae=U.selectedpoints,G=x.isArrayOrTypedArray(W.color),te=x.isArrayOrTypedArray(W.size),ne=x.isArrayOrTypedArray(W.opacity);function le(Le){return U.opacity*Le}G&&(K=e.hasColorscale(U,"marker")?e.makeColorScaleFuncFromTrace(W):x.identity),te&&(ie=a(U)),ne&&(q=function(Le){return le(y(Le)?+x.constrain(Le,0,1):0)});var ue,De,pe=[];for(X=0;X<re.length;X++){var de=re[X],_e=de.lonlat;if(!g(_e)){var me={};K&&(me.mcc=de.mcc=K(de.mc)),ie&&(me.mrc=de.mrc=ie(de.ms)),q&&(me.mo=q(de.mo)),ae&&(me.selected=de.selected||0),pe.push({type:"Feature",geometry:{type:"Point",coordinates:_e},properties:me})}}if(ae)for(ue=o.makeSelectedPointStyleFns(U),X=0;X<pe.length;X++){var we=pe[X].properties;ue.selectedOpacityFn&&(we.mo=le(ue.selectedOpacityFn(we))),ue.selectedColorFn&&(we.mcc=ue.selectedColorFn(we)),ue.selectedSizeFn&&(we.mrc=ue.selectedSizeFn(we))}return{geojson:{type:"FeatureCollection",features:pe},mcc:G||ue&&ue.selectedColorFn?{type:"identity",property:"mcc"}:W.color,mrc:te||ue&&ue.selectedSizeFn?{type:"identity",property:"mrc"}:(De=W.size,De/2),mo:ne||ue&&ue.selectedOpacityFn?{type:"identity",property:"mo"}:le(W.opacity)}}(u);P.geojson=Z.geojson,P.layout.visibility="visible",x.extendFlat(P.paint,{"circle-color":Z.mcc,"circle-radius":Z.mrc,"circle-opacity":Z.mo})}if((N||L)&&(j.geojson=function(re,X){for(var K=X._fullLayout,ie=re[0].trace,q=ie.marker||{},U=q.symbol,W=q.angle,ae="circle"!==U?p(U):f,G="auto"!==W?p(W,!0):f,te=l.hasText(ie)?p(ie.text):f,ne=[],le=0;le<re.length;le++){var ue=re[le];if(!g(ue.lonlat)){var pe,de=ie.texttemplate;if(de){var _e=Array.isArray(de)?de[le]||"":de,me=ie._module.formatLabels(ue,ie,K),we={};v(we,ie,ue.i),pe=x.texttemplateString(_e,me,K._d3locale,we,ue,ie._meta||{})}else pe=te(le);pe&&(pe=pe.replace(h,"").replace(s,"\n")),ne.push({type:"Feature",geometry:{type:"Point",coordinates:ue.lonlat},properties:{symbol:ae(le),angle:G(le),text:pe}})}}return{type:"FeatureCollection",features:ne}}(u,m),x.extendFlat(j.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),N&&(x.extendFlat(j.layout,{"icon-size":c.marker.size/10}),"angle"in c.marker&&"auto"!==c.marker.angle&&x.extendFlat(j.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),j.layout["icon-allow-overlap"]=c.marker.allowoverlap,x.extendFlat(j.paint,{"icon-opacity":c.opacity*c.marker.opacity,"icon-color":c.marker.color})),L)){var ee=i(c.textposition,(c.marker||{}).size);x.extendFlat(j.layout,{"text-size":c.textfont.size,"text-anchor":ee.anchor,"text-offset":ee.offset}),x.extendFlat(j.paint,{"text-color":c.textfont.color,"text-opacity":c.opacity})}return V}},{"../../components/colorscale":378,"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"../../lib/svg_text_utils":529,"../../plots/mapbox/convert_text_opts":612,"../scatter/make_bubble_size_func":944,"../scatter/subtypes":952,"fast-isnumeric":190}],995:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../scatter/subtypes"),M=b("../scatter/marker_defaults"),_=b("../scatter/line_defaults"),e=b("../scatter/text_defaults"),o=b("../scatter/fillcolor_defaults"),a=b("./attributes");oe.exports=function(l,i,v,h){function s(p,f){return y.coerce(l,i,a,p,f)}if(f=i,m=(g=s)("lon")||[],u=g("lat")||[],w=Math.min(m.length,u.length),f._length=w,w){if(s("text"),s("texttemplate"),s("hovertext"),s("hovertemplate"),s("mode"),s("below"),x.hasLines(i)&&(_(l,i,v,h,s,{noDash:!0}),s("connectgaps")),x.hasMarkers(i)){M(l,i,v,h,s,{noLine:!0}),s("marker.allowoverlap"),s("marker.angle");var d=i.marker;"circle"!==d.symbol&&(y.isArrayOrTypedArray(d.size)&&(d.size=d.size[0]),y.isArrayOrTypedArray(d.color)&&(d.color=d.color[0]))}x.hasText(i)&&e(l,i,h,s,{noSelect:!0}),s("fill"),"none"!==i.fill&&o(l,i,v,s),y.coerceSelectionMarkerOpacity(i,s)}else i.visible=!1;var f,g,m,u,w}},{"../../lib":503,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":993}],996:[function(b,oe,se){"use strict";oe.exports=function(y,x){return y.lon=x.lon,y.lat=x.lat,y}},{}],997:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axes");oe.exports=function(x,M,_){var e={},o=_[M.subplot]._subplot.mockAxis,a=x.lonlat;return e.lonLabel=y.tickText(o,o.c2l(a[0]),!0).text,e.latLabel=y.tickText(o,o.c2l(a[1]),!0).text,e}},{"../../plots/cartesian/axes":554}],998:[function(b,oe,se){"use strict";var y=b("../../components/fx"),x=b("../../lib"),M=b("../scatter/get_trace_color"),_=x.fillText,e=b("../../constants/numerical").BADNUM;function o(a,l,i){if(!a.hovertemplate){var v=(l.hi||a.hoverinfo).split("+"),h=-1!==v.indexOf("all"),s=-1!==v.indexOf("lon"),d=-1!==v.indexOf("lat"),p=l.lonlat,f=[];return h||s&&d?f.push("("+g(p[1])+", "+g(p[0])+")"):s?f.push(i.lon+g(p[0])):d&&f.push(i.lat+g(p[1])),(h||-1!==v.indexOf("text"))&&_(l,a,f),f.join("<br>")}function g(m){return m+"\xb0"}}oe.exports={hoverPoints:function(a,l,i){var v=a.cd,h=v[0].trace,s=a.xa,d=a.ya,p=a.subplot,f=360*(l>=0?Math.floor((l+180)/360):Math.ceil((l-180)/360)),g=l-f;if(y.getClosest(v,function(L){var D=L.lonlat;if(D[0]===e)return 1/0;var N=x.modHalf(D[0],360),F=D[1],I=p.project([N,F]),P=I.x-s.c2p([g,F]),j=I.y-d.c2p([N,i]),V=Math.max(3,L.mrc||0);return Math.max(Math.sqrt(P*P+j*j)-V,1-3/V)},a),!1!==a.index){var m=v[a.index],u=m.lonlat,w=[x.modHalf(u[0],360)+f,u[1]],c=s.c2p(w),A=d.c2p(w),k=m.mrc||1;a.x0=c-k,a.x1=c+k,a.y0=A-k,a.y1=A+k;var C={};C[h.subplot]={_subplot:p};var E=h._module.formatLabels(m,h,C);return a.lonLabel=E.lonLabel,a.latLabel=E.latLabel,a.color=M(h,m),a.extraText=o(h,m,v[0].t.labels),a.hovertemplate=h.hovertemplate,[a]}},getExtraText:o}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":937}],999:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("../scattergeo/calc"),plot:b("./plot"),hoverPoints:b("./hover").hoverPoints,eventData:b("./event_data"),selectPoints:b("./select"),styleOnSelect:function(y,x){x&&x[0].trace._glTrace.update(x)},moduleType:"trace",name:"scattermapbox",basePlotModule:b("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":613,"../scatter/marker_colorbar":945,"../scattergeo/calc":970,"./attributes":993,"./defaults":995,"./event_data":996,"./format_labels":997,"./hover":998,"./plot":1e3,"./select":1001}],1e3:[function(b,oe,se){"use strict";var y=b("./convert"),x=b("../../plots/mapbox/constants").traceLayerPrefix,M=["fill","line","circle","symbol"];function _(o,a){this.type="scattermapbox",this.subplot=o,this.uid=a,this.sourceIds={fill:"source-"+a+"-fill",line:"source-"+a+"-line",circle:"source-"+a+"-circle",symbol:"source-"+a+"-symbol"},this.layerIds={fill:x+a+"-fill",line:x+a+"-line",circle:x+a+"-circle",symbol:x+a+"-symbol"},this.below=null}var e=_.prototype;e.addSource=function(o,a){this.subplot.map.addSource(this.sourceIds[o],{type:"geojson",data:a.geojson})},e.setSourceData=function(o,a){this.subplot.map.getSource(this.sourceIds[o]).setData(a.geojson)},e.addLayer=function(o,a,l){this.subplot.addLayer({type:o,id:this.layerIds[o],source:this.sourceIds[o],layout:a.layout,paint:a.paint},l)},e.update=function(o){var a,l,i,v=this.subplot,h=v.map,s=y(v.gd,o),d=v.belowLookup["trace-"+this.uid];if(d!==this.below){for(a=M.length-1;a>=0;a--)h.removeLayer(this.layerIds[l=M[a]]);for(a=0;a<M.length;a++)i=s[l=M[a]],this.addLayer(l,i,d);this.below=d}for(a=0;a<M.length;a++)i=s[l=M[a]],v.setOptions(this.layerIds[l],"setLayoutProperty",i.layout),"visible"===i.layout.visibility&&(this.setSourceData(l,i),v.setOptions(this.layerIds[l],"setPaintProperty",i.paint));o[0].trace._glTrace=this},e.dispose=function(){for(var o=this.subplot.map,a=M.length-1;a>=0;a--){var l=M[a];o.removeLayer(this.layerIds[l]),o.removeSource(this.sourceIds[l])}},oe.exports=function(o,a){for(var l=a[0].trace,i=new _(o,l.uid),v=y(o.gd,a),h=i.below=o.belowLookup["trace-"+l.uid],s=0;s<M.length;s++){var d=M[s],p=v[d];i.addSource(d,p),i.addLayer(d,p,h)}return a[0].trace._glTrace=i,i}},{"../../plots/mapbox/constants":611,"./convert":994}],1001:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../scatter/subtypes"),M=b("../../constants/numerical").BADNUM;oe.exports=function(_,e){var o,a=_.cd,l=_.xaxis,i=_.yaxis,v=[];if(!x.hasMarkers(a[0].trace))return[];if(!1===e)for(o=0;o<a.length;o++)a[o].selected=0;else for(o=0;o<a.length;o++){var s=a[o],d=s.lonlat;if(d[0]!==M){var p=[y.modHalf(d[0],360),d[1]],f=[l.c2p(p),i.c2p(p)];e.contains(f,null,o,_)?(v.push({pointNumber:o,lon:d[0],lat:d[1]}),s.selected=1):s.selected=0}}return v}},{"../../constants/numerical":479,"../../lib":503,"../scatter/subtypes":952}],1002:[function(b,oe,se){"use strict";var y=b("../../plots/template_attributes").hovertemplateAttrs,x=b("../../plots/template_attributes").texttemplateAttrs,M=b("../../lib/extend").extendFlat,_=b("../scatter/attributes"),e=b("../../plots/attributes"),o=_.line;oe.exports={mode:_.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:_.text,texttemplate:x({editType:"plot"},{keys:["r","theta","text"]}),hovertext:_.hovertext,line:{color:o.color,width:o.width,dash:o.dash,shape:M({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:_.connectgaps,marker:_.marker,cliponaxis:M({},_.cliponaxis,{dflt:!1}),textposition:_.textposition,textfont:_.textfont,fill:M({},_.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:_.fillcolor,hoverinfo:M({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:_.hoveron,hovertemplate:y(),selected:_.selected,unselected:_.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1003:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../constants/numerical").BADNUM,M=b("../../plots/cartesian/axes"),_=b("../scatter/colorscale_calc"),e=b("../scatter/arrays_to_calcdata"),o=b("../scatter/calc_selection"),a=b("../scatter/calc").calcMarkerSize;oe.exports=function(l,i){for(var v=l._fullLayout,h=i.subplot,s=v[h].radialaxis,d=v[h].angularaxis,p=s.makeCalcdata(i,"r"),f=d.makeCalcdata(i,"theta"),g=i._length,m=new Array(g),u=0;u<g;u++){var w=p[u],c=f[u],A=m[u]={};y(w)&&y(c)?(A.r=w,A.theta=c):A.r=x}var k=a(i,g);return i._extremes.x=M.findExtremes(s,p,{ppad:k}),_(l,i),e(m,i),o(m,i),m}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1004:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../scatter/subtypes"),M=b("../scatter/marker_defaults"),_=b("../scatter/line_defaults"),e=b("../scatter/line_shape_defaults"),o=b("../scatter/text_defaults"),a=b("../scatter/fillcolor_defaults"),l=b("../scatter/constants").PTS_LINESONLY,i=b("./attributes");function v(h,s,d,p){var f,g=p("r"),m=p("theta");if(g)m?f=Math.min(g.length,m.length):(f=g.length,p("theta0"),p("dtheta"));else{if(!m)return 0;f=s.theta.length,p("r0"),p("dr")}return s._length=f,f}oe.exports={handleRThetaDefaults:v,supplyDefaults:function(h,s,d,p){function f(u,w){return y.coerce(h,s,i,u,w)}var g=v(0,s,0,f);if(g){f("thetaunit"),f("mode",g<l?"lines+markers":"lines"),f("text"),f("hovertext"),"fills"!==s.hoveron&&f("hovertemplate"),x.hasLines(s)&&(_(h,s,d,p,f),e(h,s,f),f("connectgaps")),x.hasMarkers(s)&&M(h,s,d,p,f,{gradient:!0}),x.hasText(s)&&(f("texttemplate"),o(h,s,p,f));var m=[];(x.hasMarkers(s)||x.hasText(s))&&(f("cliponaxis"),f("marker.maxdisplayed"),m.push("points")),f("fill"),"none"!==s.fill&&(a(h,s,d,f),x.hasLines(s)||e(h,s,f)),"tonext"!==s.fill&&"toself"!==s.fill||m.push("fills"),f("hoveron",m.join("+")||"points"),y.coerceSelectionMarkerOpacity(s,f)}else s.visible=!1}}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1002}],1005:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plots/cartesian/axes");oe.exports=function(M,_,e){var o,a,l={},i=e[_.subplot]._subplot;i?(o=i.radialAxis,a=i.angularAxis):(o=(i=e[_.subplot]).radialaxis,a=i.angularaxis);var v=o.c2l(M.r);l.rLabel=x.tickText(o,v,!0).text;var h="degrees"===a.thetaunit?y.rad2deg(M.theta):M.theta;return l.thetaLabel=x.tickText(a,h,!0).text,l}},{"../../lib":503,"../../plots/cartesian/axes":554}],1006:[function(b,oe,se){"use strict";var y=b("../scatter/hover");function x(M,_,e,o){var a=e.radialAxis,l=e.angularAxis;a._hovertitle="r",l._hovertitle="\u03b8";var i={};i[_.subplot]={_subplot:e};var v=_._module.formatLabels(M,_,i);o.rLabel=v.rLabel,o.thetaLabel=v.thetaLabel;var s=[];function d(f,g){s.push(f._hovertitle+": "+g)}if(!_.hovertemplate){var p=(M.hi||_.hoverinfo).split("+");-1!==p.indexOf("all")&&(p=["r","theta","text"]),-1!==p.indexOf("r")&&d(a,o.rLabel),-1!==p.indexOf("theta")&&d(l,o.thetaLabel),-1!==p.indexOf("text")&&o.text&&(s.push(o.text),delete o.text),o.extraText=s.join("<br>")}}oe.exports={hoverPoints:function(M,_,e,o){var a=y(M,_,e,o);if(a&&!1!==a[0].index){var l=a[0];if(void 0===l.index)return a;var i=M.subplot,v=l.cd[l.index],h=l.trace;if(i.isPtInside(v))return l.xLabelVal=void 0,l.yLabelVal=void 0,x(v,h,i,l),l.hovertemplate=h.hovertemplate,a}},makeHoverPointText:x}},{"../scatter/hover":938}],1007:[function(b,oe,se){"use strict";oe.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:b("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,selectPoints:b("../scatter/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1002,"./calc":1003,"./defaults":1004,"./format_labels":1005,"./hover":1006,"./plot":1008}],1008:[function(b,oe,se){"use strict";var y=b("../scatter/plot"),x=b("../../constants/numerical").BADNUM;oe.exports=function(M,_,e){for(var o=_.layers.frontplot.select("g.scatterlayer"),a={xaxis:_.xaxis,yaxis:_.yaxis,plot:_.framework,layerClipId:_._hasClipOnAxisFalse?_.clipIds.forTraces:null},l=_.radialAxis,i=_.angularAxis,v=0;v<e.length;v++)for(var h=e[v],s=0;s<h.length;s++){var d=h[s],p=d.r;if(p===x)d.x=d.y=x;else{var f=l.c2g(p),g=i.c2g(d.theta);d.x=f*Math.cos(g),d.y=f*Math.sin(g)}}y(M,a,e,o)}},{"../../constants/numerical":479,"../scatter/plot":948}],1009:[function(b,oe,se){"use strict";var y=b("../scatterpolar/attributes"),x=b("../scattergl/attributes"),M=b("../../plots/template_attributes").texttemplateAttrs;oe.exports={mode:y.mode,r:y.r,theta:y.theta,r0:y.r0,dr:y.dr,theta0:y.theta0,dtheta:y.dtheta,thetaunit:y.thetaunit,text:y.text,texttemplate:M({editType:"plot"},{keys:["r","theta","text"]}),hovertext:y.hovertext,hovertemplate:y.hovertemplate,line:x.line,connectgaps:x.connectgaps,marker:x.marker,fill:x.fill,fillcolor:x.fillcolor,textposition:x.textposition,textfont:x.textfont,hoverinfo:y.hoverinfo,selected:y.selected,unselected:y.unselected}},{"../../plots/template_attributes":633,"../scattergl/attributes":979,"../scatterpolar/attributes":1002}],1010:[function(b,oe,se){"use strict";oe.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:b("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("../scattergl/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":945,"../scattergl/select":992,"./attributes":1009,"./calc":1011,"./defaults":1012,"./format_labels":1013,"./hover":1014}],1011:[function(b,oe,se){"use strict";var y=b("../scatter/colorscale_calc"),x=b("../scatter/calc").calcMarkerSize,M=b("../scattergl/convert"),_=b("../../plots/cartesian/axes"),e=b("../scattergl/constants").TOO_MANY_POINTS;oe.exports=function(o,a){var l=o._fullLayout,i=a.subplot,v=l[i].radialaxis,h=l[i].angularaxis,s=a._r=v.makeCalcdata(a,"r"),d=a._theta=h.makeCalcdata(a,"theta"),p=a._length,f={};p<s.length&&(s=s.slice(0,p)),p<d.length&&(d=d.slice(0,p)),f.r=s,f.theta=d,y(o,a);var g,m=f.opts=M.style(o,a);return p<e?g=x(a,p):m.marker&&(g=2*(m.marker.sizeAvg||Math.max(m.marker.size,3))),a._extremes.x=_.findExtremes(v,s,{ppad:g}),[{x:!1,y:!1,t:f,trace:a}]}},{"../../plots/cartesian/axes":554,"../scatter/calc":928,"../scatter/colorscale_calc":930,"../scattergl/constants":982,"../scattergl/convert":983}],1012:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../scatter/subtypes"),M=b("../scatterpolar/defaults").handleRThetaDefaults,_=b("../scatter/marker_defaults"),e=b("../scatter/line_defaults"),o=b("../scatter/text_defaults"),a=b("../scatter/fillcolor_defaults"),l=b("../scatter/constants").PTS_LINESONLY,i=b("./attributes");oe.exports=function(v,h,s,d){function p(g,m){return y.coerce(v,h,i,g,m)}var f=M(v,h,d,p);f?(p("thetaunit"),p("mode",f<l?"lines+markers":"lines"),p("text"),p("hovertext"),"fills"!==h.hoveron&&p("hovertemplate"),x.hasLines(h)&&(e(v,h,s,d,p),p("connectgaps")),x.hasMarkers(h)&&_(v,h,s,d,p),x.hasText(h)&&(p("texttemplate"),o(v,h,d,p)),p("fill"),"none"!==h.fill&&a(v,h,s,p),y.coerceSelectionMarkerOpacity(h,p)):h.visible=!1}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"../scatterpolar/defaults":1004,"./attributes":1009}],1013:[function(b,oe,se){"use strict";var y=b("../scatterpolar/format_labels");oe.exports=function(x,M,_){var e=x.i;return"r"in x||(x.r=M._r[e]),"theta"in x||(x.theta=M._theta[e]),y(x,M,_)}},{"../scatterpolar/format_labels":1005}],1014:[function(b,oe,se){"use strict";var y=b("../scattergl/hover"),x=b("../scatterpolar/hover").makeHoverPointText;oe.exports={hoverPoints:function(M,_,e,o){var a=M.cd[0].t,l=a.r,i=a.theta,v=y.hoverPoints(M,_,e,o);if(v&&!1!==v[0].index){var h=v[0];if(void 0===h.index)return v;var s=M.subplot,d=h.cd[h.index],p=h.trace;if(d.r=l[h.index],d.theta=i[h.index],s.isPtInside(d))return h.xLabelVal=void 0,h.yLabelVal=void 0,x(d,p,s,h),v}}}},{"../scattergl/hover":988,"../scatterpolar/hover":1006}],1015:[function(b,oe,se){arguments[4][896][0].apply(se,arguments)},{"./base_index":1010,"./plot":1016,dup:896}],1016:[function(b,oe,se){"use strict";var y=b("@plotly/point-cluster"),x=b("fast-isnumeric"),M=b("../scattergl/plot"),_=b("../scattergl/scene_update"),e=b("../scattergl/convert"),o=b("../../lib"),a=b("../scattergl/constants").TOO_MANY_POINTS;oe.exports=function(l,i,v){if(v.length){var h=i.radialAxis,s=i.angularAxis,d=_(l,i);return v.forEach(function(p){if(p&&p[0]&&p[0].trace){var f,g=p[0],m=g.trace,u=g.t,w=m._length,c=u.r,A=u.theta,k=u.opts,C=c.slice(),E=A.slice();for(f=0;f<c.length;f++)i.isPtInside({r:c[f],theta:A[f]})||(C[f]=NaN,E[f]=NaN);var L=new Array(2*w),D=Array(w),N=Array(w);for(f=0;f<w;f++){var F,I,P=C[f];if(x(P)){var j=h.c2g(P),V=s.c2g(E[f],m.thetaunit);F=j*Math.cos(V),I=j*Math.sin(V)}else F=I=NaN;D[f]=L[2*f]=F,N[f]=L[2*f+1]=I}u.tree=y(L),k.marker&&w>=a&&(k.marker.cluster=u.tree),k.marker&&(k.markerSel.positions=k.markerUnsel.positions=k.marker.positions=L),k.line&&L.length>1&&o.extendFlat(k.line,e.linePositions(l,m,L)),k.text&&(o.extendFlat(k.text,{positions:L},e.textPosition(l,m,k.text,k.marker)),o.extendFlat(k.textSel,{positions:L},e.textPosition(l,m,k.text,k.markerSel)),o.extendFlat(k.textUnsel,{positions:L},e.textPosition(l,m,k.text,k.markerUnsel))),k.fill&&!d.fill2d&&(d.fill2d=!0),k.marker&&!d.scatter2d&&(d.scatter2d=!0),k.line&&!d.line2d&&(d.line2d=!0),k.text&&!d.glText&&(d.glText=!0),d.lineOptions.push(k.line),d.fillOptions.push(k.fill),d.markerOptions.push(k.marker),d.markerSelectedOptions.push(k.markerSel),d.markerUnselectedOptions.push(k.markerUnsel),d.textOptions.push(k.text),d.textSelectedOptions.push(k.textSel),d.textUnselectedOptions.push(k.textUnsel),d.selectBatch.push([]),d.unselectBatch.push([]),u.x=D,u.y=N,u.rawx=D,u.rawy=N,u.r=c,u.theta=A,u.positions=L,u._scene=d,u.index=d.count,d.count++}}),M(l,i,v)}},oe.exports.reglPrecompiled={}},{"../../lib":503,"../scattergl/constants":982,"../scattergl/convert":983,"../scattergl/plot":990,"../scattergl/scene_update":991,"@plotly/point-cluster":59,"fast-isnumeric":190}],1017:[function(b,oe,se){"use strict";var y=b("../../plots/template_attributes").hovertemplateAttrs,x=b("../../plots/template_attributes").texttemplateAttrs,M=b("../../lib/extend").extendFlat,_=b("../scatter/attributes"),e=b("../../plots/attributes"),o=_.line;oe.exports={mode:_.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:_.text,texttemplate:x({editType:"plot"},{keys:["real","imag","text"]}),hovertext:_.hovertext,line:{color:o.color,width:o.width,dash:o.dash,shape:M({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:_.connectgaps,marker:_.marker,cliponaxis:M({},_.cliponaxis,{dflt:!1}),textposition:_.textposition,textfont:_.textfont,fill:M({},_.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:_.fillcolor,hoverinfo:M({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:_.hoveron,hovertemplate:y(),selected:_.selected,unselected:_.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1018:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../../constants/numerical").BADNUM,M=b("../scatter/colorscale_calc"),_=b("../scatter/arrays_to_calcdata"),e=b("../scatter/calc_selection"),o=b("../scatter/calc").calcMarkerSize;oe.exports=function(a,l){for(var i=a._fullLayout,v=l.subplot,s=i[v].imaginaryaxis,d=i[v].realaxis.makeCalcdata(l,"real"),p=s.makeCalcdata(l,"imag"),f=l._length,g=new Array(f),m=0;m<f;m++){var u=d[m],w=p[m],c=g[m]={};y(u)&&y(w)?(c.real=u,c.imag=w):c.real=x}return o(l,f),M(a,l),_(g,l),e(g,l),g}},{"../../constants/numerical":479,"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1019:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../scatter/subtypes"),M=b("../scatter/marker_defaults"),_=b("../scatter/line_defaults"),e=b("../scatter/line_shape_defaults"),o=b("../scatter/text_defaults"),a=b("../scatter/fillcolor_defaults"),l=b("../scatter/constants").PTS_LINESONLY,i=b("./attributes");oe.exports=function(v,h,s,d){function p(m,u){return y.coerce(v,h,i,m,u)}var u,c,A,k,C,f=(u=h,k=(c=p)("real"),C=c("imag"),k&&C&&(A=Math.min(k.length,C.length)),u._length=A,A);if(f){p("mode",f<l?"lines+markers":"lines"),p("text"),p("hovertext"),"fills"!==h.hoveron&&p("hovertemplate"),x.hasLines(h)&&(_(v,h,s,d,p),e(v,h,p),p("connectgaps")),x.hasMarkers(h)&&M(v,h,s,d,p,{gradient:!0}),x.hasText(h)&&(p("texttemplate"),o(v,h,d,p));var g=[];(x.hasMarkers(h)||x.hasText(h))&&(p("cliponaxis"),p("marker.maxdisplayed"),g.push("points")),p("fill"),"none"!==h.fill&&(a(v,h,s,p),x.hasLines(h)||e(v,h,p)),"tonext"!==h.fill&&"toself"!==h.fill||g.push("fills"),p("hoveron",g.join("+")||"points"),y.coerceSelectionMarkerOpacity(h,p)}else h.visible=!1}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1017}],1020:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axes");oe.exports=function(x,M,_){var e={},o=_[M.subplot]._subplot;return e.realLabel=y.tickText(o.radialAxis,x.real,!0).text,e.imagLabel=y.tickText(o.angularAxis,x.imag,!0).text,e}},{"../../plots/cartesian/axes":554}],1021:[function(b,oe,se){"use strict";var y=b("../scatter/hover");function x(M,_,e,o){var a=e.radialAxis,l=e.angularAxis;a._hovertitle="real",l._hovertitle="imag";var i={};i[_.subplot]={_subplot:e};var v=_._module.formatLabels(M,_,i);o.realLabel=v.realLabel,o.imagLabel=v.imagLabel;var s=[];function d(f,g){s.push(f._hovertitle+": "+g)}if(!_.hovertemplate){var p=(M.hi||_.hoverinfo).split("+");-1!==p.indexOf("all")&&(p=["real","imag","text"]),-1!==p.indexOf("real")&&d(a,o.realLabel),-1!==p.indexOf("imag")&&d(l,o.imagLabel),-1!==p.indexOf("text")&&o.text&&(s.push(o.text),delete o.text),o.extraText=s.join("<br>")}}oe.exports={hoverPoints:function(M,_,e,o){var a=y(M,_,e,o);if(a&&!1!==a[0].index){var l=a[0];if(void 0===l.index)return a;var i=M.subplot,v=l.cd[l.index],h=l.trace;if(i.isPtInside(v))return l.xLabelVal=void 0,l.yLabelVal=void 0,x(v,h,i,l),l.hovertemplate=h.hovertemplate,a}},makeHoverPointText:x}},{"../scatter/hover":938}],1022:[function(b,oe,se){"use strict";oe.exports={moduleType:"trace",name:"scattersmith",basePlotModule:b("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover").hoverPoints,selectPoints:b("../scatter/select"),meta:{}}},{"../../plots/smith":629,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1017,"./calc":1018,"./defaults":1019,"./format_labels":1020,"./hover":1021,"./plot":1023}],1023:[function(b,oe,se){"use strict";var y=b("../scatter/plot"),x=b("../../constants/numerical").BADNUM,M=b("../../plots/smith/helpers").smith;oe.exports=function(_,e,o){for(var a=e.layers.frontplot.select("g.scatterlayer"),l={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},i=0;i<o.length;i++)for(var v=o[i],h=0;h<v.length;h++){var s=v[h],d=s.real;if(d===x)s.x=s.y=x;else{var p=M([d,s.imag]);s.x=p[0],s.y=p[1]}}y(_,l,o,a)}},{"../../constants/numerical":479,"../../plots/smith/helpers":628,"../scatter/plot":948}],1024:[function(b,oe,se){"use strict";var y=b("../../plots/template_attributes").hovertemplateAttrs,x=b("../../plots/template_attributes").texttemplateAttrs,M=b("../scatter/attributes"),_=b("../../plots/attributes"),e=b("../../components/colorscale/attributes"),o=b("../../components/drawing/attributes").dash,a=b("../../lib/extend").extendFlat,l=M.marker,i=M.line,v=l.line;oe.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:a({},M.mode,{dflt:"markers"}),text:a({},M.text,{}),texttemplate:x({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:a({},M.hovertext,{}),line:{color:i.color,width:i.width,dash:o,shape:a({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:M.connectgaps,cliponaxis:M.cliponaxis,fill:a({},M.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:M.fillcolor,marker:a({symbol:l.symbol,opacity:l.opacity,maxdisplayed:l.maxdisplayed,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,line:a({width:v.width,editType:"calc"},e("marker.line")),gradient:l.gradient,editType:"calc"},e("marker")),textfont:M.textfont,textposition:M.textposition,selected:M.selected,unselected:M.unselected,hoverinfo:a({},_.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:M.hoveron,hovertemplate:y()}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":927}],1025:[function(b,oe,se){"use strict";var y=b("fast-isnumeric"),x=b("../scatter/colorscale_calc"),M=b("../scatter/arrays_to_calcdata"),_=b("../scatter/calc_selection"),e=b("../scatter/calc").calcMarkerSize,o=["a","b","c"],a={a:["b","c"],b:["a","c"],c:["a","b"]};oe.exports=function(l,i){var v,h,s,d,p,f,g=l._fullLayout[i.subplot].sum,m=i.sum||g,u={a:i.a,b:i.b,c:i.c};for(v=0;v<o.length;v++)if(!u[s=o[v]]){for(p=u[a[s][0]],f=u[a[s][1]],d=new Array(p.length),h=0;h<p.length;h++)d[h]=m-p[h]-f[h];u[s]=d}var w,c,A,k,L=i._length,D=new Array(L);for(v=0;v<L;v++)c=u.b[v],A=u.c[v],y(w=u.a[v])&&y(c)&&y(A)?(1!=(k=g/((w=+w)+(c=+c)+(A=+A)))&&(w*=k,c*=k,A*=k),D[v]={x:A-c,y:w,a:w,b:c,c:A}):D[v]={x:!1,y:!1};return e(i,L),x(l,i),M(D,i),_(D,i),D}},{"../scatter/arrays_to_calcdata":926,"../scatter/calc":928,"../scatter/calc_selection":929,"../scatter/colorscale_calc":930,"fast-isnumeric":190}],1026:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../scatter/constants"),M=b("../scatter/subtypes"),_=b("../scatter/marker_defaults"),e=b("../scatter/line_defaults"),o=b("../scatter/line_shape_defaults"),a=b("../scatter/text_defaults"),l=b("../scatter/fillcolor_defaults"),i=b("./attributes");oe.exports=function(v,h,s,d){function p(c,A){return y.coerce(v,h,i,c,A)}var f,g=p("a"),m=p("b"),u=p("c");if(g?(f=g.length,m?(f=Math.min(f,m.length),u&&(f=Math.min(f,u.length))):f=u?Math.min(f,u.length):0):m&&u&&(f=Math.min(m.length,u.length)),f){h._length=f,p("sum"),p("text"),p("hovertext"),"fills"!==h.hoveron&&p("hovertemplate"),p("mode",f<x.PTS_LINESONLY?"lines+markers":"lines"),M.hasLines(h)&&(e(v,h,s,d,p),o(v,h,p),p("connectgaps")),M.hasMarkers(h)&&_(v,h,s,d,p,{gradient:!0}),M.hasText(h)&&(p("texttemplate"),a(v,h,d,p));var w=[];(M.hasMarkers(h)||M.hasText(h))&&(p("cliponaxis"),p("marker.maxdisplayed"),w.push("points")),p("fill"),"none"!==h.fill&&(l(v,h,s,p),M.hasLines(h)||o(v,h,p)),"tonext"!==h.fill&&"toself"!==h.fill||w.push("fills"),p("hoveron",w.join("+")||"points"),y.coerceSelectionMarkerOpacity(h,p)}else h.visible=!1}},{"../../lib":503,"../scatter/constants":931,"../scatter/fillcolor_defaults":935,"../scatter/line_defaults":940,"../scatter/line_shape_defaults":942,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scatter/text_defaults":953,"./attributes":1024}],1027:[function(b,oe,se){"use strict";oe.exports=function(y,x,M,_,e){if(x.xa&&(y.xaxis=x.xa),x.ya&&(y.yaxis=x.ya),_[e]){var o=_[e];y.a=o.a,y.b=o.b,y.c=o.c}else y.a=x.a,y.b=x.b,y.c=x.c;return y}},{}],1028:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axes");oe.exports=function(x,M,_){var e={},o=_[M.subplot]._subplot;return e.aLabel=y.tickText(o.aaxis,x.a,!0).text,e.bLabel=y.tickText(o.baxis,x.b,!0).text,e.cLabel=y.tickText(o.caxis,x.c,!0).text,e}},{"../../plots/cartesian/axes":554}],1029:[function(b,oe,se){"use strict";var y=b("../scatter/hover");oe.exports=function(x,M,_,e){var o=y(x,M,_,e);if(o&&!1!==o[0].index){var a=o[0];if(void 0===a.index){var i=x.xa._length,v=i*(1-a.y0/x.ya._length)/2,h=i-v;return a.x0=Math.max(Math.min(a.x0,h),v),a.x1=Math.max(Math.min(a.x1,h),v),o}var s=a.cd[a.index],d=a.trace,p=a.subplot;a.a=s.a,a.b=s.b,a.c=s.c,a.xLabelVal=void 0,a.yLabelVal=void 0;var f={};f[d.subplot]={_subplot:p};var g=d._module.formatLabels(s,d,f);a.aLabel=g.aLabel,a.bLabel=g.bLabel,a.cLabel=g.cLabel;var u=[];if(!d.hovertemplate){var w=(s.hi||d.hoverinfo).split("+");-1!==w.indexOf("all")&&(w=["a","b","c"]),-1!==w.indexOf("a")&&c(p.aaxis,a.aLabel),-1!==w.indexOf("b")&&c(p.baxis,a.bLabel),-1!==w.indexOf("c")&&c(p.caxis,a.cLabel)}return a.extraText=u.join("<br>"),a.hovertemplate=d.hovertemplate,o}function c(A,k){u.push(A._hovertitle+": "+k)}}},{"../scatter/hover":938}],1030:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),formatLabels:b("./format_labels"),calc:b("./calc"),plot:b("./plot"),style:b("../scatter/style").style,styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../scatter/select"),eventData:b("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:b("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":634,"../scatter/marker_colorbar":945,"../scatter/select":949,"../scatter/style":951,"./attributes":1024,"./calc":1025,"./defaults":1026,"./event_data":1027,"./format_labels":1028,"./hover":1029,"./plot":1031}],1031:[function(b,oe,se){"use strict";var y=b("../scatter/plot");oe.exports=function(x,M,_){var e=M.plotContainer;e.select(".scatterlayer").selectAll("*").remove();var o={xaxis:M.xaxis,yaxis:M.yaxis,plot:e,layerClipId:M._hasClipOnAxisFalse?M.clipIdRelative:null},a=M.layers.frontplot.select("g.scatterlayer");y(x,o,_,a)}},{"../scatter/plot":948}],1032:[function(b,oe,se){"use strict";var y=b("../scatter/attributes"),x=b("../../components/colorscale/attributes"),M=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,_=b("../../plots/template_attributes").hovertemplateAttrs,e=b("../scattergl/attributes"),o=b("../../plots/cartesian/constants").idRegex,a=b("../../plot_api/plot_template").templatedArray,l=b("../../lib/extend").extendFlat,i=y.marker,v=i.line,h=l(x("marker.line",{editTypeOverride:"calc"}),{width:l({},v.width,{editType:"calc"}),editType:"calc"}),s=l(x("marker"),{symbol:i.symbol,size:l({},i.size,{editType:"markerSize"}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:i.opacity,colorbar:i.colorbar,line:h,editType:"calc"});function d(p){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:o[p],editType:"plot"}}}s.color.editType=s.cmin.editType=s.cmax.editType="style",oe.exports={dimensions:a("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:l({},e.text,{}),hovertext:l({},e.hovertext,{}),hovertemplate:_(),xhoverformat:M("x"),yhoverformat:M("y"),marker:s,xaxes:d("x"),yaxes:d("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/constants":561,"../../plots/template_attributes":633,"../scatter/attributes":927,"../scattergl/attributes":979}],1033:[function(b,oe,se){"use strict";var y=b("../../registry"),x=b("../../components/grid");oe.exports={moduleType:"trace",name:"splom",categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:b("../scatter/marker_colorbar"),calc:b("./calc"),plot:b("./plot"),hoverPoints:b("./hover").hoverPoints,selectPoints:b("./select"),editStyle:b("./edit_style"),meta:{}},y.register(x)},{"../../components/grid":410,"../../registry":638,"../scatter/marker_colorbar":945,"./attributes":1032,"./calc":1035,"./defaults":1036,"./edit_style":1037,"./hover":1039,"./plot":1041,"./select":1043}],1034:[function(b,oe,se){"use strict";var y=b("regl-line2d"),x=b("../../registry"),M=b("../../lib/prepare_regl"),_=b("../../plots/get_data").getModuleCalcData,e=b("../../plots/cartesian"),o=b("../../plots/cartesian/axis_ids").getFromId,a=b("../../plots/cartesian/axes").shouldShowZeroLine,l={};function i(h,s,d){for(var f=s._visibleDims,g=d.viewOpts.ranges=new Array(d.matrixOptions.data.length),m=0;m<f.length;m++){var u=f[m],w=g[m]=new Array(4),c=o(h,s._diag[u][0]);c&&(w[0]=c.r2l(c.range[0]),w[2]=c.r2l(c.range[1]));var A=o(h,s._diag[u][1]);A&&(w[1]=A.r2l(A.range[0]),w[3]=A.r2l(A.range[1]))}d.selectBatch.length||d.unselectBatch.length?d.matrix.update({ranges:g},{ranges:g}):d.matrix.update({ranges:g})}function v(h){var s=h._fullLayout,d=s._glcanvas.data()[0].regl,p=s._splomGrid;p||(p=s._splomGrid=y(d)),p.update(function(f){var g,m=f._context.plotGlPixelRatio,u=f._fullLayout,w=u._size,c=[0,0,u.width*m,u.height*m],A={};function k(X,K,ie,q,U,W){ie*=m,q*=m,U*=m,W*=m;var ae=K[X+"color"],G=K[X+"width"],te=String(ae+G);te in A?A[te].data.push(NaN,NaN,ie,q,U,W):A[te]={data:[ie,q,U,W],join:"rect",thickness:G*m,color:ae,viewport:c,range:c,overlay:!1}}for(g in u._splomSubplots){var C,E,L=u._plots[g],D=L.xaxis,N=L.yaxis,F=D._gridVals,I=N._gridVals,P=D._offset,j=D._length,V=N._length,Z=w.b+N.domain[0]*w.h,Y=-N._m,ee=-Y*N.r2l(N.range[0],N.calendar);if(D.showgrid)for(g=0;g<F.length;g++)C=P+D.l2p(F[g].x),k("grid",D,C,Z,C,Z+V);if(N.showgrid)for(g=0;g<I.length;g++)k("grid",N,P,E=Z+ee+Y*I[g].x,P+j,E);a(f,D,N)&&(C=P+D.l2p(0),k("zeroline",D,C,Z,C,Z+V)),a(f,N,D)&&k("zeroline",N,P,E=Z+ee+0,P+j,E)}var re=[];for(g in A)re.push(A[g]);return re}(h))}oe.exports={name:"splom",attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:function(h){var s=h._fullLayout,d=x.getModule("splom"),p=_(h.calcdata,d)[0];M(h,["ANGLE_instanced_arrays","OES_element_index_uint"],l)&&(s._hasOnlyLargeSploms&&v(h),d.plot(h,{},p))},drag:function(h){var s=h.calcdata,d=h._fullLayout;d._hasOnlyLargeSploms&&v(h);for(var p=0;p<s.length;p++){var f=s[p][0].trace,g=d._splomScenes[f.uid];"splom"===f.type&&g&&g.matrix&&i(h,f,g)}},updateGrid:v,clean:function(h,s,d,p){var f,g={};if(p._splomScenes){for(f=0;f<h.length;f++){var m=h[f];"splom"===m.type&&(g[m.uid]=1)}for(f=0;f<d.length;f++){var u=d[f];if(!g[u.uid]){var w=p._splomScenes[u.uid];w&&w.destroy&&w.destroy(),p._splomScenes[u.uid]=null,delete p._splomScenes[u.uid]}}}0===Object.keys(p._splomScenes||{}).length&&delete p._splomScenes,p._splomGrid&&!s._hasOnlyLargeSploms&&p._hasOnlyLargeSploms&&(p._splomGrid.destroy(),p._splomGrid=null,delete p._splomGrid),e.clean(h,s,d,p)},updateFx:e.updateFx,toSVG:e.toSVG,reglPrecompiled:l}},{"../../lib/prepare_regl":516,"../../plots/cartesian":568,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../../plots/get_data":593,"../../registry":638,"regl-line2d":280}],1035:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plots/cartesian/axis_ids"),M=b("../scatter/calc").calcMarkerSize,_=b("../scatter/calc").calcAxisExpansion,e=b("../scatter/colorscale_calc"),o=b("../scattergl/convert").markerSelection,a=b("../scattergl/convert").markerStyle,l=b("./scene_update"),i=b("../../constants/numerical").BADNUM,v=b("../scattergl/constants").TOO_MANY_POINTS;oe.exports=function(h,s){var d,p,f,g,m,u,w=s.dimensions,c=s._length,A={},k=A.cdata=[],C=A.data=[],E=s._visibleDims=[];function L(N,F){for(var I=N.makeCalcdata({v:F.values,vcalendar:s.calendar},"v"),P=0;P<I.length;P++)I[P]=I[P]===i?NaN:I[P];k.push(I),C.push("log"===N.type?y.simpleMap(I,N.c2l):I)}for(d=0;d<w.length;d++)if((f=w[d]).visible){if(g=x.getFromId(h,s._diag[d][0]),m=x.getFromId(h,s._diag[d][1]),g&&m&&g.type!==m.type){y.log("Skipping splom dimension "+d+" with conflicting axis types");continue}g?(L(g,f),m&&"category"===m.type&&(m._categories=g._categories.slice())):L(m,f),E.push(d)}for(e(h,s),y.extendFlat(A,a(s)),u=k.length*c>v?A.sizeAvg||Math.max(A.size,3):M(s,c),p=0;p<E.length;p++)f=w[d=E[p]],g=x.getFromId(h,s._diag[d][0])||{},m=x.getFromId(h,s._diag[d][1])||{},_(h,s,g,m,k[p],k[p],u);var D=l(h,s);return D.matrix||(D.matrix=!0),D.matrixOptions=A,D.selectedOptions=o(s,s.selected),D.unselectedOptions=o(s,s.unselected),[{x:!1,y:!1,t:{},trace:s}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../scatter/calc":928,"../scatter/colorscale_calc":930,"../scattergl/constants":982,"../scattergl/convert":983,"./scene_update":1042}],1036:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plots/array_container_defaults"),M=b("./attributes"),_=b("../scatter/subtypes"),e=b("../scatter/marker_defaults"),o=b("../parcoords/merge_length"),a=b("../scattergl/helpers").isOpenSymbol;function l(i,v){function h(d,p){return y.coerce(i,v,M.dimensions,d,p)}h("label");var s=h("values");s&&s.length?h("visible"):v.visible=!1,h("axis.type"),h("axis.matches")}oe.exports=function(i,v,h,s){function d(c,A){return y.coerce(i,v,M,c,A)}var p=x(i,v,{name:"dimensions",handleItemDefaults:l}),f=d("diagonal.visible"),g=d("showupperhalf"),m=d("showlowerhalf");if(o(v,p,"values")&&(f||g||m)){d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),e(i,v,h,s,d);var u=a(v.marker.symbol),w=_.isBubble(v);d("marker.line.width",u||w?1:0),function(c,A,k,C){var E,L,D=A.dimensions,N=D.length,F=A.showupperhalf,I=A.showlowerhalf,P=A.diagonal.visible,j=new Array(N),V=new Array(N);for(E=0;E<N;E++){var Z=E?E+1:"";j[E]="x"+Z,V[E]="y"+Z}var Y=C("xaxes",j),ee=C("yaxes",V),re=A._diag=new Array(N);A._xaxes={},A._yaxes={};var X=[],K=[];function ie(ue,pe,de,_e){if(ue){var me=ue.charAt(0),we=k._splomAxes[me];if(A["_"+me+"axes"][ue]=1,_e.push(ue),!(ue in we)){var De=we[ue]={};de&&(De.label=de.label||"",de.visible&&de.axis&&(de.axis.type&&(De.type=de.axis.type),de.axis.matches&&(De.matches=pe)))}}}var q=!P&&!I,U=!P&&!F;for(A._axesDim={},E=0;E<N;E++){var W=D[E],ae=0===E,G=E===N-1,te=ae&&q||G&&U?void 0:Y[E],ne=ae&&U||G&&q?void 0:ee[E];ie(te,ne,W,X),ie(ne,te,W,K),re[E]=[te,ne],A._axesDim[te]=E,A._axesDim[ne]=E}for(E=0;E<X.length;E++)for(L=0;L<K.length;L++){var le=X[E]+K[L];E>L&&F||E<L&&I?k._splomSubplots[le]=1:E!==L||!P&&I&&F||(k._splomSubplots[le]=1)}(!I||!P&&F&&I)&&(k._splomGridDflt.xside="bottom",k._splomGridDflt.yside="left")}(0,v,s,d),y.coerceSelectionMarkerOpacity(v,d)}else v.visible=!1}},{"../../lib":503,"../../plots/array_container_defaults":549,"../parcoords/merge_length":898,"../scatter/marker_defaults":946,"../scatter/subtypes":952,"../scattergl/helpers":987,"./attributes":1032}],1037:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../scatter/colorscale_calc"),M=b("../scattergl/convert").markerStyle;oe.exports=function(_,e){var o=e.trace,a=_._fullLayout._splomScenes[o.uid];if(a){x(_,o),y.extendFlat(a.matrixOptions,M(o));var l=y.extendFlat({},a.matrixOptions,a.viewOpts);a.matrix.update(l,null)}}},{"../../lib":503,"../scatter/colorscale_calc":930,"../scattergl/convert":983}],1038:[function(b,oe,se){"use strict";se.getDimIndex=function(y,x){for(var M=x._id,_={x:0,y:1}[M.charAt(0)],e=y._visibleDims,o=0;o<e.length;o++)if(y._diag[e[o]][_]===M)return o;return!1}},{}],1039:[function(b,oe,se){"use strict";var y=b("./helpers"),x=b("../scattergl/hover").calcHover;oe.exports={hoverPoints:function(M,_,e){var o=M.cd[0].trace,a=M.scene.matrixOptions.cdata,l=M.xa,i=M.ya,v=l.c2p(_),h=i.c2p(e),s=M.distance,d=y.getDimIndex(o,l),p=y.getDimIndex(o,i);if(!1===d||!1===p)return[M];for(var f,g,m=a[d],u=a[p],w=s,c=0;c<m.length;c++){var k=u[c],C=l.c2p(m[c])-v,E=i.c2p(k)-h,L=Math.sqrt(C*C+E*E);L<w&&(w=g=L,f=c)}return M.index=f,M.distance=w,M.dxy=g,void 0===f?[M]:[x(M,m,u,o)]}}},{"../scattergl/hover":988,"./helpers":1038}],1040:[function(b,oe,se){"use strict";var y=b("./base_index");y.basePlotModule=b("./base_plot"),oe.exports=y},{"./base_index":1033,"./base_plot":1034}],1041:[function(b,oe,se){"use strict";var y=b("regl-splom"),x=b("../../lib"),M=b("../../plots/cartesian/axis_ids"),_=b("../../components/dragelement/helpers").selectMode;function e(o,a){var l,i,v,h,s,d=o._fullLayout,p=d._size,f=a.trace,g=a.t,m=d._splomScenes[f.uid],u=m.matrixOptions,w=u.cdata,c=d._glcanvas.data()[0].regl,A=d.dragmode;if(0!==w.length){u.lower=f.showupperhalf,u.upper=f.showlowerhalf,u.diagonal=f.diagonal.visible;var k=f._visibleDims,C=w.length,E=m.viewOpts={};for(E.ranges=new Array(C),E.domains=new Array(C),s=0;s<k.length;s++){v=k[s];var L=E.ranges[s]=new Array(4),D=E.domains[s]=new Array(4);(l=M.getFromId(o,f._diag[v][0]))&&(L[0]=l._rl[0],L[2]=l._rl[1],D[0]=l.domain[0],D[2]=l.domain[1]),(i=M.getFromId(o,f._diag[v][1]))&&(L[1]=i._rl[0],L[3]=i._rl[1],D[1]=i.domain[0],D[3]=i.domain[1])}var N=o._context.plotGlPixelRatio,F=p.l*N,I=p.b*N;E.viewport=[F,I,p.w*N+F,p.h*N+I],!0===m.matrix&&(m.matrix=y(c));var V=d.clickmode.indexOf("select")>-1,Z=!0;if(_(A)||f.selectedpoints||V){var Y=f._length;if(f.selectedpoints){m.selectBatch=f.selectedpoints;var ee=f.selectedpoints,re={};for(v=0;v<ee.length;v++)re[ee[v]]=!0;var X=[];for(v=0;v<Y;v++)re[v]||X.push(v);m.unselectBatch=X}var K=g.xpx=new Array(C),ie=g.ypx=new Array(C);for(s=0;s<k.length;s++){if(l=M.getFromId(o,f._diag[v=k[s]][0]))for(K[s]=new Array(Y),h=0;h<Y;h++)K[s][h]=l.c2p(w[s][h]);if(i=M.getFromId(o,f._diag[v][1]))for(ie[s]=new Array(Y),h=0;h<Y;h++)ie[s][h]=i.c2p(w[s][h])}if(m.selectBatch.length||m.unselectBatch.length){var q=x.extendFlat({},u,m.unselectedOptions,E),U=x.extendFlat({},u,m.selectedOptions,E);m.matrix.update(q,U),Z=!1}}else g.xpx=g.ypx=null;if(Z){var W=x.extendFlat({},u,E);m.matrix.update(W,null)}}}oe.exports=function(o,a,l){if(l.length)for(var i=0;i<l.length;i++)e(o,l[i][0])}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../plots/cartesian/axis_ids":558,"regl-splom":282}],1042:[function(b,oe,se){"use strict";var y=b("../../lib");oe.exports=function(x,M){var _=x._fullLayout,e=M.uid,o=_._splomScenes;o||(o=_._splomScenes={});var a={dirty:!0,selectBatch:[],unselectBatch:[]},l=o[M.uid];return l||((l=o[e]=y.extendFlat({},a,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){l.matrix&&l.matrix.draw&&(l.selectBatch.length||l.unselectBatch.length?l.matrix.draw(l.unselectBatch,l.selectBatch):l.matrix.draw()),l.dirty=!1},l.destroy=function(){l.matrix&&l.matrix.destroy&&l.matrix.destroy(),l.matrixOptions=null,l.selectBatch=null,l.unselectBatch=null,l=null}),l.dirty||y.extendFlat(l,a),l}},{"../../lib":503}],1043:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../scatter/subtypes"),M=b("./helpers");oe.exports=function(_,e){var o=_.cd,a=o[0].trace,l=o[0].t,i=_.scene,v=i.matrixOptions.cdata,h=_.xaxis,s=_.yaxis,d=[];if(!i)return d;var p=!x.hasMarkers(a)&&!x.hasText(a);if(!0!==a.visible||p)return d;var f=M.getDimIndex(a,h),g=M.getDimIndex(a,s);if(!1===f||!1===g)return d;var m=l.xpx[f],u=l.ypx[g],w=v[f],c=v[g],A=[],k=[];if(!1!==e&&!e.degenerate)for(var C=0;C<w.length;C++)e.contains([m[C],u[C]],null,C,_)?(A.push(C),d.push({pointNumber:C,x:w[C],y:c[C]})):k.push(C);var E=i.matrixOptions;return A.length||k.length?i.selectBatch.length||i.unselectBatch.length||i.matrix.update(i.unselectedOptions,y.extendFlat({},E,i.selectedOptions,i.viewOpts)):i.matrix.update(E,null),i.selectBatch=A,i.unselectBatch=k,d}},{"../../lib":503,"../scatter/subtypes":952,"./helpers":1038}],1044:[function(b,oe,se){"use strict";var y=b("../../components/colorscale/attributes"),x=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,M=b("../../plots/template_attributes").hovertemplateAttrs,_=b("../mesh3d/attributes"),e=b("../../plots/attributes"),o=b("../../lib/extend").extendFlat,a={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:M({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:x("u",1),vhoverformat:x("v",1),whoverformat:x("w",1),xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z"),showlegend:o({},e.showlegend,{dflt:!1})};o(a,y("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(l){a[l]=_[l]}),a.hoverinfo=o({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),a.transforms=void 0,oe.exports=a},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],1045:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../components/colorscale/calc");function M(o){var a,l,i,v,h,s,d,p,f,g,m,u,w=o._x,c=o._y,A=o._z,k=o._len,C=-1/0,E=1/0,L=-1/0,D=1/0,N=-1/0,F=1/0,I="";for(k&&(d=w[0],f=c[0],m=A[0]),k>1&&(p=w[k-1],g=c[k-1],u=A[k-1]),a=0;a<k;a++)C=Math.max(C,w[a]),E=Math.min(E,w[a]),L=Math.max(L,c[a]),D=Math.min(D,c[a]),N=Math.max(N,A[a]),F=Math.min(F,A[a]),v||w[a]===d||(v=!0,I+="x"),h||c[a]===f||(h=!0,I+="y"),s||A[a]===m||(s=!0,I+="z");v||(I+="x"),h||(I+="y"),s||(I+="z");var P=_(o._x),j=_(o._y),V=_(o._z);I=(I=(I=I.replace("x",(d>p?"-":"+")+"x")).replace("y",(f>g?"-":"+")+"y")).replace("z",(m>u?"-":"+")+"z");var Z=function(){k=0,P=[],j=[],V=[]};(!k||k<P.length*j.length*V.length)&&Z();var Y=function(me){return"x"===me?w:"y"===me?c:A},ee=function(me){return"x"===me?P:"y"===me?j:V},re=function(me){return me[k-1]<me[0]?-1:1},X=Y(I[1]),K=Y(I[3]),ie=Y(I[5]),q=ee(I[1]).length,U=ee(I[3]).length,W=ee(I[5]).length,ae=!1,G=function(me,we,De){return q*(U*me+we)+De},te=re(Y(I[1])),ne=re(Y(I[3])),le=re(Y(I[5]));for(a=0;a<W-1;a++){for(l=0;l<U-1;l++){for(i=0;i<q-1;i++){var ue=G(a,l,i),pe=G(a,l,i+1),de=G(a,l+1,i),_e=G(a+1,l,i);if(X[ue]*te<X[pe]*te&&K[ue]*ne<K[de]*ne&&ie[ue]*le<ie[_e]*le||(ae=!0),ae)break}if(ae)break}if(ae)break}return ae&&(y.warn("Encountered arbitrary coordinates! Unable to input data grid."),Z()),{xMin:E,yMin:D,zMin:F,xMax:C,yMax:L,zMax:N,Xs:P,Ys:j,Zs:V,len:k,fill:I}}function _(o){return y.distinctVals(o).vals}function e(o,a){if(void 0===a&&(a=o.length),y.isTypedArray(o))return o.subarray(0,a);for(var l=[],i=0;i<a;i++)l[i]=+o[i];return l}oe.exports={calc:function(o,a){a._len=Math.min(a.u.length,a.v.length,a.w.length,a.x.length,a.y.length,a.z.length),a._u=e(a.u,a._len),a._v=e(a.v,a._len),a._w=e(a.w,a._len),a._x=e(a.x,a._len),a._y=e(a.y,a._len),a._z=e(a.z,a._len);var l=M(a);a._gridFill=l.fill,a._Xs=l.Xs,a._Ys=l.Ys,a._Zs=l.Zs,a._len=l.len;var i,v,h,s=0;a.starts&&(i=e(a.starts.x||[]),v=e(a.starts.y||[]),h=e(a.starts.z||[]),s=Math.min(i.length,v.length,h.length)),a._startsX=i||[],a._startsY=v||[],a._startsZ=h||[];var d,p=0,f=1/0;for(d=0;d<a._len;d++){var g=a._u[d],m=a._v[d],u=a._w[d],w=Math.sqrt(g*g+m*m+u*u);p=Math.max(p,w),f=Math.min(f,w)}for(x(o,a,{vals:[f,p],containerStr:"",cLetter:"c"}),d=0;d<s;d++){var c=i[d];l.xMax=Math.max(l.xMax,c),l.xMin=Math.min(l.xMin,c);var A=v[d];l.yMax=Math.max(l.yMax,A),l.yMin=Math.min(l.yMin,A);var k=h[d];l.zMax=Math.max(l.zMax,k),l.zMin=Math.min(l.zMin,k)}a._slen=s,a._normMax=p,a._xbnds=[l.xMin,l.xMax],a._ybnds=[l.yMin,l.yMax],a._zbnds=[l.zMin,l.zMax]},filter:e,processGrid:M}},{"../../components/colorscale/calc":374,"../../lib":503}],1046:[function(b,oe,se){"use strict";var y=b("../../../stackgl_modules").gl_streamtube3d,x=y.createTubeMesh,M=b("../../lib"),_=b("../../lib/gl_format_color").parseColorScale,e=b("../../components/colorscale").extractOpts,o=b("../../plots/gl3d/zip3"),a={xaxis:0,yaxis:1,zaxis:2};function l(d,p){this.scene=d,this.uid=p,this.mesh=null,this.data=null}var i=l.prototype;function v(d){var p=d.length;return p>2?d.slice(1,p-1):2===p?[(d[0]+d[1])/2]:d}function h(d){var p=d.length;return 1===p?[.5,.5]:[d[1]-d[0],d[p-1]-d[p-2]]}function s(d,p){var f=d.fullSceneLayout,g=d.dataScale,m=p._len,u={};function w(q,U){var W=f[U],ae=g[a[U]];return M.simpleMap(q,function(G){return W.d2l(G)*ae})}if(u.vectors=o(w(p._u,"xaxis"),w(p._v,"yaxis"),w(p._w,"zaxis"),m),!m)return{positions:[],cells:[]};var c=w(p._Xs,"xaxis"),A=w(p._Ys,"yaxis"),k=w(p._Zs,"zaxis");if(u.meshgrid=[c,A,k],u.gridFill=p._gridFill,p._slen)u.startingPositions=o(w(p._startsX,"xaxis"),w(p._startsY,"yaxis"),w(p._startsZ,"zaxis"));else{for(var C=A[0],E=v(c),L=v(k),D=new Array(E.length*L.length),N=0,F=0;F<E.length;F++)for(var I=0;I<L.length;I++)D[N++]=[E[F],C,L[I]];u.startingPositions=D}u.colormap=_(p),u.tubeSize=p.sizeref,u.maxLength=p.maxdisplayed;var P=w(p._xbnds,"xaxis"),j=w(p._ybnds,"yaxis"),V=w(p._zbnds,"zaxis"),Z=h(c),Y=h(A),ee=h(k),X=y(u,[[P[0]-Z[0],j[0]-Y[0],V[0]-ee[0]],[P[1]+Z[1],j[1]+Y[1],V[1]+ee[1]]]),K=e(p);X.vertexIntensityBounds=[K.min/p._normMax,K.max/p._normMax];var ie=p.lightposition;return X.lightPosition=[ie.x,ie.y,ie.z],X.ambient=p.lighting.ambient,X.diffuse=p.lighting.diffuse,X.specular=p.lighting.specular,X.roughness=p.lighting.roughness,X.fresnel=p.lighting.fresnel,X.opacity=p.opacity,p._pad=X.tubeScale*p.sizeref*2,X}i.handlePick=function(d){var p=this.scene.fullSceneLayout,f=this.scene.dataScale;function g(w,c){var k=f[a[c]];return p[c].l2c(w)/k}if(d.object===this.mesh){var m=d.data.position,u=d.data.velocity;return d.traceCoordinate=[g(m[0],"xaxis"),g(m[1],"yaxis"),g(m[2],"zaxis"),g(u[0],"xaxis"),g(u[1],"yaxis"),g(u[2],"zaxis"),d.data.intensity*this.data._normMax,d.data.divergence],d.textLabel=this.data.hovertext||this.data.text,!0}},i.update=function(d){this.data=d;var p=s(this.scene,d);this.mesh.update(p)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},oe.exports=function(d,p){var f=d.glplot.gl,g=s(d,p),m=x(f,g),u=new l(d,p.uid);return u.mesh=m,u.data=p,m._trace=u,d.glplot.add(m),u}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],1047:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../components/colorscale/defaults"),M=b("./attributes");oe.exports=function(_,e,o,a){function l(f,g){return y.coerce(_,e,M,f,g)}var i=l("u"),v=l("v"),h=l("w"),s=l("x"),d=l("y"),p=l("z");i&&i.length&&v&&v.length&&h&&h.length&&s&&s.length&&d&&d.length&&p&&p.length?(l("starts.x"),l("starts.y"),l("starts.z"),l("maxdisplayed"),l("sizeref"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),x(_,e,a,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),l("uhoverformat"),l("vhoverformat"),l("whoverformat"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":1044}],1048:[function(b,oe,se){"use strict";oe.exports={moduleType:"trace",name:"streamtube",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:b("./attributes"),supplyDefaults:b("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:b("./calc").calc,plot:b("./convert"),eventData:function(y,x){return y.tubex=y.x,y.tubey=y.y,y.tubez=y.z,y.tubeu=x.traceCoordinate[3],y.tubev=x.traceCoordinate[4],y.tubew=x.traceCoordinate[5],y.norm=x.traceCoordinate[6],y.divergence=x.traceCoordinate[7],delete y.x,delete y.y,delete y.z,y},meta:{}}},{"../../plots/gl3d":598,"./attributes":1044,"./calc":1045,"./convert":1046,"./defaults":1047}],1049:[function(b,oe,se){"use strict";var y=b("../../plots/attributes"),x=b("../../plots/template_attributes").hovertemplateAttrs,M=b("../../plots/template_attributes").texttemplateAttrs,_=b("../../components/colorscale/attributes"),e=b("../../plots/domain").attributes,o=b("../pie/attributes"),a=b("./constants"),l=b("../../lib/extend").extendFlat;oe.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:l({colors:{valType:"data_array",editType:"calc"},line:{color:l({},o.marker.line.color,{dflt:null}),width:l({},o.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},_("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:o.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:M({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:o.hovertext,hoverinfo:l({},y.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:x({},{keys:a.eventDataKeys}),textfont:o.textfont,insidetextorientation:o.insidetextorientation,insidetextfont:o.insidetextfont,outsidetextfont:l({},o.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:o.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"./constants":1052}],1050:[function(b,oe,se){"use strict";var y=b("../../plots/plots");se.name="sunburst",se.plot=function(x,M,_,e){y.plotBasePlot(se.name,x,M,_,e)},se.clean=function(x,M,_,e){y.cleanBasePlot(se.name,x,M,_,e)}},{"../../plots/plots":619}],1051:[function(b,oe,se){"use strict";var y=b("d3-hierarchy"),x=b("fast-isnumeric"),M=b("../../lib"),_=b("../../components/colorscale").makeColorScaleFuncFromTrace,e=b("../pie/calc").makePullColorFn,o=b("../pie/calc").generateExtendedColors,a=b("../../components/colorscale").calc,l=b("../../constants/numerical").ALMOST_EQUAL,i={},v={},h={};se.calc=function(s,d){var p,f,g,m,u,w,c=s._fullLayout,A=d.ids,k=M.isArrayOrTypedArray(A),C=d.labels,E=d.parents,L=d.values,D=M.isArrayOrTypedArray(L),N=[],F={},I={},P=function(ne){return ne||"number"==typeof ne},j=function(ne){return!D||x(L[ne])&&L[ne]>=0};k?(p=Math.min(A.length,E.length),f=function(ne){return P(A[ne])&&j(ne)},g=function(ne){return String(A[ne])}):(p=Math.min(C.length,E.length),f=function(ne){return P(C[ne])&&j(ne)},g=function(ne){return String(C[ne])}),D&&(p=Math.min(p,L.length));for(var V=0;V<p;V++)if(f(V)){var Z=g(V),Y=P(E[V])?String(E[V]):"",ee={i:V,id:Z,pid:Y,label:P(C[V])?String(C[V]):""};D&&(ee.v=+L[V]),N.push(ee),u=Z,F[m=Y]?F[m].push(u):F[m]=[u],I[u]=1}if(F[""]){if(F[""].length>1){for(var re=M.randstr(),X=0;X<N.length;X++)""===N[X].pid&&(N[X].pid=re);N.unshift({hasMultipleRoots:!0,id:re,pid:"",label:""})}}else{var K,ie=[];for(K in F)I[K]||ie.push(K);if(1!==ie.length)return M.warn(["Multiple implied roots, cannot build",d.type,"hierarchy of",d.name+".","These roots include:",ie.join(", ")].join(" "));N.unshift({hasImpliedRoot:!0,id:K=ie[0],pid:"",label:K})}try{w=y.stratify().id(function(ne){return ne.id}).parentId(function(ne){return ne.pid})(N)}catch(ne){return M.warn(["Failed to build",d.type,"hierarchy of",d.name+".","Error:",ne.message].join(" "))}var q=y.hierarchy(w),U=!1;if(D)switch(d.branchvalues){case"remainder":q.sum(function(ne){return ne.data.v});break;case"total":q.each(function(ne){var le=ne.data.data,ue=le.v;if(ne.children){var pe=ne.children.reduce(function(de,_e){return de+_e.data.data.v},0);if((le.hasImpliedRoot||le.hasMultipleRoots)&&(ue=pe),ue<pe*l)return U=!0,M.warn(["Total value for node",ne.data.data.id,"of",d.name,"is smaller than the sum of its children.","\nparent value =",ue,"\nchildren sum =",pe].join(" "))}ne.value=ue})}else!function ne(le,ue,pe){var de=0,_e=le.children;if(_e){for(var me=_e.length,we=0;we<me;we++)de+=ne(_e[we],ue,pe);pe.branches&&de++}else pe.leaves&&de++;return le.value=le.data.data.value=de,ue._values||(ue._values=[]),ue._values[le.data.data.i]=de,de}(q,d,{branches:-1!==d.count.indexOf("branches"),leaves:-1!==d.count.indexOf("leaves")});if(!U){var W,ae;d.sort&&q.sort(function(ne,le){return le.value-ne.value});var G=d.marker.colors||[];return d._hasColorscale?(!!G.length||(G=D?d.values:d._values),a(s,d,{vals:G,containerStr:"marker",cLetter:"c"}),ae=_(d.marker)):W=e(c["_"+d.type+"colormap"]),q.each(function(ne){var le=ne.data.data;le.color=d._hasColorscale?ae(G[le.i]):W(G[le.i],le.id)}),N[0].hierarchy=q,N}},se._runCrossTraceCalc=function(s,d){var p=d._fullLayout,f=d.calcdata,g=p[s+"colorway"],m=p["_"+s+"colormap"];p["extend"+s+"colors"]&&(g=o(g,"icicle"===s?h:"treemap"===s?v:i));var u,w=0;function c(C){var E=C.data.data,L=E.id;!1===E.color&&(m[L]?E.color=m[L]:C.parent?C.parent.parent?E.color=C.parent.data.data.color:(m[L]=E.color=g[w%g.length],w++):E.color=u)}for(var A=0;A<f.length;A++){var k=f[A][0];k.trace.type===s&&k.hierarchy&&(u=k.trace.root.color,k.hierarchy.each(c))}},se.crossTraceCalc=function(s){return se._runCrossTraceCalc("sunburst",s)}},{"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../pie/calc":903,"d3-hierarchy":115,"fast-isnumeric":190}],1052:[function(b,oe,se){"use strict";oe.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1053:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./attributes"),M=b("../../plots/domain").defaults,_=b("../bar/defaults").handleText,e=b("../../components/colorscale"),o=e.hasColorscale,a=e.handleDefaults;oe.exports=function(l,i,v,h){function s(u,w){return y.coerce(l,i,x,u,w)}var d=s("labels"),p=s("parents");if(d&&d.length&&p&&p.length){var f=s("values");s(f&&f.length?"branchvalues":"count"),s("level"),s("maxdepth"),s("marker.line.width")&&s("marker.line.color",h.paper_bgcolor),s("marker.colors");var g=i._hasColorscale=o(l,"marker","colors")||(l.marker||{}).coloraxis;g&&a(l,i,h,s,{prefix:"marker.",cLetter:"c"}),s("leaf.opacity",g?1:.7);var m=s("text");s("texttemplate"),i.texttemplate||s("textinfo",Array.isArray(m)?"text+label":"label"),s("hovertext"),s("hovertemplate"),_(l,i,h,s,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),s("insidetextorientation"),s("sort"),s("rotation"),s("root.color"),M(i,h,s),i._length=null}else i.visible=!1}},{"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":1049}],1054:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../registry"),M=b("../../components/fx/helpers").appendArrayPointValue,_=b("../../components/fx"),e=b("../../lib"),o=b("../../lib/events"),a=b("./helpers"),l=b("../pie/helpers").formatPieValue;function i(v,h,s){for(var d=v.data.data,p={curveNumber:h.index,pointNumber:d.i,data:h._input,fullData:h},f=0;f<s.length;f++){var g=s[f];g in v&&(p[g]=v[g])}return"parentString"in v&&!a.isHierarchyRoot(v)&&(p.parent=v.parentString),M(p,h,d.i),p}oe.exports=function(v,h,s,d,p){var f=d[0],g=f.trace,m=f.hierarchy,u="sunburst"===g.type,w="treemap"===g.type||"icicle"===g.type;"_hasHoverLabel"in g||(g._hasHoverLabel=!1),"_hasHoverEvent"in g||(g._hasHoverEvent=!1),v.on("mouseover",function(c){var A=s._fullLayout;if(!s._dragging&&!1!==A.hovermode){var k,C=s._fullData[g.index],E=c.data.data,L=E.i,D=a.isHierarchyRoot(c),N=a.getParent(m,c),F=a.getValue(c),I=function(te){return e.castOption(C,L,te)},P=I("hovertemplate"),j=_.castHoverinfo(C,A,L),V=A.separators;if(P||j&&"none"!==j&&"skip"!==j){var Z,Y;u&&(Z=f.cx+c.pxmid[0]*(1-c.rInscribed),Y=f.cy+c.pxmid[1]*(1-c.rInscribed)),w&&(Z=c._hoverX,Y=c._hoverY);var ee,re={},X=[],K=[],ie=function(te){return-1!==X.indexOf(te)};j&&(X="all"===j?C._module.attributes.hoverinfo.flags:j.split("+")),re.label=E.label,ie("label")&&re.label&&K.push(re.label),E.hasOwnProperty("v")&&(re.value=E.v,re.valueLabel=l(re.value,V),ie("value")&&K.push(re.valueLabel)),re.currentPath=c.currentPath=a.getPath(c.data),ie("current path")&&!D&&K.push(re.currentPath);var q=[],U=function(){-1===q.indexOf(ee)&&(K.push(ee),q.push(ee))};re.percentParent=c.percentParent=F/a.getValue(N),re.parent=c.parentString=a.getPtLabel(N),ie("percent parent")&&(ee=a.formatPercent(re.percentParent,V)+" of "+re.parent,U()),re.percentEntry=c.percentEntry=F/a.getValue(h),re.entry=c.entry=a.getPtLabel(h),!ie("percent entry")||D||c.onPathbar||(ee=a.formatPercent(re.percentEntry,V)+" of "+re.entry,U()),re.percentRoot=c.percentRoot=F/a.getValue(m),re.root=c.root=a.getPtLabel(m),ie("percent root")&&!D&&(ee=a.formatPercent(re.percentRoot,V)+" of "+re.root,U()),re.text=I("hovertext")||I("text"),ie("text")&&e.isValidTextValue(ee=re.text)&&K.push(ee),k=[i(c,C,p.eventDataKeys)];var W={trace:C,y:Y,_x0:c._x0,_x1:c._x1,_y0:c._y0,_y1:c._y1,text:K.join("<br>"),name:P||ie("name")?C.name:void 0,color:I("hoverlabel.bgcolor")||E.color,borderColor:I("hoverlabel.bordercolor"),fontFamily:I("hoverlabel.font.family"),fontSize:I("hoverlabel.font.size"),fontColor:I("hoverlabel.font.color"),nameLength:I("hoverlabel.namelength"),textAlign:I("hoverlabel.align"),hovertemplate:P,hovertemplateLabels:re,eventData:k};u&&(W.x0=Z-c.rInscribed*c.rpx1,W.x1=Z+c.rInscribed*c.rpx1,W.idealAlign=c.pxmid[0]<0?"left":"right"),w&&(W.x=Z,W.idealAlign=Z<0?"left":"right");var ae=[];_.loneHover(W,{container:A._hoverlayer.node(),outerContainer:A._paper.node(),gd:s,inOut_bbox:ae}),k[0].bbox=ae[0],g._hasHoverLabel=!0}if(w){var G=v.select("path.surface");p.styleOne(G,c,C,{hovered:!0})}g._hasHoverEvent=!0,s.emit("plotly_hover",{points:k||[i(c,C,p.eventDataKeys)],event:y.event})}}),v.on("mouseout",function(c){var A=s._fullLayout,k=s._fullData[g.index],C=y.select(this).datum();if(g._hasHoverEvent&&(c.originalEvent=y.event,s.emit("plotly_unhover",{points:[i(C,k,p.eventDataKeys)],event:y.event}),g._hasHoverEvent=!1),g._hasHoverLabel&&(_.loneUnhover(A._hoverlayer.node()),g._hasHoverLabel=!1),w){var E=v.select("path.surface");p.styleOne(E,C,k,{hovered:!1})}}),v.on("click",function(c){var A=s._fullLayout,k=s._fullData[g.index],C=u&&(a.isHierarchyRoot(c)||a.isLeaf(c)),E=a.getPtId(c),L=a.isEntry(c)?a.findEntryWithChild(m,E):a.findEntryWithLevel(m,E),D=a.getPtId(L),N={points:[i(c,k,p.eventDataKeys)],event:y.event};C||(N.nextLevel=D);var F=o.triggerHandler(s,"plotly_"+g.type+"click",N);if(!1!==F&&A.hovermode&&(s._hoverdata=[i(c,k,p.eventDataKeys)],_.click(s,y.event)),!C&&!1!==F&&!s._dragging&&!s._transitioning){x.call("_storeDirectGUIEdit",k,A._tracePreGUI[k.uid],{level:k.level});var I={data:[{level:D}],traces:[g.index]},P={frame:{redraw:!1,duration:p.transitionTime},transition:{duration:p.transitionTime,easing:p.transitionEasing},mode:"immediate",fromcurrent:!0};_.loneUnhover(A._hoverlayer.node()),x.call("animate",s,I,P)}})}},{"../../components/fx":406,"../../components/fx/helpers":402,"../../lib":503,"../../lib/events":492,"../../registry":638,"../pie/helpers":906,"./helpers":1055,"@plotly/d3":58}],1055:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../components/color"),M=b("../../lib/setcursor"),_=b("../pie/helpers");function e(o){return o.data.data.pid}se.findEntryWithLevel=function(o,a){var l;return a&&o.eachAfter(function(i){if(se.getPtId(i)===a)return l=i.copy()}),l||o},se.findEntryWithChild=function(o,a){var l;return o.eachAfter(function(i){for(var v=i.children||[],h=0;h<v.length;h++)if(se.getPtId(v[h])===a)return l=i.copy()}),l||o},se.isEntry=function(o){return!o.parent},se.isLeaf=function(o){return!o.children},se.getPtId=function(o){return o.data.data.id},se.getPtLabel=function(o){return o.data.data.label},se.getValue=function(o){return o.value},se.isHierarchyRoot=function(o){return""===e(o)},se.setSliceCursor=function(o,a,l){var i=l.isTransitioning;if(!i){var v=o.datum();i=l.hideOnRoot&&se.isHierarchyRoot(v)||l.hideOnLeaves&&se.isLeaf(v)}M(o,i?null:"pointer")},se.getInsideTextFontKey=function(o,a,l,i,v){var s=l.data.data.i;return y.castOption(a,s,((v||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+o)||y.castOption(a,s,"textfont."+o)||i.size},se.getOutsideTextFontKey=function(o,a,l,i){var v=l.data.data.i;return y.castOption(a,v,"outsidetextfont."+o)||y.castOption(a,v,"textfont."+o)||i.size},se.isOutsideText=function(o,a){return!o._hasColorscale&&se.isHierarchyRoot(a)},se.determineTextFont=function(o,a,l,i){return se.isOutsideText(o,a)?{color:se.getOutsideTextFontKey("color",v=o,h=a,s=l),family:se.getOutsideTextFontKey("family",v,h,s),size:se.getOutsideTextFontKey("size",v,h,s)}:function(v,h,s,d){var f=h.data.data,g=f.i,m=y.castOption(v,g,((d||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!m&&v._input.textfont&&(m=y.castOption(v._input,g,"textfont.color")),{color:m||x.contrast(f.color),family:se.getInsideTextFontKey("family",v,h,s,d),size:se.getInsideTextFontKey("size",v,h,s,d)}}(o,a,l,i);var v,h,s},se.hasTransition=function(o){return!!(o&&o.duration>0)},se.getMaxDepth=function(o){return o.maxdepth>=0?o.maxdepth:1/0},se.isHeader=function(o,a){return!(se.isLeaf(o)||o.depth===a._maxDepth-1)},se.getParent=function(o,a){return se.findEntryWithLevel(o,e(a))},se.listPath=function(o,a){var l=o.parent;if(!l)return[];var i=a?[l.data[a]]:[l];return se.listPath(l,a).concat(i)},se.getPath=function(o){return se.listPath(o,"label").join("/")+"/"},se.formatValue=_.formatPieValue,se.formatPercent=function(o,a){var l=y.formatPercent(o,0);return"0%"===l&&(l=_.formatPiePercent(o,a)),l}},{"../../components/color":366,"../../lib":503,"../../lib/setcursor":524,"../pie/helpers":906}],1056:[function(b,oe,se){"use strict";oe.exports={moduleType:"trace",name:"sunburst",basePlotModule:b("./base_plot"),categories:[],animatable:!0,attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot").plot,style:b("./style").style,colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":1049,"./base_plot":1050,"./calc":1051,"./defaults":1053,"./layout_attributes":1057,"./layout_defaults":1058,"./plot":1059,"./style":1060}],1057:[function(b,oe,se){"use strict";oe.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1058:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./layout_attributes");oe.exports=function(M,_){function e(o,a){return y.coerce(M,_,x,o,a)}e("sunburstcolorway",_.colorway),e("extendsunburstcolors")}},{"../../lib":503,"./layout_attributes":1057}],1059:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("d3-hierarchy"),M=b("d3-interpolate").interpolate,_=b("../../components/drawing"),e=b("../../lib"),o=b("../../lib/svg_text_utils"),a=b("../bar/uniform_text"),l=a.recordMinTextSize,i=a.clearMinTextSize,v=b("../pie/plot"),h=b("../pie/helpers").getRotationAngle,s=v.computeTransform,d=v.transformInsideText,p=b("./style").styleOne,f=b("../bar/style").resizeText,g=b("./fx"),m=b("./constants"),u=b("./helpers");function w(A,k,C,E){var L=A._fullLayout,D=!L.uniformtext.mode&&u.hasTransition(E),N=y.select(C).selectAll("g.slice"),F=k[0],I=F.trace,j=u.findEntryWithLevel(F.hierarchy,I.level),V=u.getMaxDepth(I),Z=L._size,Y=I.domain,re=Z.h*(Y.y[1]-Y.y[0]),X=.5*Math.min(Z.w*(Y.x[1]-Y.x[0]),re),K=F.cx=Z.l+Z.w*(Y.x[1]+Y.x[0])/2,ie=F.cy=Z.t+Z.h*(1-Y.y[0])-re/2;if(!j)return N.remove();var q=null,U={};D&&N.each(function(je){U[u.getPtId(je)]={rpx0:je.rpx0,rpx1:je.rpx1,x0:je.x0,x1:je.x1,transform:je.transform},!q&&u.isEntry(je)&&(q=je)});var je,W=(je=j,x.partition().size([2*Math.PI,je.height+1])(je)).descendants(),ae=j.height+1,G=0,te=V;F.hasMultipleRoots&&u.isHierarchyRoot(j)&&(W=W.slice(1),ae-=1,G=1,te+=1),W=W.filter(function(je){return je.y1<=te});var ne=h(I.rotation);ne&&W.forEach(function(je){je.x0+=ne,je.x1+=ne});var le=Math.min(ae,V),ue=function(je){return(je-G)/le*X},pe=function(je,ye){return[je*Math.cos(ye),-je*Math.sin(ye)]},de=function(je){return e.pathAnnulus(je.rpx0,je.rpx1,je.x0,je.x1,K,ie)},_e=function(je){return K+c(je)[0]*(je.transform.rCenter||0)+(je.transform.x||0)},me=function(je){return ie+c(je)[1]*(je.transform.rCenter||0)+(je.transform.y||0)};(N=N.data(W,u.getPtId)).enter().append("g").classed("slice",!0),D?N.exit().transition().each(function(){var je=y.select(this);je.select("path.surface").transition().attrTween("d",function(ye){var Me=function(Oe){var Pe,Re=u.getPtId(Oe),Ue=U[Re],qe=U[u.getPtId(j)];if(qe){var Xe=(Oe.x1>qe.x1?2*Math.PI:0)+ne;Pe=Oe.rpx1<qe.rpx1?{x0:Oe.x0,x1:Oe.x1,rpx0:0,rpx1:0}:{x0:Xe,x1:Xe,rpx0:Oe.rpx0,rpx1:Oe.rpx1}}else{var lt,He=u.getPtId(Oe.parent);N.each(function(bt){if(u.getPtId(bt)===He)return lt=bt});var $e,et=lt.children;et.forEach(function(bt,kt){if(u.getPtId(bt)===Re)return $e=kt});var nt=et.length,ct=M(lt.x0,lt.x1);Pe={rpx0:X,rpx1:X,x0:ct($e/nt),x1:ct(($e+1)/nt)}}return M(Ue,Pe)}(ye);return function(Oe){return de(Me(Oe))}}),je.select("g.slicetext").attr("opacity",0)}).remove():N.exit().remove(),N.order();var we=null;if(D&&q){var De=u.getPtId(q);N.each(function(je){null===we&&u.getPtId(je)===De&&(we=je.x1)})}var Le=N;function Ie(je){var ye=je.parent,Me=U[u.getPtId(ye)],Oe={};if(Me){var Pe=ye.children,Re=Pe.indexOf(je),Ue=Pe.length,qe=M(Me.x0,Me.x1);Oe.x0=qe(Re/Ue),Oe.x1=qe(Re/Ue)}else Oe.x0=Oe.x1=0;return Oe}D&&(Le=Le.transition().each("end",function(){var je=y.select(this);u.setSliceCursor(je,A,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),Le.each(function(je){var Xe,ye=y.select(this),Me=e.ensureSingle(ye,"path","surface",function(Xe){Xe.style("pointer-events","all")});je.rpx0=ue(je.y0),je.rpx1=ue(je.y1),je.xmid=(je.x0+je.x1)/2,je.pxmid=pe(je.rpx1,je.xmid),je.midangle=-(je.xmid-Math.PI/2),je.startangle=-(je.x0-Math.PI/2),je.stopangle=-(je.x1-Math.PI/2),je.halfangle=.5*Math.min(e.angleDelta(je.x0,je.x1)||Math.PI,Math.PI),je.ring=1-je.rpx0/je.rpx1,je.rInscribed=0===(Xe=je).rpx0&&e.isFullCircle([Xe.x0,Xe.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(Xe.halfangle)),Xe.ring/2)),D?Me.transition().attrTween("d",function(Xe){var lt=function(He){var $e,et=U[u.getPtId(He)],nt={x0:He.x0,x1:He.x1,rpx0:He.rpx0,rpx1:He.rpx1};if(et)$e=et;else if(q)if(He.parent)if(we){var ct=(He.x1>we?2*Math.PI:0)+ne;$e={x0:ct,x1:ct}}else e.extendFlat($e={rpx0:X,rpx1:X},Ie(He));else $e={rpx0:0,rpx1:0};else $e={x0:ne,x1:ne};return M($e,nt)}(Xe);return function(He){return de(lt(He))}}):Me.attr("d",de),ye.call(g,j,A,k,{eventDataKeys:m.eventDataKeys,transitionTime:m.CLICK_TRANSITION_TIME,transitionEasing:m.CLICK_TRANSITION_EASING}).call(u.setSliceCursor,A,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:A._transitioning}),Me.call(p,je,I);var Oe=e.ensureSingle(ye,"g","slicetext"),Pe=e.ensureSingle(Oe,"text","",function(Xe){Xe.attr("data-notex",1)}),Re=e.ensureUniformFontSize(A,u.determineTextFont(I,je,L.font));Pe.text(se.formatSliceLabel(je,j,I,k,L)).classed("slicetext",!0).attr("text-anchor","middle").call(_.font,Re).call(o.convertToTspans,A);var Ue=_.bBox(Pe.node());je.transform=d(Ue,je,F),je.transform.targetX=_e(je),je.transform.targetY=me(je);var qe=function(Xe,lt){var He=Xe.transform;return s(He,lt),He.fontSize=Re.size,l(I.type,He,L),e.getTextTransform(He)};D?Pe.transition().attrTween("transform",function(Xe){var lt=function(He){var $e,et=U[u.getPtId(He)],nt=He.transform;if(et)$e=et;else if($e={rpx1:He.rpx1,transform:{textPosAngle:nt.textPosAngle,scale:0,rotate:nt.rotate,rCenter:nt.rCenter,x:nt.x,y:nt.y}},q)if(He.parent)if(we){var ct=He.x1>we?2*Math.PI:0;$e.x0=$e.x1=ct}else e.extendFlat($e,Ie(He));else $e.x0=$e.x1=ne;else $e.x0=$e.x1=ne;var bt=M($e.transform.textPosAngle,He.transform.textPosAngle),kt=M($e.rpx1,He.rpx1),Bt=M($e.x0,He.x0),Et=M($e.x1,He.x1),ht=M($e.transform.scale,nt.scale),at=M($e.transform.rotate,nt.rotate),Ft=0===nt.rCenter?3:0===$e.transform.rCenter?1/3:1,en=M($e.transform.rCenter,nt.rCenter);return function(Qt){var tn=kt(Qt),dn=Bt(Qt),Mn=Et(Qt),sn=en(Math.pow(Qt,Ft)),ke={pxmid:pe(tn,(dn+Mn)/2),rpx1:tn,transform:{textPosAngle:bt(Qt),rCenter:sn,x:nt.x,y:nt.y}};return l(I.type,nt,L),{transform:{targetX:_e(ke),targetY:me(ke),scale:ht(Qt),rotate:at(Qt),rCenter:sn}}}}(Xe);return function(He){return qe(lt(He),Ue)}}):Pe.attr("transform",qe(je,Ue))})}function c(A){return C=A.transform.textPosAngle,[(k=A.rpx1)*Math.sin(C),-k*Math.cos(C)];var k,C}se.plot=function(A,k,C,E){var L,D,N=A._fullLayout,F=N._sunburstlayer,I=!C,P=!N.uniformtext.mode&&u.hasTransition(C);i("sunburst",N),(L=F.selectAll("g.trace.sunburst").data(k,function(j){return j[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),L.order(),P?(E&&(D=E()),y.transition().duration(C.duration).ease(C.easing).each("end",function(){D&&D()}).each("interrupt",function(){D&&D()}).each(function(){F.selectAll("g.trace").each(function(j){w(A,j,this,C)})})):(L.each(function(j){w(A,j,this,C)}),N.uniformtext.mode&&f(A,N._sunburstlayer.selectAll(".trace"),"sunburst")),I&&L.exit().remove()},se.formatSliceLabel=function(A,k,C,E,L){var D=C.texttemplate,N=C.textinfo;if(!(D||N&&"none"!==N))return"";var F=L.separators,P=A.data.data,j=E[0].hierarchy,V=u.isHierarchyRoot(A),Z=u.getParent(j,A),Y=u.getValue(A);if(!D){var ee,re=N.split("+"),X=function(ne){return-1!==re.indexOf(ne)},K=[];if(X("label")&&P.label&&K.push(P.label),P.hasOwnProperty("v")&&X("value")&&K.push(u.formatValue(P.v,F)),!V){X("current path")&&K.push(u.getPath(A.data));var ie=0;X("percent parent")&&ie++,X("percent entry")&&ie++,X("percent root")&&ie++;var q=ie>1;if(ie){var U,W=function(ne){ee=u.formatPercent(U,F),q&&(ee+=" of "+ne),K.push(ee)};X("percent parent")&&!V&&(U=Y/u.getValue(Z),W("parent")),X("percent entry")&&(U=Y/u.getValue(k),W("entry")),X("percent root")&&(U=Y/u.getValue(j),W("root"))}}return X("text")&&(ee=e.castOption(C,P.i,"text"),e.isValidTextValue(ee)&&K.push(ee)),K.join("<br>")}var ae=e.castOption(C,P.i,"texttemplate");if(!ae)return"";var G={};P.label&&(G.label=P.label),P.hasOwnProperty("v")&&(G.value=P.v,G.valueLabel=u.formatValue(P.v,F)),G.currentPath=u.getPath(A.data),V||(G.percentParent=Y/u.getValue(Z),G.percentParentLabel=u.formatPercent(G.percentParent,F),G.parent=u.getPtLabel(Z)),G.percentEntry=Y/u.getValue(k),G.percentEntryLabel=u.formatPercent(G.percentEntry,F),G.entry=u.getPtLabel(k),G.percentRoot=Y/u.getValue(j),G.percentRootLabel=u.formatPercent(G.percentRoot,F),G.root=u.getPtLabel(j),P.hasOwnProperty("color")&&(G.color=P.color);var te=e.castOption(C,P.i,"text");return(e.isValidTextValue(te)||""===te)&&(G.text=te),G.customdata=e.castOption(C,P.i,"customdata"),e.texttemplateString(ae,G,L._d3locale,G,C._meta||{})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/style":662,"../bar/uniform_text":664,"../pie/helpers":906,"../pie/plot":910,"./constants":1052,"./fx":1054,"./helpers":1055,"./style":1060,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1060:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../components/color"),M=b("../../lib"),_=b("../bar/uniform_text").resizeText;function e(o,a,l){var i=a.data.data,v=!a.children,h=i.i,s=M.castOption(l,h,"marker.line.color")||x.defaultLine,d=M.castOption(l,h,"marker.line.width")||0;o.style("stroke-width",d).call(x.fill,i.color).call(x.stroke,s).style("opacity",v?l.leaf.opacity:null)}oe.exports={style:function(o){var a=o._fullLayout._sunburstlayer.selectAll(".trace");_(o,a,"sunburst"),a.each(function(l){var i=y.select(this),v=l[0].trace;i.style("opacity",v.opacity),i.selectAll("path.surface").each(function(h){y.select(this).call(e,h,v)})})},styleOne:e}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],1061:[function(b,oe,se){"use strict";var y=b("../../components/color"),x=b("../../components/colorscale/attributes"),M=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,_=b("../../plots/template_attributes").hovertemplateAttrs,e=b("../../plots/attributes"),o=b("../../lib/extend").extendFlat,a=b("../../plot_api/edit_types").overrideAll;function l(v){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:y.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:y.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var i=oe.exports=a(o({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:_(),xhoverformat:M("x"),yhoverformat:M("y"),zhoverformat:M("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},x("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:l(),y:l(),z:l()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:o({},x.zauto,{}),zmin:o({},x.zmin,{}),zmax:o({},x.zmax,{})},hoverinfo:o({},e.hoverinfo),showlegend:o({},e.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType="calc+clearAxisTypes",i.transforms=void 0},{"../../components/color":366,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633}],1062:[function(b,oe,se){"use strict";var y=b("../../components/colorscale/calc");oe.exports=function(x,M){y(x,M,M.surfacecolor?{vals:M.surfacecolor,containerStr:"",cLetter:"c"}:{vals:M.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],1063:[function(b,oe,se){"use strict";var y=b("../../../stackgl_modules").gl_surface3d,x=b("../../../stackgl_modules").ndarray,M=b("../../../stackgl_modules").ndarray_linear_interpolate.d2,_=b("../heatmap/interp2d"),e=b("../heatmap/find_empties"),o=b("../../lib").isArrayOrTypedArray,a=b("../../lib/gl_format_color").parseColorScale,l=b("../../lib/str2rgbarray"),i=b("../../components/colorscale").extractOpts;function v(C,E,L){this.scene=C,this.uid=L,this.surface=E,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var h=v.prototype;h.getXat=function(C,E,L,D){var N=o(this.data.x)?o(this.data.x[0])?this.data.x[E][C]:this.data.x[C]:C;return void 0===L?N:D.d2l(N,0,L)},h.getYat=function(C,E,L,D){var N=o(this.data.y)?o(this.data.y[0])?this.data.y[E][C]:this.data.y[E]:E;return void 0===L?N:D.d2l(N,0,L)},h.getZat=function(C,E,L,D){var N=this.data.z[E][C];return null===N&&this.data.connectgaps&&this.data._interpolatedZ&&(N=this.data._interpolatedZ[E][C]),void 0===L?N:D.d2l(N,0,L)},h.handlePick=function(C){if(C.object===this.surface){var L=(C.data.index[1]-1)/this.dataScaleY-1,D=Math.max(Math.min(Math.round((C.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),N=Math.max(Math.min(Math.round(L),this.data._ylength-1),0);C.index=[D,N],C.traceCoordinate=[this.getXat(D,N),this.getYat(D,N),this.getZat(D,N)],C.dataCoordinate=[this.getXat(D,N,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(D,N,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(D,N,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var F=0;F<3;F++)null!=C.dataCoordinate[F]&&(C.dataCoordinate[F]*=this.scene.dataScale[F]);var P=this.data.hovertext||this.data.text;return C.textLabel=Array.isArray(P)&&P[N]&&void 0!==P[N][D]?P[N][D]:P||"",C.data.dataCoordinate=C.dataCoordinate.slice(),this.surface.highlight(C.data),this.scene.glplot.spikes.position=C.dataCoordinate,!0}};var s=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function d(C,E){if(C<E)return 0;for(var L=0;0===Math.floor(C%E);)C/=E,L++;return L}function p(C){for(var E=[],L=0;L<s.length;L++)E.push(d(C,s[L]));return E}function f(C){for(var E=p(C),L=C,D=0;D<s.length;D++)if(E[D]>0){L=s[D];break}return L}function g(C,E){if(!(C<1||E<1)){for(var L=p(C),D=p(E),N=1,F=0;F<s.length;F++)N*=Math.pow(s[F],Math.max(L[F],D[F]));return N}}h.calcXnums=function(C){var E,L=[];for(E=1;E<C;E++){var D=this.getXat(E-1,0),N=this.getXat(E,0);L[E-1]=N!==D&&null!=D&&null!=N?Math.abs(N-D):0}var F=0;for(E=1;E<C;E++)F+=L[E-1];for(E=1;E<C;E++)L[E-1]=0===L[E-1]?1:Math.round(F/L[E-1]);return L},h.calcYnums=function(C){var E,L=[];for(E=1;E<C;E++){var D=this.getYat(0,E-1),N=this.getYat(0,E);L[E-1]=N!==D&&null!=D&&null!=N?Math.abs(N-D):0}var F=0;for(E=1;E<C;E++)F+=L[E-1];for(E=1;E<C;E++)L[E-1]=0===L[E-1]?1:Math.round(F/L[E-1]);return L};var m=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],u=m[9],w=m[13];function c(C,E,L){var D=L[8]+L[2]*E[0]+L[5]*E[1];return C[0]=(L[6]+L[0]*E[0]+L[3]*E[1])/D,C[1]=(L[7]+L[1]*E[0]+L[4]*E[1])/D,C}function A(C,E,L){return function(D,N,F,I){for(var P=[0,0],j=D.shape[0],V=D.shape[1],Z=0;Z<j;Z++)for(var Y=0;Y<V;Y++)F(P,[Z,Y],I),D.set(Z,Y,M(N,P[0],P[1]))}(C,E,c,L),C}function k(C,E){for(var L=!1,D=0;D<C.length;D++)if(E===C[D]){L=!0;break}!1===L&&C.push(E)}h.estimateScale=function(C,E){for(var L=1+function(N){if(0!==N.length){for(var F=1,I=0;I<N.length;I++)F=g(F,N[I]);return F}}(0===E?this.calcXnums(C):this.calcYnums(C));L<u;)L*=2;for(;L>w;)L--,L/=f(L),++L<u&&(L=w);var D=Math.round(L/C);return D>1?D:1},h.refineCoords=function(C){for(var E=this.dataScaleX,L=this.dataScaleY,D=C[0].shape[0],N=C[0].shape[1],F=0|Math.floor(C[0].shape[0]*E+1),I=0|Math.floor(C[0].shape[1]*L+1),P=1+D+1,j=1+N+1,V=x(new Float32Array(P*j),[P,j]),Z=[1/E,0,0,0,1/L,0,0,0,1],Y=0;Y<C.length;++Y){this.surface.padField(V,C[Y]);var ee=x(new Float32Array(F*I),[F,I]);A(ee,V,Z),C[Y]=ee}},h.setContourLevels=function(){var C,E,D=[[],[],[]],N=[!1,!1,!1],F=!1;for(C=0;C<3;++C)if(this.showContour[C]&&(F=!0,this.contourSize[C]>0&&null!==this.contourStart[C]&&null!==this.contourEnd[C]&&this.contourEnd[C]>this.contourStart[C]))for(N[C]=!0,E=this.contourStart[C];E<this.contourEnd[C];E+=this.contourSize[C])k(D[C],E*this.scene.dataScale[C]);if(F){var I=[[],[],[]];for(C=0;C<3;++C)this.showContour[C]&&(I[C]=N[C]?D[C]:this.scene.contourLevels[C]);this.surface.update({levels:I})}},h.update=function(C){var E,L,D,N,F=this.scene,I=F.fullSceneLayout,P=this.surface,j=a(C),V=F.dataScale,Z=C.z[0].length,Y=C._ylength,ee=F.contourLevels;this.data=C;var re=[];for(E=0;E<3;E++)for(re[E]=[],L=0;L<Z;L++)re[E][L]=[];for(L=0;L<Z;L++)for(D=0;D<Y;D++)re[0][L][D]=this.getXat(L,D,C.xcalendar,I.xaxis),re[1][L][D]=this.getYat(L,D,C.ycalendar,I.yaxis),re[2][L][D]=this.getZat(L,D,C.zcalendar,I.zaxis);if(C.connectgaps)for(C._emptypoints=e(re[2]),_(re[2],C._emptypoints),C._interpolatedZ=[],L=0;L<Z;L++)for(C._interpolatedZ[L]=[],D=0;D<Y;D++)C._interpolatedZ[L][D]=re[2][L][D];for(E=0;E<3;E++)for(L=0;L<Z;L++)for(D=0;D<Y;D++)null==(N=re[E][L][D])?re[E][L][D]=NaN:N=re[E][L][D]*=V[E];for(E=0;E<3;E++)for(L=0;L<Z;L++)for(D=0;D<Y;D++)null!=(N=re[E][L][D])&&(this.minValues[E]>N&&(this.minValues[E]=N),this.maxValues[E]<N&&(this.maxValues[E]=N));for(E=0;E<3;E++)this.objectOffset[E]=.5*(this.minValues[E]+this.maxValues[E]);for(E=0;E<3;E++)for(L=0;L<Z;L++)for(D=0;D<Y;D++)null!=(N=re[E][L][D])&&(re[E][L][D]-=this.objectOffset[E]);var X=[x(new Float32Array(Z*Y),[Z,Y]),x(new Float32Array(Z*Y),[Z,Y]),x(new Float32Array(Z*Y),[Z,Y])];for(E=0;E<3;E++)for(L=0;L<Z;L++)for(D=0;D<Y;D++)X[E].set(L,D,re[E][L][D]);re=[];var K={colormap:j,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!C.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:C.opacityscale,opacity:C.opacity},ie=i(C);if(K.intensityBounds=[ie.min,ie.max],C.surfacecolor){var q=x(new Float32Array(Z*Y),[Z,Y]);for(L=0;L<Z;L++)for(D=0;D<Y;D++)q.set(L,D,C.surfacecolor[D][L]);X.push(q)}else K.intensityBounds[0]*=V[2],K.intensityBounds[1]*=V[2];(w<X[0].shape[0]||w<X[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale(X[0].shape[0],0),this.dataScaleY=this.estimateScale(X[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords(X)),C.surfacecolor&&(K.intensity=X.pop());var G,te,ne,U=[!0,!0,!0],W=["x","y","z"];for(E=0;E<3;++E){var ae=C.contours[W[E]];U[E]=ae.highlight,K.showContour[E]=ae.show||ae.highlight,K.showContour[E]&&(K.contourProject[E]=[ae.project.x,ae.project.y,ae.project.z],ae.show?(this.showContour[E]=!0,K.levels[E]=ee[E],P.highlightColor[E]=K.contourColor[E]=l(ae.color),P.highlightTint[E]=K.contourTint[E]=ae.usecolormap?0:1,K.contourWidth[E]=ae.width,this.contourStart[E]=ae.start,this.contourEnd[E]=ae.end,this.contourSize[E]=ae.size):(this.showContour[E]=!1,this.contourStart[E]=null,this.contourEnd[E]=null,this.contourSize[E]=0),ae.highlight&&(K.dynamicColor[E]=l(ae.highlightcolor),K.dynamicWidth[E]=ae.highlightwidth))}(te=(G=j)[0].rgb)[0]===(ne=G[G.length-1].rgb)[0]&&te[1]===ne[1]&&te[2]===ne[2]&&te[3]===ne[3]&&(K.vertexColor=!0),K.objectOffset=this.objectOffset,K.coords=X,P.update(K),P.visible=C.visible,P.enableDynamic=U,P.enableHighlight=U,P.snapToData=!0,"lighting"in C&&(P.ambientLight=C.lighting.ambient,P.diffuseLight=C.lighting.diffuse,P.specularLight=C.lighting.specular,P.roughness=C.lighting.roughness,P.fresnel=C.lighting.fresnel),"lightposition"in C&&(P.lightPosition=[C.lightposition.x,C.lightposition.y,C.lightposition.z])},h.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},oe.exports=function(C,E){var D=y({gl:C.glplot.gl}),N=new v(C,D,E.uid);return D._trace=N,N.update(E),C.glplot.add(D),N}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../heatmap/find_empties":798,"../heatmap/interp2d":801}],1064:[function(b,oe,se){"use strict";var y=b("../../registry"),x=b("../../lib"),M=b("../../components/colorscale/defaults"),_=b("./attributes");function e(a,l,i,v){var h=v("opacityscale");"max"===h?l.opacityscale=[[0,.1],[1,1]]:"min"===h?l.opacityscale=[[0,1],[1,.1]]:"extremes"===h?l.opacityscale=function(s,d){for(var p=[],f=0;f<32;f++){var g=f/31,m=.1+.9*(1-Math.pow(Math.sin(1*g*Math.PI),2));p.push([g,Math.max(0,Math.min(1,m))])}return p}():function(s){var d=0;if(!Array.isArray(s)||s.length<2||!s[0]||!s[s.length-1]||0!=+s[0][0]||1!=+s[s.length-1][0])return!1;for(var p=0;p<s.length;p++){var f=s[p];if(2!==f.length||+f[0]<d)return!1;d=+f[0]}return!0}(h)||(l.opacityscale=void 0)}function o(a,l,i){l in a&&!(i in a)&&(a[i]=a[l])}oe.exports={supplyDefaults:function(a,l,i,v){var h,s;function d(k,C){return x.coerce(a,l,_,k,C)}var p=d("x"),f=d("y"),g=d("z");if(!g||!g.length||p&&p.length<1||f&&f.length<1)l.visible=!1;else{l._xlength=Array.isArray(p)&&x.isArrayOrTypedArray(p[0])?g.length:g[0].length,l._ylength=g.length,y.getComponentMethod("calendars","handleTraceDefaults")(a,l,["x","y","z"],v),d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),d("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(k){d(k)});var m=d("surfacecolor"),u=["x","y","z"];for(h=0;h<3;++h){var w="contours."+u[h],c=d(w+".show"),A=d(w+".highlight");if(c||A)for(s=0;s<3;++s)d(w+".project."+u[s]);c&&(d(w+".color"),d(w+".width"),d(w+".usecolormap")),A&&(d(w+".highlightcolor"),d(w+".highlightwidth")),d(w+".start"),d(w+".end"),d(w+".size")}m||(o(a,"zmin","cmin"),o(a,"zmax","cmax"),o(a,"zauto","cauto")),M(a,l,v,d,{prefix:"",cLetter:"c"}),e(0,l,0,d),l._length=null}},opacityscaleDefaults:e}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":1061}],1065:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:b("./calc"),plot:b("./convert"),moduleType:"trace",name:"surface",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":1061,"./calc":1062,"./convert":1063,"./defaults":1064}],1066:[function(b,oe,se){"use strict";var y=b("../../components/annotations/attributes"),x=b("../../lib/extend").extendFlat,M=b("../../plot_api/edit_types").overrideAll,_=b("../../plots/font_attributes"),e=b("../../plots/domain").attributes,o=b("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;(oe.exports=M({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:o("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:x({},y.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:x({},_({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:o("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:x({},y.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:x({},_({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":349,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585}],1067:[function(b,oe,se){"use strict";var y=b("../../plots/get_data").getModuleCalcData,x=b("./plot");se.name="table",se.plot=function(M){var _=y(M.calcdata,"table")[0];_.length&&x(M,_)},se.clean=function(M,_,e,o){var a=o._has&&o._has("table"),l=_._has&&_._has("table");a&&!l&&o._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":593,"./plot":1074}],1068:[function(b,oe,se){"use strict";var y=b("../../lib/gup").wrap;oe.exports=function(){return y({})}},{"../../lib/gup":500}],1069:[function(b,oe,se){"use strict";oe.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1070:[function(b,oe,se){"use strict";var y=b("./constants"),x=b("../../lib/extend").extendFlat,M=b("fast-isnumeric");function _(h){if(Array.isArray(h)){for(var s=0,d=0;d<h.length;d++)s=Math.max(s,_(h[d]));return s}return h}function e(h,s){return h+s}function o(h){var s,d=h.slice(),p=1/0,f=0;for(s=0;s<d.length;s++)Array.isArray(d[s])||(d[s]=[d[s]]),p=Math.min(p,d[s].length),f=Math.max(f,d[s].length);if(p!==f)for(s=0;s<d.length;s++){var g=f-d[s].length;g&&(d[s]=d[s].concat(a(g)))}return d}function a(h){for(var s=new Array(h),d=0;d<h;d++)s[d]="";return s}function l(h){return h.calcdata.columns.reduce(function(s,d){return d.xIndex<h.xIndex?s+d.columnWidth:s},0)}function i(h,s){return Object.keys(h).map(function(d){return x({},h[d],{auxiliaryBlocks:s})})}function v(h,s){for(var d,p={},f=0,g=0,m={firstRowIndex:null,lastRowIndex:null,rows:[]},u=0,w=0,c=0;c<h.length;c++)m.rows.push({rowIndex:c,rowHeight:d=h[c]}),((g+=d)>=s||c===h.length-1)&&(p[f]=m,m.key=w++,m.firstRowIndex=u,m.lastRowIndex=c,m={firstRowIndex:null,lastRowIndex:null,rows:[]},f+=g,u=c+1,g=0);return p}oe.exports=function(h,s){var d=o(s.cells.values),p=function(V){return V.slice(s.header.values.length,V.length)},f=o(s.header.values);f.length&&!f[0].length&&(f[0]=[""],f=o(f));var g=f.concat(p(d).map(function(){return a((f[0]||[""]).length)})),m=s.domain,u=Math.floor(h._fullLayout._size.w*(m.x[1]-m.x[0])),w=Math.floor(h._fullLayout._size.h*(m.y[1]-m.y[0])),c=s.header.values.length?g[0].map(function(){return s.header.height}):[y.emptyHeaderHeight],A=d.length?d[0].map(function(){return s.cells.height}):[],k=c.reduce(e,0),C=v(A,w-k+y.uplift),E=i(v(c,k),[]),L=i(C,E),D={},N=s._fullInput.columnorder.concat(p(d.map(function(V,Z){return Z}))),F=g.map(function(V,Z){var Y=Array.isArray(s.columnwidth)?s.columnwidth[Math.min(Z,s.columnwidth.length-1)]:s.columnwidth;return M(Y)?Number(Y):1}),I=F.reduce(e,0);F=F.map(function(V){return V/I*u});var P=Math.max(_(s.header.line.width),_(s.cells.line.width)),j={key:s.uid+h._context.staticPlot,translateX:m.x[0]*h._fullLayout._size.w,translateY:h._fullLayout._size.h*(1-m.y[1]),size:h._fullLayout._size,width:u,maxLineWidth:P,height:w,columnOrder:N,groupHeight:w,rowBlocks:L,headerRowBlocks:E,scrollY:0,cells:x({},s.cells,{values:d}),headerCells:x({},s.header,{values:g}),gdColumns:g.map(function(V){return V[0]}),gdColumnsOriginalOrder:g.map(function(V){return V[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:g.map(function(V,Z){return D[V]=(D[V]||0)+1,{key:V+"__"+D[V],label:V,specIndex:Z,xIndex:N[Z],xScale:l,x:void 0,calcdata:void 0,columnWidth:F[Z]}})};return j.columns.forEach(function(V){V.calcdata=j,V.x=l(V)}),j}},{"../../lib/extend":493,"./constants":1069,"fast-isnumeric":190}],1071:[function(b,oe,se){"use strict";var y=b("../../lib/extend").extendFlat;se.splitToPanels=function(x){var M=[0,0],_=y({},x,{key:"header",type:"header",page:0,prevPages:M,currentRepaint:[null,null],dragHandle:!0,values:x.calcdata.headerCells.values[x.specIndex],rowBlocks:x.calcdata.headerRowBlocks,calcdata:y({},x.calcdata,{cells:x.calcdata.headerCells})});return[y({},x,{key:"cells1",type:"cells",page:0,prevPages:M,currentRepaint:[null,null],dragHandle:!1,values:x.calcdata.cells.values[x.specIndex],rowBlocks:x.calcdata.rowBlocks}),y({},x,{key:"cells2",type:"cells",page:1,prevPages:M,currentRepaint:[null,null],dragHandle:!1,values:x.calcdata.cells.values[x.specIndex],rowBlocks:x.calcdata.rowBlocks}),_]},se.splitToCells=function(x){var _,e,o,M=[o=(e=(_=x).rowBlocks[_.page])?e.rows[0].rowIndex:0,e?o+e.rows.length:0];return(x.values||[]).slice(M[0],M[1]).map(function(_,e){return{keyWithinBlock:e+("string"==typeof _&&_.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:M[0]+e,column:x,calcdata:x.calcdata,page:x.page,rowBlocks:x.rowBlocks,value:_}})}},{"../../lib/extend":493}],1072:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./attributes"),M=b("../../plots/domain").defaults;oe.exports=function(_,e,o,a){function l(i,v){return y.coerce(_,e,x,i,v)}M(e,a,l),l("columnwidth"),l("header.values"),l("header.format"),l("header.align"),l("header.prefix"),l("header.suffix"),l("header.height"),l("header.line.width"),l("header.line.color"),l("header.fill.color"),y.coerceFont(l,"header.font",y.extendFlat({},a.font)),function(i,v){for(var s=i.header.values.length,d=(i.columnorder||[]).slice(0,s),p=d.slice().sort(function(m,u){return m-u}),f=d.map(function(m){return p.indexOf(m)}),g=f.length;g<s;g++)f.push(g);v("columnorder",f)}(e,l),l("cells.values"),l("cells.format"),l("cells.align"),l("cells.prefix"),l("cells.suffix"),l("cells.height"),l("cells.line.width"),l("cells.line.color"),l("cells.fill.color"),y.coerceFont(l,"cells.font",y.extendFlat({},a.font)),e._length=null}},{"../../lib":503,"../../plots/domain":584,"./attributes":1066}],1073:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("./calc"),plot:b("./plot"),moduleType:"trace",name:"table",basePlotModule:b("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1066,"./base_plot":1067,"./calc":1068,"./defaults":1072,"./plot":1074}],1074:[function(b,oe,se){"use strict";var y=b("./constants"),x=b("@plotly/d3"),M=b("../../lib").numberFormat,_=b("../../lib/gup"),e=b("../../components/drawing"),o=b("../../lib/svg_text_utils"),a=b("../../lib").raiseToTop,l=b("../../lib").strTranslate,i=b("../../lib").cancelTransition,v=b("./data_preparation_helper"),h=b("./data_split_helpers"),s=b("../../components/color");function d(X){return Math.ceil(X.calcdata.maxLineWidth/2)}function p(X,K){return"clip"+X._fullLayout._uid+"_scrollAreaBottomClip_"+K.key}function f(X,K){return"clip"+X._fullLayout._uid+"_columnBoundaryClippath_"+K.calcdata.key+"_"+K.specIndex}function g(X){return[].concat.apply([],X.map(function(K){return K})).map(function(K){return K.__data__})}function m(X,K,ie){var q=X.selectAll("."+y.cn.scrollbarKit).data(_.repeat,_.keyFun);q.enter().append("g").classed(y.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),q.each(function(te){var ue,ne=te.scrollbarState;ne.totalHeight=Z(ue=te.rowBlocks,ue.length-1)+(ue.length?Y(ue[ue.length-1],1/0):1),ne.scrollableAreaHeight=te.groupHeight-L(te),ne.currentlyVisibleHeight=Math.min(ne.totalHeight,ne.scrollableAreaHeight),ne.ratio=ne.currentlyVisibleHeight/ne.totalHeight,ne.barLength=Math.max(ne.ratio*ne.currentlyVisibleHeight,y.goldenRatio*y.scrollbarWidth),ne.barWiggleRoom=ne.currentlyVisibleHeight-ne.barLength,ne.wiggleRoom=Math.max(0,ne.totalHeight-ne.scrollableAreaHeight),ne.topY=0===ne.barWiggleRoom?0:te.scrollY/ne.wiggleRoom*ne.barWiggleRoom,ne.bottomY=ne.topY+ne.barLength,ne.dragMultiplier=ne.wiggleRoom/ne.barWiggleRoom}).attr("transform",function(te){return l(te.width+y.scrollbarWidth/2+y.scrollbarOffset,L(te))});var U=q.selectAll("."+y.cn.scrollbar).data(_.repeat,_.keyFun);U.enter().append("g").classed(y.cn.scrollbar,!0);var W=U.selectAll("."+y.cn.scrollbarSlider).data(_.repeat,_.keyFun);W.enter().append("g").classed(y.cn.scrollbarSlider,!0),W.attr("transform",function(te){return l(0,te.scrollbarState.topY||0)});var ae=W.selectAll("."+y.cn.scrollbarGlyph).data(_.repeat,_.keyFun);ae.enter().append("line").classed(y.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",y.scrollbarWidth).attr("stroke-linecap","round").attr("y1",y.scrollbarWidth/2),ae.attr("y2",function(te){return te.scrollbarState.barLength-y.scrollbarWidth/2}).attr("stroke-opacity",function(te){return te.columnDragInProgress||!te.scrollbarState.barWiggleRoom||ie?0:.4}),ae.transition().delay(0).duration(0),ae.transition().delay(y.scrollbarHideDelay).duration(y.scrollbarHideDuration).attr("stroke-opacity",0);var G=U.selectAll("."+y.cn.scrollbarCaptureZone).data(_.repeat,_.keyFun);G.enter().append("line").classed(y.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",y.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(te){var ne=x.event.y,le=this.getBoundingClientRect(),ue=te.scrollbarState,pe=ne-le.top,de=x.scale.linear().domain([0,ue.scrollableAreaHeight]).range([0,ue.totalHeight]).clamp(!0);ue.topY<=pe&&pe<=ue.bottomY||N(K,X,null,de(pe-ue.barLength/2))(te)}).call(x.behavior.drag().origin(function(te){return x.event.stopPropagation(),te.scrollbarState.scrollbarScrollInProgress=!0,te}).on("drag",N(K,X)).on("dragend",function(){})),G.attr("y2",function(te){return te.scrollbarState.scrollableAreaHeight}),K._context.staticPlot&&(ae.remove(),G.remove())}function u(X,K,ie,q){var G,U=function(ae){var G=ae.selectAll("."+y.cn.columnCell).data(h.splitToCells,function(te){return te.keyWithinBlock});return G.enter().append("g").classed(y.cn.columnCell,!0),G.exit().remove(),G}(((G=ie.selectAll("."+y.cn.columnCells).data(_.repeat,_.keyFun)).enter().append("g").classed(y.cn.columnCells,!0),G.exit().remove(),G));U.each(function(G,te){var ne=G.calcdata.cells.font,le=G.column.specIndex,ue={size:A(ne.size,le,te),color:A(ne.color,le,te),family:A(ne.family,le,te)};G.rowNumber=G.key,G.align=A(G.calcdata.cells.align,le,te),G.cellBorderWidth=A(G.calcdata.cells.line.width,le,te),G.font=ue}),function(ae){ae.attr("width",function(G){return G.column.columnWidth}).attr("stroke-width",function(G){return G.cellBorderWidth}).each(function(G){var te=x.select(this);s.stroke(te,A(G.calcdata.cells.line.color,G.column.specIndex,G.rowNumber)),s.fill(te,A(G.calcdata.cells.fill.color,G.column.specIndex,G.rowNumber))})}(function(ae){var G=ae.selectAll("."+y.cn.cellRect).data(_.repeat,function(te){return te.keyWithinBlock});return G.enter().append("rect").classed(y.cn.cellRect,!0),G}(U));var W=function(ae){var G=ae.selectAll("."+y.cn.cellText).data(_.repeat,function(te){return te.keyWithinBlock});return G.enter().append("text").classed(y.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){x.event.stopPropagation()}),G}(function(ae){var G=ae.selectAll("."+y.cn.cellTextHolder).data(_.repeat,function(te){return te.keyWithinBlock});return G.enter().append("g").classed(y.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),G}(U));(function(ae){ae.each(function(G){e.font(x.select(this),G.font)})})(W),w(W,K,q,X),V(U)}function w(X,K,ie,q){X.text(function(U){var W=U.column.specIndex,ae=U.rowNumber,G=U.value,te="string"==typeof G,ne=te&&G.match(/<br>/i),le=!te||ne;U.mayHaveMarkup=te&&G.match(/[<&>]/);var ue,pe="string"==typeof(ue=G)&&ue.match(y.latexCheck);U.latex=pe;var de,_e,me=pe?"":A(U.calcdata.cells.prefix,W,ae)||"",we=pe?"":A(U.calcdata.cells.suffix,W,ae)||"",De=pe?null:A(U.calcdata.cells.format,W,ae)||null,Le=me+(De?M(De)(U.value):U.value)+we;if(U.wrappingNeeded=!U.wrapped&&!le&&!pe&&(de=c(Le)),U.cellHeightMayIncrease=ne||pe||U.mayHaveMarkup||(void 0===de?c(Le):de),U.needsConvertToTspans=U.mayHaveMarkup||U.wrappingNeeded||U.latex,U.wrappingNeeded){var Ie=(" "===y.wrapSplitCharacter?Le.replace(/<a href=/gi,"<a_href="):Le).split(y.wrapSplitCharacter),je=" "===y.wrapSplitCharacter?Ie.map(function(ye){return ye.replace(/<a_href=/gi,"<a href=")}):Ie;U.fragments=je.map(function(ye){return{text:ye,width:null}}),U.fragments.push({fragment:y.wrapSpacer,width:null}),_e=je.join(y.lineBreaker)+y.lineBreaker+y.wrapSpacer}else delete U.fragments,_e=Le;return _e}).attr("dy",function(U){return U.needsConvertToTspans?0:"0.75em"}).each(function(U){var W=x.select(this);U.needsConvertToTspans?o.convertToTspans(W,q,(U.wrappingNeeded?I:P)(ie,this,K,q,U)):x.select(this.parentNode).attr("transform",function(G){return l(j(G),y.cellPad)}).attr("text-anchor",function(G){return{left:"start",center:"middle",right:"end"}[G.align]})})}function c(X){return-1!==X.indexOf(y.wrapSplitCharacter)}function A(X,K,ie){if(Array.isArray(X)){var q=X[Math.min(K,X.length-1)];return Array.isArray(q)?q[Math.min(ie,q.length-1)]:q}return X}function k(X,K,ie){X.transition().ease(y.releaseTransitionEase).duration(y.releaseTransitionDuration).attr("transform",l(K.x,ie))}function C(X){return"cells"===X.type}function E(X){return"header"===X.type}function L(X){return(X.rowBlocks.length?X.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(K,ie){return K+Y(ie,1/0)},0)}function D(X,K,ie){var q=g(K)[0];if(void 0!==q){var U=q.rowBlocks,W=q.calcdata,ae=Z(U,U.length),G=q.calcdata.groupHeight-L(q),te=W.scrollY=Math.max(0,Math.min(ae-G,W.scrollY)),ne=function(le,ue,pe){for(var de=[],_e=0,me=0;me<le.length;me++){for(var we=le[me],De=we.rows,Le=0,Ie=0;Ie<De.length;Ie++)Le+=De[Ie].rowHeight;we.allRowsHeight=Le,ue<_e+Le&&ue+pe>_e&&de.push(me),_e+=Le}return de}(U,te,G);1===ne.length&&(ne[0]===U.length-1?ne.unshift(ne[0]-1):ne.push(ne[0]+1)),ne[0]%2&&ne.reverse(),K.each(function(le,ue){le.page=ne[ue],le.scrollY=te}),K.attr("transform",function(le){var ue=Z(le.rowBlocks,le.page)-le.scrollY;return l(0,ue)}),X&&(F(X,ie,K,ne,q.prevPages,q,0),F(X,ie,K,ne,q.prevPages,q,1),m(ie,X))}}function N(X,K,ie,q){return function(U){var W=U.calcdata?U.calcdata:U,ae=K.filter(function(le){return W.key===le.key}),te=W.scrollY;W.scrollY=void 0===q?W.scrollY+(ie||W.scrollbarState.dragMultiplier)*x.event.dy:q;var ne=ae.selectAll("."+y.cn.yColumn).selectAll("."+y.cn.columnBlock).filter(C);return D(X,ne,ae),W.scrollY===te}}function F(X,K,ie,q,U,W,ae){q[ae]!==U[ae]&&(clearTimeout(W.currentRepaint[ae]),W.currentRepaint[ae]=setTimeout(function(){var G=ie.filter(function(te,ne){return ne===ae&&q[ne]!==U[ne]});u(X,K,G,ie),U[ae]=q[ae]}))}function I(X,K,ie,q){return function(){var U=x.select(K.parentNode);U.each(function(W){var ae=W.fragments;U.selectAll("tspan.line").each(function(_e,me){ae[me].width=this.getComputedTextLength()});var G,te,ne=ae[ae.length-1].width,le=ae.slice(0,-1),ue=[],pe=0,de=W.column.columnWidth-2*y.cellPad;for(W.value="";le.length;)pe+(te=(G=le.shift()).width+ne)>de&&(W.value+=ue.join(y.wrapSpacer)+y.lineBreaker,ue=[],pe=0),ue.push(G.text),pe+=te;pe&&(W.value+=ue.join(y.wrapSpacer)),W.wrapped=!0}),U.selectAll("tspan.line").remove(),w(U.select("."+y.cn.cellText),ie,X,q),x.select(K.parentNode.parentNode).call(V)}}function P(X,K,ie,q,U){return function(){if(!U.settledY){var W=x.select(K.parentNode),ae=re(U),G=U.key-ae.firstRowIndex,te=ae.rows[G].rowHeight,ne=U.cellHeightMayIncrease?K.parentNode.getBoundingClientRect().height+2*y.cellPad:te,le=Math.max(ne,te);le-ae.rows[G].rowHeight&&(ae.rows[G].rowHeight=le,X.selectAll("."+y.cn.columnCell).call(V),D(null,X.filter(C),0),m(ie,q,!0)),W.attr("transform",function(){var ue=this.parentNode.getBoundingClientRect(),pe=x.select(this.parentNode).select("."+y.cn.cellRect).node().getBoundingClientRect(),de=this.transform.baseVal.consolidate(),_e=pe.top-ue.top+(de?de.matrix.f:y.cellPad);return l(j(U,x.select(this.parentNode).select("."+y.cn.cellTextHolder).node().getBoundingClientRect().width),_e)}),U.settledY=!0}}}function j(X,K){switch(X.align){case"left":return y.cellPad;case"right":return X.column.columnWidth-(K||0)-y.cellPad;case"center":return(X.column.columnWidth-(K||0))/2;default:return y.cellPad}}function V(X){X.attr("transform",function(K){var ie=K.rowBlocks[0].auxiliaryBlocks.reduce(function(U,W){return U+Y(W,1/0)},0),q=Y(re(K),K.key);return l(0,q+ie)}).selectAll("."+y.cn.cellRect).attr("height",function(K){return(ie=re(K),q=K.key,ie.rows[q-ie.firstRowIndex]).rowHeight;var ie,q})}function Z(X,K){for(var ie=0,q=K-1;q>=0;q--)ie+=ee(X[q]);return ie}function Y(X,K){for(var ie=0,q=0;q<X.rows.length&&X.rows[q].rowIndex<K;q++)ie+=X.rows[q].rowHeight;return ie}function ee(X){var K=X.allRowsHeight;if(void 0!==K)return K;for(var ie=0,q=0;q<X.rows.length;q++)ie+=X.rows[q].rowHeight;return X.allRowsHeight=ie,ie}function re(X){return X.rowBlocks[X.page]}oe.exports=function(X,K){var ie=!X._context.staticPlot,q=X._fullLayout._paper.selectAll("."+y.cn.table).data(K.map(function(we){var De=_.unwrap(we).trace;return v(X,De)}),_.keyFun);q.exit().remove(),q.enter().append("g").classed(y.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),q.attr("width",function(we){return we.width+we.size.l+we.size.r}).attr("height",function(we){return we.height+we.size.t+we.size.b}).attr("transform",function(we){return l(we.translateX,we.translateY)});var U=q.selectAll("."+y.cn.tableControlView).data(_.repeat,_.keyFun),W=U.enter().append("g").classed(y.cn.tableControlView,!0).style("box-sizing","content-box");if(ie){var ae="onwheel"in document?"wheel":"mousewheel";W.on("mousemove",function(we){U.filter(function(De){return we===De}).call(m,X)}).on(ae,function(we){we.scrollbarState.wheeling||(we.scrollbarState.wheeling=!0,N(X,U,null,we.scrollY+x.event.deltaY)(we)||(x.event.stopPropagation(),x.event.preventDefault()),we.scrollbarState.wheeling=!1)}).call(m,X,!0)}U.attr("transform",function(we){return l(we.size.l,we.size.t)});var G=U.selectAll("."+y.cn.scrollBackground).data(_.repeat,_.keyFun);G.enter().append("rect").classed(y.cn.scrollBackground,!0).attr("fill","none"),G.attr("width",function(we){return we.width}).attr("height",function(we){return we.height}),U.each(function(we){e.setClipUrl(x.select(this),p(X,we),X)});var te=U.selectAll("."+y.cn.yColumn).data(function(we){return we.columns},_.keyFun);te.enter().append("g").classed(y.cn.yColumn,!0),te.exit().remove(),te.attr("transform",function(we){return l(we.x,0)}),ie&&te.call(x.behavior.drag().origin(function(we){return k(x.select(this),we,-y.uplift),a(this),we.calcdata.columnDragInProgress=!0,m(U.filter(function(De){return we.calcdata.key===De.key}),X),we}).on("drag",function(we){var De=x.select(this),Le=function(Ie){return(we===Ie?x.event.x:Ie.x)+Ie.columnWidth/2};we.x=Math.max(-y.overdrag,Math.min(we.calcdata.width+y.overdrag-we.columnWidth,x.event.x)),g(te).filter(function(Ie){return Ie.calcdata.key===we.calcdata.key}).sort(function(Ie,je){return Le(Ie)-Le(je)}).forEach(function(Ie,je){Ie.xIndex=je,Ie.x=we===Ie?Ie.x:Ie.xScale(Ie)}),te.filter(function(Ie){return we!==Ie}).transition().ease(y.transitionEase).duration(y.transitionDuration).attr("transform",function(Ie){return l(Ie.x,0)}),De.call(i).attr("transform",l(we.x,-y.uplift))}).on("dragend",function(we){var Ie,je,ye,Me,De=x.select(this),Le=we.calcdata;we.x=we.xScale(we),we.calcdata.columnDragInProgress=!1,k(De,we,0),Ie=X,je=Le,ye=Le.columns.map(function(Ie){return Ie.xIndex}),Me=je.gdColumnsOriginalOrder,je.gdColumns.sort(function(Oe,Pe){return ye[Me.indexOf(Oe)]-ye[Me.indexOf(Pe)]}),je.columnorder=ye,Ie.emit("plotly_restyle")})),te.each(function(we){e.setClipUrl(x.select(this),f(X,we),X)});var ne=te.selectAll("."+y.cn.columnBlock).data(h.splitToPanels,_.keyFun);ne.enter().append("g").classed(y.cn.columnBlock,!0).attr("id",function(we){return we.key}),ne.style("cursor",function(we){return we.dragHandle?"ew-resize":we.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var le=ne.filter(E),ue=ne.filter(C);ie&&ue.call(x.behavior.drag().origin(function(we){return x.event.stopPropagation(),we}).on("drag",N(X,U,-1)).on("dragend",function(){})),u(X,U,le,ne),u(X,U,ue,ne);var pe=U.selectAll("."+y.cn.scrollAreaClip).data(_.repeat,_.keyFun);pe.enter().append("clipPath").classed(y.cn.scrollAreaClip,!0).attr("id",function(we){return p(X,we)});var de=pe.selectAll("."+y.cn.scrollAreaClipRect).data(_.repeat,_.keyFun);de.enter().append("rect").classed(y.cn.scrollAreaClipRect,!0).attr("x",-y.overdrag).attr("y",-y.uplift).attr("fill","none"),de.attr("width",function(we){return we.width+2*y.overdrag}).attr("height",function(we){return we.height+y.uplift}),te.selectAll("."+y.cn.columnBoundary).data(_.repeat,_.keyFun).enter().append("g").classed(y.cn.columnBoundary,!0);var _e=te.selectAll("."+y.cn.columnBoundaryClippath).data(_.repeat,_.keyFun);_e.enter().append("clipPath").classed(y.cn.columnBoundaryClippath,!0),_e.attr("id",function(we){return f(X,we)});var me=_e.selectAll("."+y.cn.columnBoundaryRect).data(_.repeat,_.keyFun);me.enter().append("rect").classed(y.cn.columnBoundaryRect,!0).attr("fill","none"),me.attr("width",function(we){return we.columnWidth+2*d(we)}).attr("height",function(we){return we.calcdata.height+2*d(we)+y.uplift}).attr("x",function(we){return-d(we)}).attr("y",function(we){return-d(we)}),D(null,ue,U)}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"./constants":1069,"./data_preparation_helper":1070,"./data_split_helpers":1071,"@plotly/d3":58}],1075:[function(b,oe,se){"use strict";var y=b("../../plots/template_attributes").hovertemplateAttrs,x=b("../../plots/template_attributes").texttemplateAttrs,M=b("../../components/colorscale/attributes"),_=b("../../plots/domain").attributes,e=b("../pie/attributes"),o=b("../sunburst/attributes"),a=b("./constants"),l=b("../../lib/extend").extendFlat;oe.exports={labels:o.labels,parents:o.parents,values:o.values,branchvalues:o.branchvalues,count:o.count,level:o.level,maxdepth:o.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:l({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:o.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:o.marker.line,editType:"calc"},M("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:l({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:o.textinfo,texttemplate:x({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:o.hoverinfo,hovertemplate:y({},{keys:a.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:l({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:o.root,domain:_({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":901,"../sunburst/attributes":1049,"./constants":1078}],1076:[function(b,oe,se){"use strict";var y=b("../../plots/plots");se.name="treemap",se.plot=function(x,M,_,e){y.plotBasePlot(se.name,x,M,_,e)},se.clean=function(x,M,_,e){y.cleanBasePlot(se.name,x,M,_,e)}},{"../../plots/plots":619}],1077:[function(b,oe,se){"use strict";var y=b("../sunburst/calc");se.calc=function(x,M){return y.calc(x,M)},se.crossTraceCalc=function(x){return y._runCrossTraceCalc("treemap",x)}},{"../sunburst/calc":1051}],1078:[function(b,oe,se){"use strict";oe.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1079:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./attributes"),M=b("../../components/color"),_=b("../../plots/domain").defaults,e=b("../bar/defaults").handleText,o=b("../bar/constants").TEXTPAD,a=b("../../components/colorscale"),l=a.hasColorscale,i=a.handleDefaults;oe.exports=function(v,h,s,d){function p(C,E){return y.coerce(v,h,x,C,E)}var f=p("labels"),g=p("parents");if(f&&f.length&&g&&g.length){var m=p("values");p(m&&m.length?"branchvalues":"count"),p("level"),p("maxdepth"),"squarify"===p("tiling.packing")&&p("tiling.squarifyratio"),p("tiling.flip"),p("tiling.pad");var u=p("text");p("texttemplate"),h.texttemplate||p("textinfo",Array.isArray(u)?"text+label":"label"),p("hovertext"),p("hovertemplate");var w=p("pathbar.visible");e(v,h,d,p,"auto",{hasPathbar:w,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),p("textposition");var c=-1!==h.textposition.indexOf("bottom");p("marker.line.width")&&p("marker.line.color",d.paper_bgcolor);var A=p("marker.colors");(h._hasColorscale=l(v,"marker","colors")||(v.marker||{}).coloraxis)?i(v,h,d,p,{prefix:"marker.",cLetter:"c"}):p("marker.depthfade",!(A||[]).length);var k=2*h.textfont.size;p("marker.pad.t",c?k/4:k),p("marker.pad.l",k/4),p("marker.pad.r",k/4),p("marker.pad.b",c?k:k/4),h._hovered={marker:{line:{width:2,color:M.contrast(d.paper_bgcolor)}}},w&&(p("pathbar.thickness",h.pathbar.textfont.size+2*o),p("pathbar.side"),p("pathbar.edgeshape")),p("sort"),p("root.color"),_(h,d,p),h._length=null}else h.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":1075}],1080:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../sunburst/helpers"),M=b("../bar/uniform_text").clearMinTextSize,_=b("../bar/style").resizeText,e=b("./plot_one");oe.exports=function(o,a,l,i,v){var h,s,d=v.type,p=v.drawDescendants,f=o._fullLayout,g=f["_"+d+"layer"],m=!l;M(d,f),(h=g.selectAll("g.trace."+d).data(a,function(u){return u[0].trace.uid})).enter().append("g").classed("trace",!0).classed(d,!0),h.order(),!f.uniformtext.mode&&x.hasTransition(l)?(i&&(s=i()),y.transition().duration(l.duration).ease(l.easing).each("end",function(){s&&s()}).each("interrupt",function(){s&&s()}).each(function(){g.selectAll("g.trace").each(function(u){e(o,u,this,l,p)})})):(h.each(function(u){e(o,u,this,l,p)}),f.uniformtext.mode&&_(o,g.selectAll(".trace"),d)),m&&h.exit().remove()}},{"../bar/style":662,"../bar/uniform_text":664,"../sunburst/helpers":1055,"./plot_one":1089,"@plotly/d3":58}],1081:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../lib"),M=b("../../components/drawing"),_=b("../../lib/svg_text_utils"),e=b("./partition"),o=b("./style").styleOne,a=b("./constants"),l=b("../sunburst/helpers"),i=b("../sunburst/fx");oe.exports=function(v,h,s,d,p){var f=p.barDifY,g=p.width,m=p.height,u=p.viewX,w=p.viewY,c=p.pathSlice,A=p.toMoveInsideSlice,k=p.strTransform,C=p.hasTransition,E=p.handleSlicesExit,L=p.makeUpdateSliceInterpolator,D=p.makeUpdateTextInterpolator,N={},F=v._fullLayout,I=h[0],P=I.trace,j=I.hierarchy,V=g/P._entryDepth,Z=l.listPath(s.data,"id"),Y=e(j.copy(),[g,m],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(Y=Y.filter(function(re){var X=Z.indexOf(re.data.id);return-1!==X&&(re.x0=V*X,re.x1=V*(X+1),re.y0=f,re.y1=f+m,re.onPathbar=!0,!0)})).reverse(),(d=d.data(Y,l.getPtId)).enter().append("g").classed("pathbar",!0),E(d,!0,N,[g,m],c),d.order();var ee=d;C&&(ee=ee.transition().each("end",function(){var re=y.select(this);l.setSliceCursor(re,v,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),ee.each(function(re){re._x0=u(re.x0),re._x1=u(re.x1),re._y0=w(re.y0),re._y1=w(re.y1),re._hoverX=u(re.x1-Math.min(g,m)/2),re._hoverY=w(re.y1-m/2);var X=y.select(this),K=x.ensureSingle(X,"path","surface",function(W){W.style("pointer-events","all")});C?K.transition().attrTween("d",function(W){var ae=L(W,!0,N,[g,m]);return function(G){return c(ae(G))}}):K.attr("d",c),X.call(i,s,v,h,{styleOne:o,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,v,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:v._transitioning}),K.call(o,re,P,{hovered:!1}),re._text=(l.getPtLabel(re)||"").split("<br>").join(" ")||"";var ie=x.ensureSingle(X,"g","slicetext"),q=x.ensureSingle(ie,"text","",function(W){W.attr("data-notex",1)}),U=x.ensureUniformFontSize(v,l.determineTextFont(P,re,F.font,{onPathbar:!0}));q.text(re._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(M.font,U).call(_.convertToTspans,v),re.textBB=M.bBox(q.node()),re.transform=A(re,{fontSize:U.size,onPathbar:!0}),re.transform.fontSize=U.size,C?q.transition().attrTween("transform",function(W){var ae=D(W,!0,N,[g,m]);return function(G){return k(ae(G))}}):q.attr("transform",k(re))})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"./constants":1078,"./partition":1087,"./style":1090,"@plotly/d3":58}],1082:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../lib"),M=b("../../components/drawing"),_=b("../../lib/svg_text_utils"),e=b("./partition"),o=b("./style").styleOne,a=b("./constants"),l=b("../sunburst/helpers"),i=b("../sunburst/fx"),v=b("../sunburst/plot").formatSliceLabel;oe.exports=function(h,s,d,p,f){var g=f.width,m=f.height,u=f.viewX,w=f.viewY,c=f.pathSlice,A=f.toMoveInsideSlice,k=f.strTransform,C=f.hasTransition,E=f.handleSlicesExit,L=f.makeUpdateSliceInterpolator,D=f.makeUpdateTextInterpolator,N=f.prevEntry,F=h._fullLayout,I=s[0].trace,P=-1!==I.textposition.indexOf("left"),j=-1!==I.textposition.indexOf("right"),V=-1!==I.textposition.indexOf("bottom"),Z=!V&&!I.marker.pad.t||V&&!I.marker.pad.b,Y=e(d,[g,m],{packing:I.tiling.packing,squarifyratio:I.tiling.squarifyratio,flipX:I.tiling.flip.indexOf("x")>-1,flipY:I.tiling.flip.indexOf("y")>-1,pad:{inner:I.tiling.pad,top:I.marker.pad.t,left:I.marker.pad.l,right:I.marker.pad.r,bottom:I.marker.pad.b}}).descendants(),ee=1/0,re=-1/0;Y.forEach(function(U){var W=U.depth;W>=I._maxDepth?(U.x0=U.x1=(U.x0+U.x1)/2,U.y0=U.y1=(U.y0+U.y1)/2):(ee=Math.min(ee,W),re=Math.max(re,W))}),p=p.data(Y,l.getPtId),I._maxVisibleLayers=isFinite(re)?re-ee+1:0,p.enter().append("g").classed("slice",!0),E(p,!1,{},[g,m],c),p.order();var X=null;if(C&&N){var K=l.getPtId(N);p.each(function(U){null===X&&l.getPtId(U)===K&&(X={x0:U.x0,x1:U.x1,y0:U.y0,y1:U.y1})})}var ie=function(){return X||{x0:0,x1:g,y0:0,y1:m}},q=p;return C&&(q=q.transition().each("end",function(){var U=y.select(this);l.setSliceCursor(U,h,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),q.each(function(U){var W=l.isHeader(U,I);U._x0=u(U.x0),U._x1=u(U.x1),U._y0=w(U.y0),U._y1=w(U.y1),U._hoverX=u(U.x1-I.marker.pad.r),U._hoverY=w(V?U.y1-I.marker.pad.b/2:U.y0+I.marker.pad.t/2);var ae=y.select(this),G=x.ensureSingle(ae,"path","surface",function(ue){ue.style("pointer-events","all")});C?G.transition().attrTween("d",function(ue){var pe=L(ue,!1,ie(),[g,m]);return function(de){return c(pe(de))}}):G.attr("d",c),ae.call(i,d,h,s,{styleOne:o,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,h,{isTransitioning:h._transitioning}),G.call(o,U,I,{hovered:!1}),U._text=U.x0===U.x1||U.y0===U.y1?"":W?Z?"":l.getPtLabel(U)||"":v(U,d,I,s,F)||"";var te=x.ensureSingle(ae,"g","slicetext"),ne=x.ensureSingle(te,"text","",function(ue){ue.attr("data-notex",1)}),le=x.ensureUniformFontSize(h,l.determineTextFont(I,U,F.font));ne.text(U._text||" ").classed("slicetext",!0).attr("text-anchor",j?"end":P||W?"start":"middle").call(M.font,le).call(_.convertToTspans,h),U.textBB=M.bBox(ne.node()),U.transform=A(U,{fontSize:le.size,isHeader:W}),U.transform.fontSize=le.size,C?ne.transition().attrTween("transform",function(ue){var pe=D(ue,!1,ie(),[g,m]);return function(de){return k(pe(de))}}):ne.attr("transform",k(U))}),X}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1054,"../sunburst/helpers":1055,"../sunburst/plot":1059,"./constants":1078,"./partition":1087,"./style":1090,"@plotly/d3":58}],1083:[function(b,oe,se){"use strict";oe.exports=function y(x,M,_){var e;_.swapXY&&(e=x.x0,x.x0=x.y0,x.y0=e,e=x.x1,x.x1=x.y1,x.y1=e),_.flipX&&(e=x.x0,x.x0=M[0]-x.x1,x.x1=M[0]-e),_.flipY&&(e=x.y0,x.y0=M[1]-x.y1,x.y1=M[1]-e);var o=x.children;if(o)for(var a=0;a<o.length;a++)y(o[a],M,_)}},{}],1084:[function(b,oe,se){"use strict";oe.exports={moduleType:"trace",name:"treemap",basePlotModule:b("./base_plot"),categories:[],animatable:!0,attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc").calc,crossTraceCalc:b("./calc").crossTraceCalc,plot:b("./plot"),style:b("./style").style,colorbar:b("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":945,"./attributes":1075,"./base_plot":1076,"./calc":1077,"./defaults":1079,"./layout_attributes":1085,"./layout_defaults":1086,"./plot":1088,"./style":1090}],1085:[function(b,oe,se){"use strict";oe.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1086:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./layout_attributes");oe.exports=function(M,_){function e(o,a){return y.coerce(M,_,x,o,a)}e("treemapcolorway",_.colorway),e("extendtreemapcolors")}},{"../../lib":503,"./layout_attributes":1085}],1087:[function(b,oe,se){"use strict";var y=b("d3-hierarchy"),x=b("./flip_tree");oe.exports=function(M,_,e){var o,a=e.flipX,l=e.flipY,i="dice-slice"===e.packing,v=e.pad[l?"bottom":"top"],h=e.pad[a?"right":"left"],s=e.pad[a?"left":"right"],d=e.pad[l?"top":"bottom"];i&&(o=h,h=v,v=o,o=s,s=d,d=o);var p=y.treemap().tile(function(f,g){switch(f){case"squarify":return y.treemapSquarify.ratio(g);case"binary":return y.treemapBinary;case"dice":return y.treemapDice;case"slice":return y.treemapSlice;default:return y.treemapSliceDice}}(e.packing,e.squarifyratio)).paddingInner(e.pad.inner).paddingLeft(h).paddingRight(s).paddingTop(v).paddingBottom(d).size(i?[_[1],_[0]]:_)(M);return(i||a||l)&&x(p,_,{swapXY:i,flipX:a,flipY:l}),p}},{"./flip_tree":1083,"d3-hierarchy":115}],1088:[function(b,oe,se){"use strict";var y=b("./draw"),x=b("./draw_descendants");oe.exports=function(M,_,e,o){return y(M,_,e,o,{type:"treemap",drawDescendants:x})}},{"./draw":1080,"./draw_descendants":1082}],1089:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("d3-interpolate").interpolate,M=b("../sunburst/helpers"),_=b("../../lib"),e=b("../bar/constants").TEXTPAD,o=b("../bar/plot").toMoveInsideBar,a=b("../bar/uniform_text").recordMinTextSize,l=b("./constants"),i=b("./draw_ancestors");function v(h){return M.isHierarchyRoot(h)?"":M.getPtId(h)}oe.exports=function(h,s,d,p,f){var g=h._fullLayout,m=s[0],u=m.trace,w="icicle"===u.type,c=m.hierarchy,A=M.findEntryWithLevel(c,u.level),k=y.select(d),C=k.selectAll("g.pathbar"),E=k.selectAll("g.slice");if(!A)return C.remove(),void E.remove();var L=M.isHierarchyRoot(A),D=!g.uniformtext.mode&&M.hasTransition(p),N=M.getMaxDepth(u),F=g._size,I=u.domain,P=F.w*(I.x[1]-I.x[0]),j=F.h*(I.y[1]-I.y[0]),V=P,Z=u.pathbar.thickness,Y=u.marker.line.width+l.gapWithPathbar,ee=u.pathbar.visible?u.pathbar.side.indexOf("bottom")>-1?j+Y:-(Z+Y):0,re={x0:V,x1:V,y0:ee,y1:ee+Z},X=function(Re,Ue,qe){var Xe=u.tiling.pad,lt=function(nt){return nt-Xe<=Ue.x0},He=function(nt){return nt+Xe>=Ue.x1},$e=function(nt){return nt-Xe<=Ue.y0},et=function(nt){return nt+Xe>=Ue.y1};return Re.x0===Ue.x0&&Re.x1===Ue.x1&&Re.y0===Ue.y0&&Re.y1===Ue.y1?{x0:Re.x0,x1:Re.x1,y0:Re.y0,y1:Re.y1}:{x0:lt(Re.x0-Xe)?0:He(Re.x0-Xe)?qe[0]:Re.x0,x1:lt(Re.x1+Xe)?0:He(Re.x1+Xe)?qe[0]:Re.x1,y0:$e(Re.y0-Xe)?0:et(Re.y0-Xe)?qe[1]:Re.y0,y1:$e(Re.y1+Xe)?0:et(Re.y1+Xe)?qe[1]:Re.y1}},K=null,ie={},q={},U=null,W=function(Re,Ue){return Ue?ie[v(Re)]:q[v(Re)]};m.hasMultipleRoots&&L&&N++,u._maxDepth=N,u._backgroundColor=g.paper_bgcolor,u._entryDepth=A.data.depth,u._atRootLevel=L;var G=-P/2+F.l+F.w*(I.x[1]+I.x[0])/2,te=-j/2+F.t+F.h*(1-(I.y[1]+I.y[0])/2),ne=function(Re){return G+Re},le=function(Re){return te+Re},ue=le(0),pe=ne(0),de=function(Re){return pe+Re},_e=function(Re){return ue+Re};function me(Re,Ue){return Re+","+Ue}var we=de(0),De=function(Re){Re.x=Math.max(we,Re.x)},Le=u.pathbar.edgeshape,Ie=function(Re,Ue){var qe=Re.x0,Xe=Re.x1,lt=Re.y0,He=Re.y1,$e=Re.textBB,et=function(Ft){return-1!==u.textposition.indexOf(Ft)},nt=et("bottom"),ct=et("top")||Ue.isHeader&&!nt?"start":nt?"end":"middle",bt=et("right"),kt=et("left")||Ue.onPathbar?-1:bt?1:0,Bt=u[w?"tiling":"marker"].pad;if(Ue.isHeader){if((qe+=(w?Bt:Bt.l)-e)>=(Xe-=(w?Bt:Bt.r)-e)){var Et=(qe+Xe)/2;qe=Et,Xe=Et}var ht;nt?lt<(ht=He-(w?Bt:Bt.b))&&ht<He&&(lt=ht):lt<(ht=lt+(w?Bt:Bt.t))&&ht<He&&(He=ht)}var at=o(qe,Xe,lt,He,$e,{isHorizontal:!1,constrained:!0,angle:0,anchor:ct,leftToRight:kt});return at.fontSize=Ue.fontSize,at.targetX=ne(at.targetX),at.targetY=le(at.targetY),isNaN(at.targetX)||isNaN(at.targetY)?{}:(qe!==Xe&&lt!==He&&a(u.type,at,g),{scale:at.scale,rotate:at.rotate,textX:at.textX,textY:at.textY,anchorX:at.anchorX,anchorY:at.anchorY,targetX:at.targetX,targetY:at.targetY})},je=function(Re,Ue){for(var qe,Xe=0,lt=Re;!qe&&Xe<N;)Xe++,(lt=lt.parent)?qe=W(lt,Ue):Xe=N;return qe||{}},ye=function(Re,Ue,qe,Xe,lt){var He,$e=W(Re,Ue);if($e)He=$e;else if(Ue)He=re;else if(K)if(Re.parent){var et=U||qe;et&&!Ue?He=X(Re,et,Xe):_.extendFlat(He={},je(Re,Ue))}else He=_.extendFlat({},Re),w&&("h"===lt.orientation?lt.flipX?He.x0=Re.x1:He.x1=0:lt.flipY?He.y0=Re.y1:He.y1=0);else He={};return x(He,{x0:Re.x0,x1:Re.x1,y0:Re.y0,y1:Re.y1})},Me=function(Re,Ue,qe,Xe){var lt=W(Re,Ue),He={},$e=function(Re,Ue,qe,Xe){return Ue?ie[v(c)]||re:Re.data.depth-A.data.depth<N?X(Re,q[u.level]||qe,Xe):{}}(Re,Ue,qe,Xe);_.extendFlat(He,{transform:Ie({x0:$e.x0,x1:$e.x1,y0:$e.y0,y1:$e.y1,textBB:Re.textBB,_text:Re._text},{isHeader:M.isHeader(Re,u)})}),lt?He=lt:Re.parent&&_.extendFlat(He,je(Re,Ue));var et=Re.transform;return Re.x0!==Re.x1&&Re.y0!==Re.y1&&a(u.type,et,g),x(He,{transform:{scale:et.scale,rotate:et.rotate,textX:et.textX,textY:et.textY,anchorX:et.anchorX,anchorY:et.anchorY,targetX:et.targetX,targetY:et.targetY}})},Oe=function(Re,Ue,qe,Xe,lt){var He=Xe[0],$e=Xe[1];D?Re.exit().transition().each(function(){var et=y.select(this);et.select("path.surface").transition().attrTween("d",function(nt){var ct=function(bt,kt,Bt,Et){var ht,at=W(bt,kt);if(kt)ht=re;else{var Ft=W(A,kt);ht=Ft?X(bt,Ft,Et):{}}return x(at,ht)}(nt,Ue,0,[He,$e]);return function(bt){return lt(ct(bt))}}),et.select("g.slicetext").attr("opacity",0)}).remove():Re.exit().remove()},Pe=function(Re){var Ue=Re.transform;return Re.x0!==Re.x1&&Re.y0!==Re.y1&&a(u.type,Ue,g),_.getTextTransform({textX:Ue.textX,textY:Ue.textY,anchorX:Ue.anchorX,anchorY:Ue.anchorY,targetX:Ue.targetX,targetY:Ue.targetY,scale:Ue.scale,rotate:Ue.rotate})};D&&(C.each(function(Re){ie[v(Re)]={x0:Re.x0,x1:Re.x1,y0:Re.y0,y1:Re.y1},Re.transform&&(ie[v(Re)].transform={textX:Re.transform.textX,textY:Re.transform.textY,anchorX:Re.transform.anchorX,anchorY:Re.transform.anchorY,targetX:Re.transform.targetX,targetY:Re.transform.targetY,scale:Re.transform.scale,rotate:Re.transform.rotate})}),E.each(function(Re){q[v(Re)]={x0:Re.x0,x1:Re.x1,y0:Re.y0,y1:Re.y1},Re.transform&&(q[v(Re)].transform={textX:Re.transform.textX,textY:Re.transform.textY,anchorX:Re.transform.anchorX,anchorY:Re.transform.anchorY,targetX:Re.transform.targetX,targetY:Re.transform.targetY,scale:Re.transform.scale,rotate:Re.transform.rotate}),!K&&M.isEntry(Re)&&(K=Re)})),U=f(h,s,A,E,{width:P,height:j,viewX:ne,viewY:le,pathSlice:function(Re){var Ue=ne(Re.x0),qe=ne(Re.x1),Xe=le(Re.y0),lt=le(Re.y1);return qe-Ue&&lt-Xe?"M"+me(Ue,Xe+0)+"L"+me(qe-0,Xe)+"L"+me(qe,lt-0)+"L"+me(Ue+0,lt)+"Z":""},toMoveInsideSlice:Ie,prevEntry:K,makeUpdateSliceInterpolator:ye,makeUpdateTextInterpolator:Me,handleSlicesExit:Oe,hasTransition:D,strTransform:Pe}),u.pathbar.visible?i(h,s,A,C,{barDifY:ee,width:V,height:Z,viewX:de,viewY:_e,pathSlice:function(Re){var Ue=de(Math.max(Math.min(Re.x0,Re.x0),0)),qe=de(Math.min(Math.max(Re.x1,Re.x1),V)),Xe=_e(Re.y0),lt=_e(Re.y1),He=Z/2,$e={},et={};$e.x=Ue,et.x=qe,$e.y=et.y=(Xe+lt)/2;var nt={x:Ue,y:Xe},ct={x:qe,y:Xe},bt={x:qe,y:lt},kt={x:Ue,y:lt};return">"===Le?(nt.x-=He,ct.x-=He,bt.x-=He,kt.x-=He):"/"===Le?(bt.x-=He,kt.x-=He,$e.x-=He/2,et.x-=He/2):"\\"===Le?(nt.x-=He,ct.x-=He,$e.x-=He/2,et.x-=He/2):"<"===Le&&($e.x-=He,et.x-=He),De(nt),De(kt),De($e),De(ct),De(bt),De(et),"M"+me(nt.x,nt.y)+"L"+me(ct.x,ct.y)+"L"+me(et.x,et.y)+"L"+me(bt.x,bt.y)+"L"+me(kt.x,kt.y)+"L"+me($e.x,$e.y)+"Z"},toMoveInsideSlice:Ie,makeUpdateSliceInterpolator:ye,makeUpdateTextInterpolator:Me,handleSlicesExit:Oe,hasTransition:D,strTransform:Pe}):C.remove()}},{"../../lib":503,"../bar/constants":650,"../bar/plot":659,"../bar/uniform_text":664,"../sunburst/helpers":1055,"./constants":1078,"./draw_ancestors":1081,"@plotly/d3":58,"d3-interpolate":116}],1090:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../components/color"),M=b("../../lib"),_=b("../sunburst/helpers"),e=b("../bar/uniform_text").resizeText;function o(a,l,i,v){var h,s,d=(v||{}).hovered,p=l.data.data,f=p.i,g=p.color,m=_.isHierarchyRoot(l),u=1;if(d)h=i._hovered.marker.line.color,s=i._hovered.marker.line.width;else if(m&&g===i.root.color)u=100,h="rgba(0,0,0,0)",s=0;else if(h=M.castOption(i,f,"marker.line.color")||x.defaultLine,s=M.castOption(i,f,"marker.line.width")||0,!i._hasColorscale&&!l.onPathbar){var w=i.marker.depthfade;if(w){var c,A=x.combine(x.addOpacity(i._backgroundColor,.75),g);if(!0===w){var k=_.getMaxDepth(i);c=isFinite(k)?_.isLeaf(l)?0:i._maxVisibleLayers-(l.data.depth-i._entryDepth):l.data.height+1}else c=l.data.depth-i._entryDepth,i._atRootLevel||c++;if(c>0)for(var C=0;C<c;C++)g=x.combine(x.addOpacity(A,.5*C/c),g)}}a.style("stroke-width",s).call(x.fill,g).call(x.stroke,h).style("opacity",u)}oe.exports={style:function(a){var l=a._fullLayout._treemaplayer.selectAll(".trace");e(a,l,"treemap"),l.each(function(i){var v=y.select(this),h=i[0].trace;v.style("opacity",h.opacity),v.selectAll("path.surface").each(function(s){y.select(this).call(o,s,h,{hovered:!1})})})},styleOne:o}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"../sunburst/helpers":1055,"@plotly/d3":58}],1091:[function(b,oe,se){"use strict";var y=b("../box/attributes"),x=b("../../lib/extend").extendFlat,M=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat;oe.exports={y:y.y,x:y.x,x0:y.x0,y0:y.y0,xhoverformat:M("x"),yhoverformat:M("y"),name:x({},y.name,{}),orientation:x({},y.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:y.fillcolor,points:x({},y.boxpoints,{}),jitter:x({},y.jitter,{}),pointpos:x({},y.pointpos,{}),width:x({},y.width,{}),marker:y.marker,text:y.text,hovertext:y.hovertext,hovertemplate:y.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:y.offsetgroup,alignmentgroup:y.alignmentgroup,selected:y.selected,unselected:y.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673}],1092:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plots/cartesian/axes"),M=b("../box/calc"),_=b("./helpers"),e=b("../../constants/numerical").BADNUM;function o(l,i,v){var h=i.max-i.min;if(!h)return l.bandwidth?l.bandwidth:0;if(l.bandwidth)return Math.max(l.bandwidth,h/1e4);var p,s=v.length,d=y.stdev(v,s-1,i.mean);return Math.max((p=s,1.059*Math.min(d,(i.q3-i.q1)/1.349)*Math.pow(p,-.2)),h/100)}function a(l,i,v,h){var s,d=l.spanmode,p=l.span||[],g=[i.min-2*h,i.max+2*h];function m(w){var c=p[w],A="multicategory"===v.type?v.r2c(c):v.d2c(c,0,l[i.valLetter+"calendar"]);return A===e?g[w]:A}var u={type:"linear",range:s="soft"===d?g:"hard"===d?[i.min,i.max]:[m(0),m(1)]};return x.setConvert(u),u.cleanRange(),s}oe.exports=function(l,i){var v=M(l,i);if(v[0].t.empty)return v;for(var h=l._fullLayout,s=x.getFromId(l,i["h"===i.orientation?"xaxis":"yaxis"]),d=1/0,p=-1/0,f=0,g=0,m=0;m<v.length;m++){var u=v[m],w=u.pts.map(_.extractVal),c=u.bandwidth=o(i,u,w),A=u.span=a(i,u,s,c);if(u.min===u.max&&0===c)A=u.span=[u.min,u.max],u.density=[{v:1,t:A[0]}],u.bandwidth=c,f=Math.max(f,1);else{var k=A[1]-A[0],C=Math.ceil(k/(c/3)),E=k/C;if(!isFinite(E)||!isFinite(C))return y.error("Something went wrong with computing the violin span"),v[0].t.empty=!0,v;var L=_.makeKDE(u,i,w);u.density=new Array(C);for(var D=0,N=A[0];N<A[1]+E/2;D++,N+=E){var F=L(N);u.density[D]={v:F,t:N},f=Math.max(f,F)}}g=Math.max(g,w.length),d=Math.min(d,A[0]),p=Math.max(p,A[1])}var I=x.findExtremes(s,[d,p],{padded:!0});if(i._extremes[s._id]=I,i.width)v[0].t.maxKDE=f;else{var P=h._violinScaleGroupStats,j=i.scalegroup,V=P[j];V?(V.maxKDE=Math.max(V.maxKDE,f),V.maxCount=Math.max(V.maxCount,g)):P[j]={maxKDE:f,maxCount:g}}return v[0].t.labels.kde=y._(l,"kde:"),v}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../box/calc":674,"./helpers":1095}],1093:[function(b,oe,se){"use strict";var y=b("../box/cross_trace_calc").setPositionOffset,x=["v","h"];oe.exports=function(M,_){for(var e=M.calcdata,o=_.xaxis,a=_.yaxis,l=0;l<x.length;l++){for(var i=x[l],v="h"===i?a:o,h=[],s=0;s<e.length;s++){var d=e[s],f=d[0].trace;!0!==f.visible||"violin"!==f.type||d[0].t.empty||f.orientation!==i||f.xaxis!==o._id||f.yaxis!==a._id||h.push(s)}y("violin",M,h,v)}}},{"../box/cross_trace_calc":675}],1094:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../components/color"),M=b("../box/defaults"),_=b("./attributes");oe.exports=function(e,o,a,l){function i(k,C){return y.coerce(e,o,_,k,C)}function v(k,C){return y.coerce2(e,o,_,k,C)}if(M.handleSampleDefaults(e,o,i,l),!1!==o.visible){i("bandwidth"),i("side"),i("width")||(i("scalegroup",o.name),i("scalemode"));var h,s=i("span");Array.isArray(s)&&(h="manual"),i("spanmode",h);var d=i("line.color",(e.marker||{}).color||a),p=i("line.width"),f=i("fillcolor",x.addOpacity(o.line.color,.5));M.handlePointsDefaults(e,o,i,{prefix:""});var g=v("box.width"),m=v("box.fillcolor",f),u=v("box.line.color",d),w=v("box.line.width",p);i("box.visible",Boolean(g||m||u||w))||(o.box={visible:!1});var c=v("meanline.color",d),A=v("meanline.width",p);i("meanline.visible",Boolean(c||A))||(o.meanline={visible:!1})}}},{"../../components/color":366,"../../lib":503,"../box/defaults":676,"./attributes":1091}],1095:[function(b,oe,se){"use strict";var y=b("../../lib"),x=function(M){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*M*M)};se.makeKDE=function(M,_,e){var o=e.length,a=x,l=M.bandwidth,i=1/(o*l);return function(v){for(var h=0,s=0;s<o;s++)h+=a((v-e[s])/l);return i*h}},se.getPositionOnKdePath=function(M,_,e){var o,a;"h"===_.orientation?(o="y",a="x"):(o="x",a="y");var l=y.findPointOnPath(M.path,e,a,{pathLength:M.pathLength}),i=M.posCenterPx,v=l[o];return[v,"both"===_.side?2*i-v:i]},se.getKdeValue=function(M,_,e){var o=M.pts.map(se.extractVal);return se.makeKDE(M,_,o)(e)/M.posDensityScale},se.extractVal=function(M){return M.v}},{"../../lib":503}],1096:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../../plots/cartesian/axes"),M=b("../box/hover"),_=b("./helpers");oe.exports=function(e,o,a,l,i){i||(i={});var v,h,s=i.hoverLayer,d=e.cd,p=d[0].trace,f=p.hoveron,g=-1!==f.indexOf("violins"),m=-1!==f.indexOf("kde"),u=[];if(g||m){var w=M.hoverOnBoxes(e,o,a,l);if(m&&w.length>0){var c,A,k,C,E,L=e.xa,D=e.ya;"h"===p.orientation?(E=o,c="y",k=D,A="x",C=L):(E=a,c="x",k=L,A="y",C=D);var N=d[e.index];if(E>=N.span[0]&&E<=N.span[1]){var F=y.extendFlat({},e),I=C.c2p(E,!0),P=_.getKdeValue(N,p,E),j=_.getPositionOnKdePath(N,p,I),V=k._offset,Z=k._length;F[c+"0"]=j[0],F[c+"1"]=j[1],F[A+"0"]=F[A+"1"]=I,F[A+"Label"]=A+": "+x.hoverLabelText(C,E,p[A+"hoverformat"])+", "+d[0].t.labels.kde+" "+P.toFixed(3),F.spikeDistance=w[0].spikeDistance;var Y=c+"Spike";F[Y]=w[0][Y],w[0].spikeDistance=void 0,w[0][Y]=void 0,F.hovertemplate=!1,u.push(F),(h={stroke:e.color})[c+"1"]=y.constrain(V+j[0],V,V+Z),h[c+"2"]=y.constrain(V+j[1],V,V+Z),h[A+"1"]=h[A+"2"]=C._offset+I}}g&&(u=u.concat(w))}-1!==f.indexOf("points")&&(v=M.hoverOnPoints(e,o,a));var ee=s.selectAll(".violinline-"+p.uid).data(h?[0]:[]);return ee.enter().append("line").classed("violinline-"+p.uid,!0).attr("stroke-width",1.5),ee.exit().remove(),ee.attr(h),"closest"===l?v?[v]:u:(v&&u.push(v),u)}},{"../../lib":503,"../../plots/cartesian/axes":554,"../box/hover":678,"./helpers":1095}],1097:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults"),crossTraceDefaults:b("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style"),styleOnSelect:b("../scatter/style").styleOnSelect,hoverPoints:b("./hover"),selectPoints:b("../box/select"),moduleType:"trace",name:"violin",basePlotModule:b("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../box/defaults":676,"../box/select":683,"../scatter/style":951,"./attributes":1091,"./calc":1092,"./cross_trace_calc":1093,"./defaults":1094,"./hover":1096,"./layout_attributes":1098,"./layout_defaults":1099,"./plot":1100,"./style":1101}],1098:[function(b,oe,se){"use strict";var y=b("../box/layout_attributes"),x=b("../../lib").extendFlat;oe.exports={violinmode:x({},y.boxmode,{}),violingap:x({},y.boxgap,{}),violingroupgap:x({},y.boxgroupgap,{})}},{"../../lib":503,"../box/layout_attributes":680}],1099:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./layout_attributes"),M=b("../box/layout_defaults");oe.exports=function(_,e,o){M._supply(_,e,o,function(a,l){return y.coerce(_,e,x,a,l)},"violin")}},{"../../lib":503,"../box/layout_defaults":681,"./layout_attributes":1098}],1100:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../lib"),M=b("../../components/drawing"),_=b("../box/plot"),e=b("../scatter/line_points"),o=b("./helpers");oe.exports=function(a,l,i,v){var h=a._fullLayout,s=l.xaxis,d=l.yaxis;function p(f){var g=e(f,{xaxis:s,yaxis:d,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return M.smoothopen(g[0],1)}x.makeTraceGroups(v,i,"trace violins").each(function(f){var g=y.select(this),m=f[0],u=m.t,w=m.trace;if(!0!==w.visible||u.empty)g.remove();else{var c=u.bPos,A=u.bdPos,k=l[u.valLetter+"axis"],C=l[u.posLetter+"axis"],E="both"===w.side,L=E||"positive"===w.side,D=E||"negative"===w.side,N=g.selectAll("path.violin").data(x.identity);N.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),N.exit().remove(),N.each(function(ee){var re,X,K,ie,q,U,W,ae,G=y.select(this),te=ee.density,ne=te.length,le=C.c2l(ee.pos+c,!0),ue=C.l2p(le);if(w.width)re=u.maxKDE/A;else{var pe=h._violinScaleGroupStats[w.scalegroup];re="count"===w.scalemode?pe.maxKDE/A*(pe.maxCount/ee.pts.length):pe.maxKDE/A}if(L){for(W=new Array(ne),q=0;q<ne;q++)(ae=W[q]={})[u.posLetter]=le+te[q].v/re,ae[u.valLetter]=k.c2l(te[q].t,!0);X=p(W)}if(D){for(W=new Array(ne),U=0,q=ne-1;U<ne;U++,q--)(ae=W[U]={})[u.posLetter]=le-te[q].v/re,ae[u.valLetter]=k.c2l(te[q].t,!0);K=p(W)}if(E)ie=X+"L"+K.substr(1)+"Z";else{var de=[ue,k.c2p(te[0].t)],_e=[ue,k.c2p(te[ne-1].t)];"h"===w.orientation&&(de.reverse(),_e.reverse()),ie=L?"M"+de+"L"+X.substr(1)+"L"+_e:"M"+_e+"L"+K.substr(1)+"L"+de}G.attr("d",ie),ee.posCenterPx=ue,ee.posDensityScale=re*A,ee.path=G.node(),ee.pathLength=ee.path.getTotalLength()/(E?2:1)});var F,I,P,j=w.box,V=j.width,Z=(j.line||{}).width;E?(F=A*V,I=0):L?(F=[0,A*V/2],I=Z*{x:1,y:-1}[u.posLetter]):(F=[A*V/2,0],I=Z*{x:-1,y:1}[u.posLetter]),_.plotBoxAndWhiskers(g,{pos:C,val:k},w,{bPos:c,bdPos:F,bPosPxOffset:I}),_.plotBoxMean(g,{pos:C,val:k},w,{bPos:c,bdPos:F,bPosPxOffset:I}),!w.box.visible&&w.meanline.visible&&(P=x.identity);var Y=g.selectAll("path.meanline").data(P||[]);Y.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),Y.exit().remove(),Y.each(function(ee){var re=k.c2p(ee.mean,!0),X=o.getPositionOnKdePath(ee,w,re);y.select(this).attr("d","h"===w.orientation?"M"+re+","+X[0]+"V"+X[1]:"M"+X[0]+","+re+"H"+X[1])}),_.plotPoints(g,{x:s,y:d},w,u)}})}},{"../../components/drawing":388,"../../lib":503,"../box/plot":682,"../scatter/line_points":941,"./helpers":1095,"@plotly/d3":58}],1101:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../components/color"),M=b("../scatter/style").stylePoints;oe.exports=function(_){var e=y.select(_).selectAll("g.trace.violins");e.style("opacity",function(o){return o[0].trace.opacity}),e.each(function(o){var a=o[0].trace,l=y.select(this),i=a.box||{},v=i.line||{},h=a.meanline||{},s=h.width;l.selectAll("path.violin").style("stroke-width",a.line.width+"px").call(x.stroke,a.line.color).call(x.fill,a.fillcolor),l.selectAll("path.box").style("stroke-width",v.width+"px").call(x.stroke,v.color).call(x.fill,i.fillcolor);var d={"stroke-width":s+"px","stroke-dasharray":2*s+"px,"+s+"px"};l.selectAll("path.mean").style(d).call(x.stroke,h.color),l.selectAll("path.meanline").style(d).call(x.stroke,h.color),M(l,a,_)})}},{"../../components/color":366,"../scatter/style":951,"@plotly/d3":58}],1102:[function(b,oe,se){"use strict";var y=b("../../components/colorscale/attributes"),x=b("../isosurface/attributes"),M=b("../surface/attributes"),_=b("../../plots/attributes"),e=b("../../lib/extend").extendFlat,o=b("../../plot_api/edit_types").overrideAll,a=oe.exports=o(e({x:x.x,y:x.y,z:x.z,value:x.value,isomin:x.isomin,isomax:x.isomax,surface:x.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:x.slices,caps:x.caps,text:x.text,hovertext:x.hovertext,xhoverformat:x.xhoverformat,yhoverformat:x.yhoverformat,zhoverformat:x.zhoverformat,valuehoverformat:x.valuehoverformat,hovertemplate:x.hovertemplate},y("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:x.colorbar,opacity:x.opacity,opacityscale:M.opacityscale,lightposition:x.lightposition,lighting:x.lighting,flatshading:x.flatshading,contour:x.contour,hoverinfo:e({},_.hoverinfo),showlegend:e({},_.showlegend,{dflt:!1})}),"calc","nested");a.x.editType=a.y.editType=a.z.editType=a.value.editType="calc+clearAxisTypes",a.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../isosurface/attributes":862,"../surface/attributes":1061}],1103:[function(b,oe,se){"use strict";var y=b("../../../stackgl_modules").gl_mesh3d,x=b("../../lib/gl_format_color").parseColorScale,M=b("../../lib/str2rgbarray"),_=b("../../components/colorscale").extractOpts,e=b("../../plots/gl3d/zip3"),o=b("../isosurface/convert").findNearestOnAxis,a=b("../isosurface/convert").generateIsoMeshes;function l(v,h,s){this.scene=v,this.uid=s,this.mesh=h,this.name="",this.data=null,this.showContour=!1}var i=l.prototype;i.handlePick=function(v){if(v.object===this.mesh){var h=v.data.index,d=this.data._meshY[h],p=this.data._meshZ[h],f=this.data._Ys.length,g=this.data._Zs.length,m=o(this.data._meshX[h],this.data._Xs).id,u=o(d,this.data._Ys).id,w=o(p,this.data._Zs).id,c=v.index=w+g*u+g*f*m;v.traceCoordinate=[this.data._meshX[c],this.data._meshY[c],this.data._meshZ[c],this.data._value[c]];var A=this.data.hovertext||this.data.text;return Array.isArray(A)&&void 0!==A[c]?v.textLabel=A[c]:A&&(v.textLabel=A),!0}},i.update=function(v){var h=this.scene,s=h.fullSceneLayout;function d(g,m,u,w){return m.map(function(c){return g.d2l(c,0,w)*u})}this.data=a(v);var p={positions:e(d(s.xaxis,v._meshX,h.dataScale[0],v.xcalendar),d(s.yaxis,v._meshY,h.dataScale[1],v.ycalendar),d(s.zaxis,v._meshZ,h.dataScale[2],v.zcalendar)),cells:e(v._meshI,v._meshJ,v._meshK),lightPosition:[v.lightposition.x,v.lightposition.y,v.lightposition.z],ambient:v.lighting.ambient,diffuse:v.lighting.diffuse,specular:v.lighting.specular,roughness:v.lighting.roughness,fresnel:v.lighting.fresnel,vertexNormalsEpsilon:v.lighting.vertexnormalsepsilon,faceNormalsEpsilon:v.lighting.facenormalsepsilon,opacity:v.opacity,opacityscale:v.opacityscale,contourEnable:v.contour.show,contourColor:M(v.contour.color).slice(0,3),contourWidth:v.contour.width,useFacetNormals:v.flatshading},f=_(v);p.vertexIntensity=v._meshIntensity,p.vertexIntensityBounds=[f.min,f.max],p.colormap=x(v),this.mesh.update(p)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},oe.exports=function(v,h){var d=y({gl:v.glplot.gl}),p=new l(v,d,h.uid);return d._trace=p,p.update(h),v.glplot.add(d),p}},{"../../../stackgl_modules":1124,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609,"../isosurface/convert":864}],1104:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./attributes"),M=b("../isosurface/defaults").supplyIsoDefaults,_=b("../surface/defaults").opacityscaleDefaults;oe.exports=function(e,o,a,l){function i(v,h){return y.coerce(e,o,x,v,h)}M(e,o,a,l,i),_(e,o,l,i)}},{"../../lib":503,"../isosurface/defaults":865,"../surface/defaults":1064,"./attributes":1102}],1105:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),supplyDefaults:b("./defaults"),calc:b("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:b("./convert"),moduleType:"trace",name:"volume",basePlotModule:b("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"../isosurface/calc":863,"./attributes":1102,"./convert":1103,"./defaults":1104}],1106:[function(b,oe,se){"use strict";var y=b("../bar/attributes"),x=b("../scatter/attributes").line,M=b("../../plots/attributes"),_=b("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=b("../../plots/template_attributes").hovertemplateAttrs,o=b("../../plots/template_attributes").texttemplateAttrs,a=b("./constants"),l=b("../../lib/extend").extendFlat,i=b("../../components/color");function v(h){return{marker:{color:l({},y.marker.color,{arrayOk:!1,editType:"style"}),line:{color:l({},y.marker.line.color,{arrayOk:!1,editType:"style"}),width:l({},y.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}oe.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:y.x,x0:y.x0,dx:y.dx,y:y.y,y0:y.y0,dy:y.dy,xperiod:y.xperiod,yperiod:y.yperiod,xperiod0:y.xperiod0,yperiod0:y.yperiod0,xperiodalignment:y.xperiodalignment,yperiodalignment:y.yperiodalignment,xhoverformat:_("x"),yhoverformat:_("y"),hovertext:y.hovertext,hovertemplate:e({},{keys:a.eventDataKeys}),hoverinfo:l({},M.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:o({editType:"plot"},{keys:a.eventDataKeys.concat(["label"])}),text:y.text,textposition:y.textposition,insidetextanchor:y.insidetextanchor,textangle:y.textangle,textfont:y.textfont,insidetextfont:y.insidetextfont,outsidetextfont:y.outsidetextfont,constraintext:y.constraintext,cliponaxis:y.cliponaxis,orientation:y.orientation,offset:y.offset,width:y.width,increasing:v(),decreasing:v(),totals:v(),connector:{line:{color:l({},x.color,{dflt:i.defaultLine}),width:l({},x.width,{editType:"plot"}),dash:x.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:y.offsetgroup,alignmentgroup:y.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":927,"./constants":1108}],1107:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axes"),x=b("../../plots/cartesian/align_period"),M=b("../../lib").mergeArray,_=b("../scatter/calc_selection"),e=b("../../constants/numerical").BADNUM;function o(l){return"a"===l||"absolute"===l}function a(l){return"t"===l||"total"===l}oe.exports=function(l,i){var v,h,s,d,p,f,g=y.getFromId(l,i.xaxis||"x"),m=y.getFromId(l,i.yaxis||"y");"h"===i.orientation?(v=g.makeCalcdata(i,"x"),s=m.makeCalcdata(i,"y"),d=x(i,m,"y",s),p=!!i.yperiodalignment,f="y"):(v=m.makeCalcdata(i,"y"),s=g.makeCalcdata(i,"x"),d=x(i,g,"x",s),p=!!i.xperiodalignment,f="x"),h=d.vals;for(var u,w=Math.min(h.length,v.length),c=new Array(w),A=0,k=!1,C=0;C<w;C++){var E=v[C]||0,L=!1;(v[C]!==e||a(i.measure[C])||o(i.measure[C]))&&C+1<w&&(v[C+1]!==e||a(i.measure[C+1])||o(i.measure[C+1]))&&(L=!0);var D=c[C]={i:C,p:h[C],s:E,rawS:E,cNext:L};o(i.measure[C])?(A=D.s,D.isSum=!0,D.dir="totals",D.s=A):a(i.measure[C])?(D.isSum=!0,D.dir="totals",D.s=A):(D.isSum=!1,D.dir=D.rawS<0?"decreasing":"increasing",D.s=A+(u=D.s),A+=u),"totals"===D.dir&&(k=!0),p&&(c[C].orig_p=s[C],c[C][f+"End"]=d.ends[C],c[C][f+"Start"]=d.starts[C]),i.ids&&(D.id=String(i.ids[C])),D.v=(i.base||0)+A}return c.length&&(c[0].hasTotals=k),M(i.text,c,"tx"),M(i.hovertext,c,"htx"),_(c,i),c}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":929}],1108:[function(b,oe,se){"use strict";oe.exports={eventDataKeys:["initial","delta","final"]}},{}],1109:[function(b,oe,se){"use strict";var y=b("../bar/cross_trace_calc").setGroupPositions;oe.exports=function(x,M){var _,e,o=x._fullLayout,a=x._fullData,l=x.calcdata,i=M.xaxis,v=M.yaxis,h=[],s=[],d=[];for(e=0;e<a.length;e++){var p=a[e];!0===p.visible&&p.xaxis===i._id&&p.yaxis===v._id&&"waterfall"===p.type&&(_=l[e],"h"===p.orientation?d.push(_):s.push(_),h.push(_))}var f={mode:o.waterfallmode,norm:o.waterfallnorm,gap:o.waterfallgap,groupgap:o.waterfallgroupgap};for(y(x,i,v,s,f),y(x,v,i,d,f),e=0;e<h.length;e++){_=h[e];for(var g=0;g<_.length;g++){var m=_[g];!1===m.isSum&&(m.s0+=0===g?0:_[g-1].s),g+1<_.length&&(_[g].nextP0=_[g+1].p0,_[g].nextS0=_[g+1].s0)}}}},{"../bar/cross_trace_calc":651}],1110:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("../bar/defaults").handleGroupingDefaults,M=b("../bar/defaults").handleText,_=b("../scatter/xy_defaults"),e=b("../scatter/period_defaults"),o=b("./attributes"),a=b("../../components/color"),l=b("../../constants/delta.js"),i=l.INCREASING.COLOR,v=l.DECREASING.COLOR;function h(s,d,p){s(d+".marker.color",p),s(d+".marker.line.color",a.defaultLine),s(d+".marker.line.width")}oe.exports={supplyDefaults:function(s,d,p,f){function g(u,w){return y.coerce(s,d,o,u,w)}if(_(s,d,f,g)){e(s,d,f,g),g("xhoverformat"),g("yhoverformat"),g("measure"),g("orientation",d.x&&!d.y?"h":"v"),g("base"),g("offset"),g("width"),g("text"),g("hovertext"),g("hovertemplate");var m=g("textposition");M(s,d,f,g,m,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==d.textposition&&(g("texttemplate"),d.texttemplate||g("textinfo")),h(g,"increasing",i),h(g,"decreasing",v),h(g,"totals","#4499FF"),g("connector.visible")&&(g("connector.mode"),g("connector.line.width")&&(g("connector.line.color"),g("connector.line.dash")))}else d.visible=!1},crossTraceDefaults:function(s,d){var p,f;function g(u){return y.coerce(f._input,f,o,u)}if("group"===d.waterfallmode)for(var m=0;m<s.length;m++)p=(f=s[m])._input,x(p,f,d,g)}}},{"../../components/color":366,"../../constants/delta.js":473,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":947,"../scatter/xy_defaults":954,"./attributes":1106}],1111:[function(b,oe,se){"use strict";oe.exports=function(y,x){return y.x="xVal"in x?x.xVal:x.x,y.y="yVal"in x?x.yVal:x.y,"initial"in x&&(y.initial=x.initial),"delta"in x&&(y.delta=x.delta),"final"in x&&(y.final=x.final),x.xa&&(y.xaxis=x.xa),x.ya&&(y.yaxis=x.ya),y}},{}],1112:[function(b,oe,se){"use strict";var y=b("../../plots/cartesian/axes").hoverLabelText,x=b("../../components/color").opacity,M=b("../bar/hover").hoverOnBars,_=b("../../constants/delta.js"),e=_.INCREASING.SYMBOL,o=_.DECREASING.SYMBOL;oe.exports=function(a,l,i,v,h){var I,P,j,V,s=M(a,l,i,v,h);if(s){var d=s.cd,p=d[0].trace,f="h"===p.orientation,g=f?"x":"y",m=f?a.xa:a.ya,u=d[s.index],w=u.isSum?u.b+u.s:u.rawS;if(!u.isSum){s.initial=u.b+u.s-w,s.delta=w,s.final=s.initial+s.delta;var c=D(Math.abs(s.delta));s.deltaLabel=w<0?"("+c+")":c,s.finalLabel=D(s.final),s.initialLabel=D(s.initial)}var A=u.hi||p.hoverinfo,k=[];if(A&&"none"!==A&&"skip"!==A){var C="all"===A,E=A.split("+"),L=function(N){return C||-1!==E.indexOf(N)};u.isSum||(!L("final")||L(f?"x":"y")||k.push(s.finalLabel),L("delta")&&k.push(w<0?s.deltaLabel+" "+o:s.deltaLabel+" "+e),L("initial")&&k.push("Initial: "+s.initialLabel))}return k.length&&(s.extraText=k.join("<br>")),s.color=(j=(I=p[u.dir].marker).line.color,V=I.line.width,x(P=I.color)?P:x(j)&&V?j:void 0),[s]}function D(N){return y(m,N,p[g+"hoverformat"])}}},{"../../components/color":366,"../../constants/delta.js":473,"../../plots/cartesian/axes":554,"../bar/hover":655}],1113:[function(b,oe,se){"use strict";oe.exports={attributes:b("./attributes"),layoutAttributes:b("./layout_attributes"),supplyDefaults:b("./defaults").supplyDefaults,crossTraceDefaults:b("./defaults").crossTraceDefaults,supplyLayoutDefaults:b("./layout_defaults"),calc:b("./calc"),crossTraceCalc:b("./cross_trace_calc"),plot:b("./plot"),style:b("./style").style,hoverPoints:b("./hover"),eventData:b("./event_data"),selectPoints:b("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:b("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":1106,"./calc":1107,"./cross_trace_calc":1109,"./defaults":1110,"./event_data":1111,"./hover":1112,"./layout_attributes":1114,"./layout_defaults":1115,"./plot":1116,"./style":1117}],1114:[function(b,oe,se){"use strict";oe.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1115:[function(b,oe,se){"use strict";var y=b("../../lib"),x=b("./layout_attributes");oe.exports=function(M,_,e){var o=!1;function a(v,h){return y.coerce(M,_,x,v,h)}for(var l=0;l<e.length;l++){var i=e[l];if(i.visible&&"waterfall"===i.type){o=!0;break}}o&&(a("waterfallmode"),a("waterfallgap",.2),a("waterfallgroupgap"))}},{"../../lib":503,"./layout_attributes":1114}],1116:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../lib"),M=b("../../components/drawing"),_=b("../../constants/numerical").BADNUM,e=b("../bar/plot"),o=b("../bar/uniform_text").clearMinTextSize;oe.exports=function(a,l,i,v){var s,d,g,m,h=a._fullLayout;o("waterfall",h),e.plot(a,l,i,v,{mode:h.waterfallmode,norm:h.waterfallmode,gap:h.waterfallgap,groupgap:h.waterfallgroupgap}),s=a,g=(d=l).xaxis,m=d.yaxis,x.makeTraceGroups(v,i,"trace bars").each(function(u){var w=y.select(this),c=u[0].trace,A=x.ensureSingle(w,"g","lines");if(c.connector&&c.connector.visible){var k="h"===c.orientation,C=c.connector.mode,E=A.selectAll("g.line").data(x.identity);E.enter().append("g").classed("line",!0),E.exit().remove();var L=E.size();E.each(function(D,N){if(N===L-1||D.cNext){var F=(Z=g,Y=m,X=[],ie=(ee=k)?Y:Z,(re=[])[0]=(K=ee?Z:Y).c2p((V=D).s0,!0),X[0]=ie.c2p(V.p0,!0),re[1]=K.c2p(V.s1,!0),X[1]=ie.c2p(V.p1,!0),re[2]=K.c2p(V.nextS0,!0),X[2]=ie.c2p(V.nextP0,!0),ee?[re,X]:[X,re]),I=F[0],P=F[1],j="";I[0]!==_&&P[0]!==_&&I[1]!==_&&P[1]!==_&&("spanning"===C&&!D.isSum&&N>0&&(j+=k?"M"+I[0]+","+P[1]+"V"+P[0]:"M"+I[1]+","+P[0]+"H"+I[0]),"between"!==C&&(D.isSum||N<L-1)&&(j+=k?"M"+I[1]+","+P[0]+"V"+P[1]:"M"+I[0]+","+P[1]+"H"+I[1]),I[2]!==_&&P[2]!==_&&(j+=k?"M"+I[1]+","+P[1]+"V"+P[2]:"M"+I[1]+","+P[1]+"H"+I[2])),""===j&&(j="M0,0Z"),x.ensureSingle(y.select(this),"path").attr("d",j).call(M.setClipUrl,d.layerClipId,s)}var V,Z,Y,ee,re,X,K,ie})}else A.remove()})}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],1117:[function(b,oe,se){"use strict";var y=b("@plotly/d3"),x=b("../../components/drawing"),M=b("../../components/color"),_=b("../../constants/interactions").DESELECTDIM,e=b("../bar/style"),o=b("../bar/uniform_text").resizeText,a=e.styleTextPoints;oe.exports={style:function(l,i,v){var h=v||y.select(l).selectAll("g.waterfalllayer").selectAll("g.trace");o(l,h,"waterfall"),h.style("opacity",function(s){return s[0].trace.opacity}),h.each(function(s){var d=y.select(this),p=s[0].trace;d.selectAll(".point > path").each(function(f){if(!f.isBlank){var g=p[f.dir].marker;y.select(this).call(M.fill,g.color).call(M.stroke,g.line.color).call(x.dashLine,g.line.dash,g.line.width).style("opacity",p.selectedpoints&&!f.selected?_:1)}}),a(d,p,l),d.selectAll(".lines").each(function(){var f=p.connector.line;x.lineGroupStyle(y.select(this).selectAll("path"),f.width,f.color,f.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],1118:[function(b,oe,se){"use strict";var y=b("../plots/cartesian/axes"),x=b("../lib"),M=b("../plot_api/plot_schema"),_=b("./helpers").pointsAccessorFunction,e=b("../constants/numerical").BADNUM;se.moduleType="transform",se.name="aggregate";var o=se.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},a=o.aggregations;function l(s,d,p,f){if(f.enabled){for(var g=f.target,m=x.nestedProperty(d,g),u=m.get(),w=function(k,C){var L=C.d2c,D=C.c2d;switch(k.func){case"count":return i;case"first":return v;case"last":return h;case"sum":return function(N,F){for(var I=0,P=0;P<F.length;P++){var j=L(N[F[P]]);j!==e&&(I+=j)}return D(I)};case"avg":return function(N,F){for(var I=0,P=0,j=0;j<F.length;j++){var V=L(N[F[j]]);V!==e&&(I+=V,P++)}return P?D(I/P):e};case"min":return function(N,F){for(var I=1/0,P=0;P<F.length;P++){var j=L(N[F[P]]);j!==e&&(I=Math.min(I,j))}return I===1/0?e:D(I)};case"max":return function(N,F){for(var I=-1/0,P=0;P<F.length;P++){var j=L(N[F[P]]);j!==e&&(I=Math.max(I,j))}return I===-1/0?e:D(I)};case"range":return function(N,F){for(var I=1/0,P=-1/0,j=0;j<F.length;j++){var V=L(N[F[j]]);V!==e&&(I=Math.min(I,V),P=Math.max(P,V))}return P===-1/0||I===1/0?e:D(P-I)};case"change":return function(N,F){var I=L(N[F[0]]),P=L(N[F[F.length-1]]);return I===e||P===e?e:D(P-I)};case"median":return function(N,F){for(var I=[],P=0;P<F.length;P++){var j=L(N[F[P]]);j!==e&&I.push(j)}if(!I.length)return e;I.sort(x.sorterAsc);var V=(I.length-1)/2;return D((I[Math.floor(V)]+I[Math.ceil(V)])/2)};case"mode":return function(N,F){for(var I={},P=0,j=e,V=0;V<F.length;V++){var Z=L(N[F[V]]);if(Z!==e){var Y=I[Z]=(I[Z]||0)+1;Y>P&&(P=Y,j=Z)}}return P?D(j):e};case"rms":return function(N,F){for(var I=0,P=0,j=0;j<F.length;j++){var V=L(N[F[j]]);V!==e&&(I+=V*V,P++)}return P?D(Math.sqrt(I/P)):e};case"stddev":return function(N,F){var I,P=0,j=0,V=1,Z=e;for(I=0;I<F.length&&Z===e;I++)Z=L(N[F[I]]);if(Z===e)return e;for(;I<F.length;I++){var Y=L(N[F[I]]);if(Y!==e){var ee=Y-Z;P+=ee,j+=ee*ee,V++}}var re="sample"===k.funcmode?V-1:V;return re?Math.sqrt((j-P*P/V)/re):0}}}(f,y.getDataConversions(s,d,g,u)),c=new Array(p.length),A=0;A<p.length;A++)c[A]=w(u,p[A]);m.set(c),"count"===f.func&&x.pushUnique(d._arrayAttrs,g)}}function i(s,d){return d.length}function v(s,d){return s[d[0]]}function h(s,d){return s[d[d.length-1]]}se.supplyDefaults=function(s,d){var p,f={};function g(D,N){return x.coerce(s,f,o,D,N)}if(!g("enabled"))return f;var m=M.findArrayAttributes(d),u={};for(p=0;p<m.length;p++)u[m[p]]=1;var w=g("groups");if(!Array.isArray(w)){if(!u[w])return f.enabled=!1,f;u[w]=0}var c,A=s.aggregations||[],k=f.aggregations=new Array(A.length);function C(D,N){return x.coerce(A[p],c,a,D,N)}for(p=0;p<A.length;p++){c={_index:p};var E=C("target"),L=C("func");C("enabled")&&E&&(u[E]||"count"===L&&void 0===u[E])?("stddev"===L&&C("funcmode"),u[E]=0,k[p]=c):k[p]={enabled:!1,_index:p}}for(p=0;p<m.length;p++)u[m[p]]&&k.push({target:m[p],func:a.func.dflt,enabled:!0,_index:-1});return f},se.calcTransform=function(s,d,p){if(p.enabled){var f=p.groups,g=x.getTargetArray(d,{target:f});if(g){var m,u,w,A={},k={},C=[],E=_(d.transforms,p),L=g.length;for(d._length&&(L=Math.min(L,d._length)),m=0;m<L;m++)void 0===(w=A[u=g[m]])?(A[u]=C.length,C.push([m]),k[A[u]]=E(m)):(C[w].push(m),k[A[u]]=(k[A[u]]||[]).concat(E(m)));p._indexToPoints=k;var D=p.aggregations;for(m=0;m<D.length;m++)l(s,d,C,D[m]);"string"==typeof f&&l(s,d,C,{target:f,func:"first",enabled:!0}),d._length=C.length}}}},{"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plots/cartesian/axes":554,"./helpers":1121}],1119:[function(b,oe,se){"use strict";var y=b("../lib"),x=b("../registry"),M=b("../plots/cartesian/axes"),_=b("./helpers").pointsAccessorFunction,e=b("../constants/filter_ops"),o=e.COMPARISON_OPS,a=e.INTERVAL_OPS,l=e.SET_OPS;se.moduleType="transform",se.name="filter",se.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(o).concat(a).concat(l),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},se.supplyDefaults=function(i){var v={};function h(p,f){return y.coerce(i,v,se.attributes,p,f)}if(h("enabled")){var s=h("target");if(y.isArrayOrTypedArray(s)&&0===s.length)return v.enabled=!1,v;h("preservegaps"),h("operation"),h("value");var d=x.getComponentMethod("calendars","handleDefaults");d(i,v,"valuecalendar",null),d(i,v,"targetcalendar",null)}return v},se.calcTransform=function(i,v,h){if(h.enabled){var s=y.getTargetArray(v,h);if(s){var d=h.target,p=s.length;v._length&&(p=Math.min(p,v._length));var f=h.targetcalendar,g=v._arrayAttrs,m=h.preservegaps;if("string"==typeof d){var u=y.nestedProperty(v,d+"calendar").get();u&&(f=u)}var w,c,A=function(F,I,P){var j=F.operation,V=F.value,Z=Array.isArray(V);function Y(K){return-1!==K.indexOf(j)}var ee,re=function(K){return I(K,0,F.valuecalendar)},X=function(K){return I(K,0,P)};switch(Y(o)?ee=re(Z?V[0]:V):Y(a)?ee=Z?[re(V[0]),re(V[1])]:[re(V),re(V)]:Y(l)&&(ee=Z?V.map(re):[re(V)]),j){case"=":return function(K){return X(K)===ee};case"!=":return function(K){return X(K)!==ee};case"<":return function(K){return X(K)<ee};case"<=":return function(K){return X(K)<=ee};case">":return function(K){return X(K)>ee};case">=":return function(K){return X(K)>=ee};case"[]":return function(K){var ie=X(K);return ie>=ee[0]&&ie<=ee[1]};case"()":return function(K){var ie=X(K);return ie>ee[0]&&ie<ee[1]};case"[)":return function(K){var ie=X(K);return ie>=ee[0]&&ie<ee[1]};case"(]":return function(K){var ie=X(K);return ie>ee[0]&&ie<=ee[1]};case"][":return function(K){var ie=X(K);return ie<=ee[0]||ie>=ee[1]};case")(":return function(K){var ie=X(K);return ie<ee[0]||ie>ee[1]};case"](":return function(K){var ie=X(K);return ie<=ee[0]||ie>ee[1]};case")[":return function(K){var ie=X(K);return ie<ee[0]||ie>=ee[1]};case"{}":return function(K){return-1!==ee.indexOf(X(K))};case"}{":return function(K){return-1===ee.indexOf(X(K))}}}(h,M.getDataToCoordFunc(i,v,d,s),f),k={},C={},E=0;m?(w=function(F){k[F.astr]=y.extendDeep([],F.get()),F.set(new Array(p))},c=function(F,I){var P=k[F.astr][I];F.get()[I]=P}):(w=function(F){k[F.astr]=y.extendDeep([],F.get()),F.set([])},c=function(F,I){var P=k[F.astr][I];F.get().push(P)}),N(w);for(var L=_(v.transforms,h),D=0;D<p;D++)A(s[D])?(N(c,D),C[E++]=L(D)):m&&E++;h._indexToPoints=C,v._length=E}}function N(F,I){for(var P=0;P<g.length;P++)F(y.nestedProperty(v,g[P]),I)}}},{"../constants/filter_ops":475,"../lib":503,"../plots/cartesian/axes":554,"../registry":638,"./helpers":1121}],1120:[function(b,oe,se){"use strict";var y=b("../lib"),x=b("../plot_api/plot_schema"),M=b("../plots/plots"),_=b("./helpers").pointsAccessorFunction;function e(o,a){var l,i,v,h,s,d,p,f,g,m,u=a.transform,w=a.transformIndex,c=o.transforms[w].groups,A=_(o.transforms,u);if(!y.isArrayOrTypedArray(c)||0===c.length)return[o];var k=y.filterUnique(c),C=new Array(k.length),E=c.length,L=x.findArrayAttributes(o),D=u.styles||[],N={};for(l=0;l<D.length;l++)N[D[l].target]=D[l].value;u.styles&&(m=y.keyedContainer(u,"styles","target","value.name"));var F={},I={};for(l=0;l<k.length;l++){F[d=k[l]]=l,I[d]=0,(p=C[l]=y.extendDeepNoArrays({},o))._group=d,p.transforms[w]._indexToPoints={};var P=null;for(m&&(P=m.get(d)),p.name=P||""===P?P:y.templateString(u.nameformat,{trace:o.name,group:d}),f=p.transforms,p.transforms=[],i=0;i<f.length;i++)p.transforms[i]=y.extendDeepNoArrays({},f[i]);for(i=0;i<L.length;i++)y.nestedProperty(p,L[i]).set([])}for(v=0;v<L.length;v++){for(h=L[v],i=0,g=[];i<k.length;i++)g[i]=y.nestedProperty(C[i],h).get();for(s=y.nestedProperty(o,h).get(),i=0;i<E;i++)g[F[c[i]]].push(s[i])}for(i=0;i<E;i++)(p=C[F[c[i]]]).transforms[w]._indexToPoints[I[c[i]]]=A(i),I[c[i]]++;for(l=0;l<k.length;l++)d=k[l],M.clearExpandedTraceDefaultColors(p=C[l]),p=y.extendDeepNoArrays(p,N[d]||{});return C}se.moduleType="transform",se.name="groupby",se.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},se.supplyDefaults=function(o,a,l){var i,v={};function h(g,m){return y.coerce(o,v,se.attributes,g,m)}if(!h("enabled"))return v;h("groups"),h("nameformat",l._dataLength>1?"%{group} (%{trace})":"%{group}");var s=o.styles,d=v.styles=[];if(s)for(i=0;i<s.length;i++){var p=d[i]={};y.coerce(s[i],d[i],se.attributes.styles,"target");var f=y.coerce(s[i],d[i],se.attributes.styles,"value");y.isPlainObject(f)?p.value=y.extendDeep({},f):f&&delete p.value}return v},se.transform=function(o,a){var l,i,v,h=[];for(i=0;i<o.length;i++)for(l=e(o[i],a),v=0;v<l.length;v++)h.push(l[v]);return h}},{"../lib":503,"../plot_api/plot_schema":542,"../plots/plots":619,"./helpers":1121}],1121:[function(b,oe,se){"use strict";se.pointsAccessorFunction=function(y,x){for(var M,_,e=0;e<y.length&&(M=y[e])!==x;e++)M._indexToPoints&&!1!==M.enabled&&(_=M._indexToPoints);return _?function(o){return _[o]}:function(o){return[o]}}},{}],1122:[function(b,oe,se){"use strict";var y=b("../lib"),x=b("../plots/cartesian/axes"),M=b("./helpers").pointsAccessorFunction,_=b("../constants/numerical").BADNUM;se.moduleType="transform",se.name="sort",se.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},se.supplyDefaults=function(e){var o={};function a(l,i){return y.coerce(e,o,se.attributes,l,i)}return a("enabled")&&(a("target"),a("order")),o},se.calcTransform=function(e,o,a){if(a.enabled){var l=y.getTargetArray(o,a);if(l){var i=a.target,v=l.length;o._length&&(v=Math.min(v,o._length));var h,s,d=o._arrayAttrs,p=function(c,A,k,C){var E,L=new Array(C),D=new Array(C);for(E=0;E<C;E++)L[E]={v:A[E],i:E};for(L.sort(function(N,F){switch(N.order){case"ascending":return function(I,P){var j=F(I.v),V=F(P.v);return j===_?1:V===_?-1:j-V};case"descending":return function(I,P){var j=F(I.v),V=F(P.v);return j===_?1:V===_?-1:V-j}}}(c,k)),E=0;E<C;E++)D[E]=L[E].i;return D}(a,l,x.getDataToCoordFunc(e,o,i,l),v),f=M(o.transforms,a),g={};for(h=0;h<d.length;h++){var m=y.nestedProperty(o,d[h]),u=m.get(),w=new Array(v);for(s=0;s<v;s++)w[s]=u[p[s]];m.set(w)}for(s=0;s<v;s++)g[s]=f(p[s]);a._indexToPoints=g,o._length=v}}}},{"../constants/numerical":479,"../lib":503,"../plots/cartesian/axes":554,"./helpers":1121}],1123:[function(b,oe,se){"use strict";se.version="2.12.0"},{}],1124:[function(b,oe,se){(function(y){(function(){!function(x){"object"==typeof se&&void 0!==oe?oe.exports=x():("undefined"!=typeof window?window:void 0!==y?y:"undefined"!=typeof self?self:this).stackgl=x()}(function(){return function x(M,_,e){function o(i,v){if(!_[i]){if(!M[i]){var h="function"==typeof b&&b;if(!v&&h)return h(i,!0);if(a)return a(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var d=_[i]={exports:{}};M[i][0].call(d.exports,function(p){return o(M[i][1][p]||p)},d,d.exports,x,M,_,e)}return _[i].exports}for(var a="function"==typeof b&&b,l=0;l<e.length;l++)o(e[l]);return o}({1:[function(x,M,_){"use strict";_.byteLength=function(d){var p=h(d),g=p[1];return 3*(p[0]+g)/4-g},_.toByteArray=function(d){var p,f,E,g=h(d),m=g[0],u=g[1],w=new a(3*(m+(E=u))/4-E),c=0,A=u>0?m-4:m;for(f=0;f<A;f+=4)p=o[d.charCodeAt(f)]<<18|o[d.charCodeAt(f+1)]<<12|o[d.charCodeAt(f+2)]<<6|o[d.charCodeAt(f+3)],w[c++]=p>>16&255,w[c++]=p>>8&255,w[c++]=255&p;return 2===u&&(p=o[d.charCodeAt(f)]<<2|o[d.charCodeAt(f+1)]>>4,w[c++]=255&p),1===u&&(p=o[d.charCodeAt(f)]<<10|o[d.charCodeAt(f+1)]<<4|o[d.charCodeAt(f+2)]>>2,w[c++]=p>>8&255,w[c++]=255&p),w},_.fromByteArray=function(d){for(var p,f=d.length,g=f%3,m=[],u=0,w=f-g;u<w;u+=16383)m.push(s(d,u,u+16383>w?w:u+16383));return 1===g?m.push(e[(p=d[f-1])>>2]+e[p<<4&63]+"=="):2===g&&m.push(e[(p=(d[f-2]<<8)+d[f-1])>>10]+e[p>>4&63]+e[p<<2&63]+"="),m.join("")};for(var e=[],o=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,v=l.length;i<v;++i)e[i]=l[i],o[l.charCodeAt(i)]=i;function h(d){var p=d.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=d.indexOf("=");return-1===f&&(f=p),[f,f===p?0:4-f%4]}function s(d,p,f){for(var m,u=[],w=p;w<f;w+=3)u.push(e[(m=(d[w]<<16&16711680)+(d[w+1]<<8&65280)+(255&d[w+2]))>>18&63]+e[m>>12&63]+e[m>>6&63]+e[63&m]);return u.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},{}],2:[function(x,M,_){},{}],3:[function(x,M,_){(function(e){(function(){"use strict";var o=x("base64-js"),a=x("ieee754");function l(G){if(G>2147483647)throw new RangeError('The value "'+G+'" is invalid for option "size"');var te=new Uint8Array(G);return te.__proto__=i.prototype,te}function i(G,te,ne){if("number"==typeof G){if("string"==typeof te)throw new TypeError('The "string" argument must be of type string. Received type number');return s(G)}return v(G,te,ne)}function v(G,te,ne){if("string"==typeof G)return function(pe,de){if("string"==typeof de&&""!==de||(de="utf8"),!i.isEncoding(de))throw new TypeError("Unknown encoding: "+de);var _e=0|f(pe,de),me=l(_e),we=me.write(pe,de);return we!==_e&&(me=me.slice(0,we)),me}(G,te);if(ArrayBuffer.isView(G))return d(G);if(null==G)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G);if(W(G,ArrayBuffer)||G&&W(G.buffer,ArrayBuffer))return function(pe,de,_e){if(de<0||pe.byteLength<de)throw new RangeError('"offset" is outside of buffer bounds');if(pe.byteLength<de+(_e||0))throw new RangeError('"length" is outside of buffer bounds');var me;return(me=void 0===de&&void 0===_e?new Uint8Array(pe):void 0===_e?new Uint8Array(pe,de):new Uint8Array(pe,de,_e)).__proto__=i.prototype,me}(G,te,ne);if("number"==typeof G)throw new TypeError('The "value" argument must not be of type number. Received type number');var le=G.valueOf&&G.valueOf();if(null!=le&&le!==G)return i.from(le,te,ne);var ue=function(pe){if(i.isBuffer(pe)){var de=0|p(pe.length),_e=l(de);return 0===_e.length||pe.copy(_e,0,0,de),_e}return void 0!==pe.length?"number"!=typeof pe.length||ae(pe.length)?l(0):d(pe):"Buffer"===pe.type&&Array.isArray(pe.data)?d(pe.data):void 0}(G);if(ue)return ue;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof G[Symbol.toPrimitive])return i.from(G[Symbol.toPrimitive]("string"),te,ne);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof G)}function h(G){if("number"!=typeof G)throw new TypeError('"size" argument must be of type number');if(G<0)throw new RangeError('The value "'+G+'" is invalid for option "size"')}function s(G){return h(G),l(G<0?0:0|p(G))}function d(G){for(var te=G.length<0?0:0|p(G.length),ne=l(te),le=0;le<te;le+=1)ne[le]=255&G[le];return ne}function p(G){if(G>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|G}function f(G,te){if(i.isBuffer(G))return G.length;if(ArrayBuffer.isView(G)||W(G,ArrayBuffer))return G.byteLength;if("string"!=typeof G)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof G);var ne=G.length,le=arguments.length>2&&!0===arguments[2];if(!le&&0===ne)return 0;for(var ue=!1;;)switch(te){case"ascii":case"latin1":case"binary":return ne;case"utf8":case"utf-8":return ie(G).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ne;case"hex":return ne>>>1;case"base64":return q(G).length;default:if(ue)return le?-1:ie(G).length;te=(""+te).toLowerCase(),ue=!0}}function g(G,te,ne){var le=!1;if((void 0===te||te<0)&&(te=0),te>this.length||((void 0===ne||ne>this.length)&&(ne=this.length),ne<=0)||(ne>>>=0)<=(te>>>=0))return"";for(G||(G="utf8");;)switch(G){case"hex":return P(this,te,ne);case"utf8":case"utf-8":return N(this,te,ne);case"ascii":return F(this,te,ne);case"latin1":case"binary":return I(this,te,ne);case"base64":return D(this,te,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,te,ne);default:if(le)throw new TypeError("Unknown encoding: "+G);G=(G+"").toLowerCase(),le=!0}}function m(G,te,ne){var le=G[te];G[te]=G[ne],G[ne]=le}function u(G,te,ne,le,ue){if(0===G.length)return-1;if("string"==typeof ne?(le=ne,ne=0):ne>2147483647?ne=2147483647:ne<-2147483648&&(ne=-2147483648),ae(ne=+ne)&&(ne=ue?0:G.length-1),ne<0&&(ne=G.length+ne),ne>=G.length){if(ue)return-1;ne=G.length-1}else if(ne<0){if(!ue)return-1;ne=0}if("string"==typeof te&&(te=i.from(te,le)),i.isBuffer(te))return 0===te.length?-1:w(G,te,ne,le,ue);if("number"==typeof te)return te&=255,"function"==typeof Uint8Array.prototype.indexOf?ue?Uint8Array.prototype.indexOf.call(G,te,ne):Uint8Array.prototype.lastIndexOf.call(G,te,ne):w(G,[te],ne,le,ue);throw new TypeError("val must be string, number or Buffer")}function w(G,te,ne,le,ue){var pe,de=1,_e=G.length,me=te.length;if(void 0!==le&&("ucs2"===(le=String(le).toLowerCase())||"ucs-2"===le||"utf16le"===le||"utf-16le"===le)){if(G.length<2||te.length<2)return-1;de=2,_e/=2,me/=2,ne/=2}function we(je,ye){return 1===de?je[ye]:je.readUInt16BE(ye*de)}if(ue){var De=-1;for(pe=ne;pe<_e;pe++)if(we(G,pe)===we(te,-1===De?0:pe-De)){if(-1===De&&(De=pe),pe-De+1===me)return De*de}else-1!==De&&(pe-=pe-De),De=-1}else for(ne+me>_e&&(ne=_e-me),pe=ne;pe>=0;pe--){for(var Le=!0,Ie=0;Ie<me;Ie++)if(we(G,pe+Ie)!==we(te,Ie)){Le=!1;break}if(Le)return pe}return-1}function c(G,te,ne,le){ne=Number(ne)||0;var ue=G.length-ne;le?(le=Number(le))>ue&&(le=ue):le=ue;var pe=te.length;le>pe/2&&(le=pe/2);for(var de=0;de<le;++de){var _e=parseInt(te.substr(2*de,2),16);if(ae(_e))return de;G[ne+de]=_e}return de}function A(G,te,ne,le){return U(ie(te,G.length-ne),G,ne,le)}function k(G,te,ne,le){return U(function(ue){for(var pe=[],de=0;de<ue.length;++de)pe.push(255&ue.charCodeAt(de));return pe}(te),G,ne,le)}function C(G,te,ne,le){return k(G,te,ne,le)}function E(G,te,ne,le){return U(q(te),G,ne,le)}function L(G,te,ne,le){return U(function(ue,pe){for(var de,_e,we=[],De=0;De<ue.length&&!((pe-=2)<0);++De)_e=(de=ue.charCodeAt(De))>>8,we.push(de%256),we.push(_e);return we}(te,G.length-ne),G,ne,le)}function D(G,te,ne){return o.fromByteArray(0===te&&ne===G.length?G:G.slice(te,ne))}function N(G,te,ne){ne=Math.min(G.length,ne);for(var le=[],ue=te;ue<ne;){var pe,de,_e,me,we=G[ue],De=null,Le=we>239?4:we>223?3:we>191?2:1;if(ue+Le<=ne)switch(Le){case 1:we<128&&(De=we);break;case 2:128==(192&(pe=G[ue+1]))&&(me=(31&we)<<6|63&pe)>127&&(De=me);break;case 3:de=G[ue+2],128==(192&(pe=G[ue+1]))&&128==(192&de)&&(me=(15&we)<<12|(63&pe)<<6|63&de)>2047&&(me<55296||me>57343)&&(De=me);break;case 4:de=G[ue+2],_e=G[ue+3],128==(192&(pe=G[ue+1]))&&128==(192&de)&&128==(192&_e)&&(me=(15&we)<<18|(63&pe)<<12|(63&de)<<6|63&_e)>65535&&me<1114112&&(De=me)}null===De?(De=65533,Le=1):De>65535&&(le.push((De-=65536)>>>10&1023|55296),De=56320|1023&De),le.push(De),ue+=Le}return function(Ie){var je=Ie.length;if(je<=4096)return String.fromCharCode.apply(String,Ie);for(var ye="",Me=0;Me<je;)ye+=String.fromCharCode.apply(String,Ie.slice(Me,Me+=4096));return ye}(le)}function F(G,te,ne){var le="";ne=Math.min(G.length,ne);for(var ue=te;ue<ne;++ue)le+=String.fromCharCode(127&G[ue]);return le}function I(G,te,ne){var le="";ne=Math.min(G.length,ne);for(var ue=te;ue<ne;++ue)le+=String.fromCharCode(G[ue]);return le}function P(G,te,ne){var le=G.length;(!te||te<0)&&(te=0),(!ne||ne<0||ne>le)&&(ne=le);for(var ue="",pe=te;pe<ne;++pe)ue+=K(G[pe]);return ue}function j(G,te,ne){for(var le=G.slice(te,ne),ue="",pe=0;pe<le.length;pe+=2)ue+=String.fromCharCode(le[pe]+256*le[pe+1]);return ue}function V(G,te,ne){if(G%1!=0||G<0)throw new RangeError("offset is not uint");if(G+te>ne)throw new RangeError("Trying to access beyond buffer length")}function Z(G,te,ne,le,ue,pe){if(!i.isBuffer(G))throw new TypeError('"buffer" argument must be a Buffer instance');if(te>ue||te<pe)throw new RangeError('"value" argument is out of bounds');if(ne+le>G.length)throw new RangeError("Index out of range")}function Y(G,te,ne,le,ue,pe){if(ne+le>G.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("Index out of range")}function ee(G,te,ne,le,ue){return te=+te,ne>>>=0,ue||Y(G,0,ne,4),a.write(G,te,ne,le,23,4),ne+4}function re(G,te,ne,le,ue){return te=+te,ne>>>=0,ue||Y(G,0,ne,8),a.write(G,te,ne,le,52,8),ne+8}_.Buffer=i,_.SlowBuffer=function(G){return+G!=G&&(G=0),i.alloc(+G)},_.INSPECT_MAX_BYTES=50,_.kMaxLength=2147483647,(i.TYPED_ARRAY_SUPPORT=function(){try{var G=new Uint8Array(1);return G.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===G.foo()}catch(te){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(G,te,ne){return v(G,te,ne)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(G,te,ne){return ue=te,pe=ne,h(le=G),le<=0?l(le):void 0!==ue?"string"==typeof pe?l(le).fill(ue,pe):l(le).fill(ue):l(le);var le,ue,pe},i.allocUnsafe=function(G){return s(G)},i.allocUnsafeSlow=function(G){return s(G)},i.isBuffer=function(G){return null!=G&&!0===G._isBuffer&&G!==i.prototype},i.compare=function(G,te){if(W(G,Uint8Array)&&(G=i.from(G,G.offset,G.byteLength)),W(te,Uint8Array)&&(te=i.from(te,te.offset,te.byteLength)),!i.isBuffer(G)||!i.isBuffer(te))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(G===te)return 0;for(var ne=G.length,le=te.length,ue=0,pe=Math.min(ne,le);ue<pe;++ue)if(G[ue]!==te[ue]){ne=G[ue],le=te[ue];break}return ne<le?-1:le<ne?1:0},i.isEncoding=function(G){switch(String(G).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(G,te){if(!Array.isArray(G))throw new TypeError('"list" argument must be an Array of Buffers');if(0===G.length)return i.alloc(0);var ne;if(void 0===te)for(te=0,ne=0;ne<G.length;++ne)te+=G[ne].length;var le=i.allocUnsafe(te),ue=0;for(ne=0;ne<G.length;++ne){var pe=G[ne];if(W(pe,Uint8Array)&&(pe=i.from(pe)),!i.isBuffer(pe))throw new TypeError('"list" argument must be an Array of Buffers');pe.copy(le,ue),ue+=pe.length}return le},i.byteLength=f,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var G=this.length;if(G%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var te=0;te<G;te+=2)m(this,te,te+1);return this},i.prototype.swap32=function(){var G=this.length;if(G%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var te=0;te<G;te+=4)m(this,te,te+3),m(this,te+1,te+2);return this},i.prototype.swap64=function(){var G=this.length;if(G%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var te=0;te<G;te+=8)m(this,te,te+7),m(this,te+1,te+6),m(this,te+2,te+5),m(this,te+3,te+4);return this},i.prototype.toLocaleString=i.prototype.toString=function(){var G=this.length;return 0===G?"":0===arguments.length?N(this,0,G):g.apply(this,arguments)},i.prototype.equals=function(G){if(!i.isBuffer(G))throw new TypeError("Argument must be a Buffer");return this===G||0===i.compare(this,G)},i.prototype.inspect=function(){var G="",te=_.INSPECT_MAX_BYTES;return G=this.toString("hex",0,te).replace(/(.{2})/g,"$1 ").trim(),this.length>te&&(G+=" ... "),"<Buffer "+G+">"},i.prototype.compare=function(G,te,ne,le,ue){if(W(G,Uint8Array)&&(G=i.from(G,G.offset,G.byteLength)),!i.isBuffer(G))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof G);if(void 0===te&&(te=0),void 0===ne&&(ne=G?G.length:0),void 0===le&&(le=0),void 0===ue&&(ue=this.length),te<0||ne>G.length||le<0||ue>this.length)throw new RangeError("out of range index");if(le>=ue&&te>=ne)return 0;if(le>=ue)return-1;if(te>=ne)return 1;if(this===G)return 0;for(var pe=(ue>>>=0)-(le>>>=0),de=(ne>>>=0)-(te>>>=0),_e=Math.min(pe,de),me=this.slice(le,ue),we=G.slice(te,ne),De=0;De<_e;++De)if(me[De]!==we[De]){pe=me[De],de=we[De];break}return pe<de?-1:de<pe?1:0},i.prototype.includes=function(G,te,ne){return-1!==this.indexOf(G,te,ne)},i.prototype.indexOf=function(G,te,ne){return u(this,G,te,ne,!0)},i.prototype.lastIndexOf=function(G,te,ne){return u(this,G,te,ne,!1)},i.prototype.write=function(G,te,ne,le){if(void 0===te)le="utf8",ne=this.length,te=0;else if(void 0===ne&&"string"==typeof te)le=te,ne=this.length,te=0;else{if(!isFinite(te))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");te>>>=0,isFinite(ne)?(ne>>>=0,void 0===le&&(le="utf8")):(le=ne,ne=void 0)}var ue=this.length-te;if((void 0===ne||ne>ue)&&(ne=ue),G.length>0&&(ne<0||te<0)||te>this.length)throw new RangeError("Attempt to write outside buffer bounds");le||(le="utf8");for(var pe=!1;;)switch(le){case"hex":return c(this,G,te,ne);case"utf8":case"utf-8":return A(this,G,te,ne);case"ascii":return k(this,G,te,ne);case"latin1":case"binary":return C(this,G,te,ne);case"base64":return E(this,G,te,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return L(this,G,te,ne);default:if(pe)throw new TypeError("Unknown encoding: "+le);le=(""+le).toLowerCase(),pe=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},i.prototype.slice=function(G,te){var ne=this.length;(G=~~G)<0?(G+=ne)<0&&(G=0):G>ne&&(G=ne),(te=void 0===te?ne:~~te)<0?(te+=ne)<0&&(te=0):te>ne&&(te=ne),te<G&&(te=G);var le=this.subarray(G,te);return le.__proto__=i.prototype,le},i.prototype.readUIntLE=function(G,te,ne){G>>>=0,te>>>=0,ne||V(G,te,this.length);for(var le=this[G],ue=1,pe=0;++pe<te&&(ue*=256);)le+=this[G+pe]*ue;return le},i.prototype.readUIntBE=function(G,te,ne){G>>>=0,te>>>=0,ne||V(G,te,this.length);for(var le=this[G+--te],ue=1;te>0&&(ue*=256);)le+=this[G+--te]*ue;return le},i.prototype.readUInt8=function(G,te){return G>>>=0,te||V(G,1,this.length),this[G]},i.prototype.readUInt16LE=function(G,te){return G>>>=0,te||V(G,2,this.length),this[G]|this[G+1]<<8},i.prototype.readUInt16BE=function(G,te){return G>>>=0,te||V(G,2,this.length),this[G]<<8|this[G+1]},i.prototype.readUInt32LE=function(G,te){return G>>>=0,te||V(G,4,this.length),(this[G]|this[G+1]<<8|this[G+2]<<16)+16777216*this[G+3]},i.prototype.readUInt32BE=function(G,te){return G>>>=0,te||V(G,4,this.length),16777216*this[G]+(this[G+1]<<16|this[G+2]<<8|this[G+3])},i.prototype.readIntLE=function(G,te,ne){G>>>=0,te>>>=0,ne||V(G,te,this.length);for(var le=this[G],ue=1,pe=0;++pe<te&&(ue*=256);)le+=this[G+pe]*ue;return le>=(ue*=128)&&(le-=Math.pow(2,8*te)),le},i.prototype.readIntBE=function(G,te,ne){G>>>=0,te>>>=0,ne||V(G,te,this.length);for(var le=te,ue=1,pe=this[G+--le];le>0&&(ue*=256);)pe+=this[G+--le]*ue;return pe>=(ue*=128)&&(pe-=Math.pow(2,8*te)),pe},i.prototype.readInt8=function(G,te){return G>>>=0,te||V(G,1,this.length),128&this[G]?-1*(255-this[G]+1):this[G]},i.prototype.readInt16LE=function(G,te){G>>>=0,te||V(G,2,this.length);var ne=this[G]|this[G+1]<<8;return 32768&ne?4294901760|ne:ne},i.prototype.readInt16BE=function(G,te){G>>>=0,te||V(G,2,this.length);var ne=this[G+1]|this[G]<<8;return 32768&ne?4294901760|ne:ne},i.prototype.readInt32LE=function(G,te){return G>>>=0,te||V(G,4,this.length),this[G]|this[G+1]<<8|this[G+2]<<16|this[G+3]<<24},i.prototype.readInt32BE=function(G,te){return G>>>=0,te||V(G,4,this.length),this[G]<<24|this[G+1]<<16|this[G+2]<<8|this[G+3]},i.prototype.readFloatLE=function(G,te){return G>>>=0,te||V(G,4,this.length),a.read(this,G,!0,23,4)},i.prototype.readFloatBE=function(G,te){return G>>>=0,te||V(G,4,this.length),a.read(this,G,!1,23,4)},i.prototype.readDoubleLE=function(G,te){return G>>>=0,te||V(G,8,this.length),a.read(this,G,!0,52,8)},i.prototype.readDoubleBE=function(G,te){return G>>>=0,te||V(G,8,this.length),a.read(this,G,!1,52,8)},i.prototype.writeUIntLE=function(G,te,ne,le){G=+G,te>>>=0,ne>>>=0,le||Z(this,G,te,ne,Math.pow(2,8*ne)-1,0);var ue=1,pe=0;for(this[te]=255&G;++pe<ne&&(ue*=256);)this[te+pe]=G/ue&255;return te+ne},i.prototype.writeUIntBE=function(G,te,ne,le){G=+G,te>>>=0,ne>>>=0,le||Z(this,G,te,ne,Math.pow(2,8*ne)-1,0);var ue=ne-1,pe=1;for(this[te+ue]=255&G;--ue>=0&&(pe*=256);)this[te+ue]=G/pe&255;return te+ne},i.prototype.writeUInt8=function(G,te,ne){return G=+G,te>>>=0,ne||Z(this,G,te,1,255,0),this[te]=255&G,te+1},i.prototype.writeUInt16LE=function(G,te,ne){return G=+G,te>>>=0,ne||Z(this,G,te,2,65535,0),this[te]=255&G,this[te+1]=G>>>8,te+2},i.prototype.writeUInt16BE=function(G,te,ne){return G=+G,te>>>=0,ne||Z(this,G,te,2,65535,0),this[te]=G>>>8,this[te+1]=255&G,te+2},i.prototype.writeUInt32LE=function(G,te,ne){return G=+G,te>>>=0,ne||Z(this,G,te,4,4294967295,0),this[te+3]=G>>>24,this[te+2]=G>>>16,this[te+1]=G>>>8,this[te]=255&G,te+4},i.prototype.writeUInt32BE=function(G,te,ne){return G=+G,te>>>=0,ne||Z(this,G,te,4,4294967295,0),this[te]=G>>>24,this[te+1]=G>>>16,this[te+2]=G>>>8,this[te+3]=255&G,te+4},i.prototype.writeIntLE=function(G,te,ne,le){if(G=+G,te>>>=0,!le){var ue=Math.pow(2,8*ne-1);Z(this,G,te,ne,ue-1,-ue)}var pe=0,de=1,_e=0;for(this[te]=255&G;++pe<ne&&(de*=256);)G<0&&0===_e&&0!==this[te+pe-1]&&(_e=1),this[te+pe]=(G/de>>0)-_e&255;return te+ne},i.prototype.writeIntBE=function(G,te,ne,le){if(G=+G,te>>>=0,!le){var ue=Math.pow(2,8*ne-1);Z(this,G,te,ne,ue-1,-ue)}var pe=ne-1,de=1,_e=0;for(this[te+pe]=255&G;--pe>=0&&(de*=256);)G<0&&0===_e&&0!==this[te+pe+1]&&(_e=1),this[te+pe]=(G/de>>0)-_e&255;return te+ne},i.prototype.writeInt8=function(G,te,ne){return G=+G,te>>>=0,ne||Z(this,G,te,1,127,-128),G<0&&(G=255+G+1),this[te]=255&G,te+1},i.prototype.writeInt16LE=function(G,te,ne){return G=+G,te>>>=0,ne||Z(this,G,te,2,32767,-32768),this[te]=255&G,this[te+1]=G>>>8,te+2},i.prototype.writeInt16BE=function(G,te,ne){return G=+G,te>>>=0,ne||Z(this,G,te,2,32767,-32768),this[te]=G>>>8,this[te+1]=255&G,te+2},i.prototype.writeInt32LE=function(G,te,ne){return G=+G,te>>>=0,ne||Z(this,G,te,4,2147483647,-2147483648),this[te]=255&G,this[te+1]=G>>>8,this[te+2]=G>>>16,this[te+3]=G>>>24,te+4},i.prototype.writeInt32BE=function(G,te,ne){return G=+G,te>>>=0,ne||Z(this,G,te,4,2147483647,-2147483648),G<0&&(G=4294967295+G+1),this[te]=G>>>24,this[te+1]=G>>>16,this[te+2]=G>>>8,this[te+3]=255&G,te+4},i.prototype.writeFloatLE=function(G,te,ne){return ee(this,G,te,!0,ne)},i.prototype.writeFloatBE=function(G,te,ne){return ee(this,G,te,!1,ne)},i.prototype.writeDoubleLE=function(G,te,ne){return re(this,G,te,!0,ne)},i.prototype.writeDoubleBE=function(G,te,ne){return re(this,G,te,!1,ne)},i.prototype.copy=function(G,te,ne,le){if(!i.isBuffer(G))throw new TypeError("argument should be a Buffer");if(ne||(ne=0),le||0===le||(le=this.length),te>=G.length&&(te=G.length),te||(te=0),le>0&&le<ne&&(le=ne),le===ne||0===G.length||0===this.length)return 0;if(te<0)throw new RangeError("targetStart out of bounds");if(ne<0||ne>=this.length)throw new RangeError("Index out of range");if(le<0)throw new RangeError("sourceEnd out of bounds");le>this.length&&(le=this.length),G.length-te<le-ne&&(le=G.length-te+ne);var ue=le-ne;if(this===G&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(te,ne,le);else if(this===G&&ne<te&&te<le)for(var pe=ue-1;pe>=0;--pe)G[pe+te]=this[pe+ne];else Uint8Array.prototype.set.call(G,this.subarray(ne,le),te);return ue},i.prototype.fill=function(G,te,ne,le){if("string"==typeof G){if("string"==typeof te?(le=te,te=0,ne=this.length):"string"==typeof ne&&(le=ne,ne=this.length),void 0!==le&&"string"!=typeof le)throw new TypeError("encoding must be a string");if("string"==typeof le&&!i.isEncoding(le))throw new TypeError("Unknown encoding: "+le);if(1===G.length){var ue=G.charCodeAt(0);("utf8"===le&&ue<128||"latin1"===le)&&(G=ue)}}else"number"==typeof G&&(G&=255);if(te<0||this.length<te||this.length<ne)throw new RangeError("Out of range index");if(ne<=te)return this;var pe;if(te>>>=0,ne=void 0===ne?this.length:ne>>>0,G||(G=0),"number"==typeof G)for(pe=te;pe<ne;++pe)this[pe]=G;else{var de=i.isBuffer(G)?G:i.from(G,le),_e=de.length;if(0===_e)throw new TypeError('The value "'+G+'" is invalid for argument "value"');for(pe=0;pe<ne-te;++pe)this[pe+te]=de[pe%_e]}return this};var X=/[^+/0-9A-Za-z-_]/g;function K(G){return G<16?"0"+G.toString(16):G.toString(16)}function ie(G,te){var ne;te=te||1/0;for(var le=G.length,ue=null,pe=[],de=0;de<le;++de){if((ne=G.charCodeAt(de))>55295&&ne<57344){if(!ue){if(ne>56319){(te-=3)>-1&&pe.push(239,191,189);continue}if(de+1===le){(te-=3)>-1&&pe.push(239,191,189);continue}ue=ne;continue}if(ne<56320){(te-=3)>-1&&pe.push(239,191,189),ue=ne;continue}ne=65536+(ue-55296<<10|ne-56320)}else ue&&(te-=3)>-1&&pe.push(239,191,189);if(ue=null,ne<128){if((te-=1)<0)break;pe.push(ne)}else if(ne<2048){if((te-=2)<0)break;pe.push(ne>>6|192,63&ne|128)}else if(ne<65536){if((te-=3)<0)break;pe.push(ne>>12|224,ne>>6&63|128,63&ne|128)}else{if(!(ne<1114112))throw new Error("Invalid code point");if((te-=4)<0)break;pe.push(ne>>18|240,ne>>12&63|128,ne>>6&63|128,63&ne|128)}}return pe}function q(G){return o.toByteArray(function(te){if((te=(te=te.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;te.length%4!=0;)te+="=";return te}(G))}function U(G,te,ne,le){for(var ue=0;ue<le&&!(ue+ne>=te.length||ue>=G.length);++ue)te[ue+ne]=G[ue];return ue}function W(G,te){return G instanceof te||null!=G&&null!=G.constructor&&null!=G.constructor.name&&G.constructor.name===te.name}function ae(G){return G!=G}}).call(this)}).call(this,x("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(x,M,_){_.read=function(e,o,a,l,i){var v,h,s=8*i-l-1,d=(1<<s)-1,p=d>>1,f=-7,g=a?i-1:0,m=a?-1:1,u=e[o+g];for(g+=m,v=u&(1<<-f)-1,u>>=-f,f+=s;f>0;v=256*v+e[o+g],g+=m,f-=8);for(h=v&(1<<-f)-1,v>>=-f,f+=l;f>0;h=256*h+e[o+g],g+=m,f-=8);if(0===v)v=1-p;else{if(v===d)return h?NaN:1/0*(u?-1:1);h+=Math.pow(2,l),v-=p}return(u?-1:1)*h*Math.pow(2,v-l)},_.write=function(e,o,a,l,i,v){var h,s,d,p=8*v-i-1,f=(1<<p)-1,g=f>>1,m=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,u=l?0:v-1,w=l?1:-1,c=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(s=isNaN(o)?1:0,h=f):(h=Math.floor(Math.log(o)/Math.LN2),o*(d=Math.pow(2,-h))<1&&(h--,d*=2),(o+=h+g>=1?m/d:m*Math.pow(2,1-g))*d>=2&&(h++,d/=2),h+g>=f?(s=0,h=f):h+g>=1?(s=(o*d-1)*Math.pow(2,i),h+=g):(s=o*Math.pow(2,g-1)*Math.pow(2,i),h=0));i>=8;e[a+u]=255&s,u+=w,s/=256,i-=8);for(h=h<<i|s,p+=i;p>0;e[a+u]=255&h,u+=w,h/=256,p-=8);e[a+u-w]|=128*c}},{}],5:[function(x,M,_){var e,o,a=M.exports={};function l(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function v(w){if(e===setTimeout)return setTimeout(w,0);if((e===l||!e)&&setTimeout)return e=setTimeout,setTimeout(w,0);try{return e(w,0)}catch(c){try{return e.call(null,w,0)}catch(A){return e.call(this,w,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:l}catch(w){e=l}try{o="function"==typeof clearTimeout?clearTimeout:i}catch(w){o=i}}();var h,s=[],d=!1,p=-1;function f(){d&&h&&(d=!1,h.length?s=h.concat(s):p=-1,s.length&&g())}function g(){if(!d){var w=v(f);d=!0;for(var c=s.length;c;){for(h=s,s=[];++p<c;)h&&h[p].run();p=-1,c=s.length}h=null,d=!1,function(A){if(o===clearTimeout)return clearTimeout(A);if((o===i||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(A);try{o(A)}catch(k){try{return o.call(null,A)}catch(C){return o.call(this,A)}}}(w)}}function m(w,c){this.fun=w,this.array=c}function u(){}a.nextTick=function(w){var c=new Array(arguments.length-1);if(arguments.length>1)for(var A=1;A<arguments.length;A++)c[A-1]=arguments[A];s.push(new m(w,c)),1!==s.length||d||v(g)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=u,a.addListener=u,a.once=u,a.off=u,a.removeListener=u,a.removeAllListeners=u,a.emit=u,a.prependListener=u,a.prependOnceListener=u,a.listeners=function(w){return[]},a.binding=function(w){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(w){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],6:[function(x,M,_){M.exports={alpha_shape:x("alpha-shape"),convex_hull:x("convex-hull"),delaunay_triangulate:x("delaunay-triangulate"),gl_cone3d:x("gl-cone3d"),gl_error3d:x("gl-error3d"),gl_heatmap2d:x("gl-heatmap2d"),gl_line3d:x("gl-line3d"),gl_mesh3d:x("gl-mesh3d"),gl_plot2d:x("gl-plot2d"),gl_plot3d:x("gl-plot3d"),gl_pointcloud2d:x("gl-pointcloud2d"),gl_scatter3d:x("gl-scatter3d"),gl_select_box:x("gl-select-box"),gl_spikes2d:x("gl-spikes2d"),gl_streamtube3d:x("gl-streamtube3d"),gl_surface3d:x("gl-surface3d"),ndarray:x("ndarray"),ndarray_linear_interpolate:x("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(x,M,_){"use strict";M.exports=function(v){var h=(v=v||{}).eye||[0,0,1],s=v.center||[0,0,0],d=v.up||[0,1,0],p=v.distanceLimits||[0,1/0],f=v.mode||"turntable",g=e(),m=o(),u=a();return g.setDistanceLimits(p[0],p[1]),g.lookAt(0,h,s,d),m.setDistanceLimits(p[0],p[1]),m.lookAt(0,h,s,d),u.setDistanceLimits(p[0],p[1]),u.lookAt(0,h,s,d),new l({turntable:g,orbit:m,matrix:u},f)};var e=x("turntable-camera-controller"),o=x("orbit-camera-controller"),a=x("matrix-camera-controller");function l(v,h){this._controllerNames=Object.keys(v),this._controllerList=this._controllerNames.map(function(s){return v[s]}),this._mode=h,this._active=v[h],this._active||(this._mode="turntable",this._active=v.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var i=l.prototype;i.flush=function(v){for(var h=this._controllerList,s=0;s<h.length;++s)h[s].flush(v)},i.idle=function(v){for(var h=this._controllerList,s=0;s<h.length;++s)h[s].idle(v)},i.lookAt=function(v,h,s,d){for(var p=this._controllerList,f=0;f<p.length;++f)p[f].lookAt(v,h,s,d)},i.rotate=function(v,h,s,d){for(var p=this._controllerList,f=0;f<p.length;++f)p[f].rotate(v,h,s,d)},i.pan=function(v,h,s,d){for(var p=this._controllerList,f=0;f<p.length;++f)p[f].pan(v,h,s,d)},i.translate=function(v,h,s,d){for(var p=this._controllerList,f=0;f<p.length;++f)p[f].translate(v,h,s,d)},i.setMatrix=function(v,h){for(var s=this._controllerList,d=0;d<s.length;++d)s[d].setMatrix(v,h)},i.setDistanceLimits=function(v,h){for(var s=this._controllerList,d=0;d<s.length;++d)s[d].setDistanceLimits(v,h)},i.setDistance=function(v,h){for(var s=this._controllerList,d=0;d<s.length;++d)s[d].setDistance(v,h)},i.recalcMatrix=function(v){this._active.recalcMatrix(v)},i.getDistance=function(v){return this._active.getDistance(v)},i.getDistanceLimits=function(v){return this._active.getDistanceLimits(v)},i.lastT=function(){return this._active.lastT()},i.setMode=function(v){if(v!==this._mode){var h=this._controllerNames.indexOf(v);if(!(h<0)){var s=this._active,d=this._controllerList[h],p=Math.max(s.lastT(),d.lastT());s.recalcMatrix(p),d.setMatrix(p,s.computedMatrix),this._active=d,this._mode=v,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},i.getMode=function(){return this._mode}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(x,M,_){"use strict";var e="undefined"==typeof WeakMap?x("weak-map"):WeakMap,o=x("gl-buffer"),a=x("gl-vao"),l=new e;M.exports=function(i){var v=l.get(i),h=v&&(v._triangleBuffer.handle||v._triangleBuffer.buffer);if(!h||!i.isBuffer(h)){var s=o(i,new Float32Array([-1,-1,-1,4,4,-1]));(v=a(i,[{buffer:s,type:i.FLOAT,size:2}]))._triangleBuffer=s,l.set(i,v)}v.bind(),i.drawArrays(i.TRIANGLES,0,3),v.unbind()}},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(x,M,_){var e=x("pad-left");M.exports=function(o,a,l){a="number"==typeof a?a:1,l=l||": ";var i=o.split(/\r?\n/),v=String(i.length+a-1).length;return i.map(function(h,s){var d=s+a,p=String(d).length;return e(d,v-p)+l+h}).join("\n")}},{"pad-left":264}],10:[function(x,M,_){"use strict";M.exports=function(a){var l=a.length;if(0===l)return[];if(1===l)return[0];for(var i=a[0].length,v=[a[0]],h=[0],s=1;s<l;++s)if(v.push(a[s]),o(v,i)){if(h.push(s),h.length===i+1)return h}else v.pop();return h};var e=x("robust-orientation");function o(a,l){for(var i=new Array(l+1),v=0;v<a.length;++v)i[v]=a[v];for(v=0;v<=a.length;++v){for(var h=a.length;h<=l;++h){for(var s=new Array(l),d=0;d<l;++d)s[d]=Math.pow(h+1-v,d);i[h]=s}if(e.apply(void 0,i))return!0}return!1}},{"robust-orientation":284}],11:[function(x,M,_){"use strict";M.exports=function(a,l){return e(l).filter(function(i){for(var v=new Array(i.length),h=0;h<i.length;++h)v[h]=l[i[h]];return o(v)*a<1})};var e=x("delaunay-triangulate"),o=x("circumradius")},{circumradius:49,"delaunay-triangulate":63}],12:[function(x,M,_){M.exports=function(a,l){return o(e(a,l))};var e=x("alpha-complex"),o=x("simplicial-complex-boundary")},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(x,M,_){M.exports=function(e){return atob(e)}},{}],14:[function(x,M,_){"use strict";M.exports=function(a,l){for(var i=l.length,v=new Array(i+1),h=0;h<i;++h){for(var s=new Array(i+1),d=0;d<=i;++d)s[d]=a[d][h];v[h]=s}for(v[i]=new Array(i+1),h=0;h<=i;++h)v[i][h]=1;var p=new Array(i+1);for(h=0;h<i;++h)p[h]=l[h];p[i]=1;var f=e(v,p),g=o(f[i+1]);0===g&&(g=1);var m=new Array(i+1);for(h=0;h<=i;++h)m[h]=o(f[h])/g;return m};var e=x("robust-linear-solve");function o(a){for(var l=0,i=0;i<a.length;++i)l+=a[i];return l}},{"robust-linear-solve":283}],15:[function(x,M,_){"use strict";var e=x("./lib/rationalize");M.exports=function(o,a){return e(o[0].mul(a[1]).add(a[0].mul(o[1])),o[1].mul(a[1]))}},{"./lib/rationalize":25}],16:[function(x,M,_){"use strict";M.exports=function(e,o){return e[0].mul(o[1]).cmp(o[0].mul(e[1]))}},{}],17:[function(x,M,_){"use strict";var e=x("./lib/rationalize");M.exports=function(o,a){return e(o[0].mul(a[1]),o[1].mul(a[0]))}},{"./lib/rationalize":25}],18:[function(x,M,_){"use strict";var e=x("./is-rat"),o=x("./lib/is-bn"),a=x("./lib/num-to-bn"),l=x("./lib/str-to-bn"),i=x("./lib/rationalize"),v=x("./div");M.exports=function h(s,d){if(e(s))return d?v(s,h(d)):[s[0].clone(),s[1].clone()];var p,f,g=0;if(o(s))p=s.clone();else if("string"==typeof s)p=l(s);else{if(0===s)return[a(0),a(1)];if(s===Math.floor(s))p=a(s);else{for(;s!==Math.floor(s);)s*=Math.pow(2,256),g-=256;p=a(s)}}if(e(d))p.mul(d[1]),f=d[0].clone();else if(o(d))f=d.clone();else if("string"==typeof d)f=l(d);else if(d)if(d===Math.floor(d))f=a(d);else{for(;d!==Math.floor(d);)d*=Math.pow(2,256),g+=256;f=a(d)}else f=a(1);return g>0?p=p.ushln(g):g<0&&(f=f.ushln(-g)),i(p,f)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(x,M,_){"use strict";var e=x("./lib/is-bn");M.exports=function(o){return Array.isArray(o)&&2===o.length&&e(o[0])&&e(o[1])}},{"./lib/is-bn":23}],20:[function(x,M,_){"use strict";var e=x("bn.js");M.exports=function(o){return o.cmp(new e(0))}},{"bn.js":33}],21:[function(x,M,_){"use strict";var e=x("./bn-sign");M.exports=function(o){var a=o.length,l=o.words,i=0;if(1===a)i=l[0];else if(2===a)i=l[0]+67108864*l[1];else for(var v=0;v<a;v++)i+=l[v]*Math.pow(67108864,v);return e(o)*i}},{"./bn-sign":20}],22:[function(x,M,_){"use strict";var e=x("double-bits"),o=x("bit-twiddle").countTrailingZeros;M.exports=function(a){var l=o(e.lo(a));if(l<32)return l;var i=o(e.hi(a));return i>20?52:i+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(x,M,_){"use strict";x("bn.js"),M.exports=function(e){return e&&"object"==typeof e&&Boolean(e.words)}},{"bn.js":33}],24:[function(x,M,_){"use strict";var e=x("bn.js"),o=x("double-bits");M.exports=function(a){var l=o.exponent(a);return l<52?new e(a):new e(a*Math.pow(2,52-l)).ushln(l-52)}},{"bn.js":33,"double-bits":64}],25:[function(x,M,_){"use strict";var e=x("./num-to-bn"),o=x("./bn-sign");M.exports=function(a,l){var i=o(a),v=o(l);if(0===i)return[e(0),e(1)];if(0===v)return[e(0),e(0)];v<0&&(a=a.neg(),l=l.neg());var h=a.gcd(l);return h.cmpn(1)?[a.div(h),l.div(h)]:[a,l]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(x,M,_){"use strict";var e=x("bn.js");M.exports=function(o){return new e(o)}},{"bn.js":33}],27:[function(x,M,_){"use strict";var e=x("./lib/rationalize");M.exports=function(o,a){return e(o[0].mul(a[0]),o[1].mul(a[1]))}},{"./lib/rationalize":25}],28:[function(x,M,_){"use strict";var e=x("./lib/bn-sign");M.exports=function(o){return e(o[0])*e(o[1])}},{"./lib/bn-sign":20}],29:[function(x,M,_){"use strict";var e=x("./lib/rationalize");M.exports=function(o,a){return e(o[0].mul(a[1]).sub(o[1].mul(a[0])),o[1].mul(a[1]))}},{"./lib/rationalize":25}],30:[function(x,M,_){"use strict";var e=x("./lib/bn-to-num"),o=x("./lib/ctz");M.exports=function(a){var l=a[0],i=a[1];if(0===l.cmpn(0))return 0;var v=l.abs().divmod(i.abs()),s=e(v.div),d=v.mod,p=l.negative!==i.negative?-1:1;if(0===d.cmpn(0))return p*s;if(s){var f=o(s)+4,g=e(d.ushln(f).divRound(i));return p*(s+g*Math.pow(2,-f))}var m=i.bitLength()-d.bitLength()+53;return g=e(d.ushln(m).divRound(i)),m<1023?p*g*Math.pow(2,-m):p*(g*=Math.pow(2,-1023))*Math.pow(2,1023-m)}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(x,M,_){"use strict";function e(h,s,d,p,f){for(var g=f+1;p<=f;){var m=p+f>>>1,u=h[m];(void 0!==d?d(u,s):u-s)>=0?(g=m,f=m-1):p=m+1}return g}function o(h,s,d,p,f){for(var g=f+1;p<=f;){var m=p+f>>>1,u=h[m];(void 0!==d?d(u,s):u-s)>0?(g=m,f=m-1):p=m+1}return g}function a(h,s,d,p,f){for(var g=p-1;p<=f;){var m=p+f>>>1,u=h[m];(void 0!==d?d(u,s):u-s)<0?(g=m,p=m+1):f=m-1}return g}function l(h,s,d,p,f){for(var g=p-1;p<=f;){var m=p+f>>>1,u=h[m];(void 0!==d?d(u,s):u-s)<=0?(g=m,p=m+1):f=m-1}return g}function i(h,s,d,p,f){for(;p<=f;){var g=p+f>>>1,m=h[g],u=void 0!==d?d(m,s):m-s;if(0===u)return g;u<=0?p=g+1:f=g-1}return-1}function v(h,s,d,p,f,g){return"function"==typeof d?g(h,s,d,void 0===p?0:0|p,void 0===f?h.length-1:0|f):g(h,s,void 0,void 0===d?0:0|d,void 0===p?h.length-1:0|p)}M.exports={ge:function(h,s,d,p,f){return v(h,s,d,p,f,e)},gt:function(h,s,d,p,f){return v(h,s,d,p,f,o)},lt:function(h,s,d,p,f){return v(h,s,d,p,f,a)},le:function(h,s,d,p,f){return v(h,s,d,p,f,l)},eq:function(h,s,d,p,f){return v(h,s,d,p,f,i)}}},{}],32:[function(x,M,_){"use strict";function e(a){var l=32;return(a&=-a)&&l--,65535&a&&(l-=16),16711935&a&&(l-=8),252645135&a&&(l-=4),858993459&a&&(l-=2),1431655765&a&&(l-=1),l}_.INT_BITS=32,_.INT_MAX=2147483647,_.INT_MIN=-1<<31,_.sign=function(a){return(a>0)-(a<0)},_.abs=function(a){var l=a>>31;return(a^l)-l},_.min=function(a,l){return l^(a^l)&-(a<l)},_.max=function(a,l){return a^(a^l)&-(a<l)},_.isPow2=function(a){return!(a&a-1||!a)},_.log2=function(a){var l,i;return l=(a>65535)<<4,l|=i=((a>>>=l)>255)<<3,l|=i=((a>>>=i)>15)<<2,(l|=i=((a>>>=i)>3)<<1)|(a>>>=i)>>1},_.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},_.popCount=function(a){return 16843009*((a=(858993459&(a-=a>>>1&1431655765))+(a>>>2&858993459))+(a>>>4)&252645135)>>>24},_.countTrailingZeros=e,_.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,1+((a|=a>>>8)|a>>>16)},_.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,(a|=a>>>16)-(a>>>1)},_.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,27030>>>(a&=15)&1};var o=new Array(256);(function(a){for(var l=0;l<256;++l){var i=l,v=l,h=7;for(i>>>=1;i;i>>>=1)v<<=1,v|=1&i,--h;a[l]=v<<h&255}})(o),_.reverse=function(a){return o[255&a]<<24|o[a>>>8&255]<<16|o[a>>>16&255]<<8|o[a>>>24&255]},_.interleave2=function(a,l){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l&=65535)|l<<8))|l<<4))|l<<2))|l<<1))<<1},_.deinterleave2=function(a,l){return(a=65535&((a=16711935&((a=252645135&((a=858993459&((a=a>>>l&1431655765)|a>>>1))|a>>>2))|a>>>4))|a>>>16))<<16>>16},_.interleave3=function(a,l,i){return a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2),(a|=(l=1227133513&((l=3272356035&((l=251719695&((l=4278190335&((l&=1023)|l<<16))|l<<8))|l<<4))|l<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},_.deinterleave3=function(a,l){return(a=1023&((a=4278190335&((a=251719695&((a=3272356035&((a=a>>>l&1227133513)|a>>>2))|a>>>4))|a>>>8))|a>>>16))<<22>>22},_.nextCombination=function(a){var l=a|a-1;return l+1|(~l&-~l)-1>>>e(a)+1}},{}],33:[function(x,M,_){!function(e,o){"use strict";function a(I,P){if(!I)throw new Error(P||"Assertion failed")}function l(I,P){I.super_=P;var j=function(){};j.prototype=P.prototype,I.prototype=new j,I.prototype.constructor=I}function i(I,P,j){if(i.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,null!==I&&("le"!==P&&"be"!==P||(j=P,P=10),this._init(I||0,P||10,j||"be"))}var v;"object"==typeof e?e.exports=i:o.BN=i,i.BN=i,i.wordSize=26;try{v="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:x("buffer").Buffer}catch(I){}function h(I,P){var j=I.charCodeAt(P);return j>=65&&j<=70?j-55:j>=97&&j<=102?j-87:j-48&15}function s(I,P,j){var V=h(I,j);return j-1>=P&&(V|=h(I,j-1)<<4),V}function d(I,P,j,V){for(var Z=0,Y=Math.min(I.length,j),ee=P;ee<Y;ee++){var re=I.charCodeAt(ee)-48;Z*=V,Z+=re>=49?re-49+10:re>=17?re-17+10:re}return Z}i.isBN=function(I){return I instanceof i||null!==I&&"object"==typeof I&&I.constructor.wordSize===i.wordSize&&Array.isArray(I.words)},i.max=function(I,P){return I.cmp(P)>0?I:P},i.min=function(I,P){return I.cmp(P)<0?I:P},i.prototype._init=function(I,P,j){if("number"==typeof I)return this._initNumber(I,P,j);if("object"==typeof I)return this._initArray(I,P,j);"hex"===P&&(P=16),a(P===(0|P)&&P>=2&&P<=36);var V=0;"-"===(I=I.toString().replace(/\s+/g,""))[0]&&(V++,this.negative=1),V<I.length&&(16===P?this._parseHex(I,V,j):(this._parseBase(I,P,V),"le"===j&&this._initArray(this.toArray(),P,j)))},i.prototype._initNumber=function(I,P,j){I<0&&(this.negative=1,I=-I),I<67108864?(this.words=[67108863&I],this.length=1):I<4503599627370496?(this.words=[67108863&I,I/67108864&67108863],this.length=2):(a(I<9007199254740992),this.words=[67108863&I,I/67108864&67108863,1],this.length=3),"le"===j&&this._initArray(this.toArray(),P,j)},i.prototype._initArray=function(I,P,j){if(a("number"==typeof I.length),I.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(I.length/3),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var Z,Y,ee=0;if("be"===j)for(V=I.length-1,Z=0;V>=0;V-=3)this.words[Z]|=(Y=I[V]|I[V-1]<<8|I[V-2]<<16)<<ee&67108863,this.words[Z+1]=Y>>>26-ee&67108863,(ee+=24)>=26&&(ee-=26,Z++);else if("le"===j)for(V=0,Z=0;V<I.length;V+=3)this.words[Z]|=(Y=I[V]|I[V+1]<<8|I[V+2]<<16)<<ee&67108863,this.words[Z+1]=Y>>>26-ee&67108863,(ee+=24)>=26&&(ee-=26,Z++);return this.strip()},i.prototype._parseHex=function(I,P,j){this.length=Math.ceil((I.length-P)/6),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var Z,Y=0,ee=0;if("be"===j)for(V=I.length-1;V>=P;V-=2)Z=s(I,P,V)<<Y,this.words[ee]|=67108863&Z,Y>=18?(Y-=18,this.words[ee+=1]|=Z>>>26):Y+=8;else for(V=(I.length-P)%2==0?P+1:P;V<I.length;V+=2)Z=s(I,P,V)<<Y,this.words[ee]|=67108863&Z,Y>=18?(Y-=18,this.words[ee+=1]|=Z>>>26):Y+=8;this.strip()},i.prototype._parseBase=function(I,P,j){this.words=[0],this.length=1;for(var V=0,Z=1;Z<=67108863;Z*=P)V++;V--,Z=Z/P|0;for(var Y=I.length-j,ee=Y%V,re=Math.min(Y,Y-ee)+j,X=0,K=j;K<re;K+=V)X=d(I,K,K+V,P),this.imuln(Z),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X);if(0!==ee){var ie=1;for(X=d(I,K,I.length,P),K=0;K<ee;K++)ie*=P;this.imuln(ie),this.words[0]+X<67108864?this.words[0]+=X:this._iaddn(X)}this.strip()},i.prototype.copy=function(I){I.words=new Array(this.length);for(var P=0;P<this.length;P++)I.words[P]=this.words[P];I.length=this.length,I.negative=this.negative,I.red=this.red},i.prototype.clone=function(){var I=new i(null);return this.copy(I),I},i.prototype._expand=function(I){for(;this.length<I;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var p=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],g=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(I,P,j){j.negative=P.negative^I.negative;var V=I.length+P.length|0;j.length=V,V=V-1|0;var Z=0|I.words[0],Y=0|P.words[0],ee=Z*Y,X=ee/67108864|0;j.words[0]=67108863&ee;for(var K=1;K<V;K++){for(var ie=X>>>26,q=67108863&X,U=Math.min(K,P.length-1),W=Math.max(0,K-I.length+1);W<=U;W++)ie+=(ee=(Z=0|I.words[K-W|0])*(Y=0|P.words[W])+q)/67108864|0,q=67108863&ee;j.words[K]=0|q,X=0|ie}return 0!==X?j.words[K]=0|X:j.length--,j.strip()}i.prototype.toString=function(I,P){var j;if(P=0|P||1,16===(I=I||10)||"hex"===I){j="";for(var V=0,Z=0,Y=0;Y<this.length;Y++){var ee=this.words[Y],re=(16777215&(ee<<V|Z)).toString(16);j=0!=(Z=ee>>>24-V&16777215)||Y!==this.length-1?p[6-re.length]+re+j:re+j,(V+=2)>=26&&(V-=26,Y--)}for(0!==Z&&(j=Z.toString(16)+j);j.length%P!=0;)j="0"+j;return 0!==this.negative&&(j="-"+j),j}if(I===(0|I)&&I>=2&&I<=36){var X=f[I],K=g[I];j="";var ie=this.clone();for(ie.negative=0;!ie.isZero();){var q=ie.modn(K).toString(I);j=(ie=ie.idivn(K)).isZero()?q+j:p[X-q.length]+q+j}for(this.isZero()&&(j="0"+j);j.length%P!=0;)j="0"+j;return 0!==this.negative&&(j="-"+j),j}a(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var I=this.words[0];return 2===this.length?I+=67108864*this.words[1]:3===this.length&&1===this.words[2]?I+=4503599627370496+67108864*this.words[1]:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-I:I},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(I,P){return a(void 0!==v),this.toArrayLike(v,I,P)},i.prototype.toArray=function(I,P){return this.toArrayLike(Array,I,P)},i.prototype.toArrayLike=function(I,P,j){var V=this.byteLength(),Z=j||Math.max(1,V);a(V<=Z,"byte array longer than desired length"),a(Z>0,"Requested array length <= 0"),this.strip();var Y,ee,re="le"===P,X=new I(Z),K=this.clone();if(re){for(ee=0;!K.isZero();ee++)Y=K.andln(255),K.iushrn(8),X[ee]=Y;for(;ee<Z;ee++)X[ee]=0}else{for(ee=0;ee<Z-V;ee++)X[ee]=0;for(ee=0;!K.isZero();ee++)Y=K.andln(255),K.iushrn(8),X[Z-ee-1]=Y}return X},i.prototype._countBits=Math.clz32?function(I){return 32-Math.clz32(I)}:function(I){var P=I,j=0;return P>=4096&&(j+=13,P>>>=13),P>=64&&(j+=7,P>>>=7),P>=8&&(j+=4,P>>>=4),P>=2&&(j+=2,P>>>=2),j+P},i.prototype._zeroBits=function(I){if(0===I)return 26;var P=I,j=0;return 0==(8191&P)&&(j+=13,P>>>=13),0==(127&P)&&(j+=7,P>>>=7),0==(15&P)&&(j+=4,P>>>=4),0==(3&P)&&(j+=2,P>>>=2),0==(1&P)&&j++,j},i.prototype.bitLength=function(){var P=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+P},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var I=0,P=0;P<this.length;P++){var j=this._zeroBits(this.words[P]);if(I+=j,26!==j)break}return I},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(I){return 0!==this.negative?this.abs().inotn(I).iaddn(1):this.clone()},i.prototype.fromTwos=function(I){return this.testn(I-1)?this.notn(I).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(I){for(;this.length<I.length;)this.words[this.length++]=0;for(var P=0;P<I.length;P++)this.words[P]=this.words[P]|I.words[P];return this.strip()},i.prototype.ior=function(I){return a(0==(this.negative|I.negative)),this.iuor(I)},i.prototype.or=function(I){return this.length>I.length?this.clone().ior(I):I.clone().ior(this)},i.prototype.uor=function(I){return this.length>I.length?this.clone().iuor(I):I.clone().iuor(this)},i.prototype.iuand=function(I){var P;P=this.length>I.length?I:this;for(var j=0;j<P.length;j++)this.words[j]=this.words[j]&I.words[j];return this.length=P.length,this.strip()},i.prototype.iand=function(I){return a(0==(this.negative|I.negative)),this.iuand(I)},i.prototype.and=function(I){return this.length>I.length?this.clone().iand(I):I.clone().iand(this)},i.prototype.uand=function(I){return this.length>I.length?this.clone().iuand(I):I.clone().iuand(this)},i.prototype.iuxor=function(I){var P,j;this.length>I.length?(P=this,j=I):(P=I,j=this);for(var V=0;V<j.length;V++)this.words[V]=P.words[V]^j.words[V];if(this!==P)for(;V<P.length;V++)this.words[V]=P.words[V];return this.length=P.length,this.strip()},i.prototype.ixor=function(I){return a(0==(this.negative|I.negative)),this.iuxor(I)},i.prototype.xor=function(I){return this.length>I.length?this.clone().ixor(I):I.clone().ixor(this)},i.prototype.uxor=function(I){return this.length>I.length?this.clone().iuxor(I):I.clone().iuxor(this)},i.prototype.inotn=function(I){a("number"==typeof I&&I>=0);var P=0|Math.ceil(I/26),j=I%26;this._expand(P),j>0&&P--;for(var V=0;V<P;V++)this.words[V]=67108863&~this.words[V];return j>0&&(this.words[V]=~this.words[V]&67108863>>26-j),this.strip()},i.prototype.notn=function(I){return this.clone().inotn(I)},i.prototype.setn=function(I,P){a("number"==typeof I&&I>=0);var j=I/26|0,V=I%26;return this._expand(j+1),this.words[j]=P?this.words[j]|1<<V:this.words[j]&~(1<<V),this.strip()},i.prototype.iadd=function(I){var P,j,V;if(0!==this.negative&&0===I.negative)return this.negative=0,P=this.isub(I),this.negative^=1,this._normSign();if(0===this.negative&&0!==I.negative)return I.negative=0,P=this.isub(I),I.negative=1,P._normSign();this.length>I.length?(j=this,V=I):(j=I,V=this);for(var Z=0,Y=0;Y<V.length;Y++)this.words[Y]=67108863&(P=(0|j.words[Y])+(0|V.words[Y])+Z),Z=P>>>26;for(;0!==Z&&Y<j.length;Y++)this.words[Y]=67108863&(P=(0|j.words[Y])+Z),Z=P>>>26;if(this.length=j.length,0!==Z)this.words[this.length]=Z,this.length++;else if(j!==this)for(;Y<j.length;Y++)this.words[Y]=j.words[Y];return this},i.prototype.add=function(I){var P;return 0!==I.negative&&0===this.negative?(I.negative=0,P=this.sub(I),I.negative^=1,P):0===I.negative&&0!==this.negative?(this.negative=0,P=I.sub(this),this.negative=1,P):this.length>I.length?this.clone().iadd(I):I.clone().iadd(this)},i.prototype.isub=function(I){if(0!==I.negative){I.negative=0;var P=this.iadd(I);return I.negative=1,P._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(I),this.negative=1,this._normSign();var j,V,Z=this.cmp(I);if(0===Z)return this.negative=0,this.length=1,this.words[0]=0,this;Z>0?(j=this,V=I):(j=I,V=this);for(var Y=0,ee=0;ee<V.length;ee++)Y=(P=(0|j.words[ee])-(0|V.words[ee])+Y)>>26,this.words[ee]=67108863&P;for(;0!==Y&&ee<j.length;ee++)Y=(P=(0|j.words[ee])+Y)>>26,this.words[ee]=67108863&P;if(0===Y&&ee<j.length&&j!==this)for(;ee<j.length;ee++)this.words[ee]=j.words[ee];return this.length=Math.max(this.length,ee),j!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(I){return this.clone().isub(I)};var u=function(I,P,j){var V,Z,Y,ee=I.words,re=P.words,X=j.words,K=0,ie=0|ee[0],q=8191&ie,U=ie>>>13,W=0|ee[1],ae=8191&W,G=W>>>13,te=0|ee[2],ne=8191&te,le=te>>>13,ue=0|ee[3],pe=8191&ue,de=ue>>>13,_e=0|ee[4],me=8191&_e,we=_e>>>13,De=0|ee[5],Le=8191&De,Ie=De>>>13,je=0|ee[6],ye=8191&je,Me=je>>>13,Oe=0|ee[7],Pe=8191&Oe,Re=Oe>>>13,Ue=0|ee[8],qe=8191&Ue,Xe=Ue>>>13,lt=0|ee[9],He=8191&lt,$e=lt>>>13,et=0|re[0],nt=8191&et,ct=et>>>13,bt=0|re[1],kt=8191&bt,Bt=bt>>>13,Et=0|re[2],ht=8191&Et,at=Et>>>13,Ft=0|re[3],en=8191&Ft,Qt=Ft>>>13,tn=0|re[4],dn=8191&tn,Mn=tn>>>13,sn=0|re[5],ke=8191&sn,Se=sn>>>13,Ce=0|re[6],Ve=8191&Ce,Ge=Ce>>>13,Qe=0|re[7],ot=8191&Qe,it=Qe>>>13,mt=0|re[8],xt=8191&mt,Vt=mt>>>13,$t=0|re[9],pt=8191&$t,At=$t>>>13;j.negative=I.negative^P.negative,j.length=19;var Xt=(K+(V=Math.imul(q,nt))|0)+((8191&(Z=(Z=Math.imul(q,ct))+Math.imul(U,nt)|0))<<13)|0;K=((Y=Math.imul(U,ct))+(Z>>>13)|0)+(Xt>>>26)|0,Xt&=67108863,V=Math.imul(ae,nt),Z=(Z=Math.imul(ae,ct))+Math.imul(G,nt)|0,Y=Math.imul(G,ct);var Ct=(K+(V=V+Math.imul(q,kt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(q,Bt)|0)+Math.imul(U,kt)|0))<<13)|0;K=((Y=Y+Math.imul(U,Bt)|0)+(Z>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,V=Math.imul(ne,nt),Z=(Z=Math.imul(ne,ct))+Math.imul(le,nt)|0,Y=Math.imul(le,ct),V=V+Math.imul(ae,kt)|0,Z=(Z=Z+Math.imul(ae,Bt)|0)+Math.imul(G,kt)|0,Y=Y+Math.imul(G,Bt)|0;var Pt=(K+(V=V+Math.imul(q,ht)|0)|0)+((8191&(Z=(Z=Z+Math.imul(q,at)|0)+Math.imul(U,ht)|0))<<13)|0;K=((Y=Y+Math.imul(U,at)|0)+(Z>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,V=Math.imul(pe,nt),Z=(Z=Math.imul(pe,ct))+Math.imul(de,nt)|0,Y=Math.imul(de,ct),V=V+Math.imul(ne,kt)|0,Z=(Z=Z+Math.imul(ne,Bt)|0)+Math.imul(le,kt)|0,Y=Y+Math.imul(le,Bt)|0,V=V+Math.imul(ae,ht)|0,Z=(Z=Z+Math.imul(ae,at)|0)+Math.imul(G,ht)|0,Y=Y+Math.imul(G,at)|0;var Be=(K+(V=V+Math.imul(q,en)|0)|0)+((8191&(Z=(Z=Z+Math.imul(q,Qt)|0)+Math.imul(U,en)|0))<<13)|0;K=((Y=Y+Math.imul(U,Qt)|0)+(Z>>>13)|0)+(Be>>>26)|0,Be&=67108863,V=Math.imul(me,nt),Z=(Z=Math.imul(me,ct))+Math.imul(we,nt)|0,Y=Math.imul(we,ct),V=V+Math.imul(pe,kt)|0,Z=(Z=Z+Math.imul(pe,Bt)|0)+Math.imul(de,kt)|0,Y=Y+Math.imul(de,Bt)|0,V=V+Math.imul(ne,ht)|0,Z=(Z=Z+Math.imul(ne,at)|0)+Math.imul(le,ht)|0,Y=Y+Math.imul(le,at)|0,V=V+Math.imul(ae,en)|0,Z=(Z=Z+Math.imul(ae,Qt)|0)+Math.imul(G,en)|0,Y=Y+Math.imul(G,Qt)|0;var tt=(K+(V=V+Math.imul(q,dn)|0)|0)+((8191&(Z=(Z=Z+Math.imul(q,Mn)|0)+Math.imul(U,dn)|0))<<13)|0;K=((Y=Y+Math.imul(U,Mn)|0)+(Z>>>13)|0)+(tt>>>26)|0,tt&=67108863,V=Math.imul(Le,nt),Z=(Z=Math.imul(Le,ct))+Math.imul(Ie,nt)|0,Y=Math.imul(Ie,ct),V=V+Math.imul(me,kt)|0,Z=(Z=Z+Math.imul(me,Bt)|0)+Math.imul(we,kt)|0,Y=Y+Math.imul(we,Bt)|0,V=V+Math.imul(pe,ht)|0,Z=(Z=Z+Math.imul(pe,at)|0)+Math.imul(de,ht)|0,Y=Y+Math.imul(de,at)|0,V=V+Math.imul(ne,en)|0,Z=(Z=Z+Math.imul(ne,Qt)|0)+Math.imul(le,en)|0,Y=Y+Math.imul(le,Qt)|0,V=V+Math.imul(ae,dn)|0,Z=(Z=Z+Math.imul(ae,Mn)|0)+Math.imul(G,dn)|0,Y=Y+Math.imul(G,Mn)|0;var dt=(K+(V=V+Math.imul(q,ke)|0)|0)+((8191&(Z=(Z=Z+Math.imul(q,Se)|0)+Math.imul(U,ke)|0))<<13)|0;K=((Y=Y+Math.imul(U,Se)|0)+(Z>>>13)|0)+(dt>>>26)|0,dt&=67108863,V=Math.imul(ye,nt),Z=(Z=Math.imul(ye,ct))+Math.imul(Me,nt)|0,Y=Math.imul(Me,ct),V=V+Math.imul(Le,kt)|0,Z=(Z=Z+Math.imul(Le,Bt)|0)+Math.imul(Ie,kt)|0,Y=Y+Math.imul(Ie,Bt)|0,V=V+Math.imul(me,ht)|0,Z=(Z=Z+Math.imul(me,at)|0)+Math.imul(we,ht)|0,Y=Y+Math.imul(we,at)|0,V=V+Math.imul(pe,en)|0,Z=(Z=Z+Math.imul(pe,Qt)|0)+Math.imul(de,en)|0,Y=Y+Math.imul(de,Qt)|0,V=V+Math.imul(ne,dn)|0,Z=(Z=Z+Math.imul(ne,Mn)|0)+Math.imul(le,dn)|0,Y=Y+Math.imul(le,Mn)|0,V=V+Math.imul(ae,ke)|0,Z=(Z=Z+Math.imul(ae,Se)|0)+Math.imul(G,ke)|0,Y=Y+Math.imul(G,Se)|0;var Dt=(K+(V=V+Math.imul(q,Ve)|0)|0)+((8191&(Z=(Z=Z+Math.imul(q,Ge)|0)+Math.imul(U,Ve)|0))<<13)|0;K=((Y=Y+Math.imul(U,Ge)|0)+(Z>>>13)|0)+(Dt>>>26)|0,Dt&=67108863,V=Math.imul(Pe,nt),Z=(Z=Math.imul(Pe,ct))+Math.imul(Re,nt)|0,Y=Math.imul(Re,ct),V=V+Math.imul(ye,kt)|0,Z=(Z=Z+Math.imul(ye,Bt)|0)+Math.imul(Me,kt)|0,Y=Y+Math.imul(Me,Bt)|0,V=V+Math.imul(Le,ht)|0,Z=(Z=Z+Math.imul(Le,at)|0)+Math.imul(Ie,ht)|0,Y=Y+Math.imul(Ie,at)|0,V=V+Math.imul(me,en)|0,Z=(Z=Z+Math.imul(me,Qt)|0)+Math.imul(we,en)|0,Y=Y+Math.imul(we,Qt)|0,V=V+Math.imul(pe,dn)|0,Z=(Z=Z+Math.imul(pe,Mn)|0)+Math.imul(de,dn)|0,Y=Y+Math.imul(de,Mn)|0,V=V+Math.imul(ne,ke)|0,Z=(Z=Z+Math.imul(ne,Se)|0)+Math.imul(le,ke)|0,Y=Y+Math.imul(le,Se)|0,V=V+Math.imul(ae,Ve)|0,Z=(Z=Z+Math.imul(ae,Ge)|0)+Math.imul(G,Ve)|0,Y=Y+Math.imul(G,Ge)|0;var Nt=(K+(V=V+Math.imul(q,ot)|0)|0)+((8191&(Z=(Z=Z+Math.imul(q,it)|0)+Math.imul(U,ot)|0))<<13)|0;K=((Y=Y+Math.imul(U,it)|0)+(Z>>>13)|0)+(Nt>>>26)|0,Nt&=67108863,V=Math.imul(qe,nt),Z=(Z=Math.imul(qe,ct))+Math.imul(Xe,nt)|0,Y=Math.imul(Xe,ct),V=V+Math.imul(Pe,kt)|0,Z=(Z=Z+Math.imul(Pe,Bt)|0)+Math.imul(Re,kt)|0,Y=Y+Math.imul(Re,Bt)|0,V=V+Math.imul(ye,ht)|0,Z=(Z=Z+Math.imul(ye,at)|0)+Math.imul(Me,ht)|0,Y=Y+Math.imul(Me,at)|0,V=V+Math.imul(Le,en)|0,Z=(Z=Z+Math.imul(Le,Qt)|0)+Math.imul(Ie,en)|0,Y=Y+Math.imul(Ie,Qt)|0,V=V+Math.imul(me,dn)|0,Z=(Z=Z+Math.imul(me,Mn)|0)+Math.imul(we,dn)|0,Y=Y+Math.imul(we,Mn)|0,V=V+Math.imul(pe,ke)|0,Z=(Z=Z+Math.imul(pe,Se)|0)+Math.imul(de,ke)|0,Y=Y+Math.imul(de,Se)|0,V=V+Math.imul(ne,Ve)|0,Z=(Z=Z+Math.imul(ne,Ge)|0)+Math.imul(le,Ve)|0,Y=Y+Math.imul(le,Ge)|0,V=V+Math.imul(ae,ot)|0,Z=(Z=Z+Math.imul(ae,it)|0)+Math.imul(G,ot)|0,Y=Y+Math.imul(G,it)|0;var Yt=(K+(V=V+Math.imul(q,xt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(q,Vt)|0)+Math.imul(U,xt)|0))<<13)|0;K=((Y=Y+Math.imul(U,Vt)|0)+(Z>>>13)|0)+(Yt>>>26)|0,Yt&=67108863,V=Math.imul(He,nt),Z=(Z=Math.imul(He,ct))+Math.imul($e,nt)|0,Y=Math.imul($e,ct),V=V+Math.imul(qe,kt)|0,Z=(Z=Z+Math.imul(qe,Bt)|0)+Math.imul(Xe,kt)|0,Y=Y+Math.imul(Xe,Bt)|0,V=V+Math.imul(Pe,ht)|0,Z=(Z=Z+Math.imul(Pe,at)|0)+Math.imul(Re,ht)|0,Y=Y+Math.imul(Re,at)|0,V=V+Math.imul(ye,en)|0,Z=(Z=Z+Math.imul(ye,Qt)|0)+Math.imul(Me,en)|0,Y=Y+Math.imul(Me,Qt)|0,V=V+Math.imul(Le,dn)|0,Z=(Z=Z+Math.imul(Le,Mn)|0)+Math.imul(Ie,dn)|0,Y=Y+Math.imul(Ie,Mn)|0,V=V+Math.imul(me,ke)|0,Z=(Z=Z+Math.imul(me,Se)|0)+Math.imul(we,ke)|0,Y=Y+Math.imul(we,Se)|0,V=V+Math.imul(pe,Ve)|0,Z=(Z=Z+Math.imul(pe,Ge)|0)+Math.imul(de,Ve)|0,Y=Y+Math.imul(de,Ge)|0,V=V+Math.imul(ne,ot)|0,Z=(Z=Z+Math.imul(ne,it)|0)+Math.imul(le,ot)|0,Y=Y+Math.imul(le,it)|0,V=V+Math.imul(ae,xt)|0,Z=(Z=Z+Math.imul(ae,Vt)|0)+Math.imul(G,xt)|0,Y=Y+Math.imul(G,Vt)|0;var fn=(K+(V=V+Math.imul(q,pt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(q,At)|0)+Math.imul(U,pt)|0))<<13)|0;K=((Y=Y+Math.imul(U,At)|0)+(Z>>>13)|0)+(fn>>>26)|0,fn&=67108863,V=Math.imul(He,kt),Z=(Z=Math.imul(He,Bt))+Math.imul($e,kt)|0,Y=Math.imul($e,Bt),V=V+Math.imul(qe,ht)|0,Z=(Z=Z+Math.imul(qe,at)|0)+Math.imul(Xe,ht)|0,Y=Y+Math.imul(Xe,at)|0,V=V+Math.imul(Pe,en)|0,Z=(Z=Z+Math.imul(Pe,Qt)|0)+Math.imul(Re,en)|0,Y=Y+Math.imul(Re,Qt)|0,V=V+Math.imul(ye,dn)|0,Z=(Z=Z+Math.imul(ye,Mn)|0)+Math.imul(Me,dn)|0,Y=Y+Math.imul(Me,Mn)|0,V=V+Math.imul(Le,ke)|0,Z=(Z=Z+Math.imul(Le,Se)|0)+Math.imul(Ie,ke)|0,Y=Y+Math.imul(Ie,Se)|0,V=V+Math.imul(me,Ve)|0,Z=(Z=Z+Math.imul(me,Ge)|0)+Math.imul(we,Ve)|0,Y=Y+Math.imul(we,Ge)|0,V=V+Math.imul(pe,ot)|0,Z=(Z=Z+Math.imul(pe,it)|0)+Math.imul(de,ot)|0,Y=Y+Math.imul(de,it)|0,V=V+Math.imul(ne,xt)|0,Z=(Z=Z+Math.imul(ne,Vt)|0)+Math.imul(le,xt)|0,Y=Y+Math.imul(le,Vt)|0;var nn=(K+(V=V+Math.imul(ae,pt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(ae,At)|0)+Math.imul(G,pt)|0))<<13)|0;K=((Y=Y+Math.imul(G,At)|0)+(Z>>>13)|0)+(nn>>>26)|0,nn&=67108863,V=Math.imul(He,ht),Z=(Z=Math.imul(He,at))+Math.imul($e,ht)|0,Y=Math.imul($e,at),V=V+Math.imul(qe,en)|0,Z=(Z=Z+Math.imul(qe,Qt)|0)+Math.imul(Xe,en)|0,Y=Y+Math.imul(Xe,Qt)|0,V=V+Math.imul(Pe,dn)|0,Z=(Z=Z+Math.imul(Pe,Mn)|0)+Math.imul(Re,dn)|0,Y=Y+Math.imul(Re,Mn)|0,V=V+Math.imul(ye,ke)|0,Z=(Z=Z+Math.imul(ye,Se)|0)+Math.imul(Me,ke)|0,Y=Y+Math.imul(Me,Se)|0,V=V+Math.imul(Le,Ve)|0,Z=(Z=Z+Math.imul(Le,Ge)|0)+Math.imul(Ie,Ve)|0,Y=Y+Math.imul(Ie,Ge)|0,V=V+Math.imul(me,ot)|0,Z=(Z=Z+Math.imul(me,it)|0)+Math.imul(we,ot)|0,Y=Y+Math.imul(we,it)|0,V=V+Math.imul(pe,xt)|0,Z=(Z=Z+Math.imul(pe,Vt)|0)+Math.imul(de,xt)|0,Y=Y+Math.imul(de,Vt)|0;var In=(K+(V=V+Math.imul(ne,pt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(ne,At)|0)+Math.imul(le,pt)|0))<<13)|0;K=((Y=Y+Math.imul(le,At)|0)+(Z>>>13)|0)+(In>>>26)|0,In&=67108863,V=Math.imul(He,en),Z=(Z=Math.imul(He,Qt))+Math.imul($e,en)|0,Y=Math.imul($e,Qt),V=V+Math.imul(qe,dn)|0,Z=(Z=Z+Math.imul(qe,Mn)|0)+Math.imul(Xe,dn)|0,Y=Y+Math.imul(Xe,Mn)|0,V=V+Math.imul(Pe,ke)|0,Z=(Z=Z+Math.imul(Pe,Se)|0)+Math.imul(Re,ke)|0,Y=Y+Math.imul(Re,Se)|0,V=V+Math.imul(ye,Ve)|0,Z=(Z=Z+Math.imul(ye,Ge)|0)+Math.imul(Me,Ve)|0,Y=Y+Math.imul(Me,Ge)|0,V=V+Math.imul(Le,ot)|0,Z=(Z=Z+Math.imul(Le,it)|0)+Math.imul(Ie,ot)|0,Y=Y+Math.imul(Ie,it)|0,V=V+Math.imul(me,xt)|0,Z=(Z=Z+Math.imul(me,Vt)|0)+Math.imul(we,xt)|0,Y=Y+Math.imul(we,Vt)|0;var Dn=(K+(V=V+Math.imul(pe,pt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(pe,At)|0)+Math.imul(de,pt)|0))<<13)|0;K=((Y=Y+Math.imul(de,At)|0)+(Z>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,V=Math.imul(He,dn),Z=(Z=Math.imul(He,Mn))+Math.imul($e,dn)|0,Y=Math.imul($e,Mn),V=V+Math.imul(qe,ke)|0,Z=(Z=Z+Math.imul(qe,Se)|0)+Math.imul(Xe,ke)|0,Y=Y+Math.imul(Xe,Se)|0,V=V+Math.imul(Pe,Ve)|0,Z=(Z=Z+Math.imul(Pe,Ge)|0)+Math.imul(Re,Ve)|0,Y=Y+Math.imul(Re,Ge)|0,V=V+Math.imul(ye,ot)|0,Z=(Z=Z+Math.imul(ye,it)|0)+Math.imul(Me,ot)|0,Y=Y+Math.imul(Me,it)|0,V=V+Math.imul(Le,xt)|0,Z=(Z=Z+Math.imul(Le,Vt)|0)+Math.imul(Ie,xt)|0,Y=Y+Math.imul(Ie,Vt)|0;var kn=(K+(V=V+Math.imul(me,pt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(me,At)|0)+Math.imul(we,pt)|0))<<13)|0;K=((Y=Y+Math.imul(we,At)|0)+(Z>>>13)|0)+(kn>>>26)|0,kn&=67108863,V=Math.imul(He,ke),Z=(Z=Math.imul(He,Se))+Math.imul($e,ke)|0,Y=Math.imul($e,Se),V=V+Math.imul(qe,Ve)|0,Z=(Z=Z+Math.imul(qe,Ge)|0)+Math.imul(Xe,Ve)|0,Y=Y+Math.imul(Xe,Ge)|0,V=V+Math.imul(Pe,ot)|0,Z=(Z=Z+Math.imul(Pe,it)|0)+Math.imul(Re,ot)|0,Y=Y+Math.imul(Re,it)|0,V=V+Math.imul(ye,xt)|0,Z=(Z=Z+Math.imul(ye,Vt)|0)+Math.imul(Me,xt)|0,Y=Y+Math.imul(Me,Vt)|0;var rn=(K+(V=V+Math.imul(Le,pt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(Le,At)|0)+Math.imul(Ie,pt)|0))<<13)|0;K=((Y=Y+Math.imul(Ie,At)|0)+(Z>>>13)|0)+(rn>>>26)|0,rn&=67108863,V=Math.imul(He,Ve),Z=(Z=Math.imul(He,Ge))+Math.imul($e,Ve)|0,Y=Math.imul($e,Ge),V=V+Math.imul(qe,ot)|0,Z=(Z=Z+Math.imul(qe,it)|0)+Math.imul(Xe,ot)|0,Y=Y+Math.imul(Xe,it)|0,V=V+Math.imul(Pe,xt)|0,Z=(Z=Z+Math.imul(Pe,Vt)|0)+Math.imul(Re,xt)|0,Y=Y+Math.imul(Re,Vt)|0;var pn=(K+(V=V+Math.imul(ye,pt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(ye,At)|0)+Math.imul(Me,pt)|0))<<13)|0;K=((Y=Y+Math.imul(Me,At)|0)+(Z>>>13)|0)+(pn>>>26)|0,pn&=67108863,V=Math.imul(He,ot),Z=(Z=Math.imul(He,it))+Math.imul($e,ot)|0,Y=Math.imul($e,it),V=V+Math.imul(qe,xt)|0,Z=(Z=Z+Math.imul(qe,Vt)|0)+Math.imul(Xe,xt)|0,Y=Y+Math.imul(Xe,Vt)|0;var gn=(K+(V=V+Math.imul(Pe,pt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(Pe,At)|0)+Math.imul(Re,pt)|0))<<13)|0;K=((Y=Y+Math.imul(Re,At)|0)+(Z>>>13)|0)+(gn>>>26)|0,gn&=67108863,V=Math.imul(He,xt),Z=(Z=Math.imul(He,Vt))+Math.imul($e,xt)|0,Y=Math.imul($e,Vt);var Pn=(K+(V=V+Math.imul(qe,pt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(qe,At)|0)+Math.imul(Xe,pt)|0))<<13)|0;K=((Y=Y+Math.imul(Xe,At)|0)+(Z>>>13)|0)+(Pn>>>26)|0,Pn&=67108863;var jn=(K+(V=Math.imul(He,pt))|0)+((8191&(Z=(Z=Math.imul(He,At))+Math.imul($e,pt)|0))<<13)|0;return K=((Y=Math.imul($e,At))+(Z>>>13)|0)+(jn>>>26)|0,jn&=67108863,X[0]=Xt,X[1]=Ct,X[2]=Pt,X[3]=Be,X[4]=tt,X[5]=dt,X[6]=Dt,X[7]=Nt,X[8]=Yt,X[9]=fn,X[10]=nn,X[11]=In,X[12]=Dn,X[13]=kn,X[14]=rn,X[15]=pn,X[16]=gn,X[17]=Pn,X[18]=jn,0!==K&&(X[19]=K,j.length++),j};function w(I,P,j){return(new c).mulp(I,P,j)}function c(I,P){this.x=I,this.y=P}Math.imul||(u=m),i.prototype.mulTo=function(I,P){var j=this.length+I.length;return 10===this.length&&10===I.length?u(this,I,P):j<63?m(this,I,P):j<1024?function(V,Z,Y){Y.negative=Z.negative^V.negative,Y.length=V.length+Z.length;for(var ee=0,re=0,X=0;X<Y.length-1;X++){var K=re;re=0;for(var ie=67108863&ee,q=Math.min(X,Z.length-1),U=Math.max(0,X-V.length+1);U<=q;U++){var ae=(0|V.words[X-U])*(0|Z.words[U]),G=67108863&ae;ie=67108863&(G=G+ie|0),re+=(K=(K=K+(ae/67108864|0)|0)+(G>>>26)|0)>>>26,K&=67108863}Y.words[X]=ie,ee=K,K=re}return 0!==ee?Y.words[X]=ee:Y.length--,Y.strip()}(this,I,P):w(this,I,P)},c.prototype.makeRBT=function(I){for(var P=new Array(I),j=i.prototype._countBits(I)-1,V=0;V<I;V++)P[V]=this.revBin(V,j,I);return P},c.prototype.revBin=function(I,P,j){if(0===I||I===j-1)return I;for(var V=0,Z=0;Z<P;Z++)V|=(1&I)<<P-Z-1,I>>=1;return V},c.prototype.permute=function(I,P,j,V,Z,Y){for(var ee=0;ee<Y;ee++)V[ee]=P[I[ee]],Z[ee]=j[I[ee]]},c.prototype.transform=function(I,P,j,V,Z,Y){this.permute(Y,I,P,j,V,Z);for(var ee=1;ee<Z;ee<<=1)for(var re=ee<<1,X=Math.cos(2*Math.PI/re),K=Math.sin(2*Math.PI/re),ie=0;ie<Z;ie+=re)for(var q=X,U=K,W=0;W<ee;W++){var ae=j[ie+W],G=V[ie+W],te=j[ie+W+ee],ne=V[ie+W+ee],le=q*te-U*ne;ne=q*ne+U*te,j[ie+W]=ae+(te=le),V[ie+W]=G+ne,j[ie+W+ee]=ae-te,V[ie+W+ee]=G-ne,W!==re&&(le=X*q-K*U,U=X*U+K*q,q=le)}},c.prototype.guessLen13b=function(I,P){var j=1|Math.max(P,I),V=1&j,Z=0;for(j=j/2|0;j;j>>>=1)Z++;return 1<<Z+1+V},c.prototype.conjugate=function(I,P,j){if(!(j<=1))for(var V=0;V<j/2;V++){var Z=I[V];I[V]=I[j-V-1],I[j-V-1]=Z,Z=P[V],P[V]=-P[j-V-1],P[j-V-1]=-Z}},c.prototype.normalize13b=function(I,P){for(var j=0,V=0;V<P/2;V++){var Z=8192*Math.round(I[2*V+1]/P)+Math.round(I[2*V]/P)+j;I[V]=67108863&Z,j=Z<67108864?0:Z/67108864|0}return I},c.prototype.convert13b=function(I,P,j,V){for(var Z=0,Y=0;Y<P;Y++)j[2*Y]=8191&(Z+=0|I[Y]),j[2*Y+1]=8191&(Z>>>=13),Z>>>=13;for(Y=2*P;Y<V;++Y)j[Y]=0;a(0===Z),a(0==(-8192&Z))},c.prototype.stub=function(I){for(var P=new Array(I),j=0;j<I;j++)P[j]=0;return P},c.prototype.mulp=function(I,P,j){var V=2*this.guessLen13b(I.length,P.length),Z=this.makeRBT(V),Y=this.stub(V),ee=new Array(V),re=new Array(V),X=new Array(V),K=new Array(V),ie=new Array(V),q=new Array(V),U=j.words;U.length=V,this.convert13b(I.words,I.length,ee,V),this.convert13b(P.words,P.length,K,V),this.transform(ee,Y,re,X,V,Z),this.transform(K,Y,ie,q,V,Z);for(var W=0;W<V;W++){var ae=re[W]*ie[W]-X[W]*q[W];X[W]=re[W]*q[W]+X[W]*ie[W],re[W]=ae}return this.conjugate(re,X,V),this.transform(re,X,U,Y,V,Z),this.conjugate(U,Y,V),this.normalize13b(U,V),j.negative=I.negative^P.negative,j.length=I.length+P.length,j.strip()},i.prototype.mul=function(I){var P=new i(null);return P.words=new Array(this.length+I.length),this.mulTo(I,P)},i.prototype.mulf=function(I){var P=new i(null);return P.words=new Array(this.length+I.length),w(this,I,P)},i.prototype.imul=function(I){return this.clone().mulTo(I,this)},i.prototype.imuln=function(I){a("number"==typeof I),a(I<67108864);for(var P=0,j=0;j<this.length;j++){var V=(0|this.words[j])*I,Z=(67108863&V)+(67108863&P);P>>=26,P+=V/67108864|0,P+=Z>>>26,this.words[j]=67108863&Z}return 0!==P&&(this.words[j]=P,this.length++),this},i.prototype.muln=function(I){return this.clone().imuln(I)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(I){var P=function(Y){for(var ee=new Array(Y.bitLength()),re=0;re<ee.length;re++){var K=re%26;ee[re]=(Y.words[re/26|0]&1<<K)>>>K}return ee}(I);if(0===P.length)return new i(1);for(var j=this,V=0;V<P.length&&0===P[V];V++,j=j.sqr());if(++V<P.length)for(var Z=j.sqr();V<P.length;V++,Z=Z.sqr())0!==P[V]&&(j=j.mul(Z));return j},i.prototype.iushln=function(I){a("number"==typeof I&&I>=0);var P,j=I%26,V=(I-j)/26,Z=67108863>>>26-j<<26-j;if(0!==j){var Y=0;for(P=0;P<this.length;P++){var ee=this.words[P]&Z;this.words[P]=(0|this.words[P])-ee<<j|Y,Y=ee>>>26-j}Y&&(this.words[P]=Y,this.length++)}if(0!==V){for(P=this.length-1;P>=0;P--)this.words[P+V]=this.words[P];for(P=0;P<V;P++)this.words[P]=0;this.length+=V}return this.strip()},i.prototype.ishln=function(I){return a(0===this.negative),this.iushln(I)},i.prototype.iushrn=function(I,P,j){var V;a("number"==typeof I&&I>=0),V=P?(P-P%26)/26:0;var Z=I%26,Y=Math.min((I-Z)/26,this.length),ee=67108863^67108863>>>Z<<Z,re=j;if(V-=Y,V=Math.max(0,V),re){for(var X=0;X<Y;X++)re.words[X]=this.words[X];re.length=Y}if(0!==Y)if(this.length>Y)for(this.length-=Y,X=0;X<this.length;X++)this.words[X]=this.words[X+Y];else this.words[0]=0,this.length=1;var K=0;for(X=this.length-1;X>=0&&(0!==K||X>=V);X--){var ie=0|this.words[X];this.words[X]=K<<26-Z|ie>>>Z,K=ie&ee}return re&&0!==K&&(re.words[re.length++]=K),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(I,P,j){return a(0===this.negative),this.iushrn(I,P,j)},i.prototype.shln=function(I){return this.clone().ishln(I)},i.prototype.ushln=function(I){return this.clone().iushln(I)},i.prototype.shrn=function(I){return this.clone().ishrn(I)},i.prototype.ushrn=function(I){return this.clone().iushrn(I)},i.prototype.testn=function(I){a("number"==typeof I&&I>=0);var P=I%26,j=(I-P)/26;return!(this.length<=j||!(this.words[j]&1<<P))},i.prototype.imaskn=function(I){a("number"==typeof I&&I>=0);var P=I%26,j=(I-P)/26;return a(0===this.negative,"imaskn works only with positive numbers"),this.length<=j?this:(0!==P&&j++,this.length=Math.min(j,this.length),0!==P&&(this.words[this.length-1]&=67108863^67108863>>>P<<P),this.strip())},i.prototype.maskn=function(I){return this.clone().imaskn(I)},i.prototype.iaddn=function(I){return a("number"==typeof I),a(I<67108864),I<0?this.isubn(-I):0!==this.negative?1===this.length&&(0|this.words[0])<I?(this.words[0]=I-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(I),this.negative=1,this):this._iaddn(I)},i.prototype._iaddn=function(I){this.words[0]+=I;for(var P=0;P<this.length&&this.words[P]>=67108864;P++)this.words[P]-=67108864,P===this.length-1?this.words[P+1]=1:this.words[P+1]++;return this.length=Math.max(this.length,P+1),this},i.prototype.isubn=function(I){if(a("number"==typeof I),a(I<67108864),I<0)return this.iaddn(-I);if(0!==this.negative)return this.negative=0,this.iaddn(I),this.negative=1,this;if(this.words[0]-=I,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var P=0;P<this.length&&this.words[P]<0;P++)this.words[P]+=67108864,this.words[P+1]-=1;return this.strip()},i.prototype.addn=function(I){return this.clone().iaddn(I)},i.prototype.subn=function(I){return this.clone().isubn(I)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(I,P,j){var V,Z;this._expand(I.length+j);var ee=0;for(V=0;V<I.length;V++){Z=(0|this.words[V+j])+ee;var re=(0|I.words[V])*P;ee=((Z-=67108863&re)>>26)-(re/67108864|0),this.words[V+j]=67108863&Z}for(;V<this.length-j;V++)ee=(Z=(0|this.words[V+j])+ee)>>26,this.words[V+j]=67108863&Z;if(0===ee)return this.strip();for(a(-1===ee),ee=0,V=0;V<this.length;V++)ee=(Z=-(0|this.words[V])+ee)>>26,this.words[V]=67108863&Z;return this.negative=1,this.strip()},i.prototype._wordDiv=function(I,P){var j,V=this.clone(),Z=I,Y=0|Z.words[Z.length-1];0!=(j=26-this._countBits(Y))&&(Z=Z.ushln(j),V.iushln(j),Y=0|Z.words[Z.length-1]);var ee,re=V.length-Z.length;if("mod"!==P){(ee=new i(null)).length=re+1,ee.words=new Array(ee.length);for(var X=0;X<ee.length;X++)ee.words[X]=0}var K=V.clone()._ishlnsubmul(Z,1,re);0===K.negative&&(V=K,ee&&(ee.words[re]=1));for(var ie=re-1;ie>=0;ie--){var q=67108864*(0|V.words[Z.length+ie])+(0|V.words[Z.length+ie-1]);for(q=Math.min(q/Y|0,67108863),V._ishlnsubmul(Z,q,ie);0!==V.negative;)q--,V.negative=0,V._ishlnsubmul(Z,1,ie),V.isZero()||(V.negative^=1);ee&&(ee.words[ie]=q)}return ee&&ee.strip(),V.strip(),"div"!==P&&0!==j&&V.iushrn(j),{div:ee||null,mod:V}},i.prototype.divmod=function(I,P,j){return a(!I.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===I.negative?(Y=this.neg().divmod(I,P),"mod"!==P&&(V=Y.div.neg()),"div"!==P&&(Z=Y.mod.neg(),j&&0!==Z.negative&&Z.iadd(I)),{div:V,mod:Z}):0===this.negative&&0!==I.negative?(Y=this.divmod(I.neg(),P),"mod"!==P&&(V=Y.div.neg()),{div:V,mod:Y.mod}):0!=(this.negative&I.negative)?(Y=this.neg().divmod(I.neg(),P),"div"!==P&&(Z=Y.mod.neg(),j&&0!==Z.negative&&Z.isub(I)),{div:Y.div,mod:Z}):I.length>this.length||this.cmp(I)<0?{div:new i(0),mod:this}:1===I.length?"div"===P?{div:this.divn(I.words[0]),mod:null}:"mod"===P?{div:null,mod:new i(this.modn(I.words[0]))}:{div:this.divn(I.words[0]),mod:new i(this.modn(I.words[0]))}:this._wordDiv(I,P);var V,Z,Y},i.prototype.div=function(I){return this.divmod(I,"div",!1).div},i.prototype.mod=function(I){return this.divmod(I,"mod",!1).mod},i.prototype.umod=function(I){return this.divmod(I,"mod",!0).mod},i.prototype.divRound=function(I){var P=this.divmod(I);if(P.mod.isZero())return P.div;var j=0!==P.div.negative?P.mod.isub(I):P.mod,V=I.ushrn(1),Z=I.andln(1),Y=j.cmp(V);return Y<0||1===Z&&0===Y?P.div:0!==P.div.negative?P.div.isubn(1):P.div.iaddn(1)},i.prototype.modn=function(I){a(I<=67108863);for(var P=(1<<26)%I,j=0,V=this.length-1;V>=0;V--)j=(P*j+(0|this.words[V]))%I;return j},i.prototype.idivn=function(I){a(I<=67108863);for(var P=0,j=this.length-1;j>=0;j--){var V=(0|this.words[j])+67108864*P;this.words[j]=V/I|0,P=V%I}return this.strip()},i.prototype.divn=function(I){return this.clone().idivn(I)},i.prototype.egcd=function(I){a(0===I.negative),a(!I.isZero());var P=this,j=I.clone();P=0!==P.negative?P.umod(I):P.clone();for(var V=new i(1),Z=new i(0),Y=new i(0),ee=new i(1),re=0;P.isEven()&&j.isEven();)P.iushrn(1),j.iushrn(1),++re;for(var X=j.clone(),K=P.clone();!P.isZero();){for(var ie=0,q=1;0==(P.words[0]&q)&&ie<26;++ie,q<<=1);if(ie>0)for(P.iushrn(ie);ie-- >0;)(V.isOdd()||Z.isOdd())&&(V.iadd(X),Z.isub(K)),V.iushrn(1),Z.iushrn(1);for(var U=0,W=1;0==(j.words[0]&W)&&U<26;++U,W<<=1);if(U>0)for(j.iushrn(U);U-- >0;)(Y.isOdd()||ee.isOdd())&&(Y.iadd(X),ee.isub(K)),Y.iushrn(1),ee.iushrn(1);P.cmp(j)>=0?(P.isub(j),V.isub(Y),Z.isub(ee)):(j.isub(P),Y.isub(V),ee.isub(Z))}return{a:Y,b:ee,gcd:j.iushln(re)}},i.prototype._invmp=function(I){a(0===I.negative),a(!I.isZero());var P=this,j=I.clone();P=0!==P.negative?P.umod(I):P.clone();for(var V,Z=new i(1),Y=new i(0),ee=j.clone();P.cmpn(1)>0&&j.cmpn(1)>0;){for(var re=0,X=1;0==(P.words[0]&X)&&re<26;++re,X<<=1);if(re>0)for(P.iushrn(re);re-- >0;)Z.isOdd()&&Z.iadd(ee),Z.iushrn(1);for(var K=0,ie=1;0==(j.words[0]&ie)&&K<26;++K,ie<<=1);if(K>0)for(j.iushrn(K);K-- >0;)Y.isOdd()&&Y.iadd(ee),Y.iushrn(1);P.cmp(j)>=0?(P.isub(j),Z.isub(Y)):(j.isub(P),Y.isub(Z))}return(V=0===P.cmpn(1)?Z:Y).cmpn(0)<0&&V.iadd(I),V},i.prototype.gcd=function(I){if(this.isZero())return I.abs();if(I.isZero())return this.abs();var P=this.clone(),j=I.clone();P.negative=0,j.negative=0;for(var V=0;P.isEven()&&j.isEven();V++)P.iushrn(1),j.iushrn(1);for(;;){for(;P.isEven();)P.iushrn(1);for(;j.isEven();)j.iushrn(1);var Z=P.cmp(j);if(Z<0){var Y=P;P=j,j=Y}else if(0===Z||0===j.cmpn(1))break;P.isub(j)}return j.iushln(V)},i.prototype.invm=function(I){return this.egcd(I).a.umod(I)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(I){return this.words[0]&I},i.prototype.bincn=function(I){a("number"==typeof I);var P=I%26,j=(I-P)/26,V=1<<P;if(this.length<=j)return this._expand(j+1),this.words[j]|=V,this;for(var Z=V,Y=j;0!==Z&&Y<this.length;Y++){var ee=0|this.words[Y];Z=(ee+=Z)>>>26,this.words[Y]=ee&=67108863}return 0!==Z&&(this.words[Y]=Z,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(I){var P,j=I<0;if(0!==this.negative&&!j)return-1;if(0===this.negative&&j)return 1;if(this.strip(),this.length>1)P=1;else{j&&(I=-I),a(I<=67108863,"Number is too big");var V=0|this.words[0];P=V===I?0:V<I?-1:1}return 0!==this.negative?0|-P:P},i.prototype.cmp=function(I){if(0!==this.negative&&0===I.negative)return-1;if(0===this.negative&&0!==I.negative)return 1;var P=this.ucmp(I);return 0!==this.negative?0|-P:P},i.prototype.ucmp=function(I){if(this.length>I.length)return 1;if(this.length<I.length)return-1;for(var P=0,j=this.length-1;j>=0;j--){var V=0|this.words[j],Z=0|I.words[j];if(V!==Z){V<Z?P=-1:V>Z&&(P=1);break}}return P},i.prototype.gtn=function(I){return 1===this.cmpn(I)},i.prototype.gt=function(I){return 1===this.cmp(I)},i.prototype.gten=function(I){return this.cmpn(I)>=0},i.prototype.gte=function(I){return this.cmp(I)>=0},i.prototype.ltn=function(I){return-1===this.cmpn(I)},i.prototype.lt=function(I){return-1===this.cmp(I)},i.prototype.lten=function(I){return this.cmpn(I)<=0},i.prototype.lte=function(I){return this.cmp(I)<=0},i.prototype.eqn=function(I){return 0===this.cmpn(I)},i.prototype.eq=function(I){return 0===this.cmp(I)},i.red=function(I){return new N(I)},i.prototype.toRed=function(I){return a(!this.red,"Already a number in reduction context"),a(0===this.negative,"red works only with positives"),I.convertTo(this)._forceRed(I)},i.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(I){return this.red=I,this},i.prototype.forceRed=function(I){return a(!this.red,"Already a number in reduction context"),this._forceRed(I)},i.prototype.redAdd=function(I){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,I)},i.prototype.redIAdd=function(I){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,I)},i.prototype.redSub=function(I){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,I)},i.prototype.redISub=function(I){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,I)},i.prototype.redShl=function(I){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,I)},i.prototype.redMul=function(I){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.mul(this,I)},i.prototype.redIMul=function(I){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.imul(this,I)},i.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(I){return a(this.red&&!I.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,I)};var A={k256:null,p224:null,p192:null,p25519:null};function k(I,P){this.name=I,this.p=new i(P,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function C(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function E(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function L(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function D(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function N(I){if("string"==typeof I){var P=i._prime(I);this.m=P.p,this.prime=P}else a(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}function F(I){N.call(this,I),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}k.prototype._tmp=function(){var I=new i(null);return I.words=new Array(Math.ceil(this.n/13)),I},k.prototype.ireduce=function(I){var P,j=I;do{this.split(j,this.tmp),P=(j=(j=this.imulK(j)).iadd(this.tmp)).bitLength()}while(P>this.n);var V=P<this.n?-1:j.ucmp(this.p);return 0===V?(j.words[0]=0,j.length=1):V>0?j.isub(this.p):void 0!==j.strip?j.strip():j._strip(),j},k.prototype.split=function(I,P){I.iushrn(this.n,0,P)},k.prototype.imulK=function(I){return I.imul(this.k)},l(C,k),C.prototype.split=function(I,P){for(var j=Math.min(I.length,9),V=0;V<j;V++)P.words[V]=I.words[V];if(P.length=j,I.length<=9)return I.words[0]=0,void(I.length=1);var Z=I.words[9];for(P.words[P.length++]=4194303&Z,V=10;V<I.length;V++){var Y=0|I.words[V];I.words[V-10]=(4194303&Y)<<4|Z>>>22,Z=Y}I.words[V-10]=Z>>>=22,I.length-=0===Z&&I.length>10?10:9},C.prototype.imulK=function(I){I.words[I.length]=0,I.words[I.length+1]=0,I.length+=2;for(var P=0,j=0;j<I.length;j++){var V=0|I.words[j];I.words[j]=67108863&(P+=977*V),P=64*V+(P/67108864|0)}return 0===I.words[I.length-1]&&(I.length--,0===I.words[I.length-1]&&I.length--),I},l(E,k),l(L,k),l(D,k),D.prototype.imulK=function(I){for(var P=0,j=0;j<I.length;j++){var V=19*(0|I.words[j])+P,Z=67108863&V;V>>>=26,I.words[j]=Z,P=V}return 0!==P&&(I.words[I.length++]=P),I},i._prime=function(I){if(A[I])return A[I];var P;if("k256"===I)P=new C;else if("p224"===I)P=new E;else if("p192"===I)P=new L;else{if("p25519"!==I)throw new Error("Unknown prime "+I);P=new D}return A[I]=P,P},N.prototype._verify1=function(I){a(0===I.negative,"red works only with positives"),a(I.red,"red works only with red numbers")},N.prototype._verify2=function(I,P){a(0==(I.negative|P.negative),"red works only with positives"),a(I.red&&I.red===P.red,"red works only with red numbers")},N.prototype.imod=function(I){return this.prime?this.prime.ireduce(I)._forceRed(this):I.umod(this.m)._forceRed(this)},N.prototype.neg=function(I){return I.isZero()?I.clone():this.m.sub(I)._forceRed(this)},N.prototype.add=function(I,P){this._verify2(I,P);var j=I.add(P);return j.cmp(this.m)>=0&&j.isub(this.m),j._forceRed(this)},N.prototype.iadd=function(I,P){this._verify2(I,P);var j=I.iadd(P);return j.cmp(this.m)>=0&&j.isub(this.m),j},N.prototype.sub=function(I,P){this._verify2(I,P);var j=I.sub(P);return j.cmpn(0)<0&&j.iadd(this.m),j._forceRed(this)},N.prototype.isub=function(I,P){this._verify2(I,P);var j=I.isub(P);return j.cmpn(0)<0&&j.iadd(this.m),j},N.prototype.shl=function(I,P){return this._verify1(I),this.imod(I.ushln(P))},N.prototype.imul=function(I,P){return this._verify2(I,P),this.imod(I.imul(P))},N.prototype.mul=function(I,P){return this._verify2(I,P),this.imod(I.mul(P))},N.prototype.isqr=function(I){return this.imul(I,I.clone())},N.prototype.sqr=function(I){return this.mul(I,I)},N.prototype.sqrt=function(I){if(I.isZero())return I.clone();var P=this.m.andln(3);if(a(P%2==1),3===P){var j=this.m.add(new i(1)).iushrn(2);return this.pow(I,j)}for(var V=this.m.subn(1),Z=0;!V.isZero()&&0===V.andln(1);)Z++,V.iushrn(1);a(!V.isZero());var Y=new i(1).toRed(this),ee=Y.redNeg(),re=this.m.subn(1).iushrn(1),X=this.m.bitLength();for(X=new i(2*X*X).toRed(this);0!==this.pow(X,re).cmp(ee);)X.redIAdd(ee);for(var K=this.pow(X,V),ie=this.pow(I,V.addn(1).iushrn(1)),q=this.pow(I,V),U=Z;0!==q.cmp(Y);){for(var W=q,ae=0;0!==W.cmp(Y);ae++)W=W.redSqr();a(ae<U);var G=this.pow(K,new i(1).iushln(U-ae-1));ie=ie.redMul(G),K=G.redSqr(),q=q.redMul(K),U=ae}return ie},N.prototype.invm=function(I){var P=I._invmp(this.m);return 0!==P.negative?(P.negative=0,this.imod(P).redNeg()):this.imod(P)},N.prototype.pow=function(I,P){if(P.isZero())return new i(1).toRed(this);if(0===P.cmpn(1))return I.clone();var j=new Array(16);j[0]=new i(1).toRed(this),j[1]=I;for(var V=2;V<j.length;V++)j[V]=this.mul(j[V-1],I);var Z=j[0],Y=0,ee=0,re=P.bitLength()%26;for(0===re&&(re=26),V=P.length-1;V>=0;V--){for(var X=P.words[V],K=re-1;K>=0;K--){var ie=X>>K&1;Z!==j[0]&&(Z=this.sqr(Z)),0!==ie||0!==Y?(Y<<=1,Y|=ie,(4==++ee||0===V&&0===K)&&(Z=this.mul(Z,j[Y]),ee=0,Y=0)):ee=0}re=26}return Z},N.prototype.convertTo=function(I){var P=I.umod(this.m);return P===I?P.clone():P},N.prototype.convertFrom=function(I){var P=I.clone();return P.red=null,P},i.mont=function(I){return new F(I)},l(F,N),F.prototype.convertTo=function(I){return this.imod(I.ushln(this.shift))},F.prototype.convertFrom=function(I){var P=this.imod(I.mul(this.rinv));return P.red=null,P},F.prototype.imul=function(I,P){if(I.isZero()||P.isZero())return I.words[0]=0,I.length=1,I;var j=I.imul(P),V=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Z=j.isub(V).iushrn(this.shift),Y=Z;return Z.cmp(this.m)>=0?Y=Z.isub(this.m):Z.cmpn(0)<0&&(Y=Z.iadd(this.m)),Y._forceRed(this)},F.prototype.mul=function(I,P){if(I.isZero()||P.isZero())return new i(0)._forceRed(this);var j=I.mul(P),V=j.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Z=j.isub(V).iushrn(this.shift),Y=Z;return Z.cmp(this.m)>=0?Y=Z.isub(this.m):Z.cmpn(0)<0&&(Y=Z.iadd(this.m)),Y._forceRed(this)},F.prototype.invm=function(I){return this.imod(I._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===M||M,this)},{buffer:2}],34:[function(x,M,_){"use strict";M.exports=function(e){var o,a,l,i=e.length,v=0;for(o=0;o<i;++o)v+=e[o].length;var h=new Array(v),s=0;for(o=0;o<i;++o){var d=e[o],p=d.length;for(a=0;a<p;++a){var f=h[s++]=new Array(p-1),g=0;for(l=0;l<p;++l)l!==a&&(f[g++]=d[l]);if(1&a){var m=f[1];f[1]=f[0],f[0]=m}}}return h}},{}],35:[function(x,M,_){"use strict";M.exports=function(f,g,m){switch(arguments.length){case 1:return d(f);case 2:return"function"==typeof g?h(f,f,g,!0):p(f,g);case 3:return h(f,g,m,!1);default:throw new Error("box-intersect: Invalid arguments")}};var e,o=x("typedarray-pool"),a=x("./lib/sweep"),l=x("./lib/intersect");function i(f,g){for(var m=0;m<f;++m)if(!(g[m]<=g[m+f]))return!0;return!1}function v(f,g,m,u){for(var w=0,c=0,A=0,k=f.length;A<k;++A){var C=f[A];if(!i(g,C)){for(var E=0;E<2*g;++E)m[w++]=C[E];u[c++]=A}}return c}function h(f,g,m,u){var w=f.length,c=g.length;if(!(w<=0||c<=0)){var A=f[0].length>>>1;if(!(A<=0)){var k,C=o.mallocDouble(2*A*w),E=o.mallocInt32(w);if((w=v(f,A,C,E))>0){if(1===A&&u)a.init(w),k=a.sweepComplete(A,m,0,w,C,E,0,w,C,E);else{var L=o.mallocDouble(2*A*c),D=o.mallocInt32(c);(c=v(g,A,L,D))>0&&(a.init(w+c),k=1===A?a.sweepBipartite(A,m,0,w,C,E,0,c,L,D):l(A,m,u,w,C,E,c,L,D),o.free(L),o.free(D))}o.free(C),o.free(E)}return k}}}function s(f,g){e.push([f,g])}function d(f){return e=[],h(f,f,s,!0),e}function p(f,g){return e=[],h(f,g,s,!1),e}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(x,M,_){"use strict";function e(o){return o?function(a,l,i,v,h,s,d,p,f,g,m){return h-v>f-p?function(u,w,c,A,k,C,E,L,D,N,F){for(var I=2*u,P=A,j=I*A;P<k;++P,j+=I){var V=C[w+j],Z=C[w+j+u],Y=E[P];e:for(var ee=L,re=I*L;ee<D;++ee,re+=I){var ie=F[ee];if(!(N[w+re+u]<V||Z<N[w+re])){for(var q=w+1;q<u;++q)if(C[q+u+j]<N[q+re]||N[q+u+re]<C[q+j])continue e;var te=c(Y,ie);if(void 0!==te)return te}}}}(a,l,i,v,h,s,d,p,f,g,m):function(u,w,c,A,k,C,E,L,D,N,F){for(var I=2*u,P=L,j=I*L;P<D;++P,j+=I){var V=N[w+j],Z=N[w+j+u],Y=F[P];e:for(var ee=A,re=I*A;ee<k;++ee,re+=I){var ie=E[ee];if(!(Z<C[w+re]||C[w+re+u]<V)){for(var q=w+1;q<u;++q)if(C[q+u+re]<N[q+j]||N[q+u+j]<C[q+re])continue e;var te=c(ie,Y);if(void 0!==te)return te}}}}(a,l,i,v,h,s,d,p,f,g,m)}:function(a,l,i,v,h,s,d,p,f,g,m,u){return s-h>g-f?v?function(w,c,A,k,C,E,L,D,N,F,I){for(var P=2*w,j=k,V=P*k;j<C;++j,V+=P){var Z=E[c+V],Y=E[c+V+w],ee=L[j];e:for(var re=D,X=P*D;re<N;++re,X+=P){var K=F[c+X],ie=I[re];if(!(K<=Z||Y<K)){for(var q=c+1;q<w;++q)if(E[q+w+V]<F[q+X]||F[q+w+X]<E[q+V])continue e;var te=A(ie,ee);if(void 0!==te)return te}}}}(a,l,i,h,s,d,p,f,g,m,u):function(w,c,A,k,C,E,L,D,N,F,I){for(var P=2*w,j=k,V=P*k;j<C;++j,V+=P){var Z=E[c+V],Y=E[c+V+w],ee=L[j];e:for(var re=D,X=P*D;re<N;++re,X+=P){var K=F[c+X],ie=I[re];if(!(K<Z||Y<K)){for(var q=c+1;q<w;++q)if(E[q+w+V]<F[q+X]||F[q+w+X]<E[q+V])continue e;var te=A(ee,ie);if(void 0!==te)return te}}}}(a,l,i,h,s,d,p,f,g,m,u):v?function(w,c,A,k,C,E,L,D,N,F,I){for(var P=2*w,j=D,V=P*D;j<N;++j,V+=P){var Z=F[c+V],Y=I[j];e:for(var ee=k,re=P*k;ee<C;++ee,re+=P){var ie=L[ee];if(!(Z<=E[c+re]||E[c+re+w]<Z)){for(var q=c+1;q<w;++q)if(E[q+w+re]<F[q+V]||F[q+w+V]<E[q+re])continue e;var te=A(Y,ie);if(void 0!==te)return te}}}}(a,l,i,h,s,d,p,f,g,m,u):function(w,c,A,k,C,E,L,D,N,F,I){for(var P=2*w,j=D,V=P*D;j<N;++j,V+=P){var Z=F[c+V],Y=I[j];e:for(var ee=k,re=P*k;ee<C;++ee,re+=P){var ie=L[ee];if(!(Z<E[c+re]||E[c+re+w]<Z)){for(var q=c+1;q<w;++q)if(E[q+w+re]<F[q+V]||F[q+w+V]<E[q+re])continue e;var te=A(ie,Y);if(void 0!==te)return te}}}}(a,l,i,h,s,d,p,f,g,m,u)}}_.partial=e(!1),_.full=e(!0)},{}],37:[function(x,M,_){"use strict";M.exports=function(E,L,D,N,F,I,P,j,V){!function(Oe,Pe){var Re=8*o.log2(Pe+1)*(Oe+1)|0,Ue=o.nextPow2(6*Re);w.length<Ue&&(e.free(w),w=e.mallocInt32(Ue));var qe=o.nextPow2(2*Re);c.length<qe&&(e.free(c),c=e.mallocDouble(qe))}(E,N+P);var Z,Y=0,ee=2*E;for(A(Y++,0,0,N,0,P,D?16:0,-1/0,1/0),D||A(Y++,0,0,P,0,N,1,-1/0,1/0);Y>0;){var re=6*(Y-=1),X=w[re],K=w[re+1],ie=w[re+2],q=w[re+3],U=w[re+4],W=w[re+5],ae=2*Y,G=c[ae],te=c[ae+1],ne=1&W,le=!!(16&W),ue=F,pe=I,de=j,_e=V;if(ne&&(ue=j,pe=V,de=F,_e=I),!(2&W&&(ie=f(E,X,K,ie,ue,pe,te),K>=ie)||4&W&&(K=g(E,X,K,ie,ue,pe,G))>=ie)){var me=ie-K,we=U-q;if(le){if(E*me*(me+we)<1<<22){if(void 0!==(Z=v.scanComplete(E,X,L,K,ie,ue,pe,q,U,de,_e)))return Z;continue}}else{if(E*Math.min(me,we)<128){if(void 0!==(Z=l(E,X,L,ne,K,ie,ue,pe,q,U,de,_e)))return Z;continue}if(E*me*we<1<<22){if(void 0!==(Z=v.scanBipartite(E,X,L,ne,K,ie,ue,pe,q,U,de,_e)))return Z;continue}}var De=d(E,X,K,ie,ue,pe,G,te);if(K<De)if(E*(De-K)<128){if(void 0!==(Z=i(E,X+1,L,K,De,ue,pe,q,U,de,_e)))return Z}else if(X===E-2){if(void 0!==(Z=ne?v.sweepBipartite(E,L,q,U,de,_e,K,De,ue,pe):v.sweepBipartite(E,L,K,De,ue,pe,q,U,de,_e)))return Z}else A(Y++,X+1,K,De,q,U,ne,-1/0,1/0),A(Y++,X+1,q,U,K,De,1^ne,-1/0,1/0);if(De<ie){var Le=h(E,X,q,U,de,_e),Ie=de[ee*Le+X],je=p(E,X,Le,U,de,_e,Ie);if(je<U&&A(Y++,X,De,ie,je,U,(4|ne)+(le?16:0),Ie,te),q<Le&&A(Y++,X,De,ie,q,Le,(2|ne)+(le?16:0),G,Ie),Le+1===je){if(void 0!==(Z=le?C(E,X,L,De,ie,ue,pe,Le,de,_e[Le]):k(E,X,L,ne,De,ie,ue,pe,Le,de,_e[Le])))return Z}else if(Le<je){var ye;if(le){if(De<(ye=m(E,X,De,ie,ue,pe,Ie))){var Me=p(E,X,De,ye,ue,pe,Ie);if(X===E-2){if(De<Me&&void 0!==(Z=v.sweepComplete(E,L,De,Me,ue,pe,Le,je,de,_e))||Me<ye&&void 0!==(Z=v.sweepBipartite(E,L,Me,ye,ue,pe,Le,je,de,_e)))return Z}else De<Me&&A(Y++,X+1,De,Me,Le,je,16,-1/0,1/0),Me<ye&&(A(Y++,X+1,Me,ye,Le,je,0,-1/0,1/0),A(Y++,X+1,Le,je,Me,ye,1,-1/0,1/0))}}else De<(ye=ne?u(E,X,De,ie,ue,pe,Ie):m(E,X,De,ie,ue,pe,Ie))&&(X===E-2?Z=ne?v.sweepBipartite(E,L,Le,je,de,_e,De,ye,ue,pe):v.sweepBipartite(E,L,De,ye,ue,pe,Le,je,de,_e):(A(Y++,X+1,De,ye,Le,je,ne,-1/0,1/0),A(Y++,X+1,Le,je,De,ye,1^ne,-1/0,1/0)))}}}}};var e=x("typedarray-pool"),o=x("bit-twiddle"),a=x("./brute"),l=a.partial,i=a.full,v=x("./sweep"),h=x("./median"),s=x("./partition"),d=s("!(lo>=p0)&&!(p1>=hi)"),p=s("lo===p0"),f=s("lo<p0"),g=s("hi<=p0"),m=s("lo<=p0&&p0<=hi"),u=s("lo<p0&&p0<=hi"),w=e.mallocInt32(1024),c=e.mallocDouble(1024);function A(E,L,D,N,F,I,P,j,V){var Z=6*E;w[Z]=L,w[Z+1]=D,w[Z+2]=N,w[Z+3]=F,w[Z+4]=I,w[Z+5]=P;var Y=2*E;c[Y]=j,c[Y+1]=V}function k(E,L,D,N,F,I,P,j,V,Z,Y){var ee=2*E,re=V*ee,X=Z[re+L];e:for(var K=F,ie=F*ee;K<I;++K,ie+=ee){var q=P[ie+L],U=P[ie+L+E];if(!(X<q||U<X||N&&X===q)){for(var W,ae=j[K],G=L+1;G<E;++G)if(q=P[ie+G],(U=P[ie+G+E])<Z[re+G]||Z[re+G+E]<q)continue e;if(void 0!==(W=N?D(Y,ae):D(ae,Y)))return W}}}function C(E,L,D,N,F,I,P,j,V,Z){var Y=2*E,ee=j*Y,re=V[ee+L];e:for(var X=N,K=N*Y;X<F;++X,K+=Y){var ie=P[X];if(ie!==Z){var q=I[K+L],U=I[K+L+E];if(!(re<q||U<re)){for(var W=L+1;W<E;++W)if(q=I[K+W],(U=I[K+W+E])<V[ee+W]||V[ee+W+E]<q)continue e;var te=D(ie,Z);if(void 0!==te)return te}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(x,M,_){"use strict";M.exports=function(a,l,i,v,h,s){if(v<=i+1)return i;for(var d=i,p=v,f=v+i>>>1,g=2*a,m=f,u=h[g*f+l];d<p;){if(p-d<8){o(a,l,d,p,h,s),u=h[g*f+l];break}var w=p-d,c=Math.random()*w+d|0,A=h[g*c+l],k=Math.random()*w+d|0,C=h[g*k+l],E=Math.random()*w+d|0,L=h[g*E+l];A<=C?L>=C?(m=k,u=C):A>=L?(m=c,u=A):(m=E,u=L):C>=L?(m=k,u=C):L>=A?(m=c,u=A):(m=E,u=L);for(var D=g*(p-1),N=g*m,F=0;F<g;++F,++D,++N){var I=h[D];h[D]=h[N],h[N]=I}var P=s[p-1];for(s[p-1]=s[m],s[m]=P,D=g*(p-1),N=g*(m=e(a,l,d,p-1,h,s,u)),F=0;F<g;++F,++D,++N)I=h[D],h[D]=h[N],h[N]=I;if(P=s[p-1],s[p-1]=s[m],s[m]=P,f<m){for(p=m-1;d<p&&h[g*(p-1)+l]===u;)p-=1;p+=1}else{if(!(m<f))break;for(d=m+1;d<p&&h[g*d+l]===u;)d+=1}}return e(a,l,i,f,h,s,h[g*f+l])};var e=x("./partition")("lo<p0");function o(a,l,i,v,h,s){for(var d=2*a,p=d*(i+1)+l,f=i+1;f<v;++f,p+=d)for(var g=h[p],m=f,u=d*(f-1);m>i&&h[u+l]>g;--m,u-=d){for(var w=u,c=u+d,A=0;A<d;++A,++w,++c){var k=h[w];h[w]=h[c],h[c]=k}var C=s[m];s[m]=s[m-1],s[m-1]=C}}},{"./partition":39}],39:[function(x,M,_){"use strict";M.exports=function(o){return e[o]};var e={"lo===p0":function(o,a,l,i,v,h,s){for(var d=2*o,p=d*l,f=p,g=l,m=a,u=l;i>u;++u,p+=d)if(v[p+m]===s)if(g===u)g+=1,f+=d;else{for(var w=0;d>w;++w){var c=v[p+w];v[p+w]=v[f],v[f++]=c}var A=h[u];h[u]=h[g],h[g++]=A}return g},"lo<p0":function(o,a,l,i,v,h,s){for(var d=2*o,p=d*l,f=p,g=l,m=a,u=l;i>u;++u,p+=d)if(v[p+m]<s)if(g===u)g+=1,f+=d;else{for(var w=0;d>w;++w){var c=v[p+w];v[p+w]=v[f],v[f++]=c}var A=h[u];h[u]=h[g],h[g++]=A}return g},"lo<=p0":function(o,a,l,i,v,h,s){for(var d=2*o,p=d*l,f=p,g=l,m=o+a,u=l;i>u;++u,p+=d)if(v[p+m]<=s)if(g===u)g+=1,f+=d;else{for(var w=0;d>w;++w){var c=v[p+w];v[p+w]=v[f],v[f++]=c}var A=h[u];h[u]=h[g],h[g++]=A}return g},"hi<=p0":function(o,a,l,i,v,h,s){for(var d=2*o,p=d*l,f=p,g=l,m=o+a,u=l;i>u;++u,p+=d)if(v[p+m]<=s)if(g===u)g+=1,f+=d;else{for(var w=0;d>w;++w){var c=v[p+w];v[p+w]=v[f],v[f++]=c}var A=h[u];h[u]=h[g],h[g++]=A}return g},"lo<p0&&p0<=hi":function(o,a,l,i,v,h,s){for(var d=2*o,p=d*l,f=p,g=l,m=a,u=o+a,w=l;i>w;++w,p+=d)if(v[p+m]<s&&s<=v[p+u])if(g===w)g+=1,f+=d;else{for(var k=0;d>k;++k){var C=v[p+k];v[p+k]=v[f],v[f++]=C}var E=h[w];h[w]=h[g],h[g++]=E}return g},"lo<=p0&&p0<=hi":function(o,a,l,i,v,h,s){for(var d=2*o,p=d*l,f=p,g=l,m=a,u=o+a,w=l;i>w;++w,p+=d)if(v[p+m]<=s&&s<=v[p+u])if(g===w)g+=1,f+=d;else{for(var k=0;d>k;++k){var C=v[p+k];v[p+k]=v[f],v[f++]=C}var E=h[w];h[w]=h[g],h[g++]=E}return g},"!(lo>=p0)&&!(p1>=hi)":function(o,a,l,i,v,h,s,d){for(var p=2*o,f=p*l,g=f,m=l,u=a,w=o+a,c=l;i>c;++c,f+=p)if(!(v[f+u]>=s||d>=v[f+w]))if(m===c)m+=1,g+=p;else{for(var C=0;p>C;++C){var E=v[f+C];v[f+C]=v[g],v[g++]=E}var L=h[c];h[c]=h[m],h[m++]=L}return m}}},{}],40:[function(x,M,_){"use strict";function e(s,d,p){for(var f=2*(s+1),g=s+1;g<=d;++g){for(var m=p[f++],u=p[f++],w=g,c=f-2;w-- >s;){var A=p[c-2],k=p[c-1];if(A<m||A===m&&k<u)break;p[c]=A,p[c+1]=k,c-=2}p[c]=m,p[c+1]=u}}function o(s,d,p){var f=p[s*=2],g=p[s+1];p[s]=p[d*=2],p[s+1]=p[d+1],p[d]=f,p[d+1]=g}function a(s,d,p){p[s*=2]=p[d*=2],p[s+1]=p[d+1]}function l(s,d,p,f){p*=2;var g=f[s*=2],m=f[s+1];f[s]=f[d*=2],f[s+1]=f[d+1],f[d]=f[p],f[d+1]=f[p+1],f[p]=g,f[p+1]=m}function i(s,d,p,f,g){g[s*=2]=g[d*=2],g[d]=p,g[s+1]=g[d+1],g[d+1]=f}function v(s,d,p){var f=p[s*=2],g=p[d*=2];return!(f<g)&&(f!==g||p[s+1]>p[d+1])}function h(s,d,p,f){var g=f[s*=2];return g<d||g===d&&f[s+1]<p}M.exports=function(s,d){d<=128?e(0,d-1,s):function p(f,g,m){var u=(g-f+1)/6|0,w=f+u,c=g-u,A=f+g>>1,k=A-u,C=A+u,E=w,L=k,D=A,N=C,F=c,I=f+1,P=g-1,j=0;v(E,L,m)&&(j=E,E=L,L=j),v(N,F,m)&&(j=N,N=F,F=j),v(E,D,m)&&(j=E,E=D,D=j),v(L,D,m)&&(j=L,L=D,D=j),v(E,N,m)&&(j=E,E=N,N=j),v(D,N,m)&&(j=D,D=N,N=j),v(L,F,m)&&(j=L,L=F,F=j),v(L,D,m)&&(j=L,L=D,D=j),v(N,F,m)&&(j=N,N=F,F=j);for(var V=m[2*L],Z=m[2*L+1],Y=m[2*N],ee=m[2*N+1],re=2*E,X=2*D,K=2*F,ie=2*w,q=2*A,U=2*c,W=0;W<2;++W){var G=m[X+W],te=m[K+W];m[ie+W]=m[re+W],m[q+W]=G,m[U+W]=te}a(k,f,m),a(C,g,m);for(var ne=I;ne<=P;++ne)if(h(ne,V,Z,m))ne!==I&&o(ne,I,m),++I;else if(!h(ne,Y,ee,m))for(;;){if(h(P,Y,ee,m)){h(P,V,Z,m)?(l(ne,I,P,m),++I,--P):(o(ne,P,m),--P);break}if(--P<ne)break}i(f,I-1,V,Z,m),i(g,P+1,Y,ee,m),I-2-f<=32?e(f,I-2,m):p(f,I-2,m),g-(P+2)<=32?e(P+2,g,m):p(P+2,g,m),P-I<=32?e(I,P,m):p(I,P,m)}(0,d-1,s)}},{}],41:[function(x,M,_){"use strict";M.exports={init:function(m){var u=o.nextPow2(m);l.length<u&&(e.free(l),l=e.mallocInt32(u)),i.length<u&&(e.free(i),i=e.mallocInt32(u)),v.length<u&&(e.free(v),v=e.mallocInt32(u)),h.length<u&&(e.free(h),h=e.mallocInt32(u)),s.length<u&&(e.free(s),s=e.mallocInt32(u)),d.length<u&&(e.free(d),d=e.mallocInt32(u));var w=8*u;p.length<w&&(e.free(p),p=e.mallocDouble(w))},sweepBipartite:function(m,u,w,c,A,k,C,E,L,D){for(var N=0,F=2*m,I=m-1,P=F-1,j=w;j<c;++j){var V=k[j],Z=F*j;p[N++]=A[Z+I],p[N++]=-(V+1),p[N++]=A[Z+P],p[N++]=V}for(j=C;j<E;++j){V=D[j]+(1<<28);var Y=F*j;p[N++]=L[Y+I],p[N++]=-V,p[N++]=L[Y+P],p[N++]=V}var ee=N>>>1;a(p,ee);var re=0,X=0;for(j=0;j<ee;++j){var K=0|p[2*j+1];if(K>=1<<28)f(v,h,X--,K=K-(1<<28)|0);else if(K>=0)f(l,i,re--,K);else if(K<=-(1<<28)){K=-K-(1<<28)|0;for(var ie=0;ie<re;++ie)if(void 0!==(q=u(l[ie],K)))return q;g(v,h,X++,K)}else{for(K=-K-1|0,ie=0;ie<X;++ie){var q;if(void 0!==(q=u(K,v[ie])))return q}g(l,i,re++,K)}}},sweepComplete:function(m,u,w,c,A,k,C,E,L,D){for(var N=0,F=2*m,I=m-1,P=F-1,j=w;j<c;++j){var V=k[j]+1<<1,Z=F*j;p[N++]=A[Z+I],p[N++]=-V,p[N++]=A[Z+P],p[N++]=V}for(j=C;j<E;++j){V=D[j]+1<<1;var Y=F*j;p[N++]=L[Y+I],p[N++]=1|-V,p[N++]=L[Y+P],p[N++]=1|V}var ee=N>>>1;a(p,ee);var re=0,X=0,K=0;for(j=0;j<ee;++j){var ie=0|p[2*j+1],q=1&ie;if(j<ee-1&&ie>>1==p[2*j+3]>>1&&(q=2,j+=1),ie<0){for(var U=-(ie>>1)-1,W=0;W<K;++W)if(void 0!==(ae=u(s[W],U)))return ae;if(0!==q)for(W=0;W<re;++W)if(void 0!==(ae=u(l[W],U)))return ae;if(1!==q)for(W=0;W<X;++W){var ae;if(void 0!==(ae=u(v[W],U)))return ae}0===q?g(l,i,re++,U):1===q?g(v,h,X++,U):2===q&&g(s,d,K++,U)}else U=(ie>>1)-1,0===q?f(l,i,re--,U):1===q?f(v,h,X--,U):2===q&&f(s,d,K--,U)}},scanBipartite:function(m,u,w,c,A,k,C,E,L,D,N,F){var I=0,P=2*m,j=u,V=u+m,Z=1,Y=1;c?Y=1<<28:Z=1<<28;for(var ee=A;ee<k;++ee){var re=ee+Z,X=P*ee;p[I++]=C[X+j],p[I++]=-re,p[I++]=C[X+V],p[I++]=re}for(ee=L;ee<D;++ee)re=ee+Y,p[I++]=N[P*ee+j],p[I++]=-re;var ie=I>>>1;a(p,ie);var q=0;for(ee=0;ee<ie;++ee){var U=0|p[2*ee+1];if(U<0){var W=!1;if((re=-U)>=1<<28?(W=!c,re-=1<<28):(W=!!c,re-=1),W)g(l,i,q++,re);else{var ae=F[re],G=P*re,te=N[G+u+1],ne=N[G+u+1+m];e:for(var le=0;le<q;++le){var ue=l[le],pe=P*ue;if(!(ne<C[pe+u+1]||C[pe+u+1+m]<te)){for(var de=u+2;de<m;++de)if(N[G+de+m]<C[pe+de]||C[pe+de+m]<N[G+de])continue e;var _e,me=E[ue];if(void 0!==(_e=c?w(ae,me):w(me,ae)))return _e}}}}else f(l,i,q--,U-Z)}},scanComplete:function(m,u,w,c,A,k,C,E,L,D,N){for(var F=0,I=2*m,P=u,j=u+m,V=c;V<A;++V){var Z=V+(1<<28),Y=I*V;p[F++]=k[Y+P],p[F++]=-Z,p[F++]=k[Y+j],p[F++]=Z}for(V=E;V<L;++V)Z=V+1,p[F++]=D[I*V+P],p[F++]=-Z;var re=F>>>1;a(p,re);var X=0;for(V=0;V<re;++V){var K=0|p[2*V+1];if(K<0)if((Z=-K)>=1<<28)l[X++]=Z-(1<<28);else{var ie=N[Z-=1],q=I*Z,U=D[q+u+1],W=D[q+u+1+m];e:for(var ae=0;ae<X;++ae){var G=l[ae],te=C[G];if(te===ie)break;var ne=I*G;if(!(W<k[ne+u+1]||k[ne+u+1+m]<U)){for(var le=u+2;le<m;++le)if(D[q+le+m]<k[ne+le]||k[ne+le+m]<D[q+le])continue e;var ue=w(te,ie);if(void 0!==ue)return ue}}}else{for(Z=K-(1<<28),ae=X-1;ae>=0;--ae)if(l[ae]===Z){for(le=ae+1;le<X;++le)l[le-1]=l[le];break}--X}}}};var e=x("typedarray-pool"),o=x("bit-twiddle"),a=x("./sort"),l=e.mallocInt32(1024),i=e.mallocInt32(1024),v=e.mallocInt32(1024),h=e.mallocInt32(1024),s=e.mallocInt32(1024),d=e.mallocInt32(1024),p=e.mallocDouble(8192);function f(m,u,w,c){var A=u[c],k=m[w-1];m[A]=k,u[k]=A}function g(m,u,w,c){m[w]=c,u[c]=w}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(x,M,_){"use strict";var e=x("./lib/monotone"),o=x("./lib/triangulation"),a=x("./lib/delaunay"),l=x("./lib/filter");function i(s){return[Math.min(s[0],s[1]),Math.max(s[0],s[1])]}function v(s,d){return s[0]-d[0]||s[1]-d[1]}function h(s,d,p){return d in s?s[d]:p}M.exports=function(s,d,p){Array.isArray(d)?(p=p||{},d=d||[]):(p=d||{},d=[]);var f=!!h(p,"delaunay",!0),g=!!h(p,"interior",!0),m=!!h(p,"exterior",!0),u=!!h(p,"infinity",!1);if(!g&&!m||0===s.length)return[];var w=e(s,d);if(f||g!==m||u){for(var c=o(s.length,d.map(i).sort(v)),A=0;A<w.length;++A){var k=w[A];c.addTriangle(k[0],k[1],k[2])}return f&&a(s,c),m?g?u?l(c,0,u):c.cells():l(c,1,u):l(c,-1)}return w}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(x,M,_){"use strict";var e=x("robust-in-sphere")[4];function o(a,l,i,v,h,s){var d=l.opposite(v,h);if(!(d<0)){if(h<v){var p=v;v=h,h=p,p=s,s=d,d=p}l.isConstraint(v,h)||e(a[v],a[h],a[s],a[d])<0&&i.push(v,h)}}x("binary-search-bounds"),M.exports=function(a,l){for(var i=[],v=a.length,h=l.stars,s=0;s<v;++s)for(var d=h[s],p=1;p<d.length;p+=2)if(!((u=d[p])<s||l.isConstraint(s,u))){for(var f=d[p-1],g=-1,m=1;m<d.length;m+=2)if(d[m-1]===u){g=d[m];break}g<0||e(a[s],a[u],a[f],a[g])<0&&i.push(s,u)}for(;i.length>0;){for(var u=i.pop(),w=(f=-1,g=-1,d=h[s=i.pop()],1);w<d.length;w+=2){var c=d[w-1],A=d[w];c===u?g=A:A===u&&(f=c)}f<0||g<0||e(a[s],a[u],a[f],a[g])>=0||(l.flip(s,u),o(a,l,i,f,s,g),o(a,l,i,s,g,f),o(a,l,i,g,u,f),o(a,l,i,u,f,g))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(x,M,_){"use strict";var e,o=x("binary-search-bounds");function a(i,v,h,s,d,p,f){this.cells=i,this.neighbor=v,this.flags=s,this.constraint=h,this.active=d,this.next=p,this.boundary=f}function l(i,v){return i[0]-v[0]||i[1]-v[1]||i[2]-v[2]}M.exports=function(i,v,h){var s=function(L,D){for(var N=L.cells(),F=N.length,I=0;I<F;++I){var P=(q=N[I])[0],j=q[1],V=q[2];j<V?j<P&&(q[0]=j,q[1]=V,q[2]=P):V<P&&(q[0]=V,q[1]=P,q[2]=j)}N.sort(l);var Z=new Array(F);for(I=0;I<Z.length;++I)Z[I]=0;var Y=[],ee=[],re=new Array(3*F),X=new Array(3*F),K=null;D&&(K=[]);var ie=new a(N,re,X,Z,Y,ee,K);for(I=0;I<F;++I)for(var q=N[I],U=0;U<3;++U){var W=re[3*I+U]=ie.locate(j=q[(U+1)%3],P=q[U],L.opposite(j,P)),ae=X[3*I+U]=L.isConstraint(P,j);W<0&&(ae?ee.push(I):(Y.push(I),Z[I]=1),D&&K.push([j,P,-1]))}return ie}(i,h);if(0===v)return h?s.cells.concat(s.boundary):s.cells;for(var d=1,p=s.active,f=s.next,g=s.flags,m=s.cells,u=s.constraint,w=s.neighbor;p.length>0||f.length>0;){for(;p.length>0;){var c=p.pop();if(g[c]!==-d){g[c]=d;for(var A=0;A<3;++A){var k=w[3*c+A];k>=0&&0===g[k]&&(u[3*c+A]?f.push(k):(p.push(k),g[k]=d))}}}var C=f;f=p,p=C,f.length=0,d=-d}var E=function(L,D,N){for(var F=0,I=0;I<L.length;++I)D[I]===N&&(L[F++]=L[I]);return L.length=F,L}(m,g,v);return h?E.concat(s.boundary):E},a.prototype.locate=(e=[0,0,0],function(i,v,h){var s=i,d=v,p=h;return v<h?v<i&&(s=v,d=h,p=i):h<i&&(s=h,d=i,p=v),s<0?-1:(e[0]=s,e[1]=d,e[2]=p,o.eq(this.cells,e,l))})},{"binary-search-bounds":31}],45:[function(x,M,_){"use strict";var e=x("binary-search-bounds"),o=x("robust-orientation")[3];function a(f,g,m,u,w){this.a=f,this.b=g,this.idx=m,this.lowerIds=u,this.upperIds=w}function l(f,g,m,u){this.a=f,this.b=g,this.type=m,this.idx=u}function i(f,g){var m=f.a[0]-g.a[0]||f.a[1]-g.a[1]||f.type-g.type;return m||(0!==f.type&&(m=o(f.a,f.b,g.b))?m:f.idx-g.idx)}function v(f,g){return o(f.a,f.b,g)}function h(f,g,m,u,w){for(var c=e.lt(g,u,v),A=e.gt(g,u,v),k=c;k<A;++k){for(var C=g[k],E=C.lowerIds,L=E.length;L>1&&o(m[E[L-2]],m[E[L-1]],u)>0;)f.push([E[L-1],E[L-2],w]),L-=1;E.length=L,E.push(w);var D=C.upperIds;for(L=D.length;L>1&&o(m[D[L-2]],m[D[L-1]],u)<0;)f.push([D[L-2],D[L-1],w]),L-=1;D.length=L,D.push(w)}}function s(f,g){var m;return(m=f.a[0]<g.a[0]?o(f.a,f.b,g.a):o(g.b,g.a,f.a))?m:(m=g.b[0]<f.b[0]?o(f.a,f.b,g.b):o(g.b,g.a,f.b))||f.idx-g.idx}function d(f,g,m){var u=e.le(f,m,s),w=f[u],c=w.upperIds,A=c[c.length-1];w.upperIds=[A],f.splice(u+1,0,new a(m.a,m.b,m.idx,[A],c))}function p(f,g,m){var u=m.a;m.a=m.b,m.b=u;var w=e.eq(f,m,s);f[w-1].upperIds=f[w].upperIds,f.splice(w,1)}M.exports=function(f,g){for(var m=f.length,u=g.length,w=[],c=0;c<m;++c)w.push(new l(f[c],null,0,c));for(c=0;c<u;++c){var A=g[c],k=f[A[0]],C=f[A[1]];k[0]<C[0]?w.push(new l(k,C,2,c),new l(C,k,1,c)):k[0]>C[0]&&w.push(new l(C,k,2,c),new l(k,C,1,c))}w.sort(i);for(var E=w[0].a[0]-(1+Math.abs(w[0].a[0]))*Math.pow(2,-52),L=[new a([E,1],[E,0],-1,[],[],[],[])],D=[],N=(c=0,w.length);c<N;++c){var F=w[c],I=F.type;0===I?h(D,L,f,F.a,F.idx):2===I?d(L,0,F):p(L,0,F)}return D}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(x,M,_){"use strict";var e=x("binary-search-bounds");function o(i,v){this.stars=i,this.edges=v}M.exports=function(i,v){for(var h=new Array(i),s=0;s<i;++s)h[s]=[];return new o(h,v)};var a=o.prototype;function l(i,v,h){for(var s=1,d=i.length;s<d;s+=2)if(i[s-1]===v&&i[s]===h)return i[s-1]=i[d-2],i[s]=i[d-1],void(i.length=d-2)}a.isConstraint=function(){var i=[0,0];function v(h,s){return h[0]-s[0]||h[1]-s[1]}return function(h,s){return i[0]=Math.min(h,s),i[1]=Math.max(h,s),e.eq(this.edges,i,v)>=0}}(),a.removeTriangle=function(i,v,h){var s=this.stars;l(s[i],v,h),l(s[v],h,i),l(s[h],i,v)},a.addTriangle=function(i,v,h){var s=this.stars;s[i].push(v,h),s[v].push(h,i),s[h].push(i,v)},a.opposite=function(i,v){for(var h=this.stars[v],s=1,d=h.length;s<d;s+=2)if(h[s]===i)return h[s-1];return-1},a.flip=function(i,v){var h=this.opposite(i,v),s=this.opposite(v,i);this.removeTriangle(i,v,h),this.removeTriangle(v,i,s),this.addTriangle(i,s,h),this.addTriangle(v,h,s)},a.edges=function(){for(var i=this.stars,v=[],h=0,s=i.length;h<s;++h)for(var d=i[h],p=0,f=d.length;p<f;p+=2)v.push([d[p],d[p+1]]);return v},a.cells=function(){for(var i=this.stars,v=[],h=0,s=i.length;h<s;++h)for(var d=i[h],p=0,f=d.length;p<f;p+=2){var g=d[p],m=d[p+1];h<Math.min(g,m)&&v.push([h,g,m])}return v}},{"binary-search-bounds":31}],47:[function(x,M,_){"use strict";M.exports=function(e){for(var o=1,a=1;a<e.length;++a)for(var l=0;l<a;++l)if(e[a]<e[l])o=-o;else if(e[l]===e[a])return 0;return o}},{}],48:[function(x,M,_){"use strict";var e=x("dup"),o=x("robust-linear-solve");function a(v,h){for(var s=0,d=v.length,p=0;p<d;++p)s+=v[p]*h[p];return s}function l(v){var h=v.length;if(0===h)return[];var s=e([v.length+1,v.length+1],1),d=e([v.length+1],1);s[h][h]=0;for(var p=0;p<h;++p){for(var f=0;f<=p;++f)s[f][p]=s[p][f]=2*a(v[p],v[f]);d[p]=a(v[p],v[p])}var g=o(s,d),m=0,u=g[h+1];for(p=0;p<u.length;++p)m+=u[p];var w=new Array(h);for(p=0;p<h;++p){u=g[p];var c=0;for(f=0;f<u.length;++f)c+=u[f];w[p]=c/m}return w}function i(v){if(0===v.length)return[];for(var h=v[0].length,s=e([h]),d=l(v),p=0;p<v.length;++p)for(var f=0;f<h;++f)s[f]+=v[p][f]*d[p];return s}i.barycenetric=l,M.exports=i},{dup:65,"robust-linear-solve":283}],49:[function(x,M,_){M.exports=function(o){for(var a=e(o),l=0,i=0;i<o.length;++i)for(var v=o[i],h=0;h<a.length;++h)l+=Math.pow(v[h]-a[h],2);return Math.sqrt(l/o.length)};var e=x("circumcenter")},{circumcenter:48}],50:[function(x,M,_){"use strict";M.exports=function(A,k,C){var E,I,j,V;if(C){E=k;for(var L=new Array(k.length),D=0;D<k.length;++D){var N=k[D];L[D]=[N[0],N[1],C[D]]}k=L}for(var F=(j=!!C,void 0,w(k,V=g(I=A,[],f(I)),j),!!V);c(A,k,!!C);)F=!0;if(C&&F)for(E.length=0,C.length=0,D=0;D<k.length;++D)E.push([(N=k[D])[0],N[1]]),C.push(N[2]);return F};var e=x("union-find"),o=x("box-intersect"),a=x("robust-segment-intersect"),l=x("big-rat"),i=x("big-rat/cmp"),v=x("big-rat/to-float"),h=x("rat-vec"),s=x("nextafter"),d=x("./lib/rat-seg-intersect");function p(A){var k=v(A);return[s(k,-1/0),s(k,1/0)]}function f(A){for(var k=new Array(A.length),C=0;C<A.length;++C){var E=A[C];k[C]=[s(E[0],-1/0),s(E[1],-1/0),s(E[0],1/0),s(E[1],1/0)]}return k}function g(A,k,C){for(var E=k.length,L=new e(E),D=[],N=0;N<k.length;++N){var F=k[N],I=p(F[0]),P=p(F[1]);D.push([s(I[0],-1/0),s(P[0],-1/0),s(I[1],1/0),s(P[1],1/0)])}o(D,function(ee,re){L.link(ee,re)});var j=!0,V=new Array(E);for(N=0;N<E;++N)(Y=L.find(N))!==N&&(j=!1,A[Y]=[Math.min(A[N][0],A[Y][0]),Math.min(A[N][1],A[Y][1])]);if(j)return null;var Z=0;for(N=0;N<E;++N){var Y;(Y=L.find(N))===N?(V[N]=Z,A[Z++]=A[N]):V[N]=-1}for(A.length=Z,N=0;N<E;++N)V[N]<0&&(V[N]=V[L.find(N)]);return V}function m(A,k){return A[0]-k[0]||A[1]-k[1]}function u(A,k){return A[0]-k[0]||A[1]-k[1]||(A[2]<k[2]?-1:A[2]>k[2]?1:0)}function w(A,k,C){if(0!==A.length){if(k)for(var E=0;E<A.length;++E){var L=k[(N=A[E])[0]],D=k[N[1]];N[0]=Math.min(L,D),N[1]=Math.max(L,D)}else for(E=0;E<A.length;++E){var N;L=(N=A[E])[0],D=N[1],N[0]=Math.min(L,D),N[1]=Math.max(L,D)}A.sort(C?u:m);var F=1;for(E=1;E<A.length;++E){var I=A[E-1],P=A[E];(P[0]!==I[0]||P[1]!==I[1]||C&&P[2]!==I[2])&&(A[F++]=P)}A.length=F}}function c(A,k,C){var I,P,V,E=function(I,P){for(var j=new Array(P.length),V=0;V<P.length;++V){var Z=P[V],Y=I[Z[0]],ee=I[Z[1]];j[V]=[s(Math.min(Y[0],ee[0]),-1/0),s(Math.min(Y[1],ee[1]),-1/0),s(Math.max(Y[0],ee[0]),1/0),s(Math.max(Y[1],ee[1]),1/0)]}return j}(A,k),L=(I=A,P=k,V=[],o(E,function(Z,Y){var ee=P[Z],re=P[Y];ee[0]!==re[0]&&ee[0]!==re[1]&&ee[1]!==re[0]&&ee[1]!==re[1]&&a(I[ee[0]],I[ee[1]],I[re[0]],I[re[1]])&&V.push([Z,Y])}),V),N=function(I,P,j,V){var Z=[];return o(j,V,function(Y,ee){var re=P[Y];if(re[0]!==ee&&re[1]!==ee){var X=I[ee];a(I[re[0]],I[re[1]],X,X)&&Z.push([Y,ee])}}),Z}(A,k,E,f(A)),F=g(A,function(I,P,j,V,Z){var Y,ee,re=I.map(function(we){return[l(we[0]),l(we[1])]});for(Y=0;Y<j.length;++Y){var X=j[Y],K=X[1],ie=P[ee=X[0]],q=P[K],U=d(h(I[ie[0]]),h(I[ie[1]]),h(I[q[0]]),h(I[q[1]]));if(U){var W=I.length;I.push([v(U[0]),v(U[1])]),re.push(U),V.push([ee,W],[K,W])}}for(V.sort(function(we,De){if(we[0]!==De[0])return we[0]-De[0];var Le=re[we[1]],Ie=re[De[1]];return i(Le[0],Ie[0])||i(Le[1],Ie[1])}),Y=V.length-1;Y>=0;--Y){var ae=P[ee=(_e=V[Y])[0]],G=ae[0],te=ae[1],ne=I[G],le=I[te];if((ne[0]-le[0]||ne[1]-le[1])<0){var ue=G;G=te,te=ue}ae[0]=G;var pe,de=ae[1]=_e[1];for(Z&&(pe=ae[2]);Y>0&&V[Y-1][0]===ee;){var _e,me=(_e=V[--Y])[1];P.push(Z?[de,me,pe]:[de,me]),de=me}P.push(Z?[de,te,pe]:[de,te])}return re}(A,k,L,N,C));return w(k,F,C),!!F||L.length>0||N.length>0}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(x,M,_){"use strict";M.exports=function(d,p,f,g){var m=i(p,d),u=i(g,f),w=s(m,u);if(0===l(w))return null;var A=s(u,i(d,f)),k=o(A,w),C=h(m,k);return v(d,C)};var e=x("big-rat/mul"),o=x("big-rat/div"),a=x("big-rat/sub"),l=x("big-rat/sign"),i=x("rat-vec/sub"),v=x("rat-vec/add"),h=x("rat-vec/muls");function s(d,p){return a(e(d[0],p[1]),e(d[1],p[0]))}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(x,M,_){M.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(x,M,_){"use strict";var e=x("./colorScale"),o=x("lerp");function a(v){return[v[0]/255,v[1]/255,v[2]/255,v[3]]}function l(v){for(var h,s="#",d=0;d<3;++d)s+=("00"+(h=(h=v[d]).toString(16))).substr(h.length);return s}function i(v){return"rgba("+v.join(",")+")"}M.exports=function(v){var h,s,d,p,f,g,m,u,w,c;if(v||(v={}),u=(v.nshades||72)-1,m=v.format||"hex",(g=v.colormap)||(g="jet"),"string"==typeof g){if(g=g.toLowerCase(),!e[g])throw Error(g+" not a supported colorscale");f=e[g]}else{if(!Array.isArray(g))throw Error("unsupported colormap option",g);f=g.slice()}if(f.length>u+1)throw new Error(g+" map requires nshades to be at least size "+f.length);w=Array.isArray(v.alpha)?2!==v.alpha.length?[1,1]:v.alpha.slice():"number"==typeof v.alpha?[v.alpha,v.alpha]:[1,1],h=f.map(function(L){return Math.round(L.index*u)}),w[0]=Math.min(Math.max(w[0],0),1),w[1]=Math.min(Math.max(w[1],0),1);var A=f.map(function(L,D){var N=f[D].index,F=f[D].rgb.slice();return 4===F.length&&F[3]>=0&&F[3]<=1||(F[3]=w[0]+(w[1]-w[0])*N),F}),k=[];for(c=0;c<h.length-1;++c){p=h[c+1]-h[c],s=A[c],d=A[c+1];for(var C=0;C<p;C++){var E=C/p;k.push([Math.round(o(s[0],d[0],E)),Math.round(o(s[1],d[1],E)),Math.round(o(s[2],d[2],E)),o(s[3],d[3],E)])}}return k.push(f[f.length-1].rgb.concat(w[1])),"hex"===m?k=k.map(l):"rgbaString"===m?k=k.map(i):"float"===m&&(k=k.map(a)),k}},{"./colorScale":52,lerp:240}],54:[function(x,M,_){"use strict";M.exports=function(h,s,d,p){var f=e(s,d,p);if(0===f){var g=o(e(h,s,d)),m=o(e(h,s,p));if(g===m){if(0===g){var u=v(h,s,d);return u===v(h,s,p)?0:u?1:-1}return 0}return 0===m?g>0||v(h,s,p)?-1:1:0===g?m>0||v(h,s,d)?1:-1:o(m-g)}var c=e(h,s,d);return c>0?f>0&&e(h,s,p)>0?1:-1:c<0?f>0||e(h,s,p)>0?1:-1:e(h,s,p)>0||v(h,s,d)?1:-1};var e=x("robust-orientation"),o=x("signum"),a=x("two-sum"),l=x("robust-product"),i=x("robust-sum");function v(h,s,d){var p=a(h[0],-s[0]),f=a(h[1],-s[1]),g=a(d[0],-s[0]),m=a(d[1],-s[1]),u=i(l(p,g),l(f,m));return u[u.length-1]>=0}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(x,M,_){"use strict";M.exports=function(e){return e<0?-1:e>0?1:0}},{}],56:[function(x,M,_){M.exports=function(a,l){var i=a.length,v=a.length-l.length;if(v)return v;switch(i){case 0:return 0;case 1:return a[0]-l[0];case 2:return a[0]+a[1]-l[0]-l[1]||e(a[0],a[1])-e(l[0],l[1]);case 3:var h=a[0]+a[1],s=l[0]+l[1];if(v=h+a[2]-(s+l[2]))return v;var d=e(a[0],a[1]),p=e(l[0],l[1]);return e(d,a[2])-e(p,l[2])||e(d+a[2],h)-e(p+l[2],s);case 4:var f=a[0],g=a[1],m=a[2],u=a[3],w=l[0],c=l[1],A=l[2],k=l[3];return f+g+m+u-(w+c+A+k)||e(f,g,m,u)-e(w,c,A,k,w)||e(f+g,f+m,f+u,g+m,g+u,m+u)-e(w+c,w+A,w+k,c+A,c+k,A+k)||e(f+g+m,f+g+u,f+m+u,g+m+u)-e(w+c+A,w+c+k,w+A+k,c+A+k);default:for(var C=a.slice().sort(o),E=l.slice().sort(o),L=0;L<i;++L)if(v=C[L]-E[L])return v;return 0}};var e=Math.min;function o(a,l){return a-l}},{}],57:[function(x,M,_){"use strict";var e=x("compare-cell"),o=x("cell-orientation");M.exports=function(a,l){return e(a,l)||o(a)-o(l)}},{"cell-orientation":47,"compare-cell":56}],58:[function(x,M,_){"use strict";var e=x("./lib/ch1d"),o=x("./lib/ch2d"),a=x("./lib/chnd");M.exports=function(l){var i=l.length;if(0===i)return[];if(1===i)return[[0]];var v=l[0].length;return 0===v?[]:1===v?e(l):2===v?o(l):a(l,v)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(x,M,_){"use strict";M.exports=function(e){for(var o=0,a=0,l=1;l<e.length;++l)e[l][0]<e[o][0]&&(o=l),e[l][0]>e[a][0]&&(a=l);return o<a?[[o],[a]]:o>a?[[a],[o]]:[[o]]}},{}],60:[function(x,M,_){"use strict";M.exports=function(o){var a=e(o),l=a.length;if(l<=2)return[];for(var i=new Array(l),v=a[l-1],h=0;h<l;++h){var s=a[h];i[h]=[v,s],v=s}return i};var e=x("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":246}],61:[function(x,M,_){"use strict";M.exports=function(a,l){try{return e(a,!0)}catch(h){var i=o(a);if(i.length<=l)return[];var v=function(s,d){for(var p=s.length,f=new Array(p),g=0;g<d.length;++g)f[g]=s[d[g]];var m=d.length;for(g=0;g<p;++g)d.indexOf(g)<0&&(f[m++]=s[g]);return f}(a,i);return function(s,d){for(var p=s.length,f=d.length,g=0;g<p;++g)for(var m=s[g],u=0;u<m.length;++u){var w=m[u];if(w<f)m[u]=d[w];else{w-=f;for(var c=0;c<f;++c)w>=d[c]&&(w+=1);m[u]=w}}return s}(e(v,!0),i)}};var e=x("incremental-convex-hull"),o=x("affine-hull")},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(x,M,_){"use strict";M.exports=function(e,o,a,l,i,v){var h=i-1,s=i*i,d=h*h,p=(1+2*i)*d,f=i*d,g=s*(3-2*i),m=s*h;if(e.length){v||(v=new Array(e.length));for(var u=e.length-1;u>=0;--u)v[u]=p*e[u]+f*o[u]+g*a[u]+m*l[u];return v}return p*e+f*o+g*a+m*l},M.exports.derivative=function(e,o,a,l,i,v){var h=6*i*i-6*i,s=3*i*i-4*i+1,d=-6*i*i+6*i,p=3*i*i-2*i;if(e.length){v||(v=new Array(e.length));for(var f=e.length-1;f>=0;--f)v[f]=h*e[f]+s*o[f]+d*a[f]+p*l[f];return v}return h*e+s*o+d*a[f]+p*l}},{}],63:[function(x,M,_){"use strict";var e=x("incremental-convex-hull"),o=x("uniq");function a(i,v){this.point=i,this.index=v}function l(i,v){for(var h=i.point,s=v.point,d=h.length,p=0;p<d;++p){var f=s[p]-h[p];if(f)return f}return 0}M.exports=function(i,v){var h=i.length;if(0===h)return[];var s=i[0].length;if(s<1)return[];if(1===s)return function(N,F,I){if(1===N)return I?[[-1,0]]:[];var P=F.map(function(ee,re){return[ee[0],re]});P.sort(function(ee,re){return ee[0]-re[0]});for(var j=new Array(N-1),V=1;V<N;++V)j[V-1]=[P[V-1][1],P[V][1]];return I&&j.push([-1,j[0][1]],[j[N-1][1],-1]),j}(h,i,v);for(var d=new Array(h),p=1,f=0;f<h;++f){for(var g=i[f],m=new Array(s+1),u=0,w=0;w<s;++w){var c=g[w];m[w]=c,u+=c*c}m[s]=u,d[f]=new a(m,f),p=Math.max(u,p)}o(d,l),h=d.length;var A=new Array(h+s+1),k=new Array(h+s+1),C=(s+1)*(s+1)*p,E=new Array(s+1);for(f=0;f<=s;++f)E[f]=0;for(E[s]=C,A[0]=E.slice(),k[0]=-1,f=0;f<=s;++f)(m=E.slice())[f]=1,A[f+1]=m,k[f+1]=-1;for(f=0;f<h;++f){var L=d[f];A[f+s+1]=L.point,k[f+s+1]=L.index}var D=e(A,!1);if(D=D.filter(v?function(N){for(var F=0,I=0;I<=s;++I){var P=k[N[I]];if(P<0&&++F>=2)return!1;N[I]=P}return!0}:function(N){for(var F=0;F<=s;++F){var I=k[N[F]];if(I<0)return!1;N[F]=I}return!0}),1&s)for(f=0;f<D.length;++f)m=(L=D[f])[0],L[0]=L[1],L[1]=m;return D}},{"incremental-convex-hull":233,uniq:310}],64:[function(x,M,_){(function(e){(function(){var o=!1;if("undefined"!=typeof Float64Array){var a=new Float64Array(1),l=new Uint32Array(a.buffer);a[0]=1,o=!0,1072693248===l[1]?(M.exports=function(v){return a[0]=v,[l[0],l[1]]},M.exports.pack=function(v,h){return l[0]=v,l[1]=h,a[0]},M.exports.lo=function(v){return a[0]=v,l[0]},M.exports.hi=function(v){return a[0]=v,l[1]}):1072693248===l[0]?(M.exports=function(v){return a[0]=v,[l[1],l[0]]},M.exports.pack=function(v,h){return l[1]=v,l[0]=h,a[0]},M.exports.lo=function(v){return a[0]=v,l[1]},M.exports.hi=function(v){return a[0]=v,l[0]}):o=!1}if(!o){var i=new e(8);M.exports=function(v){return i.writeDoubleLE(v,0,!0),[i.readUInt32LE(0,!0),i.readUInt32LE(4,!0)]},M.exports.pack=function(v,h){return i.writeUInt32LE(v,0,!0),i.writeUInt32LE(h,4,!0),i.readDoubleLE(0,!0)},M.exports.lo=function(v){return i.writeDoubleLE(v,0,!0),i.readUInt32LE(0,!0)},M.exports.hi=function(v){return i.writeDoubleLE(v,0,!0),i.readUInt32LE(4,!0)}}M.exports.sign=function(v){return M.exports.hi(v)>>>31},M.exports.exponent=function(v){return(M.exports.hi(v)<<1>>>21)-1023},M.exports.fraction=function(v){var h=M.exports.lo(v),s=M.exports.hi(v),d=1048575&s;return 2146435072&s&&(d+=1<<20),[h,d]},M.exports.denormalized=function(v){return!(2146435072&M.exports.hi(v))}}).call(this)}).call(this,x("buffer").Buffer)},{buffer:3}],65:[function(x,M,_){"use strict";M.exports=function(e,o){switch(void 0===o&&(o=0),typeof e){case"number":if(e>0)return function(a,l){var i,v;for(i=new Array(a),v=0;v<a;++v)i[v]=l;return i}(0|e,o);break;case"object":if("number"==typeof e.length)return function a(l,i,v){var h=0|l[v];if(h<=0)return[];var s,d=new Array(h);if(v===l.length-1)for(s=0;s<h;++s)d[s]=i;else for(s=0;s<h;++s)d[s]=a(l,i,v+1);return d}(e,o,0)}return[]}},{}],66:[function(x,M,_){"use strict";M.exports=function(o,a){var l=o.length;if("number"!=typeof a){a=0;for(var i=0;i<l;++i){var v=o[i];a=Math.max(a,v[0],v[1])}a=1+(0|a)}a|=0;var h=new Array(a);for(i=0;i<a;++i)h[i]=[];for(i=0;i<l;++i)h[(v=o[i])[0]].push(v[1]),h[v[1]].push(v[0]);for(var s=0;s<a;++s)e(h[s],function(d,p){return d-p});return h};var e=x("uniq")},{uniq:310}],67:[function(x,M,_){"use strict";M.exports=function(e,o,a){var l=o||0,i=a||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[l*e[12]+e[8],l*e[13]+e[9],l*e[14]+e[10],l*e[15]+e[11]],[i*e[12]-e[8],i*e[13]-e[9],i*e[14]-e[10],i*e[15]-e[11]]]}},{}],68:[function(x,M,_){"use strict";M.exports=function(h,s,d){switch(arguments.length){case 0:return new l([0],[0],0);case 1:return"number"==typeof h?new l(p=v(h),p,0):new l(h,v(h.length),0);case 2:if("number"==typeof s){var p=v(h.length);return new l(h,p,+s)}d=0;case 3:if(h.length!==s.length)throw new Error("state and velocity lengths must match");return new l(h,s,d)}};var e=x("cubic-hermite"),o=x("binary-search-bounds");function a(h,s,d){return Math.min(s,Math.max(h,d))}function l(h,s,d){this.dimension=h.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var p=0;p<this.dimension;++p)this.bounds[0][p]=-1/0,this.bounds[1][p]=1/0;this._state=h.slice().reverse(),this._velocity=s.slice().reverse(),this._time=[d],this._scratch=[h.slice(),h.slice(),h.slice(),h.slice(),h.slice()]}var i=l.prototype;function v(h){for(var s=new Array(h),d=0;d<h;++d)s[d]=0;return s}i.flush=function(h){var s=o.gt(this._time,h)-1;s<=0||(this._time.splice(0,s),this._state.splice(0,s*this.dimension),this._velocity.splice(0,s*this.dimension))},i.curve=function(h){var s=this._time,d=s.length,p=o.le(s,h),f=this._scratch[0],g=this._state,m=this._velocity,u=this.dimension,w=this.bounds;if(p<0)for(var c=u-1,A=0;A<u;++A,--c)f[A]=g[c];else if(p>=d-1){c=g.length-1;var k=h-s[d-1];for(A=0;A<u;++A,--c)f[A]=g[c]+k*m[c]}else{c=u*(p+1)-1;var C=s[p],E=s[p+1]-C||1,L=this._scratch[1],D=this._scratch[2],N=this._scratch[3],F=this._scratch[4],I=!0;for(A=0;A<u;++A,--c)L[A]=g[c],N[A]=m[c]*E,D[A]=g[c+u],F[A]=m[c+u]*E,I=I&&L[A]===D[A]&&N[A]===F[A]&&0===N[A];if(I)for(A=0;A<u;++A)f[A]=L[A];else e(L,N,D,F,(h-C)/E,f)}var P=w[0],j=w[1];for(A=0;A<u;++A)f[A]=a(P[A],j[A],f[A]);return f},i.dcurve=function(h){var s=this._time,d=s.length,p=o.le(s,h),f=this._scratch[0],g=this._state,m=this._velocity,u=this.dimension;if(p>=d-1)for(var w=g.length-1,c=0;c<u;++c,--w)f[c]=m[w];else{w=u*(p+1)-1;var A=s[p],k=s[p+1]-A||1,C=this._scratch[1],E=this._scratch[2],L=this._scratch[3],D=this._scratch[4],N=!0;for(c=0;c<u;++c,--w)C[c]=g[w],L[c]=m[w]*k,E[c]=g[w+u],D[c]=m[w+u]*k,N=N&&C[c]===E[c]&&L[c]===D[c]&&0===L[c];if(N)for(c=0;c<u;++c)f[c]=0;else for(e.derivative(C,L,E,D,(h-A)/k,f),c=0;c<u;++c)f[c]/=k}return f},i.lastT=function(){var h=this._time;return h[h.length-1]},i.stable=function(){for(var h=this._velocity,s=h.length,d=this.dimension-1;d>=0;--d)if(h[--s])return!1;return!0},i.jump=function(h){var s=this.lastT(),d=this.dimension;if(!(h<s||arguments.length!==d+1)){var p=this._state,f=this._velocity,g=p.length-this.dimension,m=this.bounds,u=m[0],w=m[1];this._time.push(s,h);for(var c=0;c<2;++c)for(var A=0;A<d;++A)p.push(p[g++]),f.push(0);for(this._time.push(h),A=d;A>0;--A)p.push(a(u[A-1],w[A-1],arguments[A])),f.push(0)}},i.push=function(h){var s=this.lastT(),d=this.dimension;if(!(h<s||arguments.length!==d+1)){var p=this._state,f=this._velocity,g=p.length-this.dimension,m=h-s,u=this.bounds,w=u[0],c=u[1],A=m>1e-6?1/m:0;this._time.push(h);for(var k=d;k>0;--k){var C=a(w[k-1],c[k-1],arguments[k]);p.push(C),f.push((C-p[g++])*A)}}},i.set=function(h){var s=this.dimension;if(!(h<this.lastT()||arguments.length!==s+1)){var d=this._state,p=this._velocity,f=this.bounds,g=f[0],m=f[1];this._time.push(h);for(var u=s;u>0;--u)d.push(a(g[u-1],m[u-1],arguments[u])),p.push(0)}},i.move=function(h){var s=this.lastT(),d=this.dimension;if(!(h<=s||arguments.length!==d+1)){var p=this._state,f=this._velocity,g=p.length-this.dimension,m=this.bounds,u=m[0],w=m[1],c=h-s,A=c>1e-6?1/c:0;this._time.push(h);for(var k=d;k>0;--k){var C=arguments[k];p.push(a(u[k-1],w[k-1],p[g++]+C)),f.push(C*A)}}},i.idle=function(h){var s=this.lastT();if(!(h<s)){var d=this.dimension,p=this._state,f=this._velocity,g=p.length-d,m=this.bounds,u=m[0],w=m[1],c=h-s;this._time.push(h);for(var A=d-1;A>=0;--A)p.push(a(u[A],w[A],p[g]+c*f[g])),f.push(0),g+=1}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(x,M,_){"use strict";function e(u,w,c,A,k,C){this._color=u,this.key=w,this.value=c,this.left=A,this.right=k,this._count=C}function o(u){return new e(u._color,u.key,u.value,u.left,u.right,u._count)}function a(u,w){return new e(u,w.key,w.value,w.left,w.right,w._count)}function l(u){u._count=1+(u.left?u.left._count:0)+(u.right?u.right._count:0)}function i(u,w){this._compare=u,this.root=w}M.exports=function(u){return new i(u||m,null)};var v=i.prototype;function h(u,w){var c;return w.left&&(c=h(u,w.left))?c:(c=u(w.key,w.value))||(w.right?h(u,w.right):void 0)}function s(u,w,c,A){var k;return w(u,A.key)<=0&&(A.left&&(k=s(u,w,c,A.left))||(k=c(A.key,A.value)))?k:A.right?s(u,w,c,A.right):void 0}function d(u,w,c,A,k){var C,E=c(u,k.key),L=c(w,k.key);return E<=0&&(k.left&&(C=d(u,w,c,A,k.left))||L>0&&(C=A(k.key,k.value)))?C:L>0&&k.right?d(u,w,c,A,k.right):void 0}function p(u,w){this.tree=u,this._stack=w}Object.defineProperty(v,"keys",{get:function(){var u=[];return this.forEach(function(w,c){u.push(w)}),u}}),Object.defineProperty(v,"values",{get:function(){var u=[];return this.forEach(function(w,c){u.push(c)}),u}}),Object.defineProperty(v,"length",{get:function(){return this.root?this.root._count:0}}),v.insert=function(u,w){for(var c=this._compare,A=this.root,k=[],C=[];A;){var E=c(u,A.key);k.push(A),C.push(E),A=E<=0?A.left:A.right}k.push(new e(0,u,w,null,null,1));for(var L=k.length-2;L>=0;--L)A=k[L],k[L]=C[L]<=0?new e(A._color,A.key,A.value,k[L+1],A.right,A._count+1):new e(A._color,A.key,A.value,A.left,k[L+1],A._count+1);for(L=k.length-1;L>1;--L){var D=k[L-1];if(A=k[L],1===D._color||1===A._color)break;var N=k[L-2];if(N.left===D)if(D.left===A){if(!(F=N.right)||0!==F._color){N._color=0,N.left=D.right,D._color=1,D.right=N,k[L-2]=D,k[L-1]=A,l(N),l(D),L>=3&&((I=k[L-3]).left===N?I.left=D:I.right=D);break}D._color=1,N.right=a(1,F),N._color=0,L-=1}else{if(!(F=N.right)||0!==F._color){D.right=A.left,N._color=0,N.left=A.right,A._color=1,A.left=D,A.right=N,k[L-2]=A,k[L-1]=D,l(N),l(D),l(A),L>=3&&((I=k[L-3]).left===N?I.left=A:I.right=A);break}D._color=1,N.right=a(1,F),N._color=0,L-=1}else if(D.right===A){if(!(F=N.left)||0!==F._color){N._color=0,N.right=D.left,D._color=1,D.left=N,k[L-2]=D,k[L-1]=A,l(N),l(D),L>=3&&((I=k[L-3]).right===N?I.right=D:I.left=D);break}D._color=1,N.left=a(1,F),N._color=0,L-=1}else{var F;if(!(F=N.left)||0!==F._color){var I;D.left=A.right,N._color=0,N.right=A.left,A._color=1,A.right=D,A.left=N,k[L-2]=A,k[L-1]=D,l(N),l(D),l(A),L>=3&&((I=k[L-3]).right===N?I.right=A:I.left=A);break}D._color=1,N.left=a(1,F),N._color=0,L-=1}}return k[0]._color=1,new i(c,k[0])},v.forEach=function(u,w,c){if(this.root)switch(arguments.length){case 1:return h(u,this.root);case 2:return s(w,this._compare,u,this.root);case 3:return this._compare(w,c)>=0?void 0:d(w,c,this._compare,u,this.root)}},Object.defineProperty(v,"begin",{get:function(){for(var u=[],w=this.root;w;)u.push(w),w=w.left;return new p(this,u)}}),Object.defineProperty(v,"end",{get:function(){for(var u=[],w=this.root;w;)u.push(w),w=w.right;return new p(this,u)}}),v.at=function(u){if(u<0)return new p(this,[]);for(var w=this.root,c=[];;){if(c.push(w),w.left){if(u<w.left._count){w=w.left;continue}u-=w.left._count}if(!u)return new p(this,c);if(u-=1,!w.right||u>=w.right._count)break;w=w.right}return new p(this,[])},v.ge=function(u){for(var w=this._compare,c=this.root,A=[],k=0;c;){var C=w(u,c.key);A.push(c),C<=0&&(k=A.length),c=C<=0?c.left:c.right}return A.length=k,new p(this,A)},v.gt=function(u){for(var w=this._compare,c=this.root,A=[],k=0;c;){var C=w(u,c.key);A.push(c),C<0&&(k=A.length),c=C<0?c.left:c.right}return A.length=k,new p(this,A)},v.lt=function(u){for(var w=this._compare,c=this.root,A=[],k=0;c;){var C=w(u,c.key);A.push(c),C>0&&(k=A.length),c=C<=0?c.left:c.right}return A.length=k,new p(this,A)},v.le=function(u){for(var w=this._compare,c=this.root,A=[],k=0;c;){var C=w(u,c.key);A.push(c),C>=0&&(k=A.length),c=C<0?c.left:c.right}return A.length=k,new p(this,A)},v.find=function(u){for(var w=this._compare,c=this.root,A=[];c;){var k=w(u,c.key);if(A.push(c),0===k)return new p(this,A);c=k<=0?c.left:c.right}return new p(this,[])},v.remove=function(u){var w=this.find(u);return w?w.remove():this},v.get=function(u){for(var w=this._compare,c=this.root;c;){var A=w(u,c.key);if(0===A)return c.value;c=A<=0?c.left:c.right}};var f=p.prototype;function g(u,w){u.key=w.key,u.value=w.value,u.left=w.left,u.right=w.right,u._color=w._color,u._count=w._count}function m(u,w){return u<w?-1:u>w?1:0}Object.defineProperty(f,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(f,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),f.clone=function(){return new p(this.tree,this._stack.slice())},f.remove=function(){var u=this._stack;if(0===u.length)return this.tree;var w=new Array(u.length),c=u[u.length-1];w[w.length-1]=new e(c._color,c.key,c.value,c.left,c.right,c._count);for(var A=u.length-2;A>=0;--A)w[A]=(c=u[A]).left===u[A+1]?new e(c._color,c.key,c.value,w[A+1],c.right,c._count):new e(c._color,c.key,c.value,c.left,w[A+1],c._count);if((c=w[w.length-1]).left&&c.right){var k=w.length;for(c=c.left;c.right;)w.push(c),c=c.right;var C=w[k-1];for(w.push(new e(c._color,C.key,C.value,c.left,c.right,c._count)),w[k-1].key=c.key,w[k-1].value=c.value,A=w.length-2;A>=k;--A)w[A]=new e((c=w[A])._color,c.key,c.value,c.left,w[A+1],c._count);w[k-1].left=w[k]}if(0===(c=w[w.length-1])._color){var E=w[w.length-2];for(E.left===c?E.left=null:E.right===c&&(E.right=null),w.pop(),A=0;A<w.length;++A)w[A]._count--;return new i(this.tree._compare,w[0])}if(c.left||c.right){for(c.left?g(c,c.left):c.right&&g(c,c.right),c._color=1,A=0;A<w.length-1;++A)w[A]._count--;return new i(this.tree._compare,w[0])}if(1===w.length)return new i(this.tree._compare,null);for(A=0;A<w.length;++A)w[A]._count--;var L=w[w.length-2];return function(D){for(var N,F,I,P,j=D.length-1;j>=0;--j){if(N=D[j],0===j)return void(N._color=1);if((F=D[j-1]).left===N){if((I=F.right).right&&0===I.right._color)return P=(I=F.right=o(I)).right=o(I.right),F.right=I.left,I.left=F,I.right=P,I._color=F._color,N._color=1,F._color=1,P._color=1,l(F),l(I),j>1&&((V=D[j-2]).left===F?V.left=I:V.right=I),void(D[j-1]=I);if(I.left&&0===I.left._color)return P=(I=F.right=o(I)).left=o(I.left),F.right=P.left,I.left=P.right,P.left=F,P.right=I,P._color=F._color,F._color=1,I._color=1,N._color=1,l(F),l(I),l(P),j>1&&((V=D[j-2]).left===F?V.left=P:V.right=P),void(D[j-1]=P);if(1===I._color){if(0===F._color)return F._color=1,void(F.right=a(0,I));F.right=a(0,I);continue}I=o(I),F.right=I.left,I.left=F,I._color=F._color,F._color=0,l(F),l(I),j>1&&((V=D[j-2]).left===F?V.left=I:V.right=I),D[j-1]=I,D[j]=F,j+1<D.length?D[j+1]=N:D.push(N),j+=2}else{if((I=F.left).left&&0===I.left._color)return P=(I=F.left=o(I)).left=o(I.left),F.left=I.right,I.right=F,I.left=P,I._color=F._color,N._color=1,F._color=1,P._color=1,l(F),l(I),j>1&&((V=D[j-2]).right===F?V.right=I:V.left=I),void(D[j-1]=I);if(I.right&&0===I.right._color)return P=(I=F.left=o(I)).right=o(I.right),F.left=P.right,I.right=P.left,P.right=F,P.left=I,P._color=F._color,F._color=1,I._color=1,N._color=1,l(F),l(I),l(P),j>1&&((V=D[j-2]).right===F?V.right=P:V.left=P),void(D[j-1]=P);if(1===I._color){if(0===F._color)return F._color=1,void(F.left=a(0,I));F.left=a(0,I);continue}var V;I=o(I),F.left=I.right,I.right=F,I._color=F._color,F._color=0,l(F),l(I),j>1&&((V=D[j-2]).right===F?V.right=I:V.left=I),D[j-1]=I,D[j]=F,j+1<D.length?D[j+1]=N:D.push(N),j+=2}}}(w),L.left===c?L.left=null:L.right=null,new i(this.tree._compare,w[0])},Object.defineProperty(f,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(f,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(f,"index",{get:function(){var u=0,w=this._stack;if(0===w.length){var c=this.tree.root;return c?c._count:0}w[w.length-1].left&&(u=w[w.length-1].left._count);for(var A=w.length-2;A>=0;--A)w[A+1]===w[A].right&&(++u,w[A].left&&(u+=w[A].left._count));return u},enumerable:!0}),f.next=function(){var u=this._stack;if(0!==u.length){var w=u[u.length-1];if(w.right)for(w=w.right;w;)u.push(w),w=w.left;else for(u.pop();u.length>0&&u[u.length-1].right===w;)w=u[u.length-1],u.pop()}},Object.defineProperty(f,"hasNext",{get:function(){var u=this._stack;if(0===u.length)return!1;if(u[u.length-1].right)return!0;for(var w=u.length-1;w>0;--w)if(u[w-1].left===u[w])return!0;return!1}}),f.update=function(u){var w=this._stack;if(0===w.length)throw new Error("Can't update empty node!");var c=new Array(w.length),A=w[w.length-1];c[c.length-1]=new e(A._color,A.key,u,A.left,A.right,A._count);for(var k=w.length-2;k>=0;--k)c[k]=(A=w[k]).left===w[k+1]?new e(A._color,A.key,A.value,c[k+1],A.right,A._count):new e(A._color,A.key,A.value,A.left,c[k+1],A._count);return new i(this.tree._compare,c[0])},f.prev=function(){var u=this._stack;if(0!==u.length){var w=u[u.length-1];if(w.left)for(w=w.left;w;)u.push(w),w=w.right;else for(u.pop();u.length>0&&u[u.length-1].left===w;)w=u[u.length-1],u.pop()}},Object.defineProperty(f,"hasPrev",{get:function(){var u=this._stack;if(0===u.length)return!1;if(u[u.length-1].left)return!0;for(var w=u.length-1;w>0;--w)if(u[w-1].right===u[w])return!0;return!1}})},{}],70:[function(x,M,_){"use strict";M.exports=function(k,C){var E=new s(k);return E.update(C),E};var e=x("./lib/text.js"),o=x("./lib/lines.js"),a=x("./lib/background.js"),l=x("./lib/cube.js"),i=x("./lib/ticks.js"),v=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function h(k,C){return k[0]=C[0],k[1]=C[1],k[2]=C[2],k}function s(k){this.gl=k,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=a(k)}var d=s.prototype;function p(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}d.update=function(k){function C(ee,re,X){if(X in k){var K,ie=k[X],q=this[X];this[X]=K=(ee?Array.isArray(ie)&&Array.isArray(ie[0]):Array.isArray(ie))?[re(ie[0]),re(ie[1]),re(ie[2])]:[re(ie),re(ie),re(ie)];for(var U=0;U<3;++U)if(K[U]!==q[U])return!0}return!1}k=k||{};var E,L=C.bind(this,!1,Number),D=C.bind(this,!1,Boolean),N=C.bind(this,!1,String),F=C.bind(this,!0,function(ee){if(Array.isArray(ee)){if(3===ee.length)return[+ee[0],+ee[1],+ee[2],1];if(4===ee.length)return[+ee[0],+ee[1],+ee[2],+ee[3]]}return[0,0,0,1]}),I=!1,P=!1;if("bounds"in k)for(var j=k.bounds,V=0;V<2;++V)for(var Z=0;Z<3;++Z)j[V][Z]!==this.bounds[V][Z]&&(P=!0),this.bounds[V][Z]=j[V][Z];if("ticks"in k)for(E=k.ticks,I=!0,this.autoTicks=!1,V=0;V<3;++V)this.tickSpacing[V]=0;else L("tickSpacing")&&(this.autoTicks=!0,P=!0);if(this._firstInit&&("ticks"in k||"tickSpacing"in k||(this.autoTicks=!0),P=!0,I=!0,this._firstInit=!1),P&&this.autoTicks&&(E=i.create(this.bounds,this.tickSpacing),I=!0),I){for(V=0;V<3;++V)E[V].sort(function(ee,re){return ee.x-re.x});i.equal(E,this.ticks)?I=!1:this.ticks=E}D("tickEnable"),N("tickFont")&&(I=!0),L("tickSize"),L("tickAngle"),L("tickPad"),F("tickColor");var Y=N("labels");N("labelFont")&&(Y=!0),D("labelEnable"),L("labelSize"),L("labelPad"),F("labelColor"),D("lineEnable"),D("lineMirror"),L("lineWidth"),F("lineColor"),D("lineTickEnable"),D("lineTickMirror"),L("lineTickLength"),L("lineTickWidth"),F("lineTickColor"),D("gridEnable"),L("gridWidth"),F("gridColor"),D("zeroEnable"),F("zeroLineColor"),L("zeroLineWidth"),D("backgroundEnable"),F("backgroundColor"),this._text?this._text&&(Y||I)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&I&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=o(this.gl,this.bounds,this.ticks))};var f=[new p,new p,new p];function g(k,C,E,L,D){for(var N=k.primalOffset,F=k.primalMinor,I=k.mirrorOffset,P=k.mirrorMinor,j=L[C],V=0;V<3;++V)if(C!==V){var Z=N,Y=I,ee=F,re=P;j&1<<V&&(Z=I,Y=N,ee=P,re=F),Z[V]=E[0][V],Y[V]=E[1][V],D[V]>0?(ee[V]=-1,re[V]=0):(ee[V]=0,re[V]=1)}}var m=[0,0,0],u={model:v,view:v,projection:v,_ortho:!1};d.isOpaque=function(){return!0},d.isTransparent=function(){return!1},d.drawTransparent=function(k){};var w=[0,0,0],c=[0,0,0],A=[0,0,0];d.draw=function(k){for(var C=this.gl,E=(k=k||u).model||v,L=k.view||v,D=k.projection||v,N=this.bounds,F=k._ortho||!1,I=l(E,L,D,N,F),P=I.cubeEdges,j=I.axis,re=(F?2:1)*this.pixelRatio*(D[3]*L[12]+D[7]*L[13]+D[11]*L[14]+D[15]*L[15])/C.drawingBufferHeight,X=0;X<3;++X)this.lastCubeProps.cubeEdges[X]=P[X],this.lastCubeProps.axis[X]=j[X];var K=f;for(X=0;X<3;++X)g(f[X],X,this.bounds,P,j);C=this.gl;var ie,pe,de,je,ye,Me,Oe,Pe,Re,Ue,qe,Xe,q=m;for(X=0;X<3;++X)q[X]=this.backgroundEnable[X]?j[X]:0;for(this._background.draw(E,L,D,N,q,this.backgroundColor),this._lines.bind(E,L,D,this),X=0;X<3;++X){var U=[0,0,0];U[X]=j[X]>0?N[1][X]:N[0][X];for(var W=0;W<2;++W){var ae=(X+1+W)%3,G=(X+1+(1^W))%3;this.gridEnable[ae]&&this._lines.drawGrid(ae,G,this.bounds,U,this.gridColor[ae],this.gridWidth[ae]*this.pixelRatio)}for(W=0;W<2;++W)ae=(X+1+W)%3,this.zeroEnable[G=(X+1+(1^W))%3]&&Math.min(N[0][G],N[1][G])<=0&&Math.max(N[0][G],N[1][G])>=0&&this._lines.drawZero(ae,G,this.bounds,U,this.zeroLineColor[G],this.zeroLineWidth[G]*this.pixelRatio)}for(X=0;X<3;++X){this.lineEnable[X]&&this._lines.drawAxisLine(X,this.bounds,K[X].primalOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio),this.lineMirror[X]&&this._lines.drawAxisLine(X,this.bounds,K[X].mirrorOffset,this.lineColor[X],this.lineWidth[X]*this.pixelRatio);var te=h(w,K[X].primalMinor),ne=h(c,K[X].mirrorMinor),le=this.lineTickLength;for(W=0;W<3;++W){var ue=re/E[5*W];te[W]*=le[W]*ue,ne[W]*=le[W]*ue}this.lineTickEnable[X]&&this._lines.drawAxisTicks(X,K[X].primalOffset,te,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio),this.lineTickMirror[X]&&this._lines.drawAxisTicks(X,K[X].mirrorOffset,ne,this.lineTickColor[X],this.lineTickWidth[X]*this.pixelRatio)}function _e(je){(de=[0,0,0])[je]=1}for(this._lines.unbind(),this._text.bind(E,L,D,this.pixelRatio),X=0;X<3;++X){var we=K[X].primalMinor,De=K[X].mirrorMinor,Le=h(A,K[X].primalOffset);for(W=0;W<3;++W)this.lineTickEnable[X]&&(Le[W]+=re*we[W]*Math.max(this.lineTickLength[W],0)/E[5*W]);var Ie=[0,0,0];if(Ie[X]=1,this.tickEnable[X]){for(-3600===this.tickAngle[X]?(this.tickAngle[X]=0,this.tickAlign[X]="auto"):this.tickAlign[X]=-1,ie[0]="auto"===(ie=[this.tickAlign[X],.5,pe=1])[0]?0:parseInt(""+ie[0]),de=[0,0,0],Oe=void 0,Pe=void 0,Re=void 0,Ue=void 0,qe=void 0,Xe=void 0,Ue=(ye=we)[Pe=((je=X)+2)%3],qe=(Me=De)[Oe=(je+1)%3],Xe=Me[Pe],(Re=ye[Oe])>0&&Xe>0||Re>0&&Xe<0||Re<0&&Xe>0||Re<0&&Xe<0?_e(Oe):(Ue>0&&qe>0||Ue>0&&qe<0||Ue<0&&qe>0||Ue<0&&qe<0)&&_e(Pe),W=0;W<3;++W)Le[W]+=re*we[W]*this.tickPad[W]/E[5*W];this._text.drawTicks(X,this.tickSize[X],this.tickAngle[X],Le,this.tickColor[X],Ie,de,ie)}if(this.labelEnable[X]){for(pe=0,de=[0,0,0],this.labels[X].length>4&&(_e(X),pe=1),ie[0]="auto"===(ie=[this.labelAlign[X],.5,pe])[0]?0:parseInt(""+ie[0]),W=0;W<3;++W)Le[W]+=re*we[W]*this.labelPad[W]/E[5*W];Le[X]+=.5*(N[0][X]+N[1][X]),this._text.drawLabel(X,this.labelSize[X],this.labelAngle[X],Le,this.labelColor[X],[0,0,0],de,ie)}}this._text.unbind()},d.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(x,M,_){"use strict";M.exports=function(v){for(var h=[],s=[],d=0,p=0;p<3;++p)for(var f=(p+1)%3,g=(p+2)%3,m=[0,0,0],u=[0,0,0],w=-1;w<=1;w+=2){s.push(d,d+2,d+1,d+1,d+2,d+3),m[p]=w,u[p]=w;for(var c=-1;c<=1;c+=2){m[f]=c;for(var A=-1;A<=1;A+=2)m[g]=A,h.push(m[0],m[1],m[2],u[0],u[1],u[2]),d+=1}var k=f;f=g,g=k}var C=e(v,new Float32Array(h)),E=e(v,new Uint16Array(s),v.ELEMENT_ARRAY_BUFFER),L=o(v,[{buffer:C,type:v.FLOAT,size:3,offset:0,stride:24},{buffer:C,type:v.FLOAT,size:3,offset:12,stride:24}],E),D=a(v);return D.attributes.position.location=0,D.attributes.normal.location=1,new l(v,C,L,D)};var e=x("gl-buffer"),o=x("gl-vao"),a=x("./shaders").bg;function l(v,h,s,d){this.gl=v,this.buffer=h,this.vao=s,this.shader=d}var i=l.prototype;i.draw=function(v,h,s,d,p,f){for(var g=!1,m=0;m<3;++m)g=g||p[m];if(g){var u=this.gl;u.enable(u.POLYGON_OFFSET_FILL),u.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:v,view:h,projection:s,bounds:d,enable:p,colors:f},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),u.disable(u.POLYGON_OFFSET_FILL)}},i.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(x,M,_){"use strict";M.exports=function(c,A,k,C,E){o(i,A,c),o(i,k,i);for(var L=0,D=0;D<2;++D){s[2]=C[D][2];for(var N=0;N<2;++N){s[1]=C[N][1];for(var F=0;F<2;++F)s[0]=C[F][0],p(v[L],s,i),L+=1}}var I=-1;for(D=0;D<8;++D){for(var P=v[D][3],j=0;j<3;++j)h[D][j]=v[D][j]/P;E&&(h[D][2]*=-1),P<0&&(I<0||h[D][2]<h[I][2])&&(I=D)}if(I<0){I=0;for(var V=0;V<3;++V){for(var Z=(V+2)%3,Y=(V+1)%3,ee=-1,re=-1,X=0;X<2;++X){var K=(q=X<<V)+(X<<Z)+(1-X<<Y),ie=q+(1-X<<Z)+(X<<Y);l(h[q],h[K],h[ie],d)<0||(X?ee=1:re=1)}if(ee<0||re<0)re>ee&&(I|=1<<V);else{for(X=0;X<2;++X){K=(q=X<<V)+(X<<Z)+(1-X<<Y);var q,U=g([v[q],v[K],v[ie=q+(1-X<<Z)+(X<<Y)],v[q+(1<<Z)+(1<<Y)]]);X?ee=U:re=U}re>ee&&(I|=1<<V)}}}var W=7^I,ae=-1;for(D=0;D<8;++D)D!==I&&D!==W&&(ae<0||h[ae][1]>h[D][1])&&(ae=D);var G=-1;for(D=0;D<3;++D)(ne=ae^1<<D)!==I&&ne!==W&&(G<0&&(G=ne),(Y=h[ne])[0]<h[G][0]&&(G=ne));var te=-1;for(D=0;D<3;++D){var ne;(ne=ae^1<<D)!==I&&ne!==W&&ne!==G&&(te<0&&(te=ne),(Y=h[ne])[0]>h[te][0]&&(te=ne))}var le=m;le[0]=le[1]=le[2]=0,le[e.log2(G^ae)]=ae&G,le[e.log2(ae^te)]=ae&te;var ue=7^te;ue===I||ue===W?le[e.log2(te^(ue=7^G))]=ue&te:le[e.log2(G^ue)]=ue&G;var pe=u,de=I;for(V=0;V<3;++V)pe[V]=de&1<<V?-1:1;return w};var e=x("bit-twiddle"),o=x("gl-mat4/multiply"),a=x("split-polygon"),l=x("robust-orientation"),i=new Array(16),v=new Array(8),h=new Array(8),s=new Array(3),d=[0,0,0];function p(c,A,k){for(var C=0;C<4;++C){c[C]=k[12+C];for(var E=0;E<3;++E)c[C]+=A[E]*k[4*E+C]}}!function(){for(var c=0;c<8;++c)v[c]=[1,1,1,1],h[c]=[1,1,1]}();var f=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function g(c){for(var A=0;A<f.length;++A)if((c=a.positive(c,f[A])).length<3)return 0;var k=c[0],C=k[0]/k[3],E=k[1]/k[3],L=0;for(A=1;A+1<c.length;++A){var D=c[A],N=c[A+1];L+=Math.abs((D[0]/D[3]-C)*(N[1]/N[3]-E)-(D[1]/D[3]-E)*(N[0]/N[3]-C))}return L}var m=[1,1,1],u=[0,0,0],w={cubeEdges:m,axis:u}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(x,M,_){"use strict";M.exports=function(m,u,w){var c=[],A=[0,0,0],k=[0,0,0],C=[0,0,0],E=[0,0,0];c.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var L=0;L<3;++L){for(var D=c.length/3|0,N=0;N<w[L].length;++N){var F=+w[L][N].x;c.push(F,0,1,F,1,1,F,0,-1,F,0,-1,F,1,1,F,1,-1)}var I=c.length/3|0;A[L]=D,k[L]=I-D,D=c.length/3|0;for(var P=0;P<w[L].length;++P)c.push(F=+w[L][P].x,0,1,F,1,1,F,0,-1,F,0,-1,F,1,1,F,1,-1);I=c.length/3|0,C[L]=D,E[L]=I-D}var j=e(m,new Float32Array(c)),V=o(m,[{buffer:j,type:m.FLOAT,size:3,stride:0,offset:0}]),Z=a(m);return Z.attributes.position.location=0,new f(m,j,V,Z,k,A,E,C)};var e=x("gl-buffer"),o=x("gl-vao"),a=x("./shaders").line,l=[0,0,0],i=[0,0,0],v=[0,0,0],h=[0,0,0],s=[1,1];function d(m){return m[0]=m[1]=m[2]=0,m}function p(m,u){return m[0]=u[0],m[1]=u[1],m[2]=u[2],m}function f(m,u,w,c,A,k,C,E){this.gl=m,this.vertBuffer=u,this.vao=w,this.shader=c,this.tickCount=A,this.tickOffset=k,this.gridCount=C,this.gridOffset=E}var g=f.prototype;g.bind=function(m,u,w){this.shader.bind(),this.shader.uniforms.model=m,this.shader.uniforms.view=u,this.shader.uniforms.projection=w,s[0]=this.gl.drawingBufferWidth,s[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=s,this.vao.bind()},g.unbind=function(){this.vao.unbind()},g.drawAxisLine=function(m,u,w,c,A){var k=d(i);this.shader.uniforms.majorAxis=i,k[m]=u[1][m]-u[0][m],this.shader.uniforms.minorAxis=k;var C,E=p(h,w);E[m]+=u[0][m],this.shader.uniforms.offset=E,this.shader.uniforms.lineWidth=A,this.shader.uniforms.color=c,(C=d(v))[(m+2)%3]=1,this.shader.uniforms.screenAxis=C,this.vao.draw(this.gl.TRIANGLES,6),(C=d(v))[(m+1)%3]=1,this.shader.uniforms.screenAxis=C,this.vao.draw(this.gl.TRIANGLES,6)},g.drawAxisTicks=function(m,u,w,c,A){if(this.tickCount[m]){var k=d(l);k[m]=1,this.shader.uniforms.majorAxis=k,this.shader.uniforms.offset=u,this.shader.uniforms.minorAxis=w,this.shader.uniforms.color=c,this.shader.uniforms.lineWidth=A;var C=d(v);C[m]=1,this.shader.uniforms.screenAxis=C,this.vao.draw(this.gl.TRIANGLES,this.tickCount[m],this.tickOffset[m])}},g.drawGrid=function(m,u,w,c,A,k){if(this.gridCount[m]){var C=d(i);C[u]=w[1][u]-w[0][u],this.shader.uniforms.minorAxis=C;var E=p(h,c);E[u]+=w[0][u],this.shader.uniforms.offset=E;var L=d(l);L[m]=1,this.shader.uniforms.majorAxis=L;var D=d(v);D[m]=1,this.shader.uniforms.screenAxis=D,this.shader.uniforms.lineWidth=k,this.shader.uniforms.color=A,this.vao.draw(this.gl.TRIANGLES,this.gridCount[m],this.gridOffset[m])}},g.drawZero=function(m,u,w,c,A,k){var C=d(i);this.shader.uniforms.majorAxis=C,C[m]=w[1][m]-w[0][m],this.shader.uniforms.minorAxis=C;var E=p(h,c);E[m]+=w[0][m],this.shader.uniforms.offset=E;var L=d(v);L[u]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=k,this.shader.uniforms.color=A,this.vao.draw(this.gl.TRIANGLES,6)},g.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(x,M,_){"use strict";var e=x("glslify"),o=x("gl-shader"),a=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);_.line=function(d){return o(d,a,l,null,[{name:"position",type:"vec3"}])};var i=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),v=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);_.text=function(d){return o(d,i,v,null,[{name:"position",type:"vec3"}])};var h=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),s=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);_.bg=function(d){return o(d,h,s,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(x,M,_){(function(e){(function(){"use strict";M.exports=function(f,g,m,u,w,c){var A=o(f),k=a(f,[{buffer:A,size:3}]),C=i(f);C.attributes.position.location=0;var E=new s(f,C,A,k);return E.update(g,m,u,w,c),E};var o=x("gl-buffer"),a=x("gl-vao"),l=x("vectorize-text"),i=x("./shaders").text,v=window||e.global||{},h=v.__TEXT_CACHE||{};function s(f,g,m,u){this.gl=f,this.shader=g,this.buffer=m,this.vao=u,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}v.__TEXT_CACHE={};var d=s.prototype,p=[0,0];d.bind=function(f,g,m,u){this.vao.bind(),this.shader.bind();var w=this.shader.uniforms;w.model=f,w.view=g,w.projection=m,w.pixelScale=u,p[0]=this.gl.drawingBufferWidth,p[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=p},d.unbind=function(){this.vao.unbind()},d.update=function(f,g,m,u,w){var c=[];function A(I,P,j,V,Z,Y){var ee=h[j];ee||(ee=h[j]={});var re=ee[P];re||(re=ee[P]=function(te,ne){try{return l(te,ne)}catch(le){return console.warn('error vectorizing text:"'+te+'" error:',le),{cells:[],positions:[]}}}(P,{triangles:!0,font:j,textAlign:"center",textBaseline:"middle",lineSpacing:Z,styletags:Y}));for(var X=(V||12)/12,K=re.positions,ie=re.cells,q=0,U=ie.length;q<U;++q)for(var W=ie[q],ae=2;ae>=0;--ae){var G=K[W[ae]];c.push(X*G[0],-X*G[1],I)}}for(var k=[0,0,0],C=[0,0,0],E=[0,0,0],L=[0,0,0],D={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},N=0;N<3;++N){E[N]=c.length/3|0,A(.5*(f[0][N]+f[1][N]),g[N],m[N],12,1.25,D),L[N]=(c.length/3|0)-E[N],k[N]=c.length/3|0;for(var F=0;F<u[N].length;++F)u[N][F].text&&A(u[N][F].x,u[N][F].text,u[N][F].font||w,u[N][F].fontSize||12,1.25,D);C[N]=(c.length/3|0)-k[N]}this.buffer.update(c),this.tickOffset=k,this.tickCount=C,this.labelOffset=E,this.labelCount=L},d.drawTicks=function(f,g,m,u,w,c,A,k){this.tickCount[f]&&(this.shader.uniforms.axis=c,this.shader.uniforms.color=w,this.shader.uniforms.angle=m,this.shader.uniforms.scale=g,this.shader.uniforms.offset=u,this.shader.uniforms.alignDir=A,this.shader.uniforms.alignOpt=k,this.vao.draw(this.gl.TRIANGLES,this.tickCount[f],this.tickOffset[f]))},d.drawLabel=function(f,g,m,u,w,c,A,k){this.labelCount[f]&&(this.shader.uniforms.axis=c,this.shader.uniforms.color=w,this.shader.uniforms.angle=m,this.shader.uniforms.scale=g,this.shader.uniforms.offset=u,this.shader.uniforms.alignDir=A,this.shader.uniforms.alignOpt=k,this.vao.draw(this.gl.TRIANGLES,this.labelCount[f],this.labelOffset[f]))},d.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,x("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(x,M,_){"use strict";function e(o,a){var l=o+"",i=l.indexOf("."),v=0;i>=0&&(v=l.length-i-1);var h=Math.pow(10,v),s=Math.round(o*a*h),d=s+"";if(d.indexOf("e")>=0)return d;var p=s/h,f=s%h;s<0?(p=0|-Math.ceil(p),f=0|-f):(p=0|Math.floor(p),f|=0);var g=""+p;if(s<0&&(g="-"+g),v){for(var m=""+f;m.length<v;)m="0"+m;return g+"."+m}return g}_.create=function(o,a){for(var l=[],i=0;i<3;++i){for(var v=[],h=0;h*a[i]<=o[1][i];++h)v.push({x:h*a[i],text:e(a[i],h)});for(h=-1;h*a[i]>=o[0][i];--h)v.push({x:h*a[i],text:e(a[i],h)});l.push(v)}return l},_.equal=function(o,a){for(var l=0;l<3;++l){if(o[l].length!==a[l].length)return!1;for(var i=0;i<o[l].length;++i){var v=o[l][i],h=a[l][i];if(v.x!==h.x||v.text!==h.text||v.font!==h.font||v.fontColor!==h.fontColor||v.fontSize!==h.fontSize||v.dx!==h.dx||v.dy!==h.dy)return!1}}return!0}},{}],77:[function(x,M,_){"use strict";M.exports=function(w,c,A,k,C){var E=c.model||h,L=c.view||h,D=c.projection||h,N=c._ortho||!1,F=w.bounds,I=(C=C||a(E,L,D,F,N)).axis;l(s,L,E),l(s,D,s);for(var P=m,j=0;j<3;++j)P[j].lo=1/0,P[j].hi=-1/0,P[j].pixelsPerDataUnit=1/0;var V=e(i(s,s));i(s,s);for(var Z=0;Z<3;++Z){var Y=(Z+1)%3,ee=(Z+2)%3,re=u;e:for(j=0;j<2;++j){var X=[];if(I[Z]<0!=!!j){re[Z]=F[j][Z];for(var K=0;K<2;++K){re[Y]=F[K^j][Y];for(var ie=0;ie<2;++ie)re[ee]=F[ie^K^j][ee],X.push(re.slice())}var q=N?5:4;for(K=q;K===q;++K){if(0===X.length)continue e;X=o.positive(X,V[K])}for(K=0;K<X.length;++K){var U=g(u,s,ee=X[K],A,k);for(ie=0;ie<3;++ie)P[ie].lo=Math.min(P[ie].lo,ee[ie]),P[ie].hi=Math.max(P[ie].hi,ee[ie]),ie!==Z&&(P[ie].pixelsPerDataUnit=Math.min(P[ie].pixelsPerDataUnit,Math.abs(U[ie])))}}}}return P};var e=x("extract-frustum-planes"),o=x("split-polygon"),a=x("./lib/cube.js"),l=x("gl-mat4/multiply"),i=x("gl-mat4/transpose"),v=x("gl-vec4/transformMat4"),h=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),s=new Float32Array(16);function d(w,c,A){this.lo=w,this.hi=c,this.pixelsPerDataUnit=A}var p=[0,0,0,1],f=[0,0,0,1];function g(w,c,A,k,C){for(var E=0;E<3;++E){for(var L=p,D=f,N=0;N<3;++N)D[N]=L[N]=A[N];D[3]=L[3]=1,D[E]+=1,v(D,D,c),D[3]<0&&(w[E]=1/0),L[E]-=1,v(L,L,c),L[3]<0&&(w[E]=1/0);var F=(L[0]/L[3]-D[0]/D[3])*k,I=(L[1]/L[3]-D[1]/D[3])*C;w[E]=.25*Math.sqrt(F*F+I*I)}return w}var m=[new d(1/0,-1/0,1/0),new d(1/0,-1/0,1/0),new d(1/0,-1/0,1/0)],u=[0,0,0]},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(x,M,_){"use strict";var e=x("typedarray-pool"),o=x("ndarray-ops"),a=x("ndarray"),l=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function i(d,p,f,g,m){this.gl=d,this.type=p,this.handle=f,this.length=g,this.usage=m}var v=i.prototype;function h(d,p,f,g,m,u){var w=m.length*m.BYTES_PER_ELEMENT;if(u<0)return d.bufferData(p,m,g),w;if(w+u>f)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return d.bufferSubData(p,u,m),f}v.bind=function(){this.gl.bindBuffer(this.type,this.handle)},v.unbind=function(){this.gl.bindBuffer(this.type,null)},v.dispose=function(){this.gl.deleteBuffer(this.handle)},v.update=function(d,p){if("number"!=typeof p&&(p=-1),this.bind(),"object"==typeof d&&void 0!==d.shape){var f=d.dtype;if(l.indexOf(f)<0&&(f="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(f=gl.getExtension("OES_element_index_uint")&&"uint16"!==f?"uint32":"uint16"),f===d.dtype&&function(w,c){for(var A=1,k=c.length-1;k>=0;--k){if(c[k]!==A)return!1;A*=w[k]}return!0}(d.shape,d.stride))this.length=h(this.gl,this.type,this.length,this.usage,0===d.offset&&d.data.length===d.shape[0]?d.data:d.data.subarray(d.offset,d.shape[0]),p);else{var g=e.malloc(d.size,f),m=a(g,d.shape);o.assign(m,d),this.length=h(this.gl,this.type,this.length,this.usage,p<0?g:g.subarray(0,d.size),p),e.free(g)}}else if(Array.isArray(d)){var u;u=function(d,p){for(var f=e.malloc(d.length,p),g=d.length,m=0;m<g;++m)f[m]=d[m];return f}(d,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=h(this.gl,this.type,this.length,this.usage,p<0?u:u.subarray(0,d.length),p),e.free(u)}else if("object"==typeof d&&"number"==typeof d.length)this.length=h(this.gl,this.type,this.length,this.usage,d,p);else{if("number"!=typeof d&&void 0!==d)throw new Error("gl-buffer: Invalid data type");if(p>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(d|=0)<=0&&(d=1),this.gl.bufferData(this.type,0|d,this.usage),this.length=d}},M.exports=function(d,p,f,g){if(g=g||d.DYNAMIC_DRAW,(f=f||d.ARRAY_BUFFER)!==d.ARRAY_BUFFER&&f!==d.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(g!==d.DYNAMIC_DRAW&&g!==d.STATIC_DRAW&&g!==d.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var m=d.createBuffer(),u=new i(d,f,m,0,g);return u.update(p),u}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(x,M,_){"use strict";var e=x("gl-vec3");M.exports=function(a,l){var i=a.positions,v=a.vectors,h={positions:[],vertexIntensity:[],vertexIntensityBounds:a.vertexIntensityBounds,vectors:[],cells:[],coneOffset:a.coneOffset,colormap:a.colormap};if(0===a.positions.length)return l&&(l[0]=[0,0,0],l[1]=[0,0,0]),h;for(var s=0,d=1/0,p=-1/0,f=1/0,g=-1/0,m=1/0,u=-1/0,w=null,c=null,A=[],k=1/0,C=!1,E=0;E<i.length;E++){var L=i[E];d=Math.min(L[0],d),p=Math.max(L[0],p),f=Math.min(L[1],f),g=Math.max(L[1],g),m=Math.min(L[2],m),u=Math.max(L[2],u);var D=v[E];if(e.length(D)>s&&(s=e.length(D)),E){var N=2*e.distance(w,L)/(e.length(c)+e.length(D));N?(k=Math.min(k,N),C=!1):C=!0}C||(w=L,c=D),A.push(D)}var I=[p,g,u];l&&(l[0]=[d,f,m],l[1]=I),0===s&&(s=1);var P=1/s;isFinite(k)||(k=1),h.vectorScale=k;var j=a.coneSize||.5;a.absoluteConeSize&&(j=a.absoluteConeSize*P),h.coneScale=j,E=0;for(var V=0;E<i.length;E++)for(var Z=(L=i[E])[0],Y=L[1],ee=L[2],re=A[E],X=e.length(re)*P,K=0;K<8;K++){h.positions.push([Z,Y,ee,V++]),h.positions.push([Z,Y,ee,V++]),h.positions.push([Z,Y,ee,V++]),h.positions.push([Z,Y,ee,V++]),h.positions.push([Z,Y,ee,V++]),h.positions.push([Z,Y,ee,V++]),h.vectors.push(re),h.vectors.push(re),h.vectors.push(re),h.vectors.push(re),h.vectors.push(re),h.vectors.push(re),h.vertexIntensity.push(X,X,X),h.vertexIntensity.push(X,X,X);var ie=h.positions.length;h.cells.push([ie-6,ie-5,ie-4],[ie-3,ie-2,ie-1])}return h};var o=x("./lib/shaders");M.exports.createMesh=x("./create_mesh"),M.exports.createConeMesh=function(a,l){return M.exports.createMesh(a,l,{shaders:o,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(x,M,_){"use strict";var e=x("gl-shader"),o=x("gl-buffer"),a=x("gl-vao"),l=x("gl-texture2d"),i=x("gl-mat4/multiply"),v=x("gl-mat4/invert"),h=x("ndarray"),s=x("colormap"),d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(u,w,c,A,k,C,E,L,D,N,F){this.gl=u,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=w,this.dirty=!0,this.triShader=c,this.pickShader=A,this.trianglePositions=k,this.triangleVectors=C,this.triangleColors=L,this.triangleUVs=D,this.triangleIds=E,this.triangleVAO=N,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=F,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=d,this._view=d,this._projection=d,this._resolution=[1,1]}var f=p.prototype;function g(u,w){var c=e(u,w.meshShader.vertex,w.meshShader.fragment,null,w.meshShader.attributes);return c.attributes.position.location=0,c.attributes.color.location=2,c.attributes.uv.location=3,c.attributes.vector.location=4,c}function m(u,w){var c=e(u,w.pickShader.vertex,w.pickShader.fragment,null,w.pickShader.attributes);return c.attributes.position.location=0,c.attributes.id.location=1,c.attributes.vector.location=4,c}f.isOpaque=function(){return this.opacity>=1},f.isTransparent=function(){return this.opacity<1},f.pickSlots=1,f.setPickBase=function(u){this.pickId=u},f.update=function(u){u=u||{};var w=this.gl;this.dirty=!0,"lightPosition"in u&&(this.lightPosition=u.lightPosition),"opacity"in u&&(this.opacity=u.opacity),"ambient"in u&&(this.ambientLight=u.ambient),"diffuse"in u&&(this.diffuseLight=u.diffuse),"specular"in u&&(this.specularLight=u.specular),"roughness"in u&&(this.roughness=u.roughness),"fresnel"in u&&(this.fresnel=u.fresnel),void 0!==u.tubeScale&&(this.tubeScale=u.tubeScale),void 0!==u.vectorScale&&(this.vectorScale=u.vectorScale),void 0!==u.coneScale&&(this.coneScale=u.coneScale),void 0!==u.coneOffset&&(this.coneOffset=u.coneOffset),u.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=w.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=w.LINEAR,this.texture.setPixels(function(ae){for(var G=s({colormap:ae,nshades:256,format:"rgba"}),te=new Uint8Array(1024),ne=0;ne<256;++ne){for(var le=G[ne],ue=0;ue<3;++ue)te[4*ne+ue]=le[ue];te[4*ne+3]=255*le[3]}return h(te,[256,256,4],[4,0,1])}(u.colormap)),this.texture.generateMipmap());var c=u.cells,A=u.positions,k=u.vectors;if(A&&c&&k){var C=[],E=[],L=[],D=[],N=[];this.cells=c,this.positions=A,this.vectors=k;var F=u.meshColor||[1,1,1,1],I=u.vertexIntensity,P=1/0,j=-1/0;if(I)if(u.vertexIntensityBounds)P=+u.vertexIntensityBounds[0],j=+u.vertexIntensityBounds[1];else for(var V=0;V<I.length;++V){var Z=I[V];P=Math.min(P,Z),j=Math.max(j,Z)}else for(V=0;V<A.length;++V)Z=A[V][2],P=Math.min(P,Z),j=Math.max(j,Z);for(this.intensity=I||function(ae){for(var G=ae.length,te=new Array(G),ne=0;ne<G;++ne)te[ne]=ae[ne][2];return te}(A),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],V=0;V<A.length;++V)for(var Y=A[V],ee=0;ee<3;++ee)!isNaN(Y[ee])&&isFinite(Y[ee])&&(this.bounds[0][ee]=Math.min(this.bounds[0][ee],Y[ee]),this.bounds[1][ee]=Math.max(this.bounds[1][ee],Y[ee]));var re=0;e:for(V=0;V<c.length;++V){var X=c[V];switch(X.length){case 3:for(ee=0;ee<3;++ee){Y=A[ie=X[ee]];for(var K=0;K<3;++K)if(isNaN(Y[K])||!isFinite(Y[K]))continue e}for(ee=0;ee<3;++ee){var ie;Y=A[ie=X[2-ee]],C.push(Y[0],Y[1],Y[2],Y[3]);var q=k[ie];E.push(q[0],q[1],q[2],q[3]||0);var U;L.push(F[0],F[1],F[2],3===F.length?1:F[3]),D.push((U=I?[(I[ie]-P)/(j-P),0]:[(Y[2]-P)/(j-P),0])[0],U[1]),N.push(V)}re+=1}}this.triangleCount=re,this.trianglePositions.update(C),this.triangleVectors.update(E),this.triangleColors.update(L),this.triangleUVs.update(D),this.triangleIds.update(new Uint32Array(N))}},f.drawTransparent=f.draw=function(u){for(var w=this.gl,c=(u=u||{}).model||d,A=u.view||d,k=u.projection||d,C=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)C[0][E]=Math.max(C[0][E],this.clipBounds[0][E]),C[1][E]=Math.min(C[1][E],this.clipBounds[1][E]);var L={model:c,view:A,projection:k,inverseModel:d.slice(),clipBounds:C,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};L.inverseModel=v(L.inverseModel,L.model),w.disable(w.CULL_FACE),this.texture.bind(0);var D=new Array(16);for(i(D,L.view,L.model),i(D,L.projection,D),v(D,D),E=0;E<3;++E)L.eyePosition[E]=D[12+E]/D[15];var N=D[15];for(E=0;E<3;++E)N+=this.lightPosition[E]*D[4*E+3];for(E=0;E<3;++E){for(var F=D[12+E],I=0;I<3;++I)F+=D[4*I+E]*this.lightPosition[I];L.lightPosition[E]=F/N}if(this.triangleCount>0){var P=this.triShader;P.bind(),P.uniforms=L,this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},f.drawPick=function(u){for(var w=this.gl,c=(u=u||{}).model||d,A=u.view||d,k=u.projection||d,C=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],E=0;E<3;++E)C[0][E]=Math.max(C[0][E],this.clipBounds[0][E]),C[1][E]=Math.min(C[1][E],this.clipBounds[1][E]);this._model=[].slice.call(c),this._view=[].slice.call(A),this._projection=[].slice.call(k),this._resolution=[w.drawingBufferWidth,w.drawingBufferHeight];var L={model:c,view:A,projection:k,clipBounds:C,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},D=this.pickShader;D.bind(),D.uniforms=L,this.triangleCount>0&&(this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},f.pick=function(u){if(!u||u.id!==this.pickId)return null;var w=u.value[0]+256*u.value[1]+65536*u.value[2],c=this.cells[w],A=this.positions[c[1]].slice(0,3),k={position:A,dataCoordinate:A,index:Math.floor(c[1]/48)};return"cone"===this.traceType?k.index=Math.floor(c[1]/48):"streamtube"===this.traceType&&(k.intensity=this.intensity[c[1]],k.velocity=this.vectors[c[1]].slice(0,3),k.divergence=this.vectors[c[1]][3],k.index=w),k},f.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},M.exports=function(u,w,c){var A=c.shaders;1===arguments.length&&(u=(w=u).gl);var k=g(u,A),C=m(u,A),E=l(u,h(new Uint8Array([255,255,255,255]),[1,1,4]));E.generateMipmap(),E.minFilter=u.LINEAR_MIPMAP_LINEAR,E.magFilter=u.LINEAR;var L=o(u),D=o(u),N=o(u),F=o(u),I=o(u),j=new p(u,E,k,C,L,D,I,N,F,a(u,[{buffer:L,type:u.FLOAT,size:4},{buffer:I,type:u.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:N,type:u.FLOAT,size:4},{buffer:F,type:u.FLOAT,size:2},{buffer:D,type:u.FLOAT,size:4}]),c.traceType||"cone");return j.update(w),j}},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(x,M,_){var e=x("glslify"),o=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),l=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);_.meshShader={vertex:o,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},_.pickShader={vertex:l,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(x,M,_){M.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(x,M,_){var e=x("./1.0/numbers");M.exports=function(o){return e[o]}},{"./1.0/numbers":82}],84:[function(x,M,_){"use strict";M.exports=function(p){var f=p.gl,g=e(f),m=o(f,[{buffer:g,type:f.FLOAT,size:3,offset:0,stride:40},{buffer:g,type:f.FLOAT,size:4,offset:12,stride:40},{buffer:g,type:f.FLOAT,size:3,offset:28,stride:40}]),u=a(f);u.attributes.position.location=0,u.attributes.color.location=1,u.attributes.offset.location=2;var w=new i(f,g,m,u);return w.update(p),w};var e=x("gl-buffer"),o=x("gl-vao"),a=x("./shaders/index"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function i(p,f,g,m){this.gl=p,this.shader=m,this.buffer=f,this.vao=g,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var v=i.prototype;function h(p,f){for(var g=0;g<3;++g)p[0][g]=Math.min(p[0][g],f[g]),p[1][g]=Math.max(p[1][g],f[g])}v.isOpaque=function(){return!this.hasAlpha},v.isTransparent=function(){return this.hasAlpha},v.drawTransparent=v.draw=function(p){var f=this.gl,g=this.shader.uniforms;this.shader.bind();var m=g.view=p.view||l,u=g.projection=p.projection||l;g.model=p.model||l,g.clipBounds=this.clipBounds,g.opacity=this.opacity;var C=(p._ortho?2:1)*this.pixelRatio*(u[3]*m[12]+u[7]*m[13]+u[11]*m[14]+u[15]*m[15])/f.drawingBufferHeight;this.vao.bind();for(var E=0;E<3;++E)f.lineWidth(this.lineWidth[E]*this.pixelRatio),g.capSize=this.capSize[E]*C,this.lineCount[E]&&f.drawArrays(f.LINES,this.lineOffset[E],this.lineCount[E]);this.vao.unbind()};var s=function(){for(var p=new Array(3),f=0;f<3;++f){for(var g=[],m=1;m<=2;++m)for(var u=-1;u<=1;u+=2){var w=[0,0,0];w[(m+f)%3]=u,g.push(w)}p[f]=g}return p}();function d(p,f,g,m){for(var u=s[m],w=0;w<u.length;++w){var c=u[w];p.push(f[0],f[1],f[2],g[0],g[1],g[2],g[3],c[0],c[1],c[2])}return u.length}v.update=function(p){"lineWidth"in(p=p||{})&&(this.lineWidth=p.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in p&&(this.capSize=p.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in p&&(this.opacity=+p.opacity,this.opacity<1&&(this.hasAlpha=!0));var f=p.color||[[0,0,0],[0,0,0],[0,0,0]],g=p.position,m=p.error;if(Array.isArray(f[0])||(f=[f,f,f]),g&&m){var u=[],w=g.length,c=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var A=0;A<3;++A){this.lineOffset[A]=c;e:for(var k=0;k<w;++k){for(var C=g[k],E=0;E<3;++E)if(isNaN(C[E])||!isFinite(C[E]))continue e;var N,L=m[k],D=f[A];Array.isArray(D[0])&&(D=f[k]),3===D.length?D=[D[0],D[1],D[2],1]:4===D.length&&(D=[D[0],D[1],D[2],D[3]],!this.hasAlpha&&D[3]<1&&(this.hasAlpha=!0)),isNaN(L[0][A])||isNaN(L[1][A])||(L[0][A]<0&&((N=C.slice())[A]+=L[0][A],u.push(C[0],C[1],C[2],D[0],D[1],D[2],D[3],0,0,0,N[0],N[1],N[2],D[0],D[1],D[2],D[3],0,0,0),h(this.bounds,N),c+=2+d(u,N,D,A)),L[1][A]>0&&((N=C.slice())[A]+=L[1][A],u.push(C[0],C[1],C[2],D[0],D[1],D[2],D[3],0,0,0,N[0],N[1],N[2],D[0],D[1],D[2],D[3],0,0,0),h(this.bounds,N),c+=2+d(u,N,D,A)))}this.lineCount[A]=c-this.lineOffset[A]}this.buffer.update(u)}},v.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(x,M,_){"use strict";var e=x("glslify"),o=x("gl-shader"),a=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);M.exports=function(i){return o(i,a,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(x,M,_){"use strict";var e=x("gl-texture2d");M.exports=function(w,c,A,k){o||(o=w.FRAMEBUFFER_UNSUPPORTED,a=w.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,l=w.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,i=w.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var C=w.getExtension("WEBGL_draw_buffers");if(!v&&C&&function(P,j){var V=P.getParameter(j.MAX_COLOR_ATTACHMENTS_WEBGL);v=new Array(V+1);for(var Z=0;Z<=V;++Z){for(var Y=new Array(V),ee=0;ee<Z;++ee)Y[ee]=P.COLOR_ATTACHMENT0+ee;for(ee=Z;ee<V;++ee)Y[ee]=P.NONE;v[Z]=Y}}(w,C),Array.isArray(c)&&(k=A,A=0|c[1],c=0|c[0]),"number"!=typeof c)throw new Error("gl-fbo: Missing shape parameter");var E=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(c<0||c>E||A<0||A>E)throw new Error("gl-fbo: Parameters are too large for FBO");var L=1;if("color"in(k=k||{})){if((L=Math.max(0|k.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(L>1){if(!C)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(L>w.getParameter(C.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+L+" draw buffers")}}var D=w.UNSIGNED_BYTE,N=w.getExtension("OES_texture_float");if(k.float&&L>0){if(!N)throw new Error("gl-fbo: Context does not support floating point textures");D=w.FLOAT}else k.preferFloat&&L>0&&N&&(D=w.FLOAT);var F=!0;"depth"in k&&(F=!!k.depth);var I=!1;return"stencil"in k&&(I=!!k.stencil),new g(w,c,A,D,L,F,I,C)};var o,a,l,i,v=null;function h(w){return[w.getParameter(w.FRAMEBUFFER_BINDING),w.getParameter(w.RENDERBUFFER_BINDING),w.getParameter(w.TEXTURE_BINDING_2D)]}function s(w,c){w.bindFramebuffer(w.FRAMEBUFFER,c[0]),w.bindRenderbuffer(w.RENDERBUFFER,c[1]),w.bindTexture(w.TEXTURE_2D,c[2])}function d(w){switch(w){case o:throw new Error("gl-fbo: Framebuffer unsupported");case a:throw new Error("gl-fbo: Framebuffer incomplete attachment");case l:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case i:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function p(w,c,A,k,C,E){if(!k)return null;var L=e(w,c,A,C,k);return L.magFilter=w.NEAREST,L.minFilter=w.NEAREST,L.mipSamples=1,L.bind(),w.framebufferTexture2D(w.FRAMEBUFFER,E,w.TEXTURE_2D,L.handle,0),L}function f(w,c,A,k,C){var E=w.createRenderbuffer();return w.bindRenderbuffer(w.RENDERBUFFER,E),w.renderbufferStorage(w.RENDERBUFFER,k,c,A),w.framebufferRenderbuffer(w.FRAMEBUFFER,C,w.RENDERBUFFER,E),E}function g(w,c,A,k,C,E,L,D){this.gl=w,this._shape=[0|c,0|A],this._destroyed=!1,this._ext=D,this.color=new Array(C);for(var N=0;N<C;++N)this.color[N]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=k,this._useDepth=E,this._useStencil=L;var F=this,I=[0|c,0|A];Object.defineProperties(I,{0:{get:function(){return F._shape[0]},set:function(P){return F.width=P}},1:{get:function(){return F._shape[1]},set:function(P){return F.height=P}}}),this._shapeVector=I,function(P){var j=h(P.gl),V=P.gl,Z=P.handle=V.createFramebuffer(),Y=P._shape[0],ee=P._shape[1],re=P.color.length,X=P._ext,K=P._useStencil,ie=P._useDepth,q=P._colorType;V.bindFramebuffer(V.FRAMEBUFFER,Z);for(var U=0;U<re;++U)P.color[U]=p(V,Y,ee,q,V.RGBA,V.COLOR_ATTACHMENT0+U);0===re?(P._color_rb=f(V,Y,ee,V.RGBA4,V.COLOR_ATTACHMENT0),X&&X.drawBuffersWEBGL(v[0])):re>1&&X.drawBuffersWEBGL(v[re]);var W=V.getExtension("WEBGL_depth_texture");W?K?P.depth=p(V,Y,ee,W.UNSIGNED_INT_24_8_WEBGL,V.DEPTH_STENCIL,V.DEPTH_STENCIL_ATTACHMENT):ie&&(P.depth=p(V,Y,ee,V.UNSIGNED_SHORT,V.DEPTH_COMPONENT,V.DEPTH_ATTACHMENT)):ie&&K?P._depth_rb=f(V,Y,ee,V.DEPTH_STENCIL,V.DEPTH_STENCIL_ATTACHMENT):ie?P._depth_rb=f(V,Y,ee,V.DEPTH_COMPONENT16,V.DEPTH_ATTACHMENT):K&&(P._depth_rb=f(V,Y,ee,V.STENCIL_INDEX,V.STENCIL_ATTACHMENT));var ae=V.checkFramebufferStatus(V.FRAMEBUFFER);if(ae!==V.FRAMEBUFFER_COMPLETE){for(P._destroyed=!0,V.bindFramebuffer(V.FRAMEBUFFER,null),V.deleteFramebuffer(P.handle),P.handle=null,P.depth&&(P.depth.dispose(),P.depth=null),P._depth_rb&&(V.deleteRenderbuffer(P._depth_rb),P._depth_rb=null),U=0;U<P.color.length;++U)P.color[U].dispose(),P.color[U]=null;P._color_rb&&(V.deleteRenderbuffer(P._color_rb),P._color_rb=null),s(V,j),d(ae)}s(V,j)}(this)}var m=g.prototype;function u(w,c,A){if(w._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(w._shape[0]!==c||w._shape[1]!==A){var k=w.gl,C=k.getParameter(k.MAX_RENDERBUFFER_SIZE);if(c<0||c>C||A<0||A>C)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");w._shape[0]=c,w._shape[1]=A;for(var E=h(k),L=0;L<w.color.length;++L)w.color[L].shape=w._shape;w._color_rb&&(k.bindRenderbuffer(k.RENDERBUFFER,w._color_rb),k.renderbufferStorage(k.RENDERBUFFER,k.RGBA4,w._shape[0],w._shape[1])),w.depth&&(w.depth.shape=w._shape),w._depth_rb&&(k.bindRenderbuffer(k.RENDERBUFFER,w._depth_rb),w._useDepth&&w._useStencil?k.renderbufferStorage(k.RENDERBUFFER,k.DEPTH_STENCIL,w._shape[0],w._shape[1]):w._useDepth?k.renderbufferStorage(k.RENDERBUFFER,k.DEPTH_COMPONENT16,w._shape[0],w._shape[1]):w._useStencil&&k.renderbufferStorage(k.RENDERBUFFER,k.STENCIL_INDEX,w._shape[0],w._shape[1])),k.bindFramebuffer(k.FRAMEBUFFER,w.handle);var D=k.checkFramebufferStatus(k.FRAMEBUFFER);D!==k.FRAMEBUFFER_COMPLETE&&(w.dispose(),s(k,E),d(D)),s(k,E)}}Object.defineProperties(m,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(w){if(Array.isArray(w)||(w=[0|w,0|w]),2!==w.length)throw new Error("gl-fbo: Shape vector must be length 2");var c=0|w[0],A=0|w[1];return u(this,c,A),[c,A]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(w){return u(this,w|=0,this._shape[1]),w},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(w){return u(this,this._shape[0],w|=0),w},enumerable:!1}}),m.bind=function(){if(!this._destroyed){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,this.handle),w.viewport(0,0,this._shape[0],this._shape[1])}},m.dispose=function(){if(!this._destroyed){this._destroyed=!0;var w=this.gl;w.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(w.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var c=0;c<this.color.length;++c)this.color[c].dispose(),this.color[c]=null;this._color_rb&&(w.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":146}],87:[function(x,M,_){var e=x("sprintf-js").sprintf,o=x("gl-constants/lookup"),a=x("glsl-shader-name"),l=x("add-line-numbers");M.exports=function(i,v,h){"use strict";var s=a(v)||"of unknown name (see npm glsl-shader-name)",d="unknown type";void 0!==h&&(d=h===o.FRAGMENT_SHADER?"fragment":"vertex");for(var p=e("Error compiling %s shader %s:\n",d,s),f=e("%s%s",p,i),g=i.split("\n"),m={},u=0;u<g.length;u++){var w=g[u];if(""!==w&&"\0"!==w){var c=parseInt(w.split(":")[2]);if(isNaN(c))throw new Error(e("Could not parse error: %s",w));m[c]=w}}var A=l(v).split("\n");for(u=0;u<A.length;u++)if((m[u+3]||m[u+2]||m[u+1])&&(p+=A[u]+"\n",m[u+1])){var C=m[u+1];C=C.substr(C.split(":",3).join(":").length+1).trim(),p+=e("^^^ %s\n\n",C)}return{long:p.trim(),short:f.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(x,M,_){"use strict";M.exports=function(f,g){var m=f.gl,E=new h(f,l(m,v.vertex,v.fragment),l(m,v.pickVertex,v.pickFragment),i(m),i(m),i(m),i(m));return E.update(g),f.addObject(E),E};var e=x("binary-search-bounds"),o=x("iota-array"),a=x("typedarray-pool"),l=x("gl-shader"),i=x("gl-buffer"),v=x("./lib/shaders");function h(f,g,m,u,w,c,A){this.plot=f,this.shader=g,this.pickShader=m,this.positionBuffer=u,this.weightBuffer=w,this.colorBuffer=c,this.idBuffer=A,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var s,f,g,d=h.prototype,p=[0,0,1,0,0,1,1,0,1,1,0,1];d.draw=(s=[1,0,0,0,1,0,0,0,1],function(){var f=this.plot,g=this.shader,m=this.bounds,u=this.numVertices;if(!(u<=0)){var w=f.gl,c=f.dataBox,k=m[3]-m[1],C=c[2]-c[0],E=c[3]-c[1];s[0]=2*(m[2]-m[0])/C,s[4]=2*k/E,s[6]=2*(m[0]-c[0])/C-1,s[7]=2*(m[1]-c[1])/E-1,g.bind();var L=g.uniforms;L.viewTransform=s,L.shape=this.shape;var D=g.attributes;this.positionBuffer.bind(),D.position.pointer(),this.weightBuffer.bind(),D.weight.pointer(w.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),D.color.pointer(w.UNSIGNED_BYTE,!0),w.drawArrays(w.TRIANGLES,0,u)}}),d.drawPick=(f=[1,0,0,0,1,0,0,0,1],g=[0,0,0,0],function(m){var u=this.plot,w=this.pickShader,c=this.bounds,A=this.numVertices;if(!(A<=0)){var k=u.gl,C=u.dataBox,L=c[3]-c[1],D=C[2]-C[0],N=C[3]-C[1];f[0]=2*(c[2]-c[0])/D,f[4]=2*L/N,f[6]=2*(c[0]-C[0])/D-1,f[7]=2*(c[1]-C[1])/N-1;for(var F=0;F<4;++F)g[F]=m>>8*F&255;this.pickOffset=m,w.bind();var I=w.uniforms;I.viewTransform=f,I.pickOffset=g,I.shape=this.shape;var P=w.attributes;return this.positionBuffer.bind(),P.position.pointer(),this.weightBuffer.bind(),P.weight.pointer(k.UNSIGNED_BYTE,!1),this.idBuffer.bind(),P.pickId.pointer(k.UNSIGNED_BYTE,!1),k.drawArrays(k.TRIANGLES,0,A),m+this.shape[0]*this.shape[1]}}),d.pick=function(f,g,m){var u=this.pickOffset;if(m<u||m>=u+this.shape[0]*this.shape[1])return null;var c=m-u;return{object:this,pointId:c,dataCoord:[this.xData[c%this.shape[0]],this.yData[c/this.shape[0]|0]]}},d.update=function(f){var g=(f=f||{}).shape||[0,0],m=f.x||o(g[0]),u=f.y||o(g[1]),w=f.z||new Float32Array(g[0]*g[1]),c=!1!==f.zsmooth;this.xData=m,this.yData=u;var A,k,C,E,L=f.colorLevels||[0],D=f.colorValues||[0,0,0,1],N=L.length,F=this.bounds;c?(A=F[0]=m[0],k=F[1]=u[0],C=F[2]=m[m.length-1],E=F[3]=u[u.length-1]):(A=F[0]=m[0]+(m[1]-m[0])/2,k=F[1]=u[0]+(u[1]-u[0])/2,C=F[2]=m[m.length-1]+(m[m.length-1]-m[m.length-2])/2,E=F[3]=u[u.length-1]+(u[u.length-1]-u[u.length-2])/2);var I=1/(C-A),P=1/(E-k),j=g[0],V=g[1];this.shape=[j,V];var Z=(c?(j-1)*(V-1):j*V)*(p.length>>>1);this.numVertices=Z;for(var Y=a.mallocUint8(4*Z),ee=a.mallocFloat32(2*Z),re=a.mallocUint8(2*Z),X=a.mallocUint32(Z),K=0,ie=c?j-1:j,q=c?V-1:V,U=0;U<q;++U){var W,ae;c?(W=P*(u[U]-k),ae=P*(u[U+1]-k)):(W=U<V-1?P*(u[U]-(u[U+1]-u[U])/2-k):P*(u[U]-(u[U]-u[U-1])/2-k),ae=U<V-1?P*(u[U]+(u[U+1]-u[U])/2-k):P*(u[U]+(u[U]-u[U-1])/2-k));for(var G=0;G<ie;++G){var te,ne;c?(te=I*(m[G]-A),ne=I*(m[G+1]-A)):(te=G<j-1?I*(m[G]-(m[G+1]-m[G])/2-A):I*(m[G]-(m[G]-m[G-1])/2-A),ne=G<j-1?I*(m[G]+(m[G+1]-m[G])/2-A):I*(m[G]+(m[G]-m[G-1])/2-A));for(var le=0;le<p.length;le+=2){var ue,pe,de,_e,me=p[le],we=p[le+1],De=w[c?(U+we)*j+(G+me):U*j+G],Le=e.le(L,De);if(Le<0)ue=D[0],pe=D[1],de=D[2],_e=D[3];else if(Le===N-1)ue=D[4*N-4],pe=D[4*N-3],de=D[4*N-2],_e=D[4*N-1];else{var Ie=(De-L[Le])/(L[Le+1]-L[Le]),je=1-Ie,ye=4*Le,Me=4*(Le+1);ue=je*D[ye]+Ie*D[Me],pe=je*D[ye+1]+Ie*D[Me+1],de=je*D[ye+2]+Ie*D[Me+2],_e=je*D[ye+3]+Ie*D[Me+3]}Y[4*K]=255*ue,Y[4*K+1]=255*pe,Y[4*K+2]=255*de,Y[4*K+3]=255*_e,ee[2*K]=.5*te+.5*ne,ee[2*K+1]=.5*W+.5*ae,re[2*K]=me,re[2*K+1]=we,X[K]=U*j+G,K+=1}}}this.positionBuffer.update(ee),this.weightBuffer.update(re),this.colorBuffer.update(Y),this.idBuffer.update(X),a.free(ee),a.free(Y),a.free(re),a.free(X)},d.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(x,M,_){"use strict";var e=x("glslify");M.exports={fragment:e(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:231}],90:[function(x,M,_){var e=x("glslify"),o=x("gl-shader"),a=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),v=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];_.createShader=function(h){return o(h,a,l,null,v)},_.createPickShader=function(h){return o(h,a,i,null,v)}},{"gl-shader":132,glslify:231}],91:[function(x,M,_){"use strict";M.exports=function(A){var k=A.gl||A.scene&&A.scene.gl,C=d(k);C.attributes.position.location=0,C.attributes.nextPosition.location=1,C.attributes.arcLength.location=2,C.attributes.lineWidth.location=3,C.attributes.color.location=4;var E=p(k);E.attributes.position.location=0,E.attributes.nextPosition.location=1,E.attributes.arcLength.location=2,E.attributes.lineWidth.location=3,E.attributes.color.location=4;for(var L=e(k),D=o(k,[{buffer:L,size:3,offset:0,stride:48},{buffer:L,size:3,offset:12,stride:48},{buffer:L,size:1,offset:24,stride:48},{buffer:L,size:1,offset:28,stride:48},{buffer:L,size:4,offset:32,stride:48}]),N=h(new Array(1024),[256,1,4]),F=0;F<1024;++F)N.data[F]=255;var I=a(k,N);I.wrap=k.REPEAT;var P=new w(k,C,E,L,D,I);return P.update(A),P};var e=x("gl-buffer"),o=x("gl-vao"),a=x("gl-texture2d"),l=new Uint8Array(4),i=new Float32Array(l.buffer),v=x("binary-search-bounds"),h=x("ndarray"),s=x("./lib/shaders"),d=s.createShader,p=s.createPickShader,f=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function g(A,k){for(var C=0,E=0;E<3;++E){var L=A[E]-k[E];C+=L*L}return Math.sqrt(C)}function m(A){for(var k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],C=0;C<3;++C)k[0][C]=Math.max(A[0][C],k[0][C]),k[1][C]=Math.min(A[1][C],k[1][C]);return k}function u(A,k,C,E){this.arcLength=A,this.position=k,this.index=C,this.dataCoordinate=E}function w(A,k,C,E,L,D){this.gl=A,this.shader=k,this.pickShader=C,this.buffer=E,this.vao=L,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=D,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var c=w.prototype;c.isTransparent=function(){return this.hasAlpha},c.isOpaque=function(){return!this.hasAlpha},c.pickSlots=1,c.setPickBase=function(A){this.pickId=A},c.drawTransparent=c.draw=function(A){if(this.vertexCount){var k=this.gl,C=this.shader,E=this.vao;C.bind(),C.uniforms={model:A.model||f,view:A.view||f,projection:A.projection||f,clipBounds:m(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[k.drawingBufferWidth,k.drawingBufferHeight],pixelRatio:this.pixelRatio},E.bind(),E.draw(k.TRIANGLE_STRIP,this.vertexCount),E.unbind()}},c.drawPick=function(A){if(this.vertexCount){var k=this.gl,C=this.pickShader,E=this.vao;C.bind(),C.uniforms={model:A.model||f,view:A.view||f,projection:A.projection||f,pickId:this.pickId,clipBounds:m(this.clipBounds),screenShape:[k.drawingBufferWidth,k.drawingBufferHeight],pixelRatio:this.pixelRatio},E.bind(),E.draw(k.TRIANGLE_STRIP,this.vertexCount),E.unbind()}},c.update=function(A){var k,C;this.dirty=!0;var E=!!A.connectGaps;"dashScale"in A&&(this.dashScale=A.dashScale),this.hasAlpha=!1,"opacity"in A&&(this.opacity=+A.opacity,this.opacity<1&&(this.hasAlpha=!0));var L=[],D=[],N=[],F=0,I=0,P=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],j=A.position||A.positions;if(j){var V=A.color||A.colors||[0,0,0,1],Z=A.lineWidth||1,Y=!1;e:for(k=1;k<j.length;++k){var ee,re,X,K=j[k-1],ie=j[k];for(D.push(F),N.push(K.slice()),C=0;C<3;++C){if(isNaN(K[C])||isNaN(ie[C])||!isFinite(K[C])||!isFinite(ie[C])){if(!E&&L.length>0){for(var q=0;q<24;++q)L.push(L[L.length-12]);I+=2,Y=!0}continue e}P[0][C]=Math.min(P[0][C],K[C],ie[C]),P[1][C]=Math.max(P[1][C],K[C],ie[C])}Array.isArray(V[0])?(ee=V.length>k-1?V[k-1]:V.length>0?V[V.length-1]:[0,0,0,1],re=V.length>k?V[k]:V.length>0?V[V.length-1]:[0,0,0,1]):ee=re=V,3===ee.length&&(ee=[ee[0],ee[1],ee[2],1]),3===re.length&&(re=[re[0],re[1],re[2],1]),!this.hasAlpha&&ee[3]<1&&(this.hasAlpha=!0),X=Array.isArray(Z)?Z.length>k-1?Z[k-1]:Z.length>0?Z[Z.length-1]:[0,0,0,1]:Z;var U=F;if(F+=g(K,ie),Y){for(C=0;C<2;++C)L.push(K[0],K[1],K[2],ie[0],ie[1],ie[2],U,X,ee[0],ee[1],ee[2],ee[3]);I+=2,Y=!1}L.push(K[0],K[1],K[2],ie[0],ie[1],ie[2],U,X,ee[0],ee[1],ee[2],ee[3],K[0],K[1],K[2],ie[0],ie[1],ie[2],U,-X,ee[0],ee[1],ee[2],ee[3],ie[0],ie[1],ie[2],K[0],K[1],K[2],F,-X,re[0],re[1],re[2],re[3],ie[0],ie[1],ie[2],K[0],K[1],K[2],F,X,re[0],re[1],re[2],re[3]),I+=4}}if(this.buffer.update(L),D.push(F),N.push(j[j.length-1].slice()),this.bounds=P,this.vertexCount=I,this.points=N,this.arcLength=D,"dashes"in A){var W=A.dashes.slice();for(W.unshift(0),k=1;k<W.length;++k)W[k]=W[k-1]+W[k];var ae=h(new Array(1024),[256,1,4]);for(k=0;k<256;++k){for(C=0;C<4;++C)ae.set(k,0,C,0);1&v.le(W,W[W.length-1]*k/255)?ae.set(k,0,0,0):ae.set(k,0,0,255)}this.texture.setPixels(ae)}},c.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},c.pick=function(A){if(!A||A.id!==this.pickId)return null;var j,V,Z,k=(j=A.value[0],V=A.value[1],Z=A.value[2],l[0]=0,l[1]=Z,l[2]=V,l[3]=j,i[0]),C=v.le(this.arcLength,k);if(C<0)return null;if(C===this.arcLength.length-1)return new u(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),C);for(var E=this.points[C],L=this.points[Math.min(C+1,this.points.length-1)],D=(k-this.arcLength[C])/(this.arcLength[C+1]-this.arcLength[C]),N=1-D,F=[0,0,0],I=0;I<3;++I)F[I]=N*E[I]+D*L[I];var P=Math.min(D<.5?C:C+1,this.points.length-1);return new u(k,F,P,this.points[P])}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(x,M,_){M.exports=function(e){var o=new Float32Array(16);return o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o[4]=e[4],o[5]=e[5],o[6]=e[6],o[7]=e[7],o[8]=e[8],o[9]=e[9],o[10]=e[10],o[11]=e[11],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15],o}},{}],93:[function(x,M,_){M.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],94:[function(x,M,_){M.exports=function(e){var o=e[0],a=e[1],l=e[2],i=e[3],v=e[4],h=e[5],s=e[6],d=e[7],p=e[8],f=e[9],g=e[10],m=e[11],u=e[12],w=e[13],c=e[14],A=e[15];return(o*h-a*v)*(g*A-m*c)-(o*s-l*v)*(f*A-m*w)+(o*d-i*v)*(f*c-g*w)+(a*s-l*h)*(p*A-m*u)-(a*d-i*h)*(p*c-g*u)+(l*d-i*s)*(p*w-f*u)}},{}],95:[function(x,M,_){M.exports=function(e,o){var a=o[0],l=o[1],i=o[2],v=o[3],h=a+a,s=l+l,d=i+i,p=a*h,f=l*h,g=l*s,m=i*h,u=i*s,w=i*d,c=v*h,A=v*s,k=v*d;return e[0]=1-g-w,e[1]=f+k,e[2]=m-A,e[3]=0,e[4]=f-k,e[5]=1-p-w,e[6]=u+c,e[7]=0,e[8]=m+A,e[9]=u-c,e[10]=1-p-g,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],96:[function(x,M,_){M.exports=function(e,o,a){var l=o[0],i=o[1],v=o[2],h=o[3],s=l+l,d=i+i,p=v+v,f=l*s,g=l*d,m=l*p,u=i*d,w=i*p,c=v*p,A=h*s,k=h*d,C=h*p;return e[0]=1-(u+c),e[1]=g+C,e[2]=m-k,e[3]=0,e[4]=g-C,e[5]=1-(f+c),e[6]=w+A,e[7]=0,e[8]=m+k,e[9]=w-A,e[10]=1-(f+u),e[11]=0,e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=1,e}},{}],97:[function(x,M,_){M.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],98:[function(x,M,_){M.exports=function(e,o){var a=o[0],l=o[1],i=o[2],v=o[3],h=o[4],s=o[5],d=o[6],p=o[7],f=o[8],g=o[9],m=o[10],u=o[11],w=o[12],c=o[13],A=o[14],k=o[15],C=a*s-l*h,E=a*d-i*h,L=a*p-v*h,D=l*d-i*s,N=l*p-v*s,F=i*p-v*d,I=f*c-g*w,P=f*A-m*w,j=f*k-u*w,V=g*A-m*c,Z=g*k-u*c,Y=m*k-u*A,ee=C*Y-E*Z+L*V+D*j-N*P+F*I;return ee?(e[0]=(s*Y-d*Z+p*V)*(ee=1/ee),e[1]=(i*Z-l*Y-v*V)*ee,e[2]=(c*F-A*N+k*D)*ee,e[3]=(m*N-g*F-u*D)*ee,e[4]=(d*j-h*Y-p*P)*ee,e[5]=(a*Y-i*j+v*P)*ee,e[6]=(A*L-w*F-k*E)*ee,e[7]=(f*F-m*L+u*E)*ee,e[8]=(h*Z-s*j+p*I)*ee,e[9]=(l*j-a*Z-v*I)*ee,e[10]=(w*N-c*L+k*C)*ee,e[11]=(g*L-f*N-u*C)*ee,e[12]=(s*P-h*V-d*I)*ee,e[13]=(a*V-l*P+i*I)*ee,e[14]=(c*E-w*D-A*C)*ee,e[15]=(f*D-g*E+m*C)*ee,e):null}},{}],99:[function(x,M,_){var e=x("./identity");M.exports=function(o,a,l,i){var v,h,s,d,p,f,g,m,u,w,c=a[0],A=a[1],k=a[2],C=i[0],E=i[1],L=i[2],D=l[0],N=l[1],F=l[2];return Math.abs(c-D)<1e-6&&Math.abs(A-N)<1e-6&&Math.abs(k-F)<1e-6?e(o):(g=c-D,m=A-N,u=k-F,v=E*(u*=w=1/Math.sqrt(g*g+m*m+u*u))-L*(m*=w),h=L*(g*=w)-C*u,s=C*m-E*g,(w=Math.sqrt(v*v+h*h+s*s))?(v*=w=1/w,h*=w,s*=w):(v=0,h=0,s=0),d=m*s-u*h,p=u*v-g*s,f=g*h-m*v,(w=Math.sqrt(d*d+p*p+f*f))?(d*=w=1/w,p*=w,f*=w):(d=0,p=0,f=0),o[0]=v,o[1]=d,o[2]=g,o[3]=0,o[4]=h,o[5]=p,o[6]=m,o[7]=0,o[8]=s,o[9]=f,o[10]=u,o[11]=0,o[12]=-(v*c+h*A+s*k),o[13]=-(d*c+p*A+f*k),o[14]=-(g*c+m*A+u*k),o[15]=1,o)}},{"./identity":97}],100:[function(x,M,_){M.exports=function(e,o,a){var l=o[0],i=o[1],v=o[2],h=o[3],s=o[4],d=o[5],p=o[6],f=o[7],g=o[8],m=o[9],u=o[10],w=o[11],c=o[12],A=o[13],k=o[14],C=o[15],E=a[0],L=a[1],D=a[2],N=a[3];return e[0]=E*l+L*s+D*g+N*c,e[1]=E*i+L*d+D*m+N*A,e[2]=E*v+L*p+D*u+N*k,e[3]=E*h+L*f+D*w+N*C,e[4]=(E=a[4])*l+(L=a[5])*s+(D=a[6])*g+(N=a[7])*c,e[5]=E*i+L*d+D*m+N*A,e[6]=E*v+L*p+D*u+N*k,e[7]=E*h+L*f+D*w+N*C,e[8]=(E=a[8])*l+(L=a[9])*s+(D=a[10])*g+(N=a[11])*c,e[9]=E*i+L*d+D*m+N*A,e[10]=E*v+L*p+D*u+N*k,e[11]=E*h+L*f+D*w+N*C,e[12]=(E=a[12])*l+(L=a[13])*s+(D=a[14])*g+(N=a[15])*c,e[13]=E*i+L*d+D*m+N*A,e[14]=E*v+L*p+D*u+N*k,e[15]=E*h+L*f+D*w+N*C,e}},{}],101:[function(x,M,_){M.exports=function(e,o,a,l,i,v,h){var s=1/(o-a),d=1/(l-i),p=1/(v-h);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*p,e[11]=0,e[12]=(o+a)*s,e[13]=(i+l)*d,e[14]=(h+v)*p,e[15]=1,e}},{}],102:[function(x,M,_){M.exports=function(e,o,a,l,i){var v=1/Math.tan(o/2),h=1/(l-i);return e[0]=v/a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=v,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+l)*h,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*l*h,e[15]=0,e}},{}],103:[function(x,M,_){M.exports=function(e,o,a,l){var i,v,h,s,d,p,f,g,m,u,w,c,A,k,C,E,L,D,N,F,I,P,j,V,Z=l[0],Y=l[1],ee=l[2],re=Math.sqrt(Z*Z+Y*Y+ee*ee);return Math.abs(re)<1e-6?null:(Z*=re=1/re,Y*=re,ee*=re,i=Math.sin(a),v=Math.cos(a),d=o[1],p=o[2],f=o[3],m=o[5],u=o[6],w=o[7],A=o[9],k=o[10],C=o[11],N=Z*Y*(h=1-v)-ee*i,F=Y*Y*h+v,I=ee*Y*h+Z*i,P=Z*ee*h+Y*i,j=Y*ee*h-Z*i,V=ee*ee*h+v,e[0]=(s=o[0])*(E=Z*Z*h+v)+(g=o[4])*(L=Y*Z*h+ee*i)+(c=o[8])*(D=ee*Z*h-Y*i),e[1]=d*E+m*L+A*D,e[2]=p*E+u*L+k*D,e[3]=f*E+w*L+C*D,e[4]=s*N+g*F+c*I,e[5]=d*N+m*F+A*I,e[6]=p*N+u*F+k*I,e[7]=f*N+w*F+C*I,e[8]=s*P+g*j+c*V,e[9]=d*P+m*j+A*V,e[10]=p*P+u*j+k*V,e[11]=f*P+w*j+C*V,o!==e&&(e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15]),e)}},{}],104:[function(x,M,_){M.exports=function(e,o,a){var l=Math.sin(a),i=Math.cos(a),v=o[4],h=o[5],s=o[6],d=o[7],p=o[8],f=o[9],g=o[10],m=o[11];return o!==e&&(e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15]),e[4]=v*i+p*l,e[5]=h*i+f*l,e[6]=s*i+g*l,e[7]=d*i+m*l,e[8]=p*i-v*l,e[9]=f*i-h*l,e[10]=g*i-s*l,e[11]=m*i-d*l,e}},{}],105:[function(x,M,_){M.exports=function(e,o,a){var l=Math.sin(a),i=Math.cos(a),v=o[0],h=o[1],s=o[2],d=o[3],p=o[8],f=o[9],g=o[10],m=o[11];return o!==e&&(e[4]=o[4],e[5]=o[5],e[6]=o[6],e[7]=o[7],e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15]),e[0]=v*i-p*l,e[1]=h*i-f*l,e[2]=s*i-g*l,e[3]=d*i-m*l,e[8]=v*l+p*i,e[9]=h*l+f*i,e[10]=s*l+g*i,e[11]=d*l+m*i,e}},{}],106:[function(x,M,_){M.exports=function(e,o,a){var l=Math.sin(a),i=Math.cos(a),v=o[0],h=o[1],s=o[2],d=o[3],p=o[4],f=o[5],g=o[6],m=o[7];return o!==e&&(e[8]=o[8],e[9]=o[9],e[10]=o[10],e[11]=o[11],e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15]),e[0]=v*i+p*l,e[1]=h*i+f*l,e[2]=s*i+g*l,e[3]=d*i+m*l,e[4]=p*i-v*l,e[5]=f*i-h*l,e[6]=g*i-s*l,e[7]=m*i-d*l,e}},{}],107:[function(x,M,_){M.exports=function(e,o,a){var l=a[0],i=a[1],v=a[2];return e[0]=o[0]*l,e[1]=o[1]*l,e[2]=o[2]*l,e[3]=o[3]*l,e[4]=o[4]*i,e[5]=o[5]*i,e[6]=o[6]*i,e[7]=o[7]*i,e[8]=o[8]*v,e[9]=o[9]*v,e[10]=o[10]*v,e[11]=o[11]*v,e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15],e}},{}],108:[function(x,M,_){M.exports=function(e,o,a){var l,i,v,h,s,d,p,f,g,m,u,w,c=a[0],A=a[1],k=a[2];return o===e?(e[12]=o[0]*c+o[4]*A+o[8]*k+o[12],e[13]=o[1]*c+o[5]*A+o[9]*k+o[13],e[14]=o[2]*c+o[6]*A+o[10]*k+o[14],e[15]=o[3]*c+o[7]*A+o[11]*k+o[15]):(i=o[1],v=o[2],h=o[3],s=o[4],d=o[5],p=o[6],f=o[7],g=o[8],m=o[9],u=o[10],w=o[11],e[0]=l=o[0],e[1]=i,e[2]=v,e[3]=h,e[4]=s,e[5]=d,e[6]=p,e[7]=f,e[8]=g,e[9]=m,e[10]=u,e[11]=w,e[12]=l*c+s*A+g*k+o[12],e[13]=i*c+d*A+m*k+o[13],e[14]=v*c+p*A+u*k+o[14],e[15]=h*c+f*A+w*k+o[15]),e}},{}],109:[function(x,M,_){M.exports=function(e,o){if(e===o){var a=o[1],l=o[2],i=o[3],v=o[6],h=o[7],s=o[11];e[1]=o[4],e[2]=o[8],e[3]=o[12],e[4]=a,e[6]=o[9],e[7]=o[13],e[8]=l,e[9]=v,e[11]=o[14],e[12]=i,e[13]=h,e[14]=s}else e[0]=o[0],e[1]=o[4],e[2]=o[8],e[3]=o[12],e[4]=o[1],e[5]=o[5],e[6]=o[9],e[7]=o[13],e[8]=o[2],e[9]=o[6],e[10]=o[10],e[11]=o[14],e[12]=o[3],e[13]=o[7],e[14]=o[11],e[15]=o[15];return e}},{}],110:[function(x,M,_){"use strict";var e=x("barycentric"),o=x("polytope-closest-point/lib/closest_point_2d.js");function a(v,h){for(var s=[0,0,0,0],d=0;d<4;++d)for(var p=0;p<4;++p)s[p]+=v[4*d+p]*h[d];return s}function l(v,h,s,d,p){for(var f=a(d,a(s,a(h,[v[0],v[1],v[2],1]))),g=0;g<3;++g)f[g]/=f[3];return[.5*p[0]*(1+f[0]),.5*p[1]*(1-f[1])]}function i(v,h){for(var s=[0,0,0],d=0;d<v.length;++d)for(var p=v[d],f=h[d],g=0;g<3;++g)s[g]+=f*p[g];return s}M.exports=function(v,h,s,d,p,f){if(1===v.length)return[0,v[0].slice()];for(var g=new Array(v.length),m=0;m<v.length;++m)g[m]=l(v[m],s,d,p,f);var u=0,w=1/0;for(m=0;m<g.length;++m){for(var c=0,A=0;A<2;++A)c+=Math.pow(g[m][A]-h[A],2);c<w&&(w=c,u=m)}var k=function(E,L){if(2===E.length){for(var D=0,N=0,F=0;F<2;++F)D+=Math.pow(L[F]-E[0][F],2),N+=Math.pow(L[F]-E[1][F],2);return(D=Math.sqrt(D))+(N=Math.sqrt(N))<1e-6?[1,0]:[N/(D+N),D/(N+D)]}if(3===E.length){var I=[0,0];return o(E[0],E[1],E[2],L,I),e(E,I)}return[]}(g,h),C=0;for(m=0;m<3;++m){if(k[m]<-.001||k[m]>1.0001)return null;C+=k[m]}return Math.abs(C-1)>.001?null:[u,i(v,k),k]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(x,M,_){var e=x("glslify"),o=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),a=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),v=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),h=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),s=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),d=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),p=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),f=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),g=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);_.meshShader={vertex:o,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},_.wireShader={vertex:l,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},_.pointShader={vertex:v,fragment:h,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},_.pickShader={vertex:s,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},_.pointPickShader={vertex:p,fragment:d,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},_.contourShader={vertex:f,fragment:g,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(x,M,_){"use strict";var e=x("gl-shader"),o=x("gl-buffer"),a=x("gl-vao"),l=x("gl-texture2d"),i=x("normals"),v=x("gl-mat4/multiply"),h=x("gl-mat4/invert"),s=x("ndarray"),d=x("colormap"),p=x("simplicial-complex-contour"),f=x("typedarray-pool"),g=x("./lib/shaders"),m=x("./lib/closest-point"),u=g.meshShader,w=g.wireShader,c=g.pointShader,A=g.pickShader,k=g.pointPickShader,C=g.contourShader,E=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function L(Y,ee,re,X,K,ie,q,U,W,ae,G,te,ne,le,ue,pe,de,_e,me,we,De,Le,Ie,je,ye,Me,Oe){this.gl=Y,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=ee,this.dirty=!0,this.triShader=re,this.lineShader=X,this.pointShader=K,this.pickShader=ie,this.pointPickShader=q,this.contourShader=U,this.trianglePositions=W,this.triangleColors=G,this.triangleNormals=ne,this.triangleUVs=te,this.triangleIds=ae,this.triangleVAO=le,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ue,this.edgeColors=de,this.edgeUVs=_e,this.edgeIds=pe,this.edgeVAO=me,this.edgeCount=0,this.pointPositions=we,this.pointColors=Le,this.pointUVs=Ie,this.pointSizes=je,this.pointIds=De,this.pointVAO=ye,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Me,this.contourVAO=Oe,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=E,this._view=E,this._projection=E,this._resolution=[1,1]}var D=L.prototype;function N(Y,ee){if(!ee||!ee.length)return 1;for(var re=0;re<ee.length;++re){if(ee.length<2)return 1;if(ee[re][0]===Y)return ee[re][1];if(ee[re][0]>Y&&re>0){var X=(ee[re][0]-Y)/(ee[re][0]-ee[re-1][0]);return ee[re][1]*(1-X)+X*ee[re-1][1]}}return 1}function F(Y){var ee=e(Y,u.vertex,u.fragment);return ee.attributes.position.location=0,ee.attributes.color.location=2,ee.attributes.uv.location=3,ee.attributes.normal.location=4,ee}function I(Y){var ee=e(Y,w.vertex,w.fragment);return ee.attributes.position.location=0,ee.attributes.color.location=2,ee.attributes.uv.location=3,ee}function P(Y){var ee=e(Y,c.vertex,c.fragment);return ee.attributes.position.location=0,ee.attributes.color.location=2,ee.attributes.uv.location=3,ee.attributes.pointSize.location=4,ee}function j(Y){var ee=e(Y,A.vertex,A.fragment);return ee.attributes.position.location=0,ee.attributes.id.location=1,ee}function V(Y){var ee=e(Y,k.vertex,k.fragment);return ee.attributes.position.location=0,ee.attributes.id.location=1,ee.attributes.pointSize.location=4,ee}function Z(Y){var ee=e(Y,C.vertex,C.fragment);return ee.attributes.position.location=0,ee}D.isOpaque=function(){return!this.hasAlpha},D.isTransparent=function(){return this.hasAlpha},D.pickSlots=1,D.setPickBase=function(Y){this.pickId=Y},D.highlight=function(Y){if(Y&&this.contourEnable){for(var ee=p(this.cells,this.intensity,Y.intensity),re=ee.cells,X=ee.vertexIds,K=ee.vertexWeights,ie=re.length,q=f.mallocFloat32(6*ie),U=0,W=0;W<ie;++W)for(var ae=re[W],G=0;G<2;++G){var te=ae[0];2===ae.length&&(te=ae[G]);for(var ue=K[te],pe=1-ue,de=this.positions[X[te][0]],_e=this.positions[X[te][1]],me=0;me<3;++me)q[U++]=ue*de[me]+pe*_e[me]}this.contourCount=U/3|0,this.contourPositions.update(q.subarray(0,U)),f.free(q)}else this.contourCount=0},D.update=function(Y){Y=Y||{};var ee=this.gl;this.dirty=!0,"contourEnable"in Y&&(this.contourEnable=Y.contourEnable),"contourColor"in Y&&(this.contourColor=Y.contourColor),"lineWidth"in Y&&(this.lineWidth=Y.lineWidth),"lightPosition"in Y&&(this.lightPosition=Y.lightPosition),this.hasAlpha=!1,"opacity"in Y&&(this.opacity=Y.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in Y&&(this.opacityscale=Y.opacityscale,this.hasAlpha=!0),"ambient"in Y&&(this.ambientLight=Y.ambient),"diffuse"in Y&&(this.diffuseLight=Y.diffuse),"specular"in Y&&(this.specularLight=Y.specular),"roughness"in Y&&(this.roughness=Y.roughness),"fresnel"in Y&&(this.fresnel=Y.fresnel),Y.texture?(this.texture.dispose(),this.texture=l(ee,Y.texture)):Y.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=ee.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=ee.LINEAR,this.texture.setPixels(function(Qt,tn){for(var dn=d({colormap:Qt,nshades:256,format:"rgba"}),Mn=new Uint8Array(1024),sn=0;sn<256;++sn){for(var ke=dn[sn],Se=0;Se<3;++Se)Mn[4*sn+Se]=ke[Se];Mn[4*sn+3]=tn?255*N(sn/255,tn):255*ke[3]}return s(Mn,[256,256,4],[4,0,1])}(Y.colormap,this.opacityscale)),this.texture.generateMipmap());var re=Y.cells,X=Y.positions;if(X&&re){var K=[],ie=[],q=[],U=[],W=[],ae=[],G=[],te=[],ne=[],le=[],ue=[],pe=[],de=[],_e=[];this.cells=re,this.positions=X;var me=Y.vertexNormals,we=Y.cellNormals,De=void 0===Y.vertexNormalsEpsilon?1e-6:Y.vertexNormalsEpsilon;Y.useFacetNormals&&!we&&(we=i.faceNormals(re,X,void 0===Y.faceNormalsEpsilon?1e-6:Y.faceNormalsEpsilon)),we||me||(me=i.vertexNormals(re,X,De));var Ie=Y.vertexColors,je=Y.cellColors,ye=Y.meshColor||[1,1,1,1],Me=Y.vertexUVs,Oe=Y.vertexIntensity,Pe=Y.cellUVs,Re=Y.cellIntensity,Ue=1/0,qe=-1/0;if(!Me&&!Pe)if(Oe)if(Y.vertexIntensityBounds)Ue=+Y.vertexIntensityBounds[0],qe=+Y.vertexIntensityBounds[1];else for(var Xe=0;Xe<Oe.length;++Xe){var lt=Oe[Xe];Ue=Math.min(Ue,lt),qe=Math.max(qe,lt)}else if(Re)if(Y.cellIntensityBounds)Ue=+Y.cellIntensityBounds[0],qe=+Y.cellIntensityBounds[1];else for(Xe=0;Xe<Re.length;++Xe)lt=Re[Xe],Ue=Math.min(Ue,lt),qe=Math.max(qe,lt);else for(Xe=0;Xe<X.length;++Xe)lt=X[Xe][2],Ue=Math.min(Ue,lt),qe=Math.max(qe,lt);this.intensity=Oe||Re||function(Qt){for(var tn=Qt.length,dn=new Array(tn),Mn=0;Mn<tn;++Mn)dn[Mn]=Qt[Mn][2];return dn}(X),this.pickVertex=!(Re||je);var He=Y.pointSizes,$e=Y.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Xe=0;Xe<X.length;++Xe)for(var et=X[Xe],nt=0;nt<3;++nt)!isNaN(et[nt])&&isFinite(et[nt])&&(this.bounds[0][nt]=Math.min(this.bounds[0][nt],et[nt]),this.bounds[1][nt]=Math.max(this.bounds[1][nt],et[nt]));var ct=0,bt=0,kt=0;e:for(Xe=0;Xe<re.length;++Xe){var Bt=re[Xe];switch(Bt.length){case 1:for(et=X[ht=Bt[0]],nt=0;nt<3;++nt)if(isNaN(et[nt])||!isFinite(et[nt]))continue e;le.push(et[0],et[1],et[2]),at=Ie?Ie[ht]:je?je[Xe]:ye,this.opacityscale&&Oe?ie.push(at[0],at[1],at[2],this.opacity*N((Oe[ht]-Ue)/(qe-Ue),this.opacityscale)):3===at.length?ue.push(at[0],at[1],at[2],this.opacity):(ue.push(at[0],at[1],at[2],at[3]*this.opacity),at[3]<1&&(this.hasAlpha=!0)),pe.push((Ft=Me?Me[ht]:Oe?[(Oe[ht]-Ue)/(qe-Ue),0]:Pe?Pe[Xe]:Re?[(Re[Xe]-Ue)/(qe-Ue),0]:[(et[2]-Ue)/(qe-Ue),0])[0],Ft[1]),de.push(He?He[ht]:$e),_e.push(Xe),kt+=1;break;case 2:for(nt=0;nt<2;++nt){et=X[ht=Bt[nt]];for(var Et=0;Et<3;++Et)if(isNaN(et[Et])||!isFinite(et[Et]))continue e}for(nt=0;nt<2;++nt)et=X[ht=Bt[nt]],ae.push(et[0],et[1],et[2]),at=Ie?Ie[ht]:je?je[Xe]:ye,this.opacityscale&&Oe?ie.push(at[0],at[1],at[2],this.opacity*N((Oe[ht]-Ue)/(qe-Ue),this.opacityscale)):3===at.length?G.push(at[0],at[1],at[2],this.opacity):(G.push(at[0],at[1],at[2],at[3]*this.opacity),at[3]<1&&(this.hasAlpha=!0)),te.push((Ft=Me?Me[ht]:Oe?[(Oe[ht]-Ue)/(qe-Ue),0]:Pe?Pe[Xe]:Re?[(Re[Xe]-Ue)/(qe-Ue),0]:[(et[2]-Ue)/(qe-Ue),0])[0],Ft[1]),ne.push(Xe);bt+=1;break;case 3:for(nt=0;nt<3;++nt)for(et=X[ht=Bt[nt]],Et=0;Et<3;++Et)if(isNaN(et[Et])||!isFinite(et[Et]))continue e;for(nt=0;nt<3;++nt){var ht,at,Ft,en;et=X[ht=Bt[2-nt]],K.push(et[0],et[1],et[2]),(at=Ie?Ie[ht]:je?je[Xe]:ye)?this.opacityscale&&Oe?ie.push(at[0],at[1],at[2],this.opacity*N((Oe[ht]-Ue)/(qe-Ue),this.opacityscale)):3===at.length?ie.push(at[0],at[1],at[2],this.opacity):(ie.push(at[0],at[1],at[2],at[3]*this.opacity),at[3]<1&&(this.hasAlpha=!0)):ie.push(.5,.5,.5,1),U.push((Ft=Me?Me[ht]:Oe?[(Oe[ht]-Ue)/(qe-Ue),0]:Pe?Pe[Xe]:Re?[(Re[Xe]-Ue)/(qe-Ue),0]:[(et[2]-Ue)/(qe-Ue),0])[0],Ft[1]),q.push((en=me?me[ht]:we[Xe])[0],en[1],en[2]),W.push(Xe)}ct+=1}}this.pointCount=kt,this.edgeCount=bt,this.triangleCount=ct,this.pointPositions.update(le),this.pointColors.update(ue),this.pointUVs.update(pe),this.pointSizes.update(de),this.pointIds.update(new Uint32Array(_e)),this.edgePositions.update(ae),this.edgeColors.update(G),this.edgeUVs.update(te),this.edgeIds.update(new Uint32Array(ne)),this.trianglePositions.update(K),this.triangleColors.update(ie),this.triangleUVs.update(U),this.triangleNormals.update(q),this.triangleIds.update(new Uint32Array(W))}},D.drawTransparent=D.draw=function(Y){for(var ee=this.gl,re=(Y=Y||{}).model||E,X=Y.view||E,K=Y.projection||E,ie=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],q=0;q<3;++q)ie[0][q]=Math.max(ie[0][q],this.clipBounds[0][q]),ie[1][q]=Math.min(ie[1][q],this.clipBounds[1][q]);var U={model:re,view:X,projection:K,inverseModel:E.slice(),clipBounds:ie,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};U.inverseModel=h(U.inverseModel,U.model),ee.disable(ee.CULL_FACE),this.texture.bind(0);var W=new Array(16);for(v(W,U.view,U.model),v(W,U.projection,W),h(W,W),q=0;q<3;++q)U.eyePosition[q]=W[12+q]/W[15];var ae,G=W[15];for(q=0;q<3;++q)G+=this.lightPosition[q]*W[4*q+3];for(q=0;q<3;++q){for(var te=W[12+q],ne=0;ne<3;++ne)te+=W[4*ne+q]*this.lightPosition[ne];U.lightPosition[q]=te/G}this.triangleCount>0&&((ae=this.triShader).bind(),ae.uniforms=U,this.triangleVAO.bind(),ee.drawArrays(ee.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ae=this.lineShader).bind(),ae.uniforms=U,this.edgeVAO.bind(),ee.lineWidth(this.lineWidth*this.pixelRatio),ee.drawArrays(ee.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ae=this.pointShader).bind(),ae.uniforms=U,this.pointVAO.bind(),ee.drawArrays(ee.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ae=this.contourShader).bind(),ae.uniforms=U,this.contourVAO.bind(),ee.drawArrays(ee.LINES,0,this.contourCount),this.contourVAO.unbind())},D.drawPick=function(Y){for(var ee=this.gl,re=(Y=Y||{}).model||E,X=Y.view||E,K=Y.projection||E,ie=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],q=0;q<3;++q)ie[0][q]=Math.max(ie[0][q],this.clipBounds[0][q]),ie[1][q]=Math.min(ie[1][q],this.clipBounds[1][q]);this._model=[].slice.call(re),this._view=[].slice.call(X),this._projection=[].slice.call(K),this._resolution=[ee.drawingBufferWidth,ee.drawingBufferHeight];var U,W={model:re,view:X,projection:K,clipBounds:ie,pickId:this.pickId/255};(U=this.pickShader).bind(),U.uniforms=W,this.triangleCount>0&&(this.triangleVAO.bind(),ee.drawArrays(ee.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),ee.lineWidth(this.lineWidth*this.pixelRatio),ee.drawArrays(ee.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((U=this.pointPickShader).bind(),U.uniforms=W,this.pointVAO.bind(),ee.drawArrays(ee.POINTS,0,this.pointCount),this.pointVAO.unbind())},D.pick=function(Y){if(!Y||Y.id!==this.pickId)return null;for(var ee=Y.value[0]+256*Y.value[1]+65536*Y.value[2],re=this.cells[ee],X=this.positions,K=new Array(re.length),ie=0;ie<re.length;++ie)K[ie]=X[re[ie]];var q=Y.coord[0],U=Y.coord[1];if(!this.pickVertex){var W=this.positions[re[0]],ae=this.positions[re[1]],G=this.positions[re[2]];return{_cellCenter:!0,position:[q,U],index:ee,cell:re,cellId:ee,intensity:this.intensity[ee],dataCoordinate:[(W[0]+ae[0]+G[0])/3,(W[1]+ae[1]+G[1])/3,(W[2]+ae[2]+G[2])/3]}}var ne=m(K,[q*this.pixelRatio,this._resolution[1]-U*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ne)return null;var le=ne[2],ue=0;for(ie=0;ie<re.length;++ie)ue+=le[ie]*this.intensity[re[ie]];return{position:ne[1],index:re[ne[0]],cell:re,cellId:ee,intensity:ue,dataCoordinate:this.positions[re[ne[0]]]}},D.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},M.exports=function(Y,ee){if(1===arguments.length&&(Y=(ee=Y).gl),!(Y.getExtension("OES_standard_derivatives")||Y.getExtension("MOZ_OES_standard_derivatives")||Y.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var X=F(Y),K=I(Y),ie=P(Y),q=j(Y),U=V(Y),W=Z(Y),ae=l(Y,s(new Uint8Array([255,255,255,255]),[1,1,4]));ae.generateMipmap(),ae.minFilter=Y.LINEAR_MIPMAP_LINEAR,ae.magFilter=Y.LINEAR;var G=o(Y),te=o(Y),ne=o(Y),le=o(Y),ue=o(Y),pe=a(Y,[{buffer:G,type:Y.FLOAT,size:3},{buffer:ue,type:Y.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:te,type:Y.FLOAT,size:4},{buffer:ne,type:Y.FLOAT,size:2},{buffer:le,type:Y.FLOAT,size:3}]),de=o(Y),_e=o(Y),me=o(Y),we=o(Y),De=a(Y,[{buffer:de,type:Y.FLOAT,size:3},{buffer:we,type:Y.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:_e,type:Y.FLOAT,size:4},{buffer:me,type:Y.FLOAT,size:2}]),Le=o(Y),Ie=o(Y),je=o(Y),ye=o(Y),Me=o(Y),Oe=a(Y,[{buffer:Le,type:Y.FLOAT,size:3},{buffer:Me,type:Y.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Ie,type:Y.FLOAT,size:4},{buffer:je,type:Y.FLOAT,size:2},{buffer:ye,type:Y.FLOAT,size:1}]),Pe=o(Y),Ue=new L(Y,ae,X,K,ie,q,U,W,G,ue,te,ne,le,pe,de,we,_e,me,De,Le,Me,Ie,je,ye,Oe,Pe,a(Y,[{buffer:Pe,type:Y.FLOAT,size:3}]));return Ue.update(ee),Ue}},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(x,M,_){"use strict";M.exports=function(s){var d=s.gl;return new l(s,e(d,[0,0,0,1,1,0,1,1]),o(d,a.boxVert,a.lineFrag))};var e=x("gl-buffer"),o=x("gl-shader"),a=x("./shaders");function l(s,d,p){this.plot=s,this.vbo=d,this.shader=p}var i,v,h=l.prototype;h.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},h.drawBox=(i=[0,0],v=[0,0],function(s,d,p,f,g){var u=this.shader,w=this.plot.gl;i[0]=s,i[1]=d,v[0]=p,v[1]=f,u.uniforms.lo=i,u.uniforms.hi=v,u.uniforms.color=g,w.drawArrays(w.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(x,M,_){"use strict";M.exports=function(m){var u=m.gl;return new i(m,e(u),o(u,l.gridVert,l.gridFrag),o(u,l.tickVert,l.gridFrag))};var e=x("gl-buffer"),o=x("gl-shader"),a=x("binary-search-bounds"),l=x("./shaders");function i(m,u,w,c){this.plot=m,this.vbo=u,this.shader=w,this.tickShader=c,this.ticks=[[],[]]}function v(m,u){return m-u}var h,s,d,p,f,m,u,w,c,A,k,g=i.prototype;g.draw=(h=[0,0],s=[0,0],d=[0,0],function(){for(var m=this.plot,u=this.vbo,w=this.shader,c=this.ticks,A=m.gl,k=m._tickBounds,C=m.dataBox,E=m.viewBox,L=m.gridLineWidth,D=m.gridLineColor,N=m.gridLineEnable,F=m.pixelRatio,I=0;I<2;++I){var P=k[I],V=.5*(C[I+2]+C[I]),Z=C[I+2]-C[I];s[I]=2*(k[I+2]-P)/Z,h[I]=2*(P-V)/Z}w.bind(),u.bind(),w.attributes.dataCoord.pointer(),w.uniforms.dataShift=h,w.uniforms.dataScale=s;var Y=0;for(I=0;I<2;++I){d[0]=d[1]=0,d[I]=1,w.uniforms.dataAxis=d,w.uniforms.lineWidth=L[I]/(E[I+2]-E[I])*F,w.uniforms.color=D[I];var ee=6*c[I].length;N[I]&&ee&&A.drawArrays(A.TRIANGLES,Y,ee),Y+=ee}}),g.drawTickMarks=(m=[0,0],u=[0,0],w=[1,0],c=[0,1],A=[0,0],k=[0,0],function(){for(var C=this.plot,E=this.vbo,L=this.tickShader,D=this.ticks,N=C.gl,F=C._tickBounds,I=C.dataBox,P=C.viewBox,j=C.pixelRatio,V=C.screenBox,Z=V[2]-V[0],Y=V[3]-V[1],ee=P[2]-P[0],re=P[3]-P[1],X=0;X<2;++X){var K=F[X],q=.5*(I[X+2]+I[X]),U=I[X+2]-I[X];u[X]=2*(F[X+2]-K)/U,m[X]=2*(K-q)/U}u[0]*=ee/Z,m[0]*=ee/Z,u[1]*=re/Y,m[1]*=re/Y,L.bind(),E.bind(),L.attributes.dataCoord.pointer();var W=L.uniforms;W.dataShift=m,W.dataScale=u;var ae=C.tickMarkLength,G=C.tickMarkWidth,te=C.tickMarkColor,ne=6*D[0].length,le=Math.min(a.ge(D[0],(I[0]-F[0])/(F[2]-F[0]),v),D[0].length),ue=Math.min(a.gt(D[0],(I[2]-F[0])/(F[2]-F[0]),v),D[0].length),pe=0+6*le,de=6*Math.max(0,ue-le),_e=Math.min(a.ge(D[1],(I[1]-F[1])/(F[3]-F[1]),v),D[1].length),me=Math.min(a.gt(D[1],(I[3]-F[1])/(F[3]-F[1]),v),D[1].length),we=ne+6*_e,De=6*Math.max(0,me-_e);A[0]=2*(P[0]-ae[1])/Z-1,A[1]=(P[3]+P[1])/Y-1,k[0]=ae[1]*j/Z,k[1]=G[1]*j/Y,De&&(W.color=te[1],W.tickScale=k,W.dataAxis=c,W.screenOffset=A,N.drawArrays(N.TRIANGLES,we,De)),A[0]=(P[2]+P[0])/Z-1,A[1]=2*(P[1]-ae[0])/Y-1,k[0]=G[0]*j/Z,k[1]=ae[0]*j/Y,de&&(W.color=te[0],W.tickScale=k,W.dataAxis=w,W.screenOffset=A,N.drawArrays(N.TRIANGLES,pe,de)),A[0]=2*(P[2]+ae[3])/Z-1,A[1]=(P[3]+P[1])/Y-1,k[0]=ae[3]*j/Z,k[1]=G[3]*j/Y,De&&(W.color=te[3],W.tickScale=k,W.dataAxis=c,W.screenOffset=A,N.drawArrays(N.TRIANGLES,we,De)),A[0]=(P[2]+P[0])/Z-1,A[1]=2*(P[3]+ae[2])/Y-1,k[0]=G[2]*j/Z,k[1]=ae[2]*j/Y,de&&(W.color=te[2],W.tickScale=k,W.dataAxis=w,W.screenOffset=A,N.drawArrays(N.TRIANGLES,pe,de))}),g.update=(p=[1,1,-1,-1,1,-1],f=[1,-1,1,1,-1,-1],function(m){for(var u=m.ticks,w=m.bounds,c=new Float32Array(18*(u[0].length+u[1].length)),A=0,k=[[],[]],C=0;C<2;++C)for(var E=k[C],L=u[C],D=w[C],N=w[C+2],F=0;F<L.length;++F){var I=(L[F].x-D)/(N-D);E.push(I);for(var P=0;P<6;++P)c[A++]=I,c[A++]=p[P],c[A++]=f[P]}this.ticks=k,this.vbo.update(c)}),g.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(x,M,_){"use strict";M.exports=function(s){var d=s.gl;return new l(s,e(d,[-1,-1,-1,1,1,-1,1,1]),o(d,a.lineVert,a.lineFrag))};var e=x("gl-buffer"),o=x("gl-shader"),a=x("./shaders");function l(s,d,p){this.plot=s,this.vbo=d,this.shader=p}var i,v,h=l.prototype;h.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},h.drawLine=(i=[0,0],v=[0,0],function(s,d,p,f,g,m){var u=this.plot,w=this.shader,c=u.gl;i[0]=s,i[1]=d,v[0]=p,v[1]=f,w.uniforms.start=i,w.uniforms.end=v,w.uniforms.width=g*u.pixelRatio,w.uniforms.color=m,c.drawArrays(c.TRIANGLE_STRIP,0,4)}),h.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(x,M,_){"use strict";var e=x("glslify"),o=e(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);M.exports={lineVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:o,textVert:e(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:o,gridVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:o,boxVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:231}],117:[function(x,M,_){"use strict";M.exports=function(u){var w=u.gl;return new v(u,e(w),o(w,i.textVert,i.textFrag))};var e=x("gl-buffer"),o=x("gl-shader"),a=x("text-cache"),l=x("binary-search-bounds"),i=x("./shaders");function v(u,w,c){this.plot=u,this.vbo=w,this.shader=c,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var h,s,d,p,f,g,u,w,m=v.prototype;m.drawTicks=(h=[0,0],s=[0,0],d=[0,0],function(u){var w=this.plot,c=this.shader,A=this.tickX[u],k=this.tickOffset[u],C=w.gl,E=w.viewBox,L=w.dataBox,D=w.screenBox,N=w.pixelRatio,F=w.tickEnable,I=w.tickPad,P=w.tickColor,j=w.tickAngle,V=w.labelEnable,Z=w.labelPad,Y=w.labelColor,ee=w.labelAngle,re=this.labelOffset[u],X=this.labelCount[u],K=l.lt(A,L[u]),ie=l.le(A,L[u+2]);h[0]=h[1]=0,h[u]=1,s[u]=(E[2+u]+E[u])/(D[2+u]-D[u])-1;var q=2/D[2+(1^u)]-D[1^u];s[1^u]=q*E[1^u]-1,F[u]&&(s[1^u]-=q*N*I[u],K<ie&&k[ie]>k[K]&&(c.uniforms.dataAxis=h,c.uniforms.screenOffset=s,c.uniforms.color=P[u],c.uniforms.angle=j[u],C.drawArrays(C.TRIANGLES,k[K],k[ie]-k[K]))),V[u]&&X&&(s[1^u]-=q*N*Z[u],c.uniforms.dataAxis=d,c.uniforms.screenOffset=s,c.uniforms.color=Y[u],c.uniforms.angle=ee[u],C.drawArrays(C.TRIANGLES,re,X)),s[1^u]=q*E[2+(1^u)]-1,F[u+2]&&(s[1^u]+=q*N*I[u+2],K<ie&&k[ie]>k[K]&&(c.uniforms.dataAxis=h,c.uniforms.screenOffset=s,c.uniforms.color=P[u+2],c.uniforms.angle=j[u+2],C.drawArrays(C.TRIANGLES,k[K],k[ie]-k[K]))),V[u+2]&&X&&(s[1^u]+=q*N*Z[u+2],c.uniforms.dataAxis=d,c.uniforms.screenOffset=s,c.uniforms.color=Y[u+2],c.uniforms.angle=ee[u+2],C.drawArrays(C.TRIANGLES,re,X))}),m.drawTitle=(u=[0,0],w=[0,0],function(){var c=this.plot,A=this.shader,k=c.gl,C=c.screenBox,E=c.titleCenter,L=c.titleAngle,D=c.titleColor,N=c.pixelRatio;if(this.titleCount){for(var F=0;F<2;++F)w[F]=2*(E[F]*N-C[F])/(C[2+F]-C[F])-1;A.bind(),A.uniforms.dataAxis=u,A.uniforms.screenOffset=w,A.uniforms.angle=L,A.uniforms.color=D,k.drawArrays(k.TRIANGLES,this.titleOffset,this.titleCount)}}),m.bind=(p=[0,0],f=[0,0],g=[0,0],function(){var u=this.plot,w=this.shader,c=u._tickBounds,A=u.dataBox,k=u.screenBox,C=u.viewBox;w.bind();for(var E=0;E<2;++E){var L=c[E],N=.5*(A[E+2]+A[E]),F=A[E+2]-A[E],P=C[E+2]-C[E],V=k[E+2]-k[E];f[E]=2*(c[E+2]-L)/F*P/V,p[E]=2*(L-N)/F*P/V}g[1]=2*u.pixelRatio/(k[3]-k[1]),g[0]=g[1]*(k[3]-k[1])/(k[2]-k[0]),w.uniforms.dataScale=f,w.uniforms.dataShift=p,w.uniforms.textScale=g,this.vbo.bind(),w.attributes.textCoordinate.pointer()}),m.update=function(u){var w,c,A,k,C,E=[],L=u.ticks,D=u.bounds;for(C=0;C<2;++C){var N=[Math.floor(E.length/3)],F=[-1/0],I=L[C];for(w=0;w<I.length;++w){var P=I[w],j=P.x,Z=P.font||"sans-serif";k=P.fontSize||12;for(var Y=1/(D[C+2]-D[C]),ee=D[C],re=P.text.split("\n"),X=0;X<re.length;X++)for(A=a(Z,re[X]).data,c=0;c<A.length;c+=2)E.push(A[c]*k,-A[c+1]*k-X*k*1.2,(j-ee)*Y);N.push(Math.floor(E.length/3)),F.push(j)}this.tickOffset[C]=N,this.tickX[C]=F}for(C=0;C<2;++C){for(this.labelOffset[C]=Math.floor(E.length/3),A=a(u.labelFont[C],u.labels[C],{textAlign:"center"}).data,k=u.labelSize[C],w=0;w<A.length;w+=2)E.push(A[w]*k,-A[w+1]*k,0);this.labelCount[C]=Math.floor(E.length/3)-this.labelOffset[C]}for(this.titleOffset=Math.floor(E.length/3),A=a(u.titleFont,u.title).data,k=u.titleSize,w=0;w<A.length;w+=2)E.push(A[w]*k,-A[w+1]*k,0);this.titleCount=Math.floor(E.length/3)-this.titleOffset,this.vbo.update(E)},m.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(x,M,_){"use strict";M.exports=function(p){var f=p.gl,m=new v(f,e(f,[f.drawingBufferWidth,f.drawingBufferHeight]));return m.grid=o(m),m.text=a(m),m.line=l(m),m.box=i(m),m.update(p),m};var e=x("gl-select-static"),o=x("./lib/grid"),a=x("./lib/text"),l=x("./lib/line"),i=x("./lib/box");function v(p,f){this.gl=p,this.pickBuffer=f,this.screenBox=[0,0,p.drawingBufferWidth,p.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var h=v.prototype;function s(p){for(var f=p.slice(),g=0;g<f.length;++g)f[g]=f[g].slice();return f}function d(p,f){return p.x-f.x}h.setDirty=function(){this.dirty=this.pickDirty=!0},h.setOverlayDirty=function(){this.dirty=!0},h.nextDepthValue=function(){return this._depthCounter++/65536},h.draw=function(){var p=this.gl,f=this.screenBox,g=this.viewBox,m=this.dataBox,u=this.pixelRatio,w=this.grid,c=this.line,A=this.text,k=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,p.bindFramebuffer(p.FRAMEBUFFER,null),p.enable(p.SCISSOR_TEST),p.disable(p.DEPTH_TEST),p.depthFunc(p.LESS),p.depthMask(!1),p.enable(p.BLEND),p.blendEquation(p.FUNC_ADD,p.FUNC_ADD),p.blendFunc(p.ONE,p.ONE_MINUS_SRC_ALPHA),this.borderColor){p.scissor(f[0],f[1],f[2]-f[0],f[3]-f[1]);var C=this.borderColor;p.clearColor(C[0]*C[3],C[1]*C[3],C[2]*C[3],C[3]),p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT)}p.scissor(g[0],g[1],g[2]-g[0],g[3]-g[1]),p.viewport(g[0],g[1],g[2]-g[0],g[3]-g[1]);var E=this.backgroundColor;p.clearColor(E[0]*E[3],E[1]*E[3],E[2]*E[3],E[3]),p.clear(p.COLOR_BUFFER_BIT),w.draw();var L=this.zeroLineEnable,D=this.zeroLineColor,N=this.zeroLineWidth;if(L[0]||L[1]){c.bind();for(var F=0;F<2;++F)if(L[F]&&m[F]<=0&&m[F+2]>=0){var I=f[F]-m[F]*(f[F+2]-f[F])/(m[F+2]-m[F]);0===F?c.drawLine(I,f[1],I,f[3],N[F],D[F]):c.drawLine(f[0],I,f[2],I,N[F],D[F])}}for(F=0;F<k.length;++F)k[F].draw();p.viewport(f[0],f[1],f[2]-f[0],f[3]-f[1]),p.scissor(f[0],f[1],f[2]-f[0],f[3]-f[1]),this.grid.drawTickMarks(),c.bind();var P=this.borderLineEnable,j=this.borderLineWidth,V=this.borderLineColor;for(P[1]&&c.drawLine(g[0],g[1]-.5*j[1]*u,g[0],g[3]+.5*j[3]*u,j[1],V[1]),P[0]&&c.drawLine(g[0]-.5*j[0]*u,g[1],g[2]+.5*j[2]*u,g[1],j[0],V[0]),P[3]&&c.drawLine(g[2],g[1]-.5*j[1]*u,g[2],g[3]+.5*j[3]*u,j[3],V[3]),P[2]&&c.drawLine(g[0]-.5*j[0]*u,g[3],g[2]+.5*j[2]*u,g[3],j[2],V[2]),A.bind(),F=0;F<2;++F)A.drawTicks(F);this.titleEnable&&A.drawTitle();var Z=this.overlays;for(F=0;F<Z.length;++F)Z[F].draw();p.disable(p.SCISSOR_TEST),p.disable(p.BLEND),p.depthMask(!0)}},h.drawPick=function(){if(!this.static){var p=this.pickBuffer;this._pickTimeout=null,p.begin();for(var f=1,g=this.objects,m=0;m<g.length;++m)f=g[m].drawPick(f);p.end()}},h.pick=function(p,f){if(!this.static){var g=this.pixelRatio,m=this.pickPixelRatio,u=this.viewBox,w=0|Math.round((p-u[0]/g)*m),c=0|Math.round((f-u[1]/g)*m),A=this.pickBuffer.query(w,c,this.pickRadius);if(!A)return null;for(var k=A.id+(A.value[0]<<8)+(A.value[1]<<16)+(A.value[2]<<24),C=this.objects,E=0;E<C.length;++E){var L=C[E].pick(w,c,k);if(L)return L}return null}},h.setScreenBox=function(p){var f=this.screenBox,g=this.pixelRatio;f[0]=0|Math.round(p[0]*g),f[1]=0|Math.round(p[1]*g),f[2]=0|Math.round(p[2]*g),f[3]=0|Math.round(p[3]*g),this.setDirty()},h.setDataBox=function(p){var f=this.dataBox;(f[0]!==p[0]||f[1]!==p[1]||f[2]!==p[2]||f[3]!==p[3])&&(f[0]=p[0],f[1]=p[1],f[2]=p[2],f[3]=p[3],this.setDirty())},h.setViewBox=function(p){var f=this.pixelRatio,g=this.viewBox;g[0]=0|Math.round(p[0]*f),g[1]=0|Math.round(p[1]*f),g[2]=0|Math.round(p[2]*f),g[3]=0|Math.round(p[3]*f);var m=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((p[2]-p[0])*m),0|Math.round((p[3]-p[1])*m)],this.setDirty()},h.update=function(p){var f=this.gl;this.pixelRatio=(p=p||{}).pixelRatio||1;var g=this.pixelRatio;this.pickPixelRatio=Math.max(g,1),this.setScreenBox(p.screenBox||[0,0,f.drawingBufferWidth/g,f.drawingBufferHeight/g]),this.setViewBox(p.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/g,.125*(this.screenBox[3]-this.screenBox[1])/g,.875*(this.screenBox[2]-this.screenBox[0])/g,.875*(this.screenBox[3]-this.screenBox[1])/g]);var m=this.viewBox,u=(m[2]-m[0])/(m[3]-m[1]);this.setDataBox(p.dataBox||[-10,-10/u,10,10/u]),this.borderColor=!1!==p.borderColor&&(p.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(p.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(p.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(p.gridLineWidth||[1,1]).slice(),this.gridLineColor=s(p.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(p.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(p.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=s(p.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(p.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(p.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=s(p.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(p.titleCenter||[.5*(m[0]+m[2])/g,(m[3]+120)/g]).slice(),this.titleEnable=!("titleEnable"in p)||!!p.titleEnable,this.titleAngle=p.titleAngle||0,this.titleColor=(p.titleColor||[0,0,0,1]).slice(),this.labelPad=(p.labelPad||[15,15,15,15]).slice(),this.labelAngle=(p.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(p.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=s(p.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(p.tickPad||[15,15,15,15]).slice(),this.tickAngle=(p.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(p.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=s(p.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(p.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(p.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=s(p.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var w=p.ticks||[[],[]],c=this._tickBounds;c[0]=c[1]=1/0,c[2]=c[3]=-1/0;for(var A=0;A<2;++A){var k=w[A].slice(0);0!==k.length&&(k.sort(d),c[A]=Math.min(c[A],k[0].x),c[A+2]=Math.max(c[A+2],k[k.length-1].x))}this.grid.update({bounds:c,ticks:w}),this.text.update({bounds:c,ticks:w,labels:p.labels||["x","y"],labelSize:p.labelSize||[12,12],labelFont:p.labelFont||["sans-serif","sans-serif"],title:p.title||"",titleSize:p.titleSize||18,titleFont:p.titleFont||"sans-serif"}),this.static=!!p.static,this.setDirty()},h.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var p=this.objects.length-1;p>=0;--p)this.objects[p].dispose();for(this.objects.length=0,p=this.overlays.length-1;p>=0;--p)this.overlays[p].dispose();this.overlays.length=0,this.gl=null},h.addObject=function(p){this.objects.indexOf(p)<0&&(this.objects.push(p),this.setDirty())},h.removeObject=function(p){for(var f=this.objects,g=0;g<f.length;++g)if(f[g]===p){f.splice(g,1),this.setDirty();break}},h.addOverlay=function(p){this.overlays.indexOf(p)<0&&(this.overlays.push(p),this.setOverlayDirty())},h.removeOverlay=function(p){for(var f=this.overlays,g=0;g<f.length;++g)if(f[g]===p){f.splice(g,1),this.setOverlayDirty();break}}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(x,M,_){"use strict";M.exports=function(h,s){h=h||document.body;var d=[.01,1/0];"distanceLimits"in(s=s||{})&&(d[0]=s.distanceLimits[0],d[1]=s.distanceLimits[1]),"zoomMin"in s&&(d[0]=s.zoomMin),"zoomMax"in s&&(d[1]=s.zoomMax);var p=o({center:s.center||[0,0,0],up:s.up||[0,1,0],eye:s.eye||[0,0,10],mode:s.mode||"orbit",distanceLimits:d}),f=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],g=0,m=h.clientWidth,u=h.clientHeight,w={keyBindingMode:"rotate",enableWheel:!0,view:p,element:h,delay:s.delay||16,rotateSpeed:s.rotateSpeed||1,zoomSpeed:s.zoomSpeed||1,translateSpeed:s.translateSpeed||1,flipX:!!s.flipX,flipY:!!s.flipY,modes:p.modes,_ortho:s._ortho||s.projection&&"orthographic"===s.projection.type||!1,tick:function(){var c=e(),A=this.delay,k=c-2*A;p.idle(c-A),p.recalcMatrix(k),p.flush(c-(100+2*A));for(var C=!0,E=p.computedMatrix,L=0;L<16;++L)C=C&&f[L]===E[L],f[L]=E[L];var D=h.clientWidth===m&&h.clientHeight===u;return m=h.clientWidth,u=h.clientHeight,C?!D:(g=Math.exp(p.computedRadius[0]),!0)},lookAt:function(c,A,k){p.lookAt(p.lastT(),c,A,k)},rotate:function(c,A,k){p.rotate(p.lastT(),c,A,k)},pan:function(c,A,k){p.pan(p.lastT(),c,A,k)},translate:function(c,A,k){p.translate(p.lastT(),c,A,k)}};return Object.defineProperties(w,{matrix:{get:function(){return p.computedMatrix},set:function(c){return p.setMatrix(p.lastT(),c),p.computedMatrix},enumerable:!0},mode:{get:function(){return p.getMode()},set:function(c){var A=p.computedUp.slice(),k=p.computedEye.slice(),C=p.computedCenter.slice();if(p.setMode(c),"turntable"===c){var E=e();p._active.lookAt(E,k,C,A),p._active.lookAt(E+500,k,C,[0,0,1]),p._active.flush(E)}return p.getMode()},enumerable:!0},center:{get:function(){return p.computedCenter},set:function(c){return p.lookAt(p.lastT(),null,c),p.computedCenter},enumerable:!0},eye:{get:function(){return p.computedEye},set:function(c){return p.lookAt(p.lastT(),c),p.computedEye},enumerable:!0},up:{get:function(){return p.computedUp},set:function(c){return p.lookAt(p.lastT(),null,null,c),p.computedUp},enumerable:!0},distance:{get:function(){return g},set:function(c){return p.setDistance(p.lastT(),c),c},enumerable:!0},distanceLimits:{get:function(){return p.getDistanceLimits(d)},set:function(c){return p.setDistanceLimits(c),c},enumerable:!0}}),h.addEventListener("contextmenu",function(c){return c.preventDefault(),!1}),w._lastX=-1,w._lastY=-1,w._lastMods={shift:!1,control:!1,alt:!1,meta:!1},w.enableMouseListeners=function(){function c(A,k,C,E){var L=w.keyBindingMode;if(!1!==L){var D="rotate"===L,N="pan"===L,F="zoom"===L,I=!!E.control,P=!!E.alt,j=!!E.shift,V=!!(1&A),Z=!!(2&A),Y=!!(4&A),ee=1/h.clientHeight,re=ee*(k-w._lastX),X=ee*(C-w._lastY),K=w.flipX?1:-1,ie=w.flipY?1:-1,q=Math.PI*w.rotateSpeed,U=e();if(-1!==w._lastX&&-1!==w._lastY&&((D&&V&&!I&&!P&&!j||V&&!I&&!P&&j)&&p.rotate(U,K*q*re,-ie*q*X,0),(N&&V&&!I&&!P&&!j||Z||V&&I&&!P&&!j)&&p.pan(U,-w.translateSpeed*re*g,w.translateSpeed*X*g,0),F&&V&&!I&&!P&&!j||Y||V&&!I&&P&&!j)){var W=-w.zoomSpeed*X/window.innerHeight*(U-p.lastT())*100;p.pan(U,0,0,g*(Math.exp(W)-1))}return w._lastX=k,w._lastY=C,w._lastMods=E,!0}}w.mouseListener=a(h,c),h.addEventListener("touchstart",function(A){var k=i(A.changedTouches[0],h);c(0,k[0],k[1],w._lastMods),c(1,k[0],k[1],w._lastMods)},!!v&&{passive:!0}),h.addEventListener("touchmove",function(A){var k=i(A.changedTouches[0],h);c(1,k[0],k[1],w._lastMods),A.preventDefault()},!!v&&{passive:!1}),h.addEventListener("touchend",function(A){c(0,w._lastX,w._lastY,w._lastMods)},!!v&&{passive:!0}),w.wheelListener=l(h,function(A,k){if(!1!==w.keyBindingMode&&w.enableWheel){var C=w.flipX?1:-1,E=w.flipY?1:-1,L=e();if(Math.abs(A)>Math.abs(k))p.rotate(L,0,0,-A*C*Math.PI*w.rotateSpeed/window.innerWidth);else if(!w._ortho){var D=-w.zoomSpeed*E*k/window.innerHeight*(L-p.lastT())/20;p.pan(L,0,0,g*(Math.exp(D)-1))}}},!0)},w.enableMouseListeners(),w};var e=x("right-now"),o=x("3d-view"),a=x("mouse-change"),l=x("mouse-wheel"),i=x("mouse-event-offset"),v=x("has-passive-events")},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(x,M,_){var e=x("glslify"),o=x("gl-shader"),a=e(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),l=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);M.exports=function(i){return o(i,a,l,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(x,M,_){"use strict";var e=x("./camera.js"),o=x("gl-axes3d"),a=x("gl-axes3d/properties"),l=x("gl-spikes3d"),i=x("gl-select-static"),v=x("gl-fbo"),h=x("a-big-triangle"),s=x("mouse-change"),d=x("gl-mat4/perspective"),p=x("gl-mat4/ortho"),f=x("./lib/shader"),g=x("is-mobile")({tablet:!0,featureDetect:!0});function m(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function u(c){var A=Math.round(Math.log(Math.abs(c))/Math.log(10));if(A<0){var k=Math.round(Math.pow(10,-A));return Math.ceil(c*k)/k}return A>0?(k=Math.round(Math.pow(10,A)),Math.ceil(c/k)*k):Math.ceil(c)}function w(c){return"boolean"!=typeof c||c}M.exports={createScene:function(c){(c=c||{}).camera=c.camera||{};var A=c.canvas;A||(A=document.createElement("canvas"),c.container?c.container.appendChild(A):document.body.appendChild(A));var k=c.gl;if(k||(c.glOptions&&(g=!!c.glOptions.preserveDrawingBuffer),k=function(me,we){var De=null;try{(De=me.getContext("webgl",we))||(De=me.getContext("experimental-webgl",we))}catch(Le){return null}return De}(A,c.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:g})),!k)throw new Error("webgl not supported");var C=c.bounds||[[-10,-10,-10],[10,10,10]],E=new m,L=v(k,k.drawingBufferWidth,k.drawingBufferHeight,{preferFloat:!g}),D=f(k),N=c.cameraObject&&!0===c.cameraObject._ortho||c.camera.projection&&"orthographic"===c.camera.projection.type||!1,F={eye:c.camera.eye||[2,0,0],center:c.camera.center||[0,0,0],up:c.camera.up||[0,1,0],zoomMin:c.camera.zoomMax||.1,zoomMax:c.camera.zoomMin||100,mode:c.camera.mode||"turntable",_ortho:N},I=c.axes||{},P=o(k,I);P.enable=!I.disable;var V=l(k,c.spikes||{}),Z=[],Y=[],ee=[],re=[],X=!0,K=!0,U={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},W=(K=!0,[k.drawingBufferWidth,k.drawingBufferHeight]),ae=c.cameraObject||e(A,F),G={gl:k,contextLost:!1,pixelRatio:c.pixelRatio||1,canvas:A,selection:E,camera:ae,axes:P,axesPixels:null,spikes:V,bounds:C,objects:Z,shape:W,aspect:c.aspectRatio||[1,1,1],pickRadius:c.pickRadius||10,zNear:c.zNear||.01,zFar:c.zFar||1e3,fovy:c.fovy||Math.PI/4,clearColor:c.clearColor||[0,0,0,0],autoResize:w(c.autoResize),autoBounds:w(c.autoBounds),autoScale:!!c.autoScale,autoCenter:w(c.autoCenter),clipToBounds:w(c.clipToBounds),snapToData:!!c.snapToData,onselect:c.onselect||null,onrender:c.onrender||null,onclick:c.onclick||null,cameraParams:U,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(me){this.aspect[0]=me.x,this.aspect[1]=me.y,this.aspect[2]=me.z,K=!0},setBounds:function(me,we){this.bounds[0][me]=we.min,this.bounds[1][me]=we.max},setClearColor:function(me){this.clearColor=me},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},te=[k.drawingBufferWidth/G.pixelRatio|0,k.drawingBufferHeight/G.pixelRatio|0];function ne(){if(!G._stopped&&G.autoResize){var me=A.parentNode,we=1,De=1;me&&me!==document.body?(we=me.clientWidth,De=me.clientHeight):(we=window.innerWidth,De=window.innerHeight);var Le=0|Math.ceil(we*G.pixelRatio),Ie=0|Math.ceil(De*G.pixelRatio);if(Le!==A.width||Ie!==A.height){A.width=Le,A.height=Ie;var je=A.style;je.position=je.position||"absolute",je.left="0px",je.top="0px",je.width=we+"px",je.height=De+"px",X=!0}}}function le(){for(var me=Z.length,we=re.length,De=0;De<we;++De)ee[De]=0;e:for(De=0;De<me;++De){var Le=Z[De],Ie=Le.pickSlots;if(Ie){for(var je=0;je<we;++je)if(ee[je]+Ie<255){Y[De]=je,Le.setPickBase(ee[je]+1),ee[je]+=Ie;continue e}var ye=i(k,W);Y[De]=we,re.push(ye),ee.push(Ie),Le.setPickBase(1),we+=1}else Y[De]=-1}for(;we>0&&0===ee[we-1];)ee.pop(),re.pop().dispose()}function ue(){if(G.contextLost)return!0;k.isContextLost()&&(G.contextLost=!0,G.mouseListener.enabled=!1,G.selection.object=null,G.oncontextloss&&G.oncontextloss())}G.autoResize&&ne(),window.addEventListener("resize",ne),G.update=function(me){G._stopped||(me=me||{},X=!0,K=!0)},G.add=function(me){G._stopped||(me.axes=P,Z.push(me),Y.push(-1),X=!0,K=!0,le())},G.remove=function(me){if(!G._stopped){var we=Z.indexOf(me);we<0||(Z.splice(we,1),Y.pop(),X=!0,K=!0,le())}},G.dispose=function(){if(!G._stopped&&(G._stopped=!0,window.removeEventListener("resize",ne),A.removeEventListener("webglcontextlost",ue),G.mouseListener.enabled=!1,!G.contextLost)){P.dispose(),V.dispose();for(var me=0;me<Z.length;++me)Z[me].dispose();for(L.dispose(),me=0;me<re.length;++me)re[me].dispose();D.dispose(),k=null,P=null,V=null,Z=[]}},G._mouseRotating=!1,G._prevButtons=0,G.enableMouseListeners=function(){G.mouseListener=s(A,function(me,we,De){if(!G._stopped){var Le=re.length,Ie=Z.length,je=E.object;E.distance=1/0,E.mouse[0]=we,E.mouse[1]=De,E.object=null,E.screen=null,E.dataCoordinate=E.dataPosition=null;var ye=!1;if(me&&G._prevButtons)G._mouseRotating=!0;else{G._mouseRotating&&(K=!0),G._mouseRotating=!1;for(var Me=0;Me<Le;++Me){var Oe=re[Me].query(we,te[1]-De-1,G.pickRadius);if(Oe){if(Oe.distance>E.distance)continue;for(var Pe=0;Pe<Ie;++Pe){var Re=Z[Pe];if(Y[Pe]===Me){var Ue=Re.pick(Oe);Ue&&(E.buttons=me,E.screen=Oe.coord,E.distance=Oe.distance,E.object=Re,E.index=Ue.distance,E.dataPosition=Ue.position,E.dataCoordinate=Ue.dataCoordinate,E.data=Ue,ye=!0)}}}}}je&&je!==E.object&&(je.highlight&&je.highlight(null),X=!0),E.object&&(E.object.highlight&&E.object.highlight(E.data),X=!0),(ye=ye||E.object!==je)&&G.onselect&&G.onselect(E),1&me&&!(1&G._prevButtons)&&G.onclick&&G.onclick(E),G._prevButtons=me}})},A.addEventListener("webglcontextlost",ue);var pe=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],de=[pe[0].slice(),pe[1].slice()];function _e(){if(!ue()){ne();var me=G.camera.tick();U.view=G.camera.matrix,X=X||me,K=K||me,P.pixelRatio=G.pixelRatio,V.pixelRatio=G.pixelRatio;var we=Z.length,De=pe[0],Le=pe[1];De[0]=De[1]=De[2]=1/0,Le[0]=Le[1]=Le[2]=-1/0;for(var Ie=0;Ie<we;++Ie){($e=Z[Ie]).pixelRatio=G.pixelRatio,$e.axes=G.axes,X=X||!!$e.dirty,K=K||!!$e.dirty;var je=$e.bounds;if(je)for(var ye=je[0],Me=je[1],Oe=0;Oe<3;++Oe)De[Oe]=Math.min(De[Oe],ye[Oe]),Le[Oe]=Math.max(Le[Oe],Me[Oe])}var Pe=G.bounds;if(G.autoBounds)for(Oe=0;Oe<3;++Oe){if(Le[Oe]<De[Oe])De[Oe]=-1,Le[Oe]=1;else{De[Oe]===Le[Oe]&&(De[Oe]-=1,Le[Oe]+=1);var Re=.05*(Le[Oe]-De[Oe]);De[Oe]=De[Oe]-Re,Le[Oe]=Le[Oe]+Re}Pe[0][Oe]=De[Oe],Pe[1][Oe]=Le[Oe]}var Ue=!1;for(Oe=0;Oe<3;++Oe)Ue=Ue||de[0][Oe]!==Pe[0][Oe]||de[1][Oe]!==Pe[1][Oe],de[0][Oe]=Pe[0][Oe],de[1][Oe]=Pe[1][Oe];if(K=K||Ue,X=X||Ue){if(Ue){var qe=[0,0,0];for(Ie=0;Ie<3;++Ie)qe[Ie]=u((Pe[1][Ie]-Pe[0][Ie])/10);P.update(P.autoTicks?{bounds:Pe,tickSpacing:qe}:{bounds:Pe})}var Xe=k.drawingBufferWidth,lt=k.drawingBufferHeight;for(W[0]=Xe,W[1]=lt,te[0]=0|Math.max(Xe/G.pixelRatio,1),te[1]=0|Math.max(lt/G.pixelRatio,1),function(et,nt){var ct=et.bounds,bt=et.cameraParams,kt=bt.projection,Bt=bt.model,at=et.zNear,Ft=et.zFar,en=et.fovy,Qt=et.gl.drawingBufferWidth/et.gl.drawingBufferHeight;nt?(p(kt,-Qt,Qt,-1,1,at,Ft),bt._ortho=!0):(d(kt,en,Qt,at,Ft),bt._ortho=!1);for(var tn=0;tn<16;++tn)Bt[tn]=0;Bt[15]=1;var dn=0;for(tn=0;tn<3;++tn)dn=Math.max(dn,ct[1][tn]-ct[0][tn]);for(tn=0;tn<3;++tn)Bt[5*tn]=et.autoScale?et.aspect[tn]/(ct[1][tn]-ct[0][tn]):1/dn,et.autoCenter&&(Bt[12+tn]=.5*-Bt[5*tn]*(ct[0][tn]+ct[1][tn]))}(G,N),Ie=0;Ie<we;++Ie)($e=Z[Ie]).axesBounds=Pe,G.clipToBounds&&($e.clipBounds=Pe);E.object&&(V.position=G.snapToData?E.dataCoordinate:E.dataPosition,V.bounds=Pe),K&&(K=!1,function(){if(!ue()){k.colorMask(!0,!0,!0,!0),k.depthMask(!0),k.disable(k.BLEND),k.enable(k.DEPTH_TEST),k.depthFunc(k.LEQUAL);for(var et=Z.length,nt=re.length,ct=0;ct<nt;++ct){var bt=re[ct];bt.shape=te,bt.begin();for(var kt=0;kt<et;++kt)if(Y[kt]===ct){var Bt=Z[kt];Bt.drawPick&&(Bt.pixelRatio=1,Bt.drawPick(U))}bt.end()}}}()),G.axesPixels=a(G.axes,U,Xe,lt),G.onrender&&G.onrender(),k.bindFramebuffer(k.FRAMEBUFFER,null),k.viewport(0,0,Xe,lt),G.clearRGBA(),k.depthMask(!0),k.colorMask(!0,!0,!0,!0),k.enable(k.DEPTH_TEST),k.depthFunc(k.LEQUAL),k.disable(k.BLEND),k.disable(k.CULL_FACE);var He=!1;for(P.enable&&(He=He||P.isTransparent(),P.draw(U)),V.axes=P,E.object&&V.draw(U),k.disable(k.CULL_FACE),Ie=0;Ie<we;++Ie)($e=Z[Ie]).axes=P,$e.pixelRatio=G.pixelRatio,$e.isOpaque&&$e.isOpaque()&&$e.draw(U),$e.isTransparent&&$e.isTransparent()&&(He=!0);if(He){for(L.shape=W,L.bind(),k.clear(k.DEPTH_BUFFER_BIT),k.colorMask(!1,!1,!1,!1),k.depthMask(!0),k.depthFunc(k.LESS),P.enable&&P.isTransparent()&&P.drawTransparent(U),Ie=0;Ie<we;++Ie)($e=Z[Ie]).isOpaque&&$e.isOpaque()&&$e.draw(U);for(k.enable(k.BLEND),k.blendEquation(k.FUNC_ADD),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA),k.colorMask(!0,!0,!0,!0),k.depthMask(!1),k.clearColor(0,0,0,0),k.clear(k.COLOR_BUFFER_BIT),P.isTransparent()&&P.drawTransparent(U),Ie=0;Ie<we;++Ie){var $e;($e=Z[Ie]).isTransparent&&$e.isTransparent()&&$e.drawTransparent(U)}k.bindFramebuffer(k.FRAMEBUFFER,null),k.blendFunc(k.ONE,k.ONE_MINUS_SRC_ALPHA),k.disable(k.DEPTH_TEST),D.bind(),L.color[0].bind(0),D.uniforms.accumBuffer=0,h(k),k.disable(k.BLEND)}for(X=!1,Ie=0;Ie<we;++Ie)Z[Ie].dirty=!1}}}return G.enableMouseListeners(),function me(){G._stopped||G.contextLost||(_e(),requestAnimationFrame(me))}(),G.redraw=function(){G._stopped||(X=!0,_e())},G},createCamera:e}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(x,M,_){var e=x("glslify");_.pointVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),_.pointFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),_.pickVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),_.pickFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:231}],123:[function(x,M,_){"use strict";var e=x("gl-shader"),o=x("gl-buffer"),a=x("typedarray-pool"),l=x("./lib/shader");function i(d,p,f,g,m){this.plot=d,this.offsetBuffer=p,this.pickBuffer=f,this.shader=g,this.pickShader=m,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}M.exports=function(d,p){var f=d.gl,c=new i(d,o(f),o(f),e(f,l.pointVertex,l.pointFragment),e(f,l.pickVertex,l.pickFragment));return c.update(p),d.addObject(c),c};var v,h,s=i.prototype;s.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},s.update=function(d){var p;function f(k,C){return k in d?d[k]:C}d=d||{},this.sizeMin=f("sizeMin",.5),this.sizeMax=f("sizeMax",20),this.color=f("color",[1,0,0,1]).slice(),this.areaRatio=f("areaRatio",1),this.borderColor=f("borderColor",[0,0,0,1]).slice(),this.blend=f("blend",!1);var g=d.positions.length>>>1,m=d.positions instanceof Float32Array,u=d.idToIndex instanceof Int32Array&&d.idToIndex.length>=g,w=d.positions,c=m?w:a.mallocFloat32(w.length),A=u?d.idToIndex:a.mallocInt32(g);if(m||c.set(w),!u)for(c.set(w),p=0;p<g;p++)A[p]=p;this.points=w,this.offsetBuffer.update(c),this.pickBuffer.update(A),m||a.free(c),u||a.free(A),this.pointCount=g,this.pickOffset=0},s.unifiedDraw=(v=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0],function(d){var p=void 0!==d,f=p?this.pickShader:this.shader,g=this.plot.gl,m=this.plot.dataBox;if(0===this.pointCount)return d;var u=m[2]-m[0],w=m[3]-m[1],c=function(E,L){var D,N=0,F=E.length>>>1;for(D=0;D<F;D++){var I=E[2*D],P=E[2*D+1];I>=L[0]&&I<=L[2]&&P>=L[1]&&P<=L[3]&&N++}return N}(this.points,m),A=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(c,.33333)));v[0]=2/u,v[4]=2/w,v[6]=-2*m[0]/u-1,v[7]=-2*m[1]/w-1,this.offsetBuffer.bind(),f.bind(),f.attributes.position.pointer(),f.uniforms.matrix=v,f.uniforms.color=this.color,f.uniforms.borderColor=this.borderColor,f.uniforms.pointCloud=A<5,f.uniforms.pointSize=A,f.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),p&&(h[0]=255&d,h[1]=d>>8&255,h[2]=d>>16&255,h[3]=d>>24&255,this.pickBuffer.bind(),f.attributes.pickId.pointer(g.UNSIGNED_BYTE),f.uniforms.pickOffset=h,this.pickOffset=d);var k=g.getParameter(g.BLEND),C=g.getParameter(g.DITHER);return k&&!this.blend&&g.disable(g.BLEND),C&&g.disable(g.DITHER),g.drawArrays(g.POINTS,0,this.pointCount),k&&!this.blend&&g.enable(g.BLEND),C&&g.enable(g.DITHER),d+this.pointCount}),s.draw=s.unifiedDraw,s.drawPick=s.unifiedDraw,s.pick=function(d,p,f){var g=this.pickOffset;if(f<g||f>=g+this.pointCount)return null;var u=f-g,w=this.points;return{object:this,pointId:u,dataCoord:[w[2*u],w[2*u+1]]}}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(x,M,_){M.exports=function(e,o,a,l){var i,v,h,s,d,p=o[0],f=o[1],g=o[2],m=o[3],u=a[0],w=a[1],c=a[2],A=a[3];return(v=p*u+f*w+g*c+m*A)<0&&(v=-v,u=-u,w=-w,c=-c,A=-A),1-v>1e-6?(i=Math.acos(v),h=Math.sin(i),s=Math.sin((1-l)*i)/h,d=Math.sin(l*i)/h):(s=1-l,d=l),e[0]=s*p+d*u,e[1]=s*f+d*w,e[2]=s*g+d*c,e[3]=s*m+d*A,e}},{}],125:[function(x,M,_){"use strict";M.exports=function(e){return e||0===e?e.toString():""}},{}],126:[function(x,M,_){"use strict";var e=x("vectorize-text");M.exports=function(a,l,i){var v=o[l];if(v||(v=o[l]={}),a in v)return v[a];var h={textAlign:"center",textBaseline:"middle",lineHeight:1,font:l,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},s=e(a,h);h.triangles=!1;var d,p,f=e(a,h);if(i&&1!==i){for(d=0;d<s.positions.length;++d)for(p=0;p<s.positions[d].length;++p)s.positions[d][p]/=i;for(d=0;d<f.positions.length;++d)for(p=0;p<f.positions[d].length;++p)f.positions[d][p]/=i}var g=[[1/0,1/0],[-1/0,-1/0]],m=f.positions.length;for(d=0;d<m;++d){var u=f.positions[d];for(p=0;p<2;++p)g[0][p]=Math.min(g[0][p],u[p]),g[1][p]=Math.max(g[1][p],u[p])}return v[a]=[s,f,g]};var o={}},{"vectorize-text":311}],127:[function(x,M,_){var e=x("gl-shader"),o=x("glslify"),a=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),l=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),i=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),v=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),h=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),s=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],d={vertex:a,fragment:v,attributes:s},p={vertex:l,fragment:v,attributes:s},f={vertex:i,fragment:v,attributes:s},g={vertex:a,fragment:h,attributes:s},m={vertex:l,fragment:h,attributes:s},u={vertex:i,fragment:h,attributes:s};function w(c,A){var k=e(c,A),C=k.attributes;return C.position.location=0,C.color.location=1,C.glyph.location=2,C.id.location=3,k}_.createPerspective=function(c){return w(c,d)},_.createOrtho=function(c){return w(c,p)},_.createProject=function(c){return w(c,f)},_.createPickPerspective=function(c){return w(c,g)},_.createPickOrtho=function(c){return w(c,m)},_.createPickProject=function(c){return w(c,u)}},{"gl-shader":132,glslify:231}],128:[function(x,M,_){"use strict";var e=x("is-string-blank"),o=x("gl-buffer"),a=x("gl-vao"),l=x("typedarray-pool"),i=x("gl-mat4/multiply"),v=x("./lib/shaders"),h=x("./lib/glyphs"),s=x("./lib/get-simple-string"),d=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function p(ee,re){var X=ee[0],K=ee[1],ie=ee[2],q=ee[3];return ee[0]=re[0]*X+re[4]*K+re[8]*ie+re[12]*q,ee[1]=re[1]*X+re[5]*K+re[9]*ie+re[13]*q,ee[2]=re[2]*X+re[6]*K+re[10]*ie+re[14]*q,ee[3]=re[3]*X+re[7]*K+re[11]*ie+re[15]*q,ee}function f(ee,re,X,K){return p(K,K),p(K,K),p(K,K)}function g(ee,re){this.index=ee,this.dataCoordinate=this.position=re}function m(ee){return!0===ee||ee>1?1:ee}function u(ee,re,X,K,ie,q,U,W,ae,G,te,ne){this.gl=ee,this.pixelRatio=1,this.shader=re,this.orthoShader=X,this.projectShader=K,this.pointBuffer=ie,this.colorBuffer=q,this.glyphBuffer=U,this.idBuffer=W,this.vao=ae,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=G,this.pickOrthoShader=te,this.pickProjectShader=ne,this.points=[],this._selectResult=new g(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}M.exports=function(ee){var re=ee.gl,X=v.createPerspective(re),K=v.createOrtho(re),ie=v.createProject(re),q=v.createPickPerspective(re),U=v.createPickOrtho(re),W=v.createPickProject(re),ae=o(re),G=o(re),te=o(re),ne=o(re),ue=new u(re,X,K,ie,ae,G,te,ne,a(re,[{buffer:ae,size:3,type:re.FLOAT},{buffer:G,size:4,type:re.FLOAT},{buffer:te,size:2,type:re.FLOAT},{buffer:ne,size:4,type:re.UNSIGNED_BYTE,normalized:!0}]),q,U,W);return ue.update(ee),ue};var w=u.prototype;w.pickSlots=1,w.setPickBase=function(ee){this.pickId=ee},w.isTransparent=function(){if(this.hasAlpha)return!0;for(var ee=0;ee<3;++ee)if(this.axesProject[ee]&&this.projectHasAlpha)return!0;return!1},w.isOpaque=function(){if(!this.hasAlpha)return!0;for(var ee=0;ee<3;++ee)if(this.axesProject[ee]&&!this.projectHasAlpha)return!0;return!1};var c=[0,0],A=[0,0,0],k=[0,0,0],C=[0,0,0,1],E=[0,0,0,1],L=d.slice(),D=[0,0,0],N=[[0,0,0],[0,0,0]];function F(ee){return ee[0]=ee[1]=ee[2]=0,ee}function I(ee,re){return ee[0]=re[0],ee[1]=re[1],ee[2]=re[2],ee[3]=1,ee}function P(ee,re,X,K){return ee[0]=re[0],ee[1]=re[1],ee[2]=re[2],ee[X]=K,ee}var V=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function Z(ee,re,X,K,ie,q,U){var W=X.gl;if((q===X.projectHasAlpha||U)&&function(ee,re,X,K){var ie,q=re.axesProject,U=re.gl,W=ee.uniforms,ae=X.model||d,G=X.view||d,te=X.projection||d,ne=re.axesBounds,le=function(Pe){for(var Re=N,Ue=0;Ue<2;++Ue)for(var qe=0;qe<3;++qe)Re[Ue][qe]=Math.max(Math.min(Pe[Ue][qe],1e8),-1e8);return Re}(re.clipBounds);ie=re.axes&&re.axes.lastCubeProps?re.axes.lastCubeProps.axis:[1,1,1],c[0]=2/U.drawingBufferWidth,c[1]=2/U.drawingBufferHeight,ee.bind(),W.view=G,W.projection=te,W.screenSize=c,W.highlightId=re.highlightId,W.highlightScale=re.highlightScale,W.clipBounds=le,W.pickGroup=re.pickId/255,W.pixelRatio=K;for(var ue=0;ue<3;++ue)if(q[ue]){W.scale=re.projectScale[ue],W.opacity=re.projectOpacity[ue];for(var pe=L,de=0;de<16;++de)pe[de]=0;for(de=0;de<4;++de)pe[5*de]=1;pe[5*ue]=0,pe[12+ue]=ie[ue]<0?ne[0][ue]:ne[1][ue],i(pe,ae,pe),W.model=pe;var _e=(ue+1)%3,me=(ue+2)%3,we=F(A),De=F(k);we[_e]=1,De[me]=1;var Le=f(0,0,0,I(C,we)),Ie=f(0,0,0,I(E,De));if(Math.abs(Le[1])>Math.abs(Ie[1])){var je=Le;Le=Ie,Ie=je,je=we,we=De,De=je;var ye=_e;_e=me,me=ye}Le[0]<0&&(we[_e]=-1),Ie[1]>0&&(De[me]=-1);var Me=0,Oe=0;for(de=0;de<4;++de)Me+=Math.pow(ae[4*_e+de],2),Oe+=Math.pow(ae[4*me+de],2);we[_e]/=Math.sqrt(Me),De[me]/=Math.sqrt(Oe),W.axes[0]=we,W.axes[1]=De,W.fragClipBounds[0]=P(D,le[0],ue,-1e8),W.fragClipBounds[1]=P(D,le[1],ue,1e8),re.vao.bind(),re.vao.draw(U.TRIANGLES,re.vertexCount),re.lineWidth>0&&(U.lineWidth(re.lineWidth*K),re.vao.draw(U.LINES,re.lineVertexCount,re.vertexCount)),re.vao.unbind()}}(re,X,K,ie),q===X.hasAlpha||U){ee.bind();var ae=ee.uniforms;ae.model=K.model||d,ae.view=K.view||d,ae.projection=K.projection||d,c[0]=2/W.drawingBufferWidth,c[1]=2/W.drawingBufferHeight,ae.screenSize=c,ae.highlightId=X.highlightId,ae.highlightScale=X.highlightScale,ae.fragClipBounds=V,ae.clipBounds=X.axes.bounds,ae.opacity=X.opacity,ae.pickGroup=X.pickId/255,ae.pixelRatio=ie,X.vao.bind(),X.vao.draw(W.TRIANGLES,X.vertexCount),X.lineWidth>0&&(W.lineWidth(X.lineWidth*ie),X.vao.draw(W.LINES,X.lineVertexCount,X.vertexCount)),X.vao.unbind()}}function Y(ee,re,X,K){var ie;ie=Array.isArray(ee)?re<ee.length?ee[re]:void 0:ee,ie=s(ie);var q=!0;e(ie)&&(ie="\u25bc",q=!1);var U=h(ie,X,K);return{mesh:U[0],lines:U[1],bounds:U[2],visible:q}}w.draw=function(ee){Z(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,ee,this.pixelRatio,!1,!1)},w.drawTransparent=function(ee){Z(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,ee,this.pixelRatio,!0,!1)},w.drawPick=function(ee){Z(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,ee,1,!0,!0)},w.pick=function(ee){if(!ee||ee.id!==this.pickId)return null;var re=ee.value[2]+(ee.value[1]<<8)+(ee.value[0]<<16);if(re>=this.pointCount||re<0)return null;var X=this.points[re],K=this._selectResult;K.index=re;for(var ie=0;ie<3;++ie)K.position[ie]=K.dataCoordinate[ie]=X[ie];return K},w.highlight=function(ee){if(ee){var re=ee.index;this.highlightId=[(255&re)/255,(re>>8&255)/255,(re>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},w.update=function(ee){if("perspective"in(ee=ee||{})&&(this.useOrtho=!ee.perspective),"orthographic"in ee&&(this.useOrtho=!!ee.orthographic),"lineWidth"in ee&&(this.lineWidth=ee.lineWidth),"project"in ee)if(Array.isArray(ee.project))this.axesProject=ee.project;else{var re=!!ee.project;this.axesProject=[re,re,re]}if("projectScale"in ee)if(Array.isArray(ee.projectScale))this.projectScale=ee.projectScale.slice();else{var X=+ee.projectScale;this.projectScale=[X,X,X]}if(this.projectHasAlpha=!1,"projectOpacity"in ee){this.projectOpacity=Array.isArray(ee.projectOpacity)?ee.projectOpacity.slice():[X=+ee.projectOpacity,X,X];for(var K=0;K<3;++K)this.projectOpacity[K]=m(this.projectOpacity[K]),this.projectOpacity[K]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in ee&&(this.opacity=m(ee.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var ie,q,U=ee.position,W=ee.font||"normal",ae=ee.alignment||[0,0];if(2===ae.length)ie=ae[0],q=ae[1];else for(ie=[],q=[],K=0;K<ae.length;++K)ie[K]=ae[K][0],q[K]=ae[K][1];var G=[1/0,1/0,1/0],te=[-1/0,-1/0,-1/0],ne=ee.glyph,le=ee.color,ue=ee.size,pe=ee.angle,de=ee.lineColor,_e=-1,me=0,we=0,De=0;if(U.length){De=U.length;e:for(K=0;K<De;++K){for(var Le=U[K],Ie=0;Ie<3;++Ie)if(isNaN(Le[Ie])||!isFinite(Le[Ie]))continue e;var je=(ct=Y(ne,K,W,this.pixelRatio)).mesh,ye=ct.lines,Me=ct.bounds;me+=3*je.cells.length,we+=2*ye.edges.length}}var Oe=me+we,Pe=l.mallocFloat(3*Oe),Re=l.mallocFloat(4*Oe),Ue=l.mallocFloat(2*Oe),qe=l.mallocUint32(Oe);if(Oe>0){var Xe=0,lt=me,He=[0,0,0,1],$e=[0,0,0,1],et=Array.isArray(le)&&Array.isArray(le[0]),nt=Array.isArray(de)&&Array.isArray(de[0]);e:for(K=0;K<De;++K){for(_e+=1,Le=U[K],Ie=0;Ie<3;++Ie){if(isNaN(Le[Ie])||!isFinite(Le[Ie]))continue e;te[Ie]=Math.max(te[Ie],Le[Ie]),G[Ie]=Math.min(G[Ie],Le[Ie])}je=(ct=Y(ne,K,W,this.pixelRatio)).mesh,ye=ct.lines,Me=ct.bounds;var ct,bt=ct.visible;if(bt)if(Array.isArray(le)){if(3===(kt=et?K<le.length?le[K]:[0,0,0,0]:le).length){for(Ie=0;Ie<3;++Ie)He[Ie]=kt[Ie];He[3]=1}else if(4===kt.length){for(Ie=0;Ie<4;++Ie)He[Ie]=kt[Ie];!this.hasAlpha&&kt[3]<1&&(this.hasAlpha=!0)}}else He[0]=He[1]=He[2]=0,He[3]=1;else He=[1,1,1,0];if(bt)if(Array.isArray(de)){var kt;if(3===(kt=nt?K<de.length?de[K]:[0,0,0,0]:de).length){for(Ie=0;Ie<3;++Ie)$e[Ie]=kt[Ie];$e[Ie]=1}else if(4===kt.length){for(Ie=0;Ie<4;++Ie)$e[Ie]=kt[Ie];!this.hasAlpha&&kt[3]<1&&(this.hasAlpha=!0)}}else $e[0]=$e[1]=$e[2]=0,$e[3]=1;else $e=[1,1,1,0];var Bt=.5;bt?Array.isArray(ue)?Bt=K<ue.length?+ue[K]:12:ue?Bt=+ue:this.useOrtho&&(Bt=12):Bt=0;var Et=0;Array.isArray(pe)?Et=K<pe.length?+pe[K]:0:pe&&(Et=+pe);var ht=Math.cos(Et),at=Math.sin(Et);for(Le=U[K],Ie=0;Ie<3;++Ie)te[Ie]=Math.max(te[Ie],Le[Ie]),G[Ie]=Math.min(G[Ie],Le[Ie]);var Ft=ie,en=q;Ft=0,Array.isArray(ie)?Ft=K<ie.length?ie[K]:0:ie&&(Ft=ie),en=0,Array.isArray(q)?en=K<q.length?q[K]:0:q&&(en=q);var Qt=[Ft*=Ft>0?1-Me[0][0]:Ft<0?1+Me[1][0]:1,en*=en>0?1-Me[0][1]:en<0?1+Me[1][1]:1],tn=je.cells||[],dn=je.positions||[];for(Ie=0;Ie<tn.length;++Ie)for(var Mn=tn[Ie],sn=0;sn<3;++sn){for(var ke=0;ke<3;++ke)Pe[3*Xe+ke]=Le[ke];for(ke=0;ke<4;++ke)Re[4*Xe+ke]=He[ke];qe[Xe]=_e;var Se=dn[Mn[sn]];Ue[2*Xe]=Bt*(ht*Se[0]-at*Se[1]+Qt[0]),Ue[2*Xe+1]=Bt*(at*Se[0]+ht*Se[1]+Qt[1]),Xe+=1}for(tn=ye.edges,dn=ye.positions,Ie=0;Ie<tn.length;++Ie)for(Mn=tn[Ie],sn=0;sn<2;++sn){for(ke=0;ke<3;++ke)Pe[3*lt+ke]=Le[ke];for(ke=0;ke<4;++ke)Re[4*lt+ke]=$e[ke];qe[lt]=_e,Ue[2*lt]=Bt*(ht*(Se=dn[Mn[sn]])[0]-at*Se[1]+Qt[0]),Ue[2*lt+1]=Bt*(at*Se[0]+ht*Se[1]+Qt[1]),lt+=1}}}this.bounds=[G,te],this.points=U,this.pointCount=U.length,this.vertexCount=me,this.lineVertexCount=we,this.pointBuffer.update(Pe),this.colorBuffer.update(Re),this.glyphBuffer.update(Ue),this.idBuffer.update(qe),l.free(Pe),l.free(Re),l.free(Ue),l.free(qe)},w.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(x,M,_){"use strict";var e=x("glslify");_.boxVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),_.boxFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:231}],130:[function(x,M,_){"use strict";var e=x("gl-shader"),o=x("gl-buffer"),a=x("./lib/shaders");function l(v,h,s){this.plot=v,this.boxBuffer=h,this.boxShader=s,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}M.exports=function(v,h){var s=v.gl,f=new l(v,o(s,[0,0,0,1,1,0,1,1]),e(s,a.boxVertex,a.boxFragment));return f.update(h),v.addOverlay(f),f};var i=l.prototype;i.draw=function(){if(this.enabled){var v=this.plot,h=this.selectBox,s=this.borderWidth,d=this.innerColor,p=this.outerColor,f=this.borderColor,g=v.box,m=v.screenBox,u=v.dataBox,w=v.viewBox,c=v.pixelRatio,A=(h[0]-u[0])*(w[2]-w[0])/(u[2]-u[0])+w[0],k=(h[1]-u[1])*(w[3]-w[1])/(u[3]-u[1])+w[1],C=(h[2]-u[0])*(w[2]-w[0])/(u[2]-u[0])+w[0],E=(h[3]-u[1])*(w[3]-w[1])/(u[3]-u[1])+w[1];if(A=Math.max(A,w[0]),k=Math.max(k,w[1]),C=Math.min(C,w[2]),E=Math.min(E,w[3]),!(C<A||E<k)){g.bind();var L=m[2]-m[0],D=m[3]-m[1];if(this.outerFill&&(g.drawBox(0,0,L,k,p),g.drawBox(0,k,A,E,p),g.drawBox(0,E,L,D,p),g.drawBox(C,k,L,E,p)),this.innerFill&&g.drawBox(A,k,C,E,d),s>0){var N=s*c;g.drawBox(A-N,k-N,C+N,k+N,f),g.drawBox(A-N,E-N,C+N,E+N,f),g.drawBox(A-N,k-N,A+N,E+N,f),g.drawBox(C-N,k-N,C+N,E+N,f)}}}},i.update=function(v){this.innerFill=!!(v=v||{}).innerFill,this.outerFill=!!v.outerFill,this.innerColor=(v.innerColor||[0,0,0,.5]).slice(),this.outerColor=(v.outerColor||[0,0,0,.5]).slice(),this.borderColor=(v.borderColor||[0,0,0,1]).slice(),this.borderWidth=v.borderWidth||0,this.selectBox=(v.selectBox||this.selectBox).slice()},i.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(x,M,_){"use strict";M.exports=function(s,d){var p=d[0],f=d[1];return new v(s,e(s,p,f,{}),o.mallocUint8(p*f*4))};var e=x("gl-fbo"),o=x("typedarray-pool"),a=x("ndarray"),l=x("bit-twiddle").nextPow2;function i(s,d,p,f,g){this.coord=[s,d],this.id=p,this.value=f,this.distance=g}function v(s,d,p){this.gl=s,this.fbo=d,this.buffer=p,this._readTimeout=null;var f=this;this._readCallback=function(){f.gl&&(d.bind(),s.readPixels(0,0,d.shape[0],d.shape[1],s.RGBA,s.UNSIGNED_BYTE,f.buffer),f._readTimeout=null)}}var h=v.prototype;Object.defineProperty(h,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(s){if(this.gl){this.fbo.shape=s;var d=this.fbo.shape[0],p=this.fbo.shape[1];if(p*d*4>this.buffer.length){o.free(this.buffer);for(var f=this.buffer=o.mallocUint8(l(p*d*4)),g=0;g<p*d*4;++g)f[g]=255}return s}}}),h.begin=function(){var s=this.gl;s&&(this.fbo.bind(),s.clearColor(1,1,1,1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT))},h.end=function(){var s=this.gl;s&&(s.bindFramebuffer(s.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},h.query=function(s,d,p){if(!this.gl)return null;var f=this.fbo.shape.slice();s|=0,d|=0,"number"!=typeof p&&(p=1);var g=0|Math.min(Math.max(s-p,0),f[0]),m=0|Math.min(Math.max(s+p,0),f[0]),u=0|Math.min(Math.max(d-p,0),f[1]),w=0|Math.min(Math.max(d+p,0),f[1]);if(m<=g||w<=u)return null;var c=[m-g,w-u],A=a(this.buffer,[c[0],c[1],4],[4,4*f[0],1],4*(g+f[0]*u)),k=function(L,D,N){for(var F=1e8,I=-1,P=-1,j=L.shape[0],V=L.shape[1],Z=0;Z<j;Z++)for(var Y=0;Y<V;Y++){var ee=L.get(Z,Y,0),re=L.get(Z,Y,1),X=L.get(Z,Y,2),K=L.get(Z,Y,3);if(ee<255||re<255||X<255||K<255){var ie=D-Z,q=N-Y,U=ie*ie+q*q;U<F&&(F=U,I=Z,P=Y)}}return[I,P,F]}(A.hi(c[0],c[1],1),p,p),C=k[0],E=k[1];return C<0||Math.pow(this.radius,2)<k[2]?null:new i(C+g|0,E+u|0,A.get(C,E,0),[A.get(C,E,1),A.get(C,E,2),A.get(C,E,3)],Math.sqrt(k[2]))},h.dispose=function(){this.gl&&(this.fbo.dispose(),o.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(x,M,_){"use strict";var e=x("./lib/create-uniforms"),o=x("./lib/create-attributes"),a=x("./lib/reflect"),l=x("./lib/shader-cache"),i=x("./lib/runtime-reflect"),v=x("./lib/GLError");function h(p){this.gl=p,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var s=h.prototype;function d(p,f){return p.name<f.name?-1:1}s.bind=function(){var p;this.program||this._relink();var f=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),g=this.gl.lastAttribCount;if(f>g)for(p=g;p<f;p++)this.gl.enableVertexAttribArray(p);else if(g>f)for(p=f;p<g;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=f,this.gl.useProgram(this.program)},s.dispose=function(){for(var p=this.gl.lastAttribCount,f=0;f<p;f++)this.gl.disableVertexAttribArray(f);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},s.update=function(p,f,g,m){if(!f||1===arguments.length){var u=p;p=u.vertex,f=u.fragment,g=u.uniforms,m=u.attributes}var w=this,c=w.gl,A=w._vref;w._vref=l.shader(c,c.VERTEX_SHADER,p),A&&A.dispose(),w.vertShader=w._vref.shader;var k=this._fref;if(w._fref=l.shader(c,c.FRAGMENT_SHADER,f),k&&k.dispose(),w.fragShader=w._fref.shader,!g||!m){var C=c.createProgram();if(c.attachShader(C,w.fragShader),c.attachShader(C,w.vertShader),c.linkProgram(C),!c.getProgramParameter(C,c.LINK_STATUS)){var E=c.getProgramInfoLog(C);throw new v(E,"Error linking program:"+E)}g=g||i.uniforms(c,C),m=m||i.attributes(c,C),c.deleteProgram(C)}(m=m.slice()).sort(d);var L,D=[],N=[],F=[];for(L=0;L<m.length;++L){var I=m[L];if(I.type.indexOf("mat")>=0){for(var P=0|I.type.charAt(I.type.length-1),j=new Array(P),V=0;V<P;++V)j[V]=F.length,N.push(I.name+"["+V+"]"),"number"==typeof I.location?F.push(I.location+V):Array.isArray(I.location)&&I.location.length===P&&"number"==typeof I.location[V]?F.push(0|I.location[V]):F.push(-1);D.push({name:I.name,type:I.type,locations:j})}else D.push({name:I.name,type:I.type,locations:[F.length]}),N.push(I.name),F.push("number"==typeof I.location?0|I.location:-1)}var Z=0;for(L=0;L<F.length;++L)if(F[L]<0){for(;F.indexOf(Z)>=0;)Z+=1;F[L]=Z}var Y=new Array(g.length);function ee(){w.program=l.program(c,w._vref,w._fref,N,F);for(var re=0;re<g.length;++re)Y[re]=c.getUniformLocation(w.program,g[re].name)}ee(),w._relink=ee,w.types={uniforms:a(g),attributes:a(m)},w.attributes=o(c,w,D,F),Object.defineProperty(w,"uniforms",e(c,w,g,Y))},M.exports=function(p,f,g,m,u){var w=new h(p);return w.update(f,g,m,u),w}},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(x,M,_){function e(o,a,l){this.shortMessage=a||"",this.longMessage=l||"",this.rawError=o||"",this.message="gl-shader: "+(a||o||"")+(l?"\n"+l:""),this.stack=(new Error).stack}(e.prototype=new Error).name="GLError",e.prototype.constructor=e,M.exports=e},{}],134:[function(x,M,_){"use strict";M.exports=function(h,s,d,p){for(var f={},g=0,m=d.length;g<m;++g){var u=d[g],w=u.name,c=u.type,A=u.locations;switch(c){case"bool":case"int":case"float":i(h,s,A[0],p,1,f,w);break;default:if(c.indexOf("vec")>=0){if((k=c.charCodeAt(c.length-1)-48)<2||k>4)throw new e("","Invalid data type for attribute "+w+": "+c);i(h,s,A[0],p,k,f,w)}else{if(!(c.indexOf("mat")>=0))throw new e("","Unknown data type for attribute "+w+": "+c);var k;if((k=c.charCodeAt(c.length-1)-48)<2||k>4)throw new e("","Invalid data type for attribute "+w+": "+c);v(h,s,A,p,k,f,w)}}}return f};var e=x("./GLError");function o(h,s,d,p,f,g){this._gl=h,this._wrapper=s,this._index=d,this._locations=p,this._dimension=f,this._constFunc=g}var a=o.prototype;a.pointer=function(h,s,d,p){var f=this._gl,g=this._locations[this._index];f.vertexAttribPointer(g,this._dimension,h||f.FLOAT,!!s,d||0,p||0),f.enableVertexAttribArray(g)},a.set=function(h,s,d,p){return this._constFunc(this._locations[this._index],h,s,d,p)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(h){return h!==this._locations[this._index]&&(this._locations[this._index]=0|h,this._wrapper.program=null),0|h}});var l=[function(h,s,d){return void 0===d.length?h.vertexAttrib1f(s,d):h.vertexAttrib1fv(s,d)},function(h,s,d,p){return void 0===d.length?h.vertexAttrib2f(s,d,p):h.vertexAttrib2fv(s,d)},function(h,s,d,p,f){return void 0===d.length?h.vertexAttrib3f(s,d,p,f):h.vertexAttrib3fv(s,d)},function(h,s,d,p,f,g){return void 0===d.length?h.vertexAttrib4f(s,d,p,f,g):h.vertexAttrib4fv(s,d)}];function i(h,s,d,p,f,g,m){var u=l[f],w=new o(h,s,d,p,f,u);Object.defineProperty(g,m,{set:function(c){return h.disableVertexAttribArray(p[d]),u(h,p[d],c),c},get:function(){return w},enumerable:!0})}function v(h,s,d,p,f,g,m){for(var u=new Array(f),w=new Array(f),c=0;c<f;++c)i(h,s,d[c],p,f,u,c),w[c]=u[c];Object.defineProperty(u,"location",{set:function(C){if(Array.isArray(C))for(var E=0;E<f;++E)w[E].location=C[E];else for(E=0;E<f;++E)w[E].location=C+E;return C},get:function(){for(var C=new Array(f),E=0;E<f;++E)C[E]=p[d[E]];return C},enumerable:!0}),u.pointer=function(C,E,L,D){C=C||h.FLOAT,E=!!E,L=L||f*f,D=D||0;for(var N=0;N<f;++N){var F=p[d[N]];h.vertexAttribPointer(F,f,C,E,L,D+N*f),h.enableVertexAttribArray(F)}};var A=new Array(f),k=h["vertexAttrib"+f+"fv"];Object.defineProperty(g,m,{set:function(C){for(var E=0;E<f;++E){var L=p[d[E]];if(h.disableVertexAttribArray(L),Array.isArray(C[0]))k.call(h,L,C[E]);else{for(var D=0;D<f;++D)A[D]=C[f*E+D];k.call(h,L,A)}}return C},get:function(){return u},enumerable:!0})}},{"./GLError":133}],135:[function(x,M,_){"use strict";var e=x("./reflect"),o=x("./GLError");function a(i){return function(){return i}}function l(i,v){for(var h=new Array(i),s=0;s<i;++s)h[s]=v;return h}M.exports=function(i,v,h,s){function d(m){return function(u){for(var w=function V(Z,Y){if("object"!=typeof Y)return[[Z,Y]];var ee=[];for(var re in Y){var X=Y[re],K=Z;parseInt(re)+""===re?K+="["+re+"]":K+="."+re,"object"==typeof X?ee.push.apply(ee,V(K,X)):ee.push([K,X])}return ee}("",m),c=0;c<w.length;++c){var A=w[c],k=A[0],C=A[1];if(s[C]){var E=u;if("string"==typeof k&&(0===k.indexOf(".")||0===k.indexOf("["))){var L=k;if(0===k.indexOf(".")&&(L=k.slice(1)),L.indexOf("]")===L.length-1){var D=L.indexOf("["),N=L.slice(0,D),F=L.slice(D+1,L.length-1);E=N?u[N][F]:u[F]}else E=u[L]}var I,P=h[C].type;switch(P){case"bool":case"int":case"sampler2D":case"samplerCube":i.uniform1i(s[C],E);break;case"float":i.uniform1f(s[C],E);break;default:var j=P.indexOf("vec");if(!(0<=j&&j<=1&&P.length===4+j)){if(0===P.indexOf("mat")&&4===P.length){if((I=P.charCodeAt(P.length-1)-48)<2||I>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+P);i["uniformMatrix"+I+"fv"](s[C],!1,E);break}throw new o("","Unknown uniform data type for "+name+": "+P)}if((I=P.charCodeAt(P.length-1)-48)<2||I>4)throw new o("","Invalid data type");switch(P.charAt(0)){case"b":case"i":i["uniform"+I+"iv"](s[C],E);break;case"v":i["uniform"+I+"fv"](s[C],E);break;default:throw new o("","Unrecognized data type for vector "+name+": "+P)}}}}}}function p(m,u,w){if("object"==typeof w){var c=f(w);Object.defineProperty(m,u,{get:a(c),set:d(w),enumerable:!0,configurable:!1})}else s[w]?Object.defineProperty(m,u,{get:(A=w,function(k,C,E){return k.getUniform(C.program,E[A])}),set:d(w),enumerable:!0,configurable:!1}):m[u]=function(k){switch(k){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var C=k.indexOf("vec");if(0<=C&&C<=1&&k.length===4+C){if((E=k.charCodeAt(k.length-1)-48)<2||E>4)throw new o("","Invalid data type");return"b"===k.charAt(0)?l(E,!1):l(E,0)}if(0===k.indexOf("mat")&&4===k.length){var E;if((E=k.charCodeAt(k.length-1)-48)<2||E>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+k);return l(E*E,0)}throw new o("","Unknown uniform data type for "+name+": "+k)}}(h[w].type);var A}function f(m){var u;if(Array.isArray(m)){u=new Array(m.length);for(var w=0;w<m.length;++w)p(u,w,m[w])}else for(var c in u={},m)p(u,c,m[c]);return u}var g=e(h,!0);return{get:a(f(g)),set:d(g),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(x,M,_){"use strict";M.exports=function(e,o){for(var a={},l=0;l<e.length;++l)for(var i=e[l].name.split("."),v=a,h=0;h<i.length;++h){var s=i[h].split("[");if(s.length>1){s[0]in v||(v[s[0]]=[]),v=v[s[0]];for(var d=1;d<s.length;++d){var p=parseInt(s[d]);d<s.length-1||h<i.length-1?(p in v||(v[p]=d<s.length-1?[]:{}),v=v[p]):v[p]=o?l:e[l].type}}else h<i.length-1?(s[0]in v||(v[s[0]]={}),v=v[s[0]]):v[s[0]]=o?l:e[l].type}return a}},{}],137:[function(x,M,_){"use strict";_.uniforms=function(l,i){for(var v=l.getProgramParameter(i,l.ACTIVE_UNIFORMS),h=[],s=0;s<v;++s){var d=l.getActiveUniform(i,s);if(d){var p=a(l,d.type);if(d.size>1)for(var f=0;f<d.size;++f)h.push({name:d.name.replace("[0]","["+f+"]"),type:p});else h.push({name:d.name,type:p})}}return h},_.attributes=function(l,i){for(var v=l.getProgramParameter(i,l.ACTIVE_ATTRIBUTES),h=[],s=0;s<v;++s){var d=l.getActiveAttrib(i,s);d&&h.push({name:d.name,type:a(l,d.type)})}return h};var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},o=null;function a(l,i){if(!o){var v=Object.keys(e);o={};for(var h=0;h<v.length;++h){var s=v[h];o[l[s]]=e[s]}}return o[i]}},{}],138:[function(x,M,_){"use strict";_.shader=function(d,p,f){return s(d).getShaderReference(p,f)},_.program=function(d,p,f,g,m){return s(d).getProgram(p,f,g,m)};var e=x("./GLError"),o=x("gl-format-compiler-error"),a=new("undefined"==typeof WeakMap?x("weakmap-shim"):WeakMap),l=0;function i(d,p,f,g,m,u,w){this.id=d,this.src=p,this.type=f,this.shader=g,this.count=u,this.programs=[],this.cache=w}function v(d){this.gl=d,this.shaders=[{},{}],this.programs={}}i.prototype.dispose=function(){if(0==--this.count){for(var d=this.cache,p=d.gl,f=this.programs,g=0,m=f.length;g<m;++g){var u=d.programs[f[g]];u&&(delete d.programs[g],p.deleteProgram(u))}p.deleteShader(this.shader),delete d.shaders[this.type===p.FRAGMENT_SHADER|0][this.src]}};var h=v.prototype;function s(d){var p=a.get(d);return p||(p=new v(d),a.set(d,p)),p}h.getShaderReference=function(d,p){var f=this.gl,g=this.shaders[d===f.FRAGMENT_SHADER|0],m=g[p];if(m&&f.isShader(m.shader))m.count+=1;else{var u=function(w,c,A){var k=w.createShader(c);if(w.shaderSource(k,A),w.compileShader(k),!w.getShaderParameter(k,w.COMPILE_STATUS)){var C=w.getShaderInfoLog(k);try{var E=o(C,A,c)}catch(L){throw console.warn("Failed to format compiler error: "+L),new e(C,"Error compiling shader:\n"+C)}throw new e(C,E.short,E.long)}return k}(f,d,p);m=g[p]=new i(l++,p,d,u,[],1,this)}return m},h.getProgram=function(d,p,f,g){var m=[d.id,p.id,f.join(":"),g.join(":")].join("@"),u=this.programs[m];return u&&this.gl.isProgram(u)||(this.programs[m]=u=function(w,c,A,k,C){var E=w.createProgram();w.attachShader(E,c),w.attachShader(E,A);for(var L=0;L<k.length;++L)w.bindAttribLocation(E,C[L],k[L]);if(w.linkProgram(E),!w.getProgramParameter(E,w.LINK_STATUS)){var D=w.getProgramInfoLog(E);throw new e(D,"Error linking program: "+D)}return E}(this.gl,d.shader,p.shader,f,g),d.programs.push(m),p.programs.push(m)),u}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(x,M,_){"use strict";function e(a){this.plot=a,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}M.exports=function(a,l){var i=new e(a);return i.update(l),a.addOverlay(i),i};var o=e.prototype;o.update=function(a){this.enable=((a=a||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(a.width||[1,1,1,1]).slice(),this.color=(a.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(l){return l.slice()}),this.center=(a.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},o.draw=function(){var a=this.enable,l=this.width,i=this.color,v=this.center,h=this.plot,s=h.line,d=h.dataBox,p=h.viewBox;if(s.bind(),d[0]<=v[0]&&v[0]<=d[2]&&d[1]<=v[1]&&v[1]<=d[3]){var f=p[0]+(v[0]-d[0])/(d[2]-d[0])*(p[2]-p[0]),g=p[1]+(v[1]-d[1])/(d[3]-d[1])*(p[3]-p[1]);a[0]&&s.drawLine(f,g,p[0],g,l[0],i[0]),a[1]&&s.drawLine(f,g,f,p[1],l[1],i[1]),a[2]&&s.drawLine(f,g,p[2],g,l[2],i[2]),a[3]&&s.drawLine(f,g,f,p[3],l[3],i[3])}},o.dispose=function(){this.plot.removeOverlay(this)}},{}],140:[function(x,M,_){"use strict";var e=x("glslify"),o=x("gl-shader"),a=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),l=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);M.exports=function(i){return o(i,a,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(x,M,_){"use strict";var e=x("gl-buffer"),o=x("gl-vao"),a=x("./shaders/index");M.exports=function(p,f){var g=[];function m(k,C,E,L,D,N){var F=[k,C,E,0,0,0,1];F[L+3]=1,F[L]=D,g.push.apply(g,F),F[6]=-1,g.push.apply(g,F),F[L]=N,g.push.apply(g,F),g.push.apply(g,F),F[6]=1,g.push.apply(g,F),F[L]=D,g.push.apply(g,F)}m(0,0,0,0,0,1),m(0,0,0,1,0,1),m(0,0,0,2,0,1),m(1,0,0,1,-1,1),m(1,0,0,2,-1,1),m(0,1,0,0,-1,1),m(0,1,0,2,-1,1),m(0,0,1,0,-1,1),m(0,0,1,1,-1,1);var u=e(p,g),w=o(p,[{type:p.FLOAT,buffer:u,size:3,offset:0,stride:28},{type:p.FLOAT,buffer:u,size:3,offset:12,stride:28},{type:p.FLOAT,buffer:u,size:1,offset:24,stride:28}]),c=a(p);c.attributes.position.location=0,c.attributes.color.location=1,c.attributes.weight.location=2;var A=new i(p,u,w,c);return A.update(f),A};var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function i(p,f,g,m){this.gl=p,this.buffer=f,this.vao=g,this.shader=m,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var v=i.prototype,h=[0,0,0],s=[0,0,0],d=[0,0];v.isTransparent=function(){return!1},v.drawTransparent=function(p){},v.draw=function(p){var f=this.gl,g=this.vao,m=this.shader;g.bind(),m.bind();var u,w=p.model||l,c=p.view||l,A=p.projection||l;this.axes&&(u=this.axes.lastCubeProps.axis);for(var k=h,C=s,E=0;E<3;++E)u&&u[E]<0?(k[E]=this.bounds[0][E],C[E]=this.bounds[1][E]):(k[E]=this.bounds[1][E],C[E]=this.bounds[0][E]);for(d[0]=f.drawingBufferWidth,d[1]=f.drawingBufferHeight,m.uniforms.model=w,m.uniforms.view=c,m.uniforms.projection=A,m.uniforms.coordinates=[this.position,k,C],m.uniforms.colors=this.colors,m.uniforms.screenShape=d,E=0;E<3;++E)m.uniforms.lineWidth=this.lineWidth[E]*this.pixelRatio,this.enabled[E]&&(g.draw(f.TRIANGLES,6,6*E),this.drawSides[E]&&g.draw(f.TRIANGLES,12,18+12*E));g.unbind()},v.update=function(p){p&&("bounds"in p&&(this.bounds=p.bounds),"position"in p&&(this.position=p.position),"lineWidth"in p&&(this.lineWidth=p.lineWidth),"colors"in p&&(this.colors=p.colors),"enabled"in p&&(this.enabled=p.enabled),"drawSides"in p&&(this.drawSides=p.drawSides))},v.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(x,M,_){var e=x("glslify"),o=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),l=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);_.meshShader={vertex:o,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},_.pickShader={vertex:l,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(x,M,_){"use strict";var e=x("gl-vec3"),o=x("gl-vec4"),a=["xyz","xzy","yxz","yzx","zxy","zyx"],i=function(p,f){var g,m=p.length;for(g=0;g<m;g++){var u=p[g];if(u===f)return g;if(u>f)return g-1}return g},v=function(p,f,g){return p<f?f:p>g?g:p},h=function(p){var f=1/0;p.sort(function(w,c){return w-c});for(var g=p.length,m=1;m<g;m++){var u=Math.abs(p[m]-p[m-1]);u<f&&(f=u)}return f};M.exports=function(p,f){var g=p.startingPositions,m=p.maxLength||1e3,u=p.tubeSize||1,w=p.absoluteTubeSize,c=p.gridFill||"+x+y+z",A={};-1!==c.indexOf("-x")&&(A.reversedX=!0),-1!==c.indexOf("-y")&&(A.reversedY=!0),-1!==c.indexOf("-z")&&(A.reversedZ=!0),A.filled=a.indexOf(c.replace(/-/g,"").replace(/\+/g,""));var de,_e,me,we,k=p.getVelocity||function(de){return function(_e,me,we){var De=me.vectors,Le=me.meshgrid,Ie=_e[0],je=_e[1],ye=_e[2],Me=Le[0].length,Oe=Le[1].length,Pe=Le[2].length,Re=i(Le[0],Ie),Ue=i(Le[1],je),qe=i(Le[2],ye),Xe=Re+1,lt=Ue+1,He=qe+1;if(Re=v(Re,0,Me-1),Xe=v(Xe,0,Me-1),Ue=v(Ue,0,Oe-1),lt=v(lt,0,Oe-1),qe=v(qe,0,Pe-1),He=v(He,0,Pe-1),Re<0||Ue<0||qe<0||Xe>Me-1||lt>Oe-1||He>Pe-1)return e.create();var $e,et,nt,ct,bt,kt,Bt=Le[0][Re],ht=Le[1][Ue],Ft=Le[2][qe],en=(Ie-Bt)/(Le[0][Xe]-Bt),Qt=(je-ht)/(Le[1][lt]-ht),tn=(ye-Ft)/(Le[2][He]-Ft);switch(isFinite(en)||(en=.5),isFinite(Qt)||(Qt=.5),isFinite(tn)||(tn=.5),we.reversedX&&(Re=Me-1-Re,Xe=Me-1-Xe),we.reversedY&&(Ue=Oe-1-Ue,lt=Oe-1-lt),we.reversedZ&&(qe=Pe-1-qe,He=Pe-1-He),we.filled){case 5:bt=qe,kt=He,nt=Ue*Pe,ct=lt*Pe,$e=Re*Pe*Oe,et=Xe*Pe*Oe;break;case 4:bt=qe,kt=He,$e=Re*Pe,et=Xe*Pe,nt=Ue*Pe*Me,ct=lt*Pe*Me;break;case 3:nt=Ue,ct=lt,bt=qe*Oe,kt=He*Oe,$e=Re*Oe*Pe,et=Xe*Oe*Pe;break;case 2:nt=Ue,ct=lt,$e=Re*Oe,et=Xe*Oe,bt=qe*Oe*Me,kt=He*Oe*Me;break;case 1:$e=Re,et=Xe,bt=qe*Me,kt=He*Me,nt=Ue*Me*Pe,ct=lt*Me*Pe;break;default:$e=Re,et=Xe,nt=Ue*Me,ct=lt*Me,bt=qe*Me*Oe,kt=He*Me*Oe}var dn=De[$e+nt+bt],Mn=De[$e+nt+kt],sn=De[$e+ct+bt],ke=De[$e+ct+kt],Se=De[et+nt+bt],Ce=De[et+nt+kt],Ve=De[et+ct+bt],Ge=De[et+ct+kt],Qe=e.create(),ot=e.create(),it=e.create(),mt=e.create();e.lerp(Qe,dn,Se,en),e.lerp(ot,Mn,Ce,en),e.lerp(it,sn,Ve,en),e.lerp(mt,ke,Ge,en);var xt=e.create(),Vt=e.create();e.lerp(xt,Qe,it,Qt),e.lerp(Vt,ot,mt,Qt);var $t=e.create();return e.lerp($t,xt,Vt,tn),$t}(de,p,A)},C=p.getDivergence||function(de,_e){var me=e.create(),we=1e-4;e.add(me,de,[we,0,0]);var De=k(me);e.subtract(De,De,_e),e.scale(De,De,1/we),e.add(me,de,[0,we,0]);var Le=k(me);e.subtract(Le,Le,_e),e.scale(Le,Le,1/we),e.add(me,de,[0,0,we]);var Ie=k(me);return e.subtract(Ie,Ie,_e),e.scale(Ie,Ie,1/we),e.add(me,De,Le),e.add(me,me,Ie),me},E=[],L=f[0][0],D=f[0][1],N=f[0][2],F=f[1][0],I=f[1][1],P=f[1][2],V=10*e.distance(f[0],f[1])/m,Z=V*V,Y=1,ee=0,re=g.length;re>1&&(Y=function(de){for(var _e=[],me=[],we=[],De={},Le={},Ie={},je=de.length,ye=0;ye<je;ye++){var Me=de[ye],Oe=Me[0],Pe=Me[1],Re=Me[2];De[Oe]||(_e.push(Oe),De[Oe]=!0),Le[Pe]||(me.push(Pe),Le[Pe]=!0),Ie[Re]||(we.push(Re),Ie[Re]=!0)}var Ue=h(_e),qe=h(me),Xe=h(we),lt=Math.min(Ue,qe,Xe);return isFinite(lt)?lt:1}(g));for(var X=0;X<re;X++){var K=e.create();e.copy(K,g[X]);var ie=[K],q=[],U=k(K),W=K;q.push(U);var ae=[],G=C(K,U),te=e.length(G);isFinite(te)&&te>ee&&(ee=te),ae.push(te),E.push({points:ie,velocities:q,divergences:ae});for(var ne=0;ne<100*m&&ie.length<m&&(_e=void 0,me=void 0,we=void 0,me=(de=K)[1],we=de[2],!((_e=de[0])<L||_e>F||me<D||me>I||we<N||we>P));){ne++;var le=e.clone(U),ue=e.squaredLength(le);if(0===ue)break;ue>Z&&e.scale(le,le,V/Math.sqrt(ue)),e.add(le,le,K),U=k(le),e.squaredDistance(W,le)-Z>-1e-4*Z&&(ie.push(le),W=le,q.push(U),G=C(le,U),te=e.length(G),isFinite(te)&&te>ee&&(ee=te),ae.push(te)),K=le}}var pe=function(p,f,g,m){for(var u=0,w=0;w<p.length;w++)for(var c=p[w].velocities,A=0;A<c.length;A++)u=Math.max(u,e.length(c[A]));var k=p.map(function(V){return function(Z,Y,ee,re){for(var X=Z.points,K=Z.velocities,ie=Z.divergences,q=[],U=[],W=[],ae=[],G=[],te=[],ne=0,le=0,ue=o.create(),pe=o.create(),de=0;de<X.length;de++){var _e=X[de],me=K[de],we=ie[de];0===Y&&(we=.05*ee),le=e.length(me)/re,ue=o.create(),e.copy(ue,me),ue[3]=we;for(var De=0;De<8;De++)G[De]=[_e[0],_e[1],_e[2],De];if(ae.length>0)for(De=0;De<8;De++){var Le=(De+1)%8;q.push(ae[De],G[De],G[Le],G[Le],ae[Le],ae[De]),W.push(pe,ue,ue,ue,pe,pe),te.push(ne,le,le,le,ne,ne);var Ie=q.length;U.push([Ie-6,Ie-5,Ie-4],[Ie-3,Ie-2,Ie-1])}var je=ae;ae=G,G=je;var ye=pe;pe=ue,ue=ye;var Me=ne;ne=le,le=Me}return{positions:q,cells:U,vectors:W,vertexIntensity:te}}(V,g,m,u)}),C=[],E=[],L=[],D=[];for(w=0;w<k.length;w++){var N=k[w],F=C.length;for(C=C.concat(N.positions),L=L.concat(N.vectors),D=D.concat(N.vertexIntensity),A=0;A<N.cells.length;A++){var I=N.cells[A],P=[];E.push(P);for(var j=0;j<I.length;j++)P.push(I[j]+F)}}return{positions:C,cells:E,vectors:L,vertexIntensity:D,colormap:f}}(E,p.colormap,ee,Y);return w?pe.tubeScale=w:(0===ee&&(ee=1),pe.tubeScale=.5*u*Y/ee),pe};var s=x("./lib/shaders"),d=x("gl-cone3d").createMesh;M.exports.createTubeMesh=function(p,f){return d(p,f,{shaders:s,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(x,M,_){var e=x("gl-shader"),o=x("glslify"),a=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),l=o(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),i=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),v=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);_.createShader=function(h){var s=e(h,a,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s.attributes.normal.location=2,s},_.createPickShader=function(h){var s=e(h,a,v,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s.attributes.normal.location=2,s},_.createContourShader=function(h){var s=e(h,i,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s},_.createPickContourShader=function(h){var s=e(h,i,v,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s}},{"gl-shader":132,glslify:231}],145:[function(x,M,_){"use strict";M.exports=function(U){var W=U.gl,ae=c(W),G=k(W),te=A(W),ne=C(W),le=o(W),ue=a(W,[{buffer:le,size:4,stride:40,offset:0},{buffer:le,size:3,stride:40,offset:16},{buffer:le,size:3,stride:40,offset:28}]),pe=o(W),de=a(W,[{buffer:pe,size:4,stride:20,offset:0},{buffer:pe,size:1,stride:20,offset:16}]),_e=o(W),me=a(W,[{buffer:_e,size:2,type:W.FLOAT}]),we=l(W,1,256,W.RGBA,W.UNSIGNED_BYTE);we.minFilter=W.LINEAR,we.magFilter=W.LINEAR;var De=new F(W,[0,0],[[0,0,0],[0,0,0]],ae,G,le,ue,we,te,ne,pe,de,_e,me,[0,0,0]),Le={levels:[[],[],[]]};for(var Ie in U)Le[Ie]=U[Ie];return Le.colormap=Le.colormap||"jet",De.update(Le),De};var e=x("bit-twiddle"),o=x("gl-buffer"),a=x("gl-vao"),l=x("gl-texture2d"),i=x("typedarray-pool"),v=x("colormap"),h=x("ndarray-ops"),s=x("ndarray-pack"),d=x("ndarray"),p=x("surface-nets"),f=x("gl-mat4/multiply"),g=x("gl-mat4/invert"),m=x("binary-search-bounds"),u=x("ndarray-gradient"),w=x("./lib/shaders"),c=w.createShader,A=w.createContourShader,k=w.createPickShader,C=w.createPickContourShader,E=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],D=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function N(U,W,ae,G,te){this.position=U,this.index=W,this.uv=ae,this.level=G,this.dataCoordinate=te}function F(U,W,ae,G,te,ne,le,ue,pe,de,_e,me,we,De,Le){this.gl=U,this.shape=W,this.bounds=ae,this.objectOffset=Le,this.intensityBounds=[],this._shader=G,this._pickShader=te,this._coordinateBuffer=ne,this._vao=le,this._colorMap=ue,this._contourShader=pe,this._contourPickShader=de,this._contourBuffer=_e,this._contourVAO=me,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new N([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=we,this._dynamicVAO=De,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[d(i.mallocFloat(1024),[0,0]),d(i.mallocFloat(1024),[0,0]),d(i.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var U=0;U<3;++U){var W=D[U],ae=(U+2)%3;W[(U+1)%3+0]=1,W[ae+3]=1,W[U+6]=1}}();var I=F.prototype;I.genColormap=function(U,W){var ae=!1,G=s([v({colormap:U,nshades:256,format:"rgba"}).map(function(te,ne){var le=W?function(ue,pe){if(!pe||!pe.length)return 1;for(var de=0;de<pe.length;++de){if(pe.length<2)return 1;if(pe[de][0]===ue)return pe[de][1];if(pe[de][0]>ue&&de>0){var _e=(pe[de][0]-ue)/(pe[de][0]-pe[de-1][0]);return pe[de][1]*(1-_e)+_e*pe[de-1][1]}}return 1}(ne/255,W):te[3];return le<1&&(ae=!0),[te[0],te[1],te[2],255*le]})]);return h.divseq(G,255),this.hasAlphaScale=ae,G},I.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},I.isOpaque=function(){return!this.isTransparent()},I.pickSlots=1,I.setPickBase=function(U){this.pickId=U};var P=[0,0,0],j={showSurface:!1,showContour:!1,projections:[E.slice(),E.slice(),E.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function V(U,W){var ae,G,te,ne=W.axes&&W.axes.lastCubeProps.axis||P,le=W.showSurface,ue=W.showContour;for(ae=0;ae<3;++ae)for(le=le||W.surfaceProject[ae],G=0;G<3;++G)ue=ue||W.contourProject[ae][G];for(ae=0;ae<3;++ae){var pe=j.projections[ae];for(G=0;G<16;++G)pe[G]=0;for(G=0;G<4;++G)pe[5*G]=1;pe[5*ae]=0,pe[12+ae]=W.axesBounds[+(ne[ae]>0)][ae],f(pe,U.model,pe);var de=j.clipBounds[ae];for(te=0;te<2;++te)for(G=0;G<3;++G)de[te][G]=U.clipBounds[te][G];de[0][ae]=-1e8,de[1][ae]=1e8}return j.showSurface=le,j.showContour=ue,j}var Z={model:E,view:E,projection:E,inverseModel:E.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},Y=E.slice(),ee=[1,0,0,0,1,0,0,0,1];function re(U,W){U=U||{};var ae=this.gl;ae.disable(ae.CULL_FACE),this._colorMap.bind(0);var G=Z;G.model=U.model||E,G.view=U.view||E,G.projection=U.projection||E,G.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],G.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],G.objectOffset=this.objectOffset,G.contourColor=this.contourColor[0],G.inverseModel=g(G.inverseModel,G.model);for(var te=0;te<2;++te)for(var ne=G.clipBounds[te],le=0;le<3;++le)ne[le]=Math.min(Math.max(this.clipBounds[te][le],-1e8),1e8);G.kambient=this.ambientLight,G.kdiffuse=this.diffuseLight,G.kspecular=this.specularLight,G.roughness=this.roughness,G.fresnel=this.fresnel,G.opacity=this.opacity,G.height=0,G.permutation=ee,G.vertexColor=this.vertexColor;var ue=Y;for(f(ue,G.view,G.model),f(ue,G.projection,ue),g(ue,ue),te=0;te<3;++te)G.eyePosition[te]=ue[12+te]/ue[15];var pe=ue[15];for(te=0;te<3;++te)pe+=this.lightPosition[te]*ue[4*te+3];for(te=0;te<3;++te){var de=ue[12+te];for(le=0;le<3;++le)de+=ue[4*le+te]*this.lightPosition[le];G.lightPosition[te]=de/pe}var _e=V(G,this);if(_e.showSurface){for(this._shader.bind(),this._shader.uniforms=G,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ae.TRIANGLES,this._vertexCount),te=0;te<3;++te)this.surfaceProject[te]&&this.vertexCount&&(this._shader.uniforms.model=_e.projections[te],this._shader.uniforms.clipBounds=_e.clipBounds[te],this._vao.draw(ae.TRIANGLES,this._vertexCount));this._vao.unbind()}if(_e.showContour){var me=this._contourShader;G.kambient=1,G.kdiffuse=0,G.kspecular=0,G.opacity=1,me.bind(),me.uniforms=G;var we=this._contourVAO;for(we.bind(),te=0;te<3;++te)for(me.uniforms.permutation=D[te],ae.lineWidth(this.contourWidth[te]*this.pixelRatio),le=0;le<this.contourLevels[te].length;++le)le===this.highlightLevel[te]?(me.uniforms.contourColor=this.highlightColor[te],me.uniforms.contourTint=this.highlightTint[te]):0!==le&&le-1!==this.highlightLevel[te]||(me.uniforms.contourColor=this.contourColor[te],me.uniforms.contourTint=this.contourTint[te]),this._contourCounts[te][le]&&(me.uniforms.height=this.contourLevels[te][le],we.draw(ae.LINES,this._contourCounts[te][le],this._contourOffsets[te][le]));for(te=0;te<3;++te)for(me.uniforms.model=_e.projections[te],me.uniforms.clipBounds=_e.clipBounds[te],le=0;le<3;++le)if(this.contourProject[te][le]){me.uniforms.permutation=D[le],ae.lineWidth(this.contourWidth[le]*this.pixelRatio);for(var De=0;De<this.contourLevels[le].length;++De)De===this.highlightLevel[le]?(me.uniforms.contourColor=this.highlightColor[le],me.uniforms.contourTint=this.highlightTint[le]):0!==De&&De-1!==this.highlightLevel[le]||(me.uniforms.contourColor=this.contourColor[le],me.uniforms.contourTint=this.contourTint[le]),this._contourCounts[le][De]&&(me.uniforms.height=this.contourLevels[le][De],we.draw(ae.LINES,this._contourCounts[le][De],this._contourOffsets[le][De]))}for(we.unbind(),(we=this._dynamicVAO).bind(),te=0;te<3;++te)if(0!==this._dynamicCounts[te])for(me.uniforms.model=G.model,me.uniforms.clipBounds=G.clipBounds,me.uniforms.permutation=D[te],ae.lineWidth(this.dynamicWidth[te]*this.pixelRatio),me.uniforms.contourColor=this.dynamicColor[te],me.uniforms.contourTint=this.dynamicTint[te],me.uniforms.height=this.dynamicLevel[te],we.draw(ae.LINES,this._dynamicCounts[te],this._dynamicOffsets[te]),le=0;le<3;++le)this.contourProject[le][te]&&(me.uniforms.model=_e.projections[le],me.uniforms.clipBounds=_e.clipBounds[le],we.draw(ae.LINES,this._dynamicCounts[te],this._dynamicOffsets[te]));we.unbind()}}I.draw=function(U){return re.call(this,U,!1)},I.drawTransparent=function(U){return re.call(this,U,!0)};var X={model:E,view:E,projection:E,inverseModel:E,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function K(U,W){return Array.isArray(U)?[W(U[0]),W(U[1]),W(U[2])]:[W(U),W(U),W(U)]}function ie(U){return Array.isArray(U)?3===U.length?[U[0],U[1],U[2],1]:[U[0],U[1],U[2],U[3]]:[0,0,0,1]}function q(U){if(Array.isArray(U)){if(Array.isArray(U))return[ie(U[0]),ie(U[1]),ie(U[2])];var W=ie(U);return[W.slice(),W.slice(),W.slice()]}}I.drawPick=function(U){U=U||{};var W=this.gl;W.disable(W.CULL_FACE);var ae=X;ae.model=U.model||E,ae.view=U.view||E,ae.projection=U.projection||E,ae.shape=this._field[2].shape,ae.pickId=this.pickId/255,ae.lowerBound=this.bounds[0],ae.upperBound=this.bounds[1],ae.objectOffset=this.objectOffset,ae.permutation=ee;for(var G=0;G<2;++G)for(var te=ae.clipBounds[G],ne=0;ne<3;++ne)te[ne]=Math.min(Math.max(this.clipBounds[G][ne],-1e8),1e8);var le=V(ae,this);if(le.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ae,this._vao.bind(),this._vao.draw(W.TRIANGLES,this._vertexCount),G=0;G<3;++G)this.surfaceProject[G]&&(this._pickShader.uniforms.model=le.projections[G],this._pickShader.uniforms.clipBounds=le.clipBounds[G],this._vao.draw(W.TRIANGLES,this._vertexCount));this._vao.unbind()}if(le.showContour){var ue=this._contourPickShader;ue.bind(),ue.uniforms=ae;var pe=this._contourVAO;for(pe.bind(),ne=0;ne<3;++ne)for(W.lineWidth(this.contourWidth[ne]*this.pixelRatio),ue.uniforms.permutation=D[ne],G=0;G<this.contourLevels[ne].length;++G)this._contourCounts[ne][G]&&(ue.uniforms.height=this.contourLevels[ne][G],pe.draw(W.LINES,this._contourCounts[ne][G],this._contourOffsets[ne][G]));for(G=0;G<3;++G)for(ue.uniforms.model=le.projections[G],ue.uniforms.clipBounds=le.clipBounds[G],ne=0;ne<3;++ne)if(this.contourProject[G][ne]){ue.uniforms.permutation=D[ne],W.lineWidth(this.contourWidth[ne]*this.pixelRatio);for(var de=0;de<this.contourLevels[ne].length;++de)this._contourCounts[ne][de]&&(ue.uniforms.height=this.contourLevels[ne][de],pe.draw(W.LINES,this._contourCounts[ne][de],this._contourOffsets[ne][de]))}pe.unbind()}},I.pick=function(U){if(!U||U.id!==this.pickId)return null;var W=this._field[2].shape,ae=this._pickResult,G=W[0]*(U.value[0]+(U.value[2]>>4)/16)/255,te=Math.floor(G),ne=G-te,le=W[1]*(U.value[1]+(15&U.value[2])/16)/255,ue=Math.floor(le),pe=le-ue;te+=1,ue+=1;var de=ae.position;de[0]=de[1]=de[2]=0;for(var _e=0;_e<2;++_e)for(var me=_e?ne:1-ne,we=0;we<2;++we)for(var De=te+_e,Le=ue+we,Ie=me*(we?pe:1-pe),je=0;je<3;++je)de[je]+=this._field[je].get(De,Le)*Ie;for(var ye=this._pickResult.level,Me=0;Me<3;++Me)if(ye[Me]=m.le(this.contourLevels[Me],de[Me]),ye[Me]<0)this.contourLevels[Me].length>0&&(ye[Me]=0);else if(ye[Me]<this.contourLevels[Me].length-1){var Pe=this.contourLevels[Me][ye[Me]+1];Math.abs(this.contourLevels[Me][ye[Me]]-de[Me])>Math.abs(Pe-de[Me])&&(ye[Me]+=1)}for(ae.index[0]=ne<.5?te:te+1,ae.index[1]=pe<.5?ue:ue+1,ae.uv[0]=G/W[0],ae.uv[1]=le/W[1],je=0;je<3;++je)ae.dataCoordinate[je]=this._field[je].get(ae.index[0],ae.index[1]);return ae},I.padField=function(U,W){var ae=W.shape.slice(),G=U.shape.slice();h.assign(U.lo(1,1).hi(ae[0],ae[1]),W),h.assign(U.lo(1).hi(ae[0],1),W.hi(ae[0],1)),h.assign(U.lo(1,G[1]-1).hi(ae[0],1),W.lo(0,ae[1]-1).hi(ae[0],1)),h.assign(U.lo(0,1).hi(1,ae[1]),W.hi(1)),h.assign(U.lo(G[0]-1,1).hi(1,ae[1]),W.lo(ae[0]-1)),U.set(0,0,W.get(0,0)),U.set(0,G[1]-1,W.get(0,ae[1]-1)),U.set(G[0]-1,0,W.get(ae[0]-1,0)),U.set(G[0]-1,G[1]-1,W.get(ae[0]-1,ae[1]-1))},I.update=function(U){this.objectOffset=(U=U||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in U&&(this.contourWidth=K(U.contourWidth,Number)),"showContour"in U&&(this.showContour=K(U.showContour,Boolean)),"showSurface"in U&&(this.showSurface=!!U.showSurface),"contourTint"in U&&(this.contourTint=K(U.contourTint,Boolean)),"contourColor"in U&&(this.contourColor=q(U.contourColor)),"contourProject"in U&&(this.contourProject=K(U.contourProject,function(fn){return K(fn,Boolean)})),"surfaceProject"in U&&(this.surfaceProject=U.surfaceProject),"dynamicColor"in U&&(this.dynamicColor=q(U.dynamicColor)),"dynamicTint"in U&&(this.dynamicTint=K(U.dynamicTint,Number)),"dynamicWidth"in U&&(this.dynamicWidth=K(U.dynamicWidth,Number)),"opacity"in U&&(this.opacity=U.opacity),"opacityscale"in U&&(this.opacityscale=U.opacityscale),"colorBounds"in U&&(this.colorBounds=U.colorBounds),"vertexColor"in U&&(this.vertexColor=U.vertexColor?1:0),"colormap"in U&&this._colorMap.setPixels(this.genColormap(U.colormap,this.opacityscale));var W=U.field||U.coords&&U.coords[2]||null,ae=!1;if(W||(W=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in U||"coords"in U){var G=(W.shape[0]+2)*(W.shape[1]+2);G>this._field[2].data.length&&(i.freeFloat(this._field[2].data),this._field[2].data=i.mallocFloat(e.nextPow2(G))),this._field[2]=d(this._field[2].data,[W.shape[0]+2,W.shape[1]+2]),this.padField(this._field[2],W),this.shape=W.shape.slice();for(var te=this.shape,ne=0;ne<2;++ne)this._field[2].size>this._field[ne].data.length&&(i.freeFloat(this._field[ne].data),this._field[ne].data=i.mallocFloat(this._field[2].size)),this._field[ne]=d(this._field[ne].data,[te[0]+2,te[1]+2]);if(U.coords){var le=U.coords;if(!Array.isArray(le)||3!==le.length)throw new Error("gl-surface: invalid coordinates for x/y");for(ne=0;ne<2;++ne){var ue=le[ne];for(we=0;we<2;++we)if(ue.shape[we]!==te[we])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[ne],ue)}}else if(U.ticks){var pe=U.ticks;if(!Array.isArray(pe)||2!==pe.length)throw new Error("gl-surface: invalid ticks");for(ne=0;ne<2;++ne){var de=pe[ne];if((Array.isArray(de)||de.length)&&(de=d(de)),de.shape[0]!==te[ne])throw new Error("gl-surface: invalid tick length");var _e=d(de.data,te);_e.stride[ne]=de.stride[0],_e.stride[1^ne]=0,this.padField(this._field[ne],_e)}}else{for(ne=0;ne<2;++ne){var me=[0,0];me[ne]=1,this._field[ne]=d(this._field[ne].data,[te[0]+2,te[1]+2],me,0)}this._field[0].set(0,0,0);for(var we=0;we<te[0];++we)this._field[0].set(we+1,0,we);for(this._field[0].set(te[0]+1,0,te[0]-1),this._field[1].set(0,0,0),we=0;we<te[1];++we)this._field[1].set(0,we+1,we);this._field[1].set(0,te[1]+1,te[1]-1)}var De=this._field,Le=d(i.mallocFloat(3*De[2].size*2),[3,te[0]+2,te[1]+2,2]);for(ne=0;ne<3;++ne)u(Le.pick(ne),De[ne],"mirror");var Ie=d(i.mallocFloat(3*De[2].size),[te[0]+2,te[1]+2,3]);for(ne=0;ne<te[0]+2;++ne)for(we=0;we<te[1]+2;++we){var je=Le.get(0,ne,we,0),ye=Le.get(0,ne,we,1),Me=Le.get(1,ne,we,0),Oe=Le.get(1,ne,we,1),Pe=Le.get(2,ne,we,0),Re=Le.get(2,ne,we,1),Ue=Me*Re-Oe*Pe,qe=Pe*ye-Re*je,Xe=je*Oe-ye*Me,lt=Math.sqrt(Ue*Ue+qe*qe+Xe*Xe);lt<1e-8?(lt=Math.max(Math.abs(Ue),Math.abs(qe),Math.abs(Xe)))<1e-8?(Xe=1,qe=Ue=0,lt=1):lt=1/lt:lt=1/Math.sqrt(lt),Ie.set(ne,we,0,Ue*lt),Ie.set(ne,we,1,qe*lt),Ie.set(ne,we,2,Xe*lt)}i.free(Le.data);var He=[1/0,1/0,1/0],$e=[-1/0,-1/0,-1/0],et=1/0,nt=-1/0,bt=i.mallocFloat(e.nextPow2((te[0]-1)*(te[1]-1)*6*10)),kt=0,Bt=0;for(ne=0;ne<te[0]-1;++ne)e:for(we=0;we<te[1]-1;++we){for(var Et=0;Et<2;++Et)for(var ht=0;ht<2;++ht)for(var at=0;at<3;++at){var Ft=this._field[at].get(1+ne+Et,1+we+ht);if(isNaN(Ft)||!isFinite(Ft))continue e}for(at=0;at<6;++at){var en=ne+L[at][0],Qt=we+L[at][1],tn=this._field[0].get(en+1,Qt+1),dn=this._field[1].get(en+1,Qt+1);Ft=this._field[2].get(en+1,Qt+1),Ue=Ie.get(en+1,Qt+1,0),qe=Ie.get(en+1,Qt+1,1),Xe=Ie.get(en+1,Qt+1,2),U.intensity&&(Mn=U.intensity.get(en,Qt));var Mn=U.intensity?U.intensity.get(en,Qt):Ft+this.objectOffset[2];bt[kt++]=en,bt[kt++]=Qt,bt[kt++]=tn,bt[kt++]=dn,bt[kt++]=Ft,bt[kt++]=0,bt[kt++]=Mn,bt[kt++]=Ue,bt[kt++]=qe,bt[kt++]=Xe,He[0]=Math.min(He[0],tn+this.objectOffset[0]),He[1]=Math.min(He[1],dn+this.objectOffset[1]),He[2]=Math.min(He[2],Ft+this.objectOffset[2]),et=Math.min(et,Mn),$e[0]=Math.max($e[0],tn+this.objectOffset[0]),$e[1]=Math.max($e[1],dn+this.objectOffset[1]),$e[2]=Math.max($e[2],Ft+this.objectOffset[2]),nt=Math.max(nt,Mn),Bt+=1}}for(U.intensityBounds&&(et=+U.intensityBounds[0],nt=+U.intensityBounds[1]),ne=6;ne<kt;ne+=10)bt[ne]=(bt[ne]-et)/(nt-et);this._vertexCount=Bt,this._coordinateBuffer.update(bt.subarray(0,kt)),i.freeFloat(bt),i.free(Ie.data),this.bounds=[He,$e],this.intensity=U.intensity||this._field[2],this.intensityBounds[0]===et&&this.intensityBounds[1]===nt||(ae=!0),this.intensityBounds=[et,nt]}if("levels"in U){var sn=U.levels;for(sn=Array.isArray(sn[0])?sn.slice():[[],[],sn],ne=0;ne<3;++ne)sn[ne]=sn[ne].slice(),sn[ne].sort(function(fn,nn){return fn-nn});for(ne=0;ne<3;++ne)for(we=0;we<sn[ne].length;++we)sn[ne][we]-=this.objectOffset[ne];e:for(ne=0;ne<3;++ne){if(sn[ne].length!==this.contourLevels[ne].length){ae=!0;break}for(we=0;we<sn[ne].length;++we)if(sn[ne][we]!==this.contourLevels[ne][we]){ae=!0;break e}}this.contourLevels=sn}if(ae){De=this._field,te=this.shape;for(var ke=[],Se=0;Se<3;++Se){var Ce=this.contourLevels[Se],Ve=[],Ge=[],Qe=[0,0,0];for(ne=0;ne<Ce.length;++ne){var ot=p(this._field[Se],Ce[ne]);Ve.push(ke.length/5|0),Bt=0;e:for(we=0;we<ot.cells.length;++we){var it=ot.cells[we];for(at=0;at<2;++at){var mt=ot.positions[it[at]],xt=mt[0],Vt=0|Math.floor(xt),$t=xt-Vt,pt=mt[1],At=0|Math.floor(pt),Xt=pt-At,Ct=!1;t:for(var Pt=0;Pt<3;++Pt){Qe[Pt]=0;var Be=(Se+Pt+1)%3;for(Et=0;Et<2;++Et){var tt=Et?$t:1-$t;for(en=0|Math.min(Math.max(Vt+Et,0),te[0]),ht=0;ht<2;++ht){var dt=ht?Xt:1-Xt;if(Qt=0|Math.min(Math.max(At+ht,0),te[1]),Ft=Pt<2?this._field[Be].get(en,Qt):(this.intensity.get(en,Qt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ft)||isNaN(Ft)){Ct=!0;break t}Qe[Pt]+=tt*dt*Ft}}}if(Ct){if(at>0){for(var Nt=0;Nt<5;++Nt)ke.pop();Bt-=1}continue e}ke.push(Qe[0],Qe[1],mt[0],mt[1],Qe[2]),Bt+=1}}Ge.push(Bt)}this._contourOffsets[Se]=Ve,this._contourCounts[Se]=Ge}var Yt=i.mallocFloat(ke.length);for(ne=0;ne<ke.length;++ne)Yt[ne]=ke[ne];this._contourBuffer.update(Yt),i.freeFloat(Yt)}},I.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var U=0;U<3;++U)i.freeFloat(this._field[U].data)},I.highlight=function(U){var W,ae;if(!U)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(W=0;W<3;++W)this.highlightLevel[W]=this.enableHighlight[W]?U.level[W]:-1;for(ae=this.snapToData?U.dataCoordinate:U.position,W=0;W<3;++W)ae[W]-=this.objectOffset[W];if(this.enableDynamic[0]&&ae[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ae[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ae[2]!==this.dynamicLevel[2]){for(var G=0,te=this.shape,ne=i.mallocFloat(12*te[0]*te[1]),le=0;le<3;++le)if(this.enableDynamic[le]){this.dynamicLevel[le]=ae[le];var _e=this._field[(le+1)%3],me=this._field[(le+2)%3],we=p(this._field[le],ae[le]),De=we.cells,Le=we.positions;for(this._dynamicOffsets[le]=G,W=0;W<De.length;++W)for(var Ie=De[W],je=0;je<2;++je){var ye=Le[Ie[je]],Me=+ye[0],Oe=0|Me,Pe=0|Math.min(Oe+1,te[0]),Re=Me-Oe,Ue=1-Re,qe=+ye[1],Xe=0|qe,lt=0|Math.min(Xe+1,te[1]),He=qe-Xe,$e=1-He,et=Ue*$e,nt=Ue*He,ct=Re*$e,bt=Re*He,kt=et*_e.get(Oe,Xe)+nt*_e.get(Oe,lt)+ct*_e.get(Pe,Xe)+bt*_e.get(Pe,lt),Bt=et*me.get(Oe,Xe)+nt*me.get(Oe,lt)+ct*me.get(Pe,Xe)+bt*me.get(Pe,lt);if(isNaN(kt)||isNaN(Bt)){je&&(G-=1);break}ne[2*G+0]=kt,ne[2*G+1]=Bt,G+=1}this._dynamicCounts[le]=G-this._dynamicOffsets[le]}else this.dynamicLevel[le]=NaN,this._dynamicCounts[le]=0;this._dynamicBuffer.update(ne.subarray(0,2*G)),i.freeFloat(ne)}}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(x,M,_){"use strict";var e=x("ndarray"),o=x("ndarray-ops"),a=x("typedarray-pool");M.exports=function(k){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(l||h(k),"number"==typeof arguments[1])return w(k,arguments[1],arguments[2],arguments[3]||k.RGBA,arguments[4]||k.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return w(k,0|arguments[1][0],0|arguments[1][1],arguments[2]||k.RGBA,arguments[3]||k.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var C=arguments[1],E=s(C)?C:C.raw;if(E)return c(k,E,0|C.width,0|C.height,arguments[2]||k.RGBA,arguments[3]||k.UNSIGNED_BYTE);if(C.shape&&C.data&&C.stride)return A(k,C)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var l=null,i=null,v=null;function h(k){l=[k.LINEAR,k.NEAREST_MIPMAP_LINEAR,k.LINEAR_MIPMAP_NEAREST,k.LINEAR_MIPMAP_NEAREST],i=[k.NEAREST,k.LINEAR,k.NEAREST_MIPMAP_NEAREST,k.NEAREST_MIPMAP_LINEAR,k.LINEAR_MIPMAP_NEAREST,k.LINEAR_MIPMAP_LINEAR],v=[k.REPEAT,k.CLAMP_TO_EDGE,k.MIRRORED_REPEAT]}function s(k){return"undefined"!=typeof HTMLCanvasElement&&k instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&k instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&k instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&k instanceof ImageData}var d=function(k,C){o.muls(k,C,255)};function p(k,C,E){var L=k.gl,D=L.getParameter(L.MAX_TEXTURE_SIZE);if(C<0||C>D||E<0||E>D)throw new Error("gl-texture2d: Invalid texture size");return k._shape=[C,E],k.bind(),L.texImage2D(L.TEXTURE_2D,0,k.format,C,E,0,k.format,k.type,null),k._mipLevels=[0],k}function f(k,C,E,L,D,N){this.gl=k,this.handle=C,this.format=D,this.type=N,this._shape=[E,L],this._mipLevels=[0],this._magFilter=k.NEAREST,this._minFilter=k.NEAREST,this._wrapS=k.CLAMP_TO_EDGE,this._wrapT=k.CLAMP_TO_EDGE,this._anisoSamples=1;var F=this,I=[this._wrapS,this._wrapT];Object.defineProperties(I,[{get:function(){return F._wrapS},set:function(j){return F.wrapS=j}},{get:function(){return F._wrapT},set:function(j){return F.wrapT=j}}]),this._wrapVector=I;var P=[this._shape[0],this._shape[1]];Object.defineProperties(P,[{get:function(){return F._shape[0]},set:function(j){return F.width=j}},{get:function(){return F._shape[1]},set:function(j){return F.height=j}}]),this._shapeVector=P}var g=f.prototype;function m(k,C){return 3===k.length?1===C[2]&&C[1]===k[0]*k[2]&&C[0]===k[2]:1===C[0]&&C[1]===k[0]}function u(k){var C=k.createTexture();return k.bindTexture(k.TEXTURE_2D,C),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,k.NEAREST),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,k.NEAREST),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_S,k.CLAMP_TO_EDGE),k.texParameteri(k.TEXTURE_2D,k.TEXTURE_WRAP_T,k.CLAMP_TO_EDGE),C}function w(k,C,E,L,D){var N=k.getParameter(k.MAX_TEXTURE_SIZE);if(C<0||C>N||E<0||E>N)throw new Error("gl-texture2d: Invalid texture shape");if(D===k.FLOAT&&!k.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var F=u(k);return k.texImage2D(k.TEXTURE_2D,0,L,C,E,0,L,D,null),new f(k,F,C,E,L,D)}function c(k,C,E,L,D,N){var F=u(k);return k.texImage2D(k.TEXTURE_2D,0,D,D,N,C),new f(k,F,E,L,D,N)}function A(k,C){var E=C.dtype,L=C.shape.slice(),D=k.getParameter(k.MAX_TEXTURE_SIZE);if(L[0]<0||L[0]>D||L[1]<0||L[1]>D)throw new Error("gl-texture2d: Invalid texture size");var N=m(L,C.stride.slice()),F=0;"float32"===E?F=k.FLOAT:"float64"===E?(F=k.FLOAT,N=!1,E="float32"):"uint8"===E?F=k.UNSIGNED_BYTE:(F=k.UNSIGNED_BYTE,N=!1,E="uint8");var I,P,j=0;if(2===L.length)j=k.LUMINANCE,C=e(C.data,L=[L[0],L[1],1],[C.stride[0],C.stride[1],1],C.offset);else{if(3!==L.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===L[2])j=k.ALPHA;else if(2===L[2])j=k.LUMINANCE_ALPHA;else if(3===L[2])j=k.RGB;else{if(4!==L[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");j=k.RGBA}}F!==k.FLOAT||k.getExtension("OES_texture_float")||(F=k.UNSIGNED_BYTE,N=!1);var V=C.size;if(N)I=0===C.offset&&C.data.length===V?C.data:C.data.subarray(C.offset,C.offset+V);else{var Z=[L[2],L[2]*L[0],1];P=a.malloc(V,E);var Y=e(P,L,Z,0);"float32"!==E&&"float64"!==E||F!==k.UNSIGNED_BYTE?o.assign(Y,C):d(Y,C),I=P.subarray(0,V)}var ee=u(k);return k.texImage2D(k.TEXTURE_2D,0,j,L[0],L[1],0,j,F,I),N||a.free(P),new f(k,ee,L[0],L[1],j,F)}Object.defineProperties(g,{minFilter:{get:function(){return this._minFilter},set:function(k){this.bind();var C=this.gl;if(this.type===C.FLOAT&&l.indexOf(k)>=0&&(C.getExtension("OES_texture_float_linear")||(k=C.NEAREST)),i.indexOf(k)<0)throw new Error("gl-texture2d: Unknown filter mode "+k);return C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,k),this._minFilter=k}},magFilter:{get:function(){return this._magFilter},set:function(k){this.bind();var C=this.gl;if(this.type===C.FLOAT&&l.indexOf(k)>=0&&(C.getExtension("OES_texture_float_linear")||(k=C.NEAREST)),i.indexOf(k)<0)throw new Error("gl-texture2d: Unknown filter mode "+k);return C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,k),this._magFilter=k}},mipSamples:{get:function(){return this._anisoSamples},set:function(k){var C=this._anisoSamples;if(this._anisoSamples=0|Math.max(k,1),C!==this._anisoSamples){var E=this.gl.getExtension("EXT_texture_filter_anisotropic");E&&this.gl.texParameterf(this.gl.TEXTURE_2D,E.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(k){if(this.bind(),v.indexOf(k)<0)throw new Error("gl-texture2d: Unknown wrap mode "+k);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,k),this._wrapS=k}},wrapT:{get:function(){return this._wrapT},set:function(k){if(this.bind(),v.indexOf(k)<0)throw new Error("gl-texture2d: Unknown wrap mode "+k);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,k),this._wrapT=k}},wrap:{get:function(){return this._wrapVector},set:function(k){if(Array.isArray(k)||(k=[k,k]),2!==k.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var C=0;C<2;++C)if(v.indexOf(k[C])<0)throw new Error("gl-texture2d: Unknown wrap mode "+k);this._wrapS=k[0],this._wrapT=k[1];var E=this.gl;return this.bind(),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,this._wrapS),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,this._wrapT),k}},shape:{get:function(){return this._shapeVector},set:function(k){if(Array.isArray(k)){if(2!==k.length)throw new Error("gl-texture2d: Invalid texture shape")}else k=[0|k,0|k];return p(this,0|k[0],0|k[1]),[0|k[0],0|k[1]]}},width:{get:function(){return this._shape[0]},set:function(k){return p(this,k|=0,this._shape[1]),k}},height:{get:function(){return this._shape[1]},set:function(k){return p(this,this._shape[0],k|=0),k}}}),g.bind=function(k){var C=this.gl;return void 0!==k&&C.activeTexture(C.TEXTURE0+(0|k)),C.bindTexture(C.TEXTURE_2D,this.handle),void 0!==k?0|k:C.getParameter(C.ACTIVE_TEXTURE)-C.TEXTURE0},g.dispose=function(){this.gl.deleteTexture(this.handle)},g.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var k=Math.min(this._shape[0],this._shape[1]),C=0;k>0;++C,k>>>=1)this._mipLevels.indexOf(C)<0&&this._mipLevels.push(C)},g.setPixels=function(k,C,E,L){var D=this.gl;this.bind(),Array.isArray(C)?(L=E,E=0|C[1],C=0|C[0]):(C=C||0,E=E||0),L=L||0;var N=s(k)?k:k.raw;if(N)this._mipLevels.indexOf(L)<0?(D.texImage2D(D.TEXTURE_2D,0,this.format,this.format,this.type,N),this._mipLevels.push(L)):D.texSubImage2D(D.TEXTURE_2D,L,C,E,this.format,this.type,N);else{if(!(k.shape&&k.stride&&k.data))throw new Error("gl-texture2d: Unsupported data type");if(k.shape.length<2||C+k.shape[1]>this._shape[1]>>>L||E+k.shape[0]>this._shape[0]>>>L||C<0||E<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(F,I,P,j,V,Z,Y,ee){var re=ee.dtype,X=ee.shape.slice();if(X.length<2||X.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var K=0,ie=0,q=m(X,ee.stride.slice());if("float32"===re?K=F.FLOAT:"float64"===re?(K=F.FLOAT,q=!1,re="float32"):"uint8"===re?K=F.UNSIGNED_BYTE:(K=F.UNSIGNED_BYTE,q=!1,re="uint8"),2===X.length)ie=F.LUMINANCE,ee=e(ee.data,X=[X[0],X[1],1],[ee.stride[0],ee.stride[1],1],ee.offset);else{if(3!==X.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===X[2])ie=F.ALPHA;else if(2===X[2])ie=F.LUMINANCE_ALPHA;else if(3===X[2])ie=F.RGB;else{if(4!==X[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");ie=F.RGBA}}if(ie!==F.LUMINANCE&&ie!==F.ALPHA||V!==F.LUMINANCE&&V!==F.ALPHA||(ie=V),ie!==V)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var U=ee.size,W=Y.indexOf(j)<0;if(W&&Y.push(j),K===Z&&q)0===ee.offset&&ee.data.length===U?W?F.texImage2D(F.TEXTURE_2D,j,V,X[0],X[1],0,V,Z,ee.data):F.texSubImage2D(F.TEXTURE_2D,j,I,P,X[0],X[1],V,Z,ee.data):W?F.texImage2D(F.TEXTURE_2D,j,V,X[0],X[1],0,V,Z,ee.data.subarray(ee.offset,ee.offset+U)):F.texSubImage2D(F.TEXTURE_2D,j,I,P,X[0],X[1],V,Z,ee.data.subarray(ee.offset,ee.offset+U));else{var ae;ae=Z===F.FLOAT?a.mallocFloat32(U):a.mallocUint8(U);var G=e(ae,X,[X[2],X[2]*X[0],1]);K===F.FLOAT&&Z===F.UNSIGNED_BYTE?d(G,ee):o.assign(G,ee),W?F.texImage2D(F.TEXTURE_2D,j,V,X[0],X[1],0,V,Z,ae.subarray(0,U)):F.texSubImage2D(F.TEXTURE_2D,j,I,P,X[0],X[1],V,Z,ae.subarray(0,U)),Z===F.FLOAT?a.freeFloat32(ae):a.freeUint8(ae)}}(D,C,E,L,this.format,this.type,this._mipLevels,k)}}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(x,M,_){"use strict";M.exports=function(e,o,a){o?o.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var l=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(a){if(a.length>l)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<a.length;++i){var v=a[i];if(v.buffer){var s=v.size||4,d=v.type||e.FLOAT,p=!!v.normalized,f=v.stride||0,g=v.offset||0;v.buffer.bind(),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,s,d,p,f,g)}else{if("number"==typeof v)e.vertexAttrib1f(i,v);else if(1===v.length)e.vertexAttrib1f(i,v[0]);else if(2===v.length)e.vertexAttrib2f(i,v[0],v[1]);else if(3===v.length)e.vertexAttrib3f(i,v[0],v[1],v[2]);else{if(4!==v.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(i,v[0],v[1],v[2],v[3])}e.disableVertexAttribArray(i)}}for(;i<l;++i)e.disableVertexAttribArray(i)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),i=0;i<l;++i)e.disableVertexAttribArray(i)}},{}],148:[function(x,M,_){"use strict";var e=x("./do-bind.js");function o(a){this.gl=a,this._elements=null,this._attributes=null,this._elementsType=a.UNSIGNED_SHORT}o.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},o.prototype.update=function(a,l,i){this._elements=l,this._attributes=a,this._elementsType=i||this.gl.UNSIGNED_SHORT},o.prototype.dispose=function(){},o.prototype.unbind=function(){},o.prototype.draw=function(a,l,i){i=i||0;var v=this.gl;this._elements?v.drawElements(a,l,this._elementsType,i):v.drawArrays(a,i,l)},M.exports=function(a){return new o(a)}},{"./do-bind.js":147}],149:[function(x,M,_){"use strict";var e=x("./do-bind.js");function o(l,i,v,h,s,d){this.location=l,this.dimension=i,this.a=v,this.b=h,this.c=s,this.d=d}function a(l,i,v){this.gl=l,this._ext=i,this.handle=v,this._attribs=[],this._useElements=!1,this._elementsType=l.UNSIGNED_SHORT}o.prototype.bind=function(l){switch(this.dimension){case 1:l.vertexAttrib1f(this.location,this.a);break;case 2:l.vertexAttrib2f(this.location,this.a,this.b);break;case 3:l.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:l.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var l=0;l<this._attribs.length;++l)this._attribs[l].bind(this.gl)},a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},a.prototype.update=function(l,i,v){if(this.bind(),e(this.gl,i,l),this.unbind(),this._attribs.length=0,l)for(var h=0;h<l.length;++h){var s=l[h];"number"==typeof s?this._attribs.push(new o(h,1,s)):Array.isArray(s)&&this._attribs.push(new o(h,s.length,s[0],s[1],s[2],s[3]))}this._useElements=!!i,this._elementsType=v||this.gl.UNSIGNED_SHORT},a.prototype.draw=function(l,i,v){v=v||0;var h=this.gl;this._useElements?h.drawElements(l,i,this._elementsType,v):h.drawArrays(l,v,i)},M.exports=function(l,i){return new a(l,i,i.createVertexArrayOES())}},{"./do-bind.js":147}],150:[function(x,M,_){"use strict";var e=x("./lib/vao-native.js"),o=x("./lib/vao-emulated.js");function a(l){this.bindVertexArrayOES=l.bindVertexArray.bind(l),this.createVertexArrayOES=l.createVertexArray.bind(l),this.deleteVertexArrayOES=l.deleteVertexArray.bind(l)}M.exports=function(l,i,v,h){var s,d=l.createVertexArray?new a(l):l.getExtension("OES_vertex_array_object");return(s=d?e(l,d):o(l)).update(i,v,h),s}},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(x,M,_){M.exports=function(e,o,a){return e[0]=o[0]+a[0],e[1]=o[1]+a[1],e[2]=o[2]+a[2],e}},{}],152:[function(x,M,_){M.exports=function(l,i){var v=e(l[0],l[1],l[2]),h=e(i[0],i[1],i[2]);o(v,v),o(h,h);var s=a(v,h);return s>1?0:Math.acos(s)};var e=x("./fromValues"),o=x("./normalize"),a=x("./dot")},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(x,M,_){M.exports=function(e,o){return e[0]=Math.ceil(o[0]),e[1]=Math.ceil(o[1]),e[2]=Math.ceil(o[2]),e}},{}],154:[function(x,M,_){M.exports=function(e){var o=new Float32Array(3);return o[0]=e[0],o[1]=e[1],o[2]=e[2],o}},{}],155:[function(x,M,_){M.exports=function(e,o){return e[0]=o[0],e[1]=o[1],e[2]=o[2],e}},{}],156:[function(x,M,_){M.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],157:[function(x,M,_){M.exports=function(e,o,a){var l=o[0],i=o[1],v=o[2],h=a[0],s=a[1],d=a[2];return e[0]=i*d-v*s,e[1]=v*h-l*d,e[2]=l*s-i*h,e}},{}],158:[function(x,M,_){M.exports=x("./distance")},{"./distance":159}],159:[function(x,M,_){M.exports=function(e,o){var a=o[0]-e[0],l=o[1]-e[1],i=o[2]-e[2];return Math.sqrt(a*a+l*l+i*i)}},{}],160:[function(x,M,_){M.exports=x("./divide")},{"./divide":161}],161:[function(x,M,_){M.exports=function(e,o,a){return e[0]=o[0]/a[0],e[1]=o[1]/a[1],e[2]=o[2]/a[2],e}},{}],162:[function(x,M,_){M.exports=function(e,o){return e[0]*o[0]+e[1]*o[1]+e[2]*o[2]}},{}],163:[function(x,M,_){M.exports=1e-6},{}],164:[function(x,M,_){M.exports=function(o,a){var l=o[0],i=o[1],v=o[2],h=a[0],s=a[1],d=a[2];return Math.abs(l-h)<=e*Math.max(1,Math.abs(l),Math.abs(h))&&Math.abs(i-s)<=e*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(v-d)<=e*Math.max(1,Math.abs(v),Math.abs(d))};var e=x("./epsilon")},{"./epsilon":163}],165:[function(x,M,_){M.exports=function(e,o){return e[0]===o[0]&&e[1]===o[1]&&e[2]===o[2]}},{}],166:[function(x,M,_){M.exports=function(e,o){return e[0]=Math.floor(o[0]),e[1]=Math.floor(o[1]),e[2]=Math.floor(o[2]),e}},{}],167:[function(x,M,_){M.exports=function(o,a,l,i,v,h){var s,d;for(a||(a=3),l||(l=0),d=i?Math.min(i*a+l,o.length):o.length,s=l;s<d;s+=a)e[0]=o[s],e[1]=o[s+1],e[2]=o[s+2],v(e,e,h),o[s]=e[0],o[s+1]=e[1],o[s+2]=e[2];return o};var e=x("./create")()},{"./create":156}],168:[function(x,M,_){M.exports=function(e,o,a){var l=new Float32Array(3);return l[0]=e,l[1]=o,l[2]=a,l}},{}],169:[function(x,M,_){M.exports={EPSILON:x("./epsilon"),create:x("./create"),clone:x("./clone"),angle:x("./angle"),fromValues:x("./fromValues"),copy:x("./copy"),set:x("./set"),equals:x("./equals"),exactEquals:x("./exactEquals"),add:x("./add"),subtract:x("./subtract"),sub:x("./sub"),multiply:x("./multiply"),mul:x("./mul"),divide:x("./divide"),div:x("./div"),min:x("./min"),max:x("./max"),floor:x("./floor"),ceil:x("./ceil"),round:x("./round"),scale:x("./scale"),scaleAndAdd:x("./scaleAndAdd"),distance:x("./distance"),dist:x("./dist"),squaredDistance:x("./squaredDistance"),sqrDist:x("./sqrDist"),length:x("./length"),len:x("./len"),squaredLength:x("./squaredLength"),sqrLen:x("./sqrLen"),negate:x("./negate"),inverse:x("./inverse"),normalize:x("./normalize"),dot:x("./dot"),cross:x("./cross"),lerp:x("./lerp"),random:x("./random"),transformMat4:x("./transformMat4"),transformMat3:x("./transformMat3"),transformQuat:x("./transformQuat"),rotateX:x("./rotateX"),rotateY:x("./rotateY"),rotateZ:x("./rotateZ"),forEach:x("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(x,M,_){M.exports=function(e,o){return e[0]=1/o[0],e[1]=1/o[1],e[2]=1/o[2],e}},{}],171:[function(x,M,_){M.exports=x("./length")},{"./length":172}],172:[function(x,M,_){M.exports=function(e){var o=e[0],a=e[1],l=e[2];return Math.sqrt(o*o+a*a+l*l)}},{}],173:[function(x,M,_){M.exports=function(e,o,a,l){var i=o[0],v=o[1],h=o[2];return e[0]=i+l*(a[0]-i),e[1]=v+l*(a[1]-v),e[2]=h+l*(a[2]-h),e}},{}],174:[function(x,M,_){M.exports=function(e,o,a){return e[0]=Math.max(o[0],a[0]),e[1]=Math.max(o[1],a[1]),e[2]=Math.max(o[2],a[2]),e}},{}],175:[function(x,M,_){M.exports=function(e,o,a){return e[0]=Math.min(o[0],a[0]),e[1]=Math.min(o[1],a[1]),e[2]=Math.min(o[2],a[2]),e}},{}],176:[function(x,M,_){M.exports=x("./multiply")},{"./multiply":177}],177:[function(x,M,_){M.exports=function(e,o,a){return e[0]=o[0]*a[0],e[1]=o[1]*a[1],e[2]=o[2]*a[2],e}},{}],178:[function(x,M,_){M.exports=function(e,o){return e[0]=-o[0],e[1]=-o[1],e[2]=-o[2],e}},{}],179:[function(x,M,_){M.exports=function(e,o){var a=o[0],l=o[1],i=o[2],v=a*a+l*l+i*i;return v>0&&(v=1/Math.sqrt(v),e[0]=o[0]*v,e[1]=o[1]*v,e[2]=o[2]*v),e}},{}],180:[function(x,M,_){M.exports=function(e,o){o=o||1;var a=2*Math.random()*Math.PI,l=2*Math.random()-1,i=Math.sqrt(1-l*l)*o;return e[0]=Math.cos(a)*i,e[1]=Math.sin(a)*i,e[2]=l*o,e}},{}],181:[function(x,M,_){M.exports=function(e,o,a,l){var i=a[1],v=a[2],h=o[1]-i,s=o[2]-v,d=Math.sin(l),p=Math.cos(l);return e[0]=o[0],e[1]=i+h*p-s*d,e[2]=v+h*d+s*p,e}},{}],182:[function(x,M,_){M.exports=function(e,o,a,l){var i=a[0],v=a[2],h=o[0]-i,s=o[2]-v,d=Math.sin(l),p=Math.cos(l);return e[0]=i+s*d+h*p,e[1]=o[1],e[2]=v+s*p-h*d,e}},{}],183:[function(x,M,_){M.exports=function(e,o,a,l){var i=a[0],v=a[1],h=o[0]-i,s=o[1]-v,d=Math.sin(l),p=Math.cos(l);return e[0]=i+h*p-s*d,e[1]=v+h*d+s*p,e[2]=o[2],e}},{}],184:[function(x,M,_){M.exports=function(e,o){return e[0]=Math.round(o[0]),e[1]=Math.round(o[1]),e[2]=Math.round(o[2]),e}},{}],185:[function(x,M,_){M.exports=function(e,o,a){return e[0]=o[0]*a,e[1]=o[1]*a,e[2]=o[2]*a,e}},{}],186:[function(x,M,_){M.exports=function(e,o,a,l){return e[0]=o[0]+a[0]*l,e[1]=o[1]+a[1]*l,e[2]=o[2]+a[2]*l,e}},{}],187:[function(x,M,_){M.exports=function(e,o,a,l){return e[0]=o,e[1]=a,e[2]=l,e}},{}],188:[function(x,M,_){M.exports=x("./squaredDistance")},{"./squaredDistance":190}],189:[function(x,M,_){M.exports=x("./squaredLength")},{"./squaredLength":191}],190:[function(x,M,_){M.exports=function(e,o){var a=o[0]-e[0],l=o[1]-e[1],i=o[2]-e[2];return a*a+l*l+i*i}},{}],191:[function(x,M,_){M.exports=function(e){var o=e[0],a=e[1],l=e[2];return o*o+a*a+l*l}},{}],192:[function(x,M,_){M.exports=x("./subtract")},{"./subtract":193}],193:[function(x,M,_){M.exports=function(e,o,a){return e[0]=o[0]-a[0],e[1]=o[1]-a[1],e[2]=o[2]-a[2],e}},{}],194:[function(x,M,_){M.exports=function(e,o,a){var l=o[0],i=o[1],v=o[2];return e[0]=l*a[0]+i*a[3]+v*a[6],e[1]=l*a[1]+i*a[4]+v*a[7],e[2]=l*a[2]+i*a[5]+v*a[8],e}},{}],195:[function(x,M,_){M.exports=function(e,o,a){var l=o[0],i=o[1],v=o[2],h=a[3]*l+a[7]*i+a[11]*v+a[15];return e[0]=(a[0]*l+a[4]*i+a[8]*v+a[12])/(h=h||1),e[1]=(a[1]*l+a[5]*i+a[9]*v+a[13])/h,e[2]=(a[2]*l+a[6]*i+a[10]*v+a[14])/h,e}},{}],196:[function(x,M,_){M.exports=function(e,o,a){var l=o[0],i=o[1],v=o[2],h=a[0],s=a[1],d=a[2],p=a[3],f=p*l+s*v-d*i,g=p*i+d*l-h*v,m=p*v+h*i-s*l,u=-h*l-s*i-d*v;return e[0]=f*p+u*-h+g*-d-m*-s,e[1]=g*p+u*-s+m*-h-f*-d,e[2]=m*p+u*-d+f*-s-g*-h,e}},{}],197:[function(x,M,_){M.exports=function(e,o,a){return e[0]=o[0]+a[0],e[1]=o[1]+a[1],e[2]=o[2]+a[2],e[3]=o[3]+a[3],e}},{}],198:[function(x,M,_){M.exports=function(e){var o=new Float32Array(4);return o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o}},{}],199:[function(x,M,_){M.exports=function(e,o){return e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],e}},{}],200:[function(x,M,_){M.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],201:[function(x,M,_){M.exports=function(e,o){var a=o[0]-e[0],l=o[1]-e[1],i=o[2]-e[2],v=o[3]-e[3];return Math.sqrt(a*a+l*l+i*i+v*v)}},{}],202:[function(x,M,_){M.exports=function(e,o,a){return e[0]=o[0]/a[0],e[1]=o[1]/a[1],e[2]=o[2]/a[2],e[3]=o[3]/a[3],e}},{}],203:[function(x,M,_){M.exports=function(e,o){return e[0]*o[0]+e[1]*o[1]+e[2]*o[2]+e[3]*o[3]}},{}],204:[function(x,M,_){M.exports=function(e,o,a,l){var i=new Float32Array(4);return i[0]=e,i[1]=o,i[2]=a,i[3]=l,i}},{}],205:[function(x,M,_){M.exports={create:x("./create"),clone:x("./clone"),fromValues:x("./fromValues"),copy:x("./copy"),set:x("./set"),add:x("./add"),subtract:x("./subtract"),multiply:x("./multiply"),divide:x("./divide"),min:x("./min"),max:x("./max"),scale:x("./scale"),scaleAndAdd:x("./scaleAndAdd"),distance:x("./distance"),squaredDistance:x("./squaredDistance"),length:x("./length"),squaredLength:x("./squaredLength"),negate:x("./negate"),inverse:x("./inverse"),normalize:x("./normalize"),dot:x("./dot"),lerp:x("./lerp"),random:x("./random"),transformMat4:x("./transformMat4"),transformQuat:x("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(x,M,_){M.exports=function(e,o){return e[0]=1/o[0],e[1]=1/o[1],e[2]=1/o[2],e[3]=1/o[3],e}},{}],207:[function(x,M,_){M.exports=function(e){var o=e[0],a=e[1],l=e[2],i=e[3];return Math.sqrt(o*o+a*a+l*l+i*i)}},{}],208:[function(x,M,_){M.exports=function(e,o,a,l){var i=o[0],v=o[1],h=o[2],s=o[3];return e[0]=i+l*(a[0]-i),e[1]=v+l*(a[1]-v),e[2]=h+l*(a[2]-h),e[3]=s+l*(a[3]-s),e}},{}],209:[function(x,M,_){M.exports=function(e,o,a){return e[0]=Math.max(o[0],a[0]),e[1]=Math.max(o[1],a[1]),e[2]=Math.max(o[2],a[2]),e[3]=Math.max(o[3],a[3]),e}},{}],210:[function(x,M,_){M.exports=function(e,o,a){return e[0]=Math.min(o[0],a[0]),e[1]=Math.min(o[1],a[1]),e[2]=Math.min(o[2],a[2]),e[3]=Math.min(o[3],a[3]),e}},{}],211:[function(x,M,_){M.exports=function(e,o,a){return e[0]=o[0]*a[0],e[1]=o[1]*a[1],e[2]=o[2]*a[2],e[3]=o[3]*a[3],e}},{}],212:[function(x,M,_){M.exports=function(e,o){return e[0]=-o[0],e[1]=-o[1],e[2]=-o[2],e[3]=-o[3],e}},{}],213:[function(x,M,_){M.exports=function(e,o){var a=o[0],l=o[1],i=o[2],v=o[3],h=a*a+l*l+i*i+v*v;return h>0&&(h=1/Math.sqrt(h),e[0]=a*h,e[1]=l*h,e[2]=i*h,e[3]=v*h),e}},{}],214:[function(x,M,_){var e=x("./normalize"),o=x("./scale");M.exports=function(a,l){return l=l||1,a[0]=Math.random(),a[1]=Math.random(),a[2]=Math.random(),a[3]=Math.random(),e(a,a),o(a,a,l),a}},{"./normalize":213,"./scale":215}],215:[function(x,M,_){M.exports=function(e,o,a){return e[0]=o[0]*a,e[1]=o[1]*a,e[2]=o[2]*a,e[3]=o[3]*a,e}},{}],216:[function(x,M,_){M.exports=function(e,o,a,l){return e[0]=o[0]+a[0]*l,e[1]=o[1]+a[1]*l,e[2]=o[2]+a[2]*l,e[3]=o[3]+a[3]*l,e}},{}],217:[function(x,M,_){M.exports=function(e,o,a,l,i){return e[0]=o,e[1]=a,e[2]=l,e[3]=i,e}},{}],218:[function(x,M,_){M.exports=function(e,o){var a=o[0]-e[0],l=o[1]-e[1],i=o[2]-e[2],v=o[3]-e[3];return a*a+l*l+i*i+v*v}},{}],219:[function(x,M,_){M.exports=function(e){var o=e[0],a=e[1],l=e[2],i=e[3];return o*o+a*a+l*l+i*i}},{}],220:[function(x,M,_){M.exports=function(e,o,a){return e[0]=o[0]-a[0],e[1]=o[1]-a[1],e[2]=o[2]-a[2],e[3]=o[3]-a[3],e}},{}],221:[function(x,M,_){M.exports=function(e,o,a){var l=o[0],i=o[1],v=o[2],h=o[3];return e[0]=a[0]*l+a[4]*i+a[8]*v+a[12]*h,e[1]=a[1]*l+a[5]*i+a[9]*v+a[13]*h,e[2]=a[2]*l+a[6]*i+a[10]*v+a[14]*h,e[3]=a[3]*l+a[7]*i+a[11]*v+a[15]*h,e}},{}],222:[function(x,M,_){M.exports=function(e,o,a){var l=o[0],i=o[1],v=o[2],h=a[0],s=a[1],d=a[2],p=a[3],f=p*l+s*v-d*i,g=p*i+d*l-h*v,m=p*v+h*i-s*l,u=-h*l-s*i-d*v;return e[0]=f*p+u*-h+g*-d-m*-s,e[1]=g*p+u*-s+m*-h-f*-d,e[2]=m*p+u*-d+f*-s-g*-h,e[3]=o[3],e}},{}],223:[function(x,M,_){var e=x("glsl-tokenizer"),o=x("atob-lite");M.exports=function(a){for(var l=Array.isArray(a)?a:e(a),i=0;i<l.length;i++){var v=l[i];if("preprocessor"===v.type){var h=v.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(h&&h[2]){var d=h[2];return(h[1]?o(d):d).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(x,M,_){M.exports=function(h){var s,d,p,f=0,g=0,m=999,u=[],w=[],c=1,A=0,k=0,C=!1,E=!1,L="",D=a,N=e;"300 es"===(h=h||{}).version&&(D=i,N=l);var F={},I={};for(f=0;f<D.length;f++)F[D[f]]=!0;for(f=0;f<N.length;f++)I[N[f]]=!0;return function(U){return w=[],null!==U?function(W){var ae;for(f=0,W.toString&&(W=W.toString()),L+=W.replace(/\r\n/g,"\n"),p=L.length;s=L[f],f<p;){switch(ae=f,m){case 0:f="/"===s&&"*"===d?(u.push(s),P(u.join("")),m=999,f+1):(u.push(s),d=s,f+1);break;case 1:case 2:f="\r"!==s&&"\n"!==s||"\\"===d?(u.push(s),d=s,f+1):(P(u.join("")),m=999,f);break;case 3:f=ee();break;case 4:f="."===s||/[eE]/.test(s)?(u.push(s),m=5,d=s,f+1):"x"===s&&1===u.length&&"0"===u[0]?(m=11,u.push(s),d=s,f+1):/[^\d]/.test(s)?(P(u.join("")),m=999,f):(u.push(s),d=s,f+1);break;case 11:f=/[^a-fA-F0-9]/.test(s)?(P(u.join("")),m=999,f):(u.push(s),d=s,f+1);break;case 5:"f"===s&&(u.push(s),d=s,f+=1),f=/[eE]/.test(s)?(u.push(s),d=s,f+1):("-"!==s&&"+"!==s||!/[eE]/.test(d))&&/[^\d]/.test(s)?(P(u.join("")),m=999,f):(u.push(s),d=s,f+1);break;case 9999:f=q();break;case 9:f=/[^\s]/g.test(s)?(P(u.join("")),m=999,f):(u.push(s),d=s,f+1);break;case 999:u=u.length?[]:u,f="/"===d&&"*"===s?(k=g+f-1,m=0,d=s,f+1):"/"===d&&"/"===s?(k=g+f-1,m=1,d=s,f+1):"#"===s?(m=2,k=g+f,f):/\s/.test(s)?(m=9,k=g+f,f):(C=/\d/.test(s),E=/[^\w_]/.test(s),k=g+f,m=C?4:E?3:9999,f)}if(ae!==f)switch(L[ae]){case"\n":A=0,++c;break;default:++A}}return g+=f,L=L.slice(f),w}(U):(u.length&&P(u.join("")),m=10,P("(eof)"),w)};function P(U){U.length&&w.push({type:v[m],data:U,position:k,line:c,column:A})}function ee(){if("."===d&&/\d/.test(s))return m=5,f;if("/"===d&&"*"===s)return m=0,f;if("/"===d&&"/"===s)return m=1,f;if("."===s&&u.length){for(;re(u););return m=5,f}if(";"===s||")"===s||"("===s){if(u.length)for(;re(u););return P(s),m=999,f+1}var U=2===u.length&&"="!==s;if(/[\w_\d\s]/.test(s)||U){for(;re(u););return m=999,f}return u.push(s),d=s,f+1}function re(U){for(var W,ae,G=0;;){if(W=o.indexOf(U.slice(0,U.length+G).join("")),ae=o[W],-1===W){if(G--+U.length>0)continue;ae=U.slice(0,1).join("")}return P(ae),k+=ae.length,(u=u.slice(ae.length)).length}}function q(){if(/[^\d\w_]/.test(s)){var U=u.join("");return m=I[U]?8:F[U]?7:6,P(u.join("")),m=999,f}return u.push(s),d=s,f+1}};var e=x("./lib/literals"),o=x("./lib/operators"),a=x("./lib/builtins"),l=x("./lib/literals-300es"),i=x("./lib/builtins-300es"),v=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(x,M,_){var e=x("./builtins");e=e.slice().filter(function(o){return!/^(gl\_|texture)/.test(o)}),M.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(x,M,_){M.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(x,M,_){var e=x("./literals");M.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(x,M,_){M.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(x,M,_){M.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(x,M,_){var e=x("./index");M.exports=function(o,a){var l=e(a),i=[];return(i=i.concat(l(o))).concat(l(null))}},{"./index":224}],231:[function(x,M,_){M.exports=function(e){"string"==typeof e&&(e=[e]);for(var o=[].slice.call(arguments,1),a=[],l=0;l<e.length-1;l++)a.push(e[l],o[l]||"");return a.push(e[l]),a.join("")}},{}],232:[function(x,M,_){"use strict";var e=x("is-browser");M.exports=e&&function(){var o=!1;try{var a=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("test",null,a),window.removeEventListener("test",null,a)}catch(l){o=!1}return o}()},{"is-browser":236}],233:[function(x,M,_){"use strict";M.exports=function(d,p){var f=d.length;if(0===f)throw new Error("Must have at least d+1 points");var g=d[0].length;if(f<=g)throw new Error("Must input at least d+1 points");var m=d.slice(0,g+1),u=e.apply(void 0,m);if(0===u)throw new Error("Input not in general position");for(var w=new Array(g+1),c=0;c<=g;++c)w[c]=c;u<0&&(w[0]=1,w[1]=0);var A=new a(w,new Array(g+1),!1),k=A.adjacent,C=new Array(g+2);for(c=0;c<=g;++c){for(var E=w.slice(),L=0;L<=g;++L)L===c&&(E[L]=-1);var D=E[0];E[0]=E[1],E[1]=D;var N=new a(E,new Array(g+1),!0);k[c]=N,C[c]=N}for(C[g+1]=A,c=0;c<=g;++c){E=k[c].vertices;var F=k[c].adjacent;for(L=0;L<=g;++L){var I=E[L];if(I<0)F[L]=A;else for(var P=0;P<=g;++P)k[P].vertices.indexOf(I)<0&&(F[L]=k[P])}}var j=new h(g,m,C),V=!!p;for(c=g+1;c<f;++c)j.insert(d[c],V);return j.boundary()};var e=x("robust-orientation"),o=x("simplicial-complex").compareCells;function a(d,p,f){this.vertices=d,this.adjacent=p,this.boundary=f,this.lastVisited=-1}function l(d,p,f){this.vertices=d,this.cell=p,this.index=f}function i(d,p){return o(d.vertices,p.vertices)}a.prototype.flip=function(){var d=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=d;var p=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=p};var v=[];function h(d,p,f){this.dimension=d,this.vertices=p,this.simplices=f,this.interior=f.filter(function(w){return!w.boundary}),this.tuple=new Array(d+1);for(var g=0;g<=d;++g)this.tuple[g]=this.vertices[g];var m,w,u=v[d];u||(u=v[d]=((m=e[d+1])||(m=e),w=m,function(){return w.apply(this,this.tuple)})),this.orient=u}var s=h.prototype;s.handleBoundaryDegeneracy=function(d,p){var f=this.dimension,g=this.vertices.length-1,m=this.tuple,u=this.vertices,w=[d];for(d.lastVisited=-g;w.length>0;)for(var c=(d=w.pop()).adjacent,A=0;A<=f;++A){var k=c[A];if(k.boundary&&!(k.lastVisited<=-g)){for(var C=k.vertices,E=0;E<=f;++E){var L=C[E];m[E]=L<0?p:u[L]}var D=this.orient();if(D>0)return k;k.lastVisited=-g,0===D&&w.push(k)}}return null},s.walk=function(d,p){var f=this.vertices.length-1,g=this.dimension,m=this.vertices,u=this.tuple,w=p?this.interior.length*Math.random()|0:this.interior.length-1,c=this.interior[w];e:for(;!c.boundary;){for(var A=c.vertices,k=c.adjacent,C=0;C<=g;++C)u[C]=m[A[C]];for(c.lastVisited=f,C=0;C<=g;++C){var E=k[C];if(!(E.lastVisited>=f)){var L=u[C];u[C]=d;var D=this.orient();if(u[C]=L,D<0){c=E;continue e}E.lastVisited=E.boundary?-f:f}}return}return c},s.addPeaks=function(d,p){var f=this.vertices.length-1,g=this.dimension,m=this.vertices,u=this.tuple,w=this.interior,c=this.simplices,A=[p];p.lastVisited=f,p.vertices[p.vertices.indexOf(-1)]=f,p.boundary=!1,w.push(p);for(var k=[];A.length>0;){var C=(p=A.pop()).vertices,E=p.adjacent,L=C.indexOf(f);if(!(L<0))for(var D=0;D<=g;++D)if(D!==L){var N=E[D];if(N.boundary&&!(N.lastVisited>=f)){var F=N.vertices;if(N.lastVisited!==-f){for(var I=0,P=0;P<=g;++P)F[P]<0?(I=P,u[P]=d):u[P]=m[F[P]];if(this.orient()>0){F[I]=f,N.boundary=!1,w.push(N),A.push(N),N.lastVisited=f;continue}N.lastVisited=-f}var j=N.adjacent,V=C.slice(),Z=E.slice(),Y=new a(V,Z,!0);c.push(Y);var ee=j.indexOf(p);if(!(ee<0))for(j[ee]=Y,Z[L]=N,V[D]=-1,Z[D]=p,E[D]=Y,Y.flip(),P=0;P<=g;++P){var re=V[P];if(!(re<0||re===f)){for(var X=new Array(g-1),K=0,ie=0;ie<=g;++ie){var q=V[ie];q<0||ie===P||(X[K++]=q)}k.push(new l(X,Y,P))}}}}}for(k.sort(i),D=0;D+1<k.length;D+=2){var U=k[D],W=k[D+1];U.index<0||W.index<0||(U.cell.adjacent[U.index]=W.cell,W.cell.adjacent[W.index]=U.cell)}},s.insert=function(d,p){var f=this.vertices;f.push(d);var g=this.walk(d,p);if(g){for(var m=this.dimension,u=this.tuple,w=0;w<=m;++w){var c=g.vertices[w];u[w]=c<0?d:f[c]}var A=this.orient(u);A<0||(0!==A||(g=this.handleBoundaryDegeneracy(g,d)))&&this.addPeaks(d,g)}},s.boundary=function(){for(var d=this.dimension,p=[],f=this.simplices,g=f.length,m=0;m<g;++m){var u=f[m];if(u.boundary){for(var w=new Array(d),c=u.vertices,A=0,k=0,C=0;C<=d;++C)c[C]>=0?w[A++]=c[C]:k=1&C;if(k===(1&d)){var E=w[0];w[0]=w[1],w[1]=E}p.push(w)}}return p}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(x,M,_){"use strict";var e=x("binary-search-bounds");function o(A,k,C,E,L){this.mid=A,this.left=k,this.right=C,this.leftPoints=E,this.rightPoints=L,this.count=(k?k.count:0)+(C?C.count:0)+E.length}M.exports=function(A){return new w(A&&0!==A.length?u(A):null)};var a=o.prototype;function l(A,k){A.mid=k.mid,A.left=k.left,A.right=k.right,A.leftPoints=k.leftPoints,A.rightPoints=k.rightPoints,A.count=k.count}function i(A,k){var C=u(k);A.mid=C.mid,A.left=C.left,A.right=C.right,A.leftPoints=C.leftPoints,A.rightPoints=C.rightPoints,A.count=C.count}function v(A,k){var C=A.intervals([]);C.push(k),i(A,C)}function h(A,k){var C=A.intervals([]),E=C.indexOf(k);return E<0?0:(C.splice(E,1),i(A,C),1)}function s(A,k,C){for(var E=0;E<A.length&&A[E][0]<=k;++E){var L=C(A[E]);if(L)return L}}function d(A,k,C){for(var E=A.length-1;E>=0&&A[E][1]>=k;--E){var L=C(A[E]);if(L)return L}}function p(A,k){for(var C=0;C<A.length;++C){var E=k(A[C]);if(E)return E}}function f(A,k){return A-k}function g(A,k){return A[0]-k[0]||A[1]-k[1]}function m(A,k){return A[1]-k[1]||A[0]-k[0]}function u(A){if(0===A.length)return null;for(var k=[],C=0;C<A.length;++C)k.push(A[C][0],A[C][1]);k.sort(f);var E=k[k.length>>1],L=[],D=[],N=[];for(C=0;C<A.length;++C){var F=A[C];F[1]<E?L.push(F):E<F[0]?D.push(F):N.push(F)}var I=N,P=N.slice();return I.sort(g),P.sort(m),new o(E,u(L),u(D),I,P)}function w(A){this.root=A}a.intervals=function(A){return A.push.apply(A,this.leftPoints),this.left&&this.left.intervals(A),this.right&&this.right.intervals(A),A},a.insert=function(A){var k=this.count-this.leftPoints.length;if(this.count+=1,A[1]<this.mid)this.left?4*(this.left.count+1)>3*(k+1)?v(this,A):this.left.insert(A):this.left=u([A]);else if(A[0]>this.mid)this.right?4*(this.right.count+1)>3*(k+1)?v(this,A):this.right.insert(A):this.right=u([A]);else{var C=e.ge(this.leftPoints,A,g),E=e.ge(this.rightPoints,A,m);this.leftPoints.splice(C,0,A),this.rightPoints.splice(E,0,A)}},a.remove=function(A){var k=this.count-this.leftPoints;if(A[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(k-1)?h(this,A):2===(D=this.left.remove(A))?(this.left=null,this.count-=1,1):(1===D&&(this.count-=1),D):0;if(A[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(k-1)?h(this,A):2===(D=this.right.remove(A))?(this.right=null,this.count-=1,1):(1===D&&(this.count-=1),D):0;if(1===this.count)return this.leftPoints[0]===A?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===A){if(this.left&&this.right){for(var C=this,E=this.left;E.right;)C=E,E=E.right;if(C===this)E.right=this.right;else{var L=this.left,D=this.right;C.count-=E.count,C.right=E.left,E.left=L,E.right=D}l(this,E),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else l(this,this.left?this.left:this.right);return 1}for(L=e.ge(this.leftPoints,A,g);L<this.leftPoints.length&&this.leftPoints[L][0]===A[0];++L)if(this.leftPoints[L]===A)for(this.count-=1,this.leftPoints.splice(L,1),D=e.ge(this.rightPoints,A,m);D<this.rightPoints.length&&this.rightPoints[D][1]===A[1];++D)if(this.rightPoints[D]===A)return this.rightPoints.splice(D,1),1;return 0},a.queryPoint=function(A,k){return A<this.mid?this.left&&(C=this.left.queryPoint(A,k))?C:s(this.leftPoints,A,k):A>this.mid?this.right&&(C=this.right.queryPoint(A,k))?C:d(this.rightPoints,A,k):p(this.leftPoints,k);var C},a.queryInterval=function(A,k,C){var E;return A<this.mid&&this.left&&(E=this.left.queryInterval(A,k,C))||k>this.mid&&this.right&&(E=this.right.queryInterval(A,k,C))?E:k<this.mid?s(this.leftPoints,k,C):A>this.mid?d(this.rightPoints,A,C):p(this.leftPoints,C)};var c=w.prototype;c.insert=function(A){this.root?this.root.insert(A):this.root=new o(A[0],null,null,[A],[A])},c.remove=function(A){if(this.root){var k=this.root.remove(A);return 2===k&&(this.root=null),0!==k}return!1},c.queryPoint=function(A,k){if(this.root)return this.root.queryPoint(A,k)},c.queryInterval=function(A,k,C){if(A<=k&&this.root)return this.root.queryInterval(A,k,C)},Object.defineProperty(c,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(c,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":31}],235:[function(x,M,_){"use strict";M.exports=function(e){for(var o=new Array(e),a=0;a<e;++a)o[a]=a;return o}},{}],236:[function(x,M,_){M.exports=!0},{}],237:[function(x,M,_){function e(o){return!!o.constructor&&"function"==typeof o.constructor.isBuffer&&o.constructor.isBuffer(o)}M.exports=function(o){return null!=o&&(e(o)||"function"==typeof(a=o).readFloatLE&&"function"==typeof a.slice&&e(a.slice(0,0))||!!o._isBuffer);var a}},{}],238:[function(x,M,_){"use strict";M.exports=a,M.exports.isMobile=a,M.exports.default=a;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function a(l){l||(l={});var i=l.ua;if(i||"undefined"==typeof navigator||(i=navigator.userAgent),i&&i.headers&&"string"==typeof i.headers["user-agent"]&&(i=i.headers["user-agent"]),"string"!=typeof i)return!1;var v=l.tablet?o.test(i):e.test(i);return!v&&l.tablet&&l.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==i.indexOf("Macintosh")&&-1!==i.indexOf("Safari")&&(v=!0),v}},{}],239:[function(x,M,_){"use strict";M.exports=function(e){for(var o,a=e.length,l=0;l<a;l++)if(((o=e.charCodeAt(l))<9||o>13)&&32!==o&&133!==o&&160!==o&&5760!==o&&6158!==o&&(o<8192||o>8205)&&8232!==o&&8233!==o&&8239!==o&&8287!==o&&8288!==o&&12288!==o&&65279!==o)return!1;return!0}},{}],240:[function(x,M,_){M.exports=function(e,o,a){return e*(1-a)+o*a}},{}],241:[function(x,M,_){var e=x("./normalize"),o=x("gl-mat4/create"),a=x("gl-mat4/clone"),l=x("gl-mat4/determinant"),i=x("gl-mat4/invert"),v=x("gl-mat4/transpose"),h={length:x("gl-vec3/length"),normalize:x("gl-vec3/normalize"),dot:x("gl-vec3/dot"),cross:x("gl-vec3/cross")},s=o(),d=o(),p=[0,0,0,0],f=[[0,0,0],[0,0,0],[0,0,0]],g=[0,0,0];function m(u,w,c,A,k){u[0]=w[0]*A+c[0]*k,u[1]=w[1]*A+c[1]*k,u[2]=w[2]*A+c[2]*k}M.exports=function(u,w,c,A,k,C){if(w||(w=[0,0,0]),c||(c=[0,0,0]),A||(A=[0,0,0]),k||(k=[0,0,0,1]),C||(C=[0,0,0,1]),!e(s,u)||(a(d,s),d[3]=0,d[7]=0,d[11]=0,d[15]=1,Math.abs(l(d)<1e-8)))return!1;var E,L,D,N,F,I,P,ie,q,j=s[3],V=s[7],Z=s[11],Y=s[12],ee=s[13],re=s[14],X=s[15];if(0!==j||0!==V||0!==Z){if(p[0]=j,p[1]=V,p[2]=Z,p[3]=X,!i(d,d))return!1;v(d,d),N=(L=p)[0],(E=k)[0]=(D=d)[0]*N+D[4]*(F=L[1])+D[8]*(I=L[2])+D[12]*(P=L[3]),E[1]=D[1]*N+D[5]*F+D[9]*I+D[13]*P,E[2]=D[2]*N+D[6]*F+D[10]*I+D[14]*P,E[3]=D[3]*N+D[7]*F+D[11]*I+D[15]*P}else k[0]=k[1]=k[2]=0,k[3]=1;if(w[0]=Y,w[1]=ee,w[2]=re,(ie=f)[0][0]=(q=s)[0],ie[0][1]=q[1],ie[0][2]=q[2],ie[1][0]=q[4],ie[1][1]=q[5],ie[1][2]=q[6],ie[2][0]=q[8],ie[2][1]=q[9],ie[2][2]=q[10],c[0]=h.length(f[0]),h.normalize(f[0],f[0]),A[0]=h.dot(f[0],f[1]),m(f[1],f[1],f[0],1,-A[0]),c[1]=h.length(f[1]),h.normalize(f[1],f[1]),A[0]/=c[1],A[1]=h.dot(f[0],f[2]),m(f[2],f[2],f[0],1,-A[1]),A[2]=h.dot(f[1],f[2]),m(f[2],f[2],f[1],1,-A[2]),c[2]=h.length(f[2]),h.normalize(f[2],f[2]),A[1]/=c[2],A[2]/=c[2],h.cross(g,f[1],f[2]),h.dot(f[0],g)<0)for(var K=0;K<3;K++)c[K]*=-1,f[K][0]*=-1,f[K][1]*=-1,f[K][2]*=-1;return C[0]=.5*Math.sqrt(Math.max(1+f[0][0]-f[1][1]-f[2][2],0)),C[1]=.5*Math.sqrt(Math.max(1-f[0][0]+f[1][1]-f[2][2],0)),C[2]=.5*Math.sqrt(Math.max(1-f[0][0]-f[1][1]+f[2][2],0)),C[3]=.5*Math.sqrt(Math.max(1+f[0][0]+f[1][1]+f[2][2],0)),f[2][1]>f[1][2]&&(C[0]=-C[0]),f[0][2]>f[2][0]&&(C[1]=-C[1]),f[1][0]>f[0][1]&&(C[2]=-C[2]),!0}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(x,M,_){M.exports=function(e,o){var a=o[15];if(0===a)return!1;for(var l=1/a,i=0;i<16;i++)e[i]=o[i]*l;return!0}},{}],243:[function(x,M,_){var e=x("gl-vec3/lerp"),o=x("mat4-recompose"),a=x("mat4-decompose"),l=x("gl-mat4/determinant"),i=x("quat-slerp"),v=d(),h=d(),s=d();function d(){return{translate:p(),scale:p(1),skew:p(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function p(f){return[f||0,f||0,f||0]}M.exports=function(f,g,m,u){if(0===l(g)||0===l(m))return!1;var w=a(g,v.translate,v.scale,v.skew,v.perspective,v.quaternion),c=a(m,h.translate,h.scale,h.skew,h.perspective,h.quaternion);return!(!w||!c||(e(s.translate,v.translate,h.translate,u),e(s.skew,v.skew,h.skew,u),e(s.scale,v.scale,h.scale,u),e(s.perspective,v.perspective,h.perspective,u),i(s.quaternion,v.quaternion,h.quaternion,u),o(f,s.translate,s.scale,s.skew,s.perspective,s.quaternion),0))}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(x,M,_){var e={identity:x("gl-mat4/identity"),translate:x("gl-mat4/translate"),multiply:x("gl-mat4/multiply"),create:x("gl-mat4/create"),scale:x("gl-mat4/scale"),fromRotationTranslation:x("gl-mat4/fromRotationTranslation")},o=(e.create(),e.create());M.exports=function(a,l,i,v,h,s){return e.identity(a),e.fromRotationTranslation(a,s,l),a[3]=h[0],a[7]=h[1],a[11]=h[2],a[15]=h[3],e.identity(o),0!==v[2]&&(o[9]=v[2],e.multiply(a,a,o)),0!==v[1]&&(o[9]=0,o[8]=v[1],e.multiply(a,a,o)),0!==v[0]&&(o[8]=0,o[4]=v[0],e.multiply(a,a,o)),e.scale(a,a,i),a}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(x,M,_){"use strict";var e=x("binary-search-bounds"),o=x("mat4-interpolate"),a=x("gl-mat4/invert"),l=x("gl-mat4/rotateX"),i=x("gl-mat4/rotateY"),v=x("gl-mat4/rotateZ"),h=x("gl-mat4/lookAt"),s=x("gl-mat4/translate"),d=(x("gl-mat4/scale"),x("gl-vec3/normalize")),p=[0,0,0];function f(u){this._components=u.slice(),this._time=[0],this.prevMatrix=u.slice(),this.nextMatrix=u.slice(),this.computedMatrix=u.slice(),this.computedInverse=u.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}M.exports=function(u){return new f((u=u||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var g=f.prototype;g.recalcMatrix=function(u){var w=this._time,c=e.le(w,u),A=this.computedMatrix;if(!(c<0)){var k=this._components;if(c===w.length-1)for(var C=16*c,E=0;E<16;++E)A[E]=k[C++];else{var L=w[c+1]-w[c],D=(C=16*c,this.prevMatrix),N=!0;for(E=0;E<16;++E)D[E]=k[C++];var F=this.nextMatrix;for(E=0;E<16;++E)F[E]=k[C++],N=N&&D[E]===F[E];if(L<1e-6||N)for(E=0;E<16;++E)A[E]=D[E];else o(A,D,F,(u-w[c])/L)}var I=this.computedUp;I[0]=A[1],I[1]=A[5],I[2]=A[9],d(I,I);var P=this.computedInverse;a(P,A);var j=this.computedEye,V=P[15];j[0]=P[12]/V,j[1]=P[13]/V,j[2]=P[14]/V;var Z=this.computedCenter,Y=Math.exp(this.computedRadius[0]);for(E=0;E<3;++E)Z[E]=j[E]-A[2+4*E]*Y}},g.idle=function(u){if(!(u<this.lastT())){for(var w=this._components,c=w.length-16,A=0;A<16;++A)w.push(w[c++]);this._time.push(u)}},g.flush=function(u){var w=e.gt(this._time,u)-2;w<0||(this._time.splice(0,w),this._components.splice(0,16*w))},g.lastT=function(){return this._time[this._time.length-1]},g.lookAt=function(u,w,c,A){this.recalcMatrix(u),this.setMatrix(u,h(this.computedMatrix,w=w||this.computedEye,c=c||p,A=A||this.computedUp));for(var k=0,C=0;C<3;++C)k+=Math.pow(c[C]-w[C],2);k=Math.log(Math.sqrt(k)),this.computedRadius[0]=k},g.rotate=function(u,w,c,A){this.recalcMatrix(u);var k=this.computedInverse;w&&i(k,k,w),c&&l(k,k,c),A&&v(k,k,A),this.setMatrix(u,a(this.computedMatrix,k))};var m=[0,0,0];g.pan=function(u,w,c,A){m[0]=-(w||0),m[1]=-(c||0),m[2]=-(A||0),this.recalcMatrix(u);var k=this.computedInverse;s(k,k,m),this.setMatrix(u,a(k,k))},g.translate=function(u,w,c,A){m[0]=w||0,m[1]=c||0,m[2]=A||0,this.recalcMatrix(u);var k=this.computedMatrix;s(k,k,m),this.setMatrix(u,k)},g.setMatrix=function(u,w){if(!(u<this.lastT())){this._time.push(u);for(var c=0;c<16;++c)this._components.push(w[c])}},g.setDistance=function(u,w){this.computedRadius[0]=w},g.setDistanceLimits=function(u,w){var c=this._limits;c[0]=u,c[1]=w},g.getDistanceLimits=function(u){var w=this._limits;return u?(u[0]=w[0],u[1]=w[1],u):w}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(x,M,_){"use strict";M.exports=function(o){var a=o.length;if(a<3){for(var l=new Array(a),i=0;i<a;++i)l[i]=i;return 2===a&&o[0][0]===o[1][0]&&o[0][1]===o[1][1]?[0]:l}var v=new Array(a);for(i=0;i<a;++i)v[i]=i;v.sort(function(w,c){return o[w][0]-o[c][0]||o[w][1]-o[c][1]});var h=[v[0],v[1]],s=[v[0],v[1]];for(i=2;i<a;++i){for(var d=v[i],p=o[d],f=h.length;f>1&&e(o[h[f-2]],o[h[f-1]],p)<=0;)f-=1,h.pop();for(h.push(d),f=s.length;f>1&&e(o[s[f-2]],o[s[f-1]],p)>=0;)f-=1,s.pop();s.push(d)}l=new Array(s.length+h.length-2);for(var g=0,m=(i=0,h.length);i<m;++i)l[g++]=h[i];for(var u=s.length-2;u>0;--u)l[g++]=s[u];return l};var e=x("robust-orientation")[3]},{"robust-orientation":284}],247:[function(x,M,_){"use strict";M.exports=function(o,a){a||(a=o,o=window);var l=0,i=0,v=0,h={shift:!1,alt:!1,control:!1,meta:!1},s=!1;function d(C){var E=!1;return"altKey"in C&&(E=E||C.altKey!==h.alt,h.alt=!!C.altKey),"shiftKey"in C&&(E=E||C.shiftKey!==h.shift,h.shift=!!C.shiftKey),"ctrlKey"in C&&(E=E||C.ctrlKey!==h.control,h.control=!!C.ctrlKey),"metaKey"in C&&(E=E||C.metaKey!==h.meta,h.meta=!!C.metaKey),E}function p(C,E){var L=e.x(E),D=e.y(E);"buttons"in E&&(C=0|E.buttons),(C!==l||L!==i||D!==v||d(E))&&(l=0|C,i=L||0,v=D||0,a&&a(l,i,v,h))}function f(C){p(0,C)}function g(){(l||i||v||h.shift||h.alt||h.meta||h.control)&&(i=v=0,l=0,h.shift=h.alt=h.control=h.meta=!1,a&&a(0,0,0,h))}function m(C){d(C)&&a&&a(l,i,v,h)}function u(C){0===e.buttons(C)?p(0,C):p(l,C)}function w(C){p(l|e.buttons(C),C)}function c(C){p(l&~e.buttons(C),C)}function A(){s||(s=!0,o.addEventListener("mousemove",u),o.addEventListener("mousedown",w),o.addEventListener("mouseup",c),o.addEventListener("mouseleave",f),o.addEventListener("mouseenter",f),o.addEventListener("mouseout",f),o.addEventListener("mouseover",f),o.addEventListener("blur",g),o.addEventListener("keyup",m),o.addEventListener("keydown",m),o.addEventListener("keypress",m),o!==window&&(window.addEventListener("blur",g),window.addEventListener("keyup",m),window.addEventListener("keydown",m),window.addEventListener("keypress",m)))}A();var k={element:o};return Object.defineProperties(k,{enabled:{get:function(){return s},set:function(C){C?A():!s||(s=!1,o.removeEventListener("mousemove",u),o.removeEventListener("mousedown",w),o.removeEventListener("mouseup",c),o.removeEventListener("mouseleave",f),o.removeEventListener("mouseenter",f),o.removeEventListener("mouseout",f),o.removeEventListener("mouseover",f),o.removeEventListener("blur",g),o.removeEventListener("keyup",m),o.removeEventListener("keydown",m),o.removeEventListener("keypress",m),o!==window&&(window.removeEventListener("blur",g),window.removeEventListener("keyup",m),window.removeEventListener("keydown",m),window.removeEventListener("keypress",m)))},enumerable:!0},buttons:{get:function(){return l},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return v},enumerable:!0},mods:{get:function(){return h},enumerable:!0}}),k};var e=x("mouse-event")},{"mouse-event":249}],248:[function(x,M,_){var e={left:0,top:0};M.exports=function(o,a,l){a=a||o.currentTarget||o.srcElement,Array.isArray(l)||(l=[0,0]);var s,i=o.clientX||0,v=o.clientY||0,h=(s=a)===window||s===document||s===document.body?e:s.getBoundingClientRect();return l[0]=i-h.left,l[1]=v-h.top,l}},{}],249:[function(x,M,_){"use strict";function e(o){return o.target||o.srcElement||window}_.buttons=function(o){if("object"==typeof o){if("buttons"in o)return o.buttons;if("which"in o){if(2===(a=o.which))return 4;if(3===a)return 2;if(a>0)return 1<<a-1}else if("button"in o){var a;if(1===(a=o.button))return 4;if(2===a)return 2;if(a>=0)return 1<<a}}return 0},_.element=e,_.x=function(o){if("object"==typeof o){if("offsetX"in o)return o.offsetX;var a=e(o).getBoundingClientRect();return o.clientX-a.left}return 0},_.y=function(o){if("object"==typeof o){if("offsetY"in o)return o.offsetY;var a=e(o).getBoundingClientRect();return o.clientY-a.top}return 0}},{}],250:[function(x,M,_){"use strict";var e=x("to-px");M.exports=function(o,a,l){"function"==typeof o&&(l=!!a,a=o,o=window);var i=e("ex",o),v=function(h){l&&h.preventDefault();var s=h.deltaX||0,d=h.deltaY||0,p=h.deltaZ||0,f=1;switch(h.deltaMode){case 1:f=i;break;case 2:f=window.innerHeight}if(d*=f,p*=f,(s*=f)||d||p)return a(s,d,p,h)};return o.addEventListener("wheel",v),v}},{"to-px":304}],251:[function(x,M,_){"use strict";var e=x("typedarray-pool");M.exports=function(a){function l(f){throw new Error("ndarray-extract-contour: "+f)}"object"!=typeof a&&l("Must specify arguments");var i=a.order;Array.isArray(i)||l("Must specify order");var f,g,m,A,v=a.arrayArguments||1;v<1&&l("Must have at least one array argument"),(a.scalarArguments||0)<0&&l("Scalar arg count must be > 0"),"function"!=typeof a.vertex&&l("Must specify vertex creation function"),"function"!=typeof a.cell&&l("Must specify cell creation function"),"function"!=typeof a.phase&&l("Must specify phase function");for(var s=a.getters||[],d=new Array(v),p=0;p<v;++p)d[p]=s.indexOf(p)>=0;return f=a.vertex,g=a.cell,m=a.phase,A=[d,i].join(","),(0,o[A])(f,g,m,e.mallocUint32,e.freeUint32)};var o={"false,0,1":function(a,l,i,v,h){return function(s,d,p,f){var g,m=0|s.shape[0],u=0|s.shape[1],w=s.data,A=0|s.stride[0],k=0|s.stride[1],C=0|s.offset,E=0|-A,L=0,D=0|-k,N=0,F=-A-k|0,I=0,P=0|A,j=k-A*m|0,V=0,Z=0,Y=0,ee=2*m|0,re=v(ee),X=v(ee),K=0,ie=0,q=-1,U=-1,W=0,ae=0|-m,G=0|m,te=0,ne=-m-1|0,le=m-1|0,ue=0,pe=0,de=0;for(V=0;V<m;++V)re[K++]=i(w[C],d,p,f),C+=P;if(C+=j,u>0){if(Z=1,re[K++]=i(w[C],d,p,f),C+=P,m>0)for(V=1,ie=re[K]=i(g=w[C],d,p,f),te=re[K+ae],ue=re[K+ne],ie===(W=re[K+q])&&ie===te&&ie===ue||(a(V,Z,g,L=w[C+E],N=w[C+D],I=w[C+F],ie,W,te,ue,d,p,f),pe=X[K]=Y++),K+=1,C+=P,V=2;V<m;++V)ie=re[K]=i(g=w[C],d,p,f),te=re[K+ae],ue=re[K+ne],ie===(W=re[K+q])&&ie===te&&ie===ue||(a(V,Z,g,L=w[C+E],N=w[C+D],I=w[C+F],ie,W,te,ue,d,p,f),pe=X[K]=Y++,ue!==W&&l(X[K+q],pe,I,L,ue,W,d,p,f)),K+=1,C+=P;for(C+=j,K=0,de=q,q=U,U=de,de=ae,ae=G,G=de,de=ne,ne=le,le=de,Z=2;Z<u;++Z){if(re[K++]=i(w[C],d,p,f),C+=P,m>0)for(V=1,ie=re[K]=i(g=w[C],d,p,f),te=re[K+ae],ue=re[K+ne],ie===(W=re[K+q])&&ie===te&&ie===ue||(a(V,Z,g,L=w[C+E],N=w[C+D],I=w[C+F],ie,W,te,ue,d,p,f),pe=X[K]=Y++,ue!==te&&l(X[K+ae],pe,N,I,te,ue,d,p,f)),K+=1,C+=P,V=2;V<m;++V)ie=re[K]=i(g=w[C],d,p,f),te=re[K+ae],ue=re[K+ne],ie===(W=re[K+q])&&ie===te&&ie===ue||(a(V,Z,g,L=w[C+E],N=w[C+D],I=w[C+F],ie,W,te,ue,d,p,f),pe=X[K]=Y++,ue!==te&&l(X[K+ae],pe,N,I,te,ue,d,p,f),ue!==W&&l(X[K+q],pe,I,L,ue,W,d,p,f)),K+=1,C+=P;1&Z&&(K=0),de=q,q=U,U=de,de=ae,ae=G,G=de,de=ne,ne=le,le=de,C+=j}}h(X),h(re)}},"false,1,0":function(a,l,i,v,h){return function(s,d,p,f){var g,m=0|s.shape[0],u=0|s.shape[1],w=s.data,A=0|s.stride[0],k=0|s.stride[1],C=0|s.offset,E=0|-A,L=0,D=0|-k,N=0,F=-A-k|0,I=0,P=0|k,j=A-k*u|0,V=0,Z=0,Y=0,ee=2*u|0,re=v(ee),X=v(ee),K=0,ie=0,q=-1,U=-1,W=0,ae=0|-u,G=0|u,te=0,ne=-u-1|0,le=u-1|0,ue=0,pe=0,de=0;for(Z=0;Z<u;++Z)re[K++]=i(w[C],d,p,f),C+=P;if(C+=j,m>0){if(V=1,re[K++]=i(w[C],d,p,f),C+=P,u>0)for(Z=1,ie=re[K]=i(g=w[C],d,p,f),W=re[K+q],ue=re[K+ne],ie===(te=re[K+ae])&&ie===W&&ie===ue||(a(V,Z,g,L=w[C+E],N=w[C+D],I=w[C+F],ie,te,W,ue,d,p,f),pe=X[K]=Y++),K+=1,C+=P,Z=2;Z<u;++Z)ie=re[K]=i(g=w[C],d,p,f),W=re[K+q],ue=re[K+ne],ie===(te=re[K+ae])&&ie===W&&ie===ue||(a(V,Z,g,L=w[C+E],N=w[C+D],I=w[C+F],ie,te,W,ue,d,p,f),pe=X[K]=Y++,ue!==W&&l(X[K+q],pe,N,I,W,ue,d,p,f)),K+=1,C+=P;for(C+=j,K=0,de=ae,ae=G,G=de,de=q,q=U,U=de,de=ne,ne=le,le=de,V=2;V<m;++V){if(re[K++]=i(w[C],d,p,f),C+=P,u>0)for(Z=1,ie=re[K]=i(g=w[C],d,p,f),W=re[K+q],ue=re[K+ne],ie===(te=re[K+ae])&&ie===W&&ie===ue||(a(V,Z,g,L=w[C+E],N=w[C+D],I=w[C+F],ie,te,W,ue,d,p,f),pe=X[K]=Y++,ue!==te&&l(X[K+ae],pe,I,L,ue,te,d,p,f)),K+=1,C+=P,Z=2;Z<u;++Z)ie=re[K]=i(g=w[C],d,p,f),W=re[K+q],ue=re[K+ne],ie===(te=re[K+ae])&&ie===W&&ie===ue||(a(V,Z,g,L=w[C+E],N=w[C+D],I=w[C+F],ie,te,W,ue,d,p,f),pe=X[K]=Y++,ue!==W&&l(X[K+q],pe,N,I,W,ue,d,p,f),ue!==te&&l(X[K+ae],pe,I,L,ue,te,d,p,f)),K+=1,C+=P;1&V&&(K=0),de=ae,ae=G,G=de,de=q,q=U,U=de,de=ne,ne=le,le=de,C+=j}}h(X),h(re)}}}},{"typedarray-pool":308}],252:[function(x,M,_){"use strict";var e=x("dup"),o={zero:function(m,u,w,c){var A=m[0];c|=0;var k=0,C=w[0];for(k=0;k<A;++k)u[c]=0,c+=C},fdTemplate1:function(m,u,w,c,A,k,C){var E=m[0],L=w[0],D=-1*L,N=L;c|=0,C|=0;var F=0,I=L,P=k[0];for(F=0;F<E;++F)A[C]=.5*(u[c+D]-u[c+N]),c+=I,C+=P},fdTemplate2:function(m,u,w,c,A,k,C,E,L,D){var N=m[0],F=m[1],I=w[0],P=w[1],V=k[1],Y=L[1],ee=-1*I,re=I,X=-1*P,K=P;c|=0,C|=0,D|=0;var ie=0,q=0,U=P,W=I-F*P,ae=V,G=k[0]-F*V,te=Y,ne=L[0]-F*Y;for(q=0;q<N;++q){for(ie=0;ie<F;++ie)A[C]=.5*(u[c+ee]-u[c+re]),E[D]=.5*(u[c+X]-u[c+K]),c+=U,C+=ae,D+=te;c+=W,C+=G,D+=ne}}},a={cdiff:function(m){var u={};return function(w,c,A){var k=w.dtype,C=w.order,E=c.dtype,L=c.order,D=A.dtype,N=A.order,F=[k,C.join(),E,L.join(),D,N.join()].join(),I=u[F];return I||(u[F]=I=m([k,C,E,L,D,N])),I(w.shape.slice(0),w.data,w.stride,0|w.offset,c.data,c.stride,0|c.offset,A.data,A.stride,0|A.offset)}},zero:function(m){var u={};return function(w){var c=w.dtype,A=w.order,k=[c,A.join()].join(),C=u[k];return C||(u[k]=C=m([c,A])),C(w.shape.slice(0),w.data,w.stride,0|w.offset)}},fdTemplate1:function(m){var u={};return function(w,c){var A=w.dtype,k=w.order,C=c.dtype,E=c.order,L=[A,k.join(),C,E.join()].join(),D=u[L];return D||(u[L]=D=m([A,k,C,E])),D(w.shape.slice(0),w.data,w.stride,0|w.offset,c.data,c.stride,0|c.offset)}},fdTemplate2:function(m){var u={};return function(w,c,A){var k=w.dtype,C=w.order,E=c.dtype,L=c.order,D=A.dtype,N=A.order,F=[k,C.join(),E,L.join(),D,N.join()].join(),I=u[F];return I||(u[F]=I=m([k,C,E,L,D,N])),I(w.shape.slice(0),w.data,w.stride,0|w.offset,c.data,c.stride,0|c.offset,A.data,A.stride,0|A.offset)}}};function l(m){return(0,a[m.funcName])(i.bind(void 0,m))}function i(m){return o[m.funcName]}function v(m){return l({funcName:m.funcName})}var h={},s={},d=v({funcName:"cdiff"}),p=v({funcName:"zero"});function f(m){return m in h?h[m]:h[m]=v({funcName:"fdTemplate"+m})}function g(m,u,w,c){return function(A,k){var C=k.shape.slice();return C[0]>2&&C[1]>2&&c(k.pick(-1,-1).lo(1,1).hi(C[0]-2,C[1]-2),A.pick(-1,-1,0).lo(1,1).hi(C[0]-2,C[1]-2),A.pick(-1,-1,1).lo(1,1).hi(C[0]-2,C[1]-2)),C[1]>2&&(w(k.pick(0,-1).lo(1).hi(C[1]-2),A.pick(0,-1,1).lo(1).hi(C[1]-2)),u(A.pick(0,-1,0).lo(1).hi(C[1]-2))),C[1]>2&&(w(k.pick(C[0]-1,-1).lo(1).hi(C[1]-2),A.pick(C[0]-1,-1,1).lo(1).hi(C[1]-2)),u(A.pick(C[0]-1,-1,0).lo(1).hi(C[1]-2))),C[0]>2&&(w(k.pick(-1,0).lo(1).hi(C[0]-2),A.pick(-1,0,0).lo(1).hi(C[0]-2)),u(A.pick(-1,0,1).lo(1).hi(C[0]-2))),C[0]>2&&(w(k.pick(-1,C[1]-1).lo(1).hi(C[0]-2),A.pick(-1,C[1]-1,0).lo(1).hi(C[0]-2)),u(A.pick(-1,C[1]-1,1).lo(1).hi(C[0]-2))),A.set(0,0,0,0),A.set(0,0,1,0),A.set(C[0]-1,0,0,0),A.set(C[0]-1,0,1,0),A.set(0,C[1]-1,0,0),A.set(0,C[1]-1,1,0),A.set(C[0]-1,C[1]-1,0,0),A.set(C[0]-1,C[1]-1,1,0),A}}M.exports=function(m,u,w){return Array.isArray(w)||(w=e(u.dimension,"string"==typeof w?w:"clamp")),0===u.size?m:0===u.dimension?(m.set(0),m):function(c){var A=c.join();if(L=s[A])return L;for(var k=c.length,C=[d,p],E=1;E<=k;++E)C.push(f(E));var L=g.apply(void 0,C);return s[A]=L,L}(w)(m,u)}},{dup:65}],253:[function(x,M,_){"use strict";function e(i,v){var h=Math.floor(v),s=v-h,p=0<=h+1&&h+1<i.shape[0];return(1-s)*(0<=h&&h<i.shape[0]?+i.get(h):0)+s*(p?+i.get(h+1):0)}function o(i,v,h){var s=Math.floor(v),d=v-s,p=0<=s&&s<i.shape[0],f=0<=s+1&&s+1<i.shape[0],g=Math.floor(h),m=h-g,u=0<=g&&g<i.shape[1],w=0<=g+1&&g+1<i.shape[1],c=p&&u?i.get(s,g):0,A=p&&w?i.get(s,g+1):0;return(1-m)*((1-d)*c+d*(f&&u?i.get(s+1,g):0))+m*((1-d)*A+d*(f&&w?i.get(s+1,g+1):0))}function a(i,v,h,s){var d=Math.floor(v),p=v-d,f=0<=d&&d<i.shape[0],g=0<=d+1&&d+1<i.shape[0],m=Math.floor(h),u=h-m,w=0<=m&&m<i.shape[1],c=0<=m+1&&m+1<i.shape[1],A=Math.floor(s),k=s-A,C=0<=A&&A<i.shape[2],E=0<=A+1&&A+1<i.shape[2],L=f&&w&&C?i.get(d,m,A):0,D=f&&c&&C?i.get(d,m+1,A):0,N=g&&w&&C?i.get(d+1,m,A):0,F=g&&c&&C?i.get(d+1,m+1,A):0,I=f&&w&&E?i.get(d,m,A+1):0,P=f&&c&&E?i.get(d,m+1,A+1):0;return(1-k)*((1-u)*((1-p)*L+p*N)+u*((1-p)*D+p*F))+k*((1-u)*((1-p)*I+p*(g&&w&&E?i.get(d+1,m,A+1):0))+u*((1-p)*P+p*(g&&c&&E?i.get(d+1,m+1,A+1):0)))}function l(i){var v,h,s=0|i.shape.length,d=new Array(s),p=new Array(s),f=new Array(s),g=new Array(s);for(v=0;v<s;++v)h=+arguments[v+1],d[v]=Math.floor(h),p[v]=h-d[v],f[v]=0<=d[v]&&d[v]<i.shape[v],g[v]=0<=d[v]+1&&d[v]+1<i.shape[v];var m,u,w,c=0;e:for(v=0;v<1<<s;++v){for(u=1,w=i.offset,m=0;m<s;++m)if(v&1<<m){if(!g[m])continue e;u*=p[m],w+=i.stride[m]*(d[m]+1)}else{if(!f[m])continue e;u*=1-p[m],w+=i.stride[m]*d[m]}c+=u*i.data[w]}return c}M.exports=function(i,v,h,s){switch(i.shape.length){case 0:return 0;case 1:return e(i,v);case 2:return o(i,v,h);case 3:return a(i,v,h,s);default:return l.apply(void 0,arguments)}},M.exports.d1=e,M.exports.d2=o,M.exports.d3=a},{}],254:[function(x,M,_){"use strict";var e={"float64,2,1,0":function(){return function(v,h,s,d,p){var f=v[0],g=v[1],m=v[2],w=s[1],c=s[2];d|=0;var A=0,k=0,C=0,E=c,L=w-m*c,D=s[0]-g*w;for(C=0;C<f;++C){for(k=0;k<g;++k){for(A=0;A<m;++A)h[d]/=p,d+=E;d+=L}d+=D}}},"uint8,2,0,1,float64,2,1,0":function(){return function(v,h,s,d,p,f,g,m){for(var u=v[0],w=v[1],c=v[2],A=s[0],k=s[1],C=s[2],E=f[0],L=f[1],D=f[2],N=d|=0,F=g|=0,I=0|v[0];I>0;){I<64?(u=I,I=0):(u=64,I-=64);for(var P=0|v[1];P>0;){P<64?(w=P,P=0):(w=64,P-=64),d=N+I*A+P*k,g=F+I*E+P*L;var j=0,V=0,Z=0,Y=C,ee=A-c*C,re=k-u*A,X=D,K=E-c*D,ie=L-u*E;for(Z=0;Z<w;++Z){for(V=0;V<u;++V){for(j=0;j<c;++j)h[d]=p[g]*m,d+=Y,g+=X;d+=ee,g+=K}d+=re,g+=ie}}}}},"float32,1,0,float32,1,0":function(){return function(v,h,s,d,p,f,g){var m=v[0],u=v[1],c=s[1],k=f[1];d|=0,g|=0;var C=0,E=0,L=c,D=s[0]-u*c,N=k,F=f[0]-u*k;for(E=0;E<m;++E){for(C=0;C<u;++C)h[d]=p[g],d+=L,g+=N;d+=D,g+=F}}},"float32,1,0,float32,0,1":function(){return function(v,h,s,d,p,f,g){for(var m=v[0],u=v[1],w=s[0],c=s[1],A=f[0],k=f[1],C=d|=0,E=g|=0,L=0|v[1];L>0;){L<64?(u=L,L=0):(u=64,L-=64);for(var D=0|v[0];D>0;){D<64?(m=D,D=0):(m=64,D-=64),d=C+L*c+D*w,g=E+L*k+D*A;var N=0,F=0,I=c,P=w-u*c,j=k,V=A-u*k;for(F=0;F<m;++F){for(N=0;N<u;++N)h[d]=p[g],d+=I,g+=j;d+=P,g+=V}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(v,h,s,d,p,f,g){for(var m=v[0],u=v[1],w=v[2],c=s[0],A=s[1],k=s[2],C=f[0],E=f[1],L=f[2],D=d|=0,N=g|=0,F=0|v[2];F>0;){F<64?(w=F,F=0):(w=64,F-=64);for(var I=0|v[0];I>0;){I<64?(m=I,I=0):(m=64,I-=64);for(var P=0|v[1];P>0;){P<64?(u=P,P=0):(u=64,P-=64),d=D+F*k+I*c+P*A,g=N+F*L+I*C+P*E;var j=0,V=0,Z=0,Y=k,ee=c-w*k,re=A-m*c,X=L,K=C-w*L,ie=E-m*C;for(Z=0;Z<u;++Z){for(V=0;V<m;++V){for(j=0;j<w;++j)h[d]=p[g],d+=Y,g+=X;d+=ee,g+=K}d+=re,g+=ie}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(v,h,s,d,p,f,g){var m=v[0],u=v[1],w=v[2],c=s[0],k=s[2],C=f[0],L=f[2];d|=0,g|=0;var D=0,N=0,F=0,I=k,P=c-w*k,j=s[1]-m*c,V=L,Z=C-w*L,Y=f[1]-m*C;for(F=0;F<u;++F){for(N=0;N<m;++N){for(D=0;D<w;++D)h[d]=p[g],d+=I,g+=V;d+=P,g+=Z}d+=j,g+=Y}}}},o=function(v,h){var s=h.join(",");return(0,e[s])()},a={mul:function(v){var h={};return function(s,d,p){var f=s.dtype,g=s.order,m=d.dtype,u=d.order,w=p.dtype,c=p.order,A=[f,g.join(),m,u.join(),w,c.join()].join(),k=h[A];return k||(h[A]=k=v([f,g,m,u,w,c])),k(s.shape.slice(0),s.data,s.stride,0|s.offset,d.data,d.stride,0|d.offset,p.data,p.stride,0|p.offset)}},muls:function(v){var h={};return function(s,d,p){var f=s.dtype,g=s.order,m=d.dtype,u=d.order,w=[f,g.join(),m,u.join()].join(),c=h[w];return c||(h[w]=c=v([f,g,m,u])),c(s.shape.slice(0),s.data,s.stride,0|s.offset,d.data,d.stride,0|d.offset,p)}},mulseq:function(v){var h={};return function(s,d){var p=s.dtype,f=s.order,g=[p,f.join()].join(),m=h[g];return m||(h[g]=m=v([p,f])),m(s.shape.slice(0),s.data,s.stride,0|s.offset,d)}},div:function(v){var h={};return function(s,d,p){var f=s.dtype,g=s.order,m=d.dtype,u=d.order,w=p.dtype,c=p.order,A=[f,g.join(),m,u.join(),w,c.join()].join(),k=h[A];return k||(h[A]=k=v([f,g,m,u,w,c])),k(s.shape.slice(0),s.data,s.stride,0|s.offset,d.data,d.stride,0|d.offset,p.data,p.stride,0|p.offset)}},divs:function(v){var h={};return function(s,d,p){var f=s.dtype,g=s.order,m=d.dtype,u=d.order,w=[f,g.join(),m,u.join()].join(),c=h[w];return c||(h[w]=c=v([f,g,m,u])),c(s.shape.slice(0),s.data,s.stride,0|s.offset,d.data,d.stride,0|d.offset,p)}},divseq:function(v){var h={};return function(s,d){var p=s.dtype,f=s.order,g=[p,f.join()].join(),m=h[g];return m||(h[g]=m=v([p,f])),m(s.shape.slice(0),s.data,s.stride,0|s.offset,d)}},assign:function(v){var h={};return function(s,d){var p=s.dtype,f=s.order,g=d.dtype,m=d.order,u=[p,f.join(),g,m.join()].join(),w=h[u];return w||(h[u]=w=v([p,f,g,m])),w(s.shape.slice(0),s.data,s.stride,0|s.offset,d.data,d.stride,0|d.offset)}}};function l(v){return(0,a[(h={funcName:v.funcName}).funcName])(o.bind(void 0,h));var h}var i={mul:"*",div:"/"};(function(){for(var v in i)_[v]=l({funcName:v}),_[v+"s"]=l({funcName:v+"s"}),_[v+"seq"]=l({funcName:v+"seq"})})(),_.assign=l({funcName:"assign"})},{}],255:[function(x,M,_){"use strict";var e=x("ndarray"),o=x("./doConvert.js");M.exports=function(a,l){for(var i=[],v=a,h=1;Array.isArray(v);)i.push(v.length),h*=v.length,v=v[0];return 0===i.length?e():(l||(l=e(new Float64Array(h),i)),o(l,a),l)}},{"./doConvert.js":256,ndarray:259}],256:[function(x,M,_){"use strict";var a,l;M.exports=(a=function(){return function(a,l,i,v,h){var s=a[0],d=a[1],p=a[2],g=i[1],m=i[2],u=[0,0,0];v|=0;var w=0,c=0,A=0,k=m,C=g-p*m,E=i[0]-d*g;for(A=0;A<s;++A){for(c=0;c<d;++c){for(w=0;w<p;++w){var L,D=h;for(L=0;L<u.length-1;++L)D=D[u[L]];l[v]=D[u[u.length-1]],v+=k,++u[2]}v+=C,u[2]-=p,++u[1]}v+=E,u[1]-=d,++u[0]}}}.bind(void 0,{funcName:"convert"}),l={},function(i,v){var h=i.dtype,s=i.order,d=[h,s.join()].join(),p=l[d];return p||(l[d]=p=a([h,s])),p(i.shape.slice(0),i.data,i.stride,0|i.offset,v)})},{}],257:[function(x,M,_){"use strict";var e=x("typedarray-pool");function o(v){switch(v){case"uint32":return[e.mallocUint32,e.freeUint32];default:return null}}var a={"uint32,1,0":function(v,h){return function(s,d,p,f,g,m,u,w,c,A,k){var C,E,L,D,N,F,I,P,j=s*g+f,V=v(w);for(C=s+1;C<=d;++C){for(E=C,L=j+=g,N=0,F=j,D=0;D<w;++D)V[N++]=p[F],F+=c;e:for(;E-- >s;){N=0,F=L-g;t:for(D=0;D<w;++D){if((I=p[F])<(P=V[N]))break e;if(I>P)break t;F+=A,N+=k}for(N=L,F=L-g,D=0;D<w;++D)p[N]=p[F],N+=c,F+=c;L-=g}for(N=L,F=0,D=0;D<w;++D)p[N]=V[F++],N+=c}h(V)}}},l={"uint32,1,0":function(v,h,s){return function d(p,f,g,m,u,w,c,A,k,C,E){var L,D,F,I,P,j,V,Z,Y,ee,re,X,K,ie,q,U,W,ae,G,te,ne,le,ue,pe,de=(f-p+1)/6|0,_e=p+de,me=f-de,we=p+f>>1,De=we-de,Le=we+de,Ie=_e,je=De,ye=we,Me=Le,Oe=me,Pe=p+1,Re=f-1,Ue=!0,qe=0,Xe=0,lt=0,He=A,$e=h(He),et=h(He);ee=u*Ie,re=u*je,pe=m;e:for(Y=0;Y<A;++Y){if((lt=g[j=ee+pe]-g[V=re+pe])>0){D=Ie,Ie=je,je=D;break e}if(lt<0)break e;pe+=C}ee=u*Me,re=u*Oe,pe=m;e:for(Y=0;Y<A;++Y){if((lt=g[j=ee+pe]-g[V=re+pe])>0){D=Me,Me=Oe,Oe=D;break e}if(lt<0)break e;pe+=C}ee=u*Ie,re=u*ye,pe=m;e:for(Y=0;Y<A;++Y){if((lt=g[j=ee+pe]-g[V=re+pe])>0){D=Ie,Ie=ye,ye=D;break e}if(lt<0)break e;pe+=C}ee=u*je,re=u*ye,pe=m;e:for(Y=0;Y<A;++Y){if((lt=g[j=ee+pe]-g[V=re+pe])>0){D=je,je=ye,ye=D;break e}if(lt<0)break e;pe+=C}ee=u*Ie,re=u*Me,pe=m;e:for(Y=0;Y<A;++Y){if((lt=g[j=ee+pe]-g[V=re+pe])>0){D=Ie,Ie=Me,Me=D;break e}if(lt<0)break e;pe+=C}ee=u*ye,re=u*Me,pe=m;e:for(Y=0;Y<A;++Y){if((lt=g[j=ee+pe]-g[V=re+pe])>0){D=ye,ye=Me,Me=D;break e}if(lt<0)break e;pe+=C}ee=u*je,re=u*Oe,pe=m;e:for(Y=0;Y<A;++Y){if((lt=g[j=ee+pe]-g[V=re+pe])>0){D=je,je=Oe,Oe=D;break e}if(lt<0)break e;pe+=C}ee=u*je,re=u*ye,pe=m;e:for(Y=0;Y<A;++Y){if((lt=g[j=ee+pe]-g[V=re+pe])>0){D=je,je=ye,ye=D;break e}if(lt<0)break e;pe+=C}ee=u*Me,re=u*Oe,pe=m;e:for(Y=0;Y<A;++Y){if((lt=g[j=ee+pe]-g[V=re+pe])>0){D=Me,Me=Oe,Oe=D;break e}if(lt<0)break e;pe+=C}for(ee=u*Ie,re=u*je,X=u*ye,K=u*Me,ie=u*Oe,q=u*_e,U=u*we,W=u*me,ue=0,pe=m,Y=0;Y<A;++Y)j=ee+pe,Z=X+pe,ae=K+pe,G=ie+pe,te=q+pe,ne=U+pe,le=W+pe,$e[ue]=g[V=re+pe],et[ue]=g[ae],Ue=Ue&&$e[ue]===et[ue],F=g[Z],I=g[G],g[te]=g[j],g[ne]=F,g[le]=I,++ue,pe+=k;for(ee=u*De,re=u*p,pe=m,Y=0;Y<A;++Y)g[j=ee+pe]=g[V=re+pe],pe+=k;for(ee=u*Le,re=u*f,pe=m,Y=0;Y<A;++Y)g[j=ee+pe]=g[V=re+pe],pe+=k;if(Ue)for(P=Pe;P<=Re;++P){for(j=m+P*u,ue=0,Y=0;Y<A&&0==(lt=g[j]-$e[ue]);++Y)ue+=E,j+=C;if(0!==lt)if(lt<0){if(P!==Pe)for(ee=u*P,re=u*Pe,pe=m,Y=0;Y<A;++Y)L=g[j=ee+pe],g[j]=g[V=re+pe],g[V]=L,pe+=k;++Pe}else for(;;){for(j=m+Re*u,ue=0,Y=0;Y<A&&0==(lt=g[j]-$e[ue]);++Y)ue+=E,j+=C;if(!(lt>0)){if(lt<0){for(ee=u*P,re=u*Pe,X=u*Re,pe=m,Y=0;Y<A;++Y)Z=X+pe,L=g[j=ee+pe],g[j]=g[V=re+pe],g[V]=g[Z],g[Z]=L,pe+=k;++Pe,--Re;break}for(ee=u*P,re=u*Re,pe=m,Y=0;Y<A;++Y)L=g[j=ee+pe],g[j]=g[V=re+pe],g[V]=L,pe+=k;--Re;break}Re--}}else for(P=Pe;P<=Re;++P){for(j=m+P*u,ue=0,Y=0;Y<A&&0==(qe=g[j]-$e[ue]);++Y)ue+=E,j+=C;if(qe<0){if(P!==Pe)for(ee=u*P,re=u*Pe,pe=m,Y=0;Y<A;++Y)L=g[j=ee+pe],g[j]=g[V=re+pe],g[V]=L,pe+=k;++Pe}else{for(j=m+P*u,ue=0,Y=0;Y<A&&0==(Xe=g[j]-et[ue]);++Y)ue+=E,j+=C;if(Xe>0)for(;;){for(j=m+Re*u,ue=0,Y=0;Y<A&&0==(lt=g[j]-et[ue]);++Y)ue+=E,j+=C;if(!(lt>0)){for(j=m+Re*u,ue=0,Y=0;Y<A&&0==(lt=g[j]-$e[ue]);++Y)ue+=E,j+=C;if(lt<0){for(ee=u*P,re=u*Pe,X=u*Re,pe=m,Y=0;Y<A;++Y)Z=X+pe,L=g[j=ee+pe],g[j]=g[V=re+pe],g[V]=g[Z],g[Z]=L,pe+=k;++Pe,--Re}else{for(ee=u*P,re=u*Re,pe=m,Y=0;Y<A;++Y)L=g[j=ee+pe],g[j]=g[V=re+pe],g[V]=L,pe+=k;--Re}break}if(--Re<P)break}}}for(ee=u*p,re=u*(Pe-1),ue=0,pe=m,Y=0;Y<A;++Y)g[j=ee+pe]=g[V=re+pe],g[V]=$e[ue],++ue,pe+=k;for(ee=u*f,re=u*(Re+1),ue=0,pe=m,Y=0;Y<A;++Y)g[j=ee+pe]=g[V=re+pe],g[V]=et[ue],++ue,pe+=k;if(Pe-2-p<=32?v(p,Pe-2,g,m,u,w,c,A,k,C,E):d(p,Pe-2,g,m,u,w,c,A,k,C,E),f-(Re+2)<=32?v(Re+2,f,g,m,u,w,c,A,k,C,E):d(Re+2,f,g,m,u,w,c,A,k,C,E),Ue)return s($e),void s(et);if(Pe<_e&&Re>me){e:for(;;){for(j=m+Pe*u,ue=0,pe=m,Y=0;Y<A;++Y){if(g[j]!==$e[ue])break e;++ue,j+=k}++Pe}e:for(;;){for(j=m+Re*u,ue=0,pe=m,Y=0;Y<A;++Y){if(g[j]!==et[ue])break e;++ue,j+=k}--Re}for(P=Pe;P<=Re;++P){for(j=m+P*u,ue=0,Y=0;Y<A&&0==(qe=g[j]-$e[ue]);++Y)ue+=E,j+=C;if(0===qe){if(P!==Pe)for(ee=u*P,re=u*Pe,pe=m,Y=0;Y<A;++Y)L=g[j=ee+pe],g[j]=g[V=re+pe],g[V]=L,pe+=k;++Pe}else{for(j=m+P*u,ue=0,Y=0;Y<A&&0==(Xe=g[j]-et[ue]);++Y)ue+=E,j+=C;if(0===Xe)for(;;){for(j=m+Re*u,ue=0,Y=0;Y<A&&0==(lt=g[j]-et[ue]);++Y)ue+=E,j+=C;if(0!==lt){for(j=m+Re*u,ue=0,Y=0;Y<A&&0==(lt=g[j]-$e[ue]);++Y)ue+=E,j+=C;if(lt<0){for(ee=u*P,re=u*Pe,X=u*Re,pe=m,Y=0;Y<A;++Y)Z=X+pe,L=g[j=ee+pe],g[j]=g[V=re+pe],g[V]=g[Z],g[Z]=L,pe+=k;++Pe,--Re}else{for(ee=u*P,re=u*Re,pe=m,Y=0;Y<A;++Y)L=g[j=ee+pe],g[j]=g[V=re+pe],g[V]=L,pe+=k;--Re}break}if(--Re<P)break}}}}s($e),s(et),Re-Pe<=32?v(Pe,Re,g,m,u,w,c,A,k,C,E):d(Pe,Re,g,m,u,w,c,A,k,C,E)}}},i={"uint32,1,0":function(v,h){return function(s){var d=s.data,p=0|s.offset,f=s.shape,g=s.stride,m=0|g[0],u=0|f[0],w=0|g[1],c=0|f[1],A=w,k=w;u<=32?v(0,u-1,d,p,m,w,u,c,A,k,1):h(0,u-1,d,p,m,w,u,c,A,k,1)}}};M.exports=function(v,h){var g,m,u,w,c,s=[h,v].join(","),d=i[s],p=(g=v,u=o(m=h),w=[m,g].join(","),c=a[w],u?c(u[0],u[1]):c());return d(p,function(g,m,u){var w=o(m),c=[m,g].join(","),A=l[c];return g.length>1&&w?A(u,w[0],w[1]):A(u)}(v,h,p))}},{"typedarray-pool":308}],258:[function(x,M,_){"use strict";var e=x("./lib/compile_sort.js"),o={};M.exports=function(a){var l=a.order,i=a.dtype,v=[l,i].join(":"),h=o[v];return h||(o[v]=h=e(l,i)),h(a),a}},{"./lib/compile_sort.js":257}],259:[function(x,M,_){var e=x("is-buffer"),o="undefined"!=typeof Float64Array;function a(s,d){return s[0]-d[0]}function l(){var s,d=this.stride,p=new Array(d.length);for(s=0;s<p.length;++s)p[s]=[Math.abs(d[s]),s];p.sort(a);var f=new Array(p.length);for(s=0;s<f.length;++s)f[s]=p[s][1];return f}var i={T:function(s){function d(f){this.data=f}var p=d.prototype;return p.dtype=s,p.index=function(){return-1},p.size=0,p.dimension=-1,p.shape=p.stride=p.order=[],p.lo=p.hi=p.transpose=p.step=function(){return new d(this.data)},p.get=p.set=function(){},p.pick=function(){return null},function(f){return new d(f)}},0:function(s,d){function p(g,m){this.data=g,this.offset=m}var f=p.prototype;return f.dtype=s,f.index=function(){return this.offset},f.dimension=0,f.size=1,f.shape=f.stride=f.order=[],f.lo=f.hi=f.transpose=f.step=function(){return new p(this.data,this.offset)},f.pick=function(){return d(this.data)},f.valueOf=f.get=function(){return"generic"===s?this.data.get(this.offset):this.data[this.offset]},f.set=function(g){return"generic"===s?this.data.set(this.offset,g):this.data[this.offset]=g},function(g,m,u,w){return new p(g,w)}},1:function(s,d,p){function f(m,u,w,c){this.data=m,this.shape=[u],this.stride=[w],this.offset=0|c}var g=f.prototype;return g.dtype=s,g.dimension=1,Object.defineProperty(g,"size",{get:function(){return this.shape[0]}}),g.order=[0],g.set=function(m,u){return"generic"===s?this.data.set(this.offset+this.stride[0]*m,u):this.data[this.offset+this.stride[0]*m]=u},g.get=function(m){return"generic"===s?this.data.get(this.offset+this.stride[0]*m):this.data[this.offset+this.stride[0]*m]},g.index=function(m){return this.offset+this.stride[0]*m},g.hi=function(m){return new f(this.data,"number"!=typeof m||m<0?this.shape[0]:0|m,this.stride[0],this.offset)},g.lo=function(m){var u=this.offset,w=0,c=this.shape[0],A=this.stride[0];return"number"==typeof m&&m>=0&&(u+=A*(w=0|m),c-=w),new f(this.data,c,A,u)},g.step=function(m){var u=this.shape[0],w=this.stride[0],c=this.offset,A=0,k=Math.ceil;return"number"==typeof m&&((A=0|m)<0?(c+=w*(u-1),u=k(-u/A)):u=k(u/A),w*=A),new f(this.data,u,w,c)},g.transpose=function(m){return new f(this.data,this.shape[m=void 0===m?0:0|m],this.stride[m],this.offset)},g.pick=function(m){var u=[],w=[],c=this.offset;return"number"==typeof m&&m>=0?c=c+this.stride[0]*m|0:(u.push(this.shape[0]),w.push(this.stride[0])),(0,d[u.length+1])(this.data,u,w,c)},function(m,u,w,c){return new f(m,u[0],w[0],c)}},2:function(s,d,p){function f(m,u,w,c,A,k){this.data=m,this.shape=[u,w],this.stride=[c,A],this.offset=0|k}var g=f.prototype;return g.dtype=s,g.dimension=2,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(g,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),g.set=function(m,u,w){return"generic"===s?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*u,w):this.data[this.offset+this.stride[0]*m+this.stride[1]*u]=w},g.get=function(m,u){return"generic"===s?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*u):this.data[this.offset+this.stride[0]*m+this.stride[1]*u]},g.index=function(m,u){return this.offset+this.stride[0]*m+this.stride[1]*u},g.hi=function(m,u){return new f(this.data,"number"!=typeof m||m<0?this.shape[0]:0|m,"number"!=typeof u||u<0?this.shape[1]:0|u,this.stride[0],this.stride[1],this.offset)},g.lo=function(m,u){var w=this.offset,c=0,A=this.shape[0],k=this.shape[1],C=this.stride[0],E=this.stride[1];return"number"==typeof m&&m>=0&&(w+=C*(c=0|m),A-=c),"number"==typeof u&&u>=0&&(w+=E*(c=0|u),k-=c),new f(this.data,A,k,C,E,w)},g.step=function(m,u){var w=this.shape[0],c=this.shape[1],A=this.stride[0],k=this.stride[1],C=this.offset,E=0,L=Math.ceil;return"number"==typeof m&&((E=0|m)<0?(C+=A*(w-1),w=L(-w/E)):w=L(w/E),A*=E),"number"==typeof u&&((E=0|u)<0?(C+=k*(c-1),c=L(-c/E)):c=L(c/E),k*=E),new f(this.data,w,c,A,k,C)},g.transpose=function(m,u){var w=this.shape,c=this.stride;return new f(this.data,w[m=void 0===m?0:0|m],w[u=void 0===u?1:0|u],c[m],c[u],this.offset)},g.pick=function(m,u){var w=[],c=[],A=this.offset;return"number"==typeof m&&m>=0?A=A+this.stride[0]*m|0:(w.push(this.shape[0]),c.push(this.stride[0])),"number"==typeof u&&u>=0?A=A+this.stride[1]*u|0:(w.push(this.shape[1]),c.push(this.stride[1])),(0,d[w.length+1])(this.data,w,c,A)},function(m,u,w,c){return new f(m,u[0],u[1],w[0],w[1],c)}},3:function(s,d,p){function f(m,u,w,c,A,k,C,E){this.data=m,this.shape=[u,w,c],this.stride=[A,k,C],this.offset=0|E}var g=f.prototype;return g.dtype=s,g.dimension=3,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(g,"order",{get:function(){var m=Math.abs(this.stride[0]),u=Math.abs(this.stride[1]),w=Math.abs(this.stride[2]);return m>u?u>w?[2,1,0]:m>w?[1,2,0]:[1,0,2]:m>w?[2,0,1]:w>u?[0,1,2]:[0,2,1]}}),g.set=function(m,u,w,c){return"generic"===s?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w,c):this.data[this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w]=c},g.get=function(m,u,w){return"generic"===s?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w):this.data[this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w]},g.index=function(m,u,w){return this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w},g.hi=function(m,u,w){return new f(this.data,"number"!=typeof m||m<0?this.shape[0]:0|m,"number"!=typeof u||u<0?this.shape[1]:0|u,"number"!=typeof w||w<0?this.shape[2]:0|w,this.stride[0],this.stride[1],this.stride[2],this.offset)},g.lo=function(m,u,w){var c=this.offset,A=0,k=this.shape[0],C=this.shape[1],E=this.shape[2],L=this.stride[0],D=this.stride[1],N=this.stride[2];return"number"==typeof m&&m>=0&&(c+=L*(A=0|m),k-=A),"number"==typeof u&&u>=0&&(c+=D*(A=0|u),C-=A),"number"==typeof w&&w>=0&&(c+=N*(A=0|w),E-=A),new f(this.data,k,C,E,L,D,N,c)},g.step=function(m,u,w){var c=this.shape[0],A=this.shape[1],k=this.shape[2],C=this.stride[0],E=this.stride[1],L=this.stride[2],D=this.offset,N=0,F=Math.ceil;return"number"==typeof m&&((N=0|m)<0?(D+=C*(c-1),c=F(-c/N)):c=F(c/N),C*=N),"number"==typeof u&&((N=0|u)<0?(D+=E*(A-1),A=F(-A/N)):A=F(A/N),E*=N),"number"==typeof w&&((N=0|w)<0?(D+=L*(k-1),k=F(-k/N)):k=F(k/N),L*=N),new f(this.data,c,A,k,C,E,L,D)},g.transpose=function(m,u,w){var c=this.shape,A=this.stride;return new f(this.data,c[m=void 0===m?0:0|m],c[u=void 0===u?1:0|u],c[w=void 0===w?2:0|w],A[m],A[u],A[w],this.offset)},g.pick=function(m,u,w){var c=[],A=[],k=this.offset;return"number"==typeof m&&m>=0?k=k+this.stride[0]*m|0:(c.push(this.shape[0]),A.push(this.stride[0])),"number"==typeof u&&u>=0?k=k+this.stride[1]*u|0:(c.push(this.shape[1]),A.push(this.stride[1])),"number"==typeof w&&w>=0?k=k+this.stride[2]*w|0:(c.push(this.shape[2]),A.push(this.stride[2])),(0,d[c.length+1])(this.data,c,A,k)},function(m,u,w,c){return new f(m,u[0],u[1],u[2],w[0],w[1],w[2],c)}},4:function(s,d,p){function f(m,u,w,c,A,k,C,E,L,D){this.data=m,this.shape=[u,w,c,A],this.stride=[k,C,E,L],this.offset=0|D}var g=f.prototype;return g.dtype=s,g.dimension=4,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(g,"order",{get:p}),g.set=function(m,u,w,c,A){return"generic"===s?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*c,A):this.data[this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*c]=A},g.get=function(m,u,w,c){return"generic"===s?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*c):this.data[this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*c]},g.index=function(m,u,w,c){return this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*c},g.hi=function(m,u,w,c){return new f(this.data,"number"!=typeof m||m<0?this.shape[0]:0|m,"number"!=typeof u||u<0?this.shape[1]:0|u,"number"!=typeof w||w<0?this.shape[2]:0|w,"number"!=typeof c||c<0?this.shape[3]:0|c,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},g.lo=function(m,u,w,c){var A=this.offset,k=0,C=this.shape[0],E=this.shape[1],L=this.shape[2],D=this.shape[3],N=this.stride[0],F=this.stride[1],I=this.stride[2],P=this.stride[3];return"number"==typeof m&&m>=0&&(A+=N*(k=0|m),C-=k),"number"==typeof u&&u>=0&&(A+=F*(k=0|u),E-=k),"number"==typeof w&&w>=0&&(A+=I*(k=0|w),L-=k),"number"==typeof c&&c>=0&&(A+=P*(k=0|c),D-=k),new f(this.data,C,E,L,D,N,F,I,P,A)},g.step=function(m,u,w,c){var A=this.shape[0],k=this.shape[1],C=this.shape[2],E=this.shape[3],L=this.stride[0],D=this.stride[1],N=this.stride[2],F=this.stride[3],I=this.offset,P=0,j=Math.ceil;return"number"==typeof m&&((P=0|m)<0?(I+=L*(A-1),A=j(-A/P)):A=j(A/P),L*=P),"number"==typeof u&&((P=0|u)<0?(I+=D*(k-1),k=j(-k/P)):k=j(k/P),D*=P),"number"==typeof w&&((P=0|w)<0?(I+=N*(C-1),C=j(-C/P)):C=j(C/P),N*=P),"number"==typeof c&&((P=0|c)<0?(I+=F*(E-1),E=j(-E/P)):E=j(E/P),F*=P),new f(this.data,A,k,C,E,L,D,N,F,I)},g.transpose=function(m,u,w,c){var A=this.shape,k=this.stride;return new f(this.data,A[m=void 0===m?0:0|m],A[u=void 0===u?1:0|u],A[w=void 0===w?2:0|w],A[c=void 0===c?3:0|c],k[m],k[u],k[w],k[c],this.offset)},g.pick=function(m,u,w,c){var A=[],k=[],C=this.offset;return"number"==typeof m&&m>=0?C=C+this.stride[0]*m|0:(A.push(this.shape[0]),k.push(this.stride[0])),"number"==typeof u&&u>=0?C=C+this.stride[1]*u|0:(A.push(this.shape[1]),k.push(this.stride[1])),"number"==typeof w&&w>=0?C=C+this.stride[2]*w|0:(A.push(this.shape[2]),k.push(this.stride[2])),"number"==typeof c&&c>=0?C=C+this.stride[3]*c|0:(A.push(this.shape[3]),k.push(this.stride[3])),(0,d[A.length+1])(this.data,A,k,C)},function(m,u,w,c){return new f(m,u[0],u[1],u[2],u[3],w[0],w[1],w[2],w[3],c)}},5:function(s,d,p){function f(m,u,w,c,A,k,C,E,L,D,N,F){this.data=m,this.shape=[u,w,c,A,k],this.stride=[C,E,L,D,N],this.offset=0|F}var g=f.prototype;return g.dtype=s,g.dimension=5,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(g,"order",{get:p}),g.set=function(m,u,w,c,A,k){return"generic"===s?this.data.set(this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*c+this.stride[4]*A,k):this.data[this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*c+this.stride[4]*A]=k},g.get=function(m,u,w,c,A){return"generic"===s?this.data.get(this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*c+this.stride[4]*A):this.data[this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*c+this.stride[4]*A]},g.index=function(m,u,w,c,A){return this.offset+this.stride[0]*m+this.stride[1]*u+this.stride[2]*w+this.stride[3]*c+this.stride[4]*A},g.hi=function(m,u,w,c,A){return new f(this.data,"number"!=typeof m||m<0?this.shape[0]:0|m,"number"!=typeof u||u<0?this.shape[1]:0|u,"number"!=typeof w||w<0?this.shape[2]:0|w,"number"!=typeof c||c<0?this.shape[3]:0|c,"number"!=typeof A||A<0?this.shape[4]:0|A,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},g.lo=function(m,u,w,c,A){var k=this.offset,C=0,E=this.shape[0],L=this.shape[1],D=this.shape[2],N=this.shape[3],F=this.shape[4],I=this.stride[0],P=this.stride[1],j=this.stride[2],V=this.stride[3],Z=this.stride[4];return"number"==typeof m&&m>=0&&(k+=I*(C=0|m),E-=C),"number"==typeof u&&u>=0&&(k+=P*(C=0|u),L-=C),"number"==typeof w&&w>=0&&(k+=j*(C=0|w),D-=C),"number"==typeof c&&c>=0&&(k+=V*(C=0|c),N-=C),"number"==typeof A&&A>=0&&(k+=Z*(C=0|A),F-=C),new f(this.data,E,L,D,N,F,I,P,j,V,Z,k)},g.step=function(m,u,w,c,A){var k=this.shape[0],C=this.shape[1],E=this.shape[2],L=this.shape[3],D=this.shape[4],N=this.stride[0],F=this.stride[1],I=this.stride[2],P=this.stride[3],j=this.stride[4],V=this.offset,Z=0,Y=Math.ceil;return"number"==typeof m&&((Z=0|m)<0?(V+=N*(k-1),k=Y(-k/Z)):k=Y(k/Z),N*=Z),"number"==typeof u&&((Z=0|u)<0?(V+=F*(C-1),C=Y(-C/Z)):C=Y(C/Z),F*=Z),"number"==typeof w&&((Z=0|w)<0?(V+=I*(E-1),E=Y(-E/Z)):E=Y(E/Z),I*=Z),"number"==typeof c&&((Z=0|c)<0?(V+=P*(L-1),L=Y(-L/Z)):L=Y(L/Z),P*=Z),"number"==typeof A&&((Z=0|A)<0?(V+=j*(D-1),D=Y(-D/Z)):D=Y(D/Z),j*=Z),new f(this.data,k,C,E,L,D,N,F,I,P,j,V)},g.transpose=function(m,u,w,c,A){var k=this.shape,C=this.stride;return new f(this.data,k[m=void 0===m?0:0|m],k[u=void 0===u?1:0|u],k[w=void 0===w?2:0|w],k[c=void 0===c?3:0|c],k[A=void 0===A?4:0|A],C[m],C[u],C[w],C[c],C[A],this.offset)},g.pick=function(m,u,w,c,A){var k=[],C=[],E=this.offset;return"number"==typeof m&&m>=0?E=E+this.stride[0]*m|0:(k.push(this.shape[0]),C.push(this.stride[0])),"number"==typeof u&&u>=0?E=E+this.stride[1]*u|0:(k.push(this.shape[1]),C.push(this.stride[1])),"number"==typeof w&&w>=0?E=E+this.stride[2]*w|0:(k.push(this.shape[2]),C.push(this.stride[2])),"number"==typeof c&&c>=0?E=E+this.stride[3]*c|0:(k.push(this.shape[3]),C.push(this.stride[3])),"number"==typeof A&&A>=0?E=E+this.stride[4]*A|0:(k.push(this.shape[4]),C.push(this.stride[4])),(0,d[k.length+1])(this.data,k,C,E)},function(m,u,w,c){return new f(m,u[0],u[1],u[2],u[3],u[4],w[0],w[1],w[2],w[3],w[4],c)}}};function v(s,d){var p=-1===d?"T":String(d),f=i[p];return-1===d?f(s):0===d?f(s,h[s][0]):f(s,h[s],l)}var h={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};M.exports=function(s,d,p,f){if(void 0===s)return(0,h.array[0])([]);"number"==typeof s&&(s=[s]),void 0===d&&(d=[s.length]);var g=d.length;if(void 0===p){p=new Array(g);for(var m=g-1,u=1;m>=0;--m)p[m]=u,u*=d[m]}if(void 0===f)for(f=0,m=0;m<g;++m)p[m]<0&&(f-=(d[m]-1)*p[m]);for(var w=function(A){if(e(A))return"buffer";if(o)switch(Object.prototype.toString.call(A)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(A)?"array":"generic"}(s),c=h[w];c.length<=g+1;)c.push(v(w,c.length-1));return(0,c[g+1])(s,d,p,f)}},{"is-buffer":237}],260:[function(x,M,_){"use strict";var e=x("double-bits"),o=Math.pow(2,-1074);M.exports=function(a,l){if(isNaN(a)||isNaN(l))return NaN;if(a===l)return a;if(0===a)return l<0?-o:o;var i=e.hi(a),v=e.lo(a);return l>a==a>0?v===-1>>>0?(i+=1,v=0):v+=1:0===v?(v=-1>>>0,i-=1):v-=1,e.pack(v,i)}},{"double-bits":64}],261:[function(x,M,_){_.vertexNormals=function(e,o,a){for(var l=o.length,i=new Array(l),v=void 0===a?1e-6:a,h=0;h<l;++h)i[h]=[0,0,0];for(h=0;h<e.length;++h)for(var s=e[h],p=s[s.length-1],f=s[0],g=0;g<s.length;++g){for(var m=o[p],u=o[p=f],w=o[f=s[(g+1)%s.length]],c=new Array(3),A=0,k=new Array(3),C=0,E=0;E<3;++E)c[E]=m[E]-u[E],A+=c[E]*c[E],k[E]=w[E]-u[E],C+=k[E]*k[E];if(A*C>v){var L=i[p],D=1/Math.sqrt(A*C);for(E=0;E<3;++E){var N=(E+1)%3,F=(E+2)%3;L[E]+=D*(k[N]*c[F]-k[F]*c[N])}}}for(h=0;h<l;++h){L=i[h];var I=0;for(E=0;E<3;++E)I+=L[E]*L[E];if(I>v)for(D=1/Math.sqrt(I),E=0;E<3;++E)L[E]*=D;else for(E=0;E<3;++E)L[E]=0}return i},_.faceNormals=function(e,o,a){for(var l=e.length,i=new Array(l),v=void 0===a?1e-6:a,h=0;h<l;++h){for(var s=e[h],d=new Array(3),p=0;p<3;++p)d[p]=o[s[p]];var f=new Array(3),g=new Array(3);for(p=0;p<3;++p)f[p]=d[1][p]-d[0][p],g[p]=d[2][p]-d[0][p];var m=new Array(3),u=0;for(p=0;p<3;++p){var w=(p+1)%3,c=(p+2)%3;m[p]=f[w]*g[c]-f[c]*g[w],u+=m[p]*m[p]}for(u=u>v?1/Math.sqrt(u):0,p=0;p<3;++p)m[p]*=u;i[h]=m}return i}},{}],262:[function(x,M,_){"use strict";M.exports=function(e,o,a,l,i,v,h,s,d,p){var f=o+v+p;if(g>0){var g=Math.sqrt(f+1);e[0]=.5*(h-d)/g,e[1]=.5*(s-l)/g,e[2]=.5*(a-v)/g,e[3]=.5*g}else{var m=Math.max(o,v,p);g=Math.sqrt(2*m-f+1),o>=m?(e[0]=.5*g,e[1]=.5*(i+a)/g,e[2]=.5*(s+l)/g,e[3]=.5*(h-d)/g):v>=m?(e[0]=.5*(a+i)/g,e[1]=.5*g,e[2]=.5*(d+h)/g,e[3]=.5*(s-l)/g):(e[0]=.5*(l+s)/g,e[1]=.5*(h+d)/g,e[2]=.5*g,e[3]=.5*(a-i)/g)}return e}},{}],263:[function(x,M,_){"use strict";M.exports=function(f){var g=(f=f||{}).center||[0,0,0],m=f.rotation||[0,0,0,1],u=f.radius||1;g=[].slice.call(g,0,3),s(m=[].slice.call(m,0,4),m);var w=new d(m,g,Math.log(u));return w.setDistanceLimits(f.zoomMin,f.zoomMax),("eye"in f||"up"in f)&&w.lookAt(0,f.eye,f.center,f.up),w};var e=x("filtered-vector"),o=x("gl-mat4/lookAt"),a=x("gl-mat4/fromQuat"),l=x("gl-mat4/invert"),i=x("./lib/quatFromFrame");function v(f,g,m){return Math.sqrt(Math.pow(f,2)+Math.pow(g,2)+Math.pow(m,2))}function h(f,g,m,u){return Math.sqrt(Math.pow(f,2)+Math.pow(g,2)+Math.pow(m,2)+Math.pow(u,2))}function s(f,g){var m=g[0],u=g[1],w=g[2],c=g[3],A=h(m,u,w,c);A>1e-6?(f[0]=m/A,f[1]=u/A,f[2]=w/A,f[3]=c/A):(f[0]=f[1]=f[2]=0,f[3]=1)}function d(f,g,m){this.radius=e([m]),this.center=e(g),this.rotation=e(f),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var p=d.prototype;p.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},p.recalcMatrix=function(f){this.radius.curve(f),this.center.curve(f),this.rotation.curve(f);var g=this.computedRotation;s(g,g);var m=this.computedMatrix;a(m,g);var u=this.computedCenter,w=this.computedEye,c=this.computedUp,A=Math.exp(this.computedRadius[0]);w[0]=u[0]+A*m[2],w[1]=u[1]+A*m[6],w[2]=u[2]+A*m[10],c[0]=m[1],c[1]=m[5],c[2]=m[9];for(var k=0;k<3;++k){for(var C=0,E=0;E<3;++E)C+=m[k+4*E]*w[E];m[12+k]=-C}},p.getMatrix=function(f,g){this.recalcMatrix(f);var m=this.computedMatrix;if(g){for(var u=0;u<16;++u)g[u]=m[u];return g}return m},p.idle=function(f){this.center.idle(f),this.radius.idle(f),this.rotation.idle(f)},p.flush=function(f){this.center.flush(f),this.radius.flush(f),this.rotation.flush(f)},p.pan=function(f,g,m,u){g=g||0,m=m||0,u=u||0,this.recalcMatrix(f);var w=this.computedMatrix,c=w[1],A=w[5],k=w[9],C=v(c,A,k),E=w[0],L=w[4],D=w[8],N=E*(c/=C)+L*(A/=C)+D*(k/=C),F=v(E-=c*N,L-=A*N,D-=k*N),I=w[2],P=w[6],j=w[10],V=I*c+P*A+j*k,Z=I*(E/=F)+P*(L/=F)+j*(D/=F),Y=v(I-=V*c+Z*E,P-=V*A+Z*L,j-=V*k+Z*D);I/=Y,P/=Y,j/=Y,this.center.move(f,E*g+c*m,L*g+A*m,D*g+k*m);var K=Math.exp(this.computedRadius[0]);K=Math.max(1e-4,K+u),this.radius.set(f,Math.log(K))},p.rotate=function(f,g,m,u){this.recalcMatrix(f);var w=this.computedMatrix,D=w[2],N=w[6],F=w[10],I=(g=g||0)*w[0]+(m=m||0)*w[1],P=g*w[4]+m*w[5],j=g*w[8]+m*w[9],V=-(N*j-F*P),Z=-(F*I-D*j),Y=-(D*P-N*I),ee=Math.sqrt(Math.max(0,1-Math.pow(V,2)-Math.pow(Z,2)-Math.pow(Y,2))),re=h(V,Z,Y,ee);re>1e-6?(V/=re,Z/=re,Y/=re,ee/=re):(V=Z=Y=0,ee=1);var X=this.computedRotation,K=X[0],ie=X[1],q=X[2],U=X[3],W=K*ee+U*V+ie*Y-q*Z,ae=ie*ee+U*Z+q*V-K*Y,G=q*ee+U*Y+K*Z-ie*V,te=U*ee-K*V-ie*Z-q*Y;if(u){V=D,Z=N,Y=F;var ne=Math.sin(u)/v(V,Z,Y);V*=ne,Z*=ne,Y*=ne,te=te*(ee=Math.cos(g))-(W=W*ee+te*V+ae*Y-G*Z)*V-(ae=ae*ee+te*Z+G*V-W*Y)*Z-(G=G*ee+te*Y+W*Z-ae*V)*Y}var le=h(W,ae,G,te);le>1e-6?(W/=le,ae/=le,G/=le,te/=le):(W=ae=G=0,te=1),this.rotation.set(f,W,ae,G,te)},p.lookAt=function(f,g,m,u){this.recalcMatrix(f);var w=this.computedMatrix;o(w,g=g||this.computedEye,m=m||this.computedCenter,u=u||this.computedUp);var c=this.computedRotation;i(c,w[0],w[1],w[2],w[4],w[5],w[6],w[8],w[9],w[10]),s(c,c),this.rotation.set(f,c[0],c[1],c[2],c[3]);for(var A=0,k=0;k<3;++k)A+=Math.pow(m[k]-g[k],2);this.radius.set(f,.5*Math.log(Math.max(A,1e-6))),this.center.set(f,m[0],m[1],m[2])},p.translate=function(f,g,m,u){this.center.move(f,g||0,m||0,u||0)},p.setMatrix=function(f,g){var m=this.computedRotation;i(m,g[0],g[1],g[2],g[4],g[5],g[6],g[8],g[9],g[10]),s(m,m),this.rotation.set(f,m[0],m[1],m[2],m[3]);var u=this.computedMatrix;l(u,g);var w=u[15];if(Math.abs(w)>1e-6){var c=u[12]/w,A=u[13]/w,k=u[14]/w;this.recalcMatrix(f);var C=Math.exp(this.computedRadius[0]);this.center.set(f,c-u[2]*C,A-u[6]*C,k-u[10]*C),this.radius.idle(f)}else this.center.idle(f),this.radius.idle(f)},p.setDistance=function(f,g){g>0&&this.radius.set(f,Math.log(g))},p.setDistanceLimits=function(f,g){f=f>0?Math.log(f):-1/0,g=g>0?Math.log(g):1/0,g=Math.max(g,f),this.radius.bounds[0][0]=f,this.radius.bounds[1][0]=g},p.getDistanceLimits=function(f){var g=this.radius.bounds;return f?(f[0]=Math.exp(g[0][0]),f[1]=Math.exp(g[1][0]),f):[Math.exp(g[0][0]),Math.exp(g[1][0])]},p.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},p.fromJSON=function(f){var g=this.lastT(),m=f.center;m&&this.center.set(g,m[0],m[1],m[2]);var u=f.rotation;u&&this.rotation.set(g,u[0],u[1],u[2],u[3]);var w=f.distance;w&&w>0&&this.radius.set(g,Math.log(w)),this.setDistanceLimits(f.zoomMin,f.zoomMax)}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(x,M,_){"use strict";var e=x("repeat-string");M.exports=function(o,a,l){return e(l=void 0!==l?l+"":" ",a)+o}},{"repeat-string":277}],265:[function(x,M,_){M.exports=function(e,o){o||(o=[0,""]),e=String(e);var a=parseFloat(e,10);return o[0]=a,o[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",o}},{}],266:[function(x,M,_){"use strict";M.exports=function(o,a){for(var l=0|a.length,i=o.length,v=[new Array(l),new Array(l)],h=0;h<l;++h)v[0][h]=[],v[1][h]=[];for(h=0;h<i;++h){var s=o[h];v[0][s[0]].push(s),v[1][s[1]].push(s)}var k,d=[];for(h=0;h<l;++h)v[0][h].length+v[1][h].length===0&&d.push([h]);function p(A,k){var C=v[k][A[k]];C.splice(C.indexOf(A),1)}function f(A,k,C){for(var E,L,D,N=0;N<2;++N)if(v[N][k].length>0){E=v[N][k][0],D=N;break}L=E[1^D];for(var F=0;F<2;++F)for(var I=v[F][k],P=0;P<I.length;++P){var j=I[P],V=j[1^F];e(a[A],a[k],a[L],a[V])>0&&(E=j,L=V,D=F)}return C||E&&p(E,D),L}function g(A,k){var C=v[k][A][0],E=[A];p(C,k);for(var L=C[1^k];;){for(;L!==A;)E.push(L),L=f(E[E.length-2],L,!1);if(v[0][A].length+v[1][A].length===0)break;var D=E[E.length-1],N=A,F=E[1],I=f(D,N,!0);if(e(a[D],a[N],a[F],a[I])<0)break;E.push(A),L=f(D,N)}return E}for(h=0;h<l;++h)for(var u=0;u<2;++u){for(var w=[];v[u][h].length>0;){var c=g(h,u);(k=c)[1]===k[k.length-1]?w.push.apply(w,c):(w.length>0&&d.push(w),w=c)}w.length>0&&d.push(w)}return d};var e=x("compare-angle")},{"compare-angle":54}],267:[function(x,M,_){"use strict";M.exports=function(o,a){for(var l=e(o,a.length),i=new Array(a.length),v=new Array(a.length),h=[],s=0;s<a.length;++s){var d=l[s].length;v[s]=d,i[s]=!0,d<=1&&h.push(s)}for(;h.length>0;){var p=h.pop();i[p]=!1;var f=l[p];for(s=0;s<f.length;++s){var g=f[s];0==--v[g]&&h.push(g)}}var m=new Array(a.length),u=[];for(s=0;s<a.length;++s)i[s]?(m[s]=p=u.length,u.push(a[s])):m[s]=-1;var w=[];for(s=0;s<o.length;++s){var c=o[s];i[c[0]]&&i[c[1]]&&w.push([m[c[0]],m[c[1]]])}return[w,u]};var e=x("edges-to-adjacency-list")},{"edges-to-adjacency-list":66}],268:[function(x,M,_){"use strict";M.exports=function(d,p){for(var f=h(d,p),g=(p=f[1]).length,m=e(d=f[0],p.length),u=0;u<g;++u)if(m[u].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var w=o(d,p),c=(w=w.filter(function(de){for(var _e=de.length,me=[0],we=0;we<_e;++we){var De=p[de[we]],Le=p[de[(we+1)%_e]],Ie=l(-De[0],De[1]),je=l(-De[0],Le[1]),ye=l(Le[0],De[1]),Me=l(Le[0],Le[1]);me=i(me,i(i(Ie,je),i(ye,Me)))}return me[me.length-1]>0})).length,A=new Array(c),k=new Array(c);for(u=0;u<c;++u){A[u]=u;var C=new Array(c),E=w[u].map(function(de){return p[de]}),L=a([E]),D=0;e:for(var N=0;N<c;++N)if(C[N]=0,u!==N){for(var F=(ue=w[N]).length,I=0;I<F;++I){var P=L(p[ue[I]]);if(0!==P){P<0&&(C[N]=1,D+=1);continue e}}C[N]=1,D+=1}k[u]=[D,u,C]}for(k.sort(function(de,_e){return _e[0]-de[0]}),u=0;u<c;++u){var j=(C=k[u])[1],V=C[2];for(N=0;N<c;++N)V[N]&&(A[N]=j)}var Z=function(de){for(var _e=new Array(de),me=0;me<de;++me)_e[me]=[];return _e}(c);for(u=0;u<c;++u)Z[u].push(A[u]),Z[A[u]].push(u);var Y={},ee=s(g,!1);for(u=0;u<c;++u)for(F=(ue=w[u]).length,N=0;N<F;++N){var re=ue[N],X=ue[(N+1)%F],K=Math.min(re,X)+":"+Math.max(re,X);if(K in Y){var ie=Y[K];Z[ie].push(u),Z[u].push(ie),ee[re]=ee[X]=!0}else Y[K]=u}function q(de){for(var _e=de.length,me=0;me<_e;++me)if(!ee[de[me]])return!1;return!0}var U=[],W=s(c,-1);for(u=0;u<c;++u)A[u]!==u||q(w[u])?W[u]=-1:(U.push(u),W[u]=0);for(f=[];U.length>0;){var ae=U.pop(),G=Z[ae];v(G,function(de,_e){return de-_e});var te,ne=G.length,le=W[ae];if(0===le){var ue=w[ae];te=[ue]}for(u=0;u<ne;++u){var pe=G[u];W[pe]>=0||(W[pe]=1^le,U.push(pe),0===le&&(q(ue=w[pe])||(ue.reverse(),te.push(ue))))}0===le&&f.push(te)}return f};var e=x("edges-to-adjacency-list"),o=x("planar-dual"),a=x("point-in-big-polygon"),l=x("two-product"),i=x("robust-sum"),v=x("uniq"),h=x("./lib/trim-leaves");function s(d,p){for(var f=new Array(d),g=0;g<d;++g)f[g]=p;return f}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(x,M,_){M.exports=function(s){for(var d=s.length,p=[],f=[],g=0;g<d;++g)for(var m=s[g],u=m.length,w=u-1,c=0;c<u;w=c++){var A=m[w],k=m[c];A[0]===k[0]?f.push([A,k]):p.push([A,k])}if(0===p.length)return 0===f.length?h:(C=v(f),function(D){return C(D[0],D[1])?0:1});var C,D,N,E=o(p),L=(D=E.slabs,N=E.coordinates,function(F){var I=l.le(N,F[0]);if(I<0)return 1;var P=D[I];if(!P){if(!(I>0&&N[I]===F[0]))return 1;P=D[I-1]}for(var j=1;P;){var V=P.key,Z=e(F,V[0],V[1]);if(V[0][0]<V[1][0])if(Z<0)P=P.left;else{if(!(Z>0))return 0;j=-1,P=P.right}else if(Z>0)P=P.left;else{if(!(Z<0))return 0;j=1,P=P.right}}return j});return 0===f.length?L:function(D,N){return function(F){return D(F[0],F[1])?0:N(F)}}(v(f),L)};var e=x("robust-orientation")[3],o=x("slab-decomposition"),a=x("interval-tree-1d"),l=x("binary-search-bounds");function i(){return!0}function v(s){for(var d={},p=0;p<s.length;++p){var f=s[p],g=f[0][0],m=f[0][1],u=f[1][1],w=[Math.min(m,u),Math.max(m,u)];g in d?d[g].push(w):d[g]=[w]}var C,c={},A=Object.keys(d);for(p=0;p<A.length;++p)c[A[p]]=a(d[A[p]]);return C=c,function(E,L){var D=C[E];return!!D&&!!D.queryPoint(L,i)}}function h(s){return 1}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(x,M,_){"use strict";var e=new Float64Array(4),o=new Float64Array(4),a=new Float64Array(4);M.exports=function(l,i,v,h,s){e.length<h.length&&(e=new Float64Array(h.length),o=new Float64Array(h.length),a=new Float64Array(h.length));for(var d=0;d<h.length;++d)e[d]=l[d]-h[d],o[d]=i[d]-l[d],a[d]=v[d]-l[d];var p=0,f=0,g=0,m=0,u=0,w=0;for(d=0;d<h.length;++d){var c=o[d],A=a[d],k=e[d];p+=c*c,f+=c*A,g+=A*A,m+=k*c,u+=k*A,w+=k*k}var C,E,L,D,N,F=Math.abs(p*g-f*f),I=f*u-g*m,P=f*m-p*u;if(I+P<=F)if(I<0)P<0&&m<0?(P=0,-m>=p?(I=1,C=p+2*m+w):C=m*(I=-m/p)+w):(I=0,u>=0?(P=0,C=w):-u>=g?(P=1,C=g+2*u+w):C=u*(P=-u/g)+w);else if(P<0)P=0,m>=0?(I=0,C=w):-m>=p?(I=1,C=p+2*m+w):C=m*(I=-m/p)+w;else{var j=1/F;C=(I*=j)*(p*I+f*(P*=j)+2*m)+P*(f*I+g*P+2*u)+w}else I<0?(L=g+u)>(E=f+m)?(D=L-E)>=(N=p-2*f+g)?(I=1,P=0,C=p+2*m+w):C=(I=D/N)*(p*I+f*(P=1-I)+2*m)+P*(f*I+g*P+2*u)+w:(I=0,L<=0?(P=1,C=g+2*u+w):u>=0?(P=0,C=w):C=u*(P=-u/g)+w):P<0?(L=p+m)>(E=f+u)?(D=L-E)>=(N=p-2*f+g)?(P=1,I=0,C=g+2*u+w):C=(I=1-(P=D/N))*(p*I+f*P+2*m)+P*(f*I+g*P+2*u)+w:(P=0,L<=0?(I=1,C=p+2*m+w):m>=0?(I=0,C=w):C=m*(I=-m/p)+w):(D=g+u-f-m)<=0?(I=0,P=1,C=g+2*u+w):D>=(N=p-2*f+g)?(I=1,P=0,C=p+2*m+w):C=(I=D/N)*(p*I+f*(P=1-I)+2*m)+P*(f*I+g*P+2*u)+w;var V=1-I-P;for(d=0;d<h.length;++d)s[d]=V*l[d]+I*i[d]+P*v[d];return C<0?0:C}},{}],271:[function(x,M,_){M.exports=x("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(x,M,_){"use strict";var e=x("big-rat/add");M.exports=function(o,a){for(var l=o.length,i=new Array(l),v=0;v<l;++v)i[v]=e(o[v],a[v]);return i}},{"big-rat/add":15}],273:[function(x,M,_){"use strict";M.exports=function(o){for(var a=new Array(o.length),l=0;l<o.length;++l)a[l]=e(o[l]);return a};var e=x("big-rat")},{"big-rat":18}],274:[function(x,M,_){"use strict";var e=x("big-rat"),o=x("big-rat/mul");M.exports=function(a,l){for(var i=e(l),v=a.length,h=new Array(v),s=0;s<v;++s)h[s]=o(a[s],i);return h}},{"big-rat":18,"big-rat/mul":27}],275:[function(x,M,_){"use strict";var e=x("big-rat/sub");M.exports=function(o,a){for(var l=o.length,i=new Array(l),v=0;v<l;++v)i[v]=e(o[v],a[v]);return i}},{"big-rat/sub":29}],276:[function(x,M,_){"use strict";var e=x("compare-cell"),o=x("compare-oriented-cell"),a=x("cell-orientation");M.exports=function(l){l.sort(o);for(var i=l.length,v=0,h=0;h<i;++h){var s=l[h],d=a(s);if(0!==d){if(v>0){var p=l[v-1];if(0===e(s,p)&&a(p)!==d){v-=1;continue}}l[v++]=s}}return l.length=v,l}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(x,M,_){"use strict";var e,o="";M.exports=function(a,l){if("string"!=typeof a)throw new TypeError("expected a string");if(1===l)return a;if(2===l)return a+a;var i=a.length*l;if(e!==a||void 0===e)e=a,o="";else if(o.length>=i)return o.substr(0,i);for(;i>o.length&&l>1;)1&l&&(o+=a),l>>=1,a+=a;return o=(o+=a).substr(0,i)}},{}],278:[function(x,M,_){(function(e){(function(){M.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,void 0!==y?y:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],279:[function(x,M,_){"use strict";M.exports=function(e){for(var o=e.length,a=e[e.length-1],l=o,i=o-2;i>=0;--i){var v=a,h=e[i];(d=h-((a=v+h)-v))&&(e[--l]=a,a=d)}var s=0;for(i=l;i<o;++i){var d;(d=(h=a)-((a=(v=e[i])+h)-v))&&(e[s++]=d)}return e[s++]=a,e.length=s,e}},{}],280:[function(x,M,_){"use strict";var e=x("two-product"),o=x("robust-sum"),a=x("robust-scale"),l=x("robust-compress");function i(g,m,u,w){return function(c){return w(g(u(c[0][0],c[1][1]),u(-c[0][1],c[1][0])))}}function v(g,m,u,w){return function(c){return w(g(m(g(u(c[1][1],c[2][2]),u(-c[1][2],c[2][1])),c[0][0]),g(m(g(u(c[1][0],c[2][2]),u(-c[1][2],c[2][0])),-c[0][1]),m(g(u(c[1][0],c[2][1]),u(-c[1][1],c[2][0])),c[0][2]))))}}function h(g,m,u,w){return function(c){return w(g(g(m(g(m(g(u(c[2][2],c[3][3]),u(-c[2][3],c[3][2])),c[1][1]),g(m(g(u(c[2][1],c[3][3]),u(-c[2][3],c[3][1])),-c[1][2]),m(g(u(c[2][1],c[3][2]),u(-c[2][2],c[3][1])),c[1][3]))),c[0][0]),m(g(m(g(u(c[2][2],c[3][3]),u(-c[2][3],c[3][2])),c[1][0]),g(m(g(u(c[2][0],c[3][3]),u(-c[2][3],c[3][0])),-c[1][2]),m(g(u(c[2][0],c[3][2]),u(-c[2][2],c[3][0])),c[1][3]))),-c[0][1])),g(m(g(m(g(u(c[2][1],c[3][3]),u(-c[2][3],c[3][1])),c[1][0]),g(m(g(u(c[2][0],c[3][3]),u(-c[2][3],c[3][0])),-c[1][1]),m(g(u(c[2][0],c[3][1]),u(-c[2][1],c[3][0])),c[1][3]))),c[0][2]),m(g(m(g(u(c[2][1],c[3][2]),u(-c[2][2],c[3][1])),c[1][0]),g(m(g(u(c[2][0],c[3][2]),u(-c[2][2],c[3][0])),-c[1][1]),m(g(u(c[2][0],c[3][1]),u(-c[2][1],c[3][0])),c[1][2]))),-c[0][3]))))}}function s(g,m,u,w){return function(c){return w(g(g(m(g(g(m(g(m(g(u(c[3][3],c[4][4]),u(-c[3][4],c[4][3])),c[2][2]),g(m(g(u(c[3][2],c[4][4]),u(-c[3][4],c[4][2])),-c[2][3]),m(g(u(c[3][2],c[4][3]),u(-c[3][3],c[4][2])),c[2][4]))),c[1][1]),m(g(m(g(u(c[3][3],c[4][4]),u(-c[3][4],c[4][3])),c[2][1]),g(m(g(u(c[3][1],c[4][4]),u(-c[3][4],c[4][1])),-c[2][3]),m(g(u(c[3][1],c[4][3]),u(-c[3][3],c[4][1])),c[2][4]))),-c[1][2])),g(m(g(m(g(u(c[3][2],c[4][4]),u(-c[3][4],c[4][2])),c[2][1]),g(m(g(u(c[3][1],c[4][4]),u(-c[3][4],c[4][1])),-c[2][2]),m(g(u(c[3][1],c[4][2]),u(-c[3][2],c[4][1])),c[2][4]))),c[1][3]),m(g(m(g(u(c[3][2],c[4][3]),u(-c[3][3],c[4][2])),c[2][1]),g(m(g(u(c[3][1],c[4][3]),u(-c[3][3],c[4][1])),-c[2][2]),m(g(u(c[3][1],c[4][2]),u(-c[3][2],c[4][1])),c[2][3]))),-c[1][4]))),c[0][0]),m(g(g(m(g(m(g(u(c[3][3],c[4][4]),u(-c[3][4],c[4][3])),c[2][2]),g(m(g(u(c[3][2],c[4][4]),u(-c[3][4],c[4][2])),-c[2][3]),m(g(u(c[3][2],c[4][3]),u(-c[3][3],c[4][2])),c[2][4]))),c[1][0]),m(g(m(g(u(c[3][3],c[4][4]),u(-c[3][4],c[4][3])),c[2][0]),g(m(g(u(c[3][0],c[4][4]),u(-c[3][4],c[4][0])),-c[2][3]),m(g(u(c[3][0],c[4][3]),u(-c[3][3],c[4][0])),c[2][4]))),-c[1][2])),g(m(g(m(g(u(c[3][2],c[4][4]),u(-c[3][4],c[4][2])),c[2][0]),g(m(g(u(c[3][0],c[4][4]),u(-c[3][4],c[4][0])),-c[2][2]),m(g(u(c[3][0],c[4][2]),u(-c[3][2],c[4][0])),c[2][4]))),c[1][3]),m(g(m(g(u(c[3][2],c[4][3]),u(-c[3][3],c[4][2])),c[2][0]),g(m(g(u(c[3][0],c[4][3]),u(-c[3][3],c[4][0])),-c[2][2]),m(g(u(c[3][0],c[4][2]),u(-c[3][2],c[4][0])),c[2][3]))),-c[1][4]))),-c[0][1])),g(m(g(g(m(g(m(g(u(c[3][3],c[4][4]),u(-c[3][4],c[4][3])),c[2][1]),g(m(g(u(c[3][1],c[4][4]),u(-c[3][4],c[4][1])),-c[2][3]),m(g(u(c[3][1],c[4][3]),u(-c[3][3],c[4][1])),c[2][4]))),c[1][0]),m(g(m(g(u(c[3][3],c[4][4]),u(-c[3][4],c[4][3])),c[2][0]),g(m(g(u(c[3][0],c[4][4]),u(-c[3][4],c[4][0])),-c[2][3]),m(g(u(c[3][0],c[4][3]),u(-c[3][3],c[4][0])),c[2][4]))),-c[1][1])),g(m(g(m(g(u(c[3][1],c[4][4]),u(-c[3][4],c[4][1])),c[2][0]),g(m(g(u(c[3][0],c[4][4]),u(-c[3][4],c[4][0])),-c[2][1]),m(g(u(c[3][0],c[4][1]),u(-c[3][1],c[4][0])),c[2][4]))),c[1][3]),m(g(m(g(u(c[3][1],c[4][3]),u(-c[3][3],c[4][1])),c[2][0]),g(m(g(u(c[3][0],c[4][3]),u(-c[3][3],c[4][0])),-c[2][1]),m(g(u(c[3][0],c[4][1]),u(-c[3][1],c[4][0])),c[2][3]))),-c[1][4]))),c[0][2]),g(m(g(g(m(g(m(g(u(c[3][2],c[4][4]),u(-c[3][4],c[4][2])),c[2][1]),g(m(g(u(c[3][1],c[4][4]),u(-c[3][4],c[4][1])),-c[2][2]),m(g(u(c[3][1],c[4][2]),u(-c[3][2],c[4][1])),c[2][4]))),c[1][0]),m(g(m(g(u(c[3][2],c[4][4]),u(-c[3][4],c[4][2])),c[2][0]),g(m(g(u(c[3][0],c[4][4]),u(-c[3][4],c[4][0])),-c[2][2]),m(g(u(c[3][0],c[4][2]),u(-c[3][2],c[4][0])),c[2][4]))),-c[1][1])),g(m(g(m(g(u(c[3][1],c[4][4]),u(-c[3][4],c[4][1])),c[2][0]),g(m(g(u(c[3][0],c[4][4]),u(-c[3][4],c[4][0])),-c[2][1]),m(g(u(c[3][0],c[4][1]),u(-c[3][1],c[4][0])),c[2][4]))),c[1][2]),m(g(m(g(u(c[3][1],c[4][2]),u(-c[3][2],c[4][1])),c[2][0]),g(m(g(u(c[3][0],c[4][2]),u(-c[3][2],c[4][0])),-c[2][1]),m(g(u(c[3][0],c[4][1]),u(-c[3][1],c[4][0])),c[2][2]))),-c[1][4]))),-c[0][3]),m(g(g(m(g(m(g(u(c[3][2],c[4][3]),u(-c[3][3],c[4][2])),c[2][1]),g(m(g(u(c[3][1],c[4][3]),u(-c[3][3],c[4][1])),-c[2][2]),m(g(u(c[3][1],c[4][2]),u(-c[3][2],c[4][1])),c[2][3]))),c[1][0]),m(g(m(g(u(c[3][2],c[4][3]),u(-c[3][3],c[4][2])),c[2][0]),g(m(g(u(c[3][0],c[4][3]),u(-c[3][3],c[4][0])),-c[2][2]),m(g(u(c[3][0],c[4][2]),u(-c[3][2],c[4][0])),c[2][3]))),-c[1][1])),g(m(g(m(g(u(c[3][1],c[4][3]),u(-c[3][3],c[4][1])),c[2][0]),g(m(g(u(c[3][0],c[4][3]),u(-c[3][3],c[4][0])),-c[2][1]),m(g(u(c[3][0],c[4][1]),u(-c[3][1],c[4][0])),c[2][3]))),c[1][2]),m(g(m(g(u(c[3][1],c[4][2]),u(-c[3][2],c[4][1])),c[2][0]),g(m(g(u(c[3][0],c[4][2]),u(-c[3][2],c[4][0])),-c[2][1]),m(g(u(c[3][0],c[4][1]),u(-c[3][1],c[4][0])),c[2][2]))),-c[1][3]))),c[0][4])))))}}function d(g){return(2===g?i:3===g?v:4===g?h:5===g?s:void 0)(o,a,e,l)}var p=[function(){return[0]},function(g){return[g[0][0]]}];function f(g,m,u,w,c,A,k,C){return function(E){switch(E.length){case 0:return g(E);case 1:return m(E);case 2:return u(E);case 3:return w(E);case 4:return c(E);case 5:return A(E)}var L=k[E.length];return L||(L=k[E.length]=C(E.length)),L(E)}}!function(){for(;p.length<6;)p.push(d(p.length));M.exports=f.apply(void 0,p.concat([p,d]));for(var g=0;g<p.length;++g)M.exports[g]=p[g]}()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(x,M,_){"use strict";var e=x("two-product"),o=x("robust-sum");M.exports=function(a,l){for(var i=e(a[0],l[0]),v=1;v<a.length;++v)i=o(i,e(a[v],l[v]));return i}},{"robust-sum":289,"two-product":306}],282:[function(x,M,_){"use strict";var e=x("two-product"),o=x("robust-sum"),a=x("robust-subtract"),l=x("robust-scale");function i(m){return(3===m?v:4===m?h:5===m?s:d)(o,a,e,l)}function v(m,u,w,c){return function(A,k,C){var E=w(A[0],A[0]),L=c(E,k[0]),D=c(E,C[0]),N=w(k[0],k[0]),F=c(N,A[0]),I=c(N,C[0]),P=w(C[0],C[0]),j=c(P,A[0]),V=c(P,k[0]),Z=m(u(V,I),u(F,L)),Y=u(j,D),ee=u(Z,Y);return ee[ee.length-1]}}function h(m,u,w,c){return function(A,k,C,E){var L=m(w(A[0],A[0]),w(A[1],A[1])),D=c(L,k[0]),N=c(L,C[0]),F=c(L,E[0]),I=m(w(k[0],k[0]),w(k[1],k[1])),P=c(I,A[0]),j=c(I,C[0]),V=c(I,E[0]),Z=m(w(C[0],C[0]),w(C[1],C[1])),Y=c(Z,A[0]),ee=c(Z,k[0]),re=c(Z,E[0]),X=m(w(E[0],E[0]),w(E[1],E[1])),K=c(X,A[0]),ie=c(X,k[0]),q=c(X,C[0]),U=m(m(c(u(q,re),k[1]),m(c(u(ie,V),-C[1]),c(u(ee,j),E[1]))),m(c(u(ie,V),A[1]),m(c(u(K,F),-k[1]),c(u(P,D),E[1])))),W=m(m(c(u(q,re),A[1]),m(c(u(K,F),-C[1]),c(u(Y,N),E[1]))),m(c(u(ee,j),A[1]),m(c(u(Y,N),-k[1]),c(u(P,D),C[1])))),ae=u(U,W);return ae[ae.length-1]}}function s(m,u,w,c){return function(A,k,C,E,L){var D=m(w(A[0],A[0]),m(w(A[1],A[1]),w(A[2],A[2]))),N=c(D,k[0]),F=c(D,C[0]),I=c(D,E[0]),P=c(D,L[0]),j=m(w(k[0],k[0]),m(w(k[1],k[1]),w(k[2],k[2]))),V=c(j,A[0]),Z=c(j,C[0]),Y=c(j,E[0]),ee=c(j,L[0]),re=m(w(C[0],C[0]),m(w(C[1],C[1]),w(C[2],C[2]))),X=c(re,A[0]),K=c(re,k[0]),ie=c(re,E[0]),q=c(re,L[0]),U=m(w(E[0],E[0]),m(w(E[1],E[1]),w(E[2],E[2]))),W=c(U,A[0]),ae=c(U,k[0]),G=c(U,C[0]),te=c(U,L[0]),ne=m(w(L[0],L[0]),m(w(L[1],L[1]),w(L[2],L[2]))),le=c(ne,A[0]),ue=c(ne,k[0]),pe=c(ne,C[0]),de=c(ne,E[0]),_e=m(m(m(c(m(c(u(de,te),C[1]),m(c(u(pe,q),-E[1]),c(u(G,ie),L[1]))),k[2]),m(c(m(c(u(de,te),k[1]),m(c(u(ue,ee),-E[1]),c(u(ae,Y),L[1]))),-C[2]),c(m(c(u(pe,q),k[1]),m(c(u(ue,ee),-C[1]),c(u(K,Z),L[1]))),E[2]))),m(c(m(c(u(G,ie),k[1]),m(c(u(ae,Y),-C[1]),c(u(K,Z),E[1]))),-L[2]),m(c(m(c(u(de,te),k[1]),m(c(u(ue,ee),-E[1]),c(u(ae,Y),L[1]))),A[2]),c(m(c(u(de,te),A[1]),m(c(u(le,P),-E[1]),c(u(W,I),L[1]))),-k[2])))),m(m(c(m(c(u(ue,ee),A[1]),m(c(u(le,P),-k[1]),c(u(V,N),L[1]))),E[2]),m(c(m(c(u(ae,Y),A[1]),m(c(u(W,I),-k[1]),c(u(V,N),E[1]))),-L[2]),c(m(c(u(G,ie),k[1]),m(c(u(ae,Y),-C[1]),c(u(K,Z),E[1]))),A[2]))),m(c(m(c(u(G,ie),A[1]),m(c(u(W,I),-C[1]),c(u(X,F),E[1]))),-k[2]),m(c(m(c(u(ae,Y),A[1]),m(c(u(W,I),-k[1]),c(u(V,N),E[1]))),C[2]),c(m(c(u(K,Z),A[1]),m(c(u(X,F),-k[1]),c(u(V,N),C[1]))),-E[2]))))),me=m(m(m(c(m(c(u(de,te),C[1]),m(c(u(pe,q),-E[1]),c(u(G,ie),L[1]))),A[2]),c(m(c(u(de,te),A[1]),m(c(u(le,P),-E[1]),c(u(W,I),L[1]))),-C[2])),m(c(m(c(u(pe,q),A[1]),m(c(u(le,P),-C[1]),c(u(X,F),L[1]))),E[2]),c(m(c(u(G,ie),A[1]),m(c(u(W,I),-C[1]),c(u(X,F),E[1]))),-L[2]))),m(m(c(m(c(u(pe,q),k[1]),m(c(u(ue,ee),-C[1]),c(u(K,Z),L[1]))),A[2]),c(m(c(u(pe,q),A[1]),m(c(u(le,P),-C[1]),c(u(X,F),L[1]))),-k[2])),m(c(m(c(u(ue,ee),A[1]),m(c(u(le,P),-k[1]),c(u(V,N),L[1]))),C[2]),c(m(c(u(K,Z),A[1]),m(c(u(X,F),-k[1]),c(u(V,N),C[1]))),-L[2])))),we=u(_e,me);return we[we.length-1]}}function d(m,u,w,c){return function(A,k,C,E,L,D){var N=m(m(w(A[0],A[0]),w(A[1],A[1])),m(w(A[2],A[2]),w(A[3],A[3]))),F=c(N,k[0]),I=c(N,C[0]),P=c(N,E[0]),j=c(N,L[0]),V=c(N,D[0]),Z=m(m(w(k[0],k[0]),w(k[1],k[1])),m(w(k[2],k[2]),w(k[3],k[3]))),Y=c(Z,A[0]),ee=c(Z,C[0]),re=c(Z,E[0]),X=c(Z,L[0]),K=c(Z,D[0]),ie=m(m(w(C[0],C[0]),w(C[1],C[1])),m(w(C[2],C[2]),w(C[3],C[3]))),q=c(ie,A[0]),U=c(ie,k[0]),W=c(ie,E[0]),ae=c(ie,L[0]),G=c(ie,D[0]),te=m(m(w(E[0],E[0]),w(E[1],E[1])),m(w(E[2],E[2]),w(E[3],E[3]))),ne=c(te,A[0]),le=c(te,k[0]),ue=c(te,C[0]),pe=c(te,L[0]),de=c(te,D[0]),_e=m(m(w(L[0],L[0]),w(L[1],L[1])),m(w(L[2],L[2]),w(L[3],L[3]))),me=c(_e,A[0]),we=c(_e,k[0]),De=c(_e,C[0]),Le=c(_e,E[0]),Ie=c(_e,D[0]),je=m(m(w(D[0],D[0]),w(D[1],D[1])),m(w(D[2],D[2]),w(D[3],D[3]))),ye=c(je,A[0]),Me=c(je,k[0]),Oe=c(je,C[0]),Pe=c(je,E[0]),Re=c(je,L[0]),Ue=m(m(m(c(m(m(c(m(c(u(Re,Ie),E[1]),m(c(u(Pe,de),-L[1]),c(u(Le,pe),D[1]))),C[2]),c(m(c(u(Re,Ie),C[1]),m(c(u(Oe,G),-L[1]),c(u(De,ae),D[1]))),-E[2])),m(c(m(c(u(Pe,de),C[1]),m(c(u(Oe,G),-E[1]),c(u(ue,W),D[1]))),L[2]),c(m(c(u(Le,pe),C[1]),m(c(u(De,ae),-E[1]),c(u(ue,W),L[1]))),-D[2]))),k[3]),m(c(m(m(c(m(c(u(Re,Ie),E[1]),m(c(u(Pe,de),-L[1]),c(u(Le,pe),D[1]))),k[2]),c(m(c(u(Re,Ie),k[1]),m(c(u(Me,K),-L[1]),c(u(we,X),D[1]))),-E[2])),m(c(m(c(u(Pe,de),k[1]),m(c(u(Me,K),-E[1]),c(u(le,re),D[1]))),L[2]),c(m(c(u(Le,pe),k[1]),m(c(u(we,X),-E[1]),c(u(le,re),L[1]))),-D[2]))),-C[3]),c(m(m(c(m(c(u(Re,Ie),C[1]),m(c(u(Oe,G),-L[1]),c(u(De,ae),D[1]))),k[2]),c(m(c(u(Re,Ie),k[1]),m(c(u(Me,K),-L[1]),c(u(we,X),D[1]))),-C[2])),m(c(m(c(u(Oe,G),k[1]),m(c(u(Me,K),-C[1]),c(u(U,ee),D[1]))),L[2]),c(m(c(u(De,ae),k[1]),m(c(u(we,X),-C[1]),c(u(U,ee),L[1]))),-D[2]))),E[3]))),m(m(c(m(m(c(m(c(u(Pe,de),C[1]),m(c(u(Oe,G),-E[1]),c(u(ue,W),D[1]))),k[2]),c(m(c(u(Pe,de),k[1]),m(c(u(Me,K),-E[1]),c(u(le,re),D[1]))),-C[2])),m(c(m(c(u(Oe,G),k[1]),m(c(u(Me,K),-C[1]),c(u(U,ee),D[1]))),E[2]),c(m(c(u(ue,W),k[1]),m(c(u(le,re),-C[1]),c(u(U,ee),E[1]))),-D[2]))),-L[3]),c(m(m(c(m(c(u(Le,pe),C[1]),m(c(u(De,ae),-E[1]),c(u(ue,W),L[1]))),k[2]),c(m(c(u(Le,pe),k[1]),m(c(u(we,X),-E[1]),c(u(le,re),L[1]))),-C[2])),m(c(m(c(u(De,ae),k[1]),m(c(u(we,X),-C[1]),c(u(U,ee),L[1]))),E[2]),c(m(c(u(ue,W),k[1]),m(c(u(le,re),-C[1]),c(u(U,ee),E[1]))),-L[2]))),D[3])),m(c(m(m(c(m(c(u(Re,Ie),E[1]),m(c(u(Pe,de),-L[1]),c(u(Le,pe),D[1]))),k[2]),c(m(c(u(Re,Ie),k[1]),m(c(u(Me,K),-L[1]),c(u(we,X),D[1]))),-E[2])),m(c(m(c(u(Pe,de),k[1]),m(c(u(Me,K),-E[1]),c(u(le,re),D[1]))),L[2]),c(m(c(u(Le,pe),k[1]),m(c(u(we,X),-E[1]),c(u(le,re),L[1]))),-D[2]))),A[3]),c(m(m(c(m(c(u(Re,Ie),E[1]),m(c(u(Pe,de),-L[1]),c(u(Le,pe),D[1]))),A[2]),c(m(c(u(Re,Ie),A[1]),m(c(u(ye,V),-L[1]),c(u(me,j),D[1]))),-E[2])),m(c(m(c(u(Pe,de),A[1]),m(c(u(ye,V),-E[1]),c(u(ne,P),D[1]))),L[2]),c(m(c(u(Le,pe),A[1]),m(c(u(me,j),-E[1]),c(u(ne,P),L[1]))),-D[2]))),-k[3])))),m(m(m(c(m(m(c(m(c(u(Re,Ie),k[1]),m(c(u(Me,K),-L[1]),c(u(we,X),D[1]))),A[2]),c(m(c(u(Re,Ie),A[1]),m(c(u(ye,V),-L[1]),c(u(me,j),D[1]))),-k[2])),m(c(m(c(u(Me,K),A[1]),m(c(u(ye,V),-k[1]),c(u(Y,F),D[1]))),L[2]),c(m(c(u(we,X),A[1]),m(c(u(me,j),-k[1]),c(u(Y,F),L[1]))),-D[2]))),E[3]),c(m(m(c(m(c(u(Pe,de),k[1]),m(c(u(Me,K),-E[1]),c(u(le,re),D[1]))),A[2]),c(m(c(u(Pe,de),A[1]),m(c(u(ye,V),-E[1]),c(u(ne,P),D[1]))),-k[2])),m(c(m(c(u(Me,K),A[1]),m(c(u(ye,V),-k[1]),c(u(Y,F),D[1]))),E[2]),c(m(c(u(le,re),A[1]),m(c(u(ne,P),-k[1]),c(u(Y,F),E[1]))),-D[2]))),-L[3])),m(c(m(m(c(m(c(u(Le,pe),k[1]),m(c(u(we,X),-E[1]),c(u(le,re),L[1]))),A[2]),c(m(c(u(Le,pe),A[1]),m(c(u(me,j),-E[1]),c(u(ne,P),L[1]))),-k[2])),m(c(m(c(u(we,X),A[1]),m(c(u(me,j),-k[1]),c(u(Y,F),L[1]))),E[2]),c(m(c(u(le,re),A[1]),m(c(u(ne,P),-k[1]),c(u(Y,F),E[1]))),-L[2]))),D[3]),c(m(m(c(m(c(u(Pe,de),C[1]),m(c(u(Oe,G),-E[1]),c(u(ue,W),D[1]))),k[2]),c(m(c(u(Pe,de),k[1]),m(c(u(Me,K),-E[1]),c(u(le,re),D[1]))),-C[2])),m(c(m(c(u(Oe,G),k[1]),m(c(u(Me,K),-C[1]),c(u(U,ee),D[1]))),E[2]),c(m(c(u(ue,W),k[1]),m(c(u(le,re),-C[1]),c(u(U,ee),E[1]))),-D[2]))),A[3]))),m(m(c(m(m(c(m(c(u(Pe,de),C[1]),m(c(u(Oe,G),-E[1]),c(u(ue,W),D[1]))),A[2]),c(m(c(u(Pe,de),A[1]),m(c(u(ye,V),-E[1]),c(u(ne,P),D[1]))),-C[2])),m(c(m(c(u(Oe,G),A[1]),m(c(u(ye,V),-C[1]),c(u(q,I),D[1]))),E[2]),c(m(c(u(ue,W),A[1]),m(c(u(ne,P),-C[1]),c(u(q,I),E[1]))),-D[2]))),-k[3]),c(m(m(c(m(c(u(Pe,de),k[1]),m(c(u(Me,K),-E[1]),c(u(le,re),D[1]))),A[2]),c(m(c(u(Pe,de),A[1]),m(c(u(ye,V),-E[1]),c(u(ne,P),D[1]))),-k[2])),m(c(m(c(u(Me,K),A[1]),m(c(u(ye,V),-k[1]),c(u(Y,F),D[1]))),E[2]),c(m(c(u(le,re),A[1]),m(c(u(ne,P),-k[1]),c(u(Y,F),E[1]))),-D[2]))),C[3])),m(c(m(m(c(m(c(u(Oe,G),k[1]),m(c(u(Me,K),-C[1]),c(u(U,ee),D[1]))),A[2]),c(m(c(u(Oe,G),A[1]),m(c(u(ye,V),-C[1]),c(u(q,I),D[1]))),-k[2])),m(c(m(c(u(Me,K),A[1]),m(c(u(ye,V),-k[1]),c(u(Y,F),D[1]))),C[2]),c(m(c(u(U,ee),A[1]),m(c(u(q,I),-k[1]),c(u(Y,F),C[1]))),-D[2]))),-E[3]),c(m(m(c(m(c(u(ue,W),k[1]),m(c(u(le,re),-C[1]),c(u(U,ee),E[1]))),A[2]),c(m(c(u(ue,W),A[1]),m(c(u(ne,P),-C[1]),c(u(q,I),E[1]))),-k[2])),m(c(m(c(u(le,re),A[1]),m(c(u(ne,P),-k[1]),c(u(Y,F),E[1]))),C[2]),c(m(c(u(U,ee),A[1]),m(c(u(q,I),-k[1]),c(u(Y,F),C[1]))),-E[2]))),D[3]))))),qe=m(m(m(c(m(m(c(m(c(u(Re,Ie),E[1]),m(c(u(Pe,de),-L[1]),c(u(Le,pe),D[1]))),C[2]),c(m(c(u(Re,Ie),C[1]),m(c(u(Oe,G),-L[1]),c(u(De,ae),D[1]))),-E[2])),m(c(m(c(u(Pe,de),C[1]),m(c(u(Oe,G),-E[1]),c(u(ue,W),D[1]))),L[2]),c(m(c(u(Le,pe),C[1]),m(c(u(De,ae),-E[1]),c(u(ue,W),L[1]))),-D[2]))),A[3]),m(c(m(m(c(m(c(u(Re,Ie),E[1]),m(c(u(Pe,de),-L[1]),c(u(Le,pe),D[1]))),A[2]),c(m(c(u(Re,Ie),A[1]),m(c(u(ye,V),-L[1]),c(u(me,j),D[1]))),-E[2])),m(c(m(c(u(Pe,de),A[1]),m(c(u(ye,V),-E[1]),c(u(ne,P),D[1]))),L[2]),c(m(c(u(Le,pe),A[1]),m(c(u(me,j),-E[1]),c(u(ne,P),L[1]))),-D[2]))),-C[3]),c(m(m(c(m(c(u(Re,Ie),C[1]),m(c(u(Oe,G),-L[1]),c(u(De,ae),D[1]))),A[2]),c(m(c(u(Re,Ie),A[1]),m(c(u(ye,V),-L[1]),c(u(me,j),D[1]))),-C[2])),m(c(m(c(u(Oe,G),A[1]),m(c(u(ye,V),-C[1]),c(u(q,I),D[1]))),L[2]),c(m(c(u(De,ae),A[1]),m(c(u(me,j),-C[1]),c(u(q,I),L[1]))),-D[2]))),E[3]))),m(m(c(m(m(c(m(c(u(Pe,de),C[1]),m(c(u(Oe,G),-E[1]),c(u(ue,W),D[1]))),A[2]),c(m(c(u(Pe,de),A[1]),m(c(u(ye,V),-E[1]),c(u(ne,P),D[1]))),-C[2])),m(c(m(c(u(Oe,G),A[1]),m(c(u(ye,V),-C[1]),c(u(q,I),D[1]))),E[2]),c(m(c(u(ue,W),A[1]),m(c(u(ne,P),-C[1]),c(u(q,I),E[1]))),-D[2]))),-L[3]),c(m(m(c(m(c(u(Le,pe),C[1]),m(c(u(De,ae),-E[1]),c(u(ue,W),L[1]))),A[2]),c(m(c(u(Le,pe),A[1]),m(c(u(me,j),-E[1]),c(u(ne,P),L[1]))),-C[2])),m(c(m(c(u(De,ae),A[1]),m(c(u(me,j),-C[1]),c(u(q,I),L[1]))),E[2]),c(m(c(u(ue,W),A[1]),m(c(u(ne,P),-C[1]),c(u(q,I),E[1]))),-L[2]))),D[3])),m(c(m(m(c(m(c(u(Re,Ie),C[1]),m(c(u(Oe,G),-L[1]),c(u(De,ae),D[1]))),k[2]),c(m(c(u(Re,Ie),k[1]),m(c(u(Me,K),-L[1]),c(u(we,X),D[1]))),-C[2])),m(c(m(c(u(Oe,G),k[1]),m(c(u(Me,K),-C[1]),c(u(U,ee),D[1]))),L[2]),c(m(c(u(De,ae),k[1]),m(c(u(we,X),-C[1]),c(u(U,ee),L[1]))),-D[2]))),A[3]),c(m(m(c(m(c(u(Re,Ie),C[1]),m(c(u(Oe,G),-L[1]),c(u(De,ae),D[1]))),A[2]),c(m(c(u(Re,Ie),A[1]),m(c(u(ye,V),-L[1]),c(u(me,j),D[1]))),-C[2])),m(c(m(c(u(Oe,G),A[1]),m(c(u(ye,V),-C[1]),c(u(q,I),D[1]))),L[2]),c(m(c(u(De,ae),A[1]),m(c(u(me,j),-C[1]),c(u(q,I),L[1]))),-D[2]))),-k[3])))),m(m(m(c(m(m(c(m(c(u(Re,Ie),k[1]),m(c(u(Me,K),-L[1]),c(u(we,X),D[1]))),A[2]),c(m(c(u(Re,Ie),A[1]),m(c(u(ye,V),-L[1]),c(u(me,j),D[1]))),-k[2])),m(c(m(c(u(Me,K),A[1]),m(c(u(ye,V),-k[1]),c(u(Y,F),D[1]))),L[2]),c(m(c(u(we,X),A[1]),m(c(u(me,j),-k[1]),c(u(Y,F),L[1]))),-D[2]))),C[3]),c(m(m(c(m(c(u(Oe,G),k[1]),m(c(u(Me,K),-C[1]),c(u(U,ee),D[1]))),A[2]),c(m(c(u(Oe,G),A[1]),m(c(u(ye,V),-C[1]),c(u(q,I),D[1]))),-k[2])),m(c(m(c(u(Me,K),A[1]),m(c(u(ye,V),-k[1]),c(u(Y,F),D[1]))),C[2]),c(m(c(u(U,ee),A[1]),m(c(u(q,I),-k[1]),c(u(Y,F),C[1]))),-D[2]))),-L[3])),m(c(m(m(c(m(c(u(De,ae),k[1]),m(c(u(we,X),-C[1]),c(u(U,ee),L[1]))),A[2]),c(m(c(u(De,ae),A[1]),m(c(u(me,j),-C[1]),c(u(q,I),L[1]))),-k[2])),m(c(m(c(u(we,X),A[1]),m(c(u(me,j),-k[1]),c(u(Y,F),L[1]))),C[2]),c(m(c(u(U,ee),A[1]),m(c(u(q,I),-k[1]),c(u(Y,F),C[1]))),-L[2]))),D[3]),c(m(m(c(m(c(u(Le,pe),C[1]),m(c(u(De,ae),-E[1]),c(u(ue,W),L[1]))),k[2]),c(m(c(u(Le,pe),k[1]),m(c(u(we,X),-E[1]),c(u(le,re),L[1]))),-C[2])),m(c(m(c(u(De,ae),k[1]),m(c(u(we,X),-C[1]),c(u(U,ee),L[1]))),E[2]),c(m(c(u(ue,W),k[1]),m(c(u(le,re),-C[1]),c(u(U,ee),E[1]))),-L[2]))),A[3]))),m(m(c(m(m(c(m(c(u(Le,pe),C[1]),m(c(u(De,ae),-E[1]),c(u(ue,W),L[1]))),A[2]),c(m(c(u(Le,pe),A[1]),m(c(u(me,j),-E[1]),c(u(ne,P),L[1]))),-C[2])),m(c(m(c(u(De,ae),A[1]),m(c(u(me,j),-C[1]),c(u(q,I),L[1]))),E[2]),c(m(c(u(ue,W),A[1]),m(c(u(ne,P),-C[1]),c(u(q,I),E[1]))),-L[2]))),-k[3]),c(m(m(c(m(c(u(Le,pe),k[1]),m(c(u(we,X),-E[1]),c(u(le,re),L[1]))),A[2]),c(m(c(u(Le,pe),A[1]),m(c(u(me,j),-E[1]),c(u(ne,P),L[1]))),-k[2])),m(c(m(c(u(we,X),A[1]),m(c(u(me,j),-k[1]),c(u(Y,F),L[1]))),E[2]),c(m(c(u(le,re),A[1]),m(c(u(ne,P),-k[1]),c(u(Y,F),E[1]))),-L[2]))),C[3])),m(c(m(m(c(m(c(u(De,ae),k[1]),m(c(u(we,X),-C[1]),c(u(U,ee),L[1]))),A[2]),c(m(c(u(De,ae),A[1]),m(c(u(me,j),-C[1]),c(u(q,I),L[1]))),-k[2])),m(c(m(c(u(we,X),A[1]),m(c(u(me,j),-k[1]),c(u(Y,F),L[1]))),C[2]),c(m(c(u(U,ee),A[1]),m(c(u(q,I),-k[1]),c(u(Y,F),C[1]))),-L[2]))),-E[3]),c(m(m(c(m(c(u(ue,W),k[1]),m(c(u(le,re),-C[1]),c(u(U,ee),E[1]))),A[2]),c(m(c(u(ue,W),A[1]),m(c(u(ne,P),-C[1]),c(u(q,I),E[1]))),-k[2])),m(c(m(c(u(le,re),A[1]),m(c(u(ne,P),-k[1]),c(u(Y,F),E[1]))),C[2]),c(m(c(u(U,ee),A[1]),m(c(u(q,I),-k[1]),c(u(Y,F),C[1]))),-E[2]))),L[3]))))),Xe=u(Ue,qe);return Xe[Xe.length-1]}}var p=[function(){return 0},function(){return 0},function(){return 0}];function f(m){var u=p[m.length];return u||(u=p[m.length]=i(m.length)),u.apply(void 0,m)}function g(m,u,w,c,A,k,C,E){return function(L,D,N,F,I,P){switch(arguments.length){case 0:case 1:return 0;case 2:return c(L,D);case 3:return A(L,D,N);case 4:return k(L,D,N,F);case 5:return C(L,D,N,F,I);case 6:return E(L,D,N,F,I,P)}for(var j=new Array(arguments.length),V=0;V<arguments.length;++V)j[V]=arguments[V];return m(j)}}!function(){for(;p.length<=6;)p.push(i(p.length));M.exports=g.apply(void 0,[f].concat(p));for(var m=0;m<=6;++m)M.exports[m]=p[m]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(x,M,_){"use strict";var e=x("robust-determinant");function o(p){return(2===p?a:3===p?l:4===p?i:5===p?v:h)(p<6?e[p]:e)}function a(p){return function(f,g){return[p([[+g[0],+f[0][1]],[+g[1],+f[1][1]]]),p([[+f[0][0],+g[0]],[+f[1][0],+g[1]]]),p(f)]}}function l(p){return function(f,g){return[p([[+g[0],+f[0][1],+f[0][2]],[+g[1],+f[1][1],+f[1][2]],[+g[2],+f[2][1],+f[2][2]]]),p([[+f[0][0],+g[0],+f[0][2]],[+f[1][0],+g[1],+f[1][2]],[+f[2][0],+g[2],+f[2][2]]]),p([[+f[0][0],+f[0][1],+g[0]],[+f[1][0],+f[1][1],+g[1]],[+f[2][0],+f[2][1],+g[2]]]),p(f)]}}function i(p){return function(f,g){return[p([[+g[0],+f[0][1],+f[0][2],+f[0][3]],[+g[1],+f[1][1],+f[1][2],+f[1][3]],[+g[2],+f[2][1],+f[2][2],+f[2][3]],[+g[3],+f[3][1],+f[3][2],+f[3][3]]]),p([[+f[0][0],+g[0],+f[0][2],+f[0][3]],[+f[1][0],+g[1],+f[1][2],+f[1][3]],[+f[2][0],+g[2],+f[2][2],+f[2][3]],[+f[3][0],+g[3],+f[3][2],+f[3][3]]]),p([[+f[0][0],+f[0][1],+g[0],+f[0][3]],[+f[1][0],+f[1][1],+g[1],+f[1][3]],[+f[2][0],+f[2][1],+g[2],+f[2][3]],[+f[3][0],+f[3][1],+g[3],+f[3][3]]]),p([[+f[0][0],+f[0][1],+f[0][2],+g[0]],[+f[1][0],+f[1][1],+f[1][2],+g[1]],[+f[2][0],+f[2][1],+f[2][2],+g[2]],[+f[3][0],+f[3][1],+f[3][2],+g[3]]]),p(f)]}}function v(p){return function(f,g){return[p([[+g[0],+f[0][1],+f[0][2],+f[0][3],+f[0][4]],[+g[1],+f[1][1],+f[1][2],+f[1][3],+f[1][4]],[+g[2],+f[2][1],+f[2][2],+f[2][3],+f[2][4]],[+g[3],+f[3][1],+f[3][2],+f[3][3],+f[3][4]],[+g[4],+f[4][1],+f[4][2],+f[4][3],+f[4][4]]]),p([[+f[0][0],+g[0],+f[0][2],+f[0][3],+f[0][4]],[+f[1][0],+g[1],+f[1][2],+f[1][3],+f[1][4]],[+f[2][0],+g[2],+f[2][2],+f[2][3],+f[2][4]],[+f[3][0],+g[3],+f[3][2],+f[3][3],+f[3][4]],[+f[4][0],+g[4],+f[4][2],+f[4][3],+f[4][4]]]),p([[+f[0][0],+f[0][1],+g[0],+f[0][3],+f[0][4]],[+f[1][0],+f[1][1],+g[1],+f[1][3],+f[1][4]],[+f[2][0],+f[2][1],+g[2],+f[2][3],+f[2][4]],[+f[3][0],+f[3][1],+g[3],+f[3][3],+f[3][4]],[+f[4][0],+f[4][1],+g[4],+f[4][3],+f[4][4]]]),p([[+f[0][0],+f[0][1],+f[0][2],+g[0],+f[0][4]],[+f[1][0],+f[1][1],+f[1][2],+g[1],+f[1][4]],[+f[2][0],+f[2][1],+f[2][2],+g[2],+f[2][4]],[+f[3][0],+f[3][1],+f[3][2],+g[3],+f[3][4]],[+f[4][0],+f[4][1],+f[4][2],+g[4],+f[4][4]]]),p([[+f[0][0],+f[0][1],+f[0][2],+f[0][3],+g[0]],[+f[1][0],+f[1][1],+f[1][2],+f[1][3],+g[1]],[+f[2][0],+f[2][1],+f[2][2],+f[2][3],+g[2]],[+f[3][0],+f[3][1],+f[3][2],+f[3][3],+g[3]],[+f[4][0],+f[4][1],+f[4][2],+f[4][3],+g[4]]]),p(f)]}}function h(p){return function(f,g){return[p([[+g[0],+f[0][1],+f[0][2],+f[0][3],+f[0][4],+f[0][5]],[+g[1],+f[1][1],+f[1][2],+f[1][3],+f[1][4],+f[1][5]],[+g[2],+f[2][1],+f[2][2],+f[2][3],+f[2][4],+f[2][5]],[+g[3],+f[3][1],+f[3][2],+f[3][3],+f[3][4],+f[3][5]],[+g[4],+f[4][1],+f[4][2],+f[4][3],+f[4][4],+f[4][5]],[+g[5],+f[5][1],+f[5][2],+f[5][3],+f[5][4],+f[5][5]]]),p([[+f[0][0],+g[0],+f[0][2],+f[0][3],+f[0][4],+f[0][5]],[+f[1][0],+g[1],+f[1][2],+f[1][3],+f[1][4],+f[1][5]],[+f[2][0],+g[2],+f[2][2],+f[2][3],+f[2][4],+f[2][5]],[+f[3][0],+g[3],+f[3][2],+f[3][3],+f[3][4],+f[3][5]],[+f[4][0],+g[4],+f[4][2],+f[4][3],+f[4][4],+f[4][5]],[+f[5][0],+g[5],+f[5][2],+f[5][3],+f[5][4],+f[5][5]]]),p([[+f[0][0],+f[0][1],+g[0],+f[0][3],+f[0][4],+f[0][5]],[+f[1][0],+f[1][1],+g[1],+f[1][3],+f[1][4],+f[1][5]],[+f[2][0],+f[2][1],+g[2],+f[2][3],+f[2][4],+f[2][5]],[+f[3][0],+f[3][1],+g[3],+f[3][3],+f[3][4],+f[3][5]],[+f[4][0],+f[4][1],+g[4],+f[4][3],+f[4][4],+f[4][5]],[+f[5][0],+f[5][1],+g[5],+f[5][3],+f[5][4],+f[5][5]]]),p([[+f[0][0],+f[0][1],+f[0][2],+g[0],+f[0][4],+f[0][5]],[+f[1][0],+f[1][1],+f[1][2],+g[1],+f[1][4],+f[1][5]],[+f[2][0],+f[2][1],+f[2][2],+g[2],+f[2][4],+f[2][5]],[+f[3][0],+f[3][1],+f[3][2],+g[3],+f[3][4],+f[3][5]],[+f[4][0],+f[4][1],+f[4][2],+g[4],+f[4][4],+f[4][5]],[+f[5][0],+f[5][1],+f[5][2],+g[5],+f[5][4],+f[5][5]]]),p([[+f[0][0],+f[0][1],+f[0][2],+f[0][3],+g[0],+f[0][5]],[+f[1][0],+f[1][1],+f[1][2],+f[1][3],+g[1],+f[1][5]],[+f[2][0],+f[2][1],+f[2][2],+f[2][3],+g[2],+f[2][5]],[+f[3][0],+f[3][1],+f[3][2],+f[3][3],+g[3],+f[3][5]],[+f[4][0],+f[4][1],+f[4][2],+f[4][3],+g[4],+f[4][5]],[+f[5][0],+f[5][1],+f[5][2],+f[5][3],+g[5],+f[5][5]]]),p([[+f[0][0],+f[0][1],+f[0][2],+f[0][3],+f[0][4],+g[0]],[+f[1][0],+f[1][1],+f[1][2],+f[1][3],+f[1][4],+g[1]],[+f[2][0],+f[2][1],+f[2][2],+f[2][3],+f[2][4],+g[2]],[+f[3][0],+f[3][1],+f[3][2],+f[3][3],+f[3][4],+g[3]],[+f[4][0],+f[4][1],+f[4][2],+f[4][3],+f[4][4],+g[4]],[+f[5][0],+f[5][1],+f[5][2],+f[5][3],+f[5][4],+g[5]]]),p(f)]}}var s=[function(){return[[0]]},function(p,f){return[[f[0]],[p[0][0]]]}];function d(p,f,g,m,u,w,c,A){return function(k,C){switch(k.length){case 0:return p(k,C);case 1:return f(k,C);case 2:return g(k,C);case 3:return m(k,C);case 4:return u(k,C);case 5:return w(k,C)}var E=c[k.length];return E||(E=c[k.length]=A(k.length)),E(k,C)}}!function(){for(;s.length<6;)s.push(o(s.length));M.exports=d.apply(void 0,s.concat([s,o]));for(var p=0;p<6;++p)M.exports[p]=s[p]}()},{"robust-determinant":280}],284:[function(x,M,_){"use strict";var e=x("two-product"),o=x("robust-sum"),a=x("robust-scale"),l=x("robust-subtract");function i(u,w,c,A){return function(k,C,E){var L=u(u(w(C[1],E[0]),w(-E[1],C[0])),u(w(k[1],C[0]),w(-C[1],k[0]))),D=u(w(k[1],E[0]),w(-E[1],k[0])),N=A(L,D);return N[N.length-1]}}function v(u,w,c,A){return function(k,C,E,L){var D=u(u(c(u(w(E[1],L[0]),w(-L[1],E[0])),C[2]),u(c(u(w(C[1],L[0]),w(-L[1],C[0])),-E[2]),c(u(w(C[1],E[0]),w(-E[1],C[0])),L[2]))),u(c(u(w(C[1],L[0]),w(-L[1],C[0])),k[2]),u(c(u(w(k[1],L[0]),w(-L[1],k[0])),-C[2]),c(u(w(k[1],C[0]),w(-C[1],k[0])),L[2])))),N=u(u(c(u(w(E[1],L[0]),w(-L[1],E[0])),k[2]),u(c(u(w(k[1],L[0]),w(-L[1],k[0])),-E[2]),c(u(w(k[1],E[0]),w(-E[1],k[0])),L[2]))),u(c(u(w(C[1],E[0]),w(-E[1],C[0])),k[2]),u(c(u(w(k[1],E[0]),w(-E[1],k[0])),-C[2]),c(u(w(k[1],C[0]),w(-C[1],k[0])),E[2])))),F=A(D,N);return F[F.length-1]}}function h(u,w,c,A){return function(k,C,E,L,D){var N=u(u(u(c(u(c(u(w(L[1],D[0]),w(-D[1],L[0])),E[2]),u(c(u(w(E[1],D[0]),w(-D[1],E[0])),-L[2]),c(u(w(E[1],L[0]),w(-L[1],E[0])),D[2]))),C[3]),u(c(u(c(u(w(L[1],D[0]),w(-D[1],L[0])),C[2]),u(c(u(w(C[1],D[0]),w(-D[1],C[0])),-L[2]),c(u(w(C[1],L[0]),w(-L[1],C[0])),D[2]))),-E[3]),c(u(c(u(w(E[1],D[0]),w(-D[1],E[0])),C[2]),u(c(u(w(C[1],D[0]),w(-D[1],C[0])),-E[2]),c(u(w(C[1],E[0]),w(-E[1],C[0])),D[2]))),L[3]))),u(c(u(c(u(w(E[1],L[0]),w(-L[1],E[0])),C[2]),u(c(u(w(C[1],L[0]),w(-L[1],C[0])),-E[2]),c(u(w(C[1],E[0]),w(-E[1],C[0])),L[2]))),-D[3]),u(c(u(c(u(w(L[1],D[0]),w(-D[1],L[0])),C[2]),u(c(u(w(C[1],D[0]),w(-D[1],C[0])),-L[2]),c(u(w(C[1],L[0]),w(-L[1],C[0])),D[2]))),k[3]),c(u(c(u(w(L[1],D[0]),w(-D[1],L[0])),k[2]),u(c(u(w(k[1],D[0]),w(-D[1],k[0])),-L[2]),c(u(w(k[1],L[0]),w(-L[1],k[0])),D[2]))),-C[3])))),u(u(c(u(c(u(w(C[1],D[0]),w(-D[1],C[0])),k[2]),u(c(u(w(k[1],D[0]),w(-D[1],k[0])),-C[2]),c(u(w(k[1],C[0]),w(-C[1],k[0])),D[2]))),L[3]),u(c(u(c(u(w(C[1],L[0]),w(-L[1],C[0])),k[2]),u(c(u(w(k[1],L[0]),w(-L[1],k[0])),-C[2]),c(u(w(k[1],C[0]),w(-C[1],k[0])),L[2]))),-D[3]),c(u(c(u(w(E[1],L[0]),w(-L[1],E[0])),C[2]),u(c(u(w(C[1],L[0]),w(-L[1],C[0])),-E[2]),c(u(w(C[1],E[0]),w(-E[1],C[0])),L[2]))),k[3]))),u(c(u(c(u(w(E[1],L[0]),w(-L[1],E[0])),k[2]),u(c(u(w(k[1],L[0]),w(-L[1],k[0])),-E[2]),c(u(w(k[1],E[0]),w(-E[1],k[0])),L[2]))),-C[3]),u(c(u(c(u(w(C[1],L[0]),w(-L[1],C[0])),k[2]),u(c(u(w(k[1],L[0]),w(-L[1],k[0])),-C[2]),c(u(w(k[1],C[0]),w(-C[1],k[0])),L[2]))),E[3]),c(u(c(u(w(C[1],E[0]),w(-E[1],C[0])),k[2]),u(c(u(w(k[1],E[0]),w(-E[1],k[0])),-C[2]),c(u(w(k[1],C[0]),w(-C[1],k[0])),E[2]))),-L[3]))))),F=u(u(u(c(u(c(u(w(L[1],D[0]),w(-D[1],L[0])),E[2]),u(c(u(w(E[1],D[0]),w(-D[1],E[0])),-L[2]),c(u(w(E[1],L[0]),w(-L[1],E[0])),D[2]))),k[3]),c(u(c(u(w(L[1],D[0]),w(-D[1],L[0])),k[2]),u(c(u(w(k[1],D[0]),w(-D[1],k[0])),-L[2]),c(u(w(k[1],L[0]),w(-L[1],k[0])),D[2]))),-E[3])),u(c(u(c(u(w(E[1],D[0]),w(-D[1],E[0])),k[2]),u(c(u(w(k[1],D[0]),w(-D[1],k[0])),-E[2]),c(u(w(k[1],E[0]),w(-E[1],k[0])),D[2]))),L[3]),c(u(c(u(w(E[1],L[0]),w(-L[1],E[0])),k[2]),u(c(u(w(k[1],L[0]),w(-L[1],k[0])),-E[2]),c(u(w(k[1],E[0]),w(-E[1],k[0])),L[2]))),-D[3]))),u(u(c(u(c(u(w(E[1],D[0]),w(-D[1],E[0])),C[2]),u(c(u(w(C[1],D[0]),w(-D[1],C[0])),-E[2]),c(u(w(C[1],E[0]),w(-E[1],C[0])),D[2]))),k[3]),c(u(c(u(w(E[1],D[0]),w(-D[1],E[0])),k[2]),u(c(u(w(k[1],D[0]),w(-D[1],k[0])),-E[2]),c(u(w(k[1],E[0]),w(-E[1],k[0])),D[2]))),-C[3])),u(c(u(c(u(w(C[1],D[0]),w(-D[1],C[0])),k[2]),u(c(u(w(k[1],D[0]),w(-D[1],k[0])),-C[2]),c(u(w(k[1],C[0]),w(-C[1],k[0])),D[2]))),E[3]),c(u(c(u(w(C[1],E[0]),w(-E[1],C[0])),k[2]),u(c(u(w(k[1],E[0]),w(-E[1],k[0])),-C[2]),c(u(w(k[1],C[0]),w(-C[1],k[0])),E[2]))),-D[3])))),I=A(N,F);return I[I.length-1]}}function s(u){return(3===u?i:4===u?v:h)(o,e,a,l)}var d=s(3),p=s(4),f=[function(){return 0},function(){return 0},function(u,w){return w[0]-u[0]},function(u,w,c){var A,k=(u[1]-c[1])*(w[0]-c[0]),C=(u[0]-c[0])*(w[1]-c[1]),E=k-C;if(k>0){if(C<=0)return E;A=k+C}else{if(!(k<0)||C>=0)return E;A=-(k+C)}var L=33306690738754716e-32*A;return E>=L||E<=-L?E:d(u,w,c)},function(u,w,c,A){var k=u[0]-A[0],C=w[0]-A[0],E=c[0]-A[0],L=u[1]-A[1],D=w[1]-A[1],N=c[1]-A[1],F=u[2]-A[2],I=w[2]-A[2],P=c[2]-A[2],j=C*N,V=E*D,Z=E*L,Y=k*N,ee=k*D,re=C*L,X=F*(j-V)+I*(Z-Y)+P*(ee-re),K=7771561172376103e-31*((Math.abs(j)+Math.abs(V))*Math.abs(F)+(Math.abs(Z)+Math.abs(Y))*Math.abs(I)+(Math.abs(ee)+Math.abs(re))*Math.abs(P));return X>K||-X>K?X:p(u,w,c,A)}];function g(u){var w=f[u.length];return w||(w=f[u.length]=s(u.length)),w.apply(void 0,u)}function m(u,w,c,A,k,C,E){return function(L,D,N,F,I){switch(arguments.length){case 0:case 1:return 0;case 2:return A(L,D);case 3:return k(L,D,N);case 4:return C(L,D,N,F);case 5:return E(L,D,N,F,I)}for(var P=new Array(arguments.length),j=0;j<arguments.length;++j)P[j]=arguments[j];return u(P)}}!function(){for(;f.length<=5;)f.push(s(f.length));M.exports=m.apply(void 0,[g].concat(f));for(var u=0;u<=5;++u)M.exports[u]=f[u]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(x,M,_){"use strict";var e=x("robust-sum"),o=x("robust-scale");M.exports=function(a,l){if(1===a.length)return o(l,a[0]);if(1===l.length)return o(a,l[0]);if(0===a.length||0===l.length)return[0];var i=[0];if(a.length<l.length)for(var v=0;v<a.length;++v)i=e(i,o(l,a[v]));else for(v=0;v<l.length;++v)i=e(i,o(a,l[v]));return i}},{"robust-scale":286,"robust-sum":289}],286:[function(x,M,_){"use strict";var e=x("two-product"),o=x("two-sum");M.exports=function(a,l){var i=a.length;if(1===i){var v=e(a[0],l);return v[0]?v:[v[1]]}var h=new Array(2*i),s=[.1,.1],d=[.1,.1],p=0;e(a[0],l,s),s[0]&&(h[p++]=s[0]);for(var f=1;f<i;++f){e(a[f],l,d),o(s[1],d[0],s),s[0]&&(h[p++]=s[0]);var m=d[1],u=s[1],w=m+u,c=u-(w-m);s[1]=w,c&&(h[p++]=c)}return s[1]&&(h[p++]=s[1]),0===p&&(h[p++]=0),h.length=p,h}},{"two-product":306,"two-sum":307}],287:[function(x,M,_){"use strict";M.exports=function(o,a,l,i){var v=e(o,l,i),h=e(a,l,i);if(v>0&&h>0||v<0&&h<0)return!1;var s=e(l,o,a),d=e(i,o,a);return!(s>0&&d>0||s<0&&d<0)&&(0!==v||0!==h||0!==s||0!==d||function(p,f,g,m){for(var u=0;u<2;++u){var w=p[u],c=f[u],A=Math.min(w,c),k=Math.max(w,c),C=g[u],E=m[u],L=Math.min(C,E);if(Math.max(C,E)<A||k<L)return!1}return!0}(o,a,l,i))};var e=x("robust-orientation")[3]},{"robust-orientation":284}],288:[function(x,M,_){"use strict";M.exports=function(e,o){var N,F,I,P,j,a=0|e.length,l=0|o.length;if(1===a&&1===l)return(j=(N=e[0])-((I=N+(F=-o[0]))-(P=I-N))+(F-P))?[j,I]:[I];var i,v,h=new Array(a+l),s=0,d=0,p=0,f=Math.abs,g=e[d],m=f(g),u=-o[p],w=f(u);m<w?(v=g,(d+=1)<a&&(m=f(g=e[d]))):(v=u,(p+=1)<l&&(w=f(u=-o[p]))),d<a&&m<w||p>=l?(i=g,(d+=1)<a&&(m=f(g=e[d]))):(i=u,(p+=1)<l&&(w=f(u=-o[p])));for(var c,A,k=i+v,C=k-i,E=v-C,L=E,D=k;d<a&&p<l;)m<w?(i=g,(d+=1)<a&&(m=f(g=e[d]))):(i=u,(p+=1)<l&&(w=f(u=-o[p]))),(E=(v=L)-(C=(k=i+v)-i))&&(h[s++]=E),L=D-((c=D+k)-(A=c-D))+(k-A),D=c;for(;d<a;)(E=(v=L)-(C=(k=(i=g)+v)-i))&&(h[s++]=E),L=D-((c=D+k)-(A=c-D))+(k-A),D=c,(d+=1)<a&&(g=e[d]);for(;p<l;)(E=(v=L)-(C=(k=(i=u)+v)-i))&&(h[s++]=E),L=D-((c=D+k)-(A=c-D))+(k-A),D=c,(p+=1)<l&&(u=-o[p]);return L&&(h[s++]=L),D&&(h[s++]=D),s||(h[s++]=0),h.length=s,h}},{}],289:[function(x,M,_){"use strict";M.exports=function(e,o){var N,F,I,P,j,a=0|e.length,l=0|o.length;if(1===a&&1===l)return(j=(N=e[0])-((I=N+(F=o[0]))-(P=I-N))+(F-P))?[j,I]:[I];var i,v,h=new Array(a+l),s=0,d=0,p=0,f=Math.abs,g=e[d],m=f(g),u=o[p],w=f(u);m<w?(v=g,(d+=1)<a&&(m=f(g=e[d]))):(v=u,(p+=1)<l&&(w=f(u=o[p]))),d<a&&m<w||p>=l?(i=g,(d+=1)<a&&(m=f(g=e[d]))):(i=u,(p+=1)<l&&(w=f(u=o[p])));for(var c,A,k=i+v,C=k-i,E=v-C,L=E,D=k;d<a&&p<l;)m<w?(i=g,(d+=1)<a&&(m=f(g=e[d]))):(i=u,(p+=1)<l&&(w=f(u=o[p]))),(E=(v=L)-(C=(k=i+v)-i))&&(h[s++]=E),L=D-((c=D+k)-(A=c-D))+(k-A),D=c;for(;d<a;)(E=(v=L)-(C=(k=(i=g)+v)-i))&&(h[s++]=E),L=D-((c=D+k)-(A=c-D))+(k-A),D=c,(d+=1)<a&&(g=e[d]);for(;p<l;)(E=(v=L)-(C=(k=(i=u)+v)-i))&&(h[s++]=E),L=D-((c=D+k)-(A=c-D))+(k-A),D=c,(p+=1)<l&&(u=o[p]);return L&&(h[s++]=L),D&&(h[s++]=D),s||(h[s++]=0),h.length=s,h}},{}],290:[function(x,M,_){"use strict";M.exports=function(a){return o(e(a))};var e=x("boundary-cells"),o=x("reduce-simplicial-complex")},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(x,M,_){"use strict";M.exports=function(i,v,h,s){if(h=h||0,void 0===s&&(s=function(c){for(var A=c.length,k=0,C=0;C<A;++C)k=0|Math.max(k,c[C].length);return k-1}(i)),0===i.length||s<1)return{cells:[],vertexIds:[],vertexWeights:[]};var d=function(c,A){for(var k=c.length,C=o.mallocUint8(k),E=0;E<k;++E)C[E]=c[E]<A|0;return C}(v,+h),p=function(c,A){for(var k=c.length,E=o.mallocUint32(2*(A*(A+1)/2*k|0)),L=0,D=0;D<k;++D)for(var N=c[D],F=(A=N.length,0);F<A;++F)for(var I=0;I<F;++I){var P=N[I],j=N[F];E[L++]=0|Math.min(P,j),E[L++]=0|Math.max(P,j)}a(e(E,[L/2|0,2]));var V=2;for(D=2;D<L;D+=2)E[D-2]===E[D]&&E[D-1]===E[D+1]||(E[V++]=E[D],E[V++]=E[D+1]);return e(E,[V/2|0,2])}(i,s),f=function(c,A,k,C){for(var E=c.data,L=c.shape[0],D=o.mallocDouble(L),N=0,F=0;F<L;++F){var I=E[2*F],P=E[2*F+1];if(k[I]!==k[P]){var j=A[I],V=A[P];E[2*N]=I,E[2*N+1]=P,D[N++]=(V-C)/(V-j)}}return c.shape[0]=N,e(D,[N])}(p,v,d,+h),g=function(c,A){var k=o.mallocInt32(2*A),C=c.shape[0],E=c.data;k[0]=0;for(var L=0,D=0;D<C;++D){var N=E[2*D];if(N!==L){for(k[2*L+1]=D;++L<N;)k[2*L]=D,k[2*L+1]=D;k[2*L]=D}}for(k[2*L+1]=C;++L<A;)k[2*L]=k[2*L+1]=C;return k}(p,0|v.length),m=l(s)(i,p.data,g,d),u=function(c){for(var A=0|c.shape[0],k=c.data,C=new Array(A),E=0;E<A;++E)C[E]=[k[2*E],k[2*E+1]];return C}(p),w=[].slice.call(f.data,0,f.shape[0]);return o.free(d),o.free(p.data),o.free(f.data),o.free(g),{cells:m,vertexIds:u,vertexWeights:w}};var e=x("ndarray"),o=x("typedarray-pool"),a=x("ndarray-sort"),l=x("./lib/codegen")},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(x,M,_){"use strict";M.exports=function(o){return e[o]()};var e=[function(){return function(o,a,l,i){for(var v=o.length,h=0;h<v;++h);return[]}},function(){function o(a,l,i,v){for(var h=0|Math.min(i,v),s=0|Math.max(i,v),d=a[2*h],p=a[2*h+1];d<p;){var f=d+p>>1,g=l[2*f+1];if(g===s)return f;s<g?p=f:d=f+1}return d}return function(a,l,i,v){for(var h=a.length,s=[],d=0;d<h;++d){var p=a[d];if(2===p.length){var f=(v[p[0]]<<0)+(v[p[1]]<<1);if(0===f||3===f)continue;switch(f){case 0:break;case 1:s.push([o(i,l,p[0],p[1])]);break;case 2:s.push([o(i,l,p[1],p[0])])}}}return s}},function(){function o(a,l,i,v){for(var h=0|Math.min(i,v),s=0|Math.max(i,v),d=a[2*h],p=a[2*h+1];d<p;){var f=d+p>>1,g=l[2*f+1];if(g===s)return f;s<g?p=f:d=f+1}return d}return function(a,l,i,v){for(var h=a.length,s=[],d=0;d<h;++d){var p=a[d],f=p.length;if(3===f){if(0==(g=(v[p[0]]<<0)+(v[p[1]]<<1)+(v[p[2]]<<2))||7===g)continue;switch(g){case 0:break;case 1:s.push([o(i,l,p[0],p[2]),o(i,l,p[0],p[1])]);break;case 2:s.push([o(i,l,p[1],p[0]),o(i,l,p[1],p[2])]);break;case 3:s.push([o(i,l,p[0],p[2]),o(i,l,p[1],p[2])]);break;case 4:s.push([o(i,l,p[2],p[1]),o(i,l,p[2],p[0])]);break;case 5:s.push([o(i,l,p[2],p[1]),o(i,l,p[0],p[1])]);break;case 6:s.push([o(i,l,p[1],p[0]),o(i,l,p[2],p[0])])}}else if(2===f){var g;if(0==(g=(v[p[0]]<<0)+(v[p[1]]<<1))||3===g)continue;switch(g){case 0:break;case 1:s.push([o(i,l,p[0],p[1])]);break;case 2:s.push([o(i,l,p[1],p[0])])}}}return s}},function(){function o(a,l,i,v){for(var h=0|Math.min(i,v),s=0|Math.max(i,v),d=a[2*h],p=a[2*h+1];d<p;){var f=d+p>>1,g=l[2*f+1];if(g===s)return f;s<g?p=f:d=f+1}return d}return function(a,l,i,v){for(var h=a.length,s=[],d=0;d<h;++d){var p=a[d],f=p.length;if(4===f){if(0==(g=(v[p[0]]<<0)+(v[p[1]]<<1)+(v[p[2]]<<2)+(v[p[3]]<<3))||15===g)continue;switch(g){case 0:break;case 1:s.push([o(i,l,p[0],p[1]),o(i,l,p[0],p[2]),o(i,l,p[0],p[3])]);break;case 2:s.push([o(i,l,p[1],p[2]),o(i,l,p[1],p[0]),o(i,l,p[1],p[3])]);break;case 3:s.push([o(i,l,p[1],p[2]),o(i,l,p[0],p[2]),o(i,l,p[0],p[3])],[o(i,l,p[1],p[3]),o(i,l,p[1],p[2]),o(i,l,p[0],p[3])]);break;case 4:s.push([o(i,l,p[2],p[0]),o(i,l,p[2],p[1]),o(i,l,p[2],p[3])]);break;case 5:s.push([o(i,l,p[0],p[1]),o(i,l,p[2],p[1]),o(i,l,p[0],p[3])],[o(i,l,p[2],p[1]),o(i,l,p[2],p[3]),o(i,l,p[0],p[3])]);break;case 6:s.push([o(i,l,p[2],p[0]),o(i,l,p[1],p[0]),o(i,l,p[1],p[3])],[o(i,l,p[2],p[3]),o(i,l,p[2],p[0]),o(i,l,p[1],p[3])]);break;case 7:s.push([o(i,l,p[0],p[3]),o(i,l,p[1],p[3]),o(i,l,p[2],p[3])]);break;case 8:s.push([o(i,l,p[3],p[1]),o(i,l,p[3],p[0]),o(i,l,p[3],p[2])]);break;case 9:s.push([o(i,l,p[3],p[1]),o(i,l,p[0],p[1]),o(i,l,p[0],p[2])],[o(i,l,p[3],p[2]),o(i,l,p[3],p[1]),o(i,l,p[0],p[2])]);break;case 10:s.push([o(i,l,p[1],p[0]),o(i,l,p[3],p[0]),o(i,l,p[1],p[2])],[o(i,l,p[3],p[0]),o(i,l,p[3],p[2]),o(i,l,p[1],p[2])]);break;case 11:s.push([o(i,l,p[1],p[2]),o(i,l,p[0],p[2]),o(i,l,p[3],p[2])]);break;case 12:s.push([o(i,l,p[3],p[0]),o(i,l,p[2],p[0]),o(i,l,p[2],p[1])],[o(i,l,p[3],p[1]),o(i,l,p[3],p[0]),o(i,l,p[2],p[1])]);break;case 13:s.push([o(i,l,p[0],p[1]),o(i,l,p[2],p[1]),o(i,l,p[3],p[1])]);break;case 14:s.push([o(i,l,p[2],p[0]),o(i,l,p[1],p[0]),o(i,l,p[3],p[0])])}}else if(3===f){if(0==(g=(v[p[0]]<<0)+(v[p[1]]<<1)+(v[p[2]]<<2))||7===g)continue;switch(g){case 0:break;case 1:s.push([o(i,l,p[0],p[2]),o(i,l,p[0],p[1])]);break;case 2:s.push([o(i,l,p[1],p[0]),o(i,l,p[1],p[2])]);break;case 3:s.push([o(i,l,p[0],p[2]),o(i,l,p[1],p[2])]);break;case 4:s.push([o(i,l,p[2],p[1]),o(i,l,p[2],p[0])]);break;case 5:s.push([o(i,l,p[2],p[1]),o(i,l,p[0],p[1])]);break;case 6:s.push([o(i,l,p[1],p[0]),o(i,l,p[2],p[0])])}}else if(2===f){var g;if(0==(g=(v[p[0]]<<0)+(v[p[1]]<<1))||3===g)continue;switch(g){case 0:break;case 1:s.push([o(i,l,p[0],p[1])]);break;case 2:s.push([o(i,l,p[1],p[0])])}}}return s}}]},{}],293:[function(x,M,_){"use strict";var e=x("bit-twiddle"),o=x("union-find");function a(p,f){var g=p.length,m=p.length-f.length,u=Math.min;if(m)return m;switch(g){case 0:return 0;case 1:return p[0]-f[0];case 2:return(A=p[0]+p[1]-f[0]-f[1])||u(p[0],p[1])-u(f[0],f[1]);case 3:var w=p[0]+p[1],c=f[0]+f[1];if(A=w+p[2]-(c+f[2]))return A;var A,k=u(p[0],p[1]),C=u(f[0],f[1]);return(A=u(k,p[2])-u(C,f[2]))||u(k+p[2],w)-u(C+f[2],c);default:var E=p.slice(0);E.sort();var L=f.slice(0);L.sort();for(var D=0;D<g;++D)if(m=E[D]-L[D])return m;return 0}}function l(p,f){return a(p[0],f[0])}function i(p,f){if(f){for(var g=p.length,m=new Array(g),u=0;u<g;++u)m[u]=[p[u],f[u]];for(m.sort(l),u=0;u<g;++u)p[u]=m[u][0],f[u]=m[u][1];return p}return p.sort(a),p}function v(p){if(0===p.length)return[];for(var f=1,g=p.length,m=1;m<g;++m){var u=p[m];if(a(u,p[m-1])){if(m===f){f++;continue}p[f++]=u}}return p.length=f,p}function h(p,f){for(var g=0,m=p.length-1,u=-1;g<=m;){var w=g+m>>1,c=a(p[w],f);c<=0?(0===c&&(u=w),g=w+1):c>0&&(m=w-1)}return u}function s(p,f){for(var g=new Array(p.length),m=0,u=g.length;m<u;++m)g[m]=[];for(var w=[],c=(m=0,f.length);m<c;++m)for(var A=f[m],k=A.length,C=1,E=1<<k;C<E;++C){w.length=e.popCount(C);for(var L=0,D=0;D<k;++D)C&1<<D&&(w[L++]=A[D]);var N=h(p,w);if(!(N<0))for(;g[N++].push(m),!(N>=p.length||0!==a(p[N],w)););}return g}function d(p,f){if(f<0)return[];for(var g=[],m=(1<<f+1)-1,u=0;u<p.length;++u)for(var w=p[u],c=m;c<1<<w.length;c=e.nextCombination(c)){for(var A=new Array(f+1),k=0,C=0;C<w.length;++C)c&1<<C&&(A[k++]=w[C]);g.push(A)}return i(g)}_.dimension=function(p){for(var f=0,g=Math.max,m=0,u=p.length;m<u;++m)f=g(f,p[m].length);return f-1},_.countVertices=function(p){for(var f=-1,g=Math.max,m=0,u=p.length;m<u;++m)for(var w=p[m],c=0,A=w.length;c<A;++c)f=g(f,w[c]);return f+1},_.cloneCells=function(p){for(var f=new Array(p.length),g=0,m=p.length;g<m;++g)f[g]=p[g].slice(0);return f},_.compareCells=a,_.normalize=i,_.unique=v,_.findCell=h,_.incidence=s,_.dual=function(p,f){if(!f)return s(v(d(p,0)),p);for(var g=new Array(f),m=0;m<f;++m)g[m]=[];m=0;for(var u=p.length;m<u;++m)for(var w=p[m],c=0,A=w.length;c<A;++c)g[w[c]].push(m);return g},_.explode=function(p){for(var f=[],g=0,m=p.length;g<m;++g)for(var u=p[g],w=0|u.length,c=1,A=1<<w;c<A;++c){for(var k=[],C=0;C<w;++C)c>>>C&1&&k.push(u[C]);f.push(k)}return i(f)},_.skeleton=d,_.boundary=function(p){for(var f=[],g=0,m=p.length;g<m;++g)for(var u=p[g],w=0,c=u.length;w<c;++w){for(var A=new Array(u.length-1),k=0,C=0;k<c;++k)k!==w&&(A[C++]=u[k]);f.push(A)}return i(f)},_.connectedComponents=function(p,f){return f?function(g,m){for(var u=new o(m),w=0;w<g.length;++w)for(var c=g[w],A=0;A<c.length;++A)for(var k=A+1;k<c.length;++k)u.link(c[A],c[k]);var C=[],E=u.ranks;for(w=0;w<E.length;++w)E[w]=-1;for(w=0;w<g.length;++w){var L=u.find(g[w][0]);E[L]<0?(E[L]=C.length,C.push([g[w].slice(0)])):C[E[L]].push(g[w].slice(0))}return C}(p,f):function(g){for(var m=v(i(d(g,0))),u=new o(m.length),w=0;w<g.length;++w)for(var c=g[w],A=0;A<c.length;++A)for(var k=h(m,[c[A]]),C=A+1;C<c.length;++C)u.link(k,h(m,[c[C]]));var E=[],L=u.ranks;for(w=0;w<L.length;++w)L[w]=-1;for(w=0;w<g.length;++w){var D=u.find(h(m,[g[w][0]]));L[D]<0?(L[D]=E.length,E.push([g[w].slice(0)])):E[L[D]].push(g[w].slice(0))}return E}(p)}},{"bit-twiddle":32,"union-find":309}],294:[function(x,M,_){arguments[4][32][0].apply(_,arguments)},{dup:32}],295:[function(x,M,_){arguments[4][293][0].apply(_,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(x,M,_){"use strict";function e(o){this.roots=new Array(o),this.ranks=new Array(o);for(var a=0;a<o;++a)this.roots[a]=a,this.ranks[a]=0}M.exports=e,e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var o=this.roots.length;return this.roots.push(o),this.ranks.push(0),o},e.prototype.find=function(o){for(var a=this.roots;a[o]!==o;){var l=a[o];a[o]=a[l],o=l}return o},e.prototype.link=function(o,a){var l=this.find(o),i=this.find(a);if(l!==i){var v=this.ranks,h=this.roots,s=v[l],d=v[i];s<d?h[l]=i:d<s?h[i]=l:(h[i]=l,++v[l])}}},{}],297:[function(x,M,_){"use strict";M.exports=function(a,l,i){for(var v=l.length,h=a.length,s=new Array(v),d=new Array(v),p=new Array(v),f=new Array(v),g=0;g<v;++g)s[g]=d[g]=-1,p[g]=1/0,f[g]=!1;for(g=0;g<h;++g){var m=a[g];if(2!==m.length)throw new Error("Input must be a graph");var u=m[1],w=m[0];d[w]=-1!==d[w]?-2:u,s[u]=-1!==s[u]?-2:w}function c(re){if(f[re])return 1/0;var K,ie,W=s[re],ae=d[re];return W<0||ae<0?1/0:(K=l[W],ie=l[ae],Math.abs(e(l[re],K,ie))/Math.sqrt(Math.pow(K[0]-ie[0],2)+Math.pow(K[1]-ie[1],2)))}function A(re,X){var K=I[re],ie=I[X];I[re]=ie,I[X]=K,P[K]=X,P[ie]=re}function k(re){return p[I[re]]}function C(re){return 1&re?re-1>>1:(re>>1)-1}function E(re){for(var X=k(re);;){var K=X,ie=2*re+1,q=2*(re+1),U=re;if(ie<j){var W=k(ie);W<K&&(U=ie,K=W)}if(q<j&&k(q)<K&&(U=q),U===re)return re;A(re,U),re=U}}function L(re){for(var X=k(re);re>0;){var K=C(re);if(!(K>=0&&X<k(K)))return re;A(re,K),re=K}}function D(){if(j>0){var re=I[0];return A(0,j-1),j-=1,E(0),re}return-1}function N(re,X){var K=I[re];return p[K]===X?re:(p[K]=-1/0,L(re),D(),p[K]=X,L((j+=1)-1))}function F(re){if(!f[re]){f[re]=!0;var X=s[re],K=d[re];s[K]>=0&&(s[K]=X),d[X]>=0&&(d[X]=K),P[X]>=0&&N(P[X],c(X)),P[K]>=0&&N(P[K],c(K))}}var I=[],P=new Array(v);for(g=0;g<v;++g)(p[g]=c(g))<1/0?(P[g]=I.length,I.push(g)):P[g]=-1;var j=I.length;for(g=j>>1;g>=0;--g)E(g);for(;;){var V=D();if(V<0||p[V]>i)break;F(V)}var Z=[];for(g=0;g<v;++g)f[g]||(P[g]=Z.length,Z.push(l[g].slice()));function Y(re,X){if(re[X]<0)return X;var K=X,ie=X;do{var q=re[ie];if(!f[ie]||q<0||q===ie||(q=re[ie=q],!f[ie]||q<0||q===ie))break;ie=q,K=re[K]}while(K!==ie);for(var U=X;U!==ie;U=re[U])re[U]=ie;return ie}var ee=[];return a.forEach(function(re){var X=Y(s,re[0]),K=Y(d,re[1]);if(X>=0&&K>=0&&X!==K){var ie=P[X],q=P[K];ie!==q&&ee.push([ie,q])}}),o.unique(o.normalize(ee)),{positions:Z,edges:ee}};var e=x("robust-orientation"),o=x("simplicial-complex")},{"robust-orientation":284,"simplicial-complex":295}],298:[function(x,M,_){"use strict";M.exports=function(a,l){var i,v,h,s;if(l[0][0]<l[1][0])i=l[0],v=l[1];else{if(!(l[0][0]>l[1][0]))return o(l,a);i=l[1],v=l[0]}if(a[0][0]<a[1][0])h=a[0],s=a[1];else{if(!(a[0][0]>a[1][0]))return-o(a,l);h=a[1],s=a[0]}var d=e(i,v,s),p=e(i,v,h);if(d<0){if(p<=0)return d}else if(d>0){if(p>=0)return d}else if(p)return p;if(d=e(s,h,v),p=e(s,h,i),d<0){if(p<=0)return d}else if(d>0){if(p>=0)return d}else if(p)return p;return v[0]-s[0]};var e=x("robust-orientation");function o(a,l){var i,v,h,s;if(l[0][0]<l[1][0])i=l[0],v=l[1];else{if(!(l[0][0]>l[1][0])){var d=Math.min(a[0][1],a[1][1]),p=Math.max(a[0][1],a[1][1]),f=Math.min(l[0][1],l[1][1]),g=Math.max(l[0][1],l[1][1]);return p<f?p-f:d>g?d-g:p-g}i=l[1],v=l[0]}a[0][1]<a[1][1]?(h=a[0],s=a[1]):(h=a[1],s=a[0]);var m=e(v,i,h);return m||(m=e(v,i,s))||s-v}},{"robust-orientation":284}],299:[function(x,M,_){"use strict";M.exports=function(p){for(var f=p.length,g=2*f,m=new Array(g),u=0;u<f;++u){var w=p[u],c=w[0][0]<w[1][0];m[2*u]=new d(w[0][0],w,c,u),m[2*u+1]=new d(w[1][0],w,!c,u)}m.sort(function(F,I){var P=F.x-I.x;return P||(P=F.create-I.create)||Math.min(F.segment[0][1],F.segment[1][1])-Math.min(I.segment[0][1],I.segment[1][1])});var A=o(l),k=[],C=[],E=[];for(u=0;u<g;){for(var L=m[u].x,D=[];u<g;){var N=m[u];if(N.x!==L)break;u+=1,N.segment[0][0]===N.x&&N.segment[1][0]===N.x?N.create&&(N.segment[0][1]<N.segment[1][1]?(D.push(new s(N.segment[0][1],N.index,!0,!0)),D.push(new s(N.segment[1][1],N.index,!1,!1))):(D.push(new s(N.segment[1][1],N.index,!0,!1)),D.push(new s(N.segment[0][1],N.index,!1,!0)))):A=N.create?A.insert(N.segment,N.index):A.remove(N.segment)}k.push(A.root),C.push(L),E.push(D)}return new i(k,C,E)};var e=x("binary-search-bounds"),o=x("functional-red-black-tree"),a=x("robust-orientation"),l=x("./lib/order-segments");function i(p,f,g){this.slabs=p,this.coordinates=f,this.horizontal=g}function v(p,f){return p.y-f}function h(p,f){for(var g=null;p;){var m,u,w=p.key;w[0][0]<w[1][0]?(m=w[0],u=w[1]):(m=w[1],u=w[0]);var c=a(m,u,f);if(c<0)p=p.left;else if(c>0)if(f[0]!==w[1][0])g=p,p=p.right;else{if(A=h(p.right,f))return A;p=p.left}else{if(f[0]!==w[1][0])return p;var A;if(A=h(p.right,f))return A;p=p.left}}return g}function s(p,f,g,m){this.y=p,this.index=f,this.start=g,this.closed=m}function d(p,f,g,m){this.x=p,this.segment=f,this.create=g,this.index=m}i.prototype.castUp=function(p){var f=e.le(this.coordinates,p[0]);if(f<0)return-1;var g=h(this.slabs[f],p),m=-1;if(g&&(m=g.value),this.coordinates[f]===p[0]){var u=null;if(g&&(u=g.key),f>0){var w=h(this.slabs[f-1],p);w&&(u?l(w.key,u)>0&&(u=w.key,m=w.value):(m=w.value,u=w.key))}var c=this.horizontal[f];if(c.length>0){var A=e.ge(c,p[1],v);if(A<c.length){var k=c[A];if(p[1]===k.y){if(k.closed)return k.index;for(;A<c.length-1&&c[A+1].y===p[1];)if((k=c[A+=1]).closed)return k.index;if(k.y===p[1]&&!k.start){if((A+=1)>=c.length)return m;k=c[A]}}if(k.start)if(u){var C=a(u[0],u[1],[p[0],k.y]);u[0][0]>u[1][0]&&(C=-C),C>0&&(m=k.index)}else m=k.index;else k.y!==p[1]&&(m=k.index)}}}return m}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(x,M,_){"use strict";var e=x("robust-dot-product"),o=x("robust-sum");function a(i,v){var h=o(e(i,v),[v[v.length-1]]);return h[h.length-1]}function l(i,v,h,s){var d=-v/(s-v);d<0?d=0:d>1&&(d=1);for(var p=1-d,f=i.length,g=new Array(f),m=0;m<f;++m)g[m]=d*i[m]+p*h[m];return g}M.exports=function(i,v){for(var h=[],s=[],d=a(i[i.length-1],v),p=i[i.length-1],f=i[0],g=0;g<i.length;++g,p=f){var m=a(f=i[g],v);if(d<0&&m>0||d>0&&m<0){var u=l(p,m,f,d);h.push(u),s.push(u.slice())}m<0?s.push(f.slice()):m>0?h.push(f.slice()):(h.push(f.slice()),s.push(f.slice())),d=m}return{positive:h,negative:s}},M.exports.positive=function(i,v){for(var h=[],s=a(i[i.length-1],v),d=i[i.length-1],p=i[0],f=0;f<i.length;++f,d=p){var g=a(p=i[f],v);(s<0&&g>0||s>0&&g<0)&&h.push(l(d,g,p,s)),g>=0&&h.push(p.slice()),s=g}return h},M.exports.negative=function(i,v){for(var h=[],s=a(i[i.length-1],v),d=i[i.length-1],p=i[0],f=0;f<i.length;++f,d=p){var g=a(p=i[f],v);(s<0&&g>0||s>0&&g<0)&&h.push(l(d,g,p,s)),g<=0&&h.push(p.slice()),s=g}return h}},{"robust-dot-product":281,"robust-sum":289}],301:[function(x,M,_){!function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(h){return l(v(h),arguments)}function a(h,s){return o.apply(null,[h].concat(s||[]))}function l(h,s){var d,p,f,g,m,u,w,c,A,k=1,C=h.length,E="";for(p=0;p<C;p++)if("string"==typeof h[p])E+=h[p];else if("object"==typeof h[p]){if((g=h[p]).keys)for(d=s[k],f=0;f<g.keys.length;f++){if(null==d)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',g.keys[f],g.keys[f-1]));d=d[g.keys[f]]}else d=g.param_no?s[g.param_no]:s[k++];if(e.not_type.test(g.type)&&e.not_primitive.test(g.type)&&d instanceof Function&&(d=d()),e.numeric_arg.test(g.type)&&"number"!=typeof d&&isNaN(d))throw new TypeError(o("[sprintf] expecting number but found %T",d));switch(e.number.test(g.type)&&(c=d>=0),g.type){case"b":d=parseInt(d,10).toString(2);break;case"c":d=String.fromCharCode(parseInt(d,10));break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,g.width?parseInt(g.width):0);break;case"e":d=g.precision?parseFloat(d).toExponential(g.precision):parseFloat(d).toExponential();break;case"f":d=g.precision?parseFloat(d).toFixed(g.precision):parseFloat(d);break;case"g":d=g.precision?String(Number(d.toPrecision(g.precision))):parseFloat(d);break;case"o":d=(parseInt(d,10)>>>0).toString(8);break;case"s":d=String(d),d=g.precision?d.substring(0,g.precision):d;break;case"t":d=String(!!d),d=g.precision?d.substring(0,g.precision):d;break;case"T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase(),d=g.precision?d.substring(0,g.precision):d;break;case"u":d=parseInt(d,10)>>>0;break;case"v":d=d.valueOf(),d=g.precision?d.substring(0,g.precision):d;break;case"x":d=(parseInt(d,10)>>>0).toString(16);break;case"X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase()}e.json.test(g.type)?E+=d:(!e.number.test(g.type)||c&&!g.sign?A="":(A=c?"+":"-",d=d.toString().replace(e.sign,"")),u=g.pad_char?"0"===g.pad_char?"0":g.pad_char.charAt(1):" ",w=g.width-(A+d).length,m=g.width&&w>0?u.repeat(w):"",E+=g.align?A+d+m:"0"===u?A+m+d:m+A+d)}return E}var i=Object.create(null);function v(h){if(i[h])return i[h];for(var s,d=h,p=[],f=0;d;){if(null!==(s=e.text.exec(d)))p.push(s[0]);else if(null!==(s=e.modulo.exec(d)))p.push("%");else{if(null===(s=e.placeholder.exec(d)))throw new SyntaxError("[sprintf] unexpected placeholder");if(s[2]){f|=1;var g=[],m=s[2],u=[];if(null===(u=e.key.exec(m)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(g.push(u[1]);""!==(m=m.substring(u[0].length));)if(null!==(u=e.key_access.exec(m)))g.push(u[1]);else{if(null===(u=e.index_access.exec(m)))throw new SyntaxError("[sprintf] failed to parse named argument key");g.push(u[1])}s[2]=g}else f|=2;if(3===f)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");p.push({placeholder:s[0],param_no:s[1],keys:s[2],sign:s[3],pad_char:s[4],align:s[5],width:s[6],precision:s[7],type:s[8]})}d=d.substring(s[0].length)}return i[h]=p}void 0!==_&&(_.sprintf=o,_.vsprintf=a),"undefined"!=typeof window&&(window.sprintf=o,window.vsprintf=a)}()},{}],302:[function(x,M,_){"use strict";M.exports=function(i,v){if(i.dimension<=0)return{positions:[],cells:[]};if(1===i.dimension)return function(d,p){for(var f=o(d,p),g=f.length,m=new Array(g),u=new Array(g),w=0;w<g;++w)m[w]=[f[w]],u[w]=[w];return{positions:m,cells:u}}(i,v);var h=i.order.join()+"-"+i.dtype,s=l[h];return v=+v||0,s||(s=l[h]=function(d,p){var g=a[d.length+"d"];if(g)return g(e,d,p)}(i.order,i.dtype)),s(i,v)};var e=x("ndarray-extract-contour"),o=x("zero-crossings"),a={"2d":function(i,v,h){var s=i({order:v,scalarArguments:3,getters:"generic"===h?[0]:void 0,phase:function(d,p,f,g){return d>g|0},vertex:function(d,p,f,g,m,u,w,c,A,k,C,E,L){var D=(w<<0)+(c<<1)+(A<<2)+(k<<3)|0;if(0!==D&&15!==D)switch(D){case 0:C.push([d-.5,p-.5]);break;case 1:C.push([d-.25-.25*(g+f-2*L)/(f-g),p-.25-.25*(m+f-2*L)/(f-m)]);break;case 2:C.push([d-.75-.25*(-g-f+2*L)/(g-f),p-.25-.25*(u+g-2*L)/(g-u)]);break;case 3:C.push([d-.5,p-.5-.5*(m+f+u+g-4*L)/(f-m+g-u)]);break;case 4:C.push([d-.25-.25*(u+m-2*L)/(m-u),p-.75-.25*(-m-f+2*L)/(m-f)]);break;case 5:C.push([d-.5-.5*(g+f+u+m-4*L)/(f-g+m-u),p-.5]);break;case 6:C.push([d-.5-.25*(-g-f+u+m)/(g-f+m-u),p-.5-.25*(-m-f+u+g)/(m-f+g-u)]);break;case 7:C.push([d-.75-.25*(u+m-2*L)/(m-u),p-.75-.25*(u+g-2*L)/(g-u)]);break;case 8:C.push([d-.75-.25*(-u-m+2*L)/(u-m),p-.75-.25*(-u-g+2*L)/(u-g)]);break;case 9:C.push([d-.5-.25*(g+f+-u-m)/(f-g+u-m),p-.5-.25*(m+f+-u-g)/(f-m+u-g)]);break;case 10:C.push([d-.5-.5*(-g-f-u-m+4*L)/(g-f+u-m),p-.5]);break;case 11:C.push([d-.25-.25*(-u-m+2*L)/(u-m),p-.75-.25*(m+f-2*L)/(f-m)]);break;case 12:C.push([d-.5,p-.5-.5*(-m-f-u-g+4*L)/(m-f+u-g)]);break;case 13:C.push([d-.75-.25*(g+f-2*L)/(f-g),p-.25-.25*(-u-g+2*L)/(u-g)]);break;case 14:C.push([d-.25-.25*(-g-f+2*L)/(g-f),p-.25-.25*(-m-f+2*L)/(m-f)]);break;case 15:C.push([d-.5,p-.5])}},cell:function(d,p,f,g,m,u,w,c,A){c.push(m?[d,p]:[p,d])}});return function(d,p){var f=[],g=[];return s(d,f,g,p),{positions:f,cells:g}}}},l={}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(x,M,_){(function(e){(function(){"use strict";M.exports=function i(v,h,s){s=s||{};var d=l[v];d||(d=l[v]={" ":{data:new Float32Array(0),shape:.2}});var p=d[h];if(!p)if(h.length<=1||!/\d/.test(h))p=d[h]=function(L){for(var D=L.cells,N=L.positions,F=new Float32Array(6*D.length),I=0,P=0,j=0;j<D.length;++j)for(var V=D[j],Z=0;Z<3;++Z){var Y=N[V[Z]];F[I++]=Y[0],F[I++]=Y[1]+1.4,P=Math.max(Y[0],P)}return{data:F,shape:P}}(o(h,{triangles:!0,font:v,textAlign:s.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var f=h.split(/(\d|\s)/),g=new Array(f.length),m=0,u=0,w=0;w<f.length;++w)g[w]=i(v,f[w]),m+=g[w].data.length,u+=g[w].shape,w>0&&(u+=.02);var c=new Float32Array(m),A=0,k=-.5*u;for(w=0;w<g.length;++w){for(var C=g[w].data,E=0;E<C.length;E+=2)c[A++]=C[E]+k,c[A++]=C[E+1];k+=g[w].shape+.02}p=d[h]={data:c,shape:u}}return p};var o=x("vectorize-text"),a=window||e.global||{},l=a.__TEXT_CACHE||{};a.__TEXT_CACHE={}}).call(this)}).call(this,x("_process"))},{_process:5,"vectorize-text":311}],304:[function(x,M,_){"use strict";var e=x("parse-unit");function o(l,i){var v=e(getComputedStyle(l).getPropertyValue(i));return v[0]*a(v[1],l)}function a(l,i){switch(i=i||document.body,l=(l||"px").trim().toLowerCase(),i!==window&&i!==document||(i=document.body),l){case"%":return i.clientHeight/100;case"ch":case"ex":return function(v,h){var s=document.createElement("div");s.style["font-size"]="128"+v,h.appendChild(s);var d=o(s,"font-size")/128;return h.removeChild(s),d}(l,i);case"em":return o(i,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}M.exports=a},{"parse-unit":265}],305:[function(x,M,_){"use strict";M.exports=function(m){var u=(m=m||{}).center||[0,0,0],w=m.up||[0,1,0],c=m.right||d(w),A=m.radius||1,k=m.theta||0,C=m.phi||0;if(u=[].slice.call(u,0,3),w=[].slice.call(w,0,3),i(w,w),c=[].slice.call(c,0,3),i(c,c),"eye"in m){var E=m.eye,L=[E[0]-u[0],E[1]-u[1],E[2]-u[2]];l(c,L,w),h(c[0],c[1],c[2])<1e-6?c=d(w):i(c,c),A=h(L[0],L[1],L[2]);var D=v(w,L)/A,N=v(c,L)/A;C=Math.acos(D),k=Math.acos(N)}return A=Math.log(A),new p(m.zoomMin,m.zoomMax,u,w,c,A,k,C)};var e=x("filtered-vector"),o=x("gl-mat4/invert"),a=x("gl-mat4/rotate"),l=x("gl-vec3/cross"),i=x("gl-vec3/normalize"),v=x("gl-vec3/dot");function h(m,u,w){return Math.sqrt(Math.pow(m,2)+Math.pow(u,2)+Math.pow(w,2))}function s(m){return Math.min(1,Math.max(-1,m))}function d(m){var u=Math.abs(m[0]),w=Math.abs(m[1]),c=Math.abs(m[2]),A=[0,0,0];u>Math.max(w,c)?A[2]=1:w>Math.max(u,c)?A[0]=1:A[1]=1;for(var k=0,C=0,E=0;E<3;++E)k+=m[E]*m[E],C+=A[E]*m[E];for(E=0;E<3;++E)A[E]-=C/k*m[E];return i(A,A),A}function p(m,u,w,c,A,k,C,E){this.center=e(w),this.up=e(c),this.right=e(A),this.radius=e([k]),this.angle=e([C,E]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(m,u),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var L=0;L<16;++L)this.computedMatrix[L]=.5;this.recalcMatrix(0)}var f=p.prototype;f.setDistanceLimits=function(m,u){m=m>0?Math.log(m):-1/0,u=u>0?Math.log(u):1/0,u=Math.max(u,m),this.radius.bounds[0][0]=m,this.radius.bounds[1][0]=u},f.getDistanceLimits=function(m){var u=this.radius.bounds[0];return m?(m[0]=Math.exp(u[0][0]),m[1]=Math.exp(u[1][0]),m):[Math.exp(u[0][0]),Math.exp(u[1][0])]},f.recalcMatrix=function(m){this.center.curve(m),this.up.curve(m),this.right.curve(m),this.radius.curve(m),this.angle.curve(m);for(var u=this.computedUp,w=this.computedRight,c=0,A=0,k=0;k<3;++k)A+=u[k]*w[k],c+=u[k]*u[k];var C=Math.sqrt(c),E=0;for(k=0;k<3;++k)w[k]-=u[k]*A/c,E+=w[k]*w[k],u[k]/=C;var L=Math.sqrt(E);for(k=0;k<3;++k)w[k]/=L;var D=this.computedToward;l(D,u,w),i(D,D);var N=Math.exp(this.computedRadius[0]),F=this.computedAngle[0],I=this.computedAngle[1],P=Math.cos(F),j=Math.sin(F),V=Math.cos(I),Z=Math.sin(I),Y=this.computedCenter,ee=P*V,re=j*V,X=Z,K=-P*Z,ie=-j*Z,q=V,U=this.computedEye,W=this.computedMatrix;for(k=0;k<3;++k){var ae=ee*w[k]+re*D[k]+X*u[k];W[4*k+1]=K*w[k]+ie*D[k]+q*u[k],W[4*k+2]=ae,W[4*k+3]=0}var G=W[1],te=W[5],ne=W[9],le=W[2],ue=W[6],pe=W[10],de=te*pe-ne*ue,_e=ne*le-G*pe,me=G*ue-te*le,we=h(de,_e,me);for(_e/=we,me/=we,W[0]=de/=we,W[4]=_e,W[8]=me,k=0;k<3;++k)U[k]=Y[k]+W[2+4*k]*N;for(k=0;k<3;++k){E=0;for(var De=0;De<3;++De)E+=W[k+4*De]*U[De];W[12+k]=-E}W[15]=1},f.getMatrix=function(m,u){this.recalcMatrix(m);var w=this.computedMatrix;if(u){for(var c=0;c<16;++c)u[c]=w[c];return u}return w};var g=[0,0,0];f.rotate=function(m,u,w,c){if(this.angle.move(m,u,w),c){this.recalcMatrix(m);var A=this.computedMatrix;g[0]=A[2],g[1]=A[6],g[2]=A[10];for(var k=this.computedUp,C=this.computedRight,E=this.computedToward,L=0;L<3;++L)A[4*L]=k[L],A[4*L+1]=C[L],A[4*L+2]=E[L];for(a(A,A,c,g),L=0;L<3;++L)k[L]=A[4*L],C[L]=A[4*L+1];this.up.set(m,k[0],k[1],k[2]),this.right.set(m,C[0],C[1],C[2])}},f.pan=function(m,u,w,c){u=u||0,w=w||0,c=c||0,this.recalcMatrix(m);var A=this.computedMatrix,k=(Math.exp(this.computedRadius[0]),A[1]),C=A[5],E=A[9],L=h(k,C,E),D=A[0],N=A[4],F=A[8],I=D*(k/=L)+N*(C/=L)+F*(E/=L),P=h(D-=k*I,N-=C*I,F-=E*I),j=(D/=P)*u+k*w,V=(N/=P)*u+C*w,Z=(F/=P)*u+E*w;this.center.move(m,j,V,Z);var Y=Math.exp(this.computedRadius[0]);Y=Math.max(1e-4,Y+c),this.radius.set(m,Math.log(Y))},f.translate=function(m,u,w,c){this.center.move(m,u||0,w||0,c||0)},f.setMatrix=function(m,u,w,c){var A=1;"number"==typeof w&&(A=0|w),(A<0||A>3)&&(A=1);var k=(A+2)%3;u||(this.recalcMatrix(m),u=this.computedMatrix);var C=u[A],E=u[A+4],L=u[A+8];if(c){var D=Math.abs(C),N=Math.abs(E),F=Math.abs(L),I=Math.max(D,N,F);D===I?(C=C<0?-1:1,E=L=0):F===I?(L=L<0?-1:1,C=E=0):(E=E<0?-1:1,C=L=0)}else{var P=h(C,E,L);C/=P,E/=P,L/=P}var j,V,Z=u[k],Y=u[k+4],ee=u[k+8],re=Z*C+Y*E+ee*L,X=h(Z-=C*re,Y-=E*re,ee-=L*re),K=E*(ee/=X)-L*(Y/=X),ie=L*(Z/=X)-C*ee,q=C*Y-E*Z,U=h(K,ie,q);if(K/=U,ie/=U,q/=U,this.center.jump(m,ye,Me,Oe),this.radius.idle(m),this.up.jump(m,C,E,L),this.right.jump(m,Z,Y,ee),2===A){var W=u[1],ae=u[5],G=u[9];j=de<0?-Math.PI/2:Math.PI/2,V=Math.atan2(W*K+ae*ie+G*q,W*Z+ae*Y+G*ee)}else{var le=u[2],ue=u[6],pe=u[10],de=le*C+ue*E+pe*L,_e=le*Z+ue*Y+pe*ee,me=le*K+ue*ie+pe*q;j=Math.asin(s(de)),V=Math.atan2(me,_e)}this.angle.jump(m,V,j),this.recalcMatrix(m);var we=u[2],De=u[6],Le=u[10],Ie=this.computedMatrix;o(Ie,u);var je=Ie[15],ye=Ie[12]/je,Me=Ie[13]/je,Oe=Ie[14]/je,Pe=Math.exp(this.computedRadius[0]);this.center.jump(m,ye-we*Pe,Me-De*Pe,Oe-Le*Pe)},f.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},f.idle=function(m){this.center.idle(m),this.up.idle(m),this.right.idle(m),this.radius.idle(m),this.angle.idle(m)},f.flush=function(m){this.center.flush(m),this.up.flush(m),this.right.flush(m),this.radius.flush(m),this.angle.flush(m)},f.setDistance=function(m,u){u>0&&this.radius.set(m,Math.log(u))},f.lookAt=function(m,u,w,c){this.recalcMatrix(m),u=u||this.computedEye,w=w||this.computedCenter;var A=(c=c||this.computedUp)[0],k=c[1],C=c[2],E=h(A,k,C);if(!(E<1e-6)){A/=E,k/=E,C/=E;var L=u[0]-w[0],D=u[1]-w[1],N=u[2]-w[2],F=h(L,D,N);if(!(F<1e-6)){L/=F,D/=F,N/=F;var I=this.computedRight,P=I[0],j=I[1],V=I[2],Z=A*P+k*j+C*V,Y=h(P-=Z*A,j-=Z*k,V-=Z*C);if(!(Y<.01&&(Y=h(P=k*N-C*D,j=C*L-A*N,V=A*D-k*L))<1e-6)){P/=Y,j/=Y,V/=Y,this.up.set(m,A,k,C),this.right.set(m,P,j,V),this.center.set(m,w[0],w[1],w[2]),this.radius.set(m,Math.log(F));var ee=k*V-C*j,re=C*P-A*V,X=A*j-k*P,K=h(ee,re,X),q=P*L+j*D+V*N,U=(ee/=K)*L+(re/=K)*D+(X/=K)*N,W=Math.asin(s(A*L+k*D+C*N)),ae=Math.atan2(U,q),G=this.angle._state,te=G[G.length-1],ne=G[G.length-2];te%=2*Math.PI;var le=Math.abs(te+2*Math.PI-ae),ue=Math.abs(te-ae),pe=Math.abs(te-2*Math.PI-ae);le<ue&&(te+=2*Math.PI),pe<ue&&(te-=2*Math.PI),this.angle.jump(this.angle.lastT(),te,ne),this.angle.set(m,ae,W)}}}}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(x,M,_){"use strict";M.exports=function(o,a,l){var i=o*a,v=e*o,h=v-(v-o),s=o-h,d=e*a,p=d-(d-a),f=a-p,g=s*f-(i-h*p-s*p-h*f);return l?(l[0]=g,l[1]=i,l):[g,i]};var e=+(Math.pow(2,27)+1)},{}],307:[function(x,M,_){"use strict";M.exports=function(e,o,a){var l=e+o,i=l-e,v=o-i,h=e-(l-i);return a?(a[0]=h+v,a[1]=l,a):[h+v,l]}},{}],308:[function(x,M,_){(function(e){(function(){"use strict";var o=x("bit-twiddle"),a=x("dup"),l=x("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:a([32,0]),UINT16:a([32,0]),UINT32:a([32,0]),BIGUINT64:a([32,0]),INT8:a([32,0]),INT16:a([32,0]),INT32:a([32,0]),BIGINT64:a([32,0]),FLOAT:a([32,0]),DOUBLE:a([32,0]),DATA:a([32,0]),UINT8C:a([32,0]),BUFFER:a([32,0])});var i="undefined"!=typeof Uint8ClampedArray,v="undefined"!=typeof BigUint64Array,h="undefined"!=typeof BigInt64Array,s=e.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=a([32,0])),s.BIGUINT64||(s.BIGUINT64=a([32,0])),s.BIGINT64||(s.BIGINT64=a([32,0])),s.BUFFER||(s.BUFFER=a([32,0]));var d=s.DATA,p=s.BUFFER;function f(P){if(P){var V=o.log2(P.length||P.byteLength);d[V].push(P)}}function g(P){P=o.nextPow2(P);var j=o.log2(P),V=d[j];return V.length>0?V.pop():new ArrayBuffer(P)}function m(P){return new Uint8Array(g(P),0,P)}function u(P){return new Uint16Array(g(2*P),0,P)}function w(P){return new Uint32Array(g(4*P),0,P)}function c(P){return new Int8Array(g(P),0,P)}function A(P){return new Int16Array(g(2*P),0,P)}function k(P){return new Int32Array(g(4*P),0,P)}function C(P){return new Float32Array(g(4*P),0,P)}function E(P){return new Float64Array(g(8*P),0,P)}function L(P){return i?new Uint8ClampedArray(g(P),0,P):m(P)}function D(P){return v?new BigUint64Array(g(8*P),0,P):null}function N(P){return h?new BigInt64Array(g(8*P),0,P):null}function F(P){return new DataView(g(P),0,P)}function I(P){P=o.nextPow2(P);var j=o.log2(P),V=p[j];return V.length>0?V.pop():new l(P)}_.free=function(P){if(l.isBuffer(P))p[o.log2(P.length)].push(P);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(P)&&(P=P.buffer),!P)return;var V=0|o.log2(P.length||P.byteLength);d[V].push(P)}},_.freeUint8=_.freeUint16=_.freeUint32=_.freeBigUint64=_.freeInt8=_.freeInt16=_.freeInt32=_.freeBigInt64=_.freeFloat32=_.freeFloat=_.freeFloat64=_.freeDouble=_.freeUint8Clamped=_.freeDataView=function(P){f(P.buffer)},_.freeArrayBuffer=f,_.freeBuffer=function(P){p[o.log2(P.length)].push(P)},_.malloc=function(P,j){if(void 0===j||"arraybuffer"===j)return g(P);switch(j){case"uint8":return m(P);case"uint16":return u(P);case"uint32":return w(P);case"int8":return c(P);case"int16":return A(P);case"int32":return k(P);case"float":case"float32":return C(P);case"double":case"float64":return E(P);case"uint8_clamped":return L(P);case"bigint64":return N(P);case"biguint64":return D(P);case"buffer":return I(P);case"data":case"dataview":return F(P);default:return null}return null},_.mallocArrayBuffer=g,_.mallocUint8=m,_.mallocUint16=u,_.mallocUint32=w,_.mallocInt8=c,_.mallocInt16=A,_.mallocInt32=k,_.mallocFloat32=_.mallocFloat=C,_.mallocFloat64=_.mallocDouble=E,_.mallocUint8Clamped=L,_.mallocBigUint64=D,_.mallocBigInt64=N,_.mallocDataView=F,_.mallocBuffer=I,_.clearCache=function(){for(var P=0;P<32;++P)s.UINT8[P].length=0,s.UINT16[P].length=0,s.UINT32[P].length=0,s.INT8[P].length=0,s.INT16[P].length=0,s.INT32[P].length=0,s.FLOAT[P].length=0,s.DOUBLE[P].length=0,s.BIGUINT64[P].length=0,s.BIGINT64[P].length=0,s.UINT8C[P].length=0,d[P].length=0,p[P].length=0}}).call(this)}).call(this,void 0!==y?y:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(x,M,_){"use strict";function e(a){this.roots=new Array(a),this.ranks=new Array(a);for(var l=0;l<a;++l)this.roots[l]=l,this.ranks[l]=0}M.exports=e;var o=e.prototype;Object.defineProperty(o,"length",{get:function(){return this.roots.length}}),o.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},o.find=function(a){for(var l=a,i=this.roots;i[a]!==a;)a=i[a];for(;i[l]!==a;){var v=i[l];i[l]=a,l=v}return a},o.link=function(a,l){var i=this.find(a),v=this.find(l);if(i!==v){var h=this.ranks,s=this.roots,d=h[i],p=h[v];d<p?s[i]=v:p<d?s[v]=i:(s[v]=i,++h[i])}}},{}],310:[function(x,M,_){"use strict";M.exports=function(e,o,a){return 0===e.length?e:o?(a||e.sort(o),function(l,i){for(var v=1,h=l.length,s=l[0],d=l[0],p=1;p<h;++p)if(d=s,i(s=l[p],d)){if(p===v){v++;continue}l[v++]=s}return l.length=v,l}(e,o)):(a||e.sort(),function(l){for(var i=1,v=l.length,h=l[0],s=l[0],d=1;d<v;++d,s=h)if(s=h,(h=l[d])!==s){if(d===i){i++;continue}l[i++]=h}return l.length=i,l}(e))}},{}],311:[function(x,M,_){"use strict";M.exports=function(l,i){return"object"==typeof i&&null!==i||(i={}),e(l,i.canvas||o,i.context||a,i)};var e=x("./lib/vtext"),o=null,a=null;"undefined"!=typeof document&&((o=document.createElement("canvas")).width=8192,o.height=1024,a=o.getContext("2d"))},{"./lib/vtext":312}],312:[function(x,M,_){M.exports=function(f,g,m,u){var w=64,c=1.25,A={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return u&&(u.size&&u.size>0&&(w=u.size),u.lineSpacing&&u.lineSpacing>0&&(c=u.lineSpacing),u.styletags&&u.styletags.breaklines&&(A.breaklines=!!u.styletags.breaklines),u.styletags&&u.styletags.bolds&&(A.bolds=!!u.styletags.bolds),u.styletags&&u.styletags.italics&&(A.italics=!!u.styletags.italics),u.styletags&&u.styletags.subscripts&&(A.subscripts=!!u.styletags.subscripts),u.styletags&&u.styletags.superscripts&&(A.superscripts=!!u.styletags.superscripts)),m.font=[u.fontStyle,u.fontVariant,u.fontWeight,w+"px",u.font].filter(function(k){return k}).join(" "),m.textAlign="start",m.textBaseline="alphabetic",m.direction="ltr",p(function(k,C,E,L,D,N){E=(E=E.replace(/\n/g,"")).replace(/\<br\>/g,!0===N.breaklines?"\n":" ");var F="",I=[];for(Z=0;Z<E.length;++Z)I[Z]=F;!0===N.bolds&&(I=h("b","b|",E,I)),!0===N.italics&&(I=h("i","i|",E,I)),!0===N.superscripts&&(I=h("sup","+1",E,I)),!0===N.subscripts&&(I=h("sub","-1",E,I));var P=[],j="";for(Z=0;Z<E.length;++Z)null!==I[Z]&&(j+=E[Z],P.push(I[Z]));var V,Z,Y,ee,re,X=j.split("\n"),K=X.length,ie=Math.round(D*L),q=L,U=2*L,W=0,ae=K*ie+U;k.height<ae&&(k.height=ae),C.fillStyle="#000",C.fillRect(0,0,k.width,k.height),C.fillStyle="#fff";var G=0,te="";function ne(){if(""!==te){var De=C.measureText(te).width;C.fillText(te,q+Y,U+ee),Y+=De}}function le(){return Math.round(re)+"px "}function ue(De,Le){var Ie=""+C.font;if(!0===N.subscripts){var je=De.indexOf("-"),ye=Le.indexOf("-"),Me=je>-1?parseInt(De[1+je]):0,Oe=ye>-1?parseInt(Le[1+ye]):0;Me!==Oe&&(Ie=Ie.replace(le(),"?px "),re*=Math.pow(.75,Oe-Me),Ie=Ie.replace("?px ",le())),ee+=.25*ie*(Oe-Me)}if(!0===N.superscripts){var Pe=De.indexOf("+"),Re=Le.indexOf("+"),Ue=Pe>-1?parseInt(De[1+Pe]):0,qe=Re>-1?parseInt(Le[1+Re]):0;Ue!==qe&&(Ie=Ie.replace(le(),"?px "),re*=Math.pow(.75,qe-Ue),Ie=Ie.replace("?px ",le())),ee-=.25*ie*(qe-Ue)}if(!0===N.bolds){var Xe=De.indexOf("b|")>-1,lt=Le.indexOf("b|")>-1;!Xe&&lt&&(Ie=He?Ie.replace("italic ","italic bold "):"bold "+Ie),Xe&&!lt&&(Ie=Ie.replace("bold ",""))}if(!0===N.italics){var He=De.indexOf("i|")>-1,$e=Le.indexOf("i|")>-1;!He&&$e&&(Ie="italic "+Ie),He&&!$e&&(Ie=Ie.replace("italic ",""))}C.font=Ie}for(V=0;V<K;++V){var pe=X[V]+"\n";for(Y=0,ee=V*ie,re=L,te="",Z=0;Z<pe.length;++Z){var de=Z+G<P.length?P[Z+G]:P[P.length-1];F===de?te+=pe[Z]:(ne(),te=pe[Z],void 0!==de&&(ue(F,de),F=de))}ne(),G+=pe.length;var _e=0|Math.round(Y+2*q);W<_e&&(W=_e)}var me=W,we=U+ie*K;return o(C.getImageData(0,0,me,we).data,[we,me,4]).pick(-1,-1,0).transpose(1,0)}(g,m,f,w,c,A),u,w)},M.exports.processPixels=p;var e=x("surface-nets"),o=x("ndarray"),a=x("simplify-planar-graph"),l=x("clean-pslg"),i=x("cdt2d"),v=x("planar-graph-to-polyline");function h(f,g,m,u){for(var w="<"+f+">",c="</"+f+">",A=w.length,k=c.length,C="+"===g[0]||"-"===g[0],E=0,L=-k;E>-1&&-1!==(E=m.indexOf(w,E))&&-1!==(L=m.indexOf(c,E+A))&&!(L<=E);){for(var D=E;D<L+k;++D)if(D<E+A||D>=L)u[D]=null,m=m.substr(0,D)+" "+m.substr(D+1);else if(null!==u[D]){var N=u[D].indexOf(g[0]);-1===N?u[D]+=g:C&&(u[D]=u[D].substr(0,N+1)+(1+parseInt(u[D][N+1]))+u[D].substr(N+2))}var F=E+A,I=m.substr(F,L-F).indexOf(w);E=-1!==I?I:L+k}return u}function d(f,g,m,u){var w=function(f,g){var m=e(f,128);return g?a(m.cells,m.positions,.25):{edges:m.cells,positions:m.positions}}(f,u),c=function(V,Z,Y){for(var ee=Z.textAlign||"start",re=Z.textBaseline||"alphabetic",X=[1<<30,1<<30],K=[0,0],ie=V.length,q=0;q<ie;++q)for(var U=V[q],W=0;W<2;++W)X[W]=0|Math.min(X[W],U[W]),K[W]=0|Math.max(K[W],U[W]);var ae=0;switch(ee){case"center":ae=-.5*(X[0]+K[0]);break;case"right":case"end":ae=-K[0];break;case"left":case"start":ae=-X[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+ee+"'")}var G=0;switch(re){case"hanging":case"top":G=-X[1];break;case"middle":G=-.5*(X[1]+K[1]);break;case"alphabetic":case"ideographic":G=-3*Y;break;case"bottom":G=-K[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+re+"'")}var te=1/Y;return"lineHeight"in Z?te*=+Z.lineHeight:"width"in Z?te=Z.width/(K[0]-X[0]):"height"in Z&&(te=Z.height/(K[1]-X[1])),V.map(function(ne){return[te*(ne[0]+ae),te*(ne[1]+G)]})}(w.positions,g,m),A=w.edges,k="ccw"===g.orientation;if(l(c,A),g.polygons||g.polygon||g.polyline){for(var C=v(A,c),E=new Array(C.length),L=0;L<C.length;++L){for(var D=C[L],N=new Array(D.length),F=0;F<D.length;++F){for(var I=D[F],P=new Array(I.length),j=0;j<I.length;++j)P[j]=c[I[j]].slice();k&&P.reverse(),N[F]=P}E[L]=N}return E}return g.triangles||g.triangulate||g.triangle?{cells:i(c,A,{delaunay:!1,exterior:!1,interior:!0}),positions:c}:{edges:A,positions:c}}function p(f,g,m){try{return d(f,g,m,!0)}catch(u){}try{return d(f,g,m,!1)}catch(u){}return g.polygons||g.polyline||g.polygon?[]:g.triangles||g.triangulate||g.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(x,M,_){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=w);var e=!1;if("function"==typeof WeakMap){var o=WeakMap;if("undefined"==typeof navigator||!/Firefox/.test(navigator.userAgent)){var a=new o,l=Object.freeze({});if(a.set(l,1),1===a.get(l))return void(M.exports=WeakMap);e=!0}}var i=Object.getOwnPropertyNames,v=Object.defineProperty,h=Object.isExtensible,s="weakmap:ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var d=new ArrayBuffer(25),p=new Uint8Array(d);crypto.getRandomValues(p),s="weakmap:rand:"+Array.prototype.map.call(p,function(E){return(E%36).toString(36)}).join("")+"___"}if(v(Object,"getOwnPropertyNames",{value:function(E){return i(E).filter(c)}}),"getPropertyNames"in Object){var f=Object.getPropertyNames;v(Object,"getPropertyNames",{value:function(E){return f(E).filter(c)}})}!function(){var E=Object.freeze;v(Object,"freeze",{value:function(N){return A(N),E(N)}});var L=Object.seal;v(Object,"seal",{value:function(N){return A(N),L(N)}});var D=Object.preventExtensions;v(Object,"preventExtensions",{value:function(N){return A(N),D(N)}})}();var g=!1,m=0,u=function(){this instanceof u||C();var E=[],L=[],D=m++;return Object.create(u.prototype,{get___:{value:k(function(N,F){var I,P=A(N);return P?D in P?P[D]:F:(I=E.indexOf(N))>=0?L[I]:F})},has___:{value:k(function(N){var F=A(N);return F?D in F:E.indexOf(N)>=0})},set___:{value:k(function(N,F){var I,P=A(N);return P?P[D]=F:(I=E.indexOf(N))>=0?L[I]=F:(L[I=E.length]=F,E[I]=N),this})},delete___:{value:k(function(N){var F,I,P=A(N);return P?D in P&&delete P[D]:!((F=E.indexOf(N))<0||(I=E.length-1,E[F]=void 0,L[F]=L[I],E[F]=E[I],E.length=I,L.length=I,0))})}})};u.prototype=Object.create(Object.prototype,{get:{value:function(E,L){return this.get___(E,L)},writable:!0,configurable:!0},has:{value:function(E){return this.has___(E)},writable:!0,configurable:!0},set:{value:function(E,L){return this.set___(E,L)},writable:!0,configurable:!0},delete:{value:function(E){return this.delete___(E)},writable:!0,configurable:!0}}),"function"==typeof o?function(){function E(){this instanceof u||C();var L,D=new o,N=void 0,F=!1;return L=e?function(I,P){return D.set(I,P),D.has(I)||(N||(N=new u),N.set(I,P)),this}:function(I,P){if(F)try{D.set(I,P)}catch(j){N||(N=new u),N.set___(I,P)}else D.set(I,P);return this},Object.create(u.prototype,{get___:{value:k(function(I,P){return N?D.has(I)?D.get(I):N.get___(I,P):D.get(I,P)})},has___:{value:k(function(I){return D.has(I)||!!N&&N.has___(I)})},set___:{value:k(L)},delete___:{value:k(function(I){var P=!!D.delete(I);return N&&N.delete___(I)||P})},permitHostObjects___:{value:k(function(I){if(I!==w)throw new Error("bogus call to permitHostObjects___");F=!0})}})}e&&"undefined"!=typeof Proxy&&(Proxy=void 0),E.prototype=u.prototype,M.exports=E,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),M.exports=u)}function w(E){E.permitHostObjects___&&E.permitHostObjects___(w)}function c(E){return!("weakmap:"==E.substr(0,"weakmap:".length)&&"___"===E.substr(E.length-3))}function A(E){if(E!==Object(E))throw new TypeError("Not an object: "+E);var L=E[s];if(L&&L.key===E)return L;if(h(E)){L={key:E};try{return v(E,s,{value:L,writable:!1,enumerable:!1,configurable:!1}),L}catch(D){return}}}function k(E){return E.prototype=null,Object.freeze(E)}function C(){g||"undefined"==typeof console||(g=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],314:[function(x,M,_){var e=x("./hidden-store.js");M.exports=function(){var o={};return function(a){if(("object"!=typeof a||null===a)&&"function"!=typeof a)throw new Error("Weakmap-shim: Key must be object");var l=a.valueOf(o);return l&&l.identity===o?l:e(a,o)}}},{"./hidden-store.js":315}],315:[function(x,M,_){M.exports=function(e,o){var a={identity:o},l=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(i){return i!==o?l.apply(this,arguments):a},writable:!0}),a}},{}],316:[function(x,M,_){var e=x("./create-store.js");M.exports=function(){var o=e();return{get:function(a,l){var i=o(a);return i.hasOwnProperty("value")?i.value:l},set:function(a,l){return o(a).value=l,this},has:function(a){return"value"in o(a)},delete:function(a){return delete o(a).value}}}},{"./create-store.js":314}],317:[function(x,M,_){"use strict";var a,l;M.exports=(a=function(){return function(a,l,i,v,h,s){var d=a[0],p=i[0],f=[0],g=p;v|=0;var m=0,u=p;for(m=0;m<d;++m){var w=l[v]-s,c=l[v+g]-s;w>=0!=c>=0&&h.push(f[0]+.5+.5*(w+c)/(w-c)),v+=u,++f[0]}}}.bind(void 0,{funcName:"zeroCrossings"}),l={},function(i,v,h){var s=i.dtype,d=i.order,p=[s,d.join()].join(),f=l[p];return f||(l[p]=f=a([s,d])),f(i.shape.slice(0),i.data,i.stride,0|i.offset,v,h)})},{}],318:[function(x,M,_){"use strict";M.exports=function(o,a){var l=[];return a=+a||0,e(o.hi(o.shape[0]-1),l,a),l};var e=x("./lib/zc-core")},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[27])(27)},647:(bh,b,oe)=>{"use strict";function se(r){return"function"==typeof r}let y=!1;const x={Promise:void 0,set useDeprecatedSynchronousErrorHandling(r){if(r){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else y&&console.log("RxJS: Back to a better error behavior. Thank you. <3");y=r},get useDeprecatedSynchronousErrorHandling(){return y}};function M(r){setTimeout(()=>{throw r},0)}const _={closed:!0,next(r){},error(r){if(x.useDeprecatedSynchronousErrorHandling)throw r;M(r)},complete(){}},e=Array.isArray||(r=>r&&"number"==typeof r.length);function o(r){return null!==r&&"object"==typeof r}const l=(()=>{function r(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((n,T)=>`${T+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return r.prototype=Object.create(Error.prototype),r})();class i{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let t;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:T,_unsubscribe:R,_subscriptions:Q}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof i)n.remove(this);else if(null!==n)for(let he=0;he<n.length;++he)n[he].remove(this);if(se(R)){T&&(this._unsubscribe=void 0);try{R.call(this)}catch(he){t=he instanceof l?v(he.errors):[he]}}if(e(Q)){let he=-1,xe=Q.length;for(;++he<xe;){const ze=Q[he];if(o(ze))try{ze.unsubscribe()}catch(Je){t=t||[],Je instanceof l?t=t.concat(v(Je.errors)):t.push(Je)}}}if(t)throw new l(t)}add(t){let n=t;if(!t)return i.EMPTY;switch(typeof t){case"function":n=new i(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof i)){const Q=n;n=new i,n._subscriptions=[Q]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}let{_parentOrParents:T}=n;if(null===T)n._parentOrParents=this;else if(T instanceof i){if(T===this)return n;n._parentOrParents=[T,this]}else{if(-1!==T.indexOf(this))return n;T.push(this)}const R=this._subscriptions;return null===R?this._subscriptions=[n]:R.push(n),n}remove(t){const n=this._subscriptions;if(n){const T=n.indexOf(t);-1!==T&&n.splice(T,1)}}}var r;function v(r){return r.reduce((t,n)=>t.concat(n instanceof l?n.errors:n),[])}i.EMPTY=((r=new i).closed=!0,r);const h="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class d extends i{constructor(t,n,T){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=_;break;case 1:if(!t){this.destination=_;break}if("object"==typeof t){t instanceof d?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new p(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new p(this,t,n,T)}}[h](){return this}static create(t,n,T){const R=new d(t,n,T);return R.syncErrorThrowable=!1,R}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class p extends d{constructor(t,n,T,R){super(),this._parentSubscriber=t;let Q,he=this;se(n)?Q=n:n&&(Q=n.next,T=n.error,R=n.complete,n!==_&&(he=Object.create(n),se(he.unsubscribe)&&this.add(he.unsubscribe.bind(he)),he.unsubscribe=this.unsubscribe.bind(this))),this._context=he,this._next=Q,this._error=T,this._complete=R}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;x.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:T}=x;if(this._error)T&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(n.syncErrorThrowable)T?(n.syncErrorValue=t,n.syncErrorThrown=!0):M(t),this.unsubscribe();else{if(this.unsubscribe(),T)throw t;M(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const n=()=>this._complete.call(this._context);x.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,n){try{t.call(this._context,n)}catch(T){if(this.unsubscribe(),x.useDeprecatedSynchronousErrorHandling)throw T;M(T)}}__tryOrSetError(t,n,T){if(!x.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,T)}catch(R){return x.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=R,t.syncErrorThrown=!0,!0):(M(R),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const m="function"==typeof Symbol&&Symbol.observable||"@@observable";function u(r){return r}let A=(()=>{class r{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const T=new r;return T.source=this,T.operator=n,T}subscribe(n,T,R){const{operator:Q}=this,he=function(r,t,n){if(r){if(r instanceof d)return r;if(r[h])return r[h]()}return r||t||n?new d(r,t,n):new d(_)}(n,T,R);if(he.add(Q?Q.call(he,this.source):this.source||x.useDeprecatedSynchronousErrorHandling&&!he.syncErrorThrowable?this._subscribe(he):this._trySubscribe(he)),x.useDeprecatedSynchronousErrorHandling&&he.syncErrorThrowable&&(he.syncErrorThrowable=!1,he.syncErrorThrown))throw he.syncErrorValue;return he}_trySubscribe(n){try{return this._subscribe(n)}catch(T){x.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=T),function(r){for(;r;){const{closed:t,destination:n,isStopped:T}=r;if(t||T)return!1;r=n&&n instanceof d?n:null}return!0}(n)?n.error(T):console.warn(T)}}forEach(n,T){return new(T=k(T))((R,Q)=>{let he;he=this.subscribe(xe=>{try{n(xe)}catch(ze){Q(ze),he&&he.unsubscribe()}},Q,R)})}_subscribe(n){const{source:T}=this;return T&&T.subscribe(n)}[m](){return this}pipe(...n){return 0===n.length?this:function(r){return 0===r.length?u:1===r.length?r[0]:function(n){return r.reduce((T,R)=>R(T),n)}}(n)(this)}toPromise(n){return new(n=k(n))((T,R)=>{let Q;this.subscribe(he=>Q=he,he=>R(he),()=>T(Q))})}}return r.create=t=>new r(t),r})();function k(r){if(r||(r=x.Promise||Promise),!r)throw new Error("no Promise impl found");return r}const E=(()=>{function r(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return r.prototype=Object.create(Error.prototype),r})();class L extends i{constructor(t,n){super(),this.subject=t,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,n=t.observers;if(this.subject=null,!n||0===n.length||t.isStopped||t.closed)return;const T=n.indexOf(this.subscriber);-1!==T&&n.splice(T,1)}}class D extends d{constructor(t){super(t),this.destination=t}}let N=(()=>{class r extends A{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[h](){return new D(this)}lift(n){const T=new F(this,this);return T.operator=n,T}next(n){if(this.closed)throw new E;if(!this.isStopped){const{observers:T}=this,R=T.length,Q=T.slice();for(let he=0;he<R;he++)Q[he].next(n)}}error(n){if(this.closed)throw new E;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:T}=this,R=T.length,Q=T.slice();for(let he=0;he<R;he++)Q[he].error(n);this.observers.length=0}complete(){if(this.closed)throw new E;this.isStopped=!0;const{observers:n}=this,T=n.length,R=n.slice();for(let Q=0;Q<T;Q++)R[Q].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new E;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new E;return this.hasError?(n.error(this.thrownError),i.EMPTY):this.isStopped?(n.complete(),i.EMPTY):(this.observers.push(n),new L(this,n))}asObservable(){const n=new A;return n.source=this,n}}return r.create=(t,n)=>new F(t,n),r})();class F extends N{constructor(t,n){super(),this.destination=t,this.source=n}next(t){const{destination:n}=this;n&&n.next&&n.next(t)}error(t){const{destination:n}=this;n&&n.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:n}=this;return n?this.source.subscribe(t):i.EMPTY}}function I(r){return r&&"function"==typeof r.schedule}function P(r,t){return function(T){if("function"!=typeof r)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return T.lift(new j(r,t))}}class j{constructor(t,n){this.project=t,this.thisArg=n}call(t,n){return n.subscribe(new V(t,this.project,this.thisArg))}}class V extends d{constructor(t,n,T){super(t),this.project=n,this.count=0,this.thisArg=T||this}_next(t){let n;try{n=this.project.call(this.thisArg,t,this.count++)}catch(T){return void this.destination.error(T)}this.destination.next(n)}}const Z=r=>t=>{for(let n=0,T=r.length;n<T&&!t.closed;n++)t.next(r[n]);t.complete()},re="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",q=r=>r&&"number"==typeof r.length&&"function"!=typeof r;function U(r){return!!r&&"function"!=typeof r.subscribe&&"function"==typeof r.then}const W=r=>{if(r&&"function"==typeof r[m])return(r=>t=>{const n=r[m]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)})(r);if(q(r))return Z(r);if(U(r))return(r=>t=>(r.then(n=>{t.closed||(t.next(n),t.complete())},n=>t.error(n)).then(null,M),t))(r);if(r&&"function"==typeof r[re])return(r=>t=>{const n=r[re]();for(;;){let T;try{T=n.next()}catch(R){return t.error(R),t}if(T.done){t.complete();break}if(t.next(T.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t})(r);{const n=`You provided ${o(r)?"an invalid object":`'${r}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(n)}};function te(r,t){return new A(n=>{const T=new i;let R=0;return T.add(t.schedule(function(){R!==r.length?(n.next(r[R++]),n.closed||T.add(this.schedule())):n.complete()})),T})}function de(r,t){return t?function(r,t){if(null!=r){if(function(r){return r&&"function"==typeof r[m]}(r))return function(r,t){return new A(n=>{const T=new i;return T.add(t.schedule(()=>{const R=r[m]();T.add(R.subscribe({next(Q){T.add(t.schedule(()=>n.next(Q)))},error(Q){T.add(t.schedule(()=>n.error(Q)))},complete(){T.add(t.schedule(()=>n.complete()))}}))})),T})}(r,t);if(U(r))return function(r,t){return new A(n=>{const T=new i;return T.add(t.schedule(()=>r.then(R=>{T.add(t.schedule(()=>{n.next(R),T.add(t.schedule(()=>n.complete()))}))},R=>{T.add(t.schedule(()=>n.error(R)))}))),T})}(r,t);if(q(r))return te(r,t);if(function(r){return r&&"function"==typeof r[re]}(r)||"string"==typeof r)return function(r,t){if(!r)throw new Error("Iterable cannot be null");return new A(n=>{const T=new i;let R;return T.add(()=>{R&&"function"==typeof R.return&&R.return()}),T.add(t.schedule(()=>{R=r[re](),T.add(t.schedule(function(){if(n.closed)return;let Q,he;try{const xe=R.next();Q=xe.value,he=xe.done}catch(xe){return void n.error(xe)}he?n.complete():(n.next(Q),this.schedule())}))})),T})}(r,t)}throw new TypeError((null!==r&&typeof r||r)+" is not observable")}(r,t):r instanceof A?r:new A(W(r))}class _e extends d{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class we extends d{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function Le(r,t){if(t.closed)return;if(r instanceof A)return r.subscribe(t);let n;try{n=W(r)(t)}catch(T){t.error(T)}return n}function Ie(r,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?T=>T.pipe(Ie((R,Q)=>de(r(R,Q)).pipe(P((he,xe)=>t(R,he,Q,xe))),n)):("number"==typeof t&&(n=t),T=>T.lift(new je(r,n)))}class je{constructor(t,n=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=n}call(t,n){return n.subscribe(new ye(t,this.project,this.concurrent))}}class ye extends we{constructor(t,n,T=Number.POSITIVE_INFINITY){super(t),this.project=n,this.concurrent=T,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let n;const T=this.index++;try{n=this.project(t,T)}catch(R){return void this.destination.error(R)}this.active++,this._innerSub(n)}_innerSub(t){const n=new _e(this),T=this.destination;T.add(n);const R=Le(t,n);R!==n&&T.add(R)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function Oe(r=Number.POSITIVE_INFINITY){return Ie(u,r)}function Pe(r,t){return t?te(r,t):new A(Z(r))}function Ue(){return function(t){return t.lift(new qe(t))}}class qe{constructor(t){this.connectable=t}call(t,n){const{connectable:T}=this;T._refCount++;const R=new Xe(t,T),Q=n.subscribe(R);return R.closed||(R.connection=T.connect()),Q}}class Xe extends d{constructor(t,n){super(t),this.connectable=n}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const n=t._refCount;if(n<=0)return void(this.connection=null);if(t._refCount=n-1,n>1)return void(this.connection=null);const{connection:T}=this,R=t._connection;this.connection=null,R&&(!T||R===T)&&R.unsubscribe()}}class lt extends A{constructor(t,n){super(),this.source=t,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new i,t.add(this.source.subscribe(new $e(this.getSubject(),this))),t.closed&&(this._connection=null,t=i.EMPTY)),t}refCount(){return Ue()(this)}}const He=(()=>{const r=lt.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:r._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}}})();class $e extends D{constructor(t,n){super(t),this.connectable=n}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const n=t._connection;t._refCount=0,t._subject=null,t._connection=null,n&&n.unsubscribe()}}}function kt(){return new N}function Et(r){for(let t in r)if(r[t]===Et)return t;throw Error("Could not find renamed property on target object.")}function ht(r,t){for(const n in t)t.hasOwnProperty(n)&&!r.hasOwnProperty(n)&&(r[n]=t[n])}function at(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(at).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const t=r.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function Ft(r,t){return null==r||""===r?null===t?"":t:null==t||""===t?r:r+" "+t}const en=Et({__forward_ref__:Et});function Qt(r){return r.__forward_ref__=Qt,r.toString=function(){return at(this())},r}function tn(r){return dn(r)?r():r}function dn(r){return"function"==typeof r&&r.hasOwnProperty(en)&&r.__forward_ref__===Qt}class sn extends Error{constructor(t,n){super(function(r,t){return`${r?`NG0${r}: `:""}${t}`}(t,n)),this.code=t}}function Ce(r){return"string"==typeof r?r:null==r?"":String(r)}function Ve(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():Ce(r)}function it(r,t){const n=t?` in ${t}`:"";throw new sn("201",`No provider for ${Ve(r)} found${n}`)}function Nt(r,t){null==r&&function(r,t,n,T){throw new Error(`ASSERTION ERROR: ${r}`+(null==T?"":` [Expected=> ${n} ${T} ${t} <=Actual]`))}(t,r,null,"!=")}function Dn(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function rn(r){return{providers:r.providers||[],imports:r.imports||[]}}function pn(r){return gn(r,rr)||gn(r,kr)}function gn(r,t){return r.hasOwnProperty(t)?r[t]:null}function Kn(r){return r&&(r.hasOwnProperty(lr)||r.hasOwnProperty(Xr))?r[lr]:null}const rr=Et({\u0275prov:Et}),lr=Et({\u0275inj:Et}),kr=Et({ngInjectableDef:Et}),Xr=Et({ngInjectorDef:Et});var sr=(()=>((sr=sr||{})[sr.Default=0]="Default",sr[sr.Host=1]="Host",sr[sr.Self=2]="Self",sr[sr.SkipSelf=4]="SkipSelf",sr[sr.Optional=8]="Optional",sr))();let oi;function Lr(r){const t=oi;return oi=r,t}function Jr(r,t,n){const T=pn(r);return T&&"root"==T.providedIn?void 0===T.value?T.value=T.factory():T.value:n&sr.Optional?null:void 0!==t?t:void it(at(r),"Injector")}function Jn(r){return{toString:r}.toString()}var br=(()=>((br=br||{})[br.OnPush=0]="OnPush",br[br.Default=1]="Default",br))(),Qr=(()=>((Qr=Qr||{})[Qr.Emulated=0]="Emulated",Qr[Qr.None=2]="None",Qr[Qr.ShadowDom=3]="ShadowDom",Qr))();const ui="undefined"!=typeof globalThis&&globalThis,Nr="undefined"!=typeof window&&window,Hr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,un=ui||"undefined"!=typeof global&&global||Nr||Hr,vn={},Tn=[],Qn=Et({\u0275cmp:Et}),Zn=Et({\u0275dir:Et}),$n=Et({\u0275pipe:Et}),Hn=Et({\u0275mod:Et}),Rn=Et({\u0275loc:Et}),Fn=Et({\u0275fac:Et}),zn=Et({__NG_ELEMENT_ID__:Et});let Yn=0;function nr(r){return Jn(()=>{const n={},T={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===br.OnPush,directiveDefs:null,pipeDefs:null,selectors:r.selectors||Tn,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||Qr.Emulated,id:"c",styles:r.styles||Tn,_:null,setInput:null,schemas:r.schemas||null,tView:null},R=r.directives,Q=r.features,he=r.pipes;return T.id+=Yn++,T.inputs=ei(r.inputs,n),T.outputs=ei(r.outputs),Q&&Q.forEach(xe=>xe(T)),T.directiveDefs=R?()=>("function"==typeof R?R():R).map(_r):null,T.pipeDefs=he?()=>("function"==typeof he?he():he).map(Tr):null,T})}function _r(r){return Ui(r)||function(r){return r[Zn]||null}(r)}function Tr(r){return function(r){return r[$n]||null}(r)}const jr={};function Er(r){return Jn(()=>{const t={type:r.type,bootstrap:r.bootstrap||Tn,declarations:r.declarations||Tn,imports:r.imports||Tn,exports:r.exports||Tn,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null};return null!=r.id&&(jr[r.id]=r.type),t})}function ei(r,t){if(null==r)return vn;const n={};for(const T in r)if(r.hasOwnProperty(T)){let R=r[T],Q=R;Array.isArray(R)&&(Q=R[1],R=R[0]),n[R]=T,t&&(t[R]=Q)}return n}const xr=nr;function Ui(r){return r[Qn]||null}function xi(r,t){const n=r[Hn]||null;if(!n&&!0===t)throw new Error(`Type ${at(r)} does not have '\u0275mod' property.`);return n}function ts(r){return Array.isArray(r)&&"object"==typeof r[1]}function os(r){return Array.isArray(r)&&!0===r[1]}function _s(r){return 0!=(8&r.flags)}function dl(r){return 2==(2&r.flags)}function ss(r){return 1==(1&r.flags)}function Jo(r){return null!==r.template}function Wl(r){return 0!=(512&r[2])}function ai(r,t){return r.hasOwnProperty(Fn)?r[Fn]:null}class Yi{constructor(t,n,T){this.previousValue=t,this.currentValue=n,this.firstChange=T}isFirstChange(){return this.firstChange}}function Ni(){return Sa}function Sa(r){return r.type.prototype.ngOnChanges&&(r.setInput=Oa),Da}function Da(){const r=Mo(this),t=null==r?void 0:r.current;if(t){const n=r.previous;if(n===vn)r.previous=t;else for(let T in t)n[T]=t[T];r.current=null,this.ngOnChanges(t)}}function Oa(r,t,n,T){const R=Mo(r)||function(r,t){return r[Co]=t}(r,{previous:vn,current:null}),Q=R.current||(R.current={}),he=R.previous,xe=this.declaredInputs[n],ze=he[xe];Q[xe]=new Yi(ze&&ze.currentValue,t,he===vn),r[T]=t}Ni.ngInherit=!0;const Co="__ngSimpleChanges__";function Mo(r){return r[Co]||null}let ls;function jt(r){return!!r.listen}const Kt={createRenderer:(r,t)=>void 0!==ls?ls:"undefined"!=typeof document?document:void 0};function Vn(r){for(;Array.isArray(r);)r=r[0];return r}function Sr(r,t){return Vn(t[r])}function yr(r,t){return Vn(t[r.index])}function Zr(r,t){return r.data[t]}function Br(r,t){const n=t[r];return ts(n)?n:n[0]}function li(r){return 4==(4&r[2])}function gi(r){return 128==(128&r[2])}function fr(r,t){return null==t?null:r[t]}function Di(r){r[18]=0}function ri(r,t){r[5]+=t;let n=r,T=r[3];for(;null!==T&&(1===t&&1===n[5]||-1===t&&0===n[5]);)T[5]+=t,n=T,T=T[3]}const Ir={lFrame:pl(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ta(){return Ir.bindingsEnabled}function Dr(){return Ir.lFrame.lView}function Ai(){return Ir.lFrame.tView}function mi(){let r=Ua();for(;null!==r&&64===r.type;)r=r.parent;return r}function Ua(){return Ir.lFrame.currentTNode}function us(r,t){const n=Ir.lFrame;n.currentTNode=r,n.isParent=t}function Ls(){return Ir.lFrame.isParent}function Ts(){Ir.lFrame.isParent=!1}function ms(){return Ir.isInCheckNoChangesMode}function Ra(r){Ir.isInCheckNoChangesMode=r}function Ko(){return Ir.lFrame.bindingIndex++}function Cl(r,t){const n=Ir.lFrame;n.bindingIndex=n.bindingRootIndex=r,Fo(t)}function Fo(r){Ir.lFrame.currentDirectiveIndex=r}function jo(){return Ir.lFrame.currentQueryIndex}function rl(r){Ir.lFrame.currentQueryIndex=r}function zi(r){const t=r[1];return 2===t.type?t.declTNode:1===t.type?r[6]:null}function Ki(r,t,n){if(n&sr.SkipSelf){let R=t,Q=r;for(;!(R=R.parent,null!==R||n&sr.Host||(R=zi(Q),null===R||(Q=Q[15],10&R.type))););if(null===R)return!1;t=R,r=Q}const T=Ir.lFrame=fu();return T.currentTNode=t,T.lView=r,!0}function Yl(r){const t=fu(),n=r[1];Ir.lFrame=t,t.currentTNode=n.firstChild,t.lView=r,t.tView=n,t.contextLView=r,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function fu(){const r=Ir.lFrame,t=null===r?null:r.child;return null===t?pl(r):t}function pl(r){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=t),t}function Os(){const r=Ir.lFrame;return Ir.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const Zs=Os;function hu(){const r=Os();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function ga(){return Ir.lFrame.selectedIndex}function Rs(r){Ir.lFrame.selectedIndex=r}function so(){const r=Ir.lFrame;return Zr(r.tView,r.selectedIndex)}function mu(r,t){for(let n=t.directiveStart,T=t.directiveEnd;n<T;n++){const Q=r.data[n].type.prototype,{ngAfterContentInit:he,ngAfterContentChecked:xe,ngAfterViewInit:ze,ngAfterViewChecked:Je,ngOnDestroy:yt}=Q;he&&(r.contentHooks||(r.contentHooks=[])).push(-n,he),xe&&((r.contentHooks||(r.contentHooks=[])).push(n,xe),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(n,xe)),ze&&(r.viewHooks||(r.viewHooks=[])).push(-n,ze),Je&&((r.viewHooks||(r.viewHooks=[])).push(n,Je),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(n,Je)),null!=yt&&(r.destroyHooks||(r.destroyHooks=[])).push(n,yt)}}function Pu(r,t,n){ru(r,t,3,n)}function ml(r,t,n,T){(3&r[2])===n&&ru(r,t,n,T)}function Lu(r,t){let n=r[2];(3&n)===t&&(n&=2047,n+=1,r[2]=n)}function ru(r,t,n,T){const Q=null!=T?T:-1,he=t.length-1;let xe=0;for(let ze=void 0!==T?65535&r[18]:0;ze<he;ze++)if("number"==typeof t[ze+1]){if(xe=t[ze],null!=T&&xe>=T)break}else t[ze]<0&&(r[18]+=65536),(xe<Q||-1==Q)&&(ks(r,n,t,ze),r[18]=(4294901760&r[18])+ze+2),ze++}function ks(r,t,n,T){const R=n[T]<0,Q=n[T+1],xe=r[R?-n[T]:n[T]];if(R){if(r[2]>>11<r[18]>>16&&(3&r[2])===t){r[2]+=2048;try{Q.call(xe)}finally{}}}else try{Q.call(xe)}finally{}}class vu{constructor(t,n,T){this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=T}}function Ee(r,t,n){const T=jt(r);let R=0;for(;R<n.length;){const Q=n[R];if("number"==typeof Q){if(0!==Q)break;R++;const he=n[R++],xe=n[R++],ze=n[R++];T?r.setAttribute(t,xe,ze,he):t.setAttributeNS(he,xe,ze)}else{const he=Q,xe=n[++R];Ze(he)?T&&r.setProperty(t,he,xe):T?r.setAttribute(t,he,xe):t.setAttribute(he,xe),R++}}return R}function Fe(r){return 3===r||4===r||6===r}function Ze(r){return 64===r.charCodeAt(0)}function rt(r,t){if(null!==t&&0!==t.length)if(null===r||0===r.length)r=t.slice();else{let n=-1;for(let T=0;T<t.length;T++){const R=t[T];"number"==typeof R?n=R:0===n||ft(r,n,R,null,-1===n||2===n?t[++T]:null)}}return r}function ft(r,t,n,T,R){let Q=0,he=r.length;if(-1===t)he=-1;else for(;Q<r.length;){const xe=r[Q++];if("number"==typeof xe){if(xe===t){he=-1;break}if(xe>t){he=Q-1;break}}}for(;Q<r.length;){const xe=r[Q];if("number"==typeof xe)break;if(xe===n){if(null===T)return void(null!==R&&(r[Q+1]=R));if(T===r[Q+1])return void(r[Q+2]=R)}Q++,null!==T&&Q++,null!==R&&Q++}-1!==he&&(r.splice(he,0,t),Q=he+1),r.splice(Q++,0,n),null!==T&&r.splice(Q++,0,T),null!==R&&r.splice(Q++,0,R)}function It(r){return-1!==r}function Rt(r){return 32767&r}function Ot(r,t){let n=function(r){return r>>16}(r),T=t;for(;n>0;)T=T[15],n--;return T}let St=!0;function Gt(r){const t=St;return St=r,t}let Sn=0;function Un(r,t){const n=gr(r,t);if(-1!==n)return n;const T=t[1];T.firstCreatePass&&(r.injectorIndex=t.length,mr(T.data,r),mr(t,null),mr(T.blueprint,null));const R=Pr(r,t),Q=r.injectorIndex;if(It(R)){const he=Rt(R),xe=Ot(R,t),ze=xe[1].data;for(let Je=0;Je<8;Je++)t[Q+Je]=xe[he+Je]|ze[he+Je]}return t[Q+8]=R,Q}function mr(r,t){r.push(0,0,0,0,0,0,0,0,t)}function gr(r,t){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===t[r.injectorIndex+8]?-1:r.injectorIndex}function Pr(r,t){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let n=0,T=null,R=t;for(;null!==R;){const Q=R[1],he=Q.type;if(T=2===he?Q.declTNode:1===he?R[6]:null,null===T)return-1;if(n++,R=R[15],-1!==T.injectorIndex)return T.injectorIndex|n<<16}return-1}function Cr(r,t,n){!function(r,t,n){let T;"string"==typeof n?T=n.charCodeAt(0)||0:n.hasOwnProperty(zn)&&(T=n[zn]),null==T&&(T=n[zn]=Sn++);const R=255&T;t.data[r+(R>>5)]|=1<<R}(r,t,n)}function wi(r,t,n){if(n&sr.Optional)return r;it(t,"NodeInjector")}function Bi(r,t,n,T){if(n&sr.Optional&&void 0===T&&(T=null),0==(n&(sr.Self|sr.Host))){const R=r[9],Q=Lr(void 0);try{return R?R.get(t,T,n&sr.Optional):Jr(t,T,n&sr.Optional)}finally{Lr(Q)}}return wi(T,t,n)}function ur(r,t,n,T=sr.Default,R){if(null!==r){const Q=function(r){if("string"==typeof r)return r.charCodeAt(0)||0;const t=r.hasOwnProperty(zn)?r[zn]:void 0;return"number"==typeof t?t>=0?255&t:Ti:t}(n);if("function"==typeof Q){if(!Ki(t,r,T))return T&sr.Host?wi(R,n,T):Bi(t,n,T,R);try{const he=Q(T);if(null!=he||T&sr.Optional)return he;it(n)}finally{Zs()}}else if("number"==typeof Q){let he=null,xe=gr(r,t),ze=-1,Je=T&sr.Host?t[16][6]:null;for((-1===xe||T&sr.SkipSelf)&&(ze=-1===xe?Pr(r,t):t[xe+8],-1!==ze&&ta(T,!1)?(he=t[1],xe=Rt(ze),t=Ot(ze,t)):xe=-1);-1!==xe;){const yt=t[1];if(Ei(Q,xe,yt.data)){const Ht=bi(xe,t,n,he,T,Je);if(Ht!==$r)return Ht}ze=t[xe+8],-1!==ze&&ta(T,t[1].data[xe+8]===Je)&&Ei(Q,xe,t)?(he=yt,xe=Rt(ze),t=Ot(ze,t)):xe=-1}}}return Bi(t,n,T,R)}const $r={};function Ti(){return new Zi(mi(),Dr())}function bi(r,t,n,T,R,Q){const he=t[1],xe=he.data[r+8],yt=Si(xe,he,n,null==T?dl(xe)&&St:T!=he&&0!=(3&xe.type),R&sr.Host&&Q===xe);return null!==yt?ji(t,he,yt,xe):$r}function Si(r,t,n,T,R){const Q=r.providerIndexes,he=t.data,xe=1048575&Q,ze=r.directiveStart,yt=Q>>20,an=R?xe+yt:r.directiveEnd;for(let mn=T?xe:xe+yt;mn<an;mn++){const Bn=he[mn];if(mn<ze&&n===Bn||mn>=ze&&Bn.type===n)return mn}if(R){const mn=he[ze];if(mn&&Jo(mn)&&mn.type===n)return ze}return null}function ji(r,t,n,T){let R=r[n];const Q=t.data;if(function(r){return r instanceof vu}(R)){const he=R;he.resolving&&function(r,t){throw new sn("200",`Circular dependency in DI detected for ${r}`)}(Ve(Q[n]));const xe=Gt(he.canSeeViewProviders);he.resolving=!0;const ze=he.injectImpl?Lr(he.injectImpl):null;Ki(r,T,sr.Default);try{R=r[n]=he.factory(void 0,Q,r,T),t.firstCreatePass&&n>=T.directiveStart&&function(r,t,n){const{ngOnChanges:T,ngOnInit:R,ngDoCheck:Q}=t.type.prototype;if(T){const he=Sa(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(r,he),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(r,he)}R&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-r,R),Q&&((n.preOrderHooks||(n.preOrderHooks=[])).push(r,Q),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(r,Q))}(n,Q[n],t)}finally{null!==ze&&Lr(ze),Gt(xe),he.resolving=!1,Zs()}}return R}function Ei(r,t,n){return!!(n[t+(r>>5)]&1<<r)}function ta(r,t){return!(r&sr.Self||r&sr.Host&&t)}class Zi{constructor(t,n){this._tNode=t,this._lView=n}get(t,n,T){return ur(this._tNode,this._lView,t,T,n)}}function ra(r){return Jn(()=>{const t=r.prototype.constructor,n=t[Fn]||Qi(t),T=Object.prototype;let R=Object.getPrototypeOf(r.prototype).constructor;for(;R&&R!==T;){const Q=R[Fn]||Qi(R);if(Q&&Q!==n)return Q;R=Object.getPrototypeOf(R)}return Q=>new Q})}function Qi(r){return dn(r)?()=>{const t=Qi(tn(r));return t&&t()}:ai(r)}function fa(r){return function(r,t){if("class"===t)return r.classes;if("style"===t)return r.styles;const n=r.attrs;if(n){const T=n.length;let R=0;for(;R<T;){const Q=n[R];if(Fe(Q))break;if(0===Q)R+=2;else if("number"==typeof Q)for(R++;R<T&&"string"==typeof n[R];)R++;else{if(Q===t)return n[R+1];R+=2}}}return null}(mi(),r)}const no="__parameters__";function uo(r,t,n){return Jn(()=>{const T=function(r){return function(...n){if(r){const T=r(...n);for(const R in T)this[R]=T[R]}}}(t);function R(...Q){if(this instanceof R)return T.apply(this,Q),this;const he=new R(...Q);return xe.annotation=he,xe;function xe(ze,Je,yt){const Ht=ze.hasOwnProperty(no)?ze[no]:Object.defineProperty(ze,no,{value:[]})[no];for(;Ht.length<=yt;)Ht.push(null);return(Ht[yt]=Ht[yt]||[]).push(he),ze}}return n&&(R.prototype=Object.create(n.prototype)),R.prototype.ngMetadataName=r,R.annotationCls=R,R})}class ma{constructor(t,n){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Dn({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Gc=new ma("AnalyzeForEntryComponents"),Tc=Function;function Fl(r,t){void 0===t&&(t=r);for(let n=0;n<r.length;n++){let T=r[n];Array.isArray(T)?(t===r&&(t=r.slice(0,n)),Fl(T,t)):t!==r&&t.push(T)}return t}function au(r,t){r.forEach(n=>Array.isArray(n)?au(n,t):t(n))}function yu(r,t,n){t>=r.length?r.push(n):r.splice(t,0,n)}function Yc(r,t){return t>=r.length-1?r.pop():r.splice(t,1)[0]}function Mc(r,t){const n=[];for(let T=0;T<r;T++)n.push(t);return n}function Ho(r,t,n){let T=Zc(r,t);return T>=0?r[1|T]=n:(T=~T,function(r,t,n,T){let R=r.length;if(R==t)r.push(n,T);else if(1===R)r.push(T,r[0]),r[0]=n;else{for(R--,r.push(r[R-1],r[R]);R>t;)r[R]=r[R-2],R--;r[t]=n,r[t+1]=T}}(r,T,t,n)),T}function Lp(r,t){const n=Zc(r,t);if(n>=0)return r[1|n]}function Zc(r,t){return function(r,t,n){let T=0,R=r.length>>n;for(;R!==T;){const Q=T+(R-T>>1),he=r[Q<<n];if(t===he)return Q<<n;he>t?R=Q:T=Q+1}return~(R<<n)}(r,t,1)}const _h={},Rp="__NG_DI_FLAG__",Tf="ngTempTokenPath",gy=/\n/gm,wh="__source",Cc=Et({provide:String,useValue:Et});let Th;function qo(r){const t=Th;return Th=r,t}function gd(r,t=sr.Default){if(void 0===Th)throw new Error("inject() must be called from an injection context");return null===Th?Jr(r,void 0,t):Th.get(r,t&sr.Optional?null:void 0,t)}function yi(r,t=sr.Default){return(oi||gd)(tn(r),t)}function xu(r){const t=[];for(let n=0;n<r.length;n++){const T=tn(r[n]);if(Array.isArray(T)){if(0===T.length)throw new Error("Arguments array must have arguments.");let R,Q=sr.Default;for(let he=0;he<T.length;he++){const xe=T[he],ze=Fg(xe);"number"==typeof ze?-1===ze?R=xe.token:Q|=ze:R=xe}t.push(yi(R,Q))}else t.push(yi(T))}return t}function Mf(r,t){return r[Rp]=t,r.prototype[Rp]=t,r}function Fg(r){return r[Rp]}function kf(r,t,n,T){const R=r[Tf];throw t[wh]&&R.unshift(t[wh]),r.message=function(r,t,n,T=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.substr(2):r;let R=at(t);if(Array.isArray(t))R=t.map(at).join(" -> ");else if("object"==typeof t){let Q=[];for(let he in t)if(t.hasOwnProperty(he)){let xe=t[he];Q.push(he+":"+("string"==typeof xe?JSON.stringify(xe):at(xe)))}R=`{${Q.join(", ")}}`}return`${n}${T?"("+T+")":""}[${R}]: ${r.replace(gy,"\n  ")}`}("\n"+r.message,R,n,T),r.ngTokenPath=R,r[Tf]=null,r}const Af=Mf(uo("Inject",r=>({token:r})),-1),Js=Mf(uo("Optional"),8),zu=Mf(uo("SkipSelf"),4);let xd;function Bu(r){var t;return(null===(t=function(){if(void 0===xd&&(xd=null,un.trustedTypes))try{xd=un.trustedTypes.createPolicy("angular",{createHTML:r=>r,createScript:r=>r,createScriptURL:r=>r})}catch(r){}return xd}())||void 0===t?void 0:t.createHTML(r))||r}class Xc{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class My extends Xc{getTypeName(){return"HTML"}}class Vg extends Xc{getTypeName(){return"Style"}}class vl extends Xc{getTypeName(){return"Script"}}class ky extends Xc{getTypeName(){return"URL"}}class Ug extends Xc{getTypeName(){return"ResourceURL"}}function zl(r){return r instanceof Xc?r.changingThisBreaksApplicationSecurity:r}function ju(r,t){const n=jp(r);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function jp(r){return r instanceof Xc&&r.getTypeName()||null}class Ch{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const n=(new window.DOMParser).parseFromString(Bu(t),"text/html").body;return null===n?this.inertDocumentHelper.getInertBodyElement(t):(n.removeChild(n.firstChild),n)}catch(n){return null}}}class Gg{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);const T=this.inertDocument.createElement("body");n.appendChild(T)}}getInertBodyElement(t){const n=this.inertDocument.createElement("template");if("content"in n)return n.innerHTML=Bu(t),n;const T=this.inertDocument.createElement("body");return T.innerHTML=Bu(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(T),T}stripCustomNsAttrs(t){const n=t.attributes;for(let R=n.length-1;0<R;R--){const he=n.item(R).name;("xmlns:ns1"===he||0===he.indexOf("ns1:"))&&t.removeAttribute(he)}let T=t.firstChild;for(;T;)T.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(T),T=T.nextSibling}}const _d=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Yg=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function $l(r){return(r=String(r)).match(_d)||r.match(Yg)?r:"unsafe:"+r}function Jc(r){return(r=String(r)).split(",").map(t=>$l(t.trim())).join(", ")}function _u(r){const t={};for(const n of r.split(","))t[n]=!0;return t}function Eh(...r){const t={};for(const n of r)for(const T in n)n.hasOwnProperty(T)&&(t[T]=!0);return t}const Zg=_u("area,br,col,hr,img,wbr"),$g=_u("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Xg=_u("rp,rt"),Up=Eh(Zg,Eh($g,_u("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Eh(Xg,_u("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Eh(Xg,$g)),Hp=_u("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),If=_u("srcset"),Jg=Eh(Hp,If,_u("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),_u("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Dy=_u("script,style,template");class Iy{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let n=t.firstChild,T=!0;for(;n;)if(n.nodeType===Node.ELEMENT_NODE?T=this.startElement(n):n.nodeType===Node.TEXT_NODE?this.chars(n.nodeValue):this.sanitizedSomething=!0,T&&n.firstChild)n=n.firstChild;else for(;n;){n.nodeType===Node.ELEMENT_NODE&&this.endElement(n);let R=this.checkClobberedElement(n,n.nextSibling);if(R){n=R;break}n=this.checkClobberedElement(n,n.parentNode)}return this.buf.join("")}startElement(t){const n=t.nodeName.toLowerCase();if(!Up.hasOwnProperty(n))return this.sanitizedSomething=!0,!Dy.hasOwnProperty(n);this.buf.push("<"),this.buf.push(n);const T=t.attributes;for(let R=0;R<T.length;R++){const Q=T.item(R),he=Q.name,xe=he.toLowerCase();if(!Jg.hasOwnProperty(xe)){this.sanitizedSomething=!0;continue}let ze=Q.value;Hp[xe]&&(ze=$l(ze)),If[xe]&&(ze=Jc(ze)),this.buf.push(" ",he,'="',Pf(ze),'"')}return this.buf.push(">"),!0}endElement(t){const n=t.nodeName.toLowerCase();Up.hasOwnProperty(n)&&!Zg.hasOwnProperty(n)&&(this.buf.push("</"),this.buf.push(n),this.buf.push(">"))}chars(t){this.buf.push(Pf(t))}checkClobberedElement(t,n){if(n&&(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return n}}const Kg=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,wd=/([^\#-~ |!])/g;function Pf(r){return r.replace(/&/g,"&amp;").replace(Kg,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(wd,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Ec;function El(r,t){let n=null;try{Ec=Ec||function(r){const t=new Gg(r);return function(){try{return!!(new window.DOMParser).parseFromString(Bu(""),"text/html")}catch(r){return!1}}()?new Ch(t):t}(r);let T=t?String(t):"";n=Ec.getInertBodyElement(T);let R=5,Q=T;do{if(0===R)throw new Error("Failed to sanitize html because the input is unstable");R--,T=Q,Q=n.innerHTML,n=Ec.getInertBodyElement(T)}while(T!==Q);return Bu((new Iy).sanitizeChildren(Sc(n)||n))}finally{if(n){const T=Sc(n)||n;for(;T.firstChild;)T.removeChild(T.firstChild)}}}function Sc(r){return"content"in r&&function(r){return r.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===r.nodeName}(r)?r.content:null}var Po=(()=>((Po=Po||{})[Po.NONE=0]="NONE",Po[Po.HTML=1]="HTML",Po[Po.STYLE=2]="STYLE",Po[Po.SCRIPT=3]="SCRIPT",Po[Po.URL=4]="URL",Po[Po.RESOURCE_URL=5]="RESOURCE_URL",Po))();function Lf(r){const t=function(){const r=Dr();return r&&r[12]}();return t?t.sanitize(Po.URL,r)||"":ju(r,"URL")?zl(r):$l(Ce(r))}const Yp="__ngContext__";function al(r,t){r[Yp]=t}function Md(r){const t=function(r){return r[Yp]||null}(r);return t?Array.isArray(t)?t:t.lView:null}function Nf(r){return r.ngOriginalError}function sm(r,...t){r.error(...t)}class Dc{constructor(){this._console=console}handleError(t){const n=this._findOriginalError(t),T=this._findContext(t),R=function(r){return r&&r.ngErrorLogger||sm}(t);R(this._console,"ERROR",t),n&&R(this._console,"ORIGINAL ERROR",n),T&&R(this._console,"ERROR CONTEXT",T)}_findContext(t){return t?function(r){return r.ngDebugContext}(t)||this._findContext(Nf(t)):null}_findOriginalError(t){let n=t&&Nf(t);for(;n&&Nf(n);)n=Nf(n);return n||null}}const lm=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(un))();function um(r){return r.ownerDocument.defaultView}function Vu(r){return r instanceof Function?r():r}var bl=(()=>((bl=bl||{})[bl.Important=1]="Important",bl[bl.DashCase=2]="DashCase",bl))();function Lh(r,t){return undefined(r,t)}function Qo(r){const t=r[3];return os(t)?t[3]:t}function Ed(r){return n0(r[13])}function Sd(r){return n0(r[4])}function n0(r){for(;null!==r&&!os(r);)r=r[4];return r}function Ic(r,t,n,T,R){if(null!=T){let Q,he=!1;os(T)?Q=T:ts(T)&&(he=!0,T=T[0]);const xe=Vn(T);0===r&&null!==n?null==R?J(t,n,xe):z(t,n,xe,R||null,!0):1===r&&null!==n?z(t,n,xe,R||null,!0):2===r?function(r,t,n){const T=Ae(r,t);T&&function(r,t,n,T){jt(r)?r.removeChild(t,n,T):t.removeChild(n)}(r,T,t,n)}(t,xe,he):3===r&&t.destroyNode(xe),null!=Q&&function(r,t,n,T,R){const Q=n[7];Q!==Vn(n)&&Ic(t,r,T,Q,R);for(let xe=10;xe<n.length;xe++){const ze=n[xe];ir(ze[1],ze,r,t,T,Q)}}(t,r,Q,n,R)}}function fs(r,t,n){return jt(r)?r.createElement(t,n):null===n?r.createElement(t):r.createElementNS(n,t)}function Uu(r,t){const n=r[9],T=n.indexOf(t),R=t[3];1024&t[2]&&(t[2]&=-1025,ri(R,-1)),n.splice(T,1)}function Pd(r,t){if(r.length<=10)return;const n=10+t,T=r[n];if(T){const R=T[17];null!==R&&R!==r&&Uu(R,T),t>0&&(r[n-1][4]=T[4]);const Q=Yc(r,10+t);!function(r,t){ir(r,t,t[11],2,null,null),t[0]=null,t[6]=null}(T[1],T);const he=Q[19];null!==he&&he.detachView(Q[1]),T[3]=null,T[4]=null,T[2]&=-129}return T}function i0(r,t){if(!(256&t[2])){const n=t[11];jt(n)&&n.destroyNode&&ir(r,t,n,3,null,null),function(r){let t=r[13];if(!t)return a0(r[1],r);for(;t;){let n=null;if(ts(t))n=t[13];else{const T=t[10];T&&(n=T)}if(!n){for(;t&&!t[4]&&t!==r;)ts(t)&&a0(t[1],t),t=t[3];null===t&&(t=r),ts(t)&&a0(t[1],t),n=t&&t[4]}t=n}}(t)}}function a0(r,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(r,t){let n;if(null!=r&&null!=(n=r.destroyHooks))for(let T=0;T<n.length;T+=2){const R=t[n[T]];if(!(R instanceof vu)){const Q=n[T+1];if(Array.isArray(Q))for(let he=0;he<Q.length;he+=2){const xe=R[Q[he]],ze=Q[he+1];try{ze.call(xe)}finally{}}else try{Q.call(R)}finally{}}}}(r,t),function(r,t){const n=r.cleanup,T=t[7];let R=-1;if(null!==n)for(let Q=0;Q<n.length-1;Q+=2)if("string"==typeof n[Q]){const he=n[Q+1],xe="function"==typeof he?he(t):Vn(t[he]),ze=T[R=n[Q+2]],Je=n[Q+3];"boolean"==typeof Je?xe.removeEventListener(n[Q],ze,Je):Je>=0?T[R=Je]():T[R=-Je].unsubscribe(),Q+=2}else{const he=T[R=n[Q+1]];n[Q].call(he)}if(null!==T){for(let Q=R+1;Q<T.length;Q++)T[Q]();t[7]=null}}(r,t),1===t[1].type&&jt(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&os(t[3])){n!==t[3]&&Uu(n,t);const T=t[19];null!==T&&T.detachView(r)}}}function o0(r,t,n){return function(r,t,n){let T=t;for(;null!==T&&40&T.type;)T=(t=T).parent;if(null===T)return n[0];if(2&T.flags){const R=r.data[T.directiveStart].encapsulation;if(R===Qr.None||R===Qr.Emulated)return null}return yr(T,n)}(r,t.parent,n)}function z(r,t,n,T,R){jt(r)?r.insertBefore(t,n,T,R):t.insertBefore(n,T,R)}function J(r,t,n){jt(r)?r.appendChild(t,n):t.appendChild(n)}function ce(r,t,n,T,R){null!==T?z(r,t,n,T,R):J(r,t,n)}function Ae(r,t){return jt(r)?r.parentNode(t):t.parentNode}function We(r,t,n){return vt(r,t,n)}let vt=function(r,t,n){return 40&r.type?yr(r,n):null};function on(r,t,n,T){const R=o0(r,T,t),Q=t[11],xe=We(T.parent||t[6],T,t);if(null!=R)if(Array.isArray(n))for(let ze=0;ze<n.length;ze++)ce(Q,R,n[ze],xe,!1);else ce(Q,R,n,xe,!1)}function Jt(r,t){if(null!==t){const n=t.type;if(3&n)return yr(t,r);if(4&n)return Ln(-1,r[t.index]);if(8&n){const T=t.child;if(null!==T)return Jt(r,T);{const R=r[t.index];return os(R)?Ln(-1,R):Vn(R)}}if(32&n)return Lh(t,r)()||Vn(r[t.index]);{const T=xn(r,t);return null!==T?Array.isArray(T)?T[0]:Jt(Qo(r[16]),T):Jt(r,t.next)}}return null}function xn(r,t){return null!==t?r[16][6].projection[t.projection]:null}function Ln(r,t){const n=10+r+1;if(n<t.length){const T=t[n],R=T[1].firstChild;if(null!==R)return Jt(T,R)}return t[7]}function Gn(r,t,n,T,R,Q,he){for(;null!=n;){const xe=T[n.index],ze=n.type;if(he&&0===t&&(xe&&al(Vn(xe),T),n.flags|=4),64!=(64&n.flags))if(8&ze)Gn(r,t,n.child,T,R,Q,!1),Ic(t,r,R,xe,Q);else if(32&ze){const Je=Lh(n,T);let yt;for(;yt=Je();)Ic(t,r,R,yt,Q);Ic(t,r,R,xe,Q)}else 16&ze?dr(r,t,T,n,R,Q):Ic(t,r,R,xe,Q);n=he?n.projectionNext:n.next}}function ir(r,t,n,T,R,Q){Gn(n,T,r.firstChild,t,R,Q,!1)}function dr(r,t,n,T,R,Q){const he=n[16],ze=he[6].projection[T.projection];if(Array.isArray(ze))for(let Je=0;Je<ze.length;Je++)Ic(t,r,R,ze[Je],Q);else Gn(r,t,ze,he[3],R,Q,!0)}function fi(r,t,n){jt(r)?r.setAttribute(t,"style",n):t.style.cssText=n}function si(r,t,n){jt(r)?""===n?r.removeAttribute(t,"class"):r.setAttribute(t,"class",n):t.className=n}function _i(r,t,n){let T=r.length;for(;;){const R=r.indexOf(t,n);if(-1===R)return R;if(0===R||r.charCodeAt(R-1)<=32){const Q=t.length;if(R+Q===T||r.charCodeAt(R+Q)<=32)return R}n=R+1}}const Oi="ng-template";function Ci(r,t,n){let T=0;for(;T<r.length;){let R=r[T++];if(n&&"class"===R){if(R=r[T],-1!==_i(R.toLowerCase(),t,0))return!0}else if(1===R){for(;T<r.length&&"string"==typeof(R=r[T++]);)if(R.toLowerCase()===t)return!0;return!1}}return!1}function Hi(r){return 4===r.type&&r.value!==Oi}function Vi(r,t,n){return t===(4!==r.type||n?r.value:Oi)}function Fi(r,t,n){let T=4;const R=r.attrs||[],Q=function(r){for(let t=0;t<r.length;t++)if(Fe(r[t]))return t;return r.length}(R);let he=!1;for(let xe=0;xe<t.length;xe++){const ze=t[xe];if("number"!=typeof ze){if(!he)if(4&T){if(T=2|1&T,""!==ze&&!Vi(r,ze,n)||""===ze&&1===t.length){if(xa(T))return!1;he=!0}}else{const Je=8&T?ze:t[++xe];if(8&T&&null!==r.attrs){if(!Ci(r.attrs,Je,n)){if(xa(T))return!1;he=!0}continue}const Ht=ja(8&T?"class":ze,R,Hi(r),n);if(-1===Ht){if(xa(T))return!1;he=!0;continue}if(""!==Je){let an;an=Ht>Q?"":R[Ht+1].toLowerCase();const mn=8&T?an:null;if(mn&&-1!==_i(mn,Je,0)||2&T&&Je!==an){if(xa(T))return!1;he=!0}}}}else{if(!he&&!xa(T)&&!xa(ze))return!1;if(he&&xa(ze))continue;he=!1,T=ze|1&T}}return xa(T)||he}function xa(r){return 0==(1&r)}function ja(r,t,n,T){if(null===t)return-1;let R=0;if(T||!n){let Q=!1;for(;R<t.length;){const he=t[R];if(he===r)return R;if(3===he||6===he)Q=!0;else{if(1===he||2===he){let xe=t[++R];for(;"string"==typeof xe;)xe=t[++R];continue}if(4===he)break;if(0===he){R+=4;continue}}R+=Q?1:2}return-1}return function(r,t){let n=r.indexOf(4);if(n>-1)for(n++;n<r.length;){const T=r[n];if("number"==typeof T)return-1;if(T===t)return n;n++}return-1}(t,r)}function Za(r,t,n=!1){for(let T=0;T<t.length;T++)if(Fi(r,t[T],n))return!0;return!1}function wo(r,t){e:for(let n=0;n<t.length;n++){const T=t[n];if(r.length===T.length){for(let R=0;R<r.length;R++)if(r[R]!==T[R])continue e;return!0}}return!1}function Oo(r,t){return r?":not("+t.trim()+")":t}function To(r){let t=r[0],n=1,T=2,R="",Q=!1;for(;n<r.length;){let he=r[n];if("string"==typeof he)if(2&T){const xe=r[++n];R+="["+he+(xe.length>0?'="'+xe+'"':"")+"]"}else 8&T?R+="."+he:4&T&&(R+=" "+he);else""!==R&&!xa(he)&&(t+=Oo(Q,R),R=""),T=he,Q=Q||!xa(T);n++}return""!==R&&(t+=Oo(Q,R)),t}const ea={};function Pi(r){Ds(Ai(),Dr(),ga()+r,ms())}function Ds(r,t,n,T){if(!T)if(3==(3&t[2])){const Q=r.preOrderCheckHooks;null!==Q&&Pu(t,Q,n)}else{const Q=r.preOrderHooks;null!==Q&&ml(t,Q,0,n)}Rs(n)}function zs(r,t){return r<<17|t<<2}function Go(r){return r>>17&32767}function ns(r){return 2|r}function Ro(r){return(131068&r)>>2}function _a(r,t){return-131069&r|t<<2}function Wo(r){return 1|r}function Kf(r,t){const n=r.contentQueries;if(null!==n)for(let T=0;T<n.length;T+=2){const R=n[T],Q=n[T+1];if(-1!==Q){const he=r.data[Q];rl(R),he.contentQueries(2,t[Q],Q)}}}function af(r,t,n,T,R,Q,he,xe,ze,Je){const yt=t.blueprint.slice();return yt[0]=R,yt[2]=140|T,Di(yt),yt[3]=yt[15]=r,yt[8]=n,yt[10]=he||r&&r[10],yt[11]=xe||r&&r[11],yt[12]=ze||r&&r[12]||null,yt[9]=Je||r&&r[9]||null,yt[6]=Q,yt[16]=2==t.type?r[16]:yt,yt}function Oc(r,t,n,T,R){let Q=r.data[t];if(null===Q)Q=function(r,t,n,T,R){const Q=Ua(),he=Ls(),ze=r.data[t]=function(r,t,n,T,R,Q){return{type:n,index:T,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:R,attrs:Q,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,he?Q:Q&&Q.parent,n,t,T,R);return null===r.firstChild&&(r.firstChild=ze),null!==Q&&(he?null==Q.child&&null!==ze.parent&&(Q.child=ze):null===Q.next&&(Q.next=ze)),ze}(r,t,n,T,R),Ir.lFrame.inI18n&&(Q.flags|=64);else if(64&Q.type){Q.type=n,Q.value=T,Q.attrs=R;const he=function(){const r=Ir.lFrame,t=r.currentTNode;return r.isParent?t:t.parent}();Q.injectorIndex=null===he?-1:he.injectorIndex}return us(Q,!0),Q}function eh(r,t,n,T){if(0===n)return-1;const R=t.length;for(let Q=0;Q<n;Q++)t.push(T),r.blueprint.push(T),r.data.push(null);return R}function of(r,t,n){Yl(t);try{const T=r.viewQuery;null!==T&&M0(1,T,n);const R=r.template;null!==R&&dm(r,t,R,1,n),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&Kf(r,t),r.staticViewQueries&&M0(2,r.viewQuery,n);const Q=r.components;null!==Q&&function(r,t){for(let n=0;n<t.length;n++)ym(r,t[n])}(t,Q)}catch(T){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),T}finally{t[2]&=-5,hu()}}function sf(r,t,n,T){const R=t[2];if(256==(256&R))return;Yl(t);const Q=ms();try{Di(t),function(r){Ir.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==n&&dm(r,t,n,2,T);const he=3==(3&R);if(!Q)if(he){const Je=r.preOrderCheckHooks;null!==Je&&Pu(t,Je,null)}else{const Je=r.preOrderHooks;null!==Je&&ml(t,Je,0,null),Lu(t,0)}if(function(r){for(let t=Ed(r);null!==t;t=Sd(t)){if(!t[2])continue;const n=t[9];for(let T=0;T<n.length;T++){const R=n[T],Q=R[3];0==(1024&R[2])&&ri(Q,1),R[2]|=1024}}}(t),function(r){for(let t=Ed(r);null!==t;t=Sd(t))for(let n=10;n<t.length;n++){const T=t[n],R=T[1];gi(T)&&sf(R,T,R.template,T[8])}}(t),null!==r.contentQueries&&Kf(r,t),!Q)if(he){const Je=r.contentCheckHooks;null!==Je&&Pu(t,Je)}else{const Je=r.contentHooks;null!==Je&&ml(t,Je,1),Lu(t,1)}!function(r,t){const n=r.hostBindingOpCodes;if(null!==n)try{for(let T=0;T<n.length;T++){const R=n[T];if(R<0)Rs(~R);else{const Q=R,he=n[++T],xe=n[++T];Cl(he,Q),xe(2,t[Q])}}}finally{Rs(-1)}}(r,t);const xe=r.components;null!==xe&&function(r,t){for(let n=0;n<t.length;n++)Jy(r,t[n])}(t,xe);const ze=r.viewQuery;if(null!==ze&&M0(2,ze,T),!Q)if(he){const Je=r.viewCheckHooks;null!==Je&&Pu(t,Je)}else{const Je=r.viewHooks;null!==Je&&ml(t,Je,2),Lu(t,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),Q||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,ri(t[3],-1))}finally{hu()}}function h0(r,t,n,T){const R=t[10],Q=!ms(),he=li(t);try{Q&&!he&&R.begin&&R.begin(),he&&of(r,t,T),sf(r,t,n,T)}finally{Q&&!he&&R.end&&R.end()}}function dm(r,t,n,T,R){const Q=ga(),he=2&T;try{Rs(-1),he&&t.length>20&&Ds(r,t,20,ms()),n(T,R)}finally{Rs(Q)}}function es(r,t,n){!Ta()||(function(r,t,n,T){const R=n.directiveStart,Q=n.directiveEnd;r.firstCreatePass||Un(n,t),al(T,t);const he=n.initialInputs;for(let xe=R;xe<Q;xe++){const ze=r.data[xe],Je=Jo(ze);Je&&mm(t,n,ze);const yt=ji(t,r,xe,n);al(yt,t),null!==he&&w0(0,xe-R,yt,ze,0,he),Je&&(Br(n.index,t)[8]=yt)}}(r,t,n,yr(n,t)),128==(128&n.flags)&&function(r,t,n){const T=n.directiveStart,R=n.directiveEnd,he=n.index,xe=Ir.lFrame.currentDirectiveIndex;try{Rs(he);for(let ze=T;ze<R;ze++){const Je=r.data[ze],yt=t[ze];Fo(ze),(null!==Je.hostBindings||0!==Je.hostVars||null!==Je.hostAttrs)&&Rc(Je,yt)}}finally{Rs(-1),Fo(xe)}}(r,t,n))}function Xl(r,t,n=yr){const T=t.localNames;if(null!==T){let R=t.index+1;for(let Q=0;Q<T.length;Q+=2){const he=T[Q+1],xe=-1===he?n(t,r):r[he];r[R++]=xe}}}function pm(r){const t=r.tView;return null===t||t.incompleteFirstPass?r.tView=Au(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):t}function Au(r,t,n,T,R,Q,he,xe,ze,Je){const yt=20+T,Ht=yt+R,an=function(r,t){const n=[];for(let T=0;T<t;T++)n.push(T<r?null:ea);return n}(yt,Ht),mn="function"==typeof Je?Je():Je;return an[1]={type:r,blueprint:an,template:n,queries:null,viewQuery:xe,declTNode:t,data:an.slice().fill(null,yt),bindingStartIndex:yt,expandoStartIndex:Ht,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof Q?Q():Q,pipeRegistry:"function"==typeof he?he():he,firstChild:null,schemas:ze,consts:mn,incompleteFirstPass:!1}}function Bh(r,t,n,T){const R=wm(t);null===n?R.push(T):(R.push(n),r.firstCreatePass&&Tm(r).push(T,R.length-1))}function Vh(r,t,n){for(let T in r)if(r.hasOwnProperty(T)){const R=r[T];(n=null===n?{}:n).hasOwnProperty(T)?n[T].push(t,R):n[T]=[t,R]}return n}function Bl(r,t,n,T,R,Q,he,xe){const ze=yr(t,n);let yt,Je=t.inputs;!xe&&null!=Je&&(yt=Je[T])?(Su(r,n,yt,T,R),dl(t)&&function(r,t){const n=Br(t,r);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(T=function(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(T),R=null!=he?he(R,t.value||"",T):R,jt(Q)?Q.setProperty(ze,T,R):Ze(T)||(ze.setProperty?ze.setProperty(T,R):ze[T]=R))}function nh(r,t,n,T){let R=!1;if(Ta()){const Q=function(r,t,n){const T=r.directiveRegistry;let R=null;if(T)for(let Q=0;Q<T.length;Q++){const he=T[Q];Za(n,he.selectors,!1)&&(R||(R=[]),Cr(Un(n,t),r,he.type),Jo(he)?(lf(r,n),R.unshift(he)):R.push(he))}return R}(r,t,n),he=null===T?null:{"":-1};if(null!==Q){R=!0,b0(n,r.data.length,Q.length);for(let yt=0;yt<Q.length;yt++){const Ht=Q[yt];Ht.providersResolver&&Ht.providersResolver(Ht)}let xe=!1,ze=!1,Je=eh(r,t,Q.length,null);for(let yt=0;yt<Q.length;yt++){const Ht=Q[yt];n.mergedAttrs=rt(n.mergedAttrs,Ht.hostAttrs),_0(r,n,t,Je,Ht),ah(Je,Ht,he),null!==Ht.contentQueries&&(n.flags|=8),(null!==Ht.hostBindings||null!==Ht.hostAttrs||0!==Ht.hostVars)&&(n.flags|=128);const an=Ht.type.prototype;!xe&&(an.ngOnChanges||an.ngOnInit||an.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(n.index),xe=!0),!ze&&(an.ngOnChanges||an.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(n.index),ze=!0),Je++}!function(r,t){const T=t.directiveEnd,R=r.data,Q=t.attrs,he=[];let xe=null,ze=null;for(let Je=t.directiveStart;Je<T;Je++){const yt=R[Je],Ht=yt.inputs,an=null===Q||Hi(t)?null:ac(Ht,Q);he.push(an),xe=Vh(Ht,Je,xe),ze=Vh(yt.outputs,Je,ze)}null!==xe&&(xe.hasOwnProperty("class")&&(t.flags|=16),xe.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=he,t.inputs=xe,t.outputs=ze}(r,n)}he&&function(r,t,n){if(t){const T=r.localNames=[];for(let R=0;R<t.length;R+=2){const Q=n[t[R+1]];if(null==Q)throw new sn("301",`Export of name '${t[R+1]}' not found!`);T.push(t[R],Q)}}}(n,T,he)}return n.mergedAttrs=rt(n.mergedAttrs,n.attrs),R}function y0(r,t,n,T,R,Q){const he=Q.hostBindings;if(he){let xe=r.hostBindingOpCodes;null===xe&&(xe=r.hostBindingOpCodes=[]);const ze=~t.index;(function(r){let t=r.length;for(;t>0;){const n=r[--t];if("number"==typeof n&&n<0)return n}return 0})(xe)!=ze&&xe.push(ze),xe.push(T,R,he)}}function Rc(r,t){null!==r.hostBindings&&r.hostBindings(1,t)}function lf(r,t){t.flags|=2,(r.components||(r.components=[])).push(t.index)}function ah(r,t,n){if(n){if(t.exportAs)for(let T=0;T<t.exportAs.length;T++)n[t.exportAs[T]]=r;Jo(t)&&(n[""]=r)}}function b0(r,t,n){r.flags|=1,r.directiveStart=t,r.directiveEnd=t+n,r.providerIndexes=t}function _0(r,t,n,T,R){r.data[T]=R;const Q=R.factory||(R.factory=ai(R.type)),he=new vu(Q,Jo(R),null);r.blueprint[T]=he,n[T]=he,y0(r,t,0,T,eh(r,n,R.hostVars,ea),R)}function mm(r,t,n){const T=yr(t,r),R=pm(n),Q=r[10],he=oh(r,af(r,R,null,n.onPush?64:16,T,t,Q,Q.createRenderer(T,n),null,null));r[t.index]=he}function Eu(r,t,n,T,R,Q){const he=yr(r,t);!function(r,t,n,T,R,Q,he){if(null==Q)jt(r)?r.removeAttribute(t,R,n):t.removeAttribute(R);else{const xe=null==he?Ce(Q):he(Q,T||"",R);jt(r)?r.setAttribute(t,R,xe,n):n?t.setAttributeNS(n,R,xe):t.setAttribute(R,xe)}}(t[11],he,Q,r.value,n,T,R)}function w0(r,t,n,T,R,Q){const he=Q[t];if(null!==he){const xe=T.setInput;for(let ze=0;ze<he.length;){const Je=he[ze++],yt=he[ze++],Ht=he[ze++];null!==xe?T.setInput(n,Ht,Je,yt):n[yt]=Ht}}}function ac(r,t){let n=null,T=0;for(;T<t.length;){const R=t[T];if(0!==R)if(5!==R){if("number"==typeof R)break;r.hasOwnProperty(R)&&(null===n&&(n=[]),n.push(R,r[R],t[T+1])),T+=2}else T+=2;else T+=4}return n}function zd(r,t,n,T){return new Array(r,!0,!1,t,null,0,T,n,null,null)}function Jy(r,t){const n=Br(t,r);if(gi(n)){const T=n[1];80&n[2]?sf(T,n,T.template,n[8]):n[5]>0&&qh(n)}}function qh(r){for(let T=Ed(r);null!==T;T=Sd(T))for(let R=10;R<T.length;R++){const Q=T[R];if(1024&Q[2]){const he=Q[1];sf(he,Q,he.template,Q[8])}else Q[5]>0&&qh(Q)}const n=r[1].components;if(null!==n)for(let T=0;T<n.length;T++){const R=Br(n[T],r);gi(R)&&R[5]>0&&qh(R)}}function ym(r,t){const n=Br(t,r),T=n[1];(function(r,t){for(let n=t.length;n<r.blueprint.length;n++)t.push(r.blueprint[n])})(T,n),of(T,n,n[8])}function oh(r,t){return r[13]?r[14][4]=t:r[13]=t,r[14]=t,t}function Bd(r){for(;r;){r[2]|=64;const t=Qo(r);if(Wl(r)&&!t)return r;r=t}return null}function sh(r,t,n){const T=t[10];T.begin&&T.begin();try{sf(r,t,r.template,n)}catch(R){throw km(t,R),R}finally{T.end&&T.end()}}function bm(r){!function(r){for(let t=0;t<r.components.length;t++){const n=r.components[t],T=Md(n),R=T[1];h0(R,T,R.template,n)}}(r[8])}function M0(r,t,n){rl(0),t(r,n)}const Qy=(()=>Promise.resolve(null))();function wm(r){return r[7]||(r[7]=[])}function Tm(r){return r.cleanup||(r.cleanup=[])}function km(r,t){const n=r[9],T=n?n.get(Dc,null):null;T&&T.handleError(t)}function Su(r,t,n,T,R){for(let Q=0;Q<n.length;){const he=n[Q++],xe=n[Q++],ze=t[he],Je=r.data[he];null!==Je.setInput?Je.setInput(ze,R,T,xe):ze[xe]=R}}function su(r,t,n){const T=Sr(t,r);!function(r,t,n){jt(r)?r.setValue(t,n):t.textContent=n}(r[11],T,n)}function Wh(r,t,n){let T=n?r.styles:null,R=n?r.classes:null,Q=0;if(null!==t)for(let he=0;he<t.length;he++){const xe=t[he];"number"==typeof xe?Q=xe:1==Q?R=Ft(R,xe):2==Q&&(T=Ft(T,xe+": "+t[++he]+";"))}n?r.styles=T:r.stylesWithoutHost=T,n?r.classes=R:r.classesWithoutHost=R}const Vd=new ma("INJECTOR",-1);class d_{get(t,n=_h){if(n===_h){const T=new Error(`NullInjectorError: No provider for ${at(t)}!`);throw T.name="NullInjectorError",T}return n}}const k0=new ma("Set Injector scope."),A0={},qk={};let e1;function p_(){return void 0===e1&&(e1=new d_),e1}function g_(r,t=null,n=null,T){return new Wk(r,n,t||p_(),T)}class Wk{constructor(t,n,T,R=null){this.parent=T,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const Q=[];n&&au(n,xe=>this.processProvider(xe,t,n)),au([t],xe=>this.processInjectorType(xe,[],Q)),this.records.set(Vd,Ud(void 0,this));const he=this.records.get(k0);this.scope=null!=he?he.value:null,this.source=R||("object"==typeof t?null:at(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,n=_h,T=sr.Default){this.assertNotDestroyed();const R=qo(this),Q=Lr(void 0);try{if(!(T&sr.SkipSelf)){let xe=this.records.get(t);if(void 0===xe){const ze=function(r){return"function"==typeof r||"object"==typeof r&&r instanceof ma}(t)&&pn(t);xe=ze&&this.injectableDefInScope(ze)?Ud(t1(t),A0):null,this.records.set(t,xe)}if(null!=xe)return this.hydrate(t,xe)}return(T&sr.Self?p_():this.parent).get(t,n=T&sr.Optional&&n===_h?null:n)}catch(he){if("NullInjectorError"===he.name){if((he[Tf]=he[Tf]||[]).unshift(at(t)),R)throw he;return kf(he,t,"R3InjectorError",this.source)}throw he}finally{Lr(Q),qo(R)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((T,R)=>t.push(at(R))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,n,T){if(!(t=tn(t)))return!1;let R=Kn(t);const Q=null==R&&t.ngModule||void 0,he=void 0===Q?t:Q,xe=-1!==T.indexOf(he);if(void 0!==Q&&(R=Kn(Q)),null==R)return!1;if(null!=R.imports&&!xe){let yt;T.push(he);try{au(R.imports,Ht=>{this.processInjectorType(Ht,n,T)&&(void 0===yt&&(yt=[]),yt.push(Ht))})}finally{}if(void 0!==yt)for(let Ht=0;Ht<yt.length;Ht++){const{ngModule:an,providers:mn}=yt[Ht];au(mn,Bn=>this.processProvider(Bn,an,mn||Tn))}}this.injectorDefTypes.add(he);const ze=ai(he)||(()=>new he);this.records.set(he,Ud(ze,A0));const Je=R.providers;if(null!=Je&&!xe){const yt=t;au(Je,Ht=>this.processProvider(Ht,yt,Je))}return void 0!==Q&&void 0!==t.providers}processProvider(t,n,T){let R=Hd(t=tn(t))?t:tn(t&&t.provide);const Q=function(r,t,n){return v_(r)?Ud(void 0,r.useValue):Ud(m_(r),A0)}(t);if(Hd(t)||!0!==t.multi)this.records.get(R);else{let he=this.records.get(R);he||(he=Ud(void 0,A0,!0),he.factory=()=>xu(he.multi),this.records.set(R,he)),R=t,he.multi.push(t)}this.records.set(R,Q)}hydrate(t,n){return n.value===A0&&(n.value=qk,n.value=n.factory()),"object"==typeof n.value&&n.value&&function(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(t){if(!t.providedIn)return!1;const n=tn(t.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function t1(r){const t=pn(r),n=null!==t?t.factory:ai(r);if(null!==n)return n;if(r instanceof ma)throw new Error(`Token ${at(r)} is missing a \u0275prov definition.`);if(r instanceof Function)return function(r){const t=r.length;if(t>0){const T=Mc(t,"?");throw new Error(`Can't resolve all parameters for ${at(r)}: (${T.join(", ")}).`)}const n=function(r){const t=r&&(r[rr]||r[kr]);if(t){const n=function(r){if(r.hasOwnProperty("name"))return r.name;const t=(""+r).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(r);return null!==n?()=>n.factory(r):()=>new r}(r);throw new Error("unreachable")}function m_(r,t,n){let T;if(Hd(r)){const R=tn(r);return ai(R)||t1(R)}if(v_(r))T=()=>tn(r.useValue);else if(function(r){return!(!r||!r.useFactory)}(r))T=()=>r.useFactory(...xu(r.deps||[]));else if(function(r){return!(!r||!r.useExisting)}(r))T=()=>yi(tn(r.useExisting));else{const R=tn(r&&(r.useClass||r.provide));if(!function(r){return!!r.deps}(r))return ai(R)||t1(R);T=()=>new R(...xu(r.deps))}return T}function Ud(r,t,n=!1){return{factory:r,value:t,multi:n?[]:void 0}}function v_(r){return null!==r&&"object"==typeof r&&Cc in r}function Hd(r){return"function"==typeof r}const y_=function(r,t,n){return function(r,t=null,n=null,T){const R=g_(r,t,n,T);return R._resolveInjectorDefTypes(),R}({name:n},t,r,n)};let $o=(()=>{class r{static create(n,T){return Array.isArray(n)?y_(n,T,""):y_(n.providers,n.parent,n.name||"")}}return r.THROW_IF_NOT_FOUND=_h,r.NULL=new d_,r.\u0275prov=Dn({token:r,providedIn:"any",factory:()=>yi(Vd)}),r.__NG_ELEMENT_ID__=-1,r})();function dA(r,t){mu(Md(r)[1],mi())}function Cs(r){let t=function(r){return Object.getPrototypeOf(r.prototype).constructor}(r.type),n=!0;const T=[r];for(;t;){let R;if(Jo(r))R=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");R=t.\u0275dir}if(R){if(n){T.push(R);const he=r;he.inputs=s1(r.inputs),he.declaredInputs=s1(r.declaredInputs),he.outputs=s1(r.outputs);const xe=R.hostBindings;xe&&vA(r,xe);const ze=R.viewQuery,Je=R.contentQueries;if(ze&&gA(r,ze),Je&&mA(r,Je),ht(r.inputs,R.inputs),ht(r.declaredInputs,R.declaredInputs),ht(r.outputs,R.outputs),Jo(R)&&R.data.animation){const yt=r.data;yt.animation=(yt.animation||[]).concat(R.data.animation)}}const Q=R.features;if(Q)for(let he=0;he<Q.length;he++){const xe=Q[he];xe&&xe.ngInherit&&xe(r),xe===Cs&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(r){let t=0,n=null;for(let T=r.length-1;T>=0;T--){const R=r[T];R.hostVars=t+=R.hostVars,R.hostAttrs=rt(R.hostAttrs,n=rt(n,R.hostAttrs))}}(T)}function s1(r){return r===vn?{}:r===Tn?[]:r}function gA(r,t){const n=r.viewQuery;r.viewQuery=n?(T,R)=>{t(T,R),n(T,R)}:t}function mA(r,t){const n=r.contentQueries;r.contentQueries=n?(T,R,Q)=>{t(T,R,Q),n(T,R,Q)}:t}function vA(r,t){const n=r.hostBindings;r.hostBindings=n?(T,R)=>{t(T,R),n(T,R)}:t}let Cm=null;function qd(){if(!Cm){const r=un.Symbol;if(r&&r.iterator)Cm=r.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<t.length;++n){const T=t[n];"entries"!==T&&"size"!==T&&Map.prototype[T]===Map.prototype.entries&&(Cm=T)}}}return Cm}function E0(r){return!!l1(r)&&(Array.isArray(r)||!(r instanceof Map)&&qd()in r)}function l1(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function Vl(r,t,n){return!Object.is(r[t],n)&&(r[t]=n,!0)}function Yu(r,t,n,T){const R=Dr();return Vl(R,Ko(),t)&&(Ai(),Eu(so(),R,r,t,n,T)),Yu}function lu(r,t,n,T,R,Q,he,xe){const ze=Dr(),Je=Ai(),yt=r+20,Ht=Je.firstCreatePass?function(r,t,n,T,R,Q,he,xe,ze){const Je=t.consts,yt=Oc(t,r,4,he||null,fr(Je,xe));nh(t,n,yt,fr(Je,ze)),mu(t,yt);const Ht=yt.tViews=Au(2,yt,T,R,Q,t.directiveRegistry,t.pipeRegistry,null,t.schemas,Je);return null!==t.queries&&(t.queries.template(t,yt),Ht.queries=t.queries.embeddedTView(yt)),yt}(yt,Je,ze,t,n,T,R,Q,he):Je.data[yt];us(Ht,!1);const an=ze[11].createComment("");on(Je,ze,an,Ht),al(an,ze),oh(ze,ze[yt]=zd(an,ze,an,Ht)),ss(Ht)&&es(Je,ze,Ht),null!=he&&Xl(ze,Ht,xe)}function Vr(r,t=sr.Default){const n=Dr();return null===n?yi(r,t):ur(mi(),n,tn(r),t)}function fo(r,t,n){const T=Dr();return Vl(T,Ko(),t)&&Bl(Ai(),so(),T,r,t,T[11],n,!1),fo}function d1(r,t,n,T,R){const he=R?"class":"style";Su(r,n,t.inputs[he],he,T)}function An(r,t,n,T){const R=Dr(),Q=Ai(),he=20+r,xe=R[11],ze=R[he]=fs(xe,t,Ir.lFrame.currentNamespace),Je=Q.firstCreatePass?function(r,t,n,T,R,Q,he){const xe=t.consts,Je=Oc(t,r,2,R,fr(xe,Q));return nh(t,n,Je,fr(xe,he)),null!==Je.attrs&&Wh(Je,Je.attrs,!1),null!==Je.mergedAttrs&&Wh(Je,Je.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,Je),Je}(he,Q,R,0,t,n,T):Q.data[he];us(Je,!0);const yt=Je.mergedAttrs;null!==yt&&Ee(xe,ze,yt);const Ht=Je.classes;null!==Ht&&si(xe,ze,Ht);const an=Je.styles;null!==an&&fi(xe,ze,an),64!=(64&Je.flags)&&on(Q,R,ze,Je),0===Ir.lFrame.elementDepthCount&&al(ze,R),Ir.lFrame.elementDepthCount++,ss(Je)&&(es(Q,R,Je),function(r,t,n){if(_s(t)){const R=t.directiveEnd;for(let Q=t.directiveStart;Q<R;Q++){const he=r.data[Q];he.contentQueries&&he.contentQueries(1,n[Q],Q)}}}(Q,Je,R)),null!==T&&Xl(R,Je)}function Cn(){let r=mi();Ls()?Ts():(r=r.parent,us(r,!1));const t=r;Ir.lFrame.elementDepthCount--;const n=Ai();n.firstCreatePass&&(mu(n,r),_s(r)&&n.queries.elementEnd(r)),null!=t.classesWithoutHost&&function(r){return 0!=(16&r.flags)}(t)&&d1(n,t,Dr(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(r){return 0!=(32&r.flags)}(t)&&d1(n,t,Dr(),t.stylesWithoutHost,!1)}function sa(r,t,n,T){An(r,t,n,T),Cn()}function D0(r){return!!r&&"function"==typeof r.then}const Lm=function(r){return!!r&&"function"==typeof r.subscribe};function Ya(r,t,n,T){const R=Dr(),Q=Ai(),he=mi();return function(r,t,n,T,R,Q,he,xe){const ze=ss(T),yt=r.firstCreatePass&&Tm(r),Ht=t[8],an=wm(t);let mn=!0;if(3&T.type||xe){const ar=yr(T,t),ni=xe?xe(ar):ar,Ur=an.length,qi=xe?ua=>xe(Vn(ua[T.index])):T.index;if(jt(n)){let ua=null;if(!xe&&ze&&(ua=function(r,t,n,T){const R=r.cleanup;if(null!=R)for(let Q=0;Q<R.length-1;Q+=2){const he=R[Q];if(he===n&&R[Q+1]===T){const xe=t[7],ze=R[Q+2];return xe.length>ze?xe[ze]:null}"string"==typeof he&&(Q+=2)}return null}(r,t,R,T.index)),null!==ua)(ua.__ngLastListenerFn__||ua).__ngNextListenerFn__=Q,ua.__ngLastListenerFn__=Q,mn=!1;else{Q=p1(T,t,Ht,Q,!1);const Qa=n.listen(ni,R,Q);an.push(Q,Qa),yt&&yt.push(R,qi,Ur,Ur+1)}}else Q=p1(T,t,Ht,Q,!0),ni.addEventListener(R,Q,he),an.push(Q),yt&&yt.push(R,qi,Ur,he)}else Q=p1(T,t,Ht,Q,!1);const Bn=T.outputs;let vr;if(mn&&null!==Bn&&(vr=Bn[R])){const ar=vr.length;if(ar)for(let ni=0;ni<ar;ni+=2){const cl=t[vr[ni]][vr[ni+1]].subscribe(Q),Qu=an.length;an.push(Q,cl),yt&&yt.push(R,T.index,Qu,-(Qu+1))}}}(Q,R,R[11],he,r,t,!!n,T),Ya}function a2(r,t,n,T){try{return!1!==n(T)}catch(R){return km(r,R),!1}}function p1(r,t,n,T,R){return function Q(he){if(he===Function)return T;const xe=2&r.flags?Br(r.index,t):t;0==(32&t[2])&&Bd(xe);let ze=a2(t,0,T,he),Je=Q.__ngNextListenerFn__;for(;Je;)ze=a2(t,0,Je,he)&&ze,Je=Je.__ngNextListenerFn__;return R&&!1===ze&&(he.preventDefault(),he.returnValue=!1),ze}}function Ul(r=1){return function(r){return(Ir.lFrame.contextLView=function(r,t){for(;r>0;)t=t[15],r--;return t}(r,Ir.lFrame.contextLView))[8]}(r)}function QA(r,t){let n=null;const T=function(r){const t=r.attrs;if(null!=t){const n=t.indexOf(5);if(0==(1&n))return t[n+1]}return null}(r);for(let R=0;R<t.length;R++){const Q=t[R];if("*"!==Q){if(null===T?Za(r,Q,!0):wo(T,Q))return R}else n=R}return n}function v2(r,t,n,T,R){const Q=r[n+1],he=null===t;let xe=T?Go(Q):Ro(Q),ze=!1;for(;0!==xe&&(!1===ze||he);){const yt=r[xe+1];n4(r[xe],t)&&(ze=!0,r[xe+1]=T?Wo(yt):ns(yt)),xe=T?Go(yt):Ro(yt)}ze&&(r[n+1]=T?ns(Q):Wo(Q))}function n4(r,t){return null===r||null==t||(Array.isArray(r)?r[1]:r)===t||!(!Array.isArray(r)||"string"!=typeof t)&&Zc(r,t)>=0}function Om(r,t){return function(r,t,n,T){const R=Dr(),Q=Ai(),he=function(r){const t=Ir.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+r,n}(2);Q.firstUpdatePass&&function(r,t,n,T){const R=r.data;if(null===R[n+1]){const Q=R[ga()],he=function(r,t){return t>=r.expandoStartIndex}(r,n);(function(r,t){return 0!=(r.flags&(t?16:32))})(Q,T)&&null===t&&!he&&(t=!1),t=function(r,t,n,T){const R=function(r){const t=Ir.lFrame.currentDirectiveIndex;return-1===t?null:r[t]}(r);let Q=T?t.residualClasses:t.residualStyles;if(null===R)0===(T?t.classBindings:t.styleBindings)&&(n=I0(n=m1(null,r,t,n,T),t.attrs,T),Q=null);else{const he=t.directiveStylingLast;if(-1===he||r[he]!==R)if(n=m1(R,r,t,n,T),null===Q){let ze=function(r,t,n){const T=n?t.classBindings:t.styleBindings;if(0!==Ro(T))return r[Go(T)]}(r,t,T);void 0!==ze&&Array.isArray(ze)&&(ze=m1(null,r,t,ze[1],T),ze=I0(ze,t.attrs,T),function(r,t,n,T){r[Go(n?t.classBindings:t.styleBindings)]=T}(r,t,T,ze))}else Q=function(r,t,n){let T;const R=t.directiveEnd;for(let Q=1+t.directiveStylingLast;Q<R;Q++)T=I0(T,r[Q].hostAttrs,n);return I0(T,t.attrs,n)}(r,t,T)}return void 0!==Q&&(T?t.residualClasses=Q:t.residualStyles=Q),n}(R,Q,t,T),function(r,t,n,T,R,Q){let he=Q?t.classBindings:t.styleBindings,xe=Go(he),ze=Ro(he);r[T]=n;let yt,Je=!1;if(Array.isArray(n)){const Ht=n;yt=Ht[1],(null===yt||Zc(Ht,yt)>0)&&(Je=!0)}else yt=n;if(R)if(0!==ze){const an=Go(r[xe+1]);r[T+1]=zs(an,xe),0!==an&&(r[an+1]=_a(r[an+1],T)),r[xe+1]=function(r,t){return 131071&r|t<<17}(r[xe+1],T)}else r[T+1]=zs(xe,0),0!==xe&&(r[xe+1]=_a(r[xe+1],T)),xe=T;else r[T+1]=zs(ze,0),0===xe?xe=T:r[ze+1]=_a(r[ze+1],T),ze=T;Je&&(r[T+1]=ns(r[T+1])),v2(r,yt,T,!0),v2(r,yt,T,!1),function(r,t,n,T,R){const Q=R?r.residualClasses:r.residualStyles;null!=Q&&"string"==typeof t&&Zc(Q,t)>=0&&(n[T+1]=Wo(n[T+1]))}(t,yt,r,T,Q),he=zs(xe,ze),Q?t.classBindings=he:t.styleBindings=he}(R,Q,t,n,he,T)}}(Q,r,he,T),t!==ea&&Vl(R,he,t)&&function(r,t,n,T,R,Q,he,xe){if(!(3&t.type))return;const ze=r.data,Je=ze[xe+1];Rm(function(r){return 1==(1&r)}(Je)?S2(ze,t,n,R,Ro(Je),he):void 0)||(Rm(Q)||function(r){return 2==(2&r)}(Je)&&(Q=S2(ze,null,n,R,xe,he)),function(r,t,n,T,R){const Q=jt(r);if(t)R?Q?r.addClass(n,T):n.classList.add(T):Q?r.removeClass(n,T):n.classList.remove(T);else{let he=-1===T.indexOf("-")?void 0:bl.DashCase;if(null==R)Q?r.removeStyle(n,T,he):n.style.removeProperty(T);else{const xe="string"==typeof R&&R.endsWith("!important");xe&&(R=R.slice(0,-10),he|=bl.Important),Q?r.setStyle(n,T,R,he):n.style.setProperty(T,R,xe?"important":"")}}}(T,he,Sr(ga(),n),R,Q))}(Q,Q.data[ga()],R,R[11],r,R[he+1]=function(r,t){return null==r||("string"==typeof t?r+=t:"object"==typeof r&&(r=at(zl(r)))),r}(t,n),T,he)}(r,t,null,!0),Om}function m1(r,t,n,T,R){let Q=null;const he=n.directiveEnd;let xe=n.directiveStylingLast;for(-1===xe?xe=n.directiveStart:xe++;xe<he&&(Q=t[xe],T=I0(T,Q.hostAttrs,R),Q!==r);)xe++;return null!==r&&(n.directiveStylingLast=xe),T}function I0(r,t,n){const T=n?1:2;let R=-1;if(null!==t)for(let Q=0;Q<t.length;Q++){const he=t[Q];"number"==typeof he?R=he:R===T&&(Array.isArray(r)||(r=void 0===r?[]:["",r]),Ho(r,he,!!n||t[++Q]))}return void 0===r?null:r}function S2(r,t,n,T,R,Q){const he=null===t;let xe;for(;R>0;){const ze=r[R],Je=Array.isArray(ze),yt=Je?ze[1]:ze,Ht=null===yt;let an=n[R+1];an===ea&&(an=Ht?Tn:void 0);let mn=Ht?Lp(an,T):yt===T?an:void 0;if(Je&&!Rm(mn)&&(mn=Lp(ze,T)),Rm(mn)&&(xe=mn,he))return xe;const Bn=r[R+1];R=he?Go(Bn):Ro(Bn)}if(null!==t){let ze=Q?t.residualClasses:t.residualStyles;null!=ze&&(xe=Lp(ze,T))}return xe}function Rm(r){return void 0!==r}function ti(r,t=""){const n=Dr(),T=Ai(),R=r+20,Q=T.firstCreatePass?Oc(T,R,1,t,null):T.data[R],he=n[R]=function(r,t){return jt(r)?r.createText(t):r.createTextNode(t)}(n[11],t);on(T,n,he,Q),us(Q,!1)}function ys(r){return cf("",r,""),ys}function cf(r,t,n){const T=Dr(),R=function(r,t,n,T){return Vl(r,Ko(),n)?t+Ce(n)+T:ea}(T,r,t,n);return R!==ea&&su(T,ga(),R),cf}function Fm(r,t,n){const T=Dr();return Vl(T,Ko(),t)&&Bl(Ai(),so(),T,r,t,T[11],n,!0),Fm}const $h=void 0;var N4=["en",[["a","p"],["AM","PM"],$h],[["AM","PM"],$h,$h],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],$h,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],$h,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",$h,"{1} 'at' {0}",$h],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(r){const t=Math.floor(Math.abs(r)),n=r.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let np={};function X2(r){return r in np||(np[r]=un.ng&&un.ng.common&&un.ng.common.locales&&un.ng.common.locales[r]),np[r]}var Gi=(()=>((Gi=Gi||{})[Gi.LocaleId=0]="LocaleId",Gi[Gi.DayPeriodsFormat=1]="DayPeriodsFormat",Gi[Gi.DayPeriodsStandalone=2]="DayPeriodsStandalone",Gi[Gi.DaysFormat=3]="DaysFormat",Gi[Gi.DaysStandalone=4]="DaysStandalone",Gi[Gi.MonthsFormat=5]="MonthsFormat",Gi[Gi.MonthsStandalone=6]="MonthsStandalone",Gi[Gi.Eras=7]="Eras",Gi[Gi.FirstDayOfWeek=8]="FirstDayOfWeek",Gi[Gi.WeekendRange=9]="WeekendRange",Gi[Gi.DateFormat=10]="DateFormat",Gi[Gi.TimeFormat=11]="TimeFormat",Gi[Gi.DateTimeFormat=12]="DateTimeFormat",Gi[Gi.NumberSymbols=13]="NumberSymbols",Gi[Gi.NumberFormats=14]="NumberFormats",Gi[Gi.CurrencyCode=15]="CurrencyCode",Gi[Gi.CurrencySymbol=16]="CurrencySymbol",Gi[Gi.CurrencyName=17]="CurrencyName",Gi[Gi.Currencies=18]="Currencies",Gi[Gi.Directionality=19]="Directionality",Gi[Gi.PluralCase=20]="PluralCase",Gi[Gi.ExtraData=21]="ExtraData",Gi))();const Nm="en-US";let J2=Nm;function v1(r){Nt(r,"Expected localeId to be defined"),"string"==typeof r&&(J2=r.toLowerCase().replace(/_/g,"-"))}function b1(r,t,n,T,R){if(r=tn(r),Array.isArray(r))for(let Q=0;Q<r.length;Q++)b1(r[Q],t,n,T,R);else{const Q=Ai(),he=Dr();let xe=Hd(r)?r:tn(r.provide),ze=m_(r);const Je=mi(),yt=1048575&Je.providerIndexes,Ht=Je.directiveStart,an=Je.providerIndexes>>20;if(Hd(r)||!r.multi){const mn=new vu(ze,R,Vr),Bn=w1(xe,t,R?yt:yt+an,Ht);-1===Bn?(Cr(Un(Je,he),Q,xe),_1(Q,r,t.length),t.push(xe),Je.directiveStart++,Je.directiveEnd++,R&&(Je.providerIndexes+=1048576),n.push(mn),he.push(mn)):(n[Bn]=mn,he[Bn]=mn)}else{const mn=w1(xe,t,yt+an,Ht),Bn=w1(xe,t,yt,yt+an),vr=mn>=0&&n[mn],ar=Bn>=0&&n[Bn];if(R&&!ar||!R&&!vr){Cr(Un(Je,he),Q,xe);const ni=function(r,t,n,T,R){const Q=new vu(r,n,Vr);return Q.multi=[],Q.index=t,Q.componentProviders=0,_w(Q,R,T&&!n),Q}(R?OC:LC,n.length,R,T,ze);!R&&ar&&(n[Bn].providerFactory=ni),_1(Q,r,t.length,0),t.push(xe),Je.directiveStart++,Je.directiveEnd++,R&&(Je.providerIndexes+=1048576),n.push(ni),he.push(ni)}else _1(Q,r,mn>-1?mn:Bn,_w(n[R?Bn:mn],ze,!R&&T));!R&&T&&ar&&n[Bn].componentProviders++}}}function _1(r,t,n,T){const R=Hd(t);if(R||function(r){return!!r.useClass}(t)){const he=(t.useClass||t).prototype.ngOnDestroy;if(he){const xe=r.destroyHooks||(r.destroyHooks=[]);if(!R&&t.multi){const ze=xe.indexOf(n);-1===ze?xe.push(n,[T,he]):xe[ze+1].push(T,he)}else xe.push(n,he)}}}function _w(r,t,n){return n&&r.componentProviders++,r.multi.push(t)-1}function w1(r,t,n,T){for(let R=n;R<T;R++)if(t[R]===r)return R;return-1}function LC(r,t,n,T){return T1(this.multi,[])}function OC(r,t,n,T){const R=this.multi;let Q;if(this.providerFactory){const he=this.providerFactory.componentProviders,xe=ji(n,n[1],this.providerFactory.index,T);Q=xe.slice(0,he),T1(R,Q);for(let ze=he;ze<xe.length;ze++)Q.push(xe[ze])}else Q=[],T1(R,Q);return Q}function T1(r,t){for(let n=0;n<r.length;n++)t.push((0,r[n])());return t}function xs(r,t=[]){return n=>{n.providersResolver=(T,R)=>function(r,t,n){const T=Ai();if(T.firstCreatePass){const R=Jo(r);b1(n,T.data,T.blueprint,R,!0),b1(t,T.data,T.blueprint,R,!1)}}(T,R?R(r):r,t)}}class ww{}const Mw="ngComponent";class NC{resolveComponentFactory(t){throw function(r){const t=Error(`No component factory found for ${at(r)}. Did you add it to @NgModule.entryComponents?`);return t[Mw]=r,t}(t)}}let Xh=(()=>{class r{}return r.NULL=new NC,r})();function Um(...r){}function ip(r,t){return new Gs(yr(r,t))}const jC=function(){return ip(mi(),Dr())};let Gs=(()=>{class r{constructor(n){this.nativeElement=n}}return r.__NG_ELEMENT_ID__=jC,r})();function kw(r){return r instanceof Gs?r.nativeElement:r}class Hm{}let cc=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>UC(),r})();const UC=function(){const r=Dr(),n=Br(mi().index,r);return function(r){return r[11]}(ts(n)?n:r)};let k1=(()=>{class r{}return r.\u0275prov=Dn({token:r,providedIn:"root",factory:()=>null}),r})();class F0{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const Aw=new F0("12.2.16");class Cw{constructor(){}supports(t){return E0(t)}create(t){return new WC(t)}}const GC=(r,t)=>t;class WC{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||GC}forEachItem(t){let n;for(n=this._itHead;null!==n;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,T=this._removalsHead,R=0,Q=null;for(;n||T;){const he=!T||n&&n.currentIndex<Sw(T,R,Q)?n:T,xe=Sw(he,R,Q),ze=he.currentIndex;if(he===T)R--,T=T._nextRemoved;else if(n=n._next,null==he.previousIndex)R++;else{Q||(Q=[]);const Je=xe-R,yt=ze-R;if(Je!=yt){for(let an=0;an<Je;an++){const mn=an<Q.length?Q[an]:Q[an]=0,Bn=mn+an;yt<=Bn&&Bn<Je&&(Q[an]=mn+1)}Q[he.previousIndex]=yt-Je}}xe!==ze&&t(he,xe,ze)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)t(n)}diff(t){if(null==t&&(t=[]),!E0(t))throw new Error(`Error trying to diff '${at(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let R,Q,he,n=this._itHead,T=!1;if(Array.isArray(t)){this.length=t.length;for(let xe=0;xe<this.length;xe++)Q=t[xe],he=this._trackByFn(xe,Q),null!==n&&Object.is(n.trackById,he)?(T&&(n=this._verifyReinsertion(n,Q,he,xe)),Object.is(n.item,Q)||this._addIdentityChange(n,Q)):(n=this._mismatch(n,Q,he,xe),T=!0),n=n._next}else R=0,function(r,t){if(Array.isArray(r))for(let n=0;n<r.length;n++)t(r[n]);else{const n=r[qd()]();let T;for(;!(T=n.next()).done;)t(T.value)}}(t,xe=>{he=this._trackByFn(R,xe),null!==n&&Object.is(n.trackById,he)?(T&&(n=this._verifyReinsertion(n,xe,he,R)),Object.is(n.item,xe)||this._addIdentityChange(n,xe)):(n=this._mismatch(n,xe,he,R),T=!0),n=n._next,R++}),this.length=R;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,T,R){let Q;return null===t?Q=this._itTail:(Q=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(T,null))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,Q,R)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(T,R))?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,Q,R)):t=this._addAfter(new YC(n,T),Q,R),t}_verifyReinsertion(t,n,T,R){let Q=null===this._unlinkedRecords?null:this._unlinkedRecords.get(T,null);return null!==Q?t=this._reinsertAfter(Q,t._prev,R):t.currentIndex!=R&&(t.currentIndex=R,this._addToMoves(t,R)),t}_truncate(t){for(;null!==t;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,T){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const R=t._prevRemoved,Q=t._nextRemoved;return null===R?this._removalsHead=Q:R._nextRemoved=Q,null===Q?this._removalsTail=R:Q._prevRemoved=R,this._insertAfter(t,n,T),this._addToMoves(t,T),t}_moveAfter(t,n,T){return this._unlink(t),this._insertAfter(t,n,T),this._addToMoves(t,T),t}_addAfter(t,n,T){return this._insertAfter(t,n,T),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,n,T){const R=null===n?this._itHead:n._next;return t._next=R,t._prev=n,null===R?this._itTail=t:R._prev=t,null===n?this._itHead=t:n._next=t,null===this._linkedRecords&&(this._linkedRecords=new Ew),this._linkedRecords.put(t),t.currentIndex=T,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const n=t._prev,T=t._next;return null===n?this._itHead=T:n._next=T,null===T?this._itTail=n:T._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ew),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class YC{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ZC{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let T;for(T=this._head;null!==T;T=T._nextDup)if((null===n||n<=T.currentIndex)&&Object.is(T.trackById,t))return T;return null}remove(t){const n=t._prevDup,T=t._nextDup;return null===n?this._head=T:n._nextDup=T,null===T?this._tail=n:T._prevDup=n,null===this._head}}class Ew{constructor(){this.map=new Map}put(t){const n=t.trackById;let T=this.map.get(n);T||(T=new ZC,this.map.set(n,T)),T.add(t)}get(t,n){const R=this.map.get(t);return R?R.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Sw(r,t,n){const T=r.previousIndex;if(null===T)return T;let R=0;return n&&T<n.length&&(R=n[T]),T+t+R}class Dw{constructor(){}supports(t){return t instanceof Map||l1(t)}create(){return new $C}}class $C{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let n;for(n=this._mapHead;null!==n;n=n._next)t(n)}forEachPreviousItem(t){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)t(n)}forEachChangedItem(t){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)t(n)}diff(t){if(t){if(!(t instanceof Map||l1(t)))throw new Error(`Error trying to diff '${at(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(t,(T,R)=>{if(n&&n.key===R)this._maybeAddToChanges(n,T),this._appendAfter=n,n=n._next;else{const Q=this._getOrCreateRecordForKey(R,T);n=this._insertBeforeOrAppend(n,Q)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let T=n;null!==T;T=T._nextRemoved)T===this._mapHead&&(this._mapHead=null),this._records.delete(T.key),T._nextRemoved=T._next,T.previousValue=T.currentValue,T.currentValue=null,T._prev=null,T._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,n){if(t){const T=t._prev;return n._next=t,n._prev=T,t._prev=n,T&&(T._next=n),t===this._mapHead&&(this._mapHead=n),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(t,n){if(this._records.has(t)){const R=this._records.get(t);this._maybeAddToChanges(R,n);const Q=R._prev,he=R._next;return Q&&(Q._next=he),he&&(he._prev=Q),R._next=null,R._prev=null,R}const T=new XC(t);return this._records.set(t,T),T.currentValue=n,this._addToAdditions(T),T}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,n){Object.is(n,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=n,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,n){t instanceof Map?t.forEach(n):Object.keys(t).forEach(T=>n(t[T],T))}}class XC{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Iw(){return new ap([new Cw])}let ap=(()=>{class r{constructor(n){this.factories=n}static create(n,T){if(null!=T){const R=T.factories.slice();n=n.concat(R)}return new r(n)}static extend(n){return{provide:r,useFactory:T=>r.create(n,T||Iw()),deps:[[r,new zu,new Js]]}}find(n){const T=this.factories.find(R=>R.supports(n));if(null!=T)return T;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(r){return r.name||typeof r}(n)}'`)}}return r.\u0275prov=Dn({token:r,providedIn:"root",factory:Iw}),r})();function Pw(){return new Jh([new Dw])}let Jh=(()=>{class r{constructor(n){this.factories=n}static create(n,T){if(T){const R=T.factories.slice();n=n.concat(R)}return new r(n)}static extend(n){return{provide:r,useFactory:T=>r.create(n,T||Pw()),deps:[[r,new zu,new Js]]}}find(n){const T=this.factories.find(R=>R.supports(n));if(T)return T;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return r.\u0275prov=Dn({token:r,providedIn:"root",factory:Pw}),r})();function qm(r,t,n,T,R=!1){for(;null!==n;){const Q=t[n.index];if(null!==Q&&T.push(Vn(Q)),os(Q))for(let xe=10;xe<Q.length;xe++){const ze=Q[xe],Je=ze[1].firstChild;null!==Je&&qm(ze[1],ze,Je,T)}const he=n.type;if(8&he)qm(r,t,n.child,T);else if(32&he){const xe=Lh(n,t);let ze;for(;ze=xe();)T.push(ze)}else if(16&he){const xe=xn(t,n);if(Array.isArray(xe))T.push(...xe);else{const ze=Qo(t[16]);qm(ze[1],ze,xe,T,!0)}}n=R?n.projectionNext:n.next}return T}class N0{constructor(t,n){this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,n=t[1];return qm(n,t,n.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(os(t)){const n=t[8],T=n?n.indexOf(this):-1;T>-1&&(Pd(t,T),Yc(n,T))}this._attachedToViewContainer=!1}i0(this._lView[1],this._lView)}onDestroy(t){Bh(this._lView[1],this._lView,null,t)}markForCheck(){Bd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){sh(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(r,t,n){Ra(!0);try{sh(r,t,n)}finally{Ra(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(r,t){ir(r,t,t[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class KC extends N0{constructor(t){super(t),this._view=t}detectChanges(){bm(this._view)}checkNoChanges(){!function(r){Ra(!0);try{bm(r)}finally{Ra(!1)}}(this._view)}get context(){return null}}const eE=function(r){return function(r,t,n){if(dl(r)&&!n){const T=Br(r.index,t);return new N0(T,T)}return 47&r.type?new N0(t[16],t):null}(mi(),Dr(),16==(16&r))};let Gm=(()=>{class r{}return r.__NG_ELEMENT_ID__=eE,r})();const rE=[new Dw],aE=new ap([new Cw]),oE=new Jh(rE),lE=function(){return Wm(mi(),Dr())};let Bc=(()=>{class r{}return r.__NG_ELEMENT_ID__=lE,r})();const uE=Bc,cE=class extends uE{constructor(t,n,T){super(),this._declarationLView=t,this._declarationTContainer=n,this.elementRef=T}createEmbeddedView(t){const n=this._declarationTContainer.tViews,T=af(this._declarationLView,n,t,16,null,n.declTNode,null,null,null,null);T[17]=this._declarationLView[this._declarationTContainer.index];const Q=this._declarationLView[19];return null!==Q&&(T[19]=Q.createEmbeddedView(n)),of(n,T,t),new N0(T)}};function Wm(r,t){return 4&r.type?new cE(t,r,ip(r,t)):null}class jc{}class Lw{}const dE=function(){return Fw(mi(),Dr())};let fc=(()=>{class r{}return r.__NG_ELEMENT_ID__=dE,r})();const gE=fc,Ow=class extends gE{constructor(t,n,T){super(),this._lContainer=t,this._hostTNode=n,this._hostLView=T}get element(){return ip(this._hostTNode,this._hostLView)}get injector(){return new Zi(this._hostTNode,this._hostLView)}get parentInjector(){const t=Pr(this._hostTNode,this._hostLView);if(It(t)){const n=Ot(t,this._hostLView),T=Rt(t);return new Zi(n[1].data[T+8],n)}return new Zi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const n=Rw(this._lContainer);return null!==n&&n[t]||null}get length(){return this._lContainer.length-10}createEmbeddedView(t,n,T){const R=t.createEmbeddedView(n||{});return this.insert(R,T),R}createComponent(t,n,T,R,Q){const he=T||this.parentInjector;if(!Q&&null==t.ngModule&&he){const ze=he.get(jc,null);ze&&(Q=ze)}const xe=t.create(he,R,void 0,Q);return this.insert(xe.hostView,n),xe}insert(t,n){const T=t._lView,R=T[1];if(function(r){return os(r[3])}(T)){const yt=this.indexOf(t);if(-1!==yt)this.detach(yt);else{const Ht=T[3],an=new Ow(Ht,Ht[6],Ht[3]);an.detach(an.indexOf(t))}}const Q=this._adjustIndex(n),he=this._lContainer;!function(r,t,n,T){const R=10+T,Q=n.length;T>0&&(n[R-1][4]=t),T<Q-10?(t[4]=n[R],yu(n,10+T,t)):(n.push(t),t[4]=null),t[3]=n;const he=t[17];null!==he&&n!==he&&function(r,t){const n=r[9];t[16]!==t[3][3][16]&&(r[2]=!0),null===n?r[9]=[t]:n.push(t)}(he,t);const xe=t[19];null!==xe&&xe.insertView(r),t[2]|=128}(R,T,he,Q);const xe=Ln(Q,he),ze=T[11],Je=Ae(ze,he[7]);return null!==Je&&function(r,t,n,T,R,Q){T[0]=R,T[6]=t,ir(r,T,n,1,R,Q)}(R,he[6],ze,T,Je,xe),t.attachToViewContainerRef(),yu(A1(he),Q,t),t}move(t,n){return this.insert(t,n)}indexOf(t){const n=Rw(this._lContainer);return null!==n?n.indexOf(t):-1}remove(t){const n=this._adjustIndex(t,-1),T=Pd(this._lContainer,n);T&&(Yc(A1(this._lContainer),n),i0(T[1],T))}detach(t){const n=this._adjustIndex(t,-1),T=Pd(this._lContainer,n);return T&&null!=Yc(A1(this._lContainer),n)?new N0(T):null}_adjustIndex(t,n=0){return null==t?this.length+n:t}};function Rw(r){return r[8]}function A1(r){return r[8]||(r[8]=[])}function Fw(r,t){let n;const T=t[r.index];if(os(T))n=T;else{let R;if(8&r.type)R=Vn(T);else{const Q=t[11];R=Q.createComment("");const he=yr(r,t);z(Q,Ae(Q,he),R,function(r,t){return jt(r)?r.nextSibling(t):t.nextSibling}(Q,he),!1)}t[r.index]=n=zd(T,t,R,r),oh(t,n)}return new Ow(n,r,t)}const up={};class n3 extends Xh{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const n=Ui(t);return new i3(n,this.ngModule)}}function r3(r){const t=[];for(let n in r)r.hasOwnProperty(n)&&t.push({propName:r[n],templateName:n});return t}const f6=new ma("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>lm});class i3 extends ww{constructor(t,n){super(),this.componentDef=t,this.ngModule=n,this.componentType=t.type,this.selector=function(r){return r.map(To).join(",")}(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return r3(this.componentDef.inputs)}get outputs(){return r3(this.componentDef.outputs)}create(t,n,T,R){const Q=(R=R||this.ngModule)?function(r,t){return{get:(n,T,R)=>{const Q=r.get(n,up,R);return Q!==up||T===up?Q:t.get(n,T,R)}}}(t,R.injector):t,he=Q.get(Hm,Kt),xe=Q.get(k1,null),ze=he.createRenderer(null,this.componentDef),Je=this.componentDef.selectors[0][0]||"div",yt=T?function(r,t,n){if(jt(r))return r.selectRootElement(t,n===Qr.ShadowDom);let T="string"==typeof t?r.querySelector(t):t;return T.textContent="",T}(ze,T,this.componentDef.encapsulation):fs(he.createRenderer(null,this.componentDef),Je,function(r){const t=r.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(Je)),Ht=this.componentDef.onPush?576:528,an=function(r,t){return{components:[],scheduler:r||lm,clean:Qy,playerHandler:t||null,flags:0}}(),mn=Au(0,null,null,1,0,null,null,null,null,null),Bn=af(null,mn,an,Ht,null,null,he,ze,xe,Q);let vr,ar;Yl(Bn);try{const ni=function(r,t,n,T,R,Q){const he=n[1];n[20]=r;const ze=Oc(he,20,2,"#host",null),Je=ze.mergedAttrs=t.hostAttrs;null!==Je&&(Wh(ze,Je,!0),null!==r&&(Ee(R,r,Je),null!==ze.classes&&si(R,r,ze.classes),null!==ze.styles&&fi(R,r,ze.styles)));const yt=T.createRenderer(r,t),Ht=af(n,pm(t),null,t.onPush?64:16,n[20],ze,T,yt,Q||null,null);return he.firstCreatePass&&(Cr(Un(ze,n),he,t.type),lf(he,ze),b0(ze,n.length,1)),oh(n,Ht),n[20]=Ht}(yt,this.componentDef,Bn,he,ze);if(yt)if(T)Ee(ze,yt,["ng-version",Aw.full]);else{const{attrs:Ur,classes:qi}=function(r){const t=[],n=[];let T=1,R=2;for(;T<r.length;){let Q=r[T];if("string"==typeof Q)2===R?""!==Q&&t.push(Q,r[++T]):8===R&&n.push(Q);else{if(!xa(R))break;R=Q}T++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);Ur&&Ee(ze,yt,Ur),qi&&qi.length>0&&si(ze,yt,qi.join(" "))}if(ar=Zr(mn,20),void 0!==n){const Ur=ar.projection=[];for(let qi=0;qi<this.ngContentSelectors.length;qi++){const ua=n[qi];Ur.push(null!=ua?Array.from(ua):null)}}vr=function(r,t,n,T,R){const Q=n[1],he=function(r,t,n){const T=mi();r.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),_0(r,T,t,eh(r,t,1,null),n));const R=ji(t,r,T.directiveStart,T);al(R,t);const Q=yr(T,t);return Q&&al(Q,t),R}(Q,n,t);if(T.components.push(he),r[8]=he,R&&R.forEach(ze=>ze(he,t)),t.contentQueries){const ze=mi();t.contentQueries(1,he,ze.directiveStart)}const xe=mi();return!Q.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Rs(xe.index),y0(n[1],xe,0,xe.directiveStart,xe.directiveEnd,t),Rc(t,he)),he}(ni,this.componentDef,Bn,an,[dA]),of(mn,Bn,null)}finally{hu()}return new p6(this.componentType,vr,ip(ar,Bn),Bn,ar)}}class p6 extends class{}{constructor(t,n,T,R,Q){super(),this.location=T,this._rootLView=R,this._tNode=Q,this.instance=n,this.hostView=this.changeDetectorRef=new KC(R),this.componentType=t}get injector(){return new Zi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const cp=new Map;class v6 extends jc{constructor(t,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new n3(this);const T=xi(t),R=function(r){return r[Rn]||null}(t);R&&v1(R),this._bootstrapComponents=Vu(T.bootstrap),this._r3Injector=g_(t,n,[{provide:jc,useValue:this},{provide:Xh,useValue:this.componentFactoryResolver}],at(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,n=$o.THROW_IF_NOT_FOUND,T=sr.Default){return t===$o||t===jc||t===Vd?this:this._r3Injector.get(t,n,T)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class B1 extends Lw{constructor(t){super(),this.moduleType=t,null!==xi(t)&&function(r){const t=new Set;!function n(T){const R=xi(T,!0),Q=R.id;null!==Q&&(function(r,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${r} - ${at(t)} vs ${at(t.name)}`)}(Q,cp.get(Q),T),cp.set(Q,T));const he=Vu(R.imports);for(const xe of he)t.has(xe)||(t.add(xe),n(xe))}(r)}(t)}create(t){return new v6(this.moduleType,t)}}function V1(r){return t=>{setTimeout(r,void 0,t)}}const la=class extends N{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,n,T){var R,Q,he;let xe=t,ze=n||(()=>null),Je=T;if(t&&"object"==typeof t){const Ht=t;xe=null===(R=Ht.next)||void 0===R?void 0:R.bind(Ht),ze=null===(Q=Ht.error)||void 0===Q?void 0:Q.bind(Ht),Je=null===(he=Ht.complete)||void 0===he?void 0:he.bind(Ht)}this.__isAsync&&(ze=V1(ze),xe&&(xe=V1(xe)),Je&&(Je=V1(Je)));const yt=super.subscribe({next:xe,error:ze,complete:Je});return t instanceof i&&t.add(yt),yt}};function P6(){return this._results[qd()]()}class Km{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=qd(),T=Km.prototype;T[n]||(T[n]=P6)}get changes(){return this._changes||(this._changes=new la)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,n){return this._results.reduce(t,n)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,n){const T=this;T.dirty=!1;const R=Fl(t);(this._changesDetected=!function(r,t,n){if(r.length!==t.length)return!1;for(let T=0;T<r.length;T++){let R=r[T],Q=t[T];if(n&&(R=n(R),Q=n(Q)),Q!==R)return!1}return!0}(T._results,R,n))&&(T._results=R,T.length=R.length,T.last=R[this.length-1],T.first=R[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class U1{constructor(t){this.queryList=t,this.matches=null}clone(){return new U1(this.queryList)}setDirty(){this.queryList.setDirty()}}class H1{constructor(t=[]){this.queries=t}createEmbeddedView(t){const n=t.queries;if(null!==n){const T=null!==t.contentQueries?t.contentQueries[0]:n.length,R=[];for(let Q=0;Q<T;Q++){const he=n.getByIndex(Q);R.push(this.queries[he.indexInDeclarationView].clone())}return new H1(R)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let n=0;n<this.queries.length;n++)null!==y3(t,n).matches&&this.queries[n].setDirty()}}class d3{constructor(t,n,T=null){this.predicate=t,this.flags=n,this.read=T}}class q1{constructor(t=[]){this.queries=t}elementStart(t,n){for(let T=0;T<this.queries.length;T++)this.queries[T].elementStart(t,n)}elementEnd(t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(t)}embeddedTView(t){let n=null;for(let T=0;T<this.length;T++){const R=null!==n?n.length:0,Q=this.getByIndex(T).embeddedTView(t,R);Q&&(Q.indexInDeclarationView=T,null!==n?n.push(Q):n=[Q])}return null!==n?new q1(n):null}template(t,n){for(let T=0;T<this.queries.length;T++)this.queries[T].template(t,n)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class G1{constructor(t,n=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(t,n){this.isApplyingToNode(n)&&this.matchTNode(t,n)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,n){this.elementStart(t,n)}embeddedTView(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new G1(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let T=t.parent;for(;null!==T&&8&T.type&&T.index!==n;)T=T.parent;return n===(null!==T?T.index:-1)}return this._appliesToNextNode}matchTNode(t,n){const T=this.metadata.predicate;if(Array.isArray(T))for(let R=0;R<T.length;R++){const Q=T[R];this.matchTNodeWithReadOption(t,n,R6(n,Q)),this.matchTNodeWithReadOption(t,n,Si(n,t,Q,!1,!1))}else T===Bc?4&n.type&&this.matchTNodeWithReadOption(t,n,-1):this.matchTNodeWithReadOption(t,n,Si(n,t,T,!1,!1))}matchTNodeWithReadOption(t,n,T){if(null!==T){const R=this.metadata.read;if(null!==R)if(R===Gs||R===fc||R===Bc&&4&n.type)this.addMatch(n.index,-2);else{const Q=Si(n,t,R,!1,!1);null!==Q&&this.addMatch(n.index,Q)}else this.addMatch(n.index,T)}}addMatch(t,n){null===this.matches?this.matches=[t,n]:this.matches.push(t,n)}}function R6(r,t){const n=r.localNames;if(null!==n)for(let T=0;T<n.length;T+=2)if(n[T]===t)return n[T+1];return null}function N6(r,t,n,T){return-1===n?function(r,t){return 11&r.type?ip(r,t):4&r.type?Wm(r,t):null}(t,r):-2===n?function(r,t,n){return n===Gs?ip(t,r):n===Bc?Wm(t,r):n===fc?Fw(t,r):void 0}(r,t,T):ji(r,r[1],n,t)}function p3(r,t,n,T){const R=t[19].queries[T];if(null===R.matches){const Q=r.data,he=n.matches,xe=[];for(let ze=0;ze<he.length;ze+=2){const Je=he[ze];xe.push(Je<0?null:N6(t,Q[Je],he[ze+1],n.metadata.read))}R.matches=xe}return R.matches}function W1(r,t,n,T){const R=r.queries.getByIndex(n),Q=R.matches;if(null!==Q){const he=p3(r,t,R,n);for(let xe=0;xe<Q.length;xe+=2){const ze=Q[xe];if(ze>0)T.push(he[xe/2]);else{const Je=Q[xe+1],yt=t[-ze];for(let Ht=10;Ht<yt.length;Ht++){const an=yt[Ht];an[17]===an[3]&&W1(an[1],an,Je,T)}if(null!==yt[9]){const Ht=yt[9];for(let an=0;an<Ht.length;an++){const mn=Ht[an];W1(mn[1],mn,Je,T)}}}}}return T}function $0(r){const t=Dr(),n=Ai(),T=jo();rl(T+1);const R=y3(n,T);if(r.dirty&&li(t)===(2==(2&R.metadata.flags))){if(null===R.matches)r.reset([]);else{const Q=R.crossesNgTemplate?W1(n,t,T,[]):p3(n,t,R,T);r.reset(Q,kw),r.notifyOnChanges()}return!0}return!1}function Qm(r,t,n,T){const R=Ai();if(R.firstCreatePass){const Q=mi();v3(R,new d3(t,n,T),Q.index),function(r,t){const n=r.contentQueries||(r.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(r.queries.length-1,t)}(R,r),2==(2&n)&&(R.staticContentQueries=!0)}m3(R,Dr(),n)}function X0(){return function(r,t){return r[19].queries[t].queryList}(Dr(),jo())}function m3(r,t,n){const T=new Km(4==(4&n));Bh(r,t,T,T.destroy),null===t[19]&&(t[19]=new H1),t[19].queries.push(new U1(T))}function v3(r,t,n){null===r.queries&&(r.queries=new q1),r.queries.track(new G1(t,n))}function y3(r,t){return r.queries.getByIndex(t)}const K0=new ma("Application Initializer");let hp=(()=>{class r{constructor(n){this.appInits=n,this.resolve=Um,this.reject=Um,this.initialized=!1,this.done=!1,this.donePromise=new Promise((T,R)=>{this.resolve=T,this.reject=R})}runInitializers(){if(this.initialized)return;const n=[],T=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let R=0;R<this.appInits.length;R++){const Q=this.appInits[R]();if(D0(Q))n.push(Q);else if(Lm(Q)){const he=new Promise((xe,ze)=>{Q.subscribe({complete:xe,error:ze})});n.push(he)}}Promise.all(n).then(()=>{T()}).catch(R=>{this.reject(R)}),0===n.length&&T(),this.initialized=!0}}return r.\u0275fac=function(n){return new(n||r)(yi(K0,8))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})();const Q0=new ma("AppId"),pS={provide:Q0,useFactory:function(){return`${K1()}${K1()}${K1()}`},deps:[]};function K1(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const F3=new ma("Platform Initializer"),dp=new ma("Platform ID"),N3=new ma("appBootstrapListener");let nv=(()=>{class r{log(n){console.log(n)}warn(n){console.warn(n)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})();const uh=new ma("LocaleId"),z3=new ma("DefaultCurrencyCode");class mS{constructor(t,n){this.ngModuleFactory=t,this.componentFactories=n}}const Q1=function(r){return new B1(r)},vS=Q1,yS=function(r){return Promise.resolve(Q1(r))},B3=function(r){const t=Q1(r),T=Vu(xi(r).declarations).reduce((R,Q)=>{const he=Ui(Q);return he&&R.push(new i3(he)),R},[]);return new mS(t,T)},xS=B3,bS=function(r){return Promise.resolve(B3(r))};let ed=(()=>{class r{constructor(){this.compileModuleSync=vS,this.compileModuleAsync=yS,this.compileModuleAndAllComponentsSync=xS,this.compileModuleAndAllComponentsAsync=bS}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})();const TS=(()=>Promise.resolve(0))();function ex(r){"undefined"==typeof Zone?TS.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Hs{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:T=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new la(!1),this.onMicrotaskEmpty=new la(!1),this.onStable=new la(!1),this.onError=new la(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const R=this;R._nesting=0,R._outer=R._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(R._inner=R._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(R._inner=R._inner.fork(Zone.longStackTraceZoneSpec)),R.shouldCoalesceEventChangeDetection=!T&&n,R.shouldCoalesceRunChangeDetection=T,R.lastRequestAnimationFrameId=-1,R.nativeRequestAnimationFrame=function(){let r=un.requestAnimationFrame,t=un.cancelAnimationFrame;if("undefined"!=typeof Zone&&r&&t){const n=r[Zone.__symbol__("OriginalDelegate")];n&&(r=n);const T=t[Zone.__symbol__("OriginalDelegate")];T&&(t=T)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(r){const t=()=>{!function(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(un,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,nx(r),r.isCheckStableRunning=!0,tx(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),nx(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,T,R,Q,he,xe)=>{try{return j3(r),n.invokeTask(R,Q,he,xe)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===Q.type||r.shouldCoalesceRunChangeDetection)&&t(),V3(r)}},onInvoke:(n,T,R,Q,he,xe,ze)=>{try{return j3(r),n.invoke(R,Q,he,xe,ze)}finally{r.shouldCoalesceRunChangeDetection&&t(),V3(r)}},onHasTask:(n,T,R,Q)=>{n.hasTask(R,Q),T===R&&("microTask"==Q.change?(r._hasPendingMicrotasks=Q.microTask,nx(r),tx(r)):"macroTask"==Q.change&&(r.hasPendingMacrotasks=Q.macroTask))},onHandleError:(n,T,R,Q)=>(n.handleError(R,Q),r.runOutsideAngular(()=>r.onError.emit(Q)),!1)})}(R)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Hs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,n,T){return this._inner.run(t,n,T)}runTask(t,n,T,R){const Q=this._inner,he=Q.scheduleEventTask("NgZoneEvent: "+R,t,kS,Um,Um);try{return Q.runTask(he,n,T)}finally{Q.cancelTask(he)}}runGuarded(t,n,T){return this._inner.runGuarded(t,n,T)}runOutsideAngular(t){return this._outer.run(t)}}const kS={};function tx(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function nx(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function j3(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function V3(r){r._nesting--,tx(r)}class ES{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new la,this.onMicrotaskEmpty=new la,this.onStable=new la,this.onError=new la}run(t,n,T){return t.apply(n,T)}runGuarded(t,n,T){return t.apply(n,T)}runOutsideAngular(t){return t()}runTask(t,n,T,R){return t.apply(n,T)}}let rx=(()=>{class r{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hs.assertNotInAngularZone(),ex(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ex(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(T=>!T.updateCb||!T.updateCb(n)||(clearTimeout(T.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,T,R){let Q=-1;T&&T>0&&(Q=setTimeout(()=>{this._callbacks=this._callbacks.filter(he=>he.timeoutId!==Q),n(this._didWork,this.getPendingTasks())},T)),this._callbacks.push({doneCb:n,timeoutId:Q,updateCb:R})}whenStable(n,T,R){if(R&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,T,R),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,T,R){return[]}}return r.\u0275fac=function(n){return new(n||r)(yi(Hs))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})(),U3=(()=>{class r{constructor(){this._applications=new Map,ix.addToWindow(this)}registerApplication(n,T){this._applications.set(n,T)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,T=!0){return ix.findTestabilityInTree(this,n,T)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})();class SS{addToWindow(t){}findTestabilityInTree(t,n,T){return null}}let ix=new SS,H3=!0,q3=!1;function eg(){return q3=!0,H3}let pc;const G3=new ma("AllowMultipleToken");class ax{constructor(t,n){this.name=t,this.token=n}}function W3(r,t,n=[]){const T=`Platform: ${t}`,R=new ma(T);return(Q=[])=>{let he=Y3();if(!he||he.injector.get(G3,!1))if(r)r(n.concat(Q).concat({provide:R,useValue:!0}));else{const xe=n.concat(Q).concat({provide:R,useValue:!0},{provide:k0,useValue:"platform"});!function(r){if(pc&&!pc.destroyed&&!pc.injector.get(G3,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");pc=r.get(Z3);const t=r.get(F3,null);t&&t.forEach(n=>n())}($o.create({providers:xe,name:T}))}return function(r){const t=Y3();if(!t)throw new Error("No platform exists!");if(!t.injector.get(r,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(R)}}function Y3(){return pc&&!pc.destroyed?pc:null}let Z3=(()=>{class r{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,T){const xe=function(r,t){let n;return n="noop"===r?new ES:("zone.js"===r?void 0:r)||new Hs({enableLongStackTrace:eg(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(T?T.ngZone:void 0,{ngZoneEventCoalescing:T&&T.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:T&&T.ngZoneRunCoalescing||!1}),ze=[{provide:Hs,useValue:xe}];return xe.run(()=>{const Je=$o.create({providers:ze,parent:this.injector,name:n.moduleType.name}),yt=n.create(Je),Ht=yt.injector.get(Dc,null);if(!Ht)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return xe.runOutsideAngular(()=>{const an=xe.onError.subscribe({next:mn=>{Ht.handleError(mn)}});yt.onDestroy(()=>{ox(this._modules,yt),an.unsubscribe()})}),function(r,t,n){try{const T=n();return D0(T)?T.catch(R=>{throw t.runOutsideAngular(()=>r.handleError(R)),R}):T}catch(T){throw t.runOutsideAngular(()=>r.handleError(T)),T}}(Ht,xe,()=>{const an=yt.injector.get(hp);return an.runInitializers(),an.donePromise.then(()=>(v1(yt.injector.get(uh,Nm)||Nm),this._moduleDoBootstrap(yt),yt))})})}bootstrapModule(n,T=[]){const R=$3({},T);return function(r,t,n){const T=new B1(n);return Promise.resolve(T)}(0,0,n).then(Q=>this.bootstrapModuleFactory(Q,R))}_moduleDoBootstrap(n){const T=n.injector.get(pp);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(R=>T.bootstrap(R));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${at(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(T)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(n){return new(n||r)(yi($o))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})();function $3(r,t){return Array.isArray(t)?t.reduce($3,r):Object.assign(Object.assign({},r),t)}let pp=(()=>{class r{constructor(n,T,R,Q,he){this._zone=n,this._injector=T,this._exceptionHandler=R,this._componentFactoryResolver=Q,this._initStatus=he,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const xe=new A(Je=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{Je.next(this._stable),Je.complete()})}),ze=new A(Je=>{let yt;this._zone.runOutsideAngular(()=>{yt=this._zone.onStable.subscribe(()=>{Hs.assertNotInAngularZone(),ex(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,Je.next(!0))})})});const Ht=this._zone.onUnstable.subscribe(()=>{Hs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{Je.next(!1)}))});return()=>{yt.unsubscribe(),Ht.unsubscribe()}});this.isStable=function(...r){let t=Number.POSITIVE_INFINITY,n=null,T=r[r.length-1];return I(T)?(n=r.pop(),r.length>1&&"number"==typeof r[r.length-1]&&(t=r.pop())):"number"==typeof T&&(t=r.pop()),null===n&&1===r.length&&r[0]instanceof A?r[0]:Oe(t)(Pe(r,n))}(xe,ze.pipe(r=>Ue()(function(r,t){return function(T){let R;R="function"==typeof r?r:function(){return r};const Q=Object.create(T,He);return Q.source=T,Q.subjectFactory=R,Q}}(kt)(r))))}bootstrap(n,T){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let R;R=n instanceof ww?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(R.componentType);const Q=function(r){return r.isBoundToModule}(R)?void 0:this._injector.get(jc),xe=R.create($o.NULL,[],T||R.selector,Q),ze=xe.location.nativeElement,Je=xe.injector.get(rx,null),yt=Je&&xe.injector.get(U3);return Je&&yt&&yt.registerApplication(ze,Je),xe.onDestroy(()=>{this.detachView(xe.hostView),ox(this.components,xe),yt&&yt.unregisterApplication(ze)}),this._loadComponent(xe),xe}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const T=n;this._views.push(T),T.attachToAppRef(this)}detachView(n){const T=n;ox(this._views,T),T.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(N3,[]).concat(this._bootstrapListeners).forEach(R=>R(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return r.\u0275fac=function(n){return new(n||r)(yi(Hs),yi($o),yi(Dc),yi(Xh),yi(hp))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})();function ox(r,t){const n=r.indexOf(t);n>-1&&r.splice(n,1)}class iv{}class qS{}const GS={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let WS=(()=>{class r{constructor(n,T){this._compiler=n,this._config=T||GS}load(n){return this.loadAndCompile(n)}loadAndCompile(n){let[T,R]=n.split("#");return void 0===R&&(R="default"),oe(255)(T).then(Q=>Q[R]).then(Q=>Q3(Q,T,R)).then(Q=>this._compiler.compileModuleAsync(Q))}loadFactory(n){let[T,R]=n.split("#"),Q="NgFactory";return void 0===R&&(R="default",Q=""),oe(255)(this._config.factoryPathPrefix+T+this._config.factoryPathSuffix).then(he=>he[R+Q]).then(he=>Q3(he,T,R))}}return r.\u0275fac=function(n){return new(n||r)(yi(ed),yi(qS,8))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})();function Q3(r,t,n){if(!r)throw new Error(`Cannot find '${n}' in '${t}'`);return r}const nD=W3(null,"core",[{provide:dp,useValue:"unknown"},{provide:Z3,deps:[$o]},{provide:U3,deps:[]},{provide:nv,deps:[]}]),sD=[{provide:pp,useClass:pp,deps:[Hs,$o,Dc,Xh,hp]},{provide:f6,deps:[Hs],useFactory:function(r){let t=[];return r.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(n){t.push(n)}}},{provide:hp,useClass:hp,deps:[[new Js,K0]]},{provide:ed,useClass:ed,deps:[]},pS,{provide:ap,useFactory:function(){return aE},deps:[]},{provide:Jh,useFactory:function(){return oE},deps:[]},{provide:uh,useFactory:function(r){return v1(r=r||"undefined"!=typeof $localize&&$localize.locale||Nm),r},deps:[[new Af(uh),new Js,new zu]]},{provide:z3,useValue:"USD"}];let uD=(()=>{class r{constructor(n){}}return r.\u0275fac=function(n){return new(n||r)(yi(pp))},r.\u0275mod=Er({type:r}),r.\u0275inj=rn({providers:sD}),r})(),pv=null;function Vc(){return pv}const Tl=new ma("DocumentToken");let rd=(()=>{class r{historyGo(n){throw new Error("Not implemented")}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Dn({factory:l8,token:r,providedIn:"platform"}),r})();function l8(){return yi(T5)}const u8=new ma("Location Initialized");let T5=(()=>{class r extends rd{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Vc().getBaseHref(this._doc)}onPopState(n){const T=Vc().getGlobalEventTarget(this._doc,"window");return T.addEventListener("popstate",n,!1),()=>T.removeEventListener("popstate",n)}onHashChange(n){const T=Vc().getGlobalEventTarget(this._doc,"window");return T.addEventListener("hashchange",n,!1),()=>T.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,T,R){M5()?this._history.pushState(n,T,R):this.location.hash=R}replaceState(n,T,R){M5()?this._history.replaceState(n,T,R):this.location.hash=R}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return r.\u0275fac=function(n){return new(n||r)(yi(Tl))},r.\u0275prov=Dn({factory:c8,token:r,providedIn:"platform"}),r})();function M5(){return!!window.history.pushState}function c8(){return new T5(yi(Tl))}function _x(r,t){if(0==r.length)return t;if(0==t.length)return r;let n=0;return r.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?r+t.substring(1):1==n?r+t:r+"/"+t}function k5(r){const t=r.match(/#|\?|$/),n=t&&t.index||r.length;return r.slice(0,n-("/"===r[n-1]?1:0))+r.slice(n)}function hf(r){return r&&"?"!==r[0]?"?"+r:r}let id=(()=>{class r{historyGo(n){throw new Error("Not implemented")}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Dn({factory:f8,token:r,providedIn:"root"}),r})();function f8(r){const t=yi(Tl).location;return new A5(yi(rd),t&&t.origin||"")}const wx=new ma("appBaseHref");let A5=(()=>{class r extends id{constructor(n,T){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==T&&(T=this._platformLocation.getBaseHrefFromDOM()),null==T)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=T}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return _x(this._baseHref,n)}path(n=!1){const T=this._platformLocation.pathname+hf(this._platformLocation.search),R=this._platformLocation.hash;return R&&n?`${T}${R}`:T}pushState(n,T,R,Q){const he=this.prepareExternalUrl(R+hf(Q));this._platformLocation.pushState(n,T,he)}replaceState(n,T,R,Q){const he=this.prepareExternalUrl(R+hf(Q));this._platformLocation.replaceState(n,T,he)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var T,R;null===(R=(T=this._platformLocation).historyGo)||void 0===R||R.call(T,n)}}return r.\u0275fac=function(n){return new(n||r)(yi(rd),yi(wx,8))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})(),h8=(()=>{class r extends id{constructor(n,T){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=T&&(this._baseHref=T)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let T=this._platformLocation.hash;return null==T&&(T="#"),T.length>0?T.substring(1):T}prepareExternalUrl(n){const T=_x(this._baseHref,n);return T.length>0?"#"+T:T}pushState(n,T,R,Q){let he=this.prepareExternalUrl(R+hf(Q));0==he.length&&(he=this._platformLocation.pathname),this._platformLocation.pushState(n,T,he)}replaceState(n,T,R,Q){let he=this.prepareExternalUrl(R+hf(Q));0==he.length&&(he=this._platformLocation.pathname),this._platformLocation.replaceState(n,T,he)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var T,R;null===(R=(T=this._platformLocation).historyGo)||void 0===R||R.call(T,n)}}return r.\u0275fac=function(n){return new(n||r)(yi(rd),yi(wx,8))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})(),gv=(()=>{class r{constructor(n,T){this._subject=new la,this._urlChangeListeners=[],this._platformStrategy=n;const R=this._platformStrategy.getBaseHref();this._platformLocation=T,this._baseHref=k5(C5(R)),this._platformStrategy.onPopState(Q=>{this._subject.emit({url:this.path(!0),pop:!0,state:Q.state,type:Q.type})})}path(n=!1){return this.normalize(this._platformStrategy.path(n))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(n,T=""){return this.path()==this.normalize(n+hf(T))}normalize(n){return r.stripTrailingSlash(function(r,t){return r&&t.startsWith(r)?t.substring(r.length):t}(this._baseHref,C5(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._platformStrategy.prepareExternalUrl(n)}go(n,T="",R=null){this._platformStrategy.pushState(R,"",n,T),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+hf(T)),R)}replaceState(n,T="",R=null){this._platformStrategy.replaceState(R,"",n,T),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+hf(T)),R)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(n=0){var T,R;null===(R=(T=this._platformStrategy).historyGo)||void 0===R||R.call(T,n)}onUrlChange(n){this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(T=>{this._notifyUrlChangeListeners(T.url,T.state)}))}_notifyUrlChangeListeners(n="",T){this._urlChangeListeners.forEach(R=>R(n,T))}subscribe(n,T,R){return this._subject.subscribe({next:n,error:T,complete:R})}}return r.\u0275fac=function(n){return new(n||r)(yi(id),yi(rd))},r.normalizeQueryParams=hf,r.joinWithSlash=_x,r.stripTrailingSlash=k5,r.\u0275prov=Dn({factory:d8,token:r,providedIn:"root"}),r})();function d8(){return new gv(yi(id),yi(rd))}function C5(r){return r.replace(/\/index.html$/,"")}var Qs=(()=>((Qs=Qs||{})[Qs.Zero=0]="Zero",Qs[Qs.One=1]="One",Qs[Qs.Two=2]="Two",Qs[Qs.Few=3]="Few",Qs[Qs.Many=4]="Many",Qs[Qs.Other=5]="Other",Qs))();const _8=function(r){return function(r){const t=function(r){return r.toLowerCase().replace(/_/g,"-")}(r);let n=X2(t);if(n)return n;const T=t.split("-")[0];if(n=X2(T),n)return n;if("en"===T)return N4;throw new Error(`Missing locale data for the locale "${r}".`)}(r)[Gi.PluralCase]};class kv{}let X8=(()=>{class r extends kv{constructor(n){super(),this.locale=n}getPluralCategory(n,T){switch(_8(T||this.locale)(n)){case Qs.Zero:return"zero";case Qs.One:return"one";case Qs.Two:return"two";case Qs.Few:return"few";case Qs.Many:return"many";default:return"other"}}}return r.\u0275fac=function(n){return new(n||r)(yi(uh))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})();function F5(r,t){t=encodeURIComponent(t);for(const n of r.split(";")){const T=n.indexOf("="),[R,Q]=-1==T?[n,""]:[n.slice(0,T),n.slice(T+1)];if(R.trim()===t)return decodeURIComponent(Q)}return null}let vp=(()=>{class r{constructor(n,T,R,Q){this._iterableDiffers=n,this._keyValueDiffers=T,this._ngEl=R,this._renderer=Q,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(n){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof n?n.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(n){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof n?n.split(/\s+/):n,this._rawClass&&(E0(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const n=this._iterableDiffer.diff(this._rawClass);n&&this._applyIterableChanges(n)}else if(this._keyValueDiffer){const n=this._keyValueDiffer.diff(this._rawClass);n&&this._applyKeyValueChanges(n)}}_applyKeyValueChanges(n){n.forEachAddedItem(T=>this._toggleClass(T.key,T.currentValue)),n.forEachChangedItem(T=>this._toggleClass(T.key,T.currentValue)),n.forEachRemovedItem(T=>{T.previousValue&&this._toggleClass(T.key,!1)})}_applyIterableChanges(n){n.forEachAddedItem(T=>{if("string"!=typeof T.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${at(T.item)}`);this._toggleClass(T.item,!0)}),n.forEachRemovedItem(T=>this._toggleClass(T.item,!1))}_applyClasses(n){n&&(Array.isArray(n)||n instanceof Set?n.forEach(T=>this._toggleClass(T,!0)):Object.keys(n).forEach(T=>this._toggleClass(T,!!n[T])))}_removeClasses(n){n&&(Array.isArray(n)||n instanceof Set?n.forEach(T=>this._toggleClass(T,!1)):Object.keys(n).forEach(T=>this._toggleClass(T,!1)))}_toggleClass(n,T){(n=n.trim())&&n.split(/\s+/g).forEach(R=>{T?this._renderer.addClass(this._ngEl.nativeElement,R):this._renderer.removeClass(this._ngEl.nativeElement,R)})}}return r.\u0275fac=function(n){return new(n||r)(Vr(ap),Vr(Jh),Vr(Gs),Vr(cc))},r.\u0275dir=xr({type:r,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),r})(),Av=(()=>{class r{constructor(n,T){this._viewContainer=n,this._context=new eI,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=T}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){z5("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){z5("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,T){return!0}}return r.\u0275fac=function(n){return new(n||r)(Vr(fc),Vr(Bc))},r.\u0275dir=xr({type:r,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),r})();class eI{constructor(){this.$implicit=null,this.ngIf=null}}function z5(r,t){if(t&&!t.createEmbeddedView)throw new Error(`${r} must be a TemplateRef, but received '${at(t)}'.`)}let Ox=(()=>{class r{constructor(n,T,R){this._ngEl=n,this._differs=T,this._renderer=R,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){const n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,T){const[R,Q]=n.split(".");null!=(T=null!=T&&Q?`${T}${Q}`:T)?this._renderer.setStyle(this._ngEl.nativeElement,R,T):this._renderer.removeStyle(this._ngEl.nativeElement,R)}_applyChanges(n){n.forEachRemovedItem(T=>this._setStyle(T.key,null)),n.forEachAddedItem(T=>this._setStyle(T.key,T.currentValue)),n.forEachChangedItem(T=>this._setStyle(T.key,T.currentValue))}}return r.\u0275fac=function(n){return new(n||r)(Vr(Gs),Vr(Jh),Vr(cc))},r.\u0275dir=xr({type:r,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),r})(),ad=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Er({type:r}),r.\u0275inj=rn({providers:[{provide:kv,useClass:X8}]}),r})();const U5="browser";function H5(r){return r===U5}let q5=(()=>{class r{}return r.\u0275prov=Dn({token:r,providedIn:"root",factory:()=>new CI(yi(Tl),window)}),r})();class CI{constructor(t,n){this.document=t,this.window=n,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const n=function(r,t){const n=r.getElementById(t)||r.getElementsByName(t)[0];if(n)return n;if("function"==typeof r.createTreeWalker&&r.body&&(r.body.createShadowRoot||r.body.attachShadow)){const T=r.createTreeWalker(r.body,NodeFilter.SHOW_ELEMENT);let R=T.currentNode;for(;R;){const Q=R.shadowRoot;if(Q){const he=Q.getElementById(t)||Q.querySelector(`[name="${t}"]`);if(he)return he}R=T.nextNode()}}return null}(this.document,t);n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=t)}}scrollToElement(t){const n=t.getBoundingClientRect(),T=n.left+this.window.pageXOffset,R=n.top+this.window.pageYOffset,Q=this.offset();this.window.scrollTo(T-Q[0],R-Q[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=G5(this.window.history)||G5(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function G5(r){return Object.getOwnPropertyDescriptor(r,"scrollRestoration")}class W5{}class Nx extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(r){pv||(pv=r)}(new Nx)}onAndCancel(t,n,T){return t.addEventListener(n,T,!1),()=>{t.removeEventListener(n,T,!1)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return(n=n||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return"window"===n?window:"document"===n?t:"body"===n?t.body:null}getBaseHref(t){const n=(sg=sg||document.querySelector("base"),sg?sg.getAttribute("href"):null);return null==n?null:function(r){Cv=Cv||document.createElement("a"),Cv.setAttribute("href",r);const t=Cv.pathname;return"/"===t.charAt(0)?t:`/${t}`}(n)}resetBaseElement(){sg=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return F5(document.cookie,t)}}let Cv,sg=null;const Y5=new ma("TRANSITION_ID"),LI=[{provide:K0,useFactory:function(r,t,n){return()=>{n.get(hp).donePromise.then(()=>{const T=Vc(),R=t.querySelectorAll(`style[ng-transition="${r}"]`);for(let Q=0;Q<R.length;Q++)T.remove(R[Q])})}},deps:[Y5,Tl,$o],multi:!0}];class zx{static init(){!function(r){ix=r}(new zx)}addToWindow(t){un.getAngularTestability=(T,R=!0)=>{const Q=t.findTestabilityInTree(T,R);if(null==Q)throw new Error("Could not find testability for element.");return Q},un.getAllAngularTestabilities=()=>t.getAllTestabilities(),un.getAllAngularRootElements=()=>t.getAllRootElements(),un.frameworkStabilizers||(un.frameworkStabilizers=[]),un.frameworkStabilizers.push(T=>{const R=un.getAllAngularTestabilities();let Q=R.length,he=!1;const xe=function(ze){he=he||ze,Q--,0==Q&&T(he)};R.forEach(function(ze){ze.whenStable(xe)})})}findTestabilityInTree(t,n,T){if(null==n)return null;const R=t.getTestability(n);return null!=R?R:T?Vc().isShadowRoot(n)?this.findTestabilityInTree(t,n.host,!0):this.findTestabilityInTree(t,n.parentElement,!0):null}}let OI=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})();const lg=new ma("EventManagerPlugins");let ug=(()=>{class r{constructor(n,T){this._zone=T,this._eventNameToPlugin=new Map,n.forEach(R=>R.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,T,R){return this._findPluginFor(T).addEventListener(n,T,R)}addGlobalEventListener(n,T,R){return this._findPluginFor(T).addGlobalEventListener(n,T,R)}getZone(){return this._zone}_findPluginFor(n){const T=this._eventNameToPlugin.get(n);if(T)return T;const R=this._plugins;for(let Q=0;Q<R.length;Q++){const he=R[Q];if(he.supports(n))return this._eventNameToPlugin.set(n,he),he}throw new Error(`No event manager plugin found for event ${n}`)}}return r.\u0275fac=function(n){return new(n||r)(yi(lg),yi(Hs))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})();class Bx{constructor(t){this._doc=t}addGlobalEventListener(t,n,T){const R=Vc().getGlobalEventTarget(this._doc,t);if(!R)throw new Error(`Unsupported event target ${R} for event ${n}`);return this.addEventListener(R,n,T)}}let $5=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(n){const T=new Set;n.forEach(R=>{this._stylesSet.has(R)||(this._stylesSet.add(R),T.add(R))}),this.onStylesAdded(T)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})(),cg=(()=>{class r extends $5{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,T,R){n.forEach(Q=>{const he=this._doc.createElement("style");he.textContent=Q,R.push(T.appendChild(he))})}addHost(n){const T=[];this._addStylesToHost(this._stylesSet,n,T),this._hostNodes.set(n,T)}removeHost(n){const T=this._hostNodes.get(n);T&&T.forEach(X5),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((T,R)=>{this._addStylesToHost(n,R,T)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(X5))}}return r.\u0275fac=function(n){return new(n||r)(yi(Tl))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})();function X5(r){Vc().remove(r)}const jx={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},Vx=/%COMP%/g;function Sv(r,t,n){for(let T=0;T<t.length;T++){let R=t[T];Array.isArray(R)?Sv(r,R,n):(R=R.replace(Vx,r),n.push(R))}return n}function Q5(r){return t=>{if("__ngUnwrap__"===t)return r;!1===r(t)&&(t.preventDefault(),t.returnValue=!1)}}let Ux=(()=>{class r{constructor(n,T,R){this.eventManager=n,this.sharedStylesHost=T,this.appId=R,this.rendererByCompId=new Map,this.defaultRenderer=new Hx(n)}createRenderer(n,T){if(!n||!T)return this.defaultRenderer;switch(T.encapsulation){case Qr.Emulated:{let R=this.rendererByCompId.get(T.id);return R||(R=new $I(this.eventManager,this.sharedStylesHost,T,this.appId),this.rendererByCompId.set(T.id,R)),R.applyToHost(n),R}case 1:case Qr.ShadowDom:return new XI(this.eventManager,this.sharedStylesHost,n,T);default:if(!this.rendererByCompId.has(T.id)){const R=Sv(T.id,T.styles,[]);this.sharedStylesHost.addStyles(R),this.rendererByCompId.set(T.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(n){return new(n||r)(yi(ug),yi(cg),yi(Q0))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})();class Hx{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,n){return n?document.createElementNS(jx[n]||n,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,n){t.appendChild(n)}insertBefore(t,n,T){t&&t.insertBefore(n,T)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let T="string"==typeof t?document.querySelector(t):t;if(!T)throw new Error(`The selector "${t}" did not match any elements`);return n||(T.textContent=""),T}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,T,R){if(R){n=R+":"+n;const Q=jx[R];Q?t.setAttributeNS(Q,n,T):t.setAttribute(n,T)}else t.setAttribute(n,T)}removeAttribute(t,n,T){if(T){const R=jx[T];R?t.removeAttributeNS(R,n):t.removeAttribute(`${T}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,T,R){R&(bl.DashCase|bl.Important)?t.style.setProperty(n,T,R&bl.Important?"important":""):t.style[n]=T}removeStyle(t,n,T){T&bl.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,T){t[n]=T}setValue(t,n){t.nodeValue=n}listen(t,n,T){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,n,Q5(T)):this.eventManager.addEventListener(t,n,Q5(T))}}class $I extends Hx{constructor(t,n,T,R){super(t),this.component=T;const Q=Sv(R+"-"+T.id,T.styles,[]);n.addStyles(Q),this.contentAttr=function(r){return"_ngcontent-%COMP%".replace(Vx,r)}(R+"-"+T.id),this.hostAttr=function(r){return"_nghost-%COMP%".replace(Vx,r)}(R+"-"+T.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,n){const T=super.createElement(t,n);return super.setAttribute(T,this.contentAttr,""),T}}class XI extends Hx{constructor(t,n,T,R){super(t),this.sharedStylesHost=n,this.hostEl=T,this.shadowRoot=T.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Q=Sv(R.id,R.styles,[]);for(let he=0;he<Q.length;he++){const xe=document.createElement("style");xe.textContent=Q[he],this.shadowRoot.appendChild(xe)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,T){return super.insertBefore(this.nodeOrShadowRoot(t),n,T)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let JI=(()=>{class r extends Bx{constructor(n){super(n)}supports(n){return!0}addEventListener(n,T,R){return n.addEventListener(T,R,!1),()=>this.removeEventListener(n,T,R)}removeEventListener(n,T,R){return n.removeEventListener(T,R)}}return r.\u0275fac=function(n){return new(n||r)(yi(Tl))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})();const nT=["alt","control","meta","shift"],iP={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},rT={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},aP={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let oP=(()=>{class r extends Bx{constructor(n){super(n)}supports(n){return null!=r.parseEventName(n)}addEventListener(n,T,R){const Q=r.parseEventName(T),he=r.eventCallback(Q.fullKey,R,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vc().onAndCancel(n,Q.domEventName,he))}static parseEventName(n){const T=n.toLowerCase().split("."),R=T.shift();if(0===T.length||"keydown"!==R&&"keyup"!==R)return null;const Q=r._normalizeKey(T.pop());let he="";if(nT.forEach(ze=>{const Je=T.indexOf(ze);Je>-1&&(T.splice(Je,1),he+=ze+".")}),he+=Q,0!=T.length||0===Q.length)return null;const xe={};return xe.domEventName=R,xe.fullKey=he,xe}static getEventFullKey(n){let T="",R=function(r){let t=r.key;if(null==t){if(t=r.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===r.location&&rT.hasOwnProperty(t)&&(t=rT[t]))}return iP[t]||t}(n);return R=R.toLowerCase()," "===R?R="space":"."===R&&(R="dot"),nT.forEach(Q=>{Q!=R&&aP[Q](n)&&(T+=Q+".")}),T+=R,T}static eventCallback(n,T,R){return Q=>{r.getEventFullKey(Q)===n&&R.runGuarded(()=>T(Q))}}static _normalizeKey(n){switch(n){case"esc":return"escape";default:return n}}}return r.\u0275fac=function(n){return new(n||r)(yi(Tl))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})(),od=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Dn({factory:function(){return yi(Gx)},token:r,providedIn:"root"}),r})(),Gx=(()=>{class r extends od{constructor(n){super(),this._doc=n}sanitize(n,T){if(null==T)return null;switch(n){case Po.NONE:return T;case Po.HTML:return ju(T,"HTML")?zl(T):El(this._doc,String(T)).toString();case Po.STYLE:return ju(T,"Style")?zl(T):T;case Po.SCRIPT:if(ju(T,"Script"))return zl(T);throw new Error("unsafe value used in a script context");case Po.URL:return jp(T),ju(T,"URL")?zl(T):$l(String(T));case Po.RESOURCE_URL:if(ju(T,"ResourceURL"))return zl(T);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${n} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(n){return function(r){return new My(r)}(n)}bypassSecurityTrustStyle(n){return function(r){return new Vg(r)}(n)}bypassSecurityTrustScript(n){return function(r){return new vl(r)}(n)}bypassSecurityTrustUrl(n){return function(r){return new ky(r)}(n)}bypassSecurityTrustResourceUrl(n){return function(r){return new Ug(r)}(n)}}return r.\u0275fac=function(n){return new(n||r)(yi(Tl))},r.\u0275prov=Dn({factory:function(){return function(r){return new Gx(r.get(Tl))}(yi(Vd))},token:r,providedIn:"root"}),r})();const pP=W3(nD,"browser",[{provide:dp,useValue:U5},{provide:F3,useValue:function(){Nx.makeCurrent(),zx.init()},multi:!0},{provide:Tl,useFactory:function(){return function(r){ls=r}(document),document},deps:[]}]),gP=[[],{provide:k0,useValue:"root"},{provide:Dc,useFactory:function(){return new Dc},deps:[]},{provide:lg,useClass:JI,multi:!0,deps:[Tl,Hs,dp]},{provide:lg,useClass:oP,multi:!0,deps:[Tl]},[],{provide:Ux,useClass:Ux,deps:[ug,cg,Q0]},{provide:Hm,useExisting:Ux},{provide:$5,useExisting:cg},{provide:cg,useClass:cg,deps:[Tl]},{provide:rx,useClass:rx,deps:[Hs]},{provide:ug,useClass:ug,deps:[lg,Hs]},{provide:W5,useClass:OI,deps:[]},[]];let iT=(()=>{class r{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:r,providers:[{provide:Q0,useValue:n.appId},{provide:Y5,useExisting:Q0},LI]}}}return r.\u0275fac=function(n){return new(n||r)(yi(r,12))},r.\u0275mod=Er({type:r}),r.\u0275inj=rn({providers:gP,imports:[ad,uD]}),r})();function Ca(...r){let t=r[r.length-1];return I(t)?(r.pop(),te(r,t)):Pe(r)}"undefined"!=typeof window&&window;class xc extends N{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const n=super._subscribe(t);return n&&!n.closed&&t.next(this._value),n}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new E;return this._value}next(t){super.next(this._value=t)}}class TP extends d{notifyNext(t,n,T,R,Q){this.destination.next(n)}notifyError(t,n){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class MP extends d{constructor(t,n,T){super(),this.parent=t,this.outerValue=n,this.outerIndex=T,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function kP(r,t,n,T,R=new MP(r,n,T)){if(!R.closed)return t instanceof A?t.subscribe(R):W(t)(R)}const oT={};class CP{constructor(t){this.resultSelector=t}call(t,n){return n.subscribe(new EP(t,this.resultSelector))}}class EP extends TP{constructor(t,n){super(t),this.resultSelector=n,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(oT),this.observables.push(t)}_complete(){const t=this.observables,n=t.length;if(0===n)this.destination.complete();else{this.active=n,this.toRespond=n;for(let T=0;T<n;T++)this.add(kP(this,t[T],void 0,T))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,n,T){const R=this.values,he=this.toRespond?R[T]===oT?--this.toRespond:this.toRespond:0;R[T]=n,0===he&&(this.resultSelector?this._tryResultSelector(R):this.destination.next(R.slice()))}_tryResultSelector(t){let n;try{n=this.resultSelector.apply(this,t)}catch(T){return void this.destination.error(T)}this.destination.next(n)}}const Dv=(()=>{function r(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return r.prototype=Object.create(Error.prototype),r})();function Yx(...r){return Oe(1)(Ca(...r))}const yp=new A(r=>r.complete());function Iv(r){return r?function(r){return new A(t=>r.schedule(()=>t.complete()))}(r):yp}function sT(r){return new A(t=>{let n;try{n=r()}catch(R){return void t.error(R)}return(n?de(n):Iv()).subscribe(t)})}function Du(r,t){return"function"==typeof t?n=>n.pipe(Du((T,R)=>de(r(T,R)).pipe(P((Q,he)=>t(T,Q,R,he))))):n=>n.lift(new IP(r))}class IP{constructor(t){this.project=t}call(t,n){return n.subscribe(new PP(t,this.project))}}class PP extends we{constructor(t,n){super(t),this.project=n,this.index=0}_next(t){let n;const T=this.index++;try{n=this.project(t,T)}catch(R){return void this.destination.error(R)}this._innerSub(n)}_innerSub(t){const n=this.innerSubscription;n&&n.unsubscribe();const T=new _e(this),R=this.destination;R.add(T),this.innerSubscription=Le(t,T),this.innerSubscription!==T&&R.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;(!t||t.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const lT=(()=>{function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return r.prototype=Object.create(Error.prototype),r})();function fg(r){return t=>0===r?Iv():t.lift(new LP(r))}class LP{constructor(t){if(this.total=t,this.total<0)throw new lT}call(t,n){return n.subscribe(new OP(t,this.total))}}class OP extends d{constructor(t,n){super(t),this.total=n,this.count=0}_next(t){const n=this.total,T=++this.count;T<=n&&(this.destination.next(t),T===n&&(this.destination.complete(),this.unsubscribe()))}}function Pv(r,t){let n=!1;return arguments.length>=2&&(n=!0),function(R){return R.lift(new FP(r,t,n))}}class FP{constructor(t,n,T=!1){this.accumulator=t,this.seed=n,this.hasSeed=T}call(t,n){return n.subscribe(new NP(t,this.accumulator,this.seed,this.hasSeed))}}class NP extends d{constructor(t,n,T,R){super(t),this.accumulator=n,this._seed=T,this.hasSeed=R,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const n=this.index++;let T;try{T=this.accumulator(this.seed,t,n)}catch(R){this.destination.error(R)}this.seed=T,this.destination.next(T)}}function bc(r,t){return function(T){return T.lift(new zP(r,t))}}class zP{constructor(t,n){this.predicate=t,this.thisArg=n}call(t,n){return n.subscribe(new BP(t,this.predicate,this.thisArg))}}class BP extends d{constructor(t,n,T){super(t),this.predicate=n,this.thisArg=T,this.count=0}_next(t){let n;try{n=this.predicate.call(this.thisArg,t,this.count++)}catch(T){return void this.destination.error(T)}n&&this.destination.next(t)}}function sd(r){return function(n){const T=new jP(r),R=n.lift(T);return T.caught=R}}class jP{constructor(t){this.selector=t}call(t,n){return n.subscribe(new VP(t,this.selector,this.caught))}}class VP extends we{constructor(t,n,T){super(t),this.selector=n,this.caught=T}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(Q){return void super.error(Q)}this._unsubscribeAndRecycle();const T=new _e(this);this.add(T);const R=Le(n,T);R!==T&&this.add(R)}}}function xp(r,t){return Ie(r,t,1)}function hg(r){return function(n){return 0===r?Iv():n.lift(new UP(r))}}class UP{constructor(t){if(this.total=t,this.total<0)throw new lT}call(t,n){return n.subscribe(new HP(t,this.total))}}class HP extends d{constructor(t,n){super(t),this.total=n,this.ring=new Array,this.count=0}_next(t){const n=this.ring,T=this.total,R=this.count++;n.length<T?n.push(t):n[R%T]=t}_complete(){const t=this.destination;let n=this.count;if(n>0){const T=this.count>=this.total?this.total:this.count,R=this.ring;for(let Q=0;Q<T;Q++){const he=n++%T;t.next(R[he])}}t.complete()}}function uT(r=WP){return t=>t.lift(new qP(r))}class qP{constructor(t){this.errorFactory=t}call(t,n){return n.subscribe(new GP(t,this.errorFactory))}}class GP extends d{constructor(t,n){super(t),this.errorFactory=n,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(n){t=n}this.destination.error(t)}}}function WP(){return new Dv}function Zx(r=null){return t=>t.lift(new YP(r))}class YP{constructor(t){this.defaultValue=t}call(t,n){return n.subscribe(new ZP(t,this.defaultValue))}}class ZP extends d{constructor(t,n){super(t),this.defaultValue=n,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function pf(r,t){const n=arguments.length>=2;return T=>T.pipe(r?bc((R,Q)=>r(R,Q,T)):u,fg(1),n?Zx(t):uT(()=>new Dv))}function hh(){}function ao(r,t,n){return function(R){return R.lift(new XP(r,t,n))}}class XP{constructor(t,n,T){this.nextOrObserver=t,this.error=n,this.complete=T}call(t,n){return n.subscribe(new JP(t,this.nextOrObserver,this.error,this.complete))}}class JP extends d{constructor(t,n,T,R){super(t),this._tapNext=hh,this._tapError=hh,this._tapComplete=hh,this._tapError=T||hh,this._tapComplete=R||hh,se(n)?(this._context=this,this._tapNext=n):n&&(this._context=n,this._tapNext=n.next||hh,this._tapError=n.error||hh,this._tapComplete=n.complete||hh)}_next(t){try{this._tapNext.call(this._context,t)}catch(n){return void this.destination.error(n)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(n){return void this.destination.error(n)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class QP{constructor(t){this.callback=t}call(t,n){return n.subscribe(new eL(t,this.callback))}}class eL extends d{constructor(t,n){super(t),this.add(new i(n))}}class gf{constructor(t,n){this.id=t,this.url=n}}class $x extends gf{constructor(t,n,T="imperative",R=null){super(t,n),this.navigationTrigger=T,this.restoredState=R}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class bp extends gf{constructor(t,n,T){super(t,n),this.urlAfterRedirects=T}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class cT extends gf{constructor(t,n,T){super(t,n),this.reason=T}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class tL extends gf{constructor(t,n,T){super(t,n),this.error=T}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class nL extends gf{constructor(t,n,T,R){super(t,n),this.urlAfterRedirects=T,this.state=R}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rL extends gf{constructor(t,n,T,R){super(t,n),this.urlAfterRedirects=T,this.state=R}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class iL extends gf{constructor(t,n,T,R,Q){super(t,n),this.urlAfterRedirects=T,this.state=R,this.shouldActivate=Q}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class aL extends gf{constructor(t,n,T,R){super(t,n),this.urlAfterRedirects=T,this.state=R}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class oL extends gf{constructor(t,n,T,R){super(t,n),this.urlAfterRedirects=T,this.state=R}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fT{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class hT{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class sL{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lL{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uL{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cL{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class dT{constructor(t,n,T){this.routerEvent=t,this.position=n,this.anchor=T}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const oo="primary";class fL{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){const n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function _p(r){return new fL(r)}const pT="ngNavigationCancelingError";function Xx(r){const t=Error("NavigationCancelingError: "+r);return t[pT]=!0,t}function dL(r,t,n){const T=n.path.split("/");if(T.length>r.length||"full"===n.pathMatch&&(t.hasChildren()||T.length<r.length))return null;const R={};for(let Q=0;Q<T.length;Q++){const he=T[Q],xe=r[Q];if(he.startsWith(":"))R[he.substring(1)]=xe;else if(he!==xe.path)return null}return{consumed:r.slice(0,T.length),posParams:R}}function Uc(r,t){const n=r?Object.keys(r):void 0,T=t?Object.keys(t):void 0;if(!n||!T||n.length!=T.length)return!1;let R;for(let Q=0;Q<n.length;Q++)if(R=n[Q],!gT(r[R],t[R]))return!1;return!0}function gT(r,t){if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;const n=[...r].sort(),T=[...t].sort();return n.every((R,Q)=>T[Q]===R)}return r===t}function mT(r){return Array.prototype.concat.apply([],r)}function vT(r){return r.length>0?r[r.length-1]:null}function Dl(r,t){for(const n in r)r.hasOwnProperty(n)&&t(r[n],n)}function Hc(r){return Lm(r)?r:D0(r)?de(Promise.resolve(r)):Ca(r)}const mL={exact:function bT(r,t,n){if(!ud(r.segments,t.segments)||!Lv(r.segments,t.segments,n)||r.numberOfChildren!==t.numberOfChildren)return!1;for(const T in t.children)if(!r.children[T]||!bT(r.children[T],t.children[T],n))return!1;return!0},subset:_T},yT={exact:function(r,t){return Uc(r,t)},subset:function(r,t){return Object.keys(t).length<=Object.keys(r).length&&Object.keys(t).every(n=>gT(r[n],t[n]))},ignored:()=>!0};function xT(r,t,n){return mL[n.paths](r.root,t.root,n.matrixParams)&&yT[n.queryParams](r.queryParams,t.queryParams)&&!("exact"===n.fragment&&r.fragment!==t.fragment)}function _T(r,t,n){return wT(r,t,t.segments,n)}function wT(r,t,n,T){if(r.segments.length>n.length){const R=r.segments.slice(0,n.length);return!(!ud(R,n)||t.hasChildren()||!Lv(R,n,T))}if(r.segments.length===n.length){if(!ud(r.segments,n)||!Lv(r.segments,n,T))return!1;for(const R in t.children)if(!r.children[R]||!_T(r.children[R],t.children[R],T))return!1;return!0}{const R=n.slice(0,r.segments.length),Q=n.slice(r.segments.length);return!!(ud(r.segments,R)&&Lv(r.segments,R,T)&&r.children[oo])&&wT(r.children[oo],t,Q,T)}}function Lv(r,t,n){return t.every((T,R)=>yT[n](r[R].parameters,T.parameters))}class ld{constructor(t,n,T){this.root=t,this.queryParams=n,this.fragment=T}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_p(this.queryParams)),this._queryParamMap}toString(){return _L.serialize(this)}}class vo{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Dl(n,(T,R)=>T.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ov(this)}}class dg{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=_p(this.parameters)),this._parameterMap}toString(){return AT(this)}}function ud(r,t){return r.length===t.length&&r.every((n,T)=>n.path===t[T].path)}class Jx{}class TT{parse(t){const n=new DL(t);return new ld(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){return`${`/${pg(t.root,!0)}`}${function(r){const t=Object.keys(r).map(n=>{const T=r[n];return Array.isArray(T)?T.map(R=>`${Rv(n)}=${Rv(R)}`).join("&"):`${Rv(n)}=${Rv(T)}`}).filter(n=>!!n);return t.length?`?${t.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${function(r){return encodeURI(r)}(t.fragment)}`:""}`}}const _L=new TT;function Ov(r){return r.segments.map(t=>AT(t)).join("/")}function pg(r,t){if(!r.hasChildren())return Ov(r);if(t){const n=r.children[oo]?pg(r.children[oo],!1):"",T=[];return Dl(r.children,(R,Q)=>{Q!==oo&&T.push(`${Q}:${pg(R,!1)}`)}),T.length>0?`${n}(${T.join("//")})`:n}{const n=function(r,t){let n=[];return Dl(r.children,(T,R)=>{R===oo&&(n=n.concat(t(T,R)))}),Dl(r.children,(T,R)=>{R!==oo&&(n=n.concat(t(T,R)))}),n}(r,(T,R)=>R===oo?[pg(r.children[oo],!1)]:[`${R}:${pg(T,!1)}`]);return 1===Object.keys(r.children).length&&null!=r.children[oo]?`${Ov(r)}/${n[0]}`:`${Ov(r)}/(${n.join("//")})`}}function MT(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rv(r){return MT(r).replace(/%3B/gi,";")}function Kx(r){return MT(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fv(r){return decodeURIComponent(r)}function kT(r){return Fv(r.replace(/\+/g,"%20"))}function AT(r){return`${Kx(r.path)}${function(r){return Object.keys(r).map(t=>`;${Kx(t)}=${Kx(r[t])}`).join("")}(r.parameters)}`}const kL=/^[^\/()?;=#]+/;function Nv(r){const t=r.match(kL);return t?t[0]:""}const AL=/^[^=?&#]+/,EL=/^[^?&#]+/;class DL{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new vo([],{}):new vo([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let T={};return this.peekStartsWith("(")&&(T=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(T[oo]=new vo(t,n)),T}parseSegment(){const t=Nv(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new dg(Fv(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const n=Nv(this.remaining);if(!n)return;this.capture(n);let T="";if(this.consumeOptional("=")){const R=Nv(this.remaining);R&&(T=R,this.capture(T))}t[Fv(n)]=Fv(T)}parseQueryParam(t){const n=function(r){const t=r.match(AL);return t?t[0]:""}(this.remaining);if(!n)return;this.capture(n);let T="";if(this.consumeOptional("=")){const he=function(r){const t=r.match(EL);return t?t[0]:""}(this.remaining);he&&(T=he,this.capture(T))}const R=kT(n),Q=kT(T);if(t.hasOwnProperty(R)){let he=t[R];Array.isArray(he)||(he=[he],t[R]=he),he.push(Q)}else t[R]=Q}parseParens(t){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const T=Nv(this.remaining),R=this.remaining[T.length];if("/"!==R&&")"!==R&&";"!==R)throw new Error(`Cannot parse url '${this.url}'`);let Q;T.indexOf(":")>-1?(Q=T.substr(0,T.indexOf(":")),this.capture(Q),this.capture(":")):t&&(Q=oo);const he=this.parseChildren();n[Q]=1===Object.keys(he).length?he[oo]:new vo([],he),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class CT{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){const n=Qx(t,this._root);return n?n.children.map(T=>T.value):[]}firstChild(t){const n=Qx(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){const n=eb(t,this._root);return n.length<2?[]:n[n.length-2].children.map(R=>R.value).filter(R=>R!==t)}pathFromRoot(t){return eb(t,this._root).map(n=>n.value)}}function Qx(r,t){if(r===t.value)return t;for(const n of t.children){const T=Qx(r,n);if(T)return T}return null}function eb(r,t){if(r===t.value)return[t];for(const n of t.children){const T=eb(r,n);if(T.length)return T.unshift(t),T}return[]}class mf{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}}function gg(r){const t={};return r&&r.children.forEach(n=>t[n.value.outlet]=n),t}class ET extends CT{constructor(t,n){super(t),this.snapshot=n,tb(this,t)}toString(){return this.snapshot.toString()}}function ST(r,t){const n=function(r,t){const he=new zv([],{},{},"",{},oo,t,null,r.root,-1,{});return new IT("",new mf(he,[]))}(r,t),T=new xc([new dg("",{})]),R=new xc({}),Q=new xc({}),he=new xc({}),xe=new xc(""),ze=new vf(T,R,he,xe,Q,oo,t,n.root);return ze.snapshot=n.root,new ET(new mf(ze,[]),n)}class vf{constructor(t,n,T,R,Q,he,xe,ze){this.url=t,this.params=n,this.queryParams=T,this.fragment=R,this.data=Q,this.outlet=he,this.component=xe,this._futureSnapshot=ze}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(P(t=>_p(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(P(t=>_p(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function DT(r,t="emptyOnly"){const n=r.pathFromRoot;let T=0;if("always"!==t)for(T=n.length-1;T>=1;){const R=n[T],Q=n[T-1];if(R.routeConfig&&""===R.routeConfig.path)T--;else{if(Q.component)break;T--}}return function(r){return r.reduce((t,n)=>({params:Object.assign(Object.assign({},t.params),n.params),data:Object.assign(Object.assign({},t.data),n.data),resolve:Object.assign(Object.assign({},t.resolve),n._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(T))}class zv{constructor(t,n,T,R,Q,he,xe,ze,Je,yt,Ht){this.url=t,this.params=n,this.queryParams=T,this.fragment=R,this.data=Q,this.outlet=he,this.component=xe,this.routeConfig=ze,this._urlSegment=Je,this._lastPathIndex=yt,this._resolve=Ht}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=_p(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=_p(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(T=>T.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class IT extends CT{constructor(t,n){super(n),this.url=t,tb(this,n)}toString(){return PT(this._root)}}function tb(r,t){t.value._routerState=r,t.children.forEach(n=>tb(r,n))}function PT(r){const t=r.children.length>0?` { ${r.children.map(PT).join(", ")} } `:"";return`${r.value}${t}`}function nb(r){if(r.snapshot){const t=r.snapshot,n=r._futureSnapshot;r.snapshot=n,Uc(t.queryParams,n.queryParams)||r.queryParams.next(n.queryParams),t.fragment!==n.fragment&&r.fragment.next(n.fragment),Uc(t.params,n.params)||r.params.next(n.params),function(r,t){if(r.length!==t.length)return!1;for(let n=0;n<r.length;++n)if(!Uc(r[n],t[n]))return!1;return!0}(t.url,n.url)||r.url.next(n.url),Uc(t.data,n.data)||r.data.next(n.data)}else r.snapshot=r._futureSnapshot,r.data.next(r._futureSnapshot.data)}function rb(r,t){return Uc(r.params,t.params)&&function(r,t){return ud(r,t)&&r.every((n,T)=>Uc(n.parameters,t[T].parameters))}(r.url,t.url)&&!(!r.parent!=!t.parent)&&(!r.parent||rb(r.parent,t.parent))}function Bv(r,t,n){if(n&&r.shouldReuseRoute(t.value,n.value.snapshot)){const T=n.value;T._futureSnapshot=t.value;const R=function(r,t,n){return t.children.map(T=>{for(const R of n.children)if(r.shouldReuseRoute(T.value,R.value.snapshot))return Bv(r,T,R);return Bv(r,T)})}(r,t,n);return new mf(T,R)}{if(r.shouldAttach(t.value)){const Q=r.retrieve(t.value);if(null!==Q){const he=Q.route;return LT(t,he),he}}const T=function(r){return new vf(new xc(r.url),new xc(r.params),new xc(r.queryParams),new xc(r.fragment),new xc(r.data),r.outlet,r.component,r)}(t.value),R=t.children.map(Q=>Bv(r,Q));return new mf(T,R)}}function LT(r,t){if(r.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(r.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=r.value;for(let n=0;n<r.children.length;++n)LT(r.children[n],t.children[n])}function jv(r){return"object"==typeof r&&null!=r&&!r.outlets&&!r.segmentPath}function mg(r){return"object"==typeof r&&null!=r&&r.outlets}function ib(r,t,n,T,R){let Q={};return T&&Dl(T,(he,xe)=>{Q[xe]=Array.isArray(he)?he.map(ze=>`${ze}`):`${he}`}),new ld(n.root===r?t:OT(n.root,r,t),Q,R)}function OT(r,t,n){const T={};return Dl(r.children,(R,Q)=>{T[Q]=R===t?n:OT(R,t,n)}),new vo(r.segments,T)}class RT{constructor(t,n,T){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=T,t&&T.length>0&&jv(T[0]))throw new Error("Root segment cannot have matrix parameters");const R=T.find(mg);if(R&&R!==vT(T))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ab{constructor(t,n,T){this.segmentGroup=t,this.processChildren=n,this.index=T}}function FT(r,t,n){if(r||(r=new vo([],{})),0===r.segments.length&&r.hasChildren())return Vv(r,t,n);const T=function(r,t,n){let T=0,R=t;const Q={match:!1,pathIndex:0,commandIndex:0};for(;R<r.segments.length;){if(T>=n.length)return Q;const he=r.segments[R],xe=n[T];if(mg(xe))break;const ze=`${xe}`,Je=T<n.length-1?n[T+1]:null;if(R>0&&void 0===ze)break;if(ze&&Je&&"object"==typeof Je&&void 0===Je.outlets){if(!zT(ze,Je,he))return Q;T+=2}else{if(!zT(ze,{},he))return Q;T++}R++}return{match:!0,pathIndex:R,commandIndex:T}}(r,t,n),R=n.slice(T.commandIndex);if(T.match&&T.pathIndex<r.segments.length){const Q=new vo(r.segments.slice(0,T.pathIndex),{});return Q.children[oo]=new vo(r.segments.slice(T.pathIndex),r.children),Vv(Q,0,R)}return T.match&&0===R.length?new vo(r.segments,{}):T.match&&!r.hasChildren()?ob(r,t,n):T.match?Vv(r,0,R):ob(r,t,n)}function Vv(r,t,n){if(0===n.length)return new vo(r.segments,{});{const T=function(r){return mg(r[0])?r[0].outlets:{[oo]:r}}(n),R={};return Dl(T,(Q,he)=>{"string"==typeof Q&&(Q=[Q]),null!==Q&&(R[he]=FT(r.children[he],t,Q))}),Dl(r.children,(Q,he)=>{void 0===T[he]&&(R[he]=Q)}),new vo(r.segments,R)}}function ob(r,t,n){const T=r.segments.slice(0,t);let R=0;for(;R<n.length;){const Q=n[R];if(mg(Q)){const ze=UL(Q.outlets);return new vo(T,ze)}if(0===R&&jv(n[0])){T.push(new dg(r.segments[t].path,NT(n[0]))),R++;continue}const he=mg(Q)?Q.outlets[oo]:`${Q}`,xe=R<n.length-1?n[R+1]:null;he&&xe&&jv(xe)?(T.push(new dg(he,NT(xe))),R+=2):(T.push(new dg(he,{})),R++)}return new vo(T,{})}function UL(r){const t={};return Dl(r,(n,T)=>{"string"==typeof n&&(n=[n]),null!==n&&(t[T]=ob(new vo([],{}),0,n))}),t}function NT(r){const t={};return Dl(r,(n,T)=>t[T]=`${n}`),t}function zT(r,t,n){return r==n.path&&Uc(t,n.parameters)}class qL{constructor(t,n,T,R){this.routeReuseStrategy=t,this.futureState=n,this.currState=T,this.forwardEvent=R}activate(t){const n=this.futureState._root,T=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,T,t),nb(this.futureState.root),this.activateChildRoutes(n,T,t)}deactivateChildRoutes(t,n,T){const R=gg(n);t.children.forEach(Q=>{const he=Q.value.outlet;this.deactivateRoutes(Q,R[he],T),delete R[he]}),Dl(R,(Q,he)=>{this.deactivateRouteAndItsChildren(Q,T)})}deactivateRoutes(t,n,T){const R=t.value,Q=n?n.value:null;if(R===Q)if(R.component){const he=T.getContext(R.outlet);he&&this.deactivateChildRoutes(t,n,he.children)}else this.deactivateChildRoutes(t,n,T);else Q&&this.deactivateRouteAndItsChildren(n,T)}deactivateRouteAndItsChildren(t,n){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){const T=n.getContext(t.value.outlet);if(T&&T.outlet){const R=T.outlet.detach(),Q=T.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:R,route:t,contexts:Q})}}deactivateRouteAndOutlet(t,n){const T=n.getContext(t.value.outlet),R=T&&t.value.component?T.children:n,Q=gg(t);for(const he of Object.keys(Q))this.deactivateRouteAndItsChildren(Q[he],R);T&&T.outlet&&(T.outlet.deactivate(),T.children.onOutletDeactivated(),T.attachRef=null,T.resolver=null,T.route=null)}activateChildRoutes(t,n,T){const R=gg(n);t.children.forEach(Q=>{this.activateRoutes(Q,R[Q.value.outlet],T),this.forwardEvent(new cL(Q.value.snapshot))}),t.children.length&&this.forwardEvent(new lL(t.value.snapshot))}activateRoutes(t,n,T){const R=t.value,Q=n?n.value:null;if(nb(R),R===Q)if(R.component){const he=T.getOrCreateContext(R.outlet);this.activateChildRoutes(t,n,he.children)}else this.activateChildRoutes(t,n,T);else if(R.component){const he=T.getOrCreateContext(R.outlet);if(this.routeReuseStrategy.shouldAttach(R.snapshot)){const xe=this.routeReuseStrategy.retrieve(R.snapshot);this.routeReuseStrategy.store(R.snapshot,null),he.children.onOutletReAttached(xe.contexts),he.attachRef=xe.componentRef,he.route=xe.route.value,he.outlet&&he.outlet.attach(xe.componentRef,xe.route.value),BT(xe.route)}else{const xe=function(r){for(let t=r.parent;t;t=t.parent){const n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(R.snapshot),ze=xe?xe.module.componentFactoryResolver:null;he.attachRef=null,he.route=R,he.resolver=ze,he.outlet&&he.outlet.activateWith(R,ze),this.activateChildRoutes(t,null,he.children)}}else this.activateChildRoutes(t,null,T)}}function BT(r){nb(r.value),r.children.forEach(BT)}class sb{constructor(t,n){this.routes=t,this.module=n}}function dh(r){return"function"==typeof r}function cd(r){return r instanceof ld}const vg=Symbol("INITIAL_VALUE");function yg(){return Du(r=>function(...r){let t,n;return I(r[r.length-1])&&(n=r.pop()),"function"==typeof r[r.length-1]&&(t=r.pop()),1===r.length&&e(r[0])&&(r=r[0]),Pe(r,n).lift(new CP(t))}(r.map(t=>t.pipe(fg(1),function(...r){const t=r[r.length-1];return I(t)?(r.pop(),n=>Yx(r,n,t)):n=>Yx(r,n)}(vg)))).pipe(Pv((t,n)=>{let T=!1;return n.reduce((R,Q,he)=>R!==vg?R:(Q===vg&&(T=!0),T||!1!==Q&&he!==n.length-1&&!cd(Q)?R:Q),t)},vg),bc(t=>t!==vg),P(t=>cd(t)?t:!0===t),fg(1)))}let jT=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=nr({type:r,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,T){1&n&&sa(0,"router-outlet")},directives:function(){return[pb]},encapsulation:2}),r})();function VT(r,t=""){for(let n=0;n<r.length;n++){const T=r[n];JL(T,KL(t,T))}}function JL(r,t){r.children&&VT(r.children,t)}function KL(r,t){return t?r||t.path?r&&!t.path?`${r}/`:!r&&t.path?t.path:`${r}/${t.path}`:"":r}function lb(r){const t=r.children&&r.children.map(lb),n=t?Object.assign(Object.assign({},r),{children:t}):Object.assign({},r);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==oo&&(n.component=jT),n}function Ku(r){return r.outlet||oo}function UT(r,t){const n=r.filter(T=>Ku(T)===t);return n.push(...r.filter(T=>Ku(T)!==t)),n}const HT={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Uv(r,t,n){var T;if(""===t.path)return"full"===t.pathMatch&&(r.hasChildren()||n.length>0)?Object.assign({},HT):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const Q=(t.matcher||dL)(n,r,t);if(!Q)return Object.assign({},HT);const he={};Dl(Q.posParams,(ze,Je)=>{he[Je]=ze.path});const xe=Q.consumed.length>0?Object.assign(Object.assign({},he),Q.consumed[Q.consumed.length-1].parameters):he;return{matched:!0,consumedSegments:Q.consumed,lastChild:Q.consumed.length,parameters:xe,positionalParamSegments:null!==(T=Q.posParams)&&void 0!==T?T:{}}}function Hv(r,t,n,T,R="corrected"){if(n.length>0&&function(r,t,n){return n.some(T=>qv(r,t,T)&&Ku(T)!==oo)}(r,n,T)){const he=new vo(t,function(r,t,n,T){const R={};R[oo]=T,T._sourceSegment=r,T._segmentIndexShift=t.length;for(const Q of n)if(""===Q.path&&Ku(Q)!==oo){const he=new vo([],{});he._sourceSegment=r,he._segmentIndexShift=t.length,R[Ku(Q)]=he}return R}(r,t,T,new vo(n,r.children)));return he._sourceSegment=r,he._segmentIndexShift=t.length,{segmentGroup:he,slicedSegments:[]}}if(0===n.length&&function(r,t,n){return n.some(T=>qv(r,t,T))}(r,n,T)){const he=new vo(r.segments,function(r,t,n,T,R,Q){const he={};for(const xe of T)if(qv(r,n,xe)&&!R[Ku(xe)]){const ze=new vo([],{});ze._sourceSegment=r,ze._segmentIndexShift="legacy"===Q?r.segments.length:t.length,he[Ku(xe)]=ze}return Object.assign(Object.assign({},R),he)}(r,t,n,T,r.children,R));return he._sourceSegment=r,he._segmentIndexShift=t.length,{segmentGroup:he,slicedSegments:n}}const Q=new vo(r.segments,r.children);return Q._sourceSegment=r,Q._segmentIndexShift=t.length,{segmentGroup:Q,slicedSegments:n}}function qv(r,t,n){return(!(r.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function qT(r,t,n,T){return!!(Ku(r)===T||T!==oo&&qv(t,n,r))&&("**"===r.path||Uv(t,r,n).matched)}function GT(r,t,n){return 0===t.length&&!r.children[n]}class xg{constructor(t){this.segmentGroup=t||null}}class WT{constructor(t){this.urlTree=t}}function Gv(r){return new A(t=>t.error(new xg(r)))}function YT(r){return new A(t=>t.error(new WT(r)))}function rO(r){return new A(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${r}'`)))}class oO{constructor(t,n,T,R,Q){this.configLoader=n,this.urlSerializer=T,this.urlTree=R,this.config=Q,this.allowRedirects=!0,this.ngModule=t.get(jc)}apply(){const t=Hv(this.urlTree.root,[],[],this.config).segmentGroup,n=new vo(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,n,oo).pipe(P(Q=>this.createUrlTree(ub(Q),this.urlTree.queryParams,this.urlTree.fragment))).pipe(sd(Q=>{if(Q instanceof WT)return this.allowRedirects=!1,this.match(Q.urlTree);throw Q instanceof xg?this.noMatchError(Q):Q}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,oo).pipe(P(R=>this.createUrlTree(ub(R),t.queryParams,t.fragment))).pipe(sd(R=>{throw R instanceof xg?this.noMatchError(R):R}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,n,T){const R=t.segments.length>0?new vo([],{[oo]:t}):t;return new ld(R,n,T)}expandSegmentGroup(t,n,T,R){return 0===T.segments.length&&T.hasChildren()?this.expandChildren(t,n,T).pipe(P(Q=>new vo([],Q))):this.expandSegment(t,T,n,T.segments,R,!0)}expandChildren(t,n,T){const R=[];for(const Q of Object.keys(T.children))"primary"===Q?R.unshift(Q):R.push(Q);return de(R).pipe(xp(Q=>{const he=T.children[Q],xe=UT(n,Q);return this.expandSegmentGroup(t,xe,he,Q).pipe(P(ze=>({segment:ze,outlet:Q})))}),Pv((Q,he)=>(Q[he.outlet]=he.segment,Q),{}),function(r,t){const n=arguments.length>=2;return T=>T.pipe(r?bc((R,Q)=>r(R,Q,T)):u,hg(1),n?Zx(t):uT(()=>new Dv))}())}expandSegment(t,n,T,R,Q,he){return de(T).pipe(xp(xe=>this.expandSegmentAgainstRoute(t,n,T,xe,R,Q,he).pipe(sd(Je=>{if(Je instanceof xg)return Ca(null);throw Je}))),pf(xe=>!!xe),sd((xe,ze)=>{if(xe instanceof Dv||"EmptyError"===xe.name){if(GT(n,R,Q))return Ca(new vo([],{}));throw new xg(n)}throw xe}))}expandSegmentAgainstRoute(t,n,T,R,Q,he,xe){return qT(R,n,Q,he)?void 0===R.redirectTo?this.matchSegmentAgainstRoute(t,n,R,Q,he):xe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,n,T,R,Q,he):Gv(n):Gv(n)}expandSegmentAgainstRouteUsingRedirect(t,n,T,R,Q,he){return"**"===R.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,T,R,he):this.expandRegularSegmentAgainstRouteUsingRedirect(t,n,T,R,Q,he)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,T,R){const Q=this.applyRedirectCommands([],T.redirectTo,{});return T.redirectTo.startsWith("/")?YT(Q):this.lineralizeSegments(T,Q).pipe(Ie(he=>{const xe=new vo(he,{});return this.expandSegment(t,xe,n,he,R,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,n,T,R,Q,he){const{matched:xe,consumedSegments:ze,lastChild:Je,positionalParamSegments:yt}=Uv(n,R,Q);if(!xe)return Gv(n);const Ht=this.applyRedirectCommands(ze,R.redirectTo,yt);return R.redirectTo.startsWith("/")?YT(Ht):this.lineralizeSegments(R,Ht).pipe(Ie(an=>this.expandSegment(t,n,T,an.concat(Q.slice(Je)),he,!1)))}matchSegmentAgainstRoute(t,n,T,R,Q){if("**"===T.path)return T.loadChildren?(T._loadedConfig?Ca(T._loadedConfig):this.configLoader.load(t.injector,T)).pipe(P(an=>(T._loadedConfig=an,new vo(R,{})))):Ca(new vo(R,{}));const{matched:he,consumedSegments:xe,lastChild:ze}=Uv(n,T,R);if(!he)return Gv(n);const Je=R.slice(ze);return this.getChildConfig(t,T,R).pipe(Ie(Ht=>{const an=Ht.module,mn=Ht.routes,{segmentGroup:Bn,slicedSegments:vr}=Hv(n,xe,Je,mn),ar=new vo(Bn.segments,Bn.children);if(0===vr.length&&ar.hasChildren())return this.expandChildren(an,mn,ar).pipe(P(ua=>new vo(xe,ua)));if(0===mn.length&&0===vr.length)return Ca(new vo(xe,{}));const ni=Ku(T)===Q;return this.expandSegment(an,ar,mn,vr,ni?oo:Q,!0).pipe(P(qi=>new vo(xe.concat(qi.segments),qi.children)))}))}getChildConfig(t,n,T){return n.children?Ca(new sb(n.children,t)):n.loadChildren?void 0!==n._loadedConfig?Ca(n._loadedConfig):this.runCanLoadGuards(t.injector,n,T).pipe(Ie(R=>R?this.configLoader.load(t.injector,n).pipe(P(Q=>(n._loadedConfig=Q,Q))):function(r){return new A(t=>t.error(Xx(`Cannot load children because the guard of the route "path: '${r.path}'" returned false`)))}(n))):Ca(new sb([],t))}runCanLoadGuards(t,n,T){const R=n.canLoad;return R&&0!==R.length?Ca(R.map(he=>{const xe=t.get(he);let ze;if(function(r){return r&&dh(r.canLoad)}(xe))ze=xe.canLoad(n,T);else{if(!dh(xe))throw new Error("Invalid CanLoad guard");ze=xe(n,T)}return Hc(ze)})).pipe(yg(),ao(he=>{if(!cd(he))return;const xe=Xx(`Redirecting to "${this.urlSerializer.serialize(he)}"`);throw xe.url=he,xe}),P(he=>!0===he)):Ca(!0)}lineralizeSegments(t,n){let T=[],R=n.root;for(;;){if(T=T.concat(R.segments),0===R.numberOfChildren)return Ca(T);if(R.numberOfChildren>1||!R.children[oo])return rO(t.redirectTo);R=R.children[oo]}}applyRedirectCommands(t,n,T){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),t,T)}applyRedirectCreatreUrlTree(t,n,T,R){const Q=this.createSegmentGroup(t,n.root,T,R);return new ld(Q,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){const T={};return Dl(t,(R,Q)=>{if("string"==typeof R&&R.startsWith(":")){const xe=R.substring(1);T[Q]=n[xe]}else T[Q]=R}),T}createSegmentGroup(t,n,T,R){const Q=this.createSegments(t,n.segments,T,R);let he={};return Dl(n.children,(xe,ze)=>{he[ze]=this.createSegmentGroup(t,xe,T,R)}),new vo(Q,he)}createSegments(t,n,T,R){return n.map(Q=>Q.path.startsWith(":")?this.findPosParam(t,Q,R):this.findOrReturn(Q,T))}findPosParam(t,n,T){const R=T[n.path.substring(1)];if(!R)throw new Error(`Cannot redirect to '${t}'. Cannot find '${n.path}'.`);return R}findOrReturn(t,n){let T=0;for(const R of n){if(R.path===t.path)return n.splice(T),R;T++}return t}}function ub(r){const t={};for(const T of Object.keys(r.children)){const Q=ub(r.children[T]);(Q.segments.length>0||Q.hasChildren())&&(t[T]=Q)}return function(r){if(1===r.numberOfChildren&&r.children[oo]){const t=r.children[oo];return new vo(r.segments.concat(t.segments),t.children)}return r}(new vo(r.segments,t))}class ZT{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Wv{constructor(t,n){this.component=t,this.route=n}}function uO(r,t,n){const T=r._root;return bg(T,t?t._root:null,n,[T.value])}function Yv(r,t,n){const T=function(r){if(!r)return null;for(let t=r.parent;t;t=t.parent){const n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(T?T.module.injector:n).get(r)}function bg(r,t,n,T,R={canDeactivateChecks:[],canActivateChecks:[]}){const Q=gg(t);return r.children.forEach(he=>{(function(r,t,n,T,R={canDeactivateChecks:[],canActivateChecks:[]}){const Q=r.value,he=t?t.value:null,xe=n?n.getContext(r.value.outlet):null;if(he&&Q.routeConfig===he.routeConfig){const ze=function(r,t,n){if("function"==typeof n)return n(r,t);switch(n){case"pathParamsChange":return!ud(r.url,t.url);case"pathParamsOrQueryParamsChange":return!ud(r.url,t.url)||!Uc(r.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!rb(r,t)||!Uc(r.queryParams,t.queryParams);case"paramsChange":default:return!rb(r,t)}}(he,Q,Q.routeConfig.runGuardsAndResolvers);ze?R.canActivateChecks.push(new ZT(T)):(Q.data=he.data,Q._resolvedData=he._resolvedData),bg(r,t,Q.component?xe?xe.children:null:n,T,R),ze&&xe&&xe.outlet&&xe.outlet.isActivated&&R.canDeactivateChecks.push(new Wv(xe.outlet.component,he))}else he&&_g(t,xe,R),R.canActivateChecks.push(new ZT(T)),bg(r,null,Q.component?xe?xe.children:null:n,T,R)})(he,Q[he.value.outlet],n,T.concat([he.value]),R),delete Q[he.value.outlet]}),Dl(Q,(he,xe)=>_g(he,n.getContext(xe),R)),R}function _g(r,t,n){const T=gg(r),R=r.value;Dl(T,(Q,he)=>{_g(Q,R.component?t?t.children.getContext(he):null:t,n)}),n.canDeactivateChecks.push(new Wv(R.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,R))}class wO{}function $T(r){return new A(t=>t.error(r))}class MO{constructor(t,n,T,R,Q,he){this.rootComponentType=t,this.config=n,this.urlTree=T,this.url=R,this.paramsInheritanceStrategy=Q,this.relativeLinkResolution=he}recognize(){const t=Hv(this.urlTree.root,[],[],this.config.filter(he=>void 0===he.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,t,oo);if(null===n)return null;const T=new zv([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},oo,this.rootComponentType,null,this.urlTree.root,-1,{}),R=new mf(T,n),Q=new IT(this.url,R);return this.inheritParamsAndData(Q._root),Q}inheritParamsAndData(t){const n=t.value,T=DT(n,this.paramsInheritanceStrategy);n.params=Object.freeze(T.params),n.data=Object.freeze(T.data),t.children.forEach(R=>this.inheritParamsAndData(R))}processSegmentGroup(t,n,T){return 0===n.segments.length&&n.hasChildren()?this.processChildren(t,n):this.processSegment(t,n,n.segments,T)}processChildren(t,n){const T=[];for(const Q of Object.keys(n.children)){const he=n.children[Q],xe=UT(t,Q),ze=this.processSegmentGroup(xe,he,Q);if(null===ze)return null;T.push(...ze)}const R=XT(T);return function(r){r.sort((t,n)=>t.value.outlet===oo?-1:n.value.outlet===oo?1:t.value.outlet.localeCompare(n.value.outlet))}(R),R}processSegment(t,n,T,R){for(const Q of t){const he=this.processSegmentAgainstRoute(Q,n,T,R);if(null!==he)return he}return GT(n,T,R)?[]:null}processSegmentAgainstRoute(t,n,T,R){if(t.redirectTo||!qT(t,n,T,R))return null;let Q,he=[],xe=[];if("**"===t.path){const mn=T.length>0?vT(T).parameters:{};Q=new zv(T,mn,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,QT(t),Ku(t),t.component,t,JT(n),KT(n)+T.length,eM(t))}else{const mn=Uv(n,t,T);if(!mn.matched)return null;he=mn.consumedSegments,xe=T.slice(mn.lastChild),Q=new zv(he,mn.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,QT(t),Ku(t),t.component,t,JT(n),KT(n)+he.length,eM(t))}const ze=function(r){return r.children?r.children:r.loadChildren?r._loadedConfig.routes:[]}(t),{segmentGroup:Je,slicedSegments:yt}=Hv(n,he,xe,ze.filter(mn=>void 0===mn.redirectTo),this.relativeLinkResolution);if(0===yt.length&&Je.hasChildren()){const mn=this.processChildren(ze,Je);return null===mn?null:[new mf(Q,mn)]}if(0===ze.length&&0===yt.length)return[new mf(Q,[])];const Ht=Ku(t)===R,an=this.processSegment(ze,Je,yt,Ht?oo:R);return null===an?null:[new mf(Q,an)]}}function CO(r){const t=r.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function XT(r){const t=[],n=new Set;for(const T of r){if(!CO(T)){t.push(T);continue}const R=t.find(Q=>T.value.routeConfig===Q.value.routeConfig);void 0!==R?(R.children.push(...T.children),n.add(R)):t.push(T)}for(const T of n){const R=XT(T.children);t.push(new mf(T.value,R))}return t.filter(T=>!n.has(T))}function JT(r){let t=r;for(;t._sourceSegment;)t=t._sourceSegment;return t}function KT(r){let t=r,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function QT(r){return r.data||{}}function eM(r){return r.resolve||{}}function cb(r){return Du(t=>{const n=r(t);return n?de(n).pipe(P(()=>t)):Ca(t)})}class RO extends class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}}{}const fb=new ma("ROUTES");class tM{constructor(t,n,T,R){this.loader=t,this.compiler=n,this.onLoadStartListener=T,this.onLoadEndListener=R}load(t,n){if(n._loader$)return n._loader$;this.onLoadStartListener&&this.onLoadStartListener(n);const R=this.loadModuleFactory(n.loadChildren).pipe(P(Q=>{this.onLoadEndListener&&this.onLoadEndListener(n);const he=Q.create(t);return new sb(mT(he.injector.get(fb,void 0,sr.Self|sr.Optional)).map(lb),he)}),sd(Q=>{throw n._loader$=void 0,Q}));return n._loader$=new lt(R,()=>new N).pipe(Ue()),n._loader$}loadModuleFactory(t){return"string"==typeof t?de(this.loader.load(t)):Hc(t()).pipe(Ie(n=>n instanceof Lw?Ca(n):de(this.compiler.compileModuleAsync(n))))}}class FO{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new wp,this.attachRef=null}}class wp{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){const T=this.getOrCreateContext(t);T.outlet=n,this.contexts.set(t,T)}onChildOutletDestroyed(t){const n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new FO,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}}class zO{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}}function BO(r){throw r}function jO(r,t,n){return t.parse("/")}function nM(r,t){return Ca(null)}const VO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},UO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let qs=(()=>{class r{constructor(n,T,R,Q,he,xe,ze,Je){this.rootComponentType=n,this.urlSerializer=T,this.rootContexts=R,this.location=Q,this.config=Je,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new N,this.errorHandler=BO,this.malformedUriErrorHandler=jO,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:nM,afterPreactivation:nM},this.urlHandlingStrategy=new zO,this.routeReuseStrategy=new RO,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=he.get(jc),this.console=he.get(nv);const an=he.get(Hs);this.isNgZoneEnabled=an instanceof Hs&&Hs.isInAngularZone(),this.resetConfig(Je),this.currentUrlTree=new ld(new vo([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new tM(xe,ze,mn=>this.triggerEvent(new fT(mn)),mn=>this.triggerEvent(new hT(mn))),this.routerState=ST(this.currentUrlTree,this.rootComponentType),this.transitions=new xc({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var n;return null===(n=this.location.getState())||void 0===n?void 0:n.\u0275routerPageId}setupNavigations(n){const T=this.events;return n.pipe(bc(R=>0!==R.id),P(R=>Object.assign(Object.assign({},R),{extractedUrl:this.urlHandlingStrategy.extract(R.rawUrl)})),Du(R=>{let Q=!1,he=!1;return Ca(R).pipe(ao(xe=>{this.currentNavigation={id:xe.id,initialUrl:xe.currentRawUrl,extractedUrl:xe.extractedUrl,trigger:xe.source,extras:xe.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Du(xe=>{const ze=this.browserUrlTree.toString(),Je=!this.navigated||xe.extractedUrl.toString()!==ze||ze!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Je)&&this.urlHandlingStrategy.shouldProcessUrl(xe.rawUrl))return Zv(xe.source)&&(this.browserUrlTree=xe.extractedUrl),Ca(xe).pipe(Du(Ht=>{const an=this.transitions.getValue();return T.next(new $x(Ht.id,this.serializeUrl(Ht.extractedUrl),Ht.source,Ht.restoredState)),an!==this.transitions.getValue()?yp:Promise.resolve(Ht)}),function(r,t,n,T){return Du(R=>function(r,t,n,T,R){return new oO(r,t,n,T,R).apply()}(r,t,n,R.extractedUrl,T).pipe(P(Q=>Object.assign(Object.assign({},R),{urlAfterRedirects:Q}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),ao(Ht=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Ht.urlAfterRedirects})}),function(r,t,n,T,R){return Ie(Q=>function(r,t,n,T,R="emptyOnly",Q="legacy"){try{const he=new MO(r,t,n,T,R,Q).recognize();return null===he?$T(new wO):Ca(he)}catch(he){return $T(he)}}(r,t,Q.urlAfterRedirects,n(Q.urlAfterRedirects),T,R).pipe(P(he=>Object.assign(Object.assign({},Q),{targetSnapshot:he}))))}(this.rootComponentType,this.config,Ht=>this.serializeUrl(Ht),this.paramsInheritanceStrategy,this.relativeLinkResolution),ao(Ht=>{"eager"===this.urlUpdateStrategy&&(Ht.extras.skipLocationChange||this.setBrowserUrl(Ht.urlAfterRedirects,Ht),this.browserUrlTree=Ht.urlAfterRedirects);const an=new nL(Ht.id,this.serializeUrl(Ht.extractedUrl),this.serializeUrl(Ht.urlAfterRedirects),Ht.targetSnapshot);T.next(an)}));if(Je&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:an,extractedUrl:mn,source:Bn,restoredState:vr,extras:ar}=xe,ni=new $x(an,this.serializeUrl(mn),Bn,vr);T.next(ni);const Ur=ST(mn,this.rootComponentType).snapshot;return Ca(Object.assign(Object.assign({},xe),{targetSnapshot:Ur,urlAfterRedirects:mn,extras:Object.assign(Object.assign({},ar),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=xe.rawUrl,this.browserUrlTree=xe.urlAfterRedirects,xe.resolve(null),yp}),cb(xe=>{const{targetSnapshot:ze,id:Je,extractedUrl:yt,rawUrl:Ht,extras:{skipLocationChange:an,replaceUrl:mn}}=xe;return this.hooks.beforePreactivation(ze,{navigationId:Je,appliedUrlTree:yt,rawUrlTree:Ht,skipLocationChange:!!an,replaceUrl:!!mn})}),ao(xe=>{const ze=new rL(xe.id,this.serializeUrl(xe.extractedUrl),this.serializeUrl(xe.urlAfterRedirects),xe.targetSnapshot);this.triggerEvent(ze)}),P(xe=>Object.assign(Object.assign({},xe),{guards:uO(xe.targetSnapshot,xe.currentSnapshot,this.rootContexts)})),function(r,t){return Ie(n=>{const{targetSnapshot:T,currentSnapshot:R,guards:{canActivateChecks:Q,canDeactivateChecks:he}}=n;return 0===he.length&&0===Q.length?Ca(Object.assign(Object.assign({},n),{guardsResult:!0})):function(r,t,n,T){return de(r).pipe(Ie(R=>function(r,t,n,T,R){const Q=t&&t.routeConfig?t.routeConfig.canDeactivate:null;return Q&&0!==Q.length?Ca(Q.map(xe=>{const ze=Yv(xe,t,R);let Je;if(function(r){return r&&dh(r.canDeactivate)}(ze))Je=Hc(ze.canDeactivate(r,t,n,T));else{if(!dh(ze))throw new Error("Invalid CanDeactivate guard");Je=Hc(ze(r,t,n,T))}return Je.pipe(pf())})).pipe(yg()):Ca(!0)}(R.component,R.route,n,t,T)),pf(R=>!0!==R,!0))}(he,T,R,r).pipe(Ie(xe=>xe&&function(r){return"boolean"==typeof r}(xe)?function(r,t,n,T){return de(t).pipe(xp(R=>Yx(function(r,t){return null!==r&&t&&t(new sL(r)),Ca(!0)}(R.route.parent,T),function(r,t){return null!==r&&t&&t(new uL(r)),Ca(!0)}(R.route,T),function(r,t,n){const T=t[t.length-1],Q=t.slice(0,t.length-1).reverse().map(he=>function(r){const t=r.routeConfig?r.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:r,guards:t}:null}(he)).filter(he=>null!==he).map(he=>sT(()=>Ca(he.guards.map(ze=>{const Je=Yv(ze,he.node,n);let yt;if(function(r){return r&&dh(r.canActivateChild)}(Je))yt=Hc(Je.canActivateChild(T,r));else{if(!dh(Je))throw new Error("Invalid CanActivateChild guard");yt=Hc(Je(T,r))}return yt.pipe(pf())})).pipe(yg())));return Ca(Q).pipe(yg())}(r,R.path,n),function(r,t,n){const T=t.routeConfig?t.routeConfig.canActivate:null;return T&&0!==T.length?Ca(T.map(Q=>sT(()=>{const he=Yv(Q,t,n);let xe;if(function(r){return r&&dh(r.canActivate)}(he))xe=Hc(he.canActivate(t,r));else{if(!dh(he))throw new Error("Invalid CanActivate guard");xe=Hc(he(t,r))}return xe.pipe(pf())}))).pipe(yg()):Ca(!0)}(r,R.route,n))),pf(R=>!0!==R,!0))}(T,Q,r,t):Ca(xe)),P(xe=>Object.assign(Object.assign({},n),{guardsResult:xe})))})}(this.ngModule.injector,xe=>this.triggerEvent(xe)),ao(xe=>{if(cd(xe.guardsResult)){const Je=Xx(`Redirecting to "${this.serializeUrl(xe.guardsResult)}"`);throw Je.url=xe.guardsResult,Je}const ze=new iL(xe.id,this.serializeUrl(xe.extractedUrl),this.serializeUrl(xe.urlAfterRedirects),xe.targetSnapshot,!!xe.guardsResult);this.triggerEvent(ze)}),bc(xe=>!!xe.guardsResult||(this.restoreHistory(xe),this.cancelNavigationTransition(xe,""),!1)),cb(xe=>{if(xe.guards.canActivateChecks.length)return Ca(xe).pipe(ao(ze=>{const Je=new aL(ze.id,this.serializeUrl(ze.extractedUrl),this.serializeUrl(ze.urlAfterRedirects),ze.targetSnapshot);this.triggerEvent(Je)}),Du(ze=>{let Je=!1;return Ca(ze).pipe(function(r,t){return Ie(n=>{const{targetSnapshot:T,guards:{canActivateChecks:R}}=n;if(!R.length)return Ca(n);let Q=0;return de(R).pipe(xp(he=>function(r,t,n,T){return function(r,t,n,T){const R=Object.keys(r);if(0===R.length)return Ca({});const Q={};return de(R).pipe(Ie(he=>function(r,t,n,T){const R=Yv(r,t,T);return Hc(R.resolve?R.resolve(t,n):R(t,n))}(r[he],t,n,T).pipe(ao(xe=>{Q[he]=xe}))),hg(1),Ie(()=>Object.keys(Q).length===R.length?Ca(Q):yp))}(r._resolve,r,t,T).pipe(P(Q=>(r._resolvedData=Q,r.data=Object.assign(Object.assign({},r.data),DT(r,n).resolve),null)))}(he.route,T,r,t)),ao(()=>Q++),hg(1),Ie(he=>Q===R.length?Ca(n):yp))})}(this.paramsInheritanceStrategy,this.ngModule.injector),ao({next:()=>Je=!0,complete:()=>{Je||(this.restoreHistory(ze),this.cancelNavigationTransition(ze,"At least one route resolver didn't emit any value."))}}))}),ao(ze=>{const Je=new oL(ze.id,this.serializeUrl(ze.extractedUrl),this.serializeUrl(ze.urlAfterRedirects),ze.targetSnapshot);this.triggerEvent(Je)}))}),cb(xe=>{const{targetSnapshot:ze,id:Je,extractedUrl:yt,rawUrl:Ht,extras:{skipLocationChange:an,replaceUrl:mn}}=xe;return this.hooks.afterPreactivation(ze,{navigationId:Je,appliedUrlTree:yt,rawUrlTree:Ht,skipLocationChange:!!an,replaceUrl:!!mn})}),P(xe=>{const ze=function(r,t,n){const T=Bv(r,t._root,n?n._root:void 0);return new ET(T,t)}(this.routeReuseStrategy,xe.targetSnapshot,xe.currentRouterState);return Object.assign(Object.assign({},xe),{targetRouterState:ze})}),ao(xe=>{this.currentUrlTree=xe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(xe.urlAfterRedirects,xe.rawUrl),this.routerState=xe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(xe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,xe),this.browserUrlTree=xe.urlAfterRedirects)}),((r,t,n)=>P(T=>(new qL(t,T.targetRouterState,T.currentRouterState,n).activate(r),T)))(this.rootContexts,this.routeReuseStrategy,xe=>this.triggerEvent(xe)),ao({next(){Q=!0},complete(){Q=!0}}),function(r){return t=>t.lift(new QP(r))}(()=>{var xe;if(!Q&&!he){const ze=`Navigation ID ${R.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(R),this.cancelNavigationTransition(R,ze)):this.cancelNavigationTransition(R,ze)}(null===(xe=this.currentNavigation)||void 0===xe?void 0:xe.id)===R.id&&(this.currentNavigation=null)}),sd(xe=>{if(he=!0,function(r){return r&&r[pT]}(xe)){const ze=cd(xe.url);ze||(this.navigated=!0,this.restoreHistory(R,!0));const Je=new cT(R.id,this.serializeUrl(R.extractedUrl),xe.message);T.next(Je),ze?setTimeout(()=>{const yt=this.urlHandlingStrategy.merge(xe.url,this.rawUrlTree),Ht={skipLocationChange:R.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Zv(R.source)};this.scheduleNavigation(yt,"imperative",null,Ht,{resolve:R.resolve,reject:R.reject,promise:R.promise})},0):R.resolve(!1)}else{this.restoreHistory(R,!0);const ze=new tL(R.id,this.serializeUrl(R.extractedUrl),xe);T.next(ze);try{R.resolve(this.errorHandler(xe))}catch(Je){R.reject(Je)}}return yp}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}getTransition(){const n=this.transitions.value;return n.urlAfterRedirects=this.browserUrlTree,n}setTransition(n){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),n))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const T=this.extractLocationChangeInfoFromEvent(n);this.shouldScheduleNavigation(this.lastLocationChangeInfo,T)&&setTimeout(()=>{const{source:R,state:Q,urlTree:he}=T,xe={replaceUrl:!0};if(Q){const ze=Object.assign({},Q);delete ze.navigationId,delete ze.\u0275routerPageId,0!==Object.keys(ze).length&&(xe.state=ze)}this.scheduleNavigation(he,R,Q,xe)},0),this.lastLocationChangeInfo=T}))}extractLocationChangeInfoFromEvent(n){var T;return{source:"popstate"===n.type?"popstate":"hashchange",urlTree:this.parseUrl(n.url),state:(null===(T=n.state)||void 0===T?void 0:T.navigationId)?n.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(n,T){if(!n)return!0;const R=T.urlTree.toString()===n.urlTree.toString();return T.transitionId!==n.transitionId||!R||!("hashchange"===T.source&&"popstate"===n.source||"popstate"===T.source&&"hashchange"===n.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){VT(n),this.config=n.map(lb),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,T={}){const{relativeTo:R,queryParams:Q,fragment:he,queryParamsHandling:xe,preserveFragment:ze}=T,Je=R||this.routerState.root,yt=ze?this.currentUrlTree.fragment:he;let Ht=null;switch(xe){case"merge":Ht=Object.assign(Object.assign({},this.currentUrlTree.queryParams),Q);break;case"preserve":Ht=this.currentUrlTree.queryParams;break;default:Ht=Q||null}return null!==Ht&&(Ht=this.removeEmptyProps(Ht)),function(r,t,n,T,R){if(0===n.length)return ib(t.root,t.root,t,T,R);const Q=function(r){if("string"==typeof r[0]&&1===r.length&&"/"===r[0])return new RT(!0,0,r);let t=0,n=!1;const T=r.reduce((R,Q,he)=>{if("object"==typeof Q&&null!=Q){if(Q.outlets){const xe={};return Dl(Q.outlets,(ze,Je)=>{xe[Je]="string"==typeof ze?ze.split("/"):ze}),[...R,{outlets:xe}]}if(Q.segmentPath)return[...R,Q.segmentPath]}return"string"!=typeof Q?[...R,Q]:0===he?(Q.split("/").forEach((xe,ze)=>{0==ze&&"."===xe||(0==ze&&""===xe?n=!0:".."===xe?t++:""!=xe&&R.push(xe))}),R):[...R,Q]},[]);return new RT(n,t,T)}(n);if(Q.toRoot())return ib(t.root,new vo([],{}),t,T,R);const he=function(r,t,n){if(r.isAbsolute)return new ab(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const Q=n.snapshot._urlSegment;return new ab(Q,Q===t.root,0)}const T=jv(r.commands[0])?0:1;return function(r,t,n){let T=r,R=t,Q=n;for(;Q>R;){if(Q-=R,T=T.parent,!T)throw new Error("Invalid number of '../'");R=T.segments.length}return new ab(T,!1,R-Q)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+T,r.numberOfDoubleDots)}(Q,t,r),xe=he.processChildren?Vv(he.segmentGroup,he.index,Q.commands):FT(he.segmentGroup,he.index,Q.commands);return ib(he.segmentGroup,xe,t,T,R)}(Je,this.currentUrlTree,n,Ht,null!=yt?yt:null)}navigateByUrl(n,T={skipLocationChange:!1}){const R=cd(n)?n:this.parseUrl(n),Q=this.urlHandlingStrategy.merge(R,this.rawUrlTree);return this.scheduleNavigation(Q,"imperative",null,T)}navigate(n,T={skipLocationChange:!1}){return function(r){for(let t=0;t<r.length;t++){const n=r[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(n),this.navigateByUrl(this.createUrlTree(n,T),T)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let T;try{T=this.urlSerializer.parse(n)}catch(R){T=this.malformedUriErrorHandler(R,this.urlSerializer,n)}return T}isActive(n,T){let R;if(R=!0===T?Object.assign({},VO):!1===T?Object.assign({},UO):T,cd(n))return xT(this.currentUrlTree,n,R);const Q=this.parseUrl(n);return xT(this.currentUrlTree,Q,R)}removeEmptyProps(n){return Object.keys(n).reduce((T,R)=>{const Q=n[R];return null!=Q&&(T[R]=Q),T},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new bp(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,T,R,Q,he){var xe,ze;if(this.disposed)return Promise.resolve(!1);const Je=this.getTransition(),yt=Zv(T)&&Je&&!Zv(Je.source),mn=(this.lastSuccessfulId===Je.id||this.currentNavigation?Je.rawUrl:Je.urlAfterRedirects).toString()===n.toString();if(yt&&mn)return Promise.resolve(!0);let Bn,vr,ar;he?(Bn=he.resolve,vr=he.reject,ar=he.promise):ar=new Promise((qi,ua)=>{Bn=qi,vr=ua});const ni=++this.navigationId;let Ur;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(R=this.location.getState()),Ur=R&&R.\u0275routerPageId?R.\u0275routerPageId:Q.replaceUrl||Q.skipLocationChange?null!==(xe=this.browserPageId)&&void 0!==xe?xe:0:(null!==(ze=this.browserPageId)&&void 0!==ze?ze:0)+1):Ur=0,this.setTransition({id:ni,targetPageId:Ur,source:T,restoredState:R,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:Q,resolve:Bn,reject:vr,promise:ar,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ar.catch(qi=>Promise.reject(qi))}setBrowserUrl(n,T){const R=this.urlSerializer.serialize(n),Q=Object.assign(Object.assign({},T.extras.state),this.generateNgRouterState(T.id,T.targetPageId));this.location.isCurrentPathEqualTo(R)||T.extras.replaceUrl?this.location.replaceState(R,"",Q):this.location.go(R,"",Q)}restoreHistory(n,T=!1){var R,Q;if("computed"===this.canceledNavigationResolution){const he=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(R=this.currentNavigation)||void 0===R?void 0:R.finalUrl)||0===he?this.currentUrlTree===(null===(Q=this.currentNavigation)||void 0===Q?void 0:Q.finalUrl)&&0===he&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(he)}else"replace"===this.canceledNavigationResolution&&(T&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,T){const R=new cT(n.id,this.serializeUrl(n.extractedUrl),T);this.triggerEvent(R),n.resolve(!1)}generateNgRouterState(n,T){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:T}:{navigationId:n}}}return r.\u0275fac=function(n){return new(n||r)(yi(Tc),yi(Jx),yi(wp),yi(gv),yi($o),yi(iv),yi(ed),yi(void 0))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})();function Zv(r){return"imperative"!==r}let hb=(()=>{class r{constructor(n,T,R,Q,he){this.router=n,this.route=T,this.commands=[],this.onChanges=new N,null==R&&Q.setAttribute(he.nativeElement,"tabindex","0")}ngOnChanges(n){this.onChanges.next(this)}set routerLink(n){this.commands=null!=n?Array.isArray(n)?n:[n]:[]}onClick(){const n={skipLocationChange:Tp(this.skipLocationChange),replaceUrl:Tp(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,n),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Tp(this.preserveFragment)})}}return r.\u0275fac=function(n){return new(n||r)(Vr(qs),Vr(vf),fa("tabindex"),Vr(cc),Vr(Gs))},r.\u0275dir=xr({type:r,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(n,T){1&n&&Ya("click",function(){return T.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[Ni]}),r})(),wg=(()=>{class r{constructor(n,T,R){this.router=n,this.route=T,this.locationStrategy=R,this.commands=[],this.onChanges=new N,this.subscription=n.events.subscribe(Q=>{Q instanceof bp&&this.updateTargetUrlAndHref()})}set routerLink(n){this.commands=null!=n?Array.isArray(n)?n:[n]:[]}ngOnChanges(n){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(n,T,R,Q,he){if(0!==n||T||R||Q||he||"string"==typeof this.target&&"_self"!=this.target)return!0;const xe={skipLocationChange:Tp(this.skipLocationChange),replaceUrl:Tp(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,xe),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Tp(this.preserveFragment)})}}return r.\u0275fac=function(n){return new(n||r)(Vr(qs),Vr(vf),Vr(id))},r.\u0275dir=xr({type:r,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(n,T){1&n&&Ya("click",function(Q){return T.onClick(Q.button,Q.ctrlKey,Q.shiftKey,Q.altKey,Q.metaKey)}),2&n&&(Fm("href",T.href,Lf),Yu("target",T.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[Ni]}),r})();function Tp(r){return""===r||!!r}let db=(()=>{class r{constructor(n,T,R,Q,he,xe){this.router=n,this.element=T,this.renderer=R,this.cdr=Q,this.link=he,this.linkWithHref=xe,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.routerEventsSubscription=n.events.subscribe(ze=>{ze instanceof bp&&this.update()})}ngAfterContentInit(){Ca(this.links.changes,this.linksWithHrefs.changes,Ca(null)).pipe(Oe()).subscribe(n=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var n;null===(n=this.linkInputChangesSubscription)||void 0===n||n.unsubscribe();const T=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(R=>!!R).map(R=>R.onChanges);this.linkInputChangesSubscription=de(T).pipe(Oe()).subscribe(R=>{this.isActive!==this.isLinkActive(this.router)(R)&&this.update()})}set routerLinkActive(n){const T=Array.isArray(n)?n:n.split(" ");this.classes=T.filter(R=>!!R)}ngOnChanges(n){this.update()}ngOnDestroy(){var n;this.routerEventsSubscription.unsubscribe(),null===(n=this.linkInputChangesSubscription)||void 0===n||n.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const n=this.hasActiveLinks();this.isActive!==n&&(this.isActive=n,this.cdr.markForCheck(),this.classes.forEach(T=>{n?this.renderer.addClass(this.element.nativeElement,T):this.renderer.removeClass(this.element.nativeElement,T)}))})}isLinkActive(n){const T=function(r){return!!r.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return R=>n.isActive(R.urlTree,T)}hasActiveLinks(){const n=this.isLinkActive(this.router);return this.link&&n(this.link)||this.linkWithHref&&n(this.linkWithHref)||this.links.some(n)||this.linksWithHrefs.some(n)}}return r.\u0275fac=function(n){return new(n||r)(Vr(qs),Vr(Gs),Vr(cc),Vr(Gm),Vr(hb,8),Vr(wg,8))},r.\u0275dir=xr({type:r,selectors:[["","routerLinkActive",""]],contentQueries:function(n,T,R){if(1&n&&(Qm(R,hb,5),Qm(R,wg,5)),2&n){let Q;$0(Q=X0())&&(T.links=Q),$0(Q=X0())&&(T.linksWithHrefs=Q)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},exportAs:["routerLinkActive"],features:[Ni]}),r})(),pb=(()=>{class r{constructor(n,T,R,Q,he){this.parentContexts=n,this.location=T,this.resolver=R,this.changeDetector=he,this.activated=null,this._activatedRoute=null,this.activateEvents=new la,this.deactivateEvents=new la,this.name=Q||oo,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,n}attach(n,T){this.activated=n,this._activatedRoute=T,this.location.insert(n.hostView)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,T){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const he=(T=T||this.resolver).resolveComponentFactory(n._futureSnapshot.routeConfig.component),xe=this.parentContexts.getOrCreateContext(this.name).children,ze=new GO(n,xe,this.location.injector);this.activated=this.location.createComponent(he,this.location.length,ze),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return r.\u0275fac=function(n){return new(n||r)(Vr(wp),Vr(fc),Vr(Xh),fa("name"),Vr(Gm))},r.\u0275dir=xr({type:r,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),r})();class GO{constructor(t,n,T){this.route=t,this.childContexts=n,this.parent=T}get(t,n){return t===vf?this.route:t===wp?this.childContexts:this.parent.get(t,n)}}class rM{}class iM{preload(t,n){return Ca(null)}}let aM=(()=>{class r{constructor(n,T,R,Q,he){this.router=n,this.injector=Q,this.preloadingStrategy=he,this.loader=new tM(T,R,Je=>n.triggerEvent(new fT(Je)),Je=>n.triggerEvent(new hT(Je)))}setUpPreloading(){this.subscription=this.router.events.pipe(bc(n=>n instanceof bp),xp(()=>this.preload())).subscribe(()=>{})}preload(){const n=this.injector.get(jc);return this.processRoutes(n,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,T){const R=[];for(const Q of T)if(Q.loadChildren&&!Q.canLoad&&Q._loadedConfig){const he=Q._loadedConfig;R.push(this.processRoutes(he.module,he.routes))}else Q.loadChildren&&!Q.canLoad?R.push(this.preloadConfig(n,Q)):Q.children&&R.push(this.processRoutes(n,Q.children));return de(R).pipe(Oe(),P(Q=>{}))}preloadConfig(n,T){return this.preloadingStrategy.preload(T,()=>(T._loadedConfig?Ca(T._loadedConfig):this.loader.load(n.injector,T)).pipe(Ie(Q=>(T._loadedConfig=Q,this.processRoutes(Q.module,Q.routes)))))}}return r.\u0275fac=function(n){return new(n||r)(yi(qs),yi(iv),yi(ed),yi($o),yi(rM))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})(),gb=(()=>{class r{constructor(n,T,R={}){this.router=n,this.viewportScroller=T,this.options=R,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},R.scrollPositionRestoration=R.scrollPositionRestoration||"disabled",R.anchorScrolling=R.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof $x?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof bp&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof dT&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,T){this.router.triggerEvent(new dT(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,T))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return r.\u0275fac=function(n){return new(n||r)(yi(qs),yi(q5),yi(void 0))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})();const fd=new ma("ROUTER_CONFIGURATION"),oM=new ma("ROUTER_FORROOT_GUARD"),YO=[gv,{provide:Jx,useClass:TT},{provide:qs,useFactory:function(r,t,n,T,R,Q,he,xe={},ze,Je){const yt=new qs(null,r,t,n,T,R,Q,mT(he));return ze&&(yt.urlHandlingStrategy=ze),Je&&(yt.routeReuseStrategy=Je),function(r,t){r.errorHandler&&(t.errorHandler=r.errorHandler),r.malformedUriErrorHandler&&(t.malformedUriErrorHandler=r.malformedUriErrorHandler),r.onSameUrlNavigation&&(t.onSameUrlNavigation=r.onSameUrlNavigation),r.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=r.paramsInheritanceStrategy),r.relativeLinkResolution&&(t.relativeLinkResolution=r.relativeLinkResolution),r.urlUpdateStrategy&&(t.urlUpdateStrategy=r.urlUpdateStrategy)}(xe,yt),xe.enableTracing&&yt.events.subscribe(Ht=>{var an,mn;null===(an=console.group)||void 0===an||an.call(console,`Router Event: ${Ht.constructor.name}`),console.log(Ht.toString()),console.log(Ht),null===(mn=console.groupEnd)||void 0===mn||mn.call(console)}),yt},deps:[Jx,wp,gv,$o,iv,ed,fb,fd,[class{},new Js],[class{},new Js]]},wp,{provide:vf,useFactory:function(r){return r.routerState.root},deps:[qs]},{provide:iv,useClass:WS},aM,iM,class{preload(t,n){return n().pipe(sd(()=>Ca(null)))}},{provide:fd,useValue:{enableTracing:!1}}];function ZO(){return new ax("Router",qs)}let sM=(()=>{class r{constructor(n,T){}static forRoot(n,T){return{ngModule:r,providers:[YO,lM(n),{provide:oM,useFactory:JO,deps:[[qs,new Js,new zu]]},{provide:fd,useValue:T||{}},{provide:id,useFactory:XO,deps:[rd,[new Af(wx),new Js],fd]},{provide:gb,useFactory:$O,deps:[qs,q5,fd]},{provide:rM,useExisting:T&&T.preloadingStrategy?T.preloadingStrategy:iM},{provide:ax,multi:!0,useFactory:ZO},[mb,{provide:K0,multi:!0,useFactory:t9,deps:[mb]},{provide:uM,useFactory:n9,deps:[mb]},{provide:N3,multi:!0,useExisting:uM}]]}}static forChild(n){return{ngModule:r,providers:[lM(n)]}}}return r.\u0275fac=function(n){return new(n||r)(yi(oM,8),yi(qs,8))},r.\u0275mod=Er({type:r}),r.\u0275inj=rn({}),r})();function $O(r,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new gb(r,t,n)}function XO(r,t,n={}){return n.useHash?new h8(r,t):new A5(r,t)}function JO(r){return"guarded"}function lM(r){return[{provide:Gc,multi:!0,useValue:r},{provide:fb,multi:!0,useValue:r}]}let mb=(()=>{class r{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new N}appInitializer(){return this.injector.get(u8,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let T=null;const R=new Promise(xe=>T=xe),Q=this.injector.get(qs),he=this.injector.get(fd);return"disabled"===he.initialNavigation?(Q.setUpLocationChangeListener(),T(!0)):"enabled"===he.initialNavigation||"enabledBlocking"===he.initialNavigation?(Q.hooks.afterPreactivation=()=>this.initNavigation?Ca(null):(this.initNavigation=!0,T(!0),this.resultOfPreactivationDone),Q.initialNavigation()):T(!0),R})}bootstrapListener(n){const T=this.injector.get(fd),R=this.injector.get(aM),Q=this.injector.get(gb),he=this.injector.get(qs),xe=this.injector.get(pp);n===xe.components[0]&&(("enabledNonBlocking"===T.initialNavigation||void 0===T.initialNavigation)&&he.initialNavigation(),R.setUpPreloading(),Q.init(),he.resetRootComponentType(xe.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return r.\u0275fac=function(n){return new(n||r)(yi($o))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})();function t9(r){return r.appInitializer.bind(r)}function n9(r){return r.bootstrapListener.bind(r)}const uM=new ma("Router Initializer");let i9=(()=>{class r{constructor(n){this.router=n}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)(Vr(qs))},r.\u0275cmp=nr({type:r,selectors:[["app-chart"]],decls:85,vars:2,consts:[[1,"container","flex_row"],["routerLinkActive","active","routerLink","/Home"],["routerLinkActive","active","routerLink","/Chart",3,"ngClass"],[1,"container"],[1,"page-header"],["id","link4"],[1,"row","slideanim"],[1,"col-md-8"],["id",""],[1,"meta"],[1,"author"],[1,"date"],[1,"comments"],[1,"badge"],["href",""],[1,"entry-content"],["src","http://placehold.it/750x420","alt","",1,"img-fluid"],[1,"lead"],["href","#",1,"btn","btn-primary"],["aria-hidden","true",1,"glyphicon","glyphicon","glyphicon-chevron-right"],[1,"col-md-4"],[1,"list-group","mb-3","slideanim"],["href","#",1,"list-group-item","active"],[1,"list-group-item-heading"],[1,"list-group-item-text"],["href","#",1,"list-group-item"]],template:function(n,T){1&n&&(An(0,"div",0),An(1,"a",1),ti(2,"Home/"),Cn(),An(3,"a",2),ti(4),Cn(),Cn(),An(5,"div",3),An(6,"div",4),An(7,"h1",5),ti(8,"Design"),Cn(),Cn(),An(9,"div",6),An(10,"div",7),An(11,"article",8),An(12,"header"),An(13,"div",9),ti(14," Written by "),An(15,"span",10),ti(16,"Author Name"),Cn(),An(17,"span",11),ti(18,"1/30/16"),Cn(),ti(19," | "),An(20,"span",12),An(21,"span",13),ti(22,"4"),Cn(),ti(23," Comments"),Cn(),Cn(),An(24,"h2"),An(25,"a",14),ti(26," Blog title"),Cn(),Cn(),Cn(),An(27,"div",15),An(28,"a",14),sa(29,"img",16),Cn(),An(30,"p",17),ti(31,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quis aliquid fuga dolorum est ab fugit, eveniet quam minus reiciendis harum accusamus a velit, vero impedit, dolor. Sapiente architecto \u2026"),Cn(),An(32,"a",18),ti(33,"Read More "),sa(34,"span",19),Cn(),Cn(),sa(35,"footer"),Cn(),An(36,"article",8),An(37,"header"),An(38,"div",9),ti(39," Written by "),An(40,"span",10),ti(41,"Author Name"),Cn(),An(42,"span",11),ti(43,"1/30/16"),Cn(),ti(44," | "),An(45,"span",12),An(46,"span",13),ti(47,"4"),Cn(),ti(48," Comments"),Cn(),Cn(),An(49,"h2"),An(50,"a",14),ti(51," Blog title"),Cn(),Cn(),Cn(),An(52,"div",15),An(53,"a",14),sa(54,"img",16),Cn(),An(55,"p"),ti(56,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Quis aliquid fuga dolorum est ab fugit, eveniet quam minus reiciendis harum accusamus a velit, vero impedit, dolor. Sapiente architecto non quo."),Cn(),An(57,"a",18),ti(58,"Read More "),sa(59,"span",19),Cn(),Cn(),sa(60,"footer"),Cn(),Cn(),An(61,"aside",20),An(62,"h3"),ti(63,"Recent Posts"),Cn(),An(64,"div",21),An(65,"a",22),An(66,"h4",23),ti(67,"List group item heading"),Cn(),An(68,"p",24),ti(69," Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nam, optio eum \u2026 "),Cn(),Cn(),An(70,"a",25),An(71,"h4",23),ti(72,"List group item heading"),Cn(),An(73,"p",24),ti(74," Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nam, optio eum \u2026 "),Cn(),Cn(),An(75,"a",25),An(76,"h4",23),ti(77,"List group item heading"),Cn(),An(78,"p",24),ti(79," Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nam, optio eum \u2026 "),Cn(),Cn(),An(80,"a",25),An(81,"h4",23),ti(82,"List group item heading"),Cn(),An(83,"p",24),ti(84," Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nam, optio eum \u2026 "),Cn(),Cn(),Cn(),Cn(),Cn(),Cn()),2&n&&(Pi(3),fo("ngClass","/Chart"==T.router.url?"second-class":""),Pi(1),cf(" ",T.router.url,""))},directives:[wg,db,vp],styles:[".flex_row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.second-class[_ngcontent-%COMP%]{color:red}"]}),r})();class cM{}class fM{}class yf{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(n=>{const T=n.indexOf(":");if(T>0){const R=n.slice(0,T),Q=R.toLowerCase(),he=n.slice(T+1).trim();this.maybeSetNormalizedName(R,Q),this.headers.has(Q)?this.headers.get(Q).push(he):this.headers.set(Q,[he])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(n=>{let T=t[n];const R=n.toLowerCase();"string"==typeof T&&(T=[T]),T.length>0&&(this.headers.set(R,T),this.maybeSetNormalizedName(n,R))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const n=this.headers.get(t.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,n){return this.clone({name:t,value:n,op:"a"})}set(t,n){return this.clone({name:t,value:n,op:"s"})}delete(t,n){return this.clone({name:t,value:n,op:"d"})}maybeSetNormalizedName(t,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,t)}init(){this.lazyInit&&(this.lazyInit instanceof yf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(n=>{this.headers.set(n,t.headers.get(n)),this.normalizedNames.set(n,t.normalizedNames.get(n))})}clone(t){const n=new yf;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof yf?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([t]),n}applyUpdate(t){const n=t.name.toLowerCase();switch(t.op){case"a":case"s":let T=t.value;if("string"==typeof T&&(T=[T]),0===T.length)return;this.maybeSetNormalizedName(t.name,n);const R=("a"===t.op?this.headers.get(n):void 0)||[];R.push(...T),this.headers.set(n,R);break;case"d":const Q=t.value;if(Q){let he=this.headers.get(n);if(!he)return;he=he.filter(xe=>-1===Q.indexOf(xe)),0===he.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,he)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>t(this.normalizedNames.get(n),this.headers.get(n)))}}class a9{encodeKey(t){return hM(t)}encodeValue(t){return hM(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}const s9=/%(\d[a-f0-9])/gi,l9={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function hM(r){return encodeURIComponent(r).replace(s9,(t,n)=>{var T;return null!==(T=l9[n])&&void 0!==T?T:t})}function dM(r){return`${r}`}class ph{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new a9,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(r,t){const n=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(R=>{const Q=R.indexOf("="),[he,xe]=-1==Q?[t.decodeKey(R),""]:[t.decodeKey(R.slice(0,Q)),t.decodeValue(R.slice(Q+1))],ze=n.get(he)||[];ze.push(xe),n.set(he,ze)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(n=>{const T=t.fromObject[n];this.map.set(n,Array.isArray(T)?T:[T])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const n=this.map.get(t);return n?n[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,n){return this.clone({param:t,value:n,op:"a"})}appendAll(t){const n=[];return Object.keys(t).forEach(T=>{const R=t[T];Array.isArray(R)?R.forEach(Q=>{n.push({param:T,value:Q,op:"a"})}):n.push({param:T,value:R,op:"a"})}),this.clone(n)}set(t,n){return this.clone({param:t,value:n,op:"s"})}delete(t,n){return this.clone({param:t,value:n,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const n=this.encoder.encodeKey(t);return this.map.get(t).map(T=>n+"="+this.encoder.encodeValue(T)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const n=new ph({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(t),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const n=("a"===t.op?this.map.get(t.param):void 0)||[];n.push(dM(t.value)),this.map.set(t.param,n);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let T=this.map.get(t.param)||[];const R=T.indexOf(dM(t.value));-1!==R&&T.splice(R,1),T.length>0?this.map.set(t.param,T):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class u9{constructor(){this.map=new Map}set(t,n){return this.map.set(t,n),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function pM(r){return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer}function gM(r){return"undefined"!=typeof Blob&&r instanceof Blob}function mM(r){return"undefined"!=typeof FormData&&r instanceof FormData}class Tg{constructor(t,n,T,R){let Q;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||R?(this.body=void 0!==T?T:null,Q=R):Q=T,Q&&(this.reportProgress=!!Q.reportProgress,this.withCredentials=!!Q.withCredentials,Q.responseType&&(this.responseType=Q.responseType),Q.headers&&(this.headers=Q.headers),Q.context&&(this.context=Q.context),Q.params&&(this.params=Q.params)),this.headers||(this.headers=new yf),this.context||(this.context=new u9),this.params){const he=this.params.toString();if(0===he.length)this.urlWithParams=n;else{const xe=n.indexOf("?");this.urlWithParams=n+(-1===xe?"?":xe<n.length-1?"&":"")+he}}else this.params=new ph,this.urlWithParams=n}serializeBody(){return null===this.body?null:pM(this.body)||gM(this.body)||mM(this.body)||function(r){return"undefined"!=typeof URLSearchParams&&r instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof ph?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||mM(this.body)?null:gM(this.body)?this.body.type||null:pM(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ph?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var n;const T=t.method||this.method,R=t.url||this.url,Q=t.responseType||this.responseType,he=void 0!==t.body?t.body:this.body,xe=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,ze=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let Je=t.headers||this.headers,yt=t.params||this.params;const Ht=null!==(n=t.context)&&void 0!==n?n:this.context;return void 0!==t.setHeaders&&(Je=Object.keys(t.setHeaders).reduce((an,mn)=>an.set(mn,t.setHeaders[mn]),Je)),t.setParams&&(yt=Object.keys(t.setParams).reduce((an,mn)=>an.set(mn,t.setParams[mn]),yt)),new Tg(T,R,he,{params:yt,headers:Je,context:Ht,reportProgress:ze,responseType:Q,withCredentials:xe})}}var tl=(()=>((tl=tl||{})[tl.Sent=0]="Sent",tl[tl.UploadProgress=1]="UploadProgress",tl[tl.ResponseHeader=2]="ResponseHeader",tl[tl.DownloadProgress=3]="DownloadProgress",tl[tl.Response=4]="Response",tl[tl.User=5]="User",tl))();class vb{constructor(t,n=200,T="OK"){this.headers=t.headers||new yf,this.status=void 0!==t.status?t.status:n,this.statusText=t.statusText||T,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class yb extends vb{constructor(t={}){super(t),this.type=tl.ResponseHeader}clone(t={}){return new yb({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class $v extends vb{constructor(t={}){super(t),this.type=tl.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new $v({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class vM extends vb{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function xb(r,t){return{body:t,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials}}let hd=(()=>{class r{constructor(n){this.handler=n}request(n,T,R={}){let Q;if(n instanceof Tg)Q=n;else{let ze,Je;ze=R.headers instanceof yf?R.headers:new yf(R.headers),R.params&&(Je=R.params instanceof ph?R.params:new ph({fromObject:R.params})),Q=new Tg(n,T,void 0!==R.body?R.body:null,{headers:ze,context:R.context,params:Je,reportProgress:R.reportProgress,responseType:R.responseType||"json",withCredentials:R.withCredentials})}const he=Ca(Q).pipe(xp(ze=>this.handler.handle(ze)));if(n instanceof Tg||"events"===R.observe)return he;const xe=he.pipe(bc(ze=>ze instanceof $v));switch(R.observe||"body"){case"body":switch(Q.responseType){case"arraybuffer":return xe.pipe(P(ze=>{if(null!==ze.body&&!(ze.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return ze.body}));case"blob":return xe.pipe(P(ze=>{if(null!==ze.body&&!(ze.body instanceof Blob))throw new Error("Response is not a Blob.");return ze.body}));case"text":return xe.pipe(P(ze=>{if(null!==ze.body&&"string"!=typeof ze.body)throw new Error("Response is not a string.");return ze.body}));case"json":default:return xe.pipe(P(ze=>ze.body))}case"response":return xe;default:throw new Error(`Unreachable: unhandled observe type ${R.observe}}`)}}delete(n,T={}){return this.request("DELETE",n,T)}get(n,T={}){return this.request("GET",n,T)}head(n,T={}){return this.request("HEAD",n,T)}jsonp(n,T){return this.request("JSONP",n,{params:(new ph).append(T,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,T={}){return this.request("OPTIONS",n,T)}patch(n,T,R={}){return this.request("PATCH",n,xb(R,T))}post(n,T,R={}){return this.request("POST",n,xb(R,T))}put(n,T,R={}){return this.request("PUT",n,xb(R,T))}}return r.\u0275fac=function(n){return new(n||r)(yi(cM))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})();class yM{constructor(t,n){this.next=t,this.interceptor=n}handle(t){return this.interceptor.intercept(t,this.next)}}const xM=new ma("HTTP_INTERCEPTORS");let h9=(()=>{class r{intercept(n,T){return T.handle(n)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})();const d9=/^\)\]\}',?\n/;let bM=(()=>{class r{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new A(T=>{const R=this.xhrFactory.build();if(R.open(n.method,n.urlWithParams),n.withCredentials&&(R.withCredentials=!0),n.headers.forEach((mn,Bn)=>R.setRequestHeader(mn,Bn.join(","))),n.headers.has("Accept")||R.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const mn=n.detectContentTypeHeader();null!==mn&&R.setRequestHeader("Content-Type",mn)}if(n.responseType){const mn=n.responseType.toLowerCase();R.responseType="json"!==mn?mn:"text"}const Q=n.serializeBody();let he=null;const xe=()=>{if(null!==he)return he;const mn=1223===R.status?204:R.status,Bn=R.statusText||"OK",vr=new yf(R.getAllResponseHeaders()),ar=function(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}(R)||n.url;return he=new yb({headers:vr,status:mn,statusText:Bn,url:ar}),he},ze=()=>{let{headers:mn,status:Bn,statusText:vr,url:ar}=xe(),ni=null;204!==Bn&&(ni=void 0===R.response?R.responseText:R.response),0===Bn&&(Bn=ni?200:0);let Ur=Bn>=200&&Bn<300;if("json"===n.responseType&&"string"==typeof ni){const qi=ni;ni=ni.replace(d9,"");try{ni=""!==ni?JSON.parse(ni):null}catch(ua){ni=qi,Ur&&(Ur=!1,ni={error:ua,text:ni})}}Ur?(T.next(new $v({body:ni,headers:mn,status:Bn,statusText:vr,url:ar||void 0})),T.complete()):T.error(new vM({error:ni,headers:mn,status:Bn,statusText:vr,url:ar||void 0}))},Je=mn=>{const{url:Bn}=xe(),vr=new vM({error:mn,status:R.status||0,statusText:R.statusText||"Unknown Error",url:Bn||void 0});T.error(vr)};let yt=!1;const Ht=mn=>{yt||(T.next(xe()),yt=!0);let Bn={type:tl.DownloadProgress,loaded:mn.loaded};mn.lengthComputable&&(Bn.total=mn.total),"text"===n.responseType&&!!R.responseText&&(Bn.partialText=R.responseText),T.next(Bn)},an=mn=>{let Bn={type:tl.UploadProgress,loaded:mn.loaded};mn.lengthComputable&&(Bn.total=mn.total),T.next(Bn)};return R.addEventListener("load",ze),R.addEventListener("error",Je),R.addEventListener("timeout",Je),R.addEventListener("abort",Je),n.reportProgress&&(R.addEventListener("progress",Ht),null!==Q&&R.upload&&R.upload.addEventListener("progress",an)),R.send(Q),T.next({type:tl.Sent}),()=>{R.removeEventListener("error",Je),R.removeEventListener("abort",Je),R.removeEventListener("load",ze),R.removeEventListener("timeout",Je),n.reportProgress&&(R.removeEventListener("progress",Ht),null!==Q&&R.upload&&R.upload.removeEventListener("progress",an)),R.readyState!==R.DONE&&R.abort()}})}}return r.\u0275fac=function(n){return new(n||r)(yi(W5))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})();const bb=new ma("XSRF_COOKIE_NAME"),_b=new ma("XSRF_HEADER_NAME");class _M{}let g9=(()=>{class r{constructor(n,T,R){this.doc=n,this.platform=T,this.cookieName=R,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=F5(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return r.\u0275fac=function(n){return new(n||r)(yi(Tl),yi(dp),yi(bb))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})(),wb=(()=>{class r{constructor(n,T){this.tokenService=n,this.headerName=T}intercept(n,T){const R=n.url.toLowerCase();if("GET"===n.method||"HEAD"===n.method||R.startsWith("http://")||R.startsWith("https://"))return T.handle(n);const Q=this.tokenService.getToken();return null!==Q&&!n.headers.has(this.headerName)&&(n=n.clone({headers:n.headers.set(this.headerName,Q)})),T.handle(n)}}return r.\u0275fac=function(n){return new(n||r)(yi(_M),yi(_b))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})(),m9=(()=>{class r{constructor(n,T){this.backend=n,this.injector=T,this.chain=null}handle(n){if(null===this.chain){const T=this.injector.get(xM,[]);this.chain=T.reduceRight((R,Q)=>new yM(R,Q),this.backend)}return this.chain.handle(n)}}return r.\u0275fac=function(n){return new(n||r)(yi(fM),yi($o))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})(),v9=(()=>{class r{static disable(){return{ngModule:r,providers:[{provide:wb,useClass:h9}]}}static withOptions(n={}){return{ngModule:r,providers:[n.cookieName?{provide:bb,useValue:n.cookieName}:[],n.headerName?{provide:_b,useValue:n.headerName}:[]]}}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Er({type:r}),r.\u0275inj=rn({providers:[wb,{provide:xM,useExisting:wb,multi:!0},{provide:_M,useClass:g9},{provide:bb,useValue:"XSRF-TOKEN"},{provide:_b,useValue:"X-XSRF-TOKEN"}]}),r})(),y9=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Er({type:r}),r.\u0275inj=rn({providers:[hd,{provide:cM,useClass:m9},bM,{provide:fM,useExisting:bM}],imports:[[v9.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),r})(),Mg=(()=>{class r{constructor(n){this.http=n}getNavigationHeaderData(){return this.http.get("assets/json/data.json",{responseType:"json"})}getCountriesData(){return this.http.get("assets/json/config.json",{responseType:"json"})}getCountriesChart1(){return this.http.get("assets/json/Chart1.json",{responseType:"json"})}getCountriesChart2(){return this.http.get("assets/json/Chart2.json",{responseType:"json"})}getCountriesChart3(){return this.http.get("assets/json/Chart3.json",{responseType:"json"})}getCountriesChart4(){return this.http.get("assets/json/Chart4.json",{responseType:"json"})}getCountriesChart5(){return this.http.get("assets/json/Chart5.json",{responseType:"json"})}getCountriesChart6(){return this.http.get("assets/json/Chart6.json",{responseType:"json"})}getCountriesChart7(){return this.http.get("assets/json/Chart7.json",{responseType:"json"})}getMenuItemList(){return this.http.get("assets/json/nav.json",{responseType:"json"})}getCardList(){return this.http.get("assets/json/card.json",{responseType:"json"})}}return r.\u0275fac=function(n){return new(n||r)(yi(hd))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),x9=(()=>{class r{constructor(n,T,R){this.searchJson=n,this.sanitizer=T,this.http=R,this.card=[]}ngOnInit(){this.searchJson.getCardList().subscribe(n=>{this.json=n.card})}}return r.\u0275fac=function(n){return new(n||r)(Vr(Mg),Vr(od),Vr(hd))},r.\u0275cmp=nr({type:r,selectors:[["app-card"]],decls:53,vars:9,consts:[["id","link1",1,"card_container"],[1,"text-center","title"],[1,"row","marg0"],[1,"flex_row"],[1,"card","col-sm-6","col-md-3","effect5"],[1,"card__thumb"],[3,"src"],[1,"card__body"],[1,"card__title"],["href","#"],[1,"card__description"],["routerLinkActive","active","routerLink","/Chart"],[1,"card","col-sm-6","col-md-3"],["src","https://mdbootstrap.com/img/Photos/Others/images/16.jpg"],["src","https://mdbootstrap.com/img/Photos/Others/images/14.jpg"],["src","https://mdbootstrap.com/img/Photos/Others/images/12.jpg"]],template:function(n,T){1&n&&(An(0,"section",0),An(1,"h1",1),ti(2," Contributions to the Well-being of our Planet"),Cn(),An(3,"div",2),An(4,"div",3),An(5,"article",4),An(6,"header",5),sa(7,"img",6),Cn(),An(8,"div",7),An(9,"h2",8),An(10,"a",9),ti(11),Cn(),Cn(),An(12,"p",10),ti(13),Cn(),An(14,"span"),An(15,"a",11),ti(16,"Read More.."),Cn(),Cn(),Cn(),Cn(),An(17,"article",12),An(18,"header",5),sa(19,"img",13),Cn(),An(20,"div",7),An(21,"h2",8),An(22,"a",9),ti(23),Cn(),Cn(),An(24,"p",10),ti(25),Cn(),An(26,"span"),An(27,"a",11),ti(28,"Read More.."),Cn(),Cn(),Cn(),Cn(),An(29,"article",12),An(30,"header",5),sa(31,"img",14),Cn(),An(32,"div",7),An(33,"h2",8),An(34,"a",9),ti(35),Cn(),Cn(),An(36,"p",10),ti(37),Cn(),An(38,"span"),An(39,"a",11),ti(40,"Read More.."),Cn(),Cn(),Cn(),Cn(),An(41,"article",12),An(42,"header",5),sa(43,"img",15),Cn(),An(44,"div",7),An(45,"h2",8),An(46,"a",9),ti(47),Cn(),Cn(),An(48,"p",10),ti(49),Cn(),An(50,"span"),An(51,"a",11),ti(52,"Read More.."),Cn(),Cn(),Cn(),Cn(),Cn(),Cn(),Cn()),2&n&&(Pi(7),fo("src",T.json[0].cardfirst.image.src,Lf),Pi(4),ys(T.json[0].cardfirst.title),Pi(2),cf("",T.json[0].cardfirst.description.para," "),Pi(10),ys(T.json[0].cardsecond.title),Pi(2),cf("",T.json[0].cardsecond.description.para," "),Pi(10),ys(T.json[0].cardthird.title),Pi(2),cf("",T.json[0].cardthird.description.para," "),Pi(10),ys(T.json[0].cardfour.title),Pi(2),cf("",T.json[0].cardfour.description.para," "))},directives:[wg,db],styles:['.card_container[_ngcontent-%COMP%]{width:90%;display:flex;flex-direction:column;margin:0 auto}.flex_row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}.card_container[_ngcontent-%COMP%] > .title[_ngcontent-%COMP%]{font-family:"roboto_black";font-size:36px;padding:3vw;text-shadow:0px 15px 5px rgba(0,0,0,.1),10px 20px 5px rgba(0,0,0,.05),-10px 20px 5px rgba(0,0,0,.05)}.card[_ngcontent-%COMP%]{width:25%;margin:0 1%;padding:0;background-color:#fff;box-shadow:0 0 20px #0000001a;overflow:hidden;transition:box-shadow .5s}.card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:inherit;text-decoration:none}.card__date[_ngcontent-%COMP%]{position:absolute;top:20px;right:20px;width:45px;height:45px;padding-top:10px;background-color:coral;border-radius:50%;color:#fff;text-align:center;font-weight:700;line-height:13px}.card__date__day[_ngcontent-%COMP%]{font-size:14px}.card__date__month[_ngcontent-%COMP%]{text-transform:uppercase;font-size:10px}.card__thumb[_ngcontent-%COMP%]{height:190px;overflow:hidden;background-color:#fff;transition:height .5s}.card__thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;display:block;opacity:1;transform:scale(1);transition:opacity .5s,transform .5s}.card[_ngcontent-%COMP%]:hover   .card__thumb[_ngcontent-%COMP%]{height:130px}.card[_ngcontent-%COMP%]:hover   .card__thumb[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{opacity:.8;transform:scale(1.2)}.card__body[_ngcontent-%COMP%]{position:relative;height:75px;padding-left:12px;padding-right:12px;transition:height .5s}.card[_ngcontent-%COMP%]:hover   .card__body[_ngcontent-%COMP%]{height:200px;cursor:pointer}.card[_ngcontent-%COMP%]:hover   .card__title[_ngcontent-%COMP%]{padding-top:8%}.card__category[_ngcontent-%COMP%]{position:absolute;top:-25px;left:0;height:25px;padding:0 15px;background-color:coral;color:#fff;text-transform:uppercase;font-size:11px;line-height:25px}.card__title[_ngcontent-%COMP%]{margin:0;padding:0;color:#000;font-size:16px;font-family:"roboto_bold";line-height:18px}.card__subtitle[_ngcontent-%COMP%]{margin:0;padding:0 0 10px;font-size:19px;color:coral}.card__description[_ngcontent-%COMP%]{margin:0;padding:6% 0 0;color:#666c74;line-height:18px;opacity:0;transform:translateY(45px);transition:opacity .3s,transform .3s;transition-delay:0s}.card[_ngcontent-%COMP%]:hover   .card__description[_ngcontent-%COMP%]{opacity:1;transform:translateY(0);transition-delay:.2s}.card__footer[_ngcontent-%COMP%]{position:relative;bottom:12px;left:20px;right:20px;font-size:11px;color:#a3a9a2}.card__body[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding:2px 16px;display:flex;justify-content:flex-end}.card__body[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{line-height:normal;letter-spacing:normal;font-family:"roboto_regular";font-size:12.8px}.card__body[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:12px;font-family:"roboto_bold";text-decoration:none;color:#fb1a7c;padding-top:10%}.card__body[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#0731c8}']}),r})();function Xv(r,t){return new A(n=>{const T=r.length;if(0===T)return void n.complete();const R=new Array(T);let Q=0,he=0;for(let xe=0;xe<T;xe++){const ze=de(r[xe]);let Je=!1;n.add(ze.subscribe({next:yt=>{Je||(Je=!0,he++),R[xe]=yt},error:yt=>n.error(yt),complete:()=>{Q++,(Q===T||!Je)&&(he===T&&n.next(t?t.reduce((yt,Ht,an)=>(yt[Ht]=R[an],yt),{}):R),n.complete())}}))}})}let wM=(()=>{class r{constructor(n,T){this._renderer=n,this._elementRef=T,this.onChange=R=>{},this.onTouched=()=>{}}setProperty(n,T){this._renderer.setProperty(this._elementRef.nativeElement,n,T)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return r.\u0275fac=function(n){return new(n||r)(Vr(cc),Vr(Gs))},r.\u0275dir=xr({type:r}),r})(),dd=(()=>{class r extends wM{}return r.\u0275fac=function(){let t;return function(T){return(t||(t=ra(r)))(T||r)}}(),r.\u0275dir=xr({type:r,features:[Cs]}),r})();const qc=new ma("NgValueAccessor"),w9={provide:qc,useExisting:Qt(()=>Tb),multi:!0},M9=new ma("CompositionEventMode");let Tb=(()=>{class r extends wM{constructor(n,T,R){super(n,T),this._compositionMode=R,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const r=Vc()?Vc().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(n){this.setProperty("value",null==n?"":n)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return r.\u0275fac=function(n){return new(n||r)(Vr(cc),Vr(Gs),Vr(M9,8))},r.\u0275dir=xr({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,T){1&n&&Ya("input",function(Q){return T._handleInput(Q.target.value)})("blur",function(){return T.onTouched()})("compositionstart",function(){return T._compositionStart()})("compositionend",function(Q){return T._compositionEnd(Q.target.value)})},features:[xs([w9]),Cs]}),r})();const Gl=new ma("NgValidators"),mh=new ma("NgAsyncValidators");function LM(r){return null!=r}function OM(r){const t=D0(r)?de(r):r;return Lm(t),t}function RM(r){let t={};return r.forEach(n=>{t=null!=n?Object.assign(Object.assign({},t),n):t}),0===Object.keys(t).length?null:t}function FM(r,t){return t.map(n=>n(r))}function NM(r){return r.map(t=>function(r){return!r.validate}(t)?t:n=>t.validate(n))}function Mb(r){return null!=r?function(r){if(!r)return null;const t=r.filter(LM);return 0==t.length?null:function(n){return RM(FM(n,t))}}(NM(r)):null}function kb(r){return null!=r?function(r){if(!r)return null;const t=r.filter(LM);return 0==t.length?null:function(n){return function(...r){if(1===r.length){const t=r[0];if(e(t))return Xv(t,null);if(o(t)&&Object.getPrototypeOf(t)===Object.prototype){const n=Object.keys(t);return Xv(n.map(T=>t[T]),n)}}if("function"==typeof r[r.length-1]){const t=r.pop();return Xv(r=1===r.length&&e(r[0])?r[0]:r,null).pipe(P(n=>t(...n)))}return Xv(r,null)}(FM(n,t).map(OM)).pipe(P(RM))}}(NM(r)):null}function jM(r,t){return null===r?[t]:Array.isArray(r)?[...r,t]:[r,t]}function Ab(r){return r?Array.isArray(r)?r:[r]:[]}function Jv(r,t){return Array.isArray(r)?r.includes(t):r===t}function HM(r,t){const n=Ab(t);return Ab(r).forEach(R=>{Jv(n,R)||n.push(R)}),n}function qM(r,t){return Ab(t).filter(n=>!Jv(r,n))}let GM=(()=>{class r{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(n){this._rawValidators=n||[],this._composedValidatorFn=Mb(this._rawValidators)}_setAsyncValidators(n){this._rawAsyncValidators=n||[],this._composedAsyncValidatorFn=kb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(n){this._onDestroyCallbacks.push(n)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(n=>n()),this._onDestroyCallbacks=[]}reset(n){this.control&&this.control.reset(n)}hasError(n,T){return!!this.control&&this.control.hasError(n,T)}getError(n,T){return this.control?this.control.getError(n,T):null}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275dir=xr({type:r}),r})(),eu=(()=>{class r extends GM{get formDirective(){return null}get path(){return null}}return r.\u0275fac=function(){let t;return function(T){return(t||(t=ra(r)))(T||r)}}(),r.\u0275dir=xr({type:r,features:[Cs]}),r})();class yh extends GM{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let YM=(()=>{class r extends class{constructor(t){this._cd=t}is(t){var n,T,R;return"submitted"===t?!!(null===(n=this._cd)||void 0===n?void 0:n.submitted):!!(null===(R=null===(T=this._cd)||void 0===T?void 0:T.control)||void 0===R?void 0:R[t])}}{constructor(n){super(n)}}return r.\u0275fac=function(n){return new(n||r)(Vr(yh,2))},r.\u0275dir=xr({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,T){2&n&&Om("ng-untouched",T.is("untouched"))("ng-touched",T.is("touched"))("ng-pristine",T.is("pristine"))("ng-dirty",T.is("dirty"))("ng-valid",T.is("valid"))("ng-invalid",T.is("invalid"))("ng-pending",T.is("pending"))},features:[Cs]}),r})();function kg(r,t){(function(r,t){const n=function(r){return r._rawValidators}(r);null!==t.validator?r.setValidators(jM(n,t.validator)):"function"==typeof n&&r.setValidators([n]);const T=function(r){return r._rawAsyncValidators}(r);null!==t.asyncValidator?r.setAsyncValidators(jM(T,t.asyncValidator)):"function"==typeof T&&r.setAsyncValidators([T]);const R=()=>r.updateValueAndValidity();ty(t._rawValidators,R),ty(t._rawAsyncValidators,R)})(r,t),t.valueAccessor.writeValue(r.value),function(r,t){t.valueAccessor.registerOnChange(n=>{r._pendingValue=n,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&ZM(r,t)})}(r,t),function(r,t){const n=(T,R)=>{t.valueAccessor.writeValue(T),R&&t.viewToModelUpdate(T)};r.registerOnChange(n),t._registerOnDestroy(()=>{r._unregisterOnChange(n)})}(r,t),function(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&ZM(r,t),"submit"!==r.updateOn&&r.markAsTouched()})}(r,t),function(r,t){if(t.valueAccessor.setDisabledState){const n=T=>{t.valueAccessor.setDisabledState(T)};r.registerOnDisabledChange(n),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(n)})}}(r,t)}function ty(r,t){r.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function ZM(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function ry(r,t){const n=r.indexOf(t);n>-1&&r.splice(n,1)}const Ag="VALID",iy="INVALID",Mp="PENDING",Cg="DISABLED";function Pb(r){return(Ob(r)?r.validators:r)||null}function JM(r){return Array.isArray(r)?Mb(r):r||null}function Lb(r,t){return(Ob(t)?t.asyncValidators:r)||null}function KM(r){return Array.isArray(r)?kb(r):r||null}function Ob(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}class Rb{constructor(t,n){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=n,this._composedValidatorFn=JM(this._rawValidators),this._composedAsyncValidatorFn=KM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Ag}get invalid(){return this.status===iy}get pending(){return this.status==Mp}get disabled(){return this.status===Cg}get enabled(){return this.status!==Cg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=JM(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=KM(t)}addValidators(t){this.setValidators(HM(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(HM(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(qM(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(qM(t,this._rawAsyncValidators))}hasValidator(t){return Jv(this._rawValidators,t)}hasAsyncValidator(t){return Jv(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Mp,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=Cg,this.errors=null,this._forEachChild(T=>{T.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(T=>T(!0))}enable(t={}){const n=this._parentMarkedDirty(t.onlySelf);this.status=Ag,this._forEachChild(T=>{T.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(T=>T(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ag||this.status===Mp)&&this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cg:Ag}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Mp,this._hasOwnPendingAsyncValidator=!0;const n=OM(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(T=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(T,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(!1!==n.emitEvent)}get(t){return function(r,t,n){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let T=r;return t.forEach(R=>{T=T instanceof Fb?T.controls.hasOwnProperty(R)?T.controls[R]:null:T instanceof B9&&T.at(R)||null}),T}(this,t)}getError(t,n){const T=n?this.get(n):this;return T&&T.errors?T.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new la,this.statusChanges=new la}_calculateStatus(){return this._allControlsDisabled()?Cg:this.errors?iy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Mp)?Mp:this._anyControlsHaveStatus(iy)?iy:Ag}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ob(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class ay extends Rb{constructor(t=null,n,T){super(Pb(n),Lb(T,n)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(T=>T(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=null,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){ry(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){ry(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Fb extends Rb{constructor(t,n,T){super(Pb(n),Lb(T,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,T={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:T.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,T={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:T.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(T=>{this._throwIfControlMissing(T),this.controls[T].setValue(t[T],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(Object.keys(t).forEach(T=>{this.controls[T]&&this.controls[T].patchValue(t[T],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((T,R)=>{T.reset(t[R],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,T)=>(t[T]=n instanceof ay?n.value:n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,T)=>!!T._syncPendingControls()||n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(n=>{const T=this.controls[n];T&&t(T,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const n of Object.keys(this.controls)){const T=this.controls[n];if(this.contains(n)&&t(T))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,n,T)=>((n.enabled||this.disabled)&&(t[T]=n.value),t))}_reduceChildren(t,n){let T=t;return this._forEachChild((R,Q)=>{T=n(T,R,Q)}),T}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((n,T)=>{if(void 0===t[T])throw new Error(`Must supply a value for form control with name: '${T}'.`)})}}class B9 extends Rb{constructor(t,n,T){super(Pb(n),Lb(T,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[t]}push(t,n={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,T={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:T.emitEvent})}removeAt(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,T={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),n&&(this.controls.splice(t,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:T.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){this._checkAllValuesPresent(t),t.forEach((T,R)=>{this._throwIfControlMissing(R),this.at(R).setValue(T,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){null!=t&&(t.forEach((T,R)=>{this.at(R)&&this.at(R).patchValue(T,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((T,R)=>{T.reset(t[R],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(t=>t instanceof ay?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((n,T)=>!!T._syncPendingControls()||n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((n,T)=>{t(n,T)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((n,T)=>{if(void 0===t[T])throw new Error(`Must supply a value for form control at index: ${T}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const U9={provide:yh,useExisting:Qt(()=>zb)},tk=(()=>Promise.resolve(null))();let zb=(()=>{class r extends yh{constructor(n,T,R,Q){super(),this.control=new ay,this._registered=!1,this.update=new la,this._parent=n,this._setValidators(T),this._setAsyncValidators(R),this.valueAccessor=function(r,t){if(!t)return null;let n,T,R;return Array.isArray(t),t.forEach(Q=>{Q.constructor===Tb?n=Q:function(r){return Object.getPrototypeOf(r.constructor)===dd}(Q)?T=Q:R=Q}),R||T||n||null}(0,Q)}ngOnChanges(n){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in n&&this._updateDisabled(n),function(r,t){if(!r.hasOwnProperty("model"))return!1;const n=r.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?function(r,t){return[...t.path,r]}(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){kg(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){tk.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1})})}_updateDisabled(n){const T=n.isDisabled.currentValue,R=""===T||T&&"false"!==T;tk.then(()=>{R&&!this.control.disabled?this.control.disable():!R&&this.control.disabled&&this.control.enable()})}}return r.\u0275fac=function(n){return new(n||r)(Vr(eu,9),Vr(Gl,10),Vr(mh,10),Vr(qc,10))},r.\u0275dir=xr({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[xs([U9]),Cs,Ni]}),r})(),rk=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Er({type:r}),r.\u0275inj=rn({}),r})();const Q9={provide:qc,useExisting:Qt(()=>oy),multi:!0};function uk(r,t){return null==r?`${t}`:(t&&"object"==typeof t&&(t="Object"),`${r}: ${t}`.slice(0,50))}let oy=(()=>{class r extends dd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;const T=this._getOptionId(n);null==T&&this.setProperty("selectedIndex",-1);const R=uk(T,n);this.setProperty("value",R)}registerOnChange(n){this.onChange=T=>{this.value=this._getOptionValue(T),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(const T of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(T),n))return T;return null}_getOptionValue(n){const T=function(r){return r.split(":")[0]}(n);return this._optionMap.has(T)?this._optionMap.get(T):n}}return r.\u0275fac=function(){let t;return function(T){return(t||(t=ra(r)))(T||r)}}(),r.\u0275dir=xr({type:r,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,T){1&n&&Ya("change",function(Q){return T.onChange(Q.target.value)})("blur",function(){return T.onTouched()})},inputs:{compareWith:"compareWith"},features:[xs([Q9]),Cs]}),r})(),ck=(()=>{class r{constructor(n,T,R){this._element=n,this._renderer=T,this._select=R,this._select&&(this.id=this._select._registerOption())}set ngValue(n){null!=this._select&&(this._select._optionMap.set(this.id,n),this._setElementValue(uk(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return r.\u0275fac=function(n){return new(n||r)(Vr(Gs),Vr(cc),Vr(oy,9))},r.\u0275dir=xr({type:r,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),r})();const t7={provide:qc,useExisting:Qt(()=>Hb),multi:!0};function fk(r,t){return null==r?`${t}`:("string"==typeof t&&(t=`'${t}'`),t&&"object"==typeof t&&(t="Object"),`${r}: ${t}`.slice(0,50))}let Hb=(()=>{class r extends dd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){let T;if(this.value=n,Array.isArray(n)){const R=n.map(Q=>this._getOptionId(Q));T=(Q,he)=>{Q._setSelected(R.indexOf(he.toString())>-1)}}else T=(R,Q)=>{R._setSelected(!1)};this._optionMap.forEach(T)}registerOnChange(n){this.onChange=T=>{const R=[];if(void 0!==T.selectedOptions){const Q=T.selectedOptions;for(let he=0;he<Q.length;he++){const xe=Q.item(he),ze=this._getOptionValue(xe.value);R.push(ze)}}else{const Q=T.options;for(let he=0;he<Q.length;he++){const xe=Q.item(he);if(xe.selected){const ze=this._getOptionValue(xe.value);R.push(ze)}}}this.value=R,n(R)}}_registerOption(n){const T=(this._idCounter++).toString();return this._optionMap.set(T,n),T}_getOptionId(n){for(const T of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(T)._value,n))return T;return null}_getOptionValue(n){const T=function(r){return r.split(":")[0]}(n);return this._optionMap.has(T)?this._optionMap.get(T)._value:n}}return r.\u0275fac=function(){let t;return function(T){return(t||(t=ra(r)))(T||r)}}(),r.\u0275dir=xr({type:r,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,T){1&n&&Ya("change",function(Q){return T.onChange(Q.target)})("blur",function(){return T.onTouched()})},inputs:{compareWith:"compareWith"},features:[xs([t7]),Cs]}),r})(),hk=(()=>{class r{constructor(n,T,R){this._element=n,this._renderer=T,this._select=R,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){null!=this._select&&(this._value=n,this._setElementValue(fk(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(fk(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return r.\u0275fac=function(n){return new(n||r)(Vr(Gs),Vr(cc),Vr(Hb,9))},r.\u0275dir=xr({type:r,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),r})(),wk=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Er({type:r}),r.\u0275inj=rn({imports:[[rk]]}),r})(),Tk=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Er({type:r}),r.\u0275inj=rn({imports:[wk]}),r})();function kk(r,t,n,T){return new(n||(n=Promise))(function(Q,he){function xe(yt){try{Je(T.next(yt))}catch(Ht){he(Ht)}}function ze(yt){try{Je(T.throw(yt))}catch(Ht){he(Ht)}}function Je(yt){yt.done?Q(yt.value):function(Q){return Q instanceof n?Q:new n(function(he){he(Q)})}(yt.value).then(xe,ze)}Je((T=T.apply(r,t||[])).next())})}const d7=["plot"],p7=["*"];class yo{static setModuleName(t){yo.moduleName=t}static getModuleName(){return yo.moduleName}static setPlotly(t){if("object"==typeof t&&"function"!=typeof t.react)throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");yo.plotly=t}static insert(t){return-1===yo.instances.indexOf(t)&&yo.instances.push(t),t}static remove(t){const n=yo.instances.indexOf(t);n>=0&&(yo.instances.splice(n,1),yo.plotly.purge(t))}getInstanceByDivId(t){for(const n of yo.instances)if(n&&n.id===t)return n}getPlotly(){return kk(this,void 0,void 0,function*(){return yield this.waitFor(()=>"waiting"!==this._getPlotly()),this._getPlotly()})}_getPlotly(){if(void 0===yo.plotly)throw new Error("ViaCDN"===yo.moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed");return yo.plotly}waitFor(t){return new Promise(n=>{const T=()=>{t()?n():setTimeout(T,10)};T()})}newPlot(t,n,T,R,Q){return kk(this,void 0,void 0,function*(){if(yield this.waitFor(()=>"waiting"!==this._getPlotly()),Q){const he={data:n,layout:T,config:R,frames:Q};return this._getPlotly().newPlot(t,he).then(()=>yo.insert(t))}return this._getPlotly().newPlot(t,n,T,R).then(()=>yo.insert(t))})}plot(t,n,T,R,Q){if(Q){const he={data:n,layout:T,config:R,frames:Q};return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(t,he):this._getPlotly().newPlot(t,he)}return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(t,n,T,R):this._getPlotly().newPlot(t,n,T,R)}update(t,n,T,R,Q){if(Q){const he={data:n,layout:T,config:R,frames:Q};return this._getPlotly().react(t,he)}return this._getPlotly().react(t,n,T,R)}resize(t){return this._getPlotly().Plots.resize(t)}}yo.\u0275fac=function(t){return new(t||yo)},yo.instances=[],yo.plotly=void 0,yo.moduleName=void 0,yo.\u0275prov=Dn({factory:function(){return new yo},token:yo,providedIn:"root"});let g7=(()=>{class r{constructor(n,T,R){this.plotly=n,this.iterableDiffers=T,this.keyValueDiffers=R,this.defaultClassName="js-plotly-plot",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new la,this.update=new la,this.purge=new la,this.error=new la,this.afterExport=new la,this.afterPlot=new la,this.animated=new la,this.animatingFrame=new la,this.animationInterrupted=new la,this.autoSize=new la,this.beforeExport=new la,this.buttonClicked=new la,this.click=new la,this.plotlyClick=new la,this.clickAnnotation=new la,this.deselect=new la,this.doubleClick=new la,this.framework=new la,this.hover=new la,this.legendClick=new la,this.legendDoubleClick=new la,this.react=new la,this.relayout=new la,this.restyle=new la,this.redraw=new la,this.selected=new la,this.selecting=new la,this.sliderChange=new la,this.sliderEnd=new la,this.sliderStart=new la,this.transitioning=new la,this.transitionInterrupted=new la,this.unhover=new la,this.relayouting=new la,this.treemapclick=new la,this.sunburstclick=new la,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","react","relayout","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","transitioning","transitionInterrupted","unhover","relayouting","treemapclick","sunburstclick"]}ngOnInit(){this.createPlot().then(()=>{const n=this.createFigure();this.initialized.emit(n)}),this.click.observers.length>0&&console.error("DEPRECATED: Reconsider using `(plotlyClick)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}ngOnDestroy(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0);const n=this.createFigure();this.purge.emit(n),yo.remove(this.plotlyInstance)}ngOnChanges(n){let T=!1;const R=n.revision;R&&!R.isFirstChange()&&(T=!0);const Q=n.debug;Q&&!Q.isFirstChange()&&(T=!0),T&&this.updatePlot(),this.updateWindowResizeHandler()}ngDoCheck(){if(this.updateOnlyWithRevision)return!1;let n=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(n=!0):this.layoutDiffer=this.layout?this.keyValueDiffers.find(this.layout).create():void 0),this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(n=!0):this.dataDiffer=Array.isArray(this.data)?this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):void 0),n&&this.plotlyInstance&&this.updatePlot()}getWindow(){return window}getClassName(){let n=[this.defaultClassName];return Array.isArray(this.className)?n=n.concat(this.className):this.className&&n.push(this.className),n.join(" ")}createPlot(){return this.plotly.newPlot(this.plotEl.nativeElement,this.data,this.layout,this.config,this.frames).then(n=>{this.plotlyInstance=n,this.getWindow().gd=this.debug?n:void 0,this.eventNames.forEach(T=>{const R=`plotly_${T.toLowerCase()}`;n.on(R,Q=>this[T].emit(Q))}),n.on("plotly_click",T=>{this.click.emit(T),this.plotlyClick.emit(T)}),this.updateWindowResizeHandler()},n=>{console.error("Error while plotting:",n),this.error.emit(n)})}createFigure(){const n=this.plotlyInstance;return{data:n.data,layout:n.layout,frames:n._transitionData?n._transitionData._frames:null}}updatePlot(){if(!this.plotlyInstance){const T=new Error("Plotly component wasn't initialized");throw this.error.emit(T),T}const n=Object.assign({},this.layout);return this.plotly.update(this.plotlyInstance,this.data,n,this.config,this.frames).then(()=>{const T=this.createFigure();this.update.emit(T)},T=>{console.error("Error while updating plot:",T),this.error.emit(T)})}updateWindowResizeHandler(){this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=()=>this.plotly.resize(this.plotlyInstance),this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)}dataDifferTrackBy(n,T){const R=Object.assign({},T,{uid:""});return JSON.stringify(R)}}return r.\u0275fac=function(n){return new(n||r)(Vr(yo),Vr(ap),Vr(Jh))},r.\u0275cmp=nr({type:r,selectors:[["plotly-plot"]],viewQuery:function(n,T){if(1&n&&function(r,t,n){const T=Ai();T.firstCreatePass&&(v3(T,new d3(r,t,n),-1),2==(2&t)&&(T.staticViewQueries=!0)),m3(T,Dr(),t)}(d7,7),2&n){let R;$0(R=X0())&&(T.plotEl=R.first)}},inputs:{revision:"revision",debug:"debug",useResizeHandler:"useResizeHandler",updateOnLayoutChange:"updateOnLayoutChange",updateOnDataChange:"updateOnDataChange",updateOnlyWithRevision:"updateOnlyWithRevision",data:"data",layout:"layout",config:"config",frames:"frames",style:"style",divId:"divId",className:"className"},outputs:{initialized:"initialized",update:"update",purge:"purge",error:"error",afterExport:"afterExport",afterPlot:"afterPlot",animated:"animated",animatingFrame:"animatingFrame",animationInterrupted:"animationInterrupted",autoSize:"autoSize",beforeExport:"beforeExport",buttonClicked:"buttonClicked",click:"click",plotlyClick:"plotlyClick",clickAnnotation:"clickAnnotation",deselect:"deselect",doubleClick:"doubleClick",framework:"framework",hover:"hover",legendClick:"legendClick",legendDoubleClick:"legendDoubleClick",react:"react",relayout:"relayout",restyle:"restyle",redraw:"redraw",selected:"selected",selecting:"selecting",sliderChange:"sliderChange",sliderEnd:"sliderEnd",sliderStart:"sliderStart",transitioning:"transitioning",transitionInterrupted:"transitionInterrupted",unhover:"unhover",relayouting:"relayouting",treemapclick:"treemapclick",sunburstclick:"sunburstclick"},features:[xs([yo]),Ni],ngContentSelectors:p7,decls:3,vars:3,consts:[[3,"ngClass","ngStyle"],["plot",""]],template:function(n,T){1&n&&(function(r){const t=Dr()[16][6];if(!t.projection){const T=t.projection=Mc(r?r.length:1,null),R=T.slice();let Q=t.child;for(;null!==Q;){const he=r?QA(Q,r):0;null!==he&&(R[he]?R[he].projectionNext=Q:T[he]=Q,R[he]=Q),Q=Q.next}}}(),An(0,"div",0,1),function(r,t=0,n){const T=Dr(),R=Ai(),Q=Oc(R,20+r,16,null,n||null);null===Q.projection&&(Q.projection=t),Ts(),64!=(64&Q.flags)&&function(r,t,n){dr(t[11],0,t,n,o0(r,n,t),We(n.parent||t[6],n,t))}(R,T,Q)}(2),Cn()),2&n&&(fo("ngClass",T.getClassName())("ngStyle",T.style),Yu("id",T.divId))},directives:[vp,Ox],encapsulation:2}),r})(),kp=(()=>{class r{constructor(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Er({type:r}),r.\u0275inj=rn({providers:[yo],imports:[[ad]]}),r})(),Ek=(()=>{class r{constructor(){if(!this.isValid())throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.");yo.setPlotly(r.plotlyjs)}isValid(){return void 0!==r.plotlyjs&&("function"==typeof r.plotlyjs.plot||"function"==typeof r.plotlyjs.newPlot)}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Er({type:r}),r.\u0275inj=rn({providers:[yo],imports:[[ad,kp],kp]}),r.plotlyjs={},r})();function m7(r,t){if(1&r&&(An(0,"div",15),An(1,"div",16),An(2,"span",17),ti(3," Contributions by the biggest 20 contributors in 1992"),Cn(),sa(4,"plotly-plot",18),Cn(),Cn()),2&r){const n=Ul();Pi(4),fo("data",n.chart1.data)("useResizeHandler",!0)}}function v7(r,t){if(1&r&&(An(0,"div",15),An(1,"div",16),An(2,"span",17),ti(3," Percent change from 1992 to 2019 in 20 highest performers"),Cn(),sa(4,"plotly-plot",18),Cn(),Cn()),2&r){const n=Ul();Pi(4),fo("data",n.chart2.data)("useResizeHandler",!0)}}function y7(r,t){if(1&r&&(An(0,"div",15),An(1,"div",16),An(2,"span",17),ti(3," Percent change from 1992 to 2019 in 20 highest performers"),Cn(),sa(4,"plotly-plot",18),Cn(),Cn()),2&r){const n=Ul();Pi(4),fo("data",n.chart3.data)("useResizeHandler",!0)}}function x7(r,t){if(1&r&&(An(0,"div",15),An(1,"div",16),An(2,"span",17),ti(3," Contributions by the lowest 20 contributors in 2019"),Cn(),sa(4,"plotly-plot",18),Cn(),Cn()),2&r){const n=Ul();Pi(4),fo("data",n.chart4.data)("useResizeHandler",!0)}}function b7(r,t){if(1&r&&(An(0,"div",15),An(1,"div",16),An(2,"span",17),ti(3," Percent change from 1992 to 2019 in 20 highest performers"),Cn(),sa(4,"plotly-plot",18),Cn(),Cn()),2&r){const n=Ul();Pi(4),fo("data",n.chart5.data)("useResizeHandler",!0)}}function _7(r,t){if(1&r&&(An(0,"div",15),An(1,"div",16),An(2,"span",17),ti(3," Percent change from 2009 to 2019 in 20 highest performers"),Cn(),sa(4,"plotly-plot",18),Cn(),Cn()),2&r){const n=Ul();Pi(4),fo("data",n.chart6.data)("useResizeHandler",!0)}}function w7(r,t){if(1&r&&(An(0,"div",15),An(1,"div",16),An(2,"span",17),ti(3," Percent change from 2018 to 2019 in 20 highest performers"),Cn(),sa(4,"plotly-plot",18),Cn(),Cn()),2&r){const n=Ul();Pi(4),fo("data",n.chart7.data)("useResizeHandler",!0)}}let T7=(()=>{class r{constructor(n,T,R){this.searchJson=n,this.sanitizer=T,this.http=R,this.list=[]}ngOnInit(){this.selectedValue="0",this.setNavigationDataChart1(),this.setNavigationDataChart2(),this.setNavigationDataChart3(),this.setNavigationDataChart4(),this.setNavigationDataChart5(),this.setNavigationDataChart6(),this.setNavigationDataChart7()}setNavigationDataChart1(){this.searchJson.getCountriesChart1().subscribe(n=>{this.chart1={data:n}})}setNavigationDataChart2(){this.searchJson.getCountriesChart2().subscribe(n=>{this.chart2={data:n}})}setNavigationDataChart3(){this.searchJson.getCountriesChart3().subscribe(n=>{this.chart3={data:n}})}setNavigationDataChart4(){this.searchJson.getCountriesChart4().subscribe(n=>{this.chart4={data:n}})}setNavigationDataChart5(){this.searchJson.getCountriesChart5().subscribe(n=>{this.chart5={data:n}})}setNavigationDataChart6(){this.searchJson.getCountriesChart6().subscribe(n=>{this.chart6={data:n}})}setNavigationDataChart7(){this.searchJson.getCountriesChart7().subscribe(n=>{this.chart7={data:n}})}}return r.\u0275fac=function(n){return new(n||r)(Vr(Mg),Vr(od),Vr(hd))},r.\u0275cmp=nr({type:r,selectors:[["app-dropdown-list"]],decls:28,vars:8,consts:[["id","link2",1,"container","flex_column"],["id","link1",1,"text-center","title"],[1,"row"],[1,"col-md-12","col-lg-12","pad0"],[1,"form-control","width12",3,"ngModel","ngModelChange"],["value","0","selected",""],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],[1,"chart_container"],["class","flex_center  animated animate__slideInLeft ",4,"ngIf"],["class","flex_center animated animate__slideInLeft",4,"ngIf"],[1,"flex_center","animated","animate__slideInLeft"],[1,"flex_column"],[1,"text-center","chart_title"],[1,"chart","flex_center",3,"data","useResizeHandler"]],template:function(n,T){1&n&&(An(0,"div",0),An(1,"h1",1),ti(2,"Index of Contributions to Planetary Well-being (ICP)"),Cn(),An(3,"div",2),An(4,"div",3),An(5,"select",4),Ya("ngModelChange",function(Q){return T.selectedValue=Q}),An(6,"option",5),ti(7,"Chart 1"),Cn(),An(8,"option",6),ti(9,"Chart 2"),Cn(),An(10,"option",7),ti(11,"Chart 3"),Cn(),An(12,"option",8),ti(13,"Chart 4"),Cn(),An(14,"option",9),ti(15,"Chart 5"),Cn(),An(16,"option",10),ti(17,"Chart 6"),Cn(),An(18,"option",11),ti(19,"Chart 7"),Cn(),Cn(),Cn(),Cn(),An(20,"div",12),lu(21,m7,5,2,"div",13),lu(22,v7,5,2,"div",14),lu(23,y7,5,2,"div",14),lu(24,x7,5,2,"div",14),lu(25,b7,5,2,"div",14),lu(26,_7,5,2,"div",14),lu(27,w7,5,2,"div",14),Cn(),Cn()),2&n&&(Pi(5),fo("ngModel",T.selectedValue),Pi(16),fo("ngIf",0==T.selectedValue),Pi(1),fo("ngIf",1==T.selectedValue),Pi(1),fo("ngIf",2==T.selectedValue),Pi(1),fo("ngIf",3==T.selectedValue),Pi(1),fo("ngIf",4==T.selectedValue),Pi(1),fo("ngIf",5==T.selectedValue),Pi(1),fo("ngIf",6==T.selectedValue))},directives:[oy,YM,zb,ck,hk,Av,g7],styles:['.container[_ngcontent-%COMP%]{display:block;width:100%;height:auto!important}.chart[_ngcontent-%COMP%]{width:100vw!important}.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:"roboto_black";font-size:36px;padding:4vw 4vw 0;text-shadow:0px 15px 5px rgba(0,0,0,.1),10px 20px 5px rgba(0,0,0,.05),-10px 20px 5px rgba(0,0,0,.05)}.chart_container[_ngcontent-%COMP%]{width:70vw!important}.chart_container[_ngcontent-%COMP%]   .chart_title[_ngcontent-%COMP%]{font-family:"roboto_black";font-size:18px;padding:1vw;display:block;width:100%}.div_center[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.flex_column[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center}.flex_center[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}.pos_relative[_ngcontent-%COMP%]{position:relative;left:3%}.animated[_ngcontent-%COMP%]{animation-duration:1.5s}@keyframes slideInLeft{0%{transform:translate(-100%);visibility:visible}to{transform:translate(0)}}.animate__slideInLeft[_ngcontent-%COMP%]{animation-name:slideInLeft}.pad0[_ngcontent-%COMP%]{padding:0}.width12[_ngcontent-%COMP%]{width:100%;min-width:110px;padding-left:4px}.js-plotly-plot[_ngcontent-%COMP%]   .plotly[_ngcontent-%COMP%]   .modebar[_ngcontent-%COMP%]   .js-plotly-plot[_ngcontent-%COMP%]   .plotly[_ngcontent-%COMP%]   .modebar-btn[_ngcontent-%COMP%]{display:none!important;visibility:hidden!important}']}),r})(),M7=(()=>{class r{constructor(n,T,R,Q){this.router=n,this.searchJson=T,this.sanitizer=R,this.http=Q,this.list=[]}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)(Vr(qs),Vr(Mg),Vr(od),Vr(hd))},r.\u0275cmp=nr({type:r,selectors:[["app-home"]],decls:2,vars:0,template:function(n,T){1&n&&(sa(0,"app-card"),sa(1,"app-dropdown-list"))},directives:[x9,T7],styles:[""]}),r})(),ly=(()=>{class r{constructor(n){this.router=n}scrollTo(n){const{url:T,elementId:R}=this.__getUrlAndElementId(n);console.log("url : ",T),console.log("element id : ",R),T&&(this.router.navigate([T]),R&&this.scrollToElementById(R))}__getUrlAndElementId(n){const T=n.split("#");return{url:T[0],elementId:T[1]}}scrollToElementById(n){const T=this.__getElementById(n);this.scrollToElement(T)}__getElementById(n){return console.log("element id : ",n),document.querySelector(`#${n}`)}scrollToElement(n){n.scrollIntoView({behavior:"smooth"})}}return r.\u0275fac=function(n){return new(n||r)(yi(qs))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();class D7 extends i{constructor(t,n){super()}schedule(t,n=0){return this}}let Dk=(()=>{class r{constructor(n,T=r.now){this.SchedulerAction=n,this.now=T}schedule(n,T=0,R){return new this.SchedulerAction(this,n).schedule(R,T)}}return r.now=()=>Date.now(),r})();class xh extends Dk{constructor(t,n=Dk.now){super(t,()=>xh.delegate&&xh.delegate!==this?xh.delegate.now():n()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,n=0,T){return xh.delegate&&xh.delegate!==this?xh.delegate.schedule(t,n,T):super.schedule(t,n,T)}flush(t){const{actions:n}=this;if(this.active)return void n.push(t);let T;this.active=!0;do{if(T=t.execute(t.state,t.delay))break}while(t=n.shift());if(this.active=!1,T){for(;t=n.shift();)t.unsubscribe();throw T}}}new xh(class extends D7{constructor(t,n){super(t,n),this.scheduler=t,this.work=n,this.pending=!1}schedule(t,n=0){if(this.closed)return this;this.state=t;const T=this.id,R=this.scheduler;return null!=T&&(this.id=this.recycleAsyncId(R,T,n)),this.pending=!0,this.delay=n,this.id=this.id||this.requestAsyncId(R,this.id,n),this}requestAsyncId(t,n,T=0){return setInterval(t.flush.bind(t,this),T)}recycleAsyncId(t,n,T=0){if(null!==T&&this.delay===T&&!1===this.pending)return n;clearInterval(n)}execute(t,n){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const T=this._execute(t,n);if(T)return T;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,n){let R,T=!1;try{this.work(t)}catch(Q){T=!0,R=!!Q&&Q||new Error(Q)}if(T)return this.unsubscribe(),R}_unsubscribe(){const t=this.id,n=this.scheduler,T=n.actions,R=T.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==R&&T.splice(R,1),null!=t&&(this.id=this.recycleAsyncId(n,t,null)),this.delay=null}});class _c{constructor(t,n,T){this.kind=t,this.value=n,this.error=T,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,n,T){switch(this.kind){case"N":return t&&t(this.value);case"E":return n&&n(this.error);case"C":return T&&T()}}accept(t,n,T){return t&&"function"==typeof t.next?this.observe(t):this.do(t,n,T)}toObservable(){switch(this.kind){case"N":return Ca(this.value);case"E":return function(r,t){return new A(n=>n.error(r))}(this.error);case"C":return Iv()}throw new Error("unexpected notification kind value")}static createNext(t){return void 0!==t?new _c("N",t):_c.undefinedValueNotification}static createError(t){return new _c("E",void 0,t)}static createComplete(){return _c.completeNotification}}_c.completeNotification=new _c("C"),_c.undefinedValueNotification=new _c("N",void 0);let Fk=(()=>{class r{constructor(n){this.eventManager=n,this.resizeSubject=new N,this.eventManager.addGlobalEventListener("window","resize",this.onResize.bind(this)),this.eventManager.addGlobalEventListener("window","onload",this.onLoaded.bind(this))}get onResize$(){return this.resizeSubject.asObservable()}onResize(n){this.resizeSubject.next(n.target)}onLoaded(n){this.windowWidth=n.target}}return r.\u0275fac=function(n){return new(n||r)(yi(ug))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})(),Yb=(()=>{class r{constructor(n){this.errorHandler=n}log(n,...T){eg()&&console.log(n,...T)}error(n){this.errorHandler.handleError(n)}warn(n,...T){console.warn(n,...T)}}return r.\u0275fac=function(n){return new(n||r)(yi(Dc))},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})();const zk=new ma("WindowToken");class Zb{get nativeWindow(){throw new Error("Not implemented.")}}const nR=[{provide:Zb,useClass:(()=>{class r extends Zb{constructor(){super()}get nativeWindow(){return window}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})()},{provide:zk,useFactory:function(r,t){return H5(t)?r.nativeWindow:{setTimeout:(T,R)=>{},clearTimeout:T=>{}}},deps:[Zb,dp]}],$b=new ma("DocumentToken");class Xb{get nativeDocument(){throw new Error("Not implemented.")}}const aR=[{provide:Xb,useClass:(()=>{class r extends Xb{constructor(){super()}get nativeDocument(){return document}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=Dn({token:r,factory:r.\u0275fac}),r})()},{provide:$b,useFactory:function(r,t){return H5(t)?r.nativeDocument:{hidden:!1,visibilityState:"visible"}},deps:[Xb,dp]}];let Hk=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Er({type:r}),r.\u0275inj=rn({providers:[nR,Fk,aR,Yb],imports:[[ad]]}),r})();var uR=oe(918);Ek.plotlyjs=uR;let cR=(()=>{class r{constructor(n){this.router=n}}return r.\u0275fac=function(n){return new(n||r)(yi(qs))},r.\u0275mod=Er({type:r}),r.\u0275inj=rn({providers:[ly],imports:[[sM.forRoot([{path:"Chart",component:i9},{path:"Home",component:M7},{path:"**",redirectTo:"/Home"}]),Ek,Tk,iT,ad,Hk],sM]}),r})(),fR=(()=>{class r{constructor(n,T,R,Q){this.searchJson=n,this.sanitizer=T,this.http=R,this.scrollService=Q,this.nav=[],this.scrollVal=!1}ngOnInit(){this.searchJson.getMenuItemList().subscribe(n=>{this.json=n.nav})}scrollToId(n){console.log("element id : ",n),this.scrollService.scrollToElementById(n)}scrollToElement(n){this.scrollService.scrollToElement(n)}scrollMe(n){this.scrollVal=window.scrollY>100}}return r.\u0275fac=function(n){return new(n||r)(Vr(Mg),Vr(od),Vr(hd),Vr(ly))},r.\u0275cmp=nr({type:r,selectors:[["app-header"]],hostBindings:function(n,T){1&n&&Ya("scroll",function(Q){return T.scrollMe(Q)},!1,um)},decls:80,vars:22,consts:[["id","header",1,"fixed-top",3,"ngClass","scroll"],[1,"container","d-flex","justify-content-start"],[1,"logo"],["href","index.html"],["src","./assets/img/EarthIndex-white.png","alt","",1,"img-fluid"],[1,"nav-wrapper"],[1,"js-nav-toggle"],["role","navigation"],[1,"nav-toggle"],[1,"nav-back"],[1,"nav-title"],[1,"nav-close"],[1,"has-dropdown"],["href","#"],[1,"js-nav-toggle",3,"click"]],template:function(n,T){1&n&&(An(0,"header",0),Ya("scroll",function(Q){return T.scrollMe(Q)}),An(1,"div",1),An(2,"div",2),An(3,"h1"),An(4,"a",3),sa(5,"img",4),Cn(),Cn(),Cn(),An(6,"div",5),An(7,"a",6),sa(8,"span"),Cn(),An(9,"nav",7),An(10,"div",8),sa(11,"span",9),An(12,"span",10),ti(13),Cn(),sa(14,"span",11),Cn(),An(15,"ul"),An(16,"li",12),An(17,"a",13),ti(18),Cn(),An(19,"ul"),An(20,"li"),An(21,"a",14),Ya("click",function(){return T.scrollToId("link1")}),ti(22),Cn(),Cn(),An(23,"li"),An(24,"a",14),Ya("click",function(){return T.scrollToId("link2")}),ti(25),Cn(),Cn(),An(26,"li"),An(27,"a",14),Ya("click",function(){return T.scrollToId("link3")}),ti(28),Cn(),Cn(),An(29,"li"),An(30,"a",14),Ya("click",function(){return T.scrollToId("link4")}),ti(31),Cn(),Cn(),Cn(),Cn(),An(32,"li",12),An(33,"a",13),ti(34),Cn(),An(35,"ul"),An(36,"li"),An(37,"a",14),Ya("click",function(){return T.scrollToId("index_contribution_plant")}),ti(38),Cn(),Cn(),An(39,"li"),An(40,"a",14),Ya("click",function(){return T.scrollToId("index_contribution_life")}),ti(41),Cn(),Cn(),An(42,"li"),An(43,"a",14),Ya("click",function(){return T.scrollToId("index_contribution_integrity")}),ti(44),Cn(),Cn(),An(45,"li"),An(46,"a",14),Ya("click",function(){return T.scrollToId("index_contribution_justice")}),ti(47),Cn(),Cn(),Cn(),Cn(),An(48,"li",12),An(49,"a",13),ti(50),Cn(),An(51,"ul"),An(52,"li"),An(53,"a",14),Ya("click",function(){return T.scrollToId("Improving-contributions-planet")}),ti(54),Cn(),Cn(),An(55,"li"),An(56,"a",14),Ya("click",function(){return T.scrollToId("Improving-contributions-life")}),ti(57),Cn(),Cn(),An(58,"li"),An(59,"a",14),Ya("click",function(){return T.scrollToId("Improving-contributions-integrity")}),ti(60),Cn(),Cn(),An(61,"li"),An(62,"a",14),Ya("click",function(){return T.scrollToId("Improving-contributions-justice")}),ti(63),Cn(),Cn(),Cn(),Cn(),An(64,"li",12),An(65,"a",13),ti(66),Cn(),An(67,"ul"),An(68,"li"),An(69,"a",14),Ya("click",function(){return T.scrollToId("Improve-understanding-planet")}),ti(70),Cn(),Cn(),An(71,"li"),An(72,"a",14),Ya("click",function(){return T.scrollToId("Improve-understanding-life")}),ti(73),Cn(),Cn(),An(74,"li"),An(75,"a",14),Ya("click",function(){return T.scrollToId("Improve-understanding-integrity")}),ti(76),Cn(),Cn(),An(77,"li"),An(78,"a",14),Ya("click",function(){return T.scrollToId("Improve-understanding-justice")}),ti(79),Cn(),Cn(),Cn(),Cn(),Cn(),Cn(),Cn(),Cn(),Cn()),2&n&&(fo("ngClass",T.scrollVal?"header-scrolled":"header-transparent"),Pi(13),cf(" ",T.json[0].menufirst.title," "),Pi(5),ys(T.json[0].menufirst.title),Pi(4),ys(T.json[0].menufirst.submenu.item1),Pi(3),ys(T.json[0].menufirst.submenu.item2),Pi(3),ys(T.json[0].menufirst.submenu.item3),Pi(3),ys(T.json[0].menufirst.submenu.item4),Pi(3),ys(T.json[0].menusecond.title),Pi(4),ys(T.json[0].menusecond.submenu.item1),Pi(3),ys(T.json[0].menusecond.submenu.item2),Pi(3),ys(T.json[0].menusecond.submenu.item3),Pi(3),ys(T.json[0].menusecond.submenu.item4),Pi(3),ys(T.json[0].menuthird.title),Pi(4),ys(T.json[0].menuthird.submenu.item1),Pi(3),ys(T.json[0].menuthird.submenu.item2),Pi(3),ys(T.json[0].menuthird.submenu.item3),Pi(3),ys(T.json[0].menuthird.submenu.item4),Pi(3),ys(T.json[0].menufour.title),Pi(4),ys(T.json[0].menufour.submenu.item1),Pi(3),ys(T.json[0].menufour.submenu.item2),Pi(3),ys(T.json[0].menufour.submenu.item3),Pi(3),ys(T.json[0].menufour.submenu.item4))},directives:[vp],styles:['#header[_ngcontent-%COMP%]{height:70px;z-index:997;transition:all .5s}#header.header-transparent[_ngcontent-%COMP%]{background:rgba(42,44,57,.4)}#header.header-scrolled[_ngcontent-%COMP%]{background:rgba(42,44,57,.9)}#header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:28px;margin:0;padding:0;line-height:1;font-weight:700;letter-spacing:1px}#header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], #header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff;text-decoration:none}#header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:0;margin:0;max-height:70px}.nav-wrapper[_ngcontent-%COMP%]{width:35%;min-width:auto;height:100vh;transition:transform .3s;transform:translate(100%);z-index:9999;right:0;position:fixed;background-color:#35871938}.nav-wrapper.show-menu[_ngcontent-%COMP%]{transform:translate(0)}.nav-wrapper.show-menu[_ngcontent-%COMP%] > .js-nav-toggle[_ngcontent-%COMP%]{left:92.5%;margin:0;z-index:99999;border:none;top:.5%}.nav-wrapper.show-menu[_ngcontent-%COMP%]   .js-nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{width:14px;box-shadow:0 0 0 1px #fff}.nav-wrapper.show-menu[_ngcontent-%COMP%]   .js-nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{width:14px;box-shadow:0 0 0 1px #fff}.js-nav-toggle[_ngcontent-%COMP%]{position:absolute;top:0;left:-40%;width:43px;height:40px;margin:15px 0 0 15px;display:block;float:left;padding:0;color:#345;z-index:2;cursor:pointer}.js-nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;background-color:#fff;height:2px;display:block;width:22px;margin:17px auto 0;transition:all .4s;transition-delay:.3s}.js-nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before, .js-nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{content:"";position:absolute;display:block;width:20px;height:0;left:1px;top:50%;margin-top:-7px;transition:all .3s .3s;background-color:#fff}.js-nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{box-shadow:0 14px 0 1px #fff}.js-nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{box-shadow:0 0 0 1px #fff}.show-menu[_ngcontent-%COMP%]   .js-nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:transparent}.show-menu[_ngcontent-%COMP%]   .js-nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before{transform:rotate(-45deg)}.show-menu[_ngcontent-%COMP%]   .js-nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{transform:rotate(45deg)}.show-menu[_ngcontent-%COMP%]   .js-nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:before, .show-menu[_ngcontent-%COMP%]   .js-nav-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:after{margin-top:0;box-shadow:0 0 0 1px #fff}nav[_ngcontent-%COMP%]{position:relative;left:0;top:0;height:100%;width:100%;overflow-x:hidden;overflow-y:hidden;background-color:#125912;opacity:.8;font-family:"roboto_medium";font-size:16px}nav[_ngcontent-%COMP%]   .nav-toggle[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;font-family:"roboto_bold";font-size:14px;padding:.45em .6em;background:#125912;color:#fff;z-index:9999;cursor:pointer;transition:backgroun-color .2s}nav[_ngcontent-%COMP%]   .nav-toggle[_ngcontent-%COMP%]:hover{background-color:#345}nav[_ngcontent-%COMP%]   .nav-toggle.back-visible[_ngcontent-%COMP%]   .nav-back[_ngcontent-%COMP%]{opacity:1}nav[_ngcontent-%COMP%]   .nav-toggle.back-visible[_ngcontent-%COMP%]   .nav-title[_ngcontent-%COMP%]{transform:translate(40px);white-space:nowrap;text-overflow:ellipsis;overflow:hidden;display:block;width:80%;position:absolute}nav[_ngcontent-%COMP%]   .nav-title[_ngcontent-%COMP%]{position:absolute;left:0;top:.7em;padding-left:.6em;transition:transform .3s;font-family:"roboto_regular";font-size:16px}nav[_ngcontent-%COMP%]   .nav-back[_ngcontent-%COMP%]{display:inline-block;position:relative;width:30px;height:30px;vertical-align:middle;z-index:1;opacity:0;transition:opacity .2s}nav[_ngcontent-%COMP%]   .nav-back[_ngcontent-%COMP%]:before, nav[_ngcontent-%COMP%]   .nav-back[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%}nav[_ngcontent-%COMP%]   .nav-back[_ngcontent-%COMP%]:before{left:50%;width:9px;height:9px;border:2px solid currentcolor;border-right-color:transparent;border-bottom-color:transparent;transform:translate(-50%,-50%) rotate(-45deg)}nav[_ngcontent-%COMP%]   .nav-back[_ngcontent-%COMP%]:after{left:28%;width:15px;height:2px;background-color:currentcolor;margin-top:-1px}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{display:block;position:relative;top:20%;padding:.7em;border-bottom:1px solid #fff;color:#fff;text-decoration:none;transition:color .15s,background-color .15s;font-family:"roboto_regular";font-size:14px}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#333;background-color:#fff;font-family:"roboto_bold";font-size:14px}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:45px 0 0;transition:transform .3s;background-color:#268b42;position:relative;left:0;top:0;height:100%;width:100%;opacity:1}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:none;left:100%}nav[_ngcontent-%COMP%]   li.has-dropdown[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{padding-right:2.5em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}nav[_ngcontent-%COMP%]   li.has-dropdown[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:after{content:"";position:absolute;top:50%;right:1em;width:9px;height:9px;border:1.8px solid currentcolor;border-left-color:transparent;border-top-color:transparent;transform:translateY(-90%) rotate(-45deg);transition:transform .3s;transform-origin:100%}nav[_ngcontent-%COMP%]   li.nav-dropdown-active[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:block;position:absolute;top:0}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.js-nav-toggle[_ngcontent-%COMP%]{position:relative;left:0!important;border-bottom:1px solid #fff;color:#fff;text-decoration:none;width:100%;margin:0}nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.js-nav-toggle[_ngcontent-%COMP%]:hover{color:#000}']}),r.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),hR=(()=>{class r{constructor(n){this.scrollService=n}ngOnInit(){}scrollToId(n){console.log("element id : ",n),this.scrollService.scrollToElementById(n)}}return r.\u0275fac=function(n){return new(n||r)(Vr(ly))},r.\u0275cmp=nr({type:r,selectors:[["app-carousel"]],decls:26,vars:0,consts:[["id","hero",1,"d-flex","flex-column","justify-content-end","align-items-center"],["id","heroCarousel","data-bs-interval","30000","data-bs-ride","carousel",1,"container","carousel","carousel-fade"],[1,"carousel-item","active"],[1,"carousel-container"],["loop","","muted","","autoplay","","oncanplay","this.play()","onloadedmetadata","this.muted = false"],["src","assets/background_video/video.mp4","type","video/mp4"],[1,"animate__animated","animate__fadeInUp"],[1,"d-block","font-italic"],[1,"carousel-item"],["src","assets/background_video/190915_A_04_Drone_09.mp4","type","video/mp4"],[1,"d-block","small"],["src","assets/background_video/210329_06B_Bali_1080p_005.mp4","type","video/mp4"]],template:function(n,T){1&n&&(An(0,"section",0),An(1,"div",1),An(2,"div",2),An(3,"div",3),An(4,"video",4),sa(5,"source",5),Cn(),An(6,"p",6),ti(7,"\u201cEach tree not only has a different size and shape, but color and character, and each board from each tree has a distinctly different personality.\u201d "),An(8,"span",7),ti(9,"\u2014 Mira Nakashima"),Cn(),Cn(),Cn(),Cn(),An(10,"div",8),An(11,"div",3),An(12,"video",4),sa(13,"source",9),Cn(),An(14,"p",6),ti(15,"\u201cEach tree not only has a different size and shape, but color and character, and each board from each tree has a distinctly different personality.\u201d "),An(16,"span",10),ti(17,"\u2014 Praveen Kadam"),Cn(),Cn(),Cn(),Cn(),An(18,"div",8),An(19,"div",3),An(20,"video",4),sa(21,"source",11),Cn(),An(22,"p",6),ti(23,"\u201cEach tree not only has a different size and shape, but color and character, and each board from each tree has a distinctly different personality.\u201d "),An(24,"span",7),ti(25,"\u2014 Mira Sinha"),Cn(),Cn(),Cn(),Cn(),Cn(),Cn())},styles:['#hero[_ngcontent-%COMP%]{width:100%;overflow:hidden;position:relative;background:linear-gradient(0deg,#2a2c39 0%,#33364a 100%);padding:0}#hero[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;align-items:center;flex-direction:column;text-align:right;position:relative;height:80vh;padding-top:60px}#hero[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{position:absolute}#hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:80%;animation-delay:.4s;font-size:18px;margin:0 auto 30px;color:#fff;padding:10px;border-radius:5px;font-family:"roboto_regular"}#hero[_ngcontent-%COMP%]   .carousel-control-prev[_ngcontent-%COMP%], #hero[_ngcontent-%COMP%]   .carousel-control-next[_ngcontent-%COMP%]{width:10%;text-decoration:none}#hero[_ngcontent-%COMP%]   .carousel-control-next-icon[_ngcontent-%COMP%], #hero[_ngcontent-%COMP%]   .carousel-control-prev-icon[_ngcontent-%COMP%]{background:none;font-size:48px;line-height:1;width:auto;height:auto;text-decoration:none}#hero[_ngcontent-%COMP%]   .carousel-control-bottom-icon[_ngcontent-%COMP%]{background:none;font-size:78px;line-height:1;width:auto;height:auto;text-decoration:none;color:#fff;cursor:pointer}#hero[_ngcontent-%COMP%]   .btn-get-started[_ngcontent-%COMP%]{font-family:"Raleway",sans-serif;font-weight:500;font-size:14px;letter-spacing:1px;display:inline-block;padding:12px 32px;border-radius:50px;transition:.5s;line-height:1;margin:10px;color:#ef6603;animation-delay:.8s;border:2px solid #ffffff;text-decoration:none;background:#ffffff}#hero[_ngcontent-%COMP%]   .btn-get-started[_ngcontent-%COMP%]:hover{background:#ef6603;color:#fff;text-decoration:none}@media (min-width: 1024px){#hero[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:60%}#hero[_ngcontent-%COMP%]   .carousel-control-prev[_ngcontent-%COMP%], #hero[_ngcontent-%COMP%]   .carousel-control-next[_ngcontent-%COMP%]{width:5%}}@media (max-width: 768px){#hero[_ngcontent-%COMP%]   .carousel-container[_ngcontent-%COMP%]{height:90vh}#hero[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px}}.hero-waves[_ngcontent-%COMP%]{display:block;width:100%;height:60px;position:relative}.wave1[_ngcontent-%COMP%]   use[_ngcontent-%COMP%]{animation:move-forever1 10s linear infinite;animation-delay:-2s}.wave2[_ngcontent-%COMP%]   use[_ngcontent-%COMP%]{animation:move-forever2 8s linear infinite;animation-delay:-2s}.wave3[_ngcontent-%COMP%]   use[_ngcontent-%COMP%]{animation:move-forever3 6s linear infinite;animation-delay:-2s}@keyframes move-forever1{0%{transform:translate(85px)}to{transform:translate(-90px)}}@keyframes move-forever2{0%{transform:translate(-90px)}to{transform:translate(85px)}}@keyframes move-forever3{0%{transform:translate(-90px)}to{transform:translate(85px)}}section[_ngcontent-%COMP%]{padding:60px 0;overflow:hidden}.section-title[_ngcontent-%COMP%]{padding-bottom:40px}']}),r})(),dR=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=nr({type:r,selectors:[["app-improving-contributions"]],decls:6,vars:0,consts:[["id","link3",1,"container","flex_column"],[1,"text-center","title"]],template:function(n,T){1&n&&(An(0,"div",0),An(1,"h1",1),ti(2," Improving Our Contributions to Our Planet"),Cn(),An(3,"div"),An(4,"p"),ti(5,"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,"),Cn(),Cn(),Cn())},styles:['.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:"roboto_black";font-size:36px;padding:4vw 4vw 0;text-shadow:0px 15px 5px rgb(0 0 0 / 10%),10px 20px 5px rgb(0 0 0 / 5%),-10px 20px 5px rgb(0 0 0 / 5%)}']}),r})(),pR=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=nr({type:r,selectors:[["app-improve-understanding"]],decls:6,vars:0,consts:[["id","link4",1,"container","flex_column"],[1,"text-center","title"]],template:function(n,T){1&n&&(An(0,"div",0),An(1,"h1",1),ti(2,"Improve Our Understanding about Contributions"),Cn(),An(3,"div"),An(4,"p"),ti(5,"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,"),Cn(),Cn(),Cn())},styles:['.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:"roboto_black";font-size:36px;padding:4vw 4vw 0;text-shadow:0px 15px 5px rgb(0 0 0 / 10%),10px 20px 5px rgb(0 0 0 / 5%),-10px 20px 5px rgb(0 0 0 / 5%)}']}),r})(),gR=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=nr({type:r,selectors:[["app-index-contributions-planet"]],decls:6,vars:0,consts:[["id","index_contribution_plant",1,"container","flex_column"],[1,"text-center","title"]],template:function(n,T){1&n&&(An(0,"div",0),An(1,"h1",1),ti(2,"Index of Contributions to the Well-being of our Planet"),Cn(),An(3,"div"),An(4,"p"),ti(5,"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,"),Cn(),Cn(),Cn())},styles:['.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:"roboto_black";font-size:36px;padding:4vw 4vw 0;text-shadow:0px 15px 5px rgb(0 0 0 / 10%),10px 20px 5px rgb(0 0 0 / 5%),-10px 20px 5px rgb(0 0 0 / 5%)}']}),r})(),mR=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=nr({type:r,selectors:[["app-index-contributions-life"]],decls:6,vars:0,consts:[["id","index_contribution_life",1,"container","flex_column"],[1,"text-center","title"]],template:function(n,T){1&n&&(An(0,"div",0),An(1,"h1",1),ti(2,"Index of Respect and Care for the Community of Life"),Cn(),An(3,"div"),An(4,"p"),ti(5,"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,"),Cn(),Cn(),Cn())},styles:['.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:"roboto_black";font-size:36px;padding:4vw 4vw 0;text-shadow:0px 15px 5px rgb(0 0 0 / 10%),10px 20px 5px rgb(0 0 0 / 5%),-10px 20px 5px rgb(0 0 0 / 5%)}']}),r})(),vR=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=nr({type:r,selectors:[["app-index-contributions-integrity"]],decls:6,vars:0,consts:[["id","index_contribution_integrity",1,"container","flex_column"],[1,"text-center","title"]],template:function(n,T){1&n&&(An(0,"div",0),An(1,"h1",1),ti(2,"Index of Respect and Care for Ecological Integrity"),Cn(),An(3,"div"),An(4,"p"),ti(5,"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,"),Cn(),Cn(),Cn())},styles:['.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:"roboto_black";font-size:36px;padding:4vw 4vw 0;text-shadow:0px 15px 5px rgb(0 0 0 / 10%),10px 20px 5px rgb(0 0 0 / 5%),-10px 20px 5px rgb(0 0 0 / 5%)}']}),r})(),yR=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=nr({type:r,selectors:[["app-index-contributions-justice"]],decls:7,vars:0,consts:[["id","index_contribution_justice",1,"container","flex_column"],[1,"text-center","title"],[1,"clearfix1"],["src","./assets/img/13.jpg","alt","...",1,"rounded","float-left",2,"width","20%"]],template:function(n,T){1&n&&(An(0,"div",0),An(1,"h1",1),ti(2,"Index of Respect and Care for Social and Economic Justice"),Cn(),An(3,"div",2),sa(4,"img",3),An(5,"p"),ti(6," Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,"),Cn(),Cn(),Cn())},styles:['.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:"roboto_black";font-size:36px;padding:4vw 4vw 0;text-shadow:0px 15px 5px rgb(0 0 0 / 10%),10px 20px 5px rgb(0 0 0 / 5%),-10px 20px 5px rgb(0 0 0 / 5%)}']}),r})(),xR=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=nr({type:r,selectors:[["app-improving-contributions-planet"]],decls:6,vars:0,consts:[["id","Improving-contributions-planet",1,"container","flex_column"],[1,"text-center","title"]],template:function(n,T){1&n&&(An(0,"div",0),An(1,"h1",1),ti(2,"To the Well-being of our Planet"),Cn(),An(3,"div"),An(4,"p"),ti(5,"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,"),Cn(),Cn(),Cn())},styles:['.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:"roboto_black";font-size:36px;padding:4vw 4vw 0;text-shadow:0px 15px 5px rgb(0 0 0 / 10%),10px 20px 5px rgb(0 0 0 / 5%),-10px 20px 5px rgb(0 0 0 / 5%)}']}),r})(),bR=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=nr({type:r,selectors:[["app-improving-contributions-life"]],decls:6,vars:0,consts:[["id","Improving-contributions-life",1,"container","flex_column"],[1,"text-center","title"]],template:function(n,T){1&n&&(An(0,"div",0),An(1,"h1",1),ti(2,"Through Respect and Care for the Community of Life"),Cn(),An(3,"div"),An(4,"p"),ti(5,"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,"),Cn(),Cn(),Cn())},styles:['.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:"roboto_black";font-size:36px;padding:4vw 4vw 0;text-shadow:0px 15px 5px rgb(0 0 0 / 10%),10px 20px 5px rgb(0 0 0 / 5%),-10px 20px 5px rgb(0 0 0 / 5%)}']}),r})(),_R=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=nr({type:r,selectors:[["app-improving-contributions-integrity"]],decls:6,vars:0,consts:[["id","Improving-contributions-integrity",1,"container","flex_column"],[1,"text-center","title"]],template:function(n,T){1&n&&(An(0,"div",0),An(1,"h1",1),ti(2,"Through Respect and Care for Social and Economic Justice"),Cn(),An(3,"div"),An(4,"p"),ti(5,"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,"),Cn(),Cn(),Cn())},styles:['.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:"roboto_black";font-size:36px;padding:4vw 4vw 0;text-shadow:0px 15px 5px rgb(0 0 0 / 10%),10px 20px 5px rgb(0 0 0 / 5%),-10px 20px 5px rgb(0 0 0 / 5%)}']}),r})(),wR=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=nr({type:r,selectors:[["app-improving-contributions-justice"]],decls:6,vars:0,consts:[["id","Improving-contributions-justice",1,"container","flex_column"],[1,"text-center","title"]],template:function(n,T){1&n&&(An(0,"div",0),An(1,"h1",1),ti(2,"Through Respect and Care for Social and Economic Justice"),Cn(),An(3,"div"),An(4,"p"),ti(5,"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,"),Cn(),Cn(),Cn())},styles:['.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:"roboto_black";font-size:36px;padding:4vw 4vw 0;text-shadow:0px 15px 5px rgb(0 0 0 / 10%),10px 20px 5px rgb(0 0 0 / 5%),-10px 20px 5px rgb(0 0 0 / 5%)}']}),r})(),TR=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=nr({type:r,selectors:[["app-improve-understanding-planet"]],decls:6,vars:0,consts:[["id","Improve-understanding-planet",1,"container","flex_column"],[1,"text-center","title"]],template:function(n,T){1&n&&(An(0,"div",0),An(1,"h1",1),ti(2,"To the Well-being of our Planet"),Cn(),An(3,"div"),An(4,"p"),ti(5,"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,"),Cn(),Cn(),Cn())},styles:['.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:"roboto_black";font-size:36px;padding:4vw 4vw 0;text-shadow:0px 15px 5px rgb(0 0 0 / 10%),10px 20px 5px rgb(0 0 0 / 5%),-10px 20px 5px rgb(0 0 0 / 5%)}']}),r})(),MR=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=nr({type:r,selectors:[["app-improve-understanding-life"]],decls:6,vars:0,consts:[["id","Improve-understanding-life",1,"container","flex_column"],[1,"text-center","title"]],template:function(n,T){1&n&&(An(0,"div",0),An(1,"h1",1),ti(2,"To Respect and Care for the Community of Life"),Cn(),An(3,"div"),An(4,"p"),ti(5,"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,"),Cn(),Cn(),Cn())},styles:['.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:"roboto_black";font-size:36px;padding:4vw 4vw 0;text-shadow:0px 15px 5px rgb(0 0 0 / 10%),10px 20px 5px rgb(0 0 0 / 5%),-10px 20px 5px rgb(0 0 0 / 5%)}']}),r})(),kR=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=nr({type:r,selectors:[["app-improve-understanding-integrity"]],decls:6,vars:0,consts:[["id","Improve-understanding-integrity",1,"container","flex_column"],[1,"text-center","title"]],template:function(n,T){1&n&&(An(0,"div",0),An(1,"h1",1),ti(2,"To Respect and Care for Ecological Integrity"),Cn(),An(3,"div"),An(4,"p"),ti(5,"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,"),Cn(),Cn(),Cn())},styles:['.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:"roboto_black";font-size:36px;padding:4vw 4vw 0;text-shadow:0px 15px 5px rgb(0 0 0 / 10%),10px 20px 5px rgb(0 0 0 / 5%),-10px 20px 5px rgb(0 0 0 / 5%)}']}),r})(),AR=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=nr({type:r,selectors:[["app-improve-understanding-justice"]],decls:6,vars:0,consts:[["id","Improve-understanding-justice",1,"container","flex_column"],[1,"text-center","title"]],template:function(n,T){1&n&&(An(0,"div",0),An(1,"h1",1),ti(2,"To Respect and Care for Social and Economic Justice"),Cn(),An(3,"div"),An(4,"p"),ti(5,"Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna. Sed consequat, leo eget bibendum sodales, augue velit cursus nunc,"),Cn(),Cn(),Cn())},styles:['.container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:"roboto_black";font-size:36px;padding:4vw 4vw 0;text-shadow:0px 15px 5px rgb(0 0 0 / 10%),10px 20px 5px rgb(0 0 0 / 5%),-10px 20px 5px rgb(0 0 0 / 5%)}']}),r})(),CR=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=nr({type:r,selectors:[["app-google-form"]],decls:16,vars:0,consts:[[1,"container-fluid"],[1,"row"],[1,"feedback-bg","Google-form","align-middle",2,"background-image","url('./assets/img/google-form-bg.png')"],[1,"col-lg-4","col-md-6","col-sm-8"],[1,"transform-center-parent"],[1,"Google-form-heading","transform-center"],["href","https://docs.google.com/forms/d/e/1FAIpQLSfNDxHrW7POFSOHT50u2cv2LufKqdci9d1wOnE7A-ssVRzgPw/viewform","target","_blank",1,"feedback-btn"]],template:function(n,T){1&n&&(An(0,"div",0),An(1,"div",1),An(2,"div",2),An(3,"div",3),An(4,"div",4),An(5,"div",5),An(6,"h3"),ti(7,"What are the of Your "),An(8,"b"),ti(9,"Country"),Cn(),ti(10," to "),An(11,"span"),ti(12," the Well-being of Our Planet?"),Cn(),Cn(),sa(13,"p"),An(14,"a",6),ti(15,"START EVALUATION FORM"),Cn(),Cn(),Cn(),Cn(),Cn(),Cn(),Cn())},styles:['.feedback-bg[_ngcontent-%COMP%]{max-width:100%;height:auto;background-position:center;background-size:cover}.Google-form[_ngcontent-%COMP%]{min-width:350px}.transform-center-parent[_ngcontent-%COMP%]{position:relative;transform-style:preserve-3d}.transform-center[_ngcontent-%COMP%]{position:relative;top:50%;transform:translateY(70%)}.Google-form-heading[_ngcontent-%COMP%]{font-family:"roboto_regular";padding:0 0 0 20px;align-items:center}.Google-form-heading[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#47d003}.Google-form-heading[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#fff}.Google-form-heading[_ngcontent-%COMP%]   .feedback-btn[_ngcontent-%COMP%]{font-family:"roboto_regular";font-weight:600;font-size:14px;letter-spacing:1px;display:inline-block;padding:8px 28px;border-radius:4px;transition:.5s;background:#47D003;border:2px solid #47D003;color:#fff;margin-top:15px}.Google-form-heading[_ngcontent-%COMP%]   .feedback-btn[_ngcontent-%COMP%]:hover{text-decoration:none}.Google-form-heading[_ngcontent-%COMP%]   .feedback-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.Google-form-heading[_ngcontent-%COMP%]   .feedback-btn[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:none}@media (min-width: 480px){.Google-form[_ngcontent-%COMP%]{height:350px}}@media (min-width: 768px){.Google-form[_ngcontent-%COMP%]{height:350px}}@media (min-width: 992px){.Google-form[_ngcontent-%COMP%]{height:350px}}']}),r})(),ER=(()=>{class r{constructor(){}ngOnInit(){}}return r.\u0275fac=function(n){return new(n||r)},r.\u0275cmp=nr({type:r,selectors:[["app-footer"]],decls:29,vars:0,consts:[[1,"footer"],[1,"footer-top"],[1,"container"],[1,"row","slideanim"],[1,"col-lg-5","col-md-6"],[1,"footer-info"],[1,"col-lg-4","col-md-6","footer-links"],[1,"col-lg-3","col-md-6","footer-newsletter","pull-right"],[1,"social-links","mt-3"],["href","#",1,"twitter"],[1,"bi","bi-twitter"],["href","#",1,"facebook"],[1,"bi","bi-facebook"],["href","#",1,"instagram"],[1,"bi","bi-instagram"],["href","#",1,"linkedin"],[1,"bi","bi-linkedin"],[1,"row"],["onclick","topFunction()","id","topAnchor","title","top"],[1,"bi","bi-arrow-up"]],template:function(n,T){1&n&&(An(0,"footer",0),An(1,"div",1),An(2,"div",2),An(3,"div",3),An(4,"div",4),An(5,"div",5),An(6,"h3"),ti(7,"LOGO"),Cn(),An(8,"h4"),ti(9,"Contributing institution"),Cn(),An(10,"p"),ti(11," Tamen quem nulla quae legam multos aute sint culpa legam noster magn Tamen quem nulla quae legam multos aute sint culpa legam noster magn Tamen quem nulla quae legam multos aute sint culpa legam noster magn. "),Cn(),Cn(),Cn(),sa(12,"div",6),An(13,"div",7),An(14,"h4"),ti(15,"Follow Us"),Cn(),An(16,"div",8),An(17,"a",9),sa(18,"i",10),Cn(),An(19,"a",11),sa(20,"i",12),Cn(),An(21,"a",13),sa(22,"i",14),Cn(),An(23,"a",15),sa(24,"i",16),Cn(),Cn(),Cn(),Cn(),An(25,"div",17),An(26,"button",18),sa(27,"i",19),ti(28," Top"),Cn(),Cn(),Cn(),Cn(),Cn())},styles:['.footer[_ngcontent-%COMP%]{background:#4a5562;padding:0 0 30px;color:#fff;font-size:14px;font-family:"roboto_regular"}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]{background:#515d6a;padding:30px 0}.footer-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#fff}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .footer-info[_ngcontent-%COMP%]{margin-bottom:30px}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .footer-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;margin:0 0 20px;padding:2px 0;line-height:1;font-weight:700}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .footer-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;line-height:24px;margin-bottom:0;color:#fff}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px;display:inline-block;background:rgba(255,255,255,.1);color:#fff;line-height:1;padding:8px 0;margin-right:4px;border-radius:4px;text-align:center;width:36px;height:36px;transition:.3s}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background:#5d8eff;color:#fff;text-decoration:none}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1rem;font-weight:600;color:#fff;position:relative;padding-bottom:12px}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .footer-links[_ngcontent-%COMP%]{margin-bottom:30px}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{padding-right:2px;color:#fff9;font-size:18px;line-height:1}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:10px 0;display:flex;align-items:center}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{padding-top:0}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff9;transition:.3s;display:inline-block;line-height:1}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .footer-links[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#fff}#topAnchor[_ngcontent-%COMP%]{display:none;position:fixed;bottom:35px;right:20px;z-index:99;outline:none;border:none;width:67px;font-weight:500;font-size:14px;padding:14px 24px;transition:.5s;color:#fff;animation-delay:.8s;background:#6e6e6e;border-radius:50%;box-shadow:0 4px 8px #0003,0 6px 20px #00000030}']}),r})(),SR=(()=>{class r{constructor(n,T,R){this.scrollService=n,this.router=T,this.http=R,this.limit=10,this.customOptions={loop:!0,autoplay:!1,center:!0,dots:!1,autoHeight:!0,autoWidth:!0,nav:!0,responsive:{0:{items:1},350:{items:1},500:{items:5}}}}scrollToId(n){console.log("element id : ",n),this.scrollService.scrollToElementById(n)}scrollToElement(n){this.scrollService.scrollToElement(n)}ngOnInit(){this.router.navigate([""])}}return r.\u0275fac=function(n){return new(n||r)(Vr(ly),Vr(qs),Vr(hd))},r.\u0275cmp=nr({type:r,selectors:[["app-root"]],decls:45,vars:0,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"],[1,"container1"],[1,"container","slideanim"],[1,"container-fluid","slideanim"]],template:function(n,T){1&n&&(An(0,"html",0),An(1,"head"),sa(2,"meta",1),sa(3,"meta",2),sa(4,"meta",3),An(5,"title"),ti(6,"Document"),Cn(),Cn(),An(7,"body"),An(8,"div",4),sa(9,"app-header"),sa(10,"app-carousel"),An(11,"section",5),sa(12,"router-outlet"),Cn(),An(13,"section",5),sa(14,"app-improving-contributions"),Cn(),An(15,"section",5),sa(16,"app-improve-understanding"),Cn(),An(17,"section",5),sa(18,"app-index-contributions-planet"),Cn(),An(19,"section",5),sa(20,"app-index-contributions-life"),Cn(),An(21,"section",5),sa(22,"app-index-contributions-integrity"),Cn(),An(23,"section",5),sa(24,"app-index-contributions-justice"),Cn(),An(25,"section",5),sa(26,"app-improving-contributions-planet"),Cn(),An(27,"section",5),sa(28,"app-improving-contributions-life"),Cn(),An(29,"section",5),sa(30,"app-improving-contributions-integrity"),Cn(),An(31,"section",5),sa(32,"app-improving-contributions-justice"),Cn(),An(33,"section",5),sa(34,"app-improve-understanding-planet"),Cn(),An(35,"section",5),sa(36,"app-improve-understanding-life"),Cn(),An(37,"section",5),sa(38,"app-improve-understanding-integrity"),Cn(),An(39,"section",5),sa(40,"app-improve-understanding-justice"),Cn(),An(41,"section",6),sa(42,"app-google-form"),Cn(),An(43,"section",6),sa(44,"app-footer"),Cn(),Cn(),Cn(),Cn())},directives:[fR,hR,pb,dR,pR,gR,mR,vR,yR,xR,bR,_R,wR,TR,MR,kR,AR,CR,ER],styles:['html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{overflow-x:hidden!important}.container[_ngcontent-%COMP%]{overflow:hidden}header[_ngcontent-%COMP%], section[_ngcontent-%COMP%]{width:100%}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none}ol[_ngcontent-%COMP%], ul[_ngcontent-%COMP%]{margin:0;padding:0;list-style:none}figure[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{margin:0}h1[_ngcontent-%COMP%]{font-family:"roboto_bold"}h2[_ngcontent-%COMP%], h3[_ngcontent-%COMP%], h4[_ngcontent-%COMP%], h5[_ngcontent-%COMP%], h6[_ngcontent-%COMP%]{font-family:"roboto_black"}@font-face{font-family:"roboto_light";src:url(Roboto-Light.7cedccda2feb66b96d7a.ttf) format("TrueType");font-size-adjust:inherit;font-size-adjust:initial;font-size-adjust:revert;font-size-adjust:unset}@font-face{font-family:"roboto_bold";src:url(Roboto-Bold.29d0602f3c74d2be2107.ttf) format("TrueType");font-size-adjust:inherit;font-size-adjust:initial;font-size-adjust:revert;font-size-adjust:unset}@font-face{font-family:"roboto_italic";src:url(Roboto-Italic.7c3d3d7f355bf68be5e2.ttf) format("TrueType");font-size-adjust:inherit;font-size-adjust:initial;font-size-adjust:revert;font-size-adjust:unset}@font-face{font-family:"roboto_black";src:url(Roboto-Black.8a9f3a95651d044db186.ttf) format("TrueType");font-size-adjust:inherit;font-size-adjust:initial;font-size-adjust:revert;font-size-adjust:unset}@font-face{font-family:"roboto_regular";src:url(Roboto-Regular.04b605aa85f24816e3e6.ttf) format("TrueType");font-size-adjust:inherit;font-size-adjust:initial;font-size-adjust:revert;font-size-adjust:unset}@font-face{font-family:"roboto_medium";src:url(Roboto-Light.7cedccda2feb66b96d7a.ttf) format("TrueType");font-size-adjust:inherit;font-size-adjust:initial;font-size-adjust:revert;font-size-adjust:unset}.slideanim[_ngcontent-%COMP%]{visibility:hidden;visibility:visible\\\t}.slideanim.slide[_ngcontent-%COMP%]{visibility:visible;animation:slide 1s}section[_ngcontent-%COMP%]{padding-top:40px}.slideanim[_ngcontent-%COMP%]:after{content:"";display:table;clear:both}@keyframes slide{0%{opacity:0;transform:translateY(50%)}to{opacity:1;transform:translateY(0)}}.top_container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:100%;min-height:auto}.container[_ngcontent-%COMP%]{padding:0!important;width:100%!important}.section_inner1[_ngcontent-%COMP%]{display:table;width:100%;height:50%}.chart[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}']}),r.\u0275prov=Dn({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),DR=(()=>{class r{}return r.\u0275fac=function(n){return new(n||r)},r.\u0275mod=Er({type:r,bootstrap:[SR]}),r.\u0275inj=rn({providers:[Mg],imports:[[iT,cR,y9,Tk,Hk]]}),r})();(function(){if(q3)throw new Error("Cannot enable prod mode after platform setup.");H3=!1})(),pP().bootstrapModule(DR).catch(r=>console.error(r))}},bh=>{bh(bh.s=647)}]);